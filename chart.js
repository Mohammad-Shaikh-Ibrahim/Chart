function fm(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Sl={exports:{}},Lo={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uc;function gm(){if(Uc)return Lo;Uc=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,s,n){var o=null;if(n!==void 0&&(o=""+n),s.key!==void 0&&(o=""+s.key),"key"in s){n={};for(var h in s)h!=="key"&&(n[h]=s[h])}else n=s;return s=n.ref,{$$typeof:r,type:i,key:o,ref:s!==void 0?s:null,props:n}}return Lo.Fragment=t,Lo.jsx=e,Lo.jsxs=e,Lo}var Gc;function ym(){return Gc||(Gc=1,Sl.exports=gm()),Sl.exports}var mm=ym(),Al={exports:{}},Vt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oc;function pm(){if(Oc)return Vt;Oc=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),n=Symbol.for("react.consumer"),o=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),a=Symbol.for("react.suspense"),l=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),c=Symbol.iterator;function d(I){return I===null||typeof I!="object"?null:(I=c&&I[c]||I["@@iterator"],typeof I=="function"?I:null)}var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,y={};function p(I,L,U){this.props=I,this.context=L,this.refs=y,this.updater=U||f}p.prototype.isReactComponent={},p.prototype.setState=function(I,L){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,L,"setState")},p.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function x(){}x.prototype=p.prototype;function A(I,L,U){this.props=I,this.context=L,this.refs=y,this.updater=U||f}var v=A.prototype=new x;v.constructor=A,g(v,p.prototype),v.isPureReactComponent=!0;var w=Array.isArray,E={H:null,A:null,T:null,S:null,V:null},C=Object.prototype.hasOwnProperty;function k(I,L,U,Y,O,j){return U=j.ref,{$$typeof:r,type:I,key:L,ref:U!==void 0?U:null,props:j}}function F(I,L){return k(I.type,L,void 0,void 0,void 0,I.props)}function m(I){return typeof I=="object"&&I!==null&&I.$$typeof===r}function S(I){var L={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(U){return L[U]})}var b=/\/+/g;function M(I,L){return typeof I=="object"&&I!==null&&I.key!=null?S(""+I.key):L.toString(36)}function R(){}function T(I){switch(I.status){case"fulfilled":return I.value;case"rejected":throw I.reason;default:switch(typeof I.status=="string"?I.then(R,R):(I.status="pending",I.then(function(L){I.status==="pending"&&(I.status="fulfilled",I.value=L)},function(L){I.status==="pending"&&(I.status="rejected",I.reason=L)})),I.status){case"fulfilled":return I.value;case"rejected":throw I.reason}}throw I}function z(I,L,U,Y,O){var j=typeof I;(j==="undefined"||j==="boolean")&&(I=null);var $=!1;if(I===null)$=!0;else switch(j){case"bigint":case"string":case"number":$=!0;break;case"object":switch(I.$$typeof){case r:case t:$=!0;break;case u:return $=I._init,z($(I._payload),L,U,Y,O)}}if($)return O=O(I),$=Y===""?"."+M(I,0):Y,w(O)?(U="",$!=null&&(U=$.replace(b,"$&/")+"/"),z(O,L,U,"",function(ct){return ct})):O!=null&&(m(O)&&(O=F(O,U+(O.key==null||I&&I.key===O.key?"":(""+O.key).replace(b,"$&/")+"/")+$)),L.push(O)),1;$=0;var Z=Y===""?".":Y+":";if(w(I))for(var Q=0;Q<I.length;Q++)Y=I[Q],j=Z+M(Y,Q),$+=z(Y,L,U,j,O);else if(Q=d(I),typeof Q=="function")for(I=Q.call(I),Q=0;!(Y=I.next()).done;)Y=Y.value,j=Z+M(Y,Q++),$+=z(Y,L,U,j,O);else if(j==="object"){if(typeof I.then=="function")return z(T(I),L,U,Y,O);throw L=String(I),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.")}return $}function P(I,L,U){if(I==null)return I;var Y=[],O=0;return z(I,Y,"","",function(j){return L.call(U,j,O++)}),Y}function _(I){if(I._status===-1){var L=I._result;L=L(),L.then(function(U){(I._status===0||I._status===-1)&&(I._status=1,I._result=U)},function(U){(I._status===0||I._status===-1)&&(I._status=2,I._result=U)}),I._status===-1&&(I._status=0,I._result=L)}if(I._status===1)return I._result.default;throw I._result}var V=typeof reportError=="function"?reportError:function(I){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var L=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof I=="object"&&I!==null&&typeof I.message=="string"?String(I.message):String(I),error:I});if(!window.dispatchEvent(L))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",I);return}console.error(I)};function B(){}return Vt.Children={map:P,forEach:function(I,L,U){P(I,function(){L.apply(this,arguments)},U)},count:function(I){var L=0;return P(I,function(){L++}),L},toArray:function(I){return P(I,function(L){return L})||[]},only:function(I){if(!m(I))throw Error("React.Children.only expected to receive a single React element child.");return I}},Vt.Component=p,Vt.Fragment=e,Vt.Profiler=s,Vt.PureComponent=A,Vt.StrictMode=i,Vt.Suspense=a,Vt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=E,Vt.__COMPILER_RUNTIME={__proto__:null,c:function(I){return E.H.useMemoCache(I)}},Vt.cache=function(I){return function(){return I.apply(null,arguments)}},Vt.cloneElement=function(I,L,U){if(I==null)throw Error("The argument must be a React element, but you passed "+I+".");var Y=g({},I.props),O=I.key,j=void 0;if(L!=null)for($ in L.ref!==void 0&&(j=void 0),L.key!==void 0&&(O=""+L.key),L)!C.call(L,$)||$==="key"||$==="__self"||$==="__source"||$==="ref"&&L.ref===void 0||(Y[$]=L[$]);var $=arguments.length-2;if($===1)Y.children=U;else if(1<$){for(var Z=Array($),Q=0;Q<$;Q++)Z[Q]=arguments[Q+2];Y.children=Z}return k(I.type,O,void 0,void 0,j,Y)},Vt.createContext=function(I){return I={$$typeof:o,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null},I.Provider=I,I.Consumer={$$typeof:n,_context:I},I},Vt.createElement=function(I,L,U){var Y,O={},j=null;if(L!=null)for(Y in L.key!==void 0&&(j=""+L.key),L)C.call(L,Y)&&Y!=="key"&&Y!=="__self"&&Y!=="__source"&&(O[Y]=L[Y]);var $=arguments.length-2;if($===1)O.children=U;else if(1<$){for(var Z=Array($),Q=0;Q<$;Q++)Z[Q]=arguments[Q+2];O.children=Z}if(I&&I.defaultProps)for(Y in $=I.defaultProps,$)O[Y]===void 0&&(O[Y]=$[Y]);return k(I,j,void 0,void 0,null,O)},Vt.createRef=function(){return{current:null}},Vt.forwardRef=function(I){return{$$typeof:h,render:I}},Vt.isValidElement=m,Vt.lazy=function(I){return{$$typeof:u,_payload:{_status:-1,_result:I},_init:_}},Vt.memo=function(I,L){return{$$typeof:l,type:I,compare:L===void 0?null:L}},Vt.startTransition=function(I){var L=E.T,U={};E.T=U;try{var Y=I(),O=E.S;O!==null&&O(U,Y),typeof Y=="object"&&Y!==null&&typeof Y.then=="function"&&Y.then(B,V)}catch(j){V(j)}finally{E.T=L}},Vt.unstable_useCacheRefresh=function(){return E.H.useCacheRefresh()},Vt.use=function(I){return E.H.use(I)},Vt.useActionState=function(I,L,U){return E.H.useActionState(I,L,U)},Vt.useCallback=function(I,L){return E.H.useCallback(I,L)},Vt.useContext=function(I){return E.H.useContext(I)},Vt.useDebugValue=function(){},Vt.useDeferredValue=function(I,L){return E.H.useDeferredValue(I,L)},Vt.useEffect=function(I,L,U){var Y=E.H;if(typeof U=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Y.useEffect(I,L)},Vt.useId=function(){return E.H.useId()},Vt.useImperativeHandle=function(I,L,U){return E.H.useImperativeHandle(I,L,U)},Vt.useInsertionEffect=function(I,L){return E.H.useInsertionEffect(I,L)},Vt.useLayoutEffect=function(I,L){return E.H.useLayoutEffect(I,L)},Vt.useMemo=function(I,L){return E.H.useMemo(I,L)},Vt.useOptimistic=function(I,L){return E.H.useOptimistic(I,L)},Vt.useReducer=function(I,L,U){return E.H.useReducer(I,L,U)},Vt.useRef=function(I){return E.H.useRef(I)},Vt.useState=function(I){return E.H.useState(I)},Vt.useSyncExternalStore=function(I,L,U){return E.H.useSyncExternalStore(I,L,U)},Vt.useTransition=function(){return E.H.useTransition()},Vt.version="19.1.0",Vt}var Yc;function xm(){return Yc||(Yc=1,Al.exports=pm()),Al.exports}var vl=xm(),mh="delete",ze=5,Ns=1<<ze,Wi=Ns-1,Qt={};function Zl(){return{value:!1}}function Ls(r){r&&(r.value=!0)}function ku(){}function to(r){return r.size===void 0&&(r.size=r.__iterate(f0)),r.size}function qr(r,t){if(typeof t!="number"){var e=t>>>0;if(""+e!==t||e===4294967295)return NaN;t=e}return t<0?to(r)+t:t}function f0(){return!0}function Ya(r,t,e){return(r===0&&!y0(r)||e!==void 0&&r<=-e)&&(t===void 0||e!==void 0&&t>=e)}function ph(r,t){return g0(r,t,0)}function Wa(r,t){return g0(r,t,t)}function g0(r,t,e){return r===void 0?e:y0(r)?t===1/0?t:Math.max(0,t+r)|0:t===void 0||t===r?r:Math.min(t,r)|0}function y0(r){return r<0||r===0&&1/r===-1/0}var m0="@@__IMMUTABLE_ITERABLE__@@";function fs(r){return!!(r&&r[m0])}var p0="@@__IMMUTABLE_KEYED__@@";function We(r){return!!(r&&r[p0])}var x0="@@__IMMUTABLE_INDEXED__@@";function ls(r){return!!(r&&r[x0])}function Ha(r){return We(r)||ls(r)}var ti=function(t){return fs(t)?t:Cs(t)},Gs=function(r){function t(e){return We(e)?e:tn(e)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t}(ti),Cn=function(r){function t(e){return ls(e)?e:Ks(e)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t}(ti),xo=function(r){function t(e){return fs(e)&&!Ha(e)?e:bo(e)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t}(ti);ti.Keyed=Gs;ti.Indexed=Cn;ti.Set=xo;var S0="@@__IMMUTABLE_SEQ__@@";function Tu(r){return!!(r&&r[S0])}var A0="@@__IMMUTABLE_RECORD__@@";function So(r){return!!(r&&r[A0])}function Sr(r){return fs(r)||So(r)}var Ao="@@__IMMUTABLE_ORDERED__@@";function js(r){return!!(r&&r[Ao])}var xh=0,Qs=1,Us=2,Ql=typeof Symbol=="function"&&Symbol.iterator,v0="@@iterator",Xa=Ql||v0,fe=function(t){this.next=t};fe.prototype.toString=function(){return"[Iterator]"};fe.KEYS=xh;fe.VALUES=Qs;fe.ENTRIES=Us;fe.prototype.inspect=fe.prototype.toSource=function(){return this.toString()};fe.prototype[Xa]=function(){return this};function He(r,t,e,i){var s=r===0?t:r===1?e:[t,e];return i?i.value=s:i={value:s,done:!1},i}function gs(){return{value:void 0,done:!0}}function b0(r){return Array.isArray(r)?!0:!!$a(r)}function Wc(r){return r&&typeof r.next=="function"}function Kl(r){var t=$a(r);return t&&t.call(r)}function $a(r){var t=r&&(Ql&&r[Ql]||r[v0]);if(typeof t=="function")return t}function Sm(r){var t=$a(r);return t&&t===r.entries}function Am(r){var t=$a(r);return t&&t===r.keys}var vo=Object.prototype.hasOwnProperty;function M0(r){return Array.isArray(r)||typeof r=="string"?!0:r&&typeof r=="object"&&Number.isInteger(r.length)&&r.length>=0&&(r.length===0?Object.keys(r).length===1:r.hasOwnProperty(r.length-1))}var Cs=function(r){function t(e){return e==null?Fu():Sr(e)?e.toSeq():bm(e)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.toSeq=function(){return this},t.prototype.toString=function(){return this.__toString("Seq {","}")},t.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},t.prototype.__iterate=function(i,s){var n=this._cache;if(n){for(var o=n.length,h=0;h!==o;){var a=n[s?o-++h:h++];if(i(a[1],a[0],this)===!1)break}return h}return this.__iterateUncached(i,s)},t.prototype.__iterator=function(i,s){var n=this._cache;if(n){var o=n.length,h=0;return new fe(function(){if(h===o)return gs();var a=n[s?o-++h:h++];return He(i,a[0],a[1])})}return this.__iteratorUncached(i,s)},t}(ti),tn=function(r){function t(e){return e==null?Fu().toKeyedSeq():fs(e)?We(e)?e.toSeq():e.fromEntrySeq():So(e)?e.toSeq():Du(e)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.toKeyedSeq=function(){return this},t}(Cs),Ks=function(r){function t(e){return e==null?Fu():fs(e)?We(e)?e.entrySeq():e.toIndexedSeq():So(e)?e.toSeq().entrySeq():R0(e)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.of=function(){return t(arguments)},t.prototype.toIndexedSeq=function(){return this},t.prototype.toString=function(){return this.__toString("Seq [","]")},t}(Cs),bo=function(r){function t(e){return(fs(e)&&!Ha(e)?e:Ks(e)).toSetSeq()}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.of=function(){return t(arguments)},t.prototype.toSetSeq=function(){return this},t}(Cs);Cs.isSeq=Tu;Cs.Keyed=tn;Cs.Set=bo;Cs.Indexed=Ks;Cs.prototype[S0]=!0;var An=function(r){function t(e){this._array=e,this.size=e.length}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.get=function(i,s){return this.has(i)?this._array[qr(this,i)]:s},t.prototype.__iterate=function(i,s){for(var n=this._array,o=n.length,h=0;h!==o;){var a=s?o-++h:h++;if(i(n[a],a,this)===!1)break}return h},t.prototype.__iterator=function(i,s){var n=this._array,o=n.length,h=0;return new fe(function(){if(h===o)return gs();var a=s?o-++h:h++;return He(i,a,n[a])})},t}(Ks),Cu=function(r){function t(e){var i=Object.keys(e).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e):[]);this._object=e,this._keys=i,this.size=i.length}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.get=function(i,s){return s!==void 0&&!this.has(i)?s:this._object[i]},t.prototype.has=function(i){return vo.call(this._object,i)},t.prototype.__iterate=function(i,s){for(var n=this._object,o=this._keys,h=o.length,a=0;a!==h;){var l=o[s?h-++a:a++];if(i(n[l],l,this)===!1)break}return a},t.prototype.__iterator=function(i,s){var n=this._object,o=this._keys,h=o.length,a=0;return new fe(function(){if(a===h)return gs();var l=o[s?h-++a:a++];return He(i,l,n[l])})},t}(tn);Cu.prototype[Ao]=!0;var vm=function(r){function t(e){this._collection=e,this.size=e.length||e.size}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.__iterateUncached=function(i,s){if(s)return this.cacheResult().__iterate(i,s);var n=this._collection,o=Kl(n),h=0;if(Wc(o))for(var a;!(a=o.next()).done&&i(a.value,h++,this)!==!1;);return h},t.prototype.__iteratorUncached=function(i,s){if(s)return this.cacheResult().__iterator(i,s);var n=this._collection,o=Kl(n);if(!Wc(o))return new fe(gs);var h=0;return new fe(function(){var a=o.next();return a.done?a:He(i,h++,a.value)})},t}(Ks),Hc;function Fu(){return Hc||(Hc=new An([]))}function Du(r){var t=Pu(r);if(t)return t.fromEntrySeq();if(typeof r=="object")return new Cu(r);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+r)}function R0(r){var t=Pu(r);if(t)return t;throw new TypeError("Expected Array or collection object of values: "+r)}function bm(r){var t=Pu(r);if(t)return Sm(r)?t.fromEntrySeq():Am(r)?t.toSetSeq():t;if(typeof r=="object")return new Cu(r);throw new TypeError("Expected Array or collection object of values, or keyed object: "+r)}function Pu(r){return M0(r)?new An(r):b0(r)?new vm(r):void 0}var E0="@@__IMMUTABLE_MAP__@@";function Iu(r){return!!(r&&r[E0])}function w0(r){return Iu(r)&&js(r)}function Xc(r){return!!(r&&typeof r.equals=="function"&&typeof r.hashCode=="function")}function ks(r,t){if(r===t||r!==r&&t!==t)return!0;if(!r||!t)return!1;if(typeof r.valueOf=="function"&&typeof t.valueOf=="function"){if(r=r.valueOf(),t=t.valueOf(),r===t||r!==r&&t!==t)return!0;if(!r||!t)return!1}return!!(Xc(r)&&Xc(t)&&r.equals(t))}var zo=typeof Math.imul=="function"&&Math.imul(4294967295,2)===-2?Math.imul:function(t,e){t|=0,e|=0;var i=t&65535,s=e&65535;return i*s+((t>>>16)*s+i*(e>>>16)<<16>>>0)|0};function ja(r){return r>>>1&1073741824|r&3221225471}var Mm=Object.prototype.valueOf;function Es(r){if(r==null)return $c(r);if(typeof r.hashCode=="function")return ja(r.hashCode(r));var t=Cm(r);if(t==null)return $c(t);switch(typeof t){case"boolean":return t?1108378657:1108378656;case"number":return Rm(t);case"string":return t.length>Fm?Em(t):tu(t);case"object":case"function":return km(t);case"symbol":return wm(t);default:if(typeof t.toString=="function")return tu(t.toString());throw new Error("Value type "+typeof t+" cannot be hashed.")}}function $c(r){return r===null?1108378658:1108378659}function Rm(r){if(r!==r||r===1/0)return 0;var t=r|0;for(t!==r&&(t^=r*4294967295);r>4294967295;)r/=4294967295,t^=r;return ja(t)}function Em(r){var t=Rl[r];return t===void 0&&(t=tu(r),Ml===Dm&&(Ml=0,Rl={}),Ml++,Rl[r]=t),t}function tu(r){for(var t=0,e=0;e<r.length;e++)t=31*t+r.charCodeAt(e)|0;return ja(t)}function wm(r){var t=Jc[r];return t!==void 0||(t=k0(),Jc[r]=t),t}function km(r){var t;if(eu&&(t=iu.get(r),t!==void 0)||(t=r[fn],t!==void 0)||!qc&&(t=r.propertyIsEnumerable&&r.propertyIsEnumerable[fn],t!==void 0||(t=Tm(r),t!==void 0)))return t;if(t=k0(),eu)iu.set(r,t);else{if(jc!==void 0&&jc(r)===!1)throw new Error("Non-extensible objects are not allowed as keys.");if(qc)Object.defineProperty(r,fn,{enumerable:!1,configurable:!1,writable:!1,value:t});else if(r.propertyIsEnumerable!==void 0&&r.propertyIsEnumerable===r.constructor.prototype.propertyIsEnumerable)r.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},r.propertyIsEnumerable[fn]=t;else if(r.nodeType!==void 0)r[fn]=t;else throw new Error("Unable to set a non-enumerable property on object.")}return t}var jc=Object.isExtensible,qc=function(){try{return Object.defineProperty({},"@",{}),!0}catch{return!1}}();function Tm(r){if(r&&r.nodeType>0)switch(r.nodeType){case 1:return r.uniqueID;case 9:return r.documentElement&&r.documentElement.uniqueID}}function Cm(r){return r.valueOf!==Mm&&typeof r.valueOf=="function"?r.valueOf(r):r}function k0(){var r=++bl;return bl&1073741824&&(bl=0),r}var eu=typeof WeakMap=="function",iu;eu&&(iu=new WeakMap);var Jc=Object.create(null),bl=0,fn="__immutablehash__";typeof Symbol=="function"&&(fn=Symbol(fn));var Fm=16,Dm=255,Ml=0,Rl={},qa=function(r){function t(e,i){this._iter=e,this._useKeys=i,this.size=e.size}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.get=function(i,s){return this._iter.get(i,s)},t.prototype.has=function(i){return this._iter.has(i)},t.prototype.valueSeq=function(){return this._iter.valueSeq()},t.prototype.reverse=function(){var i=this,s=Vu(this,!0);return this._useKeys||(s.valueSeq=function(){return i._iter.toSeq().reverse()}),s},t.prototype.map=function(i,s){var n=this,o=P0(this,i,s);return this._useKeys||(o.valueSeq=function(){return n._iter.toSeq().map(i,s)}),o},t.prototype.__iterate=function(i,s){var n=this;return this._iter.__iterate(function(o,h){return i(o,h,n)},s)},t.prototype.__iterator=function(i,s){return this._iter.__iterator(i,s)},t}(tn);qa.prototype[Ao]=!0;var T0=function(r){function t(e){this._iter=e,this.size=e.size}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.includes=function(i){return this._iter.includes(i)},t.prototype.__iterate=function(i,s){var n=this,o=0;return s&&to(this),this._iter.__iterate(function(h){return i(h,s?n.size-++o:o++,n)},s)},t.prototype.__iterator=function(i,s){var n=this,o=this._iter.__iterator(Qs,s),h=0;return s&&to(this),new fe(function(){var a=o.next();return a.done?a:He(i,s?n.size-++h:h++,a.value,a)})},t}(Ks),C0=function(r){function t(e){this._iter=e,this.size=e.size}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.has=function(i){return this._iter.includes(i)},t.prototype.__iterate=function(i,s){var n=this;return this._iter.__iterate(function(o){return i(o,o,n)},s)},t.prototype.__iterator=function(i,s){var n=this._iter.__iterator(Qs,s);return new fe(function(){var o=n.next();return o.done?o:He(i,o.value,o.value,o)})},t}(bo),F0=function(r){function t(e){this._iter=e,this.size=e.size}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.entrySeq=function(){return this._iter.toSeq()},t.prototype.__iterate=function(i,s){var n=this;return this._iter.__iterate(function(o){if(o){Qc(o);var h=fs(o);return i(h?o.get(1):o[1],h?o.get(0):o[0],n)}},s)},t.prototype.__iterator=function(i,s){var n=this._iter.__iterator(Qs,s);return new fe(function(){for(;;){var o=n.next();if(o.done)return o;var h=o.value;if(h){Qc(h);var a=fs(h);return He(i,a?h.get(0):h[0],a?h.get(1):h[1],o)}}})},t}(tn);T0.prototype.cacheResult=qa.prototype.cacheResult=C0.prototype.cacheResult=F0.prototype.cacheResult=Lu;function D0(r){var t=Ar(r);return t._iter=r,t.size=r.size,t.flip=function(){return r},t.reverse=function(){var e=r.reverse.apply(this);return e.flip=function(){return r.reverse()},e},t.has=function(e){return r.includes(e)},t.includes=function(e){return r.has(e)},t.cacheResult=Lu,t.__iterateUncached=function(e,i){var s=this;return r.__iterate(function(n,o){return e(o,n,s)!==!1},i)},t.__iteratorUncached=function(e,i){if(e===Us){var s=r.__iterator(e,i);return new fe(function(){var n=s.next();if(!n.done){var o=n.value[0];n.value[0]=n.value[1],n.value[1]=o}return n})}return r.__iterator(e===Qs?xh:Qs,i)},t}function P0(r,t,e){var i=Ar(r);return i.size=r.size,i.has=function(s){return r.has(s)},i.get=function(s,n){var o=r.get(s,Qt);return o===Qt?n:t.call(e,o,s,r)},i.__iterateUncached=function(s,n){var o=this;return r.__iterate(function(h,a,l){return s(t.call(e,h,a,l),a,o)!==!1},n)},i.__iteratorUncached=function(s,n){var o=r.__iterator(Us,n);return new fe(function(){var h=o.next();if(h.done)return h;var a=h.value,l=a[0];return He(s,l,t.call(e,a[1],l,r),h)})},i}function Vu(r,t){var e=this,i=Ar(r);return i._iter=r,i.size=r.size,i.reverse=function(){return r},r.flip&&(i.flip=function(){var s=D0(r);return s.reverse=function(){return r.flip()},s}),i.get=function(s,n){return r.get(t?s:-1-s,n)},i.has=function(s){return r.has(t?s:-1-s)},i.includes=function(s){return r.includes(s)},i.cacheResult=Lu,i.__iterate=function(s,n){var o=this,h=0;return n&&to(r),r.__iterate(function(a,l){return s(a,t?l:n?o.size-++h:h++,o)},!n)},i.__iterator=function(s,n){var o=0;n&&to(r);var h=r.__iterator(Us,!n);return new fe(function(){var a=h.next();if(a.done)return a;var l=a.value;return He(s,t?l[0]:n?e.size-++o:o++,l[1],a)})},i}function I0(r,t,e,i){var s=Ar(r);return i&&(s.has=function(n){var o=r.get(n,Qt);return o!==Qt&&!!t.call(e,o,n,r)},s.get=function(n,o){var h=r.get(n,Qt);return h!==Qt&&t.call(e,h,n,r)?h:o}),s.__iterateUncached=function(n,o){var h=this,a=0;return r.__iterate(function(l,u,c){if(t.call(e,l,u,c))return a++,n(l,i?u:a-1,h)},o),a},s.__iteratorUncached=function(n,o){var h=r.__iterator(Us,o),a=0;return new fe(function(){for(;;){var l=h.next();if(l.done)return l;var u=l.value,c=u[0],d=u[1];if(t.call(e,d,c,r))return He(n,i?c:a++,d,l)}})},s}function Pm(r,t,e){var i=Ro().asMutable();return r.__iterate(function(s,n){i.update(t.call(e,s,n,r),0,function(o){return o+1})}),i.asImmutable()}function Im(r,t,e){var i=We(r),s=(js(r)?Fr():Ro()).asMutable();r.__iterate(function(o,h){s.update(t.call(e,o,h,r),function(a){return a=a||[],a.push(i?[h,o]:o),a})});var n=Nu(r);return s.map(function(o){return Fe(r,n(o))}).asImmutable()}function Vm(r,t,e){var i=We(r),s=[[],[]];r.__iterate(function(o,h){s[t.call(e,o,h,r)?1:0].push(i?[h,o]:o)});var n=Nu(r);return s.map(function(o){return Fe(r,n(o))})}function _u(r,t,e,i){var s=r.size;if(Ya(t,e,s))return r;if(typeof s>"u"&&(t<0||e<0))return _u(r.toSeq().cacheResult(),t,e,i);var n=ph(t,s),o=Wa(e,s),h=o-n,a;h===h&&(a=h<0?0:h);var l=Ar(r);return l.size=a===0?a:r.size&&a||void 0,!i&&Tu(r)&&a>=0&&(l.get=function(u,c){return u=qr(this,u),u>=0&&u<a?r.get(u+n,c):c}),l.__iterateUncached=function(u,c){var d=this;if(a===0)return 0;if(c)return this.cacheResult().__iterate(u,c);var f=0,g=!0,y=0;return r.__iterate(function(p,x){if(!(g&&(g=f++<n)))return y++,u(p,i?x:y-1,d)!==!1&&y!==a}),y},l.__iteratorUncached=function(u,c){if(a!==0&&c)return this.cacheResult().__iterator(u,c);if(a===0)return new fe(gs);var d=r.__iterator(u,c),f=0,g=0;return new fe(function(){for(;f++<n;)d.next();if(++g>a)return gs();var y=d.next();return i||u===Qs||y.done?y:u===xh?He(u,g-1,void 0,y):He(u,g-1,y.value[1],y)})},l}function _m(r,t,e){var i=Ar(r);return i.__iterateUncached=function(s,n){var o=this;if(n)return this.cacheResult().__iterate(s,n);var h=0;return r.__iterate(function(a,l,u){return t.call(e,a,l,u)&&++h&&s(a,l,o)}),h},i.__iteratorUncached=function(s,n){var o=this;if(n)return this.cacheResult().__iterator(s,n);var h=r.__iterator(Us,n),a=!0;return new fe(function(){if(!a)return gs();var l=h.next();if(l.done)return l;var u=l.value,c=u[0],d=u[1];return t.call(e,d,c,o)?s===Us?l:He(s,c,d,l):(a=!1,gs())})},i}function V0(r,t,e,i){var s=Ar(r);return s.__iterateUncached=function(n,o){var h=this;if(o)return this.cacheResult().__iterate(n,o);var a=!0,l=0;return r.__iterate(function(u,c,d){if(!(a&&(a=t.call(e,u,c,d))))return l++,n(u,i?c:l-1,h)}),l},s.__iteratorUncached=function(n,o){var h=this;if(o)return this.cacheResult().__iterator(n,o);var a=r.__iterator(Us,o),l=!0,u=0;return new fe(function(){var c,d,f;do{if(c=a.next(),c.done)return i||n===Qs?c:n===xh?He(n,u++,void 0,c):He(n,u++,c.value[1],c);var g=c.value;d=g[0],f=g[1],l&&(l=t.call(e,f,d,h))}while(l);return n===Us?c:He(n,d,f,c)})},s}function Nm(r,t){var e=We(r),i=[r].concat(t).map(function(o){return fs(o)?e&&(o=Gs(o)):o=e?Du(o):R0(Array.isArray(o)?o:[o]),o}).filter(function(o){return o.size!==0});if(i.length===0)return r;if(i.length===1){var s=i[0];if(s===r||e&&We(s)||ls(r)&&ls(s))return s}var n=new An(i);return e?n=n.toKeyedSeq():ls(r)||(n=n.toSetSeq()),n=n.flatten(!0),n.size=i.reduce(function(o,h){if(o!==void 0){var a=h.size;if(a!==void 0)return o+a}},0),n}function _0(r,t,e){var i=Ar(r);return i.__iterateUncached=function(s,n){if(n)return this.cacheResult().__iterate(s,n);var o=0,h=!1;function a(l,u){l.__iterate(function(c,d){return(!t||u<t)&&fs(c)?a(c,u+1):(o++,s(c,e?d:o-1,i)===!1&&(h=!0)),!h},n)}return a(r,0),o},i.__iteratorUncached=function(s,n){if(n)return this.cacheResult().__iterator(s,n);var o=r.__iterator(s,n),h=[],a=0;return new fe(function(){for(;o;){var l=o.next();if(l.done!==!1){o=h.pop();continue}var u=l.value;if(s===Us&&(u=u[1]),(!t||h.length<t)&&fs(u))h.push(o),o=u.__iterator(s,n);else return e?l:He(s,a++,u,l)}return gs()})},i}function Lm(r,t,e){var i=Nu(r);return r.toSeq().map(function(s,n){return i(t.call(e,s,n,r))}).flatten(!0)}function zm(r,t){var e=Ar(r);return e.size=r.size&&r.size*2-1,e.__iterateUncached=function(i,s){var n=this,o=0;return r.__iterate(function(h){return(!o||i(t,o++,n)!==!1)&&i(h,o++,n)!==!1},s),o},e.__iteratorUncached=function(i,s){var n=r.__iterator(Qs,s),o=0,h;return new fe(function(){return(!h||o%2)&&(h=n.next(),h.done)?h:o%2?He(i,o++,t):He(i,o++,h.value,h)})},e}function eo(r,t,e){t||(t=N0);var i=We(r),s=0,n=r.toSeq().map(function(o,h){return[h,o,s++,e?e(o,h,r):o]}).valueSeq().toArray();return n.sort(function(o,h){return t(o[3],h[3])||o[2]-h[2]}).forEach(i?function(o,h){n[h].length=2}:function(o,h){n[h]=o[1]}),i?tn(n):ls(r)?Ks(n):bo(n)}function Oh(r,t,e){if(t||(t=N0),e){var i=r.toSeq().map(function(s,n){return[s,e(s,n,r)]}).reduce(function(s,n){return Zc(t,s[1],n[1])?n:s});return i&&i[0]}return r.reduce(function(s,n){return Zc(t,s,n)?n:s})}function Zc(r,t,e){var i=r(e,t);return i===0&&e!==t&&(e==null||e!==e)||i>0}function Yh(r,t,e,i){var s=Ar(r),n=new An(e).map(function(o){return o.size});return s.size=i?n.max():n.min(),s.__iterate=function(o,h){for(var a=this.__iterator(Qs,h),l,u=0;!(l=a.next()).done&&o(l.value,u++,this)!==!1;);return u},s.__iteratorUncached=function(o,h){var a=e.map(function(c){return c=ti(c),Kl(h?c.reverse():c)}),l=0,u=!1;return new fe(function(){var c;return u||(c=a.map(function(d){return d.next()}),u=i?c.every(function(d){return d.done}):c.some(function(d){return d.done})),u?gs():He(o,l++,t.apply(null,c.map(function(d){return d.value})))})},s}function Fe(r,t){return r===t?r:Tu(r)?t:r.constructor(t)}function Qc(r){if(r!==Object(r))throw new TypeError("Expected [K, V] tuple: "+r)}function Nu(r){return We(r)?Gs:ls(r)?Cn:xo}function Ar(r){return Object.create((We(r)?tn:ls(r)?Ks:bo).prototype)}function Lu(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):Cs.prototype.cacheResult.call(this)}function N0(r,t){return r===void 0&&t===void 0?0:r===void 0?1:t===void 0?-1:r>t?1:r<t?-1:0}function ar(r,t){t=t||0;for(var e=Math.max(0,r.length-t),i=new Array(e),s=0;s<e;s++)i[s]=r[s+t];return i}function zu(r,t){if(!r)throw new Error(t)}function ws(r){zu(r!==1/0,"Cannot perform this action with an infinite size.")}function L0(r){if(M0(r)&&typeof r!="string")return r;if(js(r))return r.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+r)}var Bm=Object.prototype.toString;function Um(r){if(!r||typeof r!="object"||Bm.call(r)!=="[object Object]")return!1;var t=Object.getPrototypeOf(r);if(t===null)return!0;for(var e=t,i=Object.getPrototypeOf(t);i!==null;)e=i,i=Object.getPrototypeOf(e);return e===t}function Jr(r){return typeof r=="object"&&(Sr(r)||Array.isArray(r)||Um(r))}function ih(r){try{return typeof r=="string"?JSON.stringify(r):String(r)}catch{return JSON.stringify(r)}}function Gm(r,t){return Sr(r)?r.has(t):Jr(r)&&vo.call(r,t)}function z0(r,t,e){return Sr(r)?r.get(t,e):Gm(r,t)?typeof r.get=="function"?r.get(t):r[t]:e}function pa(r){if(Array.isArray(r))return ar(r);var t={};for(var e in r)vo.call(r,e)&&(t[e]=r[e]);return t}function Om(r,t){if(!Jr(r))throw new TypeError("Cannot update non-data-structure value: "+r);if(Sr(r)){if(!r.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+r);return r.remove(t)}if(!vo.call(r,t))return r;var e=pa(r);return Array.isArray(e)?e.splice(t,1):delete e[t],e}function Ym(r,t,e){if(!Jr(r))throw new TypeError("Cannot update non-data-structure value: "+r);if(Sr(r)){if(!r.set)throw new TypeError("Cannot update immutable value without .set() method: "+r);return r.set(t,e)}if(vo.call(r,t)&&e===r[t])return r;var i=pa(r);return i[t]=e,i}function Mo(r,t,e,i){i||(i=e,e=void 0);var s=B0(Sr(r),r,L0(t),0,e,i);return s===Qt?e:s}function B0(r,t,e,i,s,n){var o=t===Qt;if(i===e.length){var h=o?s:t,a=n(h);return a===h?t:a}if(!o&&!Jr(t))throw new TypeError("Cannot update within non-data-structure value in path ["+e.slice(0,i).map(ih)+"]: "+t);var l=e[i],u=o?Qt:z0(t,l,Qt),c=B0(u===Qt?r:Sr(u),u,e,i+1,s,n);return c===u?t:c===Qt?Om(t,l):Ym(o?r?$s():{}:t,l,c)}function Wm(r,t,e){return Mo(r,t,Qt,function(){return e})}function Bu(r,t){return Wm(this,r,t)}function Hm(r,t){return Mo(r,t,function(){return Qt})}function Uu(r){return Hm(this,r)}function U0(r,t,e,i){return Mo(r,[t],e,i)}function Gu(r,t,e){return arguments.length===1?r(this):U0(this,r,t,e)}function Ou(r,t,e){return Mo(this,r,t,e)}function G0(){for(var r=[],t=arguments.length;t--;)r[t]=arguments[t];return Y0(this,r)}function O0(r){for(var t=[],e=arguments.length-1;e-- >0;)t[e]=arguments[e+1];if(typeof r!="function")throw new TypeError("Invalid merger function: "+r);return Y0(this,t,r)}function Y0(r,t,e){for(var i=[],s=0;s<t.length;s++){var n=Gs(t[s]);n.size!==0&&i.push(n)}return i.length===0?r:r.toSeq().size===0&&!r.__ownerID&&i.length===1?r.constructor(i[0]):r.withMutations(function(o){for(var h=e?function(l,u){U0(o,u,Qt,function(c){return c===Qt?l:e(c,l,u)})}:function(l,u){o.set(u,l)},a=0;a<i.length;a++)i[a].forEach(h)})}function Yu(r,t,e){return Wu(r,t,Xm(e))}function Wu(r,t,e){if(!Jr(r))throw new TypeError("Cannot merge into non-data-structure value: "+r);if(Sr(r))return typeof e=="function"&&r.mergeWith?r.mergeWith.apply(r,[e].concat(t)):r.merge?r.merge.apply(r,t):r.concat.apply(r,t);for(var i=Array.isArray(r),s=r,n=i?Cn:Gs,o=i?function(a){s===r&&(s=pa(s)),s.push(a)}:function(a,l){var u=vo.call(s,l),c=u&&e?e(s[l],a,l):a;(!u||c!==s[l])&&(s===r&&(s=pa(s)),s[l]=c)},h=0;h<t.length;h++)n(t[h]).forEach(o);return s}function Xm(r){function t(e,i,s){return Jr(e)&&Jr(i)&&$m(e,i)?Wu(e,[i],t):r?r(e,i,s):i}return t}function $m(r,t){var e=Cs(r),i=Cs(t);return ls(e)===ls(i)&&We(e)===We(i)}function W0(){for(var r=[],t=arguments.length;t--;)r[t]=arguments[t];return Yu(this,r)}function H0(r){for(var t=[],e=arguments.length-1;e-- >0;)t[e]=arguments[e+1];return Yu(this,t,r)}function Hu(r){for(var t=[],e=arguments.length-1;e-- >0;)t[e]=arguments[e+1];return Mo(this,r,$s(),function(i){return Wu(i,t)})}function Xu(r){for(var t=[],e=arguments.length-1;e-- >0;)t[e]=arguments[e+1];return Mo(this,r,$s(),function(i){return Yu(i,t)})}function Sh(r){var t=this.asMutable();return r(t),t.wasAltered()?t.__ensureOwner(this.__ownerID):this}function Ah(){return this.__ownerID?this:this.__ensureOwner(new ku)}function vh(){return this.__ensureOwner()}function $u(){return this.__altered}var Ro=function(r){function t(e){return e==null?$s():Iu(e)&&!js(e)?e:$s().withMutations(function(i){var s=r(e);ws(s.size),s.forEach(function(n,o){return i.set(o,n)})})}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.of=function(){for(var i=[],s=arguments.length;s--;)i[s]=arguments[s];return $s().withMutations(function(n){for(var o=0;o<i.length;o+=2){if(o+1>=i.length)throw new Error("Missing value for key: "+i[o]);n.set(i[o],i[o+1])}})},t.prototype.toString=function(){return this.__toString("Map {","}")},t.prototype.get=function(i,s){return this._root?this._root.get(0,void 0,i,s):s},t.prototype.set=function(i,s){return ed(this,i,s)},t.prototype.remove=function(i){return ed(this,i,Qt)},t.prototype.deleteAll=function(i){var s=ti(i);return s.size===0?this:this.withMutations(function(n){s.forEach(function(o){return n.remove(o)})})},t.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):$s()},t.prototype.sort=function(i){return Fr(eo(this,i))},t.prototype.sortBy=function(i,s){return Fr(eo(this,s,i))},t.prototype.map=function(i,s){var n=this;return this.withMutations(function(o){o.forEach(function(h,a){o.set(a,i.call(s,h,a,n))})})},t.prototype.__iterator=function(i,s){return new jm(this,i,s)},t.prototype.__iterate=function(i,s){var n=this,o=0;return this._root&&this._root.iterate(function(h){return o++,i(h[1],h[0],n)},s),o},t.prototype.__ensureOwner=function(i){return i===this.__ownerID?this:i?ju(this.size,this._root,i,this.__hash):this.size===0?$s():(this.__ownerID=i,this.__altered=!1,this)},t}(Gs);Ro.isMap=Iu;var Ge=Ro.prototype;Ge[E0]=!0;Ge[mh]=Ge.remove;Ge.removeAll=Ge.deleteAll;Ge.setIn=Bu;Ge.removeIn=Ge.deleteIn=Uu;Ge.update=Gu;Ge.updateIn=Ou;Ge.merge=Ge.concat=G0;Ge.mergeWith=O0;Ge.mergeDeep=W0;Ge.mergeDeepWith=H0;Ge.mergeIn=Hu;Ge.mergeDeepIn=Xu;Ge.withMutations=Sh;Ge.wasAltered=$u;Ge.asImmutable=vh;Ge["@@transducer/init"]=Ge.asMutable=Ah;Ge["@@transducer/step"]=function(r,t){return r.set(t[0],t[1])};Ge["@@transducer/result"]=function(r){return r.asImmutable()};var sh=function(t,e){this.ownerID=t,this.entries=e};sh.prototype.get=function(t,e,i,s){for(var n=this.entries,o=0,h=n.length;o<h;o++)if(ks(i,n[o][0]))return n[o][1];return s};sh.prototype.update=function(t,e,i,s,n,o,h){for(var a=n===Qt,l=this.entries,u=0,c=l.length;u<c&&!ks(s,l[u][0]);u++);var d=u<c;if(d?l[u][1]===n:a)return this;if(Ls(h),(a||!d)&&Ls(o),!(a&&l.length===1)){if(!d&&!a&&l.length>=tp)return qm(t,l,s,n);var f=t&&t===this.ownerID,g=f?l:ar(l);return d?a?u===c-1?g.pop():g[u]=g.pop():g[u]=[s,n]:g.push([s,n]),f?(this.entries=g,this):new sh(t,g)}};var io=function(t,e,i){this.ownerID=t,this.bitmap=e,this.nodes=i};io.prototype.get=function(t,e,i,s){e===void 0&&(e=Es(i));var n=1<<((t===0?e:e>>>t)&Wi),o=this.bitmap;return(o&n)===0?s:this.nodes[X0(o&n-1)].get(t+ze,e,i,s)};io.prototype.update=function(t,e,i,s,n,o,h){i===void 0&&(i=Es(s));var a=(e===0?i:i>>>e)&Wi,l=1<<a,u=this.bitmap,c=(u&l)!==0;if(!c&&n===Qt)return this;var d=X0(u&l-1),f=this.nodes,g=c?f[d]:void 0,y=qu(g,t,e+ze,i,s,n,o,h);if(y===g)return this;if(!c&&y&&f.length>=ep)return Zm(t,f,u,a,y);if(c&&!y&&f.length===2&&id(f[d^1]))return f[d^1];if(c&&y&&f.length===1&&id(y))return y;var p=t&&t===this.ownerID,x=c?y?u:u^l:u|l,A=c?y?$0(f,d,y,p):Km(f,d,p):Qm(f,d,y,p);return p?(this.bitmap=x,this.nodes=A,this):new io(t,x,A)};var rh=function(t,e,i){this.ownerID=t,this.count=e,this.nodes=i};rh.prototype.get=function(t,e,i,s){e===void 0&&(e=Es(i));var n=(t===0?e:e>>>t)&Wi,o=this.nodes[n];return o?o.get(t+ze,e,i,s):s};rh.prototype.update=function(t,e,i,s,n,o,h){i===void 0&&(i=Es(s));var a=(e===0?i:i>>>e)&Wi,l=n===Qt,u=this.nodes,c=u[a];if(l&&!c)return this;var d=qu(c,t,e+ze,i,s,n,o,h);if(d===c)return this;var f=this.count;if(!c)f++;else if(!d&&(f--,f<ip))return Jm(t,u,f,a);var g=t&&t===this.ownerID,y=$0(u,a,d,g);return g?(this.count=f,this.nodes=y,this):new rh(t,f,y)};var so=function(t,e,i){this.ownerID=t,this.keyHash=e,this.entries=i};so.prototype.get=function(t,e,i,s){for(var n=this.entries,o=0,h=n.length;o<h;o++)if(ks(i,n[o][0]))return n[o][1];return s};so.prototype.update=function(t,e,i,s,n,o,h){i===void 0&&(i=Es(s));var a=n===Qt;if(i!==this.keyHash)return a?this:(Ls(h),Ls(o),Ju(this,t,e,i,[s,n]));for(var l=this.entries,u=0,c=l.length;u<c&&!ks(s,l[u][0]);u++);var d=u<c;if(d?l[u][1]===n:a)return this;if(Ls(h),(a||!d)&&Ls(o),a&&c===2)return new Cr(t,this.keyHash,l[u^1]);var f=t&&t===this.ownerID,g=f?l:ar(l);return d?a?u===c-1?g.pop():g[u]=g.pop():g[u]=[s,n]:g.push([s,n]),f?(this.entries=g,this):new so(t,this.keyHash,g)};var Cr=function(t,e,i){this.ownerID=t,this.keyHash=e,this.entry=i};Cr.prototype.get=function(t,e,i,s){return ks(i,this.entry[0])?this.entry[1]:s};Cr.prototype.update=function(t,e,i,s,n,o,h){var a=n===Qt,l=ks(s,this.entry[0]);if(l?n===this.entry[1]:a)return this;if(Ls(h),a){Ls(o);return}return l?t&&t===this.ownerID?(this.entry[1]=n,this):new Cr(t,this.keyHash,[s,n]):(Ls(o),Ju(this,t,e,Es(s),[s,n]))};sh.prototype.iterate=so.prototype.iterate=function(r,t){for(var e=this.entries,i=0,s=e.length-1;i<=s;i++)if(r(e[t?s-i:i])===!1)return!1};io.prototype.iterate=rh.prototype.iterate=function(r,t){for(var e=this.nodes,i=0,s=e.length-1;i<=s;i++){var n=e[t?s-i:i];if(n&&n.iterate(r,t)===!1)return!1}};Cr.prototype.iterate=function(r,t){return r(this.entry)};var jm=function(r){function t(e,i,s){this._type=i,this._reverse=s,this._stack=e._root&&Kc(e._root)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.next=function(){for(var i=this._type,s=this._stack;s;){var n=s.node,o=s.index++,h=void 0;if(n.entry){if(o===0)return El(i,n.entry)}else if(n.entries){if(h=n.entries.length-1,o<=h)return El(i,n.entries[this._reverse?h-o:o])}else if(h=n.nodes.length-1,o<=h){var a=n.nodes[this._reverse?h-o:o];if(a){if(a.entry)return El(i,a.entry);s=this._stack=Kc(a,s)}continue}s=this._stack=this._stack.__prev}return gs()},t}(fe);function El(r,t){return He(r,t[0],t[1])}function Kc(r,t){return{node:r,index:0,__prev:t}}function ju(r,t,e,i){var s=Object.create(Ge);return s.size=r,s._root=t,s.__ownerID=e,s.__hash=i,s.__altered=!1,s}var td;function $s(){return td||(td=ju(0))}function ed(r,t,e){var i,s;if(r._root){var n=Zl(),o=Zl();if(i=qu(r._root,r.__ownerID,0,void 0,t,e,n,o),!o.value)return r;s=r.size+(n.value?e===Qt?-1:1:0)}else{if(e===Qt)return r;s=1,i=new sh(r.__ownerID,[[t,e]])}return r.__ownerID?(r.size=s,r._root=i,r.__hash=void 0,r.__altered=!0,r):i?ju(s,i):$s()}function qu(r,t,e,i,s,n,o,h){return r?r.update(t,e,i,s,n,o,h):n===Qt?r:(Ls(h),Ls(o),new Cr(t,i,[s,n]))}function id(r){return r.constructor===Cr||r.constructor===so}function Ju(r,t,e,i,s){if(r.keyHash===i)return new so(t,i,[r.entry,s]);var n=(e===0?r.keyHash:r.keyHash>>>e)&Wi,o=(e===0?i:i>>>e)&Wi,h,a=n===o?[Ju(r,t,e+ze,i,s)]:(h=new Cr(t,i,s),n<o?[r,h]:[h,r]);return new io(t,1<<n|1<<o,a)}function qm(r,t,e,i){r||(r=new ku);for(var s=new Cr(r,Es(e),[e,i]),n=0;n<t.length;n++){var o=t[n];s=s.update(r,0,void 0,o[0],o[1])}return s}function Jm(r,t,e,i){for(var s=0,n=0,o=new Array(e),h=0,a=1,l=t.length;h<l;h++,a<<=1){var u=t[h];u!==void 0&&h!==i&&(s|=a,o[n++]=u)}return new io(r,s,o)}function Zm(r,t,e,i,s){for(var n=0,o=new Array(Ns),h=0;e!==0;h++,e>>>=1)o[h]=e&1?t[n++]:void 0;return o[i]=s,new rh(r,n+1,o)}function X0(r){return r-=r>>1&1431655765,r=(r&858993459)+(r>>2&858993459),r=r+(r>>4)&252645135,r+=r>>8,r+=r>>16,r&127}function $0(r,t,e,i){var s=i?r:ar(r);return s[t]=e,s}function Qm(r,t,e,i){var s=r.length+1;if(i&&t+1===s)return r[t]=e,r;for(var n=new Array(s),o=0,h=0;h<s;h++)h===t?(n[h]=e,o=-1):n[h]=r[h+o];return n}function Km(r,t,e){var i=r.length-1;if(e&&t===i)return r.pop(),r;for(var s=new Array(i),n=0,o=0;o<i;o++)o===t&&(n=1),s[o]=r[o+n];return s}var tp=Ns/4,ep=Ns/2,ip=Ns/4,j0="@@__IMMUTABLE_LIST__@@";function q0(r){return!!(r&&r[j0])}var bh=function(r){function t(e){var i=ga();if(e==null)return i;if(q0(e))return e;var s=r(e),n=s.size;return n===0?i:(ws(n),n>0&&n<Ns?nh(0,n,ze,null,new Yr(s.toArray())):i.withMutations(function(o){o.setSize(n),s.forEach(function(h,a){return o.set(a,h)})}))}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("List [","]")},t.prototype.get=function(i,s){if(i=qr(this,i),i>=0&&i<this.size){i+=this._origin;var n=J0(this,i);return n&&n.array[i&Wi]}return s},t.prototype.set=function(i,s){return sp(this,i,s)},t.prototype.remove=function(i){return this.has(i)?i===0?this.shift():i===this.size-1?this.pop():this.splice(i,1):this},t.prototype.insert=function(i,s){return this.splice(i,0,s)},t.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=ze,this._root=this._tail=this.__hash=void 0,this.__altered=!0,this):ga()},t.prototype.push=function(){var i=arguments,s=this.size;return this.withMutations(function(n){Nr(n,0,s+i.length);for(var o=0;o<i.length;o++)n.set(s+o,i[o])})},t.prototype.pop=function(){return Nr(this,0,-1)},t.prototype.unshift=function(){var i=arguments;return this.withMutations(function(s){Nr(s,-i.length);for(var n=0;n<i.length;n++)s.set(n,i[n])})},t.prototype.shift=function(){return Nr(this,1)},t.prototype.concat=function(){for(var i=arguments,s=[],n=0;n<arguments.length;n++){var o=i[n],h=r(typeof o!="string"&&b0(o)?o:[o]);h.size!==0&&s.push(h)}return s.length===0?this:this.size===0&&!this.__ownerID&&s.length===1?this.constructor(s[0]):this.withMutations(function(a){s.forEach(function(l){return l.forEach(function(u){return a.push(u)})})})},t.prototype.setSize=function(i){return Nr(this,0,i)},t.prototype.map=function(i,s){var n=this;return this.withMutations(function(o){for(var h=0;h<n.size;h++)o.set(h,i.call(s,o.get(h),h,n))})},t.prototype.slice=function(i,s){var n=this.size;return Ya(i,s,n)?this:Nr(this,ph(i,n),Wa(s,n))},t.prototype.__iterator=function(i,s){var n=s?this.size:0,o=sd(this,s);return new fe(function(){var h=o();return h===qo?gs():He(i,s?--n:n++,h)})},t.prototype.__iterate=function(i,s){for(var n=s?this.size:0,o=sd(this,s),h;(h=o())!==qo&&i(h,s?--n:n++,this)!==!1;);return n},t.prototype.__ensureOwner=function(i){return i===this.__ownerID?this:i?nh(this._origin,this._capacity,this._level,this._root,this._tail,i,this.__hash):this.size===0?ga():(this.__ownerID=i,this.__altered=!1,this)},t}(Cn);bh.isList=q0;var li=bh.prototype;li[j0]=!0;li[mh]=li.remove;li.merge=li.concat;li.setIn=Bu;li.deleteIn=li.removeIn=Uu;li.update=Gu;li.updateIn=Ou;li.mergeIn=Hu;li.mergeDeepIn=Xu;li.withMutations=Sh;li.wasAltered=$u;li.asImmutable=vh;li["@@transducer/init"]=li.asMutable=Ah;li["@@transducer/step"]=function(r,t){return r.push(t)};li["@@transducer/result"]=function(r){return r.asImmutable()};var Yr=function(t,e){this.array=t,this.ownerID=e};Yr.prototype.removeBefore=function(t,e,i){if(i===e?1<<e:this.array.length===0)return this;var s=i>>>e&Wi;if(s>=this.array.length)return new Yr([],t);var n=s===0,o;if(e>0){var h=this.array[s];if(o=h&&h.removeBefore(t,e-ze,i),o===h&&n)return this}if(n&&!o)return this;var a=ro(this,t);if(!n)for(var l=0;l<s;l++)a.array[l]=void 0;return o&&(a.array[s]=o),a};Yr.prototype.removeAfter=function(t,e,i){if(i===(e?1<<e:0)||this.array.length===0)return this;var s=i-1>>>e&Wi;if(s>=this.array.length)return this;var n;if(e>0){var o=this.array[s];if(n=o&&o.removeAfter(t,e-ze,i),n===o&&s===this.array.length-1)return this}var h=ro(this,t);return h.array.splice(s+1),n&&(h.array[s]=n),h};var qo={};function sd(r,t){var e=r._origin,i=r._capacity,s=oh(i),n=r._tail;return o(r._root,r._level,0);function o(l,u,c){return u===0?h(l,c):a(l,u,c)}function h(l,u){var c=u===s?n&&n.array:l&&l.array,d=u>e?0:e-u,f=i-u;return f>Ns&&(f=Ns),function(){if(d===f)return qo;var g=t?--f:d++;return c&&c[g]}}function a(l,u,c){var d,f=l&&l.array,g=c>e?0:e-c>>u,y=(i-c>>u)+1;return y>Ns&&(y=Ns),function(){for(;;){if(d){var p=d();if(p!==qo)return p;d=null}if(g===y)return qo;var x=t?--y:g++;d=o(f&&f[x],u-ze,c+(x<<u))}}}}function nh(r,t,e,i,s,n,o){var h=Object.create(li);return h.size=t-r,h._origin=r,h._capacity=t,h._level=e,h._root=i,h._tail=s,h.__ownerID=n,h.__hash=o,h.__altered=!1,h}var rd;function ga(){return rd||(rd=nh(0,0,ze))}function sp(r,t,e){if(t=qr(r,t),t!==t)return r;if(t>=r.size||t<0)return r.withMutations(function(o){t<0?Nr(o,t).set(0,e):Nr(o,0,t+1).set(t,e)});t+=r._origin;var i=r._tail,s=r._root,n=Zl();return t>=oh(r._capacity)?i=su(i,r.__ownerID,0,t,e,n):s=su(s,r.__ownerID,r._level,t,e,n),n.value?r.__ownerID?(r._root=s,r._tail=i,r.__hash=void 0,r.__altered=!0,r):nh(r._origin,r._capacity,r._level,s,i):r}function su(r,t,e,i,s,n){var o=i>>>e&Wi,h=r&&o<r.array.length;if(!h&&s===void 0)return r;var a;if(e>0){var l=r&&r.array[o],u=su(l,t,e-ze,i,s,n);return u===l?r:(a=ro(r,t),a.array[o]=u,a)}return h&&r.array[o]===s?r:(n&&Ls(n),a=ro(r,t),s===void 0&&o===a.array.length-1?a.array.pop():a.array[o]=s,a)}function ro(r,t){return t&&r&&t===r.ownerID?r:new Yr(r?r.array.slice():[],t)}function J0(r,t){if(t>=oh(r._capacity))return r._tail;if(t<1<<r._level+ze){for(var e=r._root,i=r._level;e&&i>0;)e=e.array[t>>>i&Wi],i-=ze;return e}}function Nr(r,t,e){t!==void 0&&(t|=0),e!==void 0&&(e|=0);var i=r.__ownerID||new ku,s=r._origin,n=r._capacity,o=s+t,h=e===void 0?n:e<0?n+e:s+e;if(o===s&&h===n)return r;if(o>=h)return r.clear();for(var a=r._level,l=r._root,u=0;o+u<0;)l=new Yr(l&&l.array.length?[void 0,l]:[],i),a+=ze,u+=1<<a;u&&(o+=u,s+=u,h+=u,n+=u);for(var c=oh(n),d=oh(h);d>=1<<a+ze;)l=new Yr(l&&l.array.length?[l]:[],i),a+=ze;var f=r._tail,g=d<c?J0(r,h-1):d>c?new Yr([],i):f;if(f&&d>c&&o<n&&f.array.length){l=ro(l,i);for(var y=l,p=a;p>ze;p-=ze){var x=c>>>p&Wi;y=y.array[x]=ro(y.array[x],i)}y.array[c>>>ze&Wi]=f}if(h<n&&(g=g&&g.removeAfter(i,0,h)),o>=d)o-=d,h-=d,a=ze,l=null,g=g&&g.removeBefore(i,0,o);else if(o>s||d<c){for(u=0;l;){var A=o>>>a&Wi;if(A!==d>>>a&Wi)break;A&&(u+=(1<<a)*A),a-=ze,l=l.array[A]}l&&o>s&&(l=l.removeBefore(i,a,o-u)),l&&d<c&&(l=l.removeAfter(i,a,d-u)),u&&(o-=u,h-=u)}return r.__ownerID?(r.size=h-o,r._origin=o,r._capacity=h,r._level=a,r._root=l,r._tail=g,r.__hash=void 0,r.__altered=!0,r):nh(o,h,a,l,g)}function oh(r){return r<Ns?0:r-1>>>ze<<ze}var Fr=function(r){function t(e){return e==null?Ho():w0(e)?e:Ho().withMutations(function(i){var s=Gs(e);ws(s.size),s.forEach(function(n,o){return i.set(o,n)})})}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("OrderedMap {","}")},t.prototype.get=function(i,s){var n=this._map.get(i);return n!==void 0?this._list.get(n)[1]:s},t.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this.__altered=!0,this):Ho()},t.prototype.set=function(i,s){return od(this,i,s)},t.prototype.remove=function(i){return od(this,i,Qt)},t.prototype.__iterate=function(i,s){var n=this;return this._list.__iterate(function(o){return o&&i(o[1],o[0],n)},s)},t.prototype.__iterator=function(i,s){return this._list.fromEntrySeq().__iterator(i,s)},t.prototype.__ensureOwner=function(i){if(i===this.__ownerID)return this;var s=this._map.__ensureOwner(i),n=this._list.__ensureOwner(i);return i?Zu(s,n,i,this.__hash):this.size===0?Ho():(this.__ownerID=i,this.__altered=!1,this._map=s,this._list=n,this)},t}(Ro);Fr.isOrderedMap=w0;Fr.prototype[Ao]=!0;Fr.prototype[mh]=Fr.prototype.remove;function Zu(r,t,e,i){var s=Object.create(Fr.prototype);return s.size=r?r.size:0,s._map=r,s._list=t,s.__ownerID=e,s.__hash=i,s.__altered=!1,s}var nd;function Ho(){return nd||(nd=Zu($s(),ga()))}function od(r,t,e){var i=r._map,s=r._list,n=i.get(t),o=n!==void 0,h,a;if(e===Qt){if(!o)return r;s.size>=Ns&&s.size>=i.size*2?(a=s.filter(function(l,u){return l!==void 0&&n!==u}),h=a.toKeyedSeq().map(function(l){return l[0]}).flip().toMap(),r.__ownerID&&(h.__ownerID=a.__ownerID=r.__ownerID)):(h=i.remove(t),a=n===s.size-1?s.pop():s.set(n,void 0))}else if(o){if(e===s.get(n)[1])return r;h=i,a=s.set(n,[t,e])}else h=i.set(t,s.size),a=s.set(s.size,[t,e]);return r.__ownerID?(r.size=h.size,r._map=h,r._list=a,r.__hash=void 0,r.__altered=!0,r):Zu(h,a)}var Z0="@@__IMMUTABLE_STACK__@@";function ru(r){return!!(r&&r[Z0])}var Qu=function(r){function t(e){return e==null?Wh():ru(e)?e:Wh().pushAll(e)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("Stack [","]")},t.prototype.get=function(i,s){var n=this._head;for(i=qr(this,i);n&&i--;)n=n.next;return n?n.value:s},t.prototype.peek=function(){return this._head&&this._head.value},t.prototype.push=function(){var i=arguments;if(arguments.length===0)return this;for(var s=this.size+arguments.length,n=this._head,o=arguments.length-1;o>=0;o--)n={value:i[o],next:n};return this.__ownerID?(this.size=s,this._head=n,this.__hash=void 0,this.__altered=!0,this):Xo(s,n)},t.prototype.pushAll=function(i){if(i=r(i),i.size===0)return this;if(this.size===0&&ru(i))return i;ws(i.size);var s=this.size,n=this._head;return i.__iterate(function(o){s++,n={value:o,next:n}},!0),this.__ownerID?(this.size=s,this._head=n,this.__hash=void 0,this.__altered=!0,this):Xo(s,n)},t.prototype.pop=function(){return this.slice(1)},t.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Wh()},t.prototype.slice=function(i,s){if(Ya(i,s,this.size))return this;var n=ph(i,this.size),o=Wa(s,this.size);if(o!==this.size)return r.prototype.slice.call(this,i,s);for(var h=this.size-n,a=this._head;n--;)a=a.next;return this.__ownerID?(this.size=h,this._head=a,this.__hash=void 0,this.__altered=!0,this):Xo(h,a)},t.prototype.__ensureOwner=function(i){return i===this.__ownerID?this:i?Xo(this.size,this._head,i,this.__hash):this.size===0?Wh():(this.__ownerID=i,this.__altered=!1,this)},t.prototype.__iterate=function(i,s){var n=this;if(s)return new An(this.toArray()).__iterate(function(a,l){return i(a,l,n)},s);for(var o=0,h=this._head;h&&i(h.value,o++,this)!==!1;)h=h.next;return o},t.prototype.__iterator=function(i,s){if(s)return new An(this.toArray()).__iterator(i,s);var n=0,o=this._head;return new fe(function(){if(o){var h=o.value;return o=o.next,He(i,n++,h)}return gs()})},t}(Cn);Qu.isStack=ru;var $i=Qu.prototype;$i[Z0]=!0;$i.shift=$i.pop;$i.unshift=$i.push;$i.unshiftAll=$i.pushAll;$i.withMutations=Sh;$i.wasAltered=$u;$i.asImmutable=vh;$i["@@transducer/init"]=$i.asMutable=Ah;$i["@@transducer/step"]=function(r,t){return r.unshift(t)};$i["@@transducer/result"]=function(r){return r.asImmutable()};function Xo(r,t,e,i){var s=Object.create($i);return s.size=r,s._head=t,s.__ownerID=e,s.__hash=i,s.__altered=!1,s}var hd;function Wh(){return hd||(hd=Xo(0))}var Q0="@@__IMMUTABLE_SET__@@";function Ku(r){return!!(r&&r[Q0])}function K0(r){return Ku(r)&&js(r)}function tg(r,t){if(r===t)return!0;if(!fs(t)||r.size!==void 0&&t.size!==void 0&&r.size!==t.size||r.__hash!==void 0&&t.__hash!==void 0&&r.__hash!==t.__hash||We(r)!==We(t)||ls(r)!==ls(t)||js(r)!==js(t))return!1;if(r.size===0&&t.size===0)return!0;var e=!Ha(r);if(js(r)){var i=r.entries();return t.every(function(a,l){var u=i.next().value;return u&&ks(u[1],a)&&(e||ks(u[0],l))})&&i.next().done}var s=!1;if(r.size===void 0)if(t.size===void 0)typeof r.cacheResult=="function"&&r.cacheResult();else{s=!0;var n=r;r=t,t=n}var o=!0,h=t.__iterate(function(a,l){if(e?!r.has(a):s?!ks(a,r.get(l,Qt)):!ks(r.get(l,Qt),a))return o=!1,!1});return o&&r.size===h}function Fn(r,t){var e=function(i){r.prototype[i]=t[i]};return Object.keys(t).forEach(e),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach(e),r}function xa(r){if(!r||typeof r!="object")return r;if(!fs(r)){if(!Jr(r))return r;r=Cs(r)}if(We(r)){var t={};return r.__iterate(function(i,s){t[s]=xa(i)}),t}var e=[];return r.__iterate(function(i){e.push(xa(i))}),e}var Ja=function(r){function t(e){return e==null?$o():Ku(e)&&!js(e)?e:$o().withMutations(function(i){var s=r(e);ws(s.size),s.forEach(function(n){return i.add(n)})})}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.fromKeys=function(i){return this(Gs(i).keySeq())},t.intersect=function(i){return i=ti(i).toArray(),i.length?ki.intersect.apply(t(i.pop()),i):$o()},t.union=function(i){return i=ti(i).toArray(),i.length?ki.union.apply(t(i.pop()),i):$o()},t.prototype.toString=function(){return this.__toString("Set {","}")},t.prototype.has=function(i){return this._map.has(i)},t.prototype.add=function(i){return Hh(this,this._map.set(i,i))},t.prototype.remove=function(i){return Hh(this,this._map.remove(i))},t.prototype.clear=function(){return Hh(this,this._map.clear())},t.prototype.map=function(i,s){var n=this,o=!1,h=Hh(this,this._map.mapEntries(function(a){var l=a[1],u=i.call(s,l,l,n);return u!==l&&(o=!0),[u,u]},s));return o?h:this},t.prototype.union=function(){for(var i=[],s=arguments.length;s--;)i[s]=arguments[s];return i=i.filter(function(n){return n.size!==0}),i.length===0?this:this.size===0&&!this.__ownerID&&i.length===1?this.constructor(i[0]):this.withMutations(function(n){for(var o=0;o<i.length;o++)typeof i[o]=="string"?n.add(i[o]):r(i[o]).forEach(function(h){return n.add(h)})})},t.prototype.intersect=function(){for(var i=[],s=arguments.length;s--;)i[s]=arguments[s];if(i.length===0)return this;i=i.map(function(o){return r(o)});var n=[];return this.forEach(function(o){i.every(function(h){return h.includes(o)})||n.push(o)}),this.withMutations(function(o){n.forEach(function(h){o.remove(h)})})},t.prototype.subtract=function(){for(var i=[],s=arguments.length;s--;)i[s]=arguments[s];if(i.length===0)return this;i=i.map(function(o){return r(o)});var n=[];return this.forEach(function(o){i.some(function(h){return h.includes(o)})&&n.push(o)}),this.withMutations(function(o){n.forEach(function(h){o.remove(h)})})},t.prototype.sort=function(i){return hh(eo(this,i))},t.prototype.sortBy=function(i,s){return hh(eo(this,s,i))},t.prototype.wasAltered=function(){return this._map.wasAltered()},t.prototype.__iterate=function(i,s){var n=this;return this._map.__iterate(function(o){return i(o,o,n)},s)},t.prototype.__iterator=function(i,s){return this._map.__iterator(i,s)},t.prototype.__ensureOwner=function(i){if(i===this.__ownerID)return this;var s=this._map.__ensureOwner(i);return i?this.__make(s,i):this.size===0?this.__empty():(this.__ownerID=i,this._map=s,this)},t}(xo);Ja.isSet=Ku;var ki=Ja.prototype;ki[Q0]=!0;ki[mh]=ki.remove;ki.merge=ki.concat=ki.union;ki.withMutations=Sh;ki.asImmutable=vh;ki["@@transducer/init"]=ki.asMutable=Ah;ki["@@transducer/step"]=function(r,t){return r.add(t)};ki["@@transducer/result"]=function(r){return r.asImmutable()};ki.__empty=$o;ki.__make=eg;function Hh(r,t){return r.__ownerID?(r.size=t.size,r._map=t,r):t===r._map?r:t.size===0?r.__empty():r.__make(t)}function eg(r,t){var e=Object.create(ki);return e.size=r?r.size:0,e._map=r,e.__ownerID=t,e}var ad;function $o(){return ad||(ad=eg($s()))}var rp=function(r){function t(e,i,s){if(!(this instanceof t))return new t(e,i,s);if(zu(s!==0,"Cannot step a Range by 0"),e=e||0,i===void 0&&(i=1/0),s=s===void 0?1:Math.abs(s),i<e&&(s=-s),this._start=e,this._end=i,this._step=s,this.size=Math.max(0,Math.ceil((i-e)/s-1)+1),this.size===0){if(wl)return wl;wl=this}}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.toString=function(){return this.size===0?"Range []":"Range [ "+this._start+"..."+this._end+(this._step!==1?" by "+this._step:"")+" ]"},t.prototype.get=function(i,s){return this.has(i)?this._start+qr(this,i)*this._step:s},t.prototype.includes=function(i){var s=(i-this._start)/this._step;return s>=0&&s<this.size&&s===Math.floor(s)},t.prototype.slice=function(i,s){return Ya(i,s,this.size)?this:(i=ph(i,this.size),s=Wa(s,this.size),s<=i?new t(0,0):new t(this.get(i,this._end),this.get(s,this._end),this._step))},t.prototype.indexOf=function(i){var s=i-this._start;if(s%this._step===0){var n=s/this._step;if(n>=0&&n<this.size)return n}return-1},t.prototype.lastIndexOf=function(i){return this.indexOf(i)},t.prototype.__iterate=function(i,s){for(var n=this.size,o=this._step,h=s?this._start+(n-1)*o:this._start,a=0;a!==n&&i(h,s?n-++a:a++,this)!==!1;)h+=s?-o:o;return a},t.prototype.__iterator=function(i,s){var n=this.size,o=this._step,h=s?this._start+(n-1)*o:this._start,a=0;return new fe(function(){if(a===n)return gs();var l=h;return h+=s?-o:o,He(i,s?n-++a:a++,l)})},t.prototype.equals=function(i){return i instanceof t?this._start===i._start&&this._end===i._end&&this._step===i._step:tg(this,i)},t}(Ks),wl;function ig(r,t,e){for(var i=L0(t),s=0;s!==i.length;)if(r=z0(r,i[s++],Qt),r===Qt)return e;return r}function sg(r,t){return ig(this,r,t)}function np(r,t){return ig(r,t,Qt)!==Qt}function op(r){return np(this,r)}function rg(){ws(this.size);var r={};return this.__iterate(function(t,e){r[e]=t}),r}ti.isIterable=fs;ti.isKeyed=We;ti.isIndexed=ls;ti.isAssociative=Ha;ti.isOrdered=js;ti.Iterator=fe;Fn(ti,{toArray:function(){ws(this.size);var t=new Array(this.size||0),e=We(this),i=0;return this.__iterate(function(s,n){t[i++]=e?[n,s]:s}),t},toIndexedSeq:function(){return new T0(this)},toJS:function(){return xa(this)},toKeyedSeq:function(){return new qa(this,!0)},toMap:function(){return Ro(this.toKeyedSeq())},toObject:rg,toOrderedMap:function(){return Fr(this.toKeyedSeq())},toOrderedSet:function(){return hh(We(this)?this.valueSeq():this)},toSet:function(){return Ja(We(this)?this.valueSeq():this)},toSetSeq:function(){return new C0(this)},toSeq:function(){return ls(this)?this.toIndexedSeq():We(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Qu(We(this)?this.valueSeq():this)},toList:function(){return bh(We(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(t,e){return this.size===0?t+e:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return Fe(this,Nm(this,t))},includes:function(t){return this.some(function(e){return ks(e,t)})},entries:function(){return this.__iterator(Us)},every:function(t,e){ws(this.size);var i=!0;return this.__iterate(function(s,n,o){if(!t.call(e,s,n,o))return i=!1,!1}),i},filter:function(t,e){return Fe(this,I0(this,t,e,!0))},partition:function(t,e){return Vm(this,t,e)},find:function(t,e,i){var s=this.findEntry(t,e);return s?s[1]:i},forEach:function(t,e){return ws(this.size),this.__iterate(e?t.bind(e):t)},join:function(t){ws(this.size),t=t!==void 0?""+t:",";var e="",i=!0;return this.__iterate(function(s){i?i=!1:e+=t,e+=s!=null?s.toString():""}),e},keys:function(){return this.__iterator(xh)},map:function(t,e){return Fe(this,P0(this,t,e))},reduce:function(t,e,i){return ld(this,t,e,i,arguments.length<2,!1)},reduceRight:function(t,e,i){return ld(this,t,e,i,arguments.length<2,!0)},reverse:function(){return Fe(this,Vu(this,!0))},slice:function(t,e){return Fe(this,_u(this,t,e,!0))},some:function(t,e){ws(this.size);var i=!1;return this.__iterate(function(s,n,o){if(t.call(e,s,n,o))return i=!0,!1}),i},sort:function(t){return Fe(this,eo(this,t))},values:function(){return this.__iterator(Qs)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return this.size!==void 0?this.size===0:!this.some(function(){return!0})},count:function(t,e){return to(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return Pm(this,t,e)},equals:function(t){return tg(this,t)},entrySeq:function(){var t=this;if(t._cache)return new An(t._cache);var e=t.toSeq().map(ap).toIndexedSeq();return e.fromEntrySeq=function(){return t.toSeq()},e},filterNot:function(t,e){return this.filter(kl(t),e)},findEntry:function(t,e,i){var s=i;return this.__iterate(function(n,o,h){if(t.call(e,n,o,h))return s=[o,n],!1}),s},findKey:function(t,e){var i=this.findEntry(t,e);return i&&i[0]},findLast:function(t,e,i){return this.toKeyedSeq().reverse().find(t,e,i)},findLastEntry:function(t,e,i){return this.toKeyedSeq().reverse().findEntry(t,e,i)},findLastKey:function(t,e){return this.toKeyedSeq().reverse().findKey(t,e)},first:function(t){return this.find(f0,null,t)},flatMap:function(t,e){return Fe(this,Lm(this,t,e))},flatten:function(t){return Fe(this,_0(this,t,!0))},fromEntrySeq:function(){return new F0(this)},get:function(t,e){return this.find(function(i,s){return ks(s,t)},void 0,e)},getIn:sg,groupBy:function(t,e){return Im(this,t,e)},has:function(t){return this.get(t,Qt)!==Qt},hasIn:op,isSubset:function(t){return t=typeof t.includes=="function"?t:ti(t),this.every(function(e){return t.includes(e)})},isSuperset:function(t){return t=typeof t.isSubset=="function"?t:ti(t),t.isSubset(this)},keyOf:function(t){return this.findKey(function(e){return ks(e,t)})},keySeq:function(){return this.toSeq().map(hp).toIndexedSeq()},last:function(t){return this.toSeq().reverse().first(t)},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return Oh(this,t)},maxBy:function(t,e){return Oh(this,e,t)},min:function(t){return Oh(this,t?ud(t):dd)},minBy:function(t,e){return Oh(this,e?ud(e):dd,t)},rest:function(){return this.slice(1)},skip:function(t){return t===0?this:this.slice(Math.max(0,t))},skipLast:function(t){return t===0?this:this.slice(0,-Math.max(0,t))},skipWhile:function(t,e){return Fe(this,V0(this,t,e,!0))},skipUntil:function(t,e){return this.skipWhile(kl(t),e)},sortBy:function(t,e){return Fe(this,eo(this,e,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return this.slice(-Math.max(0,t))},takeWhile:function(t,e){return Fe(this,_m(this,t,e))},takeUntil:function(t,e){return this.takeWhile(kl(t),e)},update:function(t){return t(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=lp(this))}});var Ui=ti.prototype;Ui[m0]=!0;Ui[Xa]=Ui.values;Ui.toJSON=Ui.toArray;Ui.__toStringMapper=ih;Ui.inspect=Ui.toSource=function(){return this.toString()};Ui.chain=Ui.flatMap;Ui.contains=Ui.includes;Fn(Gs,{flip:function(){return Fe(this,D0(this))},mapEntries:function(t,e){var i=this,s=0;return Fe(this,this.toSeq().map(function(n,o){return t.call(e,[o,n],s++,i)}).fromEntrySeq())},mapKeys:function(t,e){var i=this;return Fe(this,this.toSeq().flip().map(function(s,n){return t.call(e,s,n,i)}).flip())}});var Mh=Gs.prototype;Mh[p0]=!0;Mh[Xa]=Ui.entries;Mh.toJSON=rg;Mh.__toStringMapper=function(r,t){return ih(t)+": "+ih(r)};Fn(Cn,{toKeyedSeq:function(){return new qa(this,!1)},filter:function(t,e){return Fe(this,I0(this,t,e,!1))},findIndex:function(t,e){var i=this.findEntry(t,e);return i?i[0]:-1},indexOf:function(t){var e=this.keyOf(t);return e===void 0?-1:e},lastIndexOf:function(t){var e=this.lastKeyOf(t);return e===void 0?-1:e},reverse:function(){return Fe(this,Vu(this,!1))},slice:function(t,e){return Fe(this,_u(this,t,e,!1))},splice:function(t,e){var i=arguments.length;if(e=Math.max(e||0,0),i===0||i===2&&!e)return this;t=ph(t,t<0?this.count():this.size);var s=this.slice(0,t);return Fe(this,i===1?s:s.concat(ar(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){var i=this.findLastEntry(t,e);return i?i[0]:-1},first:function(t){return this.get(0,t)},flatten:function(t){return Fe(this,_0(this,t,!1))},get:function(t,e){return t=qr(this,t),t<0||this.size===1/0||this.size!==void 0&&t>this.size?e:this.find(function(i,s){return s===t},void 0,e)},has:function(t){return t=qr(this,t),t>=0&&(this.size!==void 0?this.size===1/0||t<this.size:this.indexOf(t)!==-1)},interpose:function(t){return Fe(this,zm(this,t))},interleave:function(){var t=[this].concat(ar(arguments)),e=Yh(this.toSeq(),Ks.of,t),i=e.flatten(!0);return e.size&&(i.size=e.size*t.length),Fe(this,i)},keySeq:function(){return rp(0,this.size)},last:function(t){return this.get(-1,t)},skipWhile:function(t,e){return Fe(this,V0(this,t,e,!1))},zip:function(){var t=[this].concat(ar(arguments));return Fe(this,Yh(this,cd,t))},zipAll:function(){var t=[this].concat(ar(arguments));return Fe(this,Yh(this,cd,t,!0))},zipWith:function(t){var e=ar(arguments);return e[0]=this,Fe(this,Yh(this,t,e))}});var Eo=Cn.prototype;Eo[x0]=!0;Eo[Ao]=!0;Fn(xo,{get:function(t,e){return this.has(t)?t:e},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}});var no=xo.prototype;no.has=Ui.includes;no.contains=no.includes;no.keys=no.values;Fn(tn,Mh);Fn(Ks,Eo);Fn(bo,no);function ld(r,t,e,i,s,n){return ws(r.size),r.__iterate(function(o,h,a){s?(s=!1,e=o):e=t.call(i,e,o,h,a)},n),e}function hp(r,t){return t}function ap(r,t){return[t,r]}function kl(r){return function(){return!r.apply(this,arguments)}}function ud(r){return function(){return-r.apply(this,arguments)}}function cd(){return ar(arguments)}function dd(r,t){return r<t?1:r>t?-1:0}function lp(r){if(r.size===1/0)return 0;var t=js(r),e=We(r),i=t?1:0,s=r.__iterate(e?t?function(n,o){i=31*i+fd(Es(n),Es(o))|0}:function(n,o){i=i+fd(Es(n),Es(o))|0}:t?function(n){i=31*i+Es(n)|0}:function(n){i=i+Es(n)|0});return up(s,i)}function up(r,t){return t=zo(t,3432918353),t=zo(t<<15|t>>>-15,461845907),t=zo(t<<13|t>>>-13,5),t=(t+3864292196|0)^r,t=zo(t^t>>>16,2246822507),t=zo(t^t>>>13,3266489909),t=ja(t^t>>>16),t}function fd(r,t){return r^t+2654435769+(r<<6)+(r>>2)|0}var hh=function(r){function t(e){return e==null?nu():K0(e)?e:nu().withMutations(function(i){var s=xo(e);ws(s.size),s.forEach(function(n){return i.add(n)})})}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.fromKeys=function(i){return this(Gs(i).keySeq())},t.prototype.toString=function(){return this.__toString("OrderedSet {","}")},t}(Ja);hh.isOrderedSet=K0;var Dn=hh.prototype;Dn[Ao]=!0;Dn.zip=Eo.zip;Dn.zipWith=Eo.zipWith;Dn.zipAll=Eo.zipAll;Dn.__empty=nu;Dn.__make=ng;function ng(r,t){var e=Object.create(Dn);return e.size=r?r.size:0,e._map=r,e.__ownerID=t,e}var gd;function nu(){return gd||(gd=ng(Ho()))}function cp(r){if(So(r))throw new Error("Can not call `Record` with an immutable Record as default values. Use a plain javascript object instead.");if(Sr(r))throw new Error("Can not call `Record` with an immutable Collection as default values. Use a plain javascript object instead.");if(r===null||typeof r!="object")throw new Error("Can not call `Record` with a non-object as default values. Use a plain javascript object instead.")}var Ot=function(t,e){var i;cp(t);var s=function(h){var a=this;if(h instanceof s)return h;if(!(this instanceof s))return new s(h);if(!i){i=!0;var l=Object.keys(t),u=n._indices={};n._name=e,n._keys=l,n._defaultValues=t;for(var c=0;c<l.length;c++){var d=l[c];u[d]=c,n[d]?typeof console=="object"&&console.warn&&console.warn("Cannot define "+ec(this)+' with property "'+d+'" since that property name is part of the Record API.'):dp(n,d)}}return this.__ownerID=void 0,this._values=bh().withMutations(function(f){f.setSize(a._keys.length),Gs(h).forEach(function(g,y){f.set(a._indices[y],g===a._defaultValues[y]?void 0:g)})}),this},n=s.prototype=Object.create(Ve);return n.constructor=s,e&&(s.displayName=e),s};Ot.prototype.toString=function(){for(var t=ec(this)+" { ",e=this._keys,i,s=0,n=e.length;s!==n;s++)i=e[s],t+=(s?", ":"")+i+": "+ih(this.get(i));return t+" }"};Ot.prototype.equals=function(t){return this===t||So(t)&&oo(this).equals(oo(t))};Ot.prototype.hashCode=function(){return oo(this).hashCode()};Ot.prototype.has=function(t){return this._indices.hasOwnProperty(t)};Ot.prototype.get=function(t,e){if(!this.has(t))return e;var i=this._indices[t],s=this._values.get(i);return s===void 0?this._defaultValues[t]:s};Ot.prototype.set=function(t,e){if(this.has(t)){var i=this._values.set(this._indices[t],e===this._defaultValues[t]?void 0:e);if(i!==this._values&&!this.__ownerID)return tc(this,i)}return this};Ot.prototype.remove=function(t){return this.set(t)};Ot.prototype.clear=function(){var t=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:tc(this,t)};Ot.prototype.wasAltered=function(){return this._values.wasAltered()};Ot.prototype.toSeq=function(){return oo(this)};Ot.prototype.toJS=function(){return xa(this)};Ot.prototype.entries=function(){return this.__iterator(Us)};Ot.prototype.__iterator=function(t,e){return oo(this).__iterator(t,e)};Ot.prototype.__iterate=function(t,e){return oo(this).__iterate(t,e)};Ot.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._values.__ensureOwner(t);return t?tc(this,e,t):(this.__ownerID=t,this._values=e,this)};Ot.isRecord=So;Ot.getDescriptiveName=ec;var Ve=Ot.prototype;Ve[A0]=!0;Ve[mh]=Ve.remove;Ve.deleteIn=Ve.removeIn=Uu;Ve.getIn=sg;Ve.hasIn=Ui.hasIn;Ve.merge=G0;Ve.mergeWith=O0;Ve.mergeIn=Hu;Ve.mergeDeep=W0;Ve.mergeDeepWith=H0;Ve.mergeDeepIn=Xu;Ve.setIn=Bu;Ve.update=Gu;Ve.updateIn=Ou;Ve.withMutations=Sh;Ve.asMutable=Ah;Ve.asImmutable=vh;Ve[Xa]=Ve.entries;Ve.toJSON=Ve.toObject=Ui.toObject;Ve.inspect=Ve.toSource=function(){return this.toString()};function tc(r,t,e){var i=Object.create(Object.getPrototypeOf(r));return i._values=t,i.__ownerID=e,i}function ec(r){return r.constructor.displayName||r.constructor.name||"Record"}function oo(r){return Du(r._keys.map(function(t){return[t,r.get(t)]}))}function dp(r,t){try{Object.defineProperty(r,t,{get:function(){return this.get(t)},set:function(e){zu(this.__ownerID,"Cannot set on an immutable record."),this.set(t,e)}})}catch{}}var ou=function(r,t){return ou=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])},ou(r,t)};function fp(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");ou(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function yd(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],i=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function hu(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),s,n=[],o;try{for(;(t===void 0||t-- >0)&&!(s=i.next()).done;)n.push(s.value)}catch(h){o={error:h}}finally{try{s&&!s.done&&(e=i.return)&&e.call(i)}finally{if(o)throw o.error}}return n}function gp(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(hu(arguments[t]));return r}var og=function(r){fp(t,r);function t(e){var i=this,s="EventError: "+e+"}";return i=r.call(this,s)||this,Object.setPrototypeOf(i,t.prototype),i}return t}(Error),yp=function(r,t){return{token:r+"-"+t,ownerIndex:r,id:t}},mp=0,md=function(r,t){return new og("Event listener with "+r.token+" id does not exist at Eventer with "+t+" id.")},Xe=function(){function r(){this.id=++mp,this.lastEventIndex=0,this.topics=new Map}return r.prototype.on=function(t,e,i){var s=this.topics.get(t),n=i||yp(this.id,++this.lastEventIndex);return s?s.set(n,e):this.topics.set(t,new Map([[n,e]])),n},r.prototype.has=function(t,e){var i,s;if(e){var n=this.topics.get(e);if(n){var o=n.get(t);return o||md(t,this.id)}else return new og("Eventer with "+t.ownerIndex+" does not have "+e+".")}else{try{for(var h=yd(this.topics),a=h.next();!a.done;a=h.next()){var l=hu(a.value,2),u=l[0],n=l[1],o=n.get(t);if(o)return o}}catch(c){i={error:c}}finally{try{a&&!a.done&&(s=h.return)&&s.call(h)}finally{if(i)throw i.error}}return md(t,this.id)}},r.prototype.off=function(t,e){var i,s;if(e){var n=this.topics.get(e);return!!(n&&n.delete(t))}else{try{for(var o=yd(this.topics),h=o.next();!h.done;h=o.next()){var a=hu(h.value,2),l=a[0],n=a[1];if(n.delete(t))return!0}}catch(u){i={error:u}}finally{try{h&&!h.done&&(s=o.return)&&s.call(o)}finally{if(i)throw i.error}}return!1}},r.prototype.allOff=function(){return this.topics.clear(),this},r.prototype.topicOff=function(t){return this.topics.delete(t)},r.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var s=this.topics.get(t),n=0;if(s){var o=new Map(s);o.forEach(function(h){h.apply(void 0,gp(e)),n++})}return n},r.prototype.listeners=function(t){var e=this.topics.get(t);return e||new Map},r}(),Xh={exports:{}},pd;function pp(){if(pd)return Xh.exports;pd=1,Xh.exports=r,Xh.exports.default=r;function r(P,_,V){V=V||2;var B=_&&_.length,I=B?_[0]*V:P.length,L=t(P,0,I,V,!0),U=[];if(!L||L.next===L.prev)return U;var Y,O,j,$,Z,Q,ct;if(B&&(L=a(P,_,L,V)),P.length>80*V){Y=j=P[0],O=$=P[1];for(var et=V;et<I;et+=V)Z=P[et],Q=P[et+1],Z<Y&&(Y=Z),Q<O&&(O=Q),Z>j&&(j=Z),Q>$&&($=Q);ct=Math.max(j-Y,$-O),ct=ct!==0?32767/ct:0}return i(L,U,V,Y,O,ct,0),U}function t(P,_,V,B,I){var L,U;if(I===z(P,_,V,B)>0)for(L=_;L<V;L+=B)U=M(L,P[L],P[L+1],U);else for(L=V-B;L>=_;L-=B)U=M(L,P[L],P[L+1],U);return U&&w(U,U.next)&&(R(U),U=U.next),U}function e(P,_){if(!P)return P;_||(_=P);var V=P,B;do if(B=!1,!V.steiner&&(w(V,V.next)||v(V.prev,V,V.next)===0)){if(R(V),V=_=V.prev,V===V.next)break;B=!0}else V=V.next;while(B||V!==_);return _}function i(P,_,V,B,I,L,U){if(P){!U&&L&&f(P,B,I,L);for(var Y=P,O,j;P.prev!==P.next;){if(O=P.prev,j=P.next,L?n(P,B,I,L):s(P)){_.push(O.i/V|0),_.push(P.i/V|0),_.push(j.i/V|0),R(P),P=j.next,Y=j.next;continue}if(P=j,P===Y){U?U===1?(P=o(e(P),_,V),i(P,_,V,B,I,L,2)):U===2&&h(P,_,V,B,I,L):i(e(P),_,V,B,I,L,1);break}}}}function s(P){var _=P.prev,V=P,B=P.next;if(v(_,V,B)>=0)return!1;for(var I=_.x,L=V.x,U=B.x,Y=_.y,O=V.y,j=B.y,$=I<L?I<U?I:U:L<U?L:U,Z=Y<O?Y<j?Y:j:O<j?O:j,Q=I>L?I>U?I:U:L>U?L:U,ct=Y>O?Y>j?Y:j:O>j?O:j,et=B.next;et!==_;){if(et.x>=$&&et.x<=Q&&et.y>=Z&&et.y<=ct&&x(I,Y,L,O,U,j,et.x,et.y)&&v(et.prev,et,et.next)>=0)return!1;et=et.next}return!0}function n(P,_,V,B){var I=P.prev,L=P,U=P.next;if(v(I,L,U)>=0)return!1;for(var Y=I.x,O=L.x,j=U.x,$=I.y,Z=L.y,Q=U.y,ct=Y<O?Y<j?Y:j:O<j?O:j,et=$<Z?$<Q?$:Q:Z<Q?Z:Q,mt=Y>O?Y>j?Y:j:O>j?O:j,xt=$>Z?$>Q?$:Q:Z>Q?Z:Q,Ct=y(ct,et,_,V,B),Pt=y(mt,xt,_,V,B),dt=P.prevZ,ut=P.nextZ;dt&&dt.z>=Ct&&ut&&ut.z<=Pt;){if(dt.x>=ct&&dt.x<=mt&&dt.y>=et&&dt.y<=xt&&dt!==I&&dt!==U&&x(Y,$,O,Z,j,Q,dt.x,dt.y)&&v(dt.prev,dt,dt.next)>=0||(dt=dt.prevZ,ut.x>=ct&&ut.x<=mt&&ut.y>=et&&ut.y<=xt&&ut!==I&&ut!==U&&x(Y,$,O,Z,j,Q,ut.x,ut.y)&&v(ut.prev,ut,ut.next)>=0))return!1;ut=ut.nextZ}for(;dt&&dt.z>=Ct;){if(dt.x>=ct&&dt.x<=mt&&dt.y>=et&&dt.y<=xt&&dt!==I&&dt!==U&&x(Y,$,O,Z,j,Q,dt.x,dt.y)&&v(dt.prev,dt,dt.next)>=0)return!1;dt=dt.prevZ}for(;ut&&ut.z<=Pt;){if(ut.x>=ct&&ut.x<=mt&&ut.y>=et&&ut.y<=xt&&ut!==I&&ut!==U&&x(Y,$,O,Z,j,Q,ut.x,ut.y)&&v(ut.prev,ut,ut.next)>=0)return!1;ut=ut.nextZ}return!0}function o(P,_,V){var B=P;do{var I=B.prev,L=B.next.next;!w(I,L)&&E(I,B,B.next,L)&&m(I,L)&&m(L,I)&&(_.push(I.i/V|0),_.push(B.i/V|0),_.push(L.i/V|0),R(B),R(B.next),B=P=L),B=B.next}while(B!==P);return e(B)}function h(P,_,V,B,I,L){var U=P;do{for(var Y=U.next.next;Y!==U.prev;){if(U.i!==Y.i&&A(U,Y)){var O=b(U,Y);U=e(U,U.next),O=e(O,O.next),i(U,_,V,B,I,L,0),i(O,_,V,B,I,L,0);return}Y=Y.next}U=U.next}while(U!==P)}function a(P,_,V,B){var I=[],L,U,Y,O,j;for(L=0,U=_.length;L<U;L++)Y=_[L]*B,O=L<U-1?_[L+1]*B:P.length,j=t(P,Y,O,B,!1),j===j.next&&(j.steiner=!0),I.push(p(j));for(I.sort(l),L=0;L<I.length;L++)V=u(I[L],V);return V}function l(P,_){return P.x-_.x}function u(P,_){var V=c(P,_);if(!V)return _;var B=b(V,P);return e(B,B.next),e(V,V.next)}function c(P,_){var V=_,B=P.x,I=P.y,L=-1/0,U;do{if(I<=V.y&&I>=V.next.y&&V.next.y!==V.y){var Y=V.x+(I-V.y)*(V.next.x-V.x)/(V.next.y-V.y);if(Y<=B&&Y>L&&(L=Y,U=V.x<V.next.x?V:V.next,Y===B))return U}V=V.next}while(V!==_);if(!U)return null;var O=U,j=U.x,$=U.y,Z=1/0,Q;V=U;do B>=V.x&&V.x>=j&&B!==V.x&&x(I<$?B:L,I,j,$,I<$?L:B,I,V.x,V.y)&&(Q=Math.abs(I-V.y)/(B-V.x),m(V,P)&&(Q<Z||Q===Z&&(V.x>U.x||V.x===U.x&&d(U,V)))&&(U=V,Z=Q)),V=V.next;while(V!==O);return U}function d(P,_){return v(P.prev,P,_.prev)<0&&v(_.next,P,P.next)<0}function f(P,_,V,B){var I=P;do I.z===0&&(I.z=y(I.x,I.y,_,V,B)),I.prevZ=I.prev,I.nextZ=I.next,I=I.next;while(I!==P);I.prevZ.nextZ=null,I.prevZ=null,g(I)}function g(P){var _,V,B,I,L,U,Y,O,j=1;do{for(V=P,P=null,L=null,U=0;V;){for(U++,B=V,Y=0,_=0;_<j&&(Y++,B=B.nextZ,!!B);_++);for(O=j;Y>0||O>0&&B;)Y!==0&&(O===0||!B||V.z<=B.z)?(I=V,V=V.nextZ,Y--):(I=B,B=B.nextZ,O--),L?L.nextZ=I:P=I,I.prevZ=L,L=I;V=B}L.nextZ=null,j*=2}while(U>1);return P}function y(P,_,V,B,I){return P=(P-V)*I|0,_=(_-B)*I|0,P=(P|P<<8)&16711935,P=(P|P<<4)&252645135,P=(P|P<<2)&858993459,P=(P|P<<1)&1431655765,_=(_|_<<8)&16711935,_=(_|_<<4)&252645135,_=(_|_<<2)&858993459,_=(_|_<<1)&1431655765,P|_<<1}function p(P){var _=P,V=P;do(_.x<V.x||_.x===V.x&&_.y<V.y)&&(V=_),_=_.next;while(_!==P);return V}function x(P,_,V,B,I,L,U,Y){return(I-U)*(_-Y)>=(P-U)*(L-Y)&&(P-U)*(B-Y)>=(V-U)*(_-Y)&&(V-U)*(L-Y)>=(I-U)*(B-Y)}function A(P,_){return P.next.i!==_.i&&P.prev.i!==_.i&&!F(P,_)&&(m(P,_)&&m(_,P)&&S(P,_)&&(v(P.prev,P,_.prev)||v(P,_.prev,_))||w(P,_)&&v(P.prev,P,P.next)>0&&v(_.prev,_,_.next)>0)}function v(P,_,V){return(_.y-P.y)*(V.x-_.x)-(_.x-P.x)*(V.y-_.y)}function w(P,_){return P.x===_.x&&P.y===_.y}function E(P,_,V,B){var I=k(v(P,_,V)),L=k(v(P,_,B)),U=k(v(V,B,P)),Y=k(v(V,B,_));return!!(I!==L&&U!==Y||I===0&&C(P,V,_)||L===0&&C(P,B,_)||U===0&&C(V,P,B)||Y===0&&C(V,_,B))}function C(P,_,V){return _.x<=Math.max(P.x,V.x)&&_.x>=Math.min(P.x,V.x)&&_.y<=Math.max(P.y,V.y)&&_.y>=Math.min(P.y,V.y)}function k(P){return P>0?1:P<0?-1:0}function F(P,_){var V=P;do{if(V.i!==P.i&&V.next.i!==P.i&&V.i!==_.i&&V.next.i!==_.i&&E(V,V.next,P,_))return!0;V=V.next}while(V!==P);return!1}function m(P,_){return v(P.prev,P,P.next)<0?v(P,_,P.next)>=0&&v(P,P.prev,_)>=0:v(P,_,P.prev)<0||v(P,P.next,_)<0}function S(P,_){var V=P,B=!1,I=(P.x+_.x)/2,L=(P.y+_.y)/2;do V.y>L!=V.next.y>L&&V.next.y!==V.y&&I<(V.next.x-V.x)*(L-V.y)/(V.next.y-V.y)+V.x&&(B=!B),V=V.next;while(V!==P);return B}function b(P,_){var V=new T(P.i,P.x,P.y),B=new T(_.i,_.x,_.y),I=P.next,L=_.prev;return P.next=_,_.prev=P,V.next=I,I.prev=V,B.next=V,V.prev=B,L.next=B,B.prev=L,B}function M(P,_,V,B){var I=new T(P,_,V);return B?(I.next=B.next,I.prev=B,B.next.prev=I,B.next=I):(I.prev=I,I.next=I),I}function R(P){P.next.prev=P.prev,P.prev.next=P.next,P.prevZ&&(P.prevZ.nextZ=P.nextZ),P.nextZ&&(P.nextZ.prevZ=P.prevZ)}function T(P,_,V){this.i=P,this.x=_,this.y=V,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}r.deviation=function(P,_,V,B){var I=_&&_.length,L=I?_[0]*V:P.length,U=Math.abs(z(P,0,L,V));if(I)for(var Y=0,O=_.length;Y<O;Y++){var j=_[Y]*V,$=Y<O-1?_[Y+1]*V:P.length;U-=Math.abs(z(P,j,$,V))}var Z=0;for(Y=0;Y<B.length;Y+=3){var Q=B[Y]*V,ct=B[Y+1]*V,et=B[Y+2]*V;Z+=Math.abs((P[Q]-P[et])*(P[ct+1]-P[Q+1])-(P[Q]-P[ct])*(P[et+1]-P[Q+1]))}return U===0&&Z===0?0:Math.abs((Z-U)/U)};function z(P,_,V,B){for(var I=0,L=_,U=V-B;L<V;L+=B)I+=(P[U]-P[L])*(P[L+1]+P[U+1]),U=L;return I}return r.flatten=function(P){for(var _=P[0][0].length,V={vertices:[],holes:[],dimensions:_},B=0,I=0;I<P.length;I++){for(var L=0;L<P[I].length;L++)for(var U=0;U<_;U++)V.vertices.push(P[I][L][U]);I>0&&(B+=P[I-1].length,V.holes.push(B))}return V},Xh.exports}var xp=pp();const hg=fm(xp);class ag{constructor(){this.i=!0}o(){return this.i}}class Sp extends ag{constructor(t,e){super(),this.u=t,this.i=e}S(t){return t!==this.u&&(this.u=t,this.i=!0),this}M(){return this.u}o(){return super.o()}}const N=(r,t)=>({x:r,y:t}),gr=(r,t)=>({x:r,y:t}),Is=(r,t,e)=>({position:r,high:t,low:e}),yt=(r,t,e)=>({x:r,y:t,z:e}),lg=r=>{const t=Array(0),e=Array(0);return r.length>0&&r.forEach(i=>{t.push(N(i.position,i.high)),e.push(N(i.position,i.low))}),[t,e]},wt=(r,t)=>({min:r,max:t}),ug=(r,t,e,i)=>({x:Math.ceil(r),y:Math.ceil(t),width:Math.ceil(e),height:Math.ceil(i)}),vt=(r,t=!0)=>new Sp(r,t),Tr=(r=0,t=0,e=0,i=0)=>({left:r,top:t,right:e,bottom:i}),jo=Tr,qn=(r,t)=>({left:t.left!==void 0?t.left:r.left,top:t.top!==void 0?t.top:r.top,right:t.right!==void 0?t.right:r.right,bottom:t.bottom!==void 0?t.bottom:r.bottom}),Ap=Ot({type:"color",r:1,g:1,b:1,a:1});class Ts extends Ap{constructor(t){super(t)}toUint32(){return this._!==void 0||(this._=Mp(this.getR(),this.getG(),this.getB(),this.getA())),this._}toString(){return`color:${this.r},${this.g},${this.b},${this.a}`}setA(t){return this.set("a",t/255)}setR(t){return this.set("r",t/255)}setG(t){return this.set("g",t/255)}setB(t){return this.set("b",t/255)}getA(){return 255*this.get("a")}getR(){return 255*this.get("r")}getG(){return 255*this.get("g")}getB(){return 255*this.get("b")}getHighlight(){return this.C||(this.C=new Ts({r:this.r+.45*(1-this.r),g:this.g+.45*(1-this.g),b:this.b+.45*(1-this.b),a:this.a<1?this.a+.45*(1-this.a):1})),this.C}getLighter(){return this.T||(this.T=new Ts({r:this.r+.4*(1-this.r),g:this.g+.4*(1-this.g),b:this.b+.4*(1-this.b),a:this.a})),this.T}getDarker(){return this.F||(this.F=new Ts({r:this.r-.4*(1-this.r),g:this.g-.4*(1-this.g),b:this.b-.4*(1-this.b),a:this.a})),this.F}toRGBAString(){return`rgba( ${255*this.r}, ${255*this.g}, ${255*this.b}, ${255*this.a} )`}}const ah=r=>!(!r||typeof r!="object"||!("type"in r)||r.type!=="color"),D=(r,t,e,i=255)=>new Ts({r:r/255,g:t/255,b:e/255,a:i/255}),xi=r=>{const t=r.startsWith("#")?r.substring(1):r.startsWith("0x")?r.substr(2):r;switch(t.length){case 8:return new Ts({r:+`0x${t.substring(0,2)}`/255,g:+`0x${t.substring(2,4)}`/255,b:+`0x${t.substring(4,6)}`/255,a:+`0x${t.substring(6,8)}`/255});case 6:return new Ts({r:+`0x${t.substring(0,2)}`/255,g:+`0x${t.substring(2,4)}`/255,b:+`0x${t.substring(4,6)}`/255});case 4:return new Ts({r:+`0x${t.charAt(0)}${t.charAt(0)}`/255,g:+`0x${t.charAt(1)}${t.charAt(1)}`/255,b:+`0x${t.charAt(2)}${t.charAt(2)}`/255,a:+`0x${t.charAt(3)}${t.charAt(3)}`/255});case 3:return new Ts({r:+`0x${t.charAt(0)}${t.charAt(0)}`/255,g:+`0x${t.charAt(1)}${t.charAt(1)}`/255,b:+`0x${t.charAt(2)}${t.charAt(2)}`/255});default:throw new Error(`ColorHEX parsing error | input: ${r}`)}},vp=(r,t=1,e=1)=>{let i,s,n;r/=360;const o=Math.floor(6*r),h=6*r-o,a=e*(1-t),l=e*(1-h*t),u=e*(1-(1-h)*t);switch(o%6){case 0:i=e,s=u,n=a;break;case 1:i=l,s=e,n=a;break;case 2:i=a,s=e,n=u;break;case 3:i=a,s=l,n=e;break;case 4:i=u,s=a,n=e;break;default:i=e,s=a,n=l}return new Ts({r:i,g:s,b:n})},bp=r=>D(255&r,255&(r>>=8),255&(r>>=8),255&(r>>=8)),vn=new Ts({}),ue=D(0,0,0,0),Mp=(r,t,e,i=255)=>(i<<24|e<<16|t<<8|r)>>>0,Rp=(r,t)=>r.value-t.value,Ep=Ot({type:"lut",steps:[],title:"",units:"",interpolate:!0,color:D(0,0,0,255),length:0,min:0,max:0,subranges:[],isValid:!1,percentageValues:!1}),xd=r=>{const{steps:t}=r,e=t.length;t.sort(Rp);const[i,s]=e>0?[t[0].value,t[e-1].value]:[0,0],n=e>0?e-1:0,o=Array(n);for(let h=0;h<n;h+=1)o[h]={min:t[h],max:t[h+1]};return{min:i,max:s,length:e,steps:t,subranges:o,isValid:e>0&&i!==s}};class wp extends Ep{constructor(t){super(((e,i)=>({steps:e.steps,title:e.title,units:e.units,interpolate:e.interpolate,percentageValues:e.percentageValues,color:e.color,length:i.length,min:i.min,max:i.max,subranges:i.subranges,isValid:i.isValid}))(t,xd(t)))}toString(){return`LUT:interpolate=${this.interpolate},steps=${this.steps.length},percentage=${this.percentageValues}`}setSteps(t){return this.merge(xd({...this,steps:t}))}getSteps(){return this.get("steps")}setTitle(t){return this.set("title",t)}getTitle(){return this.get("title")}setUnits(t){return this.set("units",t)}getUnits(){return this.get("units")}setInterpolation(t){return this.set("interpolate",t)}getInterpolation(){return this.get("interpolate")}setFallbackColor(t){return this.set("color",t)}getFallbackColor(){return this.get("color")}setPercentageValues(t){return this.set("percentageValues",t)}getPercentageValues(){return this.get("percentageValues")}getColors(t){if(Array.isArray(t)){if(Array.isArray(t[0])){const n=t,o=n.length,h=n[0].length,a=[...Array(o)].map(()=>Array(h));for(let l=0;l<o;l+=1)for(let u=0;u<h;u+=1)a[l][u]=this.I(n[l][u]);return a}const e=t,i=e.length,s=Array(i);for(let n=0;n<i;n+=1)s[n]=this.I(e[n]);return s}return this.I(t)}I(t){const{steps:e}=this,i=e.length;if(i===0)return this.getFallbackColor();if(i===1)return e[0].color||this.color;if(this.interpolate){for(let h=0;h<i-1;h+=1){const a=e[h],l=e[h+1],u=Math.min(a.value,l.value),c=Math.max(a.value,l.value);if(t>=u&&t<=c){if(u===c)return a.color;const d=(t-a.value)/(l.value-a.value);return s=a.color,n=l.color,o=d,new Ts({r:s.r+(n.r-s.r)*o,g:s.g+(n.g-s.g)*o,b:s.b+(n.b-s.b)*o,a:s.a+(n.a-s.a)*o})}}return t<e[0].value?e[0].color:e[i-1].color}var s,n,o;for(let h=i-1;h>=0;h-=1)if(t>=e[h].value)return e[h].color;return e[0].color}}const kp=Ot({type:"fillstyle",fillType:"empty"});class Tp extends kp{toString(){return"emptyFill"}}const ft=new Tp,cg=r=>!!(r&&typeof r=="object"&&"type"in r&&r.type==="fillstyle"&&"fillType"in r&&r.fillType==="empty"),Cp=Ot({type:"fillstyle",fillType:"solid",color:D(255,255,255)});class dg extends Cp{}class H extends dg{constructor(t){super({...t,fillType:"solid"})}toString(){return`solidFill:${this.color.toString()}`}setColor(t){return ah(t)?this.set("color",t):this.set("color",t(this.get("color")))}getColor(){return this.get("color")}setA(t){return this.setColor(this.getColor().setA(t))}setR(t){return this.setColor(this.getColor().setR(t))}setG(t){return this.setColor(this.getColor().setG(t))}setB(t){return this.setColor(this.getColor().setB(t))}}const Nt=r=>!!(r&&typeof r=="object"&&"type"in r&&r.type==="fillstyle"&&"fillType"in r&&r.fillType==="solid");class Sd extends dg{constructor(t){super({...t,fillType:"individual"})}toString(){return`individualPointFill:${this.color.toString()}`}setFallbackColor(t){return ah(t)?this.set("color",t):this.set("color",t(this.get("color")))}getFallbackColor(){return this.get("color")}}const Ri=r=>!!(r&&typeof r=="object"&&"type"in r&&r.type==="fillstyle"&&"fillType"in r&&r.fillType==="individual");Ot({type:"fillstyle",fillType:"palette",lut:new wp({steps:[]}),lookUpProperty:"value"});const Be=r=>!!(r&&typeof r=="object"&&"type"in r&&r.type==="fillstyle"&&"fillType"in r&&r.fillType==="palette"),us={linear:(r,t,e)=>{const i=t-r;return s=>s<e?r+i/e*s:t},easeIn:(r,t,e)=>i=>i<e?r+Math.abs(2*(Math.sqrt(.5)*i/e)**2)*(t-r):t,easeOut:(r,t,e)=>i=>i<e?r+Math.abs(1-2*(Math.sqrt(.5)*(1-i/e))**2)*(t-r):t,ease:(r,t,e)=>i=>i<e?r+(i<e/2?.5*(i/e*2)**2.5:.5+.5*(1-(1-2*(i/e-.5))**2.5))*(t-r):t,logarithmic:r=>{const t=nc(r);return(e,i,s)=>{const n=t(e),o=t(i);return h=>h<s?r**(n+Math.abs(1-2*(Math.sqrt(.5)*(1-h/s))**2)*(o-n)):i}}};class ic{constructor(t,e,i,s=us.linear,n){this.delta=0,this.nextAnimations=new Array,this.P=!1,this.easing=us.linear,this.D=new Xe,this.isOver=()=>(this.delta===this.duration||this.P)&&this.nextAnimations.length===0,this.values=t,this.action=e,this.duration=i,this.easing=s,this.L=n,this.eases=t.map(([o,h])=>s(o,h,i))}R(){this.D.emit("start")}start(){return this.L.includes(this)||this.L.push(this),this}addNextAnimations(t){return t instanceof Array?t.forEach(e=>this.nextAnimations.push(e)):this.nextAnimations.push(t),this}NextAnimation(t,e,i=this.duration,s=this.easing){const n=new ic(t,e,i,s,this.L);return this.nextAnimations.push(n),n}onAnimationStart(t,e){return this.D.on("start",t,e)}onAnimationEnd(t,e){return this.D.on("end",t,e)}onEveryAnimationEnd(t,e){return this.D.on("everyEnd",t,e)}onAllAnimationEnd(t,e){return this.D.on("allEnd",t,e)}allOffAnimationEnd(){return this.D.topicOff("end"),this}allOffEveryAnimationEnd(){return this.D.topicOff("everyEnd"),this}allOffAllAnimationEnd(){return this.D.topicOff("allEnd"),this}offAnimationEnd(t){return this.D.off(t,"end")}offEveryAnimationEnd(t){return this.D.off(t,"everyEnd")}offAllAnimationEnd(t){return this.D.off(t,"allEnd")}finish(t=!0){if(this.P=!0,this.L.splice(this.L.indexOf(this),1),this.nextAnimations.length>0){const e=this.nextAnimations[0];return t&&(this.D.listeners("allEnd").forEach((i,s)=>e.onAllAnimationEnd(i,s)),this.D.listeners("everyEnd").forEach((i,s)=>e.onEveryAnimationEnd(i,s))),e.addNextAnimations(this.nextAnimations.slice(1)),e.start(),t&&(this.D.emit("end",e),this.D.emit("everyEnd",e)),e}t&&(this.D.emit("end",void 0),this.D.emit("everyEnd",void 0),this.D.emit("allEnd"))}finishAll(t=!0){let e=this;for(;e;)e=e.finish(t)}getFinalValues(){return this.nextAnimations.length>0?this.nextAnimations[this.nextAnimations.length-1].values.map(bd):this.values.map(bd)}getTimeUntilFinish(){let t=this.duration-this.delta;for(let e=0;e<this.nextAnimations.length;e+=1)t+=this.nextAnimations[e].duration-this.nextAnimations[e].delta;return t}}const yr=(r,t=60)=>{t>60&&console.log("Note: Animator FPS is usually capped at 60 by the browser!");const e=[];let i,s,n=0;const o=()=>{i=void 0;const h=Date.now();s=s||h,n=h-s,n/1e3>=1/t&&(s=Date.now()-n%(1e3/t),e.forEach(a=>{a.delta===0&&a.R(),a.delta+=n-n%(1e3/t),a.delta>a.duration&&(a.delta=a.duration),a.action(a.eases.map(l=>l(a.delta))),a.delta===a.duration&&a.finish()}),r()),e.length>0?i=X.requestAnimationFrame(o):(i=void 0,s=void 0)};return(h=1e3,a=us.linear)=>(l,u,c=h)=>{const d=new ic(l,u,c,a,e).start();return i||(i=X.requestAnimationFrame(o)),d}};var bi,Mi;(function(r){r.circle="circle",r.ellipse="ellipse"})(bi||(bi={})),function(r){r.closestSide="closest-side",r.closestCorner="closest-corner",r.farthestSide="farthest-side",r.farthestCorner="farthest-corner"}(Mi||(Mi={}));const Fp=Ot({type:"fillstyle",fillType:"radial-gradient",stops:[{color:xi("#f00"),offset:0},{color:xi("#0f0"),offset:1}],position:N(.5,.5),shape:bi.ellipse,extent:Mi.farthestCorner});class hi extends Fp{constructor(t){if(super(t),t===null||t&&t.stops===null||t&&t.stops&&!Array.isArray(t.stops)||t&&t.stops&&Array.isArray(t.stops)&&t.stops.length<2)throw new Error("RadialGradientFill requires minimum two color stops to be defined.")}toString(){return`radialGradientFill:${this.shape},${this.extent},${this.position.x},${this.position.y},${this.stops.map(t=>`${t.offset},${t.color.toString()}`).join(",")}`}setColorStops(t){if(t.length<2)throw new Error("Minimum of two color stops required");return this.set("stops",t)}getColorStops(){return this.get("stops")}setPosition(t){return this.set("position",t)}getPosition(){return this.get("position")}setShape(t){return this.set("shape",t)}getShape(){return this.get("shape")}setExtent(t){return this.set("extent",t)}getExtent(){return this.get("extent")}}const Ae=r=>!!(r&&typeof r=="object"&&"type"in r&&r.type==="fillstyle"&&"fillType"in r&&r.fillType==="radial-gradient"),Dp=Ot({type:"fillstyle",fillType:"linear-gradient",stops:[{color:xi("#f00"),offset:0},{color:xi("#0f0"),offset:1}],angle:0});class mi extends Dp{constructor(t){if(super(t),t===null||t&&t.stops===null||t&&t.stops&&!Array.isArray(t.stops)||t&&t.stops&&Array.isArray(t.stops)&&t.stops.length<2)throw new Error("LinearGradientFill requires minimum two color stops to be defined.")}toString(){return`linearGradientFill:${this.angle},${this.stops.map(t=>`${t.offset},${t.color.toString()}`).join(",")}`}setColorStops(t){if(t.length<2)throw new Error("Minimum of two color stops required");const e=t.sort((i,s)=>i.offset-s.offset);return this.set("stops",e)}getColorStops(){return this.get("stops")}setAngle(t,e){return this.set("angle",e?Ig(t):t)}getAngle(t){return t?hs(this.get("angle")):this.get("angle")}}const ve=r=>!!(r&&typeof r=="object"&&"type"in r&&r.type==="fillstyle"&&"fillType"in r&&r.fillType==="linear-gradient"),Pp=Ot({type:"linestyle",lineType:"empty"}),it=new class extends Pp{constructor(){super(...arguments),this.thickness=0}setThickness(r){return this}getThickness(){return 0}V(){return 0}setFillStyle(r){return this}getFillStyle(){return ft}},Ad=r=>!(!r||typeof r!="object"||!("lineType"in r)||r.lineType!=="empty");class fg{constructor(t,e,i,s){this.cellIndex=t,this.cellSpan=e,this.cellsAmount=i,this.observedAmount=s,this.x=new Tl,this.y=new Tl,this.z=new Tl,this.D=new Xe;const n={...t},o={...e};if(s){const h=c=>{this.cellsAmount.x=c.reduce(lh,0),this.cellIndex.x=c.reduce((d,f,g)=>g>=n.x?d:d+f,0),this.cellSpan.x=c.reduce((d,f,g)=>g>=n.x&&g<n.x+o.x?d+f:d,0),this.D.emit("cell-resize")},a=s.x.O(h);h(s.x.M());const l=c=>{this.cellsAmount.y=c.reduce(lh,0),this.cellIndex.y=c.reduce((d,f,g)=>g>=n.y?d:d+f,0),this.cellSpan.y=c.reduce((d,f,g)=>g>=n.y&&g<n.y+o.y?d+f:d,0),this.D.emit("cell-resize")},u=s.y.O(l);l(s.y.M()),this.N=()=>{s.x.G(a),s.y.G(u)}}}W(){return this.N&&(this.N(),this.N=void 0),this}U(t){return this.D.on("cell-resize",t)}Y(t){return this.D.off(t,"cell-resize")}}class Tl extends ag{constructor(){super(...arguments),this.H=0,this.$=10,this.X=1}j(){return this.i=!1,this}Z(){return this.i=!0,this}getInnerStart(){return this.H}getInnerEnd(){return this.$}getInnerInterval(){return Math.abs(this.getInnerEnd()-this.getInnerStart())}J(t,e){return this.H=t,this.$=e,this.K(),this}q(t){return this.X=t,this.K(),this}tt(t){return t/this.X}K(){const t=this.tt(this.$-this.H),e=this.X;this.it!==void 0&&De(t,this.it)!==!1||(this.i=!0,this.st=e,this.it=t)}et(){return this.it}ht(){return this.st}rt(){return this.$<this.H}nt(t,e){return!0}}const ui={d1:r=>new r.scale1DConstructor(0,1,1,void 0),d2:r=>new r.scaleXYConstructor().ot({x:0,y:0},{x:1,y:1},{x:1,y:1},void 0),d3:()=>new fg({x:0,y:0},{x:1,y:1},{x:1,y:1},void 0)},ho=(r,t,e)=>t===e?r:e.ut(t.ct(r)),K=(r,t,e)=>{if(t===e)return r;const i=t instanceof _s?t.x:t.x instanceof _s?t.x.x:t.x.dt,s=t instanceof _s?t.y:t.y instanceof _s?t.y.y:t.y.dt,n=e instanceof _s?e.x:e.x instanceof _s?e.x.x:e.x.dt,o=e instanceof _s?e.y:e.y instanceof _s?e.y.y:e.y.dt;return{...r,x:ho(r.x,i,n),y:ho(r.y,s,o)}},Ip=(r,t,e)=>{if(t.id==="axes"&&e.id==="world")return t.chart.At.ft(r);if(t.id==="world"&&e.id==="axes")return t.chart.At.yt(r);if(t.id===e.id)return r;throw new Error("LC JS translatePoint3D misusage | originCoordinateSystem and targetCoordinateSystem arguments must be either Chart3D.coordsWorld or Chart3D.coordsAxis")},Vp=(...r)=>{if(r.length===0)return{remove:Ft};let t=!1;const e=r.map(n=>n.onIntervalChange((o,h,a)=>((l,u,c)=>{t||(t=!0,r.filter(d=>d!==l).forEach(d=>d.St(u,c,!1,l.getStopped(),"synchronizedAxis")),t=!1)})(n,h,a)));let i=!1;const s=r.map(n=>n.onStoppedStateChanged((o,h)=>((a,l)=>{i||(i=!0,r.filter(u=>u!==a).forEach(u=>u.setStopped(l)),i=!1)})(n,h)));return{remove:()=>{r.forEach((n,o)=>{n.offIntervalChange(e[o]),n.offStoppedStateChanged(s[o])})}}};class Jo extends Error{constructor(t,e){super(`ChartError: ${t} ${e?`in ${e.constructor.name}`:""}`),Object.setPrototypeOf(this,Jo.prototype)}}class Le extends Error{constructor(t,e,i=!1){const s=`EngineError: ${t} ${e?`in ${e.constructor.name}`:""}`;super(s),i&&X.alert(s),Object.setPrototypeOf(this,Le.prototype)}}class sc extends Le{constructor(t){super(t),Object.setPrototypeOf(this,sc.prototype)}}var Xt,ns,jt,bt;(function(r){r[r.Content=0]="Content",r[r.PaddedContent=1]="PaddedContent",r[r.PaddedBackground=2]="PaddedBackground",r[r.Everything=3]="Everything"})(Xt||(Xt={})),function(r){r[r.never=0]="never",r[r.always=1]="always",r[r.whenHovered=2]="whenHovered",r[r.whenDragged=3]="whenDragged",r[r.whenNotDragged=4]="whenNotDragged",r[r.whenHoveredOrDragged=5]="whenHoveredOrDragged"}(ns||(ns={})),function(r){r[r.notDraggable=0]="notDraggable",r[r.draggable=1]="draggable",r[r.onlyHorizontal=2]="onlyHorizontal",r[r.onlyVertical=3]="onlyVertical"}(jt||(jt={})),function(r){r[r.Up=0]="Up",r[r.Right=1]="Right",r[r.Down=2]="Down",r[r.Left=3]="Left"}(bt||(bt={}));const X=typeof window<"u"?window:typeof global<"u"&&global._lcjs?global._lcjs:{},vd=(r,t)=>r.x===t.x&&r.y===t.y,$h=r=>r!==st&&r!==ht&&!Number.isNaN(r)&&Number.isFinite(r)&&r!==1/0&&r!==-1/0,bd=r=>r[1],Sn=r=>r.dispose(),Ft=()=>{},De=(r,t)=>r===t,Rt=(r,t,e)=>e>t?Math.min(Math.max(r,t),e):Math.min(Math.max(r,e),t),Sa=r=>Array.prototype.concat.apply([],r),qt=(r,t)=>r!==void 0?r:t,gg=r=>r.vt(),yg=r=>r.bt(),mg=r=>r.xt(),pg=r=>r.Mt(),xg=r=>r.min.x,Sg=r=>r.max.x,Ag=r=>r.min.y,vg=r=>r.max.y,Ur=(r,t,e,i,s)=>{if(r.length>0){let n=s?i(s):void 0;for(let o=0;o<r.length;o+=1){const h=t(r[o]);h!==void 0&&(n=n!==void 0?e(n,h):h)}return n}if(s)return i(s)},Md=(r,t)=>r.position===t.position&&r.high===t.high&&r.low===t.low,_p=N(0,1),Np=N(1,0),Lp=N(0,-1),zp=N(-1,0),Bp=N(0,0),bg=r=>{switch(r){case bt.Up:return _p;case bt.Right:return Np;case bt.Down:return Lp;case bt.Left:return zp;default:return Bp}},Rd=r=>r===bt.Left||r===bt.Right,tt=r=>{r.stopPropagation(),r.preventDefault()},on=(r,t)=>{if(!t)return r;const e=r.length,i=new Float32Array(2*e);let s=0;for(let n=0;n<e;n+=1){const o=r[n],h=Math.fround(o);i[s+0]=h,i[s+1]=o-h,s+=2}return i},cs=(r,t)=>{if(!t){const n=r.length,o=new Float32Array(2*n);let h=0;for(let a=0;a<n;a+=1){const l=r[a];o[h+0]=l.x,o[h+1]=l.y,h+=2}return o}const e=r.length,i=new Float32Array(4*e);let s=0;for(let n=0;n<e;n+=1){const o=r[n],h=Math.fround(o.x),a=Math.fround(o.y);i[s+0]=h,i[s+1]=a,i[s+2]=o.x-h,i[s+3]=o.y-a,s+=4}return i},rc=r=>{const t=r.length,e=new Float32Array(3*t);let i=0;for(let s=0;s<t;s+=1){const n=r[s];e[i+0]=n.x,e[i+1]=n.y,e[i+2]=n.z,i+=3}return e},Mg=r=>t=>{const e=r.indexOf(t);e>=0&&r.splice(e,1)},Rg=r=>{let t=r.length;for(let e=0;e<t-1;e+=1)r[e].x===r[e+1].x&&r[e].y===r[e+1].y&&(r.splice(e,1),e-=1,t-=1);return r},nc=r=>{const t=Math.log(r);return e=>Math.log(e)/t},Up=nc(Math.E),Eg=(r,t)=>{const e=t[r];return e?e():void 0},Ed=(r,t)=>{let e;if(t)e=t;else{const i={x:0,y:0};for(let s=0;s<r.length;s+=1)i.x+=r[s].x/r.length,i.y+=r[s].y/r.length;e=i}return r.sort((i,s)=>du(Ut(i,e))-du(Ut(s,e)))},ai=(r,t,e)=>{if(r.length===0)return e.canReturnB===!1?t.slice():t;const i=t.length;if(i<1e5)return r.push.apply(r,t),r;for(let s=0;s<i;s+=1)r.push(t[s]);return r},yi=(r,t,e)=>e<0?r:e>1?t:D(r.getR()+e*(t.getR()-r.getR()),r.getG()+e*(t.getG()-r.getG()),r.getB()+e*(t.getB()-r.getB()),r.getA()+e*(t.getA()-r.getA())),au=r=>r.getA()===255?r:r.setA(255),Aa=(()=>{const r=D(0,0,0);return t=>(t=au(t),new hi({shape:bi.circle,extent:Mi.farthestCorner,position:{x:.2,y:.8},stops:[{offset:0,color:t},{offset:1,color:yi(t,r,.5)}]}))})(),ge=(()=>{const r=t=>{var e;if(t){if(Nt(t))return t.getColor().getA()===0?void 0:t.getColor();if(Ae(t)||ve(t)){const i=t.getColorStops();return i.length===3?i[1].color:(e=i[0])===null||e===void 0?void 0:e.color}Be(t)}};return(t,e,i,s)=>{const n=[];if(s.fill&&n.push(s.fill),s.fill2&&n.push(s.fill2),s.stroke){const l=s.stroke.getFillStyle();l!==ft&&n.push(l)}if(s.point3D){const l=s.point3D;n.push(l.getFillStyle())}let o;if(s.behavior&&s.behavior.colorStep===!0){const[l,u]=n.reduce((c,d)=>{if(c[0]&&c[1])return c;const f=r(d);return f&&(c[0]===void 0?c[0]=f:c[1]=f),c},[void 0,void 0]);o=l&&u?(h=l)===(a=u)||h.getR()===a.getR()&&h.getG()===a.getG()&&h.getB()===a.getB()?Aa(h):(h=au(h),a=au(a),new mi({angle:0,stops:[{offset:0,color:a},{offset:.5,color:a},{offset:.5,color:h},{offset:1,color:h}]})):e.uiButtonFillStyle}else{const l=n.reduce((u,c)=>u||r(c),void 0);o=l?i?new H({color:l}):Aa(l):e.uiButtonFillStyle}var h,a;t.setButtonOnFillStyle(o)}})(),Qe=r=>{const t=r;if(Be(t))return{lut:t.getPalette(),lookUpProperty:t.getLookUpProperty()}},oc=r=>{let t=0;return()=>(t+=1,`${r}-${t}`)},gi=(r,t)=>{let e=typeof r=="string"?r:String(r);const i=e.indexOf(".");let s=i>=0?i:e.length;for(;s<t;s+=1)e=`0${e}`;return e},kt=(r,t)=>typeof r=="function"?r(t):r,Wr=r=>r.ctrlKey?Math.sign(r.deltaY)*Math.min(.05*Math.abs(r.deltaY),1):Math.sign(r.deltaY),qs=(r,t)=>t(),wg=()=>new Error(`LightningChart JS encountered an unexpected error.
Please report this issue to https://lightningchart.com/js-charts/docs/contact`);new H({color:D(255,255,255,1)});const lu=r=>r===Kt||r.min.x===Kt.min.x&&r.max.x===Kt.max.x&&r.min.y===Kt.min.y&&r.max.y===Kt.max.y,Lr=r=>Array.from(new Set(r)),Cl=r=>r.filter(t=>t!==void 0),Hr=r=>typeof r=="boolean"?r?1:0:r>1?1:r<0?0:r,kg=(r,t,e)=>{t.length<=0||(r.setText(e.label).setOn(t[0].getVisible()),e.style&&r.setButtonOnFillStyle(e.style),e.toggleVisibilityOnClick&&r.onSwitch((i,s)=>t.forEach(n=>n.setVisible(s))),r.onMouseEnter(()=>t.forEach(i=>i.setHighlight(!0))),r.onMouseLeave(()=>t.forEach(i=>i.setHighlight(!1))),t.forEach(i=>i.onMouseEnter(()=>r.setHighlight(!0))),t.forEach(i=>i.onMouseLeave(()=>r.setHighlight(!1))),t.forEach(i=>i.onTouchStart(()=>r.setHighlight(!0))),t.forEach(i=>i.onTouchEnd(()=>r.setHighlight(!1))))},wo=(r,t)=>{throw new Error(t)},Tg=()=>{const r=yr(()=>{});let t;return(e,i,s,n)=>{const o=n==null?void 0:n.onStart,h=n==null?void 0:n.onCompleted,a=(n==null?void 0:n.easing)||us.ease,l=(n==null?void 0:n.durationMs)||1e3;let u;if(t)if(t.nextAnimations.length===0){const c=t.NextAnimation([[e,i]],([d])=>{t=c,s(d)},l,a);u=c}else{e=t.nextAnimations.pop().values[0][0];const c=t.NextAnimation([[e,i]],([d])=>{t=c,s(d)},l,a);u=c}else u=r(l,a)([[e,i]],([c])=>{s(c)}),t=u;u.onAnimationEnd(()=>{t=void 0}),o&&u.onAnimationStart(o),h&&u.onAnimationEnd(h)}},Rh=r=>{let t;return()=>t||(t=r(),t)},Ti=r=>{if(r===it)return 0;const t=r.getThickness();return t<0?1:1*t},Cg=(r,t,e,i)=>{const s=`LightningChart JS Resources not found.
resourcesBaseUrl: "${r}"
initiator: ${e}
resource url: ${t}
For more information, please see https://lightningchart.com/js-charts/docs/troubleshooting/error-resources-not-found/`;if(i.shouldCrash)throw X.alert(s),new Error(s);X.console.warn(s)},Fl=(r,t,e,i=0)=>{if(r<e(i)||e(t)<r)return;const s=t;for(;i!==t;){const o=Math.ceil((i+t)/2);r<e(o)?t=o-1:i=o}const n=Math.abs(r-e(i));return i<s&&Math.abs(r-e(i+1))<n?i+1:i},ko=()=>{const r=new Map;return{_t:t=>(t.setMouseEnterEventHandler((e,i,s)=>{const n=s&&r.get(s);n&&n.wt(e,i,s)}),t.setMouseLeaveEventHandler((e,i,s)=>{const n=s&&r.get(s);n&&n.Ct(e,i,s)}),t.setMouseClickEventHandler((e,i,s)=>{const n=s&&r.get(s);n&&n.kt(e,i,s)}),t.setMouseDoubleClickEventHandler((e,i,s)=>{const n=s&&r.get(s);n&&n.Tt(e,i,s)}),t.setMouseDownEventHandler((e,i,s)=>{const n=s&&r.get(s);n&&n.Ft(e,i,s)}),t.setMouseUpEventHandler((e,i,s)=>{const n=s&&r.get(s);n&&n.It(e,i,s)}),t.setMouseMoveEventHandler((e,i,s)=>{const n=s&&r.get(s);n&&n.Pt(e,i,s)}),t.setMouseDragEventHandler((e,i,s,n,o,h)=>{const a=h&&r.get(h);a&&a.Dt(e,i,s,n,o,h)}),t.setMouseDragStartEventHandler((e,i,s,n)=>{const o=n&&r.get(n);o&&o.Bt(e,i,s,n)}),t.setMouseDragStopEventHandler((e,i,s,n,o)=>{const h=o&&r.get(o);h&&h.Lt(e,i,s,n,o)}),t.setMouseWheelEventHandler((e,i,s)=>{const n=s&&r.get(s);n&&n.Rt(e,i,s)}),t.setTouchStartEventHandler((e,i,s)=>{const n=s&&r.get(s);n&&n.Et(e,i,s)}),t.setTouchMoveEventHandler((e,i,s)=>{const n=s&&r.get(s);n&&n.zt(e,i,s)}),t.setTouchEndEventHandler((e,i,s)=>{const n=s&&r.get(s);n&&n.Vt(e,i,s)}),t),Ot:(t,e)=>{r.set(t,e)},Nt:()=>{r.clear()}}},mr={left:0,right:0,top:0,bottom:0},Fg=()=>Math.round(Math.random()*Number.MAX_SAFE_INTEGER),uu=(r,t,e)=>{t&&t.Gt();const i=e();return{Wt:r,Gt:()=>{i.forEach(s=>r.Ut(s))}}},J={add:(r,t)=>yt(r.x+t,r.y+t,r.z+t),addVec(r,...t){const e={x:r.x,y:r.y,z:r.z};for(const i of t)e.x+=i.x,e.y+=i.y,e.z+=i.z;return e},subtract:(r,t)=>yt(r.x-t,r.y-t,r.z-t),subtractVec(r,...t){const e={x:r.x,y:r.y,z:r.z};for(const i of t)e.x-=i.x,e.y-=i.y,e.z-=i.z;return e},multiply:(r,t)=>yt(r.x*t,r.y*t,r.z*t),divide:(r,t)=>yt(r.x/t,r.y/t,r.z/t),multiplyVec(r,...t){const e={x:r.x,y:r.y,z:r.z};for(const i of t)e.x*=i.x,e.y*=i.y,e.z*=i.z;return e},divideVec(r,...t){const e={x:r.x,y:r.y,z:r.z};for(const i of t)e.x/=i.x,e.y/=i.y,e.z/=i.z;return e},length:r=>Math.sqrt(r.x*r.x+r.y*r.y+r.z*r.z),normalize:r=>J.divide(r,J.length(r)),dot:(r,t)=>r.x*t.x+r.y*t.y+r.z*t.z,cross:(r,t)=>yt(r.y*t.z-r.z*t.y,r.z*t.x-r.x*t.z,r.x*t.y-r.y*t.x),angle:(r,t)=>Math.acos(J.dot(r,t)/(J.length(r)*J.length(t))),rotateAroundAxis(r,t,e){const i=Math.cos(e),s=Math.sin(e),n=J.dot(t,r),o=J.cross(t,r);return J.addVec(J.multiply(r,i),J.addVec(J.multiply(t,(1-i)*n),J.multiply(o,s)))},lerp:(r,t,e)=>(e=Rt(e,0,1),J.addVec(J.multiply(r,1-e),J.multiply(t,e))),equals:(r,t)=>De(r.x,t.x)&&De(r.y,t.y)&&De(r.z,t.z),abs:r=>({x:Math.abs(r.x),y:Math.abs(r.y),z:Math.abs(r.z)}),sign:r=>({x:Math.sign(r.x),y:Math.sign(r.y),z:Math.sign(r.z)})},st=Number.MAX_SAFE_INTEGER,ht=-Number.MAX_SAFE_INTEGER,Kt=wt(N(st,st),N(ht,ht)),os=wt(yt(st,st,st),yt(ht,ht,ht)),cu=(r,t)=>{const e=Math.log(r)/Math.log(t);return Math.floor((i=>(Math.ceil(i)-i<1e-4?i=Math.ceil(i):i-Math.floor(i)<1e-4&&(i=Math.floor(i)),i))(e))},va=(r,t)=>!(t.min.x>r.max.x||t.max.x<r.min.x||t.min.y>r.max.y||t.max.y<r.min.y),ba=(r,t)=>!(r[1].x<t[0].x||r[0].x>t[1].x||r[3].y<t[0].y||r[0].y>t[3].y),Dg=(r,t)=>wt(N(Math.max(Math.min(r[0].x,r[2].x),Math.min(t[0].x,t[2].x)),Math.max(Math.min(r[0].y,r[2].y),Math.min(t[0].y,t[2].y))),N(Math.min(Math.max(r[0].x,r[2].x),Math.max(t[0].x,t[2].x)),Math.min(Math.max(r[0].y,r[2].y),Math.max(t[0].y,t[2].y)))),Pg=r=>{const t=r.length;for(let e=0;e<t;e+=1)for(let i=e+1;i<t;i+=1)if(va(r[e],r[i]))return!0;return!1},lh=(r,t)=>t+r,Gp=(r,t,e)=>{const i=Ut(t,r),s=i.x*i.x+i.y*i.y;if(s===0)return r;const n=Ut(e,r),o=(n.x*i.x+n.y*i.y)/s;return o<=0?r:o>=1?t:N(r.x+o*i.x,r.y+o*i.y)},lr=(r,t,e)=>e>t?r>=t&&r<=e:r>=e&&r<=t,pr=(r,t)=>{const e=r.x-t.x,i=r.y-t.y;return Math.sqrt(e*e+i*i)},wd=(r,t)=>{const e=r.x-t.x,i=r.y-t.y;return e*e+i*i},Dr=(r,t,e)=>gt(r,St(Ut(t,r),e)),Dl=(r,t,e)=>J.addVec(r,J.multiply(J.subtractVec(t,r),e));function ce(r){const t=r.length;if(t>0){let e=r[0].x,i=r[0].x,s=r[0].y,n=r[0].y;for(let o=0;o<t;o+=1){const h=r[o];h.x>e&&(e=h.x),h.x<i&&(i=h.x),h.y>s&&(s=h.y),h.y<n&&(n=h.y)}return wt(N(i,n),N(e,s))}return Kt}function hc(r){const t=r.length;if(t>0){let e=r[0].x,i=r[0].x,s=r[0].y,n=r[0].y,o=r[0].z,h=r[0].z;for(let a=0;a<t;a+=1){const l=r[a];l.x>e&&(e=l.x),l.x<i&&(i=l.x),l.y>s&&(s=l.y),l.y<n&&(n=l.y),l.z>o&&(o=l.z),l.z<h&&(h=l.z)}return wt(yt(i,n,h),yt(e,s,o))}return os}const Bi=(...r)=>{const t={min:{x:st,y:st},max:{x:ht,y:ht}};for(const e of r)t.min.x=t.min.x<e.min.x?t.min.x:e.min.x,t.max.x=t.max.x>e.max.x?t.max.x:e.max.x,t.min.y=t.min.y<e.min.y?t.min.y:e.min.y,t.max.y=t.max.y>e.max.y?t.max.y:e.max.y;return t},Ma=(r,t)=>wt(yt(r.min.x<t.min.x?r.min.x:t.min.x,r.min.y<t.min.y?r.min.y:t.min.y,r.min.z<t.min.z?r.min.z:t.min.z),yt(r.max.x>t.max.x?r.max.x:t.max.x,r.max.y>t.max.y?r.max.y:t.max.y,r.max.z>t.max.z?r.max.z:t.max.z));function Op(r,t,e,i){const s=r.x-i.x,n=r.y-i.y,o=i.x-e.x,h=e.y-i.y,a=h*s+o*n,l=(i.y-t.y)*s+(t.x-i.x)*n,u=h*(t.x-i.x)+o*(t.y-i.y);return u<0?a<=0&&l<=0&&a+l>=u:a>=0&&l>=0&&a+l<=u}function ur(r,t,e){return N(Math.cos(e)*(r.x-t.x)+Math.sin(e)*(r.y-t.y)+t.x,-Math.sin(e)*(r.x-t.x)+Math.cos(e)*(r.y-t.y)+t.y)}function kd(r,t){return N(r.x-t.x,r.y-t.y)}function Li(r){const t=Pr(r);return t===0?N(0,0):N(r.x/t,r.y/t)}function Za(r,t){let e={x:t.x-r.x,y:t.y-r.y};e=Li(e);const i=Math.PI/2,s=e.x;return e.x=-Math.sin(i)*e.y,e.y=s*Math.sin(i),e}function Pr(r){return Math.sqrt(r.x*r.x+r.y*r.y)}function St(r,t){return N(r.x*t,r.y*t)}function gt(r,t){return N(r.x+t.x,r.y+t.y)}function Ut(r,t){return N(r.x-t.x,r.y-t.y)}function zi(r,t){return N(r.x*t.x,r.y*t.y)}function Zo(r,t){return N(r.x/t.x,r.y/t.y)}function Td(r){return St(r,-1)}function Pl(r,t){return r.x*t.x+r.y*t.y}const Wn=(r,t,e)=>{const i=(e.y-t.y)/(e.x-t.x),s=t.y+(r-t.x)*i;return N(r,s)},ac=(r,t,e)=>{const i=(e.y-t.y)/(e.x-t.x),s=t.x+(r-t.y)/i;return N(s,r)};function hs(r){return r*Math.PI/180}function Ig(r){return 180*r/Math.PI}function du(r){return 180*Math.atan2(r.y,r.x)/Math.PI}function lc(r){return N(Math.cos(r),Math.sin(r))}function Cd(r){let t=-1;const e=Math.cos(r),i=Math.sin(r);return e>0&&e<1&&i>0&&i<1?t=1:e<0&&e>-1&&i>0&&i<1?t=2:e<0&&e>-1&&i<0&&i>-1?t=3:e>0&&e<1&&i<0&&i>-1&&(t=4),t}const fu=(r,t,e,i)=>{let s,n,o,h;if(t.x-r.x!=0||i.x-e.x!=0)return t.x-r.x==0?(o=t.x,n=(i.y-e.y)/(i.x-e.x),h=n*(o-e.x)+e.y):i.x-e.x==0?(o=i.x,s=(t.y-r.y)/(t.x-r.x),h=s*(o-r.x)+r.y):(s=(t.y-r.y)/(t.x-r.x),n=(i.y-e.y)/(i.x-e.x),o=(e.y-n*e.x+s*r.x-r.y)/(s-n),h=s*(o-r.x)+r.y),N(o,h)},Fd=(r,t)=>{const e=r.length,i=t.length,s=new Uint16Array(e+i);return s.set(r,0),s.set(t,e),s};class Yp{constructor(){this.Yt=!0}getInnerStart(){return this.H}getInnerEnd(){return this.$}getInnerInterval(){return Math.abs(this.$-this.H)}J(t,e){return this.Yt=t!==this.H||e!==this.$,this.H=t,this.$=e,this}j(){return this.Yt=!1,this}Z(){return this.Yt=!0,this}}class Vg extends Yp{constructor(t,e,i,s){if(super(),this.Ht=!0,this.$t=!0,this.Xt=[0,0],this.jt=!0,this.Zt=t,this.Qt=e,this.Jt=i,this.Kt=t,this.qt=e,s){const n=s.O(this.ti.bind(this));this.ti(s.M()),this.ii=()=>s.G(n)}}q(t){return this.X=t,this.$t=!0,this}si(t){return this.Xt=t.map(Math.abs),this.jt=!0,this}ei(){return this.Zt/this.Jt*this.X+this.Xt[0]}hi(){return(this.Zt+this.Qt)/this.Jt*this.X-this.Xt[1]}ri(){return this.getCellSize()-this.ni()}oi(){return this.X}getCellSize(){return this.ai(this.X)}ni(){return this.Xt[0]+this.Xt[1]}li(){return this.Xt}ti(t){this.Jt=t.reduce(lh,0),this.Zt=t.reduce((e,i,s)=>s>=this.Kt?e:e+i,0),this.Qt=t.reduce((e,i,s)=>s>=this.Kt&&s<this.Kt+this.qt?e+i:e,0),this.Ht=!0,this.ui()}ai(t){return t*this.Qt/this.Jt}j(){return super.j(),this.$t=!1,this.jt=!1,this.Ht=!1,this}Z(){return super.Z(),this.$t=!0,this.jt=!0,this.Ht=!0,this}}class Zr extends Vg{constructor(t,e,i,s){super(t,e,i,s),this.ci={internal:10,function:pn(10),number:10},this.X=1e3,this.J(1,1e3),this.di=this.fi()}nt(t,e,i,s,n){if(t===e)return!1;const o=Math.min(t,e)<jh,h=Math.max(t,e)>Il;return!o&&!h||!!n&&(e>t?{start:o?jh:t,end:h?Il:e}:{start:h?Il:t,end:o?jh:e})}ct(t){const e=this.ei(),i=this.hi(),s=Math.max(t,jh);return e+(this.ci.function(s)-this.di.scaleStartLog)/this.di.scaleIntervalLog*(i-e)}ut(t){const e=this.ei(),i=(t-e)/(this.hi()-e),s=this.di.scaleStartLog+i*this.di.scaleIntervalLog;return this.ci.number**s}ui(){this.ci&&this.fi()}J(t,e){return super.J(t,e),this.ci&&this.fi(),this}si(t){return super.si(t),this.ci&&this.fi(),this}q(t){return super.q(t),this.ci&&this.fi(),this}Ai(t){return this.ci={internal:t,function:pn(t),number:ao(t)},this}gi(){return this.ci.internal}mi(t,e){const i=this.ct(t)+e;return this.ut(i)}yi(){return this.$t||this.Yt||this.jt||this.Ht}fi(){const t=this.ci.function(this.H),e=this.ci.function(this.$)-t,i=2*this.ei()/this.X-1,s=2*this.hi()/this.X-1-i;return this.di={scaleStartLog:t,scaleIntervalLog:e,viewportStart:i,viewportSize:s},this.di}pi(){return this.di}}const pn=r=>r==="e"?Up:nc(r),ao=r=>r==="e"?Math.E:r,jh=.9*10**-4,Il=1.1*10**25,Wp=[{prefix:"T",unit:10**12},{prefix:"B",unit:10**9},{prefix:"M",unit:1e6},{prefix:"K",unit:1e3}],_g=(r,t,e)=>{const i=Math.abs(e-t),s=Math.max(2-cu(i,10),0);return r.toFixed(s)},or={Numeric:(r,t)=>_g(r,t.getInnerStart(),t.getInnerEnd()),NumericUnits:(r,t)=>{const e=Math.abs(t.getInnerEnd()-t.getInnerStart()),i=r<0;r=Math.abs(r);let s="",n="";if(e>=1e3&&r>1e3){let o="";for(const h of Wp){const a=Math.round(1e3*r/h.unit)/1e3;if(a>=1){o=a.toString(),n=h.prefix;break}}s=(i?"-":"")+o}else{let o=String(Math.floor(r));const h=cu(r,1e3);for(let a=1;a<=h;a+=1){const l=o.length-(3*a+(a-1));o=`${o.substring(0,l)} ${o.substring(l,o.length)}`}s=(i?"-":"")+o+(e<=10?((a,l)=>{if(l===0)return"";let u=(Math.abs(a)-Math.abs(Math.floor(a))).toString().substring(1);return u.length>l&&(u=u.substring(0,l+1)),u})(r,2-cu(e,10)):"")}return s+=n,s},LogarithmicExponentsRounded:(r,t,e,i=10)=>{const s=pn(i)(r);return`${i}${Vl(s)}`},LogarithmicExponents:(r,t,e,i=10)=>{const s=pn(i),n=Math.floor(s(r)),o=r/ao(i)**n;return`${Math.round(o)}×${i}${Vl(n)}`},LogarithmicExtreme:(r,t,e,i=10)=>{const s=pn(i),n=Math.floor(s(r));return`${(r/ao(i)**n).toFixed(2)}×${i}${Vl(n)}`},LogarithmicNoExponents:(r,t,e,i=10)=>{const s=pn(i);if(i==="e")return`${Math.floor(s(r))}e`;const n=r.toString();if(r>1)return n;const o=Math.floor(s(r));return r.toFixed(Math.abs(o))}},Vl=r=>Math.round(r).toString().split("").map(t=>{switch(t){case"0":return"⁰";case"1":return"¹";case"2":return"²";case"3":return"³";case"4":return"⁴";case"5":return"⁵";case"6":return"⁶";case"7":return"⁷";case"8":return"⁸";case"9":return"⁹";case"-":return"⁻";default:return t}}).join("");class Hi extends Vg{constructor(t,e,i,s){super(t,e,i,s),this.Si=!1,this.vi=!1,this.bi=0,this.X=1e3,this.J(0,10),this.K()}yi(){return this.vi}nt(t,e,i,s,n){if(t===e)return!1;const o=Math.abs(s-i),h=Math.abs(e-t);if(!this.Si){const c=((g,y,p)=>{const x=((A,v)=>{if(v<st&&v>ht&&A<st&&A>ht){const w=Math.abs(A/8388608),E=Math.abs(v/2**23),C=Math.min(w,E);return 10**Math.floor(Math.log10(C))}})(g,y);if(x!==void 0)return x*p})(t,e,this.getCellSize());if(c===void 0)return!1;if(h>c)return!0;const d=(e+t)/2,f=(n?c/2:o/2)*(t>e?-1:1);return{start:d-f,end:d+f}}const a=10**-(12-Math.log10(Math.max(Math.abs(t),1)));if(h>a)return!0;const l=(e+t)/2,u=(n?a/2:o/2)*(t>e?-1:1);return{start:l-u,end:l+u}}ui(){this.K()}ct(t){return this.ei()+(t-this.H)/(this.$-this.H)*(this.hi()-this.ei())}ut(t){return this.H+(t-this.ei())/(this.hi()-this.ei())*(this.$-this.H)}J(t,e){return super.J(t,e),this.K(),this}si(t){return super.si(t),this.K(),this}q(t){return super.q(t),this.xi=_l(this.$-this.H,this.Xt,this.X,this.Qt,this.Jt),this.K(),this}Mi(){return this.Si=!0,this}_i(){return this.Si}wi(){return Math.abs(this.Ci)}ki(){return this.wi()/this.xi}Ti(){return this.Fi}Ii(){return this.Pi}getPixelSize(){return this.xi}pi(){return this.di}Z(){return super.Z(),this.vi=!0,this}j(){return super.j(),this.vi=!1,this}Di(t,e=or.Numeric){return e(t,this)}Bi(){const t=Math.abs(this.getInnerEnd()).toString().length,e=Math.abs(this.getInnerStart()).toString().length;return t>e?t:e}Li(t){return _l(t,this.Xt,this.X,this.Qt,this.Jt)}K(){let t=this.H,e=this.$,i=0;this.Si&&(t=0,e=this.$-this.H,i=this.H);const s=e-t,n=_l(s,this.Xt,this.X,this.Qt,this.Jt);this.Pi=t-this.Xt[0]*n,this.Fi=e+this.Xt[1]*n;const o=this.Fi-this.Pi,h=o-this.Ci,a=Math.abs(h/n),l=s-this.bi,u=Math.abs(l/n);(!this.di||a>=.4||u>=.4)&&(this.bi=s,this.Ci=o,this.xi=n,this.vi=!0);const c=this.Ci*this.Jt/(2*this.Qt),d=-(this.Pi-this.Ci*this.Zt/this.Qt)-c,f=2*this.ei()/this.X-1,g=2*this.hi()/this.X-1-f;this.di={displacement:d,scaling:c,highPrecisionOffset:i,viewportStart:f,viewportSize:g,scaleStartLog:0,scaleIntervalLog:0}}mi(t,e){return t+this.xi*e}}const _l=(r,t,e,i=1,s=1)=>r/(e*i/s-(t[0]+t[1]));class _s{Ri(t,e){return"x"in t?(this.x=t.x,this.y=t.y):(this.x=t,this.y=e),this}j(){return this.x.j(),this.y.j(),this}Z(){return this.x.Z(),this.y.Z(),this}q(t,e){return typeof t=="object"?(this.x.q(t.x),this.y.q(t.y)):(this.x.q(t),this.y.q(e)),this}oi(){return N(this.x.oi(),this.y.oi())}Ei(t){return this.x.si(t),this}zi(t){return this.y.si(t),this}ni(){return N(this.x.ni(),this.y.ni())}Vi(t,e){return this.x.J(t,e),this}Oi(t,e){return this.y.J(t,e),this}getInnerIntervalPixels(){const t=this.x.getCellSize(),e=this.y.getCellSize();return{x:t-this.x.ni(),y:e-this.y.ni()}}Ni(){return this.x.yi()||this.y.yi()}}class Gt extends _s{constructor(){super(...arguments),this.Gi="LinearScaleXY"}ot(t,e,i,s){return this.x=new Hi(t.x,e.x,i.x,s?s.x:void 0),this.y=new Hi(t.y,e.y,i.y,s?s.y:void 0),this}_i(){return this.x._i()||this.y._i()}Wi(){return N(this.x.getPixelSize(),this.y.getPixelSize())}pi(){return{x:this.x.pi(),y:this.y.pi()}}mi(t,e){const i=this.Wi();return{x:t.x+e.x*i.x,y:t.y+e.y*i.y}}Ui(t,e,i,s){const n=this.Wi(),o=Za(t,e);return o.x*=s,o.y*=s,{x:t.x+i*n.x*o.x,y:t.y+i*n.y*o.y}}}class Ue extends _s{constructor(){super(...arguments),this.Gi="MixedScaleXY"}_i(){return!1}mi(t,e){const i=this.x.ct(t.x),s=this.y.ct(t.y),n={x:i+e.x,y:s+e.y};return{x:this.x.ut(n.x),y:this.y.ut(n.y)}}Ui(t,e,i,s){const n={x:this.x.ct(t.x),y:this.y.ct(t.y)},o={x:this.x.ct(e.x),y:this.y.ct(e.y)},h=Li(Ut(o,n)),a=Za(o,n),l={x:n.x+h.x*s+a.x*i,y:n.y+h.y*s+a.y*i};return{x:this.x.ut(l.x),y:this.y.ut(l.y)}}pi(){const t=this.x.pi(),e=this.y.pi();return{uScaleStart:[this.x.H,this.y.H],uScaleInterval:[this.x.getInnerInterval(),this.y.getInnerInterval()],uScaleStartLog:[t.scaleStartLog,e.scaleStartLog],uScaleIntervalLog:[t.scaleIntervalLog,e.scaleIntervalLog],uViewportStart:[t.viewportStart,e.viewportStart],uViewportSize:[t.viewportSize,e.viewportSize]}}}const Qa=(r,t)=>r instanceof Zr||t instanceof Zr?new Ue().Ri(r,t):new Gt().Ri(r,t),Jn=r=>r==="client",uc=r=>!!(r&&typeof r=="object"&&"clientX"in r&&typeof r.clientX=="number"&&"clientY"in r&&typeof r.clientY=="number"),Js=r=>r==="relative",Dd=r=>!!(r&&typeof r=="object"&&"x"in r&&typeof r.x=="number"&&"y"in r&&typeof r.y=="number");var Rs;(function(r){r[r.noHighlighting=0]="noHighlighting",r[r.onHover=1]="onHover"})(Rs||(Rs={}));class Eh{constructor(t,e,i,s){this.Yi=!0,this.Hi=Rs.onHover,this.$i=!1,this.Xi=!0,this.ji=!1,this.D=new Xe,this.Zi=[],this.Qi=[],this.onMouseEnter=n=>this.D.on("mouseEnter",n),this.onMouseLeave=n=>this.D.on("mouseLeave",n),this.onMouseClick=n=>this.D.on("mouseClick",n),this.onMouseDoubleClick=n=>this.D.on("mouseDoubleClick",n),this.onMouseDown=n=>this.D.on("mouseDown",n),this.onMouseUp=n=>this.D.on("mouseUp",n),this.onMouseMove=n=>this.D.on("mouseMove",n),this.offMouseEnter=n=>this.D.off(n,"mouseEnter"),this.offMouseLeave=n=>this.D.off(n,"mouseLeave"),this.offMouseClick=n=>this.D.off(n,"mouseClick"),this.offMouseDoubleClick=n=>this.D.off(n,"mouseDoubleClick"),this.offMouseDown=n=>this.D.off(n,"mouseDown"),this.offMouseUp=n=>this.D.off(n,"mouseUp"),this.offMouseMove=n=>this.D.off(n,"mouseMove"),this.offMouseDragStart=n=>this.D.off(n,"mouseDragStart"),this.offMouseDrag=n=>this.D.off(n,"mouseDrag"),this.offMouseDragStop=n=>this.D.off(n,"mouseDragStop"),this.offMouseWheel=n=>this.D.off(n,"mouseWheel"),this.wt=(n,o,h)=>{this.D.emit("mouseEnter",this,o),this.ji=!0,this.Hi===Rs.onHover&&this.setHighlight(!0)},this.Ct=(n,o,h)=>{this.D.emit("mouseLeave",this,o),this.ji=!1,this.Hi===Rs.onHover&&this.setHighlight(!1)},this.Pt=(n,o,h)=>{this.D.emit("mouseMove",this,o)},this.kt=(n,o,h)=>this.D.emit("mouseClick",this,o),this.Tt=(n,o,h)=>this.D.emit("mouseDoubleClick",this,o),this.Ft=(n,o,h)=>this.D.emit("mouseDown",this,o),this.It=(n,o,h)=>this.D.emit("mouseUp",this,o),this.Bt=(n,o,h,a)=>{this.D.emit("mouseDragStart",this,o,h)},this.Dt=(n,o,h,a,l,u)=>{this.D.emit("mouseDrag",this,o,h,a,l)},this.Lt=(n,o,h,a,l)=>{this.D.emit("mouseDragStop",this,o,h,a)},this.Rt=(n,o,h)=>{this.D.emit("mouseWheel",this,o)},this.Et=(n,o,h)=>{this.D.emit("touchStart",this,o),this.ji=!0,this.Hi===Rs.onHover&&this.setHighlight(!0)},this.zt=(n,o,h)=>{this.D.emit("touchMove",this,o)},this.Vt=(n,o,h)=>{this.D.emit("touchEnd",this,o),this.ji=!1,this.Hi===Rs.onHover&&this.setHighlight(!1)},this.Ji=t,this.Ki=e,this.qi=i,this.ts=new Map,this.ss=s,this.es=this.ss.hs(this,{rs:{themeEffectEnabled:this.qi.effectsText},ns:{}}),this.Ji.us.ls.os(this,n=>{this.ts.forEach((o,h)=>h.cs(n)),this.Qi.forEach(o=>o.setHighlight(n)),this.Zi.forEach(o=>o.cs(n))},{animationEnabled:this.Ji.getAnimationsEnabled()})}ds(t,e){const i=(e==null?void 0:e.setEventHandlers)===void 0||e.setEventHandlers,s=(e==null?void 0:e.isText)!==void 0&&e.isText;this.ts.set(t,{isText:s});const n=Array.from(this.ts);this.es.rs.fs(n.filter(h=>h[1].isText).map(h=>h[0])),this.es.ns.fs(n.filter(h=>!h[1].isText).map(h=>h[0])),t.setMouseInteractions(this.Yi).setVisible(this.Xi).cs(this.Ji.us.ls.As(this,!0)),i&&t.setMouseEnterEventHandler(this.wt).setMouseLeaveEventHandler(this.Ct).setMouseClickEventHandler(this.kt).setMouseDoubleClickEventHandler(this.Tt).setMouseDownEventHandler(this.Ft).setMouseUpEventHandler(this.It).setMouseMoveEventHandler(this.Pt).setMouseDragStartEventHandler(this.Bt).setMouseDragEventHandler(this.Dt).setMouseDragStopEventHandler(this.Lt).setMouseWheelEventHandler(this.Rt).setTouchStartEventHandler(this.Et).setTouchMoveEventHandler(this.zt).setTouchEndEventHandler(this.Vt);const o=t.onDispose(()=>{t.offDispose(o),this.ts.delete(t)})}gs(t){this.Zi=t;const e=this.Ji.us.ls.As(this,!0);t.forEach(i=>{i.cs(e).ys(this.Xi)})}setEffect(t){return this.es.rs.ps(t&&this.qi.effectsText),this.es.ns.ps(t),this.Ji.us.Ss(),this}getEffect(){return this.es.rs.vs()||this.es.ns.vs()}onHighlight(t){return this.D.on("highlight",t)}offHighlight(t){return this.D.off(t)}setIcon(t){return this.bs=t,this.Ji.us.Ss(),this}getIcon(){return this.bs}setName(t){return this.xs=t,this.Qi.forEach(e=>e.setText(this.xs)),this}getName(){return this.xs}dispose(){return this.$i||(this.$i=!0,this.ts.forEach((t,e)=>e.dispose()),this.Ki(this),this.Qi.forEach(t=>{t.dispose()}),this.Qi.length=0,this.D.emit("dispose",this),this.Ji.us.Ss()),this}setVisible(t){return t===this.Xi||(this.Xi=t,this.ts.forEach((e,i)=>i.setVisible(t)),this.Zi.forEach(e=>e.ys(t)),this.Qi.forEach(e=>e.setOn(t)),this.D.emit("visibleStateChanged",this,this.Xi),this.Ji.us.Ss()),this}getVisible(){return this.Xi}onVisibleStateChanged(t){return this.D.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.D.off(t,"visibleStateChanged")}setHighlight(t){return this.Ji.us.ls.Ms(this,t),this.D.emit("highlight",this,t),this}getHighlight(){return this.Ji.us.ls.As(this)}setAnimationHighlight(t){return this.Ji.us.ls._s(this,t),this}getAnimationHighlight(){return this.Ji.us.ls.ws(this)}setMouseInteractions(t){return this.Yi=t,this.ts.forEach((e,i)=>i.setMouseInteractions(t)),this.Ji.us.Ss(),this}getMouseInteractions(){return this.Yi}getIsUnderMouse(){return this.ji}setHighlightOnHover(t){return this.Hi=t?Rs.onHover:Rs.noHighlighting,t===!1&&this.getHighlight()>0&&this.setHighlight(!1),this}getHighlightOnHover(){return this.Hi!==Rs.noHighlighting}attach(t,e=!0,i=!1){return kg(t,[this],{toggleVisibilityOnClick:e,label:this.xs,style:void 0}),this.Qi.push(t),t.onDispose(()=>{const s=this.Qi.indexOf(t);s>=0&&this.Qi.splice(s,1)}),this}Cs(){return this.bs}onMouseDragStart(t){return this.D.on("mouseDragStart",t)}onMouseDrag(t){return this.D.on("mouseDrag",t)}onMouseDragStop(t){return this.D.on("mouseDragStop",t)}onMouseWheel(t){return this.D.on("mouseWheel",t)}onTouchStart(t){return this.D.on("touchStart",t)}onTouchMove(t){return this.D.on("touchMove",t)}onTouchEnd(t){return this.D.on("touchEnd",t)}isDisposed(){return this.$i}onDispose(t){return this.D.on("dispose",t)}offTouchStart(t){return this.D.off(t,"touchStart")}offTouchMove(t){return this.D.off(t,"touchMove")}offTouchEnd(t){return this.D.off(t,"touchEnd")}offDispose(t){return this.D.off(t,"dispose")}}class Ng extends Eh{constructor(t,e,i,s,n,o,h,a){super(e,i,h,a),this.ks=t,this.axis=s,this.dt=n,this.Ts=o,this.Fs()}}const Nl=r=>{const t=r.length;if(t>0){let e=0,i=0;for(let s=0;s<t;s+=1)e+=r[s].x,i+=r[s].y;return N(e/t,i/t)}return N(0,0)},Ci=(...r)=>{const t=r.length,e=new Array(t).fill(!1),i=(s,n)=>{for(let o=0;o<t;o+=1){const h=r[o],a=h.Is(s,n);a?h.Ps(s,n,!0):e[o]&&e[o]&&h.Ps(s,n,!1),e[o]=a}return!1};return{onTouchStart:i,onTouchMove:i,onTouchEnd:i}},Lg=class{constructor(r,t=300){this.Ds=!1,this.Bs=[],this.Ls=300,this.Rs=r,this.Ls=t}Is(r,t){const e=X.performance.now();let i=!1;for(let s=0;s<this.Bs.length;s+=1)e-this.Bs[s].time>=this.Ls?(this.Bs.splice(s,1),s-=1):this.Bs[s].state&&(i=!0);return this.Ds?t.interactions.length===0&&(this.Bs.push({state:!1,time:e}),this.Ds=!1):t.interactions.length===1&&t.type==="pointerdown"&&(this.Bs.push({state:!0,time:e}),i=!0,this.Ds=!0),i}Ps(r,t,e){if(e){const i=this.Bs.reduce((s,n)=>(n.state?s.on+=1:s.off+=1,s),{on:0,off:0});i.on>=2&&i.off>=1&&(this.Rs(r,t),this.Bs.length=0)}}},ds=class{constructor(r,t,e,i=1,s=100){this.Es=r,this.zs=t,this.Vs=e,this.Os=i,this.Ns=s}Is(r,t){const e=t.interactions.length;if(e===this.Os){if(this.Gs!==void 0)return!0;if(t.type==="pointerdown"&&(e===1||(i=>{const s=i.length;if(s>0){const n=Nl(i);let o=0;for(let h=0;h<s;h+=1)o=Math.max(o,pr(n,N(i[h].x,i[h].y)));return o}return st})(t.interactions)<=this.Ns))return this.Gs=Nl(t.interactions),!0}return!1}Ps(r,t,e){const i=this.Ws;if(!e||t.forceTouchEnd||t.type==="pointerup")this.Vs&&this.Vs(r,this.Gs,i,t),this.Gs=void 0,this.Ws=void 0;else{const s=Nl(t.interactions);t.type==="pointerdown"?this.Es&&this.Es(r,this.Gs,t):t.type==="pointermove"&&this.zs&&this.zs(r,this.Gs,s,N(s.x-i.x,i.y-s.y),t),this.Ws=s}}},cc=class{constructor(r,t,e){this.Us=!1,this.Es=r,this.zs=t,this.Vs=e}Is(r,t){return this.Us?t.interactions.length!==2&&(this.Us=!1):t.interactions.length===2&&t.type==="pointerdown"&&(this.Us=!0),this.Us}Ps(r,t,e){let i,s;if(e&&t.type!=="pointerup"){if(t.type==="pointerdown"){const n=t.interactions;i=n[0],s=n[1],this.Es(r,i,s,t)}else if(t.type==="pointermove"){i=t.interactions[0],s=t.interactions[1];const n=this.Ys,o=this.Hs,h=N(i.x-n.x,n.y-i.y),a=N(s.x-o.x,o.y-s.y);this.zs(r,i,s,h,a,t)}}else{const n=t.interactions;this.Vs(r,n[0],n[1],t)}this.Ys=i,this.Hs=s}},Hp=Ot({type:"linestyle",lineType:"solid",fillStyle:new H({color:D(255,255,255)}),thickness:1});class Tt extends Hp{constructor(t){super({...t,lineType:"solid"})}setFillStyle(t){return typeof t=="function"?this.set("fillStyle",t(this.getFillStyle())):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setThickness(t){return typeof t=="function"?this.set("thickness",t(this.getThickness())):this.set("thickness",t)}getThickness(){return this.get("thickness")}V(){const t=this.getThickness();return t<0?1:t}}const pi=r=>!(!r||typeof r!="object"||!("lineType"in r)||r.lineType!=="solid");class Xp{constructor(t,e){this.$s=t,this.Xs=e,this.js=e.rows*gx,this.Zs=e.columns*yx}}var Hs,Zn;(function(r){r[r.ZoomIn=0]="ZoomIn",r[r.ZoomInX=1]="ZoomInX",r[r.ZoomInY=2]="ZoomInY",r[r.ZoomOut=3]="ZoomOut",r[r.ZoomOutX=4]="ZoomOutX",r[r.ZoomOutY=5]="ZoomOutY",r[r.ZoomToFit=6]="ZoomToFit",r[r.ToggleAnimations=7]="ToggleAnimations"})(Hs||(Hs={})),function(r){r[r.Circle=0]="Circle",r[r.Rectangle=1]="Rectangle",r[r.RoundedRectangle=2]="RoundedRectangle"}(Zn||(Zn={}));const $p={x:-43,y:0},jp={x:-65,y:0},qp={x:-86,y:0},Jp={x:-107,y:-1},Zp={x:-128,y:-3},Qp={x:-150,y:0},Kp={x:-171,y:0},tx={x:-276,y:0},ex={x:-298,y:0},ix={x:0,y:0},sx={x:-21,y:0};class Vr extends Xp{constructor(t,e,i,s){super(t,i),this.Qs=X.document.createElement("button"),this.Js=X.document.createElement("div"),this.Ks=X.document.createElement("label"),this.Xs=i,this.qs=e,this.Ji=s}te(t,e,i,s){this.ie(t,s),this.se(),this.ee(e),this.he(),this.Ks.textContent=i||"";const n=X.document.createElement("div");this.re(n),this.Qs.onclick=this.onClick.bind(this),n.appendChild(this.Js),n.appendChild(this.Ks),this.Qs.appendChild(n)}he(){this.Qs.style.cursor="pointer"}re(t){t.style.display="flex",t.style.justifyContent="center",t.style.alignContent="center",t.style.flexDirection="column"}ee(t){typeof t=="string"?(this.Js.style.backgroundImage=`url(${t})`,this.Js.style.backgroundSize="100%",this.Js.style.backgroundRepeat="no-repeat",this.Js.style.backgroundPosition="center",this.Js.style.width="20px",this.Js.style.height="20px"):this.applyStyleForSprite(t),this.Js.style.margin="auto"}se(){switch(this.qs){case Zn.RoundedRectangle:this.Qs.style.borderRadius="10px";break;case Zn.Rectangle:this.Qs.style.borderRadius="0px";break;case Zn.Circle:default:this.Qs.style.borderRadius="31px"}}ie(t,e){this.Qs.style.width=`${this.Zs.toString()}px`,this.Qs.style.height=`${this.js.toString()}px`,this.Qs.style.backgroundColor=t,this.Qs.style.opacity=e||mx,this.Qs.style.alignItems="center",this.Qs.style.border="2px solid #707070",this.Qs.style.transition="background-color .8s ease"}applyStyleForSprite(t){this.Js.style.backgroundImage=`url(${this.$s}/${Ug})`,this.Js.style.backgroundPositionX=`${t.x}px`,this.Js.style.backgroundPositionY=`${t.y}px`,this.Js.style.backgroundSize="1600%",this.Js.style.backgroundRepeat="no-repeat",this.Js.style.width="20px",this.Js.style.height="20px"}ne(t){return t.appendChild(this.Qs),t}oe(){return this.Qs}}class zg extends Vr{constructor(t,e,i,s){super(t,e,i,s),this.ae="",this.le="",this.ue=!1,this.Ji=s}ce(){this.de(),this.onToggledStateAction()}fe(){this.Ae(),this.onInitialStateAction()}Ae(){this.ge(this.ae)}de(){this.ge(this.le)}ge(t){typeof t=="string"?this.Js.style.background=t:(this.Js.style.backgroundImage=`url(${this.$s}/${Ug})`,this.Js.style.backgroundPositionX=`${t.x}px`,this.Js.style.backgroundPositionY=`${t.y}px`)}onClick(){this.ue?this.fe():this.ce(),this.ue=!this.ue}}class rx extends Vr{constructor(t,e,i){super(t,i,{rows:1,columns:1},e),this.Ji=e;const s=this.Ji.getTheme();this.te(s.onScreenMenuBackgroundColor.toRGBAString(),$p)}onClick(){const t=this.Ji.me();t&&this.Ji.zoom(t,{x:-1,y:-1})}}class nx extends Vr{constructor(t,e,i){super(t,i,{rows:1,columns:1},e),this.Ji=e;const s=this.Ji.getTheme();this.te(s.onScreenMenuBackgroundColor.toRGBAString(),Jp)}onClick(){const t=this.Ji.me();t&&this.Ji.zoom(t,{x:-1,y:0})}}class ox extends Vr{constructor(t,e,i){super(t,i,{rows:1,columns:1},e),this.Ji=e;const s=this.Ji.getTheme();this.te(s.onScreenMenuBackgroundColor.toRGBAString(),Qp)}onClick(){const t=this.Ji.me();t&&this.Ji.zoom(t,{x:0,y:-1})}}class hx extends Vr{constructor(t,e,i){super(t,i,{rows:1,columns:1},e),this.Ji=e;const s=this.Ji.getTheme();this.te(s.onScreenMenuBackgroundColor.toRGBAString(),jp)}onClick(){const t=this.Ji.me();t&&this.Ji.zoom(t,{x:1,y:1})}}class ax extends Vr{constructor(t,e,i){super(t,i,{rows:1,columns:1},e),this.Ji=e;const s=this.Ji.getTheme();this.te(s.onScreenMenuBackgroundColor.toRGBAString(),Zp)}onClick(){const t=this.Ji.me();t&&this.Ji.zoom(t,{x:1,y:0})}}class lx extends Vr{constructor(t,e,i){super(t,i,{rows:1,columns:1},e),this.Ji=e;const s=this.Ji.getTheme();this.te(s.onScreenMenuBackgroundColor.toRGBAString(),Kp)}onClick(){const t=this.Ji.me();t&&this.Ji.zoom(t,{x:0,y:1})}}class ux extends zg{constructor(t,e,i){super(t,i,{rows:1,columns:1},e),this.Ji=e;const s=this.Ji.getTheme();this.ae=tx,this.le=ex,this.te(s.onScreenMenuBackgroundColor.toRGBAString(),this.ae)}onToggledStateAction(){this.Ji.setAnimationsEnabled(!1)}onInitialStateAction(){this.Ji.setAnimationsEnabled(!0)}}class cx extends Vr{constructor(t,e,i){super(t,i,{rows:1,columns:1},e),this.Ji=e;const s=this.Ji.getTheme();this.te(s.onScreenMenuBackgroundColor.toRGBAString(),qp)}onClick(){this.Ji.forEachAxis(t=>{t.fit(!0)})}}class dx extends Vr{constructor(t,e,i){super(t,e.shape||Gg,e.dimensions||{rows:1,columns:1},i);const s=i.getTheme(),n=e.color||s.onScreenMenuBackgroundColor.toRGBAString(),o=e.icon||"",h=e.label||"",a=e.opacity||"";this.te(n,o,h,a),this.ye=e.action}onClick(){this.ye(this.Ji)}}class fx extends zg{constructor(t,e,i,s){super(t,e,{rows:1,columns:1},i),this.Ji=i,this.pe=s,this.ae=sx,this.le=ix,this.te(Pd,this.ae)}Ae(){this.ge(this.ae),this.Qs.style.backgroundColor=Pd,this.Qs.style.border="2px solid #707070",this.Qs.style.margin="0px"}de(){this.ge(this.le),this.Qs.style.background="#FECC00 0% 0% no-repeat padding-box",this.Qs.style.border="10px solid #BCBCBC12",this.Qs.style.margin="1px"}onToggledStateAction(){var t;(t=this.pe)===null||t===void 0||t.style.setProperty("display","block")}onInitialStateAction(){var t;(t=this.pe)===null||t===void 0||t.style.setProperty("display","none")}}var It;(function(r){r.Move="move",r.ResizeColumn="col-resize",r.ResizeRow="row-resize",r.Horizontal="ew-resize",r.Vertical="ns-resize",r.NorthWest="nw-resize",r.NorthEast="ne-resize",r.Copy="copy",r.CrossHair="crosshair",r.Default="default",r.Help="help",r.Restricted="not-allowed",r.None="none",r.Point="pointer",r.Text="text",r.Wait="wait",r.ZoomIn="zoom-in",r.ZoomOut="zoom-out"})(It||(It={}));const lo={LeftBottom:N(-1,-1),CenterBottom:N(0,-1),RightCenter:N(1,0),LeftTop:N(-1,1),RightTop:N(1,1)},Bg=new H({color:D(255,255,255,0)});new Tt({thickness:1,fillStyle:Bg});const gx=60,yx=60,mx="1.0",Ug="osm/osm-sprite-transparent.png",Gg=Zn.Circle,Pd="#363636";var Hn;(function(r){r[r.TopRight=0]="TopRight",r[r.TopLeft=1]="TopLeft",r[r.BottomLeft=2]="BottomLeft",r[r.BottomRight=3]="BottomRight"})(Hn||(Hn={}));class px extends Ng{constructor(t,e,i,s,n,o,h,a){super(t,e,i,s,n,o,h,a),this.xs="Band",this.Se=0,this.ve=0,this.be=this.qi.bandFillStyle,this.xe=this.qi.bandStrokeStyle,this.Me=!0,this._e=this.ks.ke(this.dt).Ce(this.be).we(this.xe).cs(this.getHighlight()),this.ds(this._e)}setValueStart(t){return this.Se=t,this.D.emit("valueChange",this,this.Se,this.ve),this.ks.Ss(),this}getValueStart(){return this.Se}setValueEnd(t){return this.ve=t,this.D.emit("valueChange",this,this.Se,this.ve),this.ks.Ss(),this}getValueEnd(){return this.ve}setFillStyle(t){this.be=typeof t=="function"?t(this.be):t;const e=this.be;return this._e.Ce(e),this.ks.Ss(),this}getFillStyle(){return this.be}setStrokeStyle(t){this.xe=typeof t=="function"?t(this.xe):t;const e=this.xe;return this._e.we(e),this.ks.Ss(),this}getStrokeStyle(){return this.xe}onValueChange(t){return this.D.on("valueChange",t)}offValueChange(t){return this.D.off(t,"valueChange")}Te(){return this._e.Fe(this.Ts.toVec2(this.Se,this.Ts.getHeight(this.dt).getInnerStart())).q(this.Ts.toVec2(this.ve-this.Se,this.Ts.getHeight(this.dt).getInnerInterval())),this}attach(t,e=!0,i=!1){return super.attach(t,e),ge(t,this.qi,i,{fill:this.be,stroke:this.xe}),this}Ie(t,e){t.cs(e),this.ks.Ss()}setDefaultMouseInteractions(t){return this.Me=t,this}Fs(){let t,e;const i=(o,h)=>{if(!this.Me)return;const a=K(this.ks.us.Pe(h.x,h.y),this.ks.us.dt,this.dt),l=this.Ts.getWidth(a),u=this.axis.dt.ct(this.Se),c=this.axis.dt.ct(this.ve),d=(this.axis.dt.ct(l)-u)/(c-u);t=!(d<.1||d>.9),t===!1&&(e=d<.5)},s=(o,h,a,l,u)=>{if(!this.Me)return;const c=this.Ts.getWidth(l);t?(this.Se=this.axis.dt.mi(this.Se,c),this.ve=this.axis.dt.mi(this.ve,c)):e?this.Se=this.axis.dt.mi(this.Se,c):this.ve=this.axis.dt.mi(this.ve,c),tt(u),this.D.emit("valueChange",this,this.Se,this.ve),this.ks.Ss()};this.onMouseMove((o,h)=>{if(!this.Me)return;i(0,N(h.clientX,h.clientY));const a=t?It.Point:this.Ts.getWidth({x:It.Horizontal,y:It.Vertical});this.De=this.Ji.engine.setMouseStyle(a,this.De)}),this.onMouseLeave(()=>{this.Me&&(this.Ji.engine.restoreMouseStyle(this.De),this.De=void 0)}),this.onMouseDrag((o,h,a,l,u)=>{this.Me&&a===0&&s(0,0,0,u,h)});const n=Ci(new ds(i,s));this.onTouchStart(n.onTouchStart),this.onTouchMove(n.onTouchMove),this.onTouchEnd(n.onTouchEnd)}}class xx extends Ng{constructor(t,e,i,s,n,o,h,a){super(t,e,i,s,n,o,h,a),this.xs="Constant Line",this.u=0,this.xe=this.qi.constantLineStrokeStyle,this.Be=!0,this.Me=!0,this.Le=this.ks.Ee(this.dt).Re(this.xe).cs(this.getHighlight()),this.ds(this.Le)}setValue(t){return this.u=t,this.D.emit("valueChange",this,this.u),this.ks.Ss(),this}getValue(){return this.u}setStrokeStyle(t){this.xe=typeof t=="function"?t(this.xe):t;const e=this.xe;return this.Le.Re(e),this.ks.Ss(),this}getStrokeStyle(){return this.xe}setInteractionMoveByDragging(t){return this.Be=t,this}getInteractionMoveByDragging(){return this.Be}onValueChange(t){return this.D.on("valueChange",t)}offValueChange(t){return this.D.off(t,"valueChange")}Te(){return this.Le.Ve(this.Ts.toVec2(this.u,this.Ts.getHeight(this.dt).getInnerStart())).ze(this.Ts.toVec2(this.u,this.Ts.getHeight(this.dt).getInnerEnd())),this}attach(t,e=!0,i=!1){return super.attach(t,e,i),ge(t,this.qi,i,{stroke:this.xe}),this}Ie(t,e){t.cs(e),this.ks.Ss()}setDefaultMouseInteractions(t){return this.Me=t,this}Fs(){const t=(i,s)=>{this.Me&&this.Be&&(this.u=this.axis.dt.mi(this.u,this.Ts.getWidth(s)),this.D.emit("valueChange",this,this.u),this.ks.Ss(),tt(i))};this.onMouseMove(()=>{if(this.Me&&this.Be){const i=this.Ts.getWidth({x:It.Horizontal,y:It.Vertical});this.De=this.Ji.engine.setMouseStyle(i,this.De)}}),this.onMouseLeave(()=>{this.Me&&this.Be&&(this.Ji.engine.restoreMouseStyle(this.De),this.De=void 0)}),this.onMouseDrag((i,s,n,o,h)=>{this.Me&&this.Be&&n===0&&t(s,h)});const e=Ci(new ds(void 0,(i,s,n,o,h)=>t(h,o)));this.onTouchStart(e.onTouchStart),this.onTouchMove(e.onTouchMove),this.onTouchEnd(e.onTouchEnd)}}const Fs={fitting:{start:(r,t,e,i)=>t>=r?e:i,end:(r,t,e,i)=>t>=r?i:e,allowIntervalLengthChange:!0},expansion:{start:(r,t,e,i)=>t>=r?e<r?e:r:i>r?i:r,end:(r,t,e,i)=>t>=r?i>t?i:t:e<t?e:t,allowIntervalLengthChange:!0},progressive:{start:(r,t,e,i)=>t>r?Fs.progressive.end(r,t,e,i)+(r-t):i>r?i:r,end:(r,t,e,i)=>t>r?i>t?i:t:Fs.progressive.start(r,t,e,i)+(t-r),allowIntervalLengthChange:!1},regressive:{}},uo={Empty:"Empty",Numeric:"Numeric",Time:"Time"},Id=r=>r.Oe!==void 0,Sx=r=>r.Ne!==void 0,xn={Ge:or.Numeric},Ax=(r,t)=>[r,t],Yi=(r,t,e,i)=>{const s=[],n=Math.round(Math.abs((r-t)/e));for(let o=1;o<n;o+=1){const h=Math.round((r+e*o)*i)/i;h<t&&s.push(h)}return s},Ni=(r,t,e,i,s)=>{De(r,0)&&(r=0),De(t,0)&&(t=0);const n=[];let o=i!==void 0?((h,a,l)=>h-(h-l)%a)(r,e,i):r;if(e<=0)throw new Error(`_getRegularGreatKeyValues unit less than or equal to 0, unit: ${e}`);for(;o<t&&De(o,t)===!1;)n.push(o),o+=e,o=Math.round(o*s)/s;return n.push(o),n},Og=(r,t,e,i)=>{const s=[];let n=e(r),o=0;for(;n<t&&De(n,t)===!1;)if(s.push(n),n=i(n),o+=1,o>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return s.push(n),s},_t=(r,...t)=>{const e=t.length>0?t.length:r?1:0;return(i,s,n,o,h,a)=>{if(s>=e)return;const l=t[s]||1;let u=!1,c=!1,d=1;return r&&(u="ignore"in r?r.ignore==="first"||r.ignore==="both":u,c="ignore"in r?r.ignore==="last"||r.ignore==="both":c,d="offset"in r&&r.offset!==void 0?r.offset:d),((f,g,y,p,x)=>(y&&(f=f.filter((A,v)=>v>0)),p&&(f=f.filter((A,v)=>v<f.length-1)),f.filter((A,v)=>(v+x)%g==0)))(i,l,u,c,d)}},Ll=(...r)=>{const t=r.length>0?r.length:0;return(e,i,s,n,o,h)=>{if(i>=t)return;const a=r[i]||1;return e.filter((l,u)=>u%a==0)}},qh=(r,t)=>{if(t.has(r))return t.get(r);const e=ce(r.Ue.We());if(lu(e))return e;const i=r.Ye.mi(e.min,{x:-5,y:-5}),s=r.Ye.mi(e.min,{x:5,y:5}),n=r.Ye.mi(e.max,{x:-5,y:-5}),o=r.Ye.mi(e.max,{x:5,y:5}),h={min:{x:Math.min(i.x,s.x,n.x,o.x),y:Math.min(i.y,s.y,n.y,o.y)},max:{x:Math.max(i.x,s.x,n.x,o.x),y:Math.max(i.y,s.y,n.y,o.y)}};return t.set(r,h),h},Vd=r=>{const t=new Map;if(r!==xn){for(const e of r.He)t.set(e,new Map);for(const e of r.$e)t.set(e,new Map)}return t};class bn{constructor(t,e,i,s,n,o,h){this.D=new Xe,this.Xe=xn,this.je=uo.Empty,this.Ze=new Map,this.Qe=new Map,this.Je=Fs.fitting,this.Ke=!0,this.qe=yr(()=>this.chart.us.Ss())(300,us.linear),this.th=!0,this.Xi=!0,this.ih=!1,this.sh=ht,this.eh=!1,this.hh=!1,this.rh=ht,this.oh=ht,this.ah=ht,this.lh=!1,this.uh=()=>{this.ih||this.Je===void 0||this.chart.us.Ss(!0)},this.dh={},this.fh=(a,l,u,c,d,f)=>{const g=[],y=[];for(const p of a){if(p<u||p>c){g.push(p);continue}const x=this.Ze.get(l),A=(x?x.get(p):void 0)||this.Ah(p,l);A.gh=!1;const v=this.mh(A,d);f.set(A,v),g.push(p),y.push(A)}return{displayedKeyValues:g,createdTicks:y}},this.yh=(a,l,u,c,d,f,g,y,p,x,A)=>{const v=[];for(let w=0;w<a.length;w+=1){const E=a[w],C=l[w];let k,F,m;if(this.ph(E,u)){const S=qh(E,p);F=[a[w-1],a[w+1]],m=F.concat(x).concat(A).filter(b=>b!==void 0).filter(b=>b.Sh!==u||!!a.find(M=>M===b)).map(b=>va(S,qh(b,p))?b:void 0),k=m.some(b=>b!==void 0)}else k=!1;if(k){let S=!0;const b=m.filter(M=>M!==void 0);if(S&&b.every(M=>Id(M.Sh))&&(S=!1),S&&u.bh&&u.bh.xh&&u.bh.xh(C,c,d,f,g,y)===!1&&(S=!1),S===!1)continue;return!0}v.push(E)}return v},this.formatValue=a=>this.Xe.Ge(a,this.dt),this.Mh=!0,this._h=!0,this.chart=t,this.wh=e,this.qi=s,this.Ch=o,this.dt=i,this.kh=h,h.type==="logarithmic"&&this.setAnimationZoom(us.logarithmic(ao(h.base))),this.Th=o.numeric,this.Fh("Numeric"),this.Ih=i.getInnerStart(),this.Ph=i.getInnerEnd(),this.setAnimationsEnabled(n)}setDefaultInterval(t,e){return this.Dh=t,(e==null?void 0:e.applyImmediately)!==!1&&(this.lh=!0,this.chart.us.Ss()),this}getDefaultInterval(){return this.Dh}getTitle(){return this.Lh.Bh()}setTitle(t){return this.Lh.Rh(t),this.chart.us.Ss(),this}getTitleFillStyle(){return this.Lh.Eh()}setIntervalRestrictions(t){return this.zh=t,this.chart.us.Ss(),this}getIntervalRestrictions(){return this.zh}setTitleFillStyle(t){return this.Lh.Ce(t),this.chart.us.Ss(),this}getTitleFont(){return this.Lh.Vh()}setTitleFont(t){return this.Lh.Oh(t),this.chart.us.Ss(),this}setTitleRotation(t){return this.Lh.Nh(t),this.chart.us.Ss(),this}getTitleRotation(){return this.Lh.Gh()}setTitleEffect(t){return this.Wh.ps(t),this.chart.us.Ss(),this}getTitleEffect(){return this.Wh.vs()}Fh(t,e){if(this.Ze.size>0&&this.Uh(),t==="Empty")this.Xe=xn,this.je=t;else if(t==="Numeric"){this.je!=="Numeric"&&(this.Th=this.Ch.numeric);const i=e||(s=>s);this.Th=i(this.Th),this.Xe=this.Th.Yh(this.kh),this.je=t}else if(t==="DateTime"){this.je!=="DateTime"&&(this.Th=this.Ch.datetime);const i=e||(s=>s);this.Th=i(this.Th),this.Xe=this.Th.Yh(this.kh),this.je=t}else if(t==="Time"){this.je!=="Time"&&(this.Th=this.Ch.time);const i=e||(s=>s);this.Th=i(this.Th),this.Xe=this.Th.Yh(this.kh),this.je=t}return this.Qe.forEach(i=>Array.from(i.values()).forEach(s=>s.dispose())),this.Qe=Vd(this.Xe),this.chart.us.Ss(),this}Hh(){return this.Xe}$h(t){this.Xe=t,this.Qe.forEach(e=>Array.from(e.values()).forEach(i=>i.dispose())),this.Qe=Vd(this.Xe),this.chart.us.Ss()}setInterval(t){const{start:e,end:i,animate:s,stopAxisAfter:n}=t;return this.St(e!==void 0?e:this.Ih,i!==void 0?i:this.Ph,s!==void 0&&s,n===void 0||n,"userSetInterval"),this}St(t,e,i=!1,s=!0,n){let o={start:t,end:e};const h=!0,a=Math.abs(e-t);if(Math.abs(this.Ph-this.Ih),this.Xe.Xh!==void 0&&this.Xe.Xh>a){const c=(e+t)/2,d=this.Xe.Xh/2*(t>e?-1:1);o={start:c-d,end:c+d}}if(this.Xe.jh!==void 0&&this.Xe.jh<a){const c=(e+t)/2,d=this.Xe.jh/2*(t>e?-1:1);o={start:c-d,end:c+d}}const l=this.dt.nt(o.start,o.end,this.Ih,this.Ph,h);if(l===!1)return this;if(l!==!0){if(o=l,n==="zoomBandChart")return this}let u;switch(n){case"userSetInterval":case"userFit":case"interactionSetInterval":case"interactionZoom":u=!0;break;case"zoomBandChart":case"synchronizedAxis":u=!1;break;default:return wo(0,""),this}if(this.Zh&&this.Zh.finishAll(!1),this.qe&&(i===!0||i>0)){this.setStopped(!0);const c=i===!0?void 0:i,d=!this.Zh||this.Zh.isOver()?this.qe:this.Zh.NextAnimation.bind(this);this.Zh=d([[this.Ih,o.start],[this.Ph,o.end]],([f,g])=>{this.Qh(f,g,h)},c),this.Zh.onAnimationEnd(()=>{this.Zh=void 0,u&&(this.ah=X.performance.now())}),this.Zh.onAnimationEnd(()=>this.setStopped(s))}else this.Qh(o.start,o.end,h),this.setStopped(s),u&&(this.ah=X.performance.now());return this}getInterval(){return{start:this.Ih,end:this.Ph}}setStopped(t){return t===this.ih||(t&&(this.Zh&&this.Zh.finishAll(!1),this.Zh=void 0),this.ih=t,this.D.emit("stoppedStateChanged",this,this.ih),this.sh=X.performance.now(),this.chart.us.Ss()),this}getStopped(){return this.ih}onStoppedStateChanged(t){return this.D.on("stoppedStateChanged",t)}offStoppedStateChanged(t){return this.D.off(t,"stoppedStateChanged")}fit(t,e){const i=this.Jh(),s=this.Dh||vx,n=typeof s=="function"?s({curStart:this.Ih,curEnd:this.Ph,dataMin:i==null?void 0:i.min,dataMax:i==null?void 0:i.max}):s;return this.St(n.start!==void 0?n.start:this.Ih,n.end!==void 0?n.end:this.Ph,n.animate!==void 0?n.animate:t===void 0||t,n.stopAxisAfter!==void 0?n.stopAxisAfter:e===void 0||e,"userFit"),this}setScrollStrategy(t){return this.Je=t,this.chart.us.Ss(),this}getScrollStrategy(){return this.Je}setAnimationScroll(t){return this.Ke=!!t,this.chart.us.Ss(),this}setAnimationZoom(t,e=300){return this.Zh&&(this.Zh.finishAll(!1),this.Zh=void 0),this.qe=t?yr(()=>this.chart.us.Ss())(e,t):void 0,this}setAnimationsEnabled(t){return this.th=t,t?(this.setAnimationScroll(!0),this.setAnimationZoom(us.ease,void 0)):(this.setAnimationScroll(void 0),this.setAnimationZoom(void 0)),this}getAnimationsEnabled(){return this.th}setVisible(t){const e=this.Xi!==t;return this.Xi=t,this.Lh.setVisible(t),this.Kh(i=>{i.Ue.setVisible(t)}),e&&this.D.emit("visibleStateChanged",this,this.Xi),this}getVisible(){return this.Xi}onIntervalChange(t){return this.D.on("scaleChange",t)}offIntervalChange(t){return this.D.off(t,"scaleChange")}onVisibleStateChanged(t){return this.D.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.D.off(t,"visibleStateChanged")}qh(t,e){const i=new Map;if(this.Xe===xn||!this.Xi)return this.Uh(),i;e=e||new Map;const s=this.tr(),n=s.min,o=s.max,h=o-n,a=t.physicalAxisSize;this.dh.physicalAxisSize=a;const l=Yg(this.Xe,n,o,this.Ih,this.Ph,a),u=[];if(this.ir(),u.push(...this.sr(this.Xe,n,o,l,e,t,i)),this.er(this.Xe,n,o,l,e,t,u,i),this.hr(),l)for(const[c,d]of this.Qe){const f=l.get(c);if(f!==void 0)for(const[g,y]of d)f.includes(g)||(y==null||y.dispose(),d.delete(g))}return this.dh.min=n,this.dh.max=o,this.dh.scaleInterval=h,this.dh.physicalAxisSize=a,i}rr(t){const e=t.Sh.nr;t.Ue.Rh(e(t.u,this.dt)).Ps()}ar(t,e){const i=e.lr;t.Ue.Ce(i.getLabelFillStyle()).Oh(i.getLabelFont()).Nh(i.getLabelRotation())}Ah(t,e){const i=this.Qe.get(e);let s=i.get(t);s?(i.delete(t),s.Sh=e,s.ys(!0)):s=this.ur(t,e);const n=this.Ze.get(e)||new Map;return n.set(t,s),this.Ze.set(e,n),this.ar(s,e),s}mh(t,e){const i=this.cr(t,e);return this.rr(t),i}sr(t,e,i,s,n,o,h){const a=[];for(const l of t.He){const u=s.get(l);for(const c of u){if(c<e||c>i)continue;const d=this.Ze.get(l),f=(d?d.get(c):void 0)||this.Ah(c,l),g=this.mh(f,o),y=qh(f,n);a.find(p=>va(y,qh(p,n)))&&f.Ue.setVisible(!1),f.gh=!1,h.set(f,g),a.push(f)}}return a}er(t,e,i,s,n,o,h,a){let l,u=[];for(const c of t.$e){const d=s.get(c);if(!d)break;let f;if(l===void 0)f=[{start:e,end:i,keyValues:d}];else{f=[];for(let w=0;w<l.length-1;w+=1){const E=l[w],C=l[w+1],k={start:E,end:C,keyValues:[]};for(const F of d)F>=E&&F<C&&k.keyValues.push(F);f.push(k)}}if(l=d,Sx(c))continue;let g=0,y=-1,p=[],x=[];for(let w=0;w<f.length;w+=1){const E=this.fh(f[w].keyValues,c,e,i,o,a);p=p.concat(E.displayedKeyValues),x=x.concat(E.createdTicks)}let A=x,v=!0;if(c.lr.getLabelFillStyle()!==ft){let w=[];for(;++y<f.length;){const E=f[y],C=E.start,k=E.end;let F=E.keyValues;if(g>0){if(c.bh===void 0){v=!1;break}const S=c.bh.dr;if(F=S(F,g-1,C,k,e,i),F===void 0)break}const m=this.yh(x.filter(S=>F.some(b=>De(S.u,b))),p,c,g,C,k,e,i,n,h,u);m!==!0?w=w.concat(m):(g+=1,y=-1,w=[])}A=w,x.forEach(E=>{w.find(C=>C===E)||this.Ar(E)})}if(u=A,!v)break}}Ar(t){const e=this.Ze.get(t.Sh);e==null||e.delete(t.u);const i=this.Qe.get(t.Sh);i&&i.has(t.u)?t.dispose():i&&(t.ys(!1),i.set(t.u,t))}Kh(t){for(const e of this.Ze.values())for(const i of e.values())t(i)}gr(t,e){for(const i of this.Ze.values())for(const s of i.values())e=t(e,s);return e}Uh(){this.Ze.forEach((t,e)=>{t.forEach(i=>this.Ar(i))}),this.Ze.clear()}ir(){for(const t of this.Ze.values())for(const e of t.values())e.gh=!0}hr(){for(const t of this.Ze.values())for(const[e,i]of t.entries())i.gh&&(i.dispose(),t.delete(e))}tr(){const t=this.dt.getInnerStart()<this.dt.getInnerEnd()?this.dt.getInnerStart():this.dt.getInnerEnd(),e=this.dt.getInnerEnd()>this.dt.getInnerStart()?this.dt.getInnerEnd():this.dt.getInnerStart();return wt(t,e)}ph(t,e){return!(t.gh||t.Ue.Bh().length===0||Id(e)&&e.mr!==!0)}yr(t,e){return this.Xe===xn||(this.Xe.He.forEach(i=>{e=t(e,i.lr)}),this.Xe.$e.forEach(i=>{(s=>s.nr!==void 0)(i)&&(e=t(e,i.lr))})),e}Jh(){let t=this.wh.pr();const e=this.wh.Sr();let i;if(t!==void 0&&$h(t)&&e!==void 0&&$h(e)&&(this.kh.type==="logarithmic"&&(t===0&&(t=Math.min(1,e)),Math.sign(t)!==Math.sign(e)&&(t=Math.min(1,e-.1))),i?(i.min=Math.min(i.min,t),i.max=Math.max(i.max,e)):i=wt(t,e)),i&&$h(i.min)&&$h(i.max))return De(i.min,i.max)?{min:i.min-1,max:i.max+1}:i}vr(){if(!this.Mh)return 0;let t=0;const e=this.wh.br();return e&&(t=Math.max(t,e)),t}setAutoRegionsEnabled(t){return this.Mh=t,this.chart.us.Ss(),this}Mr(){var t;const e=this.eh;let i=!1;if(this.lh&&this.Dh){const s=this.Jh(),n=typeof this.Dh=="function"?this.Dh({curStart:this.Ih,curEnd:this.Ph,dataMin:s==null?void 0:s.min,dataMax:s==null?void 0:s.max}):this.Dh;this.setInterval(n),this.lh=!1}if(this.Je&&!this.ih){const s=this.Jh();if(s){const n=this.Ih,o=this.Ph;let h=this.Je.start(n,o,s.min,s.max),a=this.Je.end(n,o,s.min,s.max);const l=(t=this.Je.allowIntervalLengthChange)===null||t===void 0||t,u=Nd(this.zh,s,{start:h,end:a},{start:n,end:o},l);h=u.start,a=u.end;const c=De(n,h)===!1,d=De(o,a)===!1;if(h=c?h:n,a=d?a:o,c||d){let f=!1;if(this.Ke&&!this._h)if(this.Ke){f=!0;const g=c?this._r(n,h):n,y=d?this._r(o,a):o;if(this.Qh(g,y,l)===!0&&(c&&De(g,h)===!1||d&&De(y,a)===!1)){this.chart.us.Ss(!0),i=!0;let p=Math.abs(a-h)/Math.abs(g-y);p<1&&(p=1/p),this.hh=p>=1.4}}else f=!1;f||this.Qh(h,a,l),this._h=!1}}}return i?(this.eh!==i&&(this.eh=i,this.rh=X.performance.now()),this.wr&&(clearTimeout(this.wr),this.wr=void 0)):e===!0&&this.wr===void 0&&(this.hh=!1,this.wr=setTimeout(()=>{this.eh!==!1&&(this.eh=!1,this.rh=X.performance.now()),this.wr=void 0,this.chart.us.Ss()},200)),this}Qh(t,e,i){let s={start:t,end:e},n=!0;if(this.zh){const c=this.Jh();s=Nd(this.zh,c,s,{start:this.Ih,end:this.Ph},i)}const o=Math.abs(e-t),h=Math.abs(this.Ph-this.Ih);if(this.Xe.Xh!==void 0&&this.Xe.Xh>o){const c=(e+t)/2,d=(i?this.Xe.Xh/2:h/2)*(t>e?-1:1);s={start:c-d,end:c+d},n=!1}if(this.Xe.jh!==void 0&&this.Xe.jh<o){const c=(e+t)/2,d=(i?this.Xe.jh/2:h/2)*(t>e?-1:1);s={start:c-d,end:c+d},n=!1}let a=this.dt.nt(s.start,s.end,this.Ih,this.Ph,i);if(a===!1)return!1;a!==!0&&(s=a);const l=this.vr(),u=this.Cr(Math.min(s.start,s.end),Math.max(s.start,s.end),l);return a=this.dt.nt(s.end>s.start?u.min:u.max,s.end>s.start?u.max:u.min,this.Ih,this.Ph,!1),!!a&&(a===!0?this.dt.J(s.end>s.start?u.min:u.max,s.end>s.start?u.max:u.min):this.dt.J(s.start,s.end),this.Ih=s.start,this.Ph=s.end,this.D.emit("scaleChange",this,s.start,s.end),this.oh=X.performance.now(),this.chart.us.Ss(),n)}kr(){return this.eh}Tr(){return this.Zh!==void 0}}class wh{constructor(t,e,i,s,n=i.Pr(s).Ir(mr).Fr(mr).setMouseInteractions(!1)){this.gh=!1,this.$i=!1,this.ts=[],this.Sh=t,this.u=e,this.Dr=i,this.Ye=s,this.Ue=n,this.ts.push(n)}ys(t){this.ts.forEach(e=>e.setVisible(t))}dispose(){return this.$i||(this.$i=!0,this.ts.forEach(t=>t.dispose())),this}}const Yg=(r,t,e,i,s,n)=>{const o=new Map;for(const a of r.He){let l=a.Br(t,e,i,s);l=_d(l),o.set(a,l)}let h;for(const a of r.$e){let l;if(h===void 0)l=a.Br(t,e,t,e);else{let u=[];const c=h.filter(d=>t<=d&&d<=e).length;if(c>0){const d=n/(c-1);if(a.Lr!==void 0&&a.Lr>d)break}for(let d=0;d<h.length-1;d+=1){const f=a.Br(h[d],h[d+1],t,e);u=u.concat(f)}l=u}l=_d(l),o.set(a,l),h=l}return o},_d=r=>(r=(t=>{const e={},i=[],s=t.length;let n=0;for(let o=0;o<s;o+=1){const h=t[o];e[h]!==1&&(e[h]=1,i[n]=h,n+=1)}return i})(r)).sort((t,e)=>t-e),Nd=(r,t,e,i,s)=>{const n=typeof r=="function"?r({curStart:i.start,curEnd:i.end,dataMin:t==null?void 0:t.min,dataMax:t==null?void 0:t.max}):r;if(!n)return e;const o={start:e.start,end:e.end};let h=Math.abs(e.end-e.start);if(n.intervalMin!==void 0&&h<n.intervalMin){const a=(o.start+o.end)/2;o.start=a+.5*Math.sign(e.start-a)*n.intervalMin,o.end=a+.5*Math.sign(e.end-a)*n.intervalMin}if(h=Math.abs(e.end-e.start),n.intervalMax!==void 0&&h>n.intervalMax){const a=(o.start+o.end)/2;o.start=a+.5*Math.sign(e.start-a)*n.intervalMax,o.end=a+.5*Math.sign(e.end-a)*n.intervalMax}return h=Math.abs(e.end-e.start),n.startMin!==void 0&&(o.start=Math.max(o.start,n.startMin),s||De(Math.abs(o.start-o.end),h)||(o.end=o.start+Math.sign(e.end-e.start)*h)),h=Math.abs(e.end-e.start),n.startMax!==void 0&&(o.start=Math.min(o.start,n.startMax),s||De(Math.abs(o.start-o.end),h)||(o.end=o.start+Math.sign(e.end-e.start)*h)),h=Math.abs(e.end-e.start),n.endMin!==void 0&&(o.end=Math.max(o.end,n.endMin),s||De(Math.abs(o.start-o.end),h)||(o.start=o.end+Math.sign(e.start-e.end)*h)),h=Math.abs(e.end-e.start),n.endMax!==void 0&&(o.end=Math.min(o.end,n.endMax),s||De(Math.abs(o.start-o.end),h)||(o.start=o.end+Math.sign(e.start-e.end)*h)),o},vx=r=>{if(r.dataMin===void 0||r.dataMax===void 0)return{stopAxisAfter:!1};const t=r.curEnd>=r.curStart;return{start:t?r.dataMin:r.dataMax,end:t?r.dataMax:r.dataMin,stopAxisAfter:!1}},bx=Ot({type:"font",size:14,family:"Arial",weight:"normal",style:"normal",variant:!1});class Ka extends bx{constructor(t){super(t)}setSize(t){return this.set("size",t)}setFamily(t){return this.set("family",t)}setWeight(t){return this.set("weight",t)}setStyle(t){return this.set("style",t)}setVariant(t){return this.set("variant",t)}getSize(){return this.get("size")}getFamily(){return this.get("family")}getWeight(){return this.get("weight")}getStyle(){return this.get("style")}getVariant(){return this.get("variant")}}const Qo=r=>!(!r||typeof r!="object"||!("type"in r)||r.type!=="font"),Wg=new Ka,Ld=new class{getFillStyle(){return ft}},Mx=Ot({type:"triangulated-points-3d",shape:"sphere",size:10,fillStyle:new H,wireframeStyle:it});class Hg extends Mx{constructor(t){super(t)}setSize(t){return this.set("size",t)}getSize(){return this.get("size")}setFillStyle(t){return typeof t=="function"?this.set("fillStyle",t(this.get("fillStyle"))):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setWireframeStyle(t){return typeof t=="function"?this.set("wireframeStyle",t(this.get("wireframeStyle"))):this.set("wireframeStyle",t)}getWireframeStyle(){return this.get("wireframeStyle")}setShape(t){return this.set("shape",t)}getShape(){return this.get("shape")}}const Er=r=>!(!r||typeof r!="object"||!("type"in r)||r.type!=="triangulated-points-3d"),Rx=Ot({type:"pixelated-points-3d",size:5,fillStyle:new H});class Ex extends Rx{constructor(t){super(t)}setSize(t){return this.set("size",t)}getSize(){return this.get("size")}setFillStyle(t){return typeof t=="function"?this.set("fillStyle",t(this.get("fillStyle"))):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}}const zd=r=>!(!r||typeof r!="object"||!("type"in r)||r.type!=="pixelated-points-3d"),Ra={Triangulated:Hg,Pixelated:Ex};class wx{constructor(t){this.Rr=new Map,this.us=t}os(t,e,i){const s=i.animationEnabled;this.Rr.set(t,{applyHighlight:e,curUnanimatedHighlightValue:0,curAnimationPositionMillis:0,animationEnabled:s,curAnimatedHighlightValue:0});const n=t.onDispose(()=>{this.Rr.delete(t),t.offDispose(n)})}Er(t,e){let i=e.animationEnabled;const s=[],n=t.onDispose(()=>{s.forEach(o=>{this.Rr.delete(o)}),t.offDispose(n)});return{zr:(o,h)=>{const a={applyHighlight:h,curUnanimatedHighlightValue:0,curAnimationPositionMillis:0,animationEnabled:i,curAnimatedHighlightValue:0};s.push(o),this.Rr.set(o,a)},Vr:()=>{s.forEach(o=>{this.Rr.delete(o)}),s.length=0},Or:o=>{i=o,s.forEach(h=>{this._s(h,i)})},Nr:()=>i}}Ms(t,e){const i=this.Rr.get(t);i&&(i.curUnanimatedHighlightValue=Hr(e),this.us.Ss())}As(t,e=!1){const i=this.Rr.get(t);return i?e?i.curAnimatedHighlightValue:i.curUnanimatedHighlightValue:0}_s(t,e){const i=this.Rr.get(t);i&&(i.animationEnabled=e)}ws(t){const e=this.Rr.get(t);return!!e&&e.animationEnabled}Ps(t){let e=!1;this.Rr.forEach((i,s)=>{let n;if(i.animationEnabled)if(i.curUnanimatedHighlightValue>0){const h=i.curAnimationPositionMillis/1e3;n=i.curUnanimatedHighlightValue*Math.abs(Math.sin(h*Math.PI/2+.5));const a=i.curAnimatedHighlightValue===0?1:t;i.curAnimationPositionMillis+=a,e=!0}else i.curAnimatedHighlightValue>0&&i.curUnanimatedHighlightValue===0?(n=Math.max(i.curAnimatedHighlightValue-t/1e3,0),e=e||n>0):n=0,i.curAnimationPositionMillis=0;else n=i.curUnanimatedHighlightValue;n!==i.curAnimatedHighlightValue&&(i.applyHighlight(n),i.curAnimatedHighlightValue=n)}),e&&this.us.Ss(!0)}}const Bd=new Map,dc=(r,t)=>{const e=r.getSize(),i=r.getFamily(),s=r.getWeight(),n=r.getStyle(),o=r.getVariant(),h=`${n} ${o?"small-caps":"normal"} ${s} ${e}px ${i}`,a=`${h} ${t.toFixed(2)}`;let l=Bd.get(a);return l||(l=((u,c,d,f)=>({font:u,properties:c,dpr:d,id:f}))(h,{type:"font",size:e,family:i,style:n,variant:o,weight:s},t,a),Bd.set(a,l)),l};var Vi,Vs;(function(r){r[r.click=0]="click",r[r.dbclick=1]="dbclick",r[r.mouseDown=2]="mouseDown",r[r.mouseUp=3]="mouseUp",r[r.contextmenu=4]="contextmenu",r[r.wheel=5]="wheel"})(Vi||(Vi={})),function(r){r[r.touchStart=0]="touchStart",r[r.touchMove=1]="touchMove",r[r.touchEnd=2]="touchEnd"}(Vs||(Vs={}));const kx=r=>({container:r.Gr,scale:r.dt,setMouseStyle:(t,e)=>r.Wr(t,e),restoreMouseStyle:t=>r.Ur(t),clientLocation2Engine:(t,e)=>r.Pe(t,e),engineLocation2Client:(t,e)=>r.Yr(t,e),captureFrame:(t,e,i)=>r.Hr(t,e,i),renderFrame:(t,e,i=!1)=>r.$r(t,e,i),layout:()=>{r.Xr(),r.jr(),r.Qr.Zr(),r.Ss()},setBackgroundFillStyle(t){return r.setBackgroundFillStyle(t),this},setBackgroundStrokeStyle(t){return r.setBackgroundStrokeStyle(t),this},getBackgroundFillStyle:()=>r.getBackgroundFillStyle(),getBackgroundStrokeStyle:()=>r.getBackgroundStrokeStyle(),addCustomIcon:(t,e)=>r.Jr(t,e),onRenderFrame:t=>r.Kr(t),offRenderFrame:t=>r.qr(t)}),gn=[];let nr;const zl=()=>{if(nr!==void 0){const r=X.getComputedStyle(X.document.body),t=Number(r.getPropertyValue("margin-top").replace("px",""))+Number(r.getPropertyValue("margin-bottom").replace("px",""));nr.style.height=X.innerHeight-t+"px",(()=>{for(let e=0;e<gn.length;e+=1)gn[e]()})()}},Ud=new H({color:D(255,255,255)}),Si={font:dc(Wg,0),fillStyle:Ud,lineStyle:new Tt({fillStyle:Ud,thickness:1}),pointStyle3D:new Ra.Triangulated};class Tx{constructor(t,e,i){this.D=new Xe,this.dt=ui.d2({scaleXYConstructor:Gt}),this.tn=new Map,this.sn=yr(()=>this.Ss(),60),this.en=N(0,0),this.hn=!1,this.rn=Ft,this.nn=()=>{},this.an=[],this.ln=-1,this.un=[],this.cn=!0,this.$i=!1,this.dn=!1,this.jr=()=>{const{bottom:l,left:u}=this.Gr.getBoundingClientRect();return this.en=N(Math.floor(u),Math.floor(l)),this},this.Xr=()=>{this.fn&&this.fn()},this.Wr=(l,u)=>{if(!u){this.Gr.style.cursor=l;const c=this.ln;return this.ln+=1,this.un.push([c,l]),c}return this.Ur(u),this.Wr(l)},this.Ur=l=>{const u=l?this.un.findIndex(c=>c[0]===l):-1;u>=0?(this.un.splice(u,1),this.un.length>0?this.Gr.style.cursor=this.un[this.un.length-1][1]:this.Gr.style.cursor="default"):(this.un.push([0,"default"]),this.Gr.style.cursor="default")},this.An=l=>(this.gn.S(l),this),this.mn=()=>this.gn.M(),this.yn=()=>{this.rn&&this.rn(1e3/60),this.pn(),this.Sn(),this.nn&&this.nn()},this.vn=l=>(this.tn.set(l.bn(),l),this.tn=new Map([...this.tn.entries()].sort((u,c)=>u[0]-c[0])),l),this.xn=l=>(this.tn.delete(l),this),this.j=()=>(this.gn.i=!1,this),this.Z=()=>(this.gn.i=!0,this),this.Mn=l=>{if(!this.cn)return;const u=this._n,c=u&&u.clientX===l.clientX&&u.clientY===l.clientY,d=this.Pe(l.clientX,l.clientY),f=this.wn(l,{x:l.clientX,y:l.clientY});if(this.Cn&&((f==null?void 0:f.entity)!==this.Cn.entity||f.collectionMember!==this.Cn.collectionMember)&&!this.kn){this.Cn.entity.ji=!1;const g=this.Cn.entity.Tn;g&&g(this.Cn.entity,l,this.Cn.collectionMember)}if(f&&f.entity.getMouseInteractions()&&!this.kn)if(f.entity.ji){if(!c){const g=f.entity.Fn;g&&g(f.entity,l,f.collectionMember)}}else{f.entity.ji=!0;const g=f.entity.In;g&&g(f.entity,l,f.collectionMember)}if(this.kn){const g=this.kn.entity.Pn,y=u?N(l.clientX-u.clientX,u.clientY-l.clientY):{x:0,y:0};!g||y.x===0&&y.y===0||g(this.kn.entity,l,this.kn.button,this.kn.startLocation,y,this.kn.collectionMember)}this.Dn=l,this._n=l,this.Bn=d,this.Cn=f},this.Ln=l=>{if(this.cn=!1,this.Bn=void 0,this.Dn=l,this.Cn&&!this.Rn&&!this.kn){this.Cn.entity.ji=!1;const u=this.Cn.entity.Tn;u&&u(this.Cn.entity,l,this.Cn.collectionMember),this.Cn=void 0}},this.En=l=>{if(this.cn=!0,this.Dn=l,this.kn&&l.buttons<=0){const u=this.kn.entity.zn;u&&u(this.kn.entity,l,this.kn.button,this.kn.startLocation,this.kn.collectionMember),this.kn=void 0}if(this.Rn&&l.buttons<=0){const u=this.Rn.entity.Vn;u&&u(this.Rn.entity,l,this.Rn.collectionMember),this.Rn=void 0}},this.On=()=>this.Bn,this.Qr=t,this.qi=e.theme,this.Nn=i.Nn,this.Gn=i.Gn,this.Wn=i.Wn,this.Un={Yn:e&&e.overrideInteractionMouseButtons?e.overrideInteractionMouseButtons:void 0,$s:e&&e.resourcesBaseUrl!==void 0&&e.resourcesBaseUrl!==null?e.resourcesBaseUrl:`${X.location.origin}/resources`,Hn:!e||!("warnings"in e)||typeof e.warnings!="boolean"||e.warnings,$n:(()=>{const l=e==null?void 0:e.pickingPrecision;if(typeof l=="string"){const u=l.toLowerCase();if(u==="best")return 1;if(u==="high")return .5;if(u==="low")return 1/8}return 1/4})(),Xn:(e==null?void 0:e.interactable)===void 0||e.interactable,jn:e.textPixelSnappingEnabled===void 0||e.textPixelSnappingEnabled};const s=e?e.container:void 0;if(s){if(typeof s=="string"){const l=X.document.getElementById(s);if(!l)throw new Error(`Container "${s}" doesn't exist.`);this.Gr=l}else this.Gr=s;X.addEventListener("resize",this.Xr),this.an.push(()=>{X.removeEventListener("resize",this.Xr)})}else{if(nr===void 0){const u=X.document.createElement("div");u.id="lcjs-auto-flexbox",u.style.position="relative",u.style.width="100%",u.style.display="flex",u.style.flexDirection="column",X.document.body.appendChild(u),nr=u,X.addEventListener("resize",zl)}let l=1;for(;X.document.getElementById(`chart-${l}`)!==null;)l+=1;this.Gr=X.document.createElement("div"),this.Gr.id=`chart-${l}`,this.Gr.style.flex="1",this.Gr.style.height="100%",nr.appendChild(this.Gr),zl(),gn.push(this.Xr),this.an.push(()=>{nr&&nr.removeChild(this.Gr),gn.includes(this.Xr)&&gn.splice(gn.indexOf(this.Xr),1),gn.length===0&&nr&&(X.document.body.removeChild(nr),nr=void 0,X.removeEventListener("resize",zl))})}if(X.ResizeObserver){const l=u=>{for(const c of u)c.target===this.Gr&&this.Xr()};this.Zn=new X.ResizeObserver(l.bind(this)),this.Zn.observe(this.Gr)}this.Gr.style.position===""&&(this.Gr.style.position="relative"),this.Gr.style.boxSizing="content-box",this.Gr.addEventListener("fullscreenchange",this.Xr),this.Gr.addEventListener("webkitfullscreenchange",this.Xr);const n=e?e.maxFps:void 0;this.Qn=n?n===-1?-1:n!==0?1e3/n:0:0;const o=new Map;let h=!1;const a=(l,u)=>c=>{const d=function(f){return{x:f.clientX,y:f.clientY}}(c);switch(c.type){case"pointerover":case"pointerenter":case"pointermove":case"pointerdown":o.set(c.pointerId,d);break;default:o.delete(c.pointerId),h=!1}switch(c.interactions=Array.from(o.values()),c.pointerType){case"pen":case"mouse":default:l&&l(c);break;case"touch":u&&u(c)}c.defaultPrevented&&(h=!0)};this.Gr.onwheel=this.Jn(Vi.wheel),this.Gr.oncontextmenu=this.Jn(Vi.contextmenu),this.Gr.onclick=this.Jn(Vi.click),this.Gr.ondblclick=this.Jn(Vi.dbclick),this.Gr.onlostpointercapture=()=>{h=!1},this.Gr.ontouchmove=l=>{h&&l.preventDefault()},this.Gr.onpointerover=a(),this.Gr.onpointerenter=a(this.En),this.Gr.onpointerdown=a(this.Jn(Vi.mouseDown),this.Kn(Vs.touchStart)),this.Gr.onpointermove=a(this.Mn,this.Kn(Vs.touchMove)),this.Gr.onpointerup=a(this.Jn(Vi.mouseUp),this.Kn(Vs.touchEnd)),this.Gr.onpointercancel=a(),this.Gr.onpointerout=a(),this.Gr.onpointerleave=a(this.Ln,this.Kn(Vs.touchEnd)),X.addEventListener("scroll",this.jr,{passive:!0}),this.gn=vt(new Ts({r:0,g:0,b:0,a:0})),this.ls=new wx(this)}qn(t,e){var i,s,n,o;((i=this.Cn)===null||i===void 0?void 0:i.entity)===t.entity&&this.Cn.collectionMember===t.collectionMember&&(this.Cn=e),((s=this.io)===null||s===void 0?void 0:s.entity)===t.entity&&this.io.collectionMember===t.collectionMember&&(this.io=e),((n=this.Rn)===null||n===void 0?void 0:n.entity)===t.entity&&this.Rn.collectionMember===t.collectionMember&&(this.Rn={...e,event:this.Rn.event}),((o=this.kn)===null||o===void 0?void 0:o.entity)===t.entity&&this.kn.collectionMember===t.collectionMember&&(this.kn={...e,button:this.kn.button,startLocation:this.kn.startLocation})}so(){this.dn=!0,this.rn=void 0,this.nn=void 0}Kr(t){return this.D.on("render",t)}qr(t){return this.D.off(t)}eo(){return this.ho}ro(){return this.no}setBackgroundFillStyle(t){return this.oo.Ce(t),this}getBackgroundFillStyle(){return this.oo.Eh()}setBackgroundStrokeStyle(t){return this.oo.we(t),this}getBackgroundStrokeStyle(){return this.oo.ao()}lo(t){return this.nn=t,this}uo(t){return this.rn=t,this}co(t){return this.tn.get(t)}do(){return Array.from(this.tn.keys()).reverse().reduce((t,e)=>e!==Number.MAX_SAFE_INTEGER&&e>t?e:t,0)+1}Jn(t){return e=>this.fo(t,e)}fo(t,e){if(!this.cn)return;t===Vi.contextmenu&&tt(e);const i=this.Pe(e.clientX,e.clientY),s=this.wn(e,{x:e.clientX,y:e.clientY});if(t===Vi.mouseUp){if(this.kn){const n=this.kn.entity.zn;if(n&&n(this.kn.entity,e,this.kn.button,this.kn.startLocation,this.kn.collectionMember),(s==null?void 0:s.entity)!==this.kn.entity||s.collectionMember!==this.kn.collectionMember){this.kn.entity.ji=!1;const o=this.kn.entity.Tn;o&&o(this.kn.entity,e,this.kn.collectionMember)}this.kn=void 0}if(this.Rn){const n=this.Rn.entity.getMouseInteractions()&&this.Rn.entity.Vn;n&&n(this.Rn.entity,e,this.Rn.collectionMember),this.Rn=void 0}}else if(s&&s.entity.getMouseInteractions()){const n=t===Vi.click?s.entity.Ao:t===Vi.dbclick?s.entity.mo:t===Vi.mouseDown?s.entity.yo:t===Vi.wheel?s.entity.po:t===Vi.contextmenu?s.entity.So:void 0;if(n&&n(s.entity,e,s.collectionMember),t===Vi.mouseDown){this.Rn={entity:s.entity,collectionMember:s.collectionMember,event:e};const o=this.Rn.event.button,h=s.entity.vo;h&&h(s.entity,e,o,s.collectionMember),this.kn={entity:s.entity,collectionMember:s.collectionMember,button:o,startLocation:N(e.clientX,e.clientY)}}}this.Dn=e,this.Bn=i,this.Cn=s}Kn(t){return e=>this.bo(t,e)}bo(t,e){const i=e.interactions.length;if(this.xo=e,this.io){const s=t===Vs.touchMove?this.io.entity.Mo:t===Vs.touchEnd?this.io.entity._o:t===Vs.touchStart?this.io.entity.wo:void 0;s&&s(this.io.entity,e,this.io.collectionMember),t===Vs.touchEnd&&i===0&&(this.io.entity.ji=!1,this.io=void 0)}else if(t===Vs.touchStart){for(let s=0;s<i&&(this.io=this.wn(e,{x:e.interactions[s].x,y:e.interactions[s].y}),!this.io);s+=1);if(this.io){this.io.entity.ji=!0;const s=this.io.entity.wo;s&&s(this.io.entity,e,this.io.collectionMember)}}t===Vs.touchEnd?this.Bn=void 0:this.Bn=this.Pe(e.clientX,e.clientY)}Co(t){return this.D.on("resize",t)}ko(t){return this.D.off(t,"resize")}To(){return this.D.topicOff("resize"),this}Fo(t){return this.D.on("inViewChange",t)}Io(t){return this.D.off(t)}W(){if(!this.$i){if(this.$i=!0,this.tn)for(const t of this.tn.values())t.W();this.rn=void 0,this.nn=void 0,X.removeEventListener("scroll",this.jr),this.Gr.removeEventListener("fullscreenchange",this.Xr),this.Gr.removeEventListener("webkitfullscreenchange",this.Xr),this.Zn&&(this.Zn.disconnect(),this.Zn=void 0),this.an.forEach(t=>{t()}),this.an.length=0}}Pe(t,e){return N(t-this.en.x,this.en.y-e)}Yr(t,e){return N(t+this.en.x,this.en.y-e)}Po(t){const e=this.Pe(t.clientX,t.clientY);return{engineX:e.x,engineY:e.y}}Do(t){const e=this.Yr(t.engineX,t.engineY);return{clientX:e.x,clientY:e.y}}}const Gd=(r=1)=>({type:"horizontalProgressive",packager:(t,e,i)=>{if(t.length>1){const s=St(e,i*r),n=Math.abs(s.x),o=t.length,h=[];let a=0,l=0,u=t[0].x+n;for(;l<o;){const c=t[l];if(h[a]=c,a+=1,l+=1,c.x<u&&l<o){const d=l;let f=c.y,g=c.y;for(;l<o&&t[l].x<=u;)t[l].y>f&&(f=t[l].y),t[l].y<g&&(g=t[l].y),l+=1;if(d!==l){const y=(h[a-1].x+t[l-1].x)/2;h[a+0]=N(y,g),h[a+1]=N(y,f),h[a+2]=t[l-1],a+=3}}u+=n}return h}return t.slice()}}),Od=(r=1)=>({type:"horizontalRegressive",packager:(t,e,i)=>{if(t.length>1){const s=St(e,i*r),n=Math.abs(s.x),o=t.length,h=[];let a=0,l=0,u=t[0].x-n;for(;l<o;){const c=t[l];if(h[a]=c,a+=1,l+=1,c.x>u&&l<o){const d=l;let f=c.y,g=c.y;for(;l<o&&t[l].x>=u;)t[l].y>f&&(f=t[l].y),t[l].y<g&&(g=t[l].y),l+=1;if(d!==l){const y=(h[a-1].x+t[l-1].x)/2;h[a+0]=N(y,g),h[a+1]=N(y,f),h[a+2]=t[l-1],a+=3}}u-=n}return h}return t.slice()}}),Yd=(r=1)=>({type:"verticalProgressive",packager:(t,e,i)=>{if(t.length>1){const s=St(e,i*r),n=Math.abs(s.y),o=t.length,h=[];let a=0,l=0,u=t[0].y+n;for(;l<o;){const c=t[l];if(h[a]=c,a+=1,l+=1,c.y<u&&l<o){const d=l;let f=c.x,g=c.x;for(;l<o&&t[l].y<=u;)t[l].x>f&&(f=t[l].x),t[l].x<g&&(g=t[l].x),l+=1;if(d!==l){const y=(h[a-1].y+t[l-1].y)/2;h[a+0]=N(g,y),h[a+1]=N(f,y),h[a+2]=t[l-1],a+=3}}u+=n}return h}return t.slice()}}),Wd=(r=1)=>({type:"verticalRegressive",packager:(t,e,i)=>{if(t.length>1){const s=St(e,i*r),n=Math.abs(s.y),o=t.length,h=[];let a=0,l=0,u=t[0].y-n;for(;l<o;){const c=t[l];if(h[a]=c,a+=1,l+=1,c.y>u&&l<o){const d=l;let f=c.x,g=c.x;for(;l<o&&t[l].y>=u;)t[l].x>f&&(f=t[l].x),t[l].x<g&&(g=t[l].x),l+=1;if(d!==l){const y=(h[a-1].y+t[l-1].y)/2;h[a+0]=N(g,y),h[a+1]=N(f,y),h[a+2]=t[l-1],a+=3}}u-=n}return h}return t.slice()}});var ae;(function(r){r[r.Square=0]="Square",r[r.Circle=1]="Circle",r[r.Triangle=2]="Triangle",r[r.Cross=3]="Cross",r[r.Diamond=4]="Diamond",r[r.Plus=5]="Plus",r[r.Minus=6]="Minus",r[r.Arrow=7]="Arrow",r[r.Star=8]="Star"})(ae||(ae={}));const Jh={ProgressiveX:"ProgressiveX",ProgressiveY:"ProgressiveY",RegressiveX:"RegressiveX",RegressiveY:"RegressiveY"};var Je;(function(r){r[r.Nearest=0]="Nearest",r[r.NearestX=1]="NearestX",r[r.NearestY=2]="NearestY"})(Je||(Je={}));const Xn=r=>{const t=r==="nearest"?Je.Nearest:r==="nearest-x"?Je.NearestX:r==="nearest-y"?Je.NearestY:void 0;return t!==void 0?t:Je.NearestX},fc=(r,t,e,i,s,n,o,h,a,l)=>{const u=r.length;if(u===0)return;const c=i?1:0,d=u-(s?2:1);if(e===Je.Nearest)return Cx(r,t,n,o,c,d);if(e===Je.NearestX||e===Je.NearestY){if(typeof l=="boolean"&&(a==="x"&&e===Je.NearestX||a==="y"&&e===Je.NearestY))return uh(r,K(t,o,n),a,l,c,d);if(e===Je.NearestX)return Fx(r,K(t,o,n),h,c,d);if(e===Je.NearestY)return Dx(r,K(t,o,n),h,c,d)}},Cx=(r,t,e,i,s,n)=>{let o,h=Number.MAX_VALUE;for(let a=s;a<=n;a+=1){const l=r[a];if(!Number.isNaN(l.x)&&!Number.isNaN(l.y)){const u=K(l,e,i),c=(u.x-t.x)**2+(u.y-t.y)**2;c<h&&(h=c,o=a)}}return o},Fx=(r,t,e,i,s)=>{if(t.x<e.min.x||t.x>e.max.x)return;let n,o=Number.MAX_VALUE;for(let h=i;h<=s;h+=1){const a=r[h],l=a.x>t.x?a.x-t.x:t.x-a.x;l<o&&!Number.isNaN(a.x)&&!Number.isNaN(a.y)&&(o=l,n=h)}return n},Dx=(r,t,e,i,s)=>{if(t.y<e.min.y||t.y>e.max.y)return;let n,o=Number.MAX_VALUE;for(let h=i;h<=s;h+=1){const a=r[h],l=a.y>t.y?a.y-t.y:t.y-a.y;l<o&&!Number.isNaN(a.x)&&!Number.isNaN(a.y)&&(o=l,n=h)}return n},uh=(r,t,e,i,s,n)=>{const o=e==="x",h=o?t.x:t.y,a=r[s],l=r[n],u=a.x<l.x?a.x:l.x,c=a.y<l.y?a.y:l.y,d=a.x>l.x?a.x:l.x,f=a.y>l.y?a.y:l.y;if(o&&(h<u||h>d)||!o&&(h<c||h>f))return;let g=s,y=Math.floor((s+n)/2),p=n,x=-1;for(;;){const A=h-(o?r[y].x:r[y].y);if(A*(i?-1:1)>0)g=Math.min(y+1,p),x=Math.floor((g+p)/2);else{if(Math.abs(A)===0)return y;p=Math.max(y-1,g),x=Math.floor((g+p)/2)}if(x===y){const v=y>s?Math.abs(h-(o?r[y-1].x:r[y-1].y)):st,w=y<n?Math.abs(h-(o?r[y+1].x:r[y+1].y)):st,E=Math.abs(A);switch(Math.min(E,v,w)){case v:return y-1;case w:return y+1;default:return y}}else y=x}},Xg=(r,t,e,i,s,n)=>{const o=e==="x",h=o?t.x:t.y,a=r[s],l=r[n],u=a.x<l.x?a.x:l.x,c=a.y<l.y?a.y:l.y,d=a.x>l.x?a.x:l.x,f=a.y>l.y?a.y:l.y;if(o&&(h<u||h>d)||!o&&(h<c||h>f))return;let g=s,y=Math.floor((s+n)/2),p=n,x=-1;for(;;){const A=h-(o?r[y].x:r[y].y);if(A*(i?-1:1)>0)g=Math.min(y+1,p),x=Math.floor((g+p)/2);else{if(Math.abs(A)===0)return{a:y,b:y,lerpAmount:0};p=Math.max(y-1,g),x=Math.floor((g+p)/2)}if(x===y){if(A*(i?-1:1)<0&&y>s){const v=r[y-1],w=r[y];return{a:y-1,b:y,lerpAmount:o?(t.x-v.x)/(w.x-v.x):(t.y-v.y)/(w.y-v.y)}}if(y<n){const v=r[y],w=r[y+1];return{a:y,b:y+1,lerpAmount:o?(t.x-v.x)/(w.x-v.x):(t.y-v.y)/(w.y-v.y)}}return{a:y,b:y,lerpAmount:0}}y=x}};let Hd=0;class $g{constructor(t,e,i){this.Bo=vt(!0),this.Lo=!1,this.ji=!1,this.Ro=!1,this.$i=!1,this.Xi=!0,this.Eo=void 0,this.zo=0,this.D=new Xe,this.Fn=void 0,this.In=void 0,this.Tn=void 0,this.Ao=void 0,this.po=void 0,this.So=void 0,this.mo=void 0,this.yo=void 0,this.Vn=void 0,this.vo=void 0,this.Pn=void 0,this.zn=void 0,this.wo=void 0,this.Mo=void 0,this._o=void 0,this.onDispose=s=>this.D.on("dispose",s),this.offDispose=s=>this.D.off(s,"dispose"),this.us=t,this.Vo=e,this.Oo=i,this.No=Hd,Hd+=1,this.Go=t.qi.highlightColorOffset}Wo(t){return this.Oo.find(e=>e.type===t)!==void 0}Uo(t,e){var i;return!!this.Wo(t)&&e((i=this.Oo.find(s=>s.type===t))===null||i===void 0?void 0:i.args)===!0}dispose(){return this.$i||(this.ji&&this.Tn&&this.Tn(this,void 0,void 0),this.$i=!0,this.Vo(this),this.D.emit("dispose",this)),this}isDisposed(){return this.$i}setVisible(t){const e=this.Xi;return this.Xi=t,!t&&e&&(this.ji&&this.Tn&&this.Tn(this,void 0,void 0),this.ji=!1),this}getVisible(){return this.Xi}setMouseInteractions(t){const e=this.Bo.M();return this.Bo.S(t),t||(e&&this.ji&&this.Tn&&this.Tn(this,void 0,void 0),this.ji=!1),this}getMouseInteractions(){return this.Bo.M()}getIsUnderMouse(){return this.ji}getIsGrabbed(){return this.Ro}setMouseMoveEventHandler(t){return this.Fn=t,this}setMouseEnterEventHandler(t){return this.In=t,this}setMouseLeaveEventHandler(t){return this.Tn=t,this}setMouseClickEventHandler(t){return this.Ao=t,this}setMouseDoubleClickEventHandler(t){return this.mo=t,this}setMouseDownEventHandler(t){return this.yo=t,this}setMouseUpEventHandler(t){return this.Vn=t,this}setMouseWheelEventHandler(t){return this.po=t,this}setMouseContextMenuEventHandler(t){return this.So=t,this}setMouseDragEventHandler(t){return this.Pn=t,this}setMouseDragStartEventHandler(t){return this.vo=t,this}setMouseDragStopEventHandler(t){return this.zn=t,this}setTouchStartEventHandler(t){return this.wo=t,this}setTouchMoveEventHandler(t){return this.Mo=t,this}setTouchEndEventHandler(t){return this._o=t,this}Yo(t){return this.Eo=t,this}Ho(){return this.Eo?this.Eo:Px}cs(t){return this.zo=t,this}$o(){return this.zo}Xo(t){return this.Go=t,this}jo(){return this.Go}}const Px=wt(N(0,0),N(0,0));class Ea extends $g{constructor(t,e,i,s){super(t,i,s),this.Zo=0,this.ks=e,this.ks.Qo=!0}Jo(t){return this.Zo===t||(this.Zo=t,this.ks.Qo=!0),this}Ko(){return this.Zo}}class tl extends Ea{constructor(t,e,i,s,n){super(t,e,s,n),this.qo=!0,this.dt=i}}const Xr=(r,t,e)=>{if(e instanceof Gt){const i=e.Wi(),s=zi(t,{x:Math.abs(i.x),y:Math.abs(i.y)});return wt(N(r.min.x-s.x,r.min.y-s.y),N(r.max.x+s.x,r.max.y+s.y))}return wt(e.mi(N(r.min.x,r.min.y),St(t,-1)),e.mi(N(r.max.x,r.max.y),t))},co=(r,t)=>typeof t=="function"?t(r):t,fo=(r,t)=>!r||r!==t,Ix=(r,t)=>r===ft&&t!==ft,jg=r=>r!==ft;class Pn extends tl{constructor(t,e,i,s,n){super(t,e,i,s,n),this.be=Si.fillStyle,this.us=t}Ce(t){return this.be=co(this.be,t),this}Eh(){return this.be}ta(){return fo(this.ia,this.be)}sa(){return Ix(this.ia,this.be)}ea(){return jg(this.be)}ha(t){this.ia=t}}class el extends Pn{constructor(t,e,i,s,n){super(t,e,i,s,n),this.xe=Si.lineStyle,this.us=t}we(t){return this.xe=typeof t=="function"?t(this.xe):t,this}ao(){return this.xe}ra(){return!this.na||this.na!==this.xe}oa(t){return!this.na||this.na.getThickness()!==t}ea(){return this.xe!==it||super.ea()}sa(){return(this.xe!==it||this.be!==ft)&&this.na===it&&this.ia===ft}aa(t){this.na=t}}class Vx extends Pn{constructor(t,e,i,s,n,o=vt(5)){super(t,e,i,s,n),this.size=vt(5),this.size=o}q(t){return this.size.S(t),this}}class _x extends Pn{constructor(t,e,i,s,n,o=vt(Si.font)){super(t,e,i,s,n),this.la=vt(""),this.ua=vt(N(0,0)),this.ca=vt(0),this.da=vt(0),this.fa=vt(N(0,0)),this.Aa=vt(0),this.ga=vt(Wg),this.ma=N(0,0),this.Xt=vt(Tr(1,1,1,1)),this.ya=vt(jo(4,4,4,4)),this.font=vt(Si.font),this.pa=!1,this.font=o}ea(){return jg(this.be)&&this.la.M().length>0}sa(){return this.pa===!1&&this.ea()}Rh(t){return this.la.S(t),this}Bh(){return this.la.M()}Oh(t){return Qo(t)?this.ga.S(t):this.ga.S(t(this.ga.M())),this}Vh(){return this.ga.M()}Sa(t){return this.ga.S(this.ga.M().setFamily(t)),this}va(){return this.ga.M().getFamily()}ba(t){return this.ga.S(this.ga.M().setSize(t)),this}xa(){return this.ga.M().getSize()}Ma(t){return this.ga.S(this.ga.M().setWeight(t)),this}_a(){return this.ga.M().getWeight()}wa(t){return this.ga.S(this.ga.M().setStyle(t)),this}Ca(){return this.ga.M().getStyle()}ka(t){return this.ga.S(this.ga.M().setVariant(t)),this}Ta(){return this.ga.M().getVariant()}Fe(t){return this.ua.S(t),this}Fa(){return this.ua.M()}Nh(t){return this.Aa.S(t),this}Gh(){return this.Aa.M()}Ia(t,e){return this.fa.S(N(t,e)),this}Pa(){return this.fa.M()}Da(t){return this.da.S(t),this}Ba(){return this.da.M()}La(t){return this.ca.S(t),this}Ra(){return this.ca.M()}Ea(t){return this.da.S(t.x),this.ca.S(t.y),this}Fr(t){return this.Xt.S(t),this}za(){return this.Xt.M()}Ir(t){return this.ya.S(t),this}Va(){return this.ya.M()}}class gc extends Vx{constructor(t,e,i,s,n,o=5){super(t,e,i,s,n,vt(o)),this.Oa=[],this.Na=vt(ae.Square),this.Aa=vt(0),this.Ga=vt(!1),this.Wa=vt(!1),this.Ua=vt(!1),this.Ya=Kt,this.Ha=0,this.$a=[],this.Xa=0,this.ja=Kt,this.Za=Je.Nearest,this.Qa=!1,this.Ja=void 0}Ka(t){return this.Za=t,this}qa(){return this.$a}tl(){return this.Oa}il(t){return this.Na.S(t),this}sl(){return this.Na.M()}Nh(t){return this.Aa.S(t),this}Gh(){return this.Aa.M()}el(t){return this.Ga.S(t),this}hl(t){return this.Wa.S(t),this}rl(t){return this.Ua.S(t),this}nl(t,e){return Array.isArray(t)||(t=[t]),this.Xa+=t.length,this.$a=ai(this.$a,t,{canReturnB:!0}),this.ja&&(this.ja=e?Bi(this.ja,e):void 0),this.Ja=void 0,this}Nt(){return this.Qa=!0,this.Oa.length=0,this.Ha=0,this.Ya=Kt,this.$a=[],this.Xa=0,this.Ja=void 0,this}ol(){return this.Ha}al(){return this.Xa}}class Nx extends el{constructor(t,e,i,s,n){super(t,e,i,s,n),this.ua=vt(N(0,0)),this.X=vt(N(100,100)),this.Aa=vt(0),this.ma=vt(N(0,0)),this.ll=!1}Ps(){return this.ul(),this}Fe(t){const e=this.ua.M();return t.x===e.x&&t.y===e.y||(this.ua.S(t),this.ul()),this}Fa(){return this.ua.M()}cl(t){const e=this.ua.M();return t!==e.x&&(this.ua.S(N(t,e.y)),this.ul()),this}dl(t){const e=this.ua.M();return t!==e.y&&(this.ua.S(N(e.x,t)),this.ul()),this}q(t){const e=this.X.M();return t.x===e.x&&t.y===e.y||(this.X.S(N(t.x,t.y)),this.ul()),this}oi(){return this.X.M()}fl(t){const e=this.X.M();return t!==e.x&&(this.X.S(N(t,e.y)),this.ul()),this}Al(t){const e=this.X.M();return t!==e.x&&(this.X.S(N(e.x,t)),this.ul()),this}Nh(t){return this.Aa.S(t),this}Gh(){return this.Aa.M()}ml(t){const e=this.ma.M();return t===e&&e.x===t.x&&e.y===t.y||(t===void 0?(this.ll=!1,this.ul()):(this.ll=!0,this.ma.S(t))),this}ul(){if(!this.ll){const t=this.ua.M(),e=this.X.M(),i=N(t.x+e.x/2,t.y+e.y/2),s=this.ma.M();i.x===s.x&&i.y===s.y||this.ma.S(i)}}}class Lx extends el{constructor(){super(...arguments),this.Oa=[],this.ua=vt(N(0,0)),this.Ya=Kt,this.yl=!1}pl(t){return t=Rg(t),this.Oa=t,this.yl=!0,this}Sl(){return this.Oa}bt(){return this.Ya.max.x}vt(){return this.Ya.min.x}Mt(){return this.Ya.max.y}xt(){return this.Ya.min.y}vl(){return 0}bl(){return 0}}class zx extends Lx{}class Bx extends Pn{constructor(t,e,i,s,n){super(t,e,i,s,n),this.xl=new Array,this.Ml=new Array,this._l=vt({type:"disabled",packager:(o,h,a)=>o.slice()}),this.Ya=Kt,this.wl=0,this.Cl=!1,this.$a=[Array(),Array()],this.kl=!1,this.Tl=new H().setColor(D(42,171,240)),this.Qa=!1,this.Fl=!1,this.Il=!1}nl(t,e){const i=this.wl-1,s=i>0&&!this.kl;let[n,o]=s?[[this.xl[i]],[this.Ml[i]]]:[[],[]];if(t instanceof Array){const[h,a]=lg(t);n=ai(n,h,{canReturnB:!0}),o=ai(o,a,{canReturnB:!0})}else{const h=t.position;n.push(N(h,t.high)),o.push(N(h,t.low))}return this.kl?(this.$a[0]=ai(this.$a[0],n,{canReturnB:!0}),this.$a[1]=ai(this.$a[1],o,{canReturnB:!0})):(this.$a=[n,o],this.kl=!0),this.Ya=Bi(this.Ya,e||Bi(ce(n),ce(o))),this}Nt(){return this.Qa=!0,this.xl.length=0,this.Ml.length=0,this.wl=0,this.Ya=Kt,this}tl(){return[this.xl,this.Ml]}qa(){return[this.$a[0],this.$a[1]]}Pl(t){return this._l.S(t),this}Dl(){return this._l.M()}Bl(t){return this.Tl=typeof t=="function"?t(this.Tl):t,this}Ll(){return this.Tl}ol(){return this.wl-(Number(this.Fl)+Number(this.Il))}al(){return this.$a.length}Rl(t){return this.Fl=t,this}El(){return this.Fl}zl(t){return this.Il=t,this}Vl(){return this.Il}sa(){return this.ia===ft&&this.Ol===ft&&(this.be!==ft||this.Tl!==ft)}Nl(t){this.Ol=t}ea(){return this.Tl!==ft||super.ea()}ta(){return super.ta()||!this.Ol||this.Ol!==this.Tl}}class Ux extends el{constructor(t,e,i,s,n){super(t,e,i,s,n),this.ua=vt(N(0,0)),this.Gl=vt(0),this.Fi=vt(360),this.Wl=vt(100),this.Ul=vt(100),this.Yl=vt(0),this.Hl=vt(void 0),this.$l=N(0,0),this.Xl=N(0,0),this.jl=N(0,0)}Zl(){return this.Wl.M()}Ql(){return this.Ul.M()}Fa(){return this.ua.M()}Jl(){return this.Gl.M()}Ti(){return this.Fi.M()}Kl(){return this.Yl.M()}ql(){return this.Hl.M()}tu(){return this.$l}iu(){return this.Xl}su(){return this.jl}Fe(t){return this.ua.S(t),this}eu(t){return this.Gl.S(t),this}ze(t){return this.Fi.S(t),this}hu(t){return this.Ul.S(t),this.Wl.S(t),this}ru(t){return this.Wl.S(t),this}nu(t){return this.Ul.S(t),this}ou(t){return this.Yl.S(t<0?0:t),this}au(t){return this.Hl.S(t!==void 0&&t<=0?void 0:t),this}}var ys;(function(r){r[r.Complex=0]="Complex",r[r.Simple=1]="Simple"})(ys||(ys={}));const Gx=(r,t)=>typeof t=="function"?t(r):t,Ox=(r,t)=>!r||r!==t,Yx=(r,t)=>!r||r.getThickness()!==t,Wx=(r,t)=>r===it&&t!==it,Hx=r=>r!==it&&r.getFillStyle()!==ft;class il extends tl{constructor(t,e,i,s,n){super(t,e,i,s,n),this.lu=Si.lineStyle,this.engine=t}Re(t){return this.lu=Gx(this.lu,t),this}uu(){return this.lu}ra(){return Ox(this.cu,this.lu)}du(t){return Yx(this.cu,t)}sa(){return Wx(this.cu,this.lu)}ea(){return Hx(this.lu)}fu(t){this.cu=t}}class Xx extends il{constructor(t,e,i,s,n){super(t,e,i,s,n),this.Pi=N(0,0),this.Fi=N(0,0),this.Au=!1}S({min:t,max:e}){return t.x===this.Pi.x&&t.y===this.Pi.y&&e.x===this.Fi.x&&e.y===this.Fi.y||(this.Au=!0,this.Pi=t,this.Fi=e),this}Ii(){return this.Pi}Ti(){return this.Fi}Ve(t){return t.x===this.Pi.x&&t.y===this.Pi.y||(this.Au=!0,this.Pi=t),this}ze(t){return t.x===this.Fi.x&&t.y===this.Fi.y||(this.Au=!0,this.Fi=t),this}}class $x extends il{constructor(t,e,i,s,n){super(t,e,i,s,n),this.gu=void 0,this.mu=!1}}class gu extends il{constructor(t,e,i,s,n){super(t,e,i,s,n),this.yu=[],this.Ya=Kt,this.$a=new Array,this.Ha=0,this.Za=Je.NearestX,this.Qa=!1,this.pu=vt(void 0),this.Fl=!1,this.Il=!1}Su(t){return this.pu.S(t),this}vu(){return this.pu.M()}qa(){return this.$a}tl(){return this.yu}Ka(t){return this.Za=t,this}Nt(){return this.Qa=!0,this.yu.length=0,this.Ha=0,this.$a=[],this.Ya=Kt,this}ol(){return this.Ha-(Number(this.Fl)+Number(this.Il))}al(){return this.$a.length}Rl(t){return this.Fl=t,this}El(){return this.Fl}zl(t){return this.Il=t,this}Vl(){return this.Il}}const jx=r=>{const t=r.getDraggingMode();return t!==void 0&&t!==jt.notDraggable?t===jt.draggable?It.Move:t===jt.onlyHorizontal?It.Horizontal:It.Vertical:void 0};class sl{constructor(){this.Xi=!0,this.D=new Xe,this.bu=0,this.wt=(t,e,i)=>{this.bu===0&&this.D.emit("mouseEnter",this,e),this.bu+=1},this.Ct=(t,e,i)=>{this.bu-=1,this.bu<1&&(this.D.emit("mouseLeave",this,e),this.bu=0)},this.kt=(t,e,i)=>{this.D.emit("mouseClick",this,e)},this.Tt=(t,e,i)=>{this.D.emit("mouseDoubleClick",this,e)},this.Ft=(t,e,i)=>{this.D.emit("mouseDown",this,e)},this.It=(t,e,i)=>{this.D.emit("mouseUp",this,e)},this.Pt=(t,e,i)=>{this.D.emit("mouseMove",this,e)},this.Bt=(t,e,i,s)=>{this.D.emit("mouseDragStart",this,e,i)},this.Dt=(t,e,i,s,n,o)=>{this.D.emit("mouseDrag",this,e,i,s,n)},this.Lt=(t,e,i,s,n)=>{this.D.emit("mouseDragStop",this,e,i,s)},this.Rt=(t,e,i)=>{this.D.emit("mouseWheel",this,e)},this.Et=(t,e)=>{this.bu+=1,this.D.emit("touchStart",this,e)},this.zt=(t,e)=>{this.D.emit("touchMove",this,e)},this.Vt=(t,e)=>{this.bu-=1,this.D.emit("touchEnd",this,e)},this.xu=t=>(t instanceof tl?t.setMouseEnterEventHandler(this.wt).setMouseLeaveEventHandler(this.Ct).setMouseClickEventHandler(this.kt).setMouseDoubleClickEventHandler(this.Tt).setMouseDownEventHandler(this.Ft).setMouseUpEventHandler(this.It).setMouseMoveEventHandler(this.Pt).setMouseDragEventHandler(this.Dt).setMouseDragStartEventHandler(this.Bt).setMouseDragStopEventHandler(this.Lt).setMouseWheelEventHandler(this.Rt).setTouchStartEventHandler(this.Et).setTouchMoveEventHandler(this.zt).setTouchEndEventHandler(this.Vt):(t.onMouseEnter(this.wt),t.onMouseLeave(this.Ct),t.onMouseClick(this.kt),t.onMouseDoubleClick(this.Tt),t.onMouseDown(this.Ft),t.onMouseUp(this.It),t.onMouseMove(this.Pt),t.onMouseDrag(this.Dt),t.onMouseDragStart(this.Bt),t.onMouseDragStop(this.Lt),t.onMouseWheel(this.Rt),t.onTouchStart(this.Et),t.onTouchMove(this.zt),t.onTouchEnd(this.Vt)),t)}onMouseEnter(t){return this.D.on("mouseEnter",t)}onMouseLeave(t){return this.D.on("mouseLeave",t)}onMouseClick(t){return this.D.on("mouseClick",t)}onMouseDoubleClick(t){return this.D.on("mouseDoubleClick",t)}onMouseDown(t){return this.D.on("mouseDown",t)}onMouseUp(t){return this.D.on("mouseUp",t)}onMouseMove(t){return this.D.on("mouseMove",t)}onMouseDragStart(t){return this.D.on("mouseDragStart",t)}onMouseDrag(t){return this.D.on("mouseDrag",t)}onMouseDragStop(t){return this.D.on("mouseDragStop",t)}onMouseWheel(t){return this.D.on("mouseWheel",t)}onTouchStart(t){return this.D.on("touchStart",t)}onTouchMove(t){return this.D.on("touchMove",t)}onTouchEnd(t){return this.D.on("touchEnd",t)}offMouseEnter(t){return this.D.off(t,"mouseEnter")}offMouseLeave(t){return this.D.off(t,"mouseLeave")}offMouseClick(t){return this.D.off(t,"mouseClick")}offMouseDoubleClick(t){return this.D.off(t,"mouseDoubleClick")}offMouseDown(t){return this.D.off(t,"mouseDown")}offMouseUp(t){return this.D.off(t,"mouseUp")}offMouseMove(t){return this.D.off(t,"mouseMove")}offMouseDragStart(t){return this.D.off(t,"mouseDragStart")}offMouseDrag(t){return this.D.off(t,"mouseDrag")}offMouseDragStop(t){return this.D.off(t,"mouseDragStop")}offMouseWheel(t){return this.D.off(t,"mouseWheel")}offTouchStart(t){return this.D.off(t,"touchStart")}offTouchMove(t){return this.D.off(t,"touchMove")}offTouchEnd(t){return this.D.off(t,"touchEnd")}getIsUnderMouse(){return this.bu>0}setVisible(t){const e=this.Xi!==t;return this.Xi=t,e&&this.D.emit("visibleStateChanged",this,this.Xi),this}getVisible(){return this.Xi}onVisibleStateChanged(t){return this.D.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.D.off(t,"visibleStateChanged")}}const qg=(r,t,e)=>{const i=r.getDraggingMode();if(i!==jt.notDraggable){const s=r.scale.mi(r.getPosition(),{x:i!==jt.onlyVertical?t.x:0,y:i!==jt.onlyHorizontal?t.y:0}),n=r.scale,o=r.getSize(),h=r.getOrigin(),a=n.mi({x:n.x.getInnerStart(),y:n.y.getInnerStart()},zi({x:(1+h.x)/2,y:(1+h.y)/2},o)),l=n.mi({x:n.x.getInnerEnd(),y:n.y.getInnerEnd()},zi({x:(h.x-1)/2,y:(h.y-1)/2},o)),u={x:Math.min(Math.max(s.x,a.x),l.x),y:Math.min(Math.max(s.y,a.y),l.y)};r.setPosition(u),tt(e)}},qx=(r,t,e,i,s)=>{qg(r,s,t)},Jx=(r,t,e,i,s)=>{qg(r,i,s)};class To extends sl{constructor(t,e,i,s,n){super(),this.position=N(50,50),this.origin=N(0,0),this.size=N(0,0),this.$i=!1,this.Mu=void 0,this._u=void 0,this.wu=jx,this.Cu=void 0,this.Bo=!0,this.ku=()=>{const h=typeof this.wu=="function"?this.wu(this):this.wu;h&&(this._u=this.ks.us.Wr(h))},this.Tu=()=>{this.ks.us.Ur(this._u)},this.Xt=Tr(0,0,0,0),this.ks=t,this.renderingScale=e,this.scale=i,this.Vo=s,this.qi=n,this.ks.Ss(),this.onMouseEnter(this.ku),this.onMouseLeave(this.Tu),this.onMouseDrag(qx);const o=Ci(new ds(Ft,Jx,Ft));this.onTouchStart(o.onTouchStart),this.onTouchMove(o.onTouchMove),this.onTouchEnd(o.onTouchEnd),this.qi=n}setMouseInteractions(t){return this.Fu().forEach(e=>e.setMouseInteractions(t)),this.Bo=t,this}getMouseInteractions(){return this.Bo}setEffect(t){return this.es=this.es||this.ks.us.es.hs(this,{Iu:{shapes:this.Fu()}}),this.es.Iu.ps(t),this}getEffect(){return!!this.es&&this.es.Iu.vs()}setAutoDispose(t){return this.Cu=t,this.ks.Ss(),this}getAutoDispose(){return this.Cu}getSize(t=Xt.Everything){return t===Xt.Everything?N(this.size.x+(this.Xt.left+this.Xt.right),this.size.y+(this.Xt.bottom+this.Xt.top)):this.size}setContentSize(t){this.size=t}setMargin(t){return this.Xt=typeof t=="object"?qn(this.Xt,t):{left:t,top:t,right:t,bottom:t},this.ks.Ss(),this}getMargin(){return this.Xt}Te(){if(this.Cu){const t=this.size,e=this.renderingScale.oi(),i={x:t.x/e.x,y:t.y/e.y};(this.Cu.type==="max-width"&&i.x>=this.Cu.maxWidth||this.Cu.type==="max-height"&&i.y>=this.Cu.maxHeight)&&this.dispose()}return this}Ps(){return this}dispose(){return this.$i||(this.ks.Ss(),this.$i=!0,this.Vo(this),this.D.emit("dispose",this),this.Fu().forEach(t=>t.dispose())),this}setVisible(t){return super.setVisible(t),this.Fu().forEach(e=>e.setVisible(t)),this.ks.Ss(),this}isDisposed(){return this.$i}onDispose(t){return this.D.on("dispose",t)}offDispose(t){return this.D.off(t,"dispose")}setPosition(t){return this.position=t,this.ks.Ss(),this}getPosition(t=this.origin,e=Xt.Everything){const i=this.getSize(Xt.Everything),s=this.scale.mi(this.position,zi({x:-(this.origin.x+1)/2,y:-(this.origin.y+1)/2},i));if(e===Xt.Everything)return this.scale.mi(s,zi({x:(t.x+1)/2,y:(t.y+1)/2},i));const n=this.scale.mi(s,{x:this.Xt.left,y:this.Xt.bottom}),o=this.getSize(Xt.Content);return this.scale.mi(n,zi({x:(t.x+1)/2,y:(t.y+1)/2},o))}setOrigin(t){return this.origin=t,this.ks.Ss(),this}getOrigin(){return this.origin}setDraggingMode(t=jt.notDraggable){return this.Mu=t,this.ks.Ss(),this}getDraggingMode(){return this.Mu!==void 0?this.Mu:jt.notDraggable}setMouseStyle(t){return this.wu=t,this}getMouseStyle(){return this.wu}}class Zx extends To{constructor(t,e,i,s,n,o){super(t,e,i,n,o),this.ya=Tr(),this.Pu=0,this.ks=t,this.Du=s,this.backgroundElement=new this.Du(this.ks,this.renderingScale,this.scale,Ft,o),this.xu(this.backgroundElement)}Fu(){return this.backgroundElement.Fu()}onHighlight(t){return this.D.on("highlight",t)}offHighlight(t){return this.D.off(t)}setBackground(t){return t(this.backgroundElement),this}getBackground(){return this.backgroundElement}Te(){return super.Te(),this.$i||this.backgroundElement.setOrigin(this.origin).setPosition(this.getPosition(this.origin,Xt.PaddedBackground)).Te(),this}Ps(){const t=this.getSize(Xt.PaddedContent);return this.backgroundElement.Bu(t).Ps(),super.Ps()}dispose(){return super.dispose(),this.backgroundElement.dispose(),this}setVisible(t){return super.setVisible(t),this.backgroundElement.setVisible(t),this}setPadding(t){return this.ya=typeof t=="object"?qn(this.ya,t):{left:t,top:t,right:t,bottom:t},this.ks.Ss(),this}getPadding(){return this.ya}getSize(t=Xt.Everything){let e=super.getSize(t);return t>=Xt.PaddedContent&&(e=N(e.x+this.ya.left+this.ya.right,e.y+this.ya.bottom+this.ya.top)),t>=Xt.PaddedBackground&&(e=N(e.x+this.backgroundElement.Lu()+this.backgroundElement.Ru(),e.y+this.backgroundElement.Eu()+this.backgroundElement.zu())),e}getPosition(t=this.origin,e=Xt.Everything){if(e===Xt.Everything)return super.getPosition(t,e);const i=super.getPosition(N(-1,-1),Xt.Everything),s=this.getMargin(),n=this.scale.mi(i,{x:s.left,y:s.bottom});if(e===Xt.PaddedBackground){const u=this.getSize(Xt.PaddedBackground);return this.scale.mi(n,zi({x:(t.x+1)/2,y:(t.y+1)/2},u))}const o=this.scale.mi(n,{x:this.backgroundElement.Lu(),y:this.backgroundElement.Eu()});if(e===Xt.PaddedContent){const u=this.getSize(Xt.PaddedContent);return this.scale.mi(o,zi({x:(t.x+1)/2,y:(t.y+1)/2},u))}const h=this.getPadding(),a=this.scale.mi(o,{x:h.left,y:h.bottom}),l=this.getSize(Xt.Content);return this.scale.mi(a,zi({x:(t.x+1)/2,y:(t.y+1)/2},l))}setMouseInteractions(t){return super.setMouseInteractions(t),this.backgroundElement.setMouseInteractions(t),this}getHighlight(){return this.Pu}setHighlight(t){return this.Pu=Hr(t),this.backgroundElement.setHighlight(t),this.D.emit("highlight",this,t),this}}const Mn=r=>"setBackground"in r;class Qx extends sl{constructor(t,e,i,s,n,o,h,a,l,u,c){super(),this.u=0,this.Vu=1,this.Ou=!0,this.Nu=new Ka,this.Gu=!0,this.$i=!1,this.axisScale=s,this.renderingScale=n,this.Wu=h,this.Uu=a,this.Yu=l,this.Vo=u,this.Hu=e,this.$u=i,this.Xu=this.xu(this.Hu.Ee(this.renderingScale)),this.qi=c,this.ju=this.xu(this.Yu.Zu(this.$u,this.renderingScale,o,Ft,this.qi,!1).setOrigin(bg(this.Uu)).setDirection(this.Uu)),this.axis=t,this.setMouseInteractions(!1),this.ju.Qu==="major"?this.Xu.Re(c.xAxisNumericTicks.majorTickStyle.gridStrokeStyle):this.ju.Qu==="minor"?this.Xu.Re(c.xAxisNumericTicks.minorTickStyle.gridStrokeStyle):this.ju.Qu==="other"&&this.Xu.Re(c.cursorGridStrokeStyleX)}setValue(t){return this.u=t,this.$u.Ss(),this.D.emit("valueChange",this,this.u),this}getValue(){return this.u}setTextFormatter(t){return this.Ju=t,this.$u.Ss(),this}setTickLength(t){return this.ju.setPointerLength(t),this.Hu.Ss(),this}getTickLength(){return this.ju.getPointerLength()}setTickLabelPadding(t){return this.ju.setTickLabelPadding(t),this.Hu.Ss(),this}setTickLabelRotation(t){return this.ju.setTextRotation(t),this.Hu.Ss(),this}getTickLabelRotation(){return this.ju.getTextRotation()}getTickLabelPadding(){return this.ju.getTickLabelPadding()}setGridStrokeLength(t){return this.Vu=t,this.Hu.Ss(),this}getGridStrokeLength(){return this.Vu}setGridStrokeStyle(t){return this.Xu.Re(t),this.Hu.Ss(),this}getGridStrokeStyle(){return this.Xu.uu()}dispose(){return this.$i||(this.$i=!0,this.Xu.dispose(),this.ju.dispose(),this.Vo(this),this.Hu.us.Ss(),this.D.emit("dispose",this)),this}onDispose(t){return this.D.on("dispose",t)}offDispose(t){return this.D.off(t,"dispose")}setMarkerVisible(t){return this.Ou=t,this.$u.Ss(),this}getMarkerVisible(){return this.Ou}setMarker(t){return t(this.ju),this.$u.Ss(),this}getMarker(){return this.ju}setMouseInteractions(t){return this.ju.setMouseInteractions(t),this.Xu.setMouseInteractions(t),this}getMouseInteractions(){return this.Xu.getMouseInteractions()}setAllocatesAxisSpace(t){return this.Gu=t,this.$u.Ss(),this}getAllocatesAxisSpace(){return this.Gu}isInScale(){return lr(this.u,this.axisScale.getInnerStart(),this.axisScale.getInnerEnd())}onValueChange(t){return this.D.on("valueChange",t)}offValueChange(t){return this.D.off(t,"valueChange")}}class Kx extends Qx{constructor(t,e,i,s,n,o,h,a,l,u,c){super(t,e,i,s,n,o,h,a,c,l,u),this.Ku=!1,this.Vo=l,this.Hu=e,this.$u=i}dispose(){return this.Ku=!1,super.dispose()}update(){return this}plot(t,e,i,s,n){if(this.isInScale()&&this.getVisible()&&t){this.Ku=!1;const o=ho(this.u,this.axisScale,this.Wu.getWidth(this.renderingScale));this.Xu.setVisible(!0).Ve(this.Wu.toPoint(o,e)).ze(this.Wu.toPoint(o,e-(s+i*this.Vu))),this.Ou?(this.Ju&&this.ju.setText(this.Ju(this.u,this)),this.ju.setVisible(!0).setPosition(this.Wu.toPoint(o,n))):this.ju.setVisible(!1)}else this.Xu.setVisible(!1),this.ju.setVisible(!1);return this.ju.Ps().Te(),this}qu(){const t=this.ju.Ps().getSize();return this.Wu.getHeight(t)}}const kh=(r,t)=>r.setTextFillStyle(t.uiTextFillStyle).setTextFont(t.uiTextFont),Jg=(r,t)=>(ge(r.setButtonSize(t.uiButtonSize),t,!1,{fill:t.uiButtonFillStyle}),r),_r=(r,t,e)=>{e&&Mn(r)&&r.setBackground(i=>i.setFillStyle(t.uiBackgroundFillStyle).setStrokeStyle(t.uiBackgroundStrokeStyle)).setEffect(!0)},Os={uiElement:void 0,stylers:bh(),addStyler(r){return{...this,stylers:this.stylers.push(r)}},applyStylers(r,t){return this.stylers.forEach(e=>e!==void 0?e(r,t):void 0),r}},In={background:void 0,setBackground(r){return{...this,background:r}}},yc={Zu(r,t,e,i,s,n){const o=this.applyStylers(new this.uiElement(r,t,e,i,s),s);return _r(o,s,n),o}},tS={Zu(r,t,e,i,s,n){const o=this.applyStylers(new this.uiElement(r,t,e,this.background,i,s),s);return _r(o,s,n),o}};class eS extends To{constructor(){super(...arguments),this.tc=!0}Te(){return super.Te(),this}setMouseInteractions(t){return this.tc=t,this}getMouseInteractions(){return this.tc}Fu(){return[]}}class mc extends To{constructor(){super(...arguments),this.D=new Xe,this.Pu=0}onHighlight(t){return this.D.on("highlight",t)}offHighlight(t){return this.D.off(t)}getHighlight(){return this.Pu}setHighlight(t){return this.Pu=t,this.Fu().forEach(e=>e.cs(t)),this.D.emit("highlight",this,t),this.ks.Ss(),this}}class Zg extends mc{}class iS extends Zg{constructor(t,e,i,s,n,o){super(t,e,i,n,o),this.ks=t,this.Na=this.ks.ic(this.renderingScale,ys.Simple).setVisible(!1).Ce(ft).we(it),this.xu(this.Na)}sc(){const t=this.hc();if(t.length>2){const e=ce(t),i=N(e.max.x-e.min.x,e.max.y-e.min.y);this.setContentSize(i);const s=t.map(n=>{const o=gt(n,St(e.min,-1));return this.scale.mi(this.position,gt(o,zi(St(gt(this.origin,N(1,1)),-.5),i)))}).map(n=>K(n,this.scale,this.renderingScale));this.Na.pl(s).setVisible(this.getVisible()).setVisible(this.getVisible())}else this.Na&&this.Na.setVisible(!1),this.setContentSize(N(0,0))}Te(){return super.Te(),this.$i||this.sc(),this}Ps(){return this.sc(),super.Ps()}setVisible(t){return super.setVisible(t),this.Na.setVisible(t),this}}const $r=(r,t,e)=>r*(1-e)+t*e,Qg=(r,t,e,i,s)=>{if(t.value===void 0||e.value===void 0||i.value===void 0||s.value===void 0)return;const n=(r.x-e.point.x)/(s.point.x-e.point.x),o=(s.point.y-e.point.y)*n+e.point.y,h=(r.x-t.point.x)/(i.point.x-t.point.x),a=(i.point.y-t.point.y)*h+t.point.y,l=(r.y-a)/(o-a),u=$r(e.value,s.value,n),c=$r(t.value,i.value,h);return $r(c,u,l)};class pc{constructor(){this.type="simple"}}const Co=new pc;class sS{constructor(t){this.type="phong",this.ambientReflection=1,this.specularReflection=.1,this.diffuseReflection=1,this.ambientColor=xi("#000"),this.specularColor=xi("#fff"),this.shininess=32,t&&(this.ambientReflection=Number.isNaN(Number(t.ambientReflection))?this.ambientReflection:Number(t.ambientReflection),this.specularReflection=Number.isNaN(Number(t.specularReflection))?this.specularReflection:Number(t.specularReflection),this.diffuseReflection=Number.isNaN(Number(t.diffuseReflection))?this.diffuseReflection:Number(t.diffuseReflection),this.ambientColor=t.ambientColor||this.ambientColor,this.specularColor=t.specularColor||this.specularColor,this.shininess=t.shininess||this.shininess)}}const Fo=new sS,rS={Simple:pc};var Ze;(function(r){r[r.Fill=0]="Fill",r[r.Fit=1]="Fit",r[r.Stretch=2]="Stretch",r[r.Center=3]="Center",r[r.Tile=4]="Tile"})(Ze||(Ze={}));const nS=Ot({type:"fillstyle",fillType:"image",source:void 0,surroundingColor:D(0,0,0,0),sourceMissingColor:D(0,0,0,0),fitMode:Ze.Fill});class Zs extends nS{constructor(t){super(t)}setSource(t){return this.set("source",t)}getSource(){return this.get("source")}setSurroundingColor(t){return ah(t)?this.set("surroundingColor",t):this.set("surroundingColor",t(this.get("surroundingColor")))}getSurroundingColor(){return this.get("surroundingColor")}setSourceMissingColor(t){return ah(t)?this.set("sourceMissingColor",t):this.set("sourceMissingColor",t(this.get("sourceMissingColor")))}getSourceMissingColor(){return this.get("sourceMissingColor")}setFitMode(t){return this.set("fitMode",t)}getFitMode(){return this.get("fitMode")}toString(){return`imagefill:${this.fitMode}`}}const Do=r=>!!(r&&typeof r=="object"&&"type"in r&&r.type==="fillstyle"&&"fillType"in r&&r.fillType==="image"),Kg={DashedEqual:[2,2]},oS=Ot({type:"linestyle",lineType:"dashed",pattern:Kg.DashedEqual,fillStyle:new H({color:D(255,255,255)}),thickness:1,patternScale:3});class hS extends oS{constructor(t){super({...t,lineType:"dashed"})}setFillStyle(t){return typeof t=="function"?this.set("fillStyle",t(this.getFillStyle())):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setThickness(t){return typeof t=="function"?this.set("thickness",t(this.getThickness())):this.set("thickness",t)}getThickness(){return this.get("thickness")}V(){const t=this.getThickness();return t<0?1:t}setPattern(t){return typeof t=="function"?this.set("pattern",t(this.getPattern())):this.set("pattern",t)}getPattern(){return this.get("pattern")}setPatternScale(t){return typeof t=="function"?this.set("patternScale",t(this.getPatternScale())):this.set("patternScale",t)}getPatternScale(){return this.get("patternScale")}}const rl=r=>!(!r||typeof r!="object"||!("lineType"in r)||r.lineType!=="dashed"),aS=Ot({type:"icon",width:void 0,height:void 0,rc:void 0,nc:Ft,oc:Ft});class lS extends aS{constructor(t,e,i,s){super({...s,rc:t,nc:e,oc:i})}dispose(){return this.oc(this),this}setWidth(t){const e=this.set("width",t);return this.nc(e),e}getWidth(){return this.get("width")}setHeight(t){const e=this.set("height",t);return this.nc(e),e}getHeight(){return this.get("height")}setSize(t,e){const i=this.withMutations(s=>{s.set("width",t).set("height",e)});return this.nc(i),i}oi(){if(!this.rc)return{x:0,y:0};const t=this.rc.width,e=this.rc.height;if(t===0||e===0)return{x:0,y:0};const i=this.width,s=this.height;return typeof i=="number"&&typeof s=="number"?{x:i,y:s}:typeof i=="number"?{x:i,y:e*i/t}:typeof s=="number"?{x:t*s/e,y:s}:{x:t,y:e}}}const Rn=r=>!(!r||typeof r!="object"||!("type"in r)||r.type!=="icon"),uS=Ot({type:"glow",color:D(255,255,255,50),spread:1,blur:4,offset:{x:0,y:0}});class nl extends uS{constructor(t){super(t)}setSpread(t){return this.set("spread",typeof t=="function"?t(this.get("spread")):t)}getSpread(){return this.get("spread")}setBlur(t){return this.set("blur",typeof t=="function"?t(this.get("blur")):t)}getBlur(){return this.get("blur")}setColor(t){return this.set("color",typeof t=="function"?t(this.get("color")):t)}getColor(){return this.get("color")}setOffset(t){return this.set("offset",typeof t=="function"?t(this.get("offset")):t)}getOffset(){return this.get("offset")}}class xc{constructor(t){this.ac=0,this.lc=0,this.uc=0,this.cc=!1,this.dc=!0,this.fc=!1,this.Ac={warningDisplayed:!1,expandEvents:[]},this.D=new Xe,this.dc=!t||t.autoSortingEnabled===void 0||t.autoSortingEnabled,(t==null?void 0:t.dataPattern)!==void 0&&(this.gc={userSpecified:t.dataPattern===null?void 0:t.dataPattern}),this.mc=(t==null?void 0:t.lookupValues)!==void 0&&t.lookupValues,this.yc=(t==null?void 0:t.colors)!==void 0&&t.colors,this.Sc=(t==null?void 0:t.ids)!==void 0&&t.ids,this.vc=(t==null?void 0:t.sizes)!==void 0&&t.sizes,this.bc=(t==null?void 0:t.rotations)!==void 0&&t.rotations,this.xc=t!=null&&t.dataStorage?t.dataStorage:Float64Array,this.Mc=(t==null?void 0:t.allowInputModification)!==!1}add(t){return Array.isArray(t)?this.appendJSON(t,{x:"x",y:"y"}):this.appendSample(t),this}addArraysXY(t,e){return this.appendSamples({xValues:t,yValues:e}),this}appendJSON(t,e={x:"x",y:"y"}){const i=t.length,s=e.x,n=e.y,o=e.lookupValue,h=e.size,a=e.rotation,l=e.color,u=e.id;let c,d,f,g,y,p,x;if(s){c=new this.xc(i);for(let A=0;A<i;A+=1){const v=t[A];c[A]=v[s]}}if(n){d=new this.xc(i);for(let A=0;A<i;A+=1){const v=t[A];d[A]=v[n]}}if(o){f=new Float32Array(i);for(let A=0;A<i;A+=1){const v=t[A];f[A]=v[o]}}if(l){g=[];for(let A=0;A<i;A+=1){const v=t[A];g[A]=v[l]}}if(u){y=new Uint32Array(i);for(let A=0;A<i;A+=1){const v=t[A];y[A]=v[u]}}if(h){p=new Float32Array(i);for(let A=0;A<i;A+=1){const v=t[A];p[A]=v[h]}}if(a){x=new Float32Array(i);for(let A=0;A<i;A+=1){const v=t[A];x[A]=v[a]}}return this.appendSamples({xValues:c,yValues:d,ids:y,colors:g,lookupValues:f,sizes:p,rotations:x,start:e.start,step:e.step}),this}appendSample(t){const{samplesCacheX:e,samplesCacheY:i,samplesCacheColors:s,samplesCacheIDs:n,samplesCacheLookup:o,samplesCacheSize:h,samplesCacheRotation:a,maxSampleCount:l,dataPattern:u}=this._c({appendCount:1}),c=this.wc(),d=t.step!==void 0?t.step:1,f=t.x!==void 0?t.x:c?c.x+d:0,g=t.y!==void 0?t.y:c?c.y+d:0;if(u&&this.dc&&this.Cc&&this.kc&&!this.Tc(u,f,g)&&!this.fc)return this.Fc(this.Cc,this.kc,new this.xc([f]),new this.xc([g]),t.lookupValue!==void 0?new Float32Array([t.lookupValue]):void 0,t.color!==void 0?this.Ic((t.color,[t.color])):void 0,t.id!==void 0?new Uint32Array([t.id]):void 0,t.size!==void 0?new Float32Array([t.size]):void 0,t.rotation!==void 0?new Float32Array([t.rotation]):void 0,u),this;if(e[this.ac]=f,i[this.ac]=g,t.lookupValue!==void 0&&o&&(o[this.ac]=t.lookupValue),t.color!==void 0&&s){const y=this.Ic((t.color,[t.color]));y!==void 0&&(s[this.ac]=y[0])}return t.id!==void 0&&n&&(n[this.ac]=t.id),t.size!==void 0&&h&&(h[this.ac]=t.size),t.rotation!==void 0&&a&&(a[this.ac]=t.rotation),this.Pc(this.ac,this.ac),this.ac+=1,this.ac>l-1&&(this.ac=0,this.cc=!0),this.lc=Math.min(this.lc+1,l),this.uc+=1,this}appendSamples(t){const{lookupValues:e,colors:i,ids:s,sizes:n,rotations:o,start:h,step:a}=t;let l=t.offset,u=t.count;const c=t.xValues||t.yValues;if(!c)return this;const d=c.length;if(l=l!==void 0?l:0,u=u!==void 0?u:d-l,u<=0)return this;const f=t.offsetLookupValues!==void 0?t.offsetLookupValues:l,g=t.offsetColors!==void 0?t.offsetColors:l,y=t.offsetIds!==void 0?t.offsetIds:l,p=t.offsetSizes!==void 0?t.offsetSizes:l,x=t.offsetRotations!==void 0?t.offsetRotations:l,[A,v]=this.Dc(u,t.xValues,"x",h,a,l),[w,E]=this.Dc(u,t.yValues,"y",h,a,l),C=this.Ic(i),{samplesCacheX:k,samplesCacheY:F,samplesCacheLookup:m,samplesCacheColors:S,samplesCacheIDs:b,samplesCacheSize:M,samplesCacheRotation:R,maxSampleCount:T,dataPattern:z,incomingDataReplacedCache:P}=this._c({appendCount:u,...v===0&&E===0&&l===0&&f===0&&g===0&&y===0&&p===0&&x===0?{incomingDataX:A,incomingDataY:w,incomingDataLookup:e,incomingDataIDs:s,incomingDataColors:C,incomingDataSize:n,incomingDataRotation:o}:{}});if(!P&&z&&this.dc&&this.Cc&&this.kc){const B=A[v],I=w[E];if(!this.Tc(z,B,I)&&!this.fc)return this.Fc(this.Cc,this.kc,_i(A,v,v+u),_i(w,E,E+u),_i(e,f,f+u),_i(C,g,g+u),_i(s,y,y+u),_i(n,p,p+u),_i(o,x,x+u),z),this}const _=T-this.ac,V=Math.min(u,_);if(V>0&&(P||(Ee(k,A,v,V,this.ac),Ee(F,w,E,V,this.ac),e&&m&&Ee(m,e,f,V,this.ac),s&&b&&Ee(b,s,y,V,this.ac),C&&S&&Ee(S,C,g,V,this.ac),n&&M&&Ee(M,n,p,V,this.ac),o&&R&&Ee(R,o,x,V,this.ac)),this.Pc(this.ac,this.ac+V-1),this.ac+=V,this.ac>T-1&&(this.ac=0,this.cc=!0)),this.lc=Math.min(this.lc+V,T),this.uc+=V,this.Bc(),u-V>0){const B={xValues:A?_i(A,v+V,void 0):void 0,yValues:w?_i(w,E+V,void 0):void 0,lookupValues:e?_i(e,f+V,void 0):void 0,ids:s?_i(s,y+V,void 0):void 0,colors:C?_i(C,g+V,void 0):void 0,sizes:n?_i(n,p+V,void 0):void 0,rotations:o?_i(o,x+V,void 0):void 0};this.appendSamples(B)}return this}setSamples(t){return this.clear().appendSamples(t)}fill(t){const e=this.Cc||this.kc;if(!e)return this;const i=e.length;if(t.x!==void 0&&(this.Cc=this.Cc||new this.xc(i),this.Cc.fill(t.x)),t.y!==void 0&&(this.kc=this.kc||new this.xc(i),this.kc.fill(t.y)),t.lookupValue!==void 0&&(this.Lc=this.Lc||new Float32Array(i),this.Lc.fill(t.lookupValue)),t.color!==void 0){const s=this.Ic([t.color]);s&&(this.Rc=this.Rc||new Uint32Array(i),this.Rc.fill(s[0]))}return t.size!==void 0&&(this.Ec=this.Ec||new Float32Array(i),this.Ec.fill(t.size)),t.rotation!==void 0&&(this.zc=this.zc||new Float32Array(i),this.zc.fill(t.rotation)),this.D.emit("cleared"),this}alterSamples(t,e){const{xValues:i,yValues:s,lookupValues:n,colors:o,ids:h,sizes:a,rotations:l}=e;let u=e.offset,c=e.count;const d=i||s||n||o||h||a||l;if(!d)return this;const f=d.length;if(u=u!==void 0?u:0,c=c!==void 0?c:f-u,c<=0)return this;const g=e.offsetLookupValues!==void 0?e.offsetLookupValues:u,y=e.offsetColors!==void 0?e.offsetColors:u,p=e.offsetIds!==void 0?e.offsetIds:u,x=e.offsetSizes!==void 0?e.offsetSizes:u,A=e.offsetRotations!==void 0?e.offsetRotations:u,v=this.Ic(o),w=this.uc-1,E=this.Vc!==void 0?Math.max(this.uc-this.Vc,0):0,C=t+c-1,k=Math.max(t,E),F=Math.min(C,w),m=F-k+1;if(this.uc>0&&m>0){const{samplesCacheX:b,samplesCacheY:M,samplesCacheColors:R,samplesCacheIDs:T,samplesCacheLookup:z,samplesCacheSize:P,samplesCacheRotation:_}=this._c({appendCount:0}),V=b.length;if(this.Vc!==void 0&&this.cc&&this.uc%this.Vc!=0){const B=this.uc-this.uc%this.Vc,I=this.uc-1,L=this.uc-this.lc,U=B-1,Y=Math.max(k,L),O=Math.min(F,U)-Y+1;if(O>0){const Z=Y-t,Q=Ne(Y,this.uc,V,this.ac);i&&Ee(b,i,u+Z,O,Q),s&&Ee(M,s,u+Z,O,Q),n&&z&&Ee(z,n,g+Z,O,Q),h&&T&&Ee(T,h,p+Z,O,Q),v&&R&&Ee(R,v,y+Z,O,Q),a&&P&&Ee(P,a,x+Z,O,Q),l&&_&&Ee(_,l,A+Z,O,Q)}const j=Math.max(k,B),$=Math.min(F,I)-j+1;if($>0){const Z=j-t,Q=Ne(j,this.uc,V,this.ac);i&&Ee(b,i,u+Z,$,Q),s&&Ee(M,s,u+Z,$,Q),n&&z&&Ee(z,n,g+Z,$,Q),h&&T&&Ee(T,h,p+Z,$,Q),v&&R&&Ee(R,v,y+Z,$,Q),a&&P&&Ee(P,a,x+Z,$,Q),l&&_&&Ee(_,l,A+Z,$,Q)}}else{const B=k-E;i&&Ee(b,i,u,m,B),s&&Ee(M,s,u,m,B),n&&z&&Ee(z,n,g,m,B),h&&T&&Ee(T,h,p,m,B),v&&R&&Ee(R,v,y,m,B),a&&P&&Ee(P,a,x,m,B),l&&_&&Ee(_,l,A,m,B)}this.D.emit("cleared")}const S=t+c-1-w;if(S>0){const b=F+1-t;this.appendSamples({xValues:i,yValues:s,lookupValues:n,colors:o,ids:h,sizes:a,rotations:l,offset:u+b,offsetLookupValues:g+b,offsetColors:y+b,offsetIds:p+b,offsetSizes:x+b,offsetRotations:A+b,count:S})}return this}alterSamplesByID(t,e){if(!this.Sc)throw new Error("LightningChart JS attempted to use alterSamplesByID on DataSetXY that doesn't have IDs enabled.");const i=t.length,s=this.Oc;if(i<=0||!s)return this;const n=((typeof e.color=="object"?this.Ic([e.color]):typeof e.color=="number"?[e.color]:[])||[])[0],o=Array.isArray(e.xValues)?new this.xc(e.xValues):e.xValues,h=Array.isArray(e.yValues)?new this.xc(e.yValues):e.yValues,a=Array.isArray(e.yValues)?new Float32Array(e.yValues):e.yValues,l=this.Ic(e.colors),u=Array.isArray(e.sizes)?new Float32Array(e.sizes):e.sizes,c=Array.isArray(e.rotations)?new Float32Array(e.rotations):e.rotations,d=s.length,f=this.lc,g=this.uc-1,y=Math.max(g-f+1,0);for(let p=0;p<i;p+=1){const x=t[p],A=jr(x,y,g,w=>s[Ne(w,this.uc,d,this.ac)]),v=Ne(A,this.uc,d,this.ac);s[v]===x&&(e.x!==void 0&&this.Cc&&(this.Cc[v]=e.x),e.y!==void 0&&this.kc&&(this.kc[v]=e.y),e.lookupValue!==void 0&&this.Lc&&(this.Lc[v]=e.lookupValue),e.size!==void 0&&this.Ec&&(this.Ec[v]=e.size),e.rotation!==void 0&&this.zc&&(this.zc[v]=e.rotation),n!==void 0&&this.Rc&&(this.Rc[v]=n),o&&this.Cc&&(this.Cc[v]=o[p]),h&&this.kc&&(this.kc[v]=h[p]),a&&this.Lc&&(this.Lc[v]=a[p]),l&&this.Rc&&(this.Rc[v]=l[p]),u&&this.Ec&&(this.Ec[v]=u[p]),c&&this.zc&&(this.zc[v]=c[p]))}return this.D.emit("cleared"),this}clear(){return this.ac=0,this.lc=0,this.uc=0,this.cc=!1,this.D.emit("cleared"),this}getSampleCount(){return this.lc}getNextSampleIndex(){return this.uc}setMaxSampleCount(t){if(typeof t=="object"){this.Nc&&this.offMaxSampleCountExceeded(this.Nc);const e=t.max;this.Nc=this.onMaxSampleCountExceeded((i,s,n,o)=>{if(e!==void 0&&n>=e)return;let h=2*n;e!==void 0&&(h=Math.min(h,e)),this.setMaxSampleCount(h)}),this.Vc===void 0&&this.setMaxSampleCount(1e5)}else if(typeof t=="number"){const e=t;if(this.Vc!==void 0&&this.Vc>e)throw new Error("LightningChart JS | DataSetXY.setMaxSampleCount attempted to shrink data set. This is currently not supported.");if(!this.Cc||!this.kc)return this.Vc=e,this;if(e===this.Vc)return this;if(this.cc&&this.ac!==0)throw new Error("LightningChart JS | DataSetXY.setMaxSampleCount attempted to expand data set that has exceeded its max sample count. This is currently not supported.");this.Vc=e,this.lc<e?(this.ac=this.lc,this.cc=!1):(this.ac=0,this.cc=!0);const i=new this.xc(this.Vc);i.set(this.Cc);const s=new this.xc(this.Vc);if(s.set(this.kc),this.Cc=i,this.kc=s,this.mc){const n=new Float32Array(this.Vc);this.Lc&&n.set(this.Lc),this.Lc=n}if(this.Sc){const n=new Uint32Array(this.Vc);this.Oc&&n.set(this.Oc),this.Oc=n}if(this.yc){const n=new Uint32Array(this.Vc);this.Rc&&n.set(this.Rc),this.Rc=n}if(this.vc){const n=new Float32Array(this.Vc);this.Ec&&n.set(this.Ec),this.Ec=n}if(this.bc){const n=new Float32Array(this.Vc);this.zc&&n.set(this.zc),this.zc=n}}return this}getMaxSampleCount(){return this.Vc}readBack(t){if(!this.Cc||!this.kc)return{xValues:new this.xc,yValues:new this.xc};const e=this.Cc.length;let i=[];if(t!=null&&t.onlyInRange){const f=this.Gc();if(!f)throw new Error("LightningChart JS - attempted to use `DataSetXY.readBack` with `visibleOnly: true` without a data pattern.\nThis operation is only supported for patterned data (e.g. 'ProgressiveX')");const g=Math.min(t.onlyInRange.start,t.onlyInRange.end),y=Math.max(t.onlyInRange.start,t.onlyInRange.end),p=Sc(g,y,this.Cc,this.uc,this.lc,this.ac,f,0);if(!p)return{xValues:new this.xc,yValues:new this.xc};i=p.dataRanges}else if(this.Vc!==void 0&&this.cc&&this.uc%this.Vc!=0){const f=this.ac,g=e-f,y=this.ac-1;i.push({offset:f,count:g}),i.push({offset:0,count:y+1})}else i.push({offset:0,count:this.lc});const s=i.reduce((f,g)=>f+g.count,0),n=new this.xc(s),o=new this.xc(s),h=this.yc?new Uint32Array(s):void 0,a=this.mc?new Float32Array(s):void 0,l=this.Sc?new Uint32Array(s):void 0,u=this.vc?new Float32Array(s):void 0,c=this.bc?new Float32Array(s):void 0;let d=0;for(const f of i)n.set(this.Cc.subarray(f.offset,f.offset+f.count),d),o.set(this.kc.subarray(f.offset,f.offset+f.count),d),this.yc&&h&&this.Rc&&h.set(this.Rc.subarray(f.offset,f.offset+f.count),d),this.mc&&a&&this.Lc&&a.set(this.Lc.subarray(f.offset,f.offset+f.count),d),this.Sc&&l&&this.Oc&&l.set(this.Oc.subarray(f.offset,f.offset+f.count),d),this.vc&&u&&this.Ec&&u.set(this.Ec.subarray(f.offset,f.offset+f.count),d),this.bc&&c&&this.zc&&c.set(this.zc.subarray(f.offset,f.offset+f.count),d),d+=f.count;return{xValues:n,yValues:o,lookupValues:a,colors:h,ids:l,sizes:u,rotations:c}}onMaxSampleCountExceeded(t){return this.D.on("maxSampleCountExceeded",t)}offMaxSampleCountExceeded(t){return this.D.off(t)}Dc(t,e,i,s,n,o){if(e===void 0){const h=this.wc();n=n!==void 0?n:1,s=s!==void 0?s:h?h[i]+n:0;const a=new this.xc(t);for(let l=0;l<t;l+=1)a[l]=s+l*n;return[a,0]}return[e,o]}Ic(t){if(!t||t.length===0)return;const e=t[0];if(ah(e)){const i=t.length,s=new Uint32Array(i);for(let n=0;n<i;n+=1){const o=t[n],h=255*o.a<<24|255*o.b<<16|255*o.g<<8|255*o.r;s[n]=h}return s}return t}Wc(){return{min:0,max:this.Vc!==void 0&&this.cc?this.Vc-1:this.lc-1}}Uc(t){t=Math.min(t,this.lc),this.uc-=t,this.lc-=t,this.ac-=t,this.ac<0&&this.Vc!==void 0&&(this.ac+=this.Vc)}Fc(t,e,i,s,n,o,h,a,l,u){var c;const d=i.length,f=i[0],g=i[d-1],y=s[d-1];if(this.Tc(u,g,y)){const p=((c=this.wc())===null||c===void 0?void 0:c.x)||0;let x=0;for(let v=0;v<d;v+=1)if(i[v]>p){x=v;break}const A={xValues:i,yValues:s,lookupValues:n,colors:o,ids:h,sizes:a,rotations:l,offset:x};this.fc=!0,this.appendSamples(A),this.fc=!1}else{const p=t.length,x=this.lc,A=this.uc-1,v=Math.max(A-x+1,0),w=jr(f,v,A,$=>t[Ne($,this.uc,p,this.ac)]),E=w-1,C=w+1,k=t[Ne(w,this.uc,p,this.ac)],F=C<=this.uc-1?t[Ne(C,this.uc,p,this.ac)]:void 0,m=F!==void 0&&F<f?C+1:k<f?w+1:E+1,S=A-m+1,b=new this.xc(S),M=new this.xc(S),R=this.mc?new Float32Array(S):void 0,T=this.yc?new Uint32Array(S):void 0,z=this.Sc?new Uint32Array(S):void 0,P=this.vc?new Float32Array(S):void 0,_=this.bc?new Float32Array(S):void 0;let V=0;for(let $=m;$<=A;$+=1){const Z=Ne($,this.uc,p,this.ac);b[V]=t[Z],M[V]=e[Z],R&&this.Lc&&(R[V]=this.Lc[Z]),T&&this.Rc&&(T[V]=this.Rc[Z]),z&&this.Oc&&(z[V]=this.Oc[Z]),P&&this.Ec&&(P[V]=this.Ec[Z]),_&&this.zc&&(_[V]=this.zc[Z]),V+=1}this.Uc(S);const B=new this.xc(d+S);B.set(i),B.set(b,d);const I=new this.xc(d+S);let L,U,Y,O,j;I.set(s),I.set(M,d),n&&R&&(L=new Float32Array(d+S),L.set(n),L.set(R,d)),o&&T&&(U=new Uint32Array(d+S),U.set(o),U.set(T,d)),h&&z&&(Y=new Uint32Array(d+S),Y.set(h),Y.set(z,d)),a&&P&&(O=new Float32Array(d+S),O.set(a),O.set(P,d)),l&&_&&(j=new Float32Array(d+S),j.set(l),j.set(_,d)),this.fc=!0,this.appendSamples({xValues:B,yValues:I,lookupValues:L,colors:U,ids:Y,sizes:O,rotations:j}),this.fc=!1,this.D.emit("cleared")}}Gc(){return this.Bc()}Bc(){let t;if(this.gc&&"userSpecified"in this.gc)t=this.gc.userSpecified;else if(this.gc&&"autoDetectResult"in this.gc)t=this.gc.autoDetectResult;else if(this.Cc&&this.kc&&this.uc>0){const e=this.Vc!==void 0&&this.cc?this.ac:0,i=this.lc-1,s=this.Vc!==void 0&&this.cc?0:void 0,n=this.Vc!==void 0&&this.cc?this.ac-1:void 0,[o,h]=s!==void 0&&n!==void 0&&Math.abs(n-s)>Math.abs(i-e)?[s,n]:[e,i];if(1+h-o>=2){let a,l,u=this.Cc[o],c=this.kc[o];for(let d=o+1;d<=h;d+=1){if(a!==!1){const f=this.Cc[d],g=Math.sign(f-u);g!==0&&a&&a.direction!==g?a=!1:g===0||a||(a={direction:g}),u=f}if(l!==!1){const f=this.kc[d],g=Math.sign(f-c);g!==0&&l&&l.direction!==g?l=!1:g===0||l||(l={direction:g}),c=f}}t=a&&a.direction>0?Jh.ProgressiveX:a&&a.direction<0?Jh.RegressiveX:l&&l.direction>0?Jh.ProgressiveY:l&&l.direction<0?Jh.RegressiveY:void 0,this.gc={autoDetectResult:t},t&&X.console.warn(`LightningChart JS DataSetXY warning | Data pattern was detected automatically (DataPatterns.${t}).
Automatic detection is only intended for kick-starting application development, not for production use.
Add { dataPattern: '${t}'} } to your application when creating series or DataSetXY to get clear this warning.`)}}if(t&&t!=="ProgressiveX")throw new Error("LightningChart JS New XY rework beta features do not yet support other data patterns than ProgressiveX. This will be introduced in near future.");return t}Tc(t,e,i){const s=this.wc();return!s||(t==="ProgressiveX"?e>s.x:t==="RegressiveX"?e<s.x:t==="ProgressiveY"?i>s.y:t!=="RegressiveY"||i<s.y)}_c(t){if(t.incomingDataX&&t.incomingDataY&&this.lc===0&&!this.Cc&&!this.kc&&(this.Vc===void 0||this.Vc===t.appendCount)&&this.Mc)return this.Cc=hn(t.incomingDataX,this.xc)||new this.xc,this.kc=hn(t.incomingDataY,this.xc)||new this.xc,this.Lc=this.mc?hn(t.incomingDataLookup,Float32Array):void 0,this.Oc=this.Sc?hn(t.incomingDataIDs,Uint32Array):void 0,this.Rc=this.yc?hn(t.incomingDataColors,Uint32Array):void 0,this.Ec=this.vc?hn(t.incomingDataSize,Float32Array):void 0,this.zc=this.bc?hn(t.incomingDataRotation,Float32Array):void 0,{dataPattern:this.Bc(),samplesCacheX:this.Cc,samplesCacheY:this.kc,samplesCacheLookup:this.Lc,samplesCacheIDs:this.Oc,samplesCacheColors:this.Rc,samplesCacheSize:this.Ec,samplesCacheRotation:this.zc,maxSampleCount:t.appendCount,incomingDataReplacedCache:!0};if(this.Vc===void 0){const e=this.lc+t.appendCount;if(!this.Cc||!this.kc)return this.Cc=new this.xc(e),this.kc=new this.xc(e),this.Lc=this.mc?new Float32Array(e):void 0,this.Oc=this.Sc?new Uint32Array(e):void 0,this.Rc=this.yc?new Uint32Array(e):void 0,this.Ec=this.vc?new Float32Array(e):void 0,this.zc=this.bc?new Float32Array(e):void 0,{dataPattern:this.Bc(),samplesCacheX:this.Cc,samplesCacheY:this.kc,samplesCacheLookup:this.Lc,samplesCacheIDs:this.Oc,samplesCacheColors:this.Rc,samplesCacheSize:this.Ec,samplesCacheRotation:this.zc,maxSampleCount:e};const i=this.Cc.length;if(i<e){if(!this.Ac.warningDisplayed){const o=X.performance.now();if(this.Ac.expandEvents=this.Ac.expandEvents.filter(h=>o-h.timestamp<5e3),e>1e3&&this.Ac.expandEvents.push({timestamp:o}),this.Ac.expandEvents.length>5)return X.console.warn(`LightningChart JS warning - DataSetXY append operation was performed more than 5 times in 5 seconds.
Automatic max sample count control was enabled.
For streaming applications, DataSetXY.setMaxSampleCount() or Series.setMaxSampleCount() should be configured explicitly to get rid of this warning.`),this.Ac.warningDisplayed=!0,this.setMaxSampleCount({mode:"auto"}),this._c(t)}const s=new this.xc(e);s.set(this.Cc),this.Cc=s;const n=new this.xc(e);if(n.set(this.kc),this.kc=n,this.mc){const o=new Float32Array(e);this.Lc&&o.set(this.Lc),this.Lc=o}if(this.Sc){const o=new Uint32Array(e);this.Oc&&o.set(this.Oc),this.Oc=o}if(this.yc){const o=new Uint32Array(e);this.Rc&&o.set(this.Rc),this.Rc=o}if(this.vc){const o=new Float32Array(e);this.Ec&&o.set(this.Ec),this.Ec=o}if(this.bc){const o=new Float32Array(e);this.zc&&o.set(this.zc),this.zc=o}return this.ac=this.lc,{dataPattern:this.Bc(),samplesCacheX:this.Cc,samplesCacheY:this.kc,samplesCacheLookup:this.Lc,samplesCacheIDs:this.Oc,samplesCacheColors:this.Rc,samplesCacheSize:this.Ec,samplesCacheRotation:this.zc,maxSampleCount:e}}if(i>4*e){const s=new this.xc(e);s.set(this.Cc.subarray(0,this.lc)),this.Cc=s;const n=new this.xc(e);if(n.set(this.kc.subarray(0,this.lc)),this.kc=n,this.mc){const o=new Float32Array(e);this.Lc&&o.set(this.Lc.subarray(0,this.lc)),this.Lc=o}if(this.Sc){const o=new Uint32Array(e);this.Oc&&o.set(this.Oc.subarray(0,this.lc)),this.Oc=o}if(this.yc){const o=new Uint32Array(e);this.Rc&&o.set(this.Rc.subarray(0,this.lc)),this.Rc=o}if(this.vc){const o=new Float32Array(e);this.Ec&&o.set(this.Ec.subarray(0,this.lc)),this.Ec=o}if(this.bc){const o=new Float32Array(e);this.zc&&o.set(this.zc.subarray(0,this.lc)),this.zc=o}return{dataPattern:this.Bc(),samplesCacheX:this.Cc,samplesCacheY:this.kc,samplesCacheLookup:this.Lc,samplesCacheIDs:this.Oc,samplesCacheColors:this.Rc,samplesCacheSize:this.Ec,samplesCacheRotation:this.zc,maxSampleCount:e}}return{dataPattern:this.Bc(),samplesCacheX:this.Cc,samplesCacheY:this.kc,samplesCacheLookup:this.Lc,samplesCacheIDs:this.Oc,samplesCacheColors:this.Rc,samplesCacheSize:this.Ec,samplesCacheRotation:this.zc,maxSampleCount:i}}return t.appendCount+this.lc>this.Vc&&this.D.emit("maxSampleCountExceeded",this,this.lc,this.Vc,this.lc+t.appendCount),this.Cc=this.Cc||new this.xc(this.Vc),this.kc=this.kc||new this.xc(this.Vc),this.Lc=this.Lc||(this.mc?new Float32Array(this.Vc):void 0),this.Oc=this.Oc||(this.Sc?new Uint32Array(this.Vc):void 0),this.Rc=this.Rc||(this.yc?new Uint32Array(this.Vc):void 0),this.Ec=this.Ec||(this.vc?new Float32Array(this.Vc):void 0),this.zc=this.zc||(this.bc?new Float32Array(this.Vc):void 0),{dataPattern:this.Bc(),samplesCacheX:this.Cc,samplesCacheY:this.kc,samplesCacheLookup:this.Lc,samplesCacheIDs:this.Oc,samplesCacheColors:this.Rc,samplesCacheSize:this.Ec,samplesCacheRotation:this.zc,maxSampleCount:this.Vc}}Yc(){if(!this.Cc||!this.kc||this.lc===0)return;if(this.Vc===void 0)return this.uc>0?{x:this.Cc[0],y:this.kc[0]}:void 0;if(!this.cc)return{x:this.Cc[0],y:this.kc[0]};let t=this.ac-this.lc;return t<0&&(t+=this.Vc),{x:this.Cc[t],y:this.kc[t]}}wc(){if(!this.Cc||!this.kc||this.lc===0)return;if(this.Vc===void 0){const e=this.lc-1;return e>=0?{x:this.Cc[e],y:this.kc[e]}:void 0}let t=this.ac-1;return t<0&&(t+=this.Vc),{x:this.Cc[t],y:this.kc[t]}}Hc(t,e,i,s){const n=this.Bc(),o=this.Cc,h=this.kc;if(!o||!h)return;const a=x=>({x:o[x],y:h[x],lookupValue:this.mc&&this.Lc?this.Lc[x]:void 0,id:this.Sc&&this.Oc?this.Oc[x]:void 0,color:this.yc&&this.Rc?this.Rc[x]:void 0,size:this.vc&&this.Ec?this.Ec[x]:void 0,rotation:this.bc&&this.zc?this.zc[x]:void 0}),l=o.length,u=this.lc,c=this.uc-1,d=Math.max(c-u+1,0);if(n){const x=this.Yc(),A=this.wc();if(!(x&&A&&this.Cc&&this.kc))return;const v=n==="ProgressiveX"||n==="RegressiveX"?"x":"y",w=v==="x"?"y":"x",E=v==="x"?this.Cc:this.kc,C=w==="x"?this.Cc:this.kc,k=t[v],F=Math.min(x[v],A[v]),m=Math.max(x[v],A[v]);if(k<F||k>m)return;const S=jr(k,d,c,Y=>E[Ne(Y,this.uc,l,this.ac)]),b=Ne(S,this.uc,l,this.ac);if(!e)return a(b);const M=S-1,R=S+1,T=k>=E[b]&&(n==="ProgressiveX"||n==="ProgressiveY")?R<=c?Ne(R,this.uc,l,this.ac):void 0:M>=d?Ne(M,this.uc,l,this.ac):void 0;if(T===void 0)return;const z=E[b],P=C[b],_=E[T],V=C[T],B=Math.min(z,_),I=B===z?P:V,L=Math.max(z,_),U=$r(I,L===z?P:V,(k-B)/(L-B));return n==="ProgressiveX"||n==="RegressiveX"?{x:k,y:U}:{x:U,y:k}}let f,g=Number.MAX_VALUE;const y=K(t,i,s),p=this.lc-1;for(let x=0;x<=p;x+=1){const A=o[x],v=h[x];if(!Number.isNaN(A)&&!Number.isNaN(v)){const w=ho(A,i.x,s.x),E=ho(v,i.y,s.y),C=(w-y.x)**2+(E-y.y)**2;C<g&&(g=C,f=x)}}return f===void 0?void 0:a(f)}Pc(t,e){this.D.emit("changed",t,e)}Ut(t){return this.D.off(t)}$c(t){return this.D.on("changed",t)}Xc(t){return this.D.on("cleared",t)}}const Ne=(r,t,e,i)=>r%e,Sc=(r,t,e,i,s,n,o,h)=>{if(i===0||s===0)return;const a=e.length,l=i-1,u=Math.max(l-s+1,0),c=jr(r,u,l,x=>e[Ne(x,i,a)]),d=jr(t,u,l,x=>e[Ne(x,i,a)]),f=Math.max(c-h,u),g=Math.min(d+h,l),y=Ne(f,i,a),p=Ne(g,i,a);return y>p?{iFirstSample:f,iLastSample:g,iFirstSampleDataArray:y,iLastSampleDataArray:p,dataRanges:[{offset:y,count:a-y},{offset:0,count:p+1}]}:{iFirstSample:f,iLastSample:g,iFirstSampleDataArray:y,iLastSampleDataArray:p,dataRanges:[{offset:y,count:p-y+1}]}},jr=(r,t,e,i)=>{const s=e;for(;t!==e;){const o=Math.ceil((t+e)/2);r<i(o)?e=o-1:t=o}const n=Math.abs(r-i(t));return t<s&&Math.abs(r-i(t+1))<n?t+1:t},Ee=(r,t,e,i,s)=>{const n=t.length;if(Array.isArray(t))for(let o=0;o<i;o+=1)r[s+o]=t[e+o];else r.set(n===i?t:t.subarray(e,e+i),s)},hn=(r,t)=>r===void 0?void 0:Array.isArray(r)?new t(r):r instanceof t?r:new t(r),_i=(r,t,e)=>{if(r!==void 0)return Array.isArray(r)?r.slice(t,e):r.subarray(t,e)};class yu extends mc{constructor(t,e,i,s,n){super(t,e,i,s,n),this.la="label",this.Na=this.ks.Pr(this.renderingScale).Rh(this.la).Ce(ft).Fr(mr).Ir(mr),this.setMargin(5),this.xu(this.Na)}Fu(){return[this.Na]}setFillStyle(t){return this.Na.Ce(t),this.ks.Ss(),this}getFillStyle(){return this.Na.Eh()}Te(){const t=this.getPosition(N(0,0),Xt.Content),e=K(t,this.scale,this.renderingScale);return this.Na.Fe(e),this}Ps(){this.Na.Ps();const t=this.la.length===0?N(0,0):this.Na.jc();return this.setContentSize(t),super.Ps()}setText(t){return this.la=t,this.Na.Rh(this.la),this.ks.Ss(),this}getText(){return this.la}setFont(t){return this.Na.Oh(t),this.ks.Ss(),this}getFont(){return this.Na.Vh()}setTextRotation(t){return this.Na.Nh(t),this.ks.Ss(),this}getTextRotation(){return this.Na.Gh()}}const Th={...Os,...yc,uiElement:yu};class ji extends Zg{constructor(t,e,i,s,n){super(t,e,i,s,n),this.Zc=!1,this.fitTo=this.Bu.bind(this),this.setSize=this.fitTo,this.Na=this.ks.ic(e).Ce(ft).we(it),this.xu(this.Na)}Fu(){return[this.Na]}setFillStyle(t){return this.Na.Ce(t),this.ks.Ss(),this}getFillStyle(){return this.Na.Eh()}setStrokeStyle(t){return this.Na.we(t),this.ks.Ss(),this}getStrokeStyle(){return this.Na.ao()}Te(){const t=ce([this.getPosition(N(-1,-1),Xt.Content),this.getPosition(N(1,1),Xt.Content)].map(e=>K(e,this.scale,this.renderingScale)));return this.Zc?this.Na.pl([{x:(t.min.x+t.max.x)/2,y:t.min.y},{x:t.min.x,y:(t.min.y+t.max.y)/2},{x:(t.min.x+t.max.x)/2,y:t.max.y},{x:t.max.x,y:(t.min.y+t.max.y)/2}]):this.Na.pl([t.min,{x:t.min.x,y:t.max.y},t.max,{x:t.max.x,y:t.min.y}]),this}Bu(t){return this.setContentSize(t),this.ks.Ss(),this}Lu(){return 0}Ru(){return 0}zu(){return 0}Eu(){return 0}}class mu extends iS{constructor(t,e,i,s,n){super(t,e,i,ys.Simple,s,n),this.td=vt(N(0,0)),this.sd=vt(10),this.ed=vt(void 0),this.Uu=vt(bt.Right),this.sc()}Fu(){return[this.Na]}setFillStyle(t){return this.Na.Ce(t),this.ks.Ss(),this}getFillStyle(){return this.Na.Eh()}setStrokeStyle(t){return this.Na.we(t),this.ks.Ss(),this}getStrokeStyle(){return this.Na.ao()}setDirection(t){return this.Uu.S(t),this.ks.Ss(),this}getDirection(){return this.Uu.M()}setPointerLength(t){return this.sd.S(t),this.ks.Ss(),this}getPointerLength(){return this.sd.M()}setPointerAngle(t){return this.ed.S(t),this.ks.Ss(),this}getPointerAngle(){let t=this.ed.M();if(t===void 0){const e=this.hd();if(e===0)return 0;t=e!==0?180*Math.atan(2*this.getPointerLength()/e)/Math.PI:0}return Math.min(Math.max(t,1),89)}Bu(t){return this.td.S(t),this.ks.Ss(),this}rd(){const t=this.getPointerAngle();return t===0?0:2*this.getPointerLength()/Math.tan(t*Math.PI/180)}nd(){return Rd(this.Uu.M())?this.td.M().x:this.td.M().y}hd(){return Rd(this.Uu.M())?this.td.M().y:this.td.M().x}Lu(){switch(this.Uu.M()){case bt.Right:return 0;case bt.Left:return this.getPointerLength();case bt.Up:case bt.Down:return Math.max(0,this.rd()-this.hd());default:return 0}}Ru(){switch(this.Uu.M()){case bt.Right:return this.getPointerLength();case bt.Left:return 0;case bt.Up:case bt.Down:return Math.max(0,this.rd()-this.hd());default:return 0}}zu(){switch(this.Uu.M()){case bt.Right:case bt.Left:return Math.max(0,this.rd()-this.hd());case bt.Up:return this.getPointerLength();case bt.Down:default:return 0}}Eu(){switch(this.Uu.M()){case bt.Right:case bt.Left:return Math.max(0,this.rd()-this.hd());case bt.Up:return 0;case bt.Down:return this.getPointerLength();default:return 0}}hc(){const t=bg(this.Uu.M()),e=Za(N(0,0),t),i=this.getPointerLength(),s=this.rd(),n=this.nd(),o=this.hd();if(!(i!==0&&s!==0||n!==0&&o!==0))return[];const h=N(0,0),a=gt(gt(h,St(t,-i)),St(e,s/2)),l=gt(a,St(e,(o-s)/2)),u=gt(l,St(t,-n)),c=gt(gt(h,St(t,-i)),St(e,-s/2)),d=gt(c,St(e,-(o-s)/2)),f=gt(d,St(t,-n));let g;return g=n===0||o===0?[h,a,c]:i===0||s===0?[l,u,f,d]:De(o,s)?[h,a,u,f,c]:[h,a,l,u,f,d,c],g}}class ol extends mc{constructor(t,e,i,s,n){super(t,e,i,s,n),this.fitTo=this.Bu.bind(this),this.setSize=this.fitTo,this.od=new xc,this.Na=this.ks.dd(e).Re(it).ud(ft).ld(ft).ad(this.od),this.xu(this.Na)}Fu(){return[this.Na]}setShape(t){return this.Na.fd(t),this}getShape(){return this.Na.Ad()}setRotation(t){return this.Na.gd(t),this}getRotation(){return this.Na.md()}setFillStyle(t){return this.Na.ld(t),this.ks.Ss(),this}getFillStyle(){return this.Na.yd()}Te(){const t=K(this.getPosition({x:0,y:0},Xt.Content),this.scale,this.renderingScale),e=Math.max(this.size.x,this.size.y);if(this.od.clear(),e>0){const i=this.Na.Ad(),s=this.Na.yd(),n=Rn(i)&&i,o=Do(s)&&s;if(n){const h=e/n.oi().y;this.Na.pd(h)}else if(o){const h=o.source;if(h instanceof Image){const a=e/h.height;this.Na.pd(a)}}else this.Na.pd(e);this.od.appendSample(t)}return this}Bu(t){return this.setContentSize(t),this.ks.Ss(),this}Lu(){return 0}Ru(){return 0}zu(){return 0}Eu(){return 0}}const cS={...Os,...yc,uiElement:ol};class go extends eS{setSize(t){return this.setContentSize(t),this.ks.Ss(),this}}class ty extends Zx{constructor(){super(...arguments),this.Sd=[],this.vd=0,this.bd=t=>{const e=this.Sd.indexOf(t);e>=0&&this.Sd.splice(e,1)}}getMembers(){return this.Sd}getMemberCount(){return this.Sd.length}setMinimumSize(t){return this.xd=t,this.ks.Ss(),this}getMinimumSize(){return this.xd}addElement(t,e=-1){const i=t.Zu(this.ks,this.renderingScale,this.scale,this.bd,this.qi,!1);return i.setMouseInteractions(this.getMouseInteractions()),e>=0?this.Sd.splice(e,0,i):this.Sd.push(i),i.setVisible(this.getVisible()),this.xu(i),this.$i&&(qs(0,()=>{}),i.dispose()),i}dispose(){return super.dispose(),this.Sd.slice().forEach(Sn),this}setVisible(t){return super.setVisible(t),this.Sd.forEach(e=>e.setVisible(t)),this}setMouseInteractions(t){super.setMouseInteractions(t);for(let e=0;e<this.Sd.length;e+=1)this.Sd[e].setMouseInteractions(t);return this}getMouseInteractions(){if(super.getMouseInteractions())return!0;for(let t=0;t<this.Sd.length;t+=1)if(this.Sd[t].getMouseInteractions())return!0;return!1}setHighlight(t){super.setHighlight(t);for(let i=0;i<this.Sd.length;i+=1){const s=this.Sd[i];"getHighlight"in(e=s)&&"setHighlight"in e&&s.setHighlight(t)}var e;return this}}class yo extends ty{Te(){super.Te();const t=this.getPosition(N(-1,1),Xt.Content),e=this.Sd.reduce((s,n)=>s+ +(n instanceof go),0),i=e>0?(this.size.x-this.vd)/e:0;return this.Sd.reduce((s,n)=>n instanceof go?this.scale.mi({x:s,y:t.y},{x:i+n.getSize().x,y:0}).x:n.setOrigin(N(-1,1)).setPosition(N(s,t.y)).Te().getPosition(N(1,0)).x,t.x),this}Ps(){for(let i=0;i<this.Sd.length;i+=1){const s=this.Sd[i];s instanceof mo&&s.setMinimumSize(0),s.Ps()}const t=this.Sd.reduce(this.Md.bind(this),gr(0,0));this.vd=t.x;const e=this.xd===void 0?t:N(Math.max(t.x,this.xd),t.y);this.setContentSize(e);for(let i=0;i<this.Sd.length;i+=1){const s=this.Sd[i];s instanceof mo&&s.setMinimumSize(e.y).Ps()}return super.Ps()}Md(t,e){const i=e.getSize();return t.x+=i.x,t.y=Math.max(t.y,i.y),t}addGap(t=0,e=-1){return this.addElement(ey,e).setSize(N(0,t))}}class mo extends ty{Te(){super.Te();const t=this.getPosition(N(-1,1),Xt.Content),e=this.Sd.reduce((s,n)=>s+ +(n instanceof go),0),i=e>0?(this.size.y-this.vd)/e:0;return this.Sd.reduce((s,n)=>n instanceof go?this.scale.mi({x:t.x,y:s},{x:0,y:-(i+n.getSize().y)}).y:n.setOrigin(N(-1,1)).setPosition(N(t.x,s)).Te().getPosition(N(0,-1)).y,t.y),this}Ps(){for(let i=0;i<this.Sd.length;i+=1){const s=this.Sd[i];s instanceof yo&&s.setMinimumSize(0),s.Ps()}const t=this.Sd.reduce(this.Md.bind(this),gr(0,0));this.vd=t.y;const e=this.xd===void 0?t:N(t.x,Math.max(t.y,this.xd));this.setContentSize(e);for(let i=0;i<this.Sd.length;i+=1){const s=this.Sd[i];s instanceof yo&&s.setMinimumSize(e.x).Ps()}return super.Ps()}Md(t,e){const i=e.getSize();return t.y+=i.y,t.x=Math.max(t.x,i.x),t}addGap(t=0,e=-1){return this.addElement(ey,e).setSize(N(0,t))}}const ey={...Os,...yc,uiElement:go};class dS extends mo{constructor(){super(...arguments),this.Sd=[]}addRow(){return this.addElement(Ch,void 0)}getRow(t,e=!1){return e&&this.Sd.length<=t?(this.addRow(),this.getRow(t,!0)):this.Sd[t]}}const iy={...Os,...In,...tS},En={...iy,uiElement:mo,background:ji},Ch={...iy,uiElement:yo,background:ji},hl={setTextLabel:null,setText(r){return this.setTextLabel.setText(r),this},getText(){return this.setTextLabel.getText()}},sy=(r,t)=>{const e={},i=`stylable${r}s`;return e[i]=t,e[`set${r}FillStyle`]=function(s){return this[i].forEach(n=>n.setFillStyle(s)),this},e[`get${r}FillStyle`]=function(){return this[i][0].getFillStyle()},e[`set${r}Font`]=function(s){return this[i].forEach(n=>n.setFont(s)),this},e[`get${r}Font`]=function(){return this[i][0].getFont()},e[`set${r}Rotation`]=function(s){return this[i].forEach(n=>n.setTextRotation(s)),this},e[`get${r}Rotation`]=function(){return this[i][0].getTextRotation()},e},Fh=sy("Text",[]),ry={button:void 0,isLocked:!1,setOn(r){const t=this.button.getOn()!==r;return this.button.setOn(r),t&&this.D.emit("switch",r),this},getOn(){return this.button.getOn()},setLocked(r){return this.isLocked=r,this},getLocked(){return this.isLocked},onSwitch(r){return this.D.on("switch",t=>r(this,t))},offSwitch(r){return this.D.off(r,"switch")},setButtonOffFillStyle(r){return this.button.setOffFillStyle(r),this},getButtonOffFillStyle(){return this.button.getOffFillStyle()},setButtonOnFillStyle(r){return this.button.setOnFillStyle(r),this},getButtonOnFillStyle(){return this.button.getOnFillStyle()},setButtonSize(r){return this.button.setSize(r),this},getButtonSize(){return this.button.getSize()},setButtonShape(r){return this.button.setButtonShape(r),this},getButtonShape(){return this.button.getButtonShape()}},ny={textFillStyleHidden:void 0,setTextFillStyleHidden(r){return this.textFillStyleHidden=typeof r=="function"?r(this.textFillStyleHidden):r,this},getTextFillStyleHidden(){return this.textFillStyleHidden}},fS={pointable:void 0,setDirection(r){return this.pointable.setDirection(r),this},getDirection(){return this.pointable.getDirection()},setPointerLength(r){return this.pointable.setPointerLength(r),this},getPointerLength(){return this.pointable.getPointerLength()}},Ac={...Os,...In,background:ji,Zu(r,t,e,i,s,n){const o=new yo(r,t,e,this.background,i,s),h=o.addElement(Th,void 0),a=Object.assign(o,hl,{setTextLabel:h},Fh,{stylableTexts:[h]});return _r(a,s,n),this.applyStylers(a,s)}}.addStyler(kh),gS={...Os,...In,background:mu,Zu(r,t,e,i,s,n){const o=new yo(r,t,e,this.background,i,s),h=o.addElement(Th,void 0),a=o.getBackground(),l=Object.assign(o,hl,{setTextLabel:h},Fh,{stylableTexts:[h]},fS,{pointable:a},{setTickLabelPadding(u){return this.getDirection()===bt.Up?(this.setPadding({top:u}),h.setMargin({top:0})):this.getDirection()===bt.Down?(this.setPadding({bottom:u}),h.setMargin({bottom:0})):this.getDirection()===bt.Right?(this.setPadding({right:u}),h.setMargin({right:0})):this.getDirection()===bt.Left&&(this.setPadding({left:u}),h.setMargin({left:0})),this},getTickLabelPadding(){return this.getDirection()===bt.Up?this.getPadding().top:this.getDirection()===bt.Down?this.getPadding().bottom:this.getDirection()===bt.Right?this.getPadding().right:this.getPadding().left}});return l.Qu="other",l.setPointerLength(s.xAxisNumericTicks.majorTickStyle.getTickLength()).setTickLabelPadding(s.xAxisNumericTicks.majorTickStyle.getTickPadding()).setTextFont(s.uiTextFont).setTextFillStyle(s.uiTextFillStyle).setBackground(u=>u.setFillStyle(s.uiBackgroundFillStyle).setStrokeStyle(s.uiBackgroundStrokeStyle)),_r(l,s,n),this.applyStylers(l,s)}};class yS extends To{constructor(t,e,i,s,n,o){super(t,e,i,n,o),this.Ds=!1,this.D=new Xe,this._d=ft,this.wd=ft,this.getOn=()=>this.Ds,this.Cd=this.xu(new ol(this.ks,this.renderingScale,this.scale,Ft,o).setShape(s)),this.wd=o.uiButtonFillStyleHidden||o.uiButtonFillStyle}Fu(){return[...this.Cd.Fu()]}onHighlight(t){return this.D.on("highlight",t)}offHighlight(t){return this.D.off(t)}setOn(t){return this.Ds=t,this.Cd.setFillStyle(t?this._d:this.wd),this.ks.Ss(),this}setOffFillStyle(t){return this.wd=typeof t=="function"?t(this.wd):t,this.Ds||this.Cd.setFillStyle(this.wd),this}getOffFillStyle(){return this.wd}setSize(t){return this.Cd.fitTo(typeof t=="number"?N(t,t):t),this}getSize(){return this.Cd.getSize()}setOnFillStyle(t){return this._d=typeof t=="function"?t(this._d):t,this.Ds&&this.Cd.setFillStyle(this._d),this}getOnFillStyle(){return this._d}setButtonShape(t){return this.Cd.setShape(t),this.ks.Ss(),this}getButtonShape(){return this.Cd.getShape()}Te(){return super.Te(),this.Cd.setVisible(this.getVisible()).setPosition(this.getPosition(N(0,0),Xt.Content)).Te(),this}Ps(){const t=this.Cd.Ps().getSize();return this.setContentSize(t),super.Ps()}dispose(){return super.dispose(),this.Cd.dispose(),this}setMouseInteractions(t){return this.Cd.setMouseInteractions(t),this}getMouseInteractions(){return this.Cd.getMouseInteractions()}setHighlight(t){const e=Hr(t);return this.Cd.setHighlight(e),this.D.emit("highlight",this,t),this.ks.Ss(),this}getHighlight(){return this.Cd.getHighlight()}}const oy={...Os,uiElement:yS,buttonShape:ae.Circle,setButtonShape(r){return{...this,buttonShape:r}},Zu(r,t,e,i,s,n){const o=this.applyStylers(new this.uiElement(r,t,e,this.buttonShape,i,s),s);return _r(o,s,n),o}},hy={...Os,...In,background:ji,buttonBuilder:oy,setButtonShape(r){return{...this,buttonBuilder:this.buttonBuilder.setButtonShape(r)}},Zu(r,t,e,i,s,n){const o=new yo(r,t,e,this.background,i,s),h=o.addElement(En);h.addGap();const a=h.addElement(this.buttonBuilder);h.addGap();const l=o.addElement(En);l.addGap();const u=l.addElement(Th);l.addGap(),o.addGap();const c=Object.assign(o,hl,{setTextLabel:u},Fh,{stylableTexts:[u]},ry,{button:a},ny);let d;return c.onMouseClick((f,g)=>{c.getLocked()||c.setOn(!c.getOn())}),c.onMouseEnter(()=>c.setHighlight(!0)),c.onMouseLeave(()=>c.setHighlight(!1)),c.setMouseStyle(It.Point),c.setTextFillStyleHidden(s.uiTextFillStyleHidden||s.uiTextFillStyle),c.onSwitch((f,g)=>{g?d&&c.setTextFillStyle(d):(d=c.getTextFillStyle(),c.setTextFillStyle(c.getTextFillStyleHidden()))}),c.setPadding({left:5}),_r(c,s,n),this.applyStylers(c,s)}}.addStyler(kh).addStyler(Jg);class ay extends To{constructor(t,e,i,s,n,o){super(t,e,i,s,n),this.kd=[],this.Td=2,this.Fd="",this.Id=(h,a)=>h.label!==void 0?h.label:a.percentageValues?`${(100*h.value).toFixed(0)}%`:_g(h.value,a.min,a.max),this.Pd=0,this.Dd=0,this.Bd=!1,this.ks=t,this.Ld=o,this.Rd=this.xu(t.ke(e).we(it)),this.Ed=this.xu(t.Pr(e).Ce(n.uiTextFillStyle).Oh(n.uiTextFont).setMouseInteractions(!1)),o==="vertical"?(this.zd=140,this.Vd=25):(this.zd=160,this.Vd=15)}Fu(){return[this.Rd,this.Ed]}Od(t){this.Nd=t;const e=Xd(t,this.Ld==="vertical"?0:90,this.Bd);return this.Rd.Ce(e),this.ks.Ss(),this}Gd(){return this.Nd}Wd(t){return this.zd=t,this.ks.Ss(),this}Ud(){return this.zd}Yd(t){return this.Vd=t,this.ks.Ss(),this}Hd(){return this.Vd}$d(t){return this.Fd=t,this.ks.Ss(),this}Xd(){return this.Fd}jd(t){return this.Id=t,this.ks.Ss(),this}setLUTDisplayProportionalSteps(t){if(this.Bd=t,this.Nd){const e=Xd(this.Nd,this.Ld==="vertical"?0:90,this.Bd);this.Rd.Ce(e)}return this.ks.Ss(),this}getLUTDisplayProportionalSteps(){return this.Bd}setFillStyle(t){return this.Ed.Ce(t),this.ks.Ss(),this}getFillStyle(){return this.Ed.Eh()}setFont(t){return this.Ed.Oh(t),this.ks.Ss(),this}getFont(){return this.Ed.Vh()}setTextRotation(t){return this.Dd=t,this.Ed.Nh(t),this.ks.Ss(),this}getTextRotation(){return this.Ed.Gh()}Te(){var t,e,i,s;if(super.Te(),this.$i||!this.getVisible())return this;const n=this.Nd;if(n){const o=this.renderingScale.Wi(),h=n.min,a=n.max;if(this.Ld==="vertical"){const l=this.getPosition({x:-1,y:-1},Xt.Content),u=gt(l,{x:this.Rd.oi().x+this.Td*o.x,y:0}),c={x:u.x,y:u.y+(this.Fd.length>0?this.Pd*o.y+this.Ed.oi().y:0)+.5*(((t=this.kd[0])===null||t===void 0?void 0:t.oi().y)||0)},d={x:c.x,y:this.getPosition({x:-1,y:1},Xt.Content).y-.5*(((e=this.kd[this.kd.length-1])===null||e===void 0?void 0:e.oi().y)||0)};this.Rd.Fe({x:l.x,y:c.y}),this.Ed.Ea({x:-1,y:-1}).Fe(u),n.getSteps().forEach((f,g)=>{const y=Dr(c,d,this.Bd?n.getInterpolation()===!0?(f.value-h)/(a-h):.9*(f.value-h)/(a-h):n.getInterpolation()===!0?g/(n.getSteps().length-1):g/n.getSteps().length);this.kd[g].Ea({x:-1,y:0}).Fe(y)})}else{const l=this.getPosition({x:-1,y:-1},Xt.Content),u=this.getPosition({x:1,y:1},Xt.Content),c=this.kd.reduce((p,x)=>Math.max(p,x.oi().y),0),d=gt(l,{x:.5*(((i=this.kd[0])===null||i===void 0?void 0:i.oi().x)||0),y:c}),f={x:u.x,y:d.y},g={x:f.x-(.5*(((s=this.kd[this.kd.length-1])===null||s===void 0?void 0:s.oi().x)||0)+(this.Fd.length>0?this.Pd*o.x+this.Ed.oi().x:0)),y:d.y},y={x:d.x,y:d.y+this.Td*o.y};this.Rd.Fe(y),this.Ed.Ea({x:1,y:1}).Fe(f),n.getSteps().forEach((p,x)=>{const A=Dr(d,g,this.Bd?n.getInterpolation()===!0?(p.value-h)/(a-h):.9*(p.value-h)/(a-h):n.getInterpolation()===!0?x/(n.getSteps().length-1):x/n.getSteps().length);this.kd[x].Ea({x:0,y:1}).Fe(A)})}}return this}Ps(){if(this.Nd&&this.getVisible()){const t=this.Nd.getSteps();for(let e=this.kd.length;e<t.length;e+=1)this.kd.push(this.xu(this.ks.Pr(this.renderingScale).setMouseInteractions(!1)));for(let e=0;e<t.length;e+=1)this.kd[e].Ce(this.Ed.Eh()).Oh(this.Ed.Vh()).Rh(this.Id(t[e],this.Nd)).Nh(this.Dd);for(let e=t.length;e<this.kd.length;e+=1)this.kd[e].dispose();if(this.kd.length=t.length,this.Ed.Rh(this.Fd),this.Ld==="vertical"){const e=this.Vd,i=this.zd;this.Rd.q({x:e*this.renderingScale.x.getPixelSize(),y:i*this.renderingScale.y.getPixelSize()});const s=e+Math.max(this.kd.reduce((o,h)=>Math.max(o,h.Ps().jc().x),0),this.Ed.Ps().jc().x),n=(this.Fd.length>0?this.Pd+this.Ed.Ps().jc().y:0)+i+.5*this.kd[0].Ps().jc().y+.5*this.kd[this.kd.length-1].Ps().jc().y;this.setContentSize({x:s,y:n})}else{const e=this.zd,i=this.Vd;this.Rd.q({x:e*this.renderingScale.x.getPixelSize(),y:i*this.renderingScale.y.getPixelSize()});const s=Math.max(this.Fd.length>0?this.Pd+this.Ed.Ps().jc().x:0,.5*this.kd[this.kd.length-1].Ps().jc().x),n=e+.5*this.kd[0].Ps().jc().x+s,o=i+this.Td+this.kd.reduce((h,a)=>Math.max(h,a.Ps().jc().y),0);this.setContentSize({x:n,y:o})}}else this.kd.forEach(t=>t.dispose()),this.kd.length=0,this.Ed.setVisible(!1),this.Rd.setVisible(!1),this.setContentSize({x:0,y:0});return super.Ps()}dispose(){return super.dispose(),this.Rd.dispose(),this.kd.forEach(Sn),this.Ed.dispose(),this}setMouseInteractions(t){return this.Rd.setMouseInteractions(t),this}getMouseInteractions(){return this.Rd.getMouseInteractions()}}const ly={lutElement:{},setLUT(r){return this.lutElement.Od(r),this},getLUT(){return this.lutElement.Gd()},setLUTLength(r){return this.lutElement.Wd(r),this},getLUTLength(){return this.lutElement.Ud()},setLUTThickness(r){return this.lutElement.Yd(r),this},getLUTThickness(){return this.lutElement.Hd()},setLookUpUnit(r){return this.lutElement.$d(r),this},getLookUpUnit(){return this.lutElement.Xd()},setLUTStepValueFormatter(r){return this.lutElement.jd(r),this},setLUTDisplayProportionalSteps(r){return this.lutElement.setLUTDisplayProportionalSteps(r),this},getLUTDisplayProportionalSteps(){return this.lutElement.getLUTDisplayProportionalSteps()}};({...Os,...In,background:ji,alignment:"horizontal",setAlignment(r){return{...this,alignment:r}},Zu(r,t,e,i,s,n){const o=new mo(r,t,e,this.background,i,s),h=o.addElement({Zu:()=>new ay(r,t,e,Ft,s,this.alignment)}),a=Object.assign(o,Fh,{stylableTexts:[h]},ly,{lutElement:h});return _r(a,s,n),this.applyStylers(a,s)}}).addStyler(kh);const Xd=(r,t,e)=>{const i=r.getSteps(),s=r.min,n=r.max-s;if(r.getInterpolation()===!0)return new mi({angle:t,stops:i.map((h,a)=>({offset:e?(h.value-s)/n:a/(i.length-1),color:h.color||r.color}))});const o=[];for(let h=0;h<i.length;h+=1){const a=i[h];o.push({offset:e?.9*(a.value-s)/n:h/i.length,color:a.color||r.color});const l=h<i.length-1?i[h+1]:void 0;o.push({offset:e?l?.9*(l.value-s)/n:1:l?(h+1)/i.length:1,color:a.color||r.color})}return new mi({angle:t,stops:o})},mS={...Os,...In,background:ji,buttonBuilder:oy,setButtonShape(r){return{...this,buttonBuilder:this.buttonBuilder.setButtonShape(r)}},alignment:"horizontal",setAlignment(r){return{...this,alignment:r}},Zu(r,t,e,i,s){const n=new mo(r,t,e,this.background,i,s),o=n.addElement(Ch),h=o.addElement(En);h.addGap();const a=h.addElement(this.buttonBuilder);h.addGap();const l=o.addElement(En);l.addGap();const u=l.addElement(Th);l.addGap();const c=n.addElement({Zu:()=>new ay(r,t,e,Ft,s,this.alignment)});this.alignment==="vertical"&&c.setMargin({left:s.uiButtonSize+6});const d=Object.assign(n,hl,{setTextLabel:u},Fh,{stylableTexts:[u,c]},sy("LUTText",[c]),ry,{button:a},ly,{lutElement:c},ny);let f;return d.onMouseClick(()=>{d.getLocked()||d.setOn(!d.getOn())}),d.onMouseEnter(()=>d.setHighlight(!0)),d.onMouseLeave(()=>d.setHighlight(!1)),d.setMouseStyle(It.Point),d.setTextFillStyleHidden(s.uiTextFillStyleHidden||s.uiTextFillStyle),d.onSwitch((g,y)=>{y?f&&d.setTextFillStyle(f):(f=d.getTextFillStyle(),d.setTextFillStyle(d.getTextFillStyleHidden()))}),d.setPadding({left:5}),this.applyStylers(d,s)}}.addStyler(kh).addStyler(Jg),pS={alignment:null,title:null,entryStylers:null,legendBoxDisposed:null,entries:[],add(r,t){const e=!t||typeof t!="object"||t.toggleVisibilityOnClick===void 0||t.toggleVisibilityOnClick,i=t==null?void 0:t.matchStyleExactly,s=t&&typeof t=="object"&&t.builder!==void 0?t.builder:void 0;return this.legendBoxDisposed()||(r instanceof Ds?this.addChart(r,e,s,i):"attach"in r?this.addAttachable(r,e,s,i):r&&this.addDashboard(r,e,s,i)),this},addAttachable(r,t,e,i){const s=r.Gd&&r.Gd(),n=r.Cs&&r.Cs(),o=i!==void 0&&i;let h=e;if(!h){let l=s?mS.setAlignment(this.alignment):hy;n!==void 0&&(l=l.setButtonShape(n)),h=l}const a=this.addElement(h);if(s&&"setLUT"in a){a.setLUT(s.lut);const l=s.lut.getUnits(),u=s.lookUpProperty,c=l.length>0?l:u==="x"?"x":u==="y"?"y":u==="z"?"z":"";a.setLookUpUnit(c)}return this.entryStylers.forEach(l=>l(a)),this.entries.push({entry:a,component:r}),r.attach(a,t,o),t||a.setLocked(!0),this},addChart(r,t,e,i){return r.Zd().forEach(s=>this.addAttachable(s,t,e,i)),this},addDashboard(r,t,e,i){return r.getCells().filter(s=>s.panel instanceof Ds).forEach(s=>this.addChart(s.panel,t,e,i)),this},setTitle(r){return this.title.setText(r),this},getTitle(){return this.title.getText()},setTitleFillStyle(r){return this.title.setTextFillStyle(r),this},getTitleFillStyle(){return this.title.getTextFillStyle()},setTitleFont(r){return this.title.setTextFont(r),this},getTitleFont(){return this.title.getTextFont()},setTitleRotation(r){return this.title.setTextRotation(r),this},getTitleRotation(){return this.title.getTextRotation()},setEntries(r){return this.entries.forEach(t=>r(t.entry,t.component)),this}},xS={alignment:"vertical",layoutBuilder:En,setAlignment(r){return{...this,alignment:r,layoutBuilder:r==="horizontal"?Ch:En}},getAlignment(){return this.alignment},titleBuilder:Ac,styleTitle(r){return{...this,titleBuilder:this.titleBuilder.addStyler(r)}},entryStylers:[],styleEntries(r){return{...this,entryStylers:[...this.entryStylers,r]}}},al={...Os,...In,...xS,background:ji,Zu(r,t,e,i,s,n){const o=this.layoutBuilder.setBackground(this.background).Zu(r,t,e,i,s,!1);let h=Object.assign(o,pS,{alignment:this.alignment,entryStylers:this.entryStylers,legendBoxDisposed:()=>o.$i});h.entries=[];const a=h.addElement(this.alignment==="horizontal"?En:Ch),l=a.addElement(this.titleBuilder).setText("Legend").setTextFillStyle(s.legendTitleFillStyle).setTextFont(s.legendTitleFont);return a.addGap(),h=Object.assign(h,{title:l}),this.alignment==="horizontal"&&l.setMargin({right:6}),_r(h,s,n),this.applyStylers(h,s)}}.addStyler((r,t)=>r.setPadding(5));class SS extends To{constructor(t,e,i,s,n){super(t,e,i,s,n),this.Qd=10,this.Jd=bt.Up,this.Kd=0,this.Qu="major",this.la=this.xu(t.Pr(this.renderingScale).Fr(mr).Ir(mr)),this.Le=this.xu(t.Ee(this.renderingScale))}Fu(){return[this.la]}Te(){if(super.Te(),this.$i)return this;const t=K(this.getPosition(),this.scale,this.renderingScale),e=this.renderingScale.mi(t,{x:this.Jd===bt.Right?-this.Qd:this.Jd===bt.Left?this.Qd:0,y:this.Jd===bt.Up?-this.Qd:this.Jd===bt.Down?this.Qd:0}),i=this.renderingScale.mi(e,{x:this.Jd===bt.Right?-this.Kd:this.Jd===bt.Left?this.Kd:0,y:this.Jd===bt.Up?-this.Kd:this.Jd===bt.Down?this.Kd:0});return this.Le.Ve(t).ze(e),this.la.Fe(i).Ea(this.Jd===bt.Up?{x:0,y:1}:this.Jd===bt.Down?{x:0,y:-1}:this.Jd===bt.Right?{x:1,y:0}:{x:-1,y:0}),this}Ps(){const t=this.Le.uu().getThickness();return this.size=this.Jd===bt.Left||this.Jd===bt.Right?{x:this.Qd+this.Kd+this.la.Ps().jc().x,y:t}:{y:this.Qd+this.Kd+this.la.Ps().jc().y,x:t},super.Ps()}dispose(){return super.dispose(),this.la.dispose(),this.Le.dispose(),this}setVisible(t){return super.setVisible(t),this.la.setVisible(t),this.Le.setVisible(t),this}setMouseInteractions(t){return this.la.setMouseInteractions(t),this.Le.setMouseInteractions(t),this}getMouseInteractions(){return this.la.getMouseInteractions()}getText(){return this.la.Bh()}setTextFillStyle(t){return this.la.Ce(t),this.ks.Ss(),this}getTextFillStyle(){return this.la.Eh()}setTextFont(t){return this.la.Oh(t),this}setTextRotation(t){return this.la.Nh(t),this}getTextRotation(){return this.la.Gh()}getTextFont(){return this.la.Vh()}setText(t){return this.la.Rh(t),this.ks.Ss(),this}setDirection(t){return this.Jd=t,this.ks.Ss(),this}getDirection(){return this.Jd}setPointerLength(t){return this.Qd=t,this.ks.Ss(),this}getPointerLength(){return this.Qd}setTickLabelPadding(t){return this.Kd=t,this.ks.Ss(),this}getTickLabelPadding(){return this.Kd}setTickStyle(t){return this.Le.Re(t),this.ks.Ss(),this}getTickStyle(){return this.Le.uu()}}const uy={...Os,Zu(r,t,e,i,s,n){const o=new SS(r,t,e,i,s);return _r(o,s,n),this.applyStylers(o,s)}}.addStyler(kh),AS=uy.addStyler((r,t)=>(r.Qu="major",r.setPointerLength(t.xAxisNumericTicks.majorTickStyle.tickLength).setTickLabelPadding(t.xAxisNumericTicks.majorTickStyle.tickPadding).setTickStyle(t.xAxisNumericTicks.majorTickStyle.tickStyle).setTextFont(t.xAxisNumericTicks.majorTickStyle.labelFont).setTextFillStyle(t.xAxisNumericTicks.majorTickStyle.labelFillStyle)));uy.addStyler((r,t)=>(r.Qu="minor",r.setPointerLength(t.xAxisNumericTicks.minorTickStyle.tickLength).setTickLabelPadding(t.xAxisNumericTicks.minorTickStyle.tickPadding).setTickStyle(t.xAxisNumericTicks.minorTickStyle.tickStyle).setTextFont(t.xAxisNumericTicks.minorTickStyle.labelFont).setTextFillStyle(t.xAxisNumericTicks.minorTickStyle.labelFillStyle)));hy.addStyler(r=>r.onSwitch((t,e)=>e===!0?setTimeout(()=>r.setOn(!1),300):void 0));al.setAlignment("horizontal");const vS=al.setAlignment("vertical"),wn={PointableTextBox:gS,AxisTickMajor:AS},bS={VerticalLegendBox:vS},ei=(r,t)=>{if(uc(r)){const e=t.Po(r);return{x:e.engineX,y:e.engineY}}return r},pu=r=>{let t=!1,e={type:"linear"};if(r&&(r.opposite!==void 0&&(t=r.opposite),r.type&&r.type==="linear-highPrecision"&&(e={type:"linear-highPrecision"}),r.type&&r.type==="logarithmic")){let i=10;if(r.base){if(r.base==="E"||r.base==="e"||r.base==="natural")i="e";else if(typeof r.base=="number")i=r.base;else if(typeof r.base=="string")try{i=Number(r.base)}catch{console.warn(`Unidentified logarithmic base "${r.base}"`)}}e={base:i,type:"logarithmic"}}return{opposite:t,type:e}},ch=(r,t,e,i=1)=>Rt(r+.1*i*(t-r)+.5*i*e.getPixelSize()*Math.sign(t-r),r,t),wa=(r,t,e,i=1)=>{const s=e.ct(r),n=e.ct(t);return Rt(e.ut(s+.1*i*(n-s)+.5*i*Math.sign(n-s)),r,t)},ot={qd:0,tf:1,if:2,sf:3,ef:4,hf:5,rf:6,nf:7,af:8,lf:9,uf:10,cf:11,df:12,ff:13,Af:14,gf:15,mf:16,yf:17,pf:18,Sf:19,vf:20,bf:21,xf:22,Mf:23};class MS extends wh{constructor(t,e,i,s,n,o){super(t,e,i,s,o),this._f=n}}class ka extends bn{constructor(t,e,i,s,n,o,h,a,l,u,c,d,f,g,y,p){var x,A,v;super(u,l,h,g,y,{numeric:l.getWidth({x:g.xAxisNumericTicks,y:g.yAxisNumericTicks}),datetime:l.getWidth({x:g.xAxisDateTimeTicks,y:g.yAxisDateTimeTicks}),time:l.getWidth({x:g.xAxisTimeTicks,y:g.yAxisTimeTicks})},p),this.wf=new Map,this.Cf=void 0,this.kf=0,this.Tf=[],this.Ff=[],this.Je=Fs.fitting,this.If=!0,this.Pf=8,this.Df=void 0,this.Bf=void 0,this.Lf=20,this.Rf=1,this.Ef=!0,this.zf=!0,this.Vf=!0,this.Of=!0,this.Nf=!0,this.Gf=!0,this.Wf=!0,this.Uf=!0,this.Yf=!0,this.Hf=!0,this.$f=this.wh.defaultDragMouseStyle,this.Xf=this.wh.defaultDragMouseStyle,this.jf=this.wh.defaultDragMouseStyle,this.Zf=this.wh.defaultDragMouseStyle,this.Qf=this.wh.defaultDragMouseStyle,this.D=new Xe,this.Jf=[],this.Kf=k=>{const F=this.Ff.indexOf(k);F>=0&&this.Ff.splice(F,1)},this.qf=k=>(this.Ff.indexOf(k)<0&&this.Ff.push(k),this.Kf),this.Et=(k,F)=>this.D.emit("axisAreaTouch",this,F),this.tA=Mg(this.Jf),this.onAxisInteractionAreaMouseClick=k=>this.D.on("axisAreaMouseClick",k),this.onAxisInteractionAreaMouseDoubleClick=k=>this.D.on("axisAreaDoubleClick",k),this.onAxisInteractionAreaMouseDown=k=>this.D.on("axisAreaMouseDown",k),this.onAxisInteractionAreaMouseUp=k=>this.D.on("axisAreaMouseUp",k),this.onAxisInteractionAreaMouseEnter=k=>this.D.on("axisAreaMouseEnter",k),this.onAxisInteractionAreaMouseLeave=k=>this.D.on("axisAreaMouseLeave",k),this.onAxisInteractionAreaMouseMove=k=>this.D.on("axisAreaMouseMove",k),this.onAxisInteractionAreaMouseWheel=k=>this.D.on("axisAreaMouseWheel",k),this.onAxisInteractionAreaMouseDragStart=k=>this.D.on("axisAreaMouseDragStart",k),this.onAxisInteractionAreaMouseDrag=k=>this.D.on("axisAreaMouseDrag",k),this.onAxisInteractionAreaMouseDragStop=k=>this.D.on("axisAreaMouseDragStop",k),this.onAxisInteractionAreaTouchStart=k=>this.D.on("axisAreaTouchStart",k),this.onAxisInteractionAreaTouch=k=>this.D.on("axisAreaTouch",k),this.onAxisInteractionAreaTouchStop=k=>this.D.on("axisAreaTouchEnd",k),this.offAxisInteractionAreaMouseClick=k=>this.D.off(k,"axisAreaMouseClick"),this.offAxisInteractionAreaMouseDoubleClick=k=>this.D.off(k,"axisAreaDoubleClick"),this.offAxisInteractionAreaMouseDown=k=>this.D.off(k,"axisAreaMouseDown"),this.offAxisInteractionAreaMouseUp=k=>this.D.off(k,"axisAreaMouseUp"),this.offAxisInteractionAreaMouseEnter=k=>this.D.off(k,"axisAreaMouseEnter"),this.offAxisInteractionAreaMouseLeave=k=>this.D.off(k,"axisAreaMouseLeave"),this.offAxisInteractionAreaMouseMove=k=>this.D.off(k,"axisAreaMouseMove"),this.offAxisInteractionAreaMouseWheel=k=>this.D.off(k,"axisAreaMouseWheel"),this.offAxisInteractionAreaMouseDragStart=k=>this.D.off(k,"axisAreaMouseDragStart"),this.offAxisInteractionAreaMouseDrag=k=>this.D.off(k,"axisAreaMouseDrag"),this.offAxisInteractionAreaMouseDragStop=k=>this.D.off(k,"axisAreaMouseDragStop"),this.offAxisInteractionAreaTouchStart=k=>this.D.off(k,"axisAreaTouchStart"),this.offAxisInteractionAreaTouch=k=>this.D.off(k,"axisAreaTouch"),this.offAxisInteractionAreaTouchStop=k=>this.D.off(k,"axisAreaTouchEnd"),this.zd={relative:1},this.iA=0,this.sA=0,this.eA=(k,F)=>F.getAllocatesAxisSpace()?Math.max(k,F.update().qu()):k,this.hA=k=>{const F=this.Tf.indexOf(k);F!==-1&&this.Tf.splice(F,1)},this.rA=(k,F)=>{this.D.emit("axisAreaDoubleClick",this,F),this.Of&&(this.setStopped(!1),tt(F))},this.nA=k=>{this.D.emit("axisAreaMouseEnter",this),(this.zf||this.Ef||this.Vf||this.Of)&&this.oA(k)},this.aA=k=>{this.lA(k),this.D.emit("axisAreaMouseLeave",this)},this.uA=(k,F,m)=>{var S,b;this.D.emit("axisAreaMouseDragStart",this,F,m);const M=qt((S=this.chart.cA.Yn)===null||S===void 0?void 0:S.axisXYZoomMouseButton,0),R=qt((b=this.chart.cA.Yn)===null||b===void 0?void 0:b.axisXYPanMouseButton,2),T=N(F.clientX,F.clientY);m===R&&this.zf?(this.dA(k),tt(F)):m===M&&this.Ef&&(this.fA(k,T),tt(F))},this.AA=(k,F,m,S,b)=>{var M,R;this.D.emit("axisAreaMouseDrag",this,F,m,S,b);const T=qt((M=this.chart.cA.Yn)===null||M===void 0?void 0:M.axisXYZoomMouseButton,0),z=qt((R=this.chart.cA.Yn)===null||R===void 0?void 0:R.axisXYPanMouseButton,2),P=N(F.clientX,F.clientY);m===z&&this.zf?(this.gA(k,b),tt(F)):m===T&&this.Ef&&(this.mA(k,S,P,b),tt(F))},this.yA=(k,F,m,S)=>{var b,M;this.D.emit("axisAreaMouseDragStop",this,F,m,S);const R=qt((b=this.chart.cA.Yn)===null||b===void 0?void 0:b.axisXYZoomMouseButton,0),T=qt((M=this.chart.cA.Yn)===null||M===void 0?void 0:M.axisXYPanMouseButton,2),z=N(F.clientX,F.clientY);m===T&&this.zf?(this.pA(k),tt(F)):m===R&&this.Ef&&(this.SA(k,S,z),tt(F)),k.getIsUnderMouse()&&(this.zf||this.Ef||this.Vf||this.Of)&&this.oA(k)},this.vA=(k,F)=>{if(this.D.emit("axisAreaMouseWheel",this,F),this.Vf){this.setStopped(!0);const m=this.wh.getWidth(this.bA.us.Pe(F.clientX,F.clientY)),S=this.dt.ut(m);this.zoom(S,Wr(F)),tt(F)}},this.xA=(k,F)=>this.D.emit("axisAreaMouseClick",this,F),this.MA=(k,F)=>this.D.emit("axisAreaMouseDown",this,F),this._A=(k,F)=>this.D.emit("axisAreaMouseUp",this,F),this.wA=(k,F)=>this.D.emit("axisAreaMouseMove",this,F),this.CA=(k,F,m)=>{this.D.emit("axisAreaTouchStart",this,m),this.Ef&&(this.oA(k),this.fA(k,F),tt(m))},this.kA=(k,F,m,S,b)=>{this.D.emit("axisAreaTouch",this,b),this.Ef&&(this.mA(k,F,m,S),tt(b))},this.TA=(k,F,m,S)=>{this.D.emit("axisAreaTouchEnd",this,S),this.Ef&&(this.SA(k,F,m),this.lA(k),tt(S))},this.FA=(k,F,m,S)=>{(this.zf||this.Vf)&&(this.oA(k),this.dA(k),tt(S))},this.IA=(k,F,m,S,b,M)=>{if(this.zf){const R=N((S.x+b.x)/2,(S.y+b.y)/2);this.gA(k,R),tt(M)}if(this.Vf){const R=this.bA.us.Pe(F.x,F.y),T=this.bA.us.Pe(m.x,m.y),z=Math.abs(this.wh.getWidth(Ut(R,S))-this.wh.getWidth(Ut(T,b)))-Math.abs(this.wh.getWidth(R)-this.wh.getWidth(T)),P=this.dt.mi(this.Ih,-z),_=this.dt.mi(this.Ph,z);this.Qh(P,_,!0),tt(M)}},this.PA=(k,F,m,S)=>{(this.zf||this.Vf)&&(this.pA(k),this.lA(k),tt(S))},this.DA=(k,F)=>{(this.Nf||this.Gf)&&this.BA(k)},this.LA=(k,F)=>{this.RA(k)},this.EA=(k,F,m)=>{const S=N(F.clientX,F.clientY);this.Nf&&this.zA(k,S)},this.VA=(k,F,m,S,b)=>{const M=N(F.clientX,F.clientY);this.Nf&&this.OA(k,M,S,b)},this.NA=(k,F,m,S,b)=>{const M=N(F.clientX,F.clientY);this.Nf&&this.GA(k,M,S,b)},this.WA=(k,F,m,S)=>{const b=N(F.clientX,F.clientY);(this.Nf||this.Gf)&&this.UA(k,b,S),(this.Nf||this.Gf)&&this.BA(k)},this.YA=(k,F)=>{this.Gf&&(this.setStopped(!0),this.zoom(this.Ih,Wr(F)),tt(F))},this.HA=(k,F)=>{this.Gf&&(this.setStopped(!0),this.zoom(this.Ph,Wr(F)),tt(F))},this.$A=(k,F,m)=>{this.Nf&&(this.BA(k),this.zA(k,F),tt(m))},this.XA=(k,F,m,S,b)=>{this.Nf&&(this.OA(k,F,m,S),tt(b))},this.jA=(k,F,m,S,b)=>{this.Nf&&(this.GA(k,F,m,S),tt(b))},this.ZA=(k,F,m,S)=>{this.Nf&&(this.UA(k,F,m),this.RA(k),tt(S))},this.QA=t,this.bA=e,this.JA=s,this.KA=n,this.chart=u,this.qA=d,this.tg=i,this.ss=o,p.type==="logarithmic"&&this.chart.us.Nn(ot.Sf),f(this,this.qf),h.ig=this,this.sg=c,this.eg=this.sg>50?1:-1,this.hg=(v=this.wh.toPoint(0,-this.eg),Math.abs(v.x)>=Math.abs(v.y)?v.x>=0?bt.Right:bt.Left:v.y>=0?bt.Up:bt.Down),this.rg=a,this.ng=this.dt instanceof Hi?new Gt().Ri(this.wh.toVec2(this.dt,this.rg)):new Ue().Ri(this.wh.toVec2(this.dt,this.rg)),this.og=this.chart.pixelScale,this.ag=new Gt().Ri(this.wh.toVec2(this.wh.getWidth(this.og),this.rg)),this.lg=this.bA.Ee(this.ng).setMouseInteractions(!1),this.ug=this.bA.Ee(this.ng).setMouseInteractions(!1),this.cg=this.bA.Ee(this.ng).setMouseInteractions(!1),this.dg=this.tg.ke(this.og).Ce(l.getWidth({x:g.xAxisOverlayStyle,y:g.yAxisOverlayStyle})).we(it).Xo(g.highlightColorOffsetAxisOverlay||g.highlightColorOffset),this.Ag=this.tg.ke(this.og).Ce(l.getWidth({x:g.xAxisZoomingBandFillStyle,y:g.yAxisZoomingBandFillStyle})).we(l.getWidth({x:g.xAxisZoomingBandStrokeStyle,y:g.yAxisZoomingBandStrokeStyle})),this.gg=this.tg.ke(this.og).Ce(l.getWidth({x:g.xAxisOverlayStyle,y:g.yAxisOverlayStyle})).we(it).Xo(g.highlightColorOffsetAxisOverlay||g.highlightColorOffset),this.mg=this.tg.ke(this.og).Ce(l.getWidth({x:g.xAxisOverlayStyle,y:g.yAxisOverlayStyle})).we(it).Xo(g.highlightColorOffsetAxisOverlay||g.highlightColorOffset),this.Lh=this.tg.Pr(this.ng).setMouseInteractions(!1).Nh(this.wh.getTitleTextRotation(this.eg)).Ir(mr).Fr(mr),this.chart.us.ls.os(this.dg,k=>this.dg.cs(k),{animationEnabled:this.th}),this.chart.us.ls.os(this.gg,k=>this.gg.cs(k),{animationEnabled:this.th}),this.chart.us.ls.os(this.mg,k=>this.mg.cs(k),{animationEnabled:this.th});const w=Ci(new ds(this.CA,this.kA,this.TA,1),new cc(this.FA,this.IA,this.PA),new Lg(this.rA)),E=Ci(new ds(this.$A,this.XA,this.ZA)),C=Ci(new ds(this.$A,this.jA,this.ZA));this.dg.setMouseEnterEventHandler(this.nA).setMouseLeaveEventHandler(this.aA).setMouseDragStartEventHandler(this.uA).setMouseDragEventHandler(this.AA).setMouseDragStopEventHandler(this.yA).setMouseWheelEventHandler(this.vA).setMouseDoubleClickEventHandler(this.rA).setMouseClickEventHandler(this.xA).setMouseDownEventHandler(this.MA).setMouseUpEventHandler(this._A).setMouseMoveEventHandler(this.wA).setTouchStartEventHandler(w.onTouchStart).setTouchMoveEventHandler(w.onTouchMove).setTouchEndEventHandler(w.onTouchEnd),this.gg.setMouseEnterEventHandler(this.DA).setMouseLeaveEventHandler(this.LA).setMouseDragStartEventHandler(this.EA).setMouseDragEventHandler(this.VA).setMouseDragStopEventHandler(this.WA).setMouseWheelEventHandler(this.YA).setTouchStartEventHandler(E.onTouchStart).setTouchMoveEventHandler(E.onTouchMove).setTouchEndEventHandler(E.onTouchEnd),this.mg.setMouseEnterEventHandler(this.DA).setMouseLeaveEventHandler(this.LA).setMouseDragStartEventHandler(this.EA).setMouseDragEventHandler(this.NA).setMouseDragStopEventHandler(this.WA).setMouseWheelEventHandler(this.HA).setTouchStartEventHandler(C.onTouchStart).setTouchMoveEventHandler(C.onTouchMove).setTouchEndEventHandler(C.onTouchEnd),this.lg.Re(l.getWidth({x:g.xAxisStrokeStyle,y:g.yAxisStrokeStyle})),this.ug.Re(l.getWidth({x:g.xAxisNibStyle,y:g.yAxisNibStyle})),this.cg.Re(l.getWidth({x:g.xAxisNibStyle,y:g.yAxisNibStyle})),this.Lh.Ce(l.getWidth({x:g.xAxisTitleFillStyle,y:g.yAxisTitleFillStyle})).Oh(l.getWidth({x:g.xAxisTitleFont,y:g.yAxisTitleFont})),this.es=o.hs(this,{}),this.Wh=this.es.yg([this.Lh]).ps(g.effectsText),this.pg=(x=l.getWidth({x:g.xAxisMarginAfterTicks,y:g.yAxisMarginAfterTicks}))!==null&&x!==void 0?x:7,this.Sg=(A=l.getWidth({x:g.xAxisMarginAfterTitle,y:g.yAxisMarginAfterTitle}))!==null&&A!==void 0?A:7}kr(){return this.eh}Tr(){return this.Zh!==void 0}setTickStrategy(t,e){return super.Fh(t,e)}getTickStrategy(){return this.je}addBand(t=!0){const e=t?this.KA:this.JA,i=new px(e,this.chart,this.tA,this,this.ng,this.wh,this.qi,this.ss);return this.Jf.push(i),i}addConstantLine(t=!0){const e=t?this.KA:this.JA,i=new xx(e,this.chart,this.tA,this,this.ng,this.wh,this.qi,this.ss);return this.Jf.push(i),i}vg(t){this.Jf.forEach(t)}bg(t){return this.Jf.map(t)}getHighlighters(){return this.Jf}setThickness(t){return typeof t=="number"?(this.xg=t,this.Mg=t):typeof t=="object"&&(this.xg=t.min,this.Mg=t.max),this.chart.us.Ss(),this}getThickness(){return{min:this.xg,max:this.Mg}}setMouseInteractions(t){return this.setAxisInteractionPanByDragging(t).setAxisInteractionReleaseByDoubleClicking(t).setAxisInteractionZoomByDragging(t).setAxisInteractionZoomByWheeling(t).setNibInteractionScaleByDragging(t).setNibInteractionScaleByWheeling(t)}_g(){return this.Ff}ur(t,e){return new MS(e,t,this.bA,this.ng,this.ng)}Uh(){if(this.wf){for(const t of this.wf)t[1].grid.dispose(),t[1].tick.dispose();this.wf.clear()}super.Uh()}cr(t,e){const{tickStart:i}=e,s=t.Sh.lr,n=i+s.getTickLength()*this.eg+s.getTickPadding()*this.eg;t.Ue.Fe(this.wh.toPoint(t.u,n)).Ea(this.wh.toPoint(s.getLabelAlignment(),-this.eg)).Nh(s.labelRotation).setVisible(this.getVisible())}wg(t,e){const{startPosition:i,gridStrokeLen:s,gridStrokeStart:n,tickStart:o}=e,h=t.Sh.lr,a=i-s*h.getGridStrokeLength(),l=o+h.getTickLength()*this.eg;return{gridStroke:{start:this.wh.toPoint(t.u,n),end:this.wh.toPoint(t.u,a)},tickStroke:{start:this.wh.toPoint(t.u,o),end:this.wh.toPoint(t.u,l)}}}_r(t,e){return this.kh.type==="linear"?ch(t,e,this.dt):wa(t,e,this.dt)}Cg(t,e){return e instanceof Hi?ch:wa}Cr(t,e,i){if(this.kh.type!=="logarithmic"){const n=this.dt.Li(e-t);return{min:t-i*n,max:e+i*n}}const s=this.dt;return{min:s.mi(t,-i),max:s.mi(e,i)}}Ps(){if(!this.Xi)return{kg:0,Tg:0,Vd:0};const t=!(this.Ze.size>0),e=this.Lh&&this.Lh.Bh().length>0&&this.getTitleFillStyle()!==ft,i=this.wh.getHeight(e?this.chart.us.Ig.Fg(this.getTitle(),this.getTitleFont(),this.getTitleRotation()):{x:0,y:0})+(e?this.Sg:0),s=this.Xe===xn?new Map:Yg(this.Xe,Math.min(this.Ih,this.Ph),Math.max(this.Ih,this.Ph),this.Ih,this.Ph,0),n=this.dt;let o=0;s.forEach((l,u)=>{if((c=>c.lr!==void 0&&c.nr!==void 0)(u)){const c=Math.max(...l.map(d=>{if(!lr(d,this.Ih,this.Ph))return 0;const f=this.chart.us.Ig.Fg(u.nr(d,n),u.lr.labelFont,u.lr.labelRotation);return t||!f.isEstimate?this.wh.getHeight(f):0}))+u.lr.tickLength+u.lr.tickPadding+u.lr.labelPadding;o=Math.max(o,c)}});const h=this.Tf.reduce(this.eA,0);o=Math.max(o,h),o+=this.pg;const a=Rt(i+o,this.xg!==void 0?this.xg:0,this.Mg!==void 0?this.Mg:st);return this.kf=a,{kg:o,Tg:i,Vd:a}}Te(t){const e=this.getVisible()&&t.Pg>0;this.Dg=t;const i=this.lg.uu(),s=this.dt.getInnerStart()<this.dt.getInnerEnd()?this.dt.getInnerStart():this.dt.getInnerEnd(),n=this.dt.getInnerEnd()>this.dt.getInnerStart()?this.dt.getInnerEnd():this.dt.getInnerStart(),o=i.getThickness()*this.eg/2,h=this.rg.getInnerInterval(),a=this.sg/100*h,l=a+t.Bg,u=h*this.eg,c=l+o;if(e||this.Uh(),this.Xe!==xn&&e){const E=this.dt.ri();this.qh({physicalAxisSize:E,startPosition:a,gridStrokeLen:u,gridStrokeStart:l,tickStart:c});for(const[C,k]of this.Ze){let F=this.wf.get(C);if(!F){if(C.Oe)F={grid:this.QA[0].Lg(this.ng).setMouseInteractions(!1),tick:this.QA[0].Lg(this.ng).setMouseInteractions(!1)};else if("Rg"in C){const m=Array.from(this.Ze.keys()).filter(b=>"Rg"in b).reverse().indexOf(C),S=this.QA[m];if(!S)throw new Error("Not enough tick layers. This is an internal LCJS error - if you see this, please contact Arction support.");F={grid:S.Lg(this.ng).setMouseInteractions(!1),tick:S.Lg(this.ng).setMouseInteractions(!1)}}}if(F){F.grid.Nt(),F.tick.Nt();for(const[m,S]of k){const b=this.wg(S,{physicalAxisSize:E,startPosition:a,gridStrokeLen:u,gridStrokeStart:l,tickStart:c});F.grid.zr().Eg(b.gridStroke.start,b.gridStroke.end),F.tick.zr().Eg(b.tickStroke.start,b.tickStroke.end)}F.grid.Re(C.lr.getGridStrokeStyle()),F.tick.Re(C.lr.getTickStyle()),this.wf.set(C,F)}}}const d=c,f=d+this.eg*t.zg,g=this.Nf||this.Gf?Math.min(this.Lf,.25*t.Pg):0,y={start:this.wh.toVec2(this.dt.mi(this.dt.getInnerStart(),g),d),end:this.wh.toVec2(this.dt.mi(this.dt.getInnerEnd(),-g),f)},p=K(this.wh.toVec2(this.dt.getInnerStart(),f),this.ng,this.og),x=K(y.start,this.ng,this.og),A=K(y.end,this.ng,this.og),v=K(this.wh.toVec2(this.dt.getInnerEnd(),d),this.ng,this.og);this.lg.Ve(this.wh.toPoint(s,l)).ze(this.wh.toPoint(n,l)).setVisible(e),this.ug.Ve(this.wh.toPoint(this.dt.mi(this.dt.getInnerStart(),this.Pf),l)).ze(this.wh.toPoint(this.dt.getInnerStart(),l)).setVisible(e),this.cg.Ve(this.wh.toPoint(this.dt.mi(this.dt.getInnerEnd(),-this.Pf),l)).ze(this.wh.toPoint(this.dt.getInnerEnd(),l)).setVisible(e);const w=l+t.kg*this.eg;if(this.Lh.Fe(this.wh.toPoint(this.wh.getWidth(K(St(gt(p,v),.5),this.og,this.ng)),w)).Ea(this.wh.toPoint(0,-1*this.eg)).setVisible(e),this.Cf){const E=this.sg/100*h+t.Bg,C=-this.eg*h-t.Bg,k={start:this.wh.toVec2(this.Cf.min,c+this.eg*this.kf),end:this.wh.toVec2(this.Cf.max,E+C)},F=K(k.start,this.ng,this.og),m=K(k.end,this.ng,this.og);this.Ag.Fe(F).q(Ut(m,F)).setVisible(!0)}else this.Ag.setVisible(!1);this.dg.Fe(x).q(Ut(A,x)).setVisible(e),this.gg.Fe(p).q(Ut(x,p)).setVisible(e),this.mg.Fe(A).q(Ut(v,A)).setVisible(e);for(const E of this.Tf)E.update().plot(e,l,u,t.Bg,c);for(const E of this.Jf)E.Te()}setLength(t){return this.zd=t,this.chart.us.Ss(),this}getLength(){return this.zd}setMargins(t,e){return this.iA=t,this.sA=e,this.chart.us.Ss(),this}getMargins(){return{start:this.iA,end:this.sA}}getStackIndex(){var t,e;return(e=(t=[...this.chart.Vg,...this.chart.Og,...this.chart.Ng,...this.chart.Gg].find(i=>i.axis===this))===null||t===void 0?void 0:t.iStack)!==null&&e!==void 0?e:0}getParallelIndex(){var t,e;return(e=(t=[...this.chart.Vg,...this.chart.Og,...this.chart.Ng,...this.chart.Gg].find(i=>i.axis===this))===null||t===void 0?void 0:t.iParallel)!==null&&e!==void 0?e:0}Wg(){const t=this.Dg;if(!t)return;const e=this.getVisible()&&t.Pg>0,i=this.lg.uu().getThickness()*this.eg/2,s=this.rg.getInnerInterval(),n=this.sg/100*s+t.Bg,o=s*this.eg,h=n+i;for(const a of this.Tf)a.update().plot(e,n,o,t.Bg,h);for(const a of this.Jf)a.Te()}Ug(){return this.kf}Yg(t,e){e=e||wn.AxisTickMajor;const i=new Kx(this,t?this.QA[0]:this.tg,this.tg,this.dt,this.ag,this.ag,this.wh,this.hg,this.hA,this.qi,e).setTextFormatter(this.formatValue);return this.Tf.push(i),i}oA(t){this.chart.us.ls.Ms(t,1),this.Df=t.us.Wr(this.$f,this.Df)}lA(t){this.chart.us.ls.Ms(t,0),t.us.Ur(this.Df)}dA(t){this.setStopped(!0),t.us.Ur(this.Df)}gA(t,e){const i=-this.wh.getWidth(e);this.pan(i),this.Df=t.us.Wr(this.Xf,this.Df)}pan(t){const e=this.Ih,i=this.Ph,s=this.dt.mi(e,t),n=this.dt.mi(i,t);this.Qh(s,n,!1)}zoom(t,e){const i=this.dt.ct(this.Ih),s=this.dt.ct(this.Ph),n=this.dt.ct(t),o=Rt((n-i)/(s-i),0,1),h=.2*this.dt.ri(),a=o*this.Rf*h*-e,l=(1-o)*this.Rf*h*e,u=this.dt.mi(this.Ih,a),c=this.dt.mi(this.Ph,l);this.Qh(u,c,!0)}pA(t){this.Cf=void 0,t.us.Ur(this.Df)}fA(t,e){this.setStopped(!0),t.us.Ur(this.Df),this.chart.us.ls.Ms(this.dg,0)}mA(t,e,i,s){const n=K(this.bA.us.Pe(i.x,i.y),this.bA.us.dt,this.ng),o=Rt(this.wh.getWidth(n),this.Ih,this.Ph),h=this.wh.getWidth(K(this.bA.us.Pe(e.x,e.y),this.bA.us.dt,this.ng));Math.abs(this.dt.ct(o)-this.dt.ct(h))>10?(this.Cf=wt(Math.min(o,h),Math.max(o,h)),this.Df=t.us.Wr(this.jf,this.Df)):(this.Cf=void 0,this.Df=t.us.Wr(this.$f,this.Df)),this.bA.Ss()}SA(t,e,i){if(this.Cf){const s=this.Cf.min,n=this.Cf.max,o=this.Ph<this.Ih;this.St(o?n:s,o?s:n,!0,!0,"interactionSetInterval")}this.Cf=void 0,t.us.Ur(this.Df)}BA(t){this.chart.us.ls.Ms(t,1),this.Bf=t.us.Wr(this.Zf,this.Bf)}RA(t){this.chart.us.ls.Ms(t,0),t.us.Ur(this.Bf)}zA(t,e){this.setStopped(!0),this.Bf=t.us.Wr(this.Qf,this.Bf)}OA(t,e,i,s){const n=this.wh.getWidth(s);this.Qh(this.dt.mi(this.Ih,n),this.Ph,!0)}GA(t,e,i,s){const n=this.wh.getWidth(s);this.Qh(this.Ih,this.dt.mi(this.Ph,n),!0)}UA(t,e,i){t.us.Ur(this.Bf),t.getIsUnderMouse()&&(this.Bf=t.us.Wr(this.Zf)),this.bA.Ss()}addCustomTick(t){return this.Yg(!0,t)}getUiPosition(){return this.sg}setStrokeStyle(t){return this.lg.Re(t),this.bA.Ss(),this}getStrokeStyle(){return this.lg.uu()}getOverlayStyle(){return this.dg.Eh()}setOverlayStyle(t){return this.dg.Ce(t),this.bA.Ss(),this}setAxisInteractionZoomByDragging(t){return this.Ef=t,this}getAxisInteractionZoomByDragging(){return this.Ef}setAxisInteractionPanByDragging(t){return this.zf=t,this}getAxisInteractionPanByDragging(){return this.zf}setAxisInteractionZoomByWheeling(t){return this.Vf=t,this}getAxisInteractionZoomByWheeling(){return this.Vf}setAxisInteractionReleaseByDoubleClicking(t){return this.Of=t,this}getAxisInteractionReleaseByDoubleClicking(){return this.Of}setAxisMouseHoverStyle(t=this.wh.defaultDragMouseStyle){return this.$f=t,this}getAxisMouseHoverStyle(){return this.$f}setAxisMousePanStyle(t=this.wh.defaultDragMouseStyle){return this.Xf=t,this}getAxisMousePanStyle(){return this.Xf}setAxisMouseZoomStyle(t=this.wh.defaultDragMouseStyle){return this.jf=t,this}getAxisMouseZoomStyle(){return this.jf}setAnimationHighlight(t){return this.chart.us.ls._s(this.dg,t),this.chart.us.ls._s(this.gg,t),this.chart.us.ls._s(this.mg,t),this}getAnimationHighlight(){return this.chart.us.ls.ws(this.dg)}getTitleMargin(){return this.getMarginAfterTicks()}setTitleMargin(t){return this.setMarginAfterTicks(t)}getMarginAfterTicks(){return this.pg}setMarginAfterTicks(t){return this.pg=t,this.bA.Ss(),this}getMarginAfterTitle(){return this.Sg}setMarginAfterTitle(t){return this.Sg=t,this.bA.Ss(),this}getNibLength(){return this.Pf}setNibLength(t){return this.Pf=t,this.bA.Ss(),this}getNibStyle(){return this.ug.uu()}setNibStyle(t){return this.ug.Re(t),this.cg.Re(t),this.bA.Ss(),this}getNibOverlayStyle(){return this.gg.Eh()}setNibOverlayStyle(t){return this.gg.Ce(t),this.mg.Ce(t),this.bA.Ss(),this}setNibMousePickingAreaSize(t){return this.Lf=t,this.bA.Ss(),this}getNibMousePickingAreaSize(){return this.Lf}setNibInteractionScaleByDragging(t){return this.Nf=t,this}getNibInteractionScaleByDragging(){return this.Nf}setNibInteractionScaleByWheeling(t){return this.Gf=t,this}getNibInteractionScaleByWheeling(){return this.Gf}setNibMouseHoverStyle(t=this.wh.defaultDragMouseStyle){return this.Zf=t,this}getNibMouseHoverStyle(){return this.Zf}setNibMouseScaleStyle(t=this.wh.defaultDragMouseStyle){return this.Qf=t,this}getNibMouseScaleStyle(){return this.Qf}setChartInteractions(t){return this.setChartInteractionFitByDrag(t),this.setChartInteractionPanByDrag(t),this.setChartInteractionZoomByDrag(t),this.setChartInteractionZoomByWheel(t),this}setChartInteractionPanByDrag(t){return this.Wf=t,this}getChartInteractionPanByDrag(){return this.Wf}setChartInteractionZoomByWheel(t){return this.Uf=t,this}getChartInteractionZoomByWheel(){return this.Uf}setChartInteractionZoomByDrag(t){return this.Yf=t,this}getChartInteractionZoomByDrag(){return this.Yf}setChartInteractionFitByDrag(t){return this.Hf=t,this}getChartInteractionFitByDrag(){return this.Hf}j(){return this.dt.j(),this}Z(){return this.dt.Z(),this}dispose(){this.ug.dispose(),this.cg.dispose(),this.lg.dispose(),this.dg.dispose(),this.Ag.dispose(),this.gg.dispose(),this.mg.dispose(),this.Lh.dispose(),this.Kh(Sn);for(const t of this.wf.values())t.grid.dispose(),t.tick.dispose();return this.Ff.slice().forEach(Sn),this.Jf.slice().forEach(Sn),this.qA(this),this.D.emit("dispose",this),this}onDispose(t){return this.D.on("dispose",t)}offDispose(t){return this.D.off(t,"dispose")}setVisible(t){this.ug.setVisible(t),this.cg.setVisible(t),this.lg.setVisible(t),this.Lh.setVisible(t),this.dg.setVisible(t),this.gg.setVisible(t),this.mg.setVisible(t),this.Kh(e=>{e.ys(t)});for(const e of this.wf.values())e.grid.setVisible(t),e.tick.setVisible(t);return super.setVisible(t),this.chart.us.Ss(),this}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationHighlight(this.th),this}}const Ta={getWidth:r=>r.x,getHeight:r=>r.y,toVec2:(r,t)=>({x:r,y:t}),toPoint:(r,t)=>N(r,t)},vc={getWidth:r=>r.y,getHeight:r=>r.x,toVec2:(r,t)=>({x:t,y:r}),toPoint:(r,t)=>N(t,r)},Qn=r=>!!(r&&typeof r=="object"&&"x"in r&&r.x instanceof ka&&"y"in r&&r.y instanceof ka),RS=Ot({type:"tick-style",gridStrokeLength:1,gridStrokeStyle:new Tt,tickLength:7,tickStyle:new Tt,tickPadding:0,labelFont:new Ka,labelFillStyle:new H,labelPadding:0,labelAlignment:0,labelRotation:0});class zs extends RS{constructor(t){super(t)}setGridStrokeLength(t){return this.set("gridStrokeLength",t)}getGridStrokeLength(){return this.get("gridStrokeLength")}setGridStrokeStyle(t){return this.set("gridStrokeStyle",typeof t=="function"?t(this.get("gridStrokeStyle")):t)}getGridStrokeStyle(){return this.get("gridStrokeStyle")}setTickLength(t){return this.set("tickLength",t)}getTickLength(){return this.get("tickLength")}setTickStyle(t){return this.set("tickStyle",typeof t=="function"?t(this.get("tickStyle")):t)}getTickStyle(){return this.get("tickStyle")}setTickPadding(t){return this.set("tickPadding",t)}getTickPadding(){return this.get("tickPadding")}setLabelFillStyle(t){return this.set("labelFillStyle",typeof t=="function"?t(this.get("labelFillStyle")):t)}getLabelFillStyle(){return this.get("labelFillStyle")}setLabelFont(t){return this.set("labelFont",typeof t=="function"?t(this.get("labelFont")):t)}getLabelFont(){return this.get("labelFont")}setLabelPadding(t){return this.set("labelPadding",t)}getLabelPadding(){return this.get("labelPadding")}setLabelAlignment(t){return this.set("labelAlignment",t)}getLabelAlignment(){return this.get("labelAlignment")}setLabelRotation(t){return this.set("labelRotation",t)}getLabelRotation(){return this.get("labelRotation")}}const cy=r=>!(!r||typeof r!="object"||!("type"in r)||r.type!=="tick-style"),dy=new zs({labelFillStyle:ft,gridStrokeStyle:it,tickStyle:it}),Ca=r=>cy(r)&&cg(r.labelFillStyle)&&Ad(r.gridStrokeStyle)&&Ad(r.tickStyle),ll=(r,t,e,i,s)=>(n,o)=>h=>{const a=new Date(h+n),l={year:o?a.getUTCFullYear():a.getFullYear(),monthIndex:o?a.getUTCMonth():a.getMonth(),day:o?a.getUTCDate():a.getDate(),hours:o?a.getUTCHours():a.getHours(),minutes:o?a.getUTCMinutes():a.getMinutes(),seconds:o?a.getUTCSeconds():a.getSeconds(),millis:o?a.getUTCMilliseconds():a.getMilliseconds()},u=i?i(l):void 0;if(r===0&&u===!0)return h;const c=l[t];s.includes("year")&&(l.year=Math.floor(l.year/e)*e),s.includes("monthIndex")&&(l.monthIndex=0),s.includes("day")&&(l.day=1),s.includes("hours")&&(l.hours=0),s.includes("minutes")&&(l.minutes=0),s.includes("seconds")&&(l.seconds=0),s.includes("millis")&&(l.millis=0);let d=(r===0?1:r)*e;return r===-1&&u===!1&&(d=0),d!==0&&(l[t]=e*(d>0?Math.floor((c+d)/e):Math.ceil((c+d)/e))),o?Date.UTC(l.year,l.monthIndex,l.day,l.hours,l.minutes,l.seconds,l.millis)-n:new Date(l.year,l.monthIndex,l.day,l.hours,l.minutes,l.seconds,l.millis).getTime()-n},Zh=(r,t,e,...i)=>ll(-1,r,t,e,i),Bo=(r,t,e,...i)=>ll(-1,r,t,e,i),Uo=(r,t,e,...i)=>ll(0,r,t,e,i),Go=(r,t,...e)=>ll(1,r,t,void 0,e),Bl=r=>(t,e)=>i=>{const s=new Date(i+t),n=e?s.getUTCDay():s.getDay(),o=n===1&&(e?s.getUTCHours():s.getHours())===0&&(e?s.getUTCMinutes():s.getMinutes())===0&&s.getSeconds()===0&&s.getMilliseconds()===0;if(r===0&&o===!0)return i;let h=e?s.getUTCDate():s.getDate();return r===-1&&n===1&&o===!1||(r===-1?h-=n>=2?n-1:n+6:h+=n>0?8-n:1),e?Date.UTC(s.getUTCFullYear(),s.getUTCMonth(),h,0,0,0,0)-t:new Date(s.getFullYear(),s.getMonth(),h,0,0,0,0).getTime()-t},ss=[{label:"MilliSecond100",unit:100,irregular:!1,greatTicks:void 0,majorTicks:{fitFunction:_t({ignore:"first"},2,5)},minorTicks:{amount:4,fitFunction:_t(void 0,2)}},{label:"Second",unit:1e3,irregular:!1,greatTicks:{getReferenceKeyValue:Zh("seconds",1,r=>r.millis===0,"millis")},majorTicks:{fitFunction:Ll(5,10,15,30)},minorTicks:{amount:4,fitFunction:_t(void 0,2)}},{label:"Minute",unit:6e4,irregular:!1,greatTicks:{getReferenceKeyValue:Zh("minutes",1,r=>r.seconds===0&&r.millis===0,"seconds","millis")},majorTicks:{fitFunction:Ll(5,10,15,30)},minorTicks:{amount:12,fitFunction:_t(void 0,3,6)}},{label:"Hour",unit:36e5,irregular:!1,greatTicks:{getReferenceKeyValue:Zh("hours",1,r=>r.minutes===0&&r.seconds===0&&r.millis===0,"minutes","seconds","millis")},majorTicks:{fitFunction:Ll(3,6,12)},minorTicks:{amount:8,fitFunction:_t(void 0,2,4)}},{label:"Day",unit:864e5,irregular:!1,greatTicks:{getReferenceKeyValue:Zh("day",1,r=>r.hours===0&&r.minutes===0&&r.seconds===0&&r.millis===0,"hours","minutes","seconds","millis")},majorTicks:{fitFunction:_t({ignore:"last"},2,4)},minorTicks:{amount:7,fitFunction:_t({ignore:"last"},2,3)}},{label:"Week",unit:6048e5,irregular:!0,getPrevKeyValue:Bl(-1),getNextKeyValueIncludingRef:Bl(0),getNextKeyValue:Bl(1),greatTicks:!0,majorTicks:{fitFunction:_t(void 0,2)},minorTicks:{fitFunction:void 0}},{label:"Month",unit:2592e6,irregular:!0,getPrevKeyValue:Bo("monthIndex",1,r=>r.day===1&&r.hours===0&&r.minutes===0&&r.seconds===0&&r.millis===0,"day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:Uo("monthIndex",1,r=>r.day===1&&r.hours===0&&r.minutes===0&&r.seconds===0&&r.millis===0,"day","hours","minutes","seconds","millis"),getNextKeyValue:Go("monthIndex",1,"day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:_t(void 0,2,3)},minorTicks:{fitFunction:_t(void 0,2,4,6)}},{label:"Year",unit:31536e6,irregular:!0,getPrevKeyValue:Bo("year",1,r=>r.day===1&&r.hours===0&&r.minutes===0&&r.seconds===0&&r.millis===0,"monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:Uo("year",1,r=>r.day===1&&r.hours===0&&r.minutes===0&&r.seconds===0&&r.millis===0,"monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:Go("year",1,"monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:_t({ignore:"first"},2,5)},minorTicks:{fitFunction:_t(void 0,2,5)}},{label:"Decade",unit:31536e7,irregular:!0,getPrevKeyValue:Bo("year",10,r=>r.year%10==0&&r.day===1&&r.hours===0&&r.minutes===0&&r.seconds===0&&r.millis===0,"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:Uo("year",10,r=>r.year%10==0&&r.day===1&&r.hours===0&&r.minutes===0&&r.seconds===0&&r.millis===0,"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:Go("year",10,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:_t(void 0,2,4)},minorTicks:{fitFunction:_t(void 0,2,5)}},{label:"Century",unit:316224e7,irregular:!0,getPrevKeyValue:Bo("year",100,r=>r.year%100==0&&r.day===1&&r.hours===0&&r.minutes===0&&r.seconds===0&&r.millis===0,"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:Uo("year",100,r=>r.year%100==0&&r.day===1&&r.hours===0&&r.minutes===0&&r.seconds===0&&r.millis===0,"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:Go("year",100,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:void 0},minorTicks:void 0},{label:"Millennium",unit:316224e8,irregular:!0,getPrevKeyValue:Bo("year",1e3,r=>r.year%1e3==0&&r.day===1&&r.hours===0&&r.minutes===0&&r.seconds===0&&r.millis===0,"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:Uo("year",1e3,r=>r.year%1e3==0&&r.day===1&&r.hours===0&&r.minutes===0&&r.seconds===0&&r.millis===0,"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:Go("year",1e3,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:void 0},minorTicks:void 0}],dh=(r,t,e)=>{let i=((o,h,a,l,u)=>{const c=h-o;let d;for(let f=0;f<ss.length;f+=1)if(c/ss[f].unit<=1){d=ss[f];break}return d})(t,e);if(i!==void 0&&ss.indexOf(i)===0&&(i=ss[1]),i===void 0)return;if(r==="great")return i;const s=r==="major"?1:2,n=ss[ss.indexOf(i)-s];return n===void 0?ss[0]:n},$d=(r,t,e)=>(i,s,n,o)=>{const h=dh("great",i,s);if(h===void 0)return[];if(h.label==="Decade"||h.label==="Century"||h.label==="Millennium")return[];const a=o>n?i:s,l=(i+s)/2,u=o>n?s:i;if(ss.indexOf(h)<=ss.findIndex(f=>f.label==="Hour"))return e==="left"?[a]:[];let c;if(h.irregular===!0)c=Og(i,s,h.getPrevKeyValue(r,t),h.getNextKeyValue(r,t));else{const f=h.greatTicks.getReferenceKeyValue(r,t)(i);c=Ni(i,s,h.unit,f,1)}const d=((f,g,y)=>{for(const p of y)if(p>=f&&p<=g)return p})(i,s,c);return e==="left"?d===void 0||lr(d,l,u)?[a]:[d]:d!==void 0&&lr(d,l,u)?[d]:[u]},Ul=(r,t,e)=>(i,s,n,o)=>{const h=dh(r,n,o);let a;if(h===void 0)return[];if(r==="great"&&h.greatTicks!==void 0)if(h.irregular===!0)a=Og(i,s,h.getPrevKeyValue(t,e),h.getNextKeyValue(t,e));else{const l=h.greatTicks.getReferenceKeyValue(t,e)(i);a=Ni(i,s,h.unit,l,1)}else if(r==="major"&&h.majorTicks!==void 0)a=h.irregular===!0?((l,u,c,d)=>{const f=[];let g=c(l),y=0;for(;g<u;)if(f.push(g),g=d(g),y+=1,y>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return f.push(g),f})(i,s,h.getPrevKeyValue(t,e),h.getNextKeyValue(t,e)):((l,u,c)=>{const d=[];let f=l,g=0;for(;f<u;)if(d.push(f),f+=c,g+=1,g>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return d.push(f),d})(i,s,h.unit);else{if(r!=="minor"||h.minorTicks===void 0)return[];if(h.irregular===!0)a=((l,u,c,d)=>{const f=[];let g=c(l),y=0;for(;g<u;)if(f.push(g),g=d(g),y+=1,y>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return f})(i,s,h.getNextKeyValueIncludingRef(t,e),h.getNextKeyValue(t,e));else{const l=(u=>{if(u!==void 0)return ss[ss.indexOf(u)+1]})(h);if(l===void 0)return[];a=Yi(i,s,l.unit/h.minorTicks.amount,1)}}return a},jd=r=>(t,e,i,s,n,o)=>{const h=dh(r,n,o);if(h===void 0)return;let a;return r==="major"?a=h.majorTicks.fitFunction:h.minorTicks&&(a=h.minorTicks.fitFunction),a?a(t,e,i,s,n,o):void 0},ES=Ot({type:"date-time-ticks",utc:!1,locale:void 0,dateOrigin:void 0,cursorFormatter:void 0,greatTickStyle:new zs,majorTickStyle:new zs,minorTickStyle:new zs,formatOptionsMajorCentury:{year:"numeric"},formatOptionsMinorDecade:{year:"numeric"},formatOptionsMajorDecade:{year:"numeric"},formatOptionsMinorYear:{year:"numeric"},formatOptionsMajorYear:{year:"numeric"},formatOptionsMinorMonth:{month:"short"},formatOptionsGreatYear:{year:"numeric"},formatOptionsMajorMonth:{month:"long"},formatOptionsMinorWeek:{day:"numeric"},formatOptionsGreatMonth:{year:"numeric",month:"long"},formatOptionsMajorWeek:{day:"numeric",weekday:"short"},formatOptionsMinorDay:{day:"numeric",weekday:"short"},formatOptionsGreatWeek:(r,t,e)=>{const i=new Date(r),s=(n=>{const o=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate()));o.setUTCDate(o.getUTCDate()+4-(o.getUTCDay()||7));const h=new Date(Date.UTC(o.getUTCFullYear(),0,1));return Math.ceil(((o.getTime()-h.getTime())/864e5+1)/7)})(i);return`${new Intl.DateTimeFormat(e,{year:"numeric",month:"long"}).format(i)} Week ${s}`},formatOptionsMajorDay:{weekday:"long",day:"numeric"},formatOptionsMinorHour:{hour:"2-digit",minute:"2-digit"},formatOptionsGreatDay:{year:"numeric",month:"long",day:"numeric"},formatOptionsMajorHour:{hour:"2-digit",minute:"2-digit"},formatOptionsMinorMinute:{hour:"2-digit",minute:"2-digit"},formatOptionsGreatHour:{year:"numeric",month:"long",day:"numeric"},formatOptionsMajorMinute:{hour:"2-digit",minute:"2-digit"},formatOptionsMinorSecond:{hour:"2-digit",minute:"2-digit",second:"2-digit"},formatOptionsGreatMinute:{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"},formatOptionsMajorSecond:{second:"2-digit"},formatOptionsMinorMillisecond:r=>{const t=new Date(r);return`${(t.getSeconds()+t.getUTCMilliseconds()/1e3).toFixed(2)}`},formatOptionsGreatSecond:{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"},formatOptionsMajorMilliSecond:r=>{const t=new Date(r);return`${(t.getSeconds()+t.getUTCMilliseconds()/1e3).toFixed(1)}`}});class wS extends ES{Yh(t){const e=this.dateOrigin!==void 0?this.dateOrigin.getTime():0,i=u=>ss.map(c=>{const d=((f,g,y)=>{switch(y.label){case"MilliSecond100":return g==="Great"?void 0:g==="Major"?f.formatOptionsMajorMilliSecond:f.formatOptionsMinorMillisecond;case"Second":return g==="Great"?f.formatOptionsGreatSecond:g==="Major"?f.formatOptionsMajorSecond:f.formatOptionsMinorSecond;case"Minute":return g==="Great"?f.formatOptionsGreatMinute:g==="Major"?f.formatOptionsMajorMinute:f.formatOptionsMinorMinute;default:case"Hour":return g==="Great"?f.formatOptionsGreatHour:g==="Major"?f.formatOptionsMajorHour:f.formatOptionsMinorHour;case"Day":return g==="Great"?f.formatOptionsGreatDay:g==="Major"?f.formatOptionsMajorDay:f.formatOptionsMinorDay;case"Week":return g==="Great"?f.formatOptionsGreatWeek:g==="Major"?f.formatOptionsMajorWeek:f.formatOptionsMinorWeek;case"Month":return g==="Great"?f.formatOptionsGreatMonth:g==="Major"?f.formatOptionsMajorMonth:f.formatOptionsMinorMonth;case"Year":return g==="Great"?f.formatOptionsGreatYear:g==="Major"?f.formatOptionsMajorYear:f.formatOptionsMinorYear;case"Decade":return g==="Great"?void 0:g==="Major"?f.formatOptionsMajorDecade:f.formatOptionsMinorDecade;case"Century":return g==="Great"?void 0:g==="Major"?f.formatOptionsMajorCentury:void 0;case"Millennium":return}})(this,u,c);if(typeof d!="object")return d;try{return new Intl.DateTimeFormat(this.locale,d)}catch{let g="";for(const y in d)g+=` ${y}: ${d[y]},`;X.console.error(`Invalid Intl.DateTimeFormat ( locale: ${this.locale}, formatOptions {${g}} )`)}}),s=new Map;s.set("great",i("Great")),s.set("major",i("Major")),s.set("minor",i("Minor"));const n=u=>String(u),o=(u,c)=>(d,f)=>{let g=d+e;const y=f.getInnerStart(),p=f.getInnerEnd(),x=y>p,A=dh(u,x?p:y,x?y:p);if(A===void 0)return n(g);if(u==="great"){const E=De(d,c==="left"?y:p);let C;if(C=E===!1?d:A.irregular===!1?c==="left"&&x===!1||c==="right"&&x===!0?A.greatTicks.getReferenceKeyValue(e,this.utc)(d):A.greatTicks.getReferenceKeyValue(e,this.utc)(d+1*A.unit):c==="left"&&x===!1||c==="right"&&x===!0?A.getPrevKeyValue(e,this.utc)(d):A.getNextKeyValue(e,this.utc)(d),g=C+e,c==="right"&&E===!0)return""}const v=s.get(u);if(v===void 0)return n(g);const w=v[ss.indexOf(A)];return w===void 0?"":typeof w=="function"?w(g,f,this.locale):w.format(g)},h=[],a=[{Ue:"Great ticks (directive)",Rg:0,Ne:!0,Br:Ul("great",e,this.utc),Lr:void 0},{Ue:"Major ticks",Rg:1,lr:this.majorTickStyle,nr:o("major"),Br:Ul("major",e,this.utc),bh:{dr:jd("major")},Lr:void 0}];Ca(this.greatTickStyle)||(h.push({Ue:"Great ticks (left)",lr:this.greatTickStyle.setLabelAlignment(-1),nr:o("great","left"),Br:$d(e,this.utc,"left"),Oe:!0,mr:!1}),h.push({Ue:"Great ticks (right)",lr:this.greatTickStyle.setLabelAlignment(1),nr:o("great","right"),Br:$d(e,this.utc,"right"),Oe:!0,mr:!1})),Ca(this.minorTickStyle)||a.push({Ue:"Minor ticks",Rg:2,lr:this.minorTickStyle,nr:o("minor"),Br:Ul("minor",e,this.utc),bh:{dr:jd("minor"),xh:(u,c,d,f,g,y)=>{const p=dh("minor",g,y);return!p||p.label!=="Week"}},Lr:void 0});const l=this.cursorFormatter;return{He:h,$e:a,Ge:l?(u,c,d)=>l(e+u,c,d):(u,c,d)=>{const f=new Date(e+u);return`${new Intl.DateTimeFormat(d,{year:"numeric",month:"numeric",day:"numeric",minute:"2-digit",hour:"2-digit"}).format(f)} `},Xh:1e3,jh:31536e9}}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setTickStyle(t){return this.setGreatTickStyle(t).setMajorTickStyle(t).setMinorTickStyle(t)}setGreatTickStyle(t){if(typeof t=="function"){const e=this.get("greatTickStyle");return this.set("greatTickStyle",t(e))}return this.set("greatTickStyle",t)}getGreatTickStyle(){return this.get("greatTickStyle")}setMajorTickStyle(t){return typeof t=="function"?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if(typeof t=="function"){const e=this.get("minorTickStyle");return this.set("minorTickStyle",t(e))}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setUTC(t){return this.set("utc",t)}getUTC(){return this.get("utc")}setLocale(t){return this.set("locale",t)}getLocale(){return this.get("locale")}setDateOrigin(t){return this.set("dateOrigin",t)}getDateOrigin(){return this.get("dateOrigin")}setFormatting(t,e,i){return this.withMutations(s=>s.set("formatOptionsGreatYear",t||this.formatOptionsGreatYear).set("formatOptionsGreatMonth",t||this.formatOptionsGreatMonth).set("formatOptionsGreatWeek",t||this.formatOptionsGreatWeek).set("formatOptionsGreatDay",t||this.formatOptionsGreatDay).set("formatOptionsGreatHour",t||this.formatOptionsGreatHour).set("formatOptionsGreatMinute",t||this.formatOptionsGreatMinute).set("formatOptionsGreatSecond",t||this.formatOptionsGreatSecond).set("formatOptionsMajorCentury",e||this.formatOptionsMajorCentury).set("formatOptionsMajorDecade",e||this.formatOptionsMajorDecade).set("formatOptionsMajorYear",e||this.formatOptionsMajorYear).set("formatOptionsMajorMonth",e||this.formatOptionsMajorMonth).set("formatOptionsMajorWeek",e||this.formatOptionsMajorWeek).set("formatOptionsMajorDay",e||this.formatOptionsMajorDay).set("formatOptionsMajorHour",e||this.formatOptionsMajorHour).set("formatOptionsMajorMinute",e||this.formatOptionsMajorMinute).set("formatOptionsMajorSecond",e||this.formatOptionsMajorSecond).set("formatOptionsMajorMilliSecond",e||this.formatOptionsMajorMilliSecond).set("formatOptionsMinorDecade",i||this.formatOptionsMinorDecade).set("formatOptionsMinorYear",i||this.formatOptionsMinorYear).set("formatOptionsMinorMonth",i||this.formatOptionsMinorMonth).set("formatOptionsMinorWeek",i||this.formatOptionsMinorWeek).set("formatOptionsMinorDay",i||this.formatOptionsMinorDay).set("formatOptionsMinorHour",i||this.formatOptionsMinorHour).set("formatOptionsMinorMinute",i||this.formatOptionsMinorMinute).set("formatOptionsMinorSecond",i||this.formatOptionsMinorSecond))}setFormattingDecade(t,e){return this.withMutations(i=>(t&&(i=i.set("formatOptionsMajorDecade",t)),e&&(i=i.set("formatOptionsMinorYear",e)),i))}setFormattingYear(t,e){return this.withMutations(i=>(t&&(i=i.set("formatOptionsMajorYear",t)),e&&(i=i.set("formatOptionsMinorMonth",e)),i))}setFormattingMonth(t,e,i){return this.withMutations(s=>(t&&(s=s.set("formatOptionsGreatYear",t)),e&&(s=s.set("formatOptionsMajorMonth",e)),i&&(s=s.set("formatOptionsMinorWeek",i)),s))}setFormattingWeek(t,e,i){return this.withMutations(s=>(t&&(s=s.set("formatOptionsGreatMonth",t)),e&&(s=s.set("formatOptionsMajorWeek",e)),i&&(s=s.set("formatOptionsMinorDay",i)),s))}setFormattingDay(t,e,i){return this.withMutations(s=>(t&&(s=s.set("formatOptionsGreatWeek",t)),e&&(s=s.set("formatOptionsMajorDay",e)),i&&(s=s.set("formatOptionsMinorHour",i)),s))}setFormattingHour(t,e,i){return this.withMutations(s=>(t&&(s=s.set("formatOptionsGreatDay",t)),e&&(s=s.set("formatOptionsMajorHour",e)),i&&(s=s.set("formatOptionsMinorMinute",i)),s))}setFormattingMinute(t,e,i){return this.withMutations(s=>(t&&(s=s.set("formatOptionsGreatHour",t)),e&&(s=s.set("formatOptionsMajorMinute",e)),i&&(s=s.set("formatOptionsMinorSecond",i)),s))}setFormattingSecond(t,e,i){return this.withMutations(s=>(t&&(s=s.set("formatOptionsGreatMinute",t)),e&&(s=s.set("formatOptionsMajorSecond",e)),i&&(s=s.set("formatOptionsMinorMillisecond",i)),s))}setFormattingMilliSecond(t,e){return this.withMutations(i=>(t&&(i=i.set("formatOptionsGreatSecond",t)),e&&(i=i.set("formatOptionsMajorMilliSecond",e)),i))}}const qd=(r,t)=>(e,i)=>{const s=i-e;if(t){const a=Math.log10(s/2);let l=10**Math.floor(a-r);const u=1/l;l=Math.round(l*u)/u;const c=Math.round(Math.floor(e/(10*l))*l*10*u)/u;return Ni(c,i,l,void 0,u)}const n=Math.log10(s);let o=10**Math.round(n-r);const h=1/o;return o=Math.round(o*h)/h,Yi(e,i,o,h)},kS=(r,t,e,i,s,n)=>t===0?r.filter((o,h)=>h%2==0):t===1?r.filter((o,h)=>h%5==0):void 0,TS=(r,t,e,i,s,n)=>t===0?r.filter((o,h)=>h%2==0):t===1?r.filter((o,h)=>h%3==0):t===2?r.filter((o,h)=>h%4==0):t===3?r.filter((o,h)=>h%5==0):void 0,CS=_t(void 0,2,5),FS=(r,t,e,i,s,n)=>t===0?[r[1],r[3],r[5]]:t===1?[r[0],r[3]]:t===2?[r[1]]:void 0,Jd=(r,t)=>{const e=pn(r),i=ao(r);if(t)return(n,o)=>{const h=[],a=Math.floor(e(n)),l=Math.ceil(e(o));for(let u=a-1;u<=l+1;u+=1){const c=i**u;h.push(c)}return h};const s=r===10?9:4;return(n,o)=>{const h=Math.round(e(n)),a=Math.round(e(o)),l=[],u=i**h,c=(i**a-u)/s;for(let d=1;d<=s;d+=1){const f=u+c*d;f>n&&f<o&&l.push(f)}return l}},DS=Ot({type:"numeric-ticks",cursorFormatter:void 0,extremeTickStyle:new zs,majorTickStyle:new zs,minorTickStyle:new zs,formattingOffset:void 0,extremeFormattingFunction:void 0,majorFormattingFunction:void 0,minorFormattingFunction:void 0});class PS extends DS{Yh(t){const e=this.formattingOffset,i=this.get("extremeFormattingFunction")||(t.type==="logarithmic"?(l,u)=>or.LogarithmicNoExponents(l,u,void 0,t.base):or.Numeric),s=this.get("majorFormattingFunction")||(t.type==="logarithmic"?(l,u)=>or.LogarithmicNoExponents(l,u,void 0,t.base):or.Numeric),n=this.get("minorFormattingFunction")||(t.type==="logarithmic"?(l,u)=>or.LogarithmicNoExponents(l,u,void 0,t.base):or.Numeric),o=[],h=[];Ca(this.extremeTickStyle)||o.push({Ue:"Extreme ticks",lr:this.extremeTickStyle,nr:e===void 0?i:(l,u,c)=>i(e+l,u,c),Br:Ax,Oe:!0,mr:!0}),h.push({Ue:"Major ticks",Rg:0,lr:this.majorTickStyle,nr:e===void 0?s:(l,u,c)=>s(e+l,u,c),Br:t.type==="logarithmic"?Jd(t.base,!0):qd(0,!0),bh:t.type==="logarithmic"?{dr:TS}:{dr:kS},Lr:void 0}),Ca(this.minorTickStyle)||h.push({Ue:"Minor ticks",Rg:1,lr:this.minorTickStyle,nr:e===void 0?n:(l,u,c)=>n(e+l,u,c),Br:t.type==="logarithmic"?Jd(t.base,!1):qd(1,!1),bh:t.type==="logarithmic"?{dr:FS}:{dr:CS},Lr:50});const a=this.cursorFormatter?this.cursorFormatter:or.Numeric;return{He:o,$e:h,Ge:e===void 0?a:(l,u,c)=>a(e+l,u,c),Xh:1e-9,jh:void 0}}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setExtremeTickStyle(t){if(typeof t=="function"){const e=this.get("extremeTickStyle");return this.set("extremeTickStyle",t(e))}return this.set("extremeTickStyle",t)}getExtremeTickStyle(){return this.get("extremeTickStyle")}setFormattingOffset(t){return this.set("formattingOffset",t)}getFormattingOffset(){return this.get("formattingOffset")}setTickStyle(t){const e=this.setMajorTickStyle(t).setMinorTickStyle(t);return e.extremeTickStyle!==dy?e.setExtremeTickStyle(t):e}setMajorTickStyle(t){return typeof t=="function"?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if(typeof t=="function"){const e=this.get("minorTickStyle");return this.set("minorTickStyle",t(e))}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setFormattingFunction(t){return this.withMutations(e=>e.set("extremeFormattingFunction",t).set("majorFormattingFunction",t).set("minorFormattingFunction",t).set("cursorFormatter",t))}getExtremeFormattingFunction(){return this.get("extremeFormattingFunction")}setExtremeFormattingFunction(t){return this.set("extremeFormattingFunction",t)}getMajorFormattingFunction(){return this.get("majorFormattingFunction")}setMajorFormattingFunction(t){return this.set("majorFormattingFunction",t)}getMinorFormattingFunction(){return this.get("minorFormattingFunction")}setMinorFormattingFunction(t){return this.set("minorFormattingFunction",t)}}const IS=Ot({type:"time-ticks",cursorFormatter:void 0,timeOrigin:void 0,majorTickStyle:new zs,minorTickStyle:new zs,majorFormattingFunction:void 0,minorFormattingFunction:void 0}),an=(r,t)=>{const e=t-r;return e>=864e5?"MajorHours12":e>=36e5?"MajorHours":e>=6e5?"MajorMinutes15":e>=9e4?"MajorMinutes":e>=10500?"MajorSeconds15":e>=1e3?"MajorSeconds":e>=100?"MajorMilliseconds100":e>=10?"MajorMilliseconds10":e>=1?"MajorMilliseconds":e>=.1?"MajorMicroseconds100":e>=.01?"MajorMicroseconds10":e>=.001?"MajorMicroseconds":e<=.001?"MajorNanoseconds100":"Unknown"},Bt={hhmmss:r=>{let t=Math.abs(r);const e=r>=0?"":"-",i=Math.floor(t/36e5);t%=36e5;const s=Math.floor(t/6e4);t%=6e4;const n=Math.floor(t/1e3);return`${e}${gi(i,2)}:${gi(s,2)}:${gi(n,2)}`},hhmmssmmm:r=>{let t=Math.abs(r);const e=r>=0?"":"-",i=Math.floor(t/36e5);t%=36e5;const s=Math.floor(t/6e4);t%=6e4;const n=Math.floor(t/1e3);t%=1e3;const o=Math.floor(t/1);return`${e}${gi(i,2)}:${gi(s,2)}:${gi(n,2)}.${gi(o,3)}`},hhmmssmmmuuu:r=>{const t=Math.abs(r),e=r>=0?"":"-",i=Math.floor(t/36e5),s=Math.floor(t/6e4)%60,n=Math.floor(t/1e3)%60,o=Math.floor(t/1)%1e3,h=r.toLocaleString("en-US",{minimumFractionDigits:3,maximumFractionDigits:3}).split(".")[1];return`${e}${gi(i,2)}:${gi(s,2)}:${gi(n,2)}.${gi(o,3)}${h}`},hhmmssmmmuuunnn:r=>{const t=Math.abs(r),e=r>=0?"":"-",i=Math.floor(t/36e5),s=Math.floor(t/6e4)%60,n=Math.floor(t/1e3)%60,o=Math.floor(t/1)%1e3,h=r.toLocaleString("en-US",{minimumFractionDigits:6,maximumFractionDigits:6}).split(".")[1];return`${e}${gi(i,2)}:${gi(s,2)}:${gi(n,2)}.${gi(o,3)}${h}`}},ln={MajorHours12:{major:{format:Bt.hhmmss,getKeyValues:(r,t,e,i)=>(r=Math.floor(r/(4*432e5))*432e5*4,Ni(r,t,432e5,void 0,1e6)),fitKeyValues:_t({ignore:"first"},2,4)},minor:{format:Bt.hhmmss,getKeyValues:(r,t,e,i)=>Yi(r,t,36e5,1e6),fitKeyValues:_t({},2,3,4,6)},defaultValueFormatter:Bt.hhmmss},MajorHours:{major:{format:Bt.hhmmss,getKeyValues:(r,t,e,i)=>(r=Math.floor(r/(12*36e5))*36e5*12,Ni(r,t,36e5,void 0,1e6)),fitKeyValues:_t({ignore:"first"},2,6,12)},minor:{format:Bt.hhmmss,getKeyValues:(r,t,e,i)=>Yi(r,t,3e5,1e6),fitKeyValues:_t({},2,4,6)},defaultValueFormatter:Bt.hhmmss},MajorMinutes15:{major:{format:Bt.hhmmss,getKeyValues:(r,t,e,i)=>(r=36e5*Math.floor(r/36e5),Ni(r,t,9e5,void 0,1e6)),fitKeyValues:_t({ignore:"first"},2)},minor:{format:Bt.hhmmss,getKeyValues:(r,t,e,i)=>Yi(r,t,6e4,1e6),fitKeyValues:_t({},3,5)},defaultValueFormatter:Bt.hhmmss},MajorMinutes:{major:{format:Bt.hhmmss,getKeyValues:(r,t,e,i)=>(r=Math.floor(r/6e5)*6e4*10,Ni(r,t,6e4,void 0,1e6)),fitKeyValues:_t({ignore:"first"},2,5)},minor:{format:Bt.hhmmss,getKeyValues:(r,t,e,i)=>Yi(r,t,5e3,1e6),fitKeyValues:_t({},2,3,4,6)},defaultValueFormatter:Bt.hhmmss},MajorSeconds15:{major:{format:Bt.hhmmss,getKeyValues:(r,t,e,i)=>(r=Math.floor(r/6e4)*15e3*4,Ni(r,t,15e3,void 0,1e6)),fitKeyValues:_t({ignore:"first"},2,4)},minor:{format:Bt.hhmmss,getKeyValues:(r,t,e,i)=>Yi(r,t,1e3,1e6),fitKeyValues:_t({},3,5)},defaultValueFormatter:Bt.hhmmss},MajorSeconds:{major:{format:Bt.hhmmssmmm,getKeyValues:(r,t,e,i)=>(r=Math.floor(r/1e4)*1e3*10,Ni(r,t,1e3,void 0,1e6)),fitKeyValues:_t({ignore:"first"},2,5)},minor:{format:Bt.hhmmssmmm,getKeyValues:(r,t,e,i)=>Yi(r,t,100,1e6),fitKeyValues:_t({},2,3,5)},defaultValueFormatter:Bt.hhmmssmmm},MajorMilliseconds100:{major:{format:Bt.hhmmssmmm,getKeyValues:(r,t,e,i)=>(r=100*Math.floor(r/1e3)*10,Ni(r,t,100,void 0,1e6)),fitKeyValues:_t({ignore:"first"},2,5)},minor:{format:Bt.hhmmssmmm,getKeyValues:(r,t,e,i)=>Yi(r,t,10,1e6),fitKeyValues:_t({},2,3,5)},defaultValueFormatter:Bt.hhmmssmmm},MajorMilliseconds10:{major:{format:Bt.hhmmssmmm,getKeyValues:(r,t,e,i)=>(r=10*Math.floor(r/100)*10,Ni(r,t,10,void 0,1e6)),fitKeyValues:_t({ignore:"first"},2,5)},minor:{format:Bt.hhmmssmmm,getKeyValues:(r,t,e,i)=>Yi(r,t,1,1e6),fitKeyValues:_t({},2,3,5)},defaultValueFormatter:Bt.hhmmssmmm},MajorMilliseconds:{major:{format:Bt.hhmmssmmmuuu,getKeyValues:(r,t,e,i)=>(r=1*Math.floor(r/10)*10,Ni(r,t,1,void 0,1e6)),fitKeyValues:_t({ignore:"first"},2,5)},minor:{format:Bt.hhmmssmmmuuu,getKeyValues:(r,t,e,i)=>Yi(r,t,.1,1e6),fitKeyValues:_t({},2)},defaultValueFormatter:Bt.hhmmssmmmuuu},MajorMicroseconds100:{major:{format:Bt.hhmmssmmmuuu,getKeyValues:(r,t,e,i)=>(r=.1*Math.floor(r/1)*10,Ni(r,t,.1,void 0,1e6)),fitKeyValues:_t({ignore:"first"},2,5)},minor:{format:Bt.hhmmssmmmuuu,getKeyValues:(r,t,e,i)=>Yi(r,t,.01,1e6),fitKeyValues:_t({},2,3,5)},defaultValueFormatter:Bt.hhmmssmmmuuu},MajorMicroseconds10:{major:{format:Bt.hhmmssmmmuuu,getKeyValues:(r,t,e,i)=>(r=Math.floor(r/.1)*.01*10,Ni(r,t,.01,void 0,1e6)),fitKeyValues:_t({ignore:"first"},2,5)},minor:{format:Bt.hhmmssmmmuuu,getKeyValues:(r,t,e,i)=>Yi(r,t,.001,1e6),fitKeyValues:_t({},2,3,5)},defaultValueFormatter:Bt.hhmmssmmmuuu},MajorMicroseconds:{major:{format:Bt.hhmmssmmmuuunnn,getKeyValues:(r,t,e,i)=>(r=Math.floor(r/.01)*.001*10,Ni(r,t,.001,void 0,1e6)),fitKeyValues:_t({ignore:"first"},2,5)},minor:{format:Bt.hhmmssmmmuuunnn,getKeyValues:(r,t,e,i)=>Yi(r,t,100*1e-6,1e6),fitKeyValues:_t({},2,3,5)},defaultValueFormatter:Bt.hhmmssmmmuuunnn},MajorNanoseconds100:{major:{format:Bt.hhmmssmmmuuunnn,getKeyValues:(r,t,e,i)=>{const s=9999999999999999e-20;return r=Math.floor(r/.001)*s*10,Ni(r,t,s,void 0,1e6)},fitKeyValues:_t({ignore:"first"},2,5)},minor:{format:Bt.hhmmssmmmuuunnn,getKeyValues:(r,t,e,i)=>Yi(r,t,10*1e-6,1e6),fitKeyValues:_t({},2,3,5)},defaultValueFormatter:Bt.hhmmssmmmuuunnn},Unknown:{major:{format:(r,t,e)=>"",getKeyValues:(r,t,e,i)=>[],fitKeyValues:void 0},minor:{format:(r,t,e)=>"",getKeyValues:(r,t,e,i)=>[],fitKeyValues:void 0},defaultValueFormatter:(r,t,e)=>""}};class VS extends IS{Yh(t){const e=this.timeOrigin||0,i=[{Ue:"Major ticks",Rg:0,lr:this.majorTickStyle,nr:this.majorFormattingFunction?this.majorFormattingFunction:(s,n,o)=>{const h=an(Math.min(n.getInnerStart(),n.getInnerEnd()),Math.max(n.getInnerStart(),n.getInnerEnd()));return(0,ln[h].major.format)(s+e,n,o)},Br:(s,n,o,h)=>{const a=an(o,h);return(0,ln[a].major.getKeyValues)(s,n,o,h)},bh:{dr:(s,n,o,h,a,l)=>{const u=an(a,l),c=ln[u].major.fitKeyValues;if(c)return c(s,n,o,h,a,l)}},Lr:void 0}];return cy(this.minorTickStyle)&&i.push({Ue:"Minor ticks",Rg:1,lr:this.minorTickStyle,nr:this.minorFormattingFunction?this.minorFormattingFunction:(s,n,o)=>{const h=an(Math.min(n.getInnerStart(),n.getInnerEnd()),Math.max(n.getInnerStart(),n.getInnerEnd()));return(0,ln[h].minor.format)(s+e,n,o)},Br:(s,n,o,h)=>{const a=an(o,h);return(0,ln[a].minor.getKeyValues)(s,n,o,h)},bh:{dr:(s,n,o,h,a,l)=>{const u=an(a,l),c=ln[u].minor.fitKeyValues;if(c)return c(s,n,o,h,a,l)}},Lr:void 0}),{He:[],$e:i,Ge:this.cursorFormatter||((s,n,o)=>{const h=an(Math.min(n.getInnerStart(),n.getInnerEnd()),Math.max(n.getInnerStart(),n.getInnerEnd()));return ln[h].defaultValueFormatter(s+e,n,o)}),Xh:1e-4,jh:864e6}}setTickStyle(t){return this.setMajorTickStyle(t).setMinorTickStyle(t)}setMajorTickStyle(t){return typeof t=="function"?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if(typeof t=="function"){const e=this.get("minorTickStyle");return this.set("minorTickStyle",t(e))}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setTimeOrigin(t){return this.set("timeOrigin",t)}getTimeOrigin(){return this.get("timeOrigin")}setFormattingFunction(t){return this.withMutations(e=>e.set("majorFormattingFunction",t).set("minorFormattingFunction",t).set("cursorFormatter",t))}getMajorFormattingFunction(){return this.get("majorFormattingFunction")}setMajorFormattingFunction(t){return this.set("majorFormattingFunction",t)}getMinorFormattingFunction(){return this.get("minorFormattingFunction")}setMinorFormattingFunction(t){return this.set("minorFormattingFunction",t)}}const fy=(r,t,e="image/png",i)=>{t+=`.${e.slice(e.indexOf("image/")+6)}`;const s=r.captureFrame(e,i);if(e!=="image/png"&&s.type.includes("image/png"))throw new Error(`saveToFile | type not supported by browser: ${e}
Check support table for HTMLCanvasElement.toDataURL`);if(X.navigator.msSaveBlob)X.navigator.msSaveBlob(s,t);else{const n=X.document.createElement("a");X.document.body.appendChild(n);const o=X.URL.createObjectURL(s);n.href=o,n.download=t,n.click(),setTimeout(()=>{X.URL.revokeObjectURL(o),X.document.body.removeChild(n)},0)}},Fa=(r,t,e,i,s,n)=>{const o=r.Zu(t,e,i,s,n,!0);return o.setDraggingMode(jt.draggable),o},Da=(r,t)=>{if(r==="relative")return t;if(r instanceof _s)return r;const e=r.x instanceof bn?r.x.dt:r.x.x,i=r.y instanceof bn?r.y.dt:r.y.y;return Qa(e,i)},ul=(r,t,e,i,s)=>{if(e){const n=r,o=t,h=Qn(o)?o:Js(o)?i:void 0;if(h&&Jn(e)){const a=K(n,h,s.dt);return s.Do({engineX:a.x,engineY:a.y})}if(h&&Js(e))return K(n,h,i);if(h&&Qn(e))return K(n,h,e)}else{const n=r;if(Js(t)){const o=s.Po(n);return K({x:o.engineX,y:o.engineY},s.dt,i)}if(Qn(t)){const o=t,h=s.Po(n);return K({x:h.engineX,y:h.engineY},s.dt,o)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")};class gy{constructor(t,e,i,s,n,o,h,a){this.coordsRelative="relative",this.coordsClient="client",this.Hg=[],this.$g=[],this.D=new Xe,this.Xg=void 0,this.jg=void 0,this.Zg=void 0,this.Xt=Tr(0,0,0,0),this.Qg=!1,this.$i=!1,this.Jg=()=>{this.Kg=!0,this.qg.Ss()},this.tm=c=>d=>{const f=this.Hg.indexOf(d);f!==-1&&this.Hg.splice(f,1),this.us.Ss(),c.W()},this.im=c=>{const d=this.$g.indexOf(c);d!==-1&&this.$g.splice(d,1),this.us.Ss()},this.Kg=!0,this.onInViewChange=c=>this.D.on("inViewChange",c),this.offInViewChange=c=>this.D.off(c,"inViewChange"),this.cA=t,this.sm=i,this.qg=s,this.removePanel=n,this.qi=e.us.qi;const l=e.us.oi();if(this.uiScale=i.d2({scaleXYConstructor:Gt}).Vi(0,100).Oi(0,100).q(l),this.pixelScale=i.d2({scaleXYConstructor:Gt}).Vi(0,this.uiScale.x.getCellSize()).Oi(0,this.uiScale.y.getCellSize()).q(l),this.engine=e.us.hm,this.us=e.us.rm,this.es=this.us.es.hs(this,{}),this.nm=()=>e.om("unidentified ui"),this.am=e.lm(),this.um=this.qg.ke(this.uiScale).Fe(N(0,0)).q(N(100,100)).Ce(o).we(h).setMouseMoveEventHandler((c,d)=>this.D.emit("mouseMovePanelBackground",this,d)).setMouseEnterEventHandler((c,d)=>this.D.emit("mouseEnterPanelBackground",this,d)).setMouseLeaveEventHandler((c,d)=>this.D.emit("mouseLeavePanelBackground",this,d)).setMouseDownEventHandler((c,d)=>this.D.emit("mouseDownPanelBackground",this,d)).setMouseUpEventHandler((c,d)=>this.D.emit("mouseUpPanelBackground",this,d)).setMouseClickEventHandler((c,d)=>this.D.emit("mouseClickPanelBackground",this,d)).setMouseDoubleClickEventHandler((c,d)=>this.D.emit("mouseDoubleClickPanelBackground",this,d)).setMouseWheelEventHandler((c,d)=>this.D.emit("mouseWheelPanelBackground",this,d)).setMouseDragStartEventHandler((c,d,f)=>this.D.emit("mouseDragStartPanelBackground",this,d,f)).setMouseDragEventHandler((c,d,f,g,y)=>this.D.emit("mouseDragPanelBackground",this,d,f,g,y)).setMouseDragStopEventHandler((c,d,f,g)=>this.D.emit("mouseDragStopPanelBackground",this,d,f,g)).setTouchStartEventHandler((c,d)=>this.D.emit("touchStartPanelBackground",this,d)).setTouchMoveEventHandler((c,d)=>this.D.emit("touchMovePanelBackground",this,d)).setTouchEndEventHandler((c,d)=>this.D.emit("touchEndPanelBackground",this,d)),a){const c=a.on(this.Jg);this.dm=()=>a.off(c)}else{const c=e.us.Co(this.Jg);this.fm=e.us.ko.bind(e.us,c)}const u=e.us.Fo(c=>{this.Qg=c,this.D.emit("inViewChange",this,c)});this.Am=e.us.Io.bind(e.us,u),this.Xg=n}getTheme(){return this.qi}getSizePixels(){return this.pixelScale.getInnerIntervalPixels()}setBackgroundFillStyle(t){return this.um.Ce(t),this.qg.Ss(),this}getBackgroundFillStyle(){return this.um.Eh()}setBackgroundStrokeStyle(t){return this.um.we(t),this.qg.Ss(),this}getBackgroundStrokeStyle(){return this.um.ao()}translateCoordinate(t,e,i){return ul(t,e,i,this.pixelScale,this.us)}gm(t){return this.Hg.push(t),this.us.Ss(),t}ym(t){return this.$g.push(t),this.us.Ss(),t}addUIElement(t=Ac,e=this.uiScale){e=Da(e,this.pixelScale);const i=this.nm();return this.gm(Fa(t,i,this.uiScale,e,this.tm(i),this.qi))}addLegendBox(t=al,e=this.uiScale){e=Da(e,this.pixelScale);const i=this.ym(Fa(t,this.am,this.uiScale,e,this.im,this.qi));return i.setDraggingMode(jt.notDraggable),e!==void 0&&e!==this.uiScale||(t===void 0||t.getAlignment()==="vertical"?i.setOrigin(lo.RightCenter).setPosition({x:100,y:50}):i.setOrigin(lo.CenterBottom).setPosition(this.uiScale.mi({x:50,y:0},{x:0,y:3}))),i}getLegendBoxes(){return this.$g}dispose(){return this.$i||(this.$i=!0,this.fm&&this.fm(),this.dm&&this.dm(),po(this.uiScale),po(this.pixelScale),this.Am&&this.Am(),this.jg&&this.jg(),this.qg.W(),this.am.W(),this.Hg.slice().forEach(t=>{t.dispose()}),this.$g.slice().forEach(t=>{t.dispose()}),this.us.Ss(),this.Xg&&this.Xg(this),this.D.emit("dispose",this)),this}isDisposed(){return this.$i}onDispose(t){return this.D.on("dispose",t)}offDispose(t){return this.D.off(t,"dispose")}saveToFile(t,e,i){return fy(this.engine,t,e,i),this}Fr(t){this.Xt=t,this.Jg()}j(){return this.pixelScale.j(),this.uiScale.j(),this}Z(){return this.pixelScale.Z(),this.uiScale.Z(),this}Te(t){if(this.Kg){const e=this.qg.us.oi(),i=e.x,s=e.y;this.uiScale.q(i,s),this.pixelScale.q(i,s);const n=[this.Xt.left,this.Xt.right],o=[this.Xt.bottom,this.Xt.top];this.uiScale.Ei(n),this.uiScale.zi(o);const h=this.uiScale.getInnerIntervalPixels();this.pixelScale.Vi(0,h.x).Ei(n).Oi(0,h.y).zi(o),this.D.emit("resize",this,h.x,h.y,i,s)}this.Kg=!1}pm(){for(let t=0;t<this.Hg.length;t+=1)this.Hg[t].Ps().Te();for(let t=0;t<this.$g.length;t+=1)this.$g[t].Ps().Te();this.Zg&&this.Zg()}Sm(t,e){if(t){const i=t(e);this.onResize(i.Ps.bind(i)),this.jg=i.W.bind(i),this.Zg=i.Ps.bind(i)}}onBackgroundMouseEnter(t){return this.D.on("mouseEnterPanelBackground",t)}offBackgroundMouseEnter(t){return this.D.off(t,"mouseEnterPanelBackground")}onBackgroundMouseMove(t){return this.D.on("mouseMovePanelBackground",t)}offBackgroundMouseMove(t){return this.D.off(t,"mouseMovePanelBackground")}onBackgroundMouseLeave(t){return this.D.on("mouseLeavePanelBackground",t)}offBackgroundMouseLeave(t){return this.D.off(t,"mouseLeavePanelBackground")}onBackgroundMouseDown(t){return this.D.on("mouseDownPanelBackground",t)}offBackgroundMouseDown(t){return this.D.off(t,"mouseDownPanelBackground")}onBackgroundMouseUp(t){return this.D.on("mouseUpPanelBackground",t)}offBackgroundMouseUp(t){return this.D.off(t,"mouseUpPanelBackground")}onBackgroundMouseClick(t){return this.D.on("mouseClickPanelBackground",t)}offBackgroundMouseClick(t){return this.D.off(t,"mouseClickPanelBackground")}onBackgroundMouseDoubleClick(t){return this.D.on("mouseDoubleClickPanelBackground",t)}offBackgroundMouseDoubleClick(t){return this.D.off(t,"mouseDoubleClickPanelBackground")}onBackgroundMouseDragStart(t){return this.D.on("mouseDragStartPanelBackground",t)}offBackgroundMouseDragStart(t){return this.D.off(t,"mouseDragStartPanelBackground")}onBackgroundMouseDrag(t){return this.D.on("mouseDragPanelBackground",t)}offBackgroundMouseDrag(t){return this.D.off(t,"mouseDragPanelBackground")}onBackgroundMouseDragStop(t){return this.D.on("mouseDragStopPanelBackground",t)}offBackgroundMouseDragStop(t){return this.D.off(t,"mouseDragStopPanelBackground")}onBackgroundMouseWheel(t){return this.D.on("mouseWheelPanelBackground",t)}offBackgroundMouseWheel(t){return this.D.off(t,"mouseWheelPanelBackground")}onBackgroundTouchStart(t){return this.D.on("touchStartPanelBackground",t)}offBackgroundMouseTouchStart(t){return this.D.off(t,"touchStartPanelBackground")}onBackgroundTouchMove(t){return this.D.on("touchMovePanelBackground",t)}offBackgroundTouchMove(t){return this.D.off(t,"touchMovePanelBackground")}onBackgroundTouchEnd(t){return this.D.on("touchEndPanelBackground",t)}offBackgroundTouchEnd(t){return this.D.off(t,"touchEndPanelBackground")}onResize(t){return this.D.on("resize",t)}offResize(t){return this.D.off(t,"resize")}getIsInView(){return this.Qg}}const po=r=>{r.ii&&r.ii()};class bc extends gy{constructor(t,e,i,s,n,o){super(t,e,i,e.vm("uipanel bg",0),s,e.us.qi.uiPanelBackgroundFillStyle,e.us.qi.uiPanelBackgroundStrokeStyle,o),this.Sm(n,this.pixelScale)}setMinimumSize(t){return this.xd=t,this.us.Ss(),this}getMinimumSize(){return this.xd}Te(t){super.Te(t),super.pm()}}const _S=Tr(10,10,10,10);class Ds extends gy{constructor(t,e,i,s,n,o,h,a,l,u){super(t,e,i,s,n,o,h,u),this.bm={},this.ya=_S,this.th=!0,this.xm=e.Mm("chart internal ui",0),this._m=this.xm.Pr(this.uiScale).Rh("Chart").Fe(N(50,100)).Ea(N(0,1)).Oh(a).Ce(l).setMouseInteractions(!1),this.wm=this.es.yg([this._m]).ps(this.qi.effectsText)}setAnimationsEnabled(t){return this.th=t,this}getAnimationsEnabled(){return this.th}setTitle(t){return this._m.Rh(t),this.us.Ss(),this}getTitle(){return this._m.Bh()}getTitleSize(){return this._m.Ps().jc()}setTitleFillStyle(t){return this._m.Ce(t),this.Jg(),this}getTitleFillStyle(){return this._m.Eh()}setTitleFont(t){return this._m.Oh(t),this.Jg(),this}getTitleFont(){return this._m.Vh()}setTitleRotation(t){return this._m.Nh(t),this.us.Ss(),this}getTitleRotation(){return this._m.Gh()}setTitleEffect(t){return this.wm.ps(t),this.us.Ss(),this}getTitleEffect(){return this.wm.vs()}setTitleMargin(t){var e,i;return this.bm=typeof t=="object"?this.bm?(e=this.bm,{left:(i=t).left!==void 0?i.left:e.left,top:i.top!==void 0?i.top:e.top,right:i.right!==void 0?i.right:e.right,bottom:i.bottom!==void 0?i.bottom:e.bottom}):t:{left:t,top:t,right:t,bottom:t},this.Jg(),this}getTitleMargin(){return this.bm}setPadding(t){return this.ya=typeof t=="object"?qn(this.ya,t):{left:t,top:t,right:t,bottom:t},this.Jg(),this}getPadding(){return this.ya}Cm(t){const e=t.km(),i=e==null?void 0:e.height,s=e==null?void 0:e.width;if(i!==void 0&&s!==void 0)return{x:i/2,y:s/2}}dispose(){return super.dispose(),this.xm.W(),this}}const ii={Tm:(r,t)=>r.Eh()!==ft&&r.Bh().length!==0&&r.getVisible()?r.Ps().jc().y:0,Fm(r,t){r.Fe(N(50,100)).Fr({top:t.top!==void 0?t.top:10,right:t.right||0,left:t.left||0,bottom:t.bottom||0})}};var he;(function(r){r[r.disabled=0]="disabled",r[r.snapToClosest=1]="snapToClosest",r[r.onHover=2]="onHover"})(he||(he={}));const oi={Im(r,t,e,i,s,n){let o;const h=r.getAutoCursorMode();if(!e&&h!==he.disabled){const a=r.us.On(),l=i.find(u=>u.getIsUnderMouse());h===he.snapToClosest&&s?(t||l!==void 0)&&(o=a&&s(a)):l===void 0||l.getCursorEnabled&&!l.getCursorEnabled()||(o=a&&n(l,a))}o?r.Pm.pointAt(o).setVisible(!0):r.Pm.setVisible(!1),r.Pm.Ps().Te()},Hc(r,t,e){if(t.x<r.uiScale.x.ei()||t.x>r.uiScale.x.hi()||t.y<r.uiScale.y.ei()||t.y>r.uiScale.y.hi())return;let i,s=Number.MAX_VALUE;for(const n of e)if(n.getCursorEnabled()&&n.getVisible()){const o=n.Hc(t);if(o){const h=K(o.location,o.scale,r.engine.scale),a=pr(t,h);Number.isNaN(a)||i&&!(a<s)||(i=o,s=a)}}return i||void 0},Dm(r){r.onSeriesBackgroundMouseEnter(()=>{r.getAutoCursorMode()!==he.disabled&&r.us.Ss()}),r.onSeriesBackgroundMouseMove(()=>{r.getAutoCursorMode()!==he.disabled&&r.us.Ss()}),r.onSeriesBackgroundMouseLeave(()=>{r.getAutoCursorMode()!==he.disabled&&r.us.Ss()}),r.onSeriesBackgroundTouchStart(()=>{r.getAutoCursorMode()!==he.disabled&&r.us.Ss()}),r.onSeriesBackgroundTouchMove(()=>{r.getAutoCursorMode()!==he.disabled&&r.us.Ss()}),r.onSeriesBackgroundTouchEnd(()=>{r.getAutoCursorMode()!==he.disabled&&r.us.Ss()})},Bm(r,t){t.onMouseEnter((e,i)=>{r.getAutoCursorMode()!==he.disabled&&r.us.Ss()}),t.onMouseMove((e,i)=>{r.getAutoCursorMode()!==he.disabled&&r.us.Ss()}),t.onMouseLeave(()=>{r.getAutoCursorMode()!==he.disabled&&r.us.Ss()})}};class yy{constructor(t,e){this.Lm=t,this.Rm=e}alter(t){this.Em=this.Em!==void 0?this.Em:this.Rm(),this.zm=t,this.Lm(t)}resetValue(){this.zm!==void 0&&(this.Em!==void 0&&this.isAltered()&&this.Lm(this.Em),this.Em=void 0,this.zm=void 0)}getNormalValue(){return this.Em!==void 0?this.Em:this.Rm()}isAltered(){return this.zm!==void 0&&this.Rm()===this.zm}}class my{constructor(t,e){this.Vm=[],this.Om=t,this.dt=e}update(){return this.Om.getVisible()?!(this.Nm()&&(!this.Gm()||(this.resetTable(),this.Om.Ps(),this.Nm()))&&(this.Wm(),this.Om.Ps(),this.Nm()&&(this.resetTable(),this.Om.Ps(),1))):(this.Gm()&&this.resetTable(),!0)}Gm(){for(let t=0;t<this.Vm.length;t+=1)if(this.Vm[t].isAltered())return!0;return!1}resetTable(){for(let t=0;t<this.Vm.length;t+=1)this.Vm[t].resetValue();return this}Nm(){return((t,e)=>{const i=K(t.getPosition(N(-1,-1),Xt.PaddedBackground),t.scale,e),s=K(t.getPosition(N(1,1),Xt.PaddedBackground),t.scale,e);return i.x<e.x.getInnerStart()||s.x>e.x.getInnerEnd()||i.y<e.y.getInnerStart()||s.y>e.y.getInnerEnd()})(this.Om,this.dt)}Um(){return((t,e)=>{const i=K(t.getPosition(N(-1,-1),Xt.PaddedBackground),t.scale,e),s=K(t.getPosition(N(1,1),Xt.PaddedBackground),t.scale,e);return i.x<e.x.getInnerStart()||s.x>e.x.getInnerEnd()})(this.Om,this.dt)}Ym(){return((t,e)=>{const i=K(t.getPosition(N(-1,-1),Xt.PaddedBackground),t.scale,e),s=K(t.getPosition(N(1,1),Xt.PaddedBackground),t.scale,e);return i.y<e.y.getInnerStart()||s.y>e.y.getInnerEnd()})(this.Om,this.dt)}Hm(t){return this.Vm.push(t),t}}class NS extends my{constructor(){super(...arguments),this.ma=this.Hm(new yy(t=>this.Om.setOrigin(t),()=>this.Om.getOrigin()))}Wm(){const t=this.ma.getNormalValue(),e=N(this.Um()?-t.x:t.x,this.Ym()?-t.y:t.y);this.ma.alter(e)}}class LS extends my{constructor(t,e,i,s){super(t,e),this.$m=this.Hm(new yy(n=>this.Om.setTextFont(o=>o.setSize(n)),()=>this.Om.getTextFont().getSize())),this.Xm=i,this.jm=s}Wm(){const t=this.$m.getNormalValue(),e=this.Xm;if(e<t)for(let i=1;i<=this.jm;i+=1){const s=t-(t-e)*(i/this.jm);if(this.$m.alter(s),this.Om.Ps(),!this.Nm())return}}}const zS={Flip:(r,t)=>new NS(r,t),FontSize:(r=5,t=5)=>(e,i)=>new LS(e,i,r,t)};class BS{constructor(){this.Zm=[]}addRow(...t){return this.Zm.push(t),this}}class $e extends BS{Zu(){const t=this.Zm;return this.Zm=[],t}Qm(){return this.Zm.length=0,this}}class US extends dS{constructor(){super(...arguments),this.Nu=this.qi.cursorResultTableTextFont,this.Dd=0,this.Jm=this.qi.cursorResultTableTextFillStyle}setContent(t){for(let s=0;s<t.length;s+=1){const n=t[s];let o=!1;for(let h=0;h<n.length;h+=1){const a=n[h],l=typeof a=="object"&&"text"in a?a.text:typeof a=="string"?a:void 0,u=typeof a=="object"&&"icon"in a?a.icon:Rn(a)?a:void 0;if((l===void 0||l.length===0)&&!u){o=!0;break}}o||(n.unshift(""),n.push(""))}this.Km();const e=t.length;let i=this.getMembers().length;for(let s=0;s<Math.max(e,i);s+=1){const n=this.getRow(s,!0);if(s>=e)this.getMembers()[s].dispose(),s-=1,i-=1;else{const o=t[s].length;let h=n.getMembers().length;for(let a=0;a<Math.max(o,h);a+=1){const l=t[s][a],u=typeof l=="object"&&"font"in l?l.font:void 0,c=typeof l=="object"&&"fillStyle"in l?l.fillStyle:void 0,d=typeof l=="object"&&"text"in l?l.text:typeof l=="string"?l:void 0,f=typeof l=="object"&&"icon"in l?l.icon:Rn(l)?l:void 0,g=n.getMembers();if(a>=o)n.getMembers()[a].dispose(),a-=1,h-=1;else if(d!==void 0&&d.length>0||f){for(let A=g.length;A<a;A+=1)n.addGap(void 0,void 0);const y=u?this.Nu.withMutations(A=>{for(const v of Object.keys(u)){const w=u[v];A.set(v,w)}return A}):this.Nu,p=c||this.Jm,x=g[a];if(d){let A;x&&x instanceof yu?A=x:(x&&x.dispose(),A=n.addElement(Th,a)),A.setFont(y).setFillStyle(p).setText(d).setTextRotation(this.Dd)}else if(f){let A;x&&x instanceof ol?A=x:(x&&x.dispose(),A=n.addElement(cS,a)),A.setFillStyle(p).setShape(f).setSize({y:y.size,x:y.size}),A.setMargin(5)}}else{for(let p=g.length;p<a;p+=1)n.addGap(void 0,void 0);const y=g[a];y&&y instanceof go||(y&&y.dispose(),n.addGap(void 0,a))}}}}return this.ks.Ss(),this}setTextFillStyle(t){this.Jm=typeof t=="function"?t(this.Jm):t;for(let e=0;e<this.getMemberCount();e+=1){const i=this.getRow(e);for(let s=0;s<i.getMembers().length;s+=1){const n=i.getMembers()[s];n instanceof yu&&n.setFillStyle(this.Jm)}}return this.ks.Ss(),this}getTextFillStyle(){return this.Jm}setTextFont(t){return Qo(t)?this.Nu=t:this.Nu=t(this.Nu),this.ks.Ss(),this}getTextFont(){return this.Nu}setTextRotation(t){return this.Dd=t,this.ks.Ss(),this}getTextRotation(){return this.Dd}Km(){for(let t=0;t<this.Sd.length;t+=1)for(let e=0;e<this.Sd[t].getMembers().length;e+=1)this.Sd[t].getMembers()[e].dispose()}Ps(){for(let t=0;t<this.Sd.length;t+=1)this.Sd[t].setMinimumSize(void 0);super.Ps();for(let t=0;t<this.Sd.length;t+=1)this.Sd[t].setMinimumSize(this.size.x);return super.Ps(),this}}class py{constructor(t,e,i,s,n){this.qm=!0,this.ty=!0,this.Qg=!1,this.ua=N(0,0),this.Xi=!0,this.ks=t,this.renderingScale=e,this.scale=i,this.iy=s,this.sy=new ol(this.ks,this.renderingScale,this.scale,Ft,n).setMouseInteractions(!1).setFillStyle(n.cursorPointMarkerFillStyle).setSize(n.cursorPointMarkerSize).setShape(n.cursorPointMarkerShape),this.Om=new US(this.ks,this.renderingScale,this.scale,this.iy,Ft,n).setMouseInteractions(!1).setBackground(o=>o.setFillStyle(n.cursorResultTableFillStyle).setStrokeStyle(n.cursorResultTableStrokeStyle)).setTextFillStyle(n.cursorResultTableTextFillStyle).setTextFont(n.cursorResultTableTextFont),this.ey=zS.Flip(this.Om,this.scale)}dispose(){return this.sy.dispose(),this.Om.dispose(),this}pointAt(t){return this.ua=t.scale===this.scale?t.location:K(t.location,t.scale,this.scale),this.sy.setPosition(this.ua),this.Om.setPosition(this.ua).setContent(t.resultTableContent),this.ks.Ss(),this}getPosition(){return this.ua}setVisible(t){return this.Xi=t,this.ks.Ss(),this}getVisible(){return this.Xi}setPointMarkerVisible(t){return this.qm=t,this.ks.Ss(),this}getPointMarkerVisible(){return this.qm}setPointMarker(t){return t(this.sy),this.ks.Ss(),this}getPointMarker(){return this.sy}setResultTableVisible(t){return this.ty=t,this.ks.Ss(),this}getResultTableVisible(){return this.ty}setResultTable(t){return t(this.Om),this.ks.Ss(),this}getResultTable(){return this.Om}setAutoFitStrategy(t){return this.ey&&this.ey.resetTable(),this.ey=t?t(this.Om,this.ks.us.dt):void 0,this.ks.Ss(),this}getAutoFitStrategy(){return this.ey!==void 0}Te(){return this.ey&&this.ey.update(),this.Om.setVisible(this.Qg&&this.Xi&&this.ty),this.sy.setVisible(this.Qg&&this.Xi&&this.qm),this.sy.Te(),this.Om.Te(),this}Ps(){return this.sy.Ps(),this.Om.Ps(),this.Qg=((t,e,i=e)=>{const s=e!==i?K(t,e,i):t;return s.x>=i.x.getInnerStart()&&s.x<=i.x.getInnerEnd()&&s.y>=i.y.getInnerStart()&&s.y<=i.y.getInnerEnd()})(this.ua,this.scale),this}}class xy extends py{constructor(){super(...arguments),this.hy=!1}pointAt(t){return this.ny(t.fillStyle),super.pointAt(t)}ny(t){t&&this.hy&&this.Om.setTextFillStyle(t)}setResultTableAutoTextStyle(t){return this.hy=t,this.ks.Ss(),this}getResultTableAutoTextStyle(){return this.hy}}class Sy extends py{setPosition(t){return this.ua=t,this.sy.setPosition(t),this.Om.setPosition(t),this.ks.Ss(),this}}class Mc{constructor(t,e=[]){this.oy=[],this.ly=(i,s)=>(this.oy.forEach(n=>n(i,s)),i),this.iy=t,this.oy=e}}class fh extends Mc{constructor(){super(...arguments),this.uy=(t,e,i,s)=>this.ly(new xy(t,e,i,this.iy,s),s),this.addStyler=t=>new fh(this.iy,this.oy.map(e=>e).concat(t)),this.setResultTableBackground=t=>new fh(t,this.oy.map(e=>e))}}class Pa extends Mc{constructor(){super(...arguments),this.Ay=(t,e,i,s)=>this.ly(new Sy(t,e,i,this.iy,s),s),this.addStyler=t=>new Pa(this.iy,this.oy.map(e=>e).concat(t)),this.setResultTableBackground=t=>new Pa(t,this.oy.map(e=>e))}}const Rc=r=>r.setResultTable(t=>t.setEffect(!0).setOrigin(N(-1,-1)).setMargin(5)),Ay=(r,t)=>r.setPointMarker(e=>e.setFillStyle(t.chartMarkerPointMarkerFillStyle).setSize(t.chartMarkerPointMarkerSize).setShape(t.chartMarkerPointMarkerShape)).setResultTable(e=>e.setEffect(!0).setBackground(i=>i).setOrigin(N(-1,-1)).setMargin(10)),vy=new fh(ji,[Rc]),by=new fh(mu,[Rc,r=>r.setPointMarkerVisible(!1).setResultTable(t=>t.setOrigin(N(0,-1)).setMargin(0).setBackground(e=>{e instanceof mu&&e.setDirection(bt.Down).setPointerLength(10).setPointerAngle(60)}))]),GS=vy,Ec=vy,OS=by,My=new Pa(ji,[Ay,r=>r.setPointMarkerVisible(!1).setResultTable(t=>t.setOrigin(lo.LeftBottom))]),Fi=(r,t,e,i,s)=>({location:r,scale:t,resultTableContent:e,owner:i,fillStyle:s});var Ia;(function(r){r[r.LabelsInsideSlices=0]="LabelsInsideSlices",r[r.LabelsOnSides=1]="LabelsOnSides"})(Ia||(Ia={}));const wc={SortByName:(r,t)=>r.getName().localeCompare(t.getName(),void 0,{numeric:!0}),None:()=>0},kc={NamePlusValue:r=>`${r.getName()}: ${Math.round(r.getAnimatedValue())}`},Tc=(r,t,e,i)=>r.addRow(e.getName()).addRow(e.getAnimatedValue().toString());class cl extends Eh{constructor(){super(...arguments),this.xs="Slice",this.u=0}}const Zd=(r,t)=>{tt(t),r.setExploded(!r.getExploded())};class YS extends cl{}class WS extends YS{constructor(t,e,i,s,n,o,h,a){super(s,o,h,a),this.gy=!1,this.my=ft,this.yy=ft,this.py=this.u,this.Sy=this.gy?1:0,this.vy=this.getVisible(),this.by=yr(()=>this.Ji.us.Ss()),this.xy=yr(()=>this.Ji.us.Ss()),this.My=()=>{this._y=void 0},this.wy=()=>{this.Cy=void 0},this.index=t,this.Ji=s,this.scale=n,this.Ki=o,this.ky=e.Jc(n).cs(this.getHighlight()),this.ds(this.ky),this.Ue=i.Pr(n).cs(this.getHighlight()),this.ds(this.Ue,{isText:!0}),this.onMouseClick(Zd),this.onTouchEnd(Zd)}setValue(t){return this.Ji.getAnimationsEnabled()?this.vy&&this.Ty(this.py,t):this.py=t,this.u=t,this.Ji.us.Ss(),this}getValue(){return this.u}setExploded(t){if(t&&this.Ji.getMultipleSliceExplosion()===!1){const e=this.Ji.getSlices();for(let i=0;i<e.length;i+=1)e[i]!==this&&e[i].getExploded()&&e[i].setExploded(!1)}return this.Ji.getAnimationsEnabled()?(this.Cy&&this.Cy.finish(),this.Cy=this.xy(300,us.ease)([[this.Sy,t?1:0]],([e])=>{this.Sy=e,this.Ji.us.Ss()}),this.Cy.onEveryAnimationEnd(this.wy),this.gy=!this.gy):this.Ji.getMultipleSliceExplosion()!==!1||t?(this.Sy=this.gy?0:1,this.gy=!this.gy):(this.Sy=0,this.gy=!this.gy),this.Ji.us.Ss(),this}getExploded(){return this.gy}setVisible(t){return this.vy=t,t===!1?this.Ji.getAnimationsEnabled()&&this.py>0?(this._y&&(this._y.finish(!1),this._y=void 0),this.Ty(this.py,0,()=>super.setVisible(!1))):(this.py=0,super.setVisible(!1)):this.Ji.getAnimationsEnabled()?(this._y&&(this._y.finish(!1),this._y=void 0),super.setVisible(!0),this.Ty(this.py,this.u)):(this.py=this.u,super.setVisible(!0)),this}Ty(t,e,i){this._y=this.by(300,us.ease)([[t,e]],([s])=>{this.py=s,this.Ji.us.Ss()}),this._y.onEveryAnimationEnd(this.My),i&&this._y.onAnimationEnd(i)}setStyle(t,e,i,s){this.my=t,this.yy=i,this.ky.Ce(this.my).we(e),this.Ue.Ce(this.yy).Oh(s);for(let n=0;n<this.Qi.length;n+=1)this.styleAttachedEntry(this.Qi[n])}getAnimatedValue(){return this.py}getAnimatedExplosion(){return this.Sy}attach(t,e=!0,i=!1){return super.attach(t,e,i),this.styleAttachedEntry(t,e,i),this}styleAttachedEntry(t,e=!0,i=!1){ge(t,this.qi,i,{fill:this.my,stroke:this.ky.ao()})}}const HS=(r,t,e)=>gt(t,St(lc(.5*(r.Jl()+r.Ti())*Math.PI/180),e)),XS=(r,t,e,i,s,n)=>{const o=r.length;let h=90;for(let a=0;a<o;a+=1){const l=r[a],u=h-360*t[a],c=l.getAnimatedExplosion();if(c===0||o===1)l.ky.Fe(e);else{const d=gt(e,St(lc(.5*(h+u)*Math.PI/180),n*c));l.ky.Fe(d)}l.ky.eu(h).ze(u).ru(i).nu(i).ou(s),h=u}},Qd=r=>{const t=r.getSlices();for(let e=0;e<t.length;e+=1)t[e].setExploded(!1)};class $S extends Ds{constructor(t,e,i,s,n,o,h){super(t,e,i,e.vm("pieChart bg",0),s,e.us.qi.pieChartBackgroundFillStyle,e.us.qi.pieChartBackgroundStrokeStyle,e.us.qi.pieChartTitleFont,e.us.qi.pieChartTitleFillStyle,o),this.Fy=[],this.Iy=wc.SortByName,this.Yl=0,this.Py=this.qi.pieChartSliceFillStylePalette,this.Dy=this.qi.pieChartSliceStrokeStyle,this.By=!0,this.Ly=this.qi.pieChartSliceLabelFont,this.Ry=this.qi.pieChartSliceLabelFillStyle,this.Ey=0,this.zy=!1,this.Vy=20,this.Oy=!0,this.Ny=!0,this.Gy=he.onHover,this.Wy=Tc,this.Uy=u=>{const c=this.Fy.indexOf(u);c>=0&&(this.Fy.splice(c,1),this.Yy())},this.us.Nn(ot.af),this.Hy=e.$y("pieChart bottom",0),this.Xy=e.$y("pieChart top",1),this._m.Rh("Pie Chart"),this.Sm(n,this.pixelScale),this.onBackgroundMouseDoubleClick(Qd);const a=Ci(new Lg(Qd));this.onBackgroundTouchStart(a.onTouchStart),this.onBackgroundTouchMove(a.onTouchMove),this.onBackgroundTouchEnd(a.onTouchEnd),this.jy=e.Zy();const l=qt(h?h.autoCursorBuilder:void 0,Ec);this.Pm=l.uy(this.jy,this.uiScale,this.uiScale,this.qi),this.setAnimationsEnabled((h==null?void 0:h.disableAnimations)!==!0&&(h==null?void 0:h.animationsEnabled)!==!1)}setAutoCursor(t){return this.Pm&&t(this.Pm),this.us.Ss(),this}getAutoCursor(){return this.Pm}setAutoCursorMode(t){return this.Gy=t,this.us.Ss(),this}getAutoCursorMode(){return this.Gy}setCursorResultTableFormatter(t){return this.Wy=t,this.us.Ss(),this}addSlice(t,e){const i=new WS(this.Ey,this.Hy,this.Xy,this,this.pixelScale,this.Uy,this.qi,this.us.es);this.Ey+=1,i.setName(t);const s=this.th;return this.th=!1,i.setValue(e),this.th=s,i.setEffect(this.Oy),this.Qy(i),this.Fy.push(i),this.Yy(),i.setHighlightOnHover(this.By),i.onMouseMove(()=>{this.Gy&&this.us.Ss()}),i}addSlices(t){const e=[];for(let i=0;i<t.length;i+=1)e.push(this.addSlice(t[i].name,t[i].value));return e}getSlices(){return this.Fy}setMultipleSliceExplosion(t){return this.zy=t,this}getMultipleSliceExplosion(){return this.zy}setInnerRadius(t){return this.Yl=t,this.us.Ss(),this}getInnerRadius(){return this.Yl}setSliceExplosionOffset(t){return this.Vy=t,this.us.Ss(),this}getSliceExplosionOffset(){return this.Vy}setLUT(t){return this.Nd=t,this.us.Ss(),this}setSliceFillStyle(t){this.Py=t;for(let e=0;e<this.Fy.length;e+=1)this.Qy(this.Fy[e]);return this.us.Ss(),this}getSliceFillStyle(){return this.Py}setSliceStrokeStyle(t){this.Dy=typeof t=="function"?t(this.Dy):t;for(let e=0;e<this.Fy.length;e+=1)this.Qy(this.Fy[e]);return this.us.Ss(),this}getSliceStrokeStyle(){return this.Dy}setSliceEffect(t){return this.Oy=t,this.Fy.forEach(e=>e.es.ns.ps(t)),this.us.Ss(),this}getSliceEffect(){return this.Oy}setSliceSorter(t){return this.Iy=t,this.Fy=this.Fy.sort(this.Iy),this.us.Ss(),this}getSliceSorter(){return this.Iy}setLabelFillStyle(t){this.Ry=typeof t=="function"?t(this.Ry):t;for(let e=0;e<this.Fy.length;e+=1)this.Qy(this.Fy[e]);return this.us.Ss(),this}getLabelFillStyle(){return this.Ry}setLabelFont(t){this.Ly=typeof t=="function"?t(this.Ly):t;for(let e=0;e<this.Fy.length;e+=1)this.Qy(this.Fy[e]);return this.us.Ss(),this}getLabelFont(){return this.Ly}setLabelEffect(t){return this.Ny=t,this.Fy.forEach(e=>e.es.rs.ps(t)),this.us.Ss(),this}getLabelEffect(){return this.Ny}setLabelFormatter(t){return this.Jy=t,this.us.Ss(),this}getLabelFormatter(){return this.Jy}setSliceHighlightOnHover(t){return this.By=t,this.Fy.forEach(e=>e.setHighlightOnHover(t)),this}Te(t){super.Te(t),ii.Fm(this._m,this.bm),super.pm();const e=ii.Tm(this._m,this.bm),i=N(this.pixelScale.x.getInnerInterval()-(this.ya.left+this.ya.right),this.pixelScale.y.getInnerInterval()-(this.ya.bottom+this.ya.top+e)),s=N(this.ya.left+i.x/2,this.ya.bottom+i.y/2);if(this.Nd){const l=this.Nd;this.Fy.forEach(u=>{this.Qy(u,new H({color:l.getColors(u.getAnimatedValue())}))})}for(let l=0;l<this.Fy.length;l+=1){const u=this.Fy[l].getAnimatedValue()>0;this.Fy[l].ky.setVisible(u),this.Fy[l].Ue.setVisible(u)}this.Fy=this.Fy.sort(this.Iy);const n=this.Fy.filter(l=>l.getAnimatedValue()>0);let o=0;for(let l=0;l<n.length;l+=1)o+=n[l].getAnimatedValue();const h=[];for(let l=0;l<n.length;l+=1)h.push((a=n[l].getAnimatedValue())>0?a/o:0);var a;for(let l=0;l<n.length;l+=1){const u=n[l];u.Ue.Rh(this.Jy(u,h[l])).Ps()}oi.Im(this,!1,!1,this.Fy,void 0,(l,u)=>Fi(u,this.engine.scale,this.Wy(new $e,this,l,h[n.indexOf(l)]||0).Zu(),l,void 0)),this.Ky(n,h,s,i)}Qy(t,e=this.Py(t.index,t)){t.setStyle(e,this.Dy,this.Ry,this.Ly)}Yy(){this.Fy=this.Fy.sort(this.Iy),this.us.Ss()}Zd(){return this.Fy}dispose(){return super.dispose(),this.Fy.slice().forEach(t=>t.dispose()),this.Pm.dispose(),this.Xy.W(),this.Hy.W(),this.jy.W(),this}}const ms={UserSeries:{type:"ApplicationType",args:{type:"UserSeries"}},InternalUI:{type:"ApplicationType",args:{type:"InternalUI"}}},Qh=(...r)=>{const t=[];return r.forEach(e=>{var i;e&&typeof(i=e)=="object"&&i&&"pattern"in i&&t.push({type:"DataPattern",args:e})}),t};class Ry extends $S{constructor(t,e,i,s,n,o,h){super(t,e,i,s,n,o,h),this.Jy=kc.NamePlusValue,this.qy=[],this.tp=40,this.ip=5,this.sp=10,this.ep=this.qi.pieChartConnectorStrokeStyle,this.setPadding({bottom:50})}setLabelConnectorStyle(t){this.ep=t;for(let e=0;e<this.qy.length;e+=1)this.qy[e].Re(this.ep);return this.us.Ss(),this}getLabelConnectorStyle(){return this.ep}setLabelSliceOffset(t){return this.tp=t,this.us.Ss(),this}getLabelSliceOffset(){return this.tp}setLabelConnectorGapStart(t){return this.ip=t,this.us.Ss(),this}getLabelConnectorGapStart(){return this.ip}setLabelConnectorEndLength(t){return this.sp=t,this.us.Ss(),this}getLabelConnectorEndLength(){return this.sp}Ky(t,e,i,s){const n=this.Ly.getSize(),o=this.tp,h=this.sp,a=this.ip,l=Math.min(this.Vy,o-a);let u=0;if(t.length===1)u=t[0].Ue.jc().x;else for(let y=0;y<t.length;y+=1)u=Math.max(u,t[y].Ue.jc().x);const c=Math.max(.5*(Math.min(s.x-2*u-2*h,s.y-2*n)-2*o),0);XS(t,e,i,c,this.Yl,l);let d=90;const f=t.map((y,p)=>{const x=360*e[p],A=d-x,v=lc(hs(.5*(d+A))),w=v.x>=0?-1:1,E=gt(gt(i,St(v,c+o)),{x:w*-h,y:0});d=A;const C={x:w,y:0};y.Ue.Fe(E).Ea(C),y.Ue.Ps();const k=ce(y.Ue.We());return{position:E,alignment:C,shape:y.Ue,boundaries:k,sliceAngleVec:v,slice:y}}),g=[];for(let y=0;y<f.length;y+=1){const p=f[y],x=g[g.length-1];x&&Pg([x.boundaries,p.boundaries])!==!1?p.shape.setVisible(!1):(g.push(p),p.shape.setVisible(!0))}for(let y=0;y<this.qy.length;y+=1)this.qy[y].setVisible(!1);g.forEach((y,p)=>{const x=y.slice.ky,A=HS(x,i,c+a+l*y.slice.getAnimatedExplosion()),v=ac(y.position.y,A,i),w=y.position;this.hp([A,v,w])})}getMinimumSize(){return N(500,300)}hp(t){let e;for(let i=0;i<this.qy.length;i+=1)if(!this.qy[i].getVisible()){e=this.qy[i].setVisible(!0);break}e===void 0&&(e=this.Xy.rp(this.pixelScale,void 0,[ms.InternalUI]).Re(this.ep).setMouseInteractions(!1),this.qy.push(e)),e.Nt().nl(t)}}const xu=r=>{if(pi(r)){const t=r.getThickness(),e=r.getFillStyle();if(Nt(e))return t===1?Ld:new Hg({size:t,fillStyle:e,shape:"sphere"})}return Ld};class Ir{constructor(t,e,i,s){this.op=[],this.ap=new Map,this.lp=t,this.up=e,this.cp=i,this.dp=s}fp(){this.cp&&this.cp();const t=[];return{add:(e,i)=>{t.push({instanceUniqueProperties:e,instanceSharedProperties:i})},finishPlot:()=>{const e=[];let i=[];t.forEach(o=>{const h=e.find(a=>((l,u)=>{const c=Object.keys(l);for(const d of c)if(l[d]!==u[d])return!1;return!0})(a.sharedProperties,o.instanceSharedProperties));h?h.instances.push(o.instanceUniqueProperties):e.push({sharedProperties:o.instanceSharedProperties,instances:[o.instanceUniqueProperties]})});const s=this.op.slice(),n=[];e.forEach(o=>{let h=s.pop();h||(h=this.lp(),this.op.push(h));const a=[],l=h.Ap().slice();o.instances.forEach((c,d)=>{const f=l.shift();a.push({...c,existingMember:f})});const u=this.up(h,a,o.sharedProperties);i=ai(i,u,{canReturnB:!0});for(let c=0;c<o.instances.length;c+=1)n.push({No:o.instances[c].No,collection:h,member:u[c]});l.forEach(c=>{h==null||h.bd(c)})}),s.forEach(o=>{o.dispose();const h=this.op.indexOf(o);h<0?qs(0,()=>{}):this.op.splice(h,1)}),n.forEach(o=>{const h=this.ap.get(o.No);h&&o.collection.us.qn({entity:h.collection,collectionMember:h.member},{entity:o.collection,collectionMember:o.member})}),this.ap.clear(),n.forEach(o=>{this.ap.set(o.No,o)}),this.dp&&this.dp(this.op,i)}}}gp(){this.op.forEach(t=>{t.dispose()}),this.op.length=0}}class Ms{constructor(t){this.mp=[],this.yp=t}fp(){return this.pp(),{add:()=>this.sl(),finishPlot:()=>{this.Sp()}}}sl(){let t=this.mp.find(e=>e.isFree);return t||(t={isFree:!1,shape:this.yp()},this.mp.push(t)),t.isFree=!1,t.shape}pp(){this.mp.forEach(t=>{t.isFree=!0})}Sp(){this.mp.filter(t=>t.isFree).forEach(t=>{t.shape.dispose(),this.mp.splice(this.mp.indexOf(t),1)})}gp(){this.mp.forEach(t=>t.shape.dispose()),this.mp.length=0}}class jS{constructor(t,e,i,s,n,o,h,a,l,u){this.D=new Xe,this.u=0,this.Xi=!0,this.$i=!1,this.Ss=t,this.vp=e,this.bp=i,this.xp=s,this.Mp=n,this._p=o,this.Dd=h,this.Jm=a,this.wp=l,this.Ju=u}setValue(t){return t===this.u||(this.u=t,this.Ss(),this.D.emit("valueChange",this,this.u)),this}getValue(){return this.u}setTickStyle(t){return this.bp=typeof t=="function"?t(this.bp):t,this.Ss(),this}getTickStyle(){return this.bp}setTickLength(t){return this.xp=t,this.Ss(),this}getTickLength(){return this.xp}setGridStrokeStyle(t){return this.Mp=typeof t=="function"?t(this.Mp):t,this.Ss(),this}getGridStrokeStyle(){return this.Mp}setTextPadding(t){return this._p=t,this.Ss(),this}getTextPadding(){return this._p}setTextRotation(t){return this.Dd=t,this.Ss(),this}getTextRotation(){return this.Dd}setTextFillStyle(t){return this.Jm=typeof t=="function"?t(this.Jm):t,this.Ss(),this}getTextFillStyle(){return this.Jm}setTextFont(t){return this.wp=typeof t=="function"?t(this.wp):t,this.Ss(),this}getTextFont(){return this.wp}setTextFormatter(t){return this.Ju=t,this.Ss(),this}onValueChange(t){return this.D.on("valueChange",t)}offValueChange(t){return this.D.off(t,"valueChange")}dispose(){return this.$i||(this.$i=!0,this.vp(),this.Ss(),this.D.emit("dispose",this)),this}isDisposed(){return this.$i}onDispose(t){return this.D.on("dispose",t)}offDispose(t){return this.D.off(t,"dispose")}setVisible(t){const e=this.Xi!==t;return this.Xi=t,e&&(this.D.emit("visibleStateChanged",this,this.Xi),this.Ss()),this}getVisible(){return this.Xi}onVisibleStateChanged(t){return this.D.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.D.off(t,"visibleStateChanged")}}class Gl extends bn{constructor(t,e,i,s,n,o,h,a,l){super(t,e,i,s,a,{numeric:e.Cp({x:t.us.qi.xAxis3DNumericTicks,y:t.us.qi.yAxis3DNumericTicks,z:t.us.qi.zAxis3DNumericTicks}),datetime:e.Cp({x:t.us.qi.xAxis3DDateTimeTicks,y:t.us.qi.yAxis3DDateTimeTicks,z:t.us.qi.zAxis3DDateTimeTicks}),time:e.Cp({x:t.us.qi.xAxis3DTimeTicks,y:t.us.qi.yAxis3DTimeTicks,z:t.us.qi.zAxis3DTimeTicks})},{type:"linear"}),this.Tf=[],this.kp=()=>{},this.Tp=()=>{},this.Fp=()=>{},this.Ip=()=>{},this.chart=t,this.At=n,this.Pp=o,this.Dp=h,this.Bp=this.At.dt;const u=this.wh.Cp({x:this.qi.xAxis3DStrokeStyle,y:this.qi.yAxis3DStrokeStyle,z:this.qi.zAxis3DStrokeStyle});this.Lp=this.At.rp([ms.InternalUI]).Re(u).Rp(xu(u)).setMouseInteractions(!1),this.Lh=this.Pp.Pr(this.Dp).setMouseInteractions(!1).Ce(e.Cp({x:t.us.qi.xAxis3DTitleFillStyle,y:t.us.qi.yAxis3DTitleFillStyle,z:t.us.qi.zAxis3DTitleFillStyle})).Oh(e.Cp({x:t.us.qi.xAxis3DTitleFont,y:t.us.qi.yAxis3DTitleFont,z:t.us.qi.zAxis3DTitleFont})),this.Ep=new Ms(()=>this.Pp.Pr(this.Dp)),this.zp=new Ir(()=>this.At.Lg().setMouseInteractions(!1),(c,d,f)=>(c.Nt().Re(f.lineStyle),d.map(({positions:g,existingMember:y})=>y||c.nl(g)))),this.es=l,this.Wh=this.es.yg([this.Lh]).ps(s.effectsText),this.Lp.setMouseEnterEventHandler(this.kp).setMouseLeaveEventHandler(this.Tp).setMouseDragEventHandler(this.Fp).setMouseDragStopEventHandler(this.Ip),i.ig=this}setTickStrategy(t,e){return super.Fh(t,e)}getTickStrategy(){return this.je}addCustomTick(){const t=new jS(()=>this.chart.us.Ss(),()=>{const e=this.Tf.indexOf(t);e>=0&&this.Tf.splice(e,1)},this.qi.xAxis3DNumericTicks.majorTickStyle.tickStyle,this.qi.xAxis3DNumericTicks.majorTickStyle.tickLength,this.qi.xAxis3DNumericTicks.majorTickStyle.gridStrokeStyle,this.qi.xAxis3DNumericTicks.majorTickStyle.tickPadding,this.qi.xAxis3DNumericTicks.majorTickStyle.labelRotation,this.qi.xAxis3DNumericTicks.majorTickStyle.labelFillStyle,this.qi.xAxis3DNumericTicks.majorTickStyle.labelFont,e=>this.formatValue(e));return this.Tf.push(t),this.chart.us.Ss(),t}setStrokeStyle(t){return this.Lp.Re(t).Rp(xu(this.Lp.uu())),this.chart.us.Ss(),this}getStrokeStyle(){return this.Lp.uu()}setMouseInteractions(t){return this}setVisible(t){return super.setVisible(t),this.Lp.setVisible(t),t===!1&&(this.zp.gp(),this.Ep.gp()),this.Pp.Ss(),this}_g(){return this.chart.getSeries()}Vp(t){return Math.abs(this.dt.tt(t)*this.At.Op(1))}Cr(t,e,i){const s=Math.abs(this.dt.tt(e-t)*this.At.Op(1));return{min:t-i*s,max:e+i*s}}ur(t,e){return new qS(e,t,this.Pp,this.Dp,this.At)}cr(t,e){const i=this.Np(e,t.u,t.Sh.lr.tickLength,t.Sh.lr.tickPadding);return t.Ue.Fe(i.labelPosition).Ea(i.labelAlignment),i}Np(t,e,i,s){const{wuSize:n,start:o,end:h,tickDirection3D:a,tickDirection2D:l}=t,u=(e-this.dt.getInnerStart())/(this.dt.getInnerEnd()-this.dt.getInnerStart()),c=J.addVec(Dl(o,h,u),J.multiplyVec(J.multiply(a,this.At.Op(.5*this.Lp.uu().getThickness())),n)),d=J.addVec(c,J.multiplyVec(J.multiply(a,this.At.Op(i)),n)),f=this.At.Gp(d)||N(0,0);return{labelPosition:gt(K(f,this.chart.engine.scale,this.Dp),St(l,s)),labelAlignment:{x:-l.x,y:-l.y},posTickEnd3D:d,posTickStart3D:c,tickPositionRelative:u}}Wp(t,e,i){const{wuSize:s,start:n,end:o,tickDirection3D:h}=e,a=(t-this.dt.getInnerStart())/(this.dt.getInnerEnd()-this.dt.getInnerStart()),l=J.addVec(Dl(n,o,a),J.multiplyVec(J.multiply(h,this.At.Op(.5*this.Lp.uu().getThickness())),s)),u=J.addVec(l,J.multiplyVec(J.multiply(h,this.At.Op(10)),s)),c=this.At.Gp(l)||N(0,0),d=this.At.Gp(u)||N(0,0);return this.Pp.Ee(this.Dp).Ve(c).ze(d).Re(new Tt({fillStyle:new H({color:vp(120*i)}),thickness:1}))}_r(t,e){return JS(t,e,this.dt)}Te(t){if(!this.Xi)return;const e=Math.min(this.Ih,this.Ph),i=Math.max(this.Ih,this.Ph),s=this.Bp,n=yt(s.x.et(),s.y.et(),s.z.et());let o,h;this.Yp()?(o=yt(s.x.getInnerEnd(),s.y.getInnerStart(),s.z.getInnerStart()),h=yt(s.x.getInnerEnd(),s.y.getInnerStart(),s.z.getInnerEnd())):(o=yt(s.x.getInnerStart(),s.y.getInnerStart(),s.z.getInnerStart()),h=this.wh.Hp(yt(s.x.getInnerEnd(),s.y.getInnerEnd(),s.z.getInnerEnd()),o));const a=this.wh.Jd,l=this.At.Gp(o)||N(0,0),u=this.At.Gp(h)||N(0,0),c=Dl(o,h,.5),d=J.addVec(c,J.multiplyVec(J.multiply(a,-1),n)),f=this.At.Gp(c)||N(0,0),g=this.At.Gp(d)||N(0,0),y=Li(Ut(K(f,this.chart.engine.scale,this.Dp),K(g,this.chart.engine.scale,this.Dp)));this.Lp.Nt().nl([o,h]);const{gridlinePositionA:p,gridlinePositionB:x,gridlinePositionC:A}=this.wh.$p(t),v=_=>({x:_.x===-1?this.Bp.x.getInnerStart():_.x===1?this.Bp.x.getInnerEnd():0,y:_.y===-1?this.Bp.y.getInnerStart():_.y===1?this.Bp.y.getInnerEnd():0,z:_.z===-1?this.Bp.z.getInnerStart():_.z===1?this.Bp.z.getInnerEnd():0}),w=v(p),E=v(x),C=v(A),k={physicalAxisSize:Pr(Ut(l,u)),wuSize:n,start:o,end:h,tickDirection3D:a,tickDirection2D:y,gridlinePositionA:w,gridlinePositionB:E,gridlinePositionC:C},F=this.qh(k),m=this.zp.fp();for(const[_,V]of this.Ze)for(const[,B]of V){const I=F.get(B);if(!I)continue;const L=this.Xp(k,I);m.add({No:0,positions:[L.tickStroke.start,L.tickStroke.end]},{lineStyle:_.lr.tickStyle}),L.gridStroke&&m.add({No:0,positions:L.gridStroke},{lineStyle:_.lr.gridStrokeStyle})}const S=this.Ep.fp(),b={x:0,y:0};this.Tf.forEach(_=>{if(!_.Xi||_.u<e||_.u>i)return;const V=this.Np(k,_.u,_.xp,_._p),B=this.Xp(k,V),I=S.add().Fe(V.labelPosition).Ea(V.labelAlignment).Ce(_.Jm).Oh(_.wp).Rh(_.Ju(_.u)).Nh(_.Dd).Ps().oi();b.x=Math.max(b.x,I.x),b.y=Math.max(b.y,I.y),m.add({No:0,positions:[B.tickStroke.start,B.tickStroke.end]},{lineStyle:_.bp}),B.gridStroke&&m.add({No:0,positions:B.gridStroke},{lineStyle:_.Mp})}),S.finishPlot(),m.finishPlot();const M=this.gr((_,V)=>{const B=V.Ue.oi();return _.x=Math.max(_.x,B.x),_.y=Math.max(_.y,B.y),_},{x:b.x,y:b.y}),R=Math.atan((u.y-l.y)/(u.x-l.x));this.Lh.Ea({x:0,y:0}).Nh(180*-R/Math.PI);const T=J.addVec(c,J.multiplyVec(J.multiply(a,this.At.Op(.5*this.Lp.uu().getThickness()+this.yr((_,V)=>Math.max(_,V.tickLength),0))),n)),z=this.At.Gp(T)||N(0,0),P=gt(K(z,this.chart.engine.scale,this.Dp),gt(gt(zi(M,y),St(y,this.yr((_,V)=>Math.max(_,V.labelPadding),0))),zi(St(this.Lh.Ps().oi(),.5),y)));this.Lh.Fe(P),this.Lp.jp={overrideFollowing:!1,skipMousePicking:!1}}Xp(t,e){const{gridlinePositionA:i,gridlinePositionB:s,gridlinePositionC:n}=t,o=e.posTickStart3D,h=e.posTickEnd3D,a=e.tickPositionRelative;let l;return De(a,0)||De(a,1)||(l=[this.Zp()?{...i,x:o.x}:this.Qp()?{...i,y:o.y}:this.Yp()?{...i,z:o.z}:{x:0,y:0,z:0},this.Zp()?{...s,x:o.x}:this.Qp()?{...s,y:o.y}:this.Yp()?{...s,z:o.z}:{x:0,y:0,z:0},this.Zp()?{...n,x:o.x}:this.Qp()?{...n,y:o.y}:this.Yp()?{...n,z:o.z}:{x:0,y:0,z:0}]),{gridStroke:l,tickStroke:{start:o,end:h}}}Uh(){super.Uh(),this.zp.gp(),this.Ep.gp()}Zp(){return this.wh.Zp()}Qp(){return this.wh.Qp()}Yp(){return this.wh.Yp()}}class qS extends wh{constructor(t,e,i,s,n,o){super(t,e,i,s,o),this.Jp=n}}const JS=(r,t,e)=>Rt(r+.1*(t-r)+Math.abs(e.et())/100*Math.sign(t-r),Math.min(r,t),Math.max(r,t)),Po=(r,t,e,i)=>({pr:()=>{const s=r();let n;for(const o of s){if(!o.Kp())continue;const h=t(o);n=h===void 0?n:n!==void 0?Math.min(n,h):h}return n},Sr:()=>{const s=r();let n;for(const o of s){if(!o.Kp())continue;const h=e(o);n=h===void 0?n:n!==void 0?Math.max(n,h):h}return n},br:()=>{const s=r();let n;for(const o of s){if(!o.Kp())continue;const h=i(o);n=h===void 0?n:n!==void 0?Math.max(n,h):h}return n}}),ZS=r=>({...Po(r,t=>t.getYMin(),t=>t.getYMax(),t=>t.br().y),Cp:t=>t.y,Hp:(t,e)=>({x:e.x,y:t.y,z:e.z}),Jd:yt(-1,0,0),$p:t=>{const e={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:yt(e.x,0,e.z),gridlinePositionB:yt(e.x,0,-e.z),gridlinePositionC:yt(-e.x,0,-e.z)}},Zp:()=>!1,Qp:()=>!0,Yp:()=>!1}),QS=r=>({...Po(r,t=>t.getZMin(),t=>t.getZMax(),t=>t.br().z),Cp:t=>t.z,Hp:(t,e)=>({x:e.x,y:e.y,z:t.z}),Jd:yt(1,0,0),$p:t=>{const e={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:yt(e.x,-e.y,0),gridlinePositionB:yt(e.x,e.y,0),gridlinePositionC:yt(-e.x,e.y,0)}},Zp:()=>!1,Qp:()=>!1,Yp:()=>!0});class Io extends Eh{constructor(t,e,i,s,n){super(t,e,s,n),this.qp=Fo,this.tS=!0,this.iS=!0,this.Ji=t,this.At=i,this.ts=new Map,this.onMouseWheel(this.Ji.sS),this.onMouseDrag(this.Ji.eS),this.onTouchStart(this.Ji.hS.onTouchStart),this.onTouchMove(this.Ji.hS.onTouchMove),this.onTouchEnd(this.Ji.hS.onTouchEnd)}setAutoScrollingEnabled(t){return this.tS=t,this.Ji.us.Ss(),this}getAutoScrollingEnabled(){return this.tS}setColorShadingStyle(t){return this.qp=t,this.ts.forEach((e,i)=>i.rS(t)),this.At.Ss(),this}getColorShadingStyle(){return this.qp}setDepthTestEnabled(t){return this.iS=t,this.ts.forEach((e,i)=>i.nS(t)),this.At.Ss(),this}getDepthTestEnabled(){return this.iS}oS(){}Te(){}dp(){}getXMax(){const t=this.Na;return t?t.bt():void 0}getXMin(){const t=this.Na;return t?t.vt():void 0}getYMax(){const t=this.Na;return t?t.Mt():void 0}getYMin(){const t=this.Na;return t?t.xt():void 0}getZMax(){const t=this.Na;return t?t.aS():void 0}getZMin(){const t=this.Na;return t?t.lS():void 0}br(){const t=this.Na;return t?yt(t.vl(),t.bl(),t.uS()):yt(0,0,0)}}class KS extends Io{constructor(t,e,i,s,n,o){super(t,e,i,s,o),this.xs="Box Series 3D",this.cS=.25,this.dS=!1,this.Gd=()=>Qe(this.be),this.be=kt(this.qi.boxSeries3DFillStyle,n),this.Na=this.At.AS().nS(this.iS).Ce(this.be).fS(this.cS).cs(this.getHighlight()),this.ds(this.Na)}invalidateData(t){const e=t.length;if(e===0)return this;this.dS&&this.Ji.us.Nn(ot.vf);const i=t[0];if(!i)return this;let s;if("xMin"in i||"yMin"in i||"zMin"in i||"xMax"in i||"yMax"in i||"zMax"in i){s=[];for(let n=0;n<e;n+=1){const o=t[n],h="xMin"in o&&"xMax"in o,a="yMin"in o&&"yMax"in o,l="zMin"in o&&"zMax"in o;s[n]={color:o.color,value:o.value,id:o.id,xCenter:h?(o.xMin+o.xMax)/2:void 0,yCenter:a?(o.yMin+o.yMax)/2:void 0,zCenter:l?(o.zMin+o.zMax)/2:void 0,xSize:h?o.xMax-o.xMin:void 0,ySize:a?o.yMax-o.yMin:void 0,zSize:l?o.zMax-o.zMin:void 0}}}else s=t;return this.Na.gS(s.slice()),this.Ji.us.Ss(),this.dS=!0,this}setFillStyle(t){return this.be=typeof t=="function"?t(this.be):t,this.Na.Ce(t),this.Ji.us.Ss(),this}getFillStyle(){return this.be}setRoundedEdges(t){return t!==void 0&&isNaN(t)&&(console.error("'BoxSeries3D.setRoundedEdges | NaN was supplied.'"),t=void 0),this.cS=t!==void 0?Rt(t,0,1):void 0,this.Na.fS(this.cS),this.At.Ss(),this}getRoundedEdges(){return this.cS}Kp(){return this.tS&&this.getVisible()}Ie(t,e){t.cs(e),this.Ji.us.Ss()}Te(){super.Te(),this.Na.Ps(!1)}attach(t,e=!0,i=!1){return super.attach(t,e,i),ge(t,this.qi,i,{fill:this.be}),this}}class Ey extends Io{constructor(t,e,i,s,n){super(t,e,i,s,n),this.dS=!1,this.Gd=()=>Qe(this.lu.getFillStyle())}setStrokeStyle(t){this.lu=typeof t=="function"?t(this.lu):t;const e=this.lu;return this.Na.Re(e),this.At.Ss(),this}getStrokeStyle(){return this.lu}add(t){return this.dS&&this.Ji.us.Nn(ot.vf),this.dS=!0,(t=Array.isArray(t)?t:[t])?(this.Na.nl(t.slice()),this.At.Ss(),this):this}clear(){return this.Na.Nt(),this}getPointAmount(){const t=this.Na;return t.ol()+t.al()}Kp(){return this.tS&&this.getPointAmount()>0&&this.getVisible()}Ie(t,e){t.cs(e),this.At.Ss()}attach(t,e=!0,i=!1){return super.attach(t,e,i),ge(t,this.qi,i,{stroke:this.lu}),this}}class tA extends Ey{constructor(t,e,i,s,n,o){super(t,e,i,s,o),this.xs="Line Series 3D",this.lu=kt(s.lineSeries3DStrokeStyle,n),this.mS=Si.pointStyle3D,this.yS(this.lu),this.Na=this.At.rp([ms.UserSeries]).nS(this.iS).Re(this.lu).Rp(this.mS).cs(this.getHighlight()),this.ds(this.Na)}setStrokeStyle(t){super.setStrokeStyle(t),this.yS(this.lu);const e=this.mS;return this.Na.Rp(e),this}yS(t){const e=new Ra.Triangulated({shape:"sphere",fillStyle:t.getFillStyle(),size:t.getThickness()});this.mS=e}}class eA extends Ey{constructor(t,e,i,s,n,o){super(t,e,i,s,o),this.xs="Point Line Series 3D",this.Gd=()=>Qe(this.lu.getFillStyle())||Qe(this.mS.getFillStyle()),this.mS=kt(s.pointLineSeries3DPointStyle,n),this.lu=kt(s.lineSeries3DStrokeStyle,n),this.pS(),this.Na=this.At.rp([ms.UserSeries]).nS(this.iS).Re(this.lu).Rp(this.mS).cs(this.getHighlight()),this.ds(this.Na)}setPointStyle(t){return this.mS=typeof t=="function"?t(this.mS):t,this.pS(),this.Na.Rp(this.mS),this.At.Ss(),this}getPointStyle(){return this.mS}setStrokeStyle(t){super.setStrokeStyle(t);const e=this.lu,i=Math.abs(e.getThickness()),s=this.mS,n=s.getSize();i>(typeof n=="object"?Math.max(n.x,n.y,n.z):n)&&(this.mS=s.setSize(i)),this.pS();const o=this.mS;return this.Na.Rp(o),this.At.Ss(),this}pS(){const t=this.mS,e=t.getSize();this.mS=t.setSize(e)}Ie(t,e){t.cs(e),this.At.Ss()}}class iA extends Io{constructor(t,e,i,s,n,o){super(t,e,i,s,n),this.dS=!1,(o!=null&&o.individualPointSizeAxisEnabled||o!=null&&o.individualPointSizeEnabled)&&this.Ji.us.Nn(ot.bf)}add(t){return this.dS&&this.Ji.us.Nn(ot.vf),this.dS=!0,(t=Array.isArray(t)?t:[t])?(this.Na.nl(t.slice()),this.At.Ss(),this):this}clear(){return this.Na.Nt(),this}getPointAmount(){const t=this.Na;return t.ol()+t.al()}Kp(){return this.tS&&this.getPointAmount()>0&&this.getVisible()}Ie(t,e){t.cs(e),this.At.Ss()}attach(t,e=!0,i=!1){return super.attach(t,e,i),ge(t,this.qi,i,{point3D:this.SS}),this}}class sA extends iA{constructor(t,e,i,s,n,o){super(t,e,i,s,n,o),this.xs="Point Series 3D",this.Gd=()=>Qe(this.SS.getFillStyle());const h=(o==null?void 0:o.automaticColorIndex)!==void 0?o.automaticColorIndex:this.Ji.getSeries().length;this.SS=kt(s.pointSeries3DPointStyle,h);const a={individualPointColorEnabled:!1,individualPointSizeEnabled:!1,individualLookupValuesEnabled:!1,individualPointSizeAxisEnabled:!1,...o};this.Na=this.At.bS(a).nS(this.iS).vS(this.SS).cs(this.getHighlight()),this.ds(this.Na)}setPointStyle(t){this.SS=typeof t=="function"?t(this.SS):t;const e=this.SS;return this.Na.vS(e),this.At.Ss(),this}getPointStyle(){return this.SS}}class Dh extends Ds{constructor(t,e,i,s,n,o,h,a,l,u){super(t,e,i,s,n,o,h,a,l,u),this.xS=[],this.MS=0,this._S=c=>{const d=this.xS.indexOf(c);d>=0&&(this.xS.splice(d,1),this.D.emit("seriesDispose",this,c))},this.wS=()=>{this.MS+=1},this.CS=()=>{this.MS-=1},this.onSeriesBackgroundMouseEnter=c=>this.D.on("mouseEnterSeriesBackground",c),this.onSeriesBackgroundMouseLeave=c=>this.D.on("mouseLeaveSeriesBackground",c),this.onSeriesBackgroundMouseMove=c=>this.D.on("mouseMoveSeriesBackground",c),this.onSeriesBackgroundMouseDown=c=>this.D.on("mouseDownSeriesBackground",c),this.onSeriesBackgroundMouseUp=c=>this.D.on("mouseUpSeriesBackground",c),this.onSeriesBackgroundMouseClick=c=>this.D.on("mouseClickSeriesBackground",c),this.onSeriesBackgroundMouseDoubleClick=c=>this.D.on("mouseDoubleClickSeriesBackground",c),this.onSeriesBackgroundMouseDragStart=c=>this.D.on("mouseDragStartSeriesBackground",c),this.onSeriesBackgroundMouseDrag=c=>this.D.on("mouseDragSeriesBackground",c),this.onSeriesBackgroundMouseDragStop=c=>this.D.on("mouseDragStopSeriesBackground",c),this.onSeriesBackgroundMouseWheel=c=>this.D.on("mouseWheelSeriesBackground",c),this.onSeriesBackgroundTouchStart=c=>this.D.on("touchStartSeriesBackground",c),this.onSeriesBackgroundTouchMove=c=>this.D.on("touchMoveSeriesBackground",c),this.onSeriesBackgroundTouchEnd=c=>this.D.on("touchEndSeriesBackground",c),this.offSeriesBackgroundMouseEnter=c=>this.D.off(c,"mouseEnterSeriesBackground"),this.offSeriesBackgroundMouseLeave=c=>this.D.off(c,"mouseLeaveSeriesBackground"),this.offSeriesBackgroundMouseMove=c=>this.D.off(c,"mouseMoveSeriesBackground"),this.offSeriesBackgroundMouseDown=c=>this.D.off(c,"mouseDownSeriesBackground"),this.offSeriesBackgroundMouseUp=c=>this.D.off(c,"mouseUpSeriesBackground"),this.offSeriesBackgroundMouseClick=c=>this.D.off(c,"mouseClickSeriesBackground"),this.offSeriesBackgroundMouseDoubleClick=c=>this.D.off(c,"mouseDoubleClickSeriesBackground"),this.offSeriesBackgroundMouseDragStart=c=>this.D.off(c,"mouseDragStartSeriesBackground"),this.offSeriesBackgroundMouseDrag=c=>this.D.off(c,"mouseDragSeriesBackground"),this.offSeriesBackgroundMouseDragStop=c=>this.D.off(c,"mouseDragStopSeriesBackground"),this.offSeriesBackgroundMouseWheel=c=>this.D.off(c,"mouseWheelSeriesBackground"),this.offSeriesBackgroundTouchStart=c=>this.D.off(c,"touchStartSeriesBackground"),this.offSeriesBackgroundTouchMove=c=>this.D.off(c,"touchMoveSeriesBackground"),this.offSeriesBackgroundTouchEnd=c=>this.D.off(c,"touchEndSeriesBackground"),this.kS=this.es.yg()}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.xS.forEach(e=>e.setAnimationHighlight(t)),this}TS(t,e){this.kS.fs([e]),t.setMouseMoveEventHandler((i,s)=>{this.D.emit("mouseMoveSeriesBackground",this,s)}).setMouseEnterEventHandler((i,s)=>{this.D.emit("mouseEnterSeriesBackground",this,s)}).setMouseLeaveEventHandler((i,s)=>{this.D.emit("mouseLeaveSeriesBackground",this,s)}).setMouseDownEventHandler((i,s)=>this.D.emit("mouseDownSeriesBackground",this,s)).setMouseUpEventHandler((i,s)=>this.D.emit("mouseUpSeriesBackground",this,s)).setMouseClickEventHandler((i,s)=>this.D.emit("mouseClickSeriesBackground",this,s)).setMouseDoubleClickEventHandler((i,s)=>this.D.emit("mouseDoubleClickSeriesBackground",this,s)).setMouseWheelEventHandler((i,s)=>this.D.emit("mouseWheelSeriesBackground",this,s)).setMouseDragStartEventHandler((i,s,n)=>this.D.emit("mouseDragStartSeriesBackground",this,s,n)).setMouseDragEventHandler((i,s,n,o,h)=>this.D.emit("mouseDragSeriesBackground",this,s,n,o,h)).setMouseDragStopEventHandler((i,s,n,o)=>this.D.emit("mouseDragStopSeriesBackground",this,s,n,o)).setTouchStartEventHandler((i,s)=>{this.D.emit("touchStartSeriesBackground",this,s)}).setTouchMoveEventHandler((i,s)=>{this.D.emit("touchMoveSeriesBackground",this,s)}).setTouchEndEventHandler((i,s)=>{this.D.emit("touchEndSeriesBackground",this,s)})}setSeriesBackgroundFillStyle(t){return this.FS.Ce(t),this.us.Ss(),this}getSeriesBackgroundFillStyle(){return this.FS.Eh()}setSeriesBackgroundStrokeStyle(t){return this.IS.we(t),this.us.Ss(),this}getSeriesBackgroundStrokeStyle(){return this.IS.ao()}setSeriesBackgroundEffect(t){return this.kS.ps(t),this.us.Ss(),this}getSeriesBackgroundEffect(){return this.kS.vs()}PS(t){this.xS.push(t),t.onMouseEnter(this.wS),t.onMouseLeave(this.CS),this.DS!==void 0&&t.setHighlightOnHover(this.DS),this.D.emit("seriesAdded",this,t)}Zd(){return this.xS}BS(){return this.MS}setSeriesHighlightOnHover(t){return this.DS=t,this.xS.forEach(e=>e.setHighlightOnHover(t)),this}dispose(){return this.xS.slice().forEach(Sn),super.dispose()}LS(t){return this.D.on("seriesAdded",t)}RS(t){return this.D.off(t)}ES(t){return this.D.on("seriesDispose",t)}zS(t){return this.D.off(t)}}const Kd=J.normalize({x:-.5610788649579117,y:-.35242840511865414,z:-1.1349149375849081});class rA{constructor(t,e,i,s){this.VS=!0,this.OS=!0,this.NS=2*-Math.PI/2160,this.GS=2*Math.PI/2160,this.WS=.1,this.US=1*Math.PI/180,this.YS=t,this.HS=e,this.$S=i,this.Gp=s}getDefaultCameraConfiguration(t){const e={direction:Kd,location:J.multiply(Kd,-1)};return this.cameraLocationChanged({boundingBox:t,cameraDirection:e.direction,cameraLocation:e.location})||e}applyCameraInteractions(t,e){let i={direction:t.cameraDirection,location:t.cameraLocation};return e.forEach(s=>{s.type==="rotate"?i=this.XS(i,s):s.type==="wheel-zoom"?i=this.jS(i,s):s.type==="rotate+zoom"?i=this.ZS(i,s):s.type==="fixed-rotate"?i=this.QS(i,s):s.type==="move"&&(i=this.JS(i,s))}),this.VS?i=this.KS(t.boundingBox,i):this.OS&&(i=this.qS(t.boundingBox,i)),i}XS(t,e){const{rotation:i}=e,s=t.location,n=J.multiply(J.normalize(t.location),-1),{Right:o,Up:h}=this.tv(n);let a=s;const l=this.sv(n),u=i.x*this.NS*l;a=J.rotateAroundAxis(a,h,u);const c=(i.y>0?1:-1)*Math.min(Math.abs(i.y)*this.GS,l-this.US);return c!==0&&(a=J.rotateAroundAxis(a,o,c)),{location:a,direction:J.multiply(J.normalize(a),-1)}}jS(t,e){const{deltaY:i}=e;this.VS&&this.ev(!1);const s=t.location,n=J.multiply(J.normalize(s),-1),o=i*this.WS,h=J.length(s)*-o;return{direction:n,location:J.addVec(s,J.multiply(n,h))}}ZS(t,e){const{rotation:i,cameraDistance:s}=e;this.VS&&this.ev(!1);let n=this.XS(t,{type:"rotate",rotation:i});const o=n.location,h=J.multiply(J.normalize(o),-1),a=J.multiply(h,-s);return n={direction:J.multiply(J.normalize(a),-1),location:a},n}QS(t,e){this.VS&&this.ev(!1);const{rotation:i}=e,s=t.location,n=t.direction,{Right:o,Up:h}=this.tv(n),a=i.x*this.NS;let l=J.normalize(J.rotateAroundAxis(n,h,a));const u=i.y*this.GS;return l=J.normalize(J.rotateAroundAxis(l,o,u)),{location:s,direction:l}}JS(t,e){this.VS&&this.ev(!1),this.OS=!1;const{amountRight:i,amountForward:s}=e,n=t.location,o=t.direction,{Right:h}=this.tv(o);return{location:J.addVec(n,J.multiply(o,.01*s),J.multiply(h,.01*i)),direction:o}}boundingBoxChanged(t){const e={location:t.cameraLocation,direction:J.multiply(J.normalize(t.cameraLocation),-1)};return this.VS?this.KS(t.boundingBox,e):this.qS(t.boundingBox,e)}cameraLocationChanged(t){const e={location:t.cameraLocation,direction:J.multiply(J.normalize(t.cameraLocation),-1)};return this.VS?this.KS(t.boundingBox,e):this.qS(t.boundingBox,e)}viewportChanged(t){const e={location:t.cameraLocation,direction:J.multiply(J.normalize(t.cameraLocation),-1)};if(this.VS)return this.KS(t.boundingBox,e)}KS(t,e,i){let s=e;i=i!==void 0?i:0,s=this.hv(t,s,100,20,1,i,5);const n=this.sv(s.direction);return s=this.rv(s,this.nv(t,s,100,1),n),s}hv(t,e,i,s,n,o,h){return nA(o,h,a=>({direction:e.direction,location:J.multiply(e.direction,-a)}),a=>this.ov(t,a),i,n,"linear",s)}nv(t,e,i,s){const{Right:n,Left:o,Up:h,Down:a}=this.tv(e.direction),l=this.av(t,!1,e);let u=e;const c=s,d=.1;return Math.abs(l.bottom-l.top)>c&&(u=l.bottom<l.top?Kh(0,d,f=>({location:u.location,direction:J.normalize(J.lerp(u.direction,a,f))}),f=>this.lv(t,f),0,c,!0,i):Kh(0,d,f=>({location:u.location,direction:J.normalize(J.lerp(u.direction,h,f))}),f=>this.lv(t,f),0,c,!0,i)),Math.abs(l.left-l.right)>c&&(u=l.left<l.right?Kh(0,d,f=>({location:u.location,direction:J.normalize(J.lerp(u.direction,o,f))}),f=>this.uv(t,f),0,c,!0,i):Kh(0,d,f=>({location:u.location,direction:J.normalize(J.lerp(u.direction,n,f))}),f=>this.uv(t,f),0,c,!0,i)),u}ov(t,e){const i=this.av(t,!0,e);return Math.min(i.left+i.right,i.top+i.bottom)}uv(t,e){const i=this.av(t,!1,e);return Math.abs(i.left-i.right)}lv(t,e){const i=this.av(t,!1,e);return Math.abs(i.top-i.bottom)}av(t,e,i){const s=ce(this.cv(t,e,i).map(n=>K(n,this.YS,this.HS)));return{left:s.min.x,right:this.HS.x.getInnerEnd()-s.max.x,top:this.HS.y.getInnerEnd()-s.max.y,bottom:s.min.y}}cv(t,e,i){const s=this.$S,n=yt(s.x.getInnerStart(),s.y.getInnerStart(),s.z.getInnerStart()),o=yt(s.x.getInnerEnd(),s.y.getInnerEnd(),s.z.getInnerEnd()),h=[],a=e?16:4,l=(n.x+o.x)/2,u=(n.z+o.z)/2,c=Math.sqrt(2)*(o.x-l),d=Math.sqrt(2)*(o.z-u);return[n.y,o.y].forEach(f=>{for(let g=0;g<a;g+=1){const y=Math.PI/4+2*Math.PI*g/a,p=l+Math.cos(y)*c,x=u+Math.sin(y)*d;h.push({x:p,y:f,z:x})}}),h.map(f=>this.Gp(f,i)).filter(f=>f!==void 0)}qS(t,e){const i=J.length(e.location),s=this.dv(t);return i<s?{direction:e.direction,location:J.multiply(e.direction,-s)}:e}dv(t){return .8*Math.sqrt(t.x**2+t.y**2+t.z**2)}tv(t){const e=yt(0,1,0),i=J.normalize(J.cross(e,J.multiply(t,-1)));let s=J.cross(i,t);return s.y=Math.abs(s.y),s=J.normalize(s),{Right:i,Up:s,Down:J.multiply(s,-1),Left:J.multiply(i,-1)}}sv(t){const e={x:0,y:1,z:0},i=J.angle(t,e),s=J.angle(t,J.multiply(e,-1));return Math.min(i,s)}rv(t,e,i){return{location:J.lerp(t.location,e.location,i),direction:J.normalize(J.lerp(t.direction,e.direction,i))}}ev(t){return this.VS=t,this}fv(){return this.VS}}const nA=(r,t,e,i,s,n,o,h)=>{let a,l=0,u=(t+r)/2;do{const c=e(u);if(a={value:u,result:c,score:i(c)},Math.abs(a.score-s)<=n)break;const d=a.score>s;d&&o==="linear"||!d&&o==="reversed"?(u=(a.value+r)/2,t=a.value):(u=(a.value+t)/2,r=a.value),l+=1}while(l<h);return a.result},Kh=(r,t,e,i,s,n,o,h)=>{let a,l=0,u=r;do{const c=e(u),d=i(c);if(a===void 0||Math.abs(d-s)<Math.abs(a.score-s)){if(a={value:u,result:c,score:i(c)},Math.abs(a.score-s)<=n)break}else break;l+=1,u+=1/(h-1)*(t-r)}while(l<h);return a.result};class oA extends Io{constructor(t,e,i,s,n,o){super(t,e,i,n,o),this.xs="Surface Grid Series 3D",this.Av={},this.dS=!1,this.Gd=()=>Qe(this.be),this.qp=Co;const h=(s==null?void 0:s.automaticColorIndex)!==void 0?s.automaticColorIndex:this.Ji.getSeries().length;this.be=kt(this.qi.surfaceGridSeries3DFillStyle,h),this.gv=kt(this.qi.surfaceGridSeries3DWireframeStyle,h);const a={heatmapDataType:"intensity",dataOrder:s.dataOrder||"columns",columns:s.columns,rows:s.rows};this.Un=a,this.Na=this.At.yv(a).Ce(this.be).mv(this.gv).rS(this.qp).cs(this.getHighlight()),this.ds(this.Na),s.start&&this.setStart(s.start),s.end&&this.setEnd(s.end),s.step&&this.setStep(s.step)}pv(){const t=this.Av.start||{x:0,z:0};let e;e=this.Av.end?{x:(this.Av.end.x-t.x)/this.Un.columns,z:(this.Av.end.z-t.z)/this.Un.rows}:this.Av.step?this.Av.step:{x:1,z:1},this.Na.Sv(t,e),this.Ji.us.Ss()}setStart(t){return this.Av.start=t,this.pv(),this}getStart(){return this.Na.vv().start}setStep(t){return this.Av.step=t,this.pv(),this}getStep(){return this.Na.vv().step}setEnd(t){return this.Av.end=t,this.pv(),this}getEnd(){return this.Na.vv().end}setFillStyle(t){return this.be=typeof t=="function"?t(this.be):t,this.Na.Ce(this.be),this.At.Ss(),this}getFillStyle(){return this.be}setWireframeStyle(t){return this.gv=typeof t=="function"?t(this.gv):t,this.Na.mv(this.gv),this.At.Ss(),this}getWireframeStyle(){return this.Na.bv()}setIntensityInterpolation(t){return t=t||"disabled",this.Na.xv(t),this.At.Ss(),this}getIntensityInterpolation(){return this.Na.Mv()}invalidateIntensityValues(t){if(this.dS&&this.Ji.us.Nn(ot.vf),Array.isArray(t)){if(t.length===0||t[0].length===0)return this;const e={x:t.length,y:t[0].length,columns:this.Un.dataOrder==="columns"?t.length:t[0].length,rows:this.Un.dataOrder==="rows"?t.length:t[0].length},i=this.Un.dataOrder==="columns"?this.Un.columns:this.Un.rows,s=this.Un.dataOrder==="columns"?this.Un.rows:this.Un.columns;if(e.x>i||e.y>s){if(this.Ji.cA.Hn===!0){const o=`SurfaceGridSeries3D.invalidateIntensityValues intensity matrix overflow.
    Grid ${this.Un.columns}x${this.Un.rows}, input ${e.columns}x${e.rows}.
    Excess data will be automatically clipped. This can result in sub-optimal performance.`;X.console.warn(o)}const n=[];for(let o=0;o<i;o+=1)n[o]=t[o].slice(0,s);t=n}this.Na._v({type:"intensity",lengthPrimary:t.length,lengthSecondary:t[0].length,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(t.values.length===0||t.values[0].length===0)return this;const e={primary:t.values.length,secondary:t.values[0].length,columns:this.Un.dataOrder==="columns"?t.values.length:t.values[0].length,rows:this.Un.dataOrder==="rows"?t.values.length:t.values[0].length};let i=this.Un.dataOrder==="columns"?t.iColumn:t.iRow;const s=i+e.primary-1;let n=this.Un.dataOrder==="columns"?t.iRow:t.iColumn;const o=n+e.secondary-1,h=(this.Un.dataOrder==="columns"?this.Un.columns:this.Un.rows)-1,a=(this.Un.dataOrder==="columns"?this.Un.rows:this.Un.columns)-1;if(i<0||n<0||s>h||o>a){if(this.Ji.cA.Hn===!0){const y=`SurfaceGridSeries3D.invalidateIntensityValues intensity matrix overflow.
    Grid ${this.Un.columns}x${this.Un.rows}, input ${e.columns}x${e.rows} starting at [${t.iColumn},${t.iRow}].
    Out of bounds data will be automatically clipped. This can result in sub-optimal performance.`;X.console.warn(y)}const l=Math.max(-i,0),u=Math.max(-n,0),c=Math.max(s-h,0),d=Math.max(o-a,0),f=e.primary-(l+c),g=[];if(u===0&&d===0)for(let y=0;y<f;y+=1)g[y]=t.values[l+y];else for(let y=0;y<f;y+=1)g[y]=t.values[l+y].slice(u,d===0?void 0:-d);if(g.length===0||g[0].length===0)return this;t={iColumn:t.iColumn,iRow:t.iRow,values:g},i=Math.max(i,0),n=Math.max(n,0)}this.Na._v({type:"intensity",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:i,startSecondary:n,values:t.values})}return this.At.Ss(),this.dS=!0,this}invalidateHeightMap(t){if(this.dS&&this.Ji.us.Nn(ot.vf),Array.isArray(t)){if(t.length===0||t[0].length===0)return this;const e={x:t.length,y:t[0].length,columns:this.Un.dataOrder==="columns"?t.length:t[0].length,rows:this.Un.dataOrder==="rows"?t.length:t[0].length},i=this.Un.dataOrder==="columns"?this.Un.columns:this.Un.rows,s=this.Un.dataOrder==="columns"?this.Un.rows:this.Un.columns;if(e.x>i||e.y>s){if(this.Ji.cA.Hn===!0){const o=`SurfaceGridSeries3D.invalidateHeightMap height matrix overflow.
    Grid ${this.Un.columns}x${this.Un.rows}, input ${e.columns}x${e.rows}.
    Excess data will be automatically clipped. This can result in sub-optimal performance.`;X.console.warn(o)}const n=[];for(let o=0;o<i;o+=1)n[o]=t[o].slice(0,s);t=n}this.Na.wv({type:"y",lengthPrimary:t.length,lengthSecondary:t[0].length,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(t.values.length===0||t.values[0].length===0)return this;const e={primary:t.values.length,secondary:t.values[0].length,columns:this.Un.dataOrder==="columns"?t.values.length:t.values[0].length,rows:this.Un.dataOrder==="rows"?t.values.length:t.values[0].length};let i=this.Un.dataOrder==="columns"?t.iColumn:t.iRow;const s=i+e.primary-1;let n=this.Un.dataOrder==="columns"?t.iRow:t.iColumn;const o=n+e.secondary-1,h=(this.Un.dataOrder==="columns"?this.Un.columns:this.Un.rows)-1,a=(this.Un.dataOrder==="columns"?this.Un.rows:this.Un.columns)-1;if(i<0||n<0||s>h||o>a){if(this.Ji.cA.Hn===!0){const y=`SurfaceGridSeries3D.invalidateHeightMap height matrix overflow.
    Grid ${this.Un.columns}x${this.Un.rows}, input ${e.columns}x${e.rows} starting at [${t.iColumn},${t.iRow}].
    Out of bounds data will be automatically clipped. This can result in sub-optimal performance.`;X.console.warn(y)}const l=Math.max(-i,0),u=Math.max(-n,0),c=Math.max(s-h,0),d=Math.max(o-a,0),f=e.primary-(l+c),g=[];if(u===0&&d===0)for(let y=0;y<f;y+=1)g[y]=t.values[l+y];else for(let y=0;y<f;y+=1)g[y]=t.values[l+y].slice(u,d===0?void 0:-d);if(g.length===0||g[0].length===0)return this;t={iColumn:t.iColumn,iRow:t.iRow,values:g},i=Math.max(i,0),n=Math.max(n,0)}this.Na.wv({type:"y",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:i,startSecondary:n,values:t.values})}return this.At.Ss(),this.dS=!0,this}setCullMode(t){return this.Na.Cv(typeof t=="boolean"?t?"cull-back":"disabled":t),this}getCullMode(){return this.Na.kv()}oS(){}Te(){}dp(){}Kp(){return this.tS&&this.getVisible()}Ie(t,e){t.cs(e),this.At.Ss()}}class hA extends Io{constructor(t,e,i,s,n,o){super(t,e,i,n,o),this.xs="Surface Grid Series 3D",this.Av={},this.Gd=()=>Qe(this.be),this.Ji.us.Nn(ot.vf),this.qp=Co;const h=(s==null?void 0:s.automaticColorIndex)!==void 0?s.automaticColorIndex:this.Ji.getSeries().length;this.be=kt(this.qi.surfaceScrollingGridSeries3DFillStyle,h),this.gv=kt(this.qi.surfaceScrollingGridSeries3DWireframeStyle,h);const a={heatmapDataType:"intensity",scrollDimension:s.scrollDimension||"columns",columns:s.columns,rows:s.rows};this.Un=a,this.Na=this.At.Tv(a).Ce(this.be).mv(this.gv).rS(this.qp).cs(this.getHighlight()),this.ds(this.Na),s.start&&this.setStart(s.start),s.step&&this.setStep(s.step)}pv(){const t=this.Av.start||{x:0,z:0};let e;e=this.Av.step?this.Av.step:{x:1,z:1},this.Na.Sv(t,e),this.Ji.us.Ss()}setStart(t){return this.Av.start=t,this.pv(),this}getStart(){return this.Na.vv().start}setStep(t){return this.Av.step=t,this.pv(),this}getStep(){return this.Na.vv().step}setFillStyle(t){return this.be=typeof t=="function"?t(this.be):t,this.Na.Ce(this.be),this.At.Ss(),this}getFillStyle(){return this.be}setWireframeStyle(t){return this.gv=typeof t=="function"?t(this.gv):t,this.Na.mv(this.gv),this.At.Ss(),this}getWireframeStyle(){return this.Na.bv()}setIntensityInterpolation(t){return t=t||"disabled",this.Na.xv(t),this.At.Ss(),this}getIntensityInterpolation(){return this.Na.Mv()}clear(){return this.Na.Nt(),this.At.Ss(),this}addValues(t){if(!t)return this;let e=t.yValues,i=t.intensityValues;if(!e&&!i)return this;if(e&&e.length===0&&(e=void 0),i&&i.length===0&&(i=void 0),e){const o=e[0].length,h=0+o-1,a=this.Un.scrollDimension==="columns"?this.Un.rows:this.Un.columns;if(h>a-1){if(this.Ji.cA.Hn===!0){const u=`SurfaceScrollingGridSeries3D.addValues input yValues overflow.
Grid was created with ${a} ${this.Un.scrollDimension==="columns"?"rows":"columns"}, input yValues have ${o}.
Excess data will be automatically clipped. This can result in sub-optimal performance.`;X.console.warn(u)}const l=[];for(let u=0;u<e.length;u+=1)l[u]=e[u].slice(0,a+1);e=l}}if(i){const o=i[0].length,h=0+o-1,a=this.Un.scrollDimension==="columns"?this.Un.rows:this.Un.columns;if(h>a-1){if(this.Ji.cA.Hn===!0){const u=`SurfaceScrollingGridSeries3D.addValues intensityValues overflow.
Grid was created with ${a} ${this.Un.scrollDimension==="columns"?"rows":"columns"}, input intensityValues have ${o}.
Excess data will be automatically clipped. This can result in sub-optimal performance.`;X.console.warn(u)}const l=[];for(let u=0;u<i.length;u+=1)l[u]=i[u].slice(0,a+1);i=l}}if(e&&i){const o=e.length,h=i.length;if(o!==h){if(this.Ji.cA.Hn===!0){const a=`SurfaceScrollingGridSeries3D.addValues input yValues and intensityValues size does not match.
yValues: ${o}
intensityValues: ${h}
Data will be automatically clipped according to the smaller supplied sample. This can result in sub-optimal performance.`;X.console.warn(a)}o>h?e=e.slice(0,h):i=i.slice(0,o)}}const s=e?e.length:i==null?void 0:i.length,n=e?e[0].length:i==null?void 0:i[0].length;return this.Na.Fv({startPrimary:0,startSecondary:0,lengthPrimary:s,lengthSecondary:n,heightMapValues:e,intensityValues:i}),this.At.Ss(),this}setCullMode(t){return this.Na.Cv(typeof t=="boolean"?t?"cull-back":"disabled":t),this}getCullMode(){return this.Na.kv()}oS(){}Te(){}dp(){}Kp(){return this.tS&&this.getVisible()}Ie(t,e){t.cs(e),this.At.Ss()}}const ta=r=>!!(r&&typeof r=="object"&&"id"in r&&"chart"in r&&r.chart instanceof Cc),tf=r=>!!(r&&typeof r=="object"&&"x"in r&&typeof r.x=="number"&&"y"in r&&typeof r.y=="number"&&"z"in r&&typeof r.z=="number"),Zt={translation:(r,t,e)=>[1,0,0,0,0,1,0,0,0,0,1,0,r,t,e,1],xRotation(r){const t=Math.cos(r),e=Math.sin(r);return[1,0,0,0,0,t,e,0,0,-e,t,0,0,0,0,1]},yRotation(r){const t=Math.cos(r),e=Math.sin(r);return[t,0,-e,0,0,1,0,0,e,0,t,0,0,0,0,1]},zRotation(r){const t=Math.cos(r),e=Math.sin(r);return[t,e,0,0,-e,t,0,0,0,0,1,0,0,0,0,1]},scaling:(r,t,e)=>[r,0,0,0,0,t,0,0,0,0,e,0,0,0,0,1],translate:(r,t,e,i)=>Zt.multiply(r,Zt.translation(t,e,i)),xRotate:(r,t)=>Zt.multiply(r,Zt.xRotation(t)),yRotate:(r,t)=>Zt.multiply(r,Zt.yRotation(t)),zRotate:(r,t)=>Zt.multiply(r,Zt.zRotation(t)),rotateXYZ(r,t){let e=Zt.xRotate(r,t.x);return e=Zt.yRotate(e,t.y),e=Zt.zRotate(e,t.z),e},scale:(r,t,e,i)=>Zt.multiply(r,Zt.scaling(t,e,i)),multiply(r,t){const e=t[0],i=t[1],s=t[2],n=t[3],o=t[4],h=t[5],a=t[6],l=t[7],u=t[8],c=t[9],d=t[10],f=t[11],g=t[12],y=t[13],p=t[14],x=t[15],A=r[0],v=r[1],w=r[2],E=r[3],C=r[4],k=r[5],F=r[6],m=r[7],S=r[8],b=r[9],M=r[10],R=r[11],T=r[12],z=r[13],P=r[14],_=r[15],V=[];return V[0]=e*A+i*C+s*S+n*T,V[1]=e*v+i*k+s*b+n*z,V[2]=e*w+i*F+s*M+n*P,V[3]=e*E+i*m+s*R+n*_,V[4]=o*A+h*C+a*S+l*T,V[5]=o*v+h*k+a*b+l*z,V[6]=o*w+h*F+a*M+l*P,V[7]=o*E+h*m+a*R+l*_,V[8]=u*A+c*C+d*S+f*T,V[9]=u*v+c*k+d*b+f*z,V[10]=u*w+c*F+d*M+f*P,V[11]=u*E+c*m+d*R+f*_,V[12]=g*A+y*C+p*S+x*T,V[13]=g*v+y*k+p*b+x*z,V[14]=g*w+y*F+p*M+x*P,V[15]=g*E+y*m+p*R+x*_,V},inverse(r){const t=[],e=r[0],i=r[1],s=r[2],n=r[3],o=r[4],h=r[5],a=r[6],l=r[7],u=r[8],c=r[9],d=r[10],f=r[11],g=r[12],y=r[13],p=r[14],x=r[15],A=d*x,v=p*f,w=a*x,E=p*l,C=a*f,k=d*l,F=s*x,m=p*n,S=s*f,b=d*n,M=s*l,R=a*n,T=u*y,z=g*c,P=o*y,_=g*h,V=o*c,B=u*h,I=e*y,L=g*i,U=e*c,Y=u*i,O=e*h,j=o*i,$=A*h+E*c+C*y-(v*h+w*c+k*y),Z=v*i+F*c+b*y-(A*i+m*c+S*y),Q=w*i+m*h+M*y-(E*i+F*h+R*y),ct=k*i+S*h+R*c-(C*i+b*h+M*c),et=1/(e*$+o*Z+u*Q+g*ct);return t[0]=et*$,t[1]=et*Z,t[2]=et*Q,t[3]=et*ct,t[4]=et*(v*o+w*u+k*g-(A*o+E*u+C*g)),t[5]=et*(A*e+m*u+S*g-(v*e+F*u+b*g)),t[6]=et*(E*e+F*o+R*g-(w*e+m*o+M*g)),t[7]=et*(C*e+b*o+M*u-(k*e+S*o+R*u)),t[8]=et*(T*l+_*f+V*x-(z*l+P*f+B*x)),t[9]=et*(z*n+I*f+Y*x-(T*n+L*f+U*x)),t[10]=et*(P*n+L*l+O*x-(_*n+I*l+j*x)),t[11]=et*(B*n+U*l+j*f-(V*n+Y*l+O*f)),t[12]=et*(P*d+B*p+z*a-(V*p+T*a+_*d)),t[13]=et*(U*p+T*s+L*d-(I*d+Y*p+z*s)),t[14]=et*(I*a+j*p+_*s-(O*p+P*s+L*a)),t[15]=et*(O*d+V*s+Y*a-(U*a+j*d+B*s)),t},projectionPerspective(r,t,e,i){const s=1/Math.tan(r*Math.PI/180/2),n=1/(e-i);return[s/t,0,0,0,0,s,0,0,0,0,(e+i)*n,-1,0,0,e*i*n*2,0]},projectionOrthographic:(r,t,e,i,s,n)=>[2/(t-r),0,0,-(t+r)/(t-r),0,2/(i-e),0,-(i+e)/(i-e),0,0,-2/(n-s),-(n+s)/(n-s),0,0,0,1]};class aA extends Io{constructor(t,e,i,s,n,o){super(t,e,i,s,o),this.xs="Mesh Model 3D",this.Iv=new Float32Array,this.dt={x:1,y:1,z:1},this.Pv={x:0,y:0,z:0},this.Dv={x:0,y:0,z:0},this.Bv={x:0,y:0,z:0},this.Lv={x:0,y:0,z:0},this.Ya=os,this.Gd=()=>Qe(this.getFillStyle());const h=(n==null?void 0:n.automaticColorIndex)!==void 0?n.automaticColorIndex:this.Ji.getSeries().length;this.Na=this.At.Rv().nS(this.iS).Ce(kt(this.qi.meshModel3DFillStyle||this.qi.pointSeriesFillStyle,h)).cs(this.getHighlight()),this.ds(this.Na)}setModelGeometry(t){const{indices:e,vertices:i,normals:s}=t;let n=ht,o=st,h=ht,a=st,l=ht,u=st;for(let c=0;c<i.length;c+=3){const d=i[c],f=i[c+1],g=i[c+2];n=Math.max(n,d),o=Math.min(o,d),h=Math.max(h,f),a=Math.min(a,f),l=Math.max(l,g),u=Math.min(u,g)}this.Ya={min:{x:o,y:a,z:u},max:{x:n,y:h,z:l}};for(let c=0;c<i.length;c+=3)i[c]-=this.Ya.min.x,i[c+1]-=this.Ya.min.y,i[c+2]-=this.Ya.min.z;return this.Lv={x:this.Ya.max.x-this.Ya.min.x,y:this.Ya.max.y-this.Ya.min.y,z:this.Ya.max.z-this.Ya.min.z},this.Iv=i instanceof Float32Array?i:new Float32Array(i),this.checkedNormals=s&&!Number.isNaN(s[0])?s instanceof Float32Array?s:new Float32Array(s):void 0,this.checkedNormals||this.setColorShadingStyle(Co),this.Na.Ev({vertices:this.Iv,normals:this.checkedNormals,indices:e instanceof Uint16Array?e:new Uint16Array(e),modelSize:this.Lv}),this.Ji.us.Ss(),this}setVertexValues(t){const e=this.Dv,i=this.Pv,s=this.dt,n=this.Lv,o=this.Bv,h=Ip(e,this.Ji.axes,this.Ji.world);let a;if(this.zv)a=t(this.zv);else{const l=[],u=Zt.projectionOrthographic(-1,1,-1,1,1,-1);let c=Zt.translate(u,n.x/2,n.y/2,n.z/2);c=Zt.rotateXYZ(c,o),c=Zt.translate(c,-n.x/2,-n.y/2,-n.z/2);const d=(i.x+1)*(n.x/2),f=(i.y+1)*(n.y/2),g=(i.z+1)*(n.z/2);for(let y=0;y<this.Iv.length;y+=3){const p=Zt.multiply(c,[this.Iv[y],this.Iv[y+1],this.Iv[y+2],1]),x={x:h.x+(p[0]-d)*s.x,y:h.y+(p[1]-f)*s.y,z:h.z+(p[2]-g)*s.z};l.push(x)}this.zv=l,a=t(l)}return a.length===0||(a.length!==this.zv.length&&this.Ji.us.Un.Hn===!0&&X.console.warn(`LightningChart JS warning - MeshModel3D.setVertexValues returned array length is not equal to vertex locations array length.
This is most likely an application error.`),this.Na.Vv(a instanceof Float32Array?a:new Float32Array(a)),this.Ji.us.Ss()),this}setScale(t){const e={x:typeof t=="number"?t:(t==null?void 0:t.x)||1,y:typeof t=="number"?t:(t==null?void 0:t.y)||1,z:typeof t=="number"?t:(t==null?void 0:t.z)||1};return this.dt=e,this.zv=void 0,this.Na.Ov(e),this.Ji.us.Ss(),this}getScale(){return this.dt}setModelLocation(t){return this.Dv=t,this.zv=void 0,this.Na.Nv(t),this.Ji.us.Ss(),this}getModelLocation(){return this.Dv}setModelAlignment(t){return this.Pv=t,this.zv=void 0,this.Na.Gv(t),this.Ji.us.Ss(),this}getModelAlignment(){return this.Pv}setModelRotation(t){const e={x:hs(t.x),y:hs(t.y),z:hs(t.z)};return this.Bv=e,this.zv=void 0,this.Na.Wv(this.Bv),this.Ji.us.Ss(),this}getModelRotation(){return this.Bv}setBackfaceCullingMode(t){return this.Na.Uv(t),this.Ji.us.Ss(),this}getBackfaceCullingMode(){return this.Na.Yv()}setFillStyle(t){return this.Na.Ce(t),this.Ji.us.Ss(),this}getFillStyle(){return this.Na.Eh()}setColorShadingStyle(t){return this.checkedNormals||t!==Fo?super.setColorShadingStyle(t):(console.warn("Phong shading style is not supported without normals. Switching to Simple shading style."),super.setColorShadingStyle(new rS.Simple))}Kp(){return!1}Ie(t,e){t.cs(e),this.Ji.us.Ss()}attach(t,e=!0,i=!1){return super.attach(t,e),ge(t,this.qi,i,{fill:this.getFillStyle()}),this}}class Cc extends Dh{constructor(t,e,i,s,n,o,h){var a;let l;super(t,e,i,e.vm("chart3D bg",0),s,e.us.qi.chart3DBackgroundFillStyle,e.us.qi.chart3DBackgroundStrokeStyle,e.us.qi.chart3DTitleFont,e.us.qi.chart3DTitleFillStyle,o),this.Hv=1,this.$v=[],this.Xv=2,this.jv=!0,this.Zv=!0,this.Qv=!0,this.Jv=0,this.coordsAxis={id:"axes",chart:this},this.coordsWorld={id:"world",chart:this},this.axes={id:"axes",chart:this},this.world={id:"world",chart:this},this.an=[],this.fn=()=>{const u=this.At.Kv();this.tb.qv(u),this.ib.qv(u);const c=this.sb.viewportChanged(this.eb());c&&this.hb(c),this.us.Ss()},this.eS=(u,c,d,f,g)=>{if(this.Qv){const y=g;this.$v.push({type:"rotate",rotation:y}),this.us.Ss(),tt(c)}},this.sS=(u,c)=>{if(this.Zv){if(this.jv)Math.sign(this.Jv)!==Math.sign(c.deltaY)?this.Jv=Wr(c):this.Jv+=Wr(c);else{const d=Wr(c);this.$v.push({type:"wheel-zoom",deltaY:d})}this.us.Ss(),tt(c)}},this.us.Nn(ot.df),this._m.Rh("Chart3D"),this.rb=i.d3(),this.rb.x.J(-1,1),this.rb.y.J(-1,1),this.rb.z.J(-1,1),this.At=e.nb("chart3D layer3D",0,this.rb),this.tb=e.ob("chart3D series bg",0),this.ib=e.$y("chart3D axis ui",1),this.ab={x:new Gl(this,(a=()=>this.xS,{...Po(a,u=>u.getXMin(),u=>u.getXMax(),u=>u.br().x),Cp:u=>u.x,Hp:(u,c)=>({x:u.x,y:c.y,z:c.z}),Jd:yt(0,-1,0),$p:u=>{const c={x:u.x>=0?1:-1,y:u.y>=0?1:-1,z:u.z>=0?1:-1};return{gridlinePositionA:yt(0,c.y,c.z),gridlinePositionB:yt(0,c.y,-c.z),gridlinePositionC:yt(0,-c.y,-c.z)}},Zp:()=>!0,Qp:()=>!1,Yp:()=>!1}),this.rb.x,this.qi,this.At,this.ib,this.pixelScale,!1,this.es),y:new Gl(this,ZS(()=>this.xS),this.rb.y,this.qi,this.At,this.ib,this.pixelScale,!1,this.es),z:new Gl(this,QS(()=>this.xS),this.rb.z,this.qi,this.At,this.ib,this.pixelScale,!1,this.es)},this.lb=this.At.rp([ms.InternalUI]).setMouseInteractions(!1),this.setBoundingBoxStrokeStyle(this.qi.chart3DBoundingBoxStrokeStyle),this.FS=this.tb.ic(this.engine.scale,ys.Simple).Ce(this.qi.chart3DSeriesBackgroundFillStyle).we(it).setMouseInteractions(!0),this.IS=this.tb.ic(this.engine.scale,ys.Simple).Ce(ft).we(this.qi.chart3DSeriesBackgroundStrokeStyle).setMouseInteractions(!1),super.TS(this.FS,this.IS),this.ub({x:1,y:1,z:1},!0),this.sb=new rA(this.engine.scale,this.pixelScale,this.rb,(u,c)=>(c&&this.hb(c),this.At.Gp(u))),this.cb=this.sb.getDefaultCameraConfiguration(this.fb(this.Ab)),this.hb(this.cb),this.hS=Ci(new cc((u,c,d)=>{l={locationOne:c,locationTwo:d,cameraLocation:this.At.getCameraLocation()}},(u,c,d,f,g,y)=>{if(!this.Qv&&!this.Zv)return;const p=(l.locationOne.x-l.locationTwo.x)**2+(l.locationOne.y-l.locationTwo.y)**2,x=(c.x-d.x)**2+(c.y-d.y)**2,A=J.length(l.cameraLocation),v=p/x*A,w=N((f.x+g.x)/2,(f.y+g.y)/2);this.$v.push({type:"rotate+zoom",rotation:this.Qv?w:{x:0,y:0},cameraDistance:this.Zv?v:A}),this.us.Ss(),tt(y)},u=>{}),new ds(u=>{},(u,c,d,f,g)=>{if(this.Qv){const y=f;this.$v.push({type:"rotate",rotation:y}),this.us.Ss(),tt(g)}},u=>{})),this.onBackgroundTouchStart(this.hS.onTouchStart),this.onBackgroundTouchMove(this.hS.onTouchMove),this.onBackgroundTouchEnd(this.hS.onTouchEnd),this.onSeriesBackgroundTouchStart(this.hS.onTouchStart),this.onSeriesBackgroundTouchMove(this.hS.onTouchMove),this.onSeriesBackgroundTouchEnd(this.hS.onTouchEnd),this.onBackgroundMouseDrag(this.eS),this.onBackgroundMouseWheel(this.sS),this.onBackgroundMouseDown((u,c)=>{tt(c)}),this.onSeriesBackgroundMouseDrag(this.eS),this.onSeriesBackgroundMouseWheel(this.sS),this.onSeriesBackgroundMouseDown((u,c)=>{tt(c)}),this.setAnimationsEnabled((h==null?void 0:h.disableAnimations)!==!0&&(h==null?void 0:h.animationsEnabled)!==!1),this.onResize(this.fn),this.fn(),this.Sm(n,this.pixelScale)}addPointSeries(t){const e=new(t&&t.type||sA)(this,this._S,this.At,this.qi,this.us.es,t);return this.PS(e),e}addLineSeries(t){const e=new tA(this,this._S,this.At,this.qi,(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length,this.us.es);return this.PS(e),e}addPointLineSeries(t){const e=new eA(this,this._S,this.At,this.qi,(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length,this.us.es);return this.PS(e),e}addSurfaceGridSeries(t){const e=new oA(this,this._S,this.At,t,this.qi,this.us.es);return this.PS(e),e}addSurfaceScrollingGridSeries(t){const e=new hA(this,this._S,this.At,t,this.qi,this.us.es);return this.PS(e),e}addBoxSeries(t){const e=new KS(this,this._S,this.At,this.qi,(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length,this.us.es);return this.PS(e),e}addMeshModel(t){const e=new aA(this,this._S,this.At,this.qi,t,this.us.es);return this.PS(e),e}translateCoordinate(t,e,i){if(ta(e)||ta(i)||tf(t)){if(ta(e)&&ta(i)&&tf(t)){if(e.id==="axes"&&i.id==="world")return this.At.ft(t);if(e.id==="world"&&i.id==="axes")return this.At.yt(t);if(e.id===i.id)return t}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}return ul(t,e,i,this.pixelScale,this.us)}getDefaultAxisX(){return this.ab.x}getDefaultAxisY(){return this.ab.y}getDefaultAxisZ(){return this.ab.z}get axisX(){return this.getDefaultAxisX()}get xAxis(){return this.getDefaultAxisX()}get axisY(){return this.getDefaultAxisY()}get yAxis(){return this.getDefaultAxisY()}get axisZ(){return this.getDefaultAxisZ()}get zAxis(){return this.getDefaultAxisZ()}getDefaultAxes(){return[this.ab.x,this.ab.y,this.ab.z]}setCameraLocation(t){let e={location:t,direction:J.normalize(J.multiply(t,-1))};const i=this.sb.cameraLocationChanged(this.eb(e));return i&&(e=i),this.hb(e),this.us.Ss(),this}getCameraLocation(){return this.At.getCameraLocation()}getCameraDirection(){return this.At.getCameraDirection()}setCameraAutomaticFittingEnabled(t){this.sb.ev(t);const e=this.sb.cameraLocationChanged(this.eb());return e&&this.hb(e),this}getCameraAutomaticFittingEnabled(){return this.sb.fv()}onCameraChange(t){return this.D.on("cameraChange",t)}offCameraChange(t){return this.D.off(t,"cameraChange")}setBoundingBoxStrokeStyle(t){return this.lb.Re(t).Rp(xu(this.lb.uu())),this.At.Ss(),this}getBoundingBoxStrokeStyle(){return this.lb.uu()}setBoundingBox(t){return this.ub(t,!1),this}ub(t,e){this.Ab=t;const i=this.fb(t);if(this.rb.x.q(i.x),this.rb.y.q(i.y),this.rb.z.q(-i.z),!e){const s=this.sb.boundingBoxChanged(this.eb());s&&this.hb(s)}this.us.Ss()}getBoundingBox(){return this.Ab}Te(t){if(ii.Fm(this._m,this.bm),this.Jv!==0){const c=this.Jv*t*.006;this.$v.push({type:"wheel-zoom",deltaY:c}),this.Jv=Math.sign(this.Jv)*Math.max(Math.abs(this.Jv)-.01*t,0),this.Jv!==0&&this.us.Ss(!0)}const e=this.getCameraDirection();if(this.$v.length>0){const c=this.sb.applyCameraInteractions(this.eb(),this.$v);c&&this.hb(c),this.$v.length=0}this.gb&&J.equals(this.gb.location,this.cb.location)&&J.equals(this.gb.direction,this.cb.direction)||this.D.emit("cameraChange",this,this.getCameraLocation()),this.gb=this.cb,super.Te(t);for(let c=0;c<this.xS.length;c+=1)this.xS[c].oS();for(let c=0;c<this.xS.length;c+=1)this.xS[c].Te();this.ab.x.Mr(),this.ab.y.Mr(),this.ab.z.Mr(),this.ab.x.Te(e),this.ab.y.Te(e),this.ab.z.Te(e),super.pm();const i=this.rb,s=yt(i.x.getInnerStart(),i.y.getInnerStart(),i.z.getInnerStart()),n=yt(i.x.getInnerEnd(),i.y.getInnerEnd(),i.z.getInnerEnd());this.lb.Nt().nl([yt(n.x,s.y,s.z),yt(n.x,n.y,s.z),yt(n.x,n.y,n.z),yt(n.x,s.y,n.z),yt(s.x,s.y,n.z),yt(s.x,n.y,n.z),yt(n.x,n.y,n.z),yt(n.x,n.y,s.z),yt(s.x,n.y,s.z),yt(s.x,n.y,n.z),yt(s.x,s.y,n.z),yt(s.x,s.y,s.z)]);const o=[yt(s.x,s.y,s.z),yt(n.x,s.y,s.z),yt(s.x,n.y,s.z),yt(n.x,n.y,s.z),yt(s.x,s.y,n.z),yt(n.x,s.y,n.z),yt(s.x,n.y,n.z),yt(n.x,n.y,n.z)].map(c=>this.At.Gp(c)),h=this.At.Gp(yt((s.x+n.x)/2,(s.y+n.y)/2,(s.z+n.z)/2)),a=Ed(o,h),l=[];for(let c=0;c<a.length;c+=1){const d=a[c];Op(d,h,a[c>0?c-1:a.length-1],a[c<a.length-1?c+1:0])||l.push(d)}const u=Ed(l,h);this.FS.pl(u),this.IS.pl(u);for(let c=0;c<this.xS.length;c+=1)this.xS[c].dp()}dispose(){return this.an.forEach(t=>{t()}),this.an.length=0,this.rb.W(),this.At.W(),this.ib.W(),this.tb.W(),super.dispose()}j(){return this.rb.x.j(),this.rb.y.j(),this.rb.z.j(),super.j()}Z(){return super.Z()}hb(t){this.At.setCameraLocation(t.location).setCameraDirection(t.direction).setLightLocation(J.addVec(t.location,J.multiply(t.direction,-this.Xv))),this.cb=t,this.us.Ss()}fb(t){return J.divide(t,J.length(t)/this.Hv)}eb(t=this.cb){return{boundingBox:this.fb(this.Ab),cameraLocation:t.location,cameraDirection:t.direction}}setMouseInteractions(t){return this.setMouseInteractionZoom(t).setMouseInteractionRotate(t)}setMouseInteractionZoom(t){return this.Zv=t,this}getMouseInteractionZoom(){return this.Zv}setMouseInteractionRotate(t){return this.Qv=t,this}getMouseInteractionRotate(){return this.Qv}forEachAxis(t){return t(this.ab.x),t(this.ab.y),t(this.ab.z),this}getSeries(){return this.xS}getMinimumSize(){}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationZoom(t),this.forEachAxis(e=>e.setAnimationsEnabled(t)),this}setAnimationZoom(t){return this.jv=!!t,this}getAnimationZoom(){return this.jv}}const lA={Row:Ch};class uA extends bc{constructor(t,e,i,s,n,o){super(t,e,i,s,n,o),this.mb=new Map,this.yb=this.addUIElement(lA.Row).setPosition({x:0,y:100}).setOrigin(lo.LeftTop).setBackground(h=>h.setFillStyle(ft).setStrokeStyle(it))}add(t,e){return(t instanceof Ds?[t]:t instanceof Jy?t.getCells().filter(i=>i.panel instanceof Ds).map(i=>i.panel):[]).forEach(i=>{const s=this.yb.addElement(bS.VerticalLegendBox).setBackground(n=>n.setFillStyle(ft).setStrokeStyle(it)).add(i,e).setTitle(i.getTitle());this.mb.set(i,s)}),this.us.Ss(),this}setLegendBoxes(t){return this.mb.forEach((e,i)=>t(e,i)),this}getMinimumSize(){return super.getMinimumSize()||this.yb.getSize()}}const bs={World:"World",USA:"USA",NorthAmerica:"NorthAmerica",SouthAmerica:"SouthAmerica",Canada:"Canada",Europe:"Europe",Asia:"Asia",Africa:"Africa",Australia:"Australia"},cA=(r,t)=>!(!t.name||r.name.toLowerCase()!==t.name.toLowerCase())||"ISO_A3"in r&&"ISO_A3"in t&&r.ISO_A3.toLowerCase()===t.ISO_A3.toLowerCase(),dA=(r,t)=>{let e=t.geometry;return e=fA(r,t,e),e=gA(r,t,e),e},fA=(r,t,e)=>{if(r===bs.Asia){const i=[];for(let s=0;s<e.length;s+=1){i[s]=[];const n=e[s],o=i[s];for(let h=0;h<n.length;h+=1){const a=n[h];a.x<-100?o[h]={x:a.x+360,y:a.y}:o[h]=a}}return i}return e},gA=(r,t,e)=>{const i=t.name.toLowerCase();let s;if(r===bs.USA&&(i==="alaska"?s={translate:{x:55,y:-25},scale:{x:.16,y:.16}}:i==="hawaii"&&(s={translate:{x:48,y:7},scale:{x:1,y:1}})),s){const{translate:n,scale:o}=s,h=ce(Sa(e)),a=[];for(let l=0;l<e.length;l+=1){a[l]=[];const u=e[l],c=a[l];for(let d=0;d<u.length;d+=1){const f=u[d];let g=f.x;i==="alaska"&&Math.sign(g)===1&&(g=-180-(180-g)),c[d]={x:n.x+(g-h.min.x)*o.x+h.min.x,y:n.y+(f.y-h.min.y)*o.y+h.min.y}}}return t.outlier=!0,t.transform={...s,vertexBoundaries:h},a}return e},yA={World:{min:{x:-180,y:-90},max:{x:180.0000000000002,y:83.63410065300012}},Europe:{min:{x:-25,y:34},max:{x:40,y:70}},Africa:{min:{x:-17,y:-40},max:{x:52,y:37.37549753800012}},Asia:{min:{x:27,y:-10.922621351999808},max:{x:180.0000000000002,y:81.85871002800009}},NorthAmerica:{min:{x:-179.1435033839999,y:5.515082098000121},max:{x:-50,y:83.11652252800009}},SouthAmerica:{min:{x:-85,y:-55.9185042229998},max:{x:-35,y:15}},USA:{min:{x:-125,y:24},max:{x:-68,y:50}},Canada:{min:{x:-141.0181,y:41.7297},max:{x:-52.6194,y:75}},Australia:{min:{x:111,y:-43.6586},max:{x:155,y:-9.2199}}},mA={World:.6,Europe:1/1.4,Africa:1.3,Asia:.8,NorthAmerica:.9,SouthAmerica:1.5,USA:3/4,Canada:6/8,Australia:11/12};class wy extends Ds{constructor(t,e,i,s,n,o,h){super(t,e,i,e.vm("mapChart bg",0),s,e.us.qi.mapChartBackgroundFillStyle,e.us.qi.mapChartBackgroundStrokeStyle,e.us.qi.mapChartTitleFont,e.us.qi.mapChartTitleFillStyle,h),this.pb=[],this.dt=this.sm.d2({scaleXYConstructor:Gt}),this.Yi=!0,this.Sb=this.qi.mapChartSeparateRegionFillStyle,this.vb=this.qi.mapChartSeparateRegionStrokeStyle,this.bb=he.onHover,this.Wy=pA,this.th=!0,this.xb=0,this.Mb=!0,this._b=new Map,this.onMouseEnter=u=>this.D.on("mouseEnter",u),this.onMouseLeave=u=>this.D.on("mouseLeave",u),this.onMouseClick=u=>this.D.on("mouseClick",u),this.onMouseDoubleClick=u=>this.D.on("mouseDoubleClick",u),this.onMouseDown=u=>this.D.on("mouseDown",u),this.onMouseUp=u=>this.D.on("mouseUp",u),this.onMouseMove=u=>this.D.on("mouseMove",u),this.offMouseEnter=u=>this.D.off(u,"mouseEnter"),this.offMouseLeave=u=>this.D.off(u,"mouseLeave"),this.offMouseClick=u=>this.D.off(u,"mouseClick"),this.offMouseDoubleClick=u=>this.D.off(u,"mouseDoubleClick"),this.offMouseDown=u=>this.D.off(u,"mouseDown"),this.offMouseUp=u=>this.D.off(u,"mouseUp"),this.offMouseMove=u=>this.D.off(u,"mouseMove"),this.offMouseDragStart=u=>this.D.off(u,"mouseDragStart"),this.offMouseDrag=u=>this.D.off(u,"mouseDrag"),this.offMouseDragStop=u=>this.D.off(u,"mouseDragStop"),this.offMouseWheel=u=>this.D.off(u,"mouseWheel"),this.onMapDataReady=u=>{const c=this.D.on("mapDataReady",u);return this.wb&&X.setTimeout(()=>u()),c},this.onViewChange=u=>this.D.on("viewChange",u),this.Cb=(u,c,d,f,g)=>{this.dt.x.q(f).si([this.Xt.left+this.ya.left,this.Xt.right+this.ya.right]),this.dt.y.q(g).si([this.Xt.bottom+this.ya.bottom,this.Xt.top+this.ya.top+ii.Tm(this._m,this.bm)]),this.kb&&this.Tb(this.Fb,this.dt,this.kb)},this.wt=(u,c)=>{const d=c;if(!d||!this.wb)return;const{iRegion:f,region:g}=this.Ib(this.wb,d);this.bb!==he.disabled&&(this.Pb(g,f),tt(u)),this.Mb&&this.us.ls.Ms(g,!0),this.Db=g,this.D.emit("mouseEnter",this,u)},this.Ct=(u,c)=>{const d=c;if(!d||!this.wb)return;const{iRegion:f,region:g}=this.Ib(this.wb,d);this.Bb(g,f),this.Mb&&this.us.ls.Ms(g,!1),this.Db=void 0,this.D.emit("mouseLeave",this,u),u&&tt(u)},this.Pt=(u,c)=>{const d=c;if(!d||!this.wb)return;const{iRegion:f,region:g}=this.Ib(this.wb,d);this.bb!==he.disabled&&(this.Pb(g,f),tt(u)),this.Db=g,this.D.emit("mouseMove",this,u)},this.kt=(u,c)=>this.D.emit("mouseClick",this,u),this.Tt=(u,c)=>this.D.emit("mouseDoubleClick",this,u),this.Ft=(u,c)=>this.D.emit("mouseDown",this,u),this.It=(u,c)=>this.D.emit("mouseUp",this,u),this.Bt=(u,c,d)=>{this.D.emit("mouseDragStart",this,u,c)},this.Dt=(u,c,d,f,g)=>{this.D.emit("mouseDrag",this,u,c,d,f)},this.Lt=(u,c,d,f)=>{this.D.emit("mouseDragStop",this,u,c,d)},this.Rt=(u,c)=>{this.D.emit("mouseWheel",this,u)},this.Et=(u,c)=>{const d=c;if(!d||!this.wb)return;const{iRegion:f,region:g}=this.Ib(this.wb,d);this.Lb=this.engine.clientLocation2Engine(u.clientX,u.clientY),this.Pb(g,f),this.Mb&&this.us.ls.Ms(g,!0),this.Db=g,this.D.emit("touchStart",this,u),tt(u)},this.zt=(u,c)=>{const d=c;if(!d||!this.wb)return;const{iRegion:f,region:g}=this.Ib(this.wb,d);this.Lb=this.engine.clientLocation2Engine(u.clientX,u.clientY),this.Pb(g,f),this.Db=g,this.D.emit("touchMove",this,u),tt(u)},this.Vt=(u,c)=>{const d=c;if(!d||!this.wb)return;const{iRegion:f,region:g}=this.Ib(this.wb,d);this.Lb=void 0,this.Bb(g,f),this.Mb&&this.us.ls.Ms(g,!1),this.Db=void 0,this.D.emit("touchEnd",this,u),tt(u)},this.us.Nn(ot.Af),this.th=(o==null?void 0:o.disableAnimations)!==!0&&(o==null?void 0:o.animationsEnabled)!==!1,this.Rb=e.$y("mapChart plotting",0),this.onResize(this.Cb),this._m.Rh("Map Chart");const a=qt(o?o.autoCursorBuilder:void 0,My);this.Eb=a.Ay(e.Zy(),this.dt,this.dt,this.qi).setVisible(!1),this.zb=this.es.yg(),this.Sm(n,this.uiScale),this.Vb=this.Rb.Ob(this.dt).setMouseInteractions(this.Yi).setMouseEnterEventHandler((u,c,d)=>this.wt(c,d)).setMouseLeaveEventHandler((u,c,d)=>this.Ct(c,d)).setMouseClickEventHandler((u,c,d)=>this.kt(c,d)).setMouseDoubleClickEventHandler((u,c,d)=>this.Tt(c,d)).setMouseDownEventHandler((u,c,d)=>this.Ft(c,d)).setMouseUpEventHandler((u,c,d)=>this.It(c,d)).setMouseMoveEventHandler((u,c,d)=>this.Pt(c,d)).setMouseDragStartEventHandler((u,c,d,f)=>this.Bt(c,d,f)).setMouseDragEventHandler((u,c,d,f,g,y)=>this.Dt(c,d,f,g,y)).setMouseDragStopEventHandler((u,c,d,f,g)=>this.Lt(c,d,f,g)).setMouseWheelEventHandler((u,c,d)=>this.Rt(c,d)).setTouchStartEventHandler((u,c,d)=>this.Et(c,d)).setTouchMoveEventHandler((u,c,d)=>this.zt(c,d)).setTouchEndEventHandler((u,c,d)=>this.Vt(c,d)).Ce(this.qi.mapChartFillStyle).we(this.qi.mapChartStrokeStyle),this.Nb=this.Rb.Ob(this.dt).setMouseInteractions(this.Yi).Ce(this.qi.mapChartOutlierRegionFillStyle).we(this.qi.mapChartOutlierRegionStrokeStyle);const l=qt(o&&o.type,bs.World);this.Fb=l,this.Gb(l).then(()=>{this.D.emit("mapDataReady")})}getRegionUnderMouse(){return this.Db}setFillStyle(t){return this.Vb.Ce(t),this.us.Ss(),this}getFillStyle(){return this.Vb.Eh()}setStrokeStyle(t){return this.Vb.we(t),this.us.Ss(),this}getStrokeStyle(){return this.Vb.ao()}setEffect(t){return this.zb.ps(t),this.us.Ss(),this}getEffect(){return this.zb.vs()}setOutlierRegionFillStyle(t){return this.Nb.Ce(t),this.us.Ss(),this}getOutlierRegionFillStyle(){return this.Nb.Eh()}setOutlierRegionStrokeStyle(t){return this.Nb.we(t),this.us.Ss(),this}getOutlierRegionStrokeStyle(){return this.Nb.ao()}setSeparateRegionFillStyle(t){return this.Sb=typeof t=="function"?t(this.Sb):t,this.pb.forEach(e=>e.Ce(this.Sb)),this.us.Ss(),this}getSeparateRegionFillStyle(){return this.Sb}setSeparateRegionStrokeStyle(t){return this.vb=typeof t=="function"?t(this.vb):t,this.pb.forEach(e=>e.we(this.vb)),this.us.Ss(),this}getSeparateRegionStrokeStyle(){return this.vb}invalidateRegionValues(t){if(!this.wb||!this.Wb)return this.Ub=this.Ub||[],this.Ub.push(t),this;if(typeof t=="function")for(let e=0;e<this.wb.regions.length;e+=1){const i=this.wb.regions[e],s=this.Wb[e],n=t({...i,geometry:void 0},s);if(n!==void 0&&n!==s){this.Wb[e]=n;const o=this._b.get(i);o==null||o.forEach(h=>{h.Yb(n)})}}else for(const e of t)if(e)for(let i=0;i<this.wb.regions.length;i+=1){const s=this.wb.regions[i],n=this.Wb[i];if(e.value!==void 0&&e.value!==n&&cA(s,e)){this.Wb[i]=e.value;const o=this._b.get(s);o==null||o.forEach(h=>{h.Yb(e.value)})}}return this.us.Ss(),this}setAutoCursor(t){return this.Eb&&t(this.Eb),this.us.Ss(),this}getAutoCursor(){return this.Eb}setAutoCursorMode(t){return this.bb=t,this.us.Ss(),this}getAutoCursorMode(){return this.bb}setCursorResultTableFormatter(t){return this.Wy=t,this.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}onMouseDragStart(t){return this.D.on("mouseDragStart",t)}onMouseDrag(t){return this.D.on("mouseDrag",t)}onMouseDragStop(t){return this.D.on("mouseDragStop",t)}onMouseWheel(t){return this.D.on("mouseWheel",t)}onTouchStart(t){return this.D.on("touchStart",t)}onTouchMove(t){return this.D.on("touchMove",t)}onTouchEnd(t){return this.D.on("touchEnd",t)}offTouchStart(t){return this.D.off(t,"touchStart")}offTouchMove(t){return this.D.off(t,"touchMove")}offTouchEnd(t){return this.D.off(t,"touchEnd")}setMouseInteractions(t){return this.Yi=t,this.Vb.setMouseInteractions(t),this}getMouseInteractions(){return this.Yi}setHighlight(t){var e;return t=Hr(t),this.xb=t,(e=this.wb)===null||e===void 0||e.regions.forEach(i=>{this.us.ls.Ms(i,t)}),this.D.emit("highlight",this,t),this}getHighlight(){return this.xb}setAnimationHighlight(t){var e;return(e=this.wb)===null||e===void 0||e.regions.forEach(i=>{this.us.ls._s(i,t)}),this}getAnimationHighlight(){var t;return this.us.ls.ws((t=this.wb)===null||t===void 0?void 0:t.regions[0])}setHighlightOnHover(t){return this.Mb=t,t===!1&&this.getHighlight()>0&&this.setHighlight(!1),this}getHighlightOnHover(){return this.Mb}onHighlight(t){return this.D.on("highlight",t)}offHighlight(t){return this.D.off(t)}offMapDataReady(t){return this.D.off(t,"mapDataReady")}offViewChange(t){return this.D.off(t,"viewChange")}async Gb(t){const e=await((n,o)=>{let h;if(n===bs.World)h="countries_world.json";else if(n===bs.NorthAmerica)h="countries_northAmerica.json";else if(n===bs.SouthAmerica)h="countries_southAmerica.json";else if(n===bs.Africa)h="countries_africa.json";else if(n===bs.Europe)h="countries_europe.json";else if(n===bs.Asia)h="countries_asia.json";else if(n===bs.USA)h="states_usa.json";else if(n===bs.Canada)h="territoriesProvinces_canada.json";else{if(n!==bs.Australia){const l=`LCJS MapChart unidentified \`type\`: ${n}`;throw X.alert(l),new Error(l)}h="territories_australia.json"}const a=`${o}/maps/${h}`;return X.fetch(a).then(l=>l.json()).catch(l=>{Cg(o,a,"Map Chart",{shouldCrash:!0})})})(t,this.cA.$s);this.Wb=new Array(e.regions.length).map(n=>{}).fill(void 0);const i=yA[t];if(!i)throw new Error("Unidentified map type.");for(const n of e.outliers)for(const o of n.geometry)this.Nb.zr().pl(o);t===bs.USA&&this.pb.push(this.Rb.ke(this.dt).setMouseInteractions(!1).Ce(this.Sb).we(this.vb).Fe({x:-126,y:25.8}).q({x:10,y:29.7-25.8}),this.Rb.ke(this.dt).setMouseInteractions(!1).Ce(this.Sb).we(this.vb).Fe({x:-113,y:25.8}).q({x:7,y:29.7-25.8}));const s=this.us.ls.Er(this.Vb,{animationEnabled:this.th});for(let n=0;n<e.regions.length;n+=1){const o=e.regions[n],h=dA(t,o),a=[];for(const l of h)l.length<3||a.push(this.Vb.zr().pl(l));this._b.set(o,a),s.zr(o,l=>{a.forEach(u=>u.cs(l))})}if(this.zb.fs([this.Vb]),this.kb=i,this.Tb(t,this.dt,i),this.wb=e,this.Ub){for(const n of this.Ub)this.invalidateRegionValues(n);this.Ub=void 0}this.us.Ss()}Tb(t,e,i){const s=mA[t],n=e.x.getCellSize(),o=e.y.getCellSize()/n,h={min:{x:i.min.x,y:i.min.y},max:{x:i.max.x,y:i.max.y}};if(o<s){const u=(h.max.x-h.min.x)*(s/o-1);h.min.x-=u/2,h.max.x+=u/2}else if(o>s){const u=(h.max.y-h.min.y)*(o/s-1);h.min.y-=u/2,h.max.y+=u/2}e.x.J(h.min.x,h.max.x),e.y.J(h.min.y,h.max.y);const a=this.dt.x.li(),l=this.dt.y.li();this.D.emit("viewChange",{latitudeRange:{start:h.min.y,end:h.max.y},longitudeRange:{start:h.min.x,end:h.max.x},margin:{top:l[1],bottom:l[0],left:a[0],right:a[1]}})}Pb(t,e){this.Hb={region:t,iRegion:e},this.us.Ss()}Bb(t,e){this.Hb&&t===this.Hb.region&&(this.Hb=void 0,this.us.Ss())}Ib(t,e){const i=Array.from(this._b.entries()).findIndex(([s,n])=>n.includes(e));return{iRegion:i,region:t==null?void 0:t.regions[i]}}setAnimationsEnabled(t){return this.th=!t,this}getAnimationsEnabled(){return this.th}getMinimumSize(){}Zd(){return[this]}Te(t){super.Te(t),super.pm(),ii.Fm(this._m,this.bm);const e=ug(this.dt.x.ei(),this.dt.y.ei(),this.dt.x.ri(),this.dt.y.ri());this.Rb.qv(e);const i=this.us.On()||this.Lb;if(this.Hb&&i){const s=this.Wb&&this.Wb[this.Hb.iRegion];let n=K(i,this.engine.scale,this.dt);n={x:Rt(n.x,this.dt.x.getInnerStart(),this.dt.x.getInnerEnd()),y:Rt(n.y,this.dt.y.getInnerStart(),this.dt.y.getInnerEnd())};let o=n.x,h=n.y;const a=this.Hb.region.transform;this.Hb.region.outlier&&a&&(o=(o-a.translate.x-a.vertexBoundaries.min.x)/a.scale.x+a.vertexBoundaries.min.x,h=(h-a.translate.y-a.vertexBoundaries.min.y)/a.scale.y+a.vertexBoundaries.min.y),this.Eb.setPosition(n).setVisible(!0).getResultTable().setContent(this.Wy(new $e,this.Hb.region,s,o,h,this).Zu())}else this.Eb.setVisible(!1);return this.Eb.Ps().Te(),this}dispose(){return this.Rb.W(),this.Eb.dispose(),po(this.dt),super.dispose()}j(){return super.j(),this.dt.j(),this}Z(){return super.Z(),this.dt.Z(),this}Gd(){return Qe(this.getFillStyle())}attach(t,e=!0,i=!1){return t.setText(this.getTitle()),t.setOn(!0).setLocked(!0),t.onMouseEnter(()=>{this.setHighlight(!0)}),t.onMouseLeave(()=>{this.setHighlight(!1)}),this.onMouseEnter(()=>t.setHighlight(!0)),this.onMouseLeave(()=>t.setHighlight(!1)),this.onTouchStart(()=>t.setHighlight(!0)),this.onTouchEnd(()=>t.setHighlight(!1)),ge(t,this.qi,i,{fill:this.getFillStyle()}),this}}const pA=(r,t,e,i,s,n)=>(r.addRow(`${t.name}`).addRow(xA(i,s)),e!==void 0&&r.addRow(`Region value: ${e.toFixed(1)}`),r),xA=(r,t)=>{const e=r>0,i=t>0;return`${[gi(Math.abs(0|r),2),"° ",gi(Math.abs(0|(r<0?r=-r:r)%1*60),2),"' "].join("")+(e?"E":"W")}, ${[gi(Math.abs(0|t),2),"° ",gi(Math.abs(0|(t<0?t=-t:t)%1*60),2),"' "].join("")+(i?"N":"S")}`};class ky extends bn{constructor(t,e,i,s,n,o,h,a,l){super(t,e,e.$b(i),s,n,{numeric:e.Xb({amplitude:s.polarAmplitudeAxisNumericTicks,radial:s.polarAmplitudeAxisNumericTicks}),datetime:e.Xb({amplitude:s.polarAmplitudeAxisDateTimeTicks,radial:s.polarAmplitudeAxisDateTimeTicks}),time:e.Xb({amplitude:s.polarAmplitudeAxisTimeTicks,radial:s.polarAmplitudeAxisTimeTicks})},{type:"linear"}),this.jb=o,this.Zb=h,this.Qb=a,this.es=l,this.Jb=i,this.Kb=e.Xb({amplitude:s.polarAmplitudeAxisStrokeStyle,radial:s.polarRadialAxisStrokeStyle}),this.Lh=a.Pr(i).setMouseInteractions(!1).Oh(e.Xb({amplitude:s.polarAmplitudeAxisTitleFont,radial:s.polarRadialAxisTitleFont})).Ce(e.Xb({amplitude:s.polarAmplitudeAxisTitleFillStyle,radial:s.polarRadialAxisTitleFillStyle})),this.Wh=this.es.yg([this.Lh]).ps(s.effectsText)}setTickStrategy(t,e){return super.Fh(t,e)}setStrokeStyle(t){return this.Kb=typeof t=="function"?t(this.Kb):t,this.Zb.Ss(),this}getStrokeStyle(){return this.Kb}ur(t,e){return new SA(e,t,this.Jb,this.Qb,this.qb(this.jb,this.Jb),this.Qb.Ee(this.Jb).setMouseInteractions(!1))}cr(t,e){const i=this.tx(this.Jb,t);this.ix&&this.ix(t)===!1?t.Ue.setVisible(!1):t.Ue.setVisible(!0).Fe(gt(this.sx(this.Jb,t.u),i.padding)).Ea(i.alignment).Nh(i.rotation).Ia(i.offset.x,i.offset.y),this.hx(this.Jb,t.nx,t.ox,t)}setMouseInteractions(t){return this}Te(){this.qh({physicalAxisSize:0});const t=this.gr((e,i)=>{const s=i.Sh.lr,n=.5*this.Kb.getThickness()+s.tickLength+s.tickPadding+Math.abs(i.Ue.Ps().jc().y)+s.labelPadding;return Math.max(e,n)},0);return this.lx(this.Jb,this.Kb,t),this.ux(this.Jb,this.Lh,t),t}}class SA extends wh{constructor(t,e,i,s,n,o,h){super(t,e,s,i,h),this.nx=n,this.ox=o,n.setMouseInteractions(!1),this.ts.push(n,o)}}class AA extends ky{constructor(t,e,i,s,n,o,h,a,l){super(t,vA(()=>this._g()),e,i,s,n,o,h,a),this.Lp=this.Zb.Ee(this.Jb).setMouseInteractions(!1),this.Ax=l,this.setScrollStrategy(Fs.expansion),this.setTickStrategy(uo.Numeric),this.setTitle("Amplitude")}_g(){return this.Ax()}_r(t,e){return ch(t,e,this.Jb.y)}Cr(t,e,i){const s=2*(e-t),n=this.Jb.x.Li(s);return{min:t-i*n,max:e+i*n}}sx(t,e){return{x:t.gx()?e-t.mx().start:t.mx().start-e,y:0}}qb(t,e){return t.Jc(e)}hx(t,e,i,s){const n=s.Sh.lr,o=t.gx()?s.u-t.mx().start:t.mx().start-s.u;De(s.u,t.mx().start)||De(s.u,t.mx().end)?e.setVisible(!1):e.setVisible(!0).eu(0).ze(360).au(void 0).ou(0).hu(o).au(60).Ce(ft).we(n.gridStrokeStyle);const h=.5*this.Kb.getThickness();i.Ve({x:o,y:-h*t.Wi().y}).ze({x:o,y:-(h+n.tickLength)*t.Wi().y}).Re(n.tickStyle)}tx(t,e){const i=e.Sh.lr;return{alignment:{x:0,y:1},padding:{x:0,y:t.Wi().y*-(.5*this.Kb.getThickness()+i.tickLength+i.tickPadding)},rotation:0,offset:{x:0,y:0}}}lx(t,e,i){const s=t.gx()?t.mx().end-t.mx().start:t.mx().start-t.mx().end;this.Lp.Ve({x:0,y:0}).ze({x:s,y:0}).Re(e)}ux(t,e,i){const s=t.gx()?(t.mx().start+t.mx().end)/2-t.mx().start:t.mx().start-(t.mx().start+t.mx().end)/2;e.Ea({x:0,y:1}).Fe({x:s,y:-i*t.Wi().y})}}const vA=r=>({...Po(r,t=>t.getAmplitudeMin(),t=>t.getAmplitudeMax(),t=>{}),$b:t=>({getInnerStart:()=>t.mx().start,getInnerEnd:()=>t.mx().end,J:(e,i)=>t.yx(e,i),nt:(e,i,s,n,o)=>t.y.nt(e,i,s,n,o)}),Xb:t=>t.amplitude});class bA extends ky{constructor(t,e,i,s,n,o,h,a){super(t,MA,e,i,s,n,o,h,a),this.Sx=90,this.vx=12,this.bx=ef,this.Lp=this.Zb.Jc(this.Jb).setMouseInteractions(!1),this.ix=l=>{let u=180*(l.u-this.Jb.xx())/Math.PI%360;for(;u<0;)u+=360;for(;u>360;)u-=360;if(u>=0&&u<=20||u>=340&&u<=360)return!1},this.Je=void 0,this.setTickStyle(i.polarRadialAxisTickStyle),this.setTitle("Degrees"),this.setNorth(this.Sx)}setTickStyle(t){return this.Mx=typeof t=="function"?t(this.Mx):t,this._x(),this.Zb.Ss(),this}getTickStyle(){return this.Mx}setTickFormattingFunction(t){return this.bx=t,this._x(),this.Zb.Ss(),this}getTickFormattingFunction(){return this.bx}setClockwise(t){this.Jb.wx(t);const e=this.Sx*Math.PI/180;return t?this.Jb.Cx(e+Math.PI/2):this.Jb.Cx(e-Math.PI/2),this.Zb.Ss(),this}getClockwise(){return!this.Jb.kx()}setNorth(t){for(;t<0;)t+=360;t%=360,this.Sx=t;const e=t*Math.PI/180;return this.getClockwise()?this.Jb.Cx(e+Math.PI/2):this.Jb.Cx(e-Math.PI/2),this.Zb.Ss(),this}getNorth(){return 180*this.Jb.xx()/Math.PI}setDivision(t){return this.vx=t,this._x(),this.Zb.Ss(),this}getDivision(){return this.vx}_g(){return[]}_r(t,e){return e}Cr(t,e,i){return{min:t,max:e}}sx(t,e){const i=t.kx()?1:-1,s=t.xx(),n=t.gx()?t.mx().end-t.mx().start:t.mx().start-t.mx().end;return{x:Math.cos((e-s)*i)*n,y:Math.sin((e-s)*i)*n}}qb(t,e){return t.Ee(e)}hx(t,e,i,s){const n=this.Mx,o=t.kx()?1:-1,h=t.xx(),a=(s.u-h)*o,l=Math.cos(a),u=Math.sin(a),c=t.gx()?t.mx().end-t.mx().start:t.mx().start-t.mx().end,d={x:l*c,y:u*c};e.Ve({x:0,y:0}).ze(d);const f={x:d.x+l*n.tickLength*t.Wi().x,y:d.y+u*n.tickLength*t.Wi().y};i.Ve(d).ze(f),e.Re(n.gridStrokeStyle),i.Re(n.tickStyle)}tx(t,e){const i=this.Mx,s=t.kx()?1:-1,n=t.xx();let o,h=(e.u-n)*s;for(;h<0;)h+=2*Math.PI;for(;h>=2*Math.PI;)h-=2*Math.PI;o=h>0&&h<=Math.PI?-h+Math.PI/2:-h-Math.PI/2;const a=i.tickLength+i.tickPadding,l=Math.cos(h)*a*t.Wi().x,u=Math.sin(h)*a*t.Wi().y;return{alignment:{x:0,y:0},padding:{x:l,y:u},rotation:180*o/Math.PI,offset:{x:l,y:u}}}lx(t,e,i){const s=t.gx()?t.mx().end-t.mx().start:t.mx().start-t.mx().end;this.Lp.eu(0).ze(360).ou(0).hu(s+.5*e.getThickness()*t.Wi().x).au(360).Ce(ft).we(e)}ux(t,e,i){const s=t.xx(),n=this.tx(t,{u:0+s}),o=t.gx()?t.mx().end-t.mx().start:t.mx().start-t.mx().end;e.Ea(n.alignment).Nh(n.rotation).Ia(n.offset.x,n.offset.y).Fe(gt({x:o,y:0},n.padding))}_x(){this.$h({He:[],$e:[{Ue:"Radial ticks",Rg:0,lr:this.Mx,nr:this.bx,Br:(t,e,i,s)=>{const n=[],o=2*Math.PI/this.vx;for(let h=0;h<2*Math.PI;h+=o)n.push(h);return n},bh:{dr:()=>{},xh:()=>!1},Lr:void 0}],Ge:ef,Xh:void 0,jh:void 0})}}const ef=(r,t,e)=>(180*r/Math.PI).toFixed(0),MA={pr:()=>{},Sr:()=>{},br:()=>{},$b:r=>({getInnerStart:()=>0,getInnerEnd:()=>2*Math.PI,J:(t,e)=>{},nt:(t,e,i,s,n)=>r.x.nt(t,e,i,s,n)}),Xb:r=>r.radial},Ol=r=>!!(r&&typeof r=="object"&&"axisAmplitude"in r&&"axisRadial"in r),RA=r=>!!(r&&typeof r=="object"&&"angle"in r&&typeof r.angle=="number"&&"amplitude"in r&&typeof r.amplitude=="number");class EA extends Eh{constructor(t,e,i,s,n,o){super(e,i,n,o),this.xs="Sector",this.Tx=0,this.Fx=1*Math.PI/2,this.Ix=void 0,this.Px=void 0,this.ks=t,this.Jb=s,this.ky=this.ks.Jc(this.Jb).cs(this.getHighlight()),this.ds(this.ky),this.be=n.polarSectorFillStyle,this.xe=n.polarSectorStrokeStyle,this.setMouseInteractions(!1)}setAngleStart(t){return this.Tx=Rt(t,0,360),this.ks.Ss(),this}getAngleStart(){return this.Tx}setAngleEnd(t){return this.Fx=Rt(t,0,360),this.ks.Ss(),this}getAngleEnd(){return this.Fx}setAmplitudeStart(t){return this.Ix=t,this.ks.Ss(),this}getAmplitudeStart(){return this.Ix}setAmplitudeEnd(t){return this.Px=t,this.ks.Ss(),this}getAmplitudeEnd(){return this.Px}setFillStyle(t){return this.be=typeof t=="function"?t(this.be):t,this.ks.Ss(),this}getFillStyle(){return this.be}setStrokeStyle(t){return this.xe=typeof t=="function"?t(this.xe):t,this.ks.Ss(),this}getStrokeStyle(){return this.xe}Te(){const t=this.Jb.mx(),e=180*this.Jb.xx()/Math.PI,i=this.Ix!==void 0?Rt(this.Ix,t.start,t.end):t.start,s=this.Px!==void 0?Rt(this.Px,t.start,t.end):t.end,n=this.Jb.gx()?i-t.start:t.start-i,o=this.Jb.gx()?s-t.start:t.start-s,h=Math.min(n,o),a=Math.max(n,o),l=this.Jb.kx()?1:-1,u=Math.abs(this.Fx-this.Tx);this.ky.eu((this.Tx-e)*l).ze((this.Fx-e)*l).ou(100*h/a).hu(a).Ce(this.be).we(this.xe).au(Math.ceil(u/2))}Ie(t,e){t.cs(e),this.ks.Ss()}attach(t,e=!0,i=!1){return super.attach(t,e,i),ge(t,this.qi,i,{fill:this.be,stroke:this.xe}),this}}class dl extends Eh{constructor(){super(...arguments),this.tS=!0,this.Dx=!0}setAutoScrollingEnabled(t){return this.tS=t,this.Ji.us.Ss(),this}getAutoScrollingEnabled(){return this.tS}oS(){}Te(){}dp(){}setCursorEnabled(t){return this.Dx=t,this}getCursorEnabled(){return this.Dx}}class Vo extends dl{constructor(t,e,i,s,n,o){super(e,i,n,o),this.ks=t,this.Ji=e,this.scale=s}getAmplitudeMin(){return this.Bx?this.Bx.min:void 0}getAmplitudeMax(){return this.Bx?this.Bx.max:void 0}}const Ph=(r,t,e,i,s)=>{const n=t.getIcon();return n?r.addRow(n,t.getName()):r.addRow(t.getName()),r.addRow("Angle:","",Math.round(e).toString()).addRow("Amplitude","",s(i))},Qr=(r,t)=>{const e=[],i=t.mx().start,s=t.mx().end,n=t.gx(),o=t.kx()?1:-1,h=t.xx(),a=Math.abs(s-i),l=Math.min(i,s)+.001*a,u=Math.max(i,s)-.001*a;for(const c of r){const d=Rt(c.amplitude,l,u),f=c.angle*Math.PI/180-h,g=Math.cos(f*o)*(n?d-i:i-d),y=Math.sin(f*o)*(n?d-i:i-d),p=c.color;e.push({x:g,y,color:p})}return e},Ih=r=>{const t={min:st,max:ht};for(const e of r)t.min=Math.min(t.min,e.amplitude),t.max=Math.max(t.max,e.amplitude);return t},fl=r=>r.slice().map(t=>t.angle>=0&&t.angle<=360?t:{...t,angle:t.angle%360}),Kr=(r,t)=>{let e=du(r);for(t.kx()||(e*=-1),e+=180*t.xx()/Math.PI;e<0;)e+=360;e%=360;const i=Pr(r),s=t.mx(),n=Math.abs(s.end-s.start);return{angle:e,amplitude:$r(s.start,s.end,i/n)}};class wA extends Vo{constructor(t,e,i,s,n,o,h){super(t,e,i,s,n,o),this.xs="Heatmap Series",this.Lx=!0,this.dS=!1,this.Wy=kA,this.Gd=()=>Qe(this.be);const a=this.Ji.getSeries().length;this.be=kt(this.qi.polarHeatmapSeriesFillStyle||this.qi.heatmapGridSeriesFillStyle,a);const l=h.amplitudeStart||0,u=h.amplitudeEnd?(h.amplitudeEnd-l)/(h.annuli-1):h.amplitudeStep||1,c={sectors:h.sectors,annuli:h.annuli,amplitudeStart:l,amplitudeStep:u,heatmapDataType:"intensity",dataOrder:h.dataOrder||"annuli"};this.Un=c,this.Rx=t.Ex(s,[],c).Ce(this.be).cs(this.getHighlight()),this.ds(this.Rx);const d=Math.min(c.amplitudeStart,c.amplitudeStart+(c.annuli-1)*c.amplitudeStep),f=Math.max(c.amplitudeStart,c.amplitudeStart+(c.annuli-1)*c.amplitudeStep);this.Bx={min:d,max:f},this.setHighlightOnHover(!1)}invalidateIntensityValues(t){if(this.dS&&this.Ji.us.Nn(ot.vf),Array.isArray(t)){if(t.length===0||t[0].length===0)return this;const e={x:t.length,y:t[0].length,sectors:this.Un.dataOrder==="annuli"?t[0].length:t.length,annuli:this.Un.dataOrder==="annuli"?t.length:t[0].length},i=this.Un.dataOrder==="annuli"?this.Un.annuli:this.Un.sectors,s=this.Un.dataOrder==="annuli"?this.Un.sectors:this.Un.annuli;if(e.x>i||e.y>s){if(this.Ji.cA.Hn===!0){const o=`PolarHeatmapSeries.invalidateIntensityValues intensity matrix overflow.
Heatmap ${i}x${s}, input ${e.x}x${e.y}.
Excess data will be automatically clipped. This can result in sub-optimal performance.`;X.console.warn(o)}const n=[];for(let o=0;o<i;o+=1)n[o]=t[o].slice(0,s);if((t=n).length===0||t[0].length===0)return this}this.Rx._v({type:"intensity",lengthPrimary:e.x,lengthSecondary:e.y,startPrimary:0,startSecondary:0,values:t})}else if("iSector"in t&&"iAnnulus"in t&&"values"in t){if(t.values.length===0||t.values[0].length===0)return this;const e={primary:t.values.length,secondary:t.values[0].length,sectors:this.Un.dataOrder==="annuli"?t.values[0].length:t.values.length,annuli:this.Un.dataOrder==="annuli"?t.values.length:t.values[0].length},i=this.Un.dataOrder==="annuli"?t.iAnnulus:t.iSector,s=i+e.primary-1,n=this.Un.dataOrder==="annuli"?t.iSector:t.iAnnulus,o=n+e.secondary-1,h=this.Un.dataOrder==="annuli"?this.Un.annuli-1:this.Un.sectors-1,a=this.Un.dataOrder==="annuli"?this.Un.sectors-1:this.Un.annuli-1;if(i<0||n<0){if(this.Ji.cA.Hn===!0){const l=`PolarHeatmapSeries.invalidateIntensityValues invalidation start below 0 not permitted.
iSector: ${t.iSector}, iAnnuli: ${t.iAnnulus}.
No intensity values will be invalidated.`;X.console.warn(l)}return this}if(s>h||o>a){if(this.Ji.cA.Hn===!0){const f=`PolarHeatmapSeries.invalidateIntensityValues intensity matrix overflow.
Max indexes ${h}x${a}, input ${e.primary}x${e.secondary} starting at [${i},${n}].
Out of bounds data will be automatically clipped. This can result in sub-optimal performance.`;X.console.warn(f)}const l=Math.max(s-h,0),u=e.primary-l,c=Math.max(o-a,0),d=[];for(let f=0;f<u;f+=1)d[f]=t.values[f].slice(0,c>0?-c:void 0);if((t={iSector:t.iSector,iAnnulus:t.iAnnulus,values:d}).values.length===0||t.values[0].length===0)return this}this.Rx._v({type:"intensity",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:i,startSecondary:n,values:t.values})}return this.ks.Ss(),this.dS=!0,this}setFillStyle(t){return this.be=typeof t=="function"?t(this.be):t,this.Rx.Ce(this.be),this.ks.Ss(),this}getFillStyle(){return this.be}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}clear(){return this.Rx.Nt(),this.ks.Ss(),this}setCursorInterpolationEnabled(t){return this.Lx=t,this.ks.us.Ss(),this}getCursorInterpolationEnabled(){return this.Lx}setCursorEnabled(t){return super.setCursorEnabled(t)}setIntensityInterpolation(t){return t=t||"disabled",this.Rx.xv(t),this.ks.Ss(),this}getIntensityInterpolation(){return this.Rx.Mv()}Kp(){return this.tS&&this.getVisible()}Ie(t,e){t.cs(e),this.ks.Ss()}Hc(t,e){const i=K(t,this.Ji.engine.scale,this.scale),s=Kr(i,this.scale),n=this.Lx?this.Rx.zx(s):this.Rx.Hc(s);if(n)return Fi(Qr([n],this.scale)[0],this.scale,this.Wy(new $e,this,{angleDeg:n.angle,amplitude:n.amplitude,intensity:n.cellValue,iAnnulus:n.iAnnulus,iSector:n.iSector},this.Ji.getAmplitudeAxis().formatValue).Zu(),this,this.be)}solveNearestFromScreen(t){return this.Hc(ei(t,this.Ji.us),!1)}Te(){}attach(t,e=!0,i=!1){return super.attach(t,e),ge(t,this.qi,i,{fill:this.be}),this}}const kA=(r,t,e,i)=>{const s=t.getIcon();return s?r.addRow(s,t.getName()):r.addRow(t.getName()),r.addRow("Angle:","",Math.round(e.angleDeg).toString()).addRow("Amplitude","",i(e.amplitude)).addRow("Intensity","",e.intensity.toFixed(1))};class TA extends Vo{constructor(t,e,i,s,n,o,h){super(t,e,i,s,n,h),this.xs="Line Series",this.Vx=[],this.Ox=!1,this.Nx=!1,this.Wy=Ph,this.lu=kt(this.qi.polarLineSeriesStrokeStyle,o),this.Gx=t.rp(s,void 0,[ms.UserSeries]).Re(this.lu).cs(this.getHighlight()).Ka(Je.Nearest),this.ds(this.Gx)}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}setData(t){return this.Vx.length!==0&&this.Ji.us.Nn(ot.vf),this.Vx=fl(t),this.Ox=!0,this.Bx=Ih(this.Vx),this.ks.Ss(),this}setStrokeStyle(t){this.lu=typeof t=="function"?t(this.lu):t;const e=this.lu;return this.Gx.Re(e),this.ks.Ss(),this}getStrokeStyle(){return this.lu}setConnectDataAutomaticallyEnabled(t){return this.Nx=t,this.ks.Ss(),this}getConnectDataAutomaticallyEnabled(){return this.Nx}Kp(){return this.tS&&this.Vx.length>0&&this.getVisible()}Ie(t,e){t.cs(e),this.ks.Ss()}Hc(t,e){return this.Wx(t,this.Gx)}solveNearestFromScreen(t){return this.Wx(ei(t,this.Ji.us),this.Gx)}Wx(t,e){const i=e.Ux(t);if(!i)return;const{angle:s,amplitude:n}=Kr(i,this.scale);return Fi(i,this.scale,this.Wy(new $e,this,s,n,this.Ji.getAmplitudeAxis().formatValue).Zu(),this,this.lu.getFillStyle())}Te(){if(this.Ox||this.scale.Yx()){const t=Qr(this.Vx,this.scale),e=ce(t);this.Nx?(t.push({...t[0]}),this.Gx.zl(!0)):this.Gx.zl(!1),this.Gx.Nt().nl(t).Yo(e),this.Ox=!1,this.Gx.Ps()}}attach(t,e=!0,i=!1){return super.attach(t,e,i),ge(t,this.qi,i,{stroke:this.lu}),this}}class CA extends Vo{constructor(t,e,i,s,n,o,h){super(t,e,i,s,n,h),this.xs="Point Line Series",this.Vx=[],this.Ox=!1,this.Nx=!1,this.Hx=3,this.Aa=0,this.$x=ae.Circle,this.Wy=Ph,this.be=kt(this.qi.polarPointLineSeriesFillStyle,o),this.lu=kt(this.qi.polarPointLineSeriesStrokeStyle,o),this.Gx=t.rp(s,void 0,[ms.UserSeries]).Re(this.lu).cs(this.getHighlight()).Ka(Je.Nearest),this.ds(this.Gx),this.Xx=t.bS(s).Ce(this.be).il(this.$x).q(this.Hx).cs(this.getHighlight()).Ka(Je.Nearest),this.ds(this.Xx)}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}setData(t){return this.Vx.length!==0&&this.Ji.us.Nn(ot.vf),this.Vx=fl(t),this.Ox=!0,this.Bx=Ih(this.Vx),this.ks.Ss(),this}setStrokeStyle(t){this.lu=typeof t=="function"?t(this.lu):t;const e=this.lu;return this.Gx.Re(e),this.ks.Ss(),this}getStrokeStyle(){return this.lu}setPointFillStyle(t){this.be=typeof t=="function"?t(this.be):t;const e=this.be;return this.Xx.Ce(e),this.ks.Ss(),this}getPointFillStyle(){return this.be}setPointSize(t){return this.Hx=t,this.Xx.q(t),this.ks.Ss(),this}getPointSize(){return this.Hx}setPointShape(t){return this.$x=t,this.Xx.il(this.$x),this}getPointShape(){return this.$x}setPointRotation(t){return this.Aa=t,this.Xx.Nh(t),this.ks.Ss(),this}getPointRotation(){return this.Aa}setConnectDataAutomaticallyEnabled(t){return this.Nx=t,this.ks.Ss(),this}getConnectDataAutomaticallyEnabled(){return this.Nx}Kp(){return this.tS&&this.Vx.length>0&&this.getVisible()}Ie(t,e){t.cs(e),this.ks.Ss()}Hc(t,e){return this.Wx(t,this.Gx)}solveNearestFromScreen(t){return this.Wx(ei(t,this.Ji.us),this.Gx)}Wx(t,e){const i=e instanceof gc?e.Hc(t):e.Ux(t);if(!i)return;const{angle:s,amplitude:n}=Kr(i,this.scale);return Fi(i,this.scale,this.Wy(new $e,this,s,n,this.Ji.getAmplitudeAxis().formatValue).Zu(),this,"color"in i&&Ri(this.be)?new H({color:i.color}):this.be)}Te(){if(this.Ox||this.scale.Yx()){const t=Qr(this.Vx,this.scale),e=ce(t);this.Nx?(t.push({...t[0]}),this.Gx.zl(!0)):this.Gx.zl(!1),this.Gx.Nt().nl(t).Yo(e),this.Xx.Nt().nl(t).Yo(e),this.Ox=!1,this.Gx.Ps(),this.Xx.Ps()}}Cs(){return this.bs||this.$x}}class Vh extends sl{constructor(t,e,i,s,n,o,h,a,l){super(),this.No=Fg(),this.D=new Xe,this.$i=!1,this.jx=s,this.Zx=n,this.Qx=o,this.Jx=h,this.Kx=a,this.ks=t,this.scale=e,this.qx=i,this.qi=l}onHighlight(t){return this.D.on("highlight",t)}offHighlight(t){return this.D.off(t)}dispose(){return this.qx&&this.qx(this),this.ks.us.Ss(),this.D.emit("dispose",this),this.$i=!0,this}setVisible(t){return super.setVisible(t),this.Qx(),this.ks.us.Ss(),this}isDisposed(){return this.$i}onDispose(t){return this.D.on("dispose",t)}offDispose(t){return this.D.off(t,"dispose")}setMouseInteractions(t){return this.Jx(this,t),this}getMouseInteractions(){return this.Kx(this)}}class sf extends Vh{constructor(t,e,i,s,n,o,h,a,l,u,c,d,f,g,y,p,x){super(t,e,i,s,n,o,h,a,x),this.tM=1,this.iM=1,this.ks=t,this.scale=e,this.dimensionStrategy=l,this.start=u,this.end=c,this.lowerExtreme=d,this.lowerQuartile=f,this.median=g,this.upperQuartile=y,this.upperExtreme=p,this.boundaries=wt(this.dimensionStrategy.toPoint(u,d),this.dimensionStrategy.toPoint(c,p)),this.sM=this.qi.boxSeriesBodyFillStyle,this.eM=this.qi.boxSeriesBodyStrokeStyle,this.lu=this.qi.boxSeriesStrokeStyle,this.hM=this.qi.boxSeriesMedianStrokeStyle,this.Ps()}getBoundaries(){return this.boundaries}setBodyWidth(t){return this.tM=t,this.Ps(),this}getBodyWidth(){return this.tM}setBodyFillStyle(t){return this.sM=typeof t=="function"?t(this.sM):t,this.Zx(),this}getBodyFillStyle(){return this.sM}setBodyStrokeStyle(t){return this.eM=typeof t=="function"?t(this.eM):t,this.Zx(),this}getBodyStrokeStyle(){return this.eM}setTailWidth(t){return this.iM=t,this.Ps(),this}getTailWidth(){return this.iM}setStrokeStyle(t){return this.lu=typeof t=="function"?t(this.lu):t,this.Zx(),this}getStrokeStyle(){return this.lu}setMedianStrokeStyle(t){return this.hM=typeof t=="function"?t(this.hM):t,this.Zx(),this}getMedianStrokeStyle(){return this.hM}Ps(){this.jx()}getDominantStyle(){return this.getBodyFillStyle()}}const Su=(r,t,e)=>{const i=t.dt,s=e.dt;let n=(r.x-i.getInnerStart())/(i.getInnerEnd()-i.getInnerStart()),o=(r.y-s.getInnerStart())/(s.getInnerEnd()-s.getInnerStart());return e.eg===1&&(n=1-n),t.eg===1&&(o=1-o),N(o,n)};class FA extends Sy{constructor(t,e,i,s,n,o,h,a){super(t,e,Qa(i.dt,s.dt),n,a),this.rM=!1,this.nM=!1,this.oM=!0,this.aM=!0,this.lM=!1,this.uM=!1,this.setGridStrokeYStyle=l=>(this.cM.setGridStrokeStyle(l),this),this.getGridStrokeYStyle=()=>this.cM.getGridStrokeStyle(),this.axisX=i,this.axisY=s,this.dM=o,this.fM=h,this.AM=this.axisX.Yg(!1,this.dM).setMouseInteractions(!1).setAllocatesAxisSpace(!1),this.cM=this.axisY.Yg(!1,this.fM).setMouseInteractions(!1).setAllocatesAxisSpace(!1)}dispose(){return super.dispose(),this.AM.dispose(),this.cM.dispose(),this}pointAt(t){return super.pointAt(t),this.setPosition(K(t.location,t.scale,this.scale)),this}setPosition(t){super.setPosition(t),this.AM.setValue(t.x),this.cM.setValue(t.y);const e=Su(N(this.AM.getValue(),this.cM.getValue()),this.axisX,this.axisY);return this.AM.setGridStrokeLength(this.lM?e.x:1),this.cM.setGridStrokeLength(this.uM?e.y:1),this}Te(){this.AM.setVisible(this.Xi&&this.Qg).setMarkerVisible(this.Xi&&this.Qg&&this.rM),this.cM.setVisible(this.Xi&&this.Qg).setMarkerVisible(this.Xi&&this.Qg&&this.nM);const t=Su(N(this.AM.getValue(),this.cM.getValue()),this.axisX,this.axisY);return this.AM.setGridStrokeLength(this.lM?t.x:1),this.cM.setGridStrokeLength(this.uM?t.y:1),super.Te()}setGridStrokeXCut(t){return this.lM=t,this.ks.Ss(),this}getGridStrokeXCut(){return this.lM}setGridStrokeYCut(t){return this.uM=t,this.ks.Ss(),this}getGridStrokeYCut(){return this.uM}setGridStrokeXStyle(t){return this.AM.setGridStrokeStyle(t),this}getGridStrokeXStyle(){return this.AM.getGridStrokeStyle()}setTickMarkerXVisible(t){return this.rM=t,this.ks.Ss(),this}getTickMarkerXVisible(){return this.rM}setTickMarkerYVisible(t){return this.nM=t,this.ks.Ss(),this}getTickMarkerYVisible(){return this.nM}setTickMarkerX(t){return this.AM.setMarker(t),this}setTickMarkerY(t){return this.cM.setMarker(t),this}getTickMarkerX(){return this.AM.getMarker()}getTickMarkerY(){return this.cM.getMarker()}}class DA extends xy{constructor(t,e,i,s,n,o,h){super(t,e,i,s,h),this.lM=!1,this.uM=!1,this.gM=!1,this.mM=!1,this.yM=new Map,this.pM=new Map,this.rM=!0,this.nM=!0,this.iy=s,this.dM=n,this.fM=o,this.SM=h.cursorGridStrokeStyleX,this.vM=h.cursorGridStrokeStyleY}dispose(){return super.dispose(),this.yM.forEach(t=>t.dispose()),this.pM.forEach(t=>t.dispose()),this.bM=void 0,this.xM=void 0,this}Te(){return this.bM&&this.bM.setVisible(this.Xi&&this.Qg).setMarkerVisible(this.Xi&&this.Qg&&this.rM),this.xM&&this.xM.setVisible(this.Xi&&this.Qg).setMarkerVisible(this.Xi&&this.Qg&&this.nM),super.Te()}pointAt(t){const{location:e}=t,i=t.owner instanceof en&&t.owner;if(!i)return this;const{axisX:s}=i,{axisY:n}=i,o=this.Ah(s,!0),h=this.Ah(n,!1);o!==this.bM&&this.bM&&this.bM.setVisible(!1),h!==this.xM&&this.xM&&this.xM.setVisible(!1),o.setValue(e.x),h.setValue(e.y);const a=Su(N(e.x,e.y),s,n);return o.setGridStrokeLength(this.lM?a.x:1),h.setGridStrokeLength(this.uM?a.y:1),this.bM=o,this.xM=h,super.pointAt(t)}ny(t){if(super.ny(t),t){const e=i=>i.setTextFillStyle(t);this.bM&&this.gM&&this.bM.setMarker(e),this.xM&&this.mM&&this.xM.setMarker(e)}}Ah(t,e){let i=(e?this.yM:this.pM).get(t);return i||(e?(i=t.Yg(!1,this.dM),this.yM.set(t,i)):(i=t.Yg(!1,this.fM),this.pM.set(t,i)),this.ar(i,e),i.setMouseInteractions(!1).setAllocatesAxisSpace(!1)),i}ar(t,e){const i=e?this.SM:this.vM;return t.setGridStrokeStyle(i),t.setMouseInteractions(!1),(e?this.rM:this.nM)?t.setMarkerVisible(!0):t.setMarkerVisible(!1),t}setGridStrokeXCut(t){return this.lM=t,this.ks.Ss(),this}getGridStrokeXCut(){return this.lM}setGridStrokeYCut(t){return this.uM=t,this.ks.Ss(),this}getGridStrokeYCut(){return this.uM}setGridStrokeXStyle(t){return this.SM=t instanceof Function?t(this.getGridStrokeXStyle()):t,this.yM.forEach(e=>e.setGridStrokeStyle(this.SM)),this}getGridStrokeXStyle(){return this.SM}setGridStrokeYStyle(t){return this.vM=t instanceof Function?t(this.getGridStrokeYStyle()):t,this.pM.forEach(e=>e.setGridStrokeStyle(this.vM)),this}getGridStrokeYStyle(){return this.vM}setTickMarkerXVisible(t){return this.rM=t,this.ks.Ss(),this}getTickMarkerXVisible(){return this.rM}setTickMarkerYVisible(t){return this.nM=t,this.ks.Ss(),this}getTickMarkerYVisible(){return this.nM}setTickMarkerX(t){return this.yM.forEach(e=>e.setMarker(t)),this.dM=this.dM.addStyler(t),this.ks.Ss(),this}setTickMarkerY(t){return this.pM.forEach(e=>e.setMarker(t)),this.fM=this.fM.addStyler(t),this.ks.Ss(),this}setTickMarkerXAutoTextStyle(t){return this.gM=t,this.ks.Ss(),this}getTickMarkerXAutoTextStyle(){return this.gM}setTickMarkerYAutoTextStyle(t){return this.mM=t,this.ks.Ss(),this}getTickMarkerYAutoTextStyle(){return this.mM}}class Ty extends Mc{constructor(t,e,i,s){super(t,s),this.iy=t,this.dM=e,this.fM=i,this.oy=s}}class Va extends Ty{constructor(){super(...arguments),this.uy=(t,e,i,s)=>this.ly(new DA(t,e,i,this.iy,this.dM,this.fM,s),s),this.addStyler=t=>new Va(this.iy,this.dM,this.fM,this.oy.map(e=>e).concat(t)),this.setResultTableBackground=t=>new Va(t,this.dM,this.fM,this.oy.map(e=>e))}}class gh extends Ty{constructor(){super(...arguments),this.Ay=(t,e,i,s,n)=>this.ly(new FA(t,e,i,s,this.iy,this.dM,this.fM,n),n),this.addStyler=t=>new gh(this.iy,this.dM,this.fM,this.oy.map(e=>e).concat(t)),this.setResultTableBackground=t=>new gh(t,this.dM,this.fM,this.oy.map(e=>e))}}const PA=new Va(ji,wn.PointableTextBox,wn.PointableTextBox,[(r,t)=>{Rc(r),r.setTickMarkerX(e=>{e.setEffect(!0).setTextFont(t.cursorTickMarkerXTextFont).setTextFillStyle(t.cursorTickMarkerXTextFillStyle),Mn(e)&&e.setBackground(i=>i.setFillStyle(t.cursorTickMarkerXBackgroundFillStyle).setStrokeStyle(t.cursorTickMarkerXBackgroundStrokeStyle))}),r.setTickMarkerY(e=>{e.setEffect(!0).setTextFont(t.cursorTickMarkerYTextFont).setTextFillStyle(t.cursorTickMarkerYTextFillStyle),Mn(e)&&e.setBackground(i=>i.setFillStyle(t.cursorTickMarkerYBackgroundFillStyle).setStrokeStyle(t.cursorTickMarkerYBackgroundStrokeStyle))})}]),IA=new gh(ji,wn.PointableTextBox,wn.PointableTextBox,[(r,t)=>{Ay(r,t),r.setTickMarkerX(e=>{e.setEffect(!0).setTextFont(t.cursorTickMarkerXTextFont).setTextFillStyle(t.cursorTickMarkerXTextFillStyle),Mn(e)&&e.setBackground(i=>i.setFillStyle(t.cursorTickMarkerXBackgroundFillStyle).setStrokeStyle(t.cursorTickMarkerXBackgroundStrokeStyle))}),r.setTickMarkerY(e=>{e.setEffect(!0).setTextFont(t.cursorTickMarkerYTextFont).setTextFillStyle(t.cursorTickMarkerYTextFillStyle),Mn(e)&&e.setBackground(i=>i.setFillStyle(t.cursorTickMarkerYBackgroundFillStyle).setStrokeStyle(t.cursorTickMarkerYBackgroundStrokeStyle))})}]),VA=new gh(ji,wn.PointableTextBox,wn.PointableTextBox,[(r,t)=>{((e,i)=>{e.setPointMarker(s=>s.setFillStyle(i.seriesMarkerPointMarkerFillStyle).setSize(i.seriesMarkerPointMarkerSize).setShape(i.seriesMarkerPointMarkerShape)).setResultTable(s=>s.setEffect(!0).setBackground(n=>n).setOrigin(N(-1,-1)).setMargin(10))})(r,t),r.setTickMarkerX(e=>{e.setEffect(!0).setTextFont(t.cursorTickMarkerXTextFont).setTextFillStyle(t.cursorTickMarkerXTextFillStyle),Mn(e)&&e.setBackground(i=>i.setFillStyle(t.cursorTickMarkerXBackgroundFillStyle).setStrokeStyle(t.cursorTickMarkerXBackgroundStrokeStyle))}),r.setTickMarkerY(e=>{e.setEffect(!0).setTextFont(t.cursorTickMarkerYTextFont).setTextFillStyle(t.cursorTickMarkerYTextFillStyle),Mn(e)&&e.setBackground(i=>i.setFillStyle(t.cursorTickMarkerYBackgroundFillStyle).setStrokeStyle(t.cursorTickMarkerYBackgroundStrokeStyle))})}]),$n=(r,t,e)=>{switch(r){case ns.always:return!0;case ns.never:return!1;case ns.whenDragged:return e;case ns.whenHovered:return t&&!e;case ns.whenHoveredOrDragged:return e||t;case ns.whenNotDragged:return!e;default:return!1}},rf=(r,t)=>Math.min(Math.max(r,t.getInnerStart()),t.getInnerEnd());class _A{constructor(t,e,i,s,n,o){this.MM=ns.always,this._M=ns.always,this.Bo=!0,this.$i=!1,this.wM=!1,this.CM=!1,this.ua=N(0,0),this.Mu=jt.draggable,this._u=void 0,this.D=new Xe,this.Xi=!0,this.kM=(a,l,u)=>{this.wM=!0,this.ks.Ss();const c=this.Mu===jt.notDraggable?this.Mu:u||this.Mu;this._u=this.ks.us.Wr(c===jt.notDraggable?It.Restricted:c===jt.draggable?It.Move:c===jt.onlyHorizontal?It.Horizontal:It.Vertical)},this.TM=()=>{this.wM=!1,this.ks.Ss(),this.ks.us.Ur(this._u)},this.FM=(a,l)=>{this.CM=!0,tt(l),this.ks.Ss()},this.IM=(a,l)=>{if(this.Mu!==jt.notDraggable){const u=l||this.Mu,c=K(this.ks.us.Pe(a.x,a.y),this.ks.us.dt,this.scale),d=N(u!==jt.onlyVertical?rf(c.x,this.scale.x):this.ua.x,u!==jt.onlyHorizontal?rf(c.y,this.scale.y):this.ua.y);return this.setPosition(d),!0}return!1},this.PM=(a,l)=>{this.CM=!1,tt(l),this.ks.Ss()},this.onDispose=a=>this.D.on("dispose",a),this.offDispose=a=>this.D.off(a,"dispose"),this.ks=t,this.renderingScale=e,this.scale=i,this.Eb=s,this.DM=n,this.qi=o;const h=s.getPointMarker().setMouseInteractions(!0);h.onMouseEnter((a,l)=>this.kM(a,l)),h.onMouseLeave(this.TM),h.onMouseDragStart(this.FM),h.onMouseDrag((a,l)=>this.IM(N(l.clientX,l.clientY))&&tt(l)),h.onMouseDragStop(this.PM),h.onTouchStart(this.FM),h.onTouchMove((a,l)=>this.IM(N(l.clientX,l.clientY))&&tt(l)),h.onTouchEnd(this.PM),s.getResultTable().setMouseInteractions(!0),this.setPosition(this.ua)}setPosition(t){return this.ua=t,this.Eb.setPosition(t),this.D.emit("positionChange",this,this.ua),this}getPosition(){return this.ua}onPositionChange(t){return this.D.on("positionChange",t)}offPositionChange(t){return this.D.off(t,"positionChange")}setPointMarkerVisibility(t){return this.MM=t,this.ks.Ss(),this}getPointMarkerVisibility(){return this.MM}setResultTableVisibility(t){return this._M=t,this.ks.Ss(),this}getResultTableVisibility(){return this._M}setMouseInteractions(t){return this.Bo=t,this.Eb.getPointMarker().setMouseInteractions(t),this.Eb.getResultTable().setMouseInteractions(t),this}getMouseInteractions(){return this.Bo}setAutoFitStrategy(t){return this.Eb.setAutoFitStrategy(t),this}getAutoFitStrategy(){return this.Eb.getAutoFitStrategy()}isAttached(){return!0}Te(){const t=this.isAttached();return $n(this.MM,this.wM,this.CM)?this.Eb.setPointMarkerVisible(!0):this.Eb.setPointMarkerVisible(!1),t&&$n(this._M,this.wM,this.CM)?this.Eb.setResultTableVisible(!0):this.Eb.setResultTableVisible(!1),this.Eb.Te(),this}Ps(){return this.Eb.Ps(),this}pointAt(t){return this.Eb.pointAt(t),this}dispose(){return this.$i||(this.$i=!0,this.DM(this),this.Eb.dispose(),this.D.emit("dispose")),this}isDisposed(){return this.$i}setVisible(t){const e=this.Xi!==t;return this.Xi=t,this.Eb.setVisible(t),e&&this.D.emit("visibleStateChanged",this,this.Xi),this}getVisible(){return this.Xi}onVisibleStateChanged(t){return this.D.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.D.off(t,"visibleStateChanged")}setPointMarker(t){return this.Eb.setPointMarker(t),this}getPointMarker(){return this.Eb.getPointMarker()}setResultTable(t){return this.Eb.setResultTable(t),this}getResultTable(){return this.Eb.getResultTable()}setDraggingMode(t=jt.notDraggable){return this.Mu=t,this.ks.Ss(),this}getDraggingMode(){return this.Mu}}class NA extends _A{constructor(t,e,i,s,n,o,h){super(t,e,Qa(i.dt,s.dt),n.Ay(t,e,i,s,h),o,h),this.BM=ns.always,this.LM=ns.always,this.RM=ns.always,this.EM=ns.always,this.gridStrokeStyleX=this.Eb.getGridStrokeXStyle(),this.gridStrokeStyleY=this.Eb.getGridStrokeYStyle(),this.ks=t,this.axisX=i,this.axisY=s,this.DM=o;const a=this.Eb.getTickMarkerX().setMouseInteractions(!0);a.onMouseEnter((u,c)=>this.kM(u,c,jt.onlyHorizontal)),a.onMouseLeave(this.TM),a.onMouseDragStart(this.FM),a.onMouseDrag((u,c)=>this.IM(N(c.clientX,c.clientY),jt.onlyHorizontal)&&tt(c)),a.onMouseDragStop(this.PM),a.onTouchStart(this.FM),a.onTouchMove((u,c)=>this.IM(N(c.clientX,c.clientY),jt.onlyHorizontal)&&tt(c));const l=this.Eb.getTickMarkerY().setMouseInteractions(!0);l.onMouseEnter((u,c)=>this.kM(u,c,jt.onlyVertical)),l.onMouseLeave(this.TM),l.onMouseDragStart(this.FM),l.onMouseDrag((u,c)=>this.IM(N(c.clientX,c.clientY),jt.onlyVertical)&&tt(c)),l.onMouseDragStop(this.PM),l.onTouchStart(this.FM),l.onTouchMove((u,c)=>this.IM(N(c.clientX,c.clientY),jt.onlyVertical)&&tt(c))}Te(){const t=this.isAttached();return this.Xi&&t&&$n(this.RM,this.wM,this.CM)?this.Eb.setTickMarkerXVisible(!0):this.Eb.setTickMarkerXVisible(!1),this.Xi&&t&&$n(this.EM,this.wM,this.CM)?this.Eb.setTickMarkerYVisible(!0):this.Eb.setTickMarkerYVisible(!1),this.Eb.setGridStrokeXStyle(this.Xi&&t&&$n(this.BM,this.wM,this.CM)?this.gridStrokeStyleX:it),this.Eb.setGridStrokeYStyle(this.Xi&&t&&$n(this.LM,this.wM,this.CM)?this.gridStrokeStyleY:it),super.Te()}setGridStrokeXVisibility(t){return this.BM=t,this.ks.Ss(),this}getGridStrokeXVisibility(){return this.BM}setGridStrokeYVisibility(t){return this.LM=t,this.ks.Ss(),this}getGridStrokeYVisibility(){return this.LM}setTickMarkerXVisibility(t){return this.RM=t,this.ks.Ss(),this}getTickMarkerXVisibility(){return this.RM}setTickMarkerYVisibility(t){return this.EM=t,this.ks.Ss(),this}getTickMarkerYVisibility(){return this.EM}setGridStrokeXCut(t){return this.Eb.setGridStrokeXCut(t),this}getGridStrokeXCut(){return this.Eb.getGridStrokeXCut()}setGridStrokeYCut(t){return this.Eb.setGridStrokeYCut(t),this}getGridStrokeYCut(){return this.Eb.getGridStrokeYCut()}setGridStrokeXStyle(t){return this.gridStrokeStyleX=typeof t=="function"?t(this.gridStrokeStyleX):t,this}getGridStrokeXStyle(){return this.Eb.getGridStrokeXStyle()}setGridStrokeYStyle(t){return this.gridStrokeStyleY=typeof t=="function"?t(this.gridStrokeStyleY):t,this}getGridStrokeYStyle(){return this.Eb.getGridStrokeYStyle()}setTickMarkerX(t){return this.Eb.setTickMarkerX(t),this}getTickMarkerX(){return this.Eb.getTickMarkerX()}setTickMarkerY(t){return this.Eb.setTickMarkerY(t),this}getTickMarkerY(){return this.Eb.getTickMarkerY()}setMouseInteractions(t){return super.setMouseInteractions(t),this.Eb.getTickMarkerX().setMouseInteractions(t),this.Eb.getTickMarkerY().setMouseInteractions(t),this}}class Cy extends NA{}class LA extends Cy{constructor(t,e,i,s,n,o){super(t,e,i.axisX,i.axisY,s,n,o),this.zM=!1,this.ks=t,this.owningSeries=i}setPosition(t){return super.setPosition(t),this.zM=!1,this.ks.Ss(),this}Ps(){if(!this.zM){const t=this.owningSeries.solveNearestFromScreen(K(this.ua,this.scale,this.ks.us.dt));t?(this.ua=K(t.location,this.owningSeries.scale,this.scale),this.Eb.pointAt(t),this.zM=!0):this.Eb.setPosition(this.ua)}return super.Ps()}isAttached(){return this.zM}}class en extends dl{constructor(t,e,i,s,n,o,h,a,l,u){super(t,e,l,u),this.VM=[],this.addMarker=(c=VA)=>{const d=new LA(this.OM(),this.Ji.uiScale,this,c,this.removeMarker,this.qi);return this.VM.push(d),d},this.removeMarker=c=>{const d=this.VM.indexOf(c);d!==-1&&this.VM.splice(d,1)},this.ts=new Map,this.chart=t,this.ks=i,this.axisX=s,this.axisY=n,this.axisXAttachHandler=o,this.axisYAttachHandler=h,this.OM=a,this.scale=Qa(s.dt,n.dt),this.NM=t.GM,t.GM+=1,this.WM(this.scale),this.attacheAxis(),this.onMouseEnter(this.chart.UM),this.onMouseLeave(this.chart.YM),this.onMouseWheel(this.chart.sS),this.onMouseDragStart(this.chart.HM),this.onMouseDrag(this.chart.eS),this.onMouseDragStop(this.chart.$M),this.onTouchStart(this.chart.hS.onTouchStart),this.onTouchMove(this.chart.hS.onTouchMove),this.onTouchEnd(this.chart.hS.onTouchEnd)}get xAxis(){return this.axisX}get yAxis(){return this.axisY}attacheAxis(){this.XM=this.axisXAttachHandler(this),this.jM=this.axisYAttachHandler(this)}Te(){super.Te();for(let t=0;t<this.VM.length;t+=1)this.VM[t].Ps().Te()}ds(t,e){super.ds(t,e),t.Jo(this.NM)}setDrawOrder(t){return this.NM=t.seriesDrawOrderIndex,this.ts.forEach((e,i)=>{i.Jo(this.NM)}),this.Ji.us.Ss(),this}dispose(){return super.dispose(),this.VM.slice().forEach(t=>t.dispose()),this.XM(this),this.jM(this),this}ZM(){for(let t=0;t<this.VM.length;t+=1)this.VM[t].setPosition(this.VM[t].getPosition());this.ks.Ss()}getBoundaries(){return wt(N(this.getXMin()||0,this.getYMin()||0),N(this.getXMax()||0,this.getYMax()||0))}setCursorEnabled(t){return super.setCursorEnabled(t)}}const Gr=(r,t,e,i)=>{const s=r.length;let n=0;if(t!==void 0){const o=e-t;if(o>0){const h=r.slice(n,o);n+=o,i(h,!0)}}for(;n<s;){const o=r.slice(n,n+e);n+=e,i(o,!1)}},gl=(r,t=e=>e)=>{const e=[];let i;for(let s=0;s<r.length;s+=1){i=r[s];const n=t(i.tl()),o=i.qa(),h=o?t(o):[];let a=!1,l=!1;"El"in i&&(a=i.El(),l=i.Vl()),e.push.apply(e,n.slice(a?1:0,n.length-(l&&h.length===0?1:0))),e.push.apply(e,h.slice(a&&n.length===0?1:0,h.length-(l?1:0)))}return e},Fy=(r,t=1,e)=>{const i=e!==void 0?e:0,s=new Array(r.length);for(let n=0;n<r.length;n+=1)s[n]={x:i+t*n,y:r[n]};return s},zA=(r,t,e,i)=>{const s=t.getIcon();return s?r.addRow(s,t.getName()):r.addRow(t.getName()),r.addRow("X","",t.axisX.formatValue(e)).addRow("Y","",t.axisY.formatValue(i))};class Fc extends en{constructor(t,e,i,s,n,o,h,a,l,u,c){super(t,e,i,s,n,o,h,a,u,c),this.QM=[],this.yu=[],this.JM=0,this.ji=!1,this.Hi=Rs.onHover,this.Wy=zA,this.Ji.us.Nn(ot.mf),this.KM=l}setDataCleaning(t){const e=t&&t.minDataPointCount;return this.JM=e!==void 0&&e>0?e:0,this.ks.Ss(),this}add(t){if(this.QM.length!==0&&this.Ji.us.Nn(ot.vf),Array.isArray(t)?this.qM(t):this.qM([t]),this.yu.length>0){const e=this.yu[this.yu.length-1];this.t_={x:e.x,y:e.y}}return this}addArrayX(t,e=1,i){let s=i;return s||(s=this.t_?this.t_.y+e:0),this.add(((n,o=1,h)=>{const a=h!==void 0?h:0,l=new Array(n.length);for(let u=0;u<n.length;u+=1)l[u]={x:n[u],y:a+o*u};return l})(t,e,s)),this}addArrayY(t,e=1,i=0){let s=i;return s||(s=this.t_?this.t_.x+e:0),this.add(Fy(t,e,s)),this}addArraysXY(t,e){if(t.length!==e.length)throw new Error("arrayX and arrayY lengths are not equal");return this.add(((i,s)=>{const n=new Array(i.length);for(let o=0;o<i.length;o+=1)n[o]={x:i[o],y:s[o]};return n})(t,e)),this}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}getPointAmount(){return this.QM.reduce((t,e)=>t+e.ol()+e.al(),this.yu.length)}clear(){this.i_=void 0;for(let t=0;t<this.QM.length;t+=1)this.QM[t].Nt();return this.yu.length=0,this.t_=void 0,this.ks.Ss(),this.D.emit("dataClear",this),this}getLastPoint(){return this.t_}Kp(){return this.tS&&this.getPointAmount()>0&&this.getVisible()}getXMax(){return this.KM.getXMax(this.QM,this.i_)||0}getXMin(){return this.KM.getXMin(this.QM,this.i_)||0}getYMax(){return this.KM.getYMax(this.QM,this.i_)||0}getYMin(){return this.KM.getYMin(this.QM,this.i_)||0}br(){const t=N(0,0);for(const e of this.QM)t.x=Math.max(t.x,e.vl()),t.y=Math.max(t.y,e.bl());return t}s_(t,e,i,s){this.KM.s_(t,e,i,s,this.scale,n=>{})}oS(){super.oS();const t=this.QM.length;this.e_&&this.s_(this.QM,this.getPointAmount(),this.e_,this.JM),t!==this.QM.length&&this.ZM()}Te(){super.Te();const t=this.getBoundaries();this.yu.length>0&&(this.h_(this.yu),this.yu=[]);for(const e of this.QM)e.Yo(t);return super.Te()}dp(){super.dp(),this.i_=void 0,this.yu.length=0}qM(t){t.length!==0&&(this.i_?this.i_=Bi(this.i_,ce(t)):this.i_=ce(t),this.D.emit("dataAdd",this,t,this.i_),this.yu=ai(this.yu,t,{canReturnB:!1}),this.ks.Ss())}r_(){return gl(this.QM)}n_(t){return this.D.on("dataAdd",t)}o_(t){return this.D.off(t)}a_(t){return this.D.on("dataClear",t)}l_(t){return this.D.off(t)}}const kn=(r,t,e,i)=>{let s,n,o=Number.MAX_VALUE;for(let h=0;h<t.length;h+=1){const a=t[h],l=e(a,r);if(l){const u=i(r,l);(s===void 0||u<o)&&(s=l,n=a,o=u)}}return s&&n?[s,n]:void 0};class _h extends en{constructor(){super(...arguments),this.u_=[],this.c_=void 0,this.d_=!1,this.qx=t=>{const e=this.u_.findIndex(i=>i===t);e>=0&&this.u_.splice(e,1),this.d_=!0,this.c_=void 0,this.ks.Ss()},this.jx=()=>{this.c_=void 0,this.d_=!0,this.Ji.us.Ss()},this.Zx=()=>{this.d_=!0,this.Ji.us.Ss()},this.Qx=()=>{this.c_=void 0,this.d_=!0,this.chart.us.Ss()},this.Jx=(t,e)=>{this.setMouseInteractions(e)},this.f_=t=>this.getMouseInteractions()}Te(){super.Te(),this.d_&&(this.A_(this.u_),this.d_=!1)}clear(){return this.u_.slice().forEach(Sn),this.u_.length=0,this.d_=!0,this.c_=void 0,this.ks.Ss(),this}g_(t,e){e!==void 0?this.u_.splice(e,0,t):this.u_.push(t),this.d_=!0,this.m_&&this.m_(t),t.onMouseEnter((i,s)=>this.wt(i,s)),t.onMouseLeave((i,s)=>this.Ct(i,s)),t.onMouseClick((i,s)=>this.kt(i,s)),t.onMouseDoubleClick((i,s)=>this.Tt(i,s)),t.onMouseDown((i,s)=>this.Ft(i,s)),t.onMouseUp((i,s)=>this.It(i,s)),t.onMouseMove((i,s)=>this.Pt(i,s)),t.onMouseDragStart((i,s,n)=>this.Bt(i,s,n)),t.onMouseDrag((i,s,n,o,h)=>this.Dt(i,s,n,o,h)),t.onMouseDragStop((i,s,n,o)=>this.Lt(i,s,n,o)),t.onMouseWheel((i,s)=>this.Rt(i,s)),t.onTouchStart((i,s)=>this.Et(i,s)),t.onTouchMove((i,s)=>this.zt(i,s)),t.onTouchEnd((i,s)=>this.Vt(i,s)),this.ks.Ss()}Kp(){return this.tS&&this.u_.length>0&&this.getVisible()}setDefaultStyle(t){this.m_=t,this.u_.forEach(t),t(this.y_);for(let e=0;e<this.Qi.length;e+=1)this.p_(this.Qi[e]);return this.d_=!0,this.Ji.us.Ss(),this}Hc(t,e){const i=kn(t,e?this.u_.filter(s=>s.getVisible()&&s.getIsUnderMouse()):this.u_.filter(s=>s.getVisible()),this.S_,pr);if(i!==void 0)return{location:K(i[0],this.ks.us.dt,this.scale),scale:this.scale,resultTableContent:this.Wy(new $e,this,i[1]).Zu(),owner:this,fillStyle:i[1].getDominantStyle(),figure:i[1]}}solveNearestFromScreen(t){return this.Hc(ei(t,this.Ji.us),!1)}getXMax(){return this.c_||(this.c_=this.v_()),this.c_.max.x}getXMin(){return this.c_||(this.c_=this.v_()),this.c_.min.x}getYMax(){return this.c_||(this.c_=this.v_()),this.c_.max.y}getYMin(){return this.c_||(this.c_=this.v_()),this.c_.min.y}br(){return N(0,0)}v_(){const t=wt(gr(st,st),gr(ht,ht));for(let e=0;e<this.u_.length;e+=1)if(this.u_[e].getVisible()){const i=this.u_[e].getBoundaries();t.min.x=Math.min(t.min.x,i.min.x),t.min.y=Math.min(t.min.y,i.min.y),t.max.x=Math.max(t.max.x,i.max.x),t.max.y=Math.max(t.max.y,i.max.y)}return t}attach(t,e=!0,i=!1){return super.attach(t,e),this.p_(t,e,i),this}p_(t,e=!0,i=!1){ge(t,this.qi,i,{fill:this.u_.length>0?this.u_[0].getDominantStyle():this.y_.getDominantStyle()})}}const BA=(r,t,e)=>r.addRow(t.getName()).addRow("Lower extreme","",e.lowerExtreme.toFixed(2)).addRow("Lower quartile","",e.lowerQuartile.toFixed(2)).addRow("Median","",e.median.toFixed(2)).addRow("Upper quartile","",e.upperQuartile.toFixed(2)).addRow("Upper extreme","",e.upperExtreme.toFixed(2));class UA extends _h{constructor(t,e,i,s,n,o,h,a,l,u,c,d){super(t,e,i,s,n,o,h,a,u,c),this.xs="Box Series",this.Wy=BA,this.b_=ko(),this.S_=f=>K(this.Ts.toPoint((f.start+f.end)/2,f.median),this.scale,this.ks.us.dt),this.Ji.us.Nn(ot.pf),this.Ts=l,this.y_=new sf(this.ks,this.scale,this.qx,Ft,Ft,Ft,Ft,f=>!1,this.Ts,0,0,0,0,0,0,0,this.qi).dispose(),this.x_=new Ir(()=>{const f=this.ks.Lg(this.scale);return this.ds(f,{setEventHandlers:!1}),f},(f,g,y)=>(f.Re(y.strokeStyle),g.map(p=>{const x=p.existingMember||f.zr();return x.Eg(p.start,p.end),x}))),this.M_=new Ir(()=>{const f=this.b_._t(this.ks.Ob(this.scale));return this.ds(f,{setEventHandlers:!1}),f},(f,g,y)=>(f.Ce(y.fillStyle).we(y.strokeStyle),g.map(p=>{const x=p.existingMember||f.zr();return x.pl(p.vertices),this.b_.Ot(x,p.figure),x})),()=>{this.b_.Nt()},(f,g)=>{this.gs(g)})}WM(t){if(!(t instanceof Gt||t instanceof Ue))throw new Error("BoxSeries only supports Linear Axes")}A_(t){const e=this.M_.fp(),i=this.x_.fp();t.forEach(s=>{if(!s.getVisible())return;const n=this.Ts.toPoint((s.start+s.end-s.tM*(s.end-s.start))/2,s.lowerQuartile),o=this.Ts.toPoint((s.end-s.start)*s.tM,s.upperQuartile-s.lowerQuartile),h=this.Ts.toPoint((s.start+s.end)/2,s.lowerQuartile),a=this.Ts.toPoint((s.start+s.end)/2,s.lowerExtreme),l=this.Ts.toPoint((s.start+s.end)/2,s.upperQuartile),u=this.Ts.toPoint((s.start+s.end)/2,s.upperExtreme),c=this.Ts.toPoint((s.start+s.end-s.iM*(s.end-s.start))/2,s.lowerExtreme),d=this.Ts.toPoint((s.start+s.end+s.iM*(s.end-s.start))/2,s.lowerExtreme),f=this.Ts.toPoint((s.start+s.end-s.iM*(s.end-s.start))/2,s.upperExtreme),g=this.Ts.toPoint((s.start+s.end+s.iM*(s.end-s.start))/2,s.upperExtreme),y=this.Ts.toPoint((s.start+s.end-s.tM*(s.end-s.start))/2,s.median),p=this.Ts.toPoint((s.start+s.end+s.tM*(s.end-s.start))/2,s.median);e.add({No:s.No,vertices:[{x:n.x,y:n.y},{x:n.x,y:n.y+o.y},{x:n.x+o.x,y:n.y+o.y},{x:n.x+o.x,y:n.y}],figure:s},{fillStyle:s.sM,strokeStyle:s.eM}),i.add({No:0,start:h,end:a,figure:s},{strokeStyle:s.lu}),i.add({No:0,start:l,end:u,figure:s},{strokeStyle:s.lu}),i.add({No:0,start:c,end:d,figure:s},{strokeStyle:s.lu}),i.add({No:0,start:f,end:g,figure:s},{strokeStyle:s.lu}),i.add({No:0,start:y,end:p,figure:s},{strokeStyle:s.hM})}),e.finishPlot(),i.finishPlot()}add(t){const e=new sf(this.ks,this.scale,this.qx,this.jx,this.Zx,this.Qx,this.Jx,this.f_,this.Ts,t.start,t.end,t.lowerExtreme,t.lowerQuartile,t.median,t.upperQuartile,t.upperExtreme,this.qi);return this.g_(e),this.d_=!0,this.Ji.us.Ss(),e}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}}class nf extends Vh{constructor(t,e,i,s,n,o,h,a,l,u){super(t,e,i,s,n,o,h,a,l),this.dimensions={x:0,y:0,radiusX:0,radiusY:0},this.Ya=wt(N(0,0),N(0,0)),this.ks=t,this.scale=e,this.be=kt(l.ellipseSeriesFillStyle,u),this.xe=kt(l.ellipseSeriesStrokeStyle,u)}getBoundaries(){return this.Ya}setDimensions(t){return this.dimensions=t,this.Ya=wt(N(t.x-t.radiusX,t.y-t.radiusY),N(t.x+t.radiusX,t.y+t.radiusY)),this.jx(),this.ks.Ss(),this}getDimensions(){return this.dimensions}setFillStyle(t){return this.be=typeof t=="function"?t(this.be):t,this.Zx(),this}getFillStyle(){return this.be}setStrokeStyle(t){return this.xe=typeof t=="function"?t(this.xe):t,this.Zx(),this}getStrokeStyle(){return this.xe}getDominantStyle(){return this.be}}class GA extends _h{constructor(t,e,i,s,n,o,h,a,l,u,c){super(t,e,i,s,n,o,h,a,l,u),this.xs="Ellipse Series",this.Wy=(d,f,g)=>d.addRow(f.xs).addRow("X","",f.axisX.formatValue(g.getDimensions().x)).addRow("Y","",f.axisY.formatValue(g.getDimensions().y)).addRow("Radius X","",f.axisX.formatValue(g.getDimensions().radiusX)).addRow("Radius Y","",f.axisY.formatValue(g.getDimensions().radiusY)),this.b_=ko(),this.S_=d=>{const f=d.getDimensions(),g=N(f.x,f.y);return K(g,this.scale,this.ks.us.dt)},this.Ji.us.Nn(ot.pf),this.__=c,this.y_=new nf(this.ks,this.scale,Ft,Ft,Ft,Ft,Ft,d=>!1,this.qi,this.__).dispose(),this.M_=new Ir(()=>{const d=this.b_._t(this.ks.Ob(this.scale));return this.ds(d,{setEventHandlers:!1}),d},(d,f,g)=>(d.Ce(g.fillStyle).we(g.strokeStyle),f.map(y=>{const p=y.existingMember||d.zr();return p.pl(y.vertices),this.b_.Ot(p,y.figure),p})),()=>{this.b_.Nt()},(d,f)=>{this.gs(f)})}WM(t){if(!(t instanceof Gt||t instanceof Ue))throw new Error("EllipseSeries only supports Linear Axes")}A_(t){const e=this.M_.fp();t.forEach(i=>{if(!i.getVisible())return;const s=i.getDimensions(),n=[],o=s.drawSteps!==void 0?s.drawSteps:72;for(let l=0;l<=o;l+=1){const u=l/o*2*Math.PI,c=s.x+s.radiusX*Math.cos(u),d=s.y+s.radiusY*Math.sin(u);n.push({x:c,y:d})}const h=i.getFillStyle(),a=i.getStrokeStyle();e.add({No:i.No,vertices:n,figure:i},{fillStyle:h,strokeStyle:a})}),e.finishPlot()}add(t){const e=new nf(this.ks,this.scale,this.qx,this.jx,this.Zx,this.Qx,this.Jx,this.f_,this.qi,this.__).setDimensions(t);return this.g_(e),this.d_=!0,this.Ji.us.Ss(),e}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}}class of extends Vh{constructor(t,e,i,s,n,o,h,a,l,u){super(t,e,i,s,n,o,h,a,l),this.w_=[],this.Ya=Kt,this.ks=t,this.scale=e,this.be=kt(l.polygonSeriesFillStyle,u),this.xe=kt(l.polygonSeriesStrokeStyle,u)}getBoundaries(){return this.Ya}setDimensions(t){return this.w_=t,this.Ya=ce(this.w_),this.jx(),this.ks.Ss(),this}getDimensions(){return this.w_}setFillStyle(t){return this.be=typeof t=="function"?t(this.be):t,this.Zx(),this}getFillStyle(){return this.be}setStrokeStyle(t){return this.xe=typeof t=="function"?t(this.xe):t,this.Zx(),this}getStrokeStyle(){return this.xe}getDominantStyle(){return this.be}}class OA extends _h{constructor(t,e,i,s,n,o,h,a,l,u,c){super(t,e,i,s,n,o,h,a,l,u),this.xs="Polygon Series",this.Wy=(d,f,g)=>d.addRow(f.getName()),this.b_=ko(),this.S_=d=>{const f=d.getBoundaries(),g=N((f.min.x+f.max.x)/2,(f.min.y+f.max.y)/2);return K(g,this.scale,this.ks.us.dt)},this.Ji.us.Nn(ot.pf),this.__=c,this.y_=new of(this.ks,this.scale,Ft,Ft,Ft,Ft,Ft,d=>!1,this.qi,this.__).dispose(),this.M_=new Ir(()=>{const d=this.b_._t(this.ks.Ob(this.scale));return this.ds(d,{setEventHandlers:!1}),d},(d,f,g)=>(d.Ce(g.fillStyle).we(g.strokeStyle),f.map(y=>{const p=y.existingMember||d.zr();return p.pl(y.vertices),this.b_.Ot(p,y.figure),p})),()=>{this.b_.Nt()},(d,f)=>{this.gs(f)})}WM(t){}A_(t){const e=this.M_.fp();t.forEach(i=>{if(!i.getVisible())return;const s=i.getDimensions(),n=i.getFillStyle(),o=i.getStrokeStyle();e.add({No:i.No,vertices:s,figure:i},{fillStyle:n,strokeStyle:o})}),e.finishPlot()}add(t){const e=new of(this.ks,this.scale,this.qx,this.jx,this.Zx,this.Qx,this.Jx,this.f_,this.qi,this.__).setDimensions(t);return this.g_(e),this.d_=!0,this.Ji.us.Ss(),e}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}}class hf extends Vh{constructor(t,e,i,s,n,o,h,a,l,u){super(t,e,i,s,n,o,h,a,l),this.C_={x:0,y:0,width:0,height:0},this.k_={x1:0,y1:0,x2:0,y2:0},this.Ya=wt(N(0,0),N(0,0)),this.be=kt(l.rectangleSeriesFillStyle,u),this.ks=t,this.scale=e,this.xe=kt(l.rectangleSeriesStrokeStyle,u)}getBoundaries(){return this.Ya}setDimensions(t){return"x"in t?(this.C_=t,this.k_={x1:t.x,y1:t.y,x2:t.x+t.width,y2:t.y+t.height}):(this.k_=t,this.C_={x:t.x1,y:t.y1,width:t.x2-t.x1,height:t.y2-t.y1}),this.Ya=ce([this.C_,N(this.C_.x+this.C_.width,this.C_.y+this.C_.height)]),this.jx(),this.ks.Ss(),this}getDimensionsPositionAndSize(){return this.C_}getDimensionsTwoPoints(){return this.k_}setFillStyle(t){return this.be=typeof t=="function"?t(this.be):t,this.Zx(),this}getFillStyle(){return this.be}setStrokeStyle(t){return this.xe=typeof t=="function"?t(this.xe):t,this.Zx(),this}getStrokeStyle(){return this.xe}getDominantStyle(){return this.be}}class YA extends _h{constructor(t,e,i,s,n,o,h,a,l,u,c){super(t,e,i,s,n,o,h,a,l,u),this.xs="Rectangle Series",this.Wy=(d,f,g)=>{const y=g.getDimensionsPositionAndSize();return d.addRow(f.xs).addRow("X","",f.axisX.formatValue(y.x)).addRow("Y","",f.axisX.formatValue(y.y)).addRow("Width","",f.axisX.formatValue(y.width)).addRow("Height","",f.axisX.formatValue(y.height))},this.b_=ko(),this.S_=d=>{const f=d.getDimensionsPositionAndSize(),g=N(f.x+f.width/2,f.y+f.height/2);return K(g,this.scale,this.ks.us.dt)},this.Ji.us.Nn(ot.pf),this.__=c,this.y_=new hf(this.ks,this.scale,Ft,Ft,Ft,Ft,Ft,d=>!1,this.qi,this.__).dispose(),this.M_=new Ir(()=>{const d=this.b_._t(this.ks.Ob(this.scale));return this.ds(d,{setEventHandlers:!1}),d},(d,f,g)=>(d.Ce(g.fillStyle).we(g.strokeStyle),f.map(y=>{const p=y.existingMember||d.zr();return p.pl(y.vertices),this.b_.Ot(p,y.figure),p})),()=>{this.b_.Nt()},(d,f)=>{this.gs(f)})}WM(t){}A_(t){const e=this.M_.fp();t.forEach(i=>{if(!i.getVisible())return;const s=i.getDimensionsTwoPoints(),n=[{x:s.x1,y:s.y1},{x:s.x1,y:s.y2},{x:s.x2,y:s.y2},{x:s.x2,y:s.y1}],o=i.getFillStyle(),h=i.getStrokeStyle();e.add({No:i.No,vertices:n,figure:i},{fillStyle:o,strokeStyle:h})}),e.finishPlot()}add(t){const e=new hf(this.ks,this.scale,this.qx,this.jx,this.Zx,this.Qx,this.Jx,this.f_,this.qi,this.__).setDimensions(t);return this.g_(e),this.d_=!0,this.Ji.us.Ss(),e}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}}class af extends Vh{constructor(t,e,i,s,n,o,h,a,l,u){super(t,e,i,s,n,o,h,a,l),this.dimensions={startX:0,startY:0,endX:0,endY:0},this.Ya=wt(N(0,0),N(0,0)),this.qi=l,this.ks=t,this.scale=e,this.xe=kt(l.segmentSeriesStrokeStyle,u)}getBoundaries(){return this.Ya}setDimensions(t){return this.dimensions=t,this.Ya=wt(N(Math.min(t.startX,t.endX),Math.min(t.startY,t.endY)),N(Math.max(t.startX,t.endX),Math.max(t.startY,t.endY))),this.jx(),this.ks.Ss(),this}getDimensions(){return this.dimensions}setStrokeStyle(t){return this.xe=typeof t=="function"?t(this.xe):t,this.Zx(),this}getStrokeStyle(){return this.xe}getDominantStyle(){const t=this.xe;return t!==it?t.getFillStyle():ft}}class WA extends _h{constructor(t,e,i,s,n,o,h,a,l,u,c){super(t,e,i,s,n,o,h,a,l,u),this.xs="Segment Series",this.Wy=(d,f,g)=>d.addRow(f.xs).addRow("Start",f.axisX.formatValue(g.getDimensions().startX),",",f.axisY.formatValue(g.getDimensions().startY)).addRow("End",f.axisX.formatValue(g.getDimensions().endX),",",f.axisY.formatValue(g.getDimensions().endY)),this.T_=ko(),this.S_=d=>{const f=d.getDimensions(),g=N((f.startX+f.endX)/2,(f.startY+f.endY)/2);return K(g,this.scale,this.ks.us.dt)},this.Ji.us.Nn(ot.pf),this.__=c,this.y_=new af(this.ks,this.scale,Ft,Ft,Ft,Ft,Ft,d=>!1,this.qi,this.__).dispose(),this.x_=new Ir(()=>{const d=this.T_._t(this.ks.Lg(this.scale));return this.ds(d,{setEventHandlers:!1}),d},(d,f,g)=>(d.Re(g.strokeStyle),f.map(y=>{const p=y.existingMember||d.zr();return p.Eg(y.start,y.end),this.T_.Ot(p,y.figure),p})),()=>{this.T_.Nt()},(d,f)=>{this.gs(f)})}WM(t){}A_(t){const e=this.x_.fp();t.forEach(i=>{if(!i.getVisible())return;const s=i.getDimensions(),n={x:s.startX,y:s.startY},o={x:s.endX,y:s.endY},h=i.getStrokeStyle();e.add({No:i.No,start:n,end:o,figure:i},{strokeStyle:h})}),e.finishPlot()}add(t){const e=new af(this.ks,this.scale,this.qx,this.jx,this.Zx,this.Qx,this.Jx,this.f_,this.qi,this.__).setDimensions(t);return this.g_(e),this.d_=!0,this.Ji.us.Ss(),e}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}}const yl=(r,t,e)=>{const i=t.getIcon();return i?r.addRow(i,t.getName()):r.addRow(t.getName()),r.addRow("X:","",t.axisX.formatValue(e.x)).addRow("Y:","",t.axisY.formatValue(e.y)).addRow("Intensity:","",e.intensity.toFixed(1))};class Dy extends en{constructor(t,e,i,s,n,o,h,a,l,u,c,d){super(t,e,i,s,n,o,h,a,u,c),this.xs="Heatmap Grid Series",this.Wy=yl,this.Lx=!1,this.Av={},this.Ji.us.Nn(ot.yf),this.F_=l,this.qi=u;const f=d;this.be=kt(u.heatmapGridSeriesFillStyle,f),this.gv=kt(this.qi.heatmapGridSeriesWireframeStyle,f);const g={heatmapDataType:"intensity",dataOrder:l.dataOrder||"columns",columns:l.columns,rows:l.rows};this.Un=g,this.I_=this.ks.P_(this.scale,[],g).Ce(this.be).mv(this.gv).cs(this.getHighlight()),this.ds(this.I_),l.start&&this.setStart(l.start),l.end&&this.setEnd(l.end),l.step&&this.setStep(l.step),this.setHighlightOnHover(!1)}pv(){const t=this.Av.start||{x:0,y:0};let e;e=this.Av.end?{x:(this.Av.end.x-t.x)/this.Un.columns,y:(this.Av.end.y-t.y)/this.Un.rows}:this.Av.step?this.Av.step:{x:1,y:1},this.I_.Sv(t,e),this.Ji.us.Ss()}setStart(t){return this.Av.start=t,this.pv(),this}getStart(){return this.I_.vv().start}setStep(t){return this.Av.step=t,this.pv(),this}getStep(){return this.I_.vv().step}setEnd(t){return this.Av.end=t,this.pv(),this}getEnd(){return this.I_.vv().end}clear(){return this.I_.Nt(),this.ks.Ss(),this.D.emit("dataClear",this),this}setWireframeStyle(t){return this.gv=typeof t=="function"?t(this.gv):t,this.I_.mv(this.gv),this.ks.Ss(),this.D.emit("styleChange",this),this}getWireframeStyle(){return this.gv}setCursorInterpolationEnabled(t){return this.Lx=t,this.ks.us.Ss(),this}getCursorInterpolationEnabled(){return this.Lx}setCursorEnabled(t){return super.setCursorEnabled(t)}setIntensityInterpolation(t){return t=t||"disabled",this.I_.xv(t),this.ks.Ss(),this.D.emit("styleChange",this),this}getIntensityInterpolation(){return this.I_.Mv()}Kp(){return this.tS&&this.getVisible()}Gd(){return Qe(this.be)}attach(t,e=!0,i=!1){return super.attach(t,e,i),ge(t,this.qi,i,{fill:this.be}),this}D_(t){this.I_.D_().forEach(e=>{t.I_._v(e)})}l_(t){return this.D.off(t)}a_(t){return this.D.on("dataClear",t)}B_(t){return this.D.on("styleChange",t)}L_(t){return this.D.off(t)}Hc(t,e,i=this.Lx){const s=K(t,this.ks.us.dt,this.scale),n=e?this.I_.getIsUnderMouse()?this.I_:void 0:this.I_;if(!n)return;const o=i?n.zx(s):n.Hc(s);if(o){const h={x:o.x,y:o.y,column:o.column,row:o.column,intensity:o.cellValue};return{location:h,scale:this.scale,resultTableContent:this.Wy(new $e,this,h).Zu(),owner:this}}}solveNearestFromScreen(t,e=this.Lx){return this.Hc(ei(t,this.Ji.us),!1,e)}getXMax(){const t=this.I_;return t?t.bt():void 0}getXMin(){const t=this.I_;return t?t.vt():void 0}getYMax(){const t=this.I_;return t?t.Mt():void 0}getYMin(){const t=this.I_;return t?t.xt():void 0}br(){const t=N(0,0);return t.x=Math.max(t.x,this.I_.vl()),t.y=Math.max(t.y,this.I_.bl()),t}WM(t){if(!(t instanceof Gt))throw new Error("HeatmapGridSeries can only be attached to a pair of Linear Axes.");if(t instanceof Gt&&t._i())throw new Error("HeatmapGridSeries can not be attached to a high precision Axis.")}Ie(t,e){t.cs(e),this.ks.Ss()}Te(){return super.Te(),this.I_.Yo(this.getBoundaries()),this}}class HA extends Dy{constructor(t,e,i,s,n,o,h,a,l,u,c,d){super(t,e,i,s,n,o,h,a,l,u,c,d),this.dS=!1,this.Wy=yl}invalidateIntensityValues(t){if(this.dS&&this.Ji.us.Nn(ot.vf),Array.isArray(t)){if(t.length===0)return this;const e={x:t.length,y:t[0].length,columns:this.Un.dataOrder==="columns"?t.length:t[0].length,rows:this.Un.dataOrder==="rows"?t.length:t[0].length},i=this.Un.dataOrder==="columns"?this.Un.columns:this.Un.rows,s=this.Un.dataOrder==="columns"?this.Un.rows:this.Un.columns;if(e.x>i||e.y>s){if(this.chart.cA.Hn===!0){const o=`HeatmapGridSeries.invalidateIntensityValues intensity matrix overflow.
Grid ${this.Un.columns}x${this.Un.rows}, input ${e.columns}x${e.rows}.
Excess data will be automatically clipped. This can result in sub-optimal performance.`;X.console.warn(o)}const n=[];for(let o=0;o<i;o+=1)n[o]=t[o].slice(0,s);t=n}this.I_._v({type:"intensity",lengthPrimary:e.x,lengthSecondary:e.y,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(t.values.length===0)return this;const e={primary:t.values.length,secondary:t.values[0].length,columns:this.Un.dataOrder==="columns"?t.values.length:t.values[0].length,rows:this.Un.dataOrder==="rows"?t.values.length:t.values[0].length},i=this.Un.dataOrder==="columns"?t.iColumn:t.iRow,s=i+e.primary-1,n=this.Un.dataOrder==="columns"?t.iRow:t.iColumn,o=n+e.secondary-1,h=(this.Un.dataOrder==="columns"?this.Un.columns:this.Un.rows)-1,a=(this.Un.dataOrder==="columns"?this.Un.rows:this.Un.columns)-1;if(i<0||n<0){if(this.chart.cA.Hn===!0){const l=`HeatmapGridSeries.invalidateIntensityValues invalidation start below 0 not permitted.
iColumn: ${t.iColumn}, iRow: ${t.iRow}.
No intensity values will be invalidated.`;X.console.warn(l)}return this}if(s>h||o>a){if(this.chart.cA.Hn===!0){const f=`HeatmapGridSeries.invalidateIntensityValues intensity matrix overflow.
Grid ${this.Un.columns}x${this.Un.rows}, input ${e.columns}x${e.rows} starting at [${t.iColumn},${t.iRow}].
Out of bounds data will be automatically clipped. This can result in sub-optimal performance.`;X.console.warn(f)}const l=Math.max(s-h,0),u=e.primary-l,c=Math.max(o-a,0),d=[];for(let f=0;f<u;f+=1)d[f]=t.values[f].slice(0,c>0?-c:void 0);t={iColumn:t.iColumn,iRow:t.iRow,values:d}}this.I_._v({type:"intensity",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:i,startSecondary:n,values:t.values})}return this.D.emit("invalidateIntensity",this,t),this.ks.Ss(),this.dS=!0,this}setFillStyle(t){return this.be=typeof t=="function"?t(this.be):t,this.I_.Ce(this.be),this.D.emit("styleChange",this),this.ks.Ss(),this}getFillStyle(){return this.be}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}R_(t){return this.D.on("invalidateIntensity",t)}E_(t){return this.D.off(t)}}class XA extends en{constructor(t,e,i,s,n,o,h,a,l,u,c,d){super(t,e,i,s,n,o,h,a,u,c),this.xs="Scrolling Heatmap Grid Series",this.Wy=yl,this.Lx=!1,this.Av={},this.Ji.us.Nn(ot.yf),this.Ji.us.Nn(ot.vf);const f=d;this.be=kt(u.heatmapScrollingGridSeriesFillStyle,f),this.gv=kt(this.qi.heatmapScrollingGridSeriesWireframeStyle,f);const g={scrollDimension:"columns",heatmapDataType:"intensity",...l};this.Un=g,this.z_=this.ks.V_(this.scale,[],g).Ce(this.be).mv(this.gv).cs(this.getHighlight()),this.ds(this.z_),l.start&&this.setStart(l.start),l.step&&this.setStep(l.step),this.setHighlightOnHover(!1)}pv(){const t=this.Av.start||{x:0,y:0};let e;e=this.Av.step?this.Av.step:{x:1,y:1},this.z_.Sv(t,e),this.Ji.us.Ss()}setStart(t){return this.Av.start=t,this.pv(),this}getStart(){return this.z_.vv().start}setStep(t){return this.Av.step=t,this.pv(),this}getStep(){return this.z_.vv().step}clear(){return this.z_.Nt(),this.ks.Ss(),this}setWireframeStyle(t){return this.gv=typeof t=="function"?t(this.gv):t,this.z_.mv(this.gv),this.ks.Ss(),this}getWireframeStyle(){return this.gv}setPixelInterpolationMode(t){return t=t||"disabled",this.z_.xv(t),this.ks.Ss(),this}getPixelInterpolationMode(){return this.z_.Mv()}setCursorInterpolationEnabled(t){return this.Lx=t,this.ks.us.Ss(),this}getCursorInterpolationEnabled(){return this.Lx}setCursorEnabled(t){return super.setCursorEnabled(t)}setDataCleaning(t){return this.z_.Su(t),this.ks.Ss(),this}Kp(){return this.tS&&this.getVisible()}Gd(){return Qe(this.be)}attach(t,e=!0,i=!1){return super.attach(t,e,i),ge(t,this.qi,i,{fill:this.be}),this}Ce(t){return this.be=typeof t=="function"?t(this.be):t,this.z_.Ce(this.be),this.ks.Ss(),this}Hc(t,e,i=this.Lx){const s=K(t,this.ks.us.dt,this.scale),n=e?this.z_.getIsUnderMouse()?this.z_:void 0:this.z_;if(!n)return;const o=i?n.zx(s):n.Hc(s);return o?Fi(o,this.scale,this.Wy(new $e,this,{x:o.x,y:o.y,column:o.column,row:o.column,intensity:o.cellValue}).Zu(),this):void 0}solveNearestFromScreen(t,e=this.Lx){return this.Hc(ei(t,this.Ji.us),!1,e)}WM(t){if(!(t instanceof Gt))throw new Error("HeatmapScrollingGridSeries can only be attached to a pair of Linear Axes.");if(t instanceof Gt&&t._i())throw new Error("HeatmapScrollingGridSeries can not be attached to a high precision Axis.")}getXMax(){return this.z_.bt()||0}getXMin(){return this.z_.vt()||0}getYMax(){return this.z_.Mt()||0}getYMin(){return this.z_.xt()||0}br(){const t=N(0,0);return t.x=Math.max(t.x,this.z_.vl()),t.y=Math.max(t.y,this.z_.bl()),t}Ie(t,e){t.cs(e),this.ks.Ss()}}class $A extends XA{constructor(t,e,i,s,n,o,h,a,l,u,c,d){super(t,e,i,s,n,o,h,a,l,u,c,d),this.Wy=yl}addIntensityValues(t){if(t.length===0||t[0].length===0)return this;const e=t.length,i=t[0].length,s=(this.Un.scrollDimension==="columns"?t.length:t[0].length,this.Un.scrollDimension==="rows"?t.length:t[0].length,0+i-1),n=this.Un.resolution-1;if(s>n){if(this.chart.cA.Hn===!0){const h=`HeatmapScrollingGridSeries.addIntensityValues intensity matrix overflow.
Grid resolution: ${this.Un.resolution}, input ${e}x${i}.
Excess data will be automatically clipped. This can result in sub-optimal performance.`;X.console.warn(h)}const o=[];for(let h=0;h<e;h+=1)o[h]=t[h].slice(0,n+1);t=o}return this.z_.Fv(t),this.ks.Ss(),this}invalidateIntensityValues(t){return this.z_._v(t.iSample,t.values),this.ks.Ss(),this}getSampleCount(){return this.z_.O_()}setFillStyle(t){return this.Ce(t),this}getFillStyle(){return this.be}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}}class Py extends en{constructor(){super(...arguments),this.QM=[],this.yu=[],this.N_=[],this.G_=[],this.e_=1e3,this.JM=0,this.Hi=Rs.onHover,this._l={type:"disabled",packager:(t,e,i)=>t.slice()},this.Lx=!0,this.W_=[],this.U_=[],this.Y_=!1,this.Gd=()=>Qe(this.H_)||Qe(this.X_),this.j_=t=>{const e=t.length;if(this.QM.length>0){const i=this.QM.length-1,s=this.QM[i];if(e>0){const[n,o]=s.tl(),[h,a]=s.qa();if((h?n.length+h.length:n.length)>=this.e_){const l=h&&h.length>0?h[h.length-1]:n[n.length-1],u=a&&a.length>0?a[a.length-1]:o[n.length-1],c=(l.x+t[0].position)/2,d=Wn(c,l,N(t[0].position,t[0].high)).y,f=Wn(c,u,N(t[0].position,t[0].low)).y,g=Is(c,d,f);s.nl(g,wt(N(c,f),N(c,d))).zl(!0),this.Z_([g].concat(t)).Rl(!0)}else s.nl(t)}}else e>0&&this.Z_(t)},this.Q_=t=>{const e=this.W_,i=t.length;if(this.W_.length>0){if(i>0){const s=e[e.length-1],n=s.tl(),o=s.qa();if(n.length+o.length>=this.e_){const h=o.length>0?o[o.length-1]:n[n.length-1],a=(h.x+t[0].x)/2,l=Wn(a,h,N(t[0].x,t[0].y)).y,u=N(a,l);s.nl(u,wt(N(a,l),N(a,l))).zl(!0),e.push(this.J_([u].concat(t),this.i_).Rl(!0))}else s.nl(t)}}else i>0&&e.push(this.J_(t))},this.K_=t=>{const e=this.U_,i=t.length;if(this.U_.length>0){if(i>0){const s=e[e.length-1],n=s.tl(),o=s.qa();if(n.length+o.length>=this.e_){const h=o.length>0?o[o.length-1]:n[n.length-1],a=(h.x+t[0].x)/2,l=Wn(a,h,N(t[0].x,t[0].y)).y,u=N(a,l);s.nl(u,wt(N(a,l),N(a,l))).zl(!0),e.push(this.q_([u].concat(t)).Rl(!0))}else s.nl(t)}}else i>0&&e.push(this.q_(t))},this.tw=(t,e)=>{const i=t.Ux(e);if(i)return[K(i[0],this.scale,this.ks.us.dt),K(i[1],this.scale,this.ks.us.dt)]},this.iw=(t,e)=>{const i=t.sw(e);if(i)return[K(i[0],this.scale,this.ks.us.dt),K(i[1],this.scale,this.ks.us.dt)]}}setDataCleaning(t){const e=t&&t.minDataPointCount;return this.JM=e!==void 0&&e>0?e:0,this.ks.Ss(),this}clear(){for(let t=0;t<this.QM.length;t+=1)this.QM[t].dispose();for(let t=0;t<this.W_.length;t+=1)this.W_[t].dispose();for(let t=0;t<this.U_.length;t+=1)this.U_[t].dispose();return this.yu.length=0,this.N_.length=0,this.G_.length=0,this.i_=void 0,this.QM.length=0,this.W_.length=0,this.U_.length=0,this.ks.Ss(),this.D.emit("dataClear",this),this}getPointAmount(){return this.QM.reduce((t,e)=>t+e.ol()+e.al(),this.yu.length)}setCursorInterpolationEnabled(t){return this.Lx=t,this.ks.us.Ss(),this}getCursorInterpolationEnabled(){return this.Lx}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}setCursorEnabled(t){return super.setCursorEnabled(t)}getCursorResultTableFormatter(){return this.Wy}getXMax(){return Ur(this.QM,yg,Math.max,Sg,this.i_)||0}getXMin(){return Ur(this.QM,gg,Math.min,xg,this.i_)||0}getYMax(){return Ur(this.QM,pg,Math.max,vg,this.i_)||0}getYMin(){return Ur(this.QM,mg,Math.min,Ag,this.i_)||0}br(){const t=N(0,0);for(const e of this.QM)t.x=Math.max(t.x,e.vl()),t.y=Math.max(t.y,e.bl());return t}Kp(){return this.tS&&this.getPointAmount()>0&&this.getVisible()}WM(t){}qM(t,e,i){this.yu=ai(this.yu,t,{canReturnB:!1}),this.N_=ai(this.N_,e,{canReturnB:!1}),this.G_=ai(this.G_,i,{canReturnB:!1}),this.ks.Ss()}ew(t,e,i,s){this.hw(e,i,s),this.qM(Array.isArray(t)?t:[t],e,i)}hw(t,e,i){const s=Bi(ce(t),ce(e));this.i_?this.i_=Bi(this.i_,s):this.i_=s,i&&(this.i_=Bi(this.i_,i))}rw(){const t=this.QM.length,e=Math.min(this.scale.x.getInnerStart(),this.scale.x.getInnerEnd());let i=0;if(t>1)for(let s=0;s<t-1;s+=1)this.scale.x.mi(this.QM[s].bt(),this.QM[s].vl())<e&&(i+=1);return i}s_(t,e,i,s){if(i>0){const n=Math.ceil(i/e),o=t.length-n;if(o>0&&s>0){const h=o-s>0?s:o;if(h>0){for(let a=0;a<h;a+=1)t[a].dispose();t.splice(0,h)}}}}nw(t){const e=this.QM.length>0?this.QM[this.QM.length-1]:void 0,i=e?e.tl()[0].length+(e.qa()[0]?e.qa()[0].length:0):void 0;Gr(t,i,this.e_,this.j_)}ow(t){const e=this.W_.length>0?this.W_[this.W_.length-1].tl().length+this.W_[this.W_.length-1].qa().length:void 0;Gr(t,e,this.e_,this.Q_)}aw(t,e){const i=this.W_.length>0?this.W_[this.W_.length-1].tl().length+this.W_[this.W_.length-1].qa().length:void 0;Gr(t,i,this.e_,this.Q_),Gr(e,i,this.e_,this.K_)}Z_(t,e){const i=this.ks.lw(this.scale).nl(t,e).Ce(this.H_).Bl(this.X_).Pl(this._l).cs(this.getHighlight());return this.QM.push(i),this.ds(i),i}uw(t,e,i){const s=this.ks.rp(this.scale,void 0,[ms.UserSeries]).nl(t,i).setMouseInteractions(!1).Re(e).cs(this.getHighlight());return this.ds(s),s}J_(t,e){return this.uw(t,this.cw,e)}q_(t,e){return this.uw(t,this.dw,e)}fw(t){this.H_=typeof t=="function"?t(this.H_):t;const e=this.H_;for(let i=0;i<this.QM.length;i+=1)this.QM[i].Ce(e);this.ks.Ss()}Aw(t){this.X_=typeof t=="function"?t(this.X_):t;const e=this.X_;for(let i=0;i<this.QM.length;i+=1)this.QM[i].Bl(e);this.ks.Ss()}gw(){return this.H_}Ll(){return this.X_}mw(t){this.cw=typeof t=="function"?t(this.cw):t;const e=this.cw;for(let i=0;i<this.W_.length;i+=1)this.W_[i].Re(e);this.ks.Ss()}yw(t){this.dw=typeof t=="function"?t(this.dw):t;const e=this.dw;for(let i=0;i<this.U_.length;i+=1)this.U_[i].Re(e);this.ks.Ss()}pw(){return this.cw}Sw(){return this.dw}Ie(t,e){t.cs(e),this.bw(e),this.ks.Ss()}bw(t){for(let e=0;e<this.W_.length;e+=1)this.W_[e].cs(t);for(let e=0;e<this.U_.length;e+=1)this.U_[e].cs(t)}oS(){if(super.oS(),this.Y_=!1,this.JM>0){const t=this.QM.length,e=this.rw();this.s_(this.QM,this.e_,this.JM,e);const i=this.QM.length;this.W_.length>0&&this.s_(this.W_,this.e_,this.JM,e),this.U_.length>0&&this.s_(this.U_,this.e_,this.JM,e),t!==i&&this.ZM(),this.Y_=!0}}Te(){if(super.Te(),this.yu.length>0&&(this.nw(this.yu),this.xw(this.N_,this.G_),this.Y_=!0),this.Y_){const t=this.getBoundaries();for(const e of this.QM)e.Yo(t);for(const e of this.W_)e.Yo(t);for(const e of this.U_)e.Yo(t)}}dp(){this.i_=void 0,this.yu.length=0,this.N_.length=0,this.G_.length=0}Hc(t,e,i=this.Lx){const s=((n,o,h)=>{let a,l,u=Number.MAX_VALUE;for(let c=0;c<o.length;c+=1){const d=o[c],f=h(d,n);if(f){const g=pr(n,f[0]),y=pr(n,f[1]);(a===void 0||g<u||y<u)&&(a=f,l=d,g<u?u=g:y<u&&(u=y))}}return a&&l?[a,l]:void 0})(t,e?this.QM.filter(n=>n.getIsUnderMouse()):this.QM,i?this.iw:this.tw);if(s!==void 0&&s[0]!==void 0){const n=K(s[0][0],this.ks.us.dt,this.scale),o=K(s[0][1],this.ks.us.dt,this.scale);return Fi(n,this.scale,this.Wy(new $e,this,n.x,n.y,o.y).Zu(),this,s[1].Eh())}}solveNearestFromScreen(t,e=this.Lx){return this.Hc(ei(t,this.Ji.us),!1,e)}}const jA=(r,t,e,i,s)=>{const n=t.getIcon();return n?r.addRow(n,t.getName()):r.addRow(t.getName()),r.addRow("Position","",t.axisX.formatValue(e)).addRow("Value","",t.axisY.formatValue(i)).addRow("Base","",t.axisY.formatValue(s))};class qA extends Py{constructor(t,e,i,s,n,o,h,a,l=0,u,c){super(t,e,i,s,n,o,h,a,u,c),this.xs="Area Series",this.Wy=jA,this.Ji.us.Nn(ot.mf),this.Mw=l}add(t){this.QM.length!==0&&this.Ji.us.Nn(ot.vf);const e=Array.isArray(t)?t:[t];if(e.length>0){const i=this._w(e),[s,n]=this.ww(i);this.ew(i,s,n,wt(N(st,this.Mw),N(ht,this.Mw)));const o=this.yu[this.yu.length-1];this.t_=o?{position:o.position,high:o.high,low:o.low}:void 0,this.D.emit("dataAdd",this,e,this.i_)}return this}addArrayY(t,e=1,i=0){let s=i;return s||(s=this.t_?this.t_.position+e:0),this.add(Fy(t,e,s)),this}n_(t){return this.D.on("dataAdd",t)}o_(t){return this.D.off(t)}a_(t){return this.D.on("dataClear",t)}l_(t){return this.D.off(t)}}class Dc extends qA{constructor(){super(...arguments),this.dw=it}xw(t){return this.ow(t)}ww(t){const e=t.length,i=Array(e);for(let s=0;s<e;s+=1){const n=t[s];i[s]=N(n.position,n.high)}return[i,[]]}setStrokeStyle(t){return this.mw(t),this}getStrokeStyle(){return this.pw()}}class JA extends Dc{constructor(t,e,i,s,n,o,h,a,l,u,c,d){super(t,e,i,s,n,o,h,a,l,u,c);const f=d;this.H_=kt(this.qi.areaSeriesPositiveFillStyle,f),this.X_=ft,this.cw=kt(this.qi.areaSeriesPositiveStrokeStyle,f)}_w(t){return this.Pw(t)}Pw(t){const e=[];return t.length===1?this.Tw(t[0],e):this.Fw(t,e),e}Tw(t,e,i=0){const s=this.Mw;return e[i]=t.y<s?Is(t.x,s,s):Is(t.x,t.y,s),i+1}Fw(t,e,i=0){let s=0;const n=t.length-1,o=this.Mw;for(;s<n;){const h=t[s],a=t[s+=1];if(h.y>=o){const l=Is(h.x,h.y,o);if(i!==0&&Md(e[i-1],l)||(e[i]=l,i+=1),a.y<o){const u=fu(N(ht,o),N(st,o),h,a);u&&(e[i]=Is(u.x,u.y,o),i+=1),e[i]=Is(a.x,o,o),i+=1}else e[i]=Is(a.x,a.y,o),i+=1}else{const l=Is(h.x,o,o);if(i!==0&&Md(e[i-1],l)||(e[i]=l,i+=1),a.y>=o){const u=fu(N(ht,o),N(st,o),h,a);u&&(e[i]=Is(u.x,u.y,o),i+=1),e[i]=Is(a.x,a.y,o),i+=1}else e[i]=Is(a.x,o,o),i+=1}}return i}r_(){return gl(this.QM,t=>t[0]||[])}setFillStyle(t){return this.fw(t),this}getFillStyle(){return this.gw()}attach(t,e=!0,i=!1){return ge(t,this.qi,i,{fill:this.H_,stroke:this.cw}),super.attach(t,e,i)}}const ZA={Positive:JA},QA=(r,t,e,i,s)=>r.addRow(t.getName()).addRow("Position","",t.axisX.formatValue(e)).addRow("High","",t.axisY.formatValue(i)).addRow("Low","",t.axisY.formatValue(s));class Iy extends Py{constructor(t,e,i,s,n,o,h,a,l,u,c){super(t,e,i,s,n,o,h,a,l,u),this.xs="Area Range Series",this.Wy=QA,this.Ji.us.Nn(ot.mf);const d=c;this.H_=kt(this.qi.areaRangeSeriesFillStyle,d),this.cw=kt(this.qi.areaRangeSeriesStrokeStyle,d),this.X_=kt(this.qi.areaRangeSeriesFillStyleInverted,d),this.dw=kt(this.qi.areaRangeSeriesStrokeStyleInverted,d)}add(t){const e=Array.isArray(t)?t:[t],[i,s]=lg(e);this.ew(t,i,s);const n=this.yu[this.yu.length-1];return this.t_=n?{position:n.position,high:n.high,low:n.low}:void 0,this.D.emit("dataAdd",this,e,this.i_),this}addArraysHighLow(t,e,i=1,s=0){if(t.length!==e.length)throw new Error("arrayHigh and arrayLow lengths are not equal");{let n=s;n||(n=this.t_?this.t_.position+i:0),this.add(((o,h,a=1,l)=>{const u=l!==void 0?l:0,c=new Array(o.length);for(let d=0;d<o.length;d+=1)c[d]={position:u+a*d,high:o[d],low:h[d]};return c})(t,e,i,n))}return this}xw(t,e){this.aw(t,e)}setHighFillStyle(t){return this.fw(t),this}setLowFillStyle(t){return this.Aw(t),this}setHighStrokeStyle(t){return this.mw(t),this}setLowStrokeStyle(t){return this.yw(t),this}getHighFillStyle(){return this.gw()}getLowFillStyle(){return this.Ll()}getHighStrokeStyle(){return this.pw()}getLowStrokeStyle(){return this.Sw()}r_(){return gl(this.QM,t=>{const e=t[0],i=t[1];if(!e||!i)return[];const s=[],n=e.length;for(let o=0;o<n;o+=1)s[o]={position:e[o].x,high:e[o].y,low:i[o].y};return s})}n_(t){return this.D.on("dataAdd",t)}o_(t){return this.D.off(t)}a_(t){return this.D.on("dataClear",t)}l_(t){return this.D.off(t)}attach(t,e=!0,i=!1){return ge(t,this.qi,i,{fill:this.H_,fill2:this.X_,behavior:{colorStep:!0}}),super.attach(t,e,i)}}var br;(function(r){r[r.before=0]="before",r[r.middle=.5]="middle",r[r.after=1]="after"})(br||(br={}));const lf=(r,t)=>{const e=[],i=r.length,s=t;if(i>0){let n=0,o=r[0];e[n]=o,n+=1;for(let h=1;h<i;h+=1){const a=r[h];if(s<=0)e[n]=N(o.x,a.y),n+=1;else{const l=o.x*(1-s)+a.x*s;e[n]=N(l,o.y),n+=1,e[n]=N(l,a.y),n+=1}e[n]=a,n+=1,o=a}}return e},KA=(r,t)=>{const e=r*r,i=e*r,s=1-r,n=s*s,o=n*s;return N(o*t[0].x+3*r*n*t[1].x+3*e*s*t[2].x+i*t[3].x,o*t[0].y+3*r*n*t[1].y+3*e*s*t[2].y+i*t[3].y)},Bn=(r,t=32)=>{if(r.length===2)return[r[0],r[1]];const e=(o=>{const a=o.length-1,l=Array(a);if(a>1){let u=N(0,0),c=N(0,0),d=N(0,0),f=Li(Ut(o[1],o[0]));const g=3;let y=0,p=0;for(let x=0;x<a;x+=1){const A=Array(4);if(A[0]=o[x],A[1]=o[x],A[3]=o[x+1],A[2]=o[x+1],d=f,u=c,x+1<a?(f=o[x+2]===o[x+1]?N(0,0):Li(Ut(o[x+2],o[x+1])),c=Li(gt(d,f))):c=N(0,0),o[x+1].y===o[x].y)y=0,p=0;else{const v=o[x+1].x-o[x].x;y=Math.abs(u.x)>1e-5?Math.abs(v/(g*u.x)):1,p=Math.abs(c.x)>1e-5?Math.abs(v/(g*c.x)):1}A[1]=gt(St(u,y),A[1]),A[2]=Ut(A[2],St(c,p)),l[x]=A}}return l.length>0?l:[]})(r),i=e.length,s=Array(i*t);let n=0;for(let o=0;o<i;o+=1)for(let h=0;h<=t;h+=1)s[n]=KA(h/t,e[o]),n+=1;return s};class Nh extends Fc{constructor(t,e,i,s,n,o,h,a,l,u,c,d,f,g,y){super(t,e,i,s,n,o,h,a,l,c,d),this.QM=[],this.xs="Point Line series",this.e_=1e5,this.Hx=5,this.Aa=0,this.Ga=!1,this.Wa=!1,this.Ua=!1,this.Lx=!0,this.Dw="nearest-x",this.Bw=1,this.Lw=[],this.Rw=p=>{if(this.QM.length>0){const x=this.QM[this.QM.length-1];if(p.length>0){const A=x.tl(),v=x.qa(),w=A.length+v.length-+x.El();if(w>=this.e_){const E=v.length>0?v[v.length-1]:A[x.El()?w:w-1],C=N((E.x+p[0].x)/2,(E.y+p[0].y)/2);x.nl(C,wt(N(C.x,C.y),N(C.x,C.y))).zl(!0),this.Ew([C].concat(p)).Rl(!0)}else x.nl(p,this.i_)}}else p.length>0&&this.Ew(p)},this.zw=p=>{if(this.Lw.length>0){const x=this.Lw[this.Lw.length-1];p.length>0&&((x.tl().length+x.qa().length)*this.Bw>=this.e_?this.Vw(p):x.nl(p))}else p.length>0&&this.Vw(p)},this.Ow=(p,x)=>{const A=p.Hc(x);if(A)return K(A,this.scale,this.ks.us.dt)},this.Nw=(p,x)=>{const A=p.sw(x);if(A)return K(A,this.scale,this.ks.us.dt)},this.Un=y,this.$x=u,this.Gw=f,this.Ww=kt(c.pointLineSeriesFillStyle,g),this.lu=kt(this.qi.pointLineSeriesStrokeStyle,g)}add(t){return super.add(t),this}r_(){return gl(this.Lw)}setStrokeStyle(t){this.lu=typeof t=="function"?t(this.lu):t;const e=this.lu;for(let i=0;i<this.QM.length;i+=1)this.QM[i].Re(e);return this.ks.Ss(),this}getStrokeStyle(){return this.lu}setPointFillStyle(t){this.Ww=typeof t=="function"?t(this.Ww):t;const e=this.Ww;for(let i=0;i<this.Lw.length;i+=1)this.Lw[i].Ce(e);return this.ks.Ss(),this}getPointFillStyle(){return this.Ww}setPointSize(t){this.Hx=t;for(let e=0;e<this.Lw.length;e+=1)this.Lw[e].q(t);return this.ks.Ss(),this}getPointSize(){return this.Hx}getPointShape(){return this.$x}setPointRotation(t){this.Aa=t;for(let e=0;e<this.Lw.length;e+=1)this.Lw[e].Nh(t);return this.ks.Ss(),this}getPointRotation(){return this.Aa}setIndividualPointSizeEnabled(t){this.Ga=t,t&&this.Ji.us.Nn(ot.bf);for(let e=0;e<this.Lw.length;e+=1)this.Lw[e].el(t);return this.ks.Ss(),this}getIndividualPointSizeEnabled(){return this.Ga}setIndividualPointRotationEnabled(t){this.Wa=t;for(let e=0;e<this.Lw.length;e+=1)this.Lw[e].hl(t);return this.ks.Ss(),this}getIndividualPointRotationEnabled(){return this.Wa}setIndividualPointValueEnabled(t){this.Ua=t;for(let e=0;e<this.Lw.length;e+=1)this.Lw[e].rl(t);return this.ks.Ss(),this}getIndividualPointValueEnabled(){return this.Ua}setVisible(t){return super.setVisible(t),this.Lw.forEach(e=>e.setVisible(t)),this}setCursorInterpolationEnabled(t){return this.Lx=t,this.ks.us.Ss(),this}getCursorInterpolationEnabled(){return this.Lx}setCursorSolveBasis(t){return this.Dw=t,this.QM.forEach(e=>e.Ka(Xn(t))),this.Lw.forEach(e=>e.Ka(Xn(t))),this.ks.Ss(),this}getCursorSolveBasis(){return this.Dw}Gd(){return Qe(this.Ww)||Qe(this.lu.getFillStyle())}Cs(){return this.bs||this.$x}WM(t){}Ie(t,e){t.cs(e),this.ks.Ss()}h_(t){const e=this.QM.length>0?this.QM[this.QM.length-1].tl().length+this.QM[this.QM.length-1].qa().length-+this.QM[this.QM.length-1].El():void 0;Gr(t,e,this.e_,this.Rw),Gr(t,e,this.e_,this.zw)}Vw(t,e){const i=this.ks.bS(this.scale).nl(t,e).setMouseInteractions(this.Yi).Ce(this.Ww).il(this.$x).q(this.Hx).Nh(this.Aa).el(this.Ga).hl(this.Wa).rl(this.Ua).Ka(Xn(this.Dw)).cs(this.getHighlight());return this.ds(i),this.Lw.push(i),i}Ew(t,e){const i=this.ks.rp(this.scale,void 0,[ms.UserSeries,...this.Gw]).nl(t,e).setMouseInteractions(this.Yi).Re(this.lu).Ka(Xn(this.Dw)).cs(this.getHighlight());return this.ds(i),this.QM.push(i),i}attach(t,e=!0,i=!1){return ge(t,this.qi,i,{stroke:this.lu,fill:this.Ww}),super.attach(t,e,i)}getPointAmount(){return this.Lw.reduce((t,e)=>t+e.ol()+e.al(),this.yu.length)}clear(){super.clear();for(let t=0;t<this.QM.length;t+=1)this.QM[t].dispose();this.QM.length=0;for(let t=0;t<this.Lw.length;t+=1)this.Lw[t].dispose();return this.Lw.length=0,this}s_(t,e,i,s){super.s_(t,e,i,s),this.KM.s_(this.Lw,e,i,s,this.scale,n=>{})}Hc(t,e,i=this.Lx){const s=i?kn(t,e?this.QM.filter(n=>n.getIsUnderMouse()):this.QM,this.Nw,this.Dw==="nearest-x"?(n,o)=>Math.abs(n.x-o.x):this.Dw==="nearest-y"?(n,o)=>Math.abs(n.y-o.y):(n,o)=>(n.x-o.x)**2+(n.y-o.y)**2):kn(t,e?this.Lw.filter(n=>n.getIsUnderMouse()):this.Lw,this.Ow,this.Dw==="nearest-x"?(n,o)=>Math.abs(n.x-o.x):this.Dw==="nearest-y"?(n,o)=>Math.abs(n.y-o.y):(n,o)=>(n.x-o.x)**2+(n.y-o.y)**2);if(s!==void 0){const n=K(s[0],this.ks.us.dt,this.scale),o=s[1]instanceof gu?s[1].uu():s[1].Eh(),h=s[1]instanceof gc?s[1].Eh():void 0,a=s[1]instanceof gu?s[1].uu().getFillStyle():void 0,l=Ri(o)?s[0].color?new H({color:s[0].color}):new H({color:o.getFallbackColor()}):void 0;return Fi(n,this.scale,this.Wy(new $e,this,n.x,n.y,n).Zu(),this,a||l||h)}}solveNearestFromScreen(t,e=this.Lx){return this.Hc(ei(t,this.Ji.us),!1,e)}}const ea=(r,t)=>r.qa().length>=t?r.qa().slice(-t):Array.prototype.concat(r.tl(),r.qa()).slice(-t),uf=(r,t,e)=>{const i=Array.prototype.concat(r.tl(),r.qa()).slice(0,-33).concat(t.slice(e+1,2*e+2));r.Nt().nl(i).Ps()};class Vy extends Nh{constructor(t,e,i,s,n,o,h,a,l,u,c,d,f,g,y){super(t,e,i,s,n,o,h,a,l,u,c,d,f,g,y),this.xs="Spline Series",this.Bw=32,this.e_=8e3,this.Uw=p=>{if(p.length===0)return;const x=this.Lw.length;if(x>0){const A=x>1,v=this.Lw[x-1];if(A){const w=Array.prototype.concat(v.tl(),v.qa()),E=w.length;if(32*E>=this.e_){const C=ea(v,3),k=Array.prototype.concat(C,p),F=Bn(k,32);uf(this.QM[x-1],F,32),this.Ew(F.slice(66))}else if(E<5){const C=this.Lw[x-2],k=ea(C,3),F=Array.prototype.concat(k,w,p),m=Bn(F,32),S=this.QM[x-1],b=m.slice(66);S.Nt().nl(b).Ps()}else{const C=this.QM[x-1],k=Array.prototype.concat(C.tl(),C.qa()),F=ea(v,4),m=Array.prototype.concat(F,p),S=Bn(m,32),b=k.slice(0,-66).concat(S.slice(33));C.Nt().nl(b).Ps()}}else{const w=Array.prototype.concat(v.tl(),v.qa()),E=w.length,C=this.QM[x-1];if(32*E>=this.e_){const k=ea(v,3),F=Array.prototype.concat(k,p),m=Bn(F,32);uf(this.QM[0],m,32),this.Ew(m.slice(66))}else if(E+p.length>1){const k=Array.prototype.concat(w,p),F=Bn(k,32);C.Nt().nl(F).Ps()}else C.nl(p)}}else{const A=p.length>0?Bn(p,32):p,v=ce(A);this.Ew(A,v)}this.zw(p)}}setCursorInterpolationEnabled(t){return super.setCursorInterpolationEnabled(t)}h_(t){const e=this.Lw.length,i=this.Lw.length>0?this.Lw[e-1].tl().length+this.Lw[e-1].qa().length:void 0;Gr(t,i,Math.ceil(this.e_/this.Bw),this.Uw)}solveNearestFromScreen(t,e=this.Lx){if(e)return super.solveNearestFromScreen(ei(t,this.Ji.us),e);const i=kn(ei(t,this.Ji.us),this.Lw,this.Ow,this.Dw==="nearest-x"?(s,n)=>Math.abs(s.x-n.x):this.Dw==="nearest-y"?(s,n)=>Math.abs(s.y-n.y):(s,n)=>(s.x-n.x)**2+(s.y-n.y)**2);if(i!==void 0){const s=K(i[0],this.ks.us.dt,this.scale);return Fi(s,this.scale,this.Wy(new $e,this,s.x,s.y,s).Zu(),this,i[1].Eh())}}}class _y{constructor(){this.Gi="FreeformPattern",this._l={type:"disabled",packager:(t,e,i)=>t.slice()}}s_(t,e,i,s,n,o){if(s>0){const h=Math.trunc((e-s)/i);if(h>0&&t.length>1){const a=t.splice(0,h);for(let l=0;l<a.length;l+=1)o(a[l]),a[l].dispose()}}}Yw(t,e){const i=t.x-e.x,s=t.y-e.y;return Math.sqrt(i*i+s*s)}getXMax(t=[],e){return Ur(t,yg,Math.max,Sg,e)}getXMin(t=[],e){return Ur(t,gg,Math.min,xg,e)}getYMax(t=[],e){return Ur(t,pg,Math.max,vg,e)}getYMin(t=[],e){return Ur(t,mg,Math.min,Ag,e)}}const ia=r=>{switch(r){case"normal":default:return 1;case"high":return .25}},t1=Ot({_l:{type:"disabled",packager:(r,t,e)=>r.slice()}});class Ny extends t1{s_(t,e,i,s,n,o){if(s>0){const h=Math.ceil(s/i),a=t.length-h;if(a>0){const l=this.rw(t,n);if(l>0){const u=a-l>0?l:a;if(u>0){for(let c=0;c<u;c+=1)o(t[c]),t[c].dispose();t.splice(0,u)}}}}}}const e1=(r,t)=>{const e=t.xt();return r?Math.min(e,r):e},i1=(r,t)=>{const e=t.Mt();return r?Math.max(e,r):e};class cf extends Ny{Yw(t,e){return Math.abs(t.x-e.x)}getYMax(t=[],e){return t.reduce(i1,e?e.max.y:void 0)}getYMin(t=[],e){return t.reduce(e1,e?e.min.y:void 0)}}const s1=(r,t)=>{const e=t.vt();return r?Math.min(e,r):e},r1=(r,t)=>{const e=t.bt();return r?Math.max(e,r):e};class df extends Ny{Yw(t,e){return Math.abs(t.y-e.y)}getXMax(t=[],e){return t.reduce(r1,e?e.max.x:void 0)}getXMin(t=[],e){return t.reduce(s1,e?e.min.x:void 0)}}const wi={horizontalProgressive:new class extends cf{constructor(){super({_l:Gd()}),this.Gi="HorizontalProgressivePattern"}rw(r,t){const e=r.length,i=Math.min(t.x.getInnerStart(),t.x.getInnerEnd());let s=0;if(e>1)for(let n=0;n<e-1;n+=1)t.x.mi(r[n].bt(),r[n].vl())<i&&(s+=1);return s}getXMax(r=[],t){return t!==void 0?t?t.max.x:void 0:r.length>0?r[r.length-1].bt():void 0}getXMin(r=[],t){return r.length>0&&r[0].ol()>0?r[0].vt():t?t.min.x:void 0}setPrecision(r){return this.set("_columnPackaging",Gd(ia(r)))}},horizontalRegressive:new class extends cf{constructor(){super({_l:Od()}),this.Gi="HorizontalRegressivePattern"}rw(r,t){const e=r.length,i=Math.max(t.x.getInnerStart(),t.x.getInnerEnd());let s=0;if(e>1)for(let n=0;n<e-1;n+=1)i<t.x.mi(r[n].vt(),-r[n].vl())&&(s+=1);return s}getXMax(r=[],t){return r.length>0&&r[0].ol()>0?r[0].bt():t?t.max.x:void 0}getXMin(r=[],t){return t!==void 0?t?t.min.x:void 0:r.length>0?r[r.length-1].vt():void 0}setPrecision(r){return this.set("_columnPackaging",Od(ia(r)))}},verticalProgressive:new class extends df{constructor(){super({_l:Yd()}),this.Gi="VerticalProgressivePattern"}rw(r,t){const e=r.length,i=Math.min(t.y.getInnerStart(),t.y.getInnerEnd());let s=0;if(e>1)for(let n=0;n<e-1;n+=1)t.y.mi(r[n].Mt(),r[n].bl())<i&&(s+=1);return s}getYMax(r=[],t){return t!==void 0?t?t.max.y:void 0:r.length>0?r[r.length-1].Mt():void 0}getYMin(r=[],t){return r.length>0&&r[0].ol()>0?r[0].xt():t?t.min.y:void 0}setPrecision(r){return this.set("_columnPackaging",Yd(ia(r)))}},verticalRegressive:new class extends df{constructor(){super({_l:Wd()}),this.Gi="VerticalRegressivePattern"}rw(r,t){const e=r.length,i=Math.max(t.y.getInnerStart(),t.y.getInnerEnd());let s=0;if(e>1)for(let n=0;n<e-1;n+=1)i<t.y.mi(r[n].xt(),-r[n].bl())&&(s+=1);return s}getYMax(r=[],t){return r.length>0&&r[0].ol()>0?r[0].Mt():t?t.max.y:void 0}getYMin(r=[],t){return t!==void 0?t?t.min.y:void 0:r.length>0?r[r.length-1].xt():void 0}setPrecision(r){return this.set("_columnPackaging",Wd(ia(r)))}},freeform:new _y};class Ly extends Nh{constructor(t,e,i,s,n,o,h,a,l,u,c,d,f,g,y){super(t,e,i,s,n,o,h,a,wi.horizontalProgressive,l,c,d,f,g,y),this.xs="Step Series",this.Rw=p=>{const x=this.QM.length>0?this.QM[this.QM.length-1].tl().length+this.QM[this.QM.length-1].qa().length:void 0;Gr(p,x,this.e_,this.Hw)},this.Hw=p=>{const x=p.length;if(this.QM.length>0){const A=this.QM[this.QM.length-1];if(x>0){const v=A.tl(),w=A.qa(),E=w.length>0?w[w.length-1]:v[v.length-1],C=lf([E].concat(p),this.$w);C.shift();const k=N((E.x+C[0].x)/2,(E.y+C[0].y)/2),F=Array.prototype.concat(k,C);(w.length>0?v.length+w.length:v.length)>=this.e_?(A.nl(k,wt(N(k.x,k.y),N(k.x,k.y))).zl(!0),this.Ew(F).Rl(!0),this.Vw(p)):A.nl(F)}}else x>0&&this.Ew(lf(p,this.$w));this.zw(p)},this.$w=u,this.Gw.find(p=>p.type==="DataPattern")===void 0&&this.Gw.push({type:"DataPattern",args:{pattern:"ProgressiveX"}})}}class zy extends en{constructor(t,e,i,s,n,o,h,a,l,u){super(t,e,i,s,n,o,h,a,l,u),this.xs="OHLC Series",this.Xw=c=>c[4]>=c[1],this.c_=wt(gr(st,st),gr(ht,ht)),this.jw=[],this.Zw=!1,this.Qw=-1,this.Jw=[],this.Kw=!0,this.qw=!1,this.tC=4,this.Wy=(c,d,f)=>(c.addRow(d.getName()).addRow("Time","",d.axisX.formatValue(f.position)).addRow("Open","",f.open.toFixed(3)).addRow("High","",f.high.toFixed(3)).addRow("Low","",f.low.toFixed(3)).addRow("Close","",f.close.toFixed(3)),c),this.iC=[1e-7,1e-6,1e-5,1e-4,.001,.01,.1,1,5,10,30,60,300,600,1800,3600,7200,14400,28800,36e3,43200,50400,57600,64800,72e3,86400,172800,259200,345600,432e3,604800,1209600,2592e3,7776e3,10368e3,15552e3,31536e3,15768e4,31536e4,63072e4,7884e5,15768e5,31536e5,3942e6,47304e5,63072e5,7884e6,15768e6,31536e6,3942e7,47304e6,63072e6,7884e7,15768e7,31536e7,63072e7,7884e8,15768e8,31536e8,47304e8,63072e8],this.Ji.us.Nn(ot.rf)}r_(){return this.Jw}n_(t){return this.D.on("dataAdd",t)}o_(t){return this.D.off(t)}a_(t){return this.D.on("dataClear",t)}l_(t){return this.D.off(t)}Kp(){return this.tS&&this.Jw.length>0&&this.getVisible()}sC(t){if(!(this.Jw.length<1))return[this.Jw[t][0],this.Jw[t][1],this.Jw[t][2],this.Jw[t][3],this.Jw[t][4]]}Hc(t){if(this.Jw.length===0)return;const e=K(t,this.ks.us.dt,this.scale).x,i=this.getPackDataState()!==void 0;let s,n,o,h,a;if(i){const u=this.eC;if(!u)return;const c=Fl(e,u.length-1,f=>u[f][0]),d=c!==void 0&&u[c];if(!d)return;h=d[3],o=d[2],n=d[1],a=d[4],s=d[0]}else{const u=Fl(e,this.Jw.length-1,d=>this.Jw[d][0]),c=u!==void 0&&this.Jw[u];if(!c)return;s=c[0],n=c[1],o=c[2],h=c[3],a=c[4]}const l={position:s,open:n,high:o,low:h,close:a,isPacked:i};return{location:N(l.position,l.close),scale:this.scale,resultTableContent:this.Wy(new $e,this,l).Zu(),owner:this,isPacked:i,position:s,open:n,high:o,low:h,close:a}}WM(t){if(!(t.x instanceof Hi))throw new Error("OHLCSeries must be attached to a Linear X Axis.");this.hC=t.x}br(){return N(5,5)}Y_(t){const e=t.length-1;if(e<0)return this;for(let i=0;i<=e;i+=1)t[i][3]<this.c_.min.y&&(this.c_.min.y=t[i][3]),this.c_.max.y<t[i][2]&&(this.c_.max.y=t[i][2]);return this.c_.min.x=Math.min(this.c_.min.x,t[0][0]),this.c_.max.x=Math.max(this.c_.max.x,t[e][0]),this}getXMax(){return this.c_.max.x}getXMin(){return this.c_.min.x}getYMax(){return this.c_.max.y}getYMin(){return this.c_.min.y}add(t){this.Jw.length>0&&this.Ji.us.Nn(ot.vf);const e=Array.isArray(t[0])?t:[t[0]];if(e.length>0){this.Zw=!0;const i=this.Jw.length,s=this.jw.length,n=e.length;this.Jw.length=i+n,this.jw.length=s+n;for(let o=0;o<n;o+=1)this.Jw[i+o]=e[o],this.jw[s+o]=this.Jw[i+o];this.Y_(e),this.D.emit("dataAdd",this,e,void 0),this.ks.Ss()}return this}setPackData(t){return t!==this.Kw&&(this.qw=!0,this.Kw=t,this.Ji.us.Ss()),this}getPackData(){return this.Kw}getPackDataState(){const t=this.Qw;if(!(t<0||this.eC===void 0||this.eC.length===this.Jw.length))return{figureAxisInterval:t}}setFigureWidth(t){return this.rC=t,this.Ji.us.Ss(),this}getFigureWidth(){return this.rC}setFigureMinimumGap(t){return this.tC=t,this.Ji.us.Ss(),this}getFigureMinimumGap(){return this.tC}solveNearestFromScreen(t){return this.Hc(ei(t,this.Ji.us))}clear(){return this.Jw=[],this.jw=[],this.eC=void 0,this.nC(),this.c_.min.x=st,this.c_.min.y=st,this.c_.max.x=ht,this.c_.max.y=ht,this.D.emit("dataClear",this),this}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}oC(t){return this.hC.getPixelSize()*t/1e3}aC(){const t=this.iC.length-1,e=this.oC(this.rC+this.tC);let i=Fl(e,t,s=>this.iC[s]);return i===void 0?i=e<this.iC[0]?0:this.iC[t]<e?t:this.iC.length/2:this.iC[i]<e&&(i+=1),this.iC.length<=i&&(i=t),1e3*this.iC[i]}Te(){if(super.Te(),!this.Kw){this.eC=void 0;let t=null;if(this.qw?(this.qw=!1,t=this.Jw,this.nC()):t=this.jw,t.length>=1){for(let e=0;e<t.length;e+=1){const i=t[e],s=i[0];this.Xw(i)?this.lC(s,i):this.uC(s,i)}this.jw.length=0,this.Zw=!1,this.Qw=-1}}}dp(){super.dp();const t=this.aC();if(this.Kw&&this.Jw.length>=1&&(t!==this.Qw||this.Zw||this.qw)){this.qw=!1,this.Qw=t,this.Zw=!1,this.nC(),this.eC=[];const e=this.Jw.length;let i=this.Jw[0][0]-this.Jw[0][0]%(t/2)+t,s=0;for(;s<e;){let n=this.sC(s);if(n===void 0)break;let o=n[3],h=n[2];const a=s;for(s+=1;s<e&&this.Jw[s][0]<i;)n=this.Jw[s],this.Jw[s][3]<o&&(o=this.Jw[s][3]),h<this.Jw[s][2]&&(h=this.Jw[s][2]),s+=1;const l=s-1;let u=n[0];a<l&&(u=this.Jw[l][0],n=[u,this.Jw[a][1],h,o,this.Jw[l][4]]),n[1]<n[4]?this.lC(u,n):this.uC(u,n),this.eC.push(n),i+=t}}}}class n1 extends zy{constructor(t,e,i,s,n,o,h,a,l,u){super(t,e,i,s,n,o,h,a,l,u),this.cC=1175494351e-14,this.rC=this.qi.ohlcCandleThicknessPixels||5,this.dC=this.qi.ohlcCandleTailStrokeStylePositive,this.fC=this.qi.ohlcCandleTailStrokeStyleNegative,this.AC=this.qi.ohlcCandleBodyFillStylePositive,this.gC=this.qi.ohlcCandleBodyFillStyleNegative,this.mC=i.Lg(this.scale).Re(new Tt({thickness:this.rC,fillStyle:this.AC})),this.mC.mu=!0,this.mC.gu={x:0,y:1},this.yC=i.Lg(this.scale).Re(new Tt({thickness:this.rC,fillStyle:this.gC})),this.yC.mu=!0,this.yC.gu={x:0,y:-1},this.pC=i.Lg(this.scale).Re(this.dC),this.pC.mu=!0,this.SC=i.Lg(this.scale).Re(this.fC),this.SC.mu=!0,this.ds(this.mC),this.ds(this.yC),this.ds(this.pC),this.ds(this.SC)}setBodyThickness(t){return this.rC=t,this.mC.Re(new Tt({thickness:this.rC,fillStyle:this.AC})),this.yC.Re(new Tt({thickness:this.rC,fillStyle:this.gC})),this.Ji.us.Ss(),this}getBodyThickness(){return this.rC}setBodyFillStylePositive(t){return this.AC=typeof t=="function"?t(this.AC):t,this.mC.Re(new Tt({thickness:this.rC,fillStyle:this.AC})),this.Ji.us.Ss(),this}getBodyFillStylePositive(){return this.AC}setBodyFillStyleNegative(t){return this.gC=typeof t=="function"?t(this.gC):t,this.yC.Re(new Tt({thickness:this.rC,fillStyle:this.gC})),this.Ji.us.Ss(),this}getBodyFillStyleNegative(){return this.gC}setTailStrokeStylePositive(t){return this.dC=typeof t=="function"?t(this.dC):t,this.pC.Re(this.dC),this.Ji.us.Ss(),this}getTailStrokeStylePositive(){return this.dC}setTailStrokeStyleNegative(t){return this.fC=typeof t=="function"?t(this.fC):t,this.SC.Re(this.fC),this.Ji.us.Ss(),this}getTailStrokeStyleNegative(){return this.fC}attach(t,e=!0,i=!1){return super.attach(t,e,i),ge(t,this.qi,i,{fill:this.AC,fill2:this.gC,behavior:{colorStep:!0}}),this}nC(){return this.pC.Nt(),this.SC.Nt(),this.mC.Nt(),this.yC.Nt(),this}lC(t,e){return Math.abs(e[1]-e[4])<this.cC?this.mC.zr().Eg({x:t,y:e[1]-this.cC},{x:t,y:e[1]+this.cC}):this.mC.zr().Eg({x:t,y:e[1]},{x:t,y:e[4]}),e[4]<e[2]&&this.pC.zr().Eg({x:t,y:e[4]},{x:t,y:e[2]}),e[3]<e[1]&&this.pC.zr().Eg({x:t,y:e[3]},{x:t,y:e[1]}),this}uC(t,e){return Math.abs(e[1]-e[4])<this.cC?this.yC.zr().Eg({x:t,y:e[1]-this.cC},{x:t,y:e[1]+this.cC}):this.yC.zr().Eg({x:t,y:e[1]},{x:t,y:e[4]}),e[3]<e[4]&&this.SC.zr().Eg({x:t,y:e[3]},{x:t,y:e[4]}),e[1]<e[2]&&this.SC.zr().Eg({x:t,y:e[1]},{x:t,y:e[2]}),this}}const o1={Candlesticks:n1},h1=r=>({defaultDragMouseStyle:It.Horizontal,getTitleTextRotation:()=>0,...Po(r,t=>t.getXMin(),t=>t.getXMax(),t=>t.br().x)}),a1=r=>({defaultDragMouseStyle:It.Vertical,getTitleTextRotation:t=>90*t,...Po(r,t=>t.getYMin(),t=>t.getYMax(),t=>t.br().y)});class Ko extends Fc{constructor(t,e,i,s,n,o,h,a,l,u,c,d,f,g){super(t,e,i,s,n,o,h,a,l,u,c),this.QM=[],this.xs="Line Series",this.Lx=!0,this.e_=void 0,this.Dw="nearest-x",this.pu=void 0,this.Gd=()=>Qe(this.lu.getFillStyle()),this.TC=(y,p)=>{const x=y.Ux(p);if(x)return K(x,this.scale,this.ks.us.dt)},this.Nw=(y,p)=>{const x=y.sw(p);if(x)return K(x,this.scale,this.ks.us.dt)},this.Gw=d,this.Un=g,this.lu=kt(this.qi.lineSeriesStrokeStyle,f),this.FC={individualLookupValuesEnabled:(g==null?void 0:g.individualLookupValuesEnabled)!==void 0&&g.individualLookupValuesEnabled}}add(t){return super.add(t),this}setMouseInteractions(t){return super.setMouseInteractions(t)}setStrokeStyle(t){this.lu=typeof t=="function"?t(this.lu):t;const e=this.lu;for(let i=0;i<this.QM.length;i+=1)this.QM[i].Re(e);return this.ks.Ss(),this}getStrokeStyle(){return this.lu}setDataCleaning(t){return this.pu=t,this.QM.forEach(e=>e.Su(this.pu)),this.ks.Ss(),this}setCursorInterpolationEnabled(t){return this.Lx=t,this.ks.us.Ss(),this}getCursorInterpolationEnabled(){return this.Lx}setCursorSolveBasis(t){return this.Dw=t,this.QM.forEach(e=>e.Ka(Xn(t))),this.ks.Ss(),this}getCursorSolveBasis(){return this.Dw}WM(t){}h_(t){let e=this.QM[0];e||(e=this.Ew(),this.QM.push(e),this.ds(e)),e.nl(t,this.i_)}Ew(){return this.ks.rp(this.scale,this.FC,[ms.UserSeries,...this.Gw]).Re(this.lu).Su(this.pu).Ka(Xn(this.Dw)).cs(this.getHighlight())}attach(t,e=!0,i=!1){return ge(t,this.qi,i,{stroke:this.lu}),super.attach(t,e,i)}Ie(t,e){t.cs(e),this.ks.Ss()}s_(t,e,i,s){}Hc(t,e,i=this.Lx){const s=kn(t,e?this.QM.filter(n=>n.getIsUnderMouse()):this.QM,i?this.Nw:this.TC,this.Dw==="nearest-x"?(n,o)=>Math.abs(n.x-o.x):this.Dw==="nearest-y"?(n,o)=>Math.abs(n.y-o.y):(n,o)=>(n.x-o.x)**2+(n.y-o.y)**2);if(s!==void 0){const n=K(s[0],this.ks.us.dt,this.scale),o=s[1].uu();return Fi(n,this.scale,this.Wy(new $e,this,n.x,n.y,n).Zu(),this,o.getFillStyle())}}solveNearestFromScreen(t,e=this.Lx){return this.Hc(ei(t,this.Ji.us),!1,e)}}class Pc extends Fc{constructor(t,e,i,s,n,o,h,a,l,u,c,d,f){super(t,e,i,s,n,o,h,a,new _y,u,c),this.QM=[],this.xs="Point series",this.Hx=5,this.Aa=0,this.Ga=!1,this.Wa=!1,this.Ua=!1,this.e_=void 0,this.Ow=(g,y)=>{const p=g.Hc(y);if(p)return K(p,this.scale,this.ks.us.dt)},this.Un=f,this.$x=l,this.be=kt(u.pointSeriesFillStyle,d)}add(t){return super.add(t),this}Gd(){return Qe(this.be)}Cs(){return this.bs||this.$x}WM(t){}attach(t,e=!0,i=!1){return ge(t,this.qi,i,{fill:this.be}),super.attach(t,e)}Ie(t,e){t.cs(e),this.ks.Ss()}setPointFillStyle(t){this.be=typeof t=="function"?t(this.be):t;const e=this.be;for(let i=0;i<this.QM.length;i+=1)this.QM[i].Ce(e);return this.ks.Ss(),this}getPointFillStyle(){return this.be}setPointSize(t){this.Hx=t;for(let e=0;e<this.QM.length;e+=1)this.QM[e].q(t);return this.ks.Ss(),this}getPointSize(){return this.Hx}getPointShape(){return this.$x}setPointRotation(t){this.Aa=t;for(let e=0;e<this.QM.length;e+=1)this.QM[e].Nh(t);return this.ks.Ss(),this}getPointRotation(){return this.Aa}setIndividualPointSizeEnabled(t){this.Ga=t,t&&this.Ji.us.Nn(ot.bf);for(let e=0;e<this.QM.length;e+=1)this.QM[e].el(t);return this.ks.Ss(),this}getIndividualPointSizeEnabled(){return this.Ga}setIndividualPointRotationEnabled(t){this.Wa=t;for(let e=0;e<this.QM.length;e+=1)this.QM[e].hl(t);return this.ks.Ss(),this}getIndividualPointRotationEnabled(){return this.Wa}setIndividualPointValueEnabled(t){this.Ua=t;for(let e=0;e<this.QM.length;e+=1)this.QM[e].rl(t);return this.ks.Ss(),this}getIndividualPointValueEnabled(){return this.Ua}h_(t){let e=this.QM[0];e||(e=this.Ew()),e.nl(t,this.i_)}Ew(){const t=this.ks.bS(this.scale).il(this.$x).q(this.Hx).Nh(this.Aa).el(this.Ga).hl(this.Wa).rl(this.Ua).Ce(this.be).cs(this.getHighlight());return this.QM.push(t),this.ds(t),t}Hc(t,e){const i=kn(t,e?this.QM.filter(s=>s.getIsUnderMouse()):this.QM,this.Ow,pr);if(i!==void 0){const s=K(i[0],this.ks.us.dt,this.scale),n=i[1].Eh(),o=Ri(n)?i[0].color?new H({color:i[0].color}):new H({color:n.getFallbackColor()}):n;return Fi(s,this.scale,this.Wy(new $e,this,s.x,s.y,s).Zu(),this,o)}}solveNearestFromScreen(t){return this.Hc(ei(t,this.Ji.us),!1)}setCursorResultTableFormatter(t){return super.setCursorResultTableFormatter(t)}}class l1{constructor(t,e,i,s){this.IC=!1,this.D=new Xe,this.chart=i,this.PC=s,this.$s=t.$s,this.qs=s||Gg,this.DC=X.document.createElement("div"),this.DC.style.position="absolute",this.DC.style.pointerEvents="none",X.document.body.append(this.DC);const n=()=>{const o=i.engine.container.getBoundingClientRect();this.DC.style.left=`${o.left}px`,this.DC.style.top=`${o.top}px`,this.DC.style.width=`${o.width}px`,this.DC.style.height=`${o.height}px`};n(),i.onResize(n),this.BC(this.DC),this.LC(),this.RC(),this.EC(),this.zC(e),this.chart.VC().push(this)}BC(t){this.OC=X.document.createElement("div"),this.OC.style.pointerEvents="all",t.append(this.OC),this.NC=X.document.createElement("div"),this.GC=new fx(this.$s,this.qs,this.chart,this.NC),this.WC=X.document.createElement("table"),this.WC.style.borderSpacing="0",this.OC.appendChild(this.GC.oe()),this.OC.appendChild(this.NC),this.NC.appendChild(this.WC)}RC(){let t=0,e=0,i=0,s=0,n=!1;this.IC=!1,this.OC.onmousedown=o=>{o=o||X.event,i=o.clientX,s=o.clientY,n=!0,X.document.onmouseup=h=>{this.IC?this.OC.addEventListener("click",tt,!0):this.OC.removeEventListener("click",tt,!0),n=!1,this.IC=!1,X.document.onmouseup=null,X.document.onmousemove=null},X.document.onmousemove=h=>{h=h||X.event,n&&(t=i-h.clientX,e=s-h.clientY,i=h.clientX,s=h.clientY,this.IC=!0,this.OC.style.top=this.OC.offsetTop-e+"px",this.OC.style.left=this.OC.offsetLeft-t+"px",this.OC.style.removeProperty("right"),this.OC.style.removeProperty("bottom"))}}}EC(){let t=0,e=0,i=0,s=0,n=!1;this.OC.ontouchstart=o=>{o=o||X.event,i=o.touches[0].clientX,s=o.touches[0].clientY,n=!0,this.OC.ontouchend=()=>{n=!1,X.document.ontouchend=null,X.document.ontouchmove=null},this.OC.ontouchmove=h=>{n&&(tt(h),h=h||X.event,t=i-h.touches[0].clientX,e=s-h.touches[0].clientY,i=h.touches[0].clientX,s=h.touches[0].clientY,this.OC.style.top=this.OC.offsetTop-e+"px",this.OC.style.left=this.OC.offsetLeft-t+"px",this.OC.style.removeProperty("right"),this.OC.style.removeProperty("bottom"))}}}LC(){this.OC.style.setProperty("top","10px"),this.OC.style.setProperty("left","10px"),this.OC.style.position="absolute",this.OC.style.display="flex",this.OC.style.alignItems="flex-start",this.NC.style.setProperty("display","none")}removePositionProperty(){this.OC.style.removeProperty("top"),this.OC.style.removeProperty("left"),this.OC.style.removeProperty("bottom"),this.OC.style.removeProperty("right")}setPositionProperty(t){switch(this.removePositionProperty(),t){case Hn.BottomLeft:this.OC.style.setProperty("bottom","10px"),this.OC.style.setProperty("left","10px");break;case Hn.TopLeft:this.OC.style.setProperty("top","10px"),this.OC.style.setProperty("left","10px");break;case Hn.BottomRight:this.OC.style.setProperty("bottom","10px"),this.OC.style.setProperty("right","10px");break;case Hn.TopRight:default:this.OC.style.setProperty("top","10px"),this.OC.style.setProperty("right","10px")}}zC(t){for(let e=0;e<t.length;e+=1){const i=this.WC.insertRow();for(let s=0;s<t[e].length;s+=1){const n=i.insertCell(),o=t[e][s];typeof o!="object"?this.UC(o,n):this.addCustomButton(o,n)}}}UC(t,e){switch(t){case Hs.ZoomIn:this.YC(new rx(this.$s,this.chart,this.qs),e);break;case Hs.ZoomInX:this.YC(new nx(this.$s,this.chart,this.qs),e);break;case Hs.ZoomInY:this.YC(new ox(this.$s,this.chart,this.qs),e);break;case Hs.ZoomOut:this.YC(new hx(this.$s,this.chart,this.qs),e);break;case Hs.ZoomOutX:this.YC(new ax(this.$s,this.chart,this.qs),e);break;case Hs.ZoomOutY:this.YC(new lx(this.$s,this.chart,this.qs),e);break;case Hs.ZoomToFit:this.YC(new cx(this.$s,this.chart,this.qs),e);break;case Hs.ToggleAnimations:this.YC(new ux(this.$s,this.chart,this.qs),e);break;default:console.error(`No predefined button like "${Hs[t]}" exists.`)}}YC(t,e){e.rowSpan=t.Xs.rows,e.colSpan=t.Xs.columns,t.ne(e)}addCustomButton(t,e){const i=new dx(this.$s,t,this.chart);return this.YC(i,e),this}dispose(){this.DC.remove(),this.D.emit("dispose",this)}onDispose(t){return this.D.on("dispose",t)}offDispose(t){return this.D.off(t,"dispose")}}class By extends en{constructor(t,e,i,s,n,o,h,a,l,u,c,d){var f;super(t,e,i,s,n,o,h,a,l,u),this.xs="Point Line Area Series",this.Wy=u1,this.Lx=!1,this.HC=0,this.Un=d,this.Na=this.ks.dd(this.scale).Re(kt(this.qi.lineSeriesStrokeStyle,c)).ld(kt(this.qi.pointSeriesFillStyle,c)).ud(kt(this.qi.areaSeriesPositiveFillStyle,c)).$C(void 0).pd(7),this.Na.XC=((f=this.Un)===null||f===void 0?void 0:f.allowDataGrouping)!==!1,this.ds(this.Na)}setDataSet(t){var e;return t===((e=this.od)===null||e===void 0?void 0:e.Wt)||(t.yc&&this.Ji.us.Nn(ot.xf),t.vc&&this.Ji.us.Nn(ot.bf),this.od=uu(t,this.od,()=>[t.$c(()=>{this.HC+=1,this.HC>1&&this.Ji.us.Nn(ot.vf),this.Ji.us.Ss()}),t.Xc(()=>this.Ji.us.Ss())]),this.Na.ad(t),this.chart.us.Ss()),this}getDataSet(){return this.jC()}setStrokeStyle(t){return this.Na.Re(t),this.ks.Ss(),this}getStrokeStyle(){return this.Na.uu()}setAreaFillStyle(t){return this.Na.ud(t),this.ks.Ss(),this}getAreaFillStyle(){return this.Na.ZC()}setPointFillStyle(t){return this.Na.ld(t),this.ks.Ss(),this}getPointFillStyle(){return this.Na.yd()}setPointSize(t){return this.Na.pd(t),this.ks.Ss(),this}getPointSize(){return this.Na.QC()}setPointShape(t){return this.Na.fd(t),this.ks.Ss(),this}getPointShape(){return this.Na.Ad()}setPointRotation(t){return this.Na.gd(t),this.ks.Ss(),this}getPointRotation(){return this.Na.md()}setPointAlignment(t){return this.Na.JC(t),this.Ji.us.Ss(),this}getPointAlignment(){return this.Na.KC()}setCurvePreprocessing(t){return this.Na.$C(t),this.ks.Ss(),this}getCurvePreprocessing(){return this.Na.qC()}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}setCursorInterpolationEnabled(t){return this.Lx=t,this.ks.us.Ss(),this}getCursorInterpolationEnabled(){return this.Lx}add(t){return this.jC().add(t),this.ks.Ss(),this}addArraysXY(t,e){return this.jC().addArraysXY(t,e),this.ks.Ss(),this}appendJSON(t,e){return this.jC().appendJSON(t,e),this.ks.Ss(),this}appendSample(t){return this.jC().appendSample(t),this.ks.Ss(),this}appendSamples(t){return this.jC().appendSamples(t),this.ks.Ss(),this}fill(t){return this.jC().fill(t),this.ks.Ss(),this}setSamples(t){return this.jC().setSamples(t),this.ks.Ss(),this}alterSamples(t,e){return this.jC().alterSamples(t,e),this.ks.Ss(),this}alterSamplesByID(t,e){return this.jC().alterSamplesByID(t,e),this.ks.Ss(),this}getSampleCount(){return this.jC().getSampleCount()}getNextSampleIndex(){return this.jC().getNextSampleIndex()}clear(){return this.jC().clear(),this.ks.Ss(),this}setMaxSampleCount(t){return this.jC().setMaxSampleCount(t),this.ks.Ss(),this}getMaxSampleCount(){return this.jC().getMaxSampleCount()}readBack(t){return this.jC().readBack(t)}onMaxSampleCountExceeded(t){return this.jC().onMaxSampleCountExceeded(t)}offMaxSampleCountExceeded(t){return this.jC().offMaxSampleCountExceeded(t)}tk(){return this.jC()}Gd(){return Qe(this.getPointFillStyle())||Qe(this.getStrokeStyle().getFillStyle())||Qe(this.getAreaFillStyle())}Kp(){var t;const e=(t=this.od)===null||t===void 0?void 0:t.Wt;return this.getAutoScrollingEnabled()&&e!==void 0&&e.uc>0}WM(t){}getXMax(){return this.Na.bt()}getXMin(){return this.Na.vt()}getYMax(){return this.Na.Mt()}getYMin(){return this.Na.xt()}br(){return{x:this.Na.vl(),y:this.Na.bl()}}jC(){if(!this.od){const t=new xc(this.Un);t.yc&&this.Ji.us.Nn(ot.xf),t.vc&&this.Ji.us.Nn(ot.bf),this.od=uu(t,this.od,()=>[t.$c(()=>{this.HC+=1,this.HC>1&&this.Ji.us.Nn(ot.vf),this.Ji.us.Ss()}),t.Xc(()=>{this.Ji.us.Ss()})]),this.Na.ad(t)}return this.od.Wt}attach(t,e=!0,i=!1){super.attach(t,e,i);const s=this.getPointFillStyle(),n=this.getAreaFillStyle();return ge(t,this.qi,i,{stroke:this.getStrokeStyle(),fill:s!==ft?s:n}),super.attach(t,e)}Cs(){return this.bs||this.getPointShape()}Ie(t,e){t.cs(e),this.ks.Ss()}Hc(t,e,i=this.Lx){this.getCurvePreprocessing()!==void 0&&(i=!1);const s=this.tk(),n=K(t,this.Ji.us.dt,this.scale),o=!e||this.Na.getIsUnderMouse()?s.Hc(n,i,this.scale,this.Ji.pixelScale):void 0;if(o!==void 0){const h=[this.getStrokeStyle().getFillStyle(),this.getPointFillStyle(),this.getAreaFillStyle()];return Fi(o,this.scale,this.Wy(new $e,this,o).Zu(),this,h.filter(a=>!cg(a))[0])}}solveNearestFromScreen(t,e=!1){return this.Hc(ei(t,this.Ji.us),!1,e)}}const u1=(r,t,e)=>{const i=t.getIcon();return i?r.addRow(i,t.getName()):r.addRow(t.getName()),r.addRow("X","",t.axisX.formatValue(e.x)).addRow("Y","",t.axisY.formatValue(e.y)),e.lookupValue!==void 0&&r.addRow("Value","",e.lookupValue.toFixed(1)),r},ff=(...r)=>(t,e)=>r.forEach(i=>i.forEach(s=>{s.axis.dt.q(t),s.axis.rg.q(e)})),gf=N(10,10);var cr;(function(r){r[r.Top=0]="Top",r[r.Bottom=1]="Bottom",r[r.Left=2]="Left",r[r.Right=3]="Right"})(cr||(cr={}));const c1=new Set([cr.Top,cr.Bottom,cr.Left,cr.Right]),sa=r=>r.setStopped(!0),d1=r=>r.getChartInteractionFitByDrag()?r.fit(!0):void 0,vs=(r,t)=>{const e=r.kh.type==="linear-highPrecision"||t.kh.type==="linear-highPrecision",i=r.kh.type==="logarithmic"||t.kh.type==="logarithmic";if(e&&i){const s=`Invalid Axis combination | 'logarithmic' can't be combined with 'linear-highPrecision' (x: ${r.kh.type}, y: ${t.kh.type})`;throw new Error(s)}};var yn,th,Au;(function(r){r[r.seriesBackground=0]="seriesBackground",r[r.gridLine0=1]="gridLine0",r[r.gridLine1=2]="gridLine1",r[r.gridLine2=3]="gridLine2",r[r.highlightersBelow=4]="highlightersBelow"})(yn||(yn={})),function(r){r[r.plotting=0]="plotting",r[r.highlightersAbove=1]="highlightersAbove",r[r.fg=2]="fg"}(th||(th={}));class Ic extends Dh{constructor(t,e,i,s,n,o,h){super(t,e,i,e.vm("chartXY bg",0),s,e.us.qi.chartXYBackgroundFillStyle,e.us.qi.chartXYBackgroundStrokeStyle,e.us.qi.chartXYTitleFont,e.us.qi.chartXYTitleFillStyle,h),this.ik=this.sm.d2({scaleXYConstructor:Gt}),this.Vg=[],this.Og=[],this.Gg=[],this.Ng=[],this.sk=new Map,this.ek=!0,this.hk=!0,this.rk=!0,this.Rf=2,this.nk=!0,this.ak=!0,this.lk=[],this.uk=this.xm.ke(this.ik).Ce(ft).we(it).setMouseInteractions(!1),this.ck=this.xm.Ee(this.ik).Re(it).setMouseInteractions(!1),this.dk=this.xm.Ee(this.ik).Re(it).setMouseInteractions(!1),this.fk=this.qi.chartXYZoomingRectangleFillStyle,this.Ak=this.qi.chartXYZoomingRectangleStrokeStyle,this.gk=this.qi.chartXYFittingRectangleFillStyle,this.mk=this.qi.chartXYFittingRectangleStrokeStyle,this.yk=It.Default,this.pk=It.Move,this.Sk=It.ZoomIn,this.vk=It.Default,this.bk=void 0,this.xk=ra,this.GM=0,this.Gy=he.snapToClosest,this.Mk=ff(this.Og,this.Vg),this._k=ff(this.Gg,this.Ng),this.wk=(l,u,c,d,f)=>{this.Mk(d,f),this._k(f,d),this.ik.q(d,f),this.us.Ss()},this.Ck=(l,u)=>{this.sk.set(l,u)},this.qA=l=>{const u=this.Og.findIndex(g=>g.axis===l),c=this.Vg.findIndex(g=>g.axis===l),d=this.Gg.findIndex(g=>g.axis===l),f=this.Ng.findIndex(g=>g.axis===l);u>=0&&this.Og.splice(u,1),c>=0&&this.Vg.splice(c,1),d>=0&&this.Gg.splice(d,1),f>=0&&this.Ng.splice(f,1),this.sk.delete(l),this.us.Ss()},this.addAreaSeries=l=>{const u=(l==null?void 0:l.axisX)||(l==null?void 0:l.xAxis)||this.getDefaultAxisX(),c=(l==null?void 0:l.axisY)||(l==null?void 0:l.yAxis)||this.getDefaultAxisY();vs(u,c);const d=l&&l.baseline?l.baseline:0,f=new(l&&l.type?l.type:ZA.Positive)(this,this._S,this.Rb,u,c,this.kk(u),this.kk(c),this.nm,d,this.qi,this.us.es,(l==null?void 0:l.automaticColorIndex)!==void 0?l.automaticColorIndex:this.xS.length);return this.PS(f),f},this.addAreaRangeSeries=l=>{const u=(l==null?void 0:l.axisX)||(l==null?void 0:l.xAxis)||this.getDefaultAxisX(),c=(l==null?void 0:l.axisY)||(l==null?void 0:l.yAxis)||this.getDefaultAxisY();vs(u,c);const d=new Iy(this,this._S,this.Rb,u,c,this.kk(u),this.kk(c),this.nm,this.qi,this.us.es,(l==null?void 0:l.automaticColorIndex)!==void 0?l.automaticColorIndex:this.xS.length);return this.PS(d),d},this.Tk=!1,this.Fk=!1,this.UM=()=>{(this.ek||this.hk)&&(this.bk=this.engine.setMouseStyle(this.yk))},this.YM=()=>{this.Tk=!1,this.engine.restoreMouseStyle(this.bk)},this.HM=(l,u,c)=>{var d,f;const g=qt((d=this.cA.Yn)===null||d===void 0?void 0:d.chartXYRectangleZoomFitMouseButton,0),y=qt((f=this.cA.Yn)===null||f===void 0?void 0:f.chartXYPanMouseButton,2);this.engine.restoreMouseStyle(this.bk);const p=this.xm.us.Pe(u.clientX,u.clientY);c===g&&(this.ek||this.hk)?(this.Ik(l,p),tt(u)):c===y&&this.nk&&(this.bk=this.engine.setMouseStyle(this.pk),this.Fk=!0,tt(u))},this.eS=(l,u,c,d,f)=>{var g,y;const p=N(u.clientX,u.clientY),x=qt((g=this.cA.Yn)===null||g===void 0?void 0:g.chartXYRectangleZoomFitMouseButton,0),A=qt((y=this.cA.Yn)===null||y===void 0?void 0:y.chartXYPanMouseButton,2);c===x&&(this.ek||this.hk)?(this.Pk(l,d,p),tt(u)):c===A&&this.nk&&(this.Dk(St(f,-1)),tt(u)),this.us.Ss()},this.$M=(l,u,c,d)=>{var f,g;const y=qt((f=this.cA.Yn)===null||f===void 0?void 0:f.chartXYRectangleZoomFitMouseButton,0),p=qt((g=this.cA.Yn)===null||g===void 0?void 0:g.chartXYPanMouseButton,2);if(c===y&&(this.ek||this.hk)){const x=N(u.clientX,u.clientY);this.Bk(l,d,x),tt(u)}else c===p&&this.nk&&tt(u);this.engine.restoreMouseStyle(this.bk),this.FS.getIsUnderMouse()&&(this.bk=this.engine.setMouseStyle(this.yk)),this.Tk=!1,this.Fk=!1},this.sS=(l,u)=>{if(this.rk){const c=this.xm.us.Pe(u.clientX,u.clientY);this.Lk(c,N(Wr(u),Wr(u))),tt(u)}},this.Rk=(l,u,c,d)=>{},this.Ek=(l,u,c,d,f,g)=>{if(this.nk){const y=N(-(d.x+f.x)/2,-(d.y+f.y)/2);this.Dk(y),tt(g),this.Fk=!0}if(this.rk){const y=this.engine.clientLocation2Engine(u.x,u.y),p=this.engine.clientLocation2Engine(c.x,c.y),x=Ut(N(Math.abs(y.x-d.x-(p.x-f.x)),Math.abs(y.y-d.y-(p.y-f.y))),N(Math.abs(y.x-p.x),Math.abs(y.y-p.y)));this.forEachAxisX(A=>{A.getChartInteractionZoomByWheel()&&A.St(A.dt.mi(A.getInterval().start,-x.x),A.dt.mi(A.getInterval().end,x.x),!1,!0,"interactionZoom")}),this.forEachAxisY(A=>{A.getChartInteractionZoomByWheel()&&A.St(A.dt.mi(A.getInterval().start,-x.y),A.dt.mi(A.getInterval().end,x.y),!1,!0,"interactionZoom")}),tt(g),this.Tk=!0}},this.zk=(l,u,c,d)=>{this.Fk=!1,this.Tk=!1},this.Vk=(l,u,c)=>{(this.hk||this.ek)&&(this.Ik(l,u),tt(c))},this.Ok=(l,u,c,d,f)=>{(this.hk||this.ek)&&(this.Pk(l,u,c),tt(f))},this.Nk=(l,u,c,d)=>{(this.hk||this.ek)&&(this.Bk(l,u,c),tt(d))},this.us.Nn(ot.gf),this.setPadding({right:24}),this.Gk=e.ob("chartXY series bg",yn.seriesBackground),this.Wk=[yn.gridLine0,yn.gridLine1,yn.gridLine2].map(l=>e.Uk(`chartXY gridline #${l}`,l)),this.JA=e.Uk("chartXY highlighters below",yn.highlightersBelow),this.Rb=e.$y("chartXY plotting",th.plotting),this.KA=e.$y("chartXY highlighters above",th.highlightersAbove),this.bA=e.$y("chartXY fg",th.fg),this.ik.x.J(0,this.uiScale.x.getCellSize()-(this.Xt.left+this.Xt.right+this.ya.left+this.ya.right)),this.ik.y.J(0,this.uiScale.y.getCellSize()-(this.Xt.bottom+this.Xt.top+this.ya.bottom+this.ya.top)),this.ik.q(this.uiScale.oi().x,this.uiScale.oi().y),this.FS=this.Gk.ke(this.ik).Ce(this.qi.chartXYSeriesBackgroundFillStyle).we(it),this.IS=this.bA.ke(this.ik).Ce(ft).we(this.qi.chartXYSeriesBackgroundStrokeStyle).setMouseInteractions(!1),super.TS(this.FS,this.IS),this.setSeriesBackgroundEffect(!1),this.jy=e.Zy();const a=qt(o?o.autoCursorBuilder:void 0,PA);this.Pm=a.uy(this.jy,this.ik,this.ik,this.qi),oi.Dm(this),this.LS((l,u)=>{oi.Bm(this,u)}),this.addAxisX(o&&o.defaultAxisX),this.addAxisY(o&&o.defaultAxisY),this.onResize(this.wk),this._m.Rh("ChartXY"),this.hS=Ci(new ds(this.Vk,this.Ok,this.Nk,1),new cc(this.Rk,this.Ek,this.zk)),this.onSeriesBackgroundMouseEnter(this.UM),this.onSeriesBackgroundMouseLeave(this.YM),this.onSeriesBackgroundMouseWheel(this.sS),this.onSeriesBackgroundMouseDragStart(this.HM),this.onSeriesBackgroundMouseDrag(this.eS),this.onSeriesBackgroundMouseDragStop(this.$M),this.onSeriesBackgroundTouchStart(this.hS.onTouchStart),this.onSeriesBackgroundTouchMove(this.hS.onTouchMove),this.onSeriesBackgroundTouchEnd(this.hS.onTouchEnd),this.setAnimationsEnabled((o==null?void 0:o.disableAnimations)!==!0&&(o==null?void 0:o.animationsEnabled)!==!1),this.Sm(n,this.ik)}get coordsAxis(){return{x:this.getDefaultAxisX(),y:this.getDefaultAxisY()}}getSeries(){return this.xS}setAutoCursor(t){return this.Pm&&t(this.Pm),this.us.Ss(),this}getAutoCursor(){return this.Pm}setAutoCursorMode(t){return this.Gy=t,this.us.Ss(),this}getAutoCursorMode(){return this.Gy}solveNearest(t){const e=t||this.us.On();if(e)return oi.Hc(this,ei(e,this.us),this.xS)}getMinimumSize(){const t={x:0,y:0};t.x+=this.Xt.left+this.Xt.right+this.ya.left+this.ya.right,t.y+=this.Xt.top+this.Xt.bottom+this.ya.top+this.ya.bottom;const e=this._m.Ps().jc(),i=qn(Yl(this.xk||ra),this.bm);return t.x+=e.x+i.left+i.right,t.y+=e.y+i.top+i.bottom,this.Yk&&(t.x+=this.Yk.left,t.x+=this.Yk.right,t.y+=this.Yk.top,t.y+=this.Yk.bottom),t.x+=gf.x,t.y+=gf.y,t}addChartMarkerXY(t=IA,e,i){const s=this.nm(),n=new Cy(s,this.uiScale,e||this.getDefaultAxisX(),i||this.getDefaultAxisY(),t,this.tm(s),this.qi);return this.gm(n),n}addAxisX(t){var e,i;const{opposite:s,type:n}=pu(t);let o;o=n.type==="linear"?this.sm.d1({dimension:"x",scale1DConstructor:Hi}):n.type==="linear-highPrecision"?this.sm.d1({dimension:"x",scale1DConstructor:Hi}).Mi():this.sm.d1({dimension:"x",scale1DConstructor:Zr}).Ai(n.base),o.q(this.ik.x.oi());const h=s?this.Vg:this.Og,a=new ka(this.Wk,this.bA,this.xm,this.JA,this.KA,this.us.es,o,this.ik.y,(l=()=>a._g(),{...Ta,...h1(l)}),this,s?100:0,this.qA,this.Ck,this.qi,this.th,n);var l;let u,c;return(t==null?void 0:t.iParallel)===void 0&&(t==null?void 0:t.iStack)===void 0?(u=h.reduce((d,f)=>Math.max(d,f.iParallel+1),0),c=0):(u=(e=t.iParallel)!==null&&e!==void 0?e:0,c=(i=t.iStack)!==null&&i!==void 0?i:0),h.push({axis:a,iStack:c,iParallel:u}),this.us.Ss(),a}addAxisY(t){var e,i;const{opposite:s,type:n}=pu(t);let o;o=n.type==="linear"?this.sm.d1({dimension:"y",scale1DConstructor:Hi}):n.type==="linear-highPrecision"?this.sm.d1({dimension:"y",scale1DConstructor:Hi}).Mi():this.sm.d1({dimension:"y",scale1DConstructor:Zr}).Ai(n.base),o.q(this.ik.y.oi());const h=s?this.Ng:this.Gg,a=new ka(this.Wk,this.bA,this.xm,this.JA,this.KA,this.us.es,o,this.ik.x,(l=()=>a._g(),{...vc,...a1(l)}),this,s?100:0,this.qA,this.Ck,this.qi,this.th,n);var l;let u,c;return(t==null?void 0:t.iParallel)===void 0&&(t==null?void 0:t.iStack)===void 0?(u=h.reduce((d,f)=>Math.max(d,f.iParallel+1),0),c=0):(u=(e=t.iParallel)!==null&&e!==void 0?e:0,c=(i=t.iStack)!==null&&i!==void 0?i:0),h.push({axis:a,iParallel:u,iStack:c}),this.us.Ss(),a}swapAxes(t,e){const i=[this.Og,this.Gg,this.Ng,this.Vg],s=i.find(u=>u.find(c=>c.axis===t)!==void 0),n=i.find(u=>u.find(c=>c.axis===e)!==void 0);if(!s||!n)return this;if(s!==n)throw new Error("LightningChart JS ChartXY.swapAxes does not support swapping Axes that are on different sides.");const o=s.find(u=>u.axis===t),h=s.find(u=>u.axis===e);if(!o||!h)return this;const a=o.iParallel,l=o.iStack;return o.iParallel=h.iParallel,o.iStack=h.iStack,h.iParallel=a,h.iStack=l,this.us.Ss(),this}dispose(){return this.Pm.dispose(),this.Gk.W(),this.Rb.W(),this.bA.W(),this.Wk.forEach(t=>t.W()),this.KA.W(),this.JA.W(),this.jy.W(),this.VC().forEach(t=>t.dispose()),po(this.ik),this.Og.slice().forEach(t=>t.axis.dispose()),this.Gg.slice().forEach(t=>t.axis.dispose()),this.Ng.slice().forEach(t=>t.axis.dispose()),this.Vg.slice().forEach(t=>t.axis.dispose()),this.xS.slice().forEach(t=>{t.dispose()}),super.dispose()}getDefaultAxisX(){var t;return(t=[...this.Og,...this.Vg].find(e=>e.axis.getVisible()))===null||t===void 0?void 0:t.axis}get axisX(){return this.getDefaultAxisX()}get xAxis(){return this.getDefaultAxisX()}getDefaultAxisY(){var t;return(t=[...this.Gg,...this.Ng].find(e=>e.axis.getVisible()))===null||t===void 0?void 0:t.axis}get axisY(){return this.getDefaultAxisY()}get yAxis(){return this.getDefaultAxisY()}getDefaultAxes(){return[this.getDefaultAxisX(),this.getDefaultAxisY()]}getAxes(...t){const e=t&&t.length>0?new Set(t):c1;return Sa(Array.from(e).map(i=>{switch(i){default:case cr.Top:return this.Vg.map(s=>s.axis);case cr.Bottom:return this.Og.map(s=>s.axis);case cr.Left:return this.Gg.map(s=>s.axis);case cr.Right:return this.Ng.map(s=>s.axis)}}))}Hk(t){let e;return this.forEachAxisX(i=>{e=t===i?"x":e}),this.forEachAxisY(i=>{e=t===i?"y":e}),e}forEachAxisX(t){this.Og.forEach((e,i,s)=>t(e.axis,i,s.map(n=>n.axis))),this.Vg.forEach((e,i,s)=>t(e.axis,i,s.map(n=>n.axis)))}forEachAxisY(t){this.Gg.forEach((e,i,s)=>t(e.axis,i,s.map(n=>n.axis))),this.Ng.forEach((e,i,s)=>t(e.axis,i,s.map(n=>n.axis)))}setTitlePosition(t){return this.xk=t,this.us.Ss(),this}getTitlePosition(){return this.xk}$k(t,e,i,s){const n=this.xk||ra;let o,h=qn(Yl(n),this.bm);this.getTitleFillStyle()===ft||this.getTitle().length===0?(o={x:0,y:0},h={left:0,top:0,right:0,bottom:0}):o=this._m.Ps().jc();const a=Math.abs(s)+this.ya.bottom+this.Xt.bottom,l=Math.abs(i)+this.ya.top+this.Xt.top,u={left:Math.abs(t)+this.ya.left+this.Xt.left,right:Math.abs(e)+this.ya.right+this.Xt.right,top:l,bottom:a},c=this.uiScale.Wi(),{horizontalAlignment:d,verticalAlignment:f,position:g,marginsWithTitle:y}=yf(n,c,u,o,h,this.ya);return this._m.Fe(g).Da(d).La(f),y}Te(t){super.Te(t);for(const v of this.xS)v.oS();for(const v of this.xS)v.Te();const e=this.Gg.map(v=>v.axis.Mr().Ps()),i=this.Og.map(v=>v.axis.Mr().Ps()),s=this.Vg.map(v=>v.axis.Mr().Ps()),n=this.Ng.map(v=>v.axis.Mr().Ps());let o=!1;this.forEachAxis(v=>{(v.kr()||v.Tr())&&(o=!0)});const h=this.Tk||this.Fk||!this.ak&&o;oi.Im(this,this.FS.getIsUnderMouse(),h,this.xS,v=>oi.Hc(this,v,this.xS),(v,w)=>v.Hc(w,!0));const a=na(this.Gg,e),l=na(this.Og,i),u=na(this.Vg,s),c=na(this.Ng,n),d=this.$k(a.thicknessTotal,c.thicknessTotal,u.thicknessTotal,l.thicknessTotal),f=this.ik.x.getCellSize()-(d.left+d.right),g=this.ik.y.getCellSize()-(d.bottom+d.top),y=[d.left,d.right],p=[d.bottom,d.top];this.ik.x.J(0,f),this.ik.y.J(0,g),this.ik.x.si(y),this.ik.y.si(p);const x=(v,w,E,C)=>{let k=0;v.groups.forEach(F=>{let m=0;const S=F.stacks.reduce((T,z)=>Math.max(T,z.kg),0),b=F.stacks.reduce((T,z)=>T+(z.axis.getVisible()?z.axis.iA+z.axis.sA:0),0),M=F.stacks.reduce((T,z)=>T+(z.axis.getVisible()&&"pixels"in z.axis.zd?z.axis.zd.pixels:0),0),R=w-b-M;F.stacks.forEach(T=>{const z=T.axis,P=z.getVisible(),_=Math.max(w-m,0),V=Math.min(P?"pixels"in z.zd?z.zd.pixels:z.zd.relative/F.sumRelativeSize*R:0,_),B=P?E[0]+m+z.iA:0,I=P?E[1]+(w-m)-V-z.iA:0;z.dt.si([B,I]),z.Te({kg:S,Tg:T.Tg,Pg:V,Xk:m,zg:S+T.Tg,Bg:k}),P&&(m+=V+z.iA+z.sA)}),k+=C*F.thicknessMax})};x(a,g,p,-1),x(c,g,p,1),x(l,f,y,-1),x(u,f,y,1),this.Yk={left:a.thicknessTotal,top:u.thicknessTotal,right:c.thicknessTotal,bottom:l.thicknessTotal},this.FS.Fe(N(0,0)).q(N(f,g)),this.IS.Fe(N(0,0)).q(N(f,g));const A=ug(this.ik.x.ei(),this.ik.y.ei(),this.ik.x.ri(),this.ik.y.ri());this.Rb.qv(A),this.JA.qv(A),this.KA.qv(A),this.Zg&&this.Zg(),this.Og.forEach(v=>v.axis.Wg()),this.Vg.forEach(v=>v.axis.Wg()),this.Gg.forEach(v=>v.axis.Wg()),this.Ng.forEach(v=>v.axis.Wg()),super.pm();for(const v of this.xS)v.dp()}j(){for(let t=0;t<this.Og.length;t+=1)this.Og[t].axis.j();for(let t=0;t<this.Vg.length;t+=1)this.Vg[t].axis.j();for(let t=0;t<this.Gg.length;t+=1)this.Gg[t].axis.j();for(let t=0;t<this.Ng.length;t+=1)this.Ng[t].axis.j();return super.j()}kk(t){if(this.sk.has(t))return this.sk.get(t);throw new Error("No attach handler for axis Make sure that passed axes definitely belong to this chart and that they haven't been disposed of.")}addLineSeries(t){const e=(t==null?void 0:t.axisX)||(t==null?void 0:t.xAxis)||this.getDefaultAxisX(),i=(t==null?void 0:t.axisY)||(t==null?void 0:t.yAxis)||this.getDefaultAxisY();vs(e,i);let s=wi.freeform;t&&t.dataPattern&&(s=t.dataPattern.pattern==="ProgressiveX"?wi.horizontalProgressive:t.dataPattern.pattern==="ProgressiveY"?wi.verticalProgressive:t.dataPattern.pattern==="RegressiveX"?wi.horizontalRegressive:t.dataPattern.pattern==="RegressiveY"?wi.verticalRegressive:wi.freeform);const n=new Ko(this,this._S,this.Rb,e,i,this.kk(e),this.kk(i),this.nm,s,this.qi,this.us.es,Qh(t&&t.dataPattern),(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length,t);return this.PS(n),n}addPointLineAreaSeries(t){const e=(t==null?void 0:t.axisX)||(t==null?void 0:t.xAxis)||this.getDefaultAxisX(),i=(t==null?void 0:t.axisY)||(t==null?void 0:t.yAxis)||this.getDefaultAxisY();vs(e,i);const s=new By(this,this._S,this.Rb,e,i,this.kk(e),this.kk(i),this.nm,this.qi,this.us.es,(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length,t);return this.PS(s),s}addPointSeries(t){const e=(t==null?void 0:t.axisX)||(t==null?void 0:t.xAxis)||this.getDefaultAxisX(),i=(t==null?void 0:t.axisY)||(t==null?void 0:t.yAxis)||this.getDefaultAxisY();vs(e,i);const s=t&&t.pointShape&&Object.values(ae).includes(t.pointShape)?typeof t.pointShape=="string"?ae[t.pointShape]:t.pointShape:ae.Square,n=new Pc(this,this._S,this.Rb,e,i,this.kk(e),this.kk(i),this.nm,s,this.qi,this.us.es,(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length,t);return this.PS(n),n}addPointLineSeries(t){const e=(t==null?void 0:t.axisX)||(t==null?void 0:t.xAxis)||this.getDefaultAxisX(),i=(t==null?void 0:t.axisY)||(t==null?void 0:t.yAxis)||this.getDefaultAxisY();vs(e,i);const s=t&&t.pointShape&&Object.values(ae).includes(t.pointShape)?typeof t.pointShape=="string"?ae[t.pointShape]:t.pointShape:ae.Square;let n=wi.freeform;t&&t.dataPattern&&(n=t.dataPattern.pattern==="ProgressiveX"?wi.horizontalProgressive:t.dataPattern.pattern==="ProgressiveY"?wi.verticalProgressive:t.dataPattern.pattern==="RegressiveX"?wi.horizontalRegressive:t.dataPattern.pattern==="RegressiveY"?wi.verticalRegressive:wi.freeform);const o=new Nh(this,this._S,this.Rb,e,i,this.kk(e),this.kk(i),this.nm,n,s,this.qi,this.us.es,Qh(t&&t.dataPattern),(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length,t);return this.PS(o),o}addStepSeries(t){const e=(t==null?void 0:t.axisX)||(t==null?void 0:t.xAxis)||this.getDefaultAxisX(),i=(t==null?void 0:t.axisY)||(t==null?void 0:t.yAxis)||this.getDefaultAxisY();vs(e,i);const s=t&&t.pointShape?t.pointShape:ae.Square,n=t&&t.mode?t.mode:br.before,o=new Ly(this,this._S,this.Rb,e,i,this.kk(e),this.kk(i),this.nm,s,n,this.qi,this.us.es,Qh(t&&t.dataPattern),(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length,t);return this.PS(o),o}addSplineSeries(t){const e=(t==null?void 0:t.axisX)||(t==null?void 0:t.xAxis)||this.getDefaultAxisX(),i=(t==null?void 0:t.axisY)||(t==null?void 0:t.yAxis)||this.getDefaultAxisY();vs(e,i);const s=t&&t.pointShape?t.pointShape:ae.Square;let n=wi.freeform;t&&t.dataPattern&&(n=t.dataPattern.pattern==="ProgressiveX"?wi.horizontalProgressive:t.dataPattern.pattern==="RegressiveX"?wi.horizontalRegressive:wi.freeform);const o=new Vy(this,this._S,this.Rb,e,i,this.kk(e),this.kk(i),this.nm,n,s,this.qi,this.us.es,Qh(t&&t.dataPattern),(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length,t);return this.PS(o),o}addRectangleSeries(t){const e=(t==null?void 0:t.axisX)||(t==null?void 0:t.xAxis)||this.getDefaultAxisX(),i=(t==null?void 0:t.axisY)||(t==null?void 0:t.yAxis)||this.getDefaultAxisY();vs(e,i);const s=new YA(this,this._S,this.Rb,e,i,this.kk(e),this.kk(i),this.nm,this.qi,this.us.es,(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length);return this.PS(s),s}addPolygonSeries(t){const e=(t==null?void 0:t.axisX)||(t==null?void 0:t.xAxis)||this.getDefaultAxisX(),i=(t==null?void 0:t.axisY)||(t==null?void 0:t.yAxis)||this.getDefaultAxisY(),s=new OA(this,this._S,this.Rb,e,i,this.kk(e),this.kk(i),this.nm,this.qi,this.us.es,(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length);return this.PS(s),s}addSegmentSeries(t){const e=(t==null?void 0:t.axisX)||(t==null?void 0:t.xAxis)||this.getDefaultAxisX(),i=(t==null?void 0:t.axisY)||(t==null?void 0:t.yAxis)||this.getDefaultAxisY();vs(e,i);const s=new WA(this,this._S,this.Rb,e,i,this.kk(e),this.kk(i),this.nm,this.qi,this.us.es,(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length);return this.PS(s),s}addEllipseSeries(t){const e=(t==null?void 0:t.axisX)||(t==null?void 0:t.xAxis)||this.getDefaultAxisX(),i=(t==null?void 0:t.axisY)||(t==null?void 0:t.yAxis)||this.getDefaultAxisY();vs(e,i);const s=new GA(this,this._S,this.Rb,e,i,this.kk(e),this.kk(i),this.nm,this.qi,this.us.es,(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length);return this.PS(s),s}addBoxSeries(t){const e=(t==null?void 0:t.axisX)||(t==null?void 0:t.xAxis)||this.getDefaultAxisX(),i=(t==null?void 0:t.axisY)||(t==null?void 0:t.yAxis)||this.getDefaultAxisY();vs(e,i);const s=t&&t.dimensionStrategy?t.dimensionStrategy:Ta,n=new UA(this,this._S,this.Rb,e,i,this.kk(e),this.kk(i),this.nm,s,this.qi,this.us.es,(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length);return this.PS(n),n}addHeatmapGridSeries(t){const e=t.xAxis?t.xAxis:this.getDefaultAxisX(),i=t.yAxis?t.yAxis:this.getDefaultAxisY();let s;if(t.heatmapDataType!==void 0&&t.heatmapDataType!=="intensity")throw new Error(`Unsupported Heatmap Grid heatmapDataType: '${t.heatmapDataType}'`);return s=new HA(this,this._S,this.Rb,e,i,this.kk(e),this.kk(i),this.nm,t,this.qi,this.us.es,(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length),this.PS(s),s}addHeatmapScrollingGridSeries(t){const e=t.xAxis?t.xAxis:this.getDefaultAxisX(),i=t.yAxis?t.yAxis:this.getDefaultAxisY();let s;if(t.heatmapDataType!==void 0&&t.heatmapDataType!=="intensity")throw new Error(`Unsupported Heatmap Grid heatmapDataType: '${t.heatmapDataType}'`);return s=new $A(this,this._S,this.Rb,e,i,this.kk(e),this.kk(i),this.nm,t,this.qi,this.us.es,(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length),this.PS(s),s}addOHLCSeries(t){const e=(t==null?void 0:t.axisX)||(t==null?void 0:t.xAxis)||this.getDefaultAxisX(),i=(t==null?void 0:t.axisY)||(t==null?void 0:t.yAxis)||this.getDefaultAxisY();vs(e,i);const s=new(t&&t.type?t.type:o1.Candlesticks)(this,this._S,this.Rb,e,i,this.kk(e),this.kk(i),this.nm,this.qi,this.us.es);return this.PS(s),s}addOnScreenMenu(t,e){return new l1(this.cA,t,this,e)}setMouseBackgroundStyle(t=It.Default){return this.yk=t,this}setMouseZoomStyle(t=It.ZoomIn){return this.Sk=t,this}setMouseFitStyle(t=It.Default){return this.vk=t,this}setMousePanStyle(t=It.Move){return this.pk=t,this}setMouseInteractions(t){return this.setMouseInteractionRectangleZoom(t).setMouseInteractionRectangleFit(t).setMouseInteractionWheelZoom(t).setMouseInteractionPan(t)}setMouseInteractionRectangleZoom(t){return this.ek=t,this}getMouseInteractionRectangleZoom(){return this.ek}setMouseInteractionRectangleFit(t){return this.hk=t,this}getMouseInteractionRectangleFit(){return this.hk}setMouseInteractionPan(t){return this.nk=t,this}getMouseInteractionPan(){return this.nk}setMouseInteractionWheelZoom(t){return this.rk=t,this}getMouseInteractionWheelZoom(){return this.rk}setZoomingRectangleFillStyle(t){return this.fk=typeof t=="function"?t(this.fk):t,this.us.Ss(),this}getZoomingRectangleFillStyle(){return this.fk}setZoomingRectangleStrokeStyle(t){return this.Ak=typeof t=="function"?t(this.Ak):t,this.us.Ss(),this}getZoomingRectangleStrokeStyle(){return this.Ak}setFittingRectangleFillStyle(t){return this.gk=typeof t=="function"?t(this.gk):t,this.us.Ss(),this}getFittingRectangleFillStyle(){return this.gk}setFittingRectangleStrokeStyle(t){return this.mk=typeof t=="function"?t(this.mk):t,this.us.Ss(),this}getFittingRectangleStrokeStyle(){return this.mk}addLegendBox(t,e){const i=super.addLegendBox(t,e);if(e===void 0||e===this.uiScale)if(t===void 0||t.getAlignment()==="vertical")i.setOrigin(lo.RightCenter).setPosition({x:this.uiScale.x.ut(this.uiScale.x.hi()-this.ya.right),y:ho(this.ik.y.ut(this.ik.y.ei()+this.ik.y.ri()/2),this.ik.y,this.uiScale.y)});else{const s=this.xk||ra,n=yf(s,this.uiScale.Wi(),this.ya,this.getTitleFillStyle()===ft||this.getTitle().length===0?{x:0,y:0}:this._m.Ps().jc(),qn(Yl(s),this.bm),this.ya).marginsWithTitle.top;i.setOrigin(lo.RightTop).setPosition(K({x:this.pixelScale.x.getInnerEnd()-this.ya.right,y:this.pixelScale.y.getInnerEnd()-n},this.pixelScale,this.uiScale))}return i}Ik(t,e){this.forEachAxis(sa);const i=K(this.engine.clientLocation2Engine(e.x,e.y),this.xm.us.dt,this.ik);this.uk.Fe(i).q(N(0,0))}Pk(t,e,i){const s=K(this.engine.clientLocation2Engine(e.x,e.y),this.xm.us.dt,this.ik),n=K(this.engine.clientLocation2Engine(i.x,i.y),this.xm.us.dt,this.ik),o=lr(n.x,this.ik.x.getInnerStart(),this.ik.x.getInnerEnd())&&lr(n.y,this.ik.y.getInnerStart(),this.ik.y.getInnerEnd()),h=N(Math.min(s.x,n.x),Math.min(s.y,n.y)),a=N(Math.max(s.x,n.x),Math.max(s.y,n.y));this.uk.Fe(h).q(Ut(a,h));const l=Math.min(a.x-h.x,a.y-h.y)>=10;o&&l&&a.x===s.x&&this.hk?(this.Tk=!0,this.uk.Ce(this.gk).we(this.mk),this.ck.Re(this.mk).Ve(s).ze(n),this.dk.Re(this.mk).Ve(N(s.x,n.y)).ze(N(n.x,s.y)),this.bk=this.engine.setMouseStyle(this.vk,this.bk)):o&&l&&(this.ek||this.hk)?(this.Tk=!0,this.uk.Ce(this.fk).we(this.Ak),this.ck.Re(it),this.dk.Re(it),this.bk=this.engine.setMouseStyle(this.Sk,this.bk)):(this.Tk=!1,this.uk.we(it).Ce(ft),this.ck.Re(it),this.dk.Re(it),this.engine.restoreMouseStyle(this.bk)),this.us.Ss()}Bk(t,e,i){if(this.Tk){const s=K(this.engine.clientLocation2Engine(i.x,i.y),this.xm.us.dt,this.ik),n=lr(s.x,this.ik.x.getInnerStart(),this.ik.x.getInnerEnd())&&lr(s.y,this.ik.y.getInnerStart(),this.ik.y.getInnerEnd()),o=i.x>=e.x||!this.hk?"zoom":"fit",h=this.uk.Fa(),a=gt(h,this.uk.oi()),l=Math.min(this.uk.oi().x,this.uk.oi().y)>=10;n&&l&&o==="zoom"&&this.ek?(this.forEachAxisX(u=>{if(u.getChartInteractionZoomByDrag()){const c=K(h,this.ik,u.ng).x,d=K(a,this.ik,u.ng).x;u.St(c,d,!0,!0,"interactionSetInterval")}}),this.forEachAxisY(u=>{if(u.getChartInteractionZoomByDrag()){const c=K(h,this.ik,u.ng).y,d=K(a,this.ik,u.ng).y;u.St(c,d,!0,!0,"interactionSetInterval")}})):n&&l&&o==="fit"&&this.hk&&this.forEachAxis(d1)}this.uk.we(it).Ce(ft),this.ck.Re(it),this.dk.Re(it),this.us.Ss()}pan(t){this.forEachAxisX(e=>{e.setStopped(!0).pan(t.x)}),this.forEachAxisY(e=>{e.setStopped(!0).pan(t.y)})}Dk(t){this.forEachAxisX(e=>{e.getChartInteractionPanByDrag()&&e.setStopped(!0).pan(t.x)}),this.forEachAxisY(e=>{e.getChartInteractionPanByDrag()&&e.setStopped(!0).pan(t.y)})}zoom(t,e){this.forEachAxis(sa),this.forEachAxisX(i=>{i.zoom(i.dt.ut(t.x),e.x)}),this.forEachAxisY(i=>{i.zoom(i.dt.ut(t.y),e.y)})}Lk(t,e){this.forEachAxisX(i=>{i.getChartInteractionZoomByWheel()&&(sa(i),i.zoom(i.dt.ut(t.x),e.x))}),this.forEachAxisY(i=>{i.getChartInteractionZoomByWheel()&&(sa(i),i.zoom(i.dt.ut(t.y),e.y))})}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.forEachAxis(e=>e.setAnimationsEnabled(t)),this}Zd(){const t=[];return this.forEachAxis(e=>e.vg(i=>t.push(i))),super.Zd().concat(t)}VC(){return this.lk}me(){return this.Cm(this.Rb)}setAutoCursorEnabledDuringAxisAnimation(t){return this.ak=t,this}getAutoCursorEnabledDuringAxisAnimation(){return this.ak}forEachAxis(t){return this.forEachAxisX(t),this.forEachAxisY(t),this}translateCoordinate(t,e,i){if(i){const s=t,n=e,o=Qn(n)?n:Js(n)?this.pixelScale:void 0;if(o&&Jn(i)){const h=K(s,o,this.engine.scale);return this.us.Do({engineX:h.x,engineY:h.y})}if(o&&Js(i))return K(s,o,this.pixelScale);if(o&&Qn(i))return K(s,o,i)}else{const s=t;if(Js(e)){const n=this.us.Po(s);return K({x:n.engineX,y:n.engineY},this.engine.scale,this.pixelScale)}if(Qn(e)){const n=e,o=this.us.Po(s);return K({x:o.engineX,y:o.engineY},this.engine.scale,n)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}}(function(r){r.CenterTop="center-top",r.RightTop="right-top",r.LeftTop="left-top",r.CenterBottom="center-bottom",r.RightBottom="right-bottom",r.LeftBottom="left-bottom",r.SeriesCenterTop="series-center-top",r.SeriesRightTop="series-right-top",r.SeriesLeftTop="series-left-top",r.SeriesCenterBottom="series-center-bottom",r.SeriesRightBottom="series-right-bottom",r.SeriesLeftBottom="series-left-bottom"})(Au||(Au={}));const ra=Au.CenterTop,Yl=r=>{switch(r){case"center-top":case"series-center-bottom":return{left:0,right:0,top:0,bottom:5};case"left-top":return{left:20,right:0,top:0,bottom:5};case"right-top":return{left:0,right:20,top:0,bottom:5};case"center-bottom":return{left:0,right:0,top:0,bottom:0};case"left-bottom":return{left:20,right:0,top:0,bottom:0};case"right-bottom":return{left:0,right:20,top:0,bottom:0};case"series-center-top":return{left:0,right:0,top:5,bottom:0};case"series-left-top":return{left:5,right:0,top:5,bottom:0};case"series-right-top":return{left:0,right:5,top:5,bottom:0};case"series-left-bottom":return{left:5,right:0,top:0,bottom:5};case"series-right-bottom":return{left:0,right:5,top:0,bottom:5}}return wo(0,`Unexpected ChartXY title position selection ${r}`)},yf=(r,t,e,i,s,n)=>{i.x,s.left,s.right;const o=i.y+s.bottom+s.top,h=(s.left-s.right)*t.x,a=(s.bottom-s.top)*t.y;switch(r){case"center-top":return{horizontalAlignment:0,verticalAlignment:1,position:{x:50+h,y:100-(n.top+s.top)*t.y},marginsWithTitle:{...e,top:e.top+o}};case"left-top":return{horizontalAlignment:-1,verticalAlignment:1,position:{x:h,y:100-(n.top-s.top)*t.y},marginsWithTitle:{...e,top:e.top+o}};case"right-top":return{horizontalAlignment:1,verticalAlignment:1,position:{x:100+h,y:100-(n.top-s.top)*t.y},marginsWithTitle:{...e,top:e.top+o}};case"center-bottom":return{horizontalAlignment:0,verticalAlignment:-1,position:{x:50+h,y:(n.bottom+s.bottom)*t.y},marginsWithTitle:{...e,bottom:e.bottom+o}};case"left-bottom":return{horizontalAlignment:-1,verticalAlignment:-1,position:{x:h,y:(n.bottom+s.bottom)*t.y},marginsWithTitle:{...e,bottom:e.bottom+o}};case"right-bottom":return{horizontalAlignment:1,verticalAlignment:-1,position:{x:100+h,y:(n.bottom+s.bottom)*t.y},marginsWithTitle:{...e,bottom:e.bottom+o}};case"series-center-top":return{horizontalAlignment:0,verticalAlignment:1,position:{x:50+h,y:100-e.top*t.y+a},marginsWithTitle:e};case"series-left-top":return{horizontalAlignment:-1,verticalAlignment:1,position:{x:e.left*t.x+h,y:100-e.top*t.y+a},marginsWithTitle:e};case"series-right-top":return{horizontalAlignment:1,verticalAlignment:1,position:{x:100-e.right*t.x+h,y:100-e.top*t.y+a},marginsWithTitle:e};case"series-center-bottom":return{horizontalAlignment:0,verticalAlignment:-1,position:{x:50,y:e.bottom*t.y+a},marginsWithTitle:e};case"series-left-bottom":return{horizontalAlignment:-1,verticalAlignment:-1,position:{x:e.left*t.x+h,y:e.bottom*t.y+a},marginsWithTitle:e};case"series-right-bottom":return{horizontalAlignment:1,verticalAlignment:-1,position:{x:100-e.right*t.x+h,y:e.bottom*t.y+a},marginsWithTitle:e}}return wo(0,`Unexpected ChartXY title position selection ${r}`)},na=(r,t)=>{const e=[];r.forEach((s,n)=>{const o=t[n],h=e.find(a=>a.iParallel===s.iParallel);h?(h.stacks.push({...s,...o}),h.stacks.sort((a,l)=>a.iStack-l.iStack)):e.push({iParallel:s.iParallel,stacks:[{...s,...o}]})});const i=e.map(s=>{const n=s.stacks.reduce((l,u)=>Math.max(l,u.kg),0),o=s.stacks.reduce((l,u)=>Math.max(l,u.Tg),0),h=s.stacks.reduce((l,u)=>Math.max(l,u.Vd),0),a=s.stacks.reduce((l,u)=>l+(u.axis.getVisible()&&"relative"in u.axis.zd?u.axis.zd.relative:0),0);return{...s,ticksSizeMax:n,titleSizeMax:o,sumRelativeSize:a,thicknessMax:h}});return i.sort((s,n)=>s.iParallel-n.iParallel),{groups:i,thicknessTotal:i.reduce((s,n)=>s+n.thicknessMax,0)}};class Uy{constructor(t,e,i,s,n,o,h){this.coordsRelative="relative",this.coordsClient="client",this.D=new Xe,this.jk=[],this.Zk=new Map,this.xS=new Map,this.Qk=(y,p,x)=>{this.xS.size!==0&&[...this.xS.values()].find(({series:A})=>A.getVisible()===!0)!==void 0||this.Jk.St(p,x,!1,!1,"zoomBandChart"),this.Kk.us.Ss()},e.us.Nn(ot.ff),this.cA=t,this.qk=(o==null?void 0:o.orientation)||"x",this.tT=(o==null?void 0:o.useSharedValueAxis)!==void 0&&o.useSharedValueAxis,this.iT=s,this.Wu=this.qk==="x"?Ta:vc;const a={...o,defaultAxisX:this.Wu.getWidth({x:o==null?void 0:o.defaultAxis,y:void 0}),defaultAxisY:this.Wu.getHeight({x:o==null?void 0:o.defaultAxis,y:void 0})};this.Kk=new Ic(t,e,i,Ft,n,a,h).setTitle("Zoom Band Chart").setMouseInteractions(!1).setAutoCursorMode(he.disabled),this.engine=this.Kk.engine;const l=this.Kk.getDefaultAxisX().setMouseInteractions(!1),u=this.Kk.getDefaultAxisY().setMouseInteractions(!1);this.Jk=this.Wu.getWidth({x:l,y:u}).setScrollStrategy(Fs.fitting).setAnimationScroll(!1).setStrokeStyle(it).setTickStrategy(uo.Empty),o!=null&&o.useSharedValueAxis?this.sT=this.Wu.getHeight({x:l,y:u}):this.Wu.getHeight({x:l,y:u}).dispose();const c=this.getTheme().zoomBandChartDefocusOverlayFillStyle||new H({color:this.getTheme().isDark?D(0,0,0,180):D(255,255,255,180)});this.eT=[this.Kk.bA.ke(this.Jk.ng).Ce(c).we(it),this.Kk.bA.ke(this.Jk.ng).Ce(c).we(it)];const d=this.Kk.bA.Lg(this.Jk.ng).Re(this.getTheme().zoomBandChartSplitterStrokeStyle||this.getTheme().chartXYSeriesBackgroundStrokeStyle);this.hT={collection:d,members:new Array(5).fill(0).map(y=>d.zr())};const f=this.getTheme(),g=typeof f.zoomBandChartKnobFillStyle=="function"?f.zoomBandChartKnobFillStyle(this.cA.$s):f.zoomBandChartKnobFillStyle||ft;this.rT=[this.Kk.bA.ke(this.Kk.pixelScale).Ce(g).we(it),this.Kk.bA.ke(this.Kk.pixelScale).Ce(g).we(it)],this.nT=this.getTheme().zoomBandChartKnobSize||{x:0,y:0},this.oT()}add(t){var e,i,s,n,o;const h=this.jk.map(v=>v.axis),a=this.qk==="x"?t.axisX:t.axisY;if(!h.includes(a)){const v=a.onIntervalChange(this.Qk);this.jk.push({axis:a,deattach:()=>{a.offIntervalChange(v)}}),this.Jk.$h(a.Hh()),this.aT&&this.aT.remove(),this.aT=Vp(...this.jk.map(w=>w.axis))}const l=this.Wu.getHeight({x:t.axisX,y:t.axisY});let u;if(this.tT)u=this.sT;else{const v=this.Zk.get(l);v?u=v:(u=this.Wu.getHeight({x:this.Kk.addAxisX.bind(this.Kk),y:this.Kk.addAxisY.bind(this.Kk)})(),this.lT(u)),this.Zk.set(l,u)}const c=this.Wu.getWidth({x:this.Jk,y:u}),d=this.Wu.getHeight({x:this.Jk,y:u});let f;const g=[],y=(v,w)=>{const E=m=>{if(m.length!==0)if("x"in m[0]){const S=m;w.add(S)}else{const S=m,b=[];for(let M=0;M<S.length;M+=1){const R=S[M];b.push({x:R[0],y:R[4]})}w.add(b)}},C=v.r_();E(C);const k=v.n_((m,S)=>E(S));g.push(()=>v.o_(k));const F=v.a_(()=>w.clear());g.push(()=>{v.l_(F)})};if(t instanceof By)f=this.Kk.addPointLineAreaSeries({...t.Un,xAxis:c,yAxis:d}).setStrokeStyle(t.getStrokeStyle()).setAreaFillStyle(t.getAreaFillStyle()).setPointFillStyle(t.getPointFillStyle()).setCurvePreprocessing(t.getCurvePreprocessing()),f.setDataSet(t.tk());else if(t instanceof Ko||t instanceof zy){const v=this.Kk.addLineSeries({xAxis:c,yAxis:d,dataPattern:t instanceof Ko?(e=t.Un)===null||e===void 0?void 0:e.dataPattern:void 0});if(t instanceof Ko)v.setStrokeStyle(t.getStrokeStyle());else{const w=f1(t);w&&v.setStrokeStyle(w)}y(t,v),f=v}else if(t instanceof Dc){const v=this.Kk.addAreaSeries({xAxis:c,yAxis:d,baseline:t.Mw}).setFillStyle(t.getFillStyle()).setStrokeStyle(t.getStrokeStyle());y(t,v),f=v}else if(t instanceof Pc){const v=this.Kk.addPointSeries({xAxis:c,yAxis:d,pointShape:(i=t.Un)===null||i===void 0?void 0:i.pointShape}).setPointFillStyle(t.getPointFillStyle()).setPointSize(t.getPointSize()).setPointRotation(t.getPointRotation());y(t,v),f=v}else if(t instanceof Ly){const v=this.Kk.addStepSeries({xAxis:c,yAxis:d,pointShape:(s=t.Un)===null||s===void 0?void 0:s.pointShape,mode:t.$w}).setStrokeStyle(t.getStrokeStyle()).setPointFillStyle(t.getPointFillStyle()).setPointSize(t.getPointSize()).setPointRotation(t.getPointRotation());y(t,v),f=v}else if(t instanceof Vy){const v=this.Kk.addSplineSeries({xAxis:c,yAxis:d,pointShape:(n=t.Un)===null||n===void 0?void 0:n.pointShape}).setStrokeStyle(t.getStrokeStyle()).setPointFillStyle(t.getPointFillStyle()).setPointSize(t.getPointSize()).setPointRotation(t.getPointRotation());y(t,v),f=v}else if(t instanceof Nh){const v=this.Kk.addSplineSeries({xAxis:c,yAxis:d,pointShape:(o=t.Un)===null||o===void 0?void 0:o.pointShape}).setStrokeStyle(t.getStrokeStyle()).setPointFillStyle(t.getPointFillStyle()).setPointSize(t.getPointSize()).setPointRotation(t.getPointRotation());y(t,v),f=v}else if(t instanceof Iy){const v=this.Kk.addAreaRangeSeries({xAxis:c,yAxis:d}).setLowFillStyle(t.getLowFillStyle()).setHighFillStyle(t.getHighFillStyle()).setLowStrokeStyle(t.getLowStrokeStyle()).setHighStrokeStyle(t.getHighStrokeStyle()).add(t.r_()),w=t.n_((C,k)=>v.add(k));g.push(()=>t.o_(w)),f=v;const E=t.a_(()=>v.clear());g.push(()=>{t.l_(E)})}else{if(!(t instanceof Dy))throw new Error("LightningChart JS Zoom Band Chart unsupported series type");{const v=this.Kk.addHeatmapGridSeries({xAxis:c,yAxis:d,...t.F_}),w=()=>{v.setWireframeStyle(t.getWireframeStyle()).setIntensityInterpolation(t.getIntensityInterpolation()).setFillStyle(t.getFillStyle())};w(),f=v,t.D_(f);const E=t.R_((F,m)=>v.invalidateIntensityValues(m)),C=t.B_(w);g.push(()=>{t.E_(E),t.L_(C)});const k=t.a_(()=>v.clear());g.push(()=>{t.l_(k)})}}f.setMouseInteractions(!1);const p=t.onVisibleStateChanged((v,w)=>{f.setVisible(w)});g.push(()=>{t.offVisibleStateChanged(p)});const x=t.onHighlight((v,w)=>f.setHighlight(w));g.push(()=>{t.offHighlight(x)});const A=t.onDispose(()=>{this.disposeSeries(t)});return g.push(()=>{t.offDispose(A)}),this.xS.set(t,{series:f,clearReferences:()=>g.forEach(v=>v())}),f}disposeSeries(t){const e=this.xS.get(t);if(e){const{clearReferences:s}=e;s(),this.xS.delete(t),e.series.dispose();const n=this.Wu.getHeight({x:t.axisX,y:t.axisY}),o=this.Zk.get(n);o&&o._g().length===0&&(this.Zk.delete(n),o.dispose())}const i=this.qk==="x"?t.axisX:t.axisY;if(!Array.from(this.xS.keys()).find(s=>i===(this.qk==="x"?s.axisX:s.axisY))){const s=this.jk.findIndex(n=>n.axis===i);this.jk[s].deattach(),this.jk.splice(s,1)}return this}setDefocusOverlayFillStyle(t){return this.eT.forEach(e=>e.Ce(t)),this.Kk.us.Ss(),this}getDefocusOverlayFillStyle(){return this.eT[0].Eh()}setSplitterStrokeStyle(t){return this.hT.collection.Re(t),this.Kk.us.Ss(),this}getSplitterStrokeStyle(){return this.hT.collection.uu()}setKnobFillStyle(t){return this.rT.forEach(e=>e.Ce(t)),this.Kk.us.Ss(),this}getKnobFillStyle(){return this.rT[0].Eh()}setKnobStrokeStyle(t){return this.rT.forEach(e=>e.we(t)),this.Kk.us.Ss(),this}getKnobStrokeStyle(){return this.rT[0].ao()}setKnobSize(t){return this.nT=t,this.Kk.us.Ss(),this}getKnobSize(){return this.nT}getDefaultAxisX(){return this.Kk.getDefaultAxisX()}getDefaultAxisY(){return this.Kk.getDefaultAxisY()}get axisX(){return this.getDefaultAxisX()}get xAxis(){return this.getDefaultAxisX()}get axisY(){return this.getDefaultAxisY()}get yAxis(){return this.getDefaultAxisY()}lT(t){t.setTickStrategy(uo.Empty).setMouseInteractions(!1).setNibStyle(it).setStrokeStyle(it)}oT(){let t;const e=(n,o,h)=>{var a,l;const u=this.qk==="x"?(a=Array.from(this.xS.keys())[0])===null||a===void 0?void 0:a.axisX:(l=Array.from(this.xS.keys())[0])===null||l===void 0?void 0:l.axisY;if(!u)return;const c=u.getInterval(),d=this.Jk.getInterval();Math.abs(this.Jk.dt.ct(n)-this.Jk.dt.ct(o))<10||Math.sign(o-n)!==Math.sign(c.end-c.start)||Math.min(n,o)<Math.min(d.start,d.end)||Math.max(n,o)>Math.max(d.start,d.end)&&Math.max(c.start,c.end)<Math.max(n,o)||u.St(n,o,h,!0,"zoomBandChart")};this.rT.forEach((n,o)=>{n.setMouseEnterEventHandler(()=>{t=this.engine.setMouseStyle(this.Wu.getWidth({x:It.Horizontal,y:It.Vertical}),t)}),n.setMouseLeaveEventHandler(()=>{this.engine.restoreMouseStyle(t)});const h=l=>{var u,c;const d=this.qk==="x"?(u=Array.from(this.xS.keys())[0])===null||u===void 0?void 0:u.axisX:(c=Array.from(this.xS.keys())[0])===null||c===void 0?void 0:c.axisY;if(!d)return;const f=this.Wu.getWidth(this.Kk.translateCoordinate(l,this.Kk.coordsAxis)),g=d.getInterval(),y=o===0?f:g.start,p=o===1?f:g.end;e(y,p,!1),tt(l)};n.setMouseDragEventHandler((l,u,c,d,f)=>h(u));const a=Ci(new ds(void 0,(l,u,c,d,f)=>h(f)));n.setTouchStartEventHandler(a.onTouchStart),n.setTouchMoveEventHandler(a.onTouchMove),n.setTouchEndEventHandler(a.onTouchEnd)}),this.Kk.onSeriesBackgroundMouseEnter(()=>{t=this.engine.setMouseStyle(It.Move,t)}),this.Kk.onSeriesBackgroundMouseLeave(()=>{this.engine.restoreMouseStyle(t)});const i=(n,o)=>{var h,a;const l=this.qk==="x"?(h=Array.from(this.xS.keys())[0])===null||h===void 0?void 0:h.axisX:(a=Array.from(this.xS.keys())[0])===null||a===void 0?void 0:a.axisY;if(!l)return;const u=l.getInterval(),c=this.Jk.dt.mi(u.start,this.Wu.getWidth(n)),d=this.Jk.dt.mi(u.end,this.Wu.getWidth(n));e(c,d,!1),tt(o)};this.Kk.onSeriesBackgroundMouseDrag((n,o,h,a,l)=>i(l,o));const s=Ci(new ds(void 0,(n,o,h,a,l)=>i(a,l)));this.Kk.onSeriesBackgroundMouseWheel((n,o)=>{var h,a;const l=this.qk==="x"?(h=Array.from(this.xS.keys())[0])===null||h===void 0?void 0:h.axisX:(a=Array.from(this.xS.keys())[0])===null||a===void 0?void 0:a.axisY;if(!l)return;const u=l.getInterval(),c=this.Jk.getInterval(),d=this.Wu.getWidth(this.Kk.translateCoordinate(o,this.Kk.coordsAxis)),f=this.Jk.dt.ct(u.start),g=this.Jk.dt.ct(u.end),y=this.Jk.dt.ct(d),p=Rt((y-f)/(g-f),0,1),x=.2*Math.abs(g-f)*l.Rf,A=p*x*-Math.sign(o.deltaY),v=(1-p)*x*Math.sign(o.deltaY),w=Rt(this.Jk.dt.mi(u.start,A),c.start,c.end),E=Rt(this.Jk.dt.mi(u.end,v),c.start,c.end);e(w,E,!1),tt(o)}),this.Kk.onSeriesBackgroundTouchStart(s.onTouchStart),this.Kk.onSeriesBackgroundTouchMove(s.onTouchMove),this.Kk.onSeriesBackgroundTouchEnd(s.onTouchEnd),this.eT.forEach((n,o)=>{n.setMouseEnterEventHandler(()=>{t=this.engine.setMouseStyle(It.Point,t)}),n.setMouseLeaveEventHandler(()=>{this.engine.restoreMouseStyle(t)});const h=l=>{var u,c;const d=this.qk==="x"?(u=Array.from(this.xS.keys())[0])===null||u===void 0?void 0:u.axisX:(c=Array.from(this.xS.keys())[0])===null||c===void 0?void 0:c.axisY;if(!d)return;const f=this.Wu.getWidth(this.Kk.translateCoordinate(l,this.Kk.coordsAxis)),g=d.getInterval(),y=this.Jk.getInterval(),p=Rt(f-(g.end-g.start)/2,Math.min(y.start,y.end),Math.max(y.start,y.end)-Math.abs(g.end-g.start)),x=p+(g.end-g.start);e(p,x,!0),tt(l)};n.setMouseClickEventHandler((l,u)=>h(u));const a=Ci(new class{constructor(l,u=300){this.Ds=!1,this.Bs=[],this.Ls=300,this.Rs=l,this.Ls=u}Is(l,u){const c=X.performance.now();let d=!1;for(let f=0;f<this.Bs.length;f+=1)c-this.Bs[f].time>=this.Ls?(this.Bs.splice(f,1),f-=1):this.Bs[f].state&&(d=!0);return this.Ds?u.interactions.length===0&&(this.Bs.push({state:!1,time:c}),this.Ds=!1):u.interactions.length===1&&u.type==="pointerdown"&&(this.Bs.push({state:!0,time:c}),d=!0,this.Ds=!0),d}Ps(l,u,c){if(c&&!this.Ds){const d=this.Bs.reduce((f,g)=>(g.state?f.on+=1:f.off+=1,f),{on:0,off:0});d.on>=1&&d.off>=1&&(this.Rs(l,u),this.Bs.length=0)}}}((l,u)=>h(u)));n.setTouchStartEventHandler(a.onTouchStart),n.setTouchMoveEventHandler(a.onTouchMove),n.setTouchEndEventHandler(a.onTouchEnd)})}getSizePixels(){return this.Kk.getSizePixels()}onResize(t){return this.Kk.onResize((e,i,s,n,o)=>t(this,i,s,n,o))}offResize(t){return this.Kk.offResize(t)}Fr(t){this.Kk.Fr(t)}getMinimumSize(){return this.Kk.getMinimumSize()}j(){return this.Kk.j()}Z(){return this.Kk.Z()}Te(t){var e,i,s,n;const o=Lr(Array.from(this.xS.keys()).map(p=>p.chart)),h=this.qk==="x"?(e=Array.from(this.xS.keys())[0])===null||e===void 0?void 0:e.axisX:(i=Array.from(this.xS.keys())[0])===null||i===void 0?void 0:i.axisY;if(this.qk==="x"){const p=o.reduce((w,E)=>{let C=0;return E.forEachAxisY(k=>{C+=k.sg===0?k.Ug():0}),Math.max(w,C)},0),x=o.reduce((w,E)=>{let C=0;return E.forEachAxisY(k=>{C+=k.sg===100?k.Ug():0}),Math.max(w,C)},0),A=o.reduce((w,E)=>Math.max(w,E.getPadding().left),0),v=o.reduce((w,E)=>Math.max(w,E.getPadding().right),0);(s=this.getDefaultAxisY())===null||s===void 0||s.setThickness(p),this.Kk.setPadding({left:A+(o.length===0?10:0),right:v+x+(o.length===0?10:0)})}else{const p=o.reduce((w,E)=>{let C=0;return E.forEachAxisX(k=>{C+=k.sg===0?k.Ug():0}),Math.max(w,C)},0),x=o.reduce((w,E)=>{let C=0;return E.forEachAxisX(k=>{C+=k.sg===100?k.Ug():0}),Math.max(w,C)},0),A=o.reduce((w,E)=>Math.max(w,E.getPadding().bottom),0),v=o.reduce((w,E)=>Math.max(w,E.getPadding().top),0);(n=this.getDefaultAxisX())===null||n===void 0||n.setThickness(p),this.Kk.setPadding({bottom:A+(o.length===0?10:0),top:v+x+(o.length===0?10:0)})}this.Kk.Te(t);const a=this.Jk.getInterval().start,l=this.Jk.getInterval().end,u=Rt(h?h.getInterval().start:a,a,l),c=Rt(h?h.getInterval().end:l,a,l),d=this.Wu.getHeight(this.Kk.ik.getInnerIntervalPixels());this.eT[0].Fe(this.Wu.toPoint(a,0)).q(this.Wu.toPoint(u-a,d)),this.eT[1].Fe(this.Wu.toPoint(c,0)).q(this.Wu.toPoint(l-c,d)),this.hT.members[0].Eg(this.Wu.toPoint(a,d),this.Wu.toPoint(u,d)),this.hT.members[1].Eg(this.Wu.toPoint(u,d),this.Wu.toPoint(u,0)),this.hT.members[2].Eg(this.Wu.toPoint(u,0),this.Wu.toPoint(c,0)),this.hT.members[3].Eg(this.Wu.toPoint(c,0),this.Wu.toPoint(c,d)),this.hT.members[4].Eg(this.Wu.toPoint(c,d),this.Wu.toPoint(l,d));const f=K(this.Wu.toPoint(u,d/2),this.Jk.ng,this.Kk.pixelScale),g=K(this.Wu.toPoint(c,d/2),this.Jk.ng,this.Kk.pixelScale),y=this.nT;this.rT[0].Fe({x:f.x-y.x/2,y:f.y-y.y/2}).q({x:y.x,y:y.y}).Nh(this.Wu.getWidth({x:0,y:90})),this.rT[1].Fe({x:g.x-y.x/2,y:g.y-y.y/2}).q({x:y.x,y:y.y}).Nh(this.Wu.getWidth({x:0,y:90}))}setSeriesBackgroundFillStyle(t){return this.Kk.setSeriesBackgroundFillStyle(t),this.Kk.us.Ss(),this}getSeriesBackgroundFillStyle(){return this.Kk.getSeriesBackgroundFillStyle()}setSeriesBackgroundStrokeStyle(t){return this.Kk.setSeriesBackgroundStrokeStyle(t),this.Kk.us.Ss(),this}getSeriesBackgroundStrokeStyle(){return this.Kk.getSeriesBackgroundStrokeStyle()}setSeriesBackgroundEffect(t){return this.Kk.setSeriesBackgroundEffect(t),this.Kk.us.Ss(),this}getSeriesBackgroundEffect(){return this.Kk.getSeriesBackgroundEffect()}getTheme(){return this.Kk.getTheme()}setTitle(t){return this.Kk.setTitle(t),this}getTitle(){return this.Kk.getTitle()}setTitleFillStyle(t){return this.Kk.setTitleFillStyle(t),this}getTitleFillStyle(){return this.Kk.getTitleFillStyle()}setTitleFont(t){return this.Kk.setTitleFont(t),this}getTitleFont(){return this.Kk.getTitleFont()}setTitleMargin(t){return this.Kk.setTitleMargin(t),this}getTitleMargin(){return this.Kk.getTitleMargin()}setPadding(t){return this.Kk.setPadding(t),this}getPadding(){return this.Kk.getPadding()}setBackgroundFillStyle(t){return this.Kk.setBackgroundFillStyle(t),this}getBackgroundFillStyle(){return this.Kk.getBackgroundFillStyle()}setBackgroundStrokeStyle(t){return this.Kk.setBackgroundStrokeStyle(t),this}getBackgroundStrokeStyle(){return this.Kk.getBackgroundStrokeStyle()}translateCoordinate(t,e,i){return ul(t,e,i,this.Kk.pixelScale,this.Kk.us)}addUIElement(t,e){return this.Kk.addUIElement(t,e)}addLegendBox(t,e){return this.Kk.addLegendBox(t,e)}getLegendBoxes(){return this.Kk.getLegendBoxes()}saveToFile(t,e,i){return this.Kk.saveToFile(t,e,i),this}dispose(){return this.Kk.dispose(),this.Zk.clear(),this.xS.clear(),this.iT(this),this}isDisposed(){return this.Kk.isDisposed()}onDispose(t){return this.Kk.onDispose(()=>t(this))}offDispose(t){return this.Kk.offDispose(t)}}const f1=r=>{if("getStrokeStyle"in r)return r.getStrokeStyle();const t=(e=>e instanceof Ko||e instanceof Dc?e.getStrokeStyle().getFillStyle():e instanceof Pc||e instanceof Nh?e.getPointFillStyle():void 0)(r);return t?new Tt({thickness:2,fillStyle:t}):void 0};class g1 extends Vo{constructor(t,e,i,s,n,o,h){super(t,e,i,s,n,h),this.xs="Point Series",this.Vx=[],this.Ox=!1,this.Hx=3,this.Aa=0,this.Wy=Ph,this.be=kt(this.qi.polarPointSeriesFillStyle,o),this.od=new xc({dataPattern:null}),this.Na=t.dd(s).Re(it).ud(ft).ld(this.be).fd(ae.Circle).pd(this.Hx).cs(this.getHighlight()).ad(this.od),this.ds(this.Na)}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}setData(t){return this.Vx.length!==0&&this.Ji.us.Nn(ot.vf),this.Vx=fl(t),this.Ox=!0,this.Bx=Ih(this.Vx),this.ks.Ss(),this}setPointAlignment(t){return this.Na.JC(t),this.Ji.us.Ss(),this}getPointAlignment(){return this.Na.KC()}setPointFillStyle(t){this.be=typeof t=="function"?t(this.be):t;const e=this.be;return this.Na.ld(e),this.ks.Ss(),this}getPointFillStyle(){return this.be}setPointSize(t){return this.Hx=t,this.Na.pd(t),this.ks.Ss(),this}getPointSize(){return this.Hx}setPointShape(t){return this.Na.fd(t),this.Ji.us.Ss(),this}getPointShape(){return this.Na.Ad()}setPointRotation(t){return this.Aa=t,this.Na.gd(t),this.ks.Ss(),this}getPointRotation(){return this.Aa}Kp(){return this.tS&&this.Vx.length>0&&this.getVisible()}Ie(t,e){t.cs(e),this.ks.Ss()}Hc(t,e){const i=K(t,this.Ji.us.dt,this.scale),s=this.od.Hc(i,!1,this.scale,this.Ji.pixelScale);if(!s)return;const{angle:n,amplitude:o}=Kr(s,this.scale);return Fi(s,this.scale,this.Wy(new $e,this,n,o,this.Ji.getAmplitudeAxis().formatValue).Zu(),this,"color"in s&&s.color!==void 0&&Ri(this.be)?new H({color:bp(s.color)}):this.be)}solveNearestFromScreen(t){return this.Hc(ei(t,this.Ji.us),!1)}Te(){if(this.Ox||this.scale.Yx()){const t=Qr(this.Vx,this.scale),e=ce(t);this.od.clear().add(t),this.Na.Yo(e),this.Ox=!1,this.Na.Ps()}}attach(t,e=!0,i=!1){return super.attach(t,e,i),ge(t,this.qi,i,{fill:this.be}),this}Cs(){return this.bs||this.getPointShape()}}class y1{constructor(t,e,i,s){this.D=new Xe,this.uT=!1,this.Ji=t,this.cT=e,this.xS=i,this.Na=s}setGeometry(t){return this.dT=t,this.uT=!0,this.Ji.us.Ss(),this}getGeometry(){return this.dT}setMouseInteractions(t){return this.Na.setMouseInteractions(t),this}dispose(){return this.Na.dispose(),this.cT(this),this.D.emit("dispose",this),this}onDispose(t){return this.D.on("dispose",t)}offDispose(t){return this.D.off(t,"dispose")}setVisible(t){const e=this.Na.getVisible()!==t;return this.Na.setVisible(t),e&&this.D.emit("visibleStateChanged",this,t),this.Ji.us.Ss(),this}getVisible(){return this.Na.getVisible()}onVisibleStateChanged(t){return this.D.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.D.off(t,"visibleStateChanged")}}class m1 extends Vo{constructor(t,e,i,s,n,o,h){super(t,e,i,s,n,h),this.xs="Polygon Series",this.fT=[],this.AT=[],this.Wy=Ph,this.gT=a=>{const l=this.AT.indexOf(a);l>=0&&this.AT.splice(l,1);const u=this.fT.findIndex(c=>c===a.Na);u>=0&&this.fT.splice(u,1),this.ks.Ss()},this.be=kt(this.qi.polarPolygonSeriesFillStyle,o),this.xe=kt(this.qi.polarPolygonSeriesStrokeStyle,o)}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}addPolygon(){const t=new y1(this.Ji,this.gT,this,this.mT());return this.AT.push(t),t}setFillStyle(t){this.be=typeof t=="function"?t(this.be):t;const e=this.be;for(const i of this.fT)i.Ce(e);return this.ks.Ss(),this}getFillStyle(){return this.be}setStrokeStyle(t){this.xe=typeof t=="function"?t(this.xe):t;const e=this.xe;for(const i of this.fT)i.we(e);return this.ks.Ss(),this}getStrokeStyle(){return this.xe}Kp(){return this.tS&&this.AT.find(t=>t.yT!==void 0)!==void 0&&this.getVisible()}Te(){this.AT.forEach(t=>{(t.uT||this.scale.Yx())&&t.pT&&(t.Na.pl(Qr(t.pT,this.scale)),t.uT=!1,t.Na.Ps())})}oS(){super.oS();const t=wt(st,ht);this.AT.forEach(e=>{if(!e.dT)return;const i=!e.uT&&e.pT?e.pT:fl(e.dT);e.pT=i;const s=!e.uT&&e.yT?e.yT:Ih(i);e.yT=s,t.min=Math.min(t.min,s.min),t.max=Math.max(t.max,s.max)}),this.Bx=t}Ie(t,e){t.cs(e),this.ks.Ss()}Hc(t,e){const i=kn(t,this.fT,(a,l)=>{const u=a.Hc(l);if(u)return K(u,this.scale,a.us.dt)},pr);if(!i)return;const s=K(i[0],i[1].us.dt,this.scale),n=this.ST(i[1]);if(!n)return;const{angle:o,amplitude:h}=Kr(s,this.scale);return{location:s,scale:this.scale,resultTableContent:this.Wy(new $e,this,o,h,this.Ji.getAmplitudeAxis().formatValue).Zu(),owner:this,fillStyle:this.be,polarPolygon:n}}solveNearestFromScreen(t){return this.Hc(ei(t,this.Ji.us),!1)}attach(t,e=!0,i=!1){return super.attach(t,e,i),ge(t,this.qi,i,{fill:this.be,stroke:this.xe}),this}mT(){const t=this.ks.ic(this.scale,ys.Simple).Ce(this.be).we(this.xe).cs(this.getHighlight());return this.fT.push(t),this.ds(t),t}ST(t){return this.AT.find(e=>e.Na===t)}}class p1 extends Vo{constructor(t,e,i,s,n,o,h){super(t,e,i,s,n,h),this.xs="Area Series",this.Vx=[],this.Ox=!1,this.Nx=!1,this.vT=!1,this.Wy=Ph,this.be=kt(this.qi.polarAreaSeriesFillStyle,o),this.xe=kt(this.qi.polarAreaSeriesStrokeStyle,o)}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}setData(t){this.Vx.length!==0&&this.Ji.us.Nn(ot.vf);const e=(i=>{const s=[];let n,o,h=!1;for(let a=0;a<i.length;a+=1){const l=i[a];let u=!0;if(n){u=!1;const c=l.angle-n.angle;if(De(c,0))u=!0;else{const d=Math.sign(c);o===void 0?(o=d,u=!0):o===d&&(u=!0)}}u?s.push(l):h=!0,n=l}return{progressivePoints:s,userDataModified:h}})(t);return e.userDataModified&&this.vT===!1&&(console.warn(`${this.xs} setData data format is faulty. Consecutive 'angle' values should progress in the same direction! Invalid data points have been removed.`),this.vT=!0),this.Vx=e.progressivePoints,this.Ox=!0,this.Bx=Ih(this.Vx),this.ks.Ss(),this}setFillStyle(t){return this.be=typeof t=="function"?t(this.be):t,this.ks.Ss(),this}getFillStyle(){return this.be}setStrokeStyle(t){return this.xe=typeof t=="function"?t(this.xe):t,this.ks.Ss(),this}getStrokeStyle(){return this.xe}setConnectDataAutomaticallyEnabled(t){return this.Nx=t,this.ks.Ss(),this}getConnectDataAutomaticallyEnabled(){return this.Nx}Kp(){return this.tS&&this.Vx.length>0&&this.getVisible()}attach(t,e=!0,i=!1){return super.attach(t,e,i),ge(t,this.qi,i,{fill:this.be,stroke:this.xe}),this}}class x1 extends p1{constructor(t,e,i,s,n,o,h){super(t,e,i,s,n,o,h),this.bT=this.ks.ic(this.scale,ys.Simple).cs(this.getHighlight()),this.ds(this.bT)}Te(){if(this.Ox||this.scale.Yx()){const t=this.Vx,e=this.Nx===!0?Qr(t.concat((i=>{if(i.length===0)return i;const s=i[0],n=i[i.length-1];if(De(s.angle,n.angle))return i;const o=1*Math.sign(n.angle-s.angle);let h=0;const a=[];for(let l=n.angle+o;!De(l%360,s.angle%360);l+=o)if(a.push({angle:l,amplitude:0}),h+=1,h>360)return[];for(let l=0;l<a.length;l+=1)a[l].amplitude=$r(n.amplitude,s.amplitude,(l+1)/(a.length+1));return a})(t)),this.scale):[...Qr(t,this.scale),{x:0,y:0}];this.bT.pl(e).Ce(this.be).we(this.xe),this.Ox=!1,this.bT.Ps()}}Ie(t,e){t.cs(e),this.ks.Ss()}Hc(t,e){const i=this.bT.Hc(t);if(!i)return;const{angle:s,amplitude:n}=Kr(i,this.scale);return Fi(i,this.scale,this.Wy(new $e,this,s,n,this.Ji.getAmplitudeAxis().formatValue).Zu(),this,this.be)}solveNearestFromScreen(t){return this.Hc(ei(t,this.Ji.us),!1)}}class Gi extends _s{constructor(){super(...arguments),this.Gi="RadialScale",this.xT={start:0,end:1},this.MT=!1,this._T=0,this.X=N(0,0),this.wT=[0,0],this.CT=[0,0],this.i=!0,this.vi=!0,this.kT=!0,this.TT=!0,this.FT={x:0,y:0},this.di={x:{displacement:0,scaling:0,highPrecisionOffset:0},y:{displacement:0,scaling:0,highPrecisionOffset:0}}}yx(t,e){return t===this.xT.start&&e===this.xT.end||(this.xT={start:t,end:e},this.kT=!0,this.IT()),this}mx(){return this.xT}gx(){return this.xT.end>=this.xT.start}wx(t){this.MT=t,this.TT=!0}kx(){return this.MT===!1}Cx(t){this._T=t,this.TT=!0}xx(){return this._T}yi(){return this.vi}_i(){return!1}ot(t,e,i,s){return this.x=new Hi(t.x,e.x,i.x,s?s.x:void 0),this.y=new Hi(t.y,e.y,i.y,s?s.y:void 0),this}pi(){return this.di}Yx(){return this.kT}PT(){return this.TT}Wi(){return this.FT}j(){return this.i=!1,this.vi=!1,this.kT=!1,this.TT=!1,this}Z(){return this.i=!0,this.vi=!0,this.kT=!0,this.TT=!0,this}q(t,e){return typeof t=="object"?(this.X.x=t.x,this.X.y=t.y):(this.X.x=t,this.X.y=e),this.IT(),this}Ei(t){return this.wT=t,this.IT(),this}zi(t){return this.CT=t,this.IT(),this}ni(){return N(this.wT[0]+this.wT[1],this.CT[0]+this.CT[1])}oi(){return this.X}IT(){const t=this.xT,e=N(this.x.ai(this.X.x),this.y.ai(this.X.y)),i=this.wT[0]+this.wT[1],s=this.CT[0]+this.CT[1],n=Math.max(e.x-i,0),o=Math.max(e.y-s,0),h=.5*(n>o?o:n),a=[this.wT[0]+Math.max((n-2*h)/2,0),this.wT[1]+Math.max((n-2*h)/2,0)],l=[this.CT[0]+Math.max((o-2*h)/2,0),this.CT[1]+Math.max((o-2*h)/2,0)],u=Math.abs(t.end-t.start);this.x.q(this.X.x).si(a).J(-u,u),this.y.q(this.X.y).si(l).J(-u,u),this.FT={x:this.x.getPixelSize(),y:this.y.getPixelSize()},this.di={x:this.x.pi(),y:this.y.pi()},this.Z()}mi(t,e){const i=this.Wi();return{x:t.x+e.x*i.x,y:t.y+e.y*i.y}}Ui(t,e,i,s){const n=this.Wi(),o=Za(t,e);return o.x*=s,o.y*=s,{x:t.x+i*n.x*o.x,y:t.y+i*n.y*o.y}}}class Gy extends Dh{constructor(t,e,i,s,n,o,h){super(t,e,i,e.vm("polarChart bg",0),s,e.us.qi.polarChartBackgroundFillStyle,e.us.qi.polarChartBackgroundStrokeStyle,e.us.qi.polarChartTitleFont,e.us.qi.polarChartTitleFillStyle,h),this.coordsClient="client",this.Jf=[],this.Bo=!0,this.Gy=he.onHover,this.DT=(l,u,c,d,f)=>{this.Jb.q(d,f)},this.tA=Mg(this.Jf),this.BT=l=>{this.Jf.push(l)},this.LT=()=>this.xS,this.us.Nn(ot.cf),this.Gk=e.ob("polarChart series bg",0),this.RT=e.$y("polarChart axis gridlines",0),this.ET=e.$y("polarChart series",1),this.zT=e.$y("polarChart axis lines",2),this.VT=e.$y("polarChart axis ticks",3),this.Jb=i.d2({scaleXYConstructor:Gi}),this.onResize(this.DT),this._m.Rh("Polar Chart"),this.FS=this.Gk.Jc(this.Jb).Ce(this.qi.polarChartSeriesBackgroundFillStyle).we(it).eu(0).ze(360).ou(0),this.IS=this.Gk.Jc(this.Jb).Ce(ft).we(this.qi.polarChartSeriesBackgroundStrokeStyle).eu(0).ze(360).ou(0),super.TS(this.FS,this.IS),this.Sm(n,this.pixelScale),this.OT=new AA(this,this.Jb,this.qi,(o==null?void 0:o.disableAnimations)!==!0&&(o==null?void 0:o.animationsEnabled)!==!1,this.RT,this.zT,this.VT,this.es,this.LT),this.NT=new bA(this,this.Jb,this.qi,(o==null?void 0:o.disableAnimations)!==!0&&(o==null?void 0:o.animationsEnabled)!==!1,this.RT,this.zT,this.VT,this.es),this.coordsAxis={axisAmplitude:this.OT,axisRadial:this.NT},this.jy=e.Zy();const a=qt(o?o.autoCursorBuilder:void 0,OS);this.Pm=a.uy(this.jy,this.uiScale,this.uiScale,this.qi),oi.Dm(this),this.LS((l,u)=>{oi.Bm(this,u)}),this.setAnimationsEnabled((o==null?void 0:o.disableAnimations)!==!0&&(o==null?void 0:o.animationsEnabled)!==!1)}getSeries(){return this.xS}setAutoCursor(t){return this.Pm&&t(this.Pm),this.us.Ss(),this}getAutoCursor(){return this.Pm}setAutoCursorMode(t){return this.Gy=t,this.us.Ss(),this}getAutoCursorMode(){return this.Gy}solveNearest(t){const e=t||this.us.On();if(e)return oi.Hc(this,ei(e,this.us),this.xS)}translateCoordinate(t,e,i){if(i){const s=t,n=this.pixelScale,o=i;if(Jn(o)){const h=K(s,n,this.engine.scale);return this.us.Do({engineX:h.x,engineY:h.y})}if(Js(o))return s;if(Ol(o)){const h=K(s,n,this.Jb);return Kr(h,this.Jb)}}else{const s=t,n=e;if(uc(s)){if(Ol(n)){const o=this.us.Po(s),h=K({x:o.engineX,y:o.engineY},this.engine.scale,this.Jb);return Kr(h,this.Jb)}if(Jn(n))return s;if(Js(n)){const o=this.us.Po(s);return K({x:o.engineX,y:o.engineY},this.us.dt,this.pixelScale)}}else if(RA(s)){if(Ol(n))return s;const o=Qr([s],this.Jb)[0];if(Jn(n)){const h=K(o,this.Jb,this.engine.scale),a={engineX:h.x,engineY:h.y};return this.us.Do(a)}if(Js(n))return K(o,this.Jb,this.pixelScale)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}addLineSeries(t){const e=new TA(this.ET,this,this._S,this.Jb,this.qi,(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length,this.us.es);return this.PS(e),e}addPointSeries(t){const e=new g1(this.ET,this,this._S,this.Jb,this.qi,(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length,this.us.es);return this.PS(e),e}addPointLineSeries(t){const e=new CA(this.ET,this,this._S,this.Jb,this.qi,(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length,this.us.es);return this.PS(e),e}addAreaSeries(t){const e=new x1(this.ET,this,this._S,this.Jb,this.qi,(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length,this.us.es);return this.PS(e),e}addPolygonSeries(t){const e=new m1(this.ET,this,this._S,this.Jb,this.qi,(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length,this.us.es);return this.PS(e),e}addHeatmapSeries(t){const e=new wA(this.ET,this,this._S,this.Jb,this.qi,this.us.es,t);return this.PS(e),e}addSector(){const t=new EA(this.ET,this,this.tA,this.Jb,this.qi,this.us.es);return this.BT(t),t}getAmplitudeAxis(){return this.OT}get amplitudeAxis(){return this.OT}get axisAmplitude(){return this.OT}getRadialAxis(){return this.NT}get radialAxis(){return this.radialAxis}get axisRadial(){return this.radialAxis}Te(t){var e,i;super.Te(t),ii.Fm(this._m,this.bm);for(const h of this.xS)h.oS();this.OT.Mr(),this.NT.Mr();for(const h of this.xS)h.Te();for(let h=1;h<=2;h+=1){const a=this.OT.Te(),l=this.NT.Te(),u=ii.Tm(this._m,this.bm),c=[this.ya.left+l,this.ya.right+l],d=[this.ya.bottom+l,this.ya.top+l+u];this.Jb.Ei(c).zi(d);const f=4;if(!(!this.GT||Math.abs(this.GT.amplitude-a)>=f||Math.abs(this.GT.radial-l)>=f)||h!==1){this.GT={amplitude:a,radial:l};break}}const s=this.Jb.mx().start,n=this.Jb.mx().end,o=this.Jb.gx()?(((e=this.GT)===null||e===void 0?void 0:e.radial)||0)*this.Jb.x.getPixelSize()+n-s:(((i=this.GT)===null||i===void 0?void 0:i.radial)||0)*this.Jb.x.getPixelSize()+s-n;this.FS.hu(o).au(360),this.IS.hu(o).au(360);for(const h of this.Jf)h.Te();oi.Im(this,this.FS.getIsUnderMouse(),!1,this.xS,h=>oi.Hc(this,h,this.xS),(h,a)=>h.Hc(a,!0));for(const h of this.xS)h.dp();return super.pm(),this.WT(),this}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.OT.setAnimationsEnabled(t),this.NT.setAnimationsEnabled(t),this}setMouseInteractions(t){return this.Bo=t,this}getMouseInteractions(){return this.Bo}getMinimumSize(){return N(mf,mf)}WT(){}forEachAxis(t){return t(this.OT),t(this.NT),this}dispose(){return this.Jf.slice().forEach(t=>t.dispose()),this.Pm.dispose(),this.Gk.W(),this.RT.W(),this.ET.W(),this.zT.W(),this.VT.W(),this.jy.W(),super.dispose()}Zd(){return[...this.xS,...this.Jf]}}const mf=300;class S1 extends cl{}class A1 extends S1{constructor(t,e,i,s,n,o,h,a){super(s,o,h,a),this.xs="Slice",this.u=0,this.gy=!1,this.UT=ft,this.yy=ft,this.py=this.u,this.by=yr(()=>this.Ji.us.Ss()),this.My=()=>{this._y=void 0},this.index=t,this.Ji=s,this.scale=n,this.Ki=o,this.bT=e.ic(n,ys.Simple).cs(this.getHighlight()),this.ds(this.bT),this.Ue=i.Pr(n).cs(this.getHighlight()),this.ds(this.Ue,{isText:!0})}setValue(t){return this.Ji.getAnimationsEnabled()?this.getVisible()&&this.Ty(this.py,t):this.py=t,this.u=t,this.Ji.us.Ss(),this}getValue(){return this.u}setVisible(t){return t===!1?this.Ji.getAnimationsEnabled()&&this.py>0?(this._y&&(this._y.finish(!1),this._y=void 0),this.Ty(this.py,0,()=>super.setVisible(!1))):(this.py=0,super.setVisible(!1)):this.Ji.getAnimationsEnabled()?(this._y&&(this._y.finish(!1),this._y=void 0),super.setVisible(!0),this.Ty(this.py,this.u)):(this.py=this.u,super.setVisible(!0)),this}Ty(t,e,i){this._y=this.by(300,us.ease)([[t,e]],([s])=>{this.py=s,this.Ji.us.Ss()}),this._y.onEveryAnimationEnd(this.My),i&&this._y.onAnimationEnd(i)}setStyle(t,e,i,s){this.UT=t,this.yy=i,this.bT.Ce(this.UT).we(e),this.Ue.Ce(this.yy).Oh(s);for(let n=0;n<this.Qi.length;n+=1)this.styleAttachedEntry(this.Qi[n])}getAnimatedValue(){return this.py}Ie(t,e){return t.cs(e),this.Ji.us.Ss(),this}attach(t,e=!0,i=!1){return super.attach(t,e,i),this.styleAttachedEntry(t,e,i),this}styleAttachedEntry(t,e=!0,i=!1){ge(t,this.qi,i,{fill:this.UT,stroke:this.bT.ao()})}}var Mr;(function(r){r[r.VariableHeight=0]="VariableHeight",r[r.VariableWidth=1]="VariableWidth"})(Mr||(Mr={}));const pf=(r,t)=>{let e=100;return r<=0?r=0:(e=r>=100?100:r,r=t*(e/100)),r},v1=(r,t,e,i,s,n=0,o=Mr.VariableHeight,h)=>{t=pf(t,i.x),e=pf(e,i.x);const a=r.length;let l=0,u=0;l=r.reduce((A,v)=>A+v.getAnimatedValue(),0);let c={x:h-t/2,y:i.y+s.bottom},d={x:h+t/2,y:i.y+s.bottom},f={x:0,y:s.bottom},g={x:0,y:s.bottom},y=0,p=0;if(n)for(let A=0;A<r.length;A+=1){p+=r[A].getAnimatedValue();const w=o===Mr.VariableWidth?(i.y-n*a)/a:i.y+s.bottom-p/l*i.y;if(o===Mr.VariableWidth){n=w-n<10?Math.max(20,w-10):n;break}y!==0&&y-w-n<10&&(n=Math.max(0,y-w-10)),y=w}const x=(t-e)/2/i.y;for(let A=0;A<a;A+=1){const v=r[A];u+=v.getAnimatedValue();const w=o===Mr.VariableWidth?(i.y-n*a)/a:i.y+s.bottom-u/l*i.y;let E=0;A>0&&(c={x:f.x+x*n,y:f.y-n},d={x:g.x-x*n,y:g.y-n}),E=(t+u/l*(e-t))/2,f={x:h-E,y:parseInt(`${o===Mr.VariableWidth?c.y-w:w}`,10)},g={x:h+E,y:parseInt(`${o===Mr.VariableWidth?d.y-w:w}`,10)},d.x>=c.x&&g.x>f.x&&v.bT.pl([f,c,d,g])}};class b1 extends Ds{constructor(t,e,i,s,n,o,h){super(t,e,i,e.vm("funnelChart bg",0),s,e.us.qi.funnelChartBackgroundFillStyle,e.us.qi.funnelChartBackgroundStrokeStyle,e.us.qi.funnelChartTitleFont,e.us.qi.funnelChartTitleFillStyle,o),this.Fy=[],this.Iy=wc.None,this.By=!0,this.Ey=0,this.YT=80,this.HT=20,this.$T=0,this.XT=Mr.VariableHeight,this.Oy=!0,this.Gy=he.onHover,this.Wy=Tc,this.Uy=l=>{const u=this.Fy.indexOf(l);u>=0&&(this.Fy.splice(u,1),this.Yy())},this.us.Nn(ot.af),this.Ny=this.qi.effectsText,this.Hy=e.$y("funnelChart bottom",0),this.Xy=e.$y("funnelChart top",1),this._m.Rh("Funnel Chart"),this.Py=this.qi.funnelChartSliceFillStylePalette,this.Dy=this.qi.funnelChartSliceStrokeStyle,this.Ly=this.qi.funnelChartSliceLabelFont,this.Ry=this.qi.funnelChartSliceLabelFillStyle,this.jy=e.Zy();const a=qt(h?h.autoCursorBuilder:void 0,Ec);this.Pm=a.uy(this.jy,this.uiScale,this.uiScale,this.qi),this.setAnimationsEnabled((h==null?void 0:h.disableAnimations)!==!0&&(h==null?void 0:h.animationsEnabled)!==!1),this.Sm(n,this.pixelScale)}setAutoCursor(t){return this.Pm&&t(this.Pm),this.us.Ss(),this}getAutoCursor(){return this.Pm}setAutoCursorMode(t){return this.Gy=t,this.us.Ss(),this}getAutoCursorMode(){return this.Gy}setCursorResultTableFormatter(t){return this.Wy=t,this.us.Ss(),this}addSlice(t,e){const i=new A1(this.Ey,this.Hy,this.Xy,this,this.pixelScale,this.Uy,this.qi,this.us.es);return this.Ey+=1,i.setName(t),i.setValue(e),i.es.rs.ps(this.Ny),i.es.ns.ps(this.Oy),this.Fy.push(i),this.us.Ss(),i.setHighlightOnHover(this.By),i.onMouseMove(()=>{this.Gy&&this.us.Ss()}),i}addSlices(t){const e=[];for(let i=0;i<t.length;i+=1)e.push(this.addSlice(t[i].name,t[i].value));return e}getSlices(){return this.Fy}setHeadWidth(t){return this.YT=t,this.us.Ss(),this}getHeadWidth(){return this.YT}setNeckWidth(t){return this.HT=t,this.us.Ss(),this}getNeckWidth(){return this.HT}setSliceGap(t){return this.$T=Math.min(Math.max(t,0),20),this.us.Ss(),this}setSliceMode(t){return this.XT=t,this.us.Ss(),this}getFunnelSliceMode(){return this.XT}setLUT(t){return this.Nd=t,this.us.Ss(),this}setSliceFillStyle(t){return this.Py=t,this.us.Ss(),this}getSliceFillStyle(){return this.Py}setSliceStrokeStyle(t){return this.Dy=typeof t=="function"?t(this.Dy):t,this.us.Ss(),this}getSliceStrokeStyle(){return this.Dy}setSliceEffect(t){return this.Oy=t,this.Fy.forEach(e=>e.es.ns.ps(t)),this.us.Ss(),this}getSliceEffect(){return this.Oy}setSliceSorter(t){return this.Iy=t,this.Fy=this.Fy.sort(this.Iy),this.us.Ss(),this}getSliceSorter(){return this.Iy}setLabelFillStyle(t){return this.Ry=typeof t=="function"?t(this.Ry):t,this.us.Ss(),this}getLabelFillStyle(){return this.Ry}setLabelFont(t){return this.Ly=typeof t=="function"?t(this.Ly):t,this.us.Ss(),this}getLabelFont(){return this.Ly}setLabelEffect(t){return this.Ny=t,this.Fy.forEach(e=>e.es.rs.ps(t)),this.us.Ss(),this}getLabelEffect(){return this.Ny}setLabelFormatter(t){return this.Jy=t,this.us.Ss(),this}getLabelFormatter(){return this.Jy}setSliceHighlightOnHover(t){return this.By=t,this.Fy.forEach(e=>e.setHighlightOnHover(t)),this}Te(t){super.Te(t),ii.Fm(this._m,this.bm),super.pm();const e=ii.Tm(this._m,this.bm),i=N(this.pixelScale.x.getInnerInterval()-(this.ya.left+this.ya.right),this.pixelScale.y.getInnerInterval()-(this.ya.bottom+this.ya.top+e)),s=N(this.ya.left+i.x/2,this.ya.bottom+i.y/2);this.Fy=this.Fy.sort(this.Iy);for(let l=0,{length:u}=this.Fy;l<u;l+=1)this.Qy(this.Fy[l],l);const n=this.Fy.filter(l=>l.getAnimatedValue()>0);let o=0;for(let l=0;l<n.length;l+=1)o+=n[l].getAnimatedValue();const h=[];for(let l=0;l<n.length;l+=1)h.push((a=n[l].getAnimatedValue())>0?a/o:0);var a;for(let l=0;l<n.length;l+=1){const u=n[l];u.Ue.Rh(this.Jy(u,h[l])).Ps()}h.push(o),oi.Im(this,!1,!1,this.Fy,void 0,(l,u)=>Fi(u,this.engine.scale,this.Wy(new $e,this,l,h[n.indexOf(l)]||0).Zu(),l,void 0)),this.Ky(n,h,s,i)}Qy(t,e){t.setStyle(this.Nd?new H({color:this.Nd.getColors(t.getAnimatedValue())}):this.Py(e,t),this.Dy,this.Ry,this.Ly)}Yy(){this.Fy=this.Fy.sort(this.Iy),this.us.Ss()}Zd(){return this.Fy}dispose(){return this.Fy.slice().forEach(t=>t.dispose()),this.Pm.dispose(),this.Hy.W(),this.Xy.W(),this.jy.W(),super.dispose()}}const xf=(r,t,e)=>{const i=r.Sl();if(i.length>0){let s;const n=(i[1].y-i[0].y)/2+i[0].y;return s=t===zr.Left?(i[0].x-i[1].x)/2+i[1].x-e:(i[2].x-(i.length===4?i[3].x:i[1].x))/2+(i.length===4?i[3].x:i[1].x)+e,{x:s,y:n}}};class Oy extends b1{constructor(){super(...arguments),this.Jy=kc.NamePlusValue,this.jT=10,this.ZT=zr.Left,this.QT=Ia.LabelsOnSides,this.qy=[],this.ep=this.qi.funnelChartConnectorStrokeStyle}setLabelConnectorStyle(t){this.ep=t;for(let e=0;e<this.qy.length;e+=1)this.qy[e].Re(this.ep);return this.us.Ss(),this}getLabelConnectorStyle(){return this.ep}setLabelConnectorGap(t){return this.jT=t,this.us.Ss(),this}getLabelConnectorGap(){return this.jT}setLabelSide(t){return this.ZT=t,this.us.Ss(),this}getLabelSide(){return this.ZT}Ky(t,e,i,s){const n=this.jT;let o=0;for(let c=0;c<t.length;c+=1)o=Math.max(o,t[c].Ue.oi().x);const h=s.x+this.ya.left+this.ya.right,a=this.ZT===zr.Right?(this.ya.left+(h-(this.ya.right+o)))/2:(this.ya.left+o+(h-this.ya.right))/2,l=s.x-o,u=N(l,s.y);v1(t,this.YT,this.HT,u,this.ya,this.$T,this.XT,a),this.JT(t,this.ZT===zr.Left?-1:1,-1,i,s);for(let c=0;c<this.qy.length;c+=1)this.qy[c].setVisible(!1);for(let c=0;c<t.length;c+=1)t[c].getVisible()&&this.hp(this.KT(t[c],-1,i,n))}getMinimumSize(){return N(500,300)}JT(t,e,i,s,n){if(t.length===0)return;const o=s.x+e*n.x*.5,h=i===1?Math.max:Math.min;let a;for(let l=0;l<t.length;l+=1){const u=t[l];if(u.bT.Sl().length===0)u.Ue.setVisible(!1);else{let c;u.Ue.setVisible(!0),a&&(c=a.Ue.Fa().y+i*(a.Ue.oi().y+10));const d=(xf(u.bT,this.ZT,0)||N(0,0)).y,f=c===void 0?d:h(d,c);u.Ue.Fe(N(o,f)).Da(e).La(0),a=u}}}KT(t,e,i,s){const n=t.bT,o=t.Ue,h=xf(n,this.ZT,s);if(h){const a={x:Wn(this.ZT===zr.Left?o.Fa().x-e*(s+o.oi().x):o.Fa().x+e*(s+o.oi().x),h,i).x,y:ac(o.Fa().y,h,i).y};return[h,a,N(this.ZT===zr.Left?o.Fa().x-e*(s+o.oi().x):o.Fa().x+e*(s+o.oi().x),a.y)]}}hp(t){if(t){let e;for(let i=0;i<this.qy.length;i+=1)if(!this.qy[i].getVisible()){e=this.qy[i].setVisible(!0);break}e===void 0&&(e=this.Xy.rp(this.pixelScale,void 0,[ms.InternalUI]).Re(this.ep),this.qy.push(e)),e.Nt().nl(t)}}}var zr,Rr;(function(r){r[r.Right=0]="Right",r[r.Left=1]="Left"})(zr||(zr={}));class M1 extends Ds{constructor(t,e,i,s,n,o,h){super(t,e,i,e.vm("gaugeChart bg",0),s,e.us.qi.gaugeChartBackgroundFillStyle,e.us.qi.gaugeChartBackgroundStrokeStyle,e.us.qi.gaugeChartTitleFont,e.us.qi.gaugeChartTitleFillStyle,o),this.Fy=[],this.Uy=l=>{const u=this.Fy.indexOf(l);u>=0&&this.Fy.splice(u,1)},this.us.Nn(ot.lf),this.ks=e.$y("gaugeChart layer",0),this.Xy=e.$y("gaugeChart top layer",1),this._m.Rh("Gauge Chart"),this.Sm(n,this.pixelScale);const a=Ci();this.onBackgroundTouchStart(a.onTouchStart),this.onBackgroundTouchMove(a.onTouchMove),this.onBackgroundTouchEnd(a.onTouchEnd),this.setAnimationsEnabled(h===void 0||h)}dispose(){return this.ks.W(),this.Xy.W(),this.Fy.slice().forEach(t=>t.dispose()),super.dispose()}}class R1 extends M1{constructor(t,e,i,s,n,o,h){super(t,e,i,s,n,o,h),this.Xl=90,this.jl=-270,this.qT={min:this.Xl,max:this.jl},this.tF=yr(()=>this.ks.Ss()),this.iF=()=>{this.sF=void 0},this.eF=e.$y("radialGaugeChart bg arc",2),this.hF=this.ks.Jc(this.pixelScale).Ce(this.qi.gaugeChartEmptyGaugeFillStyle).we(this.qi.gaugeChartEmptyGaugeStrokeStyle)}setAngleInterval(t,e){t===e?e-=360:Math.abs(e-t)>360&&(e-=(e-t)%360);const i=this.Xl,s=this.jl,n=this.qT;return this.getAnimationsEnabled()?this.rF(n,{min:t,max:e}):(n.min=t,n.max=e,this.Xl=t,this.jl=e),this.D.emit("angleIntervalChange",this,{min:i,max:s},{min:t,max:e}),this.us.Ss(),this}getAngleInterval(){return{min:this.Xl,max:this.jl}}setGaugeFillStyle(t){return this.hF.Ce(t),this.us.Ss(),this}setGaugeStrokeStyle(t){return this.hF.we(t),this.us.Ss(),this}rF(t,e,i){this.sF=this.tF(1e3,us.ease)([[t.min,e.min],[t.max,e.max]],([s,n])=>{this.qT={min:s,max:n},this.Xl=s,this.jl=n,this.ks.Ss()}),this.sF.onEveryAnimationEnd(this.iF),i&&this.sF.onAnimationEnd(i)}onAngleIntervalChange(t){return this.D.on("angleIntervalChange",t)}offAngleIntervalChange(t){return this.D.off(t,"angleIntervalChange")}dispose(){return super.dispose(),this.eF.W(),this}}class E1 extends cl{nF(t){return this.D.on("valueChange",t)}oF(t){return this.D.on("valueIntervalChange",t)}offValueChange(t){return this.D.off(t,"valueChange")}offIntervalChange(t){return this.D.off(t,"valueIntervalChange")}attach(t,e=!0,i=!1){return super.attach(t,e,i),this.styleAttachedEntry(t,e,i),this}styleAttachedEntry(t,e=!0,i=!1){ge(t,this.qi,i,{fill:this.aF})}}class w1 extends E1{onValueChange(t){return this.nF(t)}onIntervalChange(t){return this.oF(t)}}class k1 extends w1{constructor(t,e,i,s,n,o,h){super(i,n,o,h),this.Xl=0,this.jl=0,this.lF=0,this.uF=0,this.cF=0,this.dF=100,this.fF=!0,this.py=this.u,this.vy=this.getVisible(),this.by=Tg(),this.AF=a=>{this.py=a,this.Ji.us.Ss()},this.gF=t,this.Dr=e,this.Ji=i,this.scale=s,this.aF=this.qi.gaugeChartGaugeFillStyle,this.ky=t.Jc(s).Ce(this.aF).we(it).cs(this.getHighlight()),this.ds(this.ky),this.mF=e.Pr(s).cs(this.getHighlight()),this.ds(this.mF,{isText:!0}),this.yF=e.Pr(s).cs(this.getHighlight()),this.ds(this.yF,{isText:!0}),this.Ue=e.Pr(s).cs(this.getHighlight()),this.ds(this.Ue,{isText:!0}),this.mF.Ce(o.gaugeChartIntervalLabelsFillStyle).Oh(o.gaugeChartIntervalLabelsFont),this.yF.Ce(o.gaugeChartIntervalLabelsFillStyle).Oh(o.gaugeChartIntervalLabelsFont),this.Ue.Ce(o.gaugeChartValueLabelFillStyle).Oh(o.gaugeChartValueLabelFont),this.setName("Gauge Slice")}Te(){const t=this.Ji.getDataLabelFormatter(),e=this.Xl/90<this.jl/90?1:-1;let i=this.Ji.getAnimationsEnabled()?this.py:this.u;const[s,n]=this.cF<this.dF?[this.cF,this.dF]:[this.dF,this.cF];i<s?i=s:i>n&&(i=n);const o=this.jl-e*this.uF,h=this.Xl+e*this.lF,a=this.dF-this.cF,l=(a!==0?(o-h)/a:1/0)*(i-this.cF);this.ky.eu(h).ze(h+l);const u=typeof t=="function"?t(i,{getInnerStart:()=>s,getInnerEnd:()=>n}):t.format(i);this.Ue.Rh(u)}pF(){const t=this.Ji.getIntervalLabelFormatter(),e=typeof t=="function"?t(this.cF,{getInnerStart:()=>this.cF,getInnerEnd:()=>this.dF}):t.format(this.cF);return this.mF.Rh(e).Ps(),this.mF.oi()}SF(){const t=this.Ji.getIntervalLabelFormatter(),e=typeof t=="function"?t(this.dF,{getInnerStart:()=>this.cF,getInnerEnd:()=>this.dF}):t.format(this.dF);return this.yF.Rh(e).Ps(),this.yF.oi()}setName(t){return super.setName(t),this.Ji.us.Ss(),this}setValue(t){const e=this.u;return this.Ji.getAnimationsEnabled()?this.vy&&this.by(e,t,this.AF):this.py=t,this.u=t,this.D.emit("valueChange",this,e,t),this.Ji.us.Ss(),this}getValue(){return this.u}setVisible(t){return this.vy=t,t===!1?this.Ji.getAnimationsEnabled()&&this.py>0?this.by(this.py,0,this.AF,{onCompleted:()=>super.setVisible(!1)}):(this.py=0,super.setVisible(!1)):this.Ji.getAnimationsEnabled()?(super.setVisible(!0),this.by(this.py,this.u,this.AF)):(this.py=this.u,super.setVisible(!0)),this}setInterval(t,e){const i=this.cF,s=this.dF;return this.D.emit("valueIntervalChange",this,{min:i,max:s},{min:t,max:e}),this.cF=t,this.dF=e,this.Ji.us.Ss(),this}setIntervalLabelsFont(t){return this.mF.Oh(t),this.yF.Oh(t),this.Ji.us.Ss(),this}getIntervalLabelsFont(){return this.mF.Vh()}setIntervalLabelsFillStyle(t){return this.mF.Ce(t),this.yF.Ce(t),this.Ji.us.Ss(),this}getIntervalLabelsFillStyle(){return this.mF.Eh()}setIntervalLabelsVisible(t){return t?(this.mF.setVisible(!0),this.yF.setVisible(!0)):(this.mF.setVisible(!1),this.yF.setVisible(!1)),this.fF=t,this}getIntervalLabelsVisible(){return this.fF}setAngleInterval(t,e){return this.Xl=t,this.jl=e,this.Ji.us.Ss(),this}setMinAngle(t){return this.Xl=t,this.Ji.us.Ss(),this}setMaxAngle(t){return this.jl=t,this.Ji.us.Ss(),this}setMarginInDegrees(t=this.lF,e=this.uF){return t!==this.lF&&(this.lF=t),e!==this.uF&&(this.uF=e),this.Ji.us.Ss(),this}setFillStyle(t){this.aF=typeof t=="function"?t(this.aF):t;const e=this.aF;this.ky.Ce(e);for(let i=0;i<this.Qi.length;i+=1)this.styleAttachedEntry(this.Qi[i]);return this.Ji.us.Ss(),this}vF(t){return this.Ue.Ce(t),this.Dr.Ss(),this}bF(){return this.Ue.Eh()}getAnimatedValue(){return this.py}}function _a(r,t,e,i,s,n=Math.floor(Math.sqrt(i>s?25*i:25*s))){const o=Array(n+2),h=Math.PI;let a=0,l=0;const u=t*h/180,c=(e*h/180-u)/n;for(o[a]=N(r.x,r.y),a+=1;a<=n+1;)o[a]=N(r.x+i*Math.cos(u+l*c),r.y+s*Math.sin(u+l*c)),a+=1,l+=1;return[o,n]}class Yy extends R1{constructor(t,e,i,s,n,o,h){super(t,e,i,s,n,o,h),this.Vd=20,this.xF=new Intl.NumberFormat,this.MF=new Intl.NumberFormat,this._F=!1,this.wF=5;const a=new k1(this.ks,this.Xy,this,this.pixelScale,this.Uy,this.qi,this.us.es);this.CF=a,this.Fy.push(a),this.setPadding(10)}Te(t){super.Te(t),ii.Fm(this._m,this.bm),super.pm();const e=ii.Tm(this._m,this.bm),i=ce([this.CF.pF(),this.CF.SF()]),s=N(this.pixelScale.x.getInnerInterval()-(this.ya.left+this.ya.right+2*i.max.x),this.pixelScale.y.getInnerInterval()-(this.ya.bottom+this.ya.top+1*i.max.y+e)),n=Math.max(.5*Math.min(s.x,s.y),0),o=N(this.ya.left+i.max.x+.5*s.x,this.ya.bottom+i.max.y+.5*s.y),h=this._F?this.kF(o,n):o,a=this.hF.xe.getThickness(),l=n-.5*a,u=n-this.Vd;let c=u/n*100;c=c>100||c<0?99:c;const d=100*(1-(this.Vd-a)/n);this.TF(h,u)&&(this.hF.hu(n).ou(c),this.CF.ky.hu(l).ou(d));const f=.5*(g=n,(y=this.jl-this.Xl)/(2*Math.PI*g*(y/360))*a);var g,y;this.hF.eu(this.Xl).ze(this.jl).Fe(h),this.CF.ky.Fe(h),this.CF.Ue.Fe(h),this.Nd&&this.CF.setFillStyle(new H({color:this.Nd.getColors(this.CF.getAnimatedValue())})),this.CF.setMinAngle(this.Xl).setMaxAngle(this.jl).setMarginInDegrees(f,f).Te();const p=this.hF.Zl();if(this.CF.getIntervalLabelsVisible()){this.FF(this.Xl,this.jl,h,p+this.wF);const x=this.CF.mF.Ps().We(),A=this.CF.yF.Ps().We();ba(x,A)&&this.IF(x,A,h,p+this.wF)}}TF(t,e){const i=St(this.CF.Ue.Ps().oi(),.5),s=t.x+e,n=t.x-e,o=t.y+e,h=t.y-e;return!(t.x+i.x>s||t.x-i.x<n||t.y+i.y>o||t.y-i.y<h)}IF(t,e,i,s){const n=Dg(t,e),[o,h]=[Cd(hs(this.Xl)),Cd(hs(this.jl))],[a,l]=o!==h||o!==1&&o!==3?[Ut(n.min,i),Ut(n.max,i)]:[Ut(N(n.min.x,n.max.y),i),Ut(N(n.max.x,n.min.y),i)],u=a.x*l.x+a.y*l.y,c=Pr(a)*Pr(l),d=.7*Ig(Math.acos(u/c)),[f,g]=this.PF();this.FF(this.Xl-f*d,this.jl-g*d,i,s)}PF(){const t=this.jl-this.Xl,e=Math.sign(t);let i=Math.sign(this.Xl),s=Math.sign(this.jl);return i===s&&(e>=0?i=-s:s=-i),[i,s]}kF(t,e){const[i]=_a(t,this.Xl,this.jl,e,e),s=ce(i),n=.5*(s.max.x-s.min.x),o=.5*(s.max.y-s.min.y);return gt(Ut(t,N(s.min.x+n,s.min.y+o)),t)}FF(t,e,i,s){const n=hs(t),o=hs(e);this.CF.mF.Fe(ur(N(i.x+s,i.y),i,-n)),this.CF.yF.Fe(ur(N(i.x+s,i.y),i,-o)),this.CF.mF.Ea(N(-Math.cos(n),-Math.sin(n))),this.CF.yF.Ea(N(-Math.cos(o),-Math.sin(o)))}getDefaultSlice(){return this.CF}setAutoScaling(t){return this._F=t,this.us.Ss(),this}getAutoScaling(){return this._F}setDataLabelFormatter(t){return this.MF=t,this.us.Ss(),this}getDataLabelFormatter(){return this.MF}setIntervalLabelFormatter(t){return this.xF=t,this.us.Ss(),this}getIntervalLabelFormatter(){return this.xF}setIntervalLabelPadding(t){return this.wF=t,this.us.Ss(),this}getIntervalLabelPadding(){return this.wF}setThickness(t){return this.Vd=t,this}setLUT(t){return this.Nd=t,this.us.Ss(),this}setDataLabelFont(t){return this.CF.Ue.Oh(t),this.us.Ss(),this}getDataLabelFont(){return this.CF.Ue.Vh()}getMinimumSize(){return N(500,300)}setDataLabelFillStyle(t){return this.CF.vF(t),this.us.Ss(),this}getDataLabelFillStyle(){return this.CF.bF()}Zd(){return this.Fy}dispose(){return this.CF.dispose(),super.dispose()}}class T1 extends cl{}class C1 extends T1{constructor(t,e,i,s,n,o,h,a){super(s,o,h,a),this.xs="Slice",this.u=0,this.gy=!1,this.UT=ft,this.yy=ft,this.py=this.u,this.by=yr(()=>this.Ji.us.Ss()),this.My=()=>{this._y=void 0},this.index=t,this.Ji=s,this.scale=n,this.Ki=o,this.bT=e.ic(n,ys.Simple).cs(this.getHighlight()),this.ds(this.bT),this.Ue=i.Pr(n).cs(this.getHighlight()),this.ds(this.Ue,{isText:!0})}setValue(t){return this.Ji.getAnimationsEnabled()?this.getVisible()&&this.Ty(this.py,t):this.py=t,this.u=t,this.Ji.us.Ss(),this}getValue(){return this.u}setVisible(t){return t===!1?this.Ji.getAnimationsEnabled()&&this.py>0?(this._y&&(this._y.finish(!1),this._y=void 0),this.Ty(this.py,0,()=>super.setVisible(!1))):(this.py=0,super.setVisible(!1)):this.Ji.getAnimationsEnabled()?(this._y&&(this._y.finish(!1),this._y=void 0),super.setVisible(!0),this.Ty(this.py,this.u)):(this.py=this.u,super.setVisible(!0)),this}Ty(t,e,i){this._y=this.by(300,us.ease)([[t,e]],([s])=>{this.py=s,this.Ji.us.Ss()}),this._y.onEveryAnimationEnd(this.My),i&&this._y.onAnimationEnd(i)}setStyle(t,e,i,s){this.UT=t,this.yy=i,this.bT.Ce(this.UT).we(e),this.Ue.Ce(this.yy).Oh(s);for(let n=0;n<this.Qi.length;n+=1)this.styleAttachedEntry(this.Qi[n])}getAnimatedValue(){return this.py}attach(t,e=!0,i=!1){return super.attach(t,e,i),this.styleAttachedEntry(t,e,i),this}styleAttachedEntry(t,e=!0,i=!1){ge(t,this.qi,i,{fill:this.UT,stroke:this.bT.ao()})}}(function(r){r[r.VariableHeight=0]="VariableHeight",r[r.VariableWidth=1]="VariableWidth"})(Rr||(Rr={}));const Sf=(r,t)=>{let e=100;return r<=0?r=0:(e=r>=100?100:r,r=t*(e/100)),r},F1=(r,t,e,i,s,n=0,o=Rr.VariableHeight,h)=>{t=Sf(t,i.x),e=Sf(e,i.x);const a=r.length;let l=0,u=0;l=r.reduce((A,v)=>A+v.getAnimatedValue(),0);let c={x:h-t/2,y:i.y+s.bottom},d={x:h+t/2,y:i.y+s.bottom},f={x:0,y:s.bottom},g={x:0,y:s.bottom},y=0,p=0;if(n)for(let A=0;A<r.length;A+=1){p+=r[A].getAnimatedValue();const w=o===Rr.VariableWidth?(i.y-n*a)/a:i.y+s.bottom-p/l*i.y;if(o===Rr.VariableWidth){n=w-n<10?Math.max(20,w-10):n;break}y!==0&&y-w-n<10&&(n=Math.max(0,y-w-10)),y=w}const x=(t-e)/2/i.y;for(let A=0;A<a;A+=1){const v=r[A];u+=v.getAnimatedValue();const w=o===Rr.VariableWidth?(i.y-n*a)/a:i.y+s.bottom-u/l*i.y;let E=0;A>0&&(c={x:f.x+x*n,y:f.y-n},d={x:g.x-x*n,y:g.y-n}),E=(t+u/l*(e-t))/2,f={x:h-E,y:parseInt(`${o===Rr.VariableWidth?c.y-w:w}`,10)},g={x:h+E,y:parseInt(`${o===Rr.VariableWidth?d.y-w:w}`,10)},d.x>=c.x&&g.x>=f.x&&v.bT.pl([f,c,d,g])}};class D1 extends Ds{constructor(t,e,i,s,n,o,h){super(t,e,i,e.vm("pyramidChart bg",0),s,e.us.qi.pyramidChartBackgroundFillStyle,e.us.qi.pyramidChartBackgroundStrokeStyle,e.us.qi.pyramidChartTitleFont,e.us.qi.pyramidChartTitleFillStyle,o),this.Fy=[],this.Iy=wc.None,this.Py=this.qi.pyramidChartSliceFillStylePalette,this.Dy=this.qi.pyramidChartSliceStrokeStyle,this.By=!0,this.Ly=this.qi.pyramidChartSliceLabelFont,this.Ry=this.qi.pyramidChartSliceLabelFillStyle,this.Ey=0,this.YT=0,this.HT=80,this.$T=0,this.XT=Rr.VariableHeight,this.Oy=!0,this.Gy=he.onHover,this.Wy=Tc,this.Uy=l=>{const u=this.Fy.indexOf(l);u>=0&&(this.Fy.splice(u,1),this.Yy())},this.us.Nn(ot.af),this.Ny=this.qi.effectsText,this.Hy=e.$y("pyramidChart bottom",0),this.Xy=e.$y("pyramidChart top",1),this._m.Rh("Pyramid Chart"),this.jy=e.Zy();const a=qt(h?h.autoCursorBuilder:void 0,Ec);this.Pm=a.uy(this.jy,this.uiScale,this.uiScale,this.qi),this.Sm(n,this.pixelScale),this.setAnimationsEnabled((h==null?void 0:h.disableAnimations)!==!0&&(h==null?void 0:h.animationsEnabled)!==!1)}setAutoCursor(t){return this.Pm&&t(this.Pm),this.us.Ss(),this}getAutoCursor(){return this.Pm}setAutoCursorMode(t){return this.Gy=t,this.us.Ss(),this}getAutoCursorMode(){return this.Gy}setCursorResultTableFormatter(t){return this.Wy=t,this.us.Ss(),this}addSlice(t,e){const i=new C1(this.Ey,this.Hy,this.Xy,this,this.pixelScale,this.Uy,this.qi,this.us.es);return this.Ey+=1,i.setName(t),i.setValue(e),i.es.rs.ps(this.Ny),i.es.ns.ps(this.Oy),this.Fy.push(i),this.us.Ss(),i.onMouseMove(()=>{this.Gy&&this.us.Ss()}),i}addSlices(t){const e=[];for(let i=0;i<t.length;i+=1)e.push(this.addSlice(t[i].name,t[i].value));return e}getSlices(){return this.Fy}setNeckWidth(t){return this.HT=t,this.us.Ss(),this}getNeckWidth(){return this.HT}setSliceGap(t){return this.$T=Math.min(Math.max(t,0),20),this.us.Ss(),this}setSliceMode(t){return this.XT=t,this.us.Ss(),this}getPyramidSliceMode(){return this.XT}setLUT(t){return this.Nd=t,this.us.Ss(),this}setSliceFillStyle(t){return this.Py=t,this.us.Ss(),this}getSliceFillStyle(){return this.Py}setSliceStrokeStyle(t){return this.Dy=typeof t=="function"?t(this.Dy):t,this.us.Ss(),this}getSliceStrokeStyle(){return this.Dy}setSliceEffect(t){return this.Oy=t,this.Fy.forEach(e=>e.es.ns.ps(t)),this.us.Ss(),this}getSliceEffect(){return this.Oy}setSliceSorter(t){return this.Iy=t,this.Fy=this.Fy.sort(this.Iy),this.us.Ss(),this}getSliceSorter(){return this.Iy}setLabelFillStyle(t){return this.Ry=typeof t=="function"?t(this.Ry):t,this.us.Ss(),this}getLabelFillStyle(){return this.Ry}setLabelFont(t){return this.Ly=typeof t=="function"?t(this.Ly):t,this.us.Ss(),this}getLabelFont(){return this.Ly}setLabelEffect(t){return this.Ny=t,this.Fy.forEach(e=>e.es.rs.ps(t)),this.us.Ss(),this}getLabelEffect(){return this.Ny}setLabelFormatter(t){return this.Jy=t,this.us.Ss(),this}getLabelFormatter(){return this.Jy}setSliceHighlightOnHover(t){return this.By=t,this.Fy.forEach(e=>e.setHighlightOnHover(t)),this}Te(t){super.Te(t),ii.Fm(this._m,this.bm),super.pm();const e=ii.Tm(this._m,this.bm),i=N(this.pixelScale.x.getInnerInterval()-(this.ya.left+this.ya.right),this.pixelScale.y.getInnerInterval()-(this.ya.bottom+this.ya.top+e)),s=N(this.ya.left+i.x/2,this.ya.bottom+i.y/2);this.Fy=this.Fy.sort(this.Iy);for(let l=0,{length:u}=this.Fy;l<u;l+=1)this.Qy(this.Fy[l],l);const n=this.Fy.filter(l=>l.getAnimatedValue()>0);let o=0;for(let l=0;l<n.length;l+=1)o+=n[l].getAnimatedValue();const h=[];for(let l=0;l<n.length;l+=1)h.push((a=n[l].getAnimatedValue())>0?a/o:0);var a;for(let l=0;l<n.length;l+=1){const u=n[l];u.Ue.Rh(this.Jy(u,h[l])).Ps()}h.push(o),oi.Im(this,!1,!1,this.Fy,void 0,(l,u)=>Fi(u,this.engine.scale,this.Wy(new $e,this,l,h[n.indexOf(l)]||0).Zu(),l,void 0)),this.Ky(n,h,s,i)}Qy(t,e){t.setStyle(this.Nd?new H({color:this.Nd.getColors(t.getAnimatedValue())}):this.Py(e,t),this.Dy,this.Ry,this.Ly)}Yy(){this.Fy=this.Fy.sort(this.Iy),this.us.Ss()}Zd(){return this.Fy}dispose(){return this.Fy.slice().forEach(t=>t.dispose()),this.Pm.dispose(),this.Hy.W(),this.Xy.W(),this.jy.W(),super.dispose()}}const Af=(r,t,e)=>{const i=r.Sl();if(i.length>0){let s;const n=(i[1].y-i[0].y)/2+i[0].y;return s=t===Br.Left?(i[0].x-i[1].x)/2+i[1].x-e:(i[2].x-(i.length===4?i[3].x:i[1].x))/2+(i.length===4?i[3].x:i[1].x)+e,{x:s,y:n}}};class Wy extends D1{constructor(){super(...arguments),this.Jy=kc.NamePlusValue,this.jT=10,this.ZT=Br.Left,this.QT=Ia.LabelsOnSides,this.qy=[],this.ep=this.qi.pyramidChartConnectorStrokeStyle}setLabelConnectorStyle(t){this.ep=t;for(let e=0;e<this.qy.length;e+=1)this.qy[e].Re(this.ep);return this.us.Ss(),this}getLabelConnectorStyle(){return this.ep}setLabelConnectorGap(t){return this.jT=t,this.us.Ss(),this}getLabelConnectorGap(){return this.jT}setLabelSide(t){return this.ZT=t,this.us.Ss(),this}getLabelSide(){return this.ZT}Ky(t,e,i,s){const n=this.jT;let o=0;for(let c=0;c<t.length;c+=1)o=Math.max(o,t[c].Ue.oi().x);const h=s.x+this.ya.left+this.ya.right,a=this.ZT===Br.Right?(this.ya.left+(h-(this.ya.right+o)))/2:(this.ya.left+o+(h-this.ya.right))/2,l=s.x-o,u=N(l,s.y);F1(t,this.YT,this.HT,u,this.ya,this.$T,this.XT,a),this.JT(t,this.ZT===Br.Left?-1:1,-1,i,s);for(let c=0;c<this.qy.length;c+=1)this.qy[c].setVisible(!1);for(let c=0;c<t.length;c+=1)if(t[c].getVisible()){const d=this.KT(t[c],-1,i,n);d&&this.hp(d)}}getMinimumSize(){return N(500,300)}JT(t,e,i,s,n){if(t.length===0)return;const o=s.x+e*n.x*.5,h=i===1?Math.max:Math.min;let a;for(let l=0;l<t.length;l+=1){const u=t[l];let c;u.bT.Sl().length===0?u.Ue.setVisible(!1):u.Ue.setVisible(!0),a&&(c=a.Ue.Fa().y+i*(a.Ue.oi().y+10));const d=Af(u.bT,this.ZT,0);if(d){const f=d.y,g=c===void 0?f:h(f,c);u.Ue.Fe(N(o,g)).Da(e).La(0)}a=u}}KT(t,e,i,s){const n=t.bT,o=t.Ue,h=Af(n,this.ZT,s);if(h){const a={x:Wn(this.ZT===Br.Left?o.Fa().x-e*(s+o.oi().x):o.Fa().x+e*(s+o.oi().x),h,i).x,y:ac(o.Fa().y,h,i).y};return[h,a,N(this.ZT===Br.Left?o.Fa().x-e*(s+o.oi().x):o.Fa().x+e*(s+o.oi().x),a.y)]}}hp(t){let e;for(let i=0;i<this.qy.length;i+=1)if(!this.qy[i].getVisible()){e=this.qy[i].setVisible(!0);break}e===void 0&&(e=this.Xy.rp(this.pixelScale,void 0,[ms.InternalUI]).Re(this.ep),this.qy.push(e)),e.Nt().nl(t)}}var Br;(function(r){r[r.Right=0]="Right",r[r.Left=1]="Left"})(Br||(Br={}));const P1=(r,t,e,i,s,n)=>(r.alignmentX=(s+Math.PI/2)%(2*Math.PI)<=Math.PI?-1:1,r.alignmentY=s%(2*Math.PI)<=Math.PI?-1:1,r.paddingX=Math.cos(s)*n,r.paddingY=Math.sin(s)*n,r),I1=(r,t,e,i,s,n,o,h)=>{if(t===0)return r.paddingX=h,r.alignmentX=-1,r};var yh;(function(r){r[r.Normal=0]="Normal",r[r.Circle=1]="Circle"})(yh||(yh={}));class V1{constructor(t,e,i,s,n,o,h,a){this.D=new Xe,this.DF=t,this.Dr=e,this.scale=i,this.chart=s,this.tag=n,this.axisScale=o,this.BF=h,this.LF=a,this.RF=this.DF.Ee(this.scale).setMouseInteractions(!1),this.EF=this.Dr.Pr(this.scale).Rh(this.tag).setMouseInteractions(!1),this.zF=this.BF(this,this.DF.rp(this.scale,void 0,[ms.InternalUI])).Re(this.chart.getNibStyle()),this.LF.fs([this.EF])}Ky(t,e,i,s,n,o,h){const a=e.length,l=e[i>0?i-1:a-1],u=e[i],c=e[i<a-1?i+1:0],d=this.chart.getNibLength();this.RF.Ve(t).ze(u).Re(this.chart.getAxisStyle()),this.zF.Nt().nl(o===yh.Normal?[Dr(u,l,Rt(.5*d/Pr(Ut(l,u)),0,1)),u,Dr(u,c,Rt(.5*d/Pr(Ut(c,u)),0,1))]:((f,g,y,p,x=2)=>{const A=p/y,v=[];for(let w=-p/2;w<=p/2;w+=x){const E=A*(w/p)+g,C=N(f.x+Math.cos(E)*y,f.y+Math.sin(E)*y);v.push(C)}return v})(t,s,n,d)),h?this.EF.setVisible(!0).Fe(gt(u,N(h.paddingX,h.paddingY))).Da(h.alignmentX).La(h.alignmentY):this.EF.setVisible(!1)}getLabelSize(){return this.EF.Oh(this.chart.getAxisLabelFont()).Ce(this.chart.getAxisLabelStyle()).Ps().oi()}dispose(){this.RF&&this.RF.dispose(),this.EF&&this.EF.dispose(),this.zF&&this.zF.dispose()}}const _1=(r,t,e,i,s)=>{const n=t.getIcon();return n?r.addRow(n,t.getName()):r.addRow(t.getName()),r.addRow("Axis:","",i).addRow("Value:","",s(e))};class N1 extends dl{constructor(t,e,i,s,n,o,h,a,l,u,c,d){super(t,l,u,d),this.xs="Spider Series",this.yu=new Map,this.Hi=Rs.onHover,this.Wy=_1,this.Hx=8,this.Aa=0,this.VF=Tg(),this.OF={},this.NF={},this.vy=this.getVisible(),this.GF=1,this.WF=((f,g)=>{const y=yr(()=>{});let p,x,A=1;return(v,w,E)=>{if(v===x)return;x=v;const C=(E==null?void 0:E.easing)||us.ease,k=(E==null?void 0:E.durationMs)||1e3;p&&(p.finish(!1),p=void 0),v===!1?w&&A?(p=y(k,C)([[A,0]],([F])=>{A=F,f(A)}),p.onAnimationEnd(()=>{p=void 0,g(!1)})):(A=0,g(!1)):w?(g(!0),p=y(k,C)([[A,1]],([F])=>{A=F,f(A)}),p.onAnimationEnd(()=>{p=void 0})):(A=1,g(!0))}})(f=>{this.GF=f,this.ks.us.Ss()},f=>{super.setVisible(f)}),this.Ji=t,this.ks=e,this.$x=s,this.UF=n,this.ab=o,this.YF=h,this.HF=a,this.scale=i,this.$F=kt(u.spiderSeriesFillStyle,c),this.XF=kt(u.spiderSeriesStrokeStyle,c),this.jF=kt(u.spiderSeriesPointFillStyle,c)}Kp(){return this.tS&&this.yu.size>0&&this.getVisible()}addPoints(...t){this.yu.size>0&&this.Ji.us.Nn(ot.vf),t=t.filter(e=>e.axis!==void 0);for(let e=0;e<t.length;e+=1)this.UF(t[e].axis);if(this.Ji.getAnimationsEnabled()&&this.OF!==void 0){const e=new Map;let i;t.forEach(s=>e.set(s.axis,s.value)),this.VF(0,1,s=>{e.forEach((n,o)=>{const h=(i==null?void 0:i.get(o))||0;this.yu.set(o,h+s*(n-h)),this.ks.us.Ss()})},{easing:this.OF.easing,durationMs:this.OF.durationMs,onStart:()=>{i=new Map(this.yu)}})}else for(let e=0;e<t.length;e+=1){const i=t[e].axis;this.yu.set(i,t[e].value)}return this.ks.Ss(),this}getValue(t,e=!1){const i=this.yu.get(t),s=this.Ji.getOriginValue();if(i!==void 0)return e?s+this.GF*(i-s):i}setAnimationAddPoints(t,e){return this.OF=t?{easing:t,durationMs:e}:void 0,this.ks.Ss(),this}setVisibleStateChangedAnimation(t,e){return this.NF=t?{easing:t,durationMs:e}:void 0,this.ks.Ss(),this}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}setCursorEnabled(t){return super.setCursorEnabled(t)}setFillStyle(t){return this.$F=typeof t=="function"?t(this.$F):t,this.bT&&(this.bT.Ce(this.$F),this.ks.Ss()),this}getFillStyle(){return this.$F}setStrokeStyle(t){return this.XF=typeof t=="function"?t(this.XF):t,this.bT&&(this.bT.we(this.XF),this.ks.Ss()),this}getStrokeStyle(){return this.XF}setPointFillStyle(t){return this.jF=typeof t=="function"?t(this.jF):t,this.Xx&&(this.Xx.Ce(this.jF),this.ks.Ss()),this}getPointFillStyle(){return this.jF}setPointSize(t){return this.Hx=t,this.Xx&&this.Xx.q(t),this}getPointSize(){return this.Hx}getPointShape(){return this.$x}setPointRotation(t){return this.Aa=t,this.Xx&&this.Xx.Nh(t),this.ks.Ss(),this}getPointRotation(){return this.Aa}Te(){if(super.Te(),!this.$i){const t=new Array(this.ab.length),e=this.Ji.getOriginValue();for(let i=0;i<this.ab.length;i+=1){const s=this.yu.get(this.ab[i].tag);t[i]=s!==void 0?this.YF(this.ab[i].tag,e+this.GF*(s-e)):this.YF(this.ab[i].tag,e)}Rg(t),t.length>=3&&(this.bT||(this.bT=this.ks.ic(this.scale,ys.Simple).we(this.XF).Ce(this.$F).cs(this.getHighlight()),this.ds(this.bT)),this.bT.pl(t),this.Xx||(this.Xx=this.ks.bS(this.scale).q(this.Hx).il(this.$x).Nh(this.Aa).Ce(this.jF).cs(this.getHighlight()),this.ds(this.Xx)),this.Xx.Nt().nl(t))}}attach(t,e=!0,i=!1){return super.attach(t,e,i),ge(t,this.qi,i,{fill:this.$F,stroke:this.XF}),this}Cs(){return this.bs||this.$x}ZF(){for(let t=0;t<this.Qi.length;t+=1)ge(this.Qi[t],this.qi,!1,{fill:this.$F,stroke:this.XF})}Hc(t,e){if(this.bT){const i=this.HF(t);if(i!==void 0&&this.yu.has(i.tag)){const s=this.yu.get(i.tag),n=this.YF(i.tag,s);return Fi(n,this.scale,this.Wy(new $e,this,s,i.tag,this.Ji.formatValue).Zu(),this,this.$F)}}}solveNearestFromScreen(t){return this.Hc(ei(t,this.Ji.us),!1)}Ie(t,e){return t.cs(e),this.ks.Ss(),this}setVisible(t){var e,i;return this.vy=t,this.WF(t,this.Ji.getAnimationsEnabled()&&this.NF!==void 0,{easing:(e=this.NF)===null||e===void 0?void 0:e.easing,durationMs:(i=this.NF)===null||i===void 0?void 0:i.durationMs}),this}}const Oo=(r,t)=>{const e=Math.PI/2-2*r*Math.PI/t;return e>=0?e:e+2*Math.PI},L1=r=>ce(r.EF.We()),z1=r=>ce(r.We()),Wl=(r,t,e,i)=>r.ou(0).Fe(e).eu(90).ze(-270).au(t===yh.Circle?void 0:i.length),Yo={alignmentX:0,alignmentY:0,paddingX:0,paddingY:0},jn={alignmentX:0,alignmentY:0,paddingX:0,paddingY:0},vf=()=>{jn.alignmentX=0,jn.alignmentY=0,jn.paddingX=0,jn.paddingY=0};class Hy extends Dh{constructor(t,e,i,s,n,o,h){super(t,e,i,e.vm("spiderChart bg",0),s,e.us.qi.spiderChartBackgroundFillStyle,e.us.qi.spiderChartBackgroundStrokeStyle,e.us.qi.spiderChartTitleFont,e.us.qi.spiderChartTitleFillStyle,h),this.ya=Tr(20,20,20,20),this.axisScale=ui.d1({scale1DConstructor:Hi,dimension:"x"}).J(0,1),this.ab=[],this.QF=[],this.JF=[],this.KF=Fs.expansion,this.qF=!0,this.tI=I1,this.iI=P1,this.Bo=!0,this.sI=yh.Normal,this.eI=4,this.hI=this.qi.spiderChartWebStyle,this.rI=this.qi.spiderChartScaleLabelFillStyle,this.nI=this.qi.spiderChartScaleLabelFont,this.oI=5,this.aI=this.qi.spiderChartAxisLabelFillStyle,this.lI=this.qi.spiderChartAxisLabelFont,this.uI=5,this.cI=this.qi.spiderChartAxisStrokeStyle,this.dI=this.qi.spiderChartAxisNibStrokeStyle,this.Pf=10,this.fI=Tr(),this.Gy=he.onHover,this.hasAxis=l=>this.ab.reduce((u,c)=>u||c.tag===l,!1),this.formatValue=l=>this.axisScale.Di(l,or.Numeric),this.AI=()=>{const l=this.ab.map(L1).concat(this.JF.map(z1));return Pg(l)},this.gI=()=>this.mI.Jc(this.pixelScale).setMouseInteractions(!1),this.yI=l=>l.dispose(),this.pI=()=>this.bA.Pr(this.pixelScale).setMouseInteractions(!1),this.SI=l=>l.dispose(),this.vI=l=>this.formatValue(this.axisScale.getInnerStart()+l*(this.axisScale.getInnerEnd()-this.axisScale.getInnerStart())),this.bI=(l,u)=>{let c,d;const f=()=>{this.xI!==void 0&&this.xI.finish(),c=wt(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd()),d=this.KF,this.KF=void 0},g=(x,A,v,w,E)=>{const C=N(v.x-A.x,A.y-v.y),k=this.ab.findIndex(F=>F===l);if(k>=0&&c!==void 0){const F=Oo(k,this.ab.length),m=N(Math.cos(F),Math.sin(F)),S=C.x*m.x+C.y*m.y,b=Pr(Ut(l.RF.Ii(),l.RF.Ti())),M=c.min+(c.max-c.min)*Math.max(1+S/b,.01);this.axisScale.J(c.min,M),tt(E),this.us.Ss()}},y=()=>{if(c=void 0,d!==void 0)if(this.th){const x=wt(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd()),A=this.MI(),v=d;if(A!==void 0){const w=v.start(x.min,x.max,A.min,A.max),E=v.end(x.min,x.max,A.min,A.max);this.xI=this.qg.us.sn(300,us.ease)([[0,1]],([C])=>{this.axisScale.J(x.min+C*(w-x.min),x.max+C*(E-x.max))}),this.xI.onAnimationEnd(()=>{this.xI=void 0,this.KF=v})}else this.KF=d}else this.KF=d;d=void 0};u.setMouseEnterEventHandler(this._I).setMouseLeaveEventHandler(this.wI).setMouseDragStartEventHandler(f).setMouseDragEventHandler((x,A,v,w,E)=>g(0,N(A.clientX,A.clientY),w,0,A)).setMouseDragStopEventHandler(y);const p=Ci(new ds((x,A,v)=>{this._I(x),f(),tt(v)},g,(x,A,v,w)=>{this.wI(x),y(),tt(w)}));return u.setTouchStartEventHandler(p.onTouchStart).setTouchMoveEventHandler(p.onTouchMove).setTouchEndEventHandler(p.onTouchEnd)},this.CI=l=>{this.qF&&!this.hasAxis(l)&&this.addAxis(l)},this.YF=(l,u)=>{for(const c of this.ab)if(c.tag===l){const d=Math.max(Math.min((u-this.axisScale.getInnerStart())/(this.axisScale.getInnerEnd()-this.axisScale.getInnerStart()),1),0);return Dr(c.RF.Ii(),c.RF.Ti(),d)}},this.HF=l=>{if(this.ab.length===0)return;const u=Ut(K(l,this.engine.scale,this.pixelScale),this.ab[0].RF.Ii()),c=Math.atan2(u.y,u.x);let d,f=st;for(const g of this.ab){const y=Ut(g.RF.Ti(),g.RF.Ii()),p=Math.atan2(y.y,y.x),x=Math.abs(c-p);x<f&&(d=g,f=x)}return d},this._I=l=>{this.Bo&&(l.Re(this.dI),this.us.Ss())},this.wI=l=>{l.Re(this.dI),this.us.Ss()},this.us.Nn(ot.uf),this.Gk=e.ob("spiderChart series bg",0),this.mI=e.$y("spiderChart web shapes",0),this.kI=e.$y("spiderChart axis bg",1),this.Rb=e.$y("spiderChart plotting",2),this.bA=e.$y("spiderChart fg",3),this.LF=this.es.yg().ps(this.qi.effectsText),this._m.Rh("Spider Chart"),this.FS=this.Gk.Jc(this.pixelScale).Ce(this.qi.spiderChartSeriesBackgroundFillStyle).we(it).eu(90).ze(-270).ou(0),this.IS=this.Gk.Jc(this.pixelScale).Ce(ft).we(this.qi.spiderChartSeriesBackgroundStrokeStyle).eu(90).ze(-270).ou(0),super.TS(this.FS,this.IS),this.jy=e.Zy();const a=qt(o?o.autoCursorBuilder:void 0,by);this.Pm=a.uy(this.jy,this.uiScale,this.uiScale,this.qi),oi.Dm(this),this.LS((l,u)=>{oi.Bm(this,u)}),this.setAnimationsEnabled((o==null?void 0:o.disableAnimations)!==!0&&(o==null?void 0:o.animationsEnabled)!==!1),this.Sm(n,this.pixelScale)}getSeries(){return this.xS}setAutoCursor(t){return this.Pm&&t(this.Pm),this.us.Ss(),this}getAutoCursor(){return this.Pm}setAutoCursorMode(t){return this.Gy=t,this.us.Ss(),this}getAutoCursorMode(){return this.Gy}solveNearest(t){const e=t||this.us.On();if(e)return oi.Hc(this,ei(e,this.us),this.xS)}addAxis(t){if(typeof t=="string"){if(!this.hasAxis(t)){const e=new V1(this.kI,this.bA,this.pixelScale,this,t,this.axisScale,this.bI,this.LF);this.ab.push(e)}}else t&&this.ab.push(t);return this.LF.fs(this.ab.map(e=>e.EF)),this.us.Ss(),this}addSeries(t){const e=typeof t=="object"?t.pointShape?t.pointShape:ae.Circle:t||ae.Circle,i=typeof t=="object"&&t.automaticColorIndex?t.automaticColorIndex:this.xS.length,s=new N1(this,this.Rb,this.pixelScale,e,this.CI,this.ab,this.YF,this.HF,this._S,this.qi,i,this.us.es);return this.PS(s),s}getSeriesCount(){return this.xS.length}setWebMode(t){return this.sI=t,this.us.Ss(),this}getWebMode(){return this.sI}setWebCount(t){return this.eI=t,this.us.Ss(),this}getWebCount(){return this.eI}setWebStyle(t){return this.hI=typeof t=="function"?t(this.hI):t,this.us.Ss(),this}getWebStyle(){return this.hI}setScaleLabelStyle(t){return this.rI=typeof t=="function"?t(this.rI):t,this.us.Ss(),this}getScaleLabelStyle(){return this.rI}setScaleLabelFont(t){return this.nI=typeof t=="function"?t(this.nI):t,this.us.Ss(),this}getScaleLabelFont(){return this.nI}setScaleLabelPadding(t){return this.oI=t,this.us.Ss(),this}getScaleLabelPadding(){return this.oI}setScaleLabelStrategy(t){return this.tI=t,this.us.Ss(),this}setScaleLabelFormatter(t){return this.formatValue=t,this.us.Ss(),this}setAxisLabelStyle(t){return this.aI=typeof t=="function"?t(this.aI):t,this.us.Ss(),this}getAxisLabelStyle(){return this.aI}setAxisLabelFont(t){return this.lI=typeof t=="function"?t(this.lI):t,this.us.Ss(),this}getAxisLabelFont(){return this.lI}setAxisLabelEffect(t){return this.LF.ps(t),this.us.Ss(),this}getAxisLabelEffect(){return this.LF.vs()}setAxisLabelPadding(t){return this.uI=t,this.us.Ss(),this}getAxisLabelPadding(){return this.uI}setAxisLabelStrategy(t){return this.iI=t,this.us.Ss(),this}setAxisStyle(t){return this.cI=typeof t=="function"?t(this.cI):t,this.us.Ss(),this}getAxisStyle(){return this.cI}setNibStyle(t){return this.dI=typeof t=="function"?t(this.dI):t,this.us.Ss(),this}getNibStyle(){return this.dI}setNibLength(t){return this.Pf=t,this.us.Ss(),this}getNibLength(){return this.Pf}setAutoAxis(t){return this.qF=t,this}getAutoAxis(){return this.qF}setMouseInteractions(t){return this.Bo=t,this}getMouseInteractions(){return this.Bo}setAxisScrollStrategy(t){return this.KF=t,this.us.Ss(),this}getAxisScrollStrategy(){return this.KF}setAxisInterval(t,e=0){return this.axisScale.J(e,t),this.us.Ss(),this}getOriginValue(){return this.axisScale.getInnerStart()}getEdgeValue(){return this.axisScale.getInnerEnd()}Te(t){super.Te(t),ii.Fm(this._m,this.bm);const e=this.ab.length,i=ii.Tm(this._m,this.bm),s=N(this.pixelScale.x.getInnerInterval()-(this.ya.left+this.ya.right),this.pixelScale.y.getInnerInterval()-(this.ya.bottom+this.ya.top+i)),n=((a=0,l=0,u=0,c=0)=>({left:a,top:l,right:u,bottom:c}))(0,0,0,0);if(this.iI!==void 0){const a=Math.min(s.x,s.y)/2;for(let l=0;l<e;l+=1){const u=Oo(l,e),c=Math.cos(u),d=Math.sin(u),f=this.ab[l].getLabelSize();vf();const g=this.iI(jn,l,e,this.ab[l].tag,u,this.uI),y=N(c*a+g.paddingX,d*a+g.paddingY);c>0?n.right=Math.max(n.right,y.x+.5*(1-g.alignmentX)*f.x-a):n.left=Math.max(n.left,-y.x+.5*(g.alignmentX+1)*f.x-a),d>0?n.top=Math.max(n.top,y.y+.5*(1-g.alignmentY)*f.y-a):n.bottom=Math.max(n.bottom,-y.y+.5*(g.alignmentY+1)*f.y-a)}}if(this.KF){const a=this.MI();if(a!==void 0){const l=this.KF.start(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd(),a.min,a.max),u=this.KF.end(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd(),a.min,a.max);this.axisScale.J(l,u)}}const o=N(this.pixelScale.x.getInnerStart()+(n.left+this.pixelScale.x.getInnerInterval()-n.right)/2,this.pixelScale.y.getInnerStart()+(n.bottom+this.pixelScale.y.getInnerInterval()-n.top)/2),h=Math.min(s.x/2-(n.left+n.right)/2,s.y/2-(n.bottom+n.top)/2);this.fI=Tr(this.Xt.left+this.ya.left+n.left,this.Xt.top+this.ya.top+i+n.top,this.Xt.right+this.ya.right+n.right,this.Xt.bottom+this.ya.bottom+n.bottom),this.Ky(o,h);for(const a of this.xS)a.oS();for(const a of this.xS)a.Te();super.pm(),oi.Im(this,this.FS.getIsUnderMouse(),!1,this.xS,a=>oi.Hc(this,a,this.xS),(a,l)=>a.Hc(l,!0));for(const a of this.xS)a.dp()}dispose(){return this.Gk.W(),this.mI.W(),this.kI.W(),this.Rb.W(),this.bA.W(),this.Pm.dispose(),this.jy.W(),super.dispose()}getMinimumSize(){return N(this.fI.left+this.fI.right+100,this.fI.bottom+this.fI.top+100)}Ky(t,e){const i=this.ab.length,s=[];for(let n=0;n<i;n+=1){const o=Oo(n,i),h=N(t.x+Math.cos(o)*e,t.y+Math.sin(o)*e);s.push(h)}Wl(this.FS,this.sI,t,s),Wl(this.IS,this.sI,t,s),this.FS.hu(e),this.IS.hu(e),((n,o,h,a,l,u,c,d)=>{const f=n.length,g=u.length,y=o>0&&g>1;for(let p=0;p<Math.max(o,f);p+=1)if(y&&p<o){p>=f&&n.push(c());const x=n[p];Wl(x,h,a,u);const A=l*((p+1)/o);x.hu(A)}else p<n.length&&d(n[p]);n.length=y?o:0})(this.QF,this.eI,this.sI,t,e,s,this.gI,this.yI);for(const n of this.QF)n.Ce(ft).we(this.hI);for(let n=0;n<i;n+=1){const o=this.ab[n],h=Oo(n,i);vf();const a=this.iI!==void 0?this.iI(jn,n,i,this.ab[n].tag,h,this.uI):void 0;o.Ky(t,s,n,h,e,this.sI,a)}((n,o,h,a,l,u,c,d,f,g)=>{const y=l.length,p=n.length;let x=0;if(o!==void 0)for(let A=0;A<y;A+=1){const v=l[A].tag,w=Oo(A,y);for(let E=0;E<h+ +(A===0);E+=1){Yo.alignmentX=0,Yo.alignmentY=0,Yo.paddingX=0,Yo.paddingY=0;const C=o(Yo,A,y,v,w,E,h,a);if(C!==void 0){x>=p&&n.push(d());const k=n[x];x+=1;const F=(h-E)/h,m=Dr(u,c[A],F);k.Fe(gt(m,N(C.paddingX,C.paddingY))).Da(C.alignmentX).La(C.alignmentY).Rh(g(F))}}}for(let A=x;A<p;A+=1)f(n[A]);n.length=x})(this.JF,this.tI,this.eI,this.oI,this.ab,t,s,this.pI,this.SI,this.vI);for(const n of this.JF)n.Ce(this.rI).Oh(this.nI)}MI(){let t,e;const i=this.getSeriesCount()>1;for(const s of this.ab)for(const n of this.xS){const o=n.getValue(s.tag,i);o!==void 0&&(t=t===void 0?o:Math.min(t,o),e=e===void 0?o:Math.max(e,o))}if(t!==void 0&&e!==void 0)return wt(t,e)}}const Qi=(r,t)=>{const e=Math.floor(99999/t),i=Math.floor(99999/t),s=Math.floor(99998/t),n=Math.floor(99998/t),o=Math.floor(99999/(t+1)),h=Math.floor(89999/(t+1)),a=510001+t*h;let l=0;return{TI:()=>{const u=r.FI("dashboard ui",a+l);return l+=1,u},II:()=>r.FI("dashboard legend",51e4),DI:u=>{const c=1+u*e,d=100001+u*i,f=200002+u*s,g=300002+u*n,y=400001+u*o,p=510001+u*h;let x=0;return{us:r,vm:(A,v)=>{const w=c+v;return r.FI(A,w)},ob:(A,v)=>{const w=d+v;return r.FI(A,w)},Uk:(A,v)=>{const w=f+v;return r.FI(A,w)},$y:(A,v)=>{const w=g+v;return r.FI(A,w)},nb:(A,v,w)=>{const E=g+v;return r.BI(A,E,w)},Mm:(A,v)=>{const w=y+v;return r.FI(A,w)},om:A=>{const v=p+x,w=r.FI(A,v);return x+=1,w},lm:()=>r.FI("panel legend",500002+u),Zy:()=>r.FI("panel cursor",600001+u)}}}};class bf{constructor(t){this.D=new Xe,this.u=t}S(t){return this.u=t,this.D.emit("set",t),this}M(){return this.u}O(t){return this.D.on("set",t)}G(t){return this.D.off(t,"set")}}const B1={uh:()=>{},ih:!1,sh:0,eh:!1,rh:0,hh:!1,oh:0,ah:0,Je:Fs.fitting},U1=r=>{if(!r||typeof r!="object"||r===null)return!1;const t=r.type;return!(!t||!["spark-line","spark-bar","spark-win-loss","spark-area","spark-pie"].includes(t))},G1=(r,t,e,i,s,n,o,h)=>{const{type:a,data:l}=r;if(l.length===0)return;const u=[i,s];a==="spark-line"&&X1(r,t,u,n,o,h),a==="spark-bar"&&Mf({...r,winLoss:!1},t,u,n,o,h),a==="spark-win-loss"&&Mf({...r,winLoss:!0},t,u,n,o,h),a==="spark-area"&&$1(r,t,u,n,o,h),a==="spark-pie"&&j1(r,t,u,n,o,h)},as=(r,t,e,i)=>({x:Xy(r.x,t.x,e.x,i),y:vu(r.y,t.y,e.y,i)}),O1=(r,t,e,i)=>({position:Xy(r.position,t.x,e.x,i),high:vu(r.high,t.y,e.y,i),low:vu(r.low,t.y,e.y,i)}),Xy=(r,t,e,i)=>{const s=Rt(r,t,t+e);return i[0].x+i[1].x*(s-t)/e},vu=(r,t,e,i)=>{const s=Rt(r,t,t+e);return i[0].y+i[1].y*(s-t)/e},$y=(r,t,e,i,s,n,o,h)=>{for(const a of r)a.type==="point"&&Y1(a,t,e,s,n,o,h),a.type==="axis-band"&&W1(a,e,s,n,o,h),a.type==="constant-line"&&H1(a,e,i,s,n,o,h)},Y1=(r,t,e,i,s,n,o)=>{const{value:h,fillStyle:a,shape:l,size:u,rotation:c}=r;let d={x:NaN,y:NaN};if(h==="start"&&(d=t[0]),h==="end"&&(d=t[t.length-1]),h==="min"){d=t[0];for(const f of t)d=d.y<f.y?d:f}if(h==="max"){d=t[0];for(const f of t)d=d.y>f.y?d:f}(typeof h!="object"||(d=as(h,e,i,s),((f,g)=>{const y=g[0],p=g[1],x=f.x,A=f.y;return y.x<=x&&x<=y.x+p.x&&y.y<=A&&A<=y.y+p.y})(d,s)))&&n.pointSet.add().Nt().il(l!==void 0?l:ae.Circle).Nh(c||0).q(u||5).Ce(a||o.sparkPointChartFillStyle).nl(d)},W1=(r,t,e,i,s,n)=>{const{axis:o,start:h,end:a,fillStyle:l,strokeStyle:u}=r;let c=N(ht,st),d=N(ht,st);o==="x"&&(c=as({x:h,y:ht},t,e,i),d=as({x:a,y:st},t,e,i)),o==="y"&&(c=as({x:ht,y:h},t,e,i),d=as({x:st,y:a},t,e,i));const f=i[0],g=i[1],y=Rt(c.x,f.x,f.x+g.x),p=Rt(c.y,f.y,f.y+g.y),x=Rt(d.x,f.x,f.x+g.x),A=Rt(d.y,f.y,f.y+g.y);s.rect.add().cl(y).dl(p).q(N(x-y,A-p)).Ce(l||n.sparkChartBandFillStyle).we(u||n.sparkChartBandStrokeStyle).we(it)},H1=(r,t,e,i,s,n,o)=>{const{axis:h,value:a,strokeStyle:l}=r,u=a||0,c=t.y,d=e.y,f=t.x,g=e.x,y=[];if(h==="y"&&c<=u&&u<=d){const p=as(N(f,u),{x:f,y:c},i,s),x=as(N(g,u),{x:f,y:c},i,s);y.push([p,x])}if(h==="x"&&f<=u&&u<=g){const p=as(N(u,c),{x:f,y:c},i,s),x=as(N(u,d),{x:f,y:c},i,s);y.push([p,x])}y.length>0&&n.line.add().Re(l||o.sparkChartConstantLineStrokeStyle).Ve(y[0][0]).ze(y[0][1])},X1=(r,t,e,i,s,n)=>{const{strokeStyle:o,data:h,markers:a}=r,l=h.length;l>1e4&&s.Hn&&X.console.warn("LightningChart JS warning: SparkLineChart has over 10000 data points. This feature is not designed for large data sets which might show as performance drop. If you want to request improvements to this, contact https://lightningchart.com/js-charts/docs/contact. To disable this warning, use LightningChartOptions.warning property (refer to API documentation for more detail).");let u=st,c=ht,d=st,f=ht;for(let p=0;p<l;p+=1){const x=h[p];u=Math.min(u,x.x),c=Math.max(c,x.x),d=Math.min(d,x.y),f=Math.max(f,x.y)}const g={x:c-u,y:f-d},y=h.map(p=>as(p,{x:u,y:d},g,e));t.lineSet.add().cs(n).Re(o||i.sparkLineChartStrokeStyle).Nt().nl(y),a&&$y(a,y,{x:u,y:d},{x:c,y:f},g,e,t,i)},Mf=(r,t,e,i,s,n)=>{const{data:o,fillStyle:h,strokeStyle:a,threshold:l,winFillStyle:u,lossFillStyle:c}=r,d=r.barSize||1,f=r.gap||1,g=r.winLoss,y=l||0,p=f/d*1;let x=st,A=ht;if(g)x=-1,A=1;else for(const E of o)x=Math.min(x,E),A=Math.max(A,E);const v={x:0,y:g?-1:Math.min(0,x)},w={x:1*o.length+(o.length-1)*p,y:g?2:Math.max(A,1e-5)};o.map((E,C)=>{const k={x:1*(C+1)+C*p,y:g?E>=y?1:0:E},F=as({x:1*C+C*p,y:g?E>=y?0:-1:0},v,w,e),m=as(k,v,w,e);return{value:E,position:F,width:m.x-F.x,height:m.y-F.y}}).forEach(E=>{var C;t.rect.add().cs(n).Fe(E.position).Al(E.height).fl(E.width).Ce((C=E.value,g?(C>=y?u:c)||i.sparkBarChartFillStyle:h||i.sparkBarChartFillStyle)).we(a||i.sparkBarChartStrokeStyle)})},$1=(r,t,e,i,s,n)=>{const{data:o,fillStyle:h,strokeStyle:a,markers:l}=r,u=o.length;u>1e4&&s.Hn&&X.console.warn("LightningChart JS warning: SparkAreaChart has over 10000 data points. This feature is not designed for large data sets which might show as performance drop. If you want to request improvements to this, contact https://lightningchart.com/js-charts/docs/contact. To disable this warning, use LightningChartOptions.warning property (refer to API documentation for more detail).");let c=st,d=ht,f=st,g=ht;for(let A=0;A<u;A+=1){const v=o[A];c=Math.min(c,v.x),d=Math.max(d,v.x),f=Math.min(f,v.y),g=Math.max(g,v.y)}const y={x:d-c,y:g-f},p=[],x=[];for(const A of o){const v=Is(A.x,A.y,f);p.push(O1(v,{x:c,y:f},y,e)),x.push(as(A,{x:c,y:f},y,e))}t.junction.add().cs(n).Nt().nl(p).Ce(h||i.sparkAreaChartFillStyle),t.lineSet.add().cs(n).Nt().nl(x).Re(a||i.sparkAreaChartStrokeStyle),l&&$y(l,x,{x:c,y:f},{x:d,y:g},y,e,t,i)},j1=(r,t,e,i,s,n)=>{const{data:o,strokeStyle:h}=r,a=o.map(y=>typeof y=="number"?y:y.value),l=o.map(y=>typeof y=="object"?y.fillStyle:void 0),u=a.reduce((y,p)=>y+p,0),c=as(N(50,50),{x:0,y:0},{x:100,y:100},e),d=e[1],f=d.x<=d.y?d.x/2:d.y/2;let g=90;a.forEach((y,p)=>{const x=y/u*360;t.arc.add().cs(n).Fe(c).hu(f).ou(0).eu(g).ze(g+x).Ce(l[p]||kt(i.sparkPieChartFillStyle,p)).we(h||i.sparkPieChartStrokeStyle),g+=x})};var Ht,fr,dr;(function(r){r[r.UpToDown=0]="UpToDown",r[r.LeftToRight=1]="LeftToRight"})(Ht||(Ht={})),function(r){r[r.Vertical=0]="Vertical",r[r.Horizontal=1]="Horizontal",r[r.Both=2]="Both"}(fr||(fr={})),function(r){r[r.Up=0]="Up",r[r.Down=1]="Down",r[r.Left=2]="Left",r[r.Right=3]="Right"}(dr||(dr={}));class Rf extends sl{constructor(t,e,i,s,n){super(),this.Ds=!1,this.C_={x:0,y:0,height:20,width:20},this.LI={x:10,y:10},this.ks=t,this.RI=n,this.EI=new ji(t,e,i,Ft,s).setMouseInteractions(!0),this.zI=t.ic(e,ys.Simple).Ce(s.dataGridScrollBarButtonArrowFillStyle).we(s.dataGridScrollBarButtonArrowStrokeStyle).setMouseInteractions(!1),this.xu(this),this.EI.onMouseEnter(o=>o.setHighlight(1)),this.EI.onMouseLeave(o=>o.setHighlight(0))}VI(){switch(this.RI){case dr.Up:this.zI.pl([{x:this.C_.x,y:this.C_.y+this.LI.y/2},{x:this.C_.x+this.LI.x/2,y:this.C_.y-this.LI.y/2},{x:this.C_.x-this.LI.x/2,y:this.C_.y-this.LI.y/2}]);break;case dr.Down:this.zI.pl([{x:this.C_.x-this.LI.x/2,y:this.C_.y+this.LI.y/2},{x:this.C_.x+this.LI.x/2,y:this.C_.y+this.LI.y/2},{x:this.C_.x,y:this.C_.y-this.LI.y/2}]);break;case dr.Left:this.zI.pl([{x:this.C_.x-this.LI.x/2,y:this.C_.y},{x:this.C_.x+this.LI.x/2,y:this.C_.y+this.LI.y/2},{x:this.C_.x+this.LI.x/2,y:this.C_.y-this.LI.y/2}]);break;case dr.Right:this.zI.pl([{x:this.C_.x-this.LI.x/2,y:this.C_.y+this.LI.y/2},{x:this.C_.x+this.LI.x/2,y:this.C_.y},{x:this.C_.x-this.LI.x/2,y:this.C_.y-this.LI.y/2}])}}Fe(t){return this.C_.x=t.x,this.C_.y=t.y,this}Fa(){return N(this.C_.x,this.C_.y)}q(t){return this.C_.height=t.x,this.C_.width=t.y,this}oi(){return{x:this.C_.height,y:this.C_.width}}onMouseDown(t){return this.EI.onMouseDown(t)}onMouseUp(t){return this.EI.onMouseUp(t)}setFillStyle(t){return this.EI.setFillStyle(t),this}getFillStyle(){return this.EI.getFillStyle()}setStrokeStyle(t){return this.EI.setStrokeStyle(t),this}getStrokeStyle(){return this.EI.getStrokeStyle()}Te(){return this.EI.Te(),this.VI(),this}Ps(){return this.EI.setSize(N(this.C_.height,this.C_.width)).setPosition(N(this.C_.x,this.C_.y)),this}setVisible(t){return this.EI.setVisible(t),this.zI.setVisible(t),this}dispose(){return this.EI.dispose(),this.zI.dispose(),this}setMouseInteractions(t){return this.EI.setMouseInteractions(t),this}getMouseInteractions(){return this.EI.getMouseInteractions()}onHighlight(t){return this.D.on("highlight",t)}offHighlight(t){return this.D.off(t)}getHighlight(){return this.EI.getHighlight()}setHighlight(t){return this.EI.setHighlight(Hr(t)),this.D.emit("highlight",this,!!t),this.ks.Ss(),this}}const Ef=(r,t)=>Math.min(Math.max(r,t.getInnerStart()),t.getInnerEnd());class q1{constructor(t,e,i,s,n,o,h){this.Kc={x:0,y:0},this.C_={x:0,y:0,height:0,width:0},this.D=new Xe,this.OI={min:N(0,0),max:N(0,0)},this.wM=!1,this.CM=!1,this.NI={x:0,y:0},this._u=void 0,this.GI=N(0,0),this.WI={x:0,y:0},this.UI=0,this.YI=15,this.kM=(a,l)=>{this.wM=!0,this.bA.Ss();const u=this.HI.getDraggingMode();this._u=this.bA.us.Wr(u===jt.notDraggable?It.Restricted:u===jt.draggable?It.Move:u===jt.onlyHorizontal?It.Horizontal:It.Vertical),this.$I&&clearInterval(this.$I)},this.TM=()=>{this.wM=!1,this.bA.Ss(),this.bA.us.Ur(this._u)},this.FM=a=>(this.CM=!0,this.NI=K(this.bA.us.Pe(a.x,a.y),this.bA.us.dt,this.scale),!0),this.XI=(a,l)=>(this.jI(l),this.$I=setInterval(()=>this.jI(l),300),!0),this.ZI=()=>(clearInterval(this.$I),!0),this.IM=(a,l)=>{const u=this.HI.getDraggingMode();if(u!==jt.notDraggable){const c=l||u,d=K(this.bA.us.Pe(a.x,a.y),this.bA.us.dt,this.scale),f=N(c!==jt.onlyVertical?Ef(d.x,this.scale.x):this.C_.x,c!==jt.onlyHorizontal?Ef(d.y,this.scale.y):this.C_.y),g=N(f.x-this.NI.x,f.y-this.NI.y),y=N(this.HI.getPosition().x+g.x,this.HI.getPosition().y+g.y),p=this.QI(y),x={x:Math.abs(this.GI.x-p.x),y:Math.abs(this.GI.y-p.y)};return this.JI(x),this.WI.y>g.y&&(this.NI=d),this.Te(),!0}return!1},this.PM=(a,l)=>{this.CM=!1,tt(l),this.bA.Ss()},this.bA=t,this.qg=e,this.scale=s,this.contentScale=n,this.KI=h,this.qI=new Rf(t,i,s,o,h===Ht.UpToDown?dr.Up:dr.Left).setStrokeStyle(o.dataGridScrollBarButtonStrokeStyle).setFillStyle(o.dataGridScrollBarButtonFillStyle),this.tP=new Rf(t,i,s,o,h===Ht.UpToDown?dr.Down:dr.Right).setStrokeStyle(o.dataGridScrollBarButtonStrokeStyle).setFillStyle(o.dataGridScrollBarButtonFillStyle),this.HI=new ji(t,i,s,Ft,o).setFillStyle(o.dataGridScrollBarFillStyle).setStrokeStyle(o.dataGridScrollBarStrokeStyle).setMouseInteractions(!0).setDraggingMode(h===Ht.UpToDown?jt.onlyVertical:h===Ht.LeftToRight?jt.onlyHorizontal:jt.notDraggable),this.iP=new ji(e,i,s,Ft,o).setFillStyle(o.dataGridScrollBarBackgroundFillStyle).setStrokeStyle(o.dataGridScrollBarBackgroundStrokeStyle).setMouseInteractions(!0),this.HI.onMouseEnter(this.kM),this.HI.onMouseLeave(this.TM),this.HI.onMouseDragStart((a,l)=>this.FM(N(l.clientX,l.clientY))&&tt(l)),this.HI.onMouseDrag((a,l)=>this.IM(N(l.clientX,l.clientY))&&tt(l)),this.HI.onMouseDragStop(this.PM),this.HI.onTouchStart((a,l)=>this.FM(N(l.clientX,l.clientY))&&tt(l)),this.HI.onTouchMove((a,l)=>this.IM(N(l.clientX,l.clientY))&&tt(l)),this.HI.onTouchEnd(this.PM),this.qI.onMouseDown((a,l)=>this.XI(a,l)&&tt(l)),this.tP.onMouseDown((a,l)=>this.XI(a,l)&&tt(l)),this.qI.onMouseUp((a,l)=>this.ZI()&&tt(l)),this.tP.onMouseUp((a,l)=>this.ZI()&&tt(l)),this.iP.onMouseWheel((a,l)=>this.sP(l)),this.HI.onMouseWheel((a,l)=>this.sP(l)),this.iP.onMouseDown((a,l)=>this.XI(a,l)&&tt(l)),this.iP.onMouseUp((a,l)=>this.ZI()&&tt(l))}eP(t){return this.C_=t,this}fl(t){return this.C_.width=t,this}hP(){return this.C_.width}rP(t){return this.GI=t,this}nP(t){return this.Kc=t,this}oP(){return this.Kc}aP(t){return this.YI=t,this}lP(){return this.KI}uP(t){let e;switch(this.KI){case Ht.UpToDown:return e=t>0?Math.min(this.GI.y-this.OI.max.y,this.WI.y+t):Math.max(0,this.WI.y+t),e!==this.WI.y&&(this.JI({x:0,y:e}),this.Te(),!0);case Ht.LeftToRight:return e=Math.min(this.OI.max.x-this.GI.x,this.WI.x+t),e!==this.WI.x&&(this.JI({y:0,x:e}),this.Te(),!0);default:return!1}}cP(t){let e;switch(this.KI){case Ht.UpToDown:return e=Math.max(0,this.WI.y-t),e!==this.WI.y&&(this.JI({x:0,y:e}),this.Te(),!0);case Ht.LeftToRight:return e=t>0?Math.max(0,this.WI.x-t):Math.min(this.OI.max.x-this.GI.x,this.WI.x-t),e!==this.WI.x&&(this.JI({x:e,y:0}),this.Te(),!0);default:return!0}}dP(t){switch(this.KI){case Ht.UpToDown:return this.D.on("scrollY",t);case Ht.LeftToRight:return this.D.on("scrollX",t)}return this.D.on("scrollY",t)}QI(t){switch(this.KI){case Ht.UpToDown:if(t.y>this.OI.min.y)return N(t.x,this.OI.min.y);if(t.y<this.OI.max.y)return N(t.x,this.OI.max.y);break;case Ht.LeftToRight:if(t.x<this.OI.min.x)return N(this.OI.min.x,t.y);if(t.x>this.OI.max.x)return N(this.OI.max.x,t.y)}return t}sP(t){t.deltaY>0&&this.fP()&&tt(t),t.deltaY<0&&this.AP()&&tt(t)}jI(t){const e=K(this.bA.us.Pe(t.clientX,t.clientY),this.bA.us.dt,this.scale);let i;const s=this.HI.getPosition(),n=this.HI.getSize();this.gP(e,s,n)?clearInterval(this.$I):(i=this.KI===Ht.UpToDown?N(0,e.y-s.y>0?this.YI:-this.YI):N(s.x-e.x>0?this.YI:-this.YI,0),(i.x>0||i.y>0)&&this.mP(i.x!==0?Math.abs(i.x):Math.abs(i.y)),(i.x<0||i.y<0)&&this.yP(i.x!==0?Math.abs(i.x):Math.abs(i.y)))}gP(t,e,i){return this.KI===Ht.UpToDown?t.y<e.y+i.y/2&&t.y>e.y-i.y/2:t.x>e.x-i.x/2&&t.x<e.x+i.x/2}pP(t){this.OI=t}mP(t){switch(this.KI){case Ht.UpToDown:{const e=Math.max(0,this.WI.y-t);return e!==this.WI.y&&(this.JI({x:0,y:e}),this.Te(),!0)}case Ht.LeftToRight:{const e=Math.max(0,this.WI.x-t);return e!==this.WI.x&&(this.JI({x:e,y:0}),this.Te(),!0)}default:return!1}}yP(t){switch(this.KI){case Ht.UpToDown:{let e;return e=this.Kc.x>this.C_.height?Math.min(this.GI.y-this.OI.max.y,this.WI.y+t):0,e!==this.WI.y&&(this.JI({x:0,y:e}),this.Te(),!0)}case Ht.LeftToRight:{const e=Math.min(this.OI.max.x-this.GI.x,this.WI.x+t);return e!==this.WI.x&&(this.JI({y:0,x:e}),this.Te(),!0)}default:return!1}}AP(){return this.mP(this.YI)}fP(){return this.yP(this.YI)}JI(t){if(t.x===this.WI.x&&t.y===this.WI.y)return;let e;switch(this.WI=t,this.KI){case Ht.UpToDown:e=this.WI.y*this.UI*this.contentScale.Wi().y,this.D.emit("scrollY",fr.Vertical,e),this.bA.us.Ss();break;case Ht.LeftToRight:e=this.WI.x*this.UI*this.contentScale.Wi().x,this.D.emit("scrollX",fr.Horizontal,e)}}setVisible(t){return this.qI.setVisible(t),this.tP.setVisible(t),this.iP.setVisible(t),this.HI.setVisible(t),this}dispose(){return this.qI.dispose(),this.tP.dispose(),this.iP.dispose(),this.HI.dispose(),this.$I&&clearInterval(this.$I),this}Ps(){switch(this.SP(),this.vP(),this.KI){case Ht.UpToDown:this.qI.Fe({x:this.C_.x,y:this.C_.y+this.C_.height-this.qI.oi().x/2}).q(N(this.C_.width,this.C_.width)).Ps(),this.tP.Fe({x:this.C_.x,y:this.C_.y+10}).q(N(this.C_.width,this.C_.width)).Ps(),this.iP.setSize({x:this.C_.width,y:this.C_.height-2*this.qI.oi().x}).setPosition({x:this.C_.x,y:this.C_.y+this.tP.oi().y+this.iP.getSize().y/2}),this.HI.setSize(N(this.C_.width,this.bP())),this.GI={x:this.C_.x,y:this.qI.Fa().y-this.qI.oi().y/2-this.HI.getSize().y/2},this.pP({min:{x:this.C_.x,y:this.qI.Fa().y-this.qI.oi().y/2-this.HI.getSize().y/2},max:{x:this.C_.x,y:this.tP.Fa().y+this.tP.oi().x/2+this.HI.getSize().y/2}});break;case Ht.LeftToRight:this.qI.Fe({x:this.C_.x,y:this.C_.y}).q(N(this.C_.height,this.C_.height)).Ps(),this.tP.Fe({x:this.C_.x+this.C_.width-this.tP.oi().x,y:this.C_.y}).q(N(this.C_.height,this.C_.height)).Ps(),this.iP.setSize({y:this.C_.height,x:this.C_.width-2*this.qI.oi().y}).setPosition({x:this.C_.x+this.qI.oi().x/2+this.iP.getSize().x/2,y:this.C_.y}),this.HI.setSize(N(this.bP(),this.C_.height)),this.GI={x:this.qI.Fa().x+this.qI.oi().x/2+this.HI.getSize().x/2,y:this.C_.y},this.pP({min:{x:this.qI.Fa().x+this.qI.oi().x/2+this.HI.getSize().x/2,y:this.C_.y},max:{x:this.tP.Fa().x-this.tP.oi().x/2-this.HI.getSize().x/2,y:this.C_.y}})}return this.xP(),this}SP(){switch(this.KI){case Ht.UpToDown:this.MP()||this.setVisible(!1),this.MP()&&this.setVisible(!0);break;case Ht.LeftToRight:this._P()||this.setVisible(!1),this._P()&&this.setVisible(!0)}}vP(){switch(this.KI){case Ht.UpToDown:this.MP()||this.JI({x:0,y:0});break;case Ht.LeftToRight:this._P()||this.JI({x:0,y:0})}}MP(){return this.Kc.x>this.C_.height}_P(){return this.Kc.y>this.C_.width}bP(){switch(this.KI){case Ht.UpToDown:return this.C_.height*(this.C_.height-2*this.qI.oi().x)/this.Kc.x;case Ht.LeftToRight:return this.C_.width*(this.C_.width-2*this.qI.oi().y)/this.Kc.y;default:return 0}}xP(){switch(this.KI){case Ht.UpToDown:this.UI=(this.Kc.x-this.C_.height)/(this.OI.min.y-this.OI.max.y);break;case Ht.LeftToRight:this.UI=(this.Kc.y-this.C_.width)/(this.OI.max.x-this.OI.min.x)}}Te(){switch(this.qI.Te(),this.tP.Te(),this.iP.Te(),this.KI){case Ht.UpToDown:this.HI.setPosition({x:this.C_.x,y:this.qI.Fa().y-this.qI.oi().y/2-this.HI.getSize().y/2-this.WI.y}).Te();break;case Ht.LeftToRight:this.HI.setPosition({y:this.C_.y,x:this.qI.Fa().x+this.qI.oi().x/2+this.HI.getSize().x/2+this.WI.x}).Te()}return this}}class J1{constructor(t,e,i,s,n,o,h){switch(this.bA=t,this.qg=e,this.scale=s,this.contentScale=n,h){case fr.Vertical:this.wP=this.CP(i,o,Ht.UpToDown);break;case fr.Horizontal:this.kP=this.CP(i,o,Ht.LeftToRight);break;case fr.Both:this.wP=this.CP(i,o,Ht.UpToDown),this.kP=this.CP(i,o,Ht.LeftToRight)}this.TP=Ci(new ds(void 0,(a,l,u,c,d)=>{var f,g;c.x!==0&&(!((f=this.kP)===null||f===void 0)&&f.cP(c.x))&&tt(d),c.y!==0&&(!((g=this.wP)===null||g===void 0)&&g.uP(c.y))&&tt(d)}))}CP(t,e,i){return new q1(this.bA,this.qg,t,this.scale,this.contentScale,e,i)}hP(){return 20}nP(t){var e,i;return(e=this.wP)===null||e===void 0||e.nP(t),(i=this.kP)===null||i===void 0||i.nP(t),this}FP(t){var e;return(e=this.kP)===null||e===void 0||e.aP(t),this}IP(t){var e;return(e=this.wP)===null||e===void 0||e.aP(t),this}PP(t){const e=this.wP;return e&&e.sP(t),this}DP(t){return this.TP.onTouchStart(this,t),this}BP(t){return this.TP.onTouchMove(this,t),this}LP(t){return this.TP.onTouchEnd(this,t),this}onScroll(t){var e,i;return(e=this.kP)===null||e===void 0||e.dP(t),(i=this.wP)===null||i===void 0||i.dP(t),this}dispose(){var t,e;return(t=this.wP)===null||t===void 0||t.dispose(),(e=this.kP)===null||e===void 0||e.dispose(),this}Te(){var t,e;return(t=this.wP)===null||t===void 0||t.Te(),(e=this.kP)===null||e===void 0||e.Te(),this}Ps(){var t,e,i,s;const n=this.scale.x,o=this.scale.y;return(t=this.wP)===null||t===void 0||t.eP({x:n.getInnerEnd()-10,y:o.getInnerStart()+20,height:o.getInnerEnd()-20,width:20}),(e=this.kP)===null||e===void 0||e.eP({x:n.getInnerStart()+10,y:o.getInnerStart()+10,height:20,width:n.getInnerEnd()-20}),(i=this.wP)===null||i===void 0||i.Ps(),(s=this.kP)===null||s===void 0||s.Ps(),this}}class jy extends Ds{constructor(t,e,i,s,n,o){super(t,e,i,e.vm("dataGrid bg",0),s,e.us.qi.dataGridBackgroundFillStyle,e.us.qi.dataGridBackgroundStrokeStyle,e.us.qi.dataGridTitleFont,e.us.qi.dataGridTitleFillStyle,o),this.RP=[],this.EP=[],this.zP=[],this.VP=new Map,this.OP=!0,this.NP=!0,this.GP=!0,this.WP=!0,this.UP=!0,this.YP=!0,this.HP=!0,this.$P=!0,this.XP=!0,this.jP=!0,this.ZP=!0,this.QP=!0,this.JP=!0,this.KP=!0,this.qP=!0,this.tD=!0,this.iD=new Set,this.sD=new Set,this.eD=!0,this.hD=!0,this.rD=(h,a)=>{h.borders=a===void 0?Tf:{...h.borders,...a},this.nD(h),this.QP=!0,this.us.Ss()},this.nD=h=>{h.borders&&(h.borders.top===!1&&this.oD(h.column,h.row-1,a=>{a.borders=a.borders?{...a==null?void 0:a.borders,bottom:!1}:{...this.aD,bottom:!1}}),h.borders.bottom===!1&&this.oD(h.column,h.row+1,a=>{a.borders=a.borders?{...a.borders,top:!1}:{...this.aD,top:!1}}),h.borders.left===!1&&this.oD(h.column-1,h.row,a=>{a.borders=a.borders?{...a.borders,right:!1}:{...this.aD,right:!1}}),h.borders.right===!1&&this.oD(h.column+1,h.row,a=>{a.borders=a.borders?{...a.borders,left:!1}:{...this.aD,left:!1}}),h.borders.top===!0&&this.oD(h.column,h.row-1,a=>{a.borders=a.borders?{...a==null?void 0:a.borders,bottom:!0}:{...this.aD,bottom:!0}}),h.borders.bottom===!0&&this.oD(h.column,h.row+1,a=>{a.borders=a.borders?{...a.borders,top:!0}:{...this.aD,top:!0}}),h.borders.left===!0&&this.oD(h.column-1,h.row,a=>{a.borders=a.borders?{...a.borders,right:!0}:{...this.aD,right:!0}}),h.borders.right===!0&&this.oD(h.column+1,h.row,a=>{a.borders=a.borders?{...a.borders,left:!0}:{...this.aD,left:!0}}))},this.lD=(h,a)=>{const l=this.VP.get(h);l&&this.D.emit(we.cellMouseEnter,l,a)},this.uD=(h,a)=>{const l=this.VP.get(h);l&&this.D.emit(we.cellMouseLeave,l,a)},this.cD=(h,a)=>{const l=this.VP.get(h);l&&this.D.emit(we.cellMouseClick,l,a)},this.dD=(h,a)=>{const l=this.VP.get(h);l&&this.D.emit(we.cellMouseDoubleClick,l,a)},this.fD=(h,a)=>{const l=this.VP.get(h);l&&this.D.emit(we.cellMouseDown,l,a)},this.AD=(h,a)=>{const l=this.VP.get(h);l&&this.D.emit(we.cellMouseUp,l,a)},this.gD=(h,a)=>{const l=this.VP.get(h);l&&this.D.emit(we.cellMouseMove,l,a)},this.mD=(h,a)=>{const l=this.VP.get(h);l&&this.D.emit(we.cellMouseDrag,l,a)},this.yD=(h,a)=>{const l=this.VP.get(h);l&&this.D.emit(we.cellMouseDragStart,l,a)},this.pD=(h,a)=>{const l=this.VP.get(h);l&&this.D.emit(we.cellMouseDragStop,l,a)},this.SD=(h,a)=>{const l=this.VP.get(h);l&&(this.D.emit(we.cellMouseWheel,l,a),!a.defaultPrevented&&this.eD&&this.vD.PP(a))},this.bD=(h,a)=>{const l=this.VP.get(h);l&&(this.D.emit(we.cellTouchStart,l,a),!a.defaultPrevented&&this.hD&&this.vD.DP(a))},this.xD=(h,a)=>{const l=this.VP.get(h);l&&(this.D.emit(we.cellTouchMove,l,a),!a.defaultPrevented&&this.hD&&this.vD.BP(a))},this.MD=(h,a)=>{const l=this.VP.get(h);l&&(this.D.emit(we.cellTouchEnd,l,a),!a.defaultPrevented&&this.hD&&this.vD.LP(a))},this.us.Nn(ot.if),this._m.Rh("Data Grid"),this._D=i.d2({scaleXYConstructor:Gt}),this._D.x.ig=B1,this.wD=i.d2({scaleXYConstructor:Gt}),this.CD={x:0,y:0},this.kD=this.qi.dataGridTextFont,this.TD=this.qi.dataGridTextFillStyle,this.aD={top:!0,bottom:!0,left:!0,right:!0},this.FD=this.qi.dataGridCellBackgroundFillStyle,this.ID=this.qi.dataGridBorderStrokeStyle,this.PD="left-center",this.DD={left:5,right:5,bottom:5,top:5},this.BD=e.ob("dataGrid grid bg",0),this.LD=e.ob("dataGrid cell bg",1),this.RD=e.$y("dataGrid cell content",0),this.ED=e.$y("dataGrid scrollbar bg",1),this.zD=e.$y("dataGrid scrollbar fg",2),this.vD=this.VD(),this.onBackgroundMouseWheel((h,a)=>{this.eD&&this.vD.PP(a)}),this.onBackgroundTouchStart((h,a)=>{this.hD&&this.vD.DP(a)}),this.onBackgroundTouchMove((h,a)=>{this.hD&&this.vD.BP(a)}),this.onBackgroundTouchEnd((h,a)=>{this.hD&&this.vD.LP(a)}),this.OD=this.BD.ke(this._D).Ce(this.qi.dataGridBackgroundFillStyle).we(it).setMouseInteractions(!1),this.ND=this.RD.Lg(this._D).setMouseInteractions(!1),this.GD=new Ms(()=>this.LD.ke(this._D).setMouseInteractions(!0).setMouseEnterEventHandler(this.lD).setMouseLeaveEventHandler(this.uD).setMouseClickEventHandler(this.cD).setMouseDoubleClickEventHandler(this.dD).setMouseDownEventHandler(this.fD).setMouseUpEventHandler(this.AD).setMouseMoveEventHandler(this.gD).setMouseDragEventHandler(this.mD).setMouseDragStartEventHandler(this.yD).setMouseDragStopEventHandler(this.pD).setMouseWheelEventHandler(this.SD).setTouchStartEventHandler(this.bD).setTouchMoveEventHandler(this.xD).setTouchEndEventHandler(this.MD)),this.WD=new Ms(()=>this.RD.ke(this._D).setMouseInteractions(!1)),this.UD=new Ms(()=>this.RD.Pr(this._D).setMouseInteractions(!1)),this.YD=new Ms(()=>this.RD.rp(this._D,{},[ms.InternalUI,{type:"DataPattern",args:{pattern:"ProgressiveX"}}]).setMouseInteractions(!1)),this.HD=new Ms(()=>this.RD.Ee(this._D).setMouseInteractions(!1)),this.$D=new Ms(()=>this.RD.bS(this._D).setMouseInteractions(!1)),this.XD=new Ms(()=>this.RD.ke(this._D).setMouseInteractions(!1)),this.jD=new Ms(()=>this.RD.lw(this._D).setMouseInteractions(!1)),this.ZD=new Ms(()=>this.RD.Jc(this._D).setMouseInteractions(!1)),this.Sm(n,this.uiScale),this.onResize(()=>{this.OP=!0,this.us.Ss(),this._D.q(this.pixelScale.oi()),this.wD.q(this.pixelScale.oi())}),this.QD=this.es.yg([this.OD])}getMinimumSize(){return{x:200,y:200}}setAnimationsEnabled(t){return this}Zd(){return[]}dispose(){return super.dispose(),this.BD.W(),this.LD.W(),this.RD.W(),this.ED.W(),this.zD.W(),po(this._D),po(this.wD),this.vD.dispose(),this.UD.gp(),this.GD.gp(),this.WD.gp(),this.YD.gp(),this.HD.gp(),this.$D.gp(),this.XD.gp(),this.jD.gp(),this.ZD.gp(),this}j(){return super.j(),this._D.j(),this.wD.j(),this}Z(){return super.Z(),this._D.Z(),this.wD.Z(),this}setBackgroundEffect(t){return this.QD.ps(t),this.us.Ss(),this}getBackgroundEffect(){return this.QD.vs()}setInteractionScrollOnWheel(t){return this.eD=t,this}getInteractionScrollOnWheel(){return this.eD}setInteractionPanOnTouch(t){return this.hD=t,this}getInteractionPanOnTouch(){return this.hD}onCellMouseEnter(t){return this.D.on(we.cellMouseEnter,t)}offCellMouseEnter(t){return this.D.off(t)}onCellMouseLeave(t){return this.D.on(we.cellMouseLeave,t)}offCellMouseLeave(t){return this.D.off(t)}onCellMouseClick(t){return this.D.on(we.cellMouseClick,t)}offCellMouseClick(t){return this.D.off(t)}onCellMouseDoubleClick(t){return this.D.on(we.cellMouseDoubleClick,t)}offCellMouseDoubleClick(t){return this.D.off(t)}onCellMouseDown(t){return this.D.on(we.cellMouseDown,t)}offCellMouseDown(t){return this.D.off(t)}onCellMouseUp(t){return this.D.on(we.cellMouseUp,t)}offCellMouseUp(t){return this.D.off(t)}onCellMouseMove(t){return this.D.on(we.cellMouseMove,t)}offCellMouseMove(t){return this.D.off(t)}onCellMouseDrag(t){return this.D.on(we.cellMouseDrag,t)}offCellMouseDrag(t){return this.D.off(t)}onCellMouseDragStart(t){return this.D.on(we.cellMouseDragStart,t)}offCellMouseDragStart(t){return this.D.off(t)}onCellMouseDragStop(t){return this.D.on(we.cellMouseDragStop,t)}offCellMouseDragStop(t){return this.D.off(t)}onCellMouseWheel(t){return this.D.on(we.cellMouseWheel,t)}offCellMouseWheel(t){return this.D.off(t)}onCellTouchStart(t){return this.D.on(we.cellTouchStart,t)}offCellTouchStart(t){return this.D.off(t)}onCellTouchMove(t){return this.D.on(we.cellTouchMove,t)}offCellTouchMove(t){return this.D.off(t)}onCellTouchEnd(t){return this.D.on(we.cellTouchEnd,t)}offCellTouchEnd(t){return this.D.off(t)}setGridBackgroundFillStyle(t){return this.OD.Ce(t),this.us.Ss(),this}getGridBackgroundFillStyle(){return this.OD.Eh()}setCellContent(t,e,i,s,n){if(typeof i=="number"&&s!==void 0&&n!==void 0){const o=i,h=s,a=n;let l=[];for(let d=t;d<t+o;d+=1)for(let f=e;f<e+h;f+=1){const g=this.oD(d,f);g&&l.push(g)}l=Lr(l);let u={highlight:0};for(const d of l){const f=this.RP.indexOf(d);f<0||(u={...u,highlight:d.highlight,textFont:d.textFont,textFillStyle:d.textFillStyle,contentAlignment:d.contentAlignment,borders:d.borders,padding:d.padding,backgroundFillStyle:d.backgroundFillStyle},this.RP.splice(f,1))}const c={...u,column:t,row:e,columnSpan:o,rowSpan:h,content:a};this.RP.push(c),this.WP=!0,typeof c.content=="string"||typeof c.content=="number"?this.NP=!0:this.GP=!0,this.us.Ss()}else this.JD(t,e,i);return this}setColumnContent(t,e){const i=e.length;if(i===0)return this;for(let s=0;s<i;s+=1){const n=e[s];this.JD(t,s,n)}return this}setRowContent(t,e){const i=e.length;if(i===0)return this;for(let s=0;s<i;s+=1){const n=e[s];this.JD(s,t,n)}return this}setTableContent(t){const e=t.length;if(e===0)return this;const i=t[0].length;if(i===0)return this;for(let s=0;s<i;s+=1)for(let n=0;n<e;n+=1){const o=t[n][s];this.JD(s,n,o)}return this}setColumnWidth(t,e){let i=this.EP.find(s=>s.column===t);return i||(i={column:t,min:void 0,max:void 0},this.EP.push(i)),typeof e=="object"?(i.min=e.min,i.max=e.max):e===void 0?this.EP.splice(this.EP.indexOf(i),1):(i.min=e,i.max=e),this.YP=!0,this.us.Ss(),this}setRowHeight(t,e){let i=this.zP.find(s=>s.row===t);return i||(i={row:t,min:void 0,max:void 0},this.zP.push(i)),typeof e=="object"?(i.min=e.min,i.max=e.max):e===void 0?this.zP.splice(this.zP.indexOf(i),1):(i.min=e,i.max=e),this.YP=!0,this.us.Ss(),this}setColumnPaddings(t,e){return typeof e=="number"&&(e=jo(e,e,e,e)),this.KD(t,i=>this.qD(i,e)),this}setRowPaddings(t,e){return typeof e=="number"&&(e=jo(e,e,e,e)),this.tB(t,i=>this.qD(i,e)),this}setCellPadding(t,e,i){return typeof i=="number"&&(i=jo(i,i,i,i)),this.oD(t,e,s=>this.qD(s,i)),this}setCellsPaddings(t){return typeof t=="number"&&(t=jo(t,t,t,t)),this.DD={...this.DD,...t},this.iB(e=>this.qD(e,this.DD)),this}setCellBorders(t,e,i){return this.oD(t,e,s=>this.rD(s,i)),this}setRowBorders(t,e){return this.tB(t,i=>this.rD(i,e)),this}setColumnBorders(t,e){return this.KD(t,i=>this.rD(i,e)),this}setCellsBorders(t){return this.aD=t===void 0?Tf:t,this.iB(e=>this.rD(e,this.aD)),this}setCellsBorderStrokeStyle(t){return this.ID=typeof t=="function"?t(this.ID):t,this.KP=!0,this.us.Ss(),this}setColumnTextFillStyle(t,e){return this.KD(t,i=>this.sB(i,e)),this}setRowTextFillStyle(t,e){return this.tB(t,i=>this.sB(i,e)),this}setCellTextFillStyle(t,e,i){return this.oD(t,e,s=>this.sB(s,i)),this}setCellsTextFillStyle(t){return this.TD=typeof t=="function"?t(this.TD):t,this.iB(e=>this.sB(e,this.TD)),this}setColumnTextFont(t,e){return this.KD(t,i=>this.eB(i,e)),this}setRowTextFont(t,e){return this.tB(t,i=>this.eB(i,e)),this}setCellTextFont(t,e,i){return this.oD(t,e,s=>this.eB(s,i)),this}setCellsTextFont(t){return this.kD=typeof t=="function"?t(this.kD):t,this.iB(e=>this.eB(e,this.kD)),this}setColumnContentAlignment(t,e){return this.KD(t,i=>this.hB(i,e)),this}setRowContentAlignment(t,e){return this.tB(t,i=>this.hB(i,e)),this}setCellContentAlignment(t,e,i){return this.oD(t,e,s=>this.hB(s,i)),this}setCellsContentAlignment(t){return this.PD=t,this.iB(e=>this.hB(e,this.PD)),this}setCellBackgroundFillStyle(t,e,i){return this.oD(t,e,s=>this.rB(s,i)),this}setColumnBackgroundFillStyle(t,e){return this.KD(t,i=>this.rB(i,e)),this}setRowBackgroundFillStyle(t,e){return this.tB(t,i=>this.rB(i,e)),this}setCellsBackgroundFillStyle(t){return this.FD=typeof t=="function"?t(this.FD):t,this.iB(e=>this.rB(e,this.FD)),this}setCellHighlight(t,e,i){return this.oD(t,e,s=>{s.highlight=Hr(i)}),this.JP=!0,this.us.Ss(),this}setColumnHighlight(t,e){const i=Hr(e);return this.KD(t,s=>{s.highlight=i}),this.JP=!0,this.us.Ss(),this}setRowHighlight(t,e){const i=Hr(e);return this.tB(t,s=>{s.highlight=i}),this.JP=!0,this.us.Ss(),this}removeCell(t,e){return this.oD(t,e,i=>this.RP.splice(this.RP.indexOf(i),1)),this.UP=!0,this.us.Ss(),this}removeRow(t){return this.tB(t,e=>this.RP.splice(this.RP.indexOf(e),1)),this.RP.filter(e=>e.row>t).forEach(e=>{e.row-=1}),this.UP=!0,this.us.Ss(),this}removeColumn(t){return this.KD(t,e=>this.RP.splice(this.RP.indexOf(e),1)),this.RP.filter(e=>e.column>t).forEach(e=>{e.column-=1}),this.UP=!0,this.us.Ss(),this}removeCells(){return this.RP.splice(0),this.UP=!0,this.us.Ss(),this}getColumnMax(){return this.RP.length===0?0:this.RP.reduce((t,e)=>Math.max(t,e.column+e.columnSpan-1),0)}getRowMax(){return this.RP.length===0?0:this.RP.reduce((t,e)=>Math.max(t,e.row+e.rowSpan-1),0)}Te(t){super.Te(t),ii.Fm(this._m,this.bm),super.pm();const e=Math.round(this.ID.V()),i=e/2;let s=this.NP||this.GP||this.WP||this.UP||this.YP||this.HP||this.ZP||this.QP||this.KP||this.tD;if(s){this.RP.forEach(g=>{this.sD.add(g.column)}),this.RP.forEach(g=>{this.iD.add(g.row)});const o=this.UD.fp(),h=this.nB(i,o);o.finishPlot();const a=this.oB(this.sD.size,h),l=this.aB(this.iD.size,h),u=a.reduce(lh,0)+e,c=l.reduce(lh,0)+e,d=new Array(a.length+1).fill(0).map((g,y)=>a.reduce((p,x,A)=>p+(A<y?x:0),0)),f=new Array(l.length+1).fill(0).map((g,y)=>l.reduce((p,x,A)=>p+(A<y?x:0),0));if(this.lB){const g=this.lB.columnWidths.every((p,x)=>p===a[x]),y=this.lB.rowHeights.every((p,x)=>p===l[x]);g&&y&&(s=!1)}this.lB={columnWidths:a,rowHeights:l,dataGridWidth:u,dataGridHeight:c,columnWidthsCumulative:d,rowHeightsCumulative:f,cellsContentSizes:h}}const n=s||this.GP||this.WP||this.UP||this.$P||this.XP||this.jP||this.QP||this.JP||this.KP||this.OP||this.tD;if((n||this.qP)&&this.lB){const o=this.pixelScale.getInnerIntervalPixels(),h=ii.Tm(this._m,this.bm),a=[this.ya.left+i,this.ya.right+i],l=[this.ya.bottom+i,this.ya.top+h+i],u={x:o.x-a[0]-a[1],y:o.y-l[0]-l[1]},c=[this.ya.left,this.ya.right],d=[this.ya.bottom,this.ya.top+h],f={x:Math.round(o.x-c[0]-c[1]),y:Math.round(o.y-d[0]-d[1])},g={x:Math.ceil(i),y:Math.floor(f.y-i)};this.wD.Ei(a).zi(l).Vi(0,u.x).Oi(0,u.y),this.vD.nP({x:this.lB.dataGridHeight,y:this.lB.dataGridWidth}).Ps().Te();const y={x:Math.round(this.CD.x),y:Math.round(Math.min(0,this.CD.y))};this._D.Ei(c).zi(d).Vi(y.x,f.x+y.x).Oi(y.y,f.y+y.y),this.OD.Fe({x:g.x,y:g.y});const p={x:this._D.x.ei(),y:this._D.y.ei()+this.vD.hP(),width:this._D.x.ri()+e-this.vD.hP(),height:this._D.y.ri()+e};this.RD.qv(p),this.LD.qv(p),this.BD.qv(p);const x=this.lB,A=[{x:this._D.x.getInnerStart(),y:this._D.y.getInnerStart()},{x:this._D.x.getInnerEnd(),y:this._D.y.getInnerStart()},{x:this._D.x.getInnerEnd(),y:this._D.y.getInnerEnd()},{x:this._D.x.getInnerStart(),y:this._D.y.getInnerEnd()}];x.cellsContentSizes.forEach(v=>{var w;const E={x:g.x+x.columnWidthsCumulative[v.cell.column],y:g.y-x.rowHeightsCumulative[v.cell.row+v.cell.rowSpan]},C={x:E.x+x.columnWidths[v.cell.column],y:E.y+x.rowHeights[v.cell.row]},k=ba([E,{x:C.x,y:E.y},C,{x:E.x,y:C.y}],A);(w=v.text)===null||w===void 0||w.setVisible(k)}),n&&this.uB(g,this.lB,e)}this.OP=!1,this.NP=!1,this.GP=!1,this.WP=!1,this.UP=!1,this.YP=!1,this.HP=!1,this.$P=!1,this.XP=!1,this.jP=!1,this.ZP=!1,this.QP=!1,this.JP=!1,this.KP=!1,this.qP=!1,this.tD=!1}nB(t,e){const i=[],s={left:Math.ceil(t),right:Math.ceil(t),top:Math.ceil(t),bottom:Math.ceil(t)};for(const n of this.RP){const{content:o}=n,h={...this.DD,...n.padding};let a,l,u,c={x:0,y:0};if(typeof o=="string"||typeof o=="number"){const d=String(o);a=e.add(),c=a.Rh(d).Oh(n.textFont||this.kD).Ps().jc()}if(U1(o)&&(l=o,c={x:200,y:50}),Rn(o)){const d=this.us.cB(o);d.dB()?(u=o,c=u.oi()):d.fB(()=>{this.tD=!0,this.us.Ss()})}if(a||l||u){h.top=Math.round(h.top),h.left=Math.round(h.left),h.right=Math.round(h.right),h.bottom=Math.round(h.bottom);const d={x:Math.round(c.x+h.left+h.right+s.left+s.right),y:Math.round(c.y+h.top+h.bottom+s.top+s.bottom)};i.push({cell:n,contentSize:d,text:a,sparkChart:l,icon:u,cellPadding:h,cellMargin:s})}}return i}uB(t,e,i){const{dataGridWidth:s,dataGridHeight:n,cellsContentSizes:o,columnWidths:h,columnWidthsCumulative:a,rowHeights:l,rowHeightsCumulative:u}=e,c={x:s-i,y:-n+i};this.OD.q(c),this.ND.Re(this.ID),this.VP.clear();const d={cellBackground:this.GD.fp(),cellIconRect:this.WD.fp(),lineSet:this.YD.fp(),line:this.HD.fp(),pointSet:this.$D.fp(),rect:this.XD.fp(),junction:this.jD.fp(),arc:this.ZD.fp()},f=[];for(const g of o){const{cell:y,text:p,sparkChart:x,icon:A,cellPadding:v,cellMargin:w}=g,E={column:y.column,row:y.row},C={x:t.x+a[y.column],y:t.y-u[y.row+y.rowSpan]},k={x:C.x+w.left,y:C.y+w.bottom},F={x:k.x+v.left,y:k.y+v.bottom},m={x:new Array(y.columnSpan).fill(0).reduce((T,z,P)=>T+h[y.column+P],0),y:new Array(y.rowSpan).fill(0).reduce((T,z,P)=>T+l[y.row+P],0)},S={x:m.x-w.left-w.right,y:m.y-w.top-w.bottom},b={x:S.x-v.left-v.right,y:S.y-v.top-v.bottom};if(p){const T=kf(F,b,y.contentAlignment||this.PD);p.Fe(T[0]).Ea({x:T[1],y:T[2]}).Ce(this.AB(y.textFillStyle||this.TD,y.content,this.TD)).cs(y.highlight)}const M=this.AB(y.backgroundFillStyle||this.FD,y.content);if(M!==ft){const T=d.cellBackground.add();T.Fe(C).q(m).Ce(M).we(it).cs(y.highlight),this.VP.set(T,E)}const R=y.borders||this.aD;if(R&&Z1(C,m,R,i,f),x){const T=F,z=b;G1(x,d,this._D,T,z,this.qi,this.cA,y.highlight)}if(A){const T=A.oi(),z=kf(F,b,y.contentAlignment||this.PD);d.cellIconRect.add().Fe({x:z[0].x+T.x*(-.5-z[1]/2),y:z[0].y+T.y*(-.5-z[2]/2)}).q(T).Ce(new Zs({source:A.rc,fitMode:Ze.Stretch})).we(it).cs(y.highlight)}}this.ND.Nt();for(const g of f)this.ND.zr().Eg(g[0],g[1]);d.cellBackground.finishPlot(),d.cellIconRect.finishPlot(),d.lineSet.finishPlot(),d.line.finishPlot(),d.pointSet.finishPlot(),d.rect.finishPlot(),d.junction.finishPlot(),d.arc.finishPlot()}oB(t,e){const i=new Array(t).fill(0);for(const s of this.sD.values()){const n=e.filter(a=>s>=a.cell.column&&s+1<=a.cell.column+a.cell.columnSpan).reduce((a,l)=>{const u=l.contentSize.x/l.cell.columnSpan;return Math.max(a,u)},0),o=this.EP.find(a=>a.column===s),h=o?Rt(n,o.min!==void 0?o.min:ht,o.max!==void 0?o.max:st):n;i[s]=h}return i}aB(t,e){const i=new Array(t).fill(0);for(const s of this.iD.values()){const n=e.filter(a=>s>=a.cell.row&&s+1<=a.cell.row+a.cell.rowSpan).reduce((a,l)=>{const u=l.contentSize.y/l.cell.rowSpan;return Math.max(a,u)},0),o=this.zP.find(a=>a.row===s),h=o?Rt(n,o.min!==void 0?o.min:ht,o.max!==void 0?o.max:st):n;i[s]=h}return i}AB(t,e,i){if(Be(t)){try{const s=Number(e);return new H({color:t.getPalette().getColors(s)})}catch{}return i||ft}return t}sB(t,e){t.textFillStyle=typeof e=="function"?e(t.textFillStyle||this.TD):e,this.jP=!0,this.us.Ss()}eB(t,e){t.textFont=typeof e=="function"?e(t.textFont||this.kD):e,this.ZP=!0,this.us.Ss()}rB(t,e){t.backgroundFillStyle=typeof e=="function"?e(t.backgroundFillStyle||this.FD):e,this.XP=!0,this.us.Ss()}hB(t,e){t.contentAlignment=e,this.$P=!0,this.us.Ss()}qD(t,e){t.padding={...t.padding,...e},this.HP=!0,this.us.Ss()}JD(t,e,i){let s=this.oD(t,e);s?s.content=i:(s={column:t,row:e,columnSpan:1,rowSpan:1,content:i,highlight:0},this.RP.push(s),this.WP=!0),typeof s.content=="string"||typeof s.content=="number"?this.NP=!0:this.GP=!0,this.us.Ss()}iB(t){this.RP.forEach(e=>t(e))}oD(t,e,i){const s=this.RP.find(n=>t>=n.column&&t+1<=n.column+n.columnSpan&&e>=n.row&&e+1<=n.row+n.rowSpan);return s&&i&&i(s),s}KD(t,e){const i=this.RP.filter(s=>t>=s.column&&t+1<=s.column+s.columnSpan);for(const s of i)s&&e(s)}tB(t,e){const i=this.RP.filter(s=>t>=s.row&&t+1<=s.row+s.rowSpan);for(const s of i)s&&e(s)}VD(){return new J1(this.zD,this.ED,this.wD,this.wD,this._D,this.qi,fr.Both).onScroll((t,e)=>{this.lB&&(t===fr.Vertical&&(this.CD.y=-e),t===fr.Horizontal&&(this.CD.x=e),this.qP=!0,this.us.Ss())}).FP(50).IP(12)}}const we={cellMouseEnter:"cellMouseEnter",cellMouseLeave:"cellMouseLeave",cellMouseClick:"cellMouseClick",cellMouseDoubleClick:"cellMouseDoubleClick",cellMouseDown:"cellMouseDown",cellMouseUp:"cellMouseUp",cellMouseMove:"cellMouseMove",cellMouseDrag:"cellMouseDrag",cellMouseDragStart:"cellMouseDragStart",cellMouseDragStop:"cellMouseDragStop",cellMouseWheel:"cellMouseWheel",cellTouchStart:"cellTouchStart",cellTouchMove:"cellTouchMove",cellTouchEnd:"cellTouchEnd"};var wf;(function(r){r.Center="center",r.RightCenter="right-center",r.LeftCenter="left-center",r.RightTop="right-top",r.LeftTop="left-top",r.RightBottom="right-bottom",r.LeftBottom="left-bottom",r.CenterTop="center-top",r.CenterBottom="center-bottom"})(wf||(wf={}));const Z1=(r,t,e,i,s)=>{const n={x:r.x,y:r.y},o={x:r.x,y:r.y+t.y},h={x:r.x+t.x,y:r.y},a={x:r.x+t.x,y:r.y+t.y};e.top&&s.push([o,a]),e.bottom&&s.push([n,h]),e.left&&s.push([n,o]),e.right&&s.push([h,a])},kf=(r,t,e)=>{const i=r.x,s=r.x+t.x,n=r.x+t.x/2,o=r.y+t.y,h=r.y,a=r.y+t.y/2;switch(e){case"left-center":return[N(i,a),-1,0];case"right-center":return[N(s,a),1,0];case"center":return[N(n,a),0,0];case"left-bottom":return[N(i,h),-1,-1];case"right-bottom":return[N(s,h),1,-1];case"center-bottom":return[N(n,h),0,-1];case"left-top":return[N(i,o),-1,1];case"right-top":return[N(s,o),1,1];case"center-top":return[N(n,o),0,1]}return wo(0,`Unidentified DataGrid cell content alignment option: ${e}`)},Tf={top:!1,bottom:!1,left:!1,right:!1};class Q1 extends bn{constructor(t,e,i,s,n,o){super(t,{Sr(){},pr(){},br(){}},s,e,i,{numeric:e.xAxisNumericTicks,datetime:e.xAxisDateTimeTicks,time:e.xAxisTimeTicks},{type:"linear"}),this.chart=t,this.es=o,this.ks=n,this.Lh=n.Pr(t.gB).Oh(this.qi.barChartCategoryAxisTitleFont||this.qi.xAxisTitleFont).Ce(this.qi.barChartCategoryAxisTitleFillStyle||this.qi.xAxisTitleFillStyle),this.setTitleRotation(this.chart.Ts.getWidth({x:0,y:-90})),this.Wh=this.es.yg([this.Lh]).ps(e.effectsText),this.mB=n.Ee(t.gB).Re(e.barChartCategoryAxisStrokeStyle||e.xAxisStrokeStyle)}setThickness(t){return typeof t=="number"?(this.xg=t,this.Mg=t):typeof t=="object"&&(this.xg=t.min,this.Mg=t.max),this.chart.us.Ss(),this}getThickness(){return{min:this.xg,max:this.Mg}}setStrokeStyle(t){return this.mB.Re(t),this.chart.us.Ss(),this}getStrokeStyle(){return this.mB.uu()}Ps(){if(!this.Xi)return{kg:0,Tg:0,Vd:Rt(0,this.xg!==void 0?this.xg:0,this.Mg!==void 0?this.Mg:st)};const t=this.mB.uu().V()/2,e=this.chart.Ts.getHeight(this.Lh.Ps().jc());return{kg:t,Tg:e,Vd:t+e}}Te(t,e,i,s){const n=this.getInterval(),o=this.chart.valueAxis.getInterval();this.mB.Ve(this.chart.Ts.toPoint(n.start,o.start)).ze(this.chart.Ts.toPoint(n.end,o.start)).setVisible(this.Xi),this.Lh.Fe(this.chart.Ts.toPoint(.5*(n.start+n.end),this.chart.valueAxis.dt.mi(o.start,-(t.kg+s.labelMarginBeforeCategoryAxisPixels)))).Ea(this.chart.Ts.toPoint(0,1)).setVisible(this.Xi)}setMouseInteractions(t){return this}ur(t,e){return new wh(e,t,this.ks,this.chart.gB)}cr(t,e){return{}}_r(t,e){return e}Cr(t,e,i){return{min:t,max:e}}}class K1 extends bn{constructor(t,e,i,s,n,o,h){super(t,{Sr:()=>{var a;if(t.yB){if(t.pB==="positive"||t.pB==="bipolar"){if(((a=t.SB)===null||a===void 0?void 0:a.position)==="after-bar"){const l=this.dt.ri();return this.dt.mi(t.yB.max,Math.min(this.chart.Ts.getHeight(this.chart.vB())+t.SB.labelMargin,.3*l))}return t.yB.max}return t.bB?Rt(-1,-1e-6,t.yB.max):0}},pr:()=>{var a;if(t.yB){if(t.pB==="negative"||t.pB==="bipolar"){if(((a=t.SB)===null||a===void 0?void 0:a.position)==="after-bar"){const l=this.dt.ri();return this.dt.mi(t.yB.min,-Math.min(this.chart.Ts.getHeight(this.chart.vB())+t.SB.labelMargin,.3*l))}return t.yB.min}return t.bB?Rt(1,1e-6,t.yB.min):0}},br:()=>{}},s,e,i,{numeric:e.barChartValueAxisTicks||e.yAxisNumericTicks,datetime:e.yAxisDateTimeTicks,time:e.yAxisTimeTicks},h),this.chart=t,this.es=o,this.ks=n,this.Lh=n.Pr(t.gB).Oh(this.qi.barChartValueAxisTitleFont||this.qi.yAxisTitleFont).Ce(this.qi.barChartValueAxisTitleFillStyle||this.qi.yAxisTitleFillStyle),this.setTitleRotation(this.chart.Ts.getHeight({x:0,y:-90})),this.Wh=this.es.yg([this.Lh]).ps(e.effectsText),this.mB=n.Ee(t.gB).Re(e.barChartValueAxisStrokeStyle||this.qi.yAxisStrokeStyle)}setThickness(t){return typeof t=="number"?(this.xg=t,this.Mg=t):typeof t=="object"&&(this.xg=t.min,this.Mg=t.max),this.chart.us.Ss(),this}getThickness(){return{min:this.xg,max:this.Mg}}setStrokeStyle(t){return this.mB.Re(t),this.chart.us.Ss(),this}getStrokeStyle(){return this.mB.uu()}setTickStrategy(t,e){return super.Fh(t,e)}Ps(t){if(!this.Xi)return this.Uh(),{kg:0,Tg:0,Vd:Rt(0,this.xg!==void 0?this.xg:0,this.Mg!==void 0?this.Mg:st)};const e=this.chart.Ts.getWidth(this.chart.gB).ri(),i=this.dt.ri();this.qh({physicalAxisSize:i,oppositeAxisSize:e,plotLines:t});let s=0;for(const h of this.Ze.values())for(const a of h.values()){const l=a.Sh.lr,u=this.chart.Ts.getWidth(a.Ue.jc()),c=l.getTickLength()+l.getTickPadding()+u+l.getLabelPadding();s=Math.max(s,c)}const n=s+this.mB.uu().V()/2,o=this.chart.Ts.getWidth(this.Lh.Ps().jc());return{kg:n,Tg:o,Vd:Rt(n+o,this.xg!==void 0?this.xg:0,this.Mg!==void 0?this.Mg:st)}}Te(t){const e=this.getInterval();this.mB.Ve(this.chart.Ts.toPoint(-.5,this.Ih)).ze(this.chart.Ts.toPoint(-.5,this.Ph)).setVisible(this.Xi);const i=this.kh.type==="logarithmic"?Math.sqrt(e.start+e.end):.5*(e.start+e.end),s=this.chart.Ts.toPoint(this.chart.categoryAxis.dt.mi(-.5,t.kg*this.chart.Ts.xB),i),n=this.chart.Ts.toPoint(this.chart.Ts.MB,0);this.Lh.Fe(s).Ea(n).setVisible(this.Xi)}setMouseInteractions(t){return this}ur(t,e){return new wh(e,t,this.ks,this.chart.gB)}cr(t,e){const i=t.Sh.lr,s=this.chart.Ts.toPoint(-.5,t.u),n=this.chart.gB.mi(s,this.chart.Ts.toPoint(i.getTickLength()*this.chart.Ts.xB,0)),o=this.chart.gB.mi(s,this.chart.Ts.toPoint(i.gridStrokeLength*e.oppositeAxisSize*-this.chart.Ts.xB,0)),h=this.chart.gB.mi(n,this.chart.Ts.toPoint(i.getTickPadding()*this.chart.Ts.xB,0));t.Ue.Fe(h).Ea(this.chart.Ts.toPoint(this.chart.Ts.MB,i.getLabelAlignment())).Nh(i.getLabelRotation()),i.tickStyle!==it&&i.tickLength!==0&&e.plotLines.add({positions:[s,n]},{lineStyle:i.tickStyle}),i.gridStrokeStyle!==it&&i.gridStrokeLength>0&&e.plotLines.add({positions:[s,o]},{lineStyle:i.gridStrokeStyle})}_r(t,e){return this.kh.type==="linear"?ch(t,e,this.dt):wa(t,e,this.dt)}Cr(t,e,i){return{min:t,max:e}}}class tv extends dl{constructor(t,e,i,s,n,o,h){super(t,e,i,s),this.No=Fg(),this.u=0,this._B=!1,this.chart=t,this.Ji=t,this.category=n,this.subCategory=o,this.xs=n,this.be=kt(i.barChartBarFillStyle||i.rectangleSeriesFillStyle,h),this.xe=kt(i.barChartBarStrokeStyle||i.rectangleSeriesStrokeStyle,h),this.onVisibleStateChanged(()=>{this.Ji.wB()}),this.onDispose(()=>{this.Ji.wB(),this.Ji.CB.delete(this)})}setValue(t){return this._B=!0,this.u=t,this.Ji.wB(),this.Ji.us.Ss(),this.Ji.CB.delete(this),this}getValue(){return this.u}get value(){return this.u}setFillStyle(t){return this.be=typeof t=="function"?t(this.be):t,this.Ji.wB(),this}getFillStyle(){return this.be}setStrokeStyle(t){return this.xe=typeof t=="function"?t(this.xe):t,this.Ji.wB(),this}getStrokeStyle(){return this.xe}Kp(){return this.tS}Hc(t,e){return Fi(t,this.Ji.engine.scale,this.Ji.Wy(new $e,this.category,this.u,this).Zu(),this,void 0)}solveNearestFromScreen(t){}setEffect(t){return this.Ji.setBarsEffect(t),this}}const ev=r=>!!(r&&typeof r=="object"&&"iCategory"in r&&typeof r.iCategory=="number"&&"value"in r&&typeof r.value=="number"),Cf=(r,t,e)=>{const i=r.kd.filter(o=>o!==void 0),s=i.map(o=>e(o.sizePixels)).reduce((o,h)=>Math.max(o,h),1),n=Math.ceil(s/(t/i.length));return n<=1?i:i.filter((o,h)=>h%n==0)};class qy extends Dh{constructor(t,e,i,s,n,o,h){var a;let l;super(t,e,i,e.vm("barChart bg",0),s,e.us.qi.barChartBackgroundFillStyle||e.us.qi.chartXYBackgroundFillStyle,e.us.qi.barChartBackgroundStrokeStyle||e.us.qi.chartXYBackgroundStrokeStyle,e.us.qi.barChartTitleFont||e.us.qi.chartXYTitleFont,e.us.qi.barChartTitleFillStyle||e.us.qi.chartXYTitleFillStyle,o),this.coordsBars="barChart",this.kB=iv.Descending,this.TB=this.qi.barChartCategoryLabels,this.SB=this.qi.barChartValueLabelsAfterBars,this.FB=!1,this.b_=ko(),this.IB=new Map,this.CB=new Map,this.pB="positive",this.PB="columns",this.DB=!0,this.BB=new Map,this.LB={speed:1},this._y={speed:1},this.RB=.08,this.Gy=he.snapToClosest,this.Wy=(d,f,g,y)=>{this.categoryAxis.getTitle().length>0&&d.addRow(this.categoryAxis.getTitle()),d.addRow({text:f,font:{weight:"bold"}}),this.valueAxis.getTitle().length>0&&d.addRow(this.valueAxis.getTitle());const p=[];return y.subCategory&&y.subCategory.length>0&&p.push(y.subCategory),p.push(this.valueAxis.formatValue(g)),d.addRow(...p),d},this.fn=(d,f,g,y,p)=>{this.gB.q(y,p)},this.us.Nn(ot.nf),this.Ts=(h==null?void 0:h.type)==="horizontal"?rv:sv,this._m.Rh("Bar Chart"),this.EB=e.$y("barChart plotting 1",0),this.zB=e.$y("barChart plotting 2",1),this.bB=((a=h==null?void 0:h.valueAxis)===null||a===void 0?void 0:a.type)==="logarithmic",this.bB?this.Ts.VB==="horizontal"?(l=i.d1({scale1DConstructor:Hi,dimension:"y"}),this.gB=new Ue().Ri(i.d1({scale1DConstructor:Zr,dimension:"x"}),l)):(l=i.d1({scale1DConstructor:Hi,dimension:"x"}),this.gB=new Ue().Ri(l,i.d1({scale1DConstructor:Zr,dimension:"y"}))):(this.gB=i.d2({scaleXYConstructor:Gt}),l=this.Ts.getWidth(this.gB)),this.OB=this.es.yg(),this.M_=new Ir(()=>this.b_._t(this.EB.Ob(this.gB).Jo(0)),(d,f,g)=>(d.Ce(g.fillStyle).we(g.strokeStyle),f.map(y=>{const p=y.existingMember||d.zr();return p.pl(y.vertices),this.b_.Ot(p,y.bar),y.bar.gs([p]),p})),()=>{this.b_.Nt()},d=>{this.OB.fs(d)}),this.FS=this.qg.ke(this.gB).Ce(this.qi.barChartSeriesBackgroundFillStyle||ft).we(it),this.IS=this.qg.ke(this.gB).Ce(ft).we(this.qi.barChartSeriesBackgroundStrokeStyle||it).setMouseInteractions(!1),super.TS(this.FS,this.IS),this.categoryAxis=new Q1(this,this.qi,(h==null?void 0:h.disableAnimations)!==!0&&(h==null?void 0:h.animationsEnabled)!==!1,l,this.zB,this.es);const u=pu(h==null?void 0:h.valueAxis);this.valueAxis=new K1(this,this.qi,(h==null?void 0:h.disableAnimations)!==!0&&(h==null?void 0:h.animationsEnabled)!==!1,this.Ts.getHeight(this.gB),this.zB,this.es,u.type),this.NB=new Ms(()=>this.zB.Pr(this.gB).Ir(mr).Fr(mr).Jo(1)),this.GB=new Ir(()=>this.qg.Lg(this.gB).setMouseInteractions(!1),(d,f,g)=>(d.Re(g.lineStyle),f.map(({positions:y,existingMember:p})=>(p||d.zr()).Eg(y[0],y[1])))),this.jy=e.Zy();const c=qt(h?h.autoCursorBuilder:void 0,GS);this.Pm=c.uy(this.jy,this.uiScale,this.uiScale,this.qi),this.onResize(this.fn),this.Sm(n,this.gB),this.setAutoCursorMode(he.onHover),this.setAnimationsEnabled((h==null?void 0:h.disableAnimations)!==!0&&(h==null?void 0:h.animationsEnabled)!==!1),this.LS((d,f)=>{oi.Bm(this,f)})}getSeries(){return this.xS}setAutoCursor(t){return this.Pm&&t(this.Pm),this.us.Ss(),this}getAutoCursor(){return this.Pm}setAutoCursorMode(t){return this.Gy=t,this.us.Ss(),this}getAutoCursorMode(){return this.Gy}setCursorResultTableFormatter(t){return this.Wy=t,this.us.Ss(),this}setBarsMargin(t){return this.RB=Rt(t,0,.49),this.FB=!0,this.us.Ss(),this}getBarsMargin(){return this.RB}setBarsEffect(t){return this.OB.ps(t),this.us.Ss(),this}getBarsEffect(){return this.OB.vs()}setData(t){let e;if(Array.isArray(t))e=[],t.forEach((i,s)=>{typeof i=="string"?e.push({category:i}):typeof i=="number"?e.push({category:`Category ${s+1}`,value:i}):typeof i=="object"&&e.push(i)});else{e=[];const i=Object.keys(t);for(const s of i){const n=t[s];e.push({category:s,value:typeof n=="number"?n:void 0})}}return this.WB("columns",e),this}setDataStacked(t,e){const i=[];return e.forEach(s=>{const{subCategory:n,values:o}=s;o.forEach((h,a)=>{const l=t[a];i.push({category:l,subCategory:n,value:h})})}),this.WB("stacks",i),this}setDataGrouped(t,e){const i=[];return e.forEach(s=>{const{subCategory:n,values:o}=s;o.forEach((h,a)=>{const l=t[a];i.push({category:l,subCategory:n,value:h})})}),this.WB("groups",i),this}WB(t,e){this.xS.length>0&&this.us.Nn(ot.vf),this.PB=t,this.UB(e);const i=Lr(e.map(o=>o.category)),s=i.length,n=Lr(e.map(o=>o.subCategory)).filter(o=>o!==void 0);if(e.forEach(o=>{let h=this.xS.find(a=>a.category===o.category&&a.subCategory===o.subCategory);if(!h){const a=i.indexOf(o.category),l=n.includes(o.subCategory)?n.indexOf(o.subCategory):void 0;h=new tv(this,this._S,this.qi,this.us.es,o.category,o.subCategory,qt(l,a)),this.PS(h),this.BB.set(h,{category:a,valueStart:this.bB?1e-6:0,valueEnd:o.value!==void 0?o.value:0})}o.value!==void 0&&h.setValue(o.value)}),this.xS.slice().forEach(o=>{e.find(h=>h.category===o.category&&h.subCategory===o.subCategory)===void 0&&(o.dispose(),this.BB.delete(o))}),this.categoryAxis.setInterval(this.Ts.getWidth({x:{start:-.5,end:s-.5},y:{start:s-.5,end:-.5}})),this.yB=this.xS.length===0?void 0:t!=="stacks"?this.xS.reduce((o,h)=>({min:Math.min(o.min,h.getValue()),max:Math.max(o.max,h.getValue())}),{min:st,max:ht}):{min:0,max:i.reduce((o,h)=>Math.max(o,e.reduce((a,l)=>l.category!==h?a:l.value!==void 0?a+l.value:a,0)),0)},this.yB&&(this.pB=this.yB.min>=0?"positive":this.yB.max<=0?"negative":"bipolar",(this.pB==="bipolar"||this.pB==="negative")&&this.bB))throw new Error("LightningChart JS BarChart bipolar/negative data + logarithmic value axis combination not supported.");this.UB(this.xS),this.IB.clear(),this.CB.clear(),this.FB=!0,this.us.Ss()}setCategoryLabels(t){const e=typeof t=="function"?this.TB?t(this.TB):this.TB:t;return this.TB=e?{...this.qi.barChartCategoryLabels,...e}:void 0,this.IB.clear(),this.us.Ss(),this}getCategoryLabels(){return this.TB}setValueLabels(t){var e;const i=typeof t=="function"?this.SB?t(this.SB):this.SB:t,s=(i==null?void 0:i.position)||((e=this.SB)===null||e===void 0?void 0:e.position);return i&&s?s==="after-bar"?this.SB={...this.qi.barChartValueLabelsAfterBars,...i}:s!=="inside-bar"&&s!=="inside-bar-start"&&s!=="inside-bar-centered"&&s!=="inside-bar-end"||(this.SB={...this.qi.barChartValueLabelsInsideBars,...i}):this.SB=void 0,this.CB.clear(),this.us.Ss(),this}getValueLabels(){return this.SB}setLabelFittingEnabled(t){return this.DB=t,this.us.Ss(),this}getLabelFittingEnabled(){return this.DB}getBar(t,e){if((this.PB==="groups"||this.PB==="stacks")&&e===void 0)throw new Error("LightningChart JS BarChart.getBar() | `subCategory` parameter is required for grouped and stacked bar charts!");const i=this.xS.find(s=>s.category===t&&(e===void 0||e===s.subCategory));if(!i)throw new Error(`BarChart.getBar() no such bar: "${t}" ${e?`"${e}"`:""}`);return i}getBars(){return this.xS}setSorting(t){return this.kB=t,this.UB(this.xS),this.us.Ss(),this}getSorting(){return this.kB}setAnimationCategoryPosition(t,e=1){return this.LB=t?{speed:e}:void 0,this.us.Ss(),this}setAnimationValues(t,e=1){return this._y=t?{speed:e}:void 0,this.us.Ss(),this}translateCoordinate(t,e,i){if(i&&Dd(t)&&Js(e))return super.translateCoordinate(t,e,i);const s=e;let n;if(uc(t))n=this.us.Po(t);else if(Dd(t)){const o=K(t,this.pixelScale,this.us.dt);n={engineX:o.x,engineY:o.y}}else{if(!ev(t))throw new Error("LightningChart JS BarChart.translateCoordinate unexpected error. Input coordinate system not recognized.");{const o=K(this.Ts.toPoint(t.iCategory,t.value),this.gB,this.us.dt);n={engineX:o.x,engineY:o.y}}}if(Jn(s))return this.us.Do(n);if(s==="barChart"){const o=K({x:n.engineX,y:n.engineY},this.us.dt,this.gB);return{iCategory:this.Ts.getWidth(o),value:this.Ts.getHeight(o)}}if(Js(s))return K({x:n.engineX,y:n.engineY},this.us.dt,this.pixelScale);throw new Error("LightningChart JS BarChart.translateCoordinate unexpected error. Target coordinate system not recognized.")}Zd(){if(this.PB==="columns")return this.xS;const t=Lr(Cl(this.xS.map(e=>e.subCategory)));return Cl(t.map(e=>{const i=this.xS.filter(n=>n.subCategory===e),s=i[0];if(s)return(n=>{let o=!1;n.forEach(h=>h.onHighlight((a,l)=>{o||(o=!0,n.forEach(u=>h!==u?u.setHighlight(l):void 0),o=!1)})),n.forEach(h=>h.onDispose(()=>{const a=n.indexOf(h);a>=0&&n.splice(a,1)}))})(i),{attach(n,o){return kg(n,i,{toggleVisibilityOnClick:!0,label:e,style:s.getFillStyle()}),this}}}))}Te(t){var e,i;super.Te(t);const s=this.NB.fp(),n=this.GB.fp(),o=this.xS.filter(m=>m.getVisible()&&m._B),h=Lr(o.map(m=>m.category)),a=Lr(Cl(o.map(m=>m.subCategory))),l=5e-4*t*(((e=this.LB)===null||e===void 0?void 0:e.speed)||0),u=.003*t*(((i=this.LB)===null||i===void 0?void 0:i.speed)||0),c=this.valueAxis.dt,d=c instanceof Hi?(m,S)=>{var b;return ch(m,S,c,((b=this._y)===null||b===void 0?void 0:b.speed)||0)}:(m,S)=>{var b;return wa(m,S,c,((b=this._y)===null||b===void 0?void 0:b.speed)||0)};let f;this.PB==="columns"?f=o.map(m=>({bar:m,position:{category:h.indexOf(m.category),valueStart:this.bB?1e-6:0,valueEnd:m.value}})):this.PB==="groups"?f=o.map(m=>{const S=h.indexOf(m.category),b=a.indexOf(m.subCategory),M=1/(a.length+2*(a.length+1)*this.RB),R=this.RB*M;return{bar:m,position:{category:S+(b-(a.length-1)/2)*(M+R),valueStart:this.bB?1e-6:0,valueEnd:m.value}}}):(f=[],h.forEach((m,S)=>{const b=o.filter(R=>R.category===m);let M=this.bB?1e-6:0;b.forEach((R,T)=>{f.push({bar:R,position:{category:h.indexOf(m),valueStart:M,valueEnd:M+R.value}}),M+=R.value})})),f.forEach(m=>{const{bar:S,position:b}=m;let M,R,T=this.BB.get(S);T===void 0&&(T=b);const z=b.valueStart;if(this.LB&&T.category!==b.category){const P=Math.sign(b.category-T.category);M=T.category+l*P+u*(b.category-T.category),P!==Math.sign(b.category-M)&&(M=b.category)}else M=b.category;if(this._y&&T.valueEnd!==b.valueEnd){const P=Math.sign(b.valueEnd-T.valueEnd);R=d(T.valueEnd,b.valueEnd),P!==Math.sign(b.valueEnd-R)&&(R=b.valueEnd)}else R=b.valueEnd;this.BB.set(S,{category:M,valueStart:z,valueEnd:R}),M===b.category&&R===b.valueEnd||this.us.Ss(!0),M===T.category&&R===T.valueEnd||(this.FB=!0)}),ii.Fm(this._m,this.bm);const g=o.length>0;this.categoryAxis.Mr(),this.valueAxis.Mr();const y=this.categoryAxis.setVisible(g).Ps(),p=this.valueAxis.setVisible(g).Ps(n),{labelMarginBeforeCategoryAxisPixels:x}=g?this.YB(h,o,s,n):{labelMarginBeforeCategoryAxisPixels:0};this.categoryAxis.Te(y,s,n,{labelMarginBeforeCategoryAxisPixels:x}),this.valueAxis.Te(p);const A=this.categoryAxis.getThickness(),v=Rt(y.Vd+x,A.min!==void 0?A.min:0,A.max!==void 0?A.max:st),w={x:Math.min(this.gB.x.getInnerStart(),this.gB.x.getInnerEnd()),y:Math.min(this.gB.y.getInnerStart(),this.gB.y.getInnerEnd())},E=Math.max(this.gB.x.getInnerStart(),this.gB.x.getInnerEnd()),C=Math.max(this.gB.y.getInnerStart(),this.gB.y.getInnerEnd()),k={x:E-w.x,y:C-w.y};this.FS.Fe(w),this.FS.q(k),this.IS.Fe(w),this.IS.q(k),super.pm(),oi.Im(this,this.FS.getIsUnderMouse(),!1,this.xS,void 0,(m,S)=>m.Hc(S,!0));const F=ii.Tm(this._m,this.bm);if(this.gB.zi([this.Xt.bottom+this.ya.bottom+(this.Ts.VB==="vertical"?v:0),this.Xt.top+this.ya.top+F+(this.Ts.VB==="horizontal"?p.Vd:0)]),this.gB.Ei([this.Xt.left+this.ya.left+this.Ts.getHeight({x:v,y:p.Vd}),this.Xt.right+this.ya.right]),this.EB.qv({x:this.gB.x.ei(),y:this.gB.y.ei(),width:this.gB.x.ri(),height:this.gB.y.ri()}),this.Zg&&this.Zg(),this.FB){const m=this.M_.fp(),S=this.PB==="groups"?1/(a.length+2*(a.length+1)*this.RB):1-2*this.RB;o.forEach(b=>{const M=this.BB.get(b);if(M===void 0)return;const R=M.category-.5*S,T=M.category+.5*S,z=[this.Ts.toPoint(R,M.valueStart),this.Ts.toPoint(R,M.valueEnd),this.Ts.toPoint(T,M.valueEnd),this.Ts.toPoint(T,M.valueStart)];m.add({No:b.No,vertices:z,bar:b},{fillStyle:b.be,strokeStyle:b.xe})}),m.finishPlot()}s.finishPlot(),n.finishPlot(),this.FB=!1}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationCategoryPosition(t),this.setAnimationValues(t),this.valueAxis.setAnimationsEnabled(t),this.categoryAxis.setAnimationsEnabled(t),this}solveNearest(t){}dispose(){return this.zB.W(),this.EB.W(),this.Pm.dispose(),this.jy.W(),super.dispose()}UB(t){const e=this.kB;e&&t.sort((i,s)=>e({category:i.category,value:t.reduce((n,o)=>n+(o.category===i.category&&o.value||0),0)},{category:s.category,value:t.reduce((n,o)=>n+(o.category===s.category&&o.value||0),0)}))}YB(t,e,i,s){let n=0;const o=this.TB,h=this.SB,a=this.valueAxis.getInterval(),l=this.Ts.getWidth({x:this.gB.x.ri(),y:this.gB.y.ri()});if(o&&o.labelFillStyle!==ft){const u=o.tickLength+o.labelMargin,c=this.Ts.toPoint(0,1),d={kd:t.map((g,y)=>{const p=e.reduce((v,w)=>w.category!==g?v:v+w.value,0),x=o.formatter(g,p);if(!x)return;const A=y;return A!==void 0?{text:x,position:this.Ts.toPoint(A,this.valueAxis.dt.mi(a.start,-u)),alignment:c,rotation:o.labelRotation,sizePixels:this.HB(g,p)}:void 0}),Nu:o.labelFont,dt:this.gB},f=d?this.DB?Cf(d,l,this.Ts.getWidth):d.kd:[];f.forEach(g=>{g&&i.add().Rh(g.text).Fe(g.position).Ea(g.alignment).Nh(g.rotation).Ce(o.labelFillStyle).Oh(o.labelFont)}),o.tickStyle!==it&&o.tickLength!==0&&f.forEach(g=>{if(!g)return;const y=this.Ts.getWidth(g.position);s.add({positions:[this.Ts.toPoint(y,this.valueAxis.dt.getInnerStart()),this.Ts.toPoint(y,this.valueAxis.dt.mi(a.start,-o.tickLength))]},{lineStyle:o.tickStyle})}),n=f.reduce((g,y)=>y?Math.max(g,this.Ts.getHeight(y.sizePixels)):g,0)+o.tickLength+o.labelMargin}if(h&&h.labelFillStyle!==ft){let u;h.position==="after-bar"?u={kd:e.map((c,d)=>{const f=h.formatter(c,c.category,c.value);if(!f)return;const g=this.BB.get(c);return g!==void 0?{text:f,position:this.Ts.toPoint(g.category,this.valueAxis.dt.mi(g.valueEnd,h.labelMargin*Math.sign(g.valueEnd))),alignment:this.Ts.toPoint(0,-1*Math.sign(g.valueEnd)),rotation:h.labelRotation,sizePixels:this.$B(c)}:void 0}),Nu:h.labelFont,dt:this.gB}:h.position!=="inside-bar"&&h.position!=="inside-bar-start"&&h.position!=="inside-bar-centered"&&h.position!=="inside-bar-end"||(u={kd:e.map((c,d)=>{const f=h.formatter(c,c.category,c.value);if(!f)return;const g=this.BB.get(c);if(g===void 0)return;const y=this.pB==="bipolar"?Math.sign(g.valueEnd):this.pB==="negative"?-1:1,p=this.Ts.toPoint(0,h.position==="inside-bar"||h.position==="inside-bar-end"?1*y:h.position==="inside-bar-centered"?0:-1*y);return{text:f,position:this.Ts.toPoint(g.category,h.position==="inside-bar"||h.position==="inside-bar-end"?this.valueAxis.dt.mi(g.valueEnd,-h.labelMargin*y):h.position==="inside-bar-centered"?(g.valueStart+g.valueEnd)/2:this.valueAxis.dt.mi(g.valueStart,h.labelMargin*y)),alignment:p,rotation:h.labelRotation,sizePixels:this.$B(c)}}),Nu:h.labelFont,dt:this.gB}),u&&(u?this.DB?Cf(u,l,this.Ts.getWidth):u.kd:[]).forEach(c=>{c&&i.add().Rh(c.text).Fe(c.position).Ea(c.alignment).Nh(c.rotation).Ce(h.labelFillStyle).Oh(h.labelFont).setMouseInteractions(!1)})}return{labelMarginBeforeCategoryAxisPixels:n}}HB(t,e){if(!this.TB||this.TB.labelFillStyle===ft)return{x:0,y:0};const i=this.IB.get(t);if(i)return i;const s=this.TB.formatter(t,e),n=this.us.Ig.Fg(s,this.TB.labelFont,this.TB.labelRotation);return n.isEstimate?this.us.Ss(!0):this.IB.set(t,n),n}$B(t){if(!this.SB||this.SB.labelFillStyle===ft)return{x:0,y:0};const e=this.CB.get(t);if(e)return e;const i=this.us.Ig.Fg(this.SB.formatter(t,t.category,t.value),this.SB.labelFont,this.SB.labelRotation);return i.isEstimate?this.us.Ss(!0):this.CB.set(t,i),i}vB(){return this.xS.reduce((t,e)=>{const i=this.$B(e);return{x:Math.max(t.x,i.x),y:Math.max(t.y,i.y)}},{x:0,y:0})}wB(){this.FB=!0,this.us.Ss()}getMinimumSize(){return{x:200,y:200}}}const iv={Descending:(r,t)=>t.value-r.value},sv={...Ta,VB:"vertical",xB:-1,MB:1},rv={...vc,VB:"horizontal",xB:1,MB:-1},oa=(r,t)=>t?r.x:r.y,nv=(r,t,e,i)=>t===1&&i===(e?r.columnIndex:r.rowIndex)||t===-1&&i===(e?r.columnIndex+r.columnSpan:r.rowIndex+r.rowSpan),Ff=(r,t,e,i,s,n)=>{const o=t.length,h=Math.sign(i),a=[],l=t.reduce((g,y)=>g+y);for(let g=1;g<=o-1;g+=1)a.push(oa(s,n)*t.slice(0,g).reduce((y,p)=>y+p,0)/l);const u=a.map(g=>0);let c=a[e-1]+i;for(let g=e;g>0&&g<o;g+=h){const y=r.filter(x=>nv(x,h,n,g)).reduce((x,A)=>Math.max(x,oa(A.panel.getMinimumSize()||{x:0,y:0},n)),20),p=a[g-1];if(h===1&&c>oa(s,n)-y||h===-1&&c<0+y){u.fill(0);break}if(g!==e&&(h===1?p>c:p<c))break;u[g-1]=c-p,c+=y*h}const d=u.map((g,y)=>a[y]+g),f=d.map((g,y)=>(g-(y>0?d[y-1]:0))/oa(s,n));return f.push(1-f.reduce((g,y)=>g+y,0)),f};class Jy{constructor(t,e,i,s,n){this.coordsRelative="relative",this.coordsClient="client",this.$i=!1,this.RP=new Array,this.D=new Xe,this.XB=[],this.$g=[],this.jB=void 0,this.ZB=!0,this.QB=!0,this.JB=!0,this.Qg=!1,this.KB=!0,this.qB=()=>{this.KB=!0,this.us.Ss()},this.tL=[],this.onInViewChange=c=>this.D.on("inViewChange",c),this.offInViewChange=c=>this.D.off(c,"inViewChange"),this.iL=c=>{for(let d=0;d<this.RP.length;d+=1)if(this.RP[d].panel===c){this.RP.splice(d,1),this.ZB=!0,this.us.Ss();break}},this.sL=c=>{const d=this.XB.indexOf(c);d>=0&&this.XB.splice(d,1)},this.im=c=>{const d=this.$g.indexOf(c);d>=0&&this.$g.splice(d,1)},this.eL=(c,d,f,g,y)=>{if(this.hL(d,f,g,y)){const p={panel:c,columnIndex:d,rowIndex:f,columnSpan:g,rowSpan:y};return this.RP.push(p),this.rL(p),this.ZB=!0,c}throw new Jo("Out of dashboard range.")},this.nL=e.numberOfRows,this.oL=e.numberOfColumns,this.cA=t,this.aL=e,this.lL=s;const o=this.oL*this.nL;this.uL={x:new bf(new Array(this.oL).fill(1)),y:new bf(new Array(this.nL).fill(1))},this.qi=i.qi,this.cL=this.qi.dashboardSplitterStyle,this.th=(e==null?void 0:e.disableAnimations)!==!0&&(e==null?void 0:e.animationsEnabled)!==!1,this.dL=Qi(i,o),this.fL=i.FI("dashboard splitters",500001),this.OM=()=>this.dL.TI(),this.am=this.dL.II(),this.es=i.es.hs(this,{AL:{}}),this.es.AL.ps(this.qi.effectsDashboardSplitters);const h=i.oi();this.uiScale=ui.d2({scaleXYConstructor:Gt}).Vi(0,100).Oi(0,100).q(h),this.pixelScale=ui.d2({scaleXYConstructor:Gt}).Vi(0,this.uiScale.x.getCellSize()).Oi(0,this.uiScale.y.getCellSize()).q(h),this.gL=i.mL.bind(i),this.yL=i.pL.bind(i),this.SL=i.vL.bind(i),this.bL=i.xL.bind(i),this.eo=i.eo.bind(i),this.ro=i.ro.bind(i),this.engine=i.hm,this.us=i.rm,i.Co(()=>this.qB()),i.Ss();const a=i.Fo(c=>{this.Qg=c,this.D.emit("inViewChange",this,c)});this.Am=i.Io.bind(i,a),this.ML(),this.setAnimationsEnabled(this.th);const l={on:(u=this.D).on.bind(u,"resize"),off:u.off.bind(u)};var u;this.createChartXY=c=>{const d=is(c,this.aL,this.th);return this.eL(new Ic(this.cA,this.dL.DI(this._L(c.columnIndex,c.rowIndex)),this.wL(d,this.uL),this.iL,n,d,l),d.columnIndex,d.rowIndex,d.columnSpan,d.rowSpan)},this.createSpiderChart=c=>{const d=is(c,this.aL,this.th);return this.eL(new Hy(this.cA,this.dL.DI(this._L(c.columnIndex,c.rowIndex)),this.wL(d,this.uL),this.iL,n,d,l),d.columnIndex,d.rowIndex,d.columnSpan,d.rowSpan)},this.createPolarChart=c=>{const d=is(c,this.aL,this.th);return this.eL(new Gy(this.cA,this.dL.DI(this._L(c.columnIndex,c.rowIndex)),this.wL(d,this.uL),this.iL,n,d,l),d.columnIndex,d.rowIndex,d.columnSpan,d.rowSpan)},this.createPieChart=c=>{const d=is(c,this.aL,this.th),f=d&&d.type?d.type:Ry;return this.eL(new f(this.cA,this.dL.DI(this._L(c.columnIndex,c.rowIndex)),this.wL(d,this.uL),this.iL,n,l,d),d.columnIndex,d.rowIndex,d.columnSpan,d.rowSpan)},this.createGaugeChart=c=>{const d=is(c,this.aL,this.th),f=d&&d.type?d.type:Yy;return this.eL(new f(this.cA,this.dL.DI(this._L(c.columnIndex,c.rowIndex)),this.wL(d,this.uL),this.iL,n,l,d.disableAnimations),d.columnIndex,d.rowIndex,d.columnSpan,d.rowSpan)},this.createFunnelChart=c=>{const d=is(c,this.aL,this.th),f=d&&d.type?d.type:Oy;return this.eL(new f(this.cA,this.dL.DI(this._L(c.columnIndex,c.rowIndex)),this.wL(d,this.uL),this.iL,n,l,d),d.columnIndex,d.rowIndex,d.columnSpan,d.rowSpan)},this.createPyramidChart=c=>{const d=is(c,this.aL,this.th),f=c&&c.type?c.type:Wy;return this.eL(new f(this.cA,this.dL.DI(this._L(c.columnIndex,c.rowIndex)),this.wL(d,this.uL),this.iL,n,l,d),d.columnIndex,d.rowIndex,d.columnSpan,d.rowSpan)},this.createUIPanel=c=>{const d=is(c,this.aL,this.th);return this.eL(new bc(this.cA,this.dL.DI(this._L(c.columnIndex,c.rowIndex)),this.wL(d,this.uL),this.iL,n,l),d.columnIndex,d.rowIndex,d.columnSpan,d.rowSpan)},this.createLegendBoxPanel=c=>{const d=is(c,this.aL,this.th);return this.eL(new uA(this.cA,this.dL.DI(this._L(c.columnIndex,c.rowIndex)),this.wL(d,this.uL),this.iL,n,l),d.columnIndex,d.rowIndex,d.columnSpan,d.rowSpan)},this.createZoomBandChart=c=>{const d=is(c,this.aL,this.th);return this.eL(new Uy(this.cA,this.dL.DI(this._L(c.columnIndex,c.rowIndex)),this.wL(d,this.uL),this.iL,n,d,l),d.columnIndex,d.rowIndex,d.columnSpan,d.rowSpan)},this.createMapChart=c=>{const d=is(c,this.aL,this.th);return this.eL(new wy(this.cA,this.dL.DI(this._L(c.columnIndex,c.rowIndex)),this.wL(d,this.uL),this.iL,n,d,l),d.columnIndex,d.rowIndex,d.columnSpan,d.rowSpan)},this.createChart3D=c=>{const d=is(c,this.aL,this.th),f=new Cc(this.cA,this.dL.DI(this._L(c.columnIndex,c.rowIndex)),this.wL(d,this.uL),this.iL,n,l,d);return this.eL(f,d.columnIndex,d.rowIndex,d.columnSpan,d.rowSpan)},this.createDataGrid=c=>{const d=is(c,this.aL,this.th),f=new jy(this.cA,this.dL.DI(this._L(c.columnIndex,c.rowIndex)),this.wL(d,this.uL),this.iL,n,l);return this.eL(f,d.columnIndex,d.rowIndex,d.columnSpan,d.rowSpan)},this.createBarChart=c=>{const d=is(c,this.aL,this.th),f=new qy(this.cA,this.dL.DI(this._L(c.columnIndex,c.rowIndex)),this.wL(d,this.uL),this.iL,n,l,d);return this.eL(f,d.columnIndex,d.rowIndex,d.columnSpan,d.rowSpan)}}_L(t,e){return t+e*this.oL}wL(t,e){return{d1:i=>new i.scale1DConstructor(i.dimension==="x"?t.columnIndex:t.rowIndex,i.dimension==="x"?t.columnSpan:t.rowSpan,i.dimension==="x"?this.oL:this.nL,i.dimension==="x"?e.x:e.y),d2:i=>new i.scaleXYConstructor().ot({x:t.columnIndex,y:t.rowIndex},{x:t.columnSpan,y:t.rowSpan},{x:this.oL,y:this.nL},e),d3:()=>new fg({x:t.columnIndex,y:t.rowIndex},{x:t.columnSpan,y:t.rowSpan},{x:this.oL,y:this.nL},e)}}setWidth(t){return t instanceof Array||(t=[t,t]),this.gL(t[0]),this.yL(t[1]),this}setHeight(t){return t instanceof Array||(t=[t,t]),this.SL(t[0]),this.bL(t[1]),this}getWidth(){return this.eo()}getHeight(){return this.ro()}setBackgroundFillStyle(t){return this.engine.setBackgroundFillStyle(t),this.fL.Ss(),this}getBackgroundFillStyle(){return this.engine.getBackgroundFillStyle()}setBackgroundStrokeStyle(t){return this.engine.setBackgroundStrokeStyle(t),this.fL.Ss(),this}getBackgroundStrokeStyle(){return this.engine.getBackgroundStrokeStyle()}getTheme(){return this.qi}setSplitterStyle(t){const e=this.cL;return this.cL=typeof t=="function"?t(this.cL):t,this.CL(e),this}getSplitterStyle(){return this.cL}setSplitterEffect(t){return this.es.AL.ps(t),this.us.Ss(),this}getSplitterEffect(){return this.es.AL.vs()}setAnimationHighlight(t){return this.JB=t,this.tL.forEach(e=>this.us.ls._s(e.line,t)),this}getAnimationHighlight(){return this.JB}CL(t){for(const e of this.tL)e.line.Re(this.cL);this.ML()}setColumnWidth(t,e){const i=this.uL.x.M();return t>=0&&t<i.length&&(i[t]=e,this.uL.x.S(i)),this.qB(),this}getColumnWidth(t){const e=this.uL.x.M();if(t>=e.length)throw new Jo("Column index is out of dashboard range.");return e[t]}setRowHeight(t,e){const i=this.uL.y.M();return t>=0&&t<i.length&&(i[Math.abs(i.length-1-t)]=e,this.uL.y.S(i)),this.qB(),this}getRowHeight(t){const e=this.uL.y.M();if(t>=e.length)throw new Jo("Row index is out of dashboard range.");return e[Math.abs(e.length-1-t)]}getSizePixels(){return this.pixelScale.getInnerIntervalPixels()}onResize(t){return this.D.on("resize",t)}offResize(t){return this.D.off(t,"resize")}kL(t,e,i){if(i&&Math.abs(t.x)>0)this.TL(e,t.x);else{if(i||!(Math.abs(t.y)>0))return;this.FL(e,t.y)}for(const s of this.RP)s.panel.Z();this.qB()}FL(t,e){const i=Ff(this.RP,this.uL.y.M(),t,e,this.pixelScale.oi(),!1);this.uL.y.S(i),this.qB()}TL(t,e){const i=Ff(this.RP,this.uL.x.M(),t,e,this.pixelScale.oi(),!0);this.uL.x.S(i),this.qB()}IL(){this.tL.forEach(t=>t.line.dispose()),this.tL.length=0;for(let t=1;t<=this.oL-1;t+=1)for(let e=0;e<=this.nL-1;e+=1)if(this.RP.find(i=>lr(e,i.rowIndex,i.rowIndex+i.rowSpan-1)&&(t===i.columnIndex||t===i.columnIndex+i.columnSpan))!==void 0){const i=Ci(new ds(()=>{this.PL(t)},(n,o,h,a,l)=>{this.kL(a,t,!0),tt(l)},()=>{this.DL(t)})),s=this.fL.Ee(this.pixelScale).Re(this.cL).setMouseEnterEventHandler(()=>{this.PL(t)}).setMouseLeaveEventHandler(()=>{this.DL(t)}).setMouseDragEventHandler((n,o,h,a,l)=>{this.kL(l,t,!0),tt(o)}).setTouchStartEventHandler(i.onTouchStart).setTouchMoveEventHandler(i.onTouchMove).setTouchEndEventHandler(i.onTouchEnd);this.us.ls.os(s,n=>s.cs(n),{animationEnabled:this.JB}),this.tL.push({row:e,column:t,line:s,alignment:"vertical"})}for(let t=1;t<=this.nL-1;t+=1)for(let e=0;e<=this.oL-1;e+=1)if(this.RP.find(i=>lr(e,i.columnIndex,i.columnIndex+i.columnSpan-1)&&(t===i.rowIndex||t===i.rowIndex+i.rowSpan))!==void 0){const i=Ci(new ds(()=>{this.BL(t)},(n,o,h,a,l)=>{this.kL(a,t,!1),tt(l)},()=>{this.LL(t)})),s=this.fL.Ee(this.pixelScale).Re(this.cL).setMouseEnterEventHandler(()=>{this.BL(t)}).setMouseLeaveEventHandler(()=>{this.LL(t)}).setMouseDragEventHandler((n,o,h,a,l)=>{this.kL(l,t,!1),tt(o)}).setTouchStartEventHandler(i.onTouchStart).setTouchMoveEventHandler(i.onTouchMove).setTouchEndEventHandler(i.onTouchEnd);this.us.ls.os(s,n=>s.cs(n),{animationEnabled:this.JB}),this.tL.push({row:t,column:e,line:s,alignment:"horizontal"})}this.es.AL.fs(this.tL.map(t=>t.line))}RL(){const t=this.pixelScale.oi(),e=this.uL.x.M(),i=e.reduce((o,h)=>o+h),s=this.uL.y.M(),n=s.reduce((o,h)=>o+h);this.tL.forEach(o=>{if(o.alignment==="vertical"){const h=N(t.x*e.slice(0,o.column).reduce((l,u)=>l+u,0)/i,t.y*s.slice(0,o.row).reduce((l,u)=>l+u,0)/n),a=N(h.x,t.y*s.slice(0,o.row+1).reduce((l,u)=>l+u,0)/n);o.line.Ve(h).ze(a)}else{const h=N(t.x*e.slice(0,o.column).reduce((l,u)=>l+u,0)/i,t.y*s.slice(0,o.row).reduce((l,u)=>l+u,0)/n),a=N(t.x*e.slice(0,o.column+1).reduce((l,u)=>l+u,0)/i,h.y);o.line.Ve(h).ze(a)}})}PL(t){this.tL.forEach(e=>{e.alignment==="vertical"&&e.column===t&&(this.us.ls.Ms(e.line,1),this.fL.EL(e.line))}),this.jB=this.engine.setMouseStyle(It.ResizeColumn),this.us.Ss()}BL(t){this.tL.forEach(e=>{e.alignment==="horizontal"&&e.row===t&&(this.us.ls.Ms(e.line,1),this.fL.EL(e.line))}),this.jB=this.engine.setMouseStyle(It.ResizeRow),this.us.Ss()}DL(t){this.tL.forEach(e=>{e.alignment==="vertical"&&e.column===t&&this.us.ls.Ms(e.line,0)}),this.engine.restoreMouseStyle(this.jB),this.us.Ss()}LL(t){this.tL.forEach(e=>{e.alignment==="horizontal"&&e.row===t&&this.us.ls.Ms(e.line,0)}),this.engine.restoreMouseStyle(this.jB),this.us.Ss()}setAnimationsEnabled(t){return this.th=t,this.getCells().filter(e=>e.panel instanceof Ds).forEach(e=>e.panel.setAnimationsEnabled(t)),this.setAnimationHighlight(this.th),this}getAnimationsEnabled(){return this.th}getCells(){return this.RP.slice()}dispose(){return this.$i||(this.Am&&this.Am(),this.RP.slice().forEach(t=>t.panel.dispose()),this.XB.slice().forEach(t=>t.dispose()),this.$g.slice().forEach(t=>t.dispose()),this.$i=!0,this.lL(),this.D.emit("dispose",this)),this}isDisposed(){return this.$i}onDispose(t){return this.D.on("dispose",t)}offDispose(t){return this.D.off(t,"dispose")}getIsInView(){return this.Qg}saveToFile(t,e,i){return fy(this.engine,t,e,i),this}zL(t){if(this.KB){const e=this.us.dt.oi(),i=e.x,s=e.y;this.uiScale.q(i,s),this.pixelScale.q(i,s);const n=this.uiScale.getInnerIntervalPixels();this.pixelScale.Vi(0,n.x).Oi(0,n.y),this.D.emit("resize",this,n.x,n.y,i,s),this.QB=!0}this.ZB&&(this.IL(),this.ZB=!1,this.QB=!0),this.QB&&(this.RL(),this.QB=!1);for(const e of this.RP)e.panel.Te(t);return this.XB.forEach(e=>e.Ps()),this.XB.forEach(e=>e.Te()),this.$g.forEach(e=>e.Ps()),this.$g.forEach(e=>e.Te()),this.KB=!1,this}j(){for(const t of this.RP)t.panel.j();return this.pixelScale.x.j(),this.pixelScale.y.j(),this.uiScale.x.j(),this.uiScale.y.j(),this}Z(){for(const t of this.RP)t.panel.Z();return this.pixelScale.x.Z(),this.pixelScale.y.Z(),this.uiScale.x.Z(),this.uiScale.y.Z(),this}translateCoordinate(t,e,i){return ul(t,e,i,this.pixelScale,this.us)}addUIElement(t=Ac,e=this.uiScale){e=Da(e,this.pixelScale);const i=Fa(t,this.OM(),this.uiScale,e,this.sL,this.qi);return this.XB.push(i),i}addLegendBox(t=al,e=this.uiScale){e=Da(e,this.pixelScale);const i=Fa(t,this.am,this.uiScale,e,this.im,this.qi);return i.setDraggingMode(jt.notDraggable),this.$g.push(i),i}getLegendBoxes(){return this.$g}hL(t,e,i,s){return e>=0&&t>=0&&e+s<=this.nL&&t+i<=this.oL}rL(t){const e=this.cL,i=e===it?0:e.getThickness()/2,s={left:t.columnIndex>0?i:0,top:t.rowIndex<this.nL-1?i:0,right:t.columnIndex<this.oL-1?i:0,bottom:t.rowIndex>0?i:0};t.panel.Fr(s)}ML(){this.uiScale.x.si([0,0]),this.uiScale.y.si([0,0]),this.pixelScale.x.si([0,0]),this.pixelScale.y.si([0,0]);for(const t of this.RP)this.rL(t);this.us.Ss()}}const is=(r,t,e)=>{const i={...r,columnSpan:r.columnSpan||1,rowSpan:r.rowSpan||1,animationsEnabled:r.disableAnimations!==void 0?!r.disableAnimations:r.animationsEnabled!==void 0?r.animationsEnabled:e};var s,n;return i.rowIndex=(s=i.rowIndex,n=i.rowSpan,t.numberOfRows-(s+n)),i},Na=(r,t)=>Math.abs(r)+Math.abs(t);function Df(r,t){const e=r.reduce(Na,0),i=(s=r,Math.max(...s.map(o=>o)));var s;const n=(o=>Math.min(...o.map(h=>h)))(r);return Math.max(t**2*i/e**2,e**2/(t**2*n))}const ya=({height:r,width:t})=>r>t?{value:t,vertical:!1}:{value:r,vertical:!0},Pf=({data:r,dimensions:t})=>{const{x:e,y:i,width:s,height:n}=t;r.map(d=>d.value).reduce(Na,0);const o=r.map(d=>d.animatedValue).reduce(Na,0),h=r.map(d=>d.animatedValue*n*s/o),a=h.reduce((d,f)=>d+f,0),l=h.map(d=>d/a*100),u=h.filter((d,f)=>l[f]),c={children:[],x:e,y:i,width:s,height:n};if(r.length===1){const d={...r[0],x:t.x,y:t.y,width:t.width,height:t.height};c.children.push(d)}else ov(u,ya(c).value,r,c);return c.children},If=(r,t,e,i,s)=>{const n=r.reduce(Na,0)/t;r.forEach((o,h)=>{const a=Math.abs(o)/n,{x:l,y:u,children:c}=s,d={...i[c.length],x:l,y:u,width:e?n:a,height:e?a:n};e?s.y+=a:s.x+=a,c.push(d)}),e?(s.x+=n,s.y-=t,s.width-=n):(s.x-=t,s.y+=n,s.height-=n)},ov=(r,t,e,i)=>{const s=[{children:r,width:t,row:[]}];for(;s.length>0;){const n=s.pop();if(!n)continue;const{children:o,width:h,row:a}=n;let l=0;const u=[...a];for(;l<o.length;){const c=[...u,o[l]],d=Df(u,h),f=Df(c,h);if(!(u.length===0||d>f)){If(u,h,ya(i).vertical,e,i),s.push({children:o.slice(l),width:ya(i).value,row:[]});break}u.push(o[l]),l+=1}l===o.length&&If(u,h,ya(i).vertical,e,i)}};class hv extends Ds{constructor(t,e,i,s,n,o,h){if(super(t,e,i,e.vm("treeMapChart bg",0),s,e.us.qi.treeMapChartBackgroundFillStyle||e.us.qi.chartXYSeriesBackgroundFillStyle,e.us.qi.treeMapChartBackgroundStrokeStyle||e.us.qi.chartXYBackgroundStrokeStyle,e.us.qi.treeMapChartTitleFont||e.us.qi.chartXYTitleFont,e.us.qi.treeMapChartTitleFillStyle||e.us.qi.chartXYTitleFillStyle,h),this.VL=new Map,this.OL=[],this.NL={},this.GL=vt([]),this._y={speed:1},this.WL=st,this.UL=!0,this.YL="Go Back",this.HL=[],this.$L=this.qi.treeMapChartPathLabelFillStyle||this.qi.uiTextFillStyle,this.XL=this.qi.treeMapChartPathLabelFont||this.qi.uiTextFont,this.jL=this.qi.treeMapChartLabelHeaderFillStyle||this.qi.uiTextFillStyle,this.ZL=this.qi.treeMapChartLabelHeaderFont||this.qi.uiTextFont,this.QL=this.qi.treeMapChartLabelFillStyle||this.qi.uiTextFillStyle,this.JL=this.qi.treeMapChartLabelFont||this.qi.uiTextFont,this.Yi=!0,this.bb=he.onHover,this.Wy=av,this.Mb=!0,this.KL=!1,this.qL=this.qi.treeMapChartParentColor||ue,this.tR=this.qi.treeMapChartNodeStrokeStyle||this.qi.uiBackgroundStrokeStyle,this.onNodeMouseEnter=l=>this.D.on("mouseEnter",l),this.onNodeMouseLeave=l=>this.D.on("mouseLeave",l),this.onNodeMouseClick=l=>this.D.on("mouseClick",l),this.onNodeMouseDoubleClick=l=>this.D.on("mouseDoubleClick",l),this.onNodeMouseDown=l=>this.D.on("mouseDown",l),this.onNodeMouseUp=l=>this.D.on("mouseUp",l),this.onNodeMouseMove=l=>this.D.on("mouseMove",l),this.offNodeMouseEnter=l=>this.D.off(l,"mouseEnter"),this.offNodeMouseLeave=l=>this.D.off(l,"mouseLeave"),this.offNodeMouseClick=l=>this.D.off(l,"mouseClick"),this.offNodeMouseDoubleClick=l=>this.D.off(l,"mouseDoubleClick"),this.offNodeMouseDown=l=>this.D.off(l,"mouseDown"),this.offNodeMouseUp=l=>this.D.off(l,"mouseUp"),this.offNodeMouseMove=l=>this.D.off(l,"mouseMove"),this.offNodeMouseDragStart=l=>this.D.off(l,"mouseDragStart"),this.offNodeMouseDrag=l=>this.D.off(l,"mouseDrag"),this.offNodeMouseDragStop=l=>this.D.off(l,"mouseDragStop"),this.offNodeMouseWheel=l=>this.D.off(l,"mouseWheel"),this.Cb=(l,u,c,d,f)=>{this.us.Ss(),this.KL=!0},this.wt=(l,u)=>{const c=this.iR(u);c&&(this.bb!==he.disabled&&(this.Hb=c,tt(l)),this.Mb&&this.us.ls.Ms(u,!0),this.UL&&this.engine.setMouseStyle(It.Point),this.D.emit("mouseEnter",this,l,c.userNode),this.us.Ss())},this.Ct=(l,u)=>{const c=this.iR(u);c&&(this.bb!==he.disabled&&(this.Hb=void 0,l&&tt(l)),this.Mb&&this.us.ls.Ms(u,!1),this.engine.setMouseStyle(It.Default),this.D.emit("mouseLeave",this,l,c.userNode),this.us.Ss())},this.Pt=(l,u)=>{const c=this.iR(u);c&&(this.bb!==he.disabled&&(this.Hb=c,tt(l)),this.Mb&&this.us.ls.Ms(u,!0),this.UL&&this.engine.setMouseStyle(It.Point),this.D.emit("mouseEnter",this,l,c.userNode),this.us.Ss())},this.kt=(l,u)=>{const c=this.iR(u);if(c){if(this.UL){const d=c!=null&&c.children.length?c:c.parentID?this.NL[c.parentID]:void 0;d&&(this.GL.S([d]),this.Hb=void 0,this.D.emit("viewChange",this.GL.M()),this.KL=!0),l&&tt(l)}this.D.emit("mouseClick",this,l,c.userNode),this.us.Ss()}},this.Tt=(l,u)=>{var c;const d=(c=this.VL.get(u))===null||c===void 0?void 0:c.userNode;this.D.emit("mouseDoubleClick",this,l,d)},this.Ft=(l,u)=>{var c;const d=(c=this.VL.get(u))===null||c===void 0?void 0:c.userNode;this.D.emit("mouseDown",this,l,d)},this.It=(l,u)=>{var c;const d=(c=this.VL.get(u))===null||c===void 0?void 0:c.userNode;this.D.emit("mouseUp",this,l,d)},this.Bt=(l,u,c)=>{var d;const f=(d=this.VL.get(c))===null||d===void 0?void 0:d.userNode;this.D.emit("mouseDragStart",this,l,u,f)},this.Dt=(l,u,c,d,f)=>{var g;const y=(g=this.VL.get(f))===null||g===void 0?void 0:g.userNode;this.D.emit("mouseDrag",this,l,u,c,d,y)},this.Lt=(l,u,c,d)=>{var f;const g=(f=this.VL.get(d))===null||f===void 0?void 0:f.userNode;this.D.emit("mouseDragStop",this,l,u,c,g)},this.Rt=(l,u)=>{var c;const d=(c=this.VL.get(u))===null||c===void 0?void 0:c.userNode;this.D.emit("mouseWheel",this,l,d)},this.Et=(l,u)=>{const c=this.iR(u);c&&(this.bb!==he.disabled&&(this.Hb=c),this.Mb&&this.us.ls.Ms(u,!0),this.D.emit("touchStart",this,l,c.userNode),this.us.Ss(),tt(l))},this.zt=(l,u)=>{const c=this.iR(u);c&&(this.bb!==he.disabled&&(this.Hb=c),this.Mb&&this.us.ls.Ms(u,!0),this.D.emit("touchMove",this,l,c.userNode),this.us.Ss(),tt(l))},this.Vt=(l,u)=>{const c=this.iR(u);if(c){if(this.bb!==he.disabled&&(this.Hb=void 0),this.UL){const d=c!=null&&c.children.length?c:c.parentID?this.NL[c.parentID]:void 0;d&&(this.GL.S([d]),this.D.emit("viewChange",this.GL.M()),this.KL=!0),l&&tt(l)}this.Mb&&this.us.ls.Ms(u,!1),this.D.emit("touchEnd",this,l,c.userNode),this.us.Ss(),tt(l)}},this.sR=l=>{const u=this.NL[this.HL[l].id]?[this.NL[this.HL[l].id]]:this.OL;this.GL.S(u),this.D.emit("viewChange",u),this.KL=!0,this.us.Ss()},this.qi.treeMapChartNodeColors)this.eR=this.qi.treeMapChartNodeColors;else{const l=this.qi.pointSeriesFillStyle,u=c=>Nt(c)?c.getColor():ue;this.eR=typeof l=="function"?new Array(5).fill(0).map((c,d)=>u(l(d))):[u(l)]}this.us.Nn(ot.Mf),this.Hy=e.ob("TreeMapChart plotting",0),this.Xy=e.ob("TreeMap UI plotting",1),this.onResize(this.Cb),this._m.Rh("TreeMap Chart");const a=qt(void 0,My);this.Eb=a.Ay(e.Zy(),this.pixelScale,this.pixelScale,this.qi).setVisible(!1),this.hR=this.es.yg(),this.Sm(n,this.uiScale),this.Vb=this.Hy.Ob(this.pixelScale).Ce(new Sd).we(this.tR),this.rR=this.us.ls.Er(this,{animationEnabled:(o==null?void 0:o.disableAnimations)!==!0&&(o==null?void 0:o.animationsEnabled)!==!1}),this.nR=new Ms(()=>this.Xy.Pr(this.pixelScale).setMouseInteractions(!1)),this.oR=new Ms(()=>this.Xy.Pr(this.uiScale)),this.Vb.setMouseInteractions(this.Yi).setMouseEnterEventHandler((l,u,c)=>this.wt(u,c)).setMouseLeaveEventHandler((l,u,c)=>this.Ct(u,c)).setMouseClickEventHandler((l,u,c)=>this.kt(u,c)).setMouseDoubleClickEventHandler((l,u,c)=>this.Tt(u,c)).setMouseDownEventHandler((l,u,c)=>this.Ft(u,c)).setMouseUpEventHandler((l,u,c)=>this.It(u,c)).setMouseMoveEventHandler((l,u,c)=>this.Pt(u,c)).setMouseDragStartEventHandler((l,u,c,d)=>this.Bt(u,c,d)).setMouseDragEventHandler((l,u,c,d,f,g)=>this.Dt(u,c,d,f,g)).setMouseDragStopEventHandler((l,u,c,d,f)=>this.Lt(u,c,d,f)).setMouseWheelEventHandler((l,u,c)=>this.Rt(u,c)).setTouchStartEventHandler((l,u,c)=>this.Et(u,c)).setTouchMoveEventHandler((l,u,c)=>this.zt(u,c)).setTouchEndEventHandler((l,u,c)=>this.Vt(u,c)),this.setAnimationsEnabled((o==null?void 0:o.disableAnimations)!==!0&&(o==null?void 0:o.animationsEnabled)!==!1)}setData(t){t=Array.isArray(t)?t.slice():[t];const{aR:e}=(()=>{let s=0;return{aR:n=>{var o;const h=n.map((c,d)=>({node:c,parent:null})),a=[];for(;h.length>0;){const c=h.pop();if(!c)continue;const{node:d,parent:f}=c;s+=1;const g={id:s,parentID:f==null?void 0:f.id,name:d.name,value:d.value||0,animatedValue:d.value||0,children:[],nodeIndex:f?f.nodeIndex:-1,userNode:d};f?f.children.push(g):a.push(g),(o=d.children)===null||o===void 0||o.forEach(y=>{h.push({node:y,parent:g})})}const l=c=>{c.children.forEach(l),c.children.length>0&&(c.value+=c.children.reduce((d,f)=>d+f.value,0),c.animatedValue+=c.children.reduce((d,f)=>d+f.animatedValue,0),c.children.sort((d,f)=>f.animatedValue-d.animatedValue))};a.forEach(l);const u=n.length===1?a[0].children:a;return u.sort((c,d)=>d.animatedValue-c.animatedValue),u.forEach((c,d)=>{c.nodeIndex=d;const f=g=>{g.children.forEach(y=>{y.nodeIndex=c.nodeIndex,f(y)})};f(c)}),a}}})(),i=e(t);return i.forEach(s=>{const n=this.NL[s.id];n&&this.lR(s,n)}),this.Hb=void 0,this.GL.S(i),this.OL=i,this.NL=this.uR(i),this.KL=!0,this.us.Ss(),this}setAnimationValues(t,e=1){return this._y=t?{speed:e}:void 0,this.us.Ss(),this}setInitPathButtonText(t){return this.YL=t,this.KL=!0,this.us.Ss(),this}setDisplayedLevelsCount(t){return this.WL=t,this.KL=!0,this.us.Ss(),this}setDrillDownEnabled(t){return this.UL=t,this.KL=!0,this.us.Ss(),this}setDrillDownNode(t){var e,i;if(this.Hb=void 0,t===void 0)this.GL.S(this.OL);else{const s=[...this.OL];for(;s.length>0;){const n=s.pop();if(n){if(n.value!==void 0&&n.userNode===t||n.parentID&&Array.isArray(t)&&((i=(e=this.NL[n.parentID])===null||e===void 0?void 0:e.userNode)===null||i===void 0?void 0:i.children)===t){const o=n.children.length?n:n.parentID?this.NL[n.parentID]:this.OL[0];this.GL.S([o]);break}if(n.children)for(let o=n.children.length-1;o>=0;o-=1)s.push(n.children[o])}}}return this.D.emit("viewChange",this.GL.M()),this.KL=!0,this.us.Ss(),this}setNodeColoring(t){return t instanceof Array?(this.Vb.Ce(new Sd),this.eR=t):this.Vb.Ce(t),this.KL=!0,this.us.Ss(),this}setParentNodeColor(t){return this.qL=t,this.KL=!0,this.us.Ss(),this}setPathLabelFillStyle(t){return this.$L=typeof t=="function"?t(this.$L):t,this.KL=!0,this.us.Ss(),this}getPathLabelFillStyle(){return this.$L}setPathLabelFont(t){return Qo(t)?this.XL=t:this.XL=t(this.XL),this.KL=!0,this.us.Ss(),this}getPathLabelFont(){return this.XL}setHeaderFont(t){return Qo(t)?this.ZL=t:this.ZL=t(this.ZL),this.KL=!0,this.us.Ss(),this}getHeaderFont(){return this.ZL}setHeaderFillStyle(t){return this.jL=typeof t=="function"?t(this.jL):t,this.KL=!0,this.us.Ss(),this}getHeaderFillStyle(){return this.jL}setLabelFont(t){return Qo(t)?this.JL=t:this.JL=t(this.JL),this.KL=!0,this.us.Ss(),this}getLabelFont(){return this.JL}setLabelFillStyle(t){return this.QL=typeof t=="function"?t(this.QL):t,this.KL=!0,this.us.Ss(),this}getLabelFillStyle(){return this.QL}setNodeBorderStyle(t){return this.Vb.we(t),this.KL=!0,this.us.Ss(),this}getNodeBorderStyle(){return this.Vb.ao()}setNodeEffect(t){return this.hR.ps(t),this.us.Ss(),this}getNodeEffect(){return this.hR.vs()}setAutoCursor(t){return this.Eb&&t(this.Eb),this.us.Ss(),this}getAutoCursor(){return this.Eb}setAutoCursorMode(t){return this.bb=t,this.us.Ss(),this}getAutoCursorMode(){return this.bb}setCursorResultTableFormatter(t){return this.Wy=t,this.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}onNodeMouseDragStart(t){return this.D.on("mouseDragStart",t)}onNodeMouseDrag(t){return this.D.on("mouseDrag",t)}onNodeMouseDragStop(t){return this.D.on("mouseDragStop",t)}onNodeMouseWheel(t){return this.D.on("mouseWheel",t)}onNodeTouchStart(t){return this.D.on("touchStart",t)}onNodeTouchMove(t){return this.D.on("touchMove",t)}onNodeTouchEnd(t){return this.D.on("touchEnd",t)}onViewChange(t){return this.D.on("viewChange",t)}offNodeTouchStart(t){return this.D.off(t,"touchStart")}offNodeTouchMove(t){return this.D.off(t,"touchMove")}offNodeTouchEnd(t){return this.D.off(t,"touchEnd")}offViewChange(t){return this.D.off(t,"viewChange")}setMouseInteractions(t){return this.Yi=t,this.Vb.setMouseInteractions(t),this}getMouseInteractions(){return this.Yi}setAnimationHighlight(t){return this.rR.Or(t),this}getAnimationHighlight(){return this.rR.Nr()}setHighlightOnHover(t){return this.Mb=t,this}getHighlightOnHover(){return this.Mb}getMinimumSize(){}Zd(){return[this]}Te(t){super.Te(t),super.pm(),ii.Fm(this._m,this.bm);const e=ii.Tm(this._m,this.bm);if(this.KL&&this.GL.M().length){this.Vb.Nt(),this.VL.clear(),this.rR.Vr(),this.th&&this.cR(t);const s=Pf({data:this.GL.M(),dimensions:{x:0+this.ya.left,y:0+this.ya.bottom,width:this.pixelScale.x.getInnerEnd()-this.ya.right-this.ya.left,height:this.pixelScale.y.getInnerEnd()-e-this.ya.top-this.ya.bottom}}),n=this.nR.fp();this.dR(s,n),n.finishPlot(),this.fR(),this.OL!==this.GL.M()&&this.OL.length>1&&this.HL.unshift({name:this.YL,id:0});let o=0;const h=this.oR.fp(),a=this.XL;this.HL.forEach((l,u)=>{const c=h.add(),d=this.us.Ig.Fg(l.name,a,0);c.Rh(`← ${l.name}`).Oh(a).Fe({x:0,y:100}).Ea({x:-1,y:1}).Fr({left:this.ya.left+o,top:this.ya.top,right:0,bottom:0}).Ce(this.$L).setMouseClickEventHandler(f=>this.sR(u)).setMouseEnterEventHandler(()=>this.engine.setMouseStyle(It.Point)).setMouseLeaveEventHandler(()=>this.engine.setMouseStyle(It.Default)),o+=d.x+25}),h.finishPlot(),this.GL.M().every(l=>l.value===l.animatedValue)?this.KL=!1:this.us.Ss(!0)}const i=this.us.On();if(this.Hb&&i){const s=i;this.Eb.setPosition(s).setVisible(!0).getResultTable().setContent(this.Wy(new $e,this.Hb).Zu())}else this.Eb.setVisible(!1);return this.Eb.Ps().Te(),this}dispose(){return this.Xy.W(),this.Hy.W(),this.Eb.dispose(),this.Vb.dispose(),this.VL.clear(),this.nR.gp(),this.oR.gp(),super.dispose()}j(){return super.j(),this}Z(){return super.Z(),this}Gd(){return Qe(this.Vb.Eh())}attach(t,e=!0,i=!1){return t.setText(this.getTitle()),t.setOn(!0).setLocked(!0),ge(t,this.qi,i,{}),this}dR(t,e,i=!1,s=0){const n=t.map((o,h)=>({node:o,isChild:i,depth:s}));for(;n.length>0;){const o=n.pop();if(!o)continue;const{node:h,depth:a,opacity:l}=o,{x:u,y:c,height:d,width:f,children:g,animatedValue:y,name:p,nodeIndex:x}=h,A=this.eR,v=a===0&&this.GL.M().length===1?this.qL:A[x%A.length],w=[{x:u,y:c},{x:u,y:d+c},{x:f+u,y:d+c},{x:f+u,y:c}],E=this.Vb.zr().pl(w).AR(v.setA(l||250)).Yb(y);this.VL.set(E,h),this.rR.zr(E,z=>E.cs(z));const C=u+5,k=c+5,F=Math.max(d-25-5,0),m=Math.max(f-5-5,0);if(g&&g.length&&a<this.WL&&m>15&&F>15){const z=Pf({data:g,dimensions:{x:m>0?C:u,y:F>0?k:c,width:m,height:F}});for(let P=0;P<z.length;P+=1){const _=(250-(g.length>7?50:150))/(g.length-1),V=h.id===1&&this.OL.length===1||this.OL===this.GL.M()?250:l?l/(a+1):250-P*_;n.push({node:z[P],isChild:!0,depth:a+1,opacity:V})}}const S=a===0&&this.GL.M().length===1?this.jL:this.QL,b=a===0?this.ZL:this.JL,M=this.gR(p,f-25,b),R=this.us.Ig.Fg(M,b,0),T=e.add();f-25>R.x&&d>25?T.Rh(M).Fe({x:u+5,y:d+c-2.5}).Ea({x:-1,y:1}).Ce(S).Oh(b):T.Rh("")}}uR(t){const e={},i=[...t];for(;i.length>0;){const s=i.pop();s&&(e[s.id]=s,s.children&&i.push(...s.children))}return e}iR(t){if(!this.KL&&t)return this.VL.get(t)}fR(){this.HL=[];const t=this.GL.M()[0].id;let e=this.NL[t].parentID;for(;e;)this.HL.push({name:this.NL[e].name,id:e}),e=this.NL[e].parentID;return this.HL.reverse()}gR(t,e,i){let s=this.us.Ig.Fg(t,i,0).x;if(s<=e)return t;const n=t.split(" ");let o=t;for(;n.length>1&&s>e;)n.pop(),o=`${n.join(" ")}...`,s=this.us.Ig.Fg(o,i,0).x;if(s>e)for(o=`${n[0]}...`,s=this.us.Ig.Fg(o,i,0).x;o.length>3&&s>e;)o=`${o.substring(0,o.length-4)}...`,s=this.us.Ig.Fg(o,i,0).x;return o.length<=3&&s>e?"":o}cR(t){var e;const i=[...this.OL];for(;i.length>0;){const s=i.pop();if(!s)continue;const n=s.value-s.animatedValue;if(Math.abs(n)<.0015*s.value||this._y===void 0)s.animatedValue=s.value;else{const o=n/250*(((e=this._y)===null||e===void 0?void 0:e.speed)||1)*t;s.animatedValue+=o,(n>0&&s.animatedValue>s.value||n<0&&s.animatedValue<s.value)&&(s.animatedValue=s.value)}s.children&&s.children.length>0&&i.push(...s.children)}}lR(t,e){const i=[{current:t,previous:e}];for(;i.length>0;){const s=i.pop();if(!s)continue;const{current:n,previous:o}=s;n.animatedValue=this.th?o.animatedValue:n.value,o.nodeIndex<0?n.nodeIndex=0:n.nodeIndex=o.nodeIndex;const h=new Map(o.children.map(a=>[a.id,a]));n.children.forEach((a,l)=>{const u=h.get(a.id);i.push({current:a,previous:u||o})})}}}const av=(r,t)=>{const{name:e,value:i}=t;return r.addRow(`${e}`).addRow(`${i}`),r},Lh=(r,t)=>{const e=(s=>{const n=new H({color:s.uiStrokeColorContrastHigh}),o=new H({color:s.uiStrokeColorContrastMedium}),h=new H({color:s.uiStrokeColorContrastLow}),a=new Ka({family:s.fontFamily,weight:"normal",style:"normal"}),l=a.setSize(18*s.fontScaler),u=a.setSize(16*s.fontScaler),c=a.setSize(14*s.fontScaler),d=a.setSize(10*s.fontScaler),f=a.withMutations(Et=>Et.set("size",14*s.fontScaler).set("weight","bold")),g=a.setSize(13*s.fontScaler),y=new Tt({thickness:2,fillStyle:h}),p=new H({color:s.dataHighlightOverlayColor}),x=new Tt({thickness:2,fillStyle:s.legendBackgroundBorderFillStyle}),A=s.dataColorPalette.map(Et=>new H({color:Et.stroke})),v=Et=>A[Et%A.length],w=A.map(Et=>new Tt({thickness:2,fillStyle:Et})),E=Et=>w[Et%w.length],C=s.dataColorPalette.map(Et=>new H({color:Et.border})).map(Et=>new Tt({thickness:2,fillStyle:Et})),k=Et=>C[Et%C.length],F=s.dataColorPalette.map(Et=>{const Lt=Et.area;return new mi({angle:180,stops:[{color:yi(Lt,D(255,255,255,Lt.getA()),.3),offset:0},{color:Lt,offset:.5},{color:yi(Lt,D(0,0,0,Lt.getA()),.3),offset:1}]})}),m=Et=>F[Et%F.length],S=s.dataColorPaletteInverted.map(Et=>{const Lt=Et.area;return new mi({angle:180,stops:[{color:yi(Lt,D(255,255,255,Lt.getA()),.3),offset:0},{color:Lt,offset:.5},{color:yi(Lt,D(0,0,0,Lt.getA()),.3),offset:1}]})}),b=Et=>S[Et%S.length],M=s.dataColorPaletteInverted.map(Et=>new H({color:Et.border})).map(Et=>new Tt({thickness:2,fillStyle:Et})),R=Et=>M[Et%M.length],T=new H({color:s.dataColorPositive}),z=new H({color:s.dataColorNegative}),P=new Tt({thickness:1,fillStyle:new H({color:s.dataStrokeColorContrastHigh.setA(50)})}),_=new Tt({thickness:2,fillStyle:s.axisLineFillStyle}),V=it,B=new H({color:D(0,0,0,1)}),I=new Tt({thickness:1,fillStyle:s.axisGridMajorFillStyle}),L=new Tt({thickness:1,fillStyle:s.axisTickMajorFillStyle}),U=c,Y=s.axisLabelMajorFillStyle,O=new Tt({thickness:1,fillStyle:s.axisGridMajorFillStyle}),j=new Tt({thickness:1,fillStyle:s.axisTickMajorFillStyle}),$=c,Z=s.axisLabelMajorFillStyle,Q=new Tt({thickness:1,fillStyle:s.axisGridMinorFillStyle}),ct=new Tt({thickness:1,fillStyle:s.axisTickMinorFillStyle}),et=d,mt=s.axisLabelMinorFillStyle,xt=dy,Ct=new zs({gridStrokeStyle:I,tickStyle:L,tickLength:50,tickPadding:-14,labelFont:U,labelPadding:0,labelFillStyle:Y}),Pt=new zs({gridStrokeStyle:O,tickStyle:j,tickLength:7,tickPadding:5,labelFont:$,labelPadding:0,labelFillStyle:Z}),dt=new zs({gridStrokeStyle:Q,tickStyle:ct,tickLength:4,tickPadding:10,labelFont:et,labelPadding:0,labelFillStyle:mt}),ut=new PS({extremeTickStyle:xt,majorTickStyle:Pt,minorTickStyle:dt}),Ys=new wS({greatTickStyle:Ct,majorTickStyle:Pt,minorTickStyle:dt}),ye=new VS({majorTickStyle:Pt,minorTickStyle:dt}),te=new H({color:s.dataHighlightOverlayColor}),vr=new Tt({thickness:1,fillStyle:o}),Pe=new Tt({thickness:2,fillStyle:o}),ke=Et=>new Ra.Triangulated({shape:"sphere",size:10,fillStyle:A[Et%A.length]}),Ws=A[0],Yt=s.uiTextFillStyle,xe=s.legendBackgroundFillStyle,si=new Tt({thickness:1,fillStyle:s.legendBackgroundBorderFillStyle}),_e=Aa(s.legendButtonDefaultColor),Oe=Aa(s.isDark?D(70,70,70,255):D(170,170,170,255)),xs=new H({color:s.isDark?D(70,70,70,255):D(170,170,170,255)}),me=new Tt({thickness:1,fillStyle:n}),de=new hS({thickness:1,fillStyle:s.cursorGridFillStyle,pattern:Kg.DashedEqual,patternScale:3}),_n=s.zoomBandChartDefocusOverlayFillStyle,be=new Tt({thickness:2,fillStyle:new H({color:s.zoomBandChartSplitterColor})});let Te={isDark:s.isDark,effect:s.effect,effectsText:s.effectsText,effectsDashboardSplitters:s.effectsDashboardSplitters,lcjsBackgroundFillStyle:s.lcjsBackgroundFillStyle,lcjsBackgroundStrokeStyle:it,highlightColorOffset:s.highlightColorOffset,highlightColorOffsetAxisOverlay:s.highlightColorOffsetAxisOverlay,dashboardSplitterStyle:new Tt({thickness:4,fillStyle:s.dashboardSplitterFillStyle}),chartXYBackgroundFillStyle:s.panelBackgroundFillStyle,chartXYBackgroundStrokeStyle:it,chartXYTitleFont:l,chartXYTitleFillStyle:s.titleFillStyle,chartXYSeriesBackgroundFillStyle:s.seriesBackgroundFillStyle,chartXYSeriesBackgroundStrokeStyle:y,chartXYZoomingRectangleFillStyle:p,chartXYZoomingRectangleStrokeStyle:x,chartXYFittingRectangleFillStyle:p,chartXYFittingRectangleStrokeStyle:x,lineSeriesStrokeStyle:E,pointLineSeriesStrokeStyle:E,pointLineSeriesFillStyle:v,pointSeriesFillStyle:v,ellipseSeriesFillStyle:v,ellipseSeriesStrokeStyle:E,polygonSeriesFillStyle:v,polygonSeriesStrokeStyle:E,rectangleSeriesFillStyle:v,rectangleSeriesStrokeStyle:it,segmentSeriesStrokeStyle:E,boxSeriesBodyFillStyle:v(0),boxSeriesBodyStrokeStyle:it,boxSeriesStrokeStyle:new Tt({thickness:1,fillStyle:A[0]}),boxSeriesMedianStrokeStyle:new Tt({thickness:1,fillStyle:new H({color:D(0,0,0)})}),ohlcCandleThicknessPixels:5,ohlcCandleBodyFillStylePositive:T,ohlcCandleBodyFillStyleNegative:z,ohlcCandleTailStrokeStylePositive:new Tt({thickness:1,fillStyle:new H({color:s.uiStrokeColorContrastHigh})}),ohlcCandleTailStrokeStyleNegative:new Tt({thickness:1,fillStyle:new H({color:s.uiStrokeColorContrastHigh})}),ohlcBarThicknessPixels:10,ohlcBarStrokeStylePositive:new Tt({thickness:2,fillStyle:T}),ohlcBarStrokeStyleNegative:new Tt({thickness:2,fillStyle:z}),heatmapGridSeriesFillStyle:v,heatmapGridSeriesWireframeStyle:P,heatmapScrollingGridSeriesFillStyle:v,heatmapScrollingGridSeriesWireframeStyle:P,areaRangeSeriesFillStyle:m,areaRangeSeriesStrokeStyle:k,areaRangeSeriesFillStyleInverted:b,areaRangeSeriesStrokeStyleInverted:R,areaSeriesBipolarHighFillStyle:m,areaSeriesBipolarHighStrokeStyle:k,areaSeriesBipolarLowFillStyle:b,areaSeriesBipolarLowStrokeStyle:R,areaSeriesPositiveFillStyle:m,areaSeriesPositiveStrokeStyle:k,areaSeriesNegativeFillStyle:b,areaSeriesNegativeStrokeStyle:R,xAxisTitleFont:u,xAxisTitleFillStyle:s.axisTitleFillStyle,xAxisStrokeStyle:_,xAxisNibStyle:V,xAxisOverlayStyle:B,xAxisZoomingBandFillStyle:p,xAxisZoomingBandStrokeStyle:it,xAxisNumericTicks:ut,xAxisDateTimeTicks:Ys,xAxisTimeTicks:ye,yAxisTitleFont:u,yAxisTitleFillStyle:s.axisTitleFillStyle,yAxisStrokeStyle:_,yAxisNibStyle:V,yAxisOverlayStyle:B,yAxisZoomingBandFillStyle:p,yAxisZoomingBandStrokeStyle:it,yAxisNumericTicks:ut,yAxisDateTimeTicks:Ys,yAxisTimeTicks:ye,bandFillStyle:te,bandStrokeStyle:vr,constantLineStrokeStyle:Pe,barChartBackgroundFillStyle:s.panelBackgroundFillStyle,barChartBackgroundStrokeStyle:it,barChartTitleFont:l,barChartTitleFillStyle:s.titleFillStyle,barChartSeriesBackgroundFillStyle:ft,barChartSeriesBackgroundStrokeStyle:it,barChartBarFillStyle:v,barChartBarStrokeStyle:new Tt({thickness:1,fillStyle:h}),barChartValueAxisTitleFont:u,barChartValueAxisTitleFillStyle:s.axisTitleFillStyle,barChartValueAxisStrokeStyle:_,barChartValueAxisTicks:ut.setMajorTickStyle(Et=>Et.setGridStrokeStyle(it)).setMinorTickStyle(Et=>Et.setGridStrokeStyle(it)),barChartCategoryAxisTitleFont:u,barChartCategoryAxisTitleFillStyle:s.axisTitleFillStyle,barChartCategoryAxisStrokeStyle:_,barChartCategoryLabels:{formatter:(Et,Lt)=>Et,labelFillStyle:ut.majorTickStyle.labelFillStyle,labelFont:ut.majorTickStyle.labelFont,labelMargin:8,labelRotation:0,tickStyle:ut.majorTickStyle.tickStyle,tickLength:0},barChartValueLabelsAfterBars:{position:"after-bar",formatter:(Et,Lt,at)=>Et.chart.valueAxis.formatValue(at),labelFillStyle:ut.majorTickStyle.labelFillStyle,labelFont:ut.majorTickStyle.labelFont,labelMargin:8,labelRotation:0},barChartValueLabelsInsideBars:{position:"inside-bar",formatter:(Et,Lt,at)=>Et.chart.valueAxis.formatValue(at),labelFillStyle:ut.majorTickStyle.labelFillStyle,labelFont:ut.majorTickStyle.labelFont,labelMargin:8,labelRotation:0},chart3DBackgroundFillStyle:s.panelBackgroundFillStyle,chart3DBackgroundStrokeStyle:it,chart3DTitleFont:l,chart3DTitleFillStyle:s.titleFillStyle,chart3DSeriesBackgroundFillStyle:s.seriesBackgroundFillStyle,chart3DSeriesBackgroundStrokeStyle:y,chart3DBoundingBoxStrokeStyle:it,xAxis3DTitleFont:u,xAxis3DTitleFillStyle:s.axisTitleFillStyle,xAxis3DStrokeStyle:_,xAxis3DNumericTicks:ut,xAxis3DDateTimeTicks:Ys,xAxis3DTimeTicks:ye,yAxis3DTitleFont:u,yAxis3DTitleFillStyle:s.axisTitleFillStyle,yAxis3DStrokeStyle:_,yAxis3DNumericTicks:ut,yAxis3DDateTimeTicks:Ys,yAxis3DTimeTicks:ye,zAxis3DTitleFont:u,zAxis3DTitleFillStyle:s.axisTitleFillStyle,zAxis3DStrokeStyle:_,zAxis3DNumericTicks:ut,zAxis3DDateTimeTicks:Ys,zAxis3DTimeTicks:ye,lineSeries3DStrokeStyle:E,pointLineSeries3DStrokeStyle:E,pointLineSeries3DPointStyle:ke,pointSeries3DPointStyle:ke,pointCloudSeries3DPointStyle:Et=>new Ra.Pixelated({size:5,fillStyle:A[Et%A.length]}),surfaceGridSeries3DFillStyle:v,surfaceGridSeries3DWireframeStyle:P,surfaceScrollingGridSeries3DFillStyle:v,surfaceScrollingGridSeries3DWireframeStyle:P,boxSeries3DFillStyle:v,meshModel3DFillStyle:v(0),polarChartBackgroundFillStyle:s.panelBackgroundFillStyle,polarChartBackgroundStrokeStyle:it,polarChartTitleFont:l,polarChartTitleFillStyle:s.titleFillStyle,polarChartSeriesBackgroundFillStyle:s.seriesBackgroundFillStyle,polarChartSeriesBackgroundStrokeStyle:y,polarSectorFillStyle:te,polarSectorStrokeStyle:vr,polarAmplitudeAxisTitleFont:u,polarAmplitudeAxisTitleFillStyle:s.axisTitleFillStyle,polarAmplitudeAxisStrokeStyle:_,polarAmplitudeAxisNumericTicks:ut,polarAmplitudeAxisDateTimeTicks:Ys,polarAmplitudeAxisTimeTicks:ye,polarRadialAxisTitleFont:u,polarRadialAxisTitleFillStyle:s.axisTitleFillStyle,polarRadialAxisStrokeStyle:_,polarRadialAxisTickStyle:Pt,polarLineSeriesStrokeStyle:E,polarPointLineSeriesFillStyle:v,polarPointLineSeriesStrokeStyle:E,polarPointSeriesFillStyle:v,polarPolygonSeriesFillStyle:m,polarPolygonSeriesStrokeStyle:k,polarAreaSeriesFillStyle:m,polarAreaSeriesStrokeStyle:k,polarHeatmapSeriesFillStyle:v,mapChartBackgroundFillStyle:s.panelBackgroundFillStyle,mapChartBackgroundStrokeStyle:it,mapChartTitleFont:l,mapChartTitleFillStyle:s.titleFillStyle,mapChartFillStyle:Ws,mapChartStrokeStyle:new Tt({thickness:1,fillStyle:new H({color:s.dataStrokeColorContrastMedium})}),mapChartOutlierRegionFillStyle:ft,mapChartOutlierRegionStrokeStyle:new Tt({thickness:1,fillStyle:h}),mapChartSeparateRegionFillStyle:xe,mapChartSeparateRegionStrokeStyle:si,dataGridBackgroundFillStyle:s.panelBackgroundFillStyle,dataGridBackgroundStrokeStyle:it,dataGridTitleFont:l,dataGridTitleFillStyle:s.titleFillStyle,dataGridTextFont:c,dataGridTextFillStyle:Ws,dataGridCellBackgroundFillStyle:new H({color:s.uiBackgroundColor}),dataGridBorderStrokeStyle:new Tt({thickness:.4,fillStyle:new H({color:s.uiBackgroundBorderColor})}),dataGridScrollBarBackgroundFillStyle:s.seriesBackgroundFillStyle,dataGridScrollBarBackgroundStrokeStyle:it,dataGridScrollBarFillStyle:s.seriesBackgroundFillStyle,dataGridScrollBarStrokeStyle:si,dataGridScrollBarButtonFillStyle:s.seriesBackgroundFillStyle,dataGridScrollBarButtonStrokeStyle:si,dataGridScrollBarButtonArrowFillStyle:_e,dataGridScrollBarButtonArrowStrokeStyle:si,sparkLineChartStrokeStyle:E(0),sparkPointChartFillStyle:v(0),sparkBarChartFillStyle:v(0),sparkBarChartStrokeStyle:k(0),sparkAreaChartFillStyle:m(0),sparkAreaChartStrokeStyle:k(0),sparkPieChartFillStyle:v,sparkPieChartStrokeStyle:si,sparkChartBandFillStyle:te,sparkChartBandStrokeStyle:vr,sparkChartConstantLineStrokeStyle:Pe,spiderChartBackgroundFillStyle:s.panelBackgroundFillStyle,spiderChartBackgroundStrokeStyle:it,spiderChartTitleFont:l,spiderChartTitleFillStyle:s.titleFillStyle,spiderChartSeriesBackgroundFillStyle:s.seriesBackgroundFillStyle,spiderChartSeriesBackgroundStrokeStyle:y,spiderChartWebStyle:new Tt({thickness:2,fillStyle:h}),spiderChartScaleLabelFillStyle:s.axisLabelMajorFillStyle,spiderChartScaleLabelFont:c,spiderChartAxisLabelFillStyle:s.axisTitleFillStyle,spiderChartAxisLabelFont:u,spiderChartAxisStrokeStyle:new Tt({thickness:2,fillStyle:o}),spiderChartAxisNibStrokeStyle:new Tt({thickness:2,fillStyle:n}),spiderSeriesFillStyle:m,spiderSeriesStrokeStyle:k,spiderSeriesPointFillStyle:v,pieChartBackgroundFillStyle:s.panelBackgroundFillStyle,pieChartBackgroundStrokeStyle:it,pieChartTitleFont:l,pieChartTitleFillStyle:s.titleFillStyle,pieChartSliceFillStylePalette:v,pieChartSliceStrokeStyle:si,pieChartSliceLabelFont:g,pieChartSliceLabelFillStyle:s.uiTextFillStyle,pieChartConnectorStrokeStyle:me,funnelChartBackgroundFillStyle:s.panelBackgroundFillStyle,funnelChartBackgroundStrokeStyle:it,funnelChartTitleFont:l,funnelChartTitleFillStyle:s.titleFillStyle,funnelChartSliceFillStylePalette:v,funnelChartSliceStrokeStyle:si,funnelChartSliceLabelFont:g,funnelChartSliceLabelFillStyle:s.uiTextFillStyle,funnelChartConnectorStrokeStyle:me,pyramidChartBackgroundFillStyle:s.panelBackgroundFillStyle,pyramidChartBackgroundStrokeStyle:it,pyramidChartTitleFont:l,pyramidChartTitleFillStyle:s.titleFillStyle,pyramidChartSliceFillStylePalette:v,pyramidChartSliceStrokeStyle:si,pyramidChartSliceLabelFont:g,pyramidChartSliceLabelFillStyle:s.uiTextFillStyle,pyramidChartConnectorStrokeStyle:me,gaugeChartBackgroundFillStyle:s.panelBackgroundFillStyle,gaugeChartBackgroundStrokeStyle:it,gaugeChartTitleFont:l,gaugeChartTitleFillStyle:s.titleFillStyle,gaugeChartEmptyGaugeFillStyle:new H({color:s.uiBackgroundColor}),gaugeChartEmptyGaugeStrokeStyle:si,gaugeChartGaugeFillStyle:Ws,gaugeChartIntervalLabelsFillStyle:Yt,gaugeChartIntervalLabelsFont:g,gaugeChartValueLabelFillStyle:Yt,gaugeChartValueLabelFont:g,treeMapChartBackgroundFillStyle:s.panelBackgroundFillStyle,treeMapChartBackgroundStrokeStyle:it,treeMapChartParentColor:s.treeMapChartParentColor,treeMapChartNodeColors:s.treeMapChartNodeColors,treeMapChartNodeStrokeStyle:new Tt({thickness:1,fillStyle:new H({color:xi("000")})}),treeMapChartTitleFillStyle:s.titleFillStyle,treeMapChartTitleFont:l,treeMapChartPathLabelFillStyle:Yt,treeMapChartPathLabelFont:g,treeMapChartLabelHeaderFillStyle:s.treeMapChartLabelHeaderFillStyle,treeMapChartLabelHeaderFont:l,treeMapChartLabelFillStyle:s.treeMapChartLabelFillStyle,treeMapChartLabelFont:g,uiPanelBackgroundFillStyle:s.panelBackgroundFillStyle,uiPanelBackgroundStrokeStyle:it,zoomBandChartDefocusOverlayFillStyle:_n,zoomBandChartSplitterStrokeStyle:be,zoomBandChartKnobFillStyle:s.zoomBandChartKnobFillStyle,zoomBandChartKnobSize:s.zoomBandChartKnobSize,onScreenMenuBackgroundColor:D(254,204,0,.7),uiButtonFillStyle:_e,uiButtonFillStyleHidden:Oe,uiButtonStrokeStyle:si,uiButtonSize:10,uiBackgroundFillStyle:xe,uiBackgroundStrokeStyle:si,uiTextFillStyle:Yt,uiTextFillStyleHidden:xs,uiTextFont:g,legendTitleFillStyle:Yt,legendTitleFont:f,cursorTickMarkerXBackgroundFillStyle:xe,cursorTickMarkerXBackgroundStrokeStyle:si,cursorTickMarkerXTextFillStyle:Yt,cursorTickMarkerXTextFont:g,cursorTickMarkerYBackgroundFillStyle:xe,cursorTickMarkerYBackgroundStrokeStyle:si,cursorTickMarkerYTextFillStyle:Yt,cursorTickMarkerYTextFont:g,cursorPointMarkerFillStyle:de.getFillStyle(),cursorPointMarkerSize:{x:9,y:9},cursorPointMarkerShape:ae.Cross,cursorResultTableFillStyle:xe,cursorResultTableStrokeStyle:si,cursorResultTableTextFillStyle:Yt,cursorResultTableTextFont:g,cursorGridStrokeStyleX:de,cursorGridStrokeStyleY:de,chartMarkerPointMarkerFillStyle:de.getFillStyle(),chartMarkerPointMarkerSize:{x:20,y:20},chartMarkerPointMarkerShape:ae.Star,seriesMarkerPointMarkerFillStyle:de.getFillStyle(),seriesMarkerPointMarkerSize:{x:9,y:9},seriesMarkerPointMarkerShape:ae.Cross};return s.overrideThemeProperties&&(Te={...Te,...s.overrideThemeProperties}),Te})(r),i={...t,header1Font:e.xAxisTitleFont,header2Font:e.xAxisNumericTicks.getMajorTickStyle().labelFont,header3Font:e.uiTextFont,mainDataColor:r.dataColorPalette[0].stroke};return{...e,examples:i}},Tn=(r,t)=>{const e=new Image;e.crossOrigin="*";const i=`${r}/${t}`;return e.addEventListener("error",s=>{Cg(r,i,"Theme resource",{shouldCrash:!1})}),e.src=i,e},zh=(r,t,e)=>i=>{const s=r===!0?t[i%t.length].stroke:yi(t[i%t.length].stroke,D(255,255,255),.5);return new hi({stops:[{color:yi(s,D(255,255,255),.5*e).setA(100),offset:0},{color:s.setA(100),offset:.5},{color:yi(s,D(30,30,30),.5*e).setA(100),offset:1}]})},Bh=(r,t,e)=>i=>{const s=r===!0?t[i%t.length].stroke:yi(t[i%t.length].stroke,D(255,255,255),.2);return new hi({stops:[{color:yi(s,D(255,255,255),.2*e),offset:0},{color:s,offset:.5},{color:yi(s,D(0,0,0),.2*e),offset:1}]})},xr=(r,t,e)=>i=>{const s=r===!0?t[i%t.length].stroke:yi(t[i%t.length].stroke,D(255,255,255),.2);return new mi({angle:90,stops:[{color:yi(s,D(255,255,255),.5*e),offset:0},{color:s,offset:.35},{color:yi(s,D(30,30,30),.5*e),offset:1}]})},Uh=(r,t,e)=>(i=>{const s=new Map;return n=>{const o=s.get(n);if(o)return o;const h=(a=>{const l=r===!0?t[a%t.length].stroke:yi(t[a%t.length].stroke,D(255,255,255),.3);return new mi({angle:90,stops:[{color:yi(l,D(255,255,255),.5),offset:0},{color:l,offset:.35},{color:yi(l,D(30,30,30),.5),offset:1}]})})(n);return s.set(n,h),h}})(),Gh=(r,t,e)=>{const i=t[0].stroke;return new hi({shape:bi.ellipse,extent:Mi.farthestCorner,position:{x:.5,y:.5},stops:[{color:r===!0?i:yi(i,D(255,255,255),.5*e),offset:0},{color:i,offset:.5},{color:r===!0?i:yi(i,D(0,0,0),.5*e),offset:1}]})},lv=Rh(()=>{const r=D(255,255,255),t=new H({color:r}),e=!0,i=new nl({spread:1,blur:9,offset:{x:0,y:0},color:D(0,0,0,150)}),s=new hi({position:{x:.8,y:.8},extent:Mi.farthestCorner,shape:bi.ellipse,stops:[{offset:0,color:D(50,51,52)},{offset:.5,color:D(14,15,16)},{offset:1,color:D(0,0,0)}]}),n=new H({color:D(45,45,45)}),o=new hi({position:{x:.5,y:.5},extent:Mi.farthestCorner,shape:bi.circle,stops:[{offset:0,color:D(120,120,120,100)},{offset:1,color:D(0,0,0,50)}]}),h=new hi({position:{x:.5,y:.5},extent:Mi.farthestCorner,shape:bi.circle,stops:[{offset:0,color:D(30,30,30,200)},{offset:1,color:D(0,0,0,255)}]}),a=new H({color:D(255,255,220)}),l=new H({color:D(255,255,166)}),u=new H({color:D(255,255,220)}),c=new H({color:D(255,255,220,130)}),d=new H({color:D(255,255,200)}),f=d,g=new mi({angle:45,stops:[{offset:0,color:D(230,230,230)},{offset:1,color:D(150,150,150)}]}),y=new H({color:D(220,220,220)}),p=new H({color:D(200,200,200,50)}),x=new H({color:D(200,200,200,150)}),A=new H({color:D(200,200,200,20)}),v=new H({color:D(150,150,150)}),w=new mi({angle:0,stops:[{offset:0,color:D(10,10,10,220)},{offset:1,color:D(30,30,30,220)}]}),E=t,C=D(255,255,200),k=D(20,20,20),F=D(0,0,0),m=r,S=D(150,150,150),b=D(50,50,50),M=D(50,50,50),R=D(100,100,100);D(200,200,200);const T=[D(255,255,91,255),D(255,205,91,255),D(255,155,91,255),D(255,196,188,255),D(255,148,184,255),D(219,148,198,255),D(235,196,224,255),D(169,148,198,255),D(148,226,198,255),D(148,255,176,255),D(180,255,165,255)].map(ut=>({stroke:ut,border:ut,area:ut.setA(100)})),z=r.setA(20),P=D(176,255,157,255),_=D(255,112,76,255),V={mapChartFillStyle:new mi({angle:135,stops:[{color:D(255,255,91,255),offset:0},{color:D(255,155,91,255),offset:1}]}),spiderSeriesFillStyle:zh(e,T,.5),pieChartSliceFillStylePalette:Bh(e,T,1),funnelChartSliceFillStylePalette:xr(e,T,1),pyramidChartSliceFillStylePalette:xr(e,T,1),rectangleSeriesFillStyle:Uh(e,T),gaugeChartGaugeFillStyle:Gh(e,T,1)},B=new H({color:D(176,255,157,255)}),I=new H({color:D(255,146,146,255)}),L=new H({color:D(176,255,157,255)}),U=new H({color:D(230,63,63,255)}),Y=new H({color:D(176,255,157,120)}),O=new H({color:D(229,63,63,180)}),j=new H({color:D(27,37,36,255)}),$=new H({color:D(62,27,27,255)}),Z=[D(255,0,0),D(255,255,0),D(0,255,0)],Q=[D(10,10,255),D(10,190,255),D(251,255,0),D(255,38,0)],ct=[D(255,255,0),D(255,204,0),D(255,128,0),D(255,0,0)],et=[D(0,0,0),D(167,4,69,255),D(255,0,0),D(252,252,168,255)],mt=new hi({stops:[{color:D(61,61,80,100),offset:0},{color:D(44,44,55,30),offset:1}]}),xt=new H({color:D(148,148,198,255)}),Ct=Y.getColor().setA(255),Pt=D(100,100,100),dt=[D(255,241,149,200),D(255,230,65,200),D(238,211,32,200),D(238,176,32,200),D(255,159,13,200),D(254,120,37,200),D(253,91,56,200),D(253,75,84,200),D(254,95,124,200),D(227,56,160,200),D(226,53,134,200),D(216,90,166,200),D(254,151,206,200),D(237,151,254,200),D(243,177,255,200),D(233,133,252,200),D(210,101,230,200),D(178,61,200,200),D(193,81,156,200),D(217,95,145,200)];return Lh({isDark:e,highlightColorOffset:D(60,60,60,60),highlightColorOffsetAxisOverlay:D(255,255,255,40),effect:i,effectsText:!0,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:s,dashboardSplitterFillStyle:n,panelBackgroundFillStyle:o,seriesBackgroundFillStyle:h,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:a,axisTitleFillStyle:l,axisLabelMajorFillStyle:u,axisLabelMinorFillStyle:c,uiTextFillStyle:f,axisLineFillStyle:g,axisTickMajorFillStyle:y,axisGridMajorFillStyle:p,axisTickMinorFillStyle:x,axisGridMinorFillStyle:A,cursorGridFillStyle:v,legendBackgroundFillStyle:w,legendBackgroundBorderFillStyle:E,legendButtonDefaultColor:C,uiBackgroundColor:k,uiBackgroundBorderColor:F,uiStrokeColorContrastHigh:m,uiStrokeColorContrastMedium:S,uiStrokeColorContrastLow:b,dataStrokeColorContrastHigh:M,dataStrokeColorContrastMedium:R,dataColorPalette:T,dataColorPaletteInverted:[{area:D(190,50,50,100),border:D(210,80,80)}],dataHighlightOverlayColor:z,dataColorPositive:P,dataColorNegative:_,zoomBandChartDefocusOverlayFillStyle:new H({color:D(0,0,0,180)}),zoomBandChartSplitterColor:xi("#FBFB5A"),zoomBandChartKnobFillStyle:ut=>new Zs({source:Tn(ut,"zoomBandChart/darkgold-selector.png"),fitMode:Ze.Fill}),zoomBandChartKnobSize:{x:14,y:30},overrideThemeProperties:V,treeMapChartParentColor:xi("#181E21"),treeMapChartNodeColors:dt,treeMapChartLabelFillStyle:new H({color:D(33,33,33)}),treeMapChartLabelHeaderFillStyle:new H({color:D(250,250,250)})},{positiveTextFillStyle:B,negativeTextFillStyle:I,positiveFillStyle:L,negativeFillStyle:U,positiveAreaFillStyle:Y,negativeAreaFillStyle:O,positiveBackgroundFillStyle:j,negativeBackgroundFillStyle:$,badGoodColorPalette:Z,coldHotColorPalette:Q,intensityColorPalette:ct,spectrogramColorPalette:et,bollingerFillStyle:mt,bollingerBorderFillStyle:xt,highlightPointColor:r,highlightDataGridColor:Ct,unfocusedDataColor:Pt})}),uv=Rh(()=>{const r=D(255,255,255),t=new H({color:r}),e=!0,i=new nl({spread:0,blur:9,offset:{x:0,y:0},color:D(105,255,236,40)}),s=new H({color:D(2,21,30)}),n=new hi({stops:[{color:D(19,40,66,150),offset:0},{color:D(0,0,0,150),offset:1}]}),o=new H({color:D(0,5,8,150)}),h=t,a=t,l=t,u=new H({color:D(255,255,220,130)}),c=t,d=new H({color:D(20,224,250,255)}),f=t,g=new H({color:D(61,94,110,100)}),y=new H({color:D(61,94,110,255)}),p=new H({color:D(61,94,110,40)}),x=t,A=new H({color:D(0,18,23,255)}),v=t,w=r;new H({color:D(0,17,22,240)});const E=D(0,38,48,220),C=D(0,0,0),k=r,F=D(150,150,150),m=D(19,78,93),S=D(50,50,50),b=D(0,36,48);D(200,200,200);const M=[D(45,253,253,255),D(44,172,247,255),D(46,100,248,255),D(96,84,199,255),D(184,104,245,255),D(98,160,218,255),D(43,238,245,255),D(38,140,206,255),D(112,96,224,255),D(206,157,255,255)].map(Pt=>({stroke:Pt,border:Pt,area:Pt.setA(100)})),R=r.setA(50),T=D(3,217,194,255),z=D(230,63,63,255),P={mapChartFillStyle:new mi({angle:135,stops:[{color:D(118,248,231,255),offset:0},{color:D(45,177,255,255),offset:1}]}),spiderSeriesFillStyle:zh(e,M,1),pieChartSliceFillStylePalette:Bh(e,M,1),funnelChartSliceFillStylePalette:xr(e,M,1),pyramidChartSliceFillStylePalette:xr(e,M,1),rectangleSeriesFillStyle:Uh(e,M),gaugeChartGaugeFillStyle:Gh(e,M,1)},_=new H({color:D(45,253,253,255)}),V=new H({color:D(255,146,146,255)}),B=new H({color:D(45,253,253,255)}),I=new H({color:D(230,63,63,255)}),L=new H({color:D(1,190,164,120)}),U=new H({color:D(229,63,63,180)}),Y=new H({color:D(1,53,57,255)}),O=new H({color:D(62,27,27,255)}),j=[D(1,104,119,255),D(0,165,144,255),D(0,246,214,255)],$=[D(0,87,95,255),D(0,125,124,255),D(1,209,182,255),D(0,255,221,255),D(218,112,112,255),D(172,47,47,255)],Z=[D(126,255,253,255),D(50,233,230,255),D(0,196,193,255),D(62,138,178,255),D(139,88,191,255),D(162,55,143,255)],Q=[D(13,31,52,255),D(101,50,118,255),D(1,142,172,255),D(2,196,170,255),D(0,255,221,255)],ct=new hi({stops:[{color:D(122,103,254,70),offset:0},{color:D(178,168,255,10),offset:1}]}),et=new H({color:D(122,103,254,255)}),mt=L.getColor().setA(255),xt=D(15,83,83),Ct=[D(139,252,252,150),D(60,239,239,150),D(2,201,201,150),D(26,159,159,150),D(15,146,187,150),D(65,168,200,150),D(67,146,207,150),D(64,108,209,150),D(189,64,233,150),D(219,84,238,150),D(192,55,212,150),D(212,98,229,150),D(248,110,211,150),D(251,154,225,150),D(251,154,184,150),D(233,105,144,150),D(255,133,170,150),D(249,110,135,150),D(245,72,101,150),D(210,57,84,150)];return Lh({isDark:e,highlightColorOffset:D(60,60,60,60),highlightColorOffsetAxisOverlay:D(255,255,255,40),effect:i,effectsText:!1,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:Pt=>new Zs({source:Tn(Pt,"themes/turquoiseHexagon.jpg"),fitMode:Ze.Fill}),dashboardSplitterFillStyle:s,panelBackgroundFillStyle:n,seriesBackgroundFillStyle:o,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:h,axisTitleFillStyle:a,axisLabelMajorFillStyle:l,axisLabelMinorFillStyle:u,uiTextFillStyle:c,axisLineFillStyle:d,axisTickMajorFillStyle:f,axisGridMajorFillStyle:g,axisTickMinorFillStyle:y,axisGridMinorFillStyle:p,cursorGridFillStyle:x,legendBackgroundFillStyle:A,legendBackgroundBorderFillStyle:v,legendButtonDefaultColor:w,uiBackgroundColor:E,uiBackgroundBorderColor:C,uiStrokeColorContrastHigh:k,uiStrokeColorContrastMedium:F,uiStrokeColorContrastLow:m,dataStrokeColorContrastHigh:S,dataStrokeColorContrastMedium:b,dataColorPalette:M,dataColorPaletteInverted:[{area:D(170,60,210,100),border:D(210,100,250)}],dataHighlightOverlayColor:R,dataColorPositive:T,dataColorNegative:z,zoomBandChartDefocusOverlayFillStyle:new H({color:D(0,0,0,180)}),zoomBandChartSplitterColor:xi("#2BF4F4"),zoomBandChartKnobFillStyle:Pt=>new Zs({source:Tn(Pt,"zoomBandChart/turquoise-selector.png"),fitMode:Ze.Fill}),zoomBandChartKnobSize:{x:14,y:30},overrideThemeProperties:P,treeMapChartParentColor:xi("#002329"),treeMapChartNodeColors:Ct,treeMapChartLabelFillStyle:new H({color:D(33,33,33)}),treeMapChartLabelHeaderFillStyle:new H({color:D(250,250,250)})},{positiveTextFillStyle:_,negativeTextFillStyle:V,positiveFillStyle:B,negativeFillStyle:I,positiveAreaFillStyle:L,negativeAreaFillStyle:U,positiveBackgroundFillStyle:Y,negativeBackgroundFillStyle:O,badGoodColorPalette:j,coldHotColorPalette:$,intensityColorPalette:Z,spectrogramColorPalette:Q,bollingerFillStyle:ct,bollingerBorderFillStyle:et,highlightPointColor:r,highlightDataGridColor:mt,unfocusedDataColor:xt})}),cv=Rh(()=>{const t=new nl({spread:0,blur:6,offset:{x:2,y:-2},color:D(0,0,0,30)}),e=new hi({position:{x:.8,y:.8},extent:Mi.farthestCorner,shape:bi.ellipse,stops:[{offset:0,color:D(255,255,255)},{offset:1,color:D(255,255,255)}]}),i=new H({color:D(219,227,233,255)}),s=new hi({position:{x:.5,y:.5},extent:Mi.farthestCorner,shape:bi.circle,stops:[{offset:0,color:D(255,255,255,200)},{offset:1,color:D(240,244,246,200)}]}),n=new hi({position:{x:.5,y:.5},extent:Mi.farthestCorner,shape:bi.circle,stops:[{offset:0,color:D(255,255,255,255)},{offset:1,color:D(255,255,255,255)}]}),o=new H({color:D(33,43,49)}),h=new H({color:D(33,43,49)}),a=new H({color:D(33,43,49)}),l=new H({color:D(33,43,49,150)}),u=new H({color:D(33,43,49)}),c=u,d=new mi({angle:45,stops:[{offset:0,color:D(225,225,225)},{offset:1,color:D(225,225,225)}]}),f=new H({color:D(150,150,150,255)}),g=new H({color:D(150,150,150,170)}),y=new H({color:D(150,150,150,150)}),p=new H({color:D(150,150,150,100)}),x=new H({color:D(128,146,159)}),A=new mi({angle:0,stops:[{offset:0,color:D(255,255,255,240)},{offset:1,color:D(255,255,255,240)}]}),v=new H({color:D(168,186,199)}),w=D(255,255,200);new H({color:D(255,255,255,240)}),new H({color:D(128,146,159,255)});const E=D(255,255,255,255),C=D(168,168,199,255),k=D(168,186,199,255),F=D(168,186,199,255),m=D(168,186,199,255),S=D(168,186,199,255),b=D(100,100,100);D(200,200,200);const M=[D(28,181,140,255),D(255,132,0,255),D(240,39,39,255),D(86,121,251,255),D(2,181,213,255),D(13,212,158,255),D(22,167,3,255),D(234,103,232,255),D(62,183,179,255),D(140,93,3,255),D(155,158,186,255)].map(dt=>({stroke:dt,border:dt,area:dt.setA(100)})),R=D(150,150,150,80),T=D(46,182,120,255),z=D(255,66,66,255),P=new Tt({thickness:2,fillStyle:new H({color:D(168,186,199,255)})}),_={mapChartFillStyle:new mi({angle:-45,stops:[{color:D(2,181,213,255),offset:0},{color:D(175,243,255,255),offset:1}]}),spiderSeriesFillStyle:zh(!1,M,.8),pieChartSliceFillStylePalette:Bh(!1,M,.8),funnelChartSliceFillStylePalette:xr(!1,M,.5),pyramidChartSliceFillStylePalette:xr(!1,M,.5),rectangleSeriesFillStyle:Uh(!1,M),gaugeChartGaugeFillStyle:Gh(!1,M,.8),chartXYSeriesBackgroundStrokeStyle:P,chart3DSeriesBackgroundStrokeStyle:P,polarChartSeriesBackgroundStrokeStyle:P,spiderChartSeriesBackgroundStrokeStyle:P,dataGridTextFillStyle:new H({color:D(0,88,64,255)})},V=new H({color:D(4,146,108,255)}),B=new H({color:D(240,39,39,255)}),I=new H({color:D(28,181,140,255)}),L=new H({color:D(230,88,88,255)}),U=new H({color:D(28,181,140,180)}),Y=new H({color:D(230,88,88,180)}),O=new H({color:D(229,243,228)}),j=new H({color:D(232,225,216)}),$=[D(193,48,48,255),D(240,234,60,255),D(45,191,55,255)],Z=[D(10,19,255,255),D(15,191,250,255),D(249,255,2,255),D(253,133,0,255),D(255,24,0,255)],Q=[D(50,99,213),D(8,179,77),D(255,246,0),D(255,126,0),D(189,36,30)],ct=[D(16,64,176),D(8,179,77),D(255,246,0),D(255,126,0),D(168,6,0)],et=new H({color:D(185,198,207,255)}),mt=new hi({stops:[{color:D(151,190,220,10),offset:0},{color:D(151,190,220,50),offset:1}]}),xt=U.getColor().setA(255),Ct=D(150,150,150),Pt=[D(255,243,136,125),D(254,237,99,125),D(255,216,109,125),D(255,172,100,125),D(255,133,101,125),D(255,113,142,125),D(230,103,129,125),D(242,126,219,125),D(255,155,235,125),D(255,181,240,125),D(203,143,255,125),D(208,154,255,125),D(171,188,255,125),D(197,209,255,125),D(171,187,255,125),D(84,167,239,125),D(38,196,214,125),D(38,214,196,125),D(69,225,141,125),D(36,191,88,125)];return Lh({isDark:!1,highlightColorOffset:D(-60,-60,-60,60),highlightColorOffsetAxisOverlay:D(0,0,0,40),effect:t,effectsText:!1,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:e,dashboardSplitterFillStyle:i,panelBackgroundFillStyle:s,seriesBackgroundFillStyle:n,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:o,axisTitleFillStyle:h,axisLabelMajorFillStyle:a,axisLabelMinorFillStyle:l,uiTextFillStyle:c,axisLineFillStyle:d,axisTickMajorFillStyle:f,axisGridMajorFillStyle:g,axisTickMinorFillStyle:y,axisGridMinorFillStyle:p,cursorGridFillStyle:x,legendBackgroundFillStyle:A,legendBackgroundBorderFillStyle:v,legendButtonDefaultColor:w,uiBackgroundColor:E,uiBackgroundBorderColor:C,uiStrokeColorContrastHigh:k,uiStrokeColorContrastMedium:F,uiStrokeColorContrastLow:m,dataStrokeColorContrastHigh:S,dataStrokeColorContrastMedium:b,dataColorPalette:M,dataColorPaletteInverted:[{area:D(190,50,50,100),border:D(210,80,80)}],dataHighlightOverlayColor:R,dataColorPositive:T,dataColorNegative:z,zoomBandChartDefocusOverlayFillStyle:new H({color:D(255,255,255,180)}),zoomBandChartSplitterColor:xi("#505D65"),zoomBandChartKnobFillStyle:dt=>new Zs({source:Tn(dt,"zoomBandChart/light-selector.png"),fitMode:Ze.Fill}),zoomBandChartKnobSize:{x:14,y:30},overrideThemeProperties:_,treeMapChartParentColor:xi("#D9D9D9"),treeMapChartNodeColors:Pt,treeMapChartLabelFillStyle:new H({color:D(0,0,0)}),treeMapChartLabelHeaderFillStyle:new H({color:D(33,33,33)})},{positiveTextFillStyle:V,negativeTextFillStyle:B,positiveFillStyle:I,negativeFillStyle:L,positiveAreaFillStyle:U,negativeAreaFillStyle:Y,positiveBackgroundFillStyle:O,negativeBackgroundFillStyle:j,badGoodColorPalette:$,coldHotColorPalette:Z,intensityColorPalette:Q,spectrogramColorPalette:ct,bollingerFillStyle:mt,bollingerBorderFillStyle:et,highlightPointColor:D(0,0,0),highlightDataGridColor:xt,unfocusedDataColor:Ct})}),dv=Rh(()=>{const t=new hi({position:{x:.8,y:.8},extent:Mi.farthestCorner,shape:bi.ellipse,stops:[{offset:0,color:D(255,255,255)},{offset:1,color:D(255,255,255)}]}),e=new H({color:D(214,236,216,255)}),i=new hi({position:{x:.5,y:.5},extent:Mi.farthestCorner,shape:bi.circle,stops:[{offset:0,color:D(233,244,231,70)},{offset:1,color:D(233,244,231,200)}]}),s=new hi({position:{x:.5,y:.5},extent:Mi.farthestCorner,shape:bi.circle,stops:[{offset:0,color:D(255,255,255,255)},{offset:1,color:D(255,255,255,255)}]}),n=new H({color:D(1,61,53)}),o=new H({color:D(1,61,53)}),h=new H({color:D(1,61,53)}),a=new H({color:D(1,61,53,150)}),l=new H({color:D(1,61,53)}),u=l,c=new mi({angle:45,stops:[{offset:0,color:D(225,225,225)},{offset:1,color:D(225,225,225)}]}),d=new H({color:D(188,211,186,255)}),f=new H({color:D(188,211,186,150)}),g=new H({color:D(188,211,186,50)}),y=new H({color:D(188,211,186,50)}),p=new H({color:D(104,148,111,255)}),x=new mi({angle:0,stops:[{offset:0,color:D(255,255,255,240)},{offset:1,color:D(255,255,255,240)}]}),A=new H({color:D(104,148,111)}),v=D(255,255,200);new H({color:D(255,255,255,240)}),new H({color:D(104,148,111,255)});const w=D(255,255,255,255),E=D(179,201,183,255),C=D(188,211,186,255),k=D(188,211,186,255),F=D(188,211,186,255),m=D(188,211,186,255),S=D(100,100,100);D(200,200,200);const b=[D(138,195,142,255),D(193,161,114,255),D(178,99,99,255),D(142,156,210,255),D(154,209,219,255),D(164,212,199,255),D(104,156,97,255),D(196,147,195,255),D(92,190,187,255),D(126,100,51,255),D(136,138,157,255)].map(Pt=>({stroke:Pt,border:Pt,area:Pt.setA(100)})),M=D(150,150,150,80),R=D(46,182,84,255),T=D(232,96,96,255),z=new Tt({thickness:2,fillStyle:new H({color:D(188,211,186,255)})}),P={mapChartFillStyle:new mi({angle:-45,stops:[{color:D(118,160,121,255),offset:0},{color:D(174,227,178,255),offset:1}]}),spiderSeriesFillStyle:zh(!1,b,.8),pieChartSliceFillStylePalette:Bh(!1,b,.8),pyramidChartSliceFillStylePalette:xr(!1,b,.5),funnelChartSliceFillStylePalette:xr(!1,b,.5),rectangleSeriesFillStyle:Uh(!1,b),gaugeChartGaugeFillStyle:Gh(!1,b,.8),chartXYSeriesBackgroundStrokeStyle:z,chart3DSeriesBackgroundStrokeStyle:z,polarChartSeriesBackgroundStrokeStyle:z,spiderChartSeriesBackgroundStrokeStyle:z,dataGridTextFillStyle:new H({color:D(77,66,21,255)})},_=new H({color:D(93,151,97,255)}),V=new H({color:D(178,99,99,255)}),B=new H({color:D(138,195,142,255)}),I=new H({color:D(178,99,99,255)}),L=new H({color:D(138,195,142,180)}),U=new H({color:D(178,99,99,180)}),Y=new H({color:D(224,240,237)}),O=new H({color:D(251,227,227)}),j=[D(178,99,99,255),D(215,224,111,255),D(80,186,88,255)],$=[D(62,64,142,255),D(66,131,77,255),D(250,250,135,255),D(202,161,78,255),D(179,53,53,255)],Z=[D(64,86,138),D(123,192,205),D(255,252,149),D(220,155,92),D(184,78,74)],Q=[D(64,86,138),D(123,192,205),D(255,252,149),D(220,155,92),D(132,60,57)],ct=new H({color:D(185,198,207,255)}),et=new hi({stops:[{color:D(151,190,220,10),offset:0},{color:D(151,190,220,50),offset:1}]}),mt=L.getColor().setA(255),xt=D(150,150,150),Ct=[D(242,239,210,150),D(243,238,183,150),D(210,222,136,150),D(204,217,148,150),D(157,190,124,150),D(143,178,72,150),D(198,147,88,150),D(216,148,71,150),D(229,142,103,150),D(225,174,152,150),D(219,149,203,150),D(216,188,209,150),D(109,198,189,150),D(172,206,202,150),D(164,223,217,150),D(174,215,233,150),D(203,225,235,150),D(220,227,243,150),D(207,213,227,150),D(171,182,209,150)];return Lh({isDark:!1,highlightColorOffset:D(-60,-60,-60,60),highlightColorOffsetAxisOverlay:D(0,0,0,40),effect:void 0,effectsText:!1,effectsDashboardSplitters:!1,lcjsBackgroundFillStyle:t,dashboardSplitterFillStyle:e,panelBackgroundFillStyle:i,seriesBackgroundFillStyle:s,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:n,axisTitleFillStyle:o,axisLabelMajorFillStyle:h,axisLabelMinorFillStyle:a,uiTextFillStyle:u,axisLineFillStyle:c,axisTickMajorFillStyle:d,axisGridMajorFillStyle:f,axisTickMinorFillStyle:g,axisGridMinorFillStyle:y,cursorGridFillStyle:p,legendBackgroundFillStyle:x,legendBackgroundBorderFillStyle:A,legendButtonDefaultColor:v,uiBackgroundColor:w,uiBackgroundBorderColor:E,uiStrokeColorContrastHigh:C,uiStrokeColorContrastMedium:k,uiStrokeColorContrastLow:F,dataStrokeColorContrastHigh:m,dataStrokeColorContrastMedium:S,dataColorPalette:b,dataColorPaletteInverted:[{area:D(210,70,70,100),border:D(200,110,110)}],dataHighlightOverlayColor:M,dataColorPositive:R,dataColorNegative:T,zoomBandChartDefocusOverlayFillStyle:new H({color:D(255,255,255,180)}),zoomBandChartSplitterColor:xi("#446A40"),zoomBandChartKnobFillStyle:Pt=>new Zs({source:Tn(Pt,"zoomBandChart/lightnature-selector.png"),fitMode:Ze.Fill}),zoomBandChartKnobSize:{x:14,y:30},overrideThemeProperties:P,treeMapChartParentColor:xi("#EFF7EE"),treeMapChartNodeColors:Ct,treeMapChartLabelFillStyle:new H({color:D(0,0,0)}),treeMapChartLabelHeaderFillStyle:new H({color:D(33,33,33)})},{positiveTextFillStyle:_,negativeTextFillStyle:V,positiveFillStyle:B,negativeFillStyle:I,positiveAreaFillStyle:L,negativeAreaFillStyle:U,positiveBackgroundFillStyle:Y,negativeBackgroundFillStyle:O,badGoodColorPalette:j,coldHotColorPalette:$,intensityColorPalette:Z,spectrogramColorPalette:Q,bollingerFillStyle:et,bollingerBorderFillStyle:ct,highlightPointColor:D(0,0,0),highlightDataGridColor:mt,unfocusedDataColor:xt})}),fv=Rh(()=>{const r=D(255,255,255),t=new H({color:r}),e=!0,i=new nl({spread:1,blur:9,offset:{x:0,y:0},color:D(255,255,255,30)}),s=new H({color:D(6,15,36)}),n=new hi({stops:[{color:D(46,13,87,50),offset:0},{color:D(0,0,0,150),offset:1}]}),o=new H({color:D(0,5,8,150)}),h=t,a=t,l=t,u=new H({color:D(255,255,220,130)}),c=t,d=new mi({angle:45,stops:[{offset:0,color:D(241,133,255,255)},{offset:1,color:D(115,207,238,255)}]}),f=t,g=new H({color:D(61,94,110,100)}),y=new H({color:D(61,94,110,255)}),p=new H({color:D(61,94,110,40)}),x=t,A=new H({color:D(0,18,23,255)}),v=t,w=D(115,207,238,255);new H({color:D(0,17,22,240)});const E=D(0,38,48,255),C=D(0,0,0),k=r,F=D(150,150,150),m=D(19,57,93),S=D(50,50,50),b=D(0,17,48);D(200,200,200);const M=[D(20,211,237,255),D(98,147,252,255),D(164,73,250,255),D(129,117,253,255),D(95,134,252,255),D(22,133,212,255),D(35,200,242,255),D(104,121,233,255),D(137,69,232,255),D(70,72,241,255)].map(Pt=>({stroke:Pt,border:Pt,area:Pt.setA(100)})),R=r.setA(50),T=D(3,217,194,255),z=D(243,21,110,255),P={mapChartFillStyle:new mi({angle:135,stops:[{color:D(118,248,231,255),offset:0},{color:D(45,177,255,255),offset:1}]}),spiderSeriesFillStyle:zh(e,M,.5),pieChartSliceFillStylePalette:Bh(e,M,2),funnelChartSliceFillStylePalette:xr(e,M,1),pyramidChartSliceFillStylePalette:xr(e,M,1),rectangleSeriesFillStyle:Uh(e,M),gaugeChartGaugeFillStyle:Gh(e,M,1)},_=new H({color:D(20,211,237,255)}),V=new H({color:D(253,145,178,255)}),B=new H({color:D(20,211,237,255)}),I=new H({color:D(239,68,121,255)}),L=new H({color:D(20,211,237,120)}),U=new H({color:D(239,68,121,180)}),Y=new H({color:D(1,53,57,255)}),O=new H({color:D(94,19,42,255)}),j=[D(174,51,132,255),D(204,107,218,255),D(189,215,253,255)],$=[D(0,63,95,255),D(0,149,255,255),D(0,225,255,255),D(255,154,254,255),D(204,98,170,255),D(139,39,84,255)],Z=[D(197,241,255,255),D(70,210,255,255),D(0,164,217,255),D(90,99,222,255),D(138,75,192,255),D(151,27,162,255)],Q=[D(13,31,52,255),D(129,54,130,255),D(131,108,176,255),D(7,162,213,255),D(26,247,255,255)],ct=new hi({stops:[{color:D(219,42,235,60),offset:0},{color:D(237,73,252,10),offset:1}]}),et=new H({color:D(237,73,252,255)}),mt=L.getColor().setA(255),xt=D(8,70,100),Ct=[D(149,230,255,150),D(93,213,243,150),D(20,189,223,150),D(5,151,181,150),D(2,138,198,150),D(2,113,198,150),D(97,148,236,150),D(93,111,230,150),D(151,120,223,150),D(128,87,227,150),D(153,52,230,150),D(179,92,245,150),D(248,110,211,150),D(255,155,228,150),D(251,88,207,150),D(255,0,162,150),D(214,73,177,150),D(209,71,159,150),D(238,101,169,150),D(210,57,134,150)];return Lh({isDark:e,highlightColorOffset:D(60,60,60,60),highlightColorOffsetAxisOverlay:D(255,255,255,40),effect:i,effectsText:!0,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:Pt=>new Zs({source:Tn(Pt,"themes/cyberSpace.jpg"),fitMode:Ze.Fill}),dashboardSplitterFillStyle:s,panelBackgroundFillStyle:n,seriesBackgroundFillStyle:o,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:h,axisTitleFillStyle:a,axisLabelMajorFillStyle:l,axisLabelMinorFillStyle:u,uiTextFillStyle:c,axisLineFillStyle:d,axisTickMajorFillStyle:f,axisGridMajorFillStyle:g,axisTickMinorFillStyle:y,axisGridMinorFillStyle:p,cursorGridFillStyle:x,legendBackgroundFillStyle:A,legendBackgroundBorderFillStyle:v,legendButtonDefaultColor:w,uiBackgroundColor:E,uiBackgroundBorderColor:C,uiStrokeColorContrastHigh:k,uiStrokeColorContrastMedium:F,uiStrokeColorContrastLow:m,dataStrokeColorContrastHigh:S,dataStrokeColorContrastMedium:b,dataColorPalette:M,dataColorPaletteInverted:[{area:D(41,130,255,100),border:D(45,110,240)}],dataHighlightOverlayColor:R,dataColorPositive:T,dataColorNegative:z,zoomBandChartDefocusOverlayFillStyle:new H({color:D(0,0,0,180)}),zoomBandChartSplitterColor:xi("#DB77FF"),zoomBandChartKnobFillStyle:Pt=>new Zs({source:Tn(Pt,"zoomBandChart/cyberspace-selector.png"),fitMode:Ze.Fill}),zoomBandChartKnobSize:{x:14,y:30},overrideThemeProperties:P,treeMapChartParentColor:xi("#1E1E3B"),treeMapChartNodeColors:Ct,treeMapChartLabelFillStyle:new H({color:D(33,33,33)}),treeMapChartLabelHeaderFillStyle:new H({color:D(250,250,250)})},{positiveTextFillStyle:_,negativeTextFillStyle:V,positiveFillStyle:B,negativeFillStyle:I,positiveAreaFillStyle:L,negativeAreaFillStyle:U,positiveBackgroundFillStyle:Y,negativeBackgroundFillStyle:O,badGoodColorPalette:j,coldHotColorPalette:$,intensityColorPalette:Z,spectrogramColorPalette:Q,bollingerFillStyle:ct,bollingerBorderFillStyle:et,highlightPointColor:r,highlightDataGridColor:mt,unfocusedDataColor:xt})}),Yn={};Object.defineProperty(Yn,"darkGold",{get:lv,enumerable:!0}),Object.defineProperty(Yn,"turquoiseHexagon",{get:uv,enumerable:!0}),Object.defineProperty(Yn,"light",{get:cv,enumerable:!0}),Object.defineProperty(Yn,"lightNature",{get:dv,enumerable:!0}),Object.defineProperty(Yn,"cyberSpace",{get:fv,enumerable:!0});const Zy=Yn,Ki=Zy.darkGold,ts=(r,t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAgCAYAAADwkoGKAAAsa2NhQlgAACxranVtYgAAAB5qdW1kYzJwYQARABCAAACqADibcQNjMnBhAAAALEVqdW1iAAAAR2p1bWRjMm1hABEAEIAAAKoAOJtxA3Vybjp1dWlkOjlmZDBkZjkzLTVmMDMtNDczYi1hZThhLTFhNDM4NmMzNmJhYQAAAAGzanVtYgAAAClqdW1kYzJhcwARABCAAACqADibcQNjMnBhLmFzc2VydGlvbnMAAAAA12p1bWIAAAAmanVtZGNib3IAEQAQgAAAqgA4m3EDYzJwYS5hY3Rpb25zAAAAAKljYm9yoWdhY3Rpb25zgaNmYWN0aW9ua2MycGEuZWRpdGVkbXNvZnR3YXJlQWdlbnRtQWRvYmUgRmlyZWZseXFkaWdpdGFsU291cmNlVHlwZXhTaHR0cDovL2N2LmlwdGMub3JnL25ld3Njb2Rlcy9kaWdpdGFsc291cmNldHlwZS9jb21wb3NpdGVXaXRoVHJhaW5lZEFsZ29yaXRobWljTWVkaWEAAACranVtYgAAAChqdW1kY2JvcgARABCAAACqADibcQNjMnBhLmhhc2guZGF0YQAAAAB7Y2JvcqVqZXhjbHVzaW9uc4GiZXN0YXJ0GCFmbGVuZ3RoGSx3ZG5hbWVuanVtYmYgbWFuaWZlc3RjYWxnZnNoYTI1NmRoYXNoWCBvErgv+J0u7bVCYViyMUgw5yMb8idAv1erA3/DALx9NWNwYWRIAAAAAAAAAAAAAAIDanVtYgAAACRqdW1kYzJjbAARABCAAACqADibcQNjMnBhLmNsYWltAAAAAddjYm9yqGhkYzp0aXRsZW9HZW5lcmF0ZWQgaW1hZ2VpZGM6Zm9ybWF0aWltYWdlL3BuZ2ppbnN0YW5jZUlEeCh4bXAuaWlkOjI3NEMxQjdDN0E0MDExRUVBQkZFQUNFQjJDOTA0NzVCb2NsYWltX2dlbmVyYXRvcng2QWRvYmVfUGhvdG9zaG9wLzI1LjIuMCBhZG9iZV9jMnBhLzAuNy42IGMycGEtcnMvMC4yNS4ydGNsYWltX2dlbmVyYXRvcl9pbmZvgb9kbmFtZW9BZG9iZSBQaG90b3Nob3BndmVyc2lvbmYyNS4yLjD/aXNpZ25hdHVyZXgZc2VsZiNqdW1iZj1jMnBhLnNpZ25hdHVyZWphc3NlcnRpb25zgqJjdXJseCdzZWxmI2p1bWJmPWMycGEuYXNzZXJ0aW9ucy9jMnBhLmFjdGlvbnNkaGFzaFggSmnBvf+o3kEweL4k7cz4MTrB0WSVNFZxoA1rBrM31K+iY3VybHgpc2VsZiNqdW1iZj1jMnBhLmFzc2VydGlvbnMvYzJwYS5oYXNoLmRhdGFkaGFzaFggL2g6Dghd536quyA5vPlS/9NGA5WvLRkkKJmqn0VxCoFjYWxnZnNoYTI1NgAAKEBqdW1iAAAAKGp1bWRjMmNzABEAEIAAAKoAOJtxA2MycGEuc2lnbmF0dXJlAAAAKBBjYm9y0oREoQE4JKNmc2lnVHN0oWl0c3RUb2tlbnOBoWN2YWxZDjYwgg4yMAMCAQAwgg4pBgkqhkiG9w0BBwKggg4aMIIOFgIBAzEPMA0GCWCGSAFlAwQCAQUAMIGCBgsqhkiG9w0BCRABBKBzBHEwbwIBAQYJYIZIAYb9bAcBMDEwDQYJYIZIAWUDBAIBBQAEIHj4VpJDPzaO0x4hOPnj/w1GTHuwXU0IpBf4VVocIQzoAhB3SsxvHza2JR1fKj3Mjr0yGA8yMDIzMTEwMzExNTcyNloCCQCyOL6wAOGCbaCCC70wggUHMIIC76ADAgECAhAFHp6R1x6RCrvkPVzt0N3ZMA0GCSqGSIb3DQEBCwUAMGMxCzAJBgNVBAYTAlVTMRcwFQYDVQQKEw5EaWdpQ2VydCwgSW5jLjE7MDkGA1UEAxMyRGlnaUNlcnQgVHJ1c3RlZCBHNCBSU0E0MDk2IFNIQTI1NiBUaW1lU3RhbXBpbmcgQ0EwHhcNMjMwOTA4MDAwMDAwWhcNMzQxMjA3MjM1OTU5WjBYMQswCQYDVQQGEwJVUzEXMBUGA1UEChMORGlnaUNlcnQsIEluYy4xMDAuBgNVBAMTJ0RpZ2lDZXJ0IEFkb2JlIEFBVEwgVGltZXN0YW1wIFJlc3BvbmRlcjBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IABE0srlH5A/+15/MFl1asNh8Q8TubOsEVfu0qlJrF0smjtwL1IeHZ/AB7J59u1Trpho1BDN85lfTY30rNBsfT+myjggGLMIIBhzAOBgNVHQ8BAf8EBAMCB4AwDAYDVR0TAQH/BAIwADAWBgNVHSUBAf8EDDAKBggrBgEFBQcDCDAgBgNVHSAEGTAXMAgGBmeBDAEEAjALBglghkgBhv1sBwEwHwYDVR0jBBgwFoAUuhbZbU2FL3MpdpovdYxqII+eyG8wHQYDVR0OBBYEFLA1qlbDIamLztO4vIsWJVed7zThMFoGA1UdHwRTMFEwT6BNoEuGSWh0dHA6Ly9jcmwzLmRpZ2ljZXJ0LmNvbS9EaWdpQ2VydFRydXN0ZWRHNFJTQTQwOTZTSEEyNTZUaW1lU3RhbXBpbmdDQS5jcmwwgZAGCCsGAQUFBwEBBIGDMIGAMCQGCCsGAQUFBzABhhhodHRwOi8vb2NzcC5kaWdpY2VydC5jb20wWAYIKwYBBQUHMAKGTGh0dHA6Ly9jYWNlcnRzLmRpZ2ljZXJ0LmNvbS9EaWdpQ2VydFRydXN0ZWRHNFJTQTQwOTZTSEEyNTZUaW1lU3RhbXBpbmdDQS5jcnQwDQYJKoZIhvcNAQELBQADggIBAHgrjELHhBCEWJSCyRX7lsL0C9LJgbX1ryVYySNRxHkMR2LqC7PQZRJgDNR+kJop8P5v2Bzp/jMrzw4U4pY6rYv3I8HpFlJa4uBwUTIUgHWpi8Xxd1JEEX94POODi7HySekX60A055BozFb7GGVaxb0LreQTRXnkr6ggPNUPX9Gh+2ScOxlTdQQLgZbkdYvxo3Ap6cy9riZijRxOZqiOyWSxMUhgKxeKzwrFW6Xbe0awNhOUXZzIxc4ixpKzWSItpPJ30ZiBQn49U3ADYTnshbN9ZkTA1pHf/Nov2ZUvvddkZ8UYvwo9vBvLTDvnmABnRMBKaXYAs3ZCvw9CkDPOWTeUJMFRAtmUx52ohaA3nD8bCJ6UfpQ2pFfOdShwpb6GKv0g+BgcdIG2LHPJ0Ufmr+XmpgZgq/HIge0hjcCADpjDgq2z4B0L4xtAA1M8MrUx02hxb7104nFKqMuv5zJTQl3sgwqXUyP+9zHQP9y/Z5Fx/AQWrOXCW56dV7P4cFBJl8zHqinlhkOStZ1m22+9Hlq+eC0hJ2lkF1LuzRdJJb/51LXoPKRnopFDng6XpoD7eG6w4YpAx9+P00JuUoBsYSrdsuFiyWyQQGBAnjI69ggbSLcW+hJytuinaxawVlItJkS2eV5Z4XsxPg7f82uRkdtN0hTHeI93CN3OWeRebnK7MIIGrjCCBJagAwIBAgIQBzY3tyRUfNhHrP0oZipeWzANBgkqhkiG9w0BAQsFADBiMQswCQYDVQQGEwJVUzEVMBMGA1UEChMMRGlnaUNlcnQgSW5jMRkwFwYDVQQLExB3d3cuZGlnaWNlcnQuY29tMSEwHwYDVQQDExhEaWdpQ2VydCBUcnVzdGVkIFJvb3QgRzQwHhcNMjIwMzIzMDAwMDAwWhcNMzcwMzIyMjM1OTU5WjBjMQswCQYDVQQGEwJVUzEXMBUGA1UEChMORGlnaUNlcnQsIEluYy4xOzA5BgNVBAMTMkRpZ2lDZXJ0IFRydXN0ZWQgRzQgUlNBNDA5NiBTSEEyNTYgVGltZVN0YW1waW5nIENBMIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAxoY1BkmzwT1ySVFVxyUDxPKRN6mXUaHW0oPRnkyibaCwzIP5WvYRoUQVQl+kiPNo+n3znIkLf50fng8zH1ATCyZzlm34V6gCff1DtITaEfFzsbPuK4CEiiIY3+vaPcQXf6sZKz5C3GeO6lE98NZW1OcoLevTsbV15x8GZY2UKdPZ7Gnf2ZCHRgB720RBidx8ald68Dd5n12sy+iEZLRS8nZH92GDGd1ftFQLIWhuNyG7QKxfst5Kfc71ORJn7w6lY2zkpsUdzTYNXNXmG6jBZHRAp8ByxbpOH7G1WE15/tePc5OsLDnipUjW8LAxE6lXKZYnLvWHpo9OdhVVJnCYJn+gGkcgQ+NDY4B7dW4nJZCYOjgRs/b2nuY7W+yB3iIU2YIqx5K/oN7jPqJz+ucfWmyU8lKVEStYdEAoq3NDzt9KoRxrOMUp88qqlnNCaJ+2RrOdOqPVA+C/8KI8ykLcGEh/FDTP0kyr75s9/g64ZCr6dSgkQe1CvwWcZklSUPRR8zZJTYsg0ixXNXkrqPNFYLwjjVj33GHek/45wPmyMKVM1+mYSlg+0wOI/rOP015LdhJRk8mMDDtbiiKowSYI+RQQEgN9XyO7ZONj4KbhPvbCdLI/Hgl27KtdRnXiYKNYCQEoAA6EVO7O6V3IXjASvUaetdN2udIOa5kM0jO0zbECAwEAAaOCAV0wggFZMBIGA1UdEwEB/wQIMAYBAf8CAQAwHQYDVR0OBBYEFLoW2W1NhS9zKXaaL3WMaiCPnshvMB8GA1UdIwQYMBaAFOzX44LScV1kTN8uZz/nupiuHA9PMA4GA1UdDwEB/wQEAwIBhjATBgNVHSUEDDAKBggrBgEFBQcDCDB3BggrBgEFBQcBAQRrMGkwJAYIKwYBBQUHMAGGGGh0dHA6Ly9vY3NwLmRpZ2ljZXJ0LmNvbTBBBggrBgEFBQcwAoY1aHR0cDovL2NhY2VydHMuZGlnaWNlcnQuY29tL0RpZ2lDZXJ0VHJ1c3RlZFJvb3RHNC5jcnQwQwYDVR0fBDwwOjA4oDagNIYyaHR0cDovL2NybDMuZGlnaWNlcnQuY29tL0RpZ2lDZXJ0VHJ1c3RlZFJvb3RHNC5jcmwwIAYDVR0gBBkwFzAIBgZngQwBBAIwCwYJYIZIAYb9bAcBMA0GCSqGSIb3DQEBCwUAA4ICAQB9WY7Ak7ZvmKlEIgF+ZtbYIULhsBguEE0TzzBTzr8Y+8dQXeJLKftwig2qKWn8acHPHQfpPmDI2AvlXFvXbYf6hCAlNDFnzbYSlm/EUExiHQwIgqgWvalWzxVzjQEiJc6VaT9Hd/tydBTX/6tPiix6q4XNQ1/tYLaqT5Fmniye4Iqs5f2MvGQmh2ySvZ180HAKfO+ovHVPulr3qRCyXen/KFSJ8NWKcXZl2szwcqMj+sAngkSumScbqyQeJsG33irr9p6xeZmBo1aGqwpFyd/EjaDnmPv7pp1yr8THwcFqcdnGE4AJxLafzYeHJLtPo0m5d2aR8XKc6UsCUqc3fpNTrDsdCEkPlM05et3/JWOZJyw9P2un8WbDQc1PtkCbISFA0LcTJM3cHXg65J6t5TRxktcma+Q4c6umAU+9Pzt4rUyt+8SVe+0KXzM5h0F4ejjpnOHdI/0dKNPH+ejxmF/7K9h+8kaddSweJywm228Vex4Ziza4k9Tm8heZWcpw8De/mADfIBZPJ/tgZxahZrrdVcA6KYawmKAr7ZVBtzrVFZgxtGIJDwq9gdkT/r+k0fNX2bwE+oLeMt8EifAAzV3C+dAjfwAL5HYCJtnwZXZCpimHCUcr5n8apIUP/JiW9lVUKx+A+sDyDivl1vupL0QVSucTDh3bNzgaoSv27dZ8/DGCAbgwggG0AgEBMHcwYzELMAkGA1UEBhMCVVMxFzAVBgNVBAoTDkRpZ2lDZXJ0LCBJbmMuMTswOQYDVQQDEzJEaWdpQ2VydCBUcnVzdGVkIEc0IFJTQTQwOTYgU0hBMjU2IFRpbWVTdGFtcGluZyBDQQIQBR6ekdcekQq75D1c7dDd2TANBglghkgBZQMEAgEFAKCB0TAaBgkqhkiG9w0BCQMxDQYLKoZIhvcNAQkQAQQwHAYJKoZIhvcNAQkFMQ8XDTIzMTEwMzExNTcyNlowKwYLKoZIhvcNAQkQAgwxHDAaMBgwFgQU2Rq5M/4XremCHqYT9aQ6cU4+fn0wLwYJKoZIhvcNAQkEMSIEIGmY+GsCefCDmP0PFcYjdxBUfi0EgKYuEZb9pUMyLNuVMDcGCyqGSIb3DQEJEAIvMSgwJjAkMCIEIILa8ZSVezaEAkWP1ScAaf5ixxRW+p4Lhqv4J+hTICfZMAoGCCqGSM49BAMCBEcwRQIgcxxuf7QHV9Fkpj1VhPrFqhNFh8dZzl8qUU/2N3Sr4eoCIQDKu0KGYL++CSsDAXjJciMDbr5ImTy3jw0yQU5GYYeLimd4NWNoYWluglkGMzCCBi8wggQXoAMCAQICEBtbCzvasORd8vMNnlTR2tIwDQYJKoZIhvcNAQELBQAwdTELMAkGA1UEBhMCVVMxIzAhBgNVBAoTGkFkb2JlIFN5c3RlbXMgSW5jb3Jwb3JhdGVkMR0wGwYDVQQLExRBZG9iZSBUcnVzdCBTZXJ2aWNlczEiMCAGA1UEAxMZQWRvYmUgUHJvZHVjdCBTZXJ2aWNlcyBHMzAeFw0yMzAyMDEwMDAwMDBaFw0yNDAyMDEyMzU5NTlaMIGhMREwDwYDVQQDDAhjYWktcHJvZDEcMBoGA1UECwwTQ29udGVudCBDcmVkZW50aWFsczETMBEGA1UECgwKQWRvYmUgSW5jLjERMA8GA1UEBwwIU2FuIEpvc2UxEzARBgNVBAgMCkNhbGlmb3JuaWExCzAJBgNVBAYTAlVTMSQwIgYJKoZIhvcNAQkBFhVncnAtY2FpLW9wc0BhZG9iZS5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDv0wCnfYY9lkHDsykrTG7FYlnYHBcyualuD5u9ULjzv+FsTWOLg8Nhrz9RTxI9EeBbu3Wm7f4vqPsQYfxkEp0wIa6DVmEOZhbAeRfbhybWQ/D4Wvvck4mEZR+QZmTpIn7HX61gbtMFHlJUxkYBctIoAt9TBAFbz9d5Ig2WG0bsH39b6/8USXnIIk4FB6dtBRT1xeEwSDtwOd1YBpXXNBJmRWHXNJZZ85of2tBTesg/kMvTrOJJxYDZ97U416wcvbVomlees+NXUY3/ZB4xH+NsZils7m1bL2v2hSnHiLoqZeUKklbHUmT4ZpjrZCdtuIsWm5j2PPXKr7HKUuCbZSXBAgMBAAWjggGMMIIBiDAMBgNVHRMBAf8EAjAAMA4GA1UdDwEB/wQEAwIHgDAeBgNVHSUEFzAVBgkqhkiG9y8BAQwGCCsGAQUFBwMEMIGOBgNVHSAEgYYwgYMwgYAGCSqGSIb3LwECAzBzMHEGCCsGAQUFBwICMGUMY1lvdSBhcmUgbm90IHBlcm1pdHRlZCB0byB1c2UgdGhpcyBMaWNlbnNlIENlcnRpZmljYXRlIGV4Y2VwdCBhcyBwZXJtaXR0ZWQgYnkgdGhlIGxpY2Vuc2UgYWdyZWVtZW50LjBdBgNVHR8EVjBUMFKgUKBOhkxodHRwOi8vcGtpLWNybC5zeW1hdXRoLmNvbS9jYV83YTVjM2EwYzczMTE3NDA2YWRkMTkzMTJiYzFiYzIzZi9MYXRlc3RDUkwuY3JsMDcGCCsGAQUFBwEBBCswKTAnBggrBgEFBQcwAYYbaHR0cDovL3BraS1vY3NwLnN5bWF1dGguY29tMB8GA1UdIwQYMBaAFFcpejJNzP7kNU7AHyRzznNTq99qMA0GCSqGSIb3DQEBCwUAA4ICAQBXjlGa3yAK/Gijn6n/JNU9FZm72MP6vc5czrWe9y0T+EawuRvhpD5Edi1TnXkrpe8sMkgSjTGdbY+yGhq8zlCWQeXN1/aWo3L9Xr1uNxY/oVpLn0uWWfnfJ7yR9gKl/yoMfhjydT4t1fXHi/MhfhrWSVRHqX2U31UFGz/e298P2kv+vqhzpIUo1bj+jibtoPLMMQcCOTtKiJOTh4o3VSZpwQDERCzo91NkF+LnZjwYl6fE5USIkg/oCoomXxSPpowybDrcRJ9ilbtJcER48/LGgwzv/c7OYdron4PnEXm1FkOaVj+QRf7OwiNTizonhIzLR5Vfp0QHOWv/bPzvCjPQd+Xr0Q4032WlSxQwostNTAPtoVAU4OCwVH3Ech38emJ00/6fkDCdr7MN8/4n2LSNrMUvaBEZdmLqDCBnO02dbFrmpg3pTc0FqRQ4GL/88pjRNSMy5tU9SoQnSCGYqIsjfL8AzgPEGiXXRgABYc1uXecf4/eayb3K2MPs7hnWTbUKpHHJIwxpdN3vTGdZNWpz9Oxfuo3eELQlkTvACHgqkaXi/FAanHe5PChn6fr1/4cNF8goD0buPApgS3zzwqjRhxrH8ISwPfJn8JqzurMaLDMnnc18tHzUiMtX73jf6oXh7voCxX/T4D3nFPlxU3om2cpcLQ1Wd4026x18rlSGR1kGpTCCBqEwggSJoAMCAQICEAyotlR7iebSBol1zYubieIwDQYJKoZIhvcNAQELBQAwbDELMAkGA1UEBhMCVVMxIzAhBgNVBAoTGkFkb2JlIFN5c3RlbXMgSW5jb3Jwb3JhdGVkMR0wGwYDVQQLExRBZG9iZSBUcnVzdCBTZXJ2aWNlczEZMBcGA1UEAxMQQWRvYmUgUm9vdCBDQSBHMjAeFw0xNjExMjkwMDAwMDBaFw00MTExMjgyMzU5NTlaMHUxCzAJBgNVBAYTAlVTMSMwIQYDVQQKExpBZG9iZSBTeXN0ZW1zIEluY29ycG9yYXRlZDEdMBsGA1UECxMUQWRvYmUgVHJ1c3QgU2VydmljZXMxIjAgBgNVBAMTGUFkb2JlIFByb2R1Y3QgU2VydmljZXMgRzMwggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQC3Hy69vQmzXEhs/gyDrmwB6lF4JaSAPomnsbKIZNr2iXaB+fkd85X8eJiNmI7P5O4cVT4Nc1p3zrESqBV4ZUyW8gcZ78QdwoHG8QNd2VNcHnMgSR+XT9Iafsnq9Nfww3Jt9KL3l5ANQ5n1+MJqr48EWNLll942bOL/JH4ywDSMoqhZqtJEIUUUGlQVBZ8CAvJc7LE6ddA5C52PE2Ppa7RfQgHXf4gfXVZwpxYRZcziPiOHqEvLb0J3cShUbejFxV6cwX8QyAPa1ePHg1RtM0HX+D34xHo3DkyGnmT+Ddq00TEDGG26AL5PdINKFIQl+zaq6KJFQe1fdGE5wrWzU4mBPmzaz3EbLn+7FWlwAhorYqIMldbfHE3ydc+aTU1JW7+bG19qmvhO9IluGtTtQDeqFBj2fg6faxsfVfVPD7stN6TwoIDlkOCE4RE+Iin8m3z3eqi/VsTmsmRqBxWDRaqOHz02EJoEDxXJG3ei+UbIIp01XZQvdufm90WxOTuqqan2ZqTPX9K5VdjEh/ovr7xFc5q1dZo+Sa5y4sTVM854/tLU3klOgUKzzSXYPYS3GhBcYJHjwr9xNRHnNX99D6F0g7OijScWfvtjxh13aTv/H0ETvymah4yfDpVdh9cK5YSCPqnuOlsujFAyhYwJXOWDvZZU2EkWVLDhoPx9zp7N4QIDAQABo4IBNDCCATAwEgYDVR0TAQH/BAgwBgEB/wIBADA1BgNVHR8ELjAsMCqgKKAmhiRodHRwOi8vY3JsLmFkb2JlLmNvbS9hZG9iZXJvb3RnMi5jcmwwDgYDVR0PAQH/BAQDAgEGMBQGA1UdJQQNMAsGCSqGSIb3LwEBBzBXBgNVHSAEUDBOMEwGCSqGSIb3LwECAzA/MD0GCCsGAQUFBwIBFjFodHRwczovL3d3dy5hZG9iZS5jb20vbWlzYy9wa2kvcHJvZF9zdmNlX2Nwcy5odG1sMCQGA1UdEQQdMBukGTAXMRUwEwYDVQQDEwxTWU1DLTQwOTYtMzMwHQYDVR0OBBYEFFcpejJNzP7kNU7AHyRzznNTq99qMB8GA1UdIwQYMBaAFKYc4W1UJEyoj0hyv26pjNXk7DHUMA0GCSqGSIb3DQEBCwUAA4ICAQBxzuUHjKbcLdzI4DtlXgCSgZXrlSAkr59pOF3JfPG42qVNAGU7JcEYXJ6+WbfcGwY7WYMl+jO7IvJPb7shXFYW9bnJgxX7lLU14KExchmcLNY1ee6IhBJ2Y8PzZMRUKSd5CkURPg0PBLGjz/KR/DofHx+G4rPTCOGORYxeYrd01lci5hVxvKccvIk7MD69ZTewfZPSM+0WnsU3f0Zmd7hgbRpUyWceG0eHFpdUKK/ZFWhHjDVC28odCnN885tHncKXviItK0ZUUo/AIthFKlhEXsnq9VL9fFbgvO83ZvpUQo5y8mY3cuGnEVGXdhjNb53CfC1u4dbpYmWaN99subUzEsUaUb3loLPfVfzDOpg2y9v37kBdy/wuXr20teY7U62xj/fAgs1QSnhUtlMTfCqbefyEycKVmKIrJkJLsvgTSYKVvH4FFIwfd5WjqOC97jX98rcVAzhAI0iSkazsWOMvL6m0L4nLJapx+85GsVX8Y6AHmEP4bmCElwil6KAP+UewJFiw5rmwV2pESHAhYuZJa03B8tl0nd2QJzvJGmbeBqXqpF9ORinFM3HErK8puRokOjFH2+1asLeI2tB31W/ELdNe27Ogduq6Z6qBwCp59YX27qydDhD0WRfN64kCs25K88iGAGNW2CAfTDS+b+WYJBiIL9jXYZ4LF+BiUvfdu2NwYWRZC70AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPZZAQBKX2Q2ihN2fLDLReHISpfOF0xIqNpOZXbBwZ0XanWG98erbIBdawl7r9nVma/uZjYH457wp00TVpKYUTJHMnzJMKskvM2Df4K6t5pUKGtJqEvMXLUy3g9kJq53aYDwikcUE+8wv+CYtu/+vii4XYSXQIxT4NN+JKoTDXmrNH1G46Nmpfq6SKk0g9GQ2brbkW3fzGR0xDxY3BXRy71guSBxN9TAbQGqUjMnkIyBcwV9wUQ2oCW9oIMNKASjW0CRkcFEzzmrQ+y+zHYpNvUaG7QehHcyhvOec3plzlyP6DZeQWp3PHA5bmonI8t5j6Qj15X1KnQiXuJ0rW+xoMA89aIVmpx4VgAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAOSaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA5LjEtYzAwMSA3OS4xNDYyODk5Nzc3LCAyMDIzLzA2LzI1LTIzOjU3OjE0ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjYyYTdmYWExLWJmZTMtMjE0Ny04MjAwLWMxM2NlMGU4ZTc1NCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoyNzRDMUI3RDdBNDAxMUVFQUJGRUFDRUIyQzkwNDc1QiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoyNzRDMUI3QzdBNDAxMUVFQUJGRUFDRUIyQzkwNDc1QiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjUuMiAoMjAyMzEwMjQubS4yMzc0IDRhYjk0MzkpICAoV2luZG93cykiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDphYjQzZjNjYy1hNTY4LTRkNGQtOTdiZC1iYjk0YjBlZjhjYmQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NjJhN2ZhYTEtYmZlMy0yMTQ3LTgyMDAtYzEzY2UwZThlNzU0Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+HNvo5wAADZFJREFUeNrsXFtPVUkW3gc4yP0qDigKON517FFbHRGn1TamjaOJvvhsjIkvPplgfEKe1AefNDE+GP+AmWTszPTYcbpn2piJzc1GWwlOekRBEBFQ7jeZ9ZVrnVkUtfc5CGp3h5VU9qUuu3bVV9+67DonND4+7omEQiHPJaWlpYlxcXGLKX8epTCdB5aXNnHU6c2bN5POcaREp+O9dHxSX1/f5s3KL1ImYCkasMrKyvIISJspD+AyZSTpOrodDSaIBpQCkwtgSM8oVd2/f39M2quoqAijmcrKyjG/l7L77vde+v6sfCRgbdu2LY3AtJNSgg0qDa5oTOViKQtM9nXTgQMHaqmpPEoLKXUQqJpcYIqPj/cSEhLMUZgUbYyNjZkjRPpu50n+VEUvKtditMEb7Xom5OrVqzvpkOXIukFps5XXTunO4cOHR7heKp1/ye1gEX9BCcdv6H4330cbCyh9iXrRgJUQ1FmarFWUIqDS4ApiCT9AobxMpj24uI/209LSvMLCwiLKz6fyQModAlW73TeAac6cOV5SUpIBlasv9qKRvgBYIyMj3tDQkDmPdaLRPzwrHA6bhGsNWr9xsMfEZnC7XDSg+tzv4lRCCRPfjJtHjhzpu3LlCkDVx4BKZICsx9gy4PT4rmFQQbIpdfM5ynX7gWrS/Phl7NixI0SDWCCD52Is14vqAXIByoluAkl+fr43f/58Lyvr7cIaHh4OJSYmfkug6rXZApOamprqUb6vned3X4CBujj29/cbkEl/7EUj74o+og4S2gh6xkypk6mUPXnyZN25c+fCDKzm8vLyOuQzqCAtJ06cuH/+/PkwAytMLCR57VjQFy5cmKeAiXJZGOeLFy/iPBVt4Nqeb60dogKLBm9O/FvxXIwVxBAaUBpgixYt8np7e7329vYJZUtKSkwSefHihVdTU9N2586dXrtfmNj09HQz0dMRvAsYD0dhLryrvG8s7/w+ZCrPcJSdx8duAb+6l0WgWqeu/8uMZMoDWCTr+BpMVoZ8jLUq18XXgdohEFg0cXF6kF2s5Uf9NqBwxL0FCxaYSXz58qWZSNzr6+vzioqKIm01NTV5ZLgbT9HuExgGAzBdUOmJEeb6EKD5AJKt1KJ9TwAFNrpz6tSpljNnzgiQuuh8DbNSNx9HlF0mx26/cbTHLy6AsSKGcVCyjWepJwnS2trqbdiwwZyDJaDyUBbslZmZGTG6Hz9+7D18+NDdUSqTkpIyY6B6V5b4mYsBAIGm27rXR/f+DFXGKm5Ega6P7a5lqvw6sbMIcFkKlCUAI6esQI0QBCwBjxirNqCkDACSkZFhQKLVCSassbHR27Jli6kvsnDhQnN8/vy5t3Hjxsj95ubmSQ6CVoEA5a8IBO+LsSKgoskPKxaC1DKo1mmDXF1/AwAyCO+rNoX1FrANVqLA6V6sfuGGgwcPphBovrCBIuwCgRp7+vSpAUd2dra5bmtrM6pvdHTUu3fvnrGdNHhEbt265XV1dXn79+9/y8V0XltbGwkDkKpsqqqqqhG2AmgBrFn5+Qo0Uyw21gRm0kwCLwqAAgC2b99u2AQCVYWyACtUGkRUoC2bNm0yYBIBe/l5ncKaWmg1hrj/47TCRu32ebUam4LyAweEymK1QG+PUdk3PmXCrGZicrej9e99CD0znvs4NsPtRh2fmMMNLmBBYHgDmTC4ly1bNslWAbhu375tyh06dGgCw2kB+yDEAIEh39HR4RsjE+/NkgJKf0DwlNJ3jkndi2Yo/QXOZ5RxWElpOaUqSk99QLWPErzUr2OcD+j7T+GPUKqZocldyu2mWWbMv1mt4T3q2OObSVnNz46MD49xMfelE85ArOGGiA2FSR0cHDRggVe3fv16Lzc317cXCBeUlZUZu8sVBLUF7YrnaDMWygsjWpLJx1eOvCS8LKX+GFeYdPS1T356wLOC7NcOK/g4HSbaSmku2zZtlo0D6l8U5R2mIxmO91/F79iP8aY+lmhAR2Us09PXr439hAles2ZNoK2Tl5dnwgorV66clHfz5k1v165dk8CFuJYfWwm4/Twgn4FMZqO0U00OPg/lsgck0k3Ae6JACq8HamsAJgPl9fOAzef8VLpey1HtVGXUQoZ45b7QawzgojqpauJNZIYnpEXUFpWZw8ZxMqsdEdgUixlUqPMt1RlygE8mv4jO5/M7tFHZXs4HI+uJG4YFQvldnF+sAPRGjd8SSjl8fzGVG6I6Dxk76GcKl8uOlbESh4eHDVOBpWCcQ/1F88qQv2fPnknlnjx5YsIJOBYXF/9/NqhtANcV8ZbYlc8zswJYJJ8H5Eem7A3WxEYmjdVcigycyltBeV/RsVANbDKDrJnL5jom+Dsa+A5e0WDOn7g/Kx3PR/06qpPDjBS28gG6e6pfDT6gimeV5LF6iqh4focxHo84Ne8hzv8ng2sJA6tfjUedROkZbPkqRhbie8JauTEBi7y6ePncAQaaO3fulKLaWgDQgYEBoxrh+WlgiW3l9znFNtp5IBN5kv0YS6vJYgYVVlU120mfUPot58sqbeaBxJh8zqs7TIN+i573R2aMfykGQD2w21dcfx2DMI3yXjOosLqH6Fr6U8VqDHGhzVw2ns8T2BaTWNMefrc09a7PA1R1iNuuYibZwfXmUB8Qq/qrZa9tZjs1i65fcRswHf5O1zuYgZ7yeG1jdq3SbM9gauFF8yimOBYABaN66dKlUwKVS0TVQT2+evVqgjcIYAWxXxQ12O/jcWUq0MlqvwtQsIeo8zOUWoQHOcCTNMbqQsqPcTARE5PCk/+a64woB6HPYf/JMzq57KgqW8AAaKa8Jn4fbfOlKe92wGeoMq13GFQqdwD95aDmZ5Q+Z9AJwwwoYL5Wn3vqHH2JCOU9pkMjg7jWMgH8GYtspVx8cIwW6QYDrV271rccgATGAkhgm8GTfPDggbd161YTWIUqdLGVnPt4lQKsQQebJTCVj7CNlO4YmAwFlCUaBAo0XVR/nK6T+RqTNh5g7GuwLrTyMxlMfY760r/eKI4J+hJSffA1rlm9o989DK5SLtOmnpOm+pCr6zNoojpJVK6HnxFbuKGiomI5u5hRQVVdXW0+0UjowGa97u6Jn5ewewExMIAN3mA0lepjX8nLgsYXMy2P8SAmWJM6zGoJhnkrr7BEBRwbJLYHJJ/zQ5gwZhx7IkMMkEFWfZF8BcxOFU9zAes33L9+yzERMKLP66nMM8V4HjNFpgPI0r9kft4AmwLjzE4wD0Z58S0OMCvk/RMDgB1zHGtZtIoIgopKe/TokRNYnZ2dzroAIsAFo93Vrq0OAxgLdPZ7TZBsLOtBAl2vZbvqE1VWT4JWM/YkDfJk4P4+GtxqR5l07otrYjMdk6Ydj24ebxjwO23CZ6A+YGegiJOn+vY3xcC9jncY5TwA7E92+zGEW/r5+CnbUjdijbXYbJXs8E6ck11aWmp2G+B7oC1Qc2AsP+AAVHqT3RR3Vd5nQ9dO93hw6ik95hX9H7jonF/PIQBjj7ARC9f5rhUTQrlWrt/L9e/y/XbOq1ce0ihfy0A85useZop6K2gJ8P8A0FACo/7De7tV5Qd4sgIa8QDp2IBoDTNOvU7Mlo1sQ44rwNSzwS3t19l14WWq/tb4qLW76rn3Yp2gSd8KCVjwWMqC1JP6nmei8Ddu3DBRdgmI4jshDHbkByVpQ5+rY9P3339fk5OT46m9RVMNLGLQf2cxdCGff62M3I8m1EcY73nqVg4nhBYe/FK+EwJH+E4cpAozgxoQlhEQwGNctWqVUW2rV6+OGOx++96jbcm193bJBrx3lBQV3NRu8o+xgCrWvervsoddWD8pKamQ40Py9QEM00htNrzrnvxY3yeW/kUTIRlbO7kYa4OlxyMsZG87loQ8Yhdv9+7dJkIPYGk28mOrFStWGOMeux+wdx0foq9fvx7Z3QDGgmeK9D63y8j74D2QpI+unZHTAZdsgJzKxE33vfQzowEuluC3q57eyx/EWBn2DQQ3MdDa9bd/xrV8+fLIpx8beH4/HigoKHgbKi4u9s6ePeuVl5cbYOkOIxwB0M30Bj+0DRDhy4LE7KSfszJ9SbAMd0+5vxEjG6EB+SWMRq3eepycnGwMdq0mfX7aNWHbsrAhovvXrl2bpCKRB2DDSZjuKpd2AVa0qX9EMSszK3GOmEWCjopLgBMJE4GEyZajVh8OA9zJXBpUOL98+bJ37Ngxr6WlRbPbuIABrILPS+8KAtRD/3t6ekzsTBbLLKg+HLC0GrxLkzCmAaWTDSptm0QDGf92cMKvdy5duuQdPXpU6+sB7TAAWFCzOI8VTCiLOoinIeaGNqbyO8JZmXlg3a2srPyJANQqQHIBTIPLBlYQc8GTxM5SAdHevXvNr3NgSylGe2Z7owAG2AZHcSbshHJgOJQDoCSeNgumj2hjMbAMqHBBE/IAv0imiU6AjSUGvN9Pv1z2lAtc2AiILTg4r6mpMfGP48ePew0NDdJGU21t7SuXaysAt3e26l85z7LSx5cJ4YbTp0/PJVBN2G6wb9++PJrAzdif5fpBhTaK/f70I1qygPeMrqvq6upi0nmuPyWZlY8XJPWNY7mEVJX5GyNK8yiFg34J7fM3RYEgIyCN09H8jVF1dfXs3xj9CoD1PwEGAKorJqR4atjIAAAAAElFTkSuQmCC")=>{let e,i=0,s=0;const n=[],o=u=>{const c=new X.Image;c.src=u,c.onload=()=>{n.forEach(d=>{var f;const g=new Zs({source:c,fitMode:Ze.Stretch});(f=d.Rd)===null||f===void 0||f.Ce(g),i=c.width,s=c.height,l(d)})}};o(t);const h=r.Gn(u=>o(u));let a;if(new X.Image instanceof X.HTMLImageElement){const u=new X.Image;u.src=t,a=new Zs({source:u,fitMode:Ze.Stretch})}else if(X.lcjs_setup){const u=new X.Image;u.src=t;const c=X.lcjs_setup(u.naturalWidth,u.naturalHeight);c.getContext("2d").drawImage(u,0,0),a=new Zs({source:c,fitMode:Ze.Stretch})}else a=new H({color:xi("#f00")});const l=u=>{if(u.Rd){const c=u.dt.mi({x:u.dt.x.getInnerEnd(),y:u.dt.y.getInnerStart()},{x:-(3+i),y:3}),d=u.dt.mi({x:u.dt.x.getInnerEnd(),y:u.dt.y.getInnerStart()},{x:-3,y:3+s}),f={x:d.x-c.x,y:d.y-c.y};u.Rd.Fe(c).q(f)}e&&e.Ss()};return e=r.FI("logo",Number.MAX_SAFE_INTEGER),u=>{const c={dt:u};return(d=>{d.Rd&&d.Rd.dispose(),e&&(d.Rd=e.ke(d.dt).Ce(a).setMouseInteractions(!0).we(it).setMouseEnterEventHandler(()=>{r.Wr(It.Point)}).setMouseLeaveEventHandler(()=>{r.Wr(It.None)}).setMouseClickEventHandler(Vf).setTouchEndEventHandler(Vf),l(d))})(c),n.push(c),{Ps:()=>l(c),W:()=>(d=>{d.Rd&&(d.Rd.dispose(),d.Rd=void 0);const f=n.indexOf(d);f>=0&&n.splice(f,1),n.length<=0&&r.Wn(h)})(c)}}},Vf=()=>X.open("https://lightningchart.com/lightningchart-js/");class gv{constructor(){this.mR=this.dP.bind(this),X.addEventListener("scroll",this.mR,{passive:!0})}W(){this.mR&&X.removeEventListener("scroll",this.mR),this.mR=void 0}}class ha{constructor(t,e){this.ma=t,this.X=e,this.yR=!0,this.pR=null,this.SR=null}}class Hl{constructor(t){this.vR=!1,this.bR=1,this.xR=t,this.MR={ma:N(0,0),X:N(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),yR:!0,pR:null,SR:null},this._R=N(64,64),this.wR=new Uint8ClampedArray(this._R.x*this._R.y*this.bR)}CR(t,e){if(!t.yR)return null;if(t.pR&&t.SR){const l=this.CR(t.pR,e);return l!==null?l:this.CR(t.SR,e)}const i=gr(t.X.x,t.X.y);if(t.ma.x+t.X.x>=Number.MAX_SAFE_INTEGER&&(i.x=this._R.x-t.ma.x-1),t.ma.y+t.X.y>=Number.MAX_SAFE_INTEGER&&(i.y=this._R.y-t.ma.y-1),t.X.x===e.x&&t.X.y===e.y)return t.yR=!1,t;if(i.x<e.x||i.y<e.y)return null;let s,n;const o=i.x-e.x,h=i.y-e.y;let a=o<h;return o===0&&h===0&&(a=!(t.X.x>t.X.y)),a?(s=new ha(gt(t.ma,{x:0,y:1}),N(t.X.x,e.y)),n=new ha(gt(t.ma,{x:0,y:e.y+1}),N(t.X.x,t.X.y-1-e.y))):(s=new ha(gt(t.ma,{x:1,y:0}),N(e.x,t.X.y)),n=new ha(gt(t.ma,{x:e.x+1,y:0}),N(t.X.x-1-e.x,t.X.y))),t.pR=s,t.SR=n,this.CR(t.pR,e)}kR(t,e){const i={TR:!1,ma:null};let s=this.CR(this.MR,e);if(s===null)for(;s===null&&this._R.x<this.xR&&this._R.y<this.xR;){if(!this.FR(N(2*this._R.x,2*this._R.y)))return this.vR=!0,null;i.TR=!0,s=this.CR(this.MR,e)}if(s===null)return this.vR=!0,null;for(let n=0;n<e.y;n+=1)for(let o=0;o<e.x;o+=1){const h=s.ma.y+n,a=s.ma.x+o;this.wR[h*this.bR*this._R.x+a*this.bR+0]=t[n*this.bR*e.x+o*this.bR+0]}return i.ma=s.ma,i}FR(t){if(t.x>this.xR||t.y>this.xR)return!1;const e=new Uint8ClampedArray(t.x*t.y*this.bR);for(let i=0;i<this._R.y;i+=1)for(let s=0;s<this._R.x;s+=1)e[i*t.x*this.bR+s*this.bR+0]=this.wR[i*this._R.x*this.bR+s*this.bR+0];return this._R=t,this.wR=e,!0}}class yv{constructor(t){this.IR=new Map,this.xR=t,this.IR.set(this.IR.size,new Hl(this.xR))}PR(t){return this.IR.get(t)}kR(t,e){let i=-1;const s=Array.from(this.IR.values());for(let h=0;h<s.length;h+=1){const a=s[h];if(!a)break;if(!a.vR){i=h;break}}i===-1&&(i=this.IR.size,this.IR.set(this.IR.size,new Hl(this.xR)));const n=this.IR.get(i);if(!n)return null;let o=n.kR(t,e);if(!o&&n.vR){const h=this.IR.size,a=new Hl(this.xR);this.IR.set(h,a),i=h,o=a.kR(t,e)}return o?{DR:i,...o}:null}}var wr;(function(r){r[r.Fail=0]="Fail",r[r.Success=1]="Success",r[r.Resize=2]="Resize"})(wr||(wr={}));const mv=oc("font-texture");class pv{constructor(t){this.BR=new Map,this.LR=new Map,this.No=mv(),this.RR=t,this.ER=new yv(this.RR.zR||4096)}VR(){return this.LR.forEach(t=>{this.RR.OR(t)}),this.LR.clear(),this}NR(t,e){const i=this.BR.get(e);if(i)return i.get(t)}GR(t,e,i){let s=this.BR.get(e);if(s||(s=new Map,this.BR.set(e,s)),s.has(t.glyph))return wr.Success;const n=this.ER.kR(i,t.size);if(!n||!n.ma)return wr.Fail;n.TR&&this.WR();const o=this.ER.PR(n.DR);if(!o)return wr.Fail;let h=this.LR.get(n.DR);if(!h){const k=this.RR.gl.createTexture();if(!k)throw new Le("Failed to create texture for font!");h=k,this.LR.set(n.DR,k)}const a=n.ma,l=o._R.x,u=o._R.y,c=-t.offsetX,d=t.baseline-t.size.y,f=-t.offsetX+t.size.x,g=t.baseline,y=a.x/l,p=(a.y+t.size.y)/u,x=(a.x+t.size.x)/l,A=a.y/u,v=[y,p,x,p,y,A,y,A,x,p,x,A],w=[c,d,f,d,c,g,c,g,f,d,f,g],E={origin:a,size:t.size,advanceX:t.advance,baseline:t.baseline,vertices:w,texCoords:v,packerId:n.DR,texture:h};s.set(t.glyph,E);const C=this.RR.gl;return C.pixelStorei(C.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),C.bindTexture(C.TEXTURE_2D,h),C.texImage2D(C.TEXTURE_2D,0,C.LUMINANCE,o._R.x,o._R.y,0,C.LUMINANCE,C.UNSIGNED_BYTE,this.RR.UR?o.wR:new Uint8Array(o.wR)),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MIN_FILTER,C.LINEAR),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MAG_FILTER,C.LINEAR),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_S,C.CLAMP_TO_EDGE),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_T,C.CLAMP_TO_EDGE),C.bindTexture(C.TEXTURE_2D,null),n.TR?wr.Resize:wr.Success}WR(){this.BR.forEach(t=>{t.forEach((e,i)=>{const s=this.ER.PR(e.packerId);if(!s)return;const n=e.origin,o=s._R.x,h=s._R.y,a=n.x/o,l=(n.y+e.size.y)/h,u=(n.x+e.size.x)/o,c=n.y/h,d=[a,l,u,l,a,c,a,c,u,l,u,c];e.texCoords=d,t.set(i,e)})})}}const pt=r=>{if(r instanceof Gt||r instanceof Gi)return r._i()?"linear-highPrecision":"linear";if(r instanceof Ue){const t={};return r.x instanceof Zr&&(t.x={base:r.x.gi()}),r.y instanceof Zr&&(t.y={base:r.y.gi()}),["logarithmic",t]}return"linear"},Ei=r=>{const t=Object.keys(r),e={};return t.forEach(i=>{const s=r[i];let n=!1;e[i]=o=>{if(!o)return n;const h=s();return n=h,h}}),e},Xi=(r,t,e)=>r.getLookUpProperty()==="value"?e:r.getLookUpProperty()==="x"?{min:t.vt(),max:t.bt()}:r.getLookUpProperty()==="y"?{min:t.xt(),max:t.Mt()}:r.getLookUpProperty()==="z"?{min:t.lS(),max:t.aS()}:void 0,Xl=r=>!(!r||r.lookUpProperty!=="value"||!r.lut.percentageValues),xv=r=>(t,e)=>e%2?t:t+r;class Sv{constructor(t){this.YR=new Map,this.HR=oc("font"),this.$R=new Map,this.XR=new Set,this.RR=t}VR(t=!1){return(t||this.XR.size===0)&&(this.YR.forEach((e,i)=>{e.VR(),this.YR.delete(i)}),this.XR.clear()),this}jR(t){this.XR.add(t)}ZR(t){this.XR.delete(t)}QR(t,e,i,s){const n=X.devicePixelRatio,o=`${s?"dark":"light"} - ${dc(e,n).id}`,h=this.$R.get(o),a=this.YR.get(h);let l=0,u=0,c=0;const d=t.split(""),f=e.size,g=.45*e.size*n,y=Math.round(1*e.size);let p=!1;for(let A=0;A<d.length;A+=1){const v=d[A],w=a&&a.NR(v,f);w?(v.trim()!==""&&(u=Math.max(u,w.baseline),l=Math.min(l,w.baseline-(w.size.y-1))),c+=w.advanceX):(v.trim()!==""&&(u=Math.max(u,0),l=Math.min(l,0-(y-1))),c+=g,p=!0)}const x=((A,v,w)=>{if(w===0||w===360||w===180||w%180==0)return{x:A,y:v};if(w===90||w===-90||(w+90)%180==0)return{x:v,y:A};const E=w*Math.PI/180,C=Math.cos(E),k=Math.sin(E);return{x:Math.abs(A*C)+Math.abs(v*k),y:Math.abs(A*k)+Math.abs(v*C)}})(c/n,(u-l+1)/n,i);return{x:x.x,y:x.y,isEstimate:p}}JR(t,e,i){const s=`${i?"dark":"light"} - ${e.id}`;let n=this.$R.get(s);n||(n=this.HR(),this.YR.set(n,new pv(this.RR)),this.$R.set(s,n));const o=this.YR.get(n);if(!o)throw new Le("Failed to get font texture!");let h=0,a=0,l=0;const u=t.split(""),c=new Map;let d=0;const f=e.properties.size;for(let p=0;p<u.length;p+=1){const x=u[p],A=Math.ceil(d);let v=o.NR(x,f);if(!v){const w=this.RR.KR(x,e.properties,e.dpr,i);if(!w)continue;const E=o.GR(w[1],f,w[0]);if(E===wr.Resize){this.XR.forEach(C=>{C.la.i=!0}),p=-1,d=0,a=0,h=0,c.clear();continue}if(E===wr.Fail)throw new Le("Failed to create glyph");if(v=o.NR(x,f),!v)throw new Le("Failed to get glyph after creation")}if(x.trim()!==""){let w=c.get(v.texture);w||(w={vertices:[],texCoords:[]},c.set(v.texture,w)),w.vertices.push(...v.vertices.map(xv(A))),w.texCoords.push(...v.texCoords),a=Math.max(a,v.baseline),h=Math.min(h,v.baseline-(v.size.y-1))}d+=v.advanceX}l=d;const g=wt(N(0,h),N(l,a)),y=[];return c.forEach((p,x)=>{y.push({texCoords:new Float32Array(p.texCoords),vertices:new Float32Array(p.vertices),texture:x})}),[y,g]}}class _f{constructor(t){this.modifiers=[],this.modifiers=t}build(t){const e=this.modifiers.filter(i=>Av(i));for(const i of e)t=i(t);return`${Lr(this.modifiers.filter(i=>vv(i))).map(i=>i.qR).join(`
`)}
${t}`}}const Av=r=>typeof r=="function",vv=r=>r&&typeof r=="object"&&"tE"in r,W=(...r)=>t=>{r=r.reverse();for(let e of r)typeof e=="string"&&(e=e.includes("{")||e.endsWith(";")?e:`${e};`,e=e.trim(),t=t.replace("void main(void)",`${e}
void main(void)`));return t},La=r=>t=>(r=r.endsWith(";")?r:`${r};`,t.replace(r,"")),oe=(...r)=>t=>{const e=r.filter(s=>s!==!1);for(let s=0;s<e.length;s+=1)e[s]=e[s].endsWith(";")?e[s]:`${e[s]};`,e[s]=e[s].startsWith("	")?e[s]:`	${e[s]}`;const i=e.join(`
`);return t.replace(`void main(void) {
`,`void main(void) {
${i}
`)},za=(r,...t)=>e=>{for(let o=0;o<t.length;o+=1)t[o]=t[o].endsWith(";")?t[o]:`${t[o]};`,t[o]=t[o].startsWith("	")?t[o]:`	${t[o]}`;const i=t.join(`
`),s=new RegExp(`(.*${r}.*)`),n=e.replace(s,`${i}
$1`);return t.forEach(o=>{if(!n.includes(o))throw new Error(`ShaderBefore misusage (not found: 
${o}
match: 
${r}
result: 
${n}
)`)}),n},qe=(r,...t)=>e=>{const i=t.filter(u=>typeof u=="string");for(let u=0;u<i.length;u+=1)i[u]=i[u].endsWith(";")?i[u]:`${i[u]};`,i[u]=i[u].startsWith("	")?i[u]:`	${i[u]}`;const s=i.join(`
`),n=e.lastIndexOf(r),o=e.substring(n),h=o.indexOf(`
`),a=o.substring(h),l=`${e.substring(0,n+h)}
${s}${a}`;return i.forEach(u=>{if(!l.includes(u))throw new Error(`ShaderAfter misusage (not found: "${u}", match: "${r}", result: "${l}")`)}),l},Xs=(...r)=>t=>{for(let e of r)if(typeof e=="string"){e=e.endsWith(";")?e:`${e};`,e=e.trim(),e=e.startsWith("	")?e:`	${e}`;const i=t.lastIndexOf("}");t=`${t.substring(0,i-1)}
${e}
}`}return t},fi=(r,t)=>e=>{let i,s;if(r.includes("uniform")||r.includes("attribute")){const n=r.endsWith(";")?r:`${r};`;e=W(n)(e),i=r.split(" ")[2].replace(";","")}else i=r;if(t.includes(" ")){const n=t.endsWith(";")?t:`${t};`;e=W(n)(e),s=t.split(" ")[2].replace(";","")}else s=t;return Xs(`	${s} = ${i};`)(e)},bv=(...r)=>t=>{r=r.reverse();for(const e of r)t=e+t;return t},je={roundUnsigned:{tE:"roundUnsigned",qR:`float roundUnsigned(float number) {
  return floor(number + 0.5);
}`},linearStep:{tE:"linearStep",qR:`float linearStep(float step0, float step1, float step) {
  return clamp((step - step0) / (step1 - step0), 0.0, 1.0);
}`},decodeUbyteRGBAEncodedFloat:{tE:"decodeUbyteRGBAEncodedFloat",qR:`
      // Denormalize 8-bit color channels to integers in the range 0 to 255.
      ivec4 floatsToBytes(vec4 inputFloats, bool littleEndian) {
        ivec4 bytes = ivec4(inputFloats * 255.0);
        return (
          littleEndian
          ? bytes.abgr
          : bytes
        );
      }
      
      // Break the four bytes down into an array of 32 bits.
      void bytesToBits(const in ivec4 bytes, out bool bits[32]) {
        for (int channelIndex = 0; channelIndex < 4; ++channelIndex) {
          float acc = float(bytes[channelIndex]);
          for (int indexInByte = 7; indexInByte >= 0; --indexInByte) {
            float powerOfTwo = exp2(float(indexInByte));
            bool bit = acc >= powerOfTwo;
            bits[channelIndex * 8 + (7 - indexInByte)] = bit;
            acc = mod(acc, powerOfTwo);
          }
        }
      }
      
      // Compute the exponent of the 32-bit float.
      float getExponent(bool bits[32]) {
        const int startIndex = 1;
        const int bitStringLength = 8;
        const int endBeforeIndex = startIndex + bitStringLength;
        float acc = 0.0;
        int pow2 = bitStringLength - 1;
        for (int bitIndex = startIndex; bitIndex < endBeforeIndex; ++bitIndex) {
          acc += float(bits[bitIndex]) * exp2(float(pow2--));
        }
        return acc;
      }
      
      // Compute the mantissa of the 32-bit float.
      float getMantissa(bool bits[32], bool subnormal) {
        const int startIndex = 9;
        const int bitStringLength = 23;
        const int endBeforeIndex = startIndex + bitStringLength;
        // Leading/implicit/hidden bit convention:
        // If the number is not subnormal (with exponent 0), we add a leading 1 digit.
        float acc = float(!subnormal) * exp2(float(bitStringLength));
        int pow2 = bitStringLength - 1;
        for (int bitIndex = startIndex; bitIndex < endBeforeIndex; ++bitIndex) {
          acc += float(bits[bitIndex]) * exp2(float(pow2--));
        }
        return acc;
      }
      
      // Parse the float from its 32 bits.
      float bitsToFloat(bool bits[32]) {
        float signBit = float(bits[0]) * -2.0 + 1.0;
        float exponent = getExponent(bits);
        bool subnormal = abs(exponent - 0.0) < 0.01;
        float mantissa = getMantissa(bits, subnormal);
        float exponentBias = 127.0;
        return signBit * mantissa * exp2(exponent - exponentBias - 23.0);
      }
      
      // Decode a 32-bit float from the RGBA color channels of a texel.
      float decodeUbyteRGBAEncodedFloat(vec4 rgba, bool littleEndian) {
        ivec4 rgbaBytes = floatsToBytes(rgba, littleEndian);
        bool bits[32];
        bytesToBits(rgbaBytes, bits);
        return bitsToFloat(bits);
      }
      `},texelFetchWithFallback:{webgl2:{tE:"texelFetchWithFallback",qR:`vec4 texelFetchWithFallback(sampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {
  return texelFetch(textureSampler, iTexel, 0);
}`},webgl1:{tE:"texelFetchWithFallback",qR:`vec4 texelFetchWithFallback(sampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {
  vec2 halfTexel = 0.5 / textureSize;
  return texture2D(textureSampler, (vec2(iTexel) * 2.0 + 1.0) * halfTexel);
}`}},texelFetchUnsignedWithFallback:{webgl2:{tE:"texelFetchUnsignedWithFallback",qR:`uvec4 texelFetchUnsignedWithFallback(usampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {
  return texelFetch(textureSampler, iTexel, 0);
}`},webgl1:{tE:"texelFetchUnsignedWithFallback",qR:`uvec4 texelFetchUnsignedWithFallback(usampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {
  vec2 halfTexel = 0.5 / textureSize;
  return texture2D(textureSampler, (vec2(iTexel) * 2.0 + 1.0) * halfTexel);
}`}},modulus:{tE:"modulus",qR:`int modulus(int a, int b) {
  return (a)-((a)/(b))*(b);
}`},computeScreenSpaceWireframe:{tE:"computeScreenSpaceWireframe",qR:`#extension GL_OES_standard_derivatives : enable
float computeScreenSpaceWireframe (vec3 barycentric, float lineWidth) {
  vec3 dist = fwidth(barycentric);
  vec3 smoothed = smoothstep(dist * ((lineWidth * 0.5) - 0.5), dist * ((lineWidth * 0.5) + 0.5), barycentric);
  return 1.0 - min(min(smoothed.x, smoothed.y), smoothed.z);
}`}},Un=(r,t)=>{const e=t.steps,i=e.length-1,s=[W("uniform vec4 uFallbackColor")],n=[],o=[];for(let h=0;h<t.steps.length;h+=1)n.push(`uniform float uLUTValue${h}`),o.push(`uniform vec4 uLUTColor${h}`);return s.push(W(...n,...o),t.percentageValues&&W("uniform float uMinValue","uniform float uMaxValue")),t.interpolate?s.push(za("colorFragment","vec4 colorLookup = vec4(0.0)",`if (${r} <= -340282346638528859811704183484516925440.0) {
                    colorLookup = uFallbackColor;
                }`,"float value = "+(t.percentageValues?`clamp((${r} - uMinValue) / (uMaxValue  - uMinValue), 0.0, 1.0);`:`${r}`),`if (value <= uLUTValue0) {
                    colorLookup = uLUTColor0;
                }`,`if (value >= uLUTValue${i}) {
                    colorLookup = uLUTColor${i};
                }`,...e.slice(0,-1).map((h,a)=>`if (value >= uLUTValue${a} && value <= uLUTValue${a+1}) { colorLookup = uLUTColor${a} + vec4(
                        uLUTColor${a+1}[0] -  uLUTColor${a}[0],
                        uLUTColor${a+1}[1] -  uLUTColor${a}[1],
                        uLUTColor${a+1}[2] -  uLUTColor${a}[2],
                        uLUTColor${a+1}[3] -  uLUTColor${a}[3]
                    ) * (value - uLUTValue${a})/(uLUTValue${a+1} - uLUTValue${a});}`),"vec4 colorFragment = colorLookup")):s.push(za("colorFragment","vec4 colorLookup = vec4(uLUTValue0)",`if (${r} <= -340282346638528859811704183484516925440.0) {
                    colorLookup = uFallbackColor;
                }`,"float value = "+(t.percentageValues?`clamp((${r} - uMinValue) / (uMaxValue  - uMinValue), 0.0, 1.0);`:`${r}`),`if (${r} >= uLUTValue${i}) { colorLookup = uLUTColor${i};}`,...e.slice(1).reverse().map(h=>{const a=e[e.indexOf(h)-1];return`if (value < uLUTValue${e.indexOf(h)}) { colorLookup = uLUTColor${e.indexOf(a)};}`}),"vec4 colorFragment = colorLookup")),s},Gn=[W("uniform sampler2D uMaskTexture"),W("varying vec2 vMaskTextureCoord"),qe("antiAliasFactor =","vec4 maskTextureSample = texture2D(uMaskTexture, vMaskTextureCoord)","antiAliasFactor = maskTextureSample.r")],On=[W("uniform sampler2D uMaskTexture"),W("varying vec2 vMaskTextureCoord"),qe("antiAliasFactor =","vec4 maskTextureSample = texture2D(uMaskTexture, vMaskTextureCoord)","antiAliasFactor = maskTextureSample.a")],Nf=[W("varying vec3 vPosWorld;","varying vec3 vNormal;","uniform vec3 uCameraLoc;","uniform vec3 uLightLoc;","uniform vec4 uLightColor;","uniform vec4 uAmbientColor;","uniform float uShininess;","uniform float uAmbientReflection;","uniform float uDiffuseReflection;","uniform float uSpecularReflection;"),qe("colorFragment =","float ambientReflection = uAmbientReflection","float diffuseReflection = uDiffuseReflection","float specularReflection = uSpecularReflection","vec3 ambientColor = uAmbientColor.rgb","vec3 diffuseColor = colorFragment.rgb","vec3 specularColor = uLightColor.rgb","vec3 vNormalNormalized = normalize(vNormal)","vNormalNormalized = (float(gl_FrontFacing) * 2.0 - 1.0) * vNormalNormalized","vec3 lightDir = normalize( uLightLoc - vPosWorld )","float lambertian = abs(dot(vNormalNormalized, lightDir))","float specular = 0.0","vec3 R =  reflect(-lightDir, vNormalNormalized)","vec3 V = normalize(uCameraLoc - vPosWorld)","float specAngle = max(dot(R,V),0.0)","specular = pow(specAngle, uShininess)","colorFragment = vec4(ambientReflection * ambientColor + diffuseReflection * lambertian * diffuseColor + specularReflection * specular * specularColor, colorFragment.a)")];class aa extends Error{constructor(t,e,i){super(`Dynamic shader generation error
(id: ${e})
 ${i?`when applying feature: ${i.idVertex?`vert: ${i.idVertex}`:""} ${i.idFragment?`frag: ${i.idFragment}`:""}`:""} | ${t}`)}}const vi=(...r)=>{let t="";for(const e of r){if(typeof e!="object"){t+=`${String(e)},`;continue}const i=[{prefix:"",obj:e}];for(;i.length>0;){const{prefix:s,obj:n}=i.shift();t+=`${s}:`;const o=Object.keys(n).sort();for(const h of o){const a=n[h];typeof a=="object"&&a.__proto__===Object.prototype||Array.isArray(a)?i.push({prefix:h,obj:a}):t+=`${h}=${String(a)},`}}}return t},Lf=r=>r.find(t=>{var e;return(e=t.iE)===null||e===void 0?void 0:e.sE})!==void 0,la=r=>r.find(t=>{var e;return(e=t.iE)===null||e===void 0?void 0:e.eE})!==void 0,un=(r,t,...e)=>{const i=[],s=t?"vec3":"vec2",{axisWorldTranslation:n,scaling:o,translation:h,offset:a,flipXY:l,flipXZ:u,splitPosAttribute:c,normalSource:d}=r,f=[];if(d==="attribute"&&i.push(W("attribute vec3 aNormal"),oe("vec3 normal = aNormal")),n!=="linear-highPrecision"?e.forEach(g=>{g.attributeNameAxisCoord!==void 0&&g.variableNameAxisCoord!==void 0&&(c!==!0?i.push(oe(`${s} ${g.variableNameAxisCoord} = ${g.attributeNameAxisCoord}`)):i.push(oe(`${s} ${g.variableNameAxisCoord} = ${t?`vec3(${g.attributeNameAxisCoord}X, ${g.attributeNameAxisCoord}Y, ${g.attributeNameAxisCoord}Z)`:`vec2(${g.attributeNameAxisCoord}X, ${g.attributeNameAxisCoord}Y)`}`)))}):e.forEach(g=>{r.splitPosAttribute!==!0?i.push(oe(`${s} ${g.variableNameAxisCoord}_highpart = ${g.attributeNameAxisCoord}_highpart`),oe(`${s} ${g.variableNameAxisCoord}_lowpart = ${g.attributeNameAxisCoord}_lowpart`)):i.push(oe(`${s} ${g.variableNameAxisCoord}_highpart = vec2(${g.attributeNameAxisCoord}_highpartX, ${g.attributeNameAxisCoord}_highpartY)`),oe(`${s} ${g.variableNameAxisCoord}_lowpart = vec2(${g.attributeNameAxisCoord}_lowpartX, ${g.attributeNameAxisCoord}_lowpartY)`))}),a&&a.rotation){const g=a.rotation.dataType,y=g==="uniform"?"u":"a";if(g==="attribute-deg"){i.push(W("attribute float aRotDeg"),W("uniform float uBaseRotDeg"));const p="cRot",x="aInstanceGeo";i.push(oe(`vec2 ${p} = vec2(sin((aRotDeg + uBaseRotDeg) * 0.01745329252), cos((aRotDeg + uBaseRotDeg) * 0.01745329252))`,`vec2 rotatedGeo = vec2(${x}.x * ${p}.y + ${x}.y * ${p}.x, ${x}.y * ${p}.y - ${x}.x * ${p}.x)`))}else{const p=`${y}Rot`;i.push(W(`${g} vec2 ${p}`));const x="aInstanceGeo";i.push(oe(`vec2 rotatedGeo = vec2(${x}.x * ${p}.y + ${x}.y * ${p}.x, ${x}.y * ${p}.y - ${x}.x * ${p}.x)`))}}if(a&&i.push(W(`attribute ${s} aInstanceGeo`)),l===!0){if(n==="linear-highPrecision")throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + flipXY");e.forEach(g=>{f.push(`${g.variableNameAxisCoord} = ${t?`vec3(${g.variableNameAxisCoord}.y, ${g.variableNameAxisCoord}.x, ${g.variableNameAxisCoord}.z)`:`vec2(${g.variableNameAxisCoord}.y, ${g.variableNameAxisCoord}.x)`}`)})}if(u===!0){if(n==="linear-highPrecision")throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + flipXZ");e.forEach(g=>{f.push(`${g.variableNameAxisCoord} = vec3(${g.variableNameAxisCoord}.z, ${g.variableNameAxisCoord}.y, ${g.variableNameAxisCoord}.x)`)})}if(o){if(n==="linear-highPrecision")throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + scaling");const g=(o.dataType==="attribute"?"a":"u")+"Scaling",y=t?"vec3":"vec2";i.push(W(`${o.dataType} ${y} ${g}`)),e.forEach(p=>{f.push(`${p.variableNameAxisCoord} = ${p.variableNameAxisCoord} * ${g}`)})}if(h&&h.sizeUnit==="axis"){if(n==="linear-highPrecision")throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + translation (axis)");const g=(h.dataType==="attribute"?"a":"u")+"TranslationAxis",y=t?"vec3":"vec2";i.push(W(`${h.dataType} ${y} ${g}`)),e.forEach(p=>{f.push(`${p.variableNameAxisCoord} = ${p.variableNameAxisCoord} + ${g}`)})}if(a&&a.sizeUnit==="axis"){if(n==="linear-highPrecision")throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + offset (axis)");const g=(a.dataType==="attribute"?"a":"u")+"OffsetAxis",y=a.symmetric===!0?"float":s;i.push(W(`${a.dataType} ${y} ${g}`));const p=a.halved?" * 0.5":"",x=a.rotation?"rotatedGeo":"aInstanceGeo",A="offsetGeometry";f.push(`${s} ${A} = ${g} * ${x}${p} * sign(uScale)`),t&&d==="gpu-calculate"&&f.push(`${s} normal = ${x}`),e.forEach(v=>{f.push(`${v.variableNameAxisCoord} = ${v.variableNameAxisCoord} + ${A}`)})}if(n===void 0||n==="linear")i.push(W(`uniform ${s} uDisp`,`uniform ${s} uScale`)),e.forEach(g=>{f.push(`${s} ${g.variableNameWorldCoord} = (${g.variableNameAxisCoord} - uDisp) / uScale`)});else if(n==="linear-highPrecision")i.push(W(`uniform ${s} uDisp`,`uniform ${s} uScale`,`uniform ${s} uScaleStart_highpart`,`uniform ${s} uScaleStart_lowpart`)),e.forEach(g=>{f.push(`${s} ${g.variableNameAxisCoord}_hprecision = (${g.variableNameAxisCoord}_highpart - uScaleStart_highpart) + (${g.variableNameAxisCoord}_lowpart - uScaleStart_lowpart)`,`${s} ${g.variableNameWorldCoord} = (${g.variableNameAxisCoord}_hprecision - uDisp) / uScale`,`${s} ${g.variableNameAxisCoord} = ${g.variableNameAxisCoord}_highpart + ${g.variableNameAxisCoord}_lowpart`)});else if(n==="matrix")i.push(W("uniform mat3 uMatrix")),e.forEach(g=>{f.push(`vec2 ${g.variableNameWorldCoord} = (uMatrix * vec3(${g.variableNameAxisCoord}, 1.0)).xy`)});else if(n==="matrix4")i.push(W("uniform mat4 uMatrix")),e.forEach(g=>{f.push(`vec4 ${g.variableNameWorldCoord} = uMatrix * ${g.attributeNameAxisCoord}`)});else if(n[0]==="logarithmic"){i.push(W(`uniform ${s} uScaleStart`,`uniform ${s} uScaleStartLog`,`uniform ${s} uScaleInterval`,`uniform ${s} uScaleIntervalLog`,`uniform ${s} uViewportStart`,`uniform ${s} uViewportSize`));const g=t?["x","y","z"]:["x","y"],y=[];g.forEach(p=>{const x=n[1][p];if(x!==void 0){const A=x.base;if(A==="e")return;const v=`float cLog${A} = 1.0 / log(${ao(A).toFixed(1)})`;y.includes(v)||y.push(v)}}),i.push(W(...y)),e.forEach((p,x)=>{const A=`${x}`,v=[];g.forEach(w=>{const E=w.toUpperCase(),C=n[1][w];if(C===void 0)f.push(`float posPercent${E}${A} = (${p.variableNameAxisCoord}.${w} - uScaleStart.${w}) / uScaleInterval.${w}`);else{const k=C.base,F=k==="e";f.push(`float posLog${E}${A} = log(${p.variableNameAxisCoord}.${w})${F?"":` * cLog${k}`}`,`float posPercent${E}${A} = (posLog${E}${A} - uScaleStartLog.${w}) / uScaleIntervalLog.${w}`)}v.push(`posPercent${E}${A}`)}),f.push(`${s} ${p.variableNameWorldCoord} = uViewportStart + ${s}(${v.join(", ")}) * uViewportSize`)})}if(a&&a.sizeUnit==="px"){i.push(W("uniform vec2 uRatioPxClip"));let g="vec2(0.0, 0.0)";a.useAlignment&&(i.push(W("uniform vec2 uOffsetAlignment")),g="uOffsetAlignment");const y=(a.dataType==="attribute"?"a":"u")+"OffsetPixels",p=a.symmetric===!0?"float":s;i.push(W(`${a.dataType} ${p} ${y}`));const x=a.halved?" * 0.5":"",A=`(${a.rotation?"rotatedGeo":"aInstanceGeo"} + ${g}) * ${y}${x} * uRatioPxClip`;e.forEach(v=>{f.push(`${v.variableNameWorldCoord} = ${v.variableNameWorldCoord} + ${A}`)})}if(a&&a.sizeUnit==="scale"){i.push(W("uniform vec2 uRatioPxClip")),i.push(W("uniform vec2 uSizePixels"));let g="vec2(0.0, 0.0)";a.useAlignment&&(i.push(W("uniform vec2 uOffsetAlignment")),g="uOffsetAlignment");const y=(a.dataType==="uniform"?"u":"a")+"OffsetScale";i.push(W(`${a.dataType} float ${y}`));const p=`(${a.rotation?"rotatedGeo":"aInstanceGeo"} + ${g}) * ${y} * uSizePixels * uRatioPxClip`;e.forEach(x=>{f.push(`${x.variableNameWorldCoord} = ${x.variableNameWorldCoord} + ${p}`)})}if(a&&a.sizeUnit==="wu"){const g=(a.dataType==="attribute"?"a":"u")+"OffsetWU",y=a.symmetric===!0?"float":s;i.push(W(`${a.dataType} ${y} ${g}`));const p=a.halved?" * 0.5":"",x=a.rotation?"rotatedGeo":"aInstanceGeo",A="offsetGeometry";f.push(`${s} ${A} = ${g} * ${x}${p}`),t&&d==="gpu-calculate"&&f.push(`${s} normal = normalize(${A})`),e.forEach(v=>{f.push(`${v.variableNameWorldCoord} = ${v.variableNameWorldCoord} + ${A}`)})}if(a&&a.sizeUnit==="nwu"){i.push(W("uniform float uRatioNwuWu"));const g=(a.dataType==="attribute"?"a":"u")+"OffsetNWU",y=a.symmetric===!0?"float":s;i.push(W(`${a.dataType} ${y} ${g}`));const p=a.halved?" * 0.5":"",x=a.rotation?"rotatedGeo":"aInstanceGeo",A="offsetGeometry";f.push(`${s} ${A} = ${g} * ${x}${p}`),t&&d==="gpu-calculate"&&f.push(`${s} normal = normalize(${A})`),e.forEach(v=>{f.push(`${v.variableNameWorldCoord} = ${v.variableNameWorldCoord} + ${A} * uRatioNwuWu`)})}return r.snapToNearestPixel&&(i.push(W("uniform vec2 uViewportSizePx")),e.forEach(g=>{f.push(`${g.variableNameWorldCoord} = 2.0 * floor(((${g.variableNameWorldCoord} + 1.0) * 0.5) * uViewportSizePx + 0.5) / uViewportSizePx - 1.0`)})),i.push(za("gl_Position =",...f)),i},ua=(r,t,e,i)=>{const s=[],n=r.axisWorldTranslation,o=t?"vec3":"vec2";if(n==="linear")s.push(qe(e,`${o} ${i} = ${e} * uScale + uDisp`));else if(n==="linear-highPrecision")s.push(qe(e,`${o} ${i} = ${e} * uScale + uDisp + uScaleStart_highpart + uScaleStart_lowpart`));else{if(n==="matrix")throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");if(n==="matrix4")throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");if(n[0]!=="logarithmic")throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");{const h=[`${o} ${e}_percent = (${e} - uViewportStart) / uViewportSize`];(t?["x","y","z"]:["x","y"]).forEach(a=>{const l=a.toUpperCase(),u=n[1][a];if(u===void 0)h.push(`float pos${l}Back = ${e}_percent.${a} * uScaleInterval.${a} + uScaleStart.${a}`);else{const c=u.base,d=c==="e"?"1.0":`cLog${c}`;h.push(`float pos${l}Back = pow(2.71828, (${e}_percent.${a} * uScaleIntervalLog.${a} + uScaleStartLog.${a}) / ${d})`)}}),h.push(`${o} ${i} = ${o}(posXBack, posYBack${t?", posZBack":""})`),s.push(qe(e,...h))}}return s},zf=r=>(t=>t.find(e=>{var i;return(i=e.iE)===null||i===void 0?void 0:i.hE})!==void 0)(r)?[La("attribute vec4 aColor"),La("vColor = aColor"),W("attribute vec4 aColorA"),W("attribute vec4 aColorB"),Xs("vColor = mix(aColorA, aColorB, aSegmentSide)")]:[],Bf=r=>(t=>t.find(e=>{var i;return(i=e.iE)===null||i===void 0?void 0:i.rE})!==void 0)(r)?[La("attribute float aLookupValue"),La("vLookupValue = aLookupValue"),W("attribute float aLookupValueA"),W("attribute float aLookupValueB"),Xs("vLookupValue = mix(aLookupValueA, aLookupValueB, aSegmentSide)")]:[],G={"2D":{idFeature:"2D",apply:r=>({idVertex:"2D",idFragment:"2D",defaultVertexShader:"2D",defaultFragmentShader:"FragmentShader"})},"2DCompose":{idFeature:"2DCompose",apply:r=>({idVertex:"2DCompose",idFragment:"2DCompose",defaultVertexShader:"2DMatrix",defaultFragmentShader:"Empty"})},"3D":{idFeature:"3D",iE:{sE:!0},apply:r=>({idVertex:"3D",idFragment:"3D",defaultVertexShader:"3D",defaultFragmentShader:"FragmentShader"})},PointSize:r=>({idFeature:"PointSize",apply:t=>{const e=r==="uniform"?"u":"a";return{idVertex:`SizePrimitive:${vi(r)}`,idFragment:void 0,vertexShaderModifiers:[W(`${r} float ${e}PointSize`,"uniform float uDevicePixelRatio"),Xs(`gl_PointSize = ${e}PointSize * uDevicePixelRatio`)]}}}),Color:r=>{const t=r&&r.dataType,e=r&&r.maskTextureText,i=r&&r.maskTexture,s=r&&r.overrideOpacity;return{idFeature:"Color",iE:{eE:!(!Array.isArray(r.dataType)||r.dataType[1]==="value")||void 0,rE:!(!Array.isArray(r.dataType)||r.dataType[1]!=="value")||void 0,hE:r.dataType==="attribute"||void 0},apply:(n,o)=>{let h,a=`Color:${vi(r)}`;const l=[];let u="FragmentShader";const c=[];if(t==="uniform")c.push(W("uniform vec4 uColor"),oe("vec4 colorFragment = uColor"),...e?Gn:[],...i?On:[]);else if(t==="attribute")h="colorAttribute",l.push(fi("attribute vec4 aColor","varying vec4 vColor")),c.push(W("varying vec4 vColor"),oe("vec4 colorFragment = vColor"),...e?Gn:[],...i?On:[]);else if(t==="texture")h="colorTexCoord",l.push(fi("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")),c.push(W("varying vec2 vTextureCoord"),W("uniform sampler2D uColorTexture"),W("uniform vec4 uColor"),oe("vec4 colorFragment = texture2D(uColorTexture, vTextureCoord)",`if(vTextureCoord.x < 0. || vTextureCoord.x > 1. || vTextureCoord.y < 0. || vTextureCoord.y > 1.) {
                        colorFragment = uColor;
                    }`),...e?Gn:[],...i?On:[]);else if(t==="texture-coord-calc-gpu")h="colorTexCoord",u="Empty",l.push(W("attribute vec2 aTextureCoord"),W("varying vec2 vTextureCoord"),Xs("vTextureCoord = gl_Position.xy * 0.5 + 0.5")),c.push(W("varying vec2 vTextureCoord"),W("uniform sampler2D uColorTexture"),oe("vec4 colorFragment = texture2D(uColorTexture, vTextureCoord)","gl_FragColor = colorFragment;"));else if(Array.isArray(t)&&t[0]==="image")h="colorTexCoord",l.push(fi("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")),t[1].fitMode===Ze.Tile?c.push(W("uniform sampler2D uColorTexture"),W("varying vec2 vTextureCoord"),oe("vec4 colorFragment = texture2D(uColorTexture, vTextureCoord);")):c.push(W("uniform sampler2D uColorTexture"),W("varying vec2 vTextureCoord"),W("uniform vec4 uColor"),oe("vec4 colorFragment = texture2D(uColorTexture, vTextureCoord);",`if(vTextureCoord.x < 0. || vTextureCoord.x > 1. || vTextureCoord.y < 0. || vTextureCoord.y > 1.){
                                colorFragment = uColor;
                            }`));else if(Array.isArray(t)&&t[0]==="lookup"){const d=t[1];if(d==="value")h="lookup:value",l.push(fi("attribute float aLookupValue","varying float vLookupValue"));else{const f=`posAxis.${d}`;h=`lookup:${d}`,l.push(fi(f,"varying float vLookupValue"))}c.push(W("varying float vLookupValue"),...Un("vLookupValue",t[2]),...e?Gn:[],...i?On:[])}else if(Array.isArray(t)&&t[0]==="gradient"){const d=t[1],f=d.getColorStops();Ae(d)?(a=`rgradient${f.length},${i},${e}`,c.push(W("uniform vec4 uBounds","uniform vec2 uCenter","uniform vec2 uDistance","uniform float uAspect"),W(...Sa(f.map((g,y)=>[`uniform vec4 color_${y}`,`uniform float stop_${y}`]))),je.linearStep,oe("vec2 uv = vec2((((gl_FragCoord.x)-uBounds.x)/(uBounds.z))*uAspect,((gl_FragCoord.y)-uBounds.y)/(uBounds.w))","float mixVal = distance(uv/uDistance, uCenter/uDistance)","vec4 color = mix(color_0, color_1, linearStep(stop_0, stop_1, mixVal))",...f.map((g,y)=>y<2?"":`color = mix(color, color_${y}, linearStep(stop_${y-1}, stop_${y}, mixVal));`),"vec4 colorFragment = color"),...e?Gn:[],...i?On:[])):ve(d)&&(a=`lgradient${f.length},${i},${e}`,c.push(W("uniform vec4 uBounds","uniform vec2 uStartPoint","uniform vec2 uEndPoint"),W(...Sa(f.map((g,y)=>[`uniform vec4 color_${y}`,`uniform float stop_${y}`]))),je.linearStep,oe("vec2 uv = gl_FragCoord.xy - uBounds.xy","float magnitude = ((uv.x-uStartPoint.x) * (uEndPoint.x-uStartPoint.x) + (uv.y-uStartPoint.y) * (uEndPoint.y-uStartPoint.y)) / (pow(uEndPoint.x - uStartPoint.x, 2.0) + pow(uEndPoint.y-uStartPoint.y,2.0))","vec4 color = mix(color_0, color_1, linearStep(stop_0, stop_1, magnitude))",...f.map((g,y)=>y<2?"":`color = mix(color, color_${y}, linearStep(stop_${y-1}, stop_${y}, magnitude))`),"vec4 colorFragment = color"),...e?Gn:[],...i?On:[]))}if(e||i){const d="maskTexture";h=h?`${h} ${d}`:`Color:${d}`,l.push(fi("attribute vec2 aMaskTextureCoord","varying vec2 vMaskTextureCoord"))}return s&&c.push(W("uniform float uOpacity"),qe("colorFragment =","colorFragment.a *= uOpacity")),{vertexShaderModifiers:l,fragmentShader:u,fragmentShaderModifiers:c,idVertex:h,idFragment:a}}}},ColorShaded3D:r=>{const{dataType:t,shadingStyle:e,wireframe:i}=r;let s;const n=`ColorShaded3D:${vi(r)}`;return{idFeature:"ColorShaded3D",iE:{eE:!(!Array.isArray(r.dataType)||r.dataType[1]==="value")||void 0,rE:!(!Array.isArray(r.dataType)||r.dataType[1]!=="value")||void 0},apply:(o,h)=>{const a=[],l=[];if(a.push(e==="phong"&&fi("normal","varying vec3 vNormal"),fi("posWorld","varying vec3 vPosWorld")),t==="uniform")l.push(W("uniform vec4 uColorDiffuse"),oe("vec4 colorFragment = uColorDiffuse"));else if(t==="attribute")s="per-vertex-color",a.push(fi("attribute vec4 aColor","varying vec4 vColor")),l.push(W("varying vec4 vColor"),oe("vec4 colorFragment = vColor"));else if(Array.isArray(t)){const u=t[1];if(u==="value")s="lookup:value",a.push(fi("attribute float aLookupValue","varying float vLookupValue"));else{const c=`posAxis.${u}`;s=`lookup:${u}`,a.push(fi(c,"varying float vLookupValue"))}l.push(W("varying float vLookupValue"),...Un("vLookupValue",t[2]))}if(i){const u="wireframe";s=s?`${s},${u}`:u,a.push(fi("attribute vec3 aTriangleBary","varying vec3 vTriangleBary")),l.push(W("varying vec3 vTriangleBary"),W("uniform vec4 uWireframeColor","uniform float uWireframeThickness"),je.computeScreenSpaceWireframe,qe("colorFragment =","float edge = computeScreenSpaceWireframe(vTriangleBary, uWireframeThickness)","colorFragment = mix(colorFragment, uWireframeColor, edge)"))}return e==="phong"&&l.push(...Nf),{idVertex:s,idFragment:n,vertexShaderModifiers:a,fragmentShader:"FragmentShader",fragmentShaderModifiers:l}}}},VertexLocation:r=>({idFeature:"VertexLocation",apply:t=>{const e=[],i=Lf(t),s=r.coordType?r.coordType:i?"vec3":"vec2";return r.axisWorldTranslation!=="linear-highPrecision"?r.splitPosAttribute!==!0?e.push(W(`attribute ${s} aPos`)):e.push(W("attribute float aPosX"),W("attribute float aPosY"),i&&W("attribute float aPosZ")):r.splitPosAttribute===!0?e.push(W("attribute float aPos_highpartX"),W("attribute float aPos_lowpartX"),W("attribute float aPos_highpartY"),W("attribute float aPos_lowpartY")):e.push(W(`attribute ${s} aPos_highpart`),W(`attribute ${s} aPos_lowpart`)),e.push(...un(r,i,{attributeNameAxisCoord:"aPos",variableNameAxisCoord:r.coordType==="vec4"?void 0:"posAxis",variableNameWorldCoord:"posWorld"})),{idVertex:`VertexLocation:${vi(r)}`,idFragment:void 0,vertexShaderModifiers:e}}}),Model3D:r=>({idFeature:"Model3D",apply:t=>{const e=[];return e.push(W("attribute vec3 aGeoPos"),W("uniform mat4 uModelRotation"),W("uniform mat4 uModelRotationNormals"),W("uniform vec3 uLocationAxis"),W("uniform vec3 uModelAlignment"),W("uniform vec3 uModelScale"),W("uniform vec3 uModelSize"),...un({axisWorldTranslation:"linear",normalSource:r.normalSource},!0,{attributeNameAxisCoord:"uLocationAxis",variableNameAxisCoord:"locationAxis",variableNameWorldCoord:"locationWorld"}),za("gl_Position =","vec3 posWorld = locationWorld + ((uModelRotation * vec4(aGeoPos, 1.0)).xyz  - (uModelAlignment + 1.0) * uModelSize/2.0) * uModelScale;"),r.normalSource==="attribute"&&qe("vec3 normal ="," normal = (uModelRotationNormals * vec4(normal, 1.0)).xyz;"),...la(t)?ua({axisWorldTranslation:"linear",normalSource:r.normalSource},!0,"posWorld","posAxis"):[]),{vertexShaderModifiers:e,idVertex:`Model3D:${vi(r)}`,idFragment:void 0}}}),LineInstanced2D:r=>({idFeature:"LineInstanced2D",apply:t=>({idVertex:`LineInstanced2D:${vi(r)}`,idFragment:void 0,vertexShaderModifiers:[W("uniform float uThicknessPixels"),W("uniform vec2 uRatioPxClip"),...r.axisWorldTranslation!=="linear-highPrecision"&&r.splitPosAttribute!==!0?[W("attribute vec2 aLocationA"),W("attribute vec2 aLocationB")]:r.axisWorldTranslation==="linear-highPrecision"&&r.splitPosAttribute!==!0?[W("attribute vec2 aLocationA_highpart"),W("attribute vec2 aLocationB_highpart"),W("attribute vec2 aLocationA_lowpart"),W("attribute vec2 aLocationB_lowpart")]:r.axisWorldTranslation!=="linear-highPrecision"&&r.splitPosAttribute===!0?[W("attribute float aLocationAX"),W("attribute float aLocationAY"),W("attribute float aLocationBX"),W("attribute float aLocationBY")]:r.axisWorldTranslation==="linear-highPrecision"&&r.splitPosAttribute===!0?[W("attribute float aLocationA_highpartX"),W("attribute float aLocationA_highpartY"),W("attribute float aLocationB_highpartX"),W("attribute float aLocationB_highpartY"),W("attribute float aLocationA_lowpartX"),W("attribute float aLocationA_lowpartY"),W("attribute float aLocationB_lowpartX"),W("attribute float aLocationB_lowpartY")]:[],W("attribute vec2 aSegmentPosition"),W("attribute float aSegmentSide"),...un(r,!1,{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA"},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB"}),r.ensureMinimumSegmentLength&&W("uniform vec2 uMinSegmentPixelVector"),qe("worldB = ",r.ensureMinimumSegmentLength&&"float segmentLengthPixels = sqrt(pow(worldB.x - worldA.x, 2.0) + pow(worldB.y - worldA.y, 2.0)) / length(uRatioPxClip)",r.ensureMinimumSegmentLength&&`if (segmentLengthPixels == 0.0 || segmentLengthPixels < length(uMinSegmentPixelVector)) {
                        worldB = worldA + uMinSegmentPixelVector * uRatioPxClip;
                    }`,"vec2 directionBasis = worldB - worldA","vec2 directionBasisNorm = normalize(directionBasis)","vec2 perpendBasisNorm = vec2(-directionBasisNorm.y, directionBasisNorm.x)","vec2 offset = mix(worldA, worldB, aSegmentSide)","vec2 thicknessDirection = aSegmentPosition.x * directionBasisNorm + aSegmentPosition.y * perpendBasisNorm","vec2 posWorld = offset + thicknessDirection * uThicknessPixels * uRatioPxClip"),...Bf(t),...zf(t),...la(t)?ua(r,!1,"posWorld","posAxis"):[]]})}),Area2D:r=>({idFeature:"Area2D",apply:t=>({idVertex:`Area2D:${vi(r)}`,idFragment:void 0,vertexShaderModifiers:[...r.axisWorldTranslation!=="linear-highPrecision"&&r.splitPosAttribute!==!0?[W("attribute vec2 aLocationA"),W("attribute vec2 aLocationB")]:r.axisWorldTranslation==="linear-highPrecision"&&r.splitPosAttribute!==!0?[W("attribute vec2 aLocationA_highpart"),W("attribute vec2 aLocationB_highpart"),W("attribute vec2 aLocationA_lowpart"),W("attribute vec2 aLocationB_lowpart")]:r.axisWorldTranslation!=="linear-highPrecision"&&r.splitPosAttribute===!0?[W("attribute float aLocationAX"),W("attribute float aLocationAY"),W("attribute float aLocationBX"),W("attribute float aLocationBY")]:r.axisWorldTranslation==="linear-highPrecision"&&r.splitPosAttribute===!0?[W("attribute float aLocationA_highpartX"),W("attribute float aLocationA_highpartY"),W("attribute float aLocationB_highpartX"),W("attribute float aLocationB_highpartY"),W("attribute float aLocationA_lowpartX"),W("attribute float aLocationA_lowpartY"),W("attribute float aLocationB_lowpartX"),W("attribute float aLocationB_lowpartY")]:[],W("attribute float aCurveOrBaseline"),W("attribute float aSegmentSide"),...un(r,!1,{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA"},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB"}),qe("worldB = ","vec2 posCoord = mix(worldA, worldB, aSegmentSide)","float baseline = min(posCoord.y, -1.0)","vec2 posWorld = vec2(posCoord.x, mix(posCoord.y, baseline, aCurveOrBaseline))"),...Bf(t),...zf(t),...la(t)?ua(r,!1,"posWorld","posAxis"):[]]})}),LineInstanced3D:r=>({idFeature:"LineInstanced3D",apply:t=>({idVertex:`LineInstanced3D:${vi(r)}`,idFragment:void 0,defaultFragmentShader:"FragmentShader",vertexShaderModifiers:[W("uniform float uOffsetWU"),W("attribute vec3 aLocationA"),W("attribute vec3 aLocationB"),W("attribute float aSegmentPosition"),W("attribute float aPerpendHorizontal"),W("attribute float aPerpendVertical"),...un({axisWorldTranslation:r.axisWorldTranslation,normalSource:"custom"},Lf(t),{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA"},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB"}),qe("worldB = ","vec3 directionBasis = worldB - worldA","vec3 directionBasisNorm = normalize(directionBasis)","vec3 notParallel = normalize(mix( vec3( 0.0, 1.0, 0.0 ), vec3( 0.2, 0.8, 0.0 ), step( abs(directionBasis.y), 0.9 ) ))","vec3 horizontalBasis = normalize( cross( notParallel, directionBasisNorm ) )","vec3 verticalBasis = normalize( cross( horizontalBasis, directionBasisNorm ) )","vec3 normal = aPerpendHorizontal * horizontalBasis + aPerpendVertical * verticalBasis","vec3 posWorld = worldA + aSegmentPosition * directionBasis + normal * uOffsetWU * 0.5"),...la(t)?ua({axisWorldTranslation:r.axisWorldTranslation},!0,"posWorld","posAxis"):[]]})}),RoundedEdges3D:{idFeature:"RoundedEdges3D",apply:r=>({idVertex:"RoundedEdges3D",idFragment:void 0,vertexShaderModifiers:[W("attribute vec3 aEdge"),W("uniform float uEdgeRoundness"),qe("posWorld =","vec3 boxSizeWorld = abs( aOffsetAxis / uScale )","float boxMinDimensionWorldXZ = min( boxSizeWorld.x, boxSizeWorld.z )","vec3 edgeRoundAmount = uEdgeRoundness * vec3( boxMinDimensionWorldXZ, min( boxMinDimensionWorldXZ, boxSizeWorld.y ), boxMinDimensionWorldXZ )","posWorld = posWorld + aEdge * edgeRoundAmount")]})},ColorGrid2D:r=>{const t=r.flipXY,e=r.intensityTextureType,i=r.littleEndian;return{idFeature:"ColorGrid2D",apply:(s,n)=>({idVertex:void 0,idFragment:`ColorGrid2D:${vi(r)}`,fragmentShader:"FragmentShader",fragmentShaderModifiers:[W("uniform vec4 uTileBounds","uniform vec2 uTileDimensions","uniform sampler2D uTileIntensityValues"),e==="ubyte"&&je.decodeUbyteRGBAEncodedFloat,r.interpolation==="bilinear"?oe("vec2 cellSizePx = uTileBounds.zw / (uTileDimensions - 1.0)","vec2 cellIndex = (gl_FragCoord.xy - uTileBounds.xy) / cellSizePx","vec2 cellStart = floor(cellIndex)","vec2 cellEnd = ceil(cellIndex)","vec2 cellStartNormalized = cellStart / (uTileDimensions - 1.0)","vec2 cellEndNormalized = cellEnd / (uTileDimensions - 1.0)",`vec4 sample00 = texture2D(uTileIntensityValues, ${t?"cellStartNormalized":"vec2(cellStartNormalized.y, cellStartNormalized.x)"})`,`vec4 sample01 = texture2D(uTileIntensityValues, ${t?"vec2(cellStartNormalized.x, cellEndNormalized.y)":"vec2(cellStartNormalized.y, cellEndNormalized.x)"})`,`vec4 sample10 = texture2D(uTileIntensityValues, ${t?"vec2(cellEndNormalized.x, cellStartNormalized.y)":"vec2(cellEndNormalized.y, cellStartNormalized.x)"})`,`vec4 sample11 = texture2D(uTileIntensityValues, ${t?"cellEndNormalized":"vec2(cellEndNormalized.y, cellEndNormalized.x)"})`,"float intensity00 = "+(e==="float"?"sample00.x":`decodeUbyteRGBAEncodedFloat(sample00, ${i})`),"float intensity01 = "+(e==="float"?"sample01.x":`decodeUbyteRGBAEncodedFloat(sample01, ${i})`),"float intensity10 = "+(e==="float"?"sample10.x":`decodeUbyteRGBAEncodedFloat(sample10, ${i})`),"float intensity11 = "+(e==="float"?"sample11.x":`decodeUbyteRGBAEncodedFloat(sample11, ${i})`),"vec2 lerpFactors = cellIndex - cellStart",`float intensityR1 = mix(intensity00, intensity10, ${t?"lerpFactors.x":"lerpFactors.y"})`,`float intensityR2 = mix(intensity01, intensity11, ${t?"lerpFactors.x":"lerpFactors.y"})`,`float intensityP = mix(intensityR1, intensityR2,  ${t?"lerpFactors.y":"lerpFactors.x"})`):oe("vec2 cellSizePx = uTileBounds.zw / (uTileDimensions)","vec2 cellIndex = (gl_FragCoord.xy - uTileBounds.xy) / cellSizePx","vec2 cellIndexNormalized = cellIndex / uTileDimensions",`vec4 sample0 = texture2D(uTileIntensityValues, ${t?"cellIndexNormalized":"vec2(cellIndexNormalized.y, cellIndexNormalized.x)"})`,"float intensityP = "+(e==="float"?"sample0.x":`decodeUbyteRGBAEncodedFloat(sample0, ${i})`)),...Un("intensityP",r.lut)]})}},DrawToNormalTexture:r=>{const t=r.flipXZ,e=r.vertexIdSource,i=r.normalTextureType,s=r.heightmapTextureType,n=r.littleEndian;return{idFeature:"DrawToNormalTexture",apply:(o,h)=>{const a=[],l=[];return a.push(W("uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture",i==="uint"?"flat varying uvec3 vNormalRGB":"varying vec3 vNormalRGB",e==="attribute"&&"attribute float aVertexID"),e!==void 0&&je.roundUnsigned,je.modulus,je.texelFetchWithFallback[h],s==="ubyte"&&je.decodeUbyteRGBAEncodedFloat,oe(e===void 0?"int iVertex = gl_VertexID":"int iVertex = int(roundUnsigned(aVertexID))","int iSecondary = modulus(iVertex, (uTileDimensions.y - 1))","int iPrimary = iVertex / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 uTileDimensionsMinus1 = vec2(uTileDimensions) - 1.0","vec2 halfTexelWorld = 2.0 / (uTileDimensionsMinus1 * 2.0)","vec2 posWorld = vec2(-1.0 + halfTexelWorld.y + iCell.y * 2.0 * halfTexelWorld.y, -1.0 + halfTexelWorld.x + iCell.x * 2.0 * halfTexelWorld.x)","vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)",`vec3 posAxis0 = vec3(
                            uTileStartLocationAxisXZ.x + iCell.${t?"y":"x"} * cellSizeAxis.x,
                            ${s==="float"?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${n})`} ,
                            uTileStartLocationAxisXZ.y + iCell.${t?"x":"y"} * cellSizeAxis.y
                        )`,"vec2 iCell1 = iCell + vec2(1.0, 0.0)",`vec3 posAxis1 = vec3(
                            uTileStartLocationAxisXZ.x + iCell1.${t?"y":"x"} * cellSizeAxis.x,
                            ${s==="float"?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell1.y, iCell1.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell1.y, iCell1.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${n})`},
                            uTileStartLocationAxisXZ.y + iCell1.${t?"x":"y"} * cellSizeAxis.y
                        )`,"vec2 iCell2 = iCell + vec2(0.0, 1.0)",`vec3 posAxis2 = vec3(
                            uTileStartLocationAxisXZ.x + iCell2.${t?"y":"x"} * cellSizeAxis.x,
                            ${s==="float"?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell2.y, iCell2.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell2.y, iCell2.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${n})`},
                            uTileStartLocationAxisXZ.y + iCell2.${t?"x":"y"} * cellSizeAxis.y
                        )`,"vec2 iCell3 = iCell + vec2(1.0, 1.0)",`vec3 posAxis3 = vec3(
                            uTileStartLocationAxisXZ.x + iCell3.${t?"y":"x"} * cellSizeAxis.x,
                            ${s==="float"?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell3.y, iCell3.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell3.y, iCell3.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${n})`},
                            uTileStartLocationAxisXZ.y + iCell3.${t?"x":"y"} * cellSizeAxis.y
                        )`,"vec3 normal = normalize(cross(posAxis2 - posAxis0, posAxis1 - posAxis0) + cross(posAxis1 - posAxis3, posAxis2 - posAxis3))",i==="uint"?"vNormalRGB = uvec3(((normal / 2.0) + 0.5) * float(-1u))":"vNormalRGB = (normal / 2.0) + 0.5","gl_PointSize = 1.0")),l.push(W(i==="uint"?"flat varying uvec3 vNormalRGB":"varying vec3 vNormalRGB"),oe(i==="uint"?"gl_FragColor = uvec4(vNormalRGB, -1u)":"gl_FragColor = vec4(vNormalRGB, 1.0)")),{idVertex:`DrawToNormalTexture:${vi(r)}`,idFragment:`DrawToNormalTexture:${vi(r)}`,vertexShaderModifiers:a,fragmentShaderModifiers:l,fragmentShader:"Empty",hints:[i==="uint"&&{type:"fragOutput",fragOutput:"uvec4"}]}}}},SurfaceGrid:r=>{const t=r.fillColor,e=r.interpolation,i=r.flipXZ,s=r.shadingStyle,n=r.wireframe,o=r.instanceIdSource,h=r.normalTextureType,a=r.heightmapTextureType,l=r.intensityTextureType,u=r.littleEndian;return{idFeature:"SurfaceGrid",apply:(c,d)=>{const f=[],g=[];return f.push(W("attribute vec2 aGeoCellOffset","uniform int uBaseInstance","uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture",o==="attribute"&&"attribute float aInstanceID"),o!==void 0&&je.roundUnsigned,je.modulus,je.texelFetchWithFallback[d],a==="ubyte"&&je.decodeUbyteRGBAEncodedFloat,oe(o===void 0?"int iInstance = gl_InstanceID":"int iInstance = int(roundUnsigned(aInstanceID))","iInstance = iInstance + uBaseInstance","int iSecondary = modulus(iInstance, (uTileDimensions.y - 1))","int iPrimary = iInstance / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 iCellVertex = iCell + aGeoCellOffset","vec2 uTileDimensionsMinus1 = vec2(float(uTileDimensions.x), float(uTileDimensions.y)) - 1.0","vec2 ySampleCoordinate = vec2(iCellVertex.y, iCellVertex.x) / vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x)","float y = "+(a==="float"?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCellVertex.y, iCellVertex.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCellVertex.y, iCellVertex.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${u})`),"vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)","vec2 posAxisXZ = uTileStartLocationAxisXZ + cellSizeAxis * "+(i?"vec2(iCellVertex.y, iCellVertex.x)":"iCellVertex"),"vec3 posAxis = vec3(posAxisXZ.x, y, posAxisXZ.y)")),f.push(...un({axisWorldTranslation:r.axisWorldTranslation,normalSource:"custom"},!0,{attributeNameAxisCoord:void 0,variableNameAxisCoord:"posAxis",variableNameWorldCoord:"posWorld"})),s==="phong"&&f.push(fi("posWorld","varying vec3 vPosWorld"),...h==="uint"?[je.texelFetchUnsignedWithFallback[d],Xs("vec4 normalAxisRGB = vec4(texelFetchUnsignedWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))) / float(-1u)")]:[Xs("vec4 normalAxisRGB = texelFetchWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))")],Xs("vec3 normalAxis = (normalAxisRGB.rgb * 2.0) - 1.0","vNormal = normalize(normalAxis * uScale)"),W("varying vec3 vNormal",...h==="uint"?["uniform usampler2D uNormalmapTexture"]:["uniform sampler2D uNormalmapTexture"])),g.push(W("varying vec3 vTriangleBary")),t==="uniform"?g.push(W("uniform vec4 uColorDiffuse"),oe("vec4 colorFragment = uColorDiffuse")):Array.isArray(t)&&t[0]==="lookup"?t[1]==="value"?(f.push(fi("posAxis.xz","varying vec2 vVertexLocationAxisXZ")),g.push(W("uniform vec4 uTileBoundsAxisXZ","uniform vec2 uTileDimensionsXZ","varying vec2 vVertexLocationAxisXZ","uniform sampler2D uTileIntensityValues","uniform mat4 uViewProjectionMatrix","uniform vec3 uScale","uniform vec3 uDisp"),l==="ubyte"&&je.decodeUbyteRGBAEncodedFloat,e==="bilinear"?oe("vec2 cellSizeAxisXZ = uTileBoundsAxisXZ.zw / (uTileDimensionsXZ - 1.0)","vec2 cellIndex = (vVertexLocationAxisXZ - uTileBoundsAxisXZ.xy) / cellSizeAxisXZ","vec2 cellStart = floor(cellIndex)","vec2 cellEnd = ceil(cellIndex)","vec2 cellStartNormalized = cellStart / (uTileDimensionsXZ - 1.0)","vec2 cellEndNormalized = cellEnd / (uTileDimensionsXZ - 1.0)",`vec4 sample00 = texture2D(uTileIntensityValues, ${i?"cellStartNormalized":"vec2(cellStartNormalized.y, cellStartNormalized.x)"})`,`vec4 sample01 = texture2D(uTileIntensityValues, ${i?"vec2(cellStartNormalized.x, cellEndNormalized.y)":"vec2(cellStartNormalized.y, cellEndNormalized.x)"})`,`vec4 sample10 = texture2D(uTileIntensityValues, ${i?"vec2(cellEndNormalized.x, cellStartNormalized.y)":"vec2(cellEndNormalized.y, cellStartNormalized.x)"})`,`vec4 sample11 = texture2D(uTileIntensityValues, ${i?"cellEndNormalized":"vec2(cellEndNormalized.y, cellEndNormalized.x)"})`,"float intensity00 = "+(l==="float"?"sample00.x":`decodeUbyteRGBAEncodedFloat(sample00, ${u})`),"float intensity01 = "+(l==="float"?"sample01.x":`decodeUbyteRGBAEncodedFloat(sample01, ${u})`),"float intensity10 = "+(l==="float"?"sample10.x":`decodeUbyteRGBAEncodedFloat(sample10, ${u})`),"float intensity11 = "+(l==="float"?"sample11.x":`decodeUbyteRGBAEncodedFloat(sample11, ${u})`),"vec2 lerpFactors = cellIndex - cellStart",`float intensityR1 = mix(intensity00, intensity10, ${i?"lerpFactors.x":"lerpFactors.y"})`,`float intensityR2 = mix(intensity01, intensity11, ${i?"lerpFactors.x":"lerpFactors.y"})`,`float intensityP = mix(intensityR1, intensityR2,  ${i?"lerpFactors.y":"lerpFactors.x"})`):oe("vec2 cellSizeAxisXZ = uTileBoundsAxisXZ.zw / (uTileDimensionsXZ - 1.0)","vec2 cellIndex = floor((vVertexLocationAxisXZ - uTileBoundsAxisXZ.xy) / cellSizeAxisXZ)","vec2 cellIndexNormalized = cellIndex / (uTileDimensionsXZ - 1.0)",`vec4 sample0 = texture2D(uTileIntensityValues, ${i?"cellIndexNormalized":"vec2(cellIndexNormalized.y, cellIndexNormalized.x)"})`,"float intensityP = sample0.x"),...Un("intensityP",t[2]))):(f.push(fi(`posAxis.${t[1]}`,"varying float vLookupValue")),g.push(W("varying float vLookupValue"),...Un("vLookupValue",t[2]))):t===void 0&&g.push(oe("vec4 colorFragment = vec4(0.0, 0.0, 0.0, 0.0)")),s==="phong"&&g.push(...Nf),n&&(f.push(W("attribute vec3 aTriangleBary"),fi("aTriangleBary","varying vec3 vTriangleBary")),g.push(W("uniform vec4 uWireframeColor","uniform float uWireframeThickness"),je.computeScreenSpaceWireframe,qe("colorFragment =","float edge = computeScreenSpaceWireframe(vTriangleBary, uWireframeThickness)",t?`if (edge > 0.0) {
                                    colorFragment = vec4(mix(colorFragment.rgb, uWireframeColor.rgb, edge * uWireframeColor.a), max(colorFragment.a, uWireframeColor.a));
                                }`:`if (edge > 0.0) {
                                    colorFragment = uWireframeColor;
                                  } else {
                                      discard;
                                  }`))),{idVertex:`SurfaceGrid:${vi(r)}`,idFragment:`SurfaceGrid:${vi(r)}`,vertexShaderModifiers:f,fragmentShader:"FragmentShader",fragmentShaderModifiers:g}}}},DebugSurfaceGridNormals:r=>({idFeature:"DebugSurfaceGridNormals",apply:(t,e)=>({idVertex:`DebugSurfaceGridNormals:${vi(r)}`,idFragment:`DebugSurfaceGridNormals:${vi(r)}`,vertexShaderModifiers:[W("attribute float aNormalArrow","uniform int uBaseInstance","uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture",r.instanceIdSource==="attribute"&&"attribute float aInstanceID",...r.normalTextureType==="uint"?["uniform usampler2D uNormalmapTexture"]:["uniform sampler2D uNormalmapTexture"]),je.roundUnsigned,je.modulus,je.texelFetchWithFallback[e],r.heightmapTextureType==="ubyte"&&je.decodeUbyteRGBAEncodedFloat,oe(r.instanceIdSource===void 0?"int iInstance = gl_InstanceID":"int iInstance = int(roundUnsigned(aInstanceID))","iInstance = iInstance + uBaseInstance","int iSecondary = modulus(iInstance, (uTileDimensions.y - 1))","int iPrimary = iInstance / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 uTileDimensionsMinus1 = vec2(float(uTileDimensions.x), float(uTileDimensions.y)) - 1.0","float y00 = "+(r.heightmapTextureType==="float"?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${r.littleEndian})`),"float y01 = "+(r.heightmapTextureType==="float"?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${r.littleEndian})`),"float y10 = "+(r.heightmapTextureType==="float"?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)), ${r.littleEndian})`),"float y11 = "+(r.heightmapTextureType==="float"?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)), ${r.littleEndian})`),"float y = (y00 + y01 + y10 + y11) / 4.0","vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)",`vec2 posAxisXZ = uTileStartLocationAxisXZ + cellSizeAxis * (0.5 + ${r.flipXZ?"vec2(iCell.y, iCell.x)":"iCell"})`,"vec3 posAxis = vec3(posAxisXZ.x, y, posAxisXZ.y)",...r.normalTextureType==="uint"?["vec4 normalAxisRGB = vec4(texelFetchUnsignedWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))) / float(-1u)"]:["vec4 normalAxisRGB = texelFetchWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))"],"vec3 normalAxis = (normalAxisRGB.rgb * 2.0) - 1.0","vec3 normalWorld = normalize(normalAxis * uScale)"),...r.normalTextureType==="uint"?[je.texelFetchUnsignedWithFallback[e]]:[],...un({axisWorldTranslation:r.axisWorldTranslation,normalSource:"custom"},!0,{attributeNameAxisCoord:void 0,variableNameAxisCoord:"posAxis",variableNameWorldCoord:"posWorld"}),qe("posWorld =","vec3 dirArrow = normalWorld","vec3 posArrowStart = posWorld","vec3 posArrowEnd = posWorld + dirArrow * 0.010","vec3 notParallel = normalize(mix( vec3( 0.0, 1.0, 0.0 ), vec3( 0.2, 0.8, 0.0 ), step( abs(dirArrow.y), 0.9 ) ))","vec3 dirArrowLeft = normalize(-dirArrow + 0.50 * normalize(cross(dirArrow, notParallel)))","vec3 dirArrowRight = normalize(-dirArrow + 0.50 * normalize(cross(notParallel, dirArrow)))","vec3 posArrowLeft = posArrowEnd + dirArrowLeft * 0.0025","vec3 posArrowRight = posArrowEnd + dirArrowRight * 0.0025",`if (aNormalArrow == 0.0) {
                        posWorld = posArrowStart;
                    } else if (aNormalArrow == 1.0) {
                        posWorld = posArrowEnd;
                    } else if (aNormalArrow == 2.0) {
                        posWorld = posArrowLeft;
                    } else if (aNormalArrow == 3.0) {
                        posWorld = posArrowRight;
                    }`)],fragmentShader:"FragmentShader",fragmentShaderModifiers:[Xs("gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0)")]})}),OffsetTowardsCamera:()=>({idFeature:"OffsetTowardsCamera",apply:r=>({idVertex:"OffsetTowardsCamera",idFragment:void 0,vertexShaderModifiers:[W("uniform vec3 uCameraLoc"),qe("posWorld =","posWorld = posWorld + normalize(uCameraLoc) * 0.0025")]})}),AliasedEdge:{idFeature:"AliasedEdge",apply:r=>({idVertex:"AliasedEdge",idFragment:"AliasedEdge",vertexShaderModifiers:[W("attribute float aSegmentInside"),W("varying float vSegmentInside"),W("varying float vSegmentSide"),qe("gl_Position = ",`
                vSegmentInside = aSegmentInside;
                vSegmentSide = aSegmentSide;
                `)],fragmentShaderModifiers:[bv("#extension GL_OES_standard_derivatives : enable"),W("uniform float uAALimit"),W("varying float vSegmentInside"),W("varying float vSegmentSide"),qe("antiAliasFactor = ",`
                float dist = (uAALimit - vSegmentInside);
                vec2 ddist = vec2(dFdx(dist), dFdy(dist));
                float pixelDist = dist / length(ddist);
                // additional blurring
                pixelDist *= 0.5;

                float aa = clamp(0.5 - pixelDist, 0.0, 1.0);
                if((vSegmentSide <= 0.0 || vSegmentSide >= 1.0) && aa <=0.99){
                    aa *= 0.5;
                }
                antiAliasFactor = aa;
                `)]})},Glow1D:r=>({idFeature:"Glow1D",apply:()=>{const t=Math.round(r.spreadPx),e=Math.round(r.blurPx),i=t+e,s=r.firstPass,n=[];for(let o=-i;o<=i;o+=1){const h=Math.abs(o);n.push(s?{x:o.toFixed(1),y:"0.0",distPx:h.toFixed(1)}:{x:"0.0",y:o.toFixed(1),distPx:h.toFixed(1)})}return{idVertex:`Glow1D:${vi(r)}`,idFragment:`Glow1D:${vi(r)}`,vertexShaderModifiers:[fi("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")],fragmentShader:"FragmentShader",fragmentShaderModifiers:[W("uniform sampler2D uTexture"),W("varying vec2 vTextureCoord"),W("uniform vec2 uTextureSize"),s&&W("uniform vec2 uOffsetPx"),!s&&W("uniform sampler2D uTextureFirstGlowPass"),!s&&W("uniform vec4 uGlowColor"),qe("antiAliasFactor =","vec2 oneTexel = vec2(1.0, 1.0) / uTextureSize",...s?[]:[`float inverseIntensity =
                        0.25 * texture2D(uTexture, vTextureCoord).a +
                        0.125 * texture2D(uTexture, vTextureCoord + vec2(-oneTexel.x, 0.0)).a +
                        0.125 * texture2D(uTexture, vTextureCoord + vec2(oneTexel.x, 0.0)).a +
                        0.125 * texture2D(uTexture, vTextureCoord + vec2(0.0, -oneTexel.y)).a +
                        0.125 * texture2D(uTexture, vTextureCoord + vec2(0.0, oneTexel.y)).a +
                        0.0625 * texture2D(uTexture, vTextureCoord + vec2(-oneTexel.x, -oneTexel.y)).a +
                        0.0625 * texture2D(uTexture, vTextureCoord + vec2(oneTexel.x, -oneTexel.y)).a +
                        0.0625 * texture2D(uTexture, vTextureCoord + vec2(-oneTexel.x, oneTexel.y)).a +
                        0.0625 * texture2D(uTexture, vTextureCoord + vec2(oneTexel.x, oneTexel.y)).a`,"antiAliasFactor *= 1.0 - (inverseIntensity * inverseIntensity)","if (antiAliasFactor <= 0.0) { discard; }"],"float distancePx = 255.0","vec2 sample_tx = vec2(0.0)",...s?["vec2 texCoordOffset = vTextureCoord - uOffsetPx * oneTexel",...n.map((o,h)=>[`sample_tx = texCoordOffset + oneTexel * vec2(${o.x}, ${o.y})`,`if (distancePx > ${o.distPx} && sample_tx.x <= 1.0 && sample_tx.y <= 1.0 && sample_tx.x >= 0.0 && sample_tx.y >= 0.0 && texture2D(uTexture, sample_tx).a > 0.0) { distancePx = ${o.distPx}; }`]).flat(),"vec4 colorFragment = vec4(distancePx / 255.0, 0.0, 0.0, 1.0)"]:["vec4 sample_horizontal = vec4(0.0)","float horizontal_dist = 255.0","float min_horizontal_dist = 255.0",...n.map((o,h)=>[`sample_tx = vTextureCoord + oneTexel * vec2(${o.x}, ${o.y})`,`if (sample_tx.x <= 1.0 && sample_tx.y <= 1.0 && sample_tx.x >= 0.0 && sample_tx.y >= 0.0) {
                                            sample_horizontal = texture2D(uTextureFirstGlowPass, sample_tx);
                                            horizontal_dist = sample_horizontal.r * 255.0;
                                          }`,"if (sample_horizontal.a < 0.9) { horizontal_dist = 255.0; }","min_horizontal_dist = min(min_horizontal_dist, horizontal_dist)",`distancePx = min(distancePx, pow(horizontal_dist * horizontal_dist + ${o.y} * ${o.y}, 0.5))`]).flat(),`if (distancePx > ${i.toFixed(1)}) { discard; }`,"vec4 pixelGlowColor = vec4(0.0, 0.0, 0.0, 0.0)",`if (distancePx > ${t.toFixed(1)}) {
                                        float lerpAmount = (distancePx - ${t.toFixed(1)}) / ${(e+1).toFixed(1)};
                                        pixelGlowColor = mix(uGlowColor, vec4(uGlowColor.rgb, 0.0), 1.0 - (1.0 - lerpAmount) * (1.0 - lerpAmount));
                                    } else {
                                        pixelGlowColor = uGlowColor;
                                    }`,"vec4 colorFragment = pixelGlowColor"])]}}}),MousePicking:{idFeature:"MousePicking",apply:r=>({idVertex:void 0,idFragment:"MousePicking",fragmentShaderModifiers:[W("uniform vec4 uColor"),oe("vec4 colorFragment = uColor"),t=>t.replace("gl_FragColor = vec4(fragColorEnd.rgb, fragColorEnd.a * antiAliasFactor)",`if (antiAliasFactor <= 0.0) { discard; }
gl_FragColor = fragColorEnd`)]})},MousePickingAttribute:{idFeature:"MousePickingAttribute",apply:r=>({idVertex:"MousePickingAttribute",idFragment:"MousePickingAttribute",vertexShaderModifiers:[fi("attribute vec4 aColor","varying vec4 vColor")],fragmentShaderModifiers:[W("varying vec4 vColor"),oe("vec4 colorFragment = vColor"),t=>t.replace("gl_FragColor = vec4(fragColorEnd.rgb, fragColorEnd.a * antiAliasFactor)",`if (antiAliasFactor <= 0.0) { discard; }
gl_FragColor = fragColorEnd`)]})},AttributeHighlight:{idFeature:"AttributeHighlight",apply:r=>({idVertex:"AttributeHighlight",idFragment:"AttributeHighlight",vertexShaderModifiers:[fi("attribute float aIsHighlighted","varying float vIsHighlighted")],fragmentShaderModifiers:[t=>t.replace("uniform float uIsHighlighted","varying float vIsHighlighted").replace("uIsHighlighted","vIsHighlighted")]})},StippleTexture:{idFeature:"StippleTexture",apply:(r,t)=>({idVertex:"StippleTexture",idFragment:"StippleTexture",vertexShaderModifiers:[W("attribute vec2 aLengthSoFar"),W("varying float vLengthSoFar"),W("uniform vec2 uStippleCount"),Xs(`
                vec2 len = (((aLengthSoFar) / uScale) / 2.0) * uStippleCount;
                vLengthSoFar = len.x + len.y;
                `)],fragmentShaderModifiers:[W("uniform sampler2D uStippleTexture"),W("uniform float uStippleScale"),W("varying float vLengthSoFar"),t==="webgl1"&&W("uniform float uStippleTextureWidthLimiter"),qe("antiAliasFactor = ",`
                    float stippleSampleY = texture2D(
                        uStippleTexture, 
                        ${t==="webgl1"?"vec2(mod((vLengthSoFar / uStippleScale) , uStippleTextureWidthLimiter), 0)":"vec2((vLengthSoFar / uStippleScale), 0)"}
                    ).r;
                    float stippleAA = (stippleSampleY - 0.5) * 2.0;
                    antiAliasFactor *= stippleAA;
                    if (antiAliasFactor <= 0.0) { discard; }`)]})},StippleTextureInstanced:{idFeature:"StippleTextureInstanced",apply:(r,t)=>({idVertex:"StippleTextureInstanced",idFragment:"StippleTextureInstanced",vertexShaderModifiers:[W("attribute vec2 aLengthSoFarA"),W("attribute vec2 aLengthSoFarB"),W("varying float vLengthSoFar"),W("uniform vec2 uStippleCount"),Xs(`
                vec2 aLengthSoFar = mix(aLengthSoFarA, aLengthSoFarB, aSegmentSide);
                vec2 len = (((aLengthSoFar) / uScale) / 2.0) * uStippleCount;
                vLengthSoFar = len.x + len.y;
                `)],fragmentShaderModifiers:[W("uniform sampler2D uStippleTexture"),W("uniform float uStippleScale"),W("varying float vLengthSoFar"),t==="webgl1"&&W("uniform float uStippleTextureWidthLimiter"),qe("antiAliasFactor = ",`
                    float stippleSampleY = texture2D(
                        uStippleTexture, 
                        ${t==="webgl1"?"vec2(mod((vLengthSoFar / uStippleScale) , uStippleTextureWidthLimiter), 0)":"vec2((vLengthSoFar / uStippleScale), 0)"}
                    ).r;
                    float stippleAA = (stippleSampleY - 0.5) * 2.0;
                    antiAliasFactor *= stippleAA;
                    if (antiAliasFactor <= 0.0) { discard; }`)]})},PolarHeatmap:r=>({idFeature:"PolarHeatmap",apply:(t,e)=>{const i="dataType"in r,s="interpolation"in r?r:void 0,n=(s==null?void 0:s.interpolation)==="bilinear",o=s==null?void 0:s.intensityTextureType,h=s==null?void 0:s.littleEndian;return{idVertex:void 0,idFragment:`PolarHeatmap:${vi(r)}`,vertexShaderModifiers:[],fragmentShaderModifiers:[W("uniform vec2 uViewportSize","uniform vec2 uScale","uniform vec2 uDisp","uniform float uSectors","uniform float uAnnuli","uniform float uAmplitudeStart","uniform float uAmplitudeStep","uniform float uAmplitudeAxisStart","uniform float uAmplitudeAxisEnd","uniform float uAngleOffset","uniform float uAngleDirection",s&&"uniform sampler2D uTileIntensityValues",i&&"uniform vec4 uColor"),je.texelFetchWithFallback[e],o==="ubyte"&&je.decodeUbyteRGBAEncodedFloat,oe("vec2 posWorld = (2.0 * gl_FragCoord.xy / uViewportSize) - 1.0","vec2 posAxis = posWorld * uScale + uDisp","float amplitudeAxisInterval = uAmplitudeAxisEnd - uAmplitudeAxisStart","float amplitude = uAmplitudeAxisStart + sign(amplitudeAxisInterval) * sqrt(posAxis.x * posAxis.x + posAxis.y * posAxis.y)","float iAnnulus = (amplitude - uAmplitudeStart) / uAmplitudeStep","if (iAnnulus < 0.0 || iAnnulus > uAnnuli) { discard; }"),i&&oe("vec4 colorFragment = uColor"),s&&qe("if (iAnnulus","float angRad = atan(posAxis.y, posAxis.x) * uAngleDirection + uAngleOffset","if (angRad < 0.0) { angRad = angRad + 2.0 * 3.1415926538; }","if (angRad > 2.0 * 3.1415926538) { angRad = angRad - 2.0 * 3.1415926538; }","float iSector = uSectors * angRad / (2.0 * 3.1415926538)","vec2 cellIndex = vec2(iSector, iAnnulus)","ivec2 cellStart = ivec2(floor(cellIndex))","ivec2 cellEnd = cellStart + ivec2(1)","if (cellEnd.x >= int(uSectors)) { cellEnd = ivec2(0, cellEnd.y); }",s.flipXY&&"cellIndex = vec2(cellIndex.y, cellIndex.x)",s.flipXY&&"cellStart = ivec2(cellStart.y, cellStart.x)",s.flipXY&&"cellEnd = ivec2(cellEnd.y, cellEnd.x)","vec2 tileDimensions = "+(s.flipXY?"vec2(uAnnuli, uSectors)":"vec2(uSectors, uAnnuli)"),n&&"vec4 sample00 = texelFetchWithFallback(uTileIntensityValues, cellStart, tileDimensions)",n&&"vec4 sample01 = texelFetchWithFallback(uTileIntensityValues, ivec2(cellStart.x, cellEnd.y), tileDimensions)",n&&"vec4 sample10 = texelFetchWithFallback(uTileIntensityValues, ivec2(cellEnd.x, cellStart.y), tileDimensions)",n&&"vec4 sample11 = texelFetchWithFallback(uTileIntensityValues, cellEnd, tileDimensions)",n&&"float intensity00 = "+(o==="float"?"sample00.x":`decodeUbyteRGBAEncodedFloat(sample00, ${h})`),n&&"float intensity01 = "+(o==="float"?"sample01.x":`decodeUbyteRGBAEncodedFloat(sample01, ${h})`),n&&"float intensity10 = "+(o==="float"?"sample10.x":`decodeUbyteRGBAEncodedFloat(sample10, ${h})`),n&&"float intensity11 = "+(o==="float"?"sample11.x":`decodeUbyteRGBAEncodedFloat(sample11, ${h})`),n&&"vec2 lerpFactors = cellIndex - vec2(cellStart)",n&&"float intensityR1 = mix(intensity00, intensity10, lerpFactors.x)",n&&"float intensityR2 = mix(intensity01, intensity11, lerpFactors.x)",n&&"float intensityP = mix(intensityR1, intensityR2,  lerpFactors.y)",!n&&"vec4 sample0 = texelFetchWithFallback(uTileIntensityValues, cellStart, tileDimensions)",!n&&"float intensityP = "+(o==="float"?"sample0.x":`decodeUbyteRGBAEncodedFloat(sample0, ${h})`)),...s?Un("intensityP",s.lut):[]]}}})},Mv={"2D":`
void main(void) {
    gl_Position = vec4(posWorld, 0.0, 1.0 );
}
`,"2DMatrix":`
void main(void) {
    gl_Position = posWorld;
}
`,"3D":`
uniform mat4 uViewProjectionMatrix;
void main(void) {
    gl_Position = uViewProjectionMatrix * vec4(posWorld, 1.0);
}
`},Rv={FragmentShader:`
uniform float uIsHighlighted;
uniform vec4 uHighlightColorOffset;
uniform float uRenderEffectMask;
void main(void) {
    float antiAliasFactor = 1.0;
    vec4 fragColorEnd = colorFragment;
    if (fragColorEnd.a <= 0.0) { discard; }
    fragColorEnd = clamp(fragColorEnd + uIsHighlighted * uHighlightColorOffset, vec4(0.0), vec4(1.0));
    fragColorEnd = mix(fragColorEnd, vec4(1.0), uRenderEffectMask * fragColorEnd.a * 1000.0);
    gl_FragColor = vec4(fragColorEnd.rgb, fragColorEnd.a * antiAliasFactor);
}
`,Empty:`
void main(void) {
}
`};class Qy{constructor(t,e,i,s,n){if(this.id=t,this.shader=i,this.gl=s,this.info=n,!e||!i)throw new sc(`Could not find ${this.nE()} ${this.oE()} shader source code.`);this.gl.shaderSource(i,e),this.gl.compileShader(i)}get src(){return""}nE(){return this.id.toString()}oE(){return this.gl.getShaderParameter(this.shader,this.gl.SHADER_TYPE)===this.gl.FRAGMENT_SHADER?"fragment":"vertex"}}class Ev extends Qy{constructor(t,e,i,s){super(t,e,i.createShader(i.VERTEX_SHADER),i,s)}}class wv extends Qy{constructor(t,e,i,s){super(t,e,i.createShader(i.FRAGMENT_SHADER),i,s)}}class kv{constructor(t,e,i,s){this.aE=new Map,this.lE=new Map,this.uE=i,this.cE=i.createProgram(),this.dE=`${t.nE()} vertex`,this.fE=`${e.nE()} fragment`,i.attachShader(this.cE,t.shader),i.attachShader(this.cE,e.shader),i.bindAttribLocation(this.cE,0,"aPos"),i.linkProgram(this.cE),i.deleteShader(t.shader),i.deleteShader(e.shader),this.allAttributeNames=t.info.allAttributeNames,this.allUniformNames=Array.from(new Set(t.info.allUniformNames.concat(e.info.allUniformNames)).values()),this.vertexSharedRemovedVariables=t.info.removedVariableNames,this.fragmentSharedRemovedVariables=e.info.removedVariableNames}get vertexShaderSrc(){return""}get fragmentShaderSrc(){return""}AE(t){return qs(0,()=>wg())}gE(t){const e=this.mE(t);if(e===void 0)throw this.AE(`Could not get ${t} uniform from ${this.dE} and ${this.fE} shaders.`);return e}mE(t){const e=this.aE.get(t);if(e)return e;const i=this.uE.getUniformLocation(this.cE,t);return i?(this.aE.set(t,i),i):void 0}yE(t){const e=this.pE(t);if(e===void 0)throw this.AE(`Could not get ${t} attribute from ${this.dE} and ${this.fE} shaders.`);return e}pE(t){const e=this.lE.get(t);if(e||e===0)return e;const i=this.uE.getAttribLocation(this.cE,t);return i>=0?(this.lE.set(t,i),i):void 0}W(){this.uE.deleteProgram(this.cE)}}const Tv=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/,bu=r=>{let t;try{t=X.getComputedStyle(r)}catch{return null}return t};/**
 * stacking-order by Rich Harris
 * https://github.com/Rich-Harris/stacking-order
 *
 * @license MIT
 *
 * Converted to TypeScript and edited to match LCJS requirements.
 */function Cv(r){const t=bu(r);return!!t&&(t.position==="fixed"||!!(t.zIndex!=="auto"&&t.position!=="static"||function(e){const i=bu(Ky(e)),s=i?i.display:"auto";return s==="flex"||s==="inline-flex"}(r))||+t.opacity<1||"transform"in t&&t.transform!=="none"||"webkitTransform"in t&&t.webkitTransform!=="none"||"mixBlendMode"in t&&t.mixBlendMode!=="normal"||"filter"in t&&t.filter!=="none"||"webkitFilter"in t&&t.webkitFilter!=="none"||"isolation"in t&&t.isolation==="isolate"||!!Tv.test(t.willChange)||t.webkitOverflowScrolling==="touch")}function Uf(r){let t=r.length;for(;t--;)if(Cv(r[t]))return r[t];return null}function Gf(r){var t;return r&&Number(((t=bu(r))===null||t===void 0?void 0:t.zIndex)||0)||0}function Of(r){const t=[];for(;r;)t.push(r),r=Ky(r);return t}function Ky(r){var t;return((t=r.parentNode)===null||t===void 0?void 0:t.host)||r.parentNode}class Fv extends gv{constructor(t){if(super(),this.SE=new Map,this.vE=new Map,this.bE=new Map,this.xE=!0,this.ME=null,this._E=null,this.wE=null,this.CE=null,this.kE=0,this.TE=0,this.FE=0,this.IE=!1,this.PE=!0,this.$i=!1,this.DE=oc(`chart-engine-${new Date().getTime()}${Math.trunc(1e6*Math.random()).toString()}`),this.X={x:100,y:100},this.BE=()=>{this.LE&&clearTimeout(this.LE),this.LE=setTimeout(()=>this.Zr(),12)},this.RE=h=>{const a=h.intersectionRatio>0,l=h.target.getAttribute("data-lcjs-engine-id");if(l){const u=this.SE.get(l);if(u){const c=u.EE();u.zE(a),a?this.vE.set(l,u):this.vE.delete(l),c!==a&&u.Ss()}}},this.VE=(h,a,l,u,c)=>{const d=c[0],f=this.gl;if(f.bindFramebuffer(f==null?void 0:f.FRAMEBUFFER,null),f.useProgram(this._E.cE),f.clear(f.COLOR_BUFFER_BIT),d.Gr.getBoundingClientRect()){const g=d.OE();f.viewport(0,0,g.x,g.y),f.activeTexture(f.TEXTURE0),f.bindTexture(f.TEXTURE_2D,d.NE),f.uniform1i(this.kE,0),f.uniformMatrix4fv(this.TE,!1,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),f.bindBuffer(f.ARRAY_BUFFER,this.wE),f.enableVertexAttribArray(0),f.vertexAttribPointer(this.FE,2,f.FLOAT,!1,0,0),f.drawArrays(f.TRIANGLES,0,6),f.bindFramebuffer(f.FRAMEBUFFER,null),d.GE&&(d.GE.clearRect(0,0,d.GE.canvas.width,d.GE.canvas.height),d.GE.drawImage(this.WE,0,this.WE.height-g.y,g.x,g.y,0,0,d.GE.canvas.width,d.GE.canvas.height))}},this.UE=(h,a,l,u,c)=>{const d=this.gl;d.bindFramebuffer(d==null?void 0:d.FRAMEBUFFER,null),d.useProgram(this._E.cE),d.clear(d.COLOR_BUFFER_BIT),c.forEach(f=>{const g=f.Gr.getBoundingClientRect();if(g){const y=g.right-g.left,p=g.bottom-g.top,x=g.left,A=u-g.bottom;d.viewport(x*this.YE-h*this.YE,A*this.YE+a*this.YE,y*this.YE,p*this.YE)}d.activeTexture(d.TEXTURE0),d.bindTexture(d.TEXTURE_2D,f.NE),d.uniform1i(this.kE,0),d.uniformMatrix4fv(this.TE,!1,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),d.bindBuffer(d.ARRAY_BUFFER,this.wE),d.enableVertexAttribArray(0),d.vertexAttribPointer(this.FE,2,d.FLOAT,!1,0,0),d.drawArrays(d.TRIANGLES,0,6)}),d.bindFramebuffer(d.FRAMEBUFFER,null)},this.HE=(h,a,l,u,c)=>{const d=c[0],f=this.gl2.ctx;f.bindFramebuffer(f.DRAW_FRAMEBUFFER,null),f.clear(f.COLOR_BUFFER_BIT);const g=d.OE();f.bindFramebuffer(f.READ_FRAMEBUFFER,d.$E[1]),f.blitFramebuffer(0,0,g.x,g.y,0,this.WE.height-g.y,g.x,this.WE.height,f.COLOR_BUFFER_BIT,f.LINEAR),d.GE&&(d.GE.clearRect(0,0,d.GE.canvas.width,d.GE.canvas.height),d.GE.drawImage(this.WE,0,0)),f.bindFramebuffer(f.FRAMEBUFFER,null)},this.XE=(h,a,l,u,c)=>{const d=this.gl2.ctx;d.bindFramebuffer(d.DRAW_FRAMEBUFFER,null),d.clear(d.COLOR_BUFFER_BIT),c.forEach(f=>{const g=f.Gr.getBoundingClientRect();if(g){const y=g.right-g.left,p=g.bottom-g.top,x=g.left,A=u-g.bottom,v=f.OE();d.bindFramebuffer(d.READ_FRAMEBUFFER,f.$E[1]),d.blitFramebuffer(0,0,v.x,v.y,x*this.YE-h*this.YE,A*this.YE+a*this.YE,(x-h+y)*this.YE,(A+a+p)*this.YE,d.COLOR_BUFFER_BIT,d.LINEAR)}}),d.bindFramebuffer(d.FRAMEBUFFER,null)},this.LE=void 0,this.Un=t,!X.requestAnimationFrame||!X.cancelAnimationFrame)throw new Error("LightningChart JS depends on requestAnimationFrame. Make sure to load a polyfill in older browsers.");let e=1;if(t&&t.jE)e=t.jE===!0?X.devicePixelRatio||1:t.jE||1;else{const h=X.document.head.querySelector('meta[name="viewport"]');h&&h.content.includes("width=device-width")&&(e=X.devicePixelRatio||1)}this.YE=e,t.Hn=t.Hn===!0,this.PE=t.ZE!==!1,this.QE=t.JE!==!1,this.KE=t.KE||!1;let i=!1;if(t.WE)if(typeof t.WE=="string"){const h=X.document.getElementById(t.WE);if(!h)throw new Error(`Canvas "${t.WE}" doesn't exist.`);this.WE=h,i=!0}else this.WE=t.WE,i=!0;else this.WE=X.document.createElement("canvas");const s={preserveDrawingBuffer:!0,alpha:!0,antialias:!1};if(t.qE!==2&&t.qE){const h=this.WE.getContext("webgl",{...s,antialias:!!t.ZE})||this.WE.getContext("experimental-webgl",{...s,antialias:!!t.ZE});this.gl=h,this.tz=!1}else{const h=this.WE.getContext("webgl2",s);this.gl2={ctx:h},this.gl=h,this.tz=!0}if(!this.gl)throw new Le("No WebGL context available."+(t!=null&&t.qE?`
Selected explicit target: WebGL ${t.qE}`:""));const n=[];if(this.iz={WEBGL_lose_context:this.gl.getExtension("WEBGL_lose_context")},Object.keys(this.iz).forEach(h=>{this.iz[h]===null&&n.push(h)}),this.tz)this.sz=!0;else{const h={ANGLE_instanced_arrays:this.gl.getExtension("ANGLE_instanced_arrays"),EXT_blend_minmax:this.gl.getExtension("EXT_blend_minmax"),OES_element_index_uint:this.gl.getExtension("OES_element_index_uint"),OES_standard_derivatives:this.gl.getExtension("OES_standard_derivatives"),OES_vertex_array_object:this.gl.getExtension("OES_vertex_array_object")};h.OES_standard_derivatives||(this.xE=!1),Object.keys(h).forEach(l=>{h[l]===null&&n.push(l)});const a={OES_texture_float:this.gl.getExtension("OES_texture_float")};this.sz=!!a.OES_texture_float,this.gl1={ctx:this.gl,iz:h,optional:a}}const o=n;if(o.length>0&&t.Hn!==!1){const h=X.document.createElement("div");h.innerText="LightningChart JS: Some features might not work properly, due to missing WebGL features.",h.style.cssText="position:absolute;top:0;background:red;width:100%;padding:10px;text-align:center;color:white;z-index:1;";const a=X.document.createElement("button");a.innerText="X",a.addEventListener("click",()=>{h.parentElement&&h.parentElement.removeChild(h)}),X.document.body.appendChild(h),h.appendChild(a),X.console.warn("LightningChart JS - Following WebGL extensions could not be loaded:",o.join(", "))}if(this.ez=this.KE?this.hz(this.tz?this.HE.bind(this):this.VE.bind(this)).bind(this):this.rz(this.tz?this.XE.bind(this):this.UE.bind(this)).bind(this),X.ResizeObserver){const h=a=>{for(const l of a)l.target===this.WE&&this.nz()};this.Zn=new X.ResizeObserver(h.bind(this)),this.Zn.observe(this.WE)}if(this.oz=((h,a)=>{const l=h,u=new Map,c=new Map,d=new Map,f={totalMs:0,vertexShaders:0,fragmentShaders:0,programs:0},g=(y,p,x=[])=>{const A=[],v=[],w={allAttributeNames:Array.from(y.matchAll(/attribute\s[^\s]*\s(.*);/g)).map(E=>E[1]),allUniformNames:Array.from(y.matchAll(/uniform\s[^\s]*\s(.*);/g)).map(E=>E[1]),allVaryingNames:Array.from(y.matchAll(/varying\s[^\s]*\s(.*);/g)).map(E=>E[1]),removedVariableNames:[]};if(a){const E=y.match(/#extension.*/g);E&&v.push(...E),y=y.replace(/#extension.*/g,"")}else if(A.push("#version 300 es"),(y=(y=(y=y.replace(/#extension.*/g,"")).replace(/attribute/g,"in")).replace(/texture2D/g,"texture")).includes("usampler2D")&&A.push("precision highp usampler2D;"),p==="vertex")y=y.replace(/varying/g,"out");else{y=y.replace(/varying/g,"in");const E=x.find(C=>C.type==="fragOutput");y=(y=E?`out ${E.fragOutput} fragOutput;
${y}`:`out vec4 fragOutput;
${y}`).replace(/gl_FragColor/g,"fragOutput")}return v&&A.push(...v),A.push("precision highp float;"),A.push("precision highp int;"),{source:y=`${A.join(`
`)}
${y}`,info:w}};return(...y)=>{const p=a?"webgl1":"webgl2";let x,A,v,w,E,C,k,F,m;try{const S=X.performance.now();x=y.filter(V=>V!==!1&&V!==void 0),A=((V,B)=>{const I=V.map(mt=>mt.apply(V,B)),L=I.map(mt=>mt.idVertex).filter(mt=>mt!==void 0).sort().join(" "),U=I.map(mt=>mt.idFragment).filter(mt=>mt!==void 0).sort().join(" "),Y=`vert: ${L} frag: ${U}`;let O,j=!1,$=!1;const Z=[];let Q;const ct=[],et=[];if(I.forEach(mt=>{if(mt.defaultVertexShader&&(j||(O=mt.defaultVertexShader)),mt.vertexShader){if(O&&j&&O!==mt.vertexShader)throw new aa(`Conflicting vertex shader templates ${O} vs ${mt.vertexShader}`,Y,mt);O=mt.vertexShader,j=!0}if(mt.vertexShaderModifiers)for(const xt of mt.vertexShaderModifiers)xt!==void 0&&xt!==!1&&Z.push(xt);if(mt.defaultFragmentShader&&($||(Q=mt.defaultFragmentShader)),mt.fragmentShader){if(Q&&$&&Q!==mt.fragmentShader)throw new aa(`Conflicting fragment shader templates ${Q} vs ${mt.fragmentShader}`,Y,mt);Q=mt.fragmentShader,$=!0}if(mt.fragmentShaderModifiers)for(const xt of mt.fragmentShaderModifiers)xt!==void 0&&xt!==!1&&ct.push(xt);mt.hints&&mt.hints.forEach(xt=>{xt&&et.push(xt)})}),!O)throw new aa("No vertex shader template defined",Y);if(!Q)throw new aa("Fragment shader not defined",Y);return{id:Y,vertexShader:{id:L,template:O,modifiers:Z},fragmentShader:{id:U,template:Q,modifiers:ct},hints:et}})(x,p);const b=d.get(A.id);if(v="new",b)return v="existing",C=b.vertexShaderSrc,k=b.fragmentShaderSrc,b;const M=A.vertexShader.id;let R=u.get(M);if(R)C=R.src,w="existing";else{w="new";const V=new _f(A.vertexShader.modifiers).build(Mv[A.vertexShader.template]),{source:B,info:I}=g(V,"vertex");C=B,F=I,R=new Ev(M,B,l,I),u.set(M,R),f.vertexShaders+=1}const T=A.fragmentShader;let z;const P=T.id;if(z=c.get(P),z)k=z.src,E="existing";else{E="new";const V=Rv[T.template],B=new _f([...T.modifiers]).build(V),{source:I,info:L}=g(B,"fragment",A.hints);k=I,m=L,z=new wv(P,I,l,L),c.set(P,z),f.fragmentShaders+=1}const _=new kv(R,z,l,A);return d.set(A.id,_),f.programs+=1,f.totalMs+=X.performance.now()-S,_}catch{throw qs(0,()=>{const b=`Unexpected LightningChart JS rendering error.
This can mean a bug in the library, or that it is simply used in unsupported manner (passing wrong type to method, using disposed component, etc).`;return X.alert(b),new Error(b)})}}})(this.gl,!this.tz),this.KR=(()=>{const h=X.document.createElement("canvas"),a=h.getContext("2d",{willReadFrequently:!0});if(!a)throw new Le("Failed to get Text canvas rendering context");return a.fillStyle="#fff",(l,u,c,d)=>{const f=`${u.style} ${u.weight} ${u.size*c}px ${u.family}`;a.font=f,a.textBaseline="alphabetic",a.textAlign="left";const g=a.measureText(l);if(g.width===0)return;const y=g.actualBoundingBoxLeft!==void 0&&g.actualBoundingBoxRight!==void 0?Math.ceil(g.actualBoundingBoxLeft+g.actualBoundingBoxRight):Math.ceil(g.width),p=g.width,x=Math.round(u.size*c),A=g.actualBoundingBoxLeft!==void 0?g.actualBoundingBoxLeft:0;h.width=y>0?y:p,h.height=2*x,a.font=f,a.textBaseline="alphabetic",a.textAlign="left",d?(a.clearRect(0,0,h.width,h.height),a.fillStyle="#fff"):(a.fillStyle="rgba(255,255,255,0)",a.fillRect(0,0,h.width,h.height),a.fillStyle="#000"),a.fillText(l,A,x);const v=a.getImageData(0,0,h.width,h.height);let w=0,E=0;const C=v.width;for(let b=0;b<v.height;b+=1){for(let M=0;M<C;M+=1)if(v.data[b*C*4+4*M+3]!==0){w=b;break}if(w!==0)break}for(let b=v.height-1;b>=0;b-=1){for(let M=0;M<C;M+=1)if(v.data[b*C*4+4*M+3]!==0){E=b;break}if(E!==0)break}const k=a.canvas.height/2-w,F=E-w+1,m=C,S=new Uint8ClampedArray(m*F*1);for(let b=0;b<F;b+=1)for(let M=0;M<m;M+=1)S[1*b*m+1*M+0]=v.data[(b+w)*m*4+4*M+3];return[S,{advance:p,offsetX:A,baseline:k,glyph:l,size:N(m,F)}]}})(),t.az||(this.KE?this.WE.style.display="none":(this.WE.style.position="absolute",this.WE.style.top="0",this.WE.style.left="0",this.WE.style.right="0",this.WE.style.bottom="0",this.WE.style.width="100%",this.WE.style.height="100%",this.WE.style.boxSizing="content-box",this.WE.style.display="block",this.WE.style.pointerEvents="none")),this.WE.classList.add("lcjs-canvas"),t.lz&&this.WE.setAttribute("data-lcjs-id",t.lz),i||X.document.body.appendChild(this.WE),X.IntersectionObserver&&(this.uz=new X.IntersectionObserver(h=>{for(let a=0;a<h.length;a+=1){const l=h[a];this.RE(l)}},{threshold:Array.from(Array(100)).map((h,a)=>a/100)})),X.addEventListener("resize",this.BE,{passive:!0}),!this.tz){if(this._E=this.oz(G["2DCompose"],G.Color({dataType:"texture-coord-calc-gpu"}),G.VertexLocation({axisWorldTranslation:"matrix4",normalSource:void 0,coordType:"vec4"})),!this._E.cE)throw new Le("Unable to setup composition shader!");const h=this.gl,a=h.getUniformLocation(this._E.cE,"uColorTexture");if(!a)throw new Le("Unable to setup composition shader! Failed to find uColorTexture");const l=h.getUniformLocation(this._E.cE,"uMatrix");if(!l)throw new Le("Unable to setup composition shader! Failed to find uMatrix");this.kE=a,this.TE=l,this.FE=h.getAttribLocation(this._E.cE,"aPos"),this.wE=h.createBuffer(),h.bindBuffer(h.ARRAY_BUFFER,this.wE),h.bufferData(h.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),h.STATIC_DRAW),h.bindBuffer(h.ARRAY_BUFFER,null),this.CE=h.createBuffer(),h.bindBuffer(h.ARRAY_BUFFER,this.CE),h.bufferData(h.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,1,0,0,1,1,1]),h.STATIC_DRAW),h.bindBuffer(h.ARRAY_BUFFER,null)}}hz(t){return e=>{this.ME=null;const i=this.gl.canvas,s=Array.from(this.vE.values());this.IE=!1,s.forEach(n=>{const o=n.OE();(this.X.x<o.x||this.X.y<o.y)&&(this.X.x=Math.max(this.X.x,o.x),this.X.y=Math.max(this.X.y,o.y),i instanceof HTMLCanvasElement&&(i.width=this.X.x,i.height=this.X.y)),n.hn&&n.cz(e),t(0,0,0,0,[n])}),this.IE&&this.nz()}}rz(t){return e=>{this.ME=null,"style"in this.gl.canvas&&!this.Un.dz&&(this.gl.canvas.style.transform=`translateX(${window.scrollX}px) translateY(${window.scrollY}px)`);const i=this.gl.canvas,s=this.WE.clientHeight,n=this.WE.clientWidth;let o=0,h=0;if(i instanceof HTMLCanvasElement){i.width===n*this.YE&&i.height===s*this.YE||(i.width=n*this.YE,i.height=s*this.YE);const l=i.getBoundingClientRect();o=l.x,h=l.y}const a=Array.from(this.vE.values());this.IE=!1,a.sort((l,u)=>l.fz()-u.fz()).forEach(l=>{l.hn&&l.cz(e)}),t(o,h,n,s,a),this.IE&&this.nz()}}nz(t){return!this.IE&&t&&(this.IE=!0),this.ME||this.$i||(this.ME=X.requestAnimationFrame(this.ez)),this}Az(t){const e=this.DE();return t.Gr.setAttribute("data-lcjs-engine-id",e),this.SE.set(e,t),t.gz(this.SE.size-1),t.zE(!0),this.vE.set(e,t),this.uz&&this.uz.observe(t.Gr),this.LE&&clearTimeout(this.LE),this.LE=setTimeout(()=>this.Zr(),0),this}mz(t){const e=t.Gr.getAttribute("data-lcjs-engine-id");return e?(this.SE.delete(e),this.vE.delete(e),this.uz&&this.uz.unobserve(t.Gr),t.Gr.removeAttribute("data-lcjs-engine-id"),this):this}Zr(){if(this.uz){const t=this.uz.takeRecords();for(let e=0;e<t.length;e+=1){const i=t[e];this.RE(i)}}return!this.KE&&this.QE&&Array.from(this.SE.values()).sort((t,e)=>function(i,s){if(i===s)throw new Error("Cannot compare node with itself");const n={a:Of(i),b:Of(s)};let o;for(;n.a[n.a.length-1]===n.b[n.b.length-1];)i=n.a.pop(),s=n.b.pop(),o=i;const h=Gf(Uf(n.a)),a=Gf(Uf(n.b));if(h===a&&o){const l=o.childNodes,u={a:n.a[n.a.length-1],b:n.b[n.b.length-1]};let c=l.length;for(;c--;){const d=l[c];if(d===u.a)return 1;if(d===u.b)return-1}}return Math.sign(h-a)}(t.Gr,e.Gr)).forEach((t,e)=>t.gz(e)),this.nz(!0),this}dP(){return this.nz(),this}yz(){this.$i||this.SE.forEach(t=>t.hm.layout())}W(){var t;if(this.$i)return;this.$i=!0,super.W(),this.ME&&(X.cancelAnimationFrame(this.ME),this.ME=null),this.IE=!1,this.Zn&&(this.Zn.disconnect(),this.Zn=void 0),this.uz&&(this.uz.disconnect(),this.uz=void 0),X.removeEventListener("resize",this.BE),this.BE=void 0,this.SE.forEach(i=>{i.W()}),this.SE.clear(),Array.from(this.bE.values()).forEach(i=>{i.VR(!0)}),this.bE.clear();const e=this.gl;e.deleteBuffer(this.wE),e.deleteBuffer(this.CE),this.WE&&!this.Un.WE?(this.WE.width=1,this.WE.height=1,(t=this.WE.parentElement)===null||t===void 0||t.removeChild(this.WE),this.WE=void 0):this.WE=void 0,this.oz=void 0,this.KR=void 0,this.ez=()=>{},this.iz.WEBGL_lose_context&&this.iz.WEBGL_lose_context.loseContext()}}const Dv=(r,t,e,i)=>s=>{const n={theme:Ki,...e,...s},o=r(n),h=t||i?ts(o,i):void 0,a=new Jy(o.Un,s,o,o.W.bind(o),h);return o.uo(l=>a.zL(l)).lo(()=>a.j()).Ss(),a},ps=(r,t)=>{r.uo(e=>{t.Te(e)}).lo(()=>t.j()).Ss()},Pv=(r,t,e,i)=>s=>{const n={...e,...s,theme:(s==null?void 0:s.theme)||Ki},o=r(n),h=t||i?ts(o,i):void 0,a=new bc(o.Un,Qi(o,1).DI(0),ui,o.W.bind(o),h);return ps(o,a),a},Iv=(r,t,e,i)=>s=>{const n={...e,...s,theme:(s==null?void 0:s.theme)||Ki},o=r(n),h=t||i?ts(o,i):void 0,a=new Ic(o.Un,Qi(o,1).DI(0),ui,o.W.bind(o),h,s);return ps(o,a),a},Vv=(r,t,e,i)=>s=>{const n={...e,...s,theme:(s==null?void 0:s.theme)||Ki},o=r(n),h=t||i?ts(o,i):void 0,a=new Hy(o.Un,Qi(o,1).DI(0),ui,o.W.bind(o),h,s);return ps(o,a),a},_v=(r,t,e,i)=>s=>{const n={...e,...s,theme:(s==null?void 0:s.theme)||Ki},o=r(n),h=t||i?ts(o,i):void 0,a=new Gy(o.Un,Qi(o,1).DI(0),ui,o.W.bind(o),h,s);return ps(o,a),a},Nv=(r,t,e,i)=>s=>{const n={...e,...s,theme:(s==null?void 0:s.theme)||Ki},o=r(n),h=t||i?ts(o,i):void 0,a=new(s&&s.type?s.type:Ry)(o.Un,Qi(o,1).DI(0),ui,o.W.bind(o),h,void 0,s);return ps(o,a),a},Lv=(r,t,e,i)=>s=>{const n={...e,...s,theme:(s==null?void 0:s.theme)||Ki},o=r(n),h=t||i?ts(o,i):void 0,a=new(s&&s.type?s.type:Yy)(o.Un,Qi(o,1).DI(0),ui,o.W.bind(o),h,void 0,(s==null?void 0:s.disableAnimations)!==!0&&(s==null?void 0:s.animationsEnabled)!==!1);return ps(o,a),a},zv=(r,t,e,i)=>s=>{const n={...e,...s,theme:(s==null?void 0:s.theme)||Ki},o=r(n),h=t||i?ts(o,i):void 0,a=new(s&&s.type?s.type:Oy)(o.Un,Qi(o,1).DI(0),ui,o.W.bind(o),h,void 0,s);return ps(o,a),a},Bv=(r,t,e,i)=>s=>{const n={...e,...s,theme:(s==null?void 0:s.theme)||Ki},o=r(n),h=t||i?ts(o,i):void 0,a=new(s&&s.type?s.type:Wy)(o.Un,Qi(o,1).DI(0),ui,o.W.bind(o),h,void 0,s);return ps(o,a),a},Uv=(r,t,e,i)=>s=>{const n={...e,...s,theme:(s==null?void 0:s.theme)||Ki},o=r(n),h=t||i?ts(o,i):void 0,a=new wy(o.Un,Qi(o,1).DI(0),ui,o.W.bind(o),h,s,void 0);return ps(o,a),a},Gv=(r,t,e,i)=>s=>{const n={...e,...s,theme:(s==null?void 0:s.theme)||Ki},o=r(n),h=t||i?ts(o,i):void 0,a=new Cc(o.Un,Qi(o,1).DI(0),ui,o.W.bind(o),h,void 0,s);return ps(o,a),a},Ov=(r,t,e,i)=>s=>{const n={...e,...s,theme:(s==null?void 0:s.theme)||Ki},o=r(n),h=t||i?ts(o,i):void 0,a=new jy(o.Un,Qi(o,1).DI(0),ui,o.W.bind(o),h,void 0);return ps(o,a),a},Yv=(r,t,e,i)=>s=>{const n={...e,...s,theme:(s==null?void 0:s.theme)||Ki},o=r(n),h=t||i?ts(o,i):void 0,a=new qy(o.Un,Qi(o,1).DI(0),ui,o.W.bind(o),h,void 0,s);return ps(o,a),a},Wv=(r,t,e,i)=>s=>{const n={...e,...s,theme:(s==null?void 0:s.theme)||Ki},o=r(n),h=t||i?ts(o,i):void 0,a=new Uy(o.Un,Qi(o,1).DI(0),ui,o.W.bind(o),h,s);return ps(o,a),a},Hv=(r,t,e,i)=>s=>{const n={...e,...s,theme:(s==null?void 0:s.theme)||Ki},o=r(n),h=t||i?ts(o,i):void 0,a=new hv(o.Un,Qi(o,1).DI(0),ui,o.W.bind(o),h,s);return ps(o,a),a};function qi(r,t,e,i,s,n){let o=t.x.ct(r.max.x),h=t.x.ct(r.min.x),a=t.y.ct(r.max.y),l=t.y.ct(r.min.y),u=o-h,c=a-l;if(u<1){const k=(h+o)/2;h=k-.5,o=k+.5,u=1}if(c<1){const k=(l+a)/2;l=k-.5,a=k+.5,c=1}const d=u/c,f=u*e.x,g=c*e.y,y=u-f,p=c-g,x=f>y?[y,f]:[f,y],A=g>p?[p,g]:[g,p];let v,w,E=1,C=1;switch(i){default:case Mi.closestSide:if(v=x[0]/u,w=A[0]/c,s===bi.circle){const k=Math.min(v*d,w);E=k,C=k}else E=v*d,C=w;break;case Mi.farthestSide:if(v=x[1]/u,w=A[1]/c,s===bi.circle){const k=Math.max(v*d,w);E=k,C=k}else E=v*d,C=w;break;case Mi.closestCorner:if(w=A[0]/c,s===bi.circle){v=x[0]/u*d;const k=Math.sqrt(v*v+w*w);E=k,C=k}else{v=x[0]/u;const k=Math.sqrt(v*v+w*w);E=k*d,C=k}break;case Mi.farthestCorner:if(w=A[1]/c,s===bi.circle){v=x[1]/u*d;const k=Math.sqrt(v*v+w*w);E=k,C=k}else{v=x[1]/u;const k=Math.sqrt(v*v+w*w);E=k*d,C=k}}return{bounds:[h*n,l*n,u*n,c*n],center:[e.x*d,e.y],distance:[Math.max(E,1e-4),Math.max(C,1e-4)],aspectRatio:d}}function Ji(r,t,e,i){const s=t.x.ct(r.max.x),n=t.x.ct(r.min.x),o=t.y.ct(r.max.y),h=t.y.ct(r.min.y),a=s-n,l=o-h,u=Math.abs(a*Math.sin(e))+Math.abs(l*Math.cos(e)),c=N(a/2-Math.sin(e)*(u/2),l/2-Math.cos(e)*(u/2)),d=N(a/2+Math.sin(e)*(u/2),l/2+Math.cos(e)*(u/2));return{bounds:[n*i,h*i,a*i,l*i],startPoint:[c.x*i,c.y*i],endPoint:[d.x*i,d.y*i]}}class _o{constructor(t){this.RR=t}}class Xv{constructor(){this.pz=new Array,this.Sz=t=>(this.pz.push(t),t),this.vz=this.Sz(new Map),this.bz=this.Sz(new Map),this.xz=this.Sz(new Map),this.Mz=this.Sz(new Map),this._z=this.Sz(new Map),this.wz=this.Sz(new Map),this.Cz=this.Sz(new Map)}kz(){this.pz.forEach(t=>{t.forEach(e=>e.kz()),t.clear()})}}const ca=(r,t,e)=>()=>{r.Tz=t,e&&e()},ml=(r,t,e,i,s)=>{const n=Math.min(e/r,i/t),o=r*n,h=t*n,a=e/o,l=i/h,u=o/e,c=h/i;let d=0,f=1,g=0,y=1;switch(s){case Ze.Fill:l<a?(d=0,f=1,g=.5+-u/2,y=.5+u/2):(g=0,y=1,d=.5+-c/2,f=.5+c/2);break;case Ze.Fit:l<a?(g=0,y=1,d=.5+-a/2,f=.5+a/2):(d=0,f=1,g=.5+-l/2,y=.5+l/2);break;case Ze.Center:{const p=e/r,x=i/t;d=.5+-p/2,f=.5+p/2,g=.5+-x/2,y=.5+x/2}break;case Ze.Tile:d=0,f=e/r,g=0,y=i/t;break;case Ze.Stretch:default:d=0,f=1,g=0,y=1}return new Float32Array([d,y,f,y,f,g,d,g])};class $v{constructor(t,e){if(this.Fz=0,this.Iz=0,this.Pz=!1,this.Tz=!1,this.Dz=!1,this.Bz=!1,this.Lz=!1,this.Rz=new Set,this.Ez=new Set,this.rc=e,this.uE=t,this.zz=null,this.Pz=e instanceof X.HTMLVideoElement,this.rc instanceof X.HTMLImageElement)this.rc.addEventListener("load",()=>{this.Bz=!0,this.Vz()}),this.rc.addEventListener("error",()=>{this.Lz=!0}),this.rc.complete&&(this.Bz=!0,this.Vz());else if(this.rc instanceof X.HTMLVideoElement){const i=this;this.rc.addEventListener("canplay",function(){i.Iz=this.videoHeight,i.Fz=this.videoWidth,i.Bz=!0,i.Vz()},!0),this.rc.addEventListener("play",ca(this,!0,()=>this.Vz())),this.rc.addEventListener("playing",ca(this,!0,()=>this.Vz())),this.rc.addEventListener("pause",ca(this,!1)),this.rc.addEventListener("ended",ca(this,!1)),this.rc.readyState>=1&&(this.Fz=this.rc.videoWidth,this.Iz=this.rc.videoHeight,this.Tz=!this.rc.paused,this.Bz=!0,this.Vz())}else this.Bz=!0,this.Vz()}jR(t){this.Ez.size===0&&this.Bz&&this.Vz(),this.Ez.add(t)}ZR(t){this.Ez.delete(t),this.Ez.size===0&&this.unbindResources()}Oz(t){this.Rz.add(t),this.Dz&&(t(),this.Nz(t))}Nz(t){this.Rz.delete(t)}Vz(){if(this.Lz||this.Dz||!this.Bz)return;const t=this.uE.gl;if(!this.zz&&this.rc&&t){this.zz=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.zz),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);const e=0,i=t.RGBA,s=t.RGBA,n=t.UNSIGNED_BYTE,o=this.rc,h=this.Fz>0?this.Fz:o.width,a=this.Iz>0?this.Iz:o.height;t.texImage2D(t.TEXTURE_2D,e,i,s,n,o),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),this.Fz=h,this.Iz=a,t.bindTexture(t.TEXTURE_2D,null)}this.Dz=!0,this.Rz&&this.Rz.forEach(e=>{e(),this.Nz(e)})}Ps(){const t=this.uE.gl;if(!this.Lz&&this.Dz&&this.zz){const i=t.RGBA,s=t.RGBA,n=t.UNSIGNED_BYTE,o=this.rc;o&&(t.bindTexture(t.TEXTURE_2D,this.zz),t.texImage2D(t.TEXTURE_2D,0,i,s,n,o))}}Gz(){return this.zz}unbindResources(){return this.Dz&&(this.zz&&(this.uE.OR(this.zz),this.zz=null),this.Dz=!1),this}}class Mu extends $g{constructor(t,e,i){super(t.us,e,i),this.iS=!0,this.jp={},this.qp=vt(Co),this.ks=t,this.dt=t.dt}Wz(){var t;return this.qp.i&&this.qp.M().type!==((t=this.Uz)===null||t===void 0?void 0:t.type)}nS(t){return this.iS=t,this}Yz(t){return this.jp=t,this}}const jv=(r,t,e,i)=>{const s=r.$z(),n=Math.round(Math.min(e.spread,10)*s),o=Math.round(Math.min(e.blur,10)*s),h={x:Math.round(e.offset.x*s),y:Math.round(e.offset.y*s)},a=r.Xz(),l=r.jz(),u=r.Zz(),c=r.Qz(),d=r.Jz();r.Kz("disabled"),r.nS(!1),r.qz(!1);const f=t.tV(),g=n+o/2;((E,C,k,F)=>{const m=E.gl,S=E.$z(),b=E.iV();E.sV(m.FRAMEBUFFER,F.frameBuffer),m.bindRenderbuffer(m.RENDERBUFFER,F.depthBuffer),m.bindTexture(m.TEXTURE_2D,F.texture),m.clearDepth(1),m.clearColor(0,0,0,0),m.clear(m.COLOR_BUFFER_BIT|m.DEPTH_BUFFER_BIT);const M=F.sizeDpr;E.eV(0,0,M.x,M.y),C.forEach(R=>{let T;if(R instanceof Ea?T=R.ks.km():R instanceof Mu&&(T=R.ks.Kv()),T){const z=T.x+k.left,P=T.y+k.bottom,_=Math.max(T.width-(k.left+k.right),0),V=Math.max(T.height-(k.bottom+k.top),0);E.hV(z*S,P*S,_*S,V*S)}else E.qz(!1);R.zL(2)}),E.sV(m.FRAMEBUFFER,b),m.bindRenderbuffer(m.RENDERBUFFER,null),m.bindTexture(m.TEXTURE_2D,null),E.qz(!1)})(r,i,{left:g+(h.x<0?-h.x:0),top:g+(h.y>0?h.y:0),right:g+(h.x>0?h.x:0),bottom:g+(h.y<0?-h.y:0)},f);let y=f;const p=n+o+5,x=((E,C,k,F)=>{const m=(R=>{const T=[];for(let z=0;z<R.length;z+=1){let P,_=R[z];do{const V=T.findIndex(B=>va(_,B));P=V>=0?T[V]:void 0,P&&(T.splice(V,1),_=Bi(_,P))}while(P);T.push(_)}return T})(C.map(R=>{const T=R instanceof Ea||R instanceof Mu?R.ks.rV(R):Kt;if(lu(T))return Kt;const z={min:{x:Math.max(T.min.x-k.left,0),y:Math.max(T.min.y-k.bottom,0)},max:{x:Math.min(T.max.x+k.right,F.x),y:Math.min(T.max.y+k.top,F.y)}};return z.max.x<=z.min.x||z.max.y<=z.min.y?Kt:z}).filter(R=>!lu(R))),S=6*m.length,b=new Float32Array(4*S);let M=0;return m.forEach(R=>{const T=Zo(R.min,F),z=Zo(R.max,F),P=T,_=z;b[M+0]=T.x,b[M+1]=T.y,b[M+2]=P.x,b[M+3]=P.y,b[M+4]=z.x,b[M+5]=T.y,b[M+6]=_.x,b[M+7]=P.y,b[M+8]=z.x,b[M+9]=z.y,b[M+10]=_.x,b[M+11]=_.y,b[M+12]=z.x,b[M+13]=z.y,b[M+14]=_.x,b[M+15]=_.y,b[M+16]=T.x,b[M+17]=z.y,b[M+18]=P.x,b[M+19]=_.y,b[M+20]=T.x,b[M+21]=T.y,b[M+22]=P.x,b[M+23]=P.y,M+=24}),{vertexBuffer:E.nV(b),vertexCount:S}})(r,i,{left:p+(h.x<0?-h.x:0),top:p+(h.y>0?h.y:0),right:p+(h.x>0?h.x:0),bottom:p+(h.y<0?-h.y:0)},t.oV()),A=t.tV(f,y),v=r.oz(G["2D"],G.Glow1D({spreadPx:n,blurPx:o,firstPass:!0}),G.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:"linear",normalSource:void 0}));((E,C,k,F,m,S)=>{const b=E.gl,M=E.iV();E.sV(b.FRAMEBUFFER,k.frameBuffer),b.bindRenderbuffer(b.RENDERBUFFER,k.depthBuffer),b.bindTexture(b.TEXTURE_2D,k.texture),b.clearDepth(1),b.clearColor(0,0,0,0),b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT),E.eV(0,0,k.sizeDpr.x,k.sizeDpr.y),E.aV(F,(R,T,z,P)=>(E.jR(F),S&&S(R),E.dV(R("uIsHighlighted"),0).AR(R("uHighlightColorOffset"),vn).dV(R("uRenderEffectMask"),0).cV(R("uTexture"),C.texture,0).uV(P("uTextureSize"),[C.sizeDpr.x,C.sizeDpr.y]).uV(R("uScale"),k.uniforms.fV()).uV(R("uDisp"),k.uniforms.AV()).uV(R("uScaling"),[k.size.x,k.size.y]).uV(R("uTranslationAxis"),[0,0]).lV(m.vertexBuffer,void 0,{location:T("aPos"),size:2},{location:T("aTextureCoord"),size:2}).Ky(b.TRIANGLES,m.vertexCount,0),!0)),E.sV(b.FRAMEBUFFER,M),b.bindRenderbuffer(b.RENDERBUFFER,null),b.bindTexture(b.TEXTURE_2D,null)})(r,y,A,v,x,(E,C,k,F)=>(r.uV(E("uOffsetPx"),[h.x,h.y]),!0)),y=A,r.qz(l),r.gV(d);const w=r.oz(G["2D"],G.Glow1D({spreadPx:n,blurPx:o,firstPass:!1}),G.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:"linear",normalSource:void 0}));((E,C,k,F,m)=>{const S=E.gl,b={x:E.us.oi().x,y:E.us.oi().y};E.eV(0,0,b.x*E.$z(),b.y*E.$z());const M=ui.d2({scaleXYConstructor:Gt}).q(b).Vi(0,b.x).Oi(0,b.y),R=new es;R.mV(M),E.aV(k,(T,z,P,_)=>(E.jR(k),m&&m(T),E.dV(T("uIsHighlighted"),0).AR(T("uHighlightColorOffset"),vn).dV(T("uRenderEffectMask"),0).cV(T("uTexture"),C.texture,0).uV(_("uTextureSize"),[C.sizeDpr.x,C.sizeDpr.y]).uV(T("uScale"),R.fV()).uV(T("uDisp"),R.AV()).uV(T("uScaling"),[b.x,b.y]).uV(T("uTranslationAxis"),[0,0]).lV(F.vertexBuffer,void 0,{location:z("aPos"),size:2},{location:z("aTextureCoord"),size:2}).Ky(S.TRIANGLES,F.vertexCount,0),!0))})(r,f,w,x,(E,C,k,F)=>(r.cV(E("uTextureFirstGlowPass"),A.texture,1).AR(E("uGlowColor"),e.color),!0)),r.eV(a.x,a.y,a.width,a.height),r.Kz(u),r.nS(c),r.yV(x.vertexBuffer)};class qv{constructor(t){this.pV=[],this.RR=t}SV(t,e){jv(this.RR,this,e,t)}oV(){const t=this.RR.us.oi();return{x:Math.ceil(t.x),y:Math.ceil(t.y)}}tV(...t){const e=this.pV,i=this.oV(),s={x:Math.ceil(i.x*this.RR.$z()),y:Math.ceil(i.y*this.RR.$z())},n=this.RR.gl,o=e.find(g=>!t.includes(g));if(o)return o.sizeDpr.x===s.x&&o.sizeDpr.y===s.y||(o.size=i,o.sizeDpr=s,n.bindTexture(n.TEXTURE_2D,o.texture),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,s.x,s.y,0,n.RGBA,n.UNSIGNED_BYTE,null),n.bindRenderbuffer(n.RENDERBUFFER,o.depthBuffer),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,s.x,s.y),n.bindTexture(n.TEXTURE_2D,null),n.bindRenderbuffer(n.RENDERBUFFER,null),o.scale.q(i).Vi(0,i.x).Oi(0,i.y),o.uniforms.mV(o.scale)),o;const h=n.createTexture(),a=this.RR.vV(),l=this.RR.bV();n.bindTexture(n.TEXTURE_2D,h),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,s.x,s.y,0,n.RGBA,n.UNSIGNED_BYTE,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);const u=this.RR.iV();this.RR.sV(n.FRAMEBUFFER,a),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,h,0),n.bindRenderbuffer(n.RENDERBUFFER,l),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,s.x,s.y),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,l),n.bindTexture(n.TEXTURE_2D,null),this.RR.sV(n.FRAMEBUFFER,u),n.bindRenderbuffer(n.RENDERBUFFER,null);const c=ui.d2({scaleXYConstructor:Gt}).q(i).Vi(0,i.x).Oi(0,i.y),d=new es;d.mV(c);const f={size:i,sizeDpr:s,texture:h,frameBuffer:a,depthBuffer:l,scale:c,uniforms:d};return e.push(f),f}W(){[this.pV].forEach(t=>{t.forEach(e=>{this.RR.xV(e.depthBuffer),this.RR.MV(e.frameBuffer),this.RR.OR(e.texture)}),t.length=0})}}class Jv{constructor(t,e,i,s,n=!0){this._V=new Xv,this.wV=new Map,this.CV=new Map,this.kV=[],this.jE=1,this.IS_MACHINE_LITTLE_ENDIAN=(()=>{const o=new Uint32Array([287454020]),h=new Uint8Array(o.buffer);return h[0]===68||h[0]!==17&&(X.console.error("Unidentified machine endianness. Some features might behave unexpectedly."),!0)})(),this.iS=!1,this.uV=(o,[h,a])=>(o===void 0||this.gl.uniform2f(o,h,a),this),this.TV=(o,[h,a])=>(o===void 0||this.gl.uniform2i(o,h,a),this),this.FV=(o,[h,a,l,u])=>(o===void 0||this.gl.uniform4f(o,h,a,l,u),this),this.IV=(o,[h,a,l])=>(o===void 0||this.gl.uniform3f(o,h,a,l),this),this.PV=(o,h)=>(o===void 0||this.gl.uniformMatrix3fv(o,!1,h),this),this.DV=(o,h)=>(o===void 0||this.gl.uniformMatrix4fv(o,!1,h),this),this.AR=(o,h)=>(o===void 0||this.gl.uniform4f(o,h.r,h.g,h.b,h.a),this),this.dV=(o,h)=>(o===void 0||this.gl.uniform1f(o,h),this),this.BV=(o,h)=>(this.gl.uniform1i(o,h),this),this.cV=(o,h,a)=>{if(o===void 0)return this;if(h){const l=this.gl.TEXTURE0+a;return this.gl.activeTexture(l),this.gl.bindTexture(this.gl.TEXTURE_2D,h),this.gl.uniform1i(o,a),this}throw new Le("Could not bind a texture.")},this.LV=o=>(((h,a)=>{a===Ze.Tile?(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.REPEAT),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.REPEAT)):(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE))})(this.gl,o),this),this.nV=(o,h=!1,a,l=Float32Array)=>{const u=o.length,c=this.RV(u,a);if(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,c),this.gl.bufferData(this.gl.ARRAY_BUFFER,o instanceof l?o:new l(o),h?this.gl.DYNAMIC_DRAW:this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),c)return c;throw new Le("Could not create vertex buffer")},this.EV=(o,h,a,l=Float32Array)=>{const u=a||this.gl.createBuffer();if(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,u),h&&h.length===o?this.gl.bufferData(this.gl.ARRAY_BUFFER,h instanceof l?h:new l(h),this.gl.STATIC_DRAW):(this.gl.bufferData(this.gl.ARRAY_BUFFER,new l(o),this.gl.STATIC_DRAW),h&&this.gl.bufferSubData(this.gl.ARRAY_BUFFER,0,h instanceof l?h:new l(h))),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),u)return u;throw new Le("Could not create vertex buffer")},this.zV=(o,h,a,l=Float32Array)=>{this.gl.bindBuffer(this.gl.ARRAY_BUFFER,o),this.gl.bufferSubData(this.gl.ARRAY_BUFFER,h*l.BYTES_PER_ELEMENT,a instanceof l?a:new l(a)),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null)},this.VV=(o,h,a=!1)=>{this.gl.bindBuffer(this.gl.ARRAY_BUFFER,o),this.gl.bufferData(this.gl.ARRAY_BUFFER,h,a?this.gl.DYNAMIC_DRAW:this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null)},this.OV=(o,h)=>{const a=o.length,l=this.RV(a,h);if(this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,l),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,o,this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),l)return l;throw new Le("Could not create index buffer")},this.NV=o=>{const h=this.gl.createBuffer();if(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,h),this.gl.bufferData(this.gl.ARRAY_BUFFER,o instanceof Float32Array?o:new Float32Array(o),this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),h)return h;throw new Le("Could not create float buffer")},this.GV=(o,h)=>(o===void 0||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,h),this.gl.enableVertexAttribArray(o),this.gl.vertexAttribPointer(o,2,this.gl.FLOAT,!1,0,0)),this),this.WV=(o,h)=>(o===void 0||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,h),this.gl.vertexAttribPointer(o,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(o)),this),this.lV=(o,h,...a)=>{this.gl.bindBuffer(this.gl.ARRAY_BUFFER,o);const l=a.length;let u=0;for(let d=0;d<l;d+=1)u+=a[d].size;for(let d=0;d<l;d+=1){const f=a[d].location;f!==void 0&&f>-1&&this.gl.enableVertexAttribArray(f)}let c=0;for(let d=0;d<l;d+=1){const f=a[d];f.location!==void 0&&f.location>-1&&this.gl.vertexAttribPointer(f.location,f.size,this.gl.FLOAT,!1,u*Float32Array.BYTES_PER_ELEMENT,c*Float32Array.BYTES_PER_ELEMENT),c+=f.size}if(h!==void 0)for(let d=0;d<l;d+=1){const f=a[d].location;f!==void 0&&f>-1&&this.UV(f,h)}return this},this.YV=(...o)=>{const h=o.length;for(let a=0;a<h;a+=1){const l=o[a];l!==0&&l>-1&&this.gl.disableVertexAttribArray(l)}return this},this.HV=(o,h)=>(o===void 0||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,h),this.gl.enableVertexAttribArray(o),this.gl.vertexAttribPointer(o,4,this.gl.FLOAT,!1,0,0)),this),this.$V=(o,h,a)=>(o===void 0||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,h),this.gl.vertexAttribPointer(o,1,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(o),a!==void 0&&this.UV(o,a)),this),this.XV=o=>(this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,o),this),this.jV=null,this.Ky=(o,h,a=0)=>(h>0&&this.gl.drawArrays(o,a,h),this),this.ZV=(o,h=this.gl.TRIANGLES,a=0,l=this.gl.UNSIGNED_SHORT)=>(o>0&&this.gl.drawElements(h,o,l,a),this),this.QV=(o,h,a,l)=>{if(l>0&&(this.gl2&&this.gl2.ctx.drawArraysInstanced(o,h,a,l),this.gl1)){if(!this.gl1.iz.ANGLE_instanced_arrays)return X.console.warn(`The browser does not support REQUIRED WebGL 1 extension: ANGLE_instanced_arrays.
This application will NOT work properly!`),this;this.gl1.iz.ANGLE_instanced_arrays.drawArraysInstancedANGLE(o,h,a,l)}return this},this.JV=(o,h,a,l,u=this.gl.UNSIGNED_SHORT)=>{if(l>0&&(this.gl2&&this.gl2.ctx.drawElementsInstanced(o,h,u,a,l),this.gl1)){if(!this.gl1.iz.ANGLE_instanced_arrays)return X.console.warn(`The browser does not support REQUIRED WebGL 1 extension: ANGLE_instanced_arrays.
This application will NOT work properly!`),this;this.gl1.iz.ANGLE_instanced_arrays.drawElementsInstancedANGLE(o,h,u,a,l)}return this},this.UV=(o,h)=>{if(o>-1&&(this.gl2&&this.gl2.ctx.vertexAttribDivisor(o,h),this.gl1)){if(!this.gl1.iz.ANGLE_instanced_arrays)return X.console.warn(`The browser does not support REQUIRED WebGL 1 extension: ANGLE_instanced_arrays.
This application will NOT work properly!`),this;this.gl1.iz.ANGLE_instanced_arrays.vertexAttribDivisorANGLE(o,h)}return this},this.KV=(o,h,a,l=0)=>{const u=this.gl.TEXTURE0+l;this.gl.activeTexture(u);const c=this.iV();this.sV(this.gl.FRAMEBUFFER,h),this.gl.bindTexture(this.gl.TEXTURE_2D,a),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,a,0);const d=this.jz();d&&this.qz(!1),o(),d&&this.qz(!0),this.gl.bindTexture(this.gl.TEXTURE_2D,null),this.sV(this.gl.FRAMEBUFFER,c)},this.Nt=()=>(this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this),this.qV=o=>(this.gl.clearColor(o.r,o.g,o.b,o.a),this),this.jR=o=>(this.gl.useProgram(o.cE),this),this.tO=!1,this.iO=[],this.us=t,this.cA=e,this.us=t,this.gl=i.ctx,this.sO=i.antialias,this.eO=!!this.us.Qr.xE&&i.lineAntialias,this.sz=this.us.Qr.sz,this.hO=new Map,this.gl1=this.us.Qr.gl1,this.gl2=this.us.Qr.gl2,n&&(this.gV(!0),this.rO()),this.iz=this.us.Qr.iz,this.zR=this.gl.getParameter(this.gl.MAX_TEXTURE_SIZE),this.UR=this.nO(),this.oz=this.us.Qr.oz,this.oO=new Kv(this),this.KR=this.us.Qr.KR,this.aO=new qv(this),this.bE=this.us.Qr.bE,this.lO=this.nV([0,0,1,0,1,1,0,1]),this.uO=this.nV([0,0,1,0,0,1,0,1,1,0,1,1])}Kz(t){return t!==this.cO&&(this.cO=t,t==="disabled"?this.gl.disable(this.gl.CULL_FACE):t==="cull-back"?(this.gl.enable(this.gl.CULL_FACE),this.gl.cullFace(this.gl.BACK)):t==="cull-front"&&(this.gl.enable(this.gl.CULL_FACE),this.gl.cullFace(this.gl.FRONT))),this}Zz(){return this.cO||"disabled"}nS(t){return t!==this.iS&&(this.iS=t,t?this.gl.enable(this.gl.DEPTH_TEST):this.gl.disable(this.gl.DEPTH_TEST)),this}Qz(){return this.iS}dO(t){return this.jE=t,this}$z(){return this.jE}RV(t,e){let i;if(e){const s=this.hO.get(e);s&&s.size>=t&&s.size-t<1e6?i=e:this.yV(e)}return i||(i=this.gl.createBuffer(),this.hO.set(i,{size:t})),i}fO(t,e=this.gl.RGBA,i=!1,s,n,o=!1,h=this.gl.UNSIGNED_BYTE,a=e){const l=this.gl.createTexture();if(!l)throw new Le("Couldn't reserve Texture.");return this.gl.bindTexture(this.gl.TEXTURE_2D,l),this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o),t&&n===null?this.gl.texImage2D(this.gl.TEXTURE_2D,0,a,e,h,t):n&&this.gl.texImage2D(this.gl.TEXTURE_2D,0,a,n.x,n.y,0,e,h,t),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,s?this.gl.NEAREST:this.gl.LINEAR),i?(this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR_MIPMAP_LINEAR),this.gl.generateMipmap(this.gl.TEXTURE_2D)):this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,s?this.gl.NEAREST:this.gl.LINEAR),this.gl.bindTexture(this.gl.TEXTURE_2D,null),l}OR(t){this.gl.deleteTexture(t)}vV(){const t=this.gl.createFramebuffer();if(!t)throw new Le("Couldn't reserve Framebuffer.");return t}sV(t,e){this.jV=e,this.gl.bindFramebuffer(t,e)}iV(){return this.jV}MV(t){this.gl.deleteFramebuffer(t)}bV(){const t=this.gl.createRenderbuffer();if(!t)throw new Le("Couldn't reserve Render buffer.");return t}xV(t){this.gl.deleteRenderbuffer(t)}eV(t,e,i,s){return this.gl.viewport(t,e,i,s),this.AO&&t===this.AO.x&&e===this.AO.y&&i===this.AO.width&&s===this.AO.height||(this.AO={x:t,y:e,width:i,height:s}),this}Xz(){return this.AO||{x:0,y:0,width:0,height:0}}hV(t,e,i,s){return this.qz(!0),this.gl.scissor(Math.max(t,0),Math.max(e,0),Math.max(i,0),Math.max(s,0)),this}qz(t){return t===this.gO||(t?this.gl.enable(this.gl.SCISSOR_TEST):this.gl.disable(this.gl.SCISSOR_TEST),this.gO=t),this}gV(t){return t!==this.tO&&(this.tO=t,t&&this.gl.enable(this.gl.BLEND),t||this.gl.disable(this.gl.BLEND)),this}Jz(){return this.tO}rO(t,e,i,s){return t?(t!==void 0&&e!==void 0&&(i!==void 0&&s!==void 0?this.gl.blendFuncSeparate(t,e,i,s):this.gl.blendFunc(t,e)),this):(this.gl.blendFuncSeparate(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA),this)}jz(){return this.gO!==void 0&&this.gO}aV(t,e){const i=new tb(this,t),s=e(i.uniform,i.attribute,i,i.uniformOptional);i.finish(s)}yV(t){t&&(this.gl.deleteBuffer(t),this.hO.delete(t))}mO(t,e,i){this.uV(t.uniform("uCenter"),e.center).uV(t.uniform("uDistance"),e.distance).FV(t.uniform("uBounds"),e.bounds).dV(t.uniform("uAspect"),e.aspectRatio);const s=i.getColorStops();if(s.length<2)throw new Error("Minimum two color stops required");for(let n=0;n<s.length;n+=1)this.AR(t.uniform(`color_${n}`),s[n].color).dV(t.uniform(`stop_${n}`),s[n].offset);return this}yO(t,e,i){this.uV(t.uniform("uStartPoint"),e.startPoint).uV(t.uniform("uEndPoint"),e.endPoint).FV(t.uniform("uBounds"),e.bounds);const s=i.getColorStops();if(s.length<2)throw new Error("Minimum two color stops required");for(let n=0;n<s.length;n+=1)this.AR(t.uniform(`color_${n}`),s[n].color).dV(t.uniform(`stop_${n}`),s[n].offset);return this}Vh(t){const e=this.bE.get(t);if(!e){const i=new Sv(this);return this.bE.set(t,i),i}return e}pO(t){const e=this.wV.get(t);if(!e){const i=new $v(this,t);return this.SO(t,i),i}return e}SO(t,e){this.wV.set(t,e)}nO(){const t=this.gl,e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,1,1,0,t.ALPHA,t.UNSIGNED_BYTE,new Uint8ClampedArray([0]));const i=t.getError()===0;return i||this.cA.Hn!==!1&&X.console.info("LightningChart JS - Uint8ClampedArray is not supported as texture data. The above WebGL error/warning is from the feature detection. There is nothing to worry about."),t.deleteTexture(e),i}vO(t,e,i,s){if(i)this.lV(e,s,{location:t.attribute("aPos_highpart"),size:2},{location:t.attribute("aPos_lowpart"),size:2});else{const n=t.attribute("aPos");this.GV(n,e),s!==void 0&&this.UV(n,s)}return this}bO(){this.iz.WEBGL_lose_context&&this.iz.WEBGL_lose_context.loseContext()}xO(t){if(this.MO&&this.MO.bufferIdsCount>=t)return this.MO.buffer;this.MO&&(this.yV(this.MO.buffer),this.MO=void 0);const e=t,i=new Float32Array(e);for(let n=0;n<e;n+=1)i[n]=n;const s=this.nV(i);return this.MO={buffer:s,bufferIdsCount:e},s}_O(){return this.gl2?void 0:"attribute"}wO(t,e){if(this._O()==="attribute"){const i=this.xO(e);this.lV(i,void 0,{location:t.attribute("aVertexID"),size:1})}return this}CO(){return this.gl2?void 0:"attribute"}kO(t,e){if(this.CO()==="attribute"){const i=this.xO(e);this.lV(i,1,{location:t.attribute("aInstanceID"),size:1})}return this}TO(t,e,i,s,n,o,h,a,l){const u=t.createBuffer();return this.iO.push(u),t.bindFramebuffer(t.FRAMEBUFFER,e),t.bindBuffer(t.PIXEL_PACK_BUFFER,u),t.bufferData(t.PIXEL_PACK_BUFFER,l.byteLength,t.STREAM_READ),t.readPixels(i,s,n,o,h,a,0),t.bindBuffer(t.PIXEL_PACK_BUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null),Zv(t,t.PIXEL_PACK_BUFFER,u,0,l).then(()=>l).catch(c=>{throw c}).finally(()=>{t.deleteBuffer(u),this.iO.splice(this.iO.indexOf(u),1)})}FO(t,e,i,s,n,o,h,a){const l=this.gl,u=this.iV();this.sV(l.FRAMEBUFFER,t),l.readPixels(e,i,s,n,o,h,a),this.sV(this.gl.FRAMEBUFFER,u)}IO(t){const e=this.CV.get(t);if(!e){const s=this.gl.createTexture();if(!s)throw new Le("Couldn't reserve Texture.");this.gl.bindTexture(this.gl.TEXTURE_2D,s);const n=[];let o=255;for(let l=0;l<t.length;l+=1){for(let u=0;u<t[l];u+=1)n.push(o);o=o===255?0:255}const h=n.length;if(!this.gl2&&((i=n.length)&i-1)!=0){const l=(u=>{u-=1;for(let c=1;c<32;c<<=1)u|=u>>1;return u+1})(n.length);for(let u=n.length;u<l;u+=1)n[u]=0}this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),this.gl.pixelStorei(this.gl.PACK_ALIGNMENT,1),this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,1),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.REPEAT),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.REPEAT),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,n.length,1,0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,new Uint8Array(n)),this.gl.bindTexture(this.gl.TEXTURE_2D,null);const a={PO:s,DO:h,BO:n.length};return this.CV.set(t,a),a}var i;return e}LO(t,e,i){const{uniform:s}=t;this.AR(s("uFallbackColor"),e.getFallbackColor());for(let n=0;n<e.steps.length;n+=1)this.dV(s(`uLUTValue${n}`),e.steps[n].value),this.AR(s(`uLUTColor${n}`),e.steps[n].color);if(e.percentageValues){if(!i)return qs(0,()=>{}),this;this.dV(s("uMinValue"),i.min),this.dV(s("uMaxValue"),i.max)}return this}RO(t,e,i,s,n,o){const h=i&&i.getSource()||s&&s.rc,a=i?i.getFitMode():Ze.Stretch,l=u=>{u.texCoordsBuffer=this.nV(o(u.texture.Fz,u.texture.Iz,a),!1,u.texCoordsBuffer)};if(h){let u=e;if((!e||h!==e.source)&&h){e&&(e.texture.ZR(t),this.yV(e.texCoordsBuffer));const c=this.pO(h);c.jR(t);const d=i?i.getSourceMissingColor():Bg.color;u={texture:c,source:h,texCoordsBuffer:this.nV([]),sourceMissingTexture:this.fO(new Uint8Array([d.getR(),d.getG(),d.getB(),d.getA()]),this.gl.RGBA,!1,!0,{x:1,y:1},!1),textureReadyCallback:()=>{u&&h&&(l(u),this.us.Ss())}},c.Oz(u.textureReadyCallback),l(u)}return u&&u.texture.Dz&&u.texture.Pz&&u.texture.Tz&&(u.texture.Ps(),this.us.Ss()),n&&u&&u.texture.Dz&&l(u),u}e&&this.EO(t,e)}EO(t,e){e&&(e.texture.ZR(t),e.texture.Nz(e.textureReadyCallback),this.OR(e.sourceMissingTexture),this.yV(e.texCoordsBuffer))}zO(t,e,i,s){const{uniform:n,uniformOptional:o,attribute:h}=t,a=i.dt,l=this.$z();this.dV(n("uIsHighlighted"),e===1||e===2?0:i.zo).AR(n("uHighlightColorOffset"),e===1||e===2?ue:i.Go).dV(n("uRenderEffectMask"),e===2?1:0).uV(o("uRatioPxClip"),[2/this.us.oi().x,2/this.us.oi().y]).dV(o("uDevicePixelRatio"),l),a instanceof Gt||a instanceof Gi?this.uV(n("uScale"),s.uniforms.fV()).uV(n("uDisp"),s.uniforms.AV()).uV(o("uScaleStart_highpart"),s.uniforms.VO()).uV(o("uScaleStart_lowpart"),s.uniforms.OO()):a instanceof Ue&&this.uV(o("uScaleStart"),s.uniforms.MixedScaleXY.uScaleStart).uV(o("uScaleStartLog"),s.uniforms.MixedScaleXY.uScaleStartLog).uV(o("uScaleInterval"),s.uniforms.MixedScaleXY.uScaleInterval).uV(o("uScaleIntervalLog"),s.uniforms.MixedScaleXY.uScaleIntervalLog).uV(n("uViewportStart"),s.uniforms.MixedScaleXY.uViewportStart).uV(n("uViewportSize"),s.uniforms.MixedScaleXY.uViewportSize);const u=s.coordsHighPrecision===!0;if(s.coordsX)if(u){const c=h("aPos_highpartX"),d=h("aPos_lowpartX");this.gl.bindBuffer(this.gl.ARRAY_BUFFER,s.coordsX),this.gl.vertexAttribPointer(c,1,this.gl.FLOAT,!1,2*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),this.gl.enableVertexAttribArray(c),this.gl.vertexAttribPointer(d,1,this.gl.FLOAT,!1,2*Float32Array.BYTES_PER_ELEMENT,1*Float32Array.BYTES_PER_ELEMENT),this.gl.enableVertexAttribArray(d)}else this.$V(h("aPosX"),s.coordsX);if(s.coordsY)if(u){const c=h("aPos_highpartY"),d=h("aPos_lowpartY");this.gl.bindBuffer(this.gl.ARRAY_BUFFER,s.coordsY),this.gl.vertexAttribPointer(c,1,this.gl.FLOAT,!1,2*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),this.gl.enableVertexAttribArray(c),this.gl.vertexAttribPointer(d,1,this.gl.FLOAT,!1,2*Float32Array.BYTES_PER_ELEMENT,1*Float32Array.BYTES_PER_ELEMENT),this.gl.enableVertexAttribArray(d)}else this.$V(h("aPosY"),s.coordsY);if(e===1)this.AR(n("uColor"),s.mousePickingColor);else{if(s.fillStyleSolid&&this.AR(n("uColor"),s.fillStyleSolid.getColor()),s.fillStylePaletted){if(s.fillStylePaletted.getLookUpProperty()==="value"&&s.lookupValueBuffer!==null){if(!s.lookupValueBuffer)return!1;const c=h("aLookupValue");this.$V(c,s.lookupValueBuffer),s.lookupValueAttribDivisor!==void 0&&this.UV(c,s.lookupValueAttribDivisor)}this.LO(t,s.fillStylePaletted.lut,s.lookupValueRange)}if(s.fillStyleLinearGradient){if(!s.linearGradientInfo)return!1;this.yO(t,s.linearGradientInfo,s.fillStyleLinearGradient)}if(s.fillStyleRadialGradient){if(!s.radialGradientInfo)return!1;this.mO(t,s.radialGradientInfo,s.fillStyleRadialGradient)}if(s.fillStyleIndividual&&s.colorBuffer!==null){if(!s.colorBuffer)return!1;const c=h("aColor");this.gl.bindBuffer(this.gl.ARRAY_BUFFER,s.colorBuffer),this.gl.vertexAttribPointer(c,4,this.gl.UNSIGNED_BYTE,!0,0,0),this.gl.enableVertexAttribArray(c),s.colorAttribDivisor!==void 0&&this.UV(c,s.colorAttribDivisor)}if(s.fillStyleImage){if(!s.texturedFillGLInfo)return!1;const c=s.texturedFillGLInfo&&s.texturedFillGLInfo.texture.Gz();this.AR(o("uColor"),s.fillStyleImage.getSurroundingColor()).cV(n("uColorTexture"),c||s.texturedFillGLInfo.sourceMissingTexture,0).lV(s.texturedFillGLInfo.texCoordsBuffer,s.texCoordAttribDivisor,{location:h("aTextureCoord"),size:2}).LV(s.fillStyleImage.fitMode)}if(s.maskTexture){const c=s.maskTexture&&s.maskTexture.texture.Gz();this.cV(n("uMaskTexture"),c||s.maskTexture.sourceMissingTexture,0).lV(s.maskTexture.texCoordsBuffer,s.maskTextureCoordsAttribDivisor,{location:h("aMaskTextureCoord"),size:2})}}return!0}NO(t,e,i){if(t)return Ji(i||e.Ho(),e.dt,t.getAngle(!0),this.$z())}GO(t,e,i){if(t)return qi(i||e.Ho(),e.dt,t.getPosition(),t.getExtent(),t.getShape(),this.$z())}}const Zv=async(r,t,e,i,s,n,o)=>{const h=r.fenceSync(r.SYNC_GPU_COMMANDS_COMPLETE,0);return r.flush(),((a,l,u)=>{const c=u.flags!==void 0?u.flags:0,d=u.retryTimeout!==void 0?u.retryTimeout:10;return new Promise((f,g)=>{const y=()=>{const p=a.clientWaitSync(l,c,0);return p===a.WAIT_FAILED?g(new Error(`WebGL Sync WAIT_FAILED ${a.getError()}`)):p!==a.TIMEOUT_EXPIRED?f(void 0):void X.setTimeout(y,d)};X.setTimeout(y,0)})})(r,h,{retryTimeout:10}).then(()=>(r.deleteSync(h),r.bindBuffer(t,e),r.getBufferSubData(t,i,s,n,o),r.bindBuffer(t,null),s)).catch(a=>{throw a})};class es{mV(t){if(t instanceof Gt||t instanceof Gi){const e=t.pi();this.WO=e.x.scaling,this.UO=-e.x.displacement,this.YO=e.y.scaling,this.HO=-e.y.displacement,this.$O=e.x.highPrecisionOffset,this.XO=e.x.highPrecisionOffset-Math.fround(e.x.highPrecisionOffset),this.jO=e.y.highPrecisionOffset,this.ZO=e.y.highPrecisionOffset-Math.fround(e.y.highPrecisionOffset)}else t instanceof Ue&&(this.MixedScaleXY=t.pi());return this}AV(){return[this.UO,this.HO]}fV(){return[this.WO,this.YO]}VO(){return[this.$O,this.jO]}OO(){return[this.XO,this.ZO]}}class Qv{constructor(){this.WO=0,this.YO=0,this.QO=0,this.UO=0,this.HO=0,this.JO=0}KO(t){return this.WO=t.et(),this.UO=t.getInnerStart()+.5*this.WO*t.ht(),this}qO(t){return this.YO=t.et(),this.HO=t.getInnerStart()+.5*this.YO*t.ht(),this}tN(t){return this.QO=t.et(),this.JO=t.getInnerStart()+.5*this.QO*t.ht(),this}fV(){return[this.WO,this.YO,this.QO]}AV(){return[this.UO,this.HO,this.JO]}iN(t,e,i,s,n){const o=N(2*(t-i.x)/(i.width-i.x)-1,2*(e-i.y)/(i.height-i.y)-1),h=Zt.multiply(s,[o.x,o.y,n,1]);return yt(h[0],h[1],h[2])}}class Kv{constructor(t){this.RR=t}zL(t,e,i,s,n,o=0){const h=this.RR,a=s===void 0;if(!(s=s||h.vV()))throw new Le("Could not bind a framebuffer.");const l=h.Xz(),u=h.Jz();h.gV(!1),h.KV(()=>{h.eV(0,0,i.x,i.y),t()},s,e,o),a&&h.MV(s),this.RR.qV(n),this.RR.eV(l.x,l.y,l.width,l.height),h.gV(u)}}class tb{constructor(t,e){this.sN=[],this.eN=[],this.uniform=i=>{const s=this.shader.gE(i);return this.eN.push({name:i,optional:!1}),s},this.uniformOptional=i=>{const s=this.shader.mE(i);return this.eN.push({name:i,optional:!0}),s},this.attribute=i=>{const s=this.shader.yE(i);return this.sN.push({name:i,location:s}),s},this.glUtils=t,this.shader=e}finish(t){for(const e of this.sN)this.glUtils.YV(e.location),this.glUtils.UV(e.location,0)}}class eb extends Ea{constructor(t,e,i,s,n){super(t,e,i,s),this.hN=new Map,this.rN=t,this.nN=e,this.RR=t.oN(),this.aN=n,this.nN=e}lN(t){return!1}VR(){return this}zL(t){if(!this.aN||t!==0||this.hN.size===0)return this;const e=Array.from(this.hN.values()).map(s=>s.uN.filter(n=>n.cN).map(n=>n.ts).flat().filter(n=>n!==void 0).filter(n=>n.getVisible())).flat();if(e.length===0)return this;const i=this.aN;return this.RR.aO.SV(e,i),this}Ps(){return this}bt(){return 0}vt(){return 0}Mt(){return 0}xt(){return 0}vl(){return 0}bl(){return 0}hs(t,e){const i={uN:[]},s=(a,l)=>{const u={ts:a||[],cN:l===void 0||l};i.uN.push(u);const c={fs:d=>(u.ts=d,c),ps:d=>(u.cN=d,c),vs:()=>u.cN};return c},n={};Object.keys(e).forEach(a=>{const l=e[a],u=l.shapes||[],c=l.themeEffectEnabled===void 0||l.themeEffectEnabled,d=s(u,c);n[a]=d});const o={yg:s,...n};this.hN.set(t,i);const h=t.onDispose(()=>{this.hN.delete(t),t.offDispose(h)});return o}}const tm=(r,t,e)=>((i,s,n,o)=>{const h=[];let a=0;const l=St(s,n/2);let u,c,d,f,g=i[i.length-1],y=0;for(let p=0;p<i.length;p+=1){u=i[p],c=p===i.length-1?i[0]:i[p+1],p>0&&(g=i[p-1]),vd(u,g)&&(g=gt(u,Li(St(Ut(c,u),-1)))),vd(u,c)&&(c=gt(u,Li(St(Ut(g,u),-1))));const x=Zo(g,s),A=Zo(u,s),v=Zo(c,s),w=Li(Ut(A,x)),E=Li(Ut(v,A)),C=gt(w,E),k=N(-C.y,C.x),F=N(-w.y,w.x),m=1/Pl(k,F),S=Pr(k),b=Li(Ut(w,E)),M=Math.sign(Pl(k,b))||1,R=zi(k,St(l,m)),T=zi(k,St(l,-m));if(S<1||m===1/0){let z={x:0,y:0},P={x:0,y:0},_={x:0,y:0},V={x:0,y:0};const B=N(-E.y,E.x),I=Math.sign(Pl(w,k))||M,L=zi(F,St(l,I)),U=zi(B,St(l,I));M===1?(z=L,P=T,_=U,V=T):(z=R,P=L,_=R,V=U);const Y=4*pr(g,u),O=4*pr(u,c);(m>Y||m>O)&&(M===1?(z=L,P=U,_=U,V=L):(z=U,P=L,_=L,V=U));const j=gt(u,z),$=gt(u,P),Z=gt(u,_),Q=gt(u,V);h[a]=j,a+=1,h[a]=$,a+=1,h[a]=Z,a+=1,h[a]=Q,a+=1,y=4}else{const z=gt(u,R),P=gt(u,T);h[a]=z,a+=1,h[a]=P,a+=1,y=2}f=d,d=i[p]}return h[a]=h[0],a+=1,h[a]=h[1],a+=1,[h,y,[f,d]]})(r,t,e)[0];class ib extends Ux{constructor(t,e,i,s,n,o,h){super(t,e,i,s,n),this.aE=new es,this.dN=Kt,this.fN=Kt,this.AN=Ei({arcStyleSolid:()=>Nt(this.be)&&this.be,arcStyleRadialGradient:()=>Ae(this.be)&&this.be,arcStyleLinearGradient:()=>ve(this.be)&&this.be}),this.rN=t,this.nN=e,this.gN=o,this.mN=h,this.RR=t.oN()}yN(t,e){let i=0,s=Array(0),n=0;if(e!==void 0){const h=t.length,a=Array(h+e.length);let l=0,u=0;for(;l<h;)a[u]=t[l],a[u+1]=e[l],u+=2,l+=1;s=a,i=this.RR.gl.TRIANGLE_STRIP}else s=t,i=this.RR.gl.TRIANGLE_FAN;const o=cs(s,this.dt._i());return n=s.length,[s,this.RR.nV(o),n,i]}pN(t,e,i,s){let n=Array(0);if(e===void 0)n=t;else{let h=0,a=0;const l=t.length;for(h=0,a=l,n=Array(l+e.length-2),e.reverse();h<l;)n[h]=t[h],n[a]=e[h],a+=1,h+=1}if(i===1||i===-1)return[cs(n,this.dt._i()),n.length];const o=tm(n,s,i);return[cs(o,this.dt._i()),o.length]}Ps(){const t=this.sa(),e=this.Bo.M();if(this.ea()){const i=Math.abs(this.Fi.M()-this.Gl.M());this.aE.mV(this.dt);const s=this.dt.Ni()||t,n=this.dt.Wi(),o=this.Wl.M(),h=this.Ul.M(),[a,l]=_a(this.ua.M(),this.Gl.M(),this.Fi.M(),this.Wl.M(),this.Ul.M(),this.Hl.M()),u=this.Yl.M(),c=u>0?_a(this.ua.M(),this.Gl.M(),this.Fi.M(),this.Wl.M()*u/100,this.Ul.M()*u/100,l)[0]:[this.ua.M()],d=a.length-1;if(d===2){const E=(a[d-1].x+a[1].x)/2,C=(a[d-1].y+a[1].y)/2;this.$l=N(E,C)}else{const E=Math.floor(d/2);this.$l=N(a[E].x,a[E].y)}this.Xl=a[1];const f=a.length-1;this.jl=a[f],this.Yl.M()&&(a.shift(),c.shift());let g=!1;(this.ua.i||this.Gl.i||this.Fi.i||this.Wl.i||this.Ul.i||this.Yl.i||this.Hl.i||s)&&(this.fN=wt(N(this.Fa().x-o,this.Fa().y-h),N(this.Fa().x+o,this.Fa().y+h)),g=!0,this.ua.i=!1,this.Gl.i=!1,this.Fi.i=!1,this.Wl.i=!1,this.Ul.i=!1,this.Yl.i=!1,this.Hl.i=!1);const y=this.ta();(g||y)&&this.be!==ft&&(this.Yl.M()?(this.SN&&this.RR.yV(this.SN),[this.vN,this.SN,this.bN,this.xN]=this.yN(a,c)):(this.SN&&this.RR.yV(this.SN),[this.vN,this.SN,this.bN,this.xN]=this.yN(a,void 0)),Ae(this.be)?this.MN=qi(this.fN,this.dt,this.be.getPosition(),this.be.getExtent(),this.be.getShape(),this.RR.$z()):ve(this.be)?this._N=Ji(this.fN,this.dt,this.be.getAngle(!0),this.RR.$z()):(this.MN=void 0,this._N=void 0));const p=this.AN.arcStyleSolid(y),x=this.AN.arcStyleLinearGradient(y),A=this.AN.arcStyleRadialGradient(y),v=p||x||A;y&&(this.wN=v?this.RR.oz(G["2D"],G.Color({dataType:Ae(this.be)||ve(this.be)?["gradient",this.be]:"uniform"}),G.VertexLocation({axisWorldTranslation:pt(this.dt),normalSource:void 0})):void 0,this.ha(this.be));const w=this.xe;if(pi(w)&&(g||this.oa(w.getThickness())||s)){this.Yl.M()?i===360?(a.pop(),c.pop(),[this.CN,this.kN]=this.pN(a,void 0,w.getThickness(),n),this.TN&&this.CN?this.RR.VV(this.TN,this.CN,!0):!this.TN&&this.CN?this.TN=this.RR.nV(this.CN,!0):this.TN&&!this.CN&&(this.RR.yV(this.TN),this.TN=void 0),[this.FN,this.IN]=this.pN(c,void 0,w.getThickness(),n),this.PN&&this.FN?this.RR.VV(this.PN,this.FN,!0):!this.PN&&this.FN?this.PN=this.RR.nV(this.FN,!0):this.PN&&!this.FN&&(this.RR.yV(this.PN),this.PN=void 0)):([this.CN,this.kN]=this.pN(a,c,w.getThickness(),n),this.TN&&this.CN?this.RR.VV(this.TN,this.CN,!0):!this.TN&&this.CN?this.TN=this.RR.nV(this.CN,!0):this.TN&&!this.CN&&(this.RR.yV(this.TN),this.TN=void 0),this.FN&&(this.PN&&this.RR.yV(this.PN),this.PN=void 0,this.IN=0)):(i===360&&(a.shift(),a.pop()),[this.CN,this.kN]=this.pN(a,void 0,w.getThickness(),n),this.TN&&this.CN?this.RR.VV(this.TN,this.CN,!0):!this.TN&&this.CN?this.TN=this.RR.nV(this.CN,!0):this.TN&&!this.CN&&(this.RR.yV(this.TN),this.TN=void 0));const E=w.getFillStyle();Ae(E)?this.DN=qi(this.fN,this.dt,E.getPosition(),E.getExtent(),E.getShape(),this.RR.$z()):ve(E)?this.LN=Ji(this.fN,this.dt,E.getAngle(!0),this.RR.$z()):(this.DN=void 0,this.LN=void 0),this.RN=E===ft?void 0:this.RR.oz(G["2D"],G.Color({dataType:Ae(E)||ve(E)?["gradient",E]:"uniform"}),G.VertexLocation({axisWorldTranslation:pt(this.dt),normalSource:void 0})),this.aa(w)}if(g){let E=1,C=1;pi(w)&&(E=w.getThickness()*n.x,C=w.getThickness()*n.y),this.dN=wt(N(this.fN.min.x-E,this.fN.min.y-C),N(this.fN.max.x+E,this.fN.max.y+C))}this.EN=e&&v?this.EN||this.RR.oz(G["2D"],G.MousePicking,G.VertexLocation({axisWorldTranslation:pt(this.dt),normalSource:void 0})):void 0,this.zN=e&&this.xe!==it?this.zN||this.RR.oz(G["2D"],G.MousePicking,G.VertexLocation({axisWorldTranslation:pt(this.dt),normalSource:void 0})):void 0}return this}zL(t){if(this.ea()){const e=t===1?this.EN:this.wN,i=this.be,s=this.SN;e&&s&&this.RR.jR(e).aV(e,(o,h,a,l)=>{if(this.RR.uV(o("uScale"),this.aE.fV()).uV(o("uDisp"),this.aE.AV()).uV(l("uScaleStart_highpart"),this.aE.VO()).uV(l("uScaleStart_lowpart"),this.aE.OO()).vO(a,s,this.dt._i(),void 0).dV(o("uIsHighlighted"),t===1||t===2?0:this.zo).AR(o("uHighlightColorOffset"),t===1||t===2?ue:this.Go).dV(o("uRenderEffectMask"),t===2?1:0),t===1)this.RR.AR(o("uColor"),this.mN);else if(Nt(i))this.RR.AR(o("uColor"),i.getColor());else if(Ae(i)){if(!this.MN)return!1;this.RR.mO(a,this.MN,i)}else if(ve(i)){if(!this._N)return!1;this.RR.yO(a,this._N,i)}return this.RR.Ky(this.xN,this.bN),!0});const n=this.xe;pi(n)&&(this.TN!==void 0&&this.VN(t,this.TN,this.kN,n),this.PN!==void 0&&this.VN(t,this.PN,this.IN,n))}return this}VN(t,e,i,s){const n=t===1?this.zN:this.RN,o=s.getFillStyle();n&&this.RR.jR(n).aV(n,(h,a,l,u)=>{if(this.RR.uV(h("uScale"),this.aE.fV()).uV(h("uDisp"),this.aE.AV()).vO(l,e,this.dt._i(),void 0).dV(h("uIsHighlighted"),t===1||t===2?0:this.zo).AR(h("uHighlightColorOffset"),t===1||t===2?ue:this.Go).dV(h("uRenderEffectMask"),t===2?1:0),t===1)this.RR.AR(h("uColor"),this.mN);else if(Nt(o))this.RR.AR(h("uColor"),o.getColor());else if(Ae(o)){if(!this.DN)return!1;this.RR.mO(l,this.DN,o)}else if(ve(o)){if(!this.LN)return!1;this.RR.yO(l,this.LN,o)}const c=s.getThickness(),d=c===-1||c===1;return this.RR.Ky(d?this.RR.gl.LINE_LOOP:this.RR.gl.TRIANGLE_STRIP,i),!0})}lN(t){return this.gN===t&&{}}VR(){return this.ON&&(this.RR.yV(this.ON),this.ON=void 0),this.NN&&(this.RR.yV(this.NN),this.NN=void 0),this.SN&&(this.RR.yV(this.SN),this.SN=void 0),this.TN&&(this.RR.yV(this.TN),this.TN=void 0),this.PN&&(this.RR.yV(this.PN),this.PN=void 0),this.wN=void 0,this.RN=void 0,this.EN=void 0,this.zN=void 0,this}bt(){return this.fN.max.x}vt(){return this.fN.min.x}Mt(){return this.fN.max.y}xt(){return this.fN.min.y}vl(){return Ti(this.xe)}bl(){return Ti(this.xe)}}class sb{constructor(){this.first=0,this.second=1,this.third=2,this.fourth=3,this.fifth=4,this.sixth=5}GN(t){return this.first=t,this.second=t+1,this.third=t+2,this.fourth=t+3,this.fifth=t+4,this.sixth=t+5,t+=6,this}WN(){return this.first=this.second,this.second=this.third,this.third=this.fourth,this.fourth=this.fifth,this.fifth=this.sixth,this.sixth+=1,this}UN(){return this.first=this.third,this.second=this.fourth,this.third=this.fifth,this.fourth=this.sixth,this.fifth=this.fourth+1,this.sixth=this.fifth+1,this}YN(t){const e=t.buffer;let{position:i}=t;return e[i]=this.first,e[i+1]=this.second,e[i+2]=this.third,i+=3,t.position=i,t.next&&this.WN(),this}HN(t){const e=t.buffer;let{position:i}=t;return e[i]=this.first,e[i+1]=this.third,e[i+2]=this.second,e[i+3]=this.third,e[i+4]=this.fourth,e[i+5]=this.second,i+=6,t.position=i,t.next&&this.UN(),this}$N(t,e){e.next=!0,6*t>=e.buffer.length&&(e.buffer=Array(6*t));for(let i=0;i<t;i+=1)this.HN(e);return this}XN(){return[this.first,this.second,this.third,this.fourth,this.fifth,this.sixth]}}const le=((r=0)=>new sb().GN(r))(),Yf=(r,t,e,i,s,n,o,h,a,l)=>(h===void 0&&o===void 0||le.WN(),n.push(r,t),s.push(le.first,le.second,le.third),h=void 0,o=void 0,s.push(le.third,le.fourth,le.second),a=le.third,le.UN(),l&&n.push(e,i),[o,h,a]),Wf=(r,t,e,i,s,n,o,h,a,l,u)=>{a===void 0&&h===void 0||le.WN(),o.push(r,t),s.push(le.first,le.second,le.third);const c=fu(r,e,t,i);return a=void 0,c!==void 0&&(a===void 0&&(a=c),o.push(a),n.push(le.third,le.fourth,le.fifth),l=le.fourth),le.UN(),u&&o.push(e,i),[h,a,l]},Hf=(r,t,e,i,s,n,o,h,a,l)=>(o===void 0&&n===void 0||le.WN(),s.push(r,t),i.push(le.first,le.second,le.third),n=e,o=void 0,h=le.third,l?s.push(e):a=!0,[n,o,h,a]),Xf=(r,t,e,i,s,n,o,h,a,l,u)=>(n.length!==0?(h===void 0&&o===void 0||le.WN(),le.WN()):a>0&&(le.WN(),u>0&&(u-=1)),n.push(r),s.push(le.first,le.second,le.third),a=le.second,o=r,h=void 0,l&&n.push(e,i),[o,h,a,u]),$f=(r,t=0)=>{le.GN(t);const[e,i]=r,s=e.length,n=[],o=[],h=[];let a,l,u=t,c=0,d=e[c],f=i[c],g=e[c],y=i[c],p=!1,x=u>0?g.y!==y.y?2:1:0;if(s>1)for(;c<s-1;){g=d,y=f,c+=1,d=e[c],f=i[c];const A=c===s-1;g.y>y.y?d.y>f.y?[a,l,u]=Yf(g,y,d,f,n,h,a,l,u,A):d.y<f.y?[a,l,u]=Wf(g,y,d,f,n,o,h,a,l,u,A):[a,l,u,p]=Hf(g,y,d,n,h,a,l,u,p,A):g.y<y.y?d.y<f.y?[a,l,u]=Yf(g,y,d,f,o,h,a,l,u,A):d.y>f.y?[a,l,u]=Wf(g,y,d,f,o,n,h,a,l,u,A):[a,l,u,p]=Hf(g,y,d,o,h,a,l,u,p,A):d.y===f.y?(a=g,p&&(h.push(g),p=!1,le.WN()),h.length===0&&u>0&&x>0&&(x-=1)):d.y>f.y?[a,l,u,x]=Xf(g,0,d,f,n,h,a,l,u,A,x):[a,l,u,x]=Xf(g,0,d,f,o,h,a,l,u,A,x)}return[h,new Uint16Array(n),new Uint16Array(o),u,x]};class rb extends Bx{constructor(t,e,i,s,n,o,h){super(t,e,i,s,n),this.aE=new es,this.jN=0,this.Oa=Array(),this.ZN=0,this.QN=new Uint16Array(0),this.JN=new Uint16Array(0),this.AN=Ei({hightFillSolid:()=>Nt(this.be)&&this.be,hightFillRadialGradient:()=>Ae(this.be)&&this.be,hightFillLinearGradient:()=>ve(this.be)&&this.be,hightFillPaletted:()=>Be(this.be)&&this.be,lowFillSolid:()=>Nt(this.Tl)&&this.Tl,lowFillRadialGradient:()=>Ae(this.Tl)&&this.Tl,lowFillLinearGradient:()=>ve(this.Tl)&&this.Tl,lowFillPaletted:()=>Be(this.Tl)&&this.Tl}),this.rN=t,this.nN=e,this.gN=o,this.mN=h,this.RR=t.oN()}Ps(){const t=this.sa(),e=this.Bo.M(),i=this.Qa;if(this.ea()){this.aE.mV(this.dt);const s=this.dt instanceof Ue==0,n=s?this.dt.Wi():void 0,o=this.Dl(),h=this.dt.Ni()||t,a=i||this._l.i||h&&o.type!=="disabled";if(a){if(this.jN=0,this.QN=new Uint16Array(0),this.JN=new Uint16Array(0),this.Oa.length=0,this.ZN=0,this.wl>1){const[k,F,m,S]=$f([s?o.packager(this.xl,n,.5):this.xl,s?o.packager(this.Ml,n,.5):this.Ml]);this.jN=S,this.QN=F,this.JN=m,this.Oa=k,this.ZN=k.length}this._l.i=!1}if(this.kl&&this.$a[0].length>1){const[k,F]=this.$a,m=k.length,[S,b,M,R,T]=$f([s?o.packager(k,n,.5):k,s?o.packager(F,n,.5):F],this.jN);this.jN=R;const z=S.length;for(let P=T;P<z;P+=1)this.Oa[this.ZN]=S[P],this.ZN+=1;this.QN=Fd(this.QN,b),this.JN=Fd(this.JN,M);for(let P=T>0||this.wl>0?1:T;P<m;P+=1)this.xl[this.wl]=k[P],this.Ml[this.wl]=F[P],this.wl+=1;this.Cl=!0,this.kl=!1,this.$a=[]}const l=this.be,u=this.ia!==l,c=this.AN.hightFillSolid(u),d=this.AN.hightFillRadialGradient(u),f=this.AN.hightFillLinearGradient(u),g=this.AN.hightFillPaletted(u),y=c||d||f||g&&["x","y"].includes(g.getLookUpProperty())&&g,p=this.Tl,x=this.Ol!==p,A=this.AN.lowFillSolid(x),v=this.AN.lowFillRadialGradient(x),w=this.AN.lowFillLinearGradient(x),E=this.AN.lowFillPaletted(x),C=A||v||w||E&&["x","y"].includes(E.getLookUpProperty())&&E;if((u||t)&&(this.KN=y?this.RR.oz(G["2D"],G.Color({dataType:f?["gradient",f]:d?["gradient",d]:g?["lookup",g.getLookUpProperty(),g.lut]:"uniform"}),G.VertexLocation({axisWorldTranslation:pt(this.dt),normalSource:void 0})):void 0),d?this.MN=qi(this.Eo||this.Ya,this.dt,d.getPosition(),d.getExtent(),d.getShape(),this.RR.$z()):f?this._N=Ji(this.Eo||this.Ya,this.dt,f.getAngle(!0),this.RR.$z()):(this.MN=void 0,this._N=void 0),(x||t)&&(this.qN=C?this.RR.oz(G["2D"],G.Color({dataType:w?["gradient",w]:v?["gradient",v]:E?["lookup",E.getLookUpProperty(),E.lut]:"uniform"}),G.VertexLocation({axisWorldTranslation:pt(this.dt),normalSource:void 0})):void 0),v?this.tG=qi(this.Eo||this.Ya,this.dt,v.getPosition(),v.getExtent(),v.getShape(),this.RR.$z()):w?this.iG=Ji(this.Eo||this.Ya,this.dt,w.getAngle(!0),this.RR.$z()):(this.tG=void 0,this.iG=void 0),(t||this.Cl||a)&&this.Cl||a){const k=this.Oa,F=cs(k,this.dt._i());this.sG=this.RR.nV(F,!1,this.sG),y&&(this.eG=this.RR.OV(this.QN,this.eG),this.hG=this.QN.length),C&&(this.rG=this.RR.OV(this.JN,this.rG),this.nG=this.JN.length),this.Cl=!1}this.EN=e&&(C||y)?this.EN||this.RR.oz(G["2D"],G.MousePicking,G.VertexLocation({axisWorldTranslation:pt(this.dt),normalSource:void 0})):void 0,this.ha(this.be),this.Nl(this.Tl),this.Qa=!1}return this}zL(t){const e=this.be,i=this.Tl,s=t===1?this.EN:this.qN;if(s&&this.sG&&this.rG){const o=this.sG,h=this.rG;this.RR.jR(s).aV(s,(a,l,u,c)=>{if(this.RR.vO(u,o,this.dt._i(),void 0).XV(h).dV(a("uIsHighlighted"),t===1||t===2?0:this.zo).AR(a("uHighlightColorOffset"),t===1||t===2?ue:this.Go).dV(a("uRenderEffectMask"),t===2?1:0),this.dt instanceof Gt||this.dt instanceof Gi?this.RR.uV(a("uScale"),this.aE.fV()).uV(a("uDisp"),this.aE.AV()).uV(c("uScaleStart_highpart"),this.aE.VO()).uV(c("uScaleStart_lowpart"),this.aE.OO()):this.dt instanceof Ue&&this.RR.uV(c("uScaleStart"),this.aE.MixedScaleXY.uScaleStart).uV(c("uScaleStartLog"),this.aE.MixedScaleXY.uScaleStartLog).uV(c("uScaleInterval"),this.aE.MixedScaleXY.uScaleInterval).uV(c("uScaleIntervalLog"),this.aE.MixedScaleXY.uScaleIntervalLog).uV(a("uViewportStart"),this.aE.MixedScaleXY.uViewportStart).uV(a("uViewportSize"),this.aE.MixedScaleXY.uViewportSize),t===1)this.RR.AR(a("uColor"),this.mN);else if(Nt(i))this.RR.AR(a("uColor"),i.getColor());else if(Ae(i)){if(!this.tG)return!1;this.RR.mO(u,this.tG,i)}else if(ve(i)){if(!this.iG)return!1;this.RR.yO(u,this.iG,i)}else if(Be(i)){const d=Xi(i,this,void 0);if(!d&&i.lut.percentageValues)return!1;this.RR.LO(u,i.lut,d)}return this.RR.ZV(this.nG),!0})}const n=t===1?this.EN:this.KN;if(n&&this.sG&&this.eG){const o=this.sG,h=this.eG;this.RR.jR(n).aV(n,(a,l,u,c)=>{if(this.RR.vO(u,o,this.dt._i(),void 0).XV(h).dV(a("uIsHighlighted"),t===1||t===2?0:this.zo).AR(a("uHighlightColorOffset"),t===1||t===2?ue:this.Go).dV(a("uRenderEffectMask"),t===2?1:0),this.dt instanceof Gt||this.dt instanceof Gi?this.RR.uV(a("uScale"),this.aE.fV()).uV(a("uDisp"),this.aE.AV()).uV(c("uScaleStart_highpart"),this.aE.VO()).uV(c("uScaleStart_lowpart"),this.aE.OO()):this.dt instanceof Ue&&this.RR.uV(c("uScaleStart"),this.aE.MixedScaleXY.uScaleStart).uV(c("uScaleStartLog"),this.aE.MixedScaleXY.uScaleStartLog).uV(c("uScaleInterval"),this.aE.MixedScaleXY.uScaleInterval).uV(c("uScaleIntervalLog"),this.aE.MixedScaleXY.uScaleIntervalLog).uV(a("uViewportStart"),this.aE.MixedScaleXY.uViewportStart).uV(a("uViewportSize"),this.aE.MixedScaleXY.uViewportSize),t===1)this.RR.AR(a("uColor"),this.mN);else if(Nt(e))this.RR.AR(a("uColor"),e.getColor());else if(Ae(e)){if(!this.MN)return!1;this.RR.mO(u,this.MN,e)}else if(ve(e)){if(!this._N)return!1;this.RR.yO(u,this._N,e)}else if(Be(e)){const d=Xi(e,this,void 0);if(!d&&e.lut.percentageValues)return!1;this.RR.LO(u,e.lut,d)}return this.RR.ZV(this.hG),!0})}return this}lN(t){return this.gN===t&&{}}bt(){return this.Ya.max.x}vt(){return this.Ya.min.x}Mt(){return this.Ya.max.y}xt(){return this.Ya.min.y}vl(){return 0}bl(){return 0}Ux(t){this.al()>0&&this.Ps();const[e,i]=this.tl(),s=e.length>2&&e[1].x<e[0].x,n=fc(e,t,Je.NearestX,this.Fl,this.Il,this.dt,this.us.dt,this.Ya,"x",s);if(n===void 0)return;const o=[e[n],i[n]];return Number.isNaN(o[0].y)||Number.isNaN(o[1].y)?void 0:o}sw(t){this.al()>0&&this.Ps();const[e,i]=this.tl(),s=e.length;if(s===0)return;const n=this.Fl?1:0,o=s-(this.Il?2:1),h=e.length>2&&e[1].x<e[0].x,a=Xg(e,K(t,this.us.dt,this.dt),"x",h,n,o);if(!a)return;const l=[Dr(e[a.a],e[a.b],a.lerpAmount),Dr(i[a.a],i[a.b],a.lerpAmount)];return Number.isNaN(l[0].y)||Number.isNaN(l[1].y)?void 0:l}dispose(){return super.dispose(),this.rG&&(this.RR.yV(this.rG),this.rG=void 0),this.eG&&(this.RR.yV(this.eG),this.eG=void 0),this.sG&&(this.RR.yV(this.sG),this.sG=void 0),this}VR(){return this.dispose(),this}}class nb extends _o{constructor(t,e){super(t),this.oG=e;const{vertices:i,indices:s,indicesCount:n,drawMode:o}=this.aG();this.lG=t.nV(i),this.uG=t.OV(s),this.cG=n,this.dG=o}jR(t,e){return this.RR.lV(this.lG,0,{location:t.attribute("aSegmentPosition"),size:2},{location:t.attribute("aSegmentSide"),size:1},{location:e?t.attribute("aSegmentInside"):void 0,size:1}),this.RR.XV(this.uG),this}Ky(t,e,i){return this.RR.JV(e!==void 0?e:this.dG,this.cG,i||0,t,this.RR.gl.UNSIGNED_BYTE),this}aG(){const t=[];[1,0].forEach(s=>{const n=s===1?.5*Math.PI:1.5*Math.PI;for(let o=0;o<=this.oG;o+=1){const h=n-o*Math.PI/this.oG;t.push(.5*Math.cos(h),.5*Math.sin(h),s,0)}}),t.push(0,0,1,1),t.push(0,0,0,1);const e=t.length/4,i=[];for(let s=0;s<this.oG;s+=1)i.push(s,s+1,e-2),i.push(s+e/2-1,s+e/2,e-1);return i.push(0,e-2,e-1),i.push(e-1,e-2,e/2-1),i.push(0,e-3,e-1),i.push(e/2-2,e-2,e/2-1),{vertices:new Float32Array(t),indices:new Uint8Array(i),indicesCount:i.length,verticesCount:e,drawMode:this.RR.gl.TRIANGLES}}kz(){this.RR.yV(this.lG),this.RR.yV(this.uG)}}const No=(r,t,e=!0)=>((i,s)=>{let n=i._V.xz.get(s);return n||(n=new nb(i,s),i._V.xz.set(s,n),n)})(r,e?t>=50?8:t>=20?6:t>=7?4:t>=4?3:t===1?1:2:1),Bs={fG:(r,t,e,i,s,n)=>{const{attribute:o}=i,h=t.gl;if(h.bindBuffer(h.ARRAY_BUFFER,e),r){const a=o("aLocationA_highpart"),l=o("aLocationA_lowpart"),u=o("aLocationB_highpart"),c=o("aLocationB_lowpart");h.vertexAttribPointer(a,2,h.FLOAT,!1,s*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),t.UV(a,1),h.enableVertexAttribArray(a),h.vertexAttribPointer(l,2,h.FLOAT,!1,s*Float32Array.BYTES_PER_ELEMENT,(n+2)*Float32Array.BYTES_PER_ELEMENT),t.UV(l,1),h.enableVertexAttribArray(l),h.vertexAttribPointer(u,2,h.FLOAT,!1,s*Float32Array.BYTES_PER_ELEMENT,(n+s)*Float32Array.BYTES_PER_ELEMENT),t.UV(u,1),h.enableVertexAttribArray(u),h.vertexAttribPointer(c,2,h.FLOAT,!1,s*Float32Array.BYTES_PER_ELEMENT,(n+s+2)*Float32Array.BYTES_PER_ELEMENT),t.UV(c,1),h.enableVertexAttribArray(c)}else{const a=o("aLocationA"),l=o("aLocationB");h.vertexAttribPointer(a,2,h.FLOAT,!1,s*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),t.UV(a,1),h.enableVertexAttribArray(a),h.vertexAttribPointer(l,2,h.FLOAT,!1,s*Float32Array.BYTES_PER_ELEMENT,(n+s)*Float32Array.BYTES_PER_ELEMENT),t.UV(l,1),h.enableVertexAttribArray(l)}},AG:(r,t,e,i,s,n,o)=>{const h=r.gl;h.bindBuffer(h.ARRAY_BUFFER,e),h.vertexAttribPointer(i,n,h.FLOAT,!1,n*Float32Array.BYTES_PER_ELEMENT,o*Float32Array.BYTES_PER_ELEMENT),r.UV(i,1),h.enableVertexAttribArray(i),h.vertexAttribPointer(s,n,h.FLOAT,!1,n*Float32Array.BYTES_PER_ELEMENT,(o+n)*Float32Array.BYTES_PER_ELEMENT),r.UV(s,1),h.enableVertexAttribArray(s)},gG:(r,t,e,i,s,n)=>{const{attribute:o}=i,h=t.gl;if(h.bindBuffer(h.ARRAY_BUFFER,e),r){const a=o("aLocationA_highpart"),l=o("aLocationA_lowpart"),u=o("aLocationB_highpart"),c=o("aLocationB_lowpart");h.vertexAttribPointer(a,2,h.FLOAT,!1,2*s*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),t.UV(a,1),h.enableVertexAttribArray(a),h.vertexAttribPointer(l,2,h.FLOAT,!1,2*s*Float32Array.BYTES_PER_ELEMENT,(n+2)*Float32Array.BYTES_PER_ELEMENT),t.UV(l,1),h.enableVertexAttribArray(l),h.vertexAttribPointer(u,2,h.FLOAT,!1,2*s*Float32Array.BYTES_PER_ELEMENT,(n+s)*Float32Array.BYTES_PER_ELEMENT),t.UV(u,1),h.enableVertexAttribArray(u),h.vertexAttribPointer(c,2,h.FLOAT,!1,2*s*Float32Array.BYTES_PER_ELEMENT,(n+s+2)*Float32Array.BYTES_PER_ELEMENT),t.UV(c,1),h.enableVertexAttribArray(c)}else{const a=o("aLocationA"),l=o("aLocationB");h.vertexAttribPointer(a,2,h.FLOAT,!1,2*s*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),t.UV(a,1),h.enableVertexAttribArray(a),h.vertexAttribPointer(l,2,h.FLOAT,!1,2*s*Float32Array.BYTES_PER_ELEMENT,(n+s)*Float32Array.BYTES_PER_ELEMENT),t.UV(l,1),h.enableVertexAttribArray(l)}},mG:(r,t,e,i,s,n,o)=>{const h=r.gl;h.bindBuffer(h.ARRAY_BUFFER,e),h.vertexAttribPointer(i,n,h.FLOAT,!1,2*n*Float32Array.BYTES_PER_ELEMENT,o*Float32Array.BYTES_PER_ELEMENT),r.UV(i,1),h.enableVertexAttribArray(i),h.vertexAttribPointer(s,n,h.FLOAT,!1,2*n*Float32Array.BYTES_PER_ELEMENT,(o+n)*Float32Array.BYTES_PER_ELEMENT),r.UV(s,1),h.enableVertexAttribArray(s)},zL:(r,t,e,i,s,n,o)=>{const h=r.oN(),{uniform:a,uniformOptional:l}=e,u=1/r.Un.$n,c=(s?Math.max(n,u):Math.max(n,0))+1;h.dV(a("uThicknessPixels"),c).dV(l("uAALimit"),1-(c-1)/c).uV(a("uRatioPxClip"),[2/r.oi().x,2/r.oi().y]),t.jR(e,i).Ky(o)}},Kn={fG:(r,t,e,i,s,n)=>{const{attribute:o}=i,h=t.gl;if(h.bindBuffer(h.ARRAY_BUFFER,e),r){const a=o("aPos_highpart");h.vertexAttribPointer(a,2,h.FLOAT,!1,s*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),h.enableVertexAttribArray(a);const l=o("aPos_lowpart");h.vertexAttribPointer(l,2,h.FLOAT,!1,s*Float32Array.BYTES_PER_ELEMENT,(n+2)*Float32Array.BYTES_PER_ELEMENT),h.enableVertexAttribArray(l)}else{const a=o("aPos");h.vertexAttribPointer(a,2,h.FLOAT,!1,s*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),h.enableVertexAttribArray(a)}},AG:(r,t,e,i,s,n)=>{const o=r.gl;o.bindBuffer(o.ARRAY_BUFFER,e),o.vertexAttribPointer(i,s,o.FLOAT,!1,s*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),o.enableVertexAttribArray(i)},gG:(r,t,e,i,s,n)=>{const{attribute:o}=i,h=t.gl;if(h.bindBuffer(h.ARRAY_BUFFER,e),!r){const a=o("aPos");h.vertexAttribPointer(a,2,h.FLOAT,!1,s*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),h.enableVertexAttribArray(a)}},yG:(r,t)=>{const e=r.oN();e.Ky(e.gl.LINE_STRIP,t,0)},pG:(r,t)=>{const e=r.oN();e.Ky(e.gl.LINES,2*t,0)}};class ob extends Xx{constructor(t,e,i,s,n,o,h){super(t,e,i,s,n),this.aE=new es,this.Ya=Kt,this.AN=Ei({lineStyleSolid:()=>pi(this.lu)&&this.lu,lineStyleDashed:()=>rl(this.lu)&&this.lu,strokeFillSolid:()=>{const a=this.lu.getFillStyle();return Nt(a)&&a},strokeFillLinearGradient:()=>{const a=this.lu.getFillStyle();return ve(a)&&a},strokeFillRadialGradient:()=>{const a=this.lu.getFillStyle();return Ae(a)&&a},strokeFillPaletted:()=>{const a=this.lu.getFillStyle();return Be(a)&&a}}),this.rN=t,this.nN=e,this.gN=o,this.mN=h,this.RR=t.oN(),this.SG=this.RR.eO}Ps(){const t=this.ra(),e=this.lu,i=this.AN.lineStyleSolid(t),s=this.AN.lineStyleDashed(t),n=i||s,o=this.AN.strokeFillSolid(t),h=this.AN.strokeFillLinearGradient(t),a=this.AN.strokeFillRadialGradient(t),l=this.AN.strokeFillPaletted(t),u=o||h||a||l&&["x","y"].includes(l.getLookUpProperty())&&l,c=this.Ii(),d=this.Ti(),f=this.Bo.M(),g=this.Bo.i,y=e.V();if(s&&this.dt instanceof Ue)return X.console.error("LightningChart JS DashedLine is not supported on logarithmic axis"),this;if(this.aE.mV(this.dt),this.Au&&(this.vG=this.RR.nV(cs([c,d],this.dt._i()),!1,this.vG),this.Ya=wt(N(c.x,c.y),N(d.x,d.y))),t||g){const p=this.ea()&&n&&u&&y>0,x=h?["gradient",h]:a?["gradient",a]:l?["lookup",l.getLookUpProperty(),l.lut]:"uniform";this.bG=p?{type:"triangulated",shader:this.RR.oz(G["2D"],G.Color({dataType:x}),G.LineInstanced2D({axisWorldTranslation:pt(this.dt),normalSource:void 0}),this.SG?G.AliasedEdge:void 0,s&&G.StippleTextureInstanced),mousePickingShader:f?this.RR.oz(G["2D"],G.MousePicking,G.LineInstanced2D({axisWorldTranslation:pt(this.dt),normalSource:void 0}),s&&G.StippleTextureInstanced):void 0,geometry:No(this.RR,y),thickness:y,lineStyleSolid:i,lineStyleDashed:s,fillStyleSolid:o,fillStyleLinearGradient:h,fillStyleRadialGradient:a,fillStylePaletted:l}:void 0}if(a?this.DN=qi(Xr(this.Ya,{x:this.vl(),y:this.bl()},this.dt),this.dt,a.getPosition(),a.getExtent(),a.getShape(),this.RR.$z()):h?this.LN=Ji(Xr(this.Ya,{x:this.vl(),y:this.bl()},this.dt),this.dt,h.getAngle(!0),this.RR.$z()):(this.DN=void 0,this.LN=void 0),s){if(t||this.Au){const p=[0,0,Math.abs(d.x-c.x),Math.abs(d.y-c.y)];this.xG=this.RR.nV(p,!1,this.xG)}this.MG=this.RR.IO(s.getPattern())}else this.xG&&(this.RR.yV(this.xG),this.xG=void 0),this.MG=void 0;return this.fu(e),this.Au=!1,this.Bo.i=!1,this}zL(t){var e,i;const s=this.vG;if(!s)return this;const n=this.bG;if(!n)return this;const{fillStyleSolid:o,fillStyleLinearGradient:h,fillStyleRadialGradient:a,fillStylePaletted:l,lineStyleDashed:u,thickness:c}=n,d=t===1?(e=this.bG)===null||e===void 0?void 0:e.mousePickingShader:(i=this.bG)===null||i===void 0?void 0:i.shader;return d?(this.RR.jR(d).aV(d,(f,g,y,p)=>{if(this.RR.dV(f("uIsHighlighted"),t===1||t===2?0:this.zo).AR(f("uHighlightColorOffset"),t===1||t===2?ue:this.Go).dV(f("uRenderEffectMask"),t===2?1:0),this.dt instanceof Gt||this.dt instanceof Gi?this.RR.uV(f("uScale"),this.aE.fV()).uV(f("uDisp"),this.aE.AV()).uV(p("uScaleStart_highpart"),this.aE.VO()).uV(p("uScaleStart_lowpart"),this.aE.OO()):this.dt instanceof Ue&&this.RR.uV(p("uScaleStart"),this.aE.MixedScaleXY.uScaleStart).uV(p("uScaleStartLog"),this.aE.MixedScaleXY.uScaleStartLog).uV(p("uScaleInterval"),this.aE.MixedScaleXY.uScaleInterval).uV(p("uScaleIntervalLog"),this.aE.MixedScaleXY.uScaleIntervalLog).uV(f("uViewportStart"),this.aE.MixedScaleXY.uViewportStart).uV(f("uViewportSize"),this.aE.MixedScaleXY.uViewportSize),t===1)this.RR.AR(f("uColor"),this.mN);else if(o)this.RR.AR(f("uColor"),o.getColor());else if(a){if(!this.DN)return!1;this.RR.mO(y,this.DN,a)}else if(h){if(!this.LN)return!1;this.RR.yO(y,this.LN,h)}else if(l){const x=Xi(l,this,void 0);if(!x&&l.lut.percentageValues)return!1;this.RR.LO(y,l.lut,x)}if(u){if(!this.xG||!this.MG)return!1;Bs.AG(this.RR,y,this.xG,g("aLengthSoFarA"),g("aLengthSoFarB"),2,0),this.RR.uV(f("uStippleCount"),[this.us.oi().x/this.MG.BO,this.us.oi().y/this.MG.BO]).dV(p("uStippleTextureWidthLimiter"),this.MG.DO/this.MG.BO).dV(f("uStippleScale"),u.getPatternScale()).cV(f("uStippleTexture"),this.MG.PO,1)}return Bs.fG(this.dt._i(),this.RR,s,y,this.dt._i()?4:2,0),Bs.zL(this.rN,n.geometry,y,this.SG&&t!==1,t===1,c,1),!0}),this):this}lN(t){return this.gN===t&&{}}dispose(){return super.dispose(),this.bG=void 0,this.vG&&(this.RR.yV(this.vG),this.vG=void 0),this.xG&&(this.RR.yV(this.xG),this.xG=void 0),this.MG=void 0,this}VR(){return this}bt(){return this.Ya.max.x}vt(){return this.Ya.min.x}Mt(){return this.Ya.max.y}xt(){return this.Ya.min.y}vl(){return Ti(this.lu)}bl(){return Ti(this.lu)}}class hb extends $x{constructor(t,e,i,s,n,o){super(t,e,i,s,n),this._G=[],this.wG=!1,this.CG=!1,this.kG=!1,this.TG=!1,this.aE=new es,this.Ya=Kt,this.AN=Ei({lineStyleSolid:()=>pi(this.lu)&&this.lu,lineStyleDashed:()=>rl(this.lu)&&this.lu,lineFillSolid:()=>{const l=this.lu.getFillStyle();return Nt(l)&&l},lineFillRadialGradient:()=>{const l=this.lu.getFillStyle();return Ae(l)&&l},lineFillLinearGradient:()=>{const l=this.lu.getFillStyle();return ve(l)&&l},lineIndividualPointFill:()=>{const l=this.lu.getFillStyle();return Ri(l)&&l}}),this.rN=t,this.nN=e,this.FG=o,this.RR=t.oN(),this.SG=this.RR.eO,this.IG=t.Un.jn;const{color:h,id:a}=this.FG();this.mN=h,this.gN=a}zr(){const t=this.mu?void 0:this.FG(),e={ys:i=>this.PG(e,i),cs:i=>this.DG(e,i),Eg:(i,s)=>this.BG(e,i,s),AR:i=>this.LG(e,i),Pi:{x:0,y:0},Fi:{x:0,y:0},zo:0,EG:void 0,gN:t==null?void 0:t.id,mN:t==null?void 0:t.color};return this._G.push(e),e}Nt(){var t;return this._G.length=0,this.wG=!0,this.ji&&this.Tn&&((t=this.us.Cn)===null||t===void 0?void 0:t.entity)===this&&this.Tn(this,void 0,this.us.Cn.collectionMember),this}zG(){return this._G.length}M(t){const e=this._G[t];return[e.Pi,e.Fi]}Ap(){return this._G}bd(t){var e;const i=this._G.indexOf(t);i>=0&&(this._G.splice(i,1),this.wG=!0,this.ji&&this.Tn&&((e=this.us.Cn)===null||e===void 0?void 0:e.entity)===this&&this.Tn(this,void 0,this.us.Cn.collectionMember))}PG(t,e){if(e&&!this._G.includes(t))this._G.push(t);else if(!e){const i=this._G.indexOf(t);this._G.splice(i,1)}return this.kG=!0,t}DG(t,e){return t.zo=e,this.CG=!0,t}BG(t,e,i){return t.Pi=e,t.Fi=i,this.wG=!0,t}LG(t,e){return t.EG=e,this.TG=!0,t}Ps(){const t=this.Bo.M(),e=this.Bo.i,i=this.ra(),s=this.lu,n=this._G,o=this.CG,h=this.wG,a=this.kG,l=this.TG,u=this.AN.lineStyleSolid(i),c=this.AN.lineStyleDashed(i),d=u||c,f=this.AN.lineFillSolid(i),g=this.AN.lineIndividualPointFill(i),y=this.AN.lineFillRadialGradient(i),p=this.AN.lineFillLinearGradient(i),x=f||g||p||y,A=s.V(),v=c?"triangulated":s.getThickness()<0?"primitive":"triangulated";if(c&&this.dt instanceof Ue)return X.console.error("LightningChart JS DashedLine is not supported on logarithmic axis"),this;this.aE.mV(this.dt);const w=h||a;if(w){const E=[];for(let C=0;C<n.length;C+=1){const k=n[C];E.push(k.Pi),E.push(k.Fi)}this.vG=this.RR.nV(cs(E,this.dt._i()),!1,this.vG),this.Ya=ce(E)}if(i||e){const E=f?"uniform":g?"attribute":p?["gradient",p]:y?["gradient",y]:void 0,C=d&&x&&A>0&&E;this.bG=C?v==="triangulated"?{type:"triangulated",shader:this.RR.oz(G["2D"],G.Color({dataType:E}),G.LineInstanced2D({axisWorldTranslation:pt(this.dt),normalSource:void 0,snapToNearestPixel:this.IG,ensureMinimumSegmentLength:this.gu!==void 0}),this.SG?G.AliasedEdge:void 0,c&&G.StippleTextureInstanced,G.AttributeHighlight),mousePicking:t?{shader:this.RR.oz(G["2D"],this.mu?G.MousePicking:G.MousePickingAttribute,G.LineInstanced2D({axisWorldTranslation:pt(this.dt),normalSource:void 0,snapToNearestPixel:this.IG,ensureMinimumSegmentLength:this.gu!==void 0}),c&&G.StippleTextureInstanced,G.AttributeHighlight)}:void 0,geometry:No(this.RR,A,!1),thickness:A,lineStyleSolid:u,lineStyleDashed:c,fillStyleSolid:f,fillStyleIndividual:g,fillStyleLinearGradient:p,fillStyleRadialGradient:y}:{type:"primitive",shader:this.RR.oz(G["2D"],G.Color({dataType:E}),G.VertexLocation({axisWorldTranslation:pt(this.dt),normalSource:void 0,snapToNearestPixel:this.IG}),G.AttributeHighlight),mousePicking:t?{shader:this.RR.oz(G["2D"],this.mu?G.MousePicking:G.MousePickingAttribute,G.VertexLocation({axisWorldTranslation:pt(this.dt),normalSource:void 0,snapToNearestPixel:this.IG}),G.AttributeHighlight)}:void 0,lineStyleSolid:u,lineStyleDashed:c,fillStyleSolid:f,fillStyleIndividual:g,fillStyleLinearGradient:p,fillStyleRadialGradient:y}:void 0}if(c){if(i||w){const E=new Float32Array(4*n.length);let C=0;for(let k=0;k<n.length;k+=1){const F=n[k].Pi,m=n[k].Fi;E[C]=0,E[C+1]=0,E[C+2]=Math.abs(m.x-F.x),E[C+3]=Math.abs(m.y-F.y),C+=4}this.xG=this.RR.nV(E,!1,this.xG)}this.MG=this.RR.IO(c.getPattern())}else this.xG&&(this.RR.yV(this.xG),this.xG=void 0),this.MG=void 0;if(w||o)if(v==="triangulated"){const E=new Float32Array(n.length);let C=0;n.forEach(k=>{E[C]=k.zo,C+=1}),this.VG=this.RR.nV(E,!0,this.VG)}else{const E=new Float32Array(2*n.length);let C=0;n.forEach(k=>{for(let F=C;F<C+2;F+=2)E[F]=k.zo,E[F+1]=k.zo;C+=2}),this.VG=this.RR.nV(E,!1,this.VG)}if(g)if(l||w||i)if(v==="triangulated"){const E=new Float32Array(4*n.length);let C=0;n.forEach(k=>{const F=k.EG||g.color;E[C]=F.r,E[C+1]=F.g,E[C+2]=F.b,E[C+3]=F.a,C+=4}),this.OG=this.RR.nV(E,!1,this.OG)}else{const E=new Float32Array(8*n.length);let C=0;n.forEach(k=>{const F=k.EG||g.color;for(let m=C;m<C+8;m+=4)E[m]=F.r,E[m+1]=F.g,E[m+2]=F.b,E[m+3]=F.a;C+=8}),this.OG=this.RR.nV(E,!1,this.OG)}else this.OG&&(this.RR.yV(this.OG),this.OG=void 0);if(t&&!this.mu){if(w)if(v==="triangulated"){const E=new Float32Array(4*n.length);let C=0;n.forEach(k=>{var F,m,S,b;E[C+0]=((F=k.mN)===null||F===void 0?void 0:F.r)||0,E[C+1]=((m=k.mN)===null||m===void 0?void 0:m.g)||0,E[C+2]=((S=k.mN)===null||S===void 0?void 0:S.b)||0,E[C+3]=((b=k.mN)===null||b===void 0?void 0:b.a)||0,C+=4}),this.NG=this.RR.nV(E,!0,this.NG)}else{const E=new Float32Array(8*n.length);let C=0;n.forEach(k=>{var F,m,S,b;for(let M=C;M<C+4;M+=4)E[C+0]=((F=k.mN)===null||F===void 0?void 0:F.r)||0,E[C+1]=((m=k.mN)===null||m===void 0?void 0:m.g)||0,E[C+2]=((S=k.mN)===null||S===void 0?void 0:S.b)||0,E[C+3]=((b=k.mN)===null||b===void 0?void 0:b.a)||0;C+=8}),this.NG=this.RR.nV(E,!1,this.NG)}}else this.NG&&(this.RR.yV(this.NG),this.NG=void 0);return y?this.MN=qi(this.Eo||this.Ya,this.dt,y.getPosition(),y.getExtent(),y.getShape(),this.RR.$z()):p?this._N=Ji(this.Eo||this.Ya,this.dt,p.getAngle(!0),this.RR.$z()):(this.MN=void 0,this._N=void 0),this.fu(s),this.CG=!1,this.kG=!1,this.wG=!1,this.TG=!1,this.Bo.i=!1,this}zL(t){var e;const i=this.vG,s=this.VG,n=this.NG;if(!i||!s)return this;const o=this.bG;if(!o)return this;const{type:h,fillStyleSolid:a,fillStyleIndividual:l,fillStyleLinearGradient:u,fillStyleRadialGradient:c,lineStyleDashed:d}=o,f=t===1?(e=o.mousePicking)===null||e===void 0?void 0:e.shader:o.shader;return f?(this.RR.jR(f).aV(f,(g,y,p,x)=>{if(this.dt instanceof Gt||this.dt instanceof Gi?this.RR.uV(g("uScale"),this.aE.fV()).uV(g("uDisp"),this.aE.AV()).uV(x("uScaleStart_highpart"),this.aE.VO()).uV(x("uScaleStart_lowpart"),this.aE.OO()):this.dt instanceof Ue&&this.RR.uV(x("uScaleStart"),this.aE.MixedScaleXY.uScaleStart).uV(x("uScaleStartLog"),this.aE.MixedScaleXY.uScaleStartLog).uV(x("uScaleInterval"),this.aE.MixedScaleXY.uScaleInterval).uV(x("uScaleIntervalLog"),this.aE.MixedScaleXY.uScaleIntervalLog).uV(g("uViewportStart"),this.aE.MixedScaleXY.uViewportStart).uV(g("uViewportSize"),this.aE.MixedScaleXY.uViewportSize),this.IG&&this.RR.uV(x("uViewportSizePx"),[this.us.oi().x*this.RR.$z(),this.us.oi().y*this.RR.$z()]),this.gu!==void 0&&this.RR.uV(g("uMinSegmentPixelVector"),[this.gu.x,this.gu.y]),this.RR.AR(g("uHighlightColorOffset"),t===1||t===2?ue:this.Go).dV(g("uRenderEffectMask"),t===2?1:0),t===1)if(this.mu)this.RR.AR(g("uColor"),this.mN);else{if(!n)return!1;h==="triangulated"?this.RR.lV(n,1,{location:y("aColor"),size:4}):this.RR.HV(y("aColor"),n)}else if(a)this.RR.AR(g("uColor"),a.getColor());else if(l){if(!this.OG)return!1;this.RR.lV(this.OG,h==="triangulated"?1:void 0,{location:y("aColor"),size:4})}else if(c){if(!this.MN)return!1;this.RR.mO(p,this.MN,c)}else if(u){if(!this._N)return!1;this.RR.yO(p,this._N,u)}if(d){if(!this.xG||!this.MG)return!1;Bs.mG(this.RR,p,this.xG,y("aLengthSoFarA"),y("aLengthSoFarB"),2,0),this.RR.uV(g("uStippleCount"),[this.us.oi().x/this.MG.BO,this.us.oi().y/this.MG.BO]).dV(x("uStippleTextureWidthLimiter"),this.MG.DO/this.MG.BO).dV(g("uStippleScale"),d.getPatternScale()).cV(g("uStippleTexture"),this.MG.PO,0)}if(h==="triangulated"){const{geometry:A,thickness:v}=o;Bs.gG(this.dt._i(),this.RR,i,p,this.dt._i()?4:2,0),this.RR.lV(s,1,{location:y("aIsHighlighted"),size:1}),Bs.zL(this.rN,A,p,this.SG&&t!==1,t===1,v,this._G.length)}else Kn.gG(this.dt._i(),this.RR,i,p,this.dt._i()?4:2,0),this.RR.$V(y("aIsHighlighted"),s),Kn.pG(this.rN,this._G.length);return!0}),this):this}lN(t){if(t===this.gN)return{};const e=this._G.find(i=>i.gN===t);return!!e&&{collectionMember:e}}dispose(){return super.dispose(),this.bG=void 0,this.vG&&(this.RR.yV(this.vG),this.vG=void 0),this.xG&&(this.RR.yV(this.xG),this.xG=void 0),this.VG&&(this.RR.yV(this.VG),this.VG=void 0),this.NG&&(this.RR.yV(this.NG),this.NG=void 0),this.OG&&(this.RR.yV(this.OG),this.OG=void 0),this.MG=void 0,this}VR(){return this}cs(t){super.cs(t);for(const e of this._G)e.cs(t);return this}bt(){return this.Ya.max.x}vt(){return this.Ya.min.x}Mt(){return this.Ya.max.y}xt(){return this.Ya.min.y}vl(){return Ti(this.lu)}bl(){return Ti(this.lu)}}class pl{constructor(t,e){this.GG=!1,this.WG=!1,this.UG=!1,this.dt=t,this.YG=e,this.YG.Uo("DataPattern",i=>{i.pattern!=="ProgressiveX"&&i.pattern!=="RegressiveX"||(this.GG="x"),i.pattern!=="ProgressiveY"&&i.pattern!=="RegressiveY"||(this.GG="y"),i.pattern!=="RegressiveX"&&i.pattern!=="RegressiveY"||(this.WG=!0),i.regularProgressiveStep===!0&&(this.UG=!0)})}calculateUserDataPointsProgressiveRange(t){if(t.length===0)throw new Error("calculateUserDataPointsProgressiveRange called with 0 data points");return{start:this.GG==="x"?t[0].x:t[0].y,end:this.GG==="x"?t[t.length-1].x:t[t.length-1].y}}calculateUserDataPointsBoundaries(t){return this.GG?this.GG==="x"?function(e){const i=e.length;if(i>0){const s=Math.max(e[i-1].x,e[0].x),n=Math.min(e[i-1].x,e[0].x);let o=e[0].y,h=e[0].y;for(let a=0;a<i;a+=1){const l=e[a];l.y>o&&(o=l.y),l.y<h&&(h=l.y)}return wt(N(n,h),N(s,o))}return Kt}(t):function(e){const i=e.length;if(i>0){const s=Math.max(e[i-1].y,e[0].y),n=Math.min(e[i-1].y,e[0].y);let o=e[0].x,h=e[0].x;for(let a=0;a<i;a+=1){const l=e[a];l.x>o&&(o=l.x),l.x<h&&(h=l.x)}return wt(N(h,n),N(o,s))}return Kt}(t):ce(t)}calculateAvgStepBetweenDataPoints(t,e,i){return Math.abs(t-e)/(i-1)}}const ab=Math.min(1,1.5);class lb extends pl{constructor(t,e,i){super(t,e),this.HG=!1,this.$G={enabled:!1,totalDataPointsAtTime:0},this.XG=[],this.Ss=i,this.jG=t instanceof Gt?{type:"linear",scale:t}:t instanceof Ue?{type:"mixed",scale:t}:{type:"unknown"},this.YG.Uo("DataPattern",s=>{s.allowDataGrouping===!1&&(this.HG=!0)})}ZG(t,e=!1){if(this.HG||!this.GG||this.jG.type!=="linear")return!1;e===!1&&this.QG&&(clearTimeout(this.QG),this.QG=void 0);const i=this.GG==="x"?this.jG.scale.x.ig:this.jG.scale.y.ig;if(!i)throw new Error("CP helper has no information about Axis state.");const s=t.length;if(s<2)return!1;const n=t[0],o=t[s-1],h=this.calculateAvgStepBetweenDataPoints(this.GG==="x"?n.x:n.y,this.GG==="x"?o.x:o.y,s),a=this.jG.scale,l=Math.abs(this.GG==="x"?a.Wi().x:a.Wi().y),u=l/h,c=Math.floor(u*ab),d=c*h,f=X.performance.now(),g=!(f-i.ah<500)&&(i.ih?f-i.oh<1e3:f-i.sh<2e3||i.hh),y=s>2*this.$G.totalDataPointsAtTime;if(g&&!y)return this.QG=setTimeout(()=>this.JG(t),1e3),!1;const p=c>=10,x=this.$G.enabled?this.$G.columnWidthAxis/l<1.5:void 0,A=this.$G.enabled&&c>this.$G.dataPointsPerColumn?c/this.$G.dataPointsPerColumn>=2:void 0;let v;this.$G.enabled===!0?x?A&&(v={enabled:!0,columnWidthAxis:d,dataPointsPerColumn:c,totalDataPointsAtTime:s}):v=p?{enabled:!0,columnWidthAxis:d,dataPointsPerColumn:c,totalDataPointsAtTime:s}:{enabled:!1,totalDataPointsAtTime:s}:p&&(v={enabled:!0,columnWidthAxis:d,dataPointsPerColumn:c,totalDataPointsAtTime:s});const w=e===!1;return v?(w&&(this.$G=v),!0):(w&&(this.$G={...this.$G,totalDataPointsAtTime:s}),!1)}Qm(){this.KG=void 0,this.XG.length=0,this.QG&&(clearTimeout(this.QG),this.QG=void 0)}qG(t){if(t.length===0||this.HG||!this.GG||this.jG.type!=="linear"||!this.$G.enabled)return t;let e;e=this.XG.length>0?ai(this.XG,t,{canReturnB:!0}):t;const i=e.length,s=[];let n,o,h=this.KG===void 0,a=-1,l=-1,u=0,c=0;if(this.GG!=="x"||this.WG)if(this.GG==="x"&&this.WG){const f=this.$G.columnWidthAxis;let g=this.KG?this.KG.x:e[0].x,y=g-f;for(let p=0;p<i;p+=1){const x=e[p];x.x>=y?((!n||x.y>n.y)&&(n=x,a=p),(!o||x.y<o.y)&&(o=x,l=p),c=p):(n&&o&&(h&&s.push(e[0]),a<l?s.push(n,o):s.push(o,n)),h=!1,g=x.x,y=g-f,n=x,a=p,o=x,l=p,u=p,c=p)}}else if(this.GG!=="y"||this.WG){if(this.GG==="y"&&this.WG){const f=this.$G.columnWidthAxis;let g=this.KG?this.KG.y:e[0].y,y=g-f;for(let p=0;p<i;p+=1){const x=e[p];x.y>=y?((!n||x.x>n.x)&&(n=x,a=p),(!o||x.x<o.x)&&(o=x,l=p),c=p):(o&&n&&(h&&s.push(e[0]),a<l?s.push(n,o):s.push(o,n)),h=!1,g=x.y,y=g-f,n=x,a=p,o=x,l=p,u=p,c=p)}}}else{const f=this.$G.columnWidthAxis;let g=this.KG?this.KG.y:e[0].y,y=g+f;for(let p=0;p<i;p+=1){const x=e[p];x.y<=y?((!n||x.x>n.x)&&(n=x,a=p),(!o||x.x<o.x)&&(o=x,l=p),c=p):(o&&n&&(h&&s.push(e[0]),a<l?s.push(n,o):s.push(o,n)),h=!1,g=x.y,y=g+f,n=x,a=p,o=x,l=p,u=p,c=p)}}else{const f=this.$G.columnWidthAxis;let g=this.KG?this.KG.x:e[0].x,y=g+f;for(let p=0;p<i;p+=1){const x=e[p];x.x<=y?((!n||x.y>n.y)&&(n=x,a=p),(!o||x.y<o.y)&&(o=x,l=p),c=p):(n&&o&&(h&&s.push(e[0]),a<l?s.push(n,o):s.push(o,n)),h=!1,g=x.x,y=g+f,n=x,a=p,o=x,l=p,u=p,c=p)}}if(n||o){const f=e.slice(u,c+1);this.XG=f}else this.XG.length=0;const d=s.length;return d>0&&(this.KG=s[d-1]),s}tW(t){if(this.GG&&this.jG.type==="linear"){const e=this.GG==="x"?this.jG.scale.x.ig:this.jG.scale.y.ig;if(!e)throw new Error("CP helper has no information about Axis state.");if(e.Je===Fs.progressive||e.Je===Fs.regressive){const i=Math.abs(this.GG==="x"?this.jG.scale.x.getInnerInterval():this.jG.scale.y.getInnerInterval());if(this.$G.enabled)return 2*i/this.$G.columnWidthAxis;const s=t.length,n=t[0],o=t[s-1];return i/this.calculateAvgStepBetweenDataPoints(this.GG==="x"?n.x:n.y,this.GG==="x"?o.x:o.y,s)}}}iW(t,e,i){if(!this.GG)return e;const s=i.length;let n=uh(i,t.min,this.GG,this.WG,0,s-1);n===void 0&&(n=this.WG?s-1:0);let o=uh(i,t.max,this.GG,this.WG,0,s-1);return o===void 0&&(o=this.WG?0:s-1),1+Math.abs(o-n)}sW(){this.QG&&(clearTimeout(this.QG),this.QG=void 0)}JG(t){this.ZG(t,!0)&&this.Ss()}}class ub extends pl{renderVisibleOnly(t,e){const i=this.dt.x.getInnerStart(),s=this.dt.x.getInnerEnd(),n=Math.min(i,s),o=Math.max(i,s),h=this.dt.y.getInnerStart(),a=this.dt.y.getInnerEnd(),l=Math.min(h,a),u=Math.max(h,a);t.forEach((c,d)=>{c.existingCoordinatesCount<=1||c.boundaries.max.x<n||c.boundaries.min.x>o||c.boundaries.max.y<l||c.boundaries.min.y>u||e(c)})}}class Vc{constructor(t,e,i){this.eW=e,this.hW=i,this.rW=t,this.nW=[]}oW(t,e,i,s){const n=t.length;if(n===0)return;let o=t,h=n,a=this.rW[this.rW.length-1];do{const l=this.rW.length;let u;a||(a=this.aW(e,h)),a&&a.allocatedCoordinatesCount-a.existingCoordinatesCount==0&&(a=void 0);let c=0;if(this.hW&&l>0&&(a===void 0||a.existingCoordinatesCount===0)){const d=this.rW[l-1].lastDataPoint;d?(o.splice(0,0,d),c=1,h+=1):console.error("SegmentationHelper _connectSegments = true, but segment has no lastDataPoint information!")}if(a)u=Math.min(h,a.allocatedCoordinatesCount-a.existingCoordinatesCount),s(a,o.slice(0,u),u,c);else{const d=Math.ceil(e)+c;u=Math.min(d,h);const f={...i(d,o.slice(0,u),u,c),isDropped:!1};this.rW.push(f)}u>0&&(h>u?(o=o.slice(u),h=o.length):(o=[],h=0))}while(h>0);this.lW()}uW(t){const e=t,i=this.rW.indexOf(e);i>=0&&this.rW.splice(i,1),e.droppedTimestamp=X.performance.now(),this.nW.push(e)}cW(){this.rW.slice().forEach(t=>this.uW(t))}dW(){this.rW.forEach(t=>this.eW(t)),this.nW.forEach(t=>this.eW(t)),this.rW.length=0,this.nW.length=0}aW(t,e){const i=2*t/3,s=4*t/3,n=this.nW.findIndex(o=>o.allocatedCoordinatesCount>=i&&o.allocatedCoordinatesCount<=s);if(n>=0){const o=this.nW[n];return this.nW.splice(n,1),this.rW.push(o),o}}lW(){if(this.nW.length>5){const t=X.performance.now();for(let e=0;e<this.nW.length-5;e+=1){const i=this.nW[e];(i.droppedTimestamp===void 0||t-i.droppedTimestamp>=1e4)&&(this.eW(i),this.nW.splice(e,1),e-=1)}}}}class em extends pl{fW(t,e){if(!e||typeof e!="object")return 0;const i=this.dt.x.getInnerStart(),s=this.dt.x.getInnerEnd(),n=Math.min(i,s),o=Math.max(i,s),h=this.dt.y.getInnerStart(),a=this.dt.y.getInnerEnd(),l=Math.min(h,a),u=Math.max(h,a);if("maxDataPointCount"in e)return this.AW(t,e.maxDataPointCount,n,o,l,u);if("minDataPointCount"in e)return this.gW(t,e.minDataPointCount,n,o,l,u);if("progressiveDataCleaningThreshold"in e)return this.mW(t,e.progressiveDataCleaningThreshold,n,o,l,u);throw new Error(`Unimplemented data cleaning configuration: ${JSON.stringify(e)}`)}AW(t,e,i,s,n,o){if(e===void 0||e<=0)return 0;const h=t.reduce((u,c)=>u+c.existingDataPointsCount,0);if(h<=e)return 0;let a=0,l=h;for(let u=0;u<t.length;u+=1){const c=t[u];l>e&&(a+=1,l-=c.existingDataPointsCount)}return a}mW(t,e,i,s,n,o){if(e===void 0||!this.GG)return 0;let h=0;for(let a=0;a<t.length;a+=1){const l=t[a],u=this.WG?this.GG==="x"?l.boundaries.min.x>s:l.boundaries.min.y>o:this.GG==="x"?l.boundaries.max.x<i:l.boundaries.max.y<n;if(!((this.WG?this.GG==="x"?l.boundaries.min.x>e:l.boundaries.min.y>e:this.GG==="x"?l.boundaries.max.x<e:l.boundaries.max.y<e)&&u&&l.existingCoordinatesCount>2))break;h+=1}return h}gW(t,e,i,s,n,o){if(e===void 0||e===0)return 0;let h=0,a=0;for(let l=t.length-1;l>=0;l-=1){const u=t[l];if(a>e)if(this.GG){if(this.WG?this.GG==="x"?u.boundaries.min.x>s:u.boundaries.min.y>o:this.GG==="x"?u.boundaries.max.x<i:u.boundaries.max.y<n){h=1+l;break}}else u.boundaries.max.x<i||u.boundaries.min.x>s||u.boundaries.max.y<n||u.boundaries.min.y>o?h+=1:h=0;a+=u.existingDataPointsCount}return h}yW(t,e){const i=t.reduce((s,n)=>Bi(s,n.boundaries),Kt);if(e&&"progressiveDataCleaningThreshold"in e&&e.progressiveDataCleaningThreshold){const s=e.progressiveDataCleaningThreshold;this.GG!=="x"||this.WG?this.GG==="x"&&this.WG?i.max.x=Math.min(i.max.x,s):this.GG!=="y"||this.WG?this.GG==="y"&&this.WG&&(i.max.y=Math.min(i.max.y,s)):i.min.y=Math.max(i.min.y,s):i.min.x=Math.max(i.min.x,s)}return i}}class cb extends gu{constructor(t,e,i,s,n,o,h,a){super(t,e,i,s,n),this.aE=new es,this.QM=[],this.pW=new ub(this.dt,this),this.SW=new lb(this.dt,this,()=>this.us.Ss()),this.vW=new Vc(this.QM,p=>{p.coordsBuffer&&this.RR.yV(p.coordsBuffer),p.xG&&this.RR.yV(p.xG)},!0),this.bW=new em(this.dt,this),this.xW=0,this.MW=0,this._W=!1,this.AN=Ei({lineStyleSolid:()=>pi(this.lu)&&this.lu,lineStyleDashed:()=>rl(this.lu)&&this.lu,strokeFillSolid:()=>{const p=this.lu.getFillStyle();return Nt(p)&&p},strokeFillLinearGradient:()=>{const p=this.lu.getFillStyle();return ve(p)&&p},strokeFillRadialGradient:()=>{const p=this.lu.getFillStyle();return Ae(p)&&p},strokeFillPaletted:()=>{const p=this.lu.getFillStyle();return Be(p)&&p}}),this.nN=e,this.gN=o,this.mN=h,this.Un=a,this.bG={type:"none"},this.RR=t.oN(),this.rN=t,this.SG=this.RR.eO;const l=this.dt._i(),u=(a==null?void 0:a.individualLookupValuesEnabled)===!0;let c,d,f,g=0;l||(c=g,g+=2),l&&(d=g,g+=4),u&&(f=g,g+=1);const y=((p,x)=>x?(A,v)=>((w,E)=>{if(!E){const m=w.length,S=new Float32Array(3*m);for(let b=0,M=0;b<m;b+=1){const R=w[b];S[M+0]=R.x,S[M+1]=R.y,S[M+2]=R.value!==void 0?R.value:0,M+=3}return S}const C=w.length,k=new Float32Array(5*C);let F=0;for(let m=0;m<C;m+=1){const S=w[m],b=Math.fround(S.x),M=Math.fround(S.y);k[F+0]=b,k[F+1]=M,k[F+2]=S.x-b,k[F+3]=S.y-M,k[F+4]=S.value!==void 0?S.value:0,F+=5}return k})(A,p):(A,v)=>cs(A,p))(l,u);this.wW={individualLookupValuesEnabled:u,attributesPerVertex:g,attributeOffsetCoordinateLowPrecision:c,attributeOffsetCoordinateHighPrecision:d,attributeOffsetLookUpValue:f,prepareRenderData:(p,x)=>y(p,this.lu.getFillStyle())}}kW(t,e,i){const s=new Float32Array(2*e);let n=0,o=i||t[0];for(let h=0;h<e;h+=1){const a=t[h];this.xW+=Math.abs(o.x-a.x),this.MW+=Math.abs(o.y-a.y),s[n]=this.xW,s[n+1]=this.MW,n+=2,o=a}return s}Ps(){const t=this.Qa,e=this.lu,i=this.ra(),s=this.$a,n=s.length,o=n>0,h=this.Bo.M(),a=this.Bo.i,l=this.AN.lineStyleSolid(i),u=this.AN.lineStyleDashed(i),c=l||u,d=c&&c.getThickness(),f=this.AN.strokeFillSolid(i),g=this.AN.strokeFillLinearGradient(i),y=this.AN.strokeFillRadialGradient(i),p=this.AN.strokeFillPaletted(i),x=f||g||y||p,A=this.wW.individualLookupValuesEnabled;if(u&&this.dt instanceof Ue)return X.console.error("LightningChart JS DashedLine is not supported on logarithmic axis"),this;o&&(this.yu=ai(this.yu,s,{canReturnB:!0}),this.Ha+=n);let v=this.pu.i;const w=this.bW.fW(this.QM,this.pu.M());if(w>0){let m=0;for(let S=0;S<w;S+=1){const b=this.QM[0];m+=b.existingDataPointsCount,b.existingDataPointsCount=0,b.existingCoordinatesCount=0,b.jointPointsCount=0,b.boundaries=Kt,b.lastDataPoint=void 0,this.vW.uW(b)}this.yu=this.yu.slice(m),this.Ha=this.yu.length,v=!0}let E=s,C=!1;(this.SW.ZG(this.yu)||t)&&(C=!0),u&&!this._W?(C=!0,this._W=!0,this.vW.dW()):!u&&this._W&&(this.QM.forEach(m=>{m.xG&&(this.RR.yV(m.xG),m.xG=void 0)}),this._W=!1),C&&(this.SW.Qm(),this.QM.forEach(m=>{m.existingDataPointsCount=0,m.existingCoordinatesCount=0,m.jointPointsCount=0,m.boundaries=Kt,m.lastDataPoint=void 0}),this.vW.cW(),E=this.yu,this.xW=0,this.MW=0);const k=this.SW.qG(E),F=k.length;if(F>0){let m=this.SW.tW(this.yu)||(this.Uo("ApplicationType",S=>S.type==="InternalUI")?this.Ha:1e5);F/m>10&&(m=F/10),this.vW.oW(k,m,(S,b,M,R)=>{const T=this.pW.calculateUserDataPointsBoundaries(b),z=this.SW.iW(T,M,this.yu)-R;return this.TW=b[M-1],{allocatedCoordinatesCount:S,existingDataPointsCount:z,existingCoordinatesCount:M,jointPointsCount:R,boundaries:T,coordsBuffer:this.RR.EV(S*this.wW.attributesPerVertex,this.wW.prepareRenderData(b,M)),lastDataPoint:b[M-1],xG:this._W?this.RR.EV(2*S,this.kW(b,M,this.TW)):void 0}},(S,b,M,R)=>{const T=Bi(S.boundaries,this.pW.calculateUserDataPointsBoundaries(b)),z=this.SW.iW(T,S.existingCoordinatesCount+M,this.yu)-(S.jointPointsCount+R);this.RR.zV(S.coordsBuffer,S.existingCoordinatesCount*this.wW.attributesPerVertex,this.wW.prepareRenderData(b,M)),this._W&&S.xG&&this.RR.zV(S.xG,2*S.existingCoordinatesCount,this.kW(b,M,this.TW)),this.TW=b[M-1],S.jointPointsCount+=R,S.lastDataPoint=b[M-1],S.existingDataPointsCount=z,S.existingCoordinatesCount+=M,S.boundaries=T})}if(v&&(this.Ya=this.bW.yW(this.QM,this.pu.M())),this.aE.mV(this.dt),y?this.DN=qi(this.Eo||this.Ya,this.dt,y.getPosition(),y.getExtent(),y.getShape(),this.RR.$z()):g?this.LN=Ji(this.Eo||this.Ya,this.dt,g.getAngle(!0),this.RR.$z()):(this.DN=void 0,this.LN=void 0),i||a){if(p&&p.getLookUpProperty()==="value"&&!A){const m='LCJS misusage error: Series individualLookupValuesEnabled flag must be set if using PalettedFill with lookUpProperty="value" !';throw X.alert(m),new Error(m)}if(x&&c&&d!==!1){const m=d===-1?"primitive":"triangulated",S=g?["gradient",g]:y?["gradient",y]:p?["lookup",p.getLookUpProperty(),p.lut]:"uniform";this.bG=m==="primitive"?{type:m,shader:this.RR.oz(G["2D"],G.Color({dataType:S}),G.VertexLocation({axisWorldTranslation:pt(this.dt),normalSource:void 0}),u&&G.StippleTexture),mousePickingShader:h?this.RR.oz(G["2D"],G.MousePicking,G.VertexLocation({axisWorldTranslation:pt(this.dt),normalSource:void 0}),u&&G.StippleTexture):void 0,lineStyleSolid:l,lineStyleDashed:u,fillStyleSolid:f,fillStyleLinearGradient:g,fillStyleRadialGradient:y,fillStylePaletted:p}:m==="triangulated"?{type:m,shader:this.RR.oz(G["2D"],G.Color({dataType:S}),G.LineInstanced2D({axisWorldTranslation:pt(this.dt),normalSource:void 0}),this.SG?G.AliasedEdge:void 0,u&&G.StippleTextureInstanced),mousePickingShader:h?this.RR.oz(G["2D"],G.MousePicking,G.LineInstanced2D({axisWorldTranslation:pt(this.dt),normalSource:void 0}),u&&G.StippleTextureInstanced):void 0,geometry:No(this.RR,d),thickness:d,lineStyleSolid:l,lineStyleDashed:u,fillStyleSolid:f,fillStyleLinearGradient:g,fillStyleRadialGradient:y,fillStylePaletted:p}:{type:"none"}}else this.bG={type:"none"}}return this.MG=u?this.RR.IO(u.getPattern()):void 0,this.fu(e),this.Qa=!1,this.$a=[],this.Bo.i=!1,this.pu.i=!1,this}zL(t){const e=this.RR.gl,i=this.bG;if(!i||i.type==="none")return this;const s=t===1?i.mousePickingShader:i.shader;if(!s)return this;const{lineStyleDashed:n,fillStyleSolid:o,fillStyleLinearGradient:h,fillStyleRadialGradient:a,fillStylePaletted:l}=i;return this.RR.jR(s).aV(s,(u,c,d,f)=>{let g=!1;if(this.RR.dV(u("uIsHighlighted"),t===1||t===2?0:this.zo).AR(u("uHighlightColorOffset"),t===1||t===2?ue:this.Go).dV(u("uRenderEffectMask"),t===2?1:0),this.dt instanceof Gt||this.dt instanceof Gi?this.RR.uV(u("uScale"),this.aE.fV()).uV(u("uDisp"),this.aE.AV()).uV(f("uScaleStart_highpart"),this.aE.VO()).uV(f("uScaleStart_lowpart"),this.aE.OO()):this.dt instanceof Ue&&this.RR.uV(f("uScaleStart"),this.aE.MixedScaleXY.uScaleStart).uV(f("uScaleStartLog"),this.aE.MixedScaleXY.uScaleStartLog).uV(f("uScaleInterval"),this.aE.MixedScaleXY.uScaleInterval).uV(f("uScaleIntervalLog"),this.aE.MixedScaleXY.uScaleIntervalLog).uV(u("uViewportStart"),this.aE.MixedScaleXY.uViewportStart).uV(u("uViewportSize"),this.aE.MixedScaleXY.uViewportSize),t===1)this.RR.AR(u("uColor"),this.mN);else if(o)this.RR.AR(u("uColor"),o.getColor());else if(a){if(!this.DN)return!1;this.RR.mO(d,this.DN,a)}else if(h){if(!this.LN)return!1;this.RR.yO(d,this.LN,h)}else if(l){const y=Xi(l,this,void 0);if(!y&&l.lut.percentageValues)return!1;this.RR.LO(d,l.lut,y)}return this.pW.renderVisibleOnly(this.QM,y=>{const{coordsBuffer:p}=y;if(!p)return;e.bindBuffer(e.ARRAY_BUFFER,p);const x=i.type==="triangulated"?Bs.fG:Kn.fG;if(this.dt._i()||this.wW.attributeOffsetCoordinateLowPrecision===void 0?this.dt._i()&&this.wW.attributeOffsetCoordinateHighPrecision!==void 0&&x(!0,this.RR,p,d,this.wW.attributesPerVertex,this.wW.attributeOffsetCoordinateHighPrecision):x(!1,this.RR,p,d,this.wW.attributesPerVertex,this.wW.attributeOffsetCoordinateLowPrecision),n){if(!y.xG||!this.MG)return;i.type==="triangulated"?Bs.AG(this.RR,d,y.xG,c("aLengthSoFarA"),c("aLengthSoFarB"),2,0):Kn.AG(this.RR,d,y.xG,c("aLengthSoFar"),2,0),this.RR.uV(u("uStippleCount"),[this.us.oi().x/this.MG.BO,this.us.oi().y/this.MG.BO]).dV(f("uStippleTextureWidthLimiter"),this.MG.DO/this.MG.BO).dV(u("uStippleScale"),n.getPatternScale()).cV(u("uStippleTexture"),this.MG.PO,1)}if(l&&l.lookUpProperty==="value"&&this.wW.attributeOffsetLookUpValue!==void 0&&t!==1)if(i.type==="triangulated"){const A=c("aLookupValueA");e.vertexAttribPointer(A,1,e.FLOAT,!1,this.wW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.wW.attributeOffsetLookUpValue*Float32Array.BYTES_PER_ELEMENT),this.RR.UV(A,1),e.enableVertexAttribArray(A);const v=c("aLookupValueB");e.vertexAttribPointer(v,1,e.FLOAT,!1,this.wW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,(this.wW.attributeOffsetLookUpValue+this.wW.attributesPerVertex)*Float32Array.BYTES_PER_ELEMENT),this.RR.UV(v,1),e.enableVertexAttribArray(v)}else{const A=c("aLookupValue");e.vertexAttribPointer(A,1,e.FLOAT,!1,this.wW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.wW.attributeOffsetLookUpValue*Float32Array.BYTES_PER_ELEMENT),e.enableVertexAttribArray(A)}if(i.type==="triangulated"){const{thickness:A}=i;Bs.zL(this.rN,i.geometry,d,this.SG&&t!==1,t===1,A,y.existingCoordinatesCount-1)}else Kn.yG(this.rN,y.existingCoordinatesCount);g=!0}),e.bindBuffer(e.ARRAY_BUFFER,null),g}),this}lN(t){return this.gN===t&&{}}nl(t,e){return Array.isArray(t)||(t=[t]),this.$a=ai(this.$a,t,{canReturnB:!0}),this.Ya=Bi(this.Ya,e||e||this.pW.calculateUserDataPointsBoundaries(t)),this}Nt(){return super.Nt(),this.xW=0,this.MW=0,this.TW=void 0,this}dispose(){return super.dispose(),this.vW.dW(),this.SW.sW(),this.bG={type:"none"},this.MG=void 0,this}VR(){return this}Ux(t){this.al()>0&&this.Ps();const e=this.tl(),i=fc(e,t,this.Za,this.Fl,this.Il,this.dt,this.engine.dt,this.Ya,this.pW.GG,this.pW.WG);return i!==void 0?e[i]:void 0}sw(t){this.al()>0&&this.Ps();const e=this.tl(),i=e.length;if(i===0)return;const s=this.Fl?1:0,n=i-(this.Il?2:1);if(this.Za===Je.Nearest){let o,h,a=st;for(let l=0;l<i;l+=1){const u=K(e[l],this.dt,this.us.dt);if(h!==void 0){const c=Gp(h,u,t),d=(c.x-t.x)**2+(c.y-t.y)**2;d<a&&(a=d,o=c)}h=u}return o!==void 0?K(o,this.us.dt,this.dt):void 0}if(this.pW.GG==="x"&&this.Za===Je.NearestX||this.pW.GG==="y"&&this.Za===Je.NearestY){const o=Xg(e,K(t,this.us.dt,this.dt),this.pW.GG,this.pW.WG,s,n);return o?Dr(e[o.a],e[o.b],o.lerpAmount):void 0}return this.Ux(t)}bt(){return this.Ya.max.x}vt(){return this.Ya.min.x}Mt(){return this.Ya.max.y}xt(){return this.Ya.min.y}vl(){return Ti(this.lu)}bl(){return Ti(this.lu)}}class mn extends _o{constructor(t,e,i,s){super(t),this.dG=i,this.FW=e,this.IW=cs(e,!1),this.PW=e.length,this.wR=t.nV(this.IW);const n=ce(this.FW);this.X=N(n.max.x-n.min.x,n.max.y-n.min.y),this.DW=s}BW(t){return t>1}Ky(t,e,i,s,n){return typeof s=="object"?e?this.RR.$V(t.attribute("aOffsetScale"),e,1).uV(t.uniform("uSizePixels"),[s.width,s.height]):this.RR.dV(t.uniform("uOffsetScale"),s.scale).uV(t.uniform("uSizePixels"),[s.width,s.height]):n?e?this.RR.$V(t.attribute("aOffsetPixels"),e,1):this.RR.dV(t.uniform("uOffsetPixels"),s):this.RR.dV(t.uniform("uPointSize"),s),n?this.RR.lV(this.wR,0,{location:t.attribute("aInstanceGeo"),size:2}).QV(this.dG,0,this.PW,i):this.RR.Ky(this.RR.gl.POINTS,i),this}kz(){this.RR.yV(this.wR)}}const jf=(r,t=0)=>{const e=[N(-.5,-.5),N(.5,-.5),N(.5,.5),N(-.5,.5)];return new mn(r,e,r.gl.TRIANGLE_FAN,t)},qf=(r,t=0)=>{const i=[N(-.5,-.05),N(.5,-.05),N(.5,.05),N(.5,.05),N(-.5,.05),N(-.5,-.05),N(-.05,-.5),N(.05,-.5),N(.05,.5),N(.05,.5),N(-.05,.5),N(-.05,-.5)];return new mn(r,i,r.gl.TRIANGLES,t)},_c=(r,t,e)=>{if(Rn(r))return _c(ae.Square,t,e);let i=t._V.vz.get(r);if(r===ae.Circle){const s=e<=3?4:e<=5?8:e<=10?16:24;return i=t._V.bz.get(s)||((n,o,h=0)=>{const a=function(l=25){return _a(N(0,0),0,360,.5,.5,l)[0]}(o);return new mn(n,a,n.gl.TRIANGLE_FAN,h)})(t,s),t._V.bz.set(s,i),i}if(!i){switch(r){case ae.Triangle:i=((s,n=0)=>{const o=function(){const h=[];return h.push(N(-.5773502691892515,.3333333333333333)),h.push(N(0,-.6666666666666666)),h.push(N(1.154700538378503/2,.3333333333333333)),h}();return new mn(s,o,s.gl.TRIANGLES,n)})(t);break;case ae.Square:i=jf(t);break;case ae.Plus:i=qf(t);break;case ae.Cross:i=qf(t,45);break;case ae.Diamond:i=jf(t,45);break;case ae.Arrow:i=((s,n=0)=>{const h=[N(-.05,-.5),N(.05,-.5),N(.05,.45),N(.05,.45),N(-.05,.45),N(-.05,-.5),N(-.5,0),N(-.4,0),N(0,.4),N(0,.4),N(0,.5),N(-.5,0),N(.5,0),N(.4,0),N(0,.4),N(0,.4),N(0,.5),N(.5,0)];return new mn(s,h,s.gl.TRIANGLES,n)})(t);break;case ae.Star:i=((s,n=0)=>new mn(s,[{x:0,y:0},{x:0,y:.5},{x:.1,y:.1},{x:.5,y:.1},{x:.2,y:-.1},{x:.3,y:-.5},{x:0,y:-.25},{x:-.3,y:-.5},{x:-.2,y:-.1},{x:-.5,y:.1},{x:-.1,y:.1},{x:0,y:.5}],s.gl.TRIANGLE_FAN,n))(t);break;case ae.Minus:i=((s,n=0)=>{const h=[N(-.5,-.05),N(.5,-.05),N(.5,.05),N(.5,.05),N(-.5,.05),N(-.5,-.05)];return new mn(s,h,s.gl.TRIANGLES,n)})(t);break;default:return wo(0,"LightningChart JS unidentified point shape")}t._V.vz.set(r,i)}return i};class db extends gc{constructor(t,e,i,s,n,o,h){super(t,e,i,s,n),this.aE=new es,this.dN=wt(gr(ht,ht),gr(st,st)),this.AN=Ei({pointStyleSolid:()=>Nt(this.be)&&this.be,pointStyleRadialGradient:()=>Ae(this.be)&&this.be,pointStyleLinearGradient:()=>ve(this.be)&&this.be,pointStylePaletted:()=>Be(this.be)&&this.be,pointStyleIndividual:()=>Ri(this.be)&&this.be}),this.rN=t,this.nN=e,this.gN=o,this.mN=h,this.RR=t.oN()}Ps(){var t;const e=this.Bo.M(),i=this.Bo.i,s=this.$a,n=s.length,o=n>0,h=this.Na.M(),a=this.be,l=this.size.M(),u=this.Na.i||this.Aa.i,c=this.dt.Ni(),d=this.size.i||this.Na.i,f=this.Qa||s&&s.length>0,g=c||d,y=this.ta(),p=this.AN.pointStyleSolid(y),x=this.AN.pointStyleRadialGradient(y),A=this.AN.pointStyleLinearGradient(y),v=this.AN.pointStylePaletted(y),w=this.AN.pointStyleIndividual(y),E=p||x||A||v||w;if(o&&(this.Oa=ai(this.Oa,s,{canReturnB:!0}),this.Ha+=n),o||this.Qa){this.Ya=this.ja?Bi(this.Ya,this.ja):Bi(this.Ya,ce(this.Oa));const F=cs(this.Oa,this.dt._i());this.LW=this.Ha,this.RW=this.RR.nV(F,!1,this.RW)}this.aE.mV(this.dt),a!==ft?g&&(this.EW&&(this.EW=void 0),l>1||this.Ga.M()?l<=1&&!this.Ga.M()?this.dG=this.RR.gl.POINTS:(this.EW=_c(h,this.RR,this.Ga.M()?25:l),this.dG=this.EW.dG):this.dG=this.RR.gl.POINTS):this.EW&&(this.EW=void 0);const C=((t=this.EW)===null||t===void 0?void 0:t.DW)||0,k=this.Aa.M()+C;if(d||y||i||u){const F=this.Ga.M()?"attribute":"uniform",m=l<=1&&G.PointSize(F),S=G.VertexLocation({offset:l>1?{dataType:F,sizeUnit:"px",symmetric:!0,rotation:(this.Wa.M()||k%360!=0)&&{dataType:this.Wa.M()?"attribute":"uniform"}}:void 0,axisWorldTranslation:pt(this.dt),normalSource:void 0});this.cE=E?this.RR.oz(G["2D"],m,S,p?G.Color({dataType:"uniform"}):w?G.Color({dataType:"attribute"}):v?G.Color({dataType:["lookup",v.getLookUpProperty(),v.lut]}):x?G.Color({dataType:["gradient",x]}):A?G.Color({dataType:["gradient",A]}):void 0):void 0,this.EN=e&&E?this.RR.oz(G["2D"],m,S,G.MousePicking):void 0}if(f||y){const F=this.Oa.length;if(Ri(a)&&this.LW&&this.LW>0){const m=a.getFallbackColor(),S=new Float32Array(4*F);for(let b=0;b<F;b+=1){const M=this.Oa[b];M.color?(S[4*b+0]=M.color.r,S[4*b+1]=M.color.g,S[4*b+2]=M.color.b,S[4*b+3]=M.color.a):(S[4*b+0]=m.r,S[4*b+1]=m.g,S[4*b+2]=m.b,S[4*b+3]=m.a)}this.zW=this.RR.nV(S,!0,this.zW)}else this.zW&&this.RR.yV(this.zW),this.zW=void 0;if(this.Ga.M()&&this.LW&&this.LW>0&&l>1){const m=new Float32Array(F);for(let S=0;S<F;S+=1){const b=this.Oa[S];b.size?m[S]=b.size:m[S]=l}this.VW=this.RR.nV(m,!0,this.VW)}else this.VW&&(this.RR.yV(this.VW),this.VW=void 0);if(this.Wa.M()&&this.LW&&this.LW>0&&l>1){const m=new Float32Array(2*F),S=hs(k),b=Math.sin(S),M=Math.cos(S);for(let R=0;R<F;R+=1){const T=this.Oa[R];if(T.rotation){const z=hs(T.rotation+C);m[2*R+0]=Math.sin(z),m[2*R+1]=Math.cos(z)}else m[2*R+0]=b,m[2*R+1]=M}this.OW=this.RR.nV(m,!0,this.OW)}else this.OW&&(this.RR.yV(this.OW),this.OW=void 0);if(this.Ua.M()&&this.LW&&this.LW>0){const m=new Float32Array(F);for(let S=0;S<F;S+=1){const b=this.Oa[S];"value"in b&&b.value!==void 0&&b.value!==null?m[S]=b.value:m[S]=-34028234663852886e22}this.NW=this.RR.nV(m,!0,this.NW)}else this.NW&&(this.RR.yV(this.NW),this.NW=void 0);this.ha(this.be)}if(Ae(a)?this.MN=qi(Xr(this.Eo||this.Ya,{x:this.vl(),y:this.bl()},this.dt),this.dt,a.getPosition(),a.getExtent(),a.getShape(),this.RR.$z()):ve(a)?this._N=Ji(Xr(this.Eo||this.Ya,{x:this.vl(),y:this.bl()},this.dt),this.dt,a.getAngle(!0),this.RR.$z()):(this.MN=void 0,this._N=void 0),f&&(this.Ya&&f&&(this.dN=Xr(this.Ya,{x:l,y:l},this.dt)),this.$a=[],this.Xa=0,this.ja=Kt),this.Ja===void 0&&v&&v.lookUpProperty==="value"&&v.lut.percentageValues){let F=ht,m=st;for(let S=0;S<this.Oa.length;S+=1){const b=this.Oa[S];b.value!==void 0&&b.value<m&&(m=b.value),b.value!==void 0&&b.value>F&&(F=b.value)}this.Ja={min:m,max:F}}return this.ia=a,this.Na.i=!1,this.size.i=!1,this.Aa.i=!1,this.Bo.i=!1,this.Qa=!1,this}zL(t){const e=t===1?this.EN:this.cE,i=this.RW,s=this.LW;return e&&i&&s&&(this.RR.jR(e),this.RR.aV(e,(n,o,h,a)=>{var l;if(this.dt instanceof Gt||this.dt instanceof Gi?this.RR.uV(n("uScale"),this.aE.fV()).uV(n("uDisp"),this.aE.AV()).uV(a("uScaleStart_highpart"),this.aE.VO()).uV(a("uScaleStart_lowpart"),this.aE.OO()):this.dt instanceof Ue&&this.RR.uV(a("uScaleStart"),this.aE.MixedScaleXY.uScaleStart).uV(a("uScaleStartLog"),this.aE.MixedScaleXY.uScaleStartLog).uV(a("uScaleInterval"),this.aE.MixedScaleXY.uScaleInterval).uV(a("uScaleIntervalLog"),this.aE.MixedScaleXY.uScaleIntervalLog).uV(n("uViewportStart"),this.aE.MixedScaleXY.uViewportStart).uV(n("uViewportSize"),this.aE.MixedScaleXY.uViewportSize),this.RR.vO(h,i,this.dt._i(),this.EW?1:void 0).dV(n("uIsHighlighted"),t===1||t===2?0:this.zo).AR(n("uHighlightColorOffset"),t===1||t===2?ue:this.Go).dV(n("uRenderEffectMask"),t===2?1:0).dV(a("uDevicePixelRatio"),this.RR.$z()),this.EW){const d=o("aInstanceGeo");this.RR.GV(d,this.EW.wR).UV(d,0)}if(t===1)this.RR.AR(n("uColor"),this.mN);else if(Nt(this.be))this.RR.AR(n("uColor"),this.be.getColor());else if(Ri(this.be)&&this.zW){const d=o("aColor");this.RR.HV(d,this.zW),this.dG!==this.RR.gl.POINTS&&this.RR.UV(d,1)}else if(Be(this.be)){if(this.be.getLookUpProperty()==="value"&&this.NW){const f=o("aLookupValue");this.RR.$V(f,this.NW),this.dG!==this.RR.gl.POINTS&&this.RR.UV(f,1)}const d=Xi(this.be,this,this.Ja);if(!d&&this.be.lut.percentageValues)return!1;this.RR.LO(h,this.be.lut,d)}else if(Ae(this.be)){if(!this.MN)return!1;this.RR.mO(h,this.MN,this.be)}else if(ve(this.be)){if(!this._N)return!1;this.RR.yO(h,this._N,this.be)}if(this.VW&&this.dG!==this.RR.gl.POINTS){const d=o("aOffsetPixels");this.RR.$V(d,this.VW),this.dG!==this.RR.gl.POINTS&&this.RR.UV(d,1)}else if(this.dG!==this.RR.gl.POINTS){const d=n("uOffsetPixels");this.RR.dV(d,this.size.M())}const u=(((l=this.EW)===null||l===void 0?void 0:l.DW)||0)+this.Aa.M();if(this.OW&&this.dG!==this.RR.gl.POINTS){const d=o("aRot");this.RR.GV(d,this.OW),this.dG!==this.RR.gl.POINTS&&this.RR.UV(d,1)}else if(this.dG!==this.RR.gl.POINTS&&u%360!=0){const d=hs(u),f=Math.sin(d),g=Math.cos(d);this.RR.uV(n("uRot"),[f,g])}if(this.dG===this.RR.gl.POINTS)this.RR.dV(n("uPointSize"),this.size.M());else{const d={x:2/this.us.oi().x,y:2/this.us.oi().y};this.RR.uV(n("uRatioPxClip"),[d.x,d.y])}let c=!1;return this.dG===this.RR.gl.POINTS?(this.RR.Ky(this.dG,s),c=!0):this.EW&&(this.RR.QV(this.dG,0,this.EW.PW,s),c=!0),c})),this}lN(t){return this.gN===t&&{}}Hc(t){this.al()>0&&this.Ps();const e=this.tl(),i=fc(e,t,this.Za,!1,!1,this.dt,this.us.dt,this.Ya,void 0,void 0);return i!==void 0?e[i]:void 0}Ce(t){return super.Ce(t)}bt(){return this.Ya.max.x}vt(){return this.Ya.min.x}Mt(){return this.Ya.max.y}xt(){return this.Ya.min.y}vl(){return this.Ga.M()?25:this.size.M()}bl(){return this.Ga.M()?25:this.size.M()}VR(){return this.RW&&(this.RR.yV(this.RW),this.RW=void 0),this.EW&&(this.EW=void 0),this.zW&&(this.RR.yV(this.zW),this.zW=void 0),this.OW&&(this.RR.yV(this.OW),this.OW=void 0),this.NW&&(this.RR.yV(this.NW),this.NW=void 0),this}}class fb extends el{constructor(t,e,i,s,n,o){super(t,e,i,s,n),this.bG={fill:void 0,border:void 0},this.aE=new es,this.Ya=Kt,this.GW=!1,this.WW=!1,this.UW=!1,this.YW=!1,this.HW=!1,this.Sd=[],this.AN=Ei({polygonStyleSolid:()=>Nt(this.be)&&this.be,polygonStyleImage:()=>Do(this.be)&&this.be,polygonStyleRadialGradient:()=>Ae(this.be)&&this.be,polygonStyleLinearGradient:()=>ve(this.be)&&this.be,polygonStylePaletted:()=>Be(this.be)&&this.be,polygonStyleIndividual:()=>Ri(this.be)&&this.be,lineStyleSolid:()=>pi(this.xe)&&this.xe,lineStyleFilled:()=>{const h=this.xe&&this.xe.getFillStyle();return Nt(h)&&h}}),this.rN=t,this.nN=e,this.FG=o,this.RR=t.oN(),this.SG=this.RR.eO}zr(){const t=this.FG(),e={ys:i=>this.PG(e,i),cs:i=>this.DG(e,i),pl:i=>this.$W(e,i),Yb:i=>this.XW(e,i),AR:i=>this.LG(e,i),Oa:[],u:void 0,jW:void 0,zo:0,ZW:!0,gN:t.id,mN:t.color};return this.Sd.push(e),e}Nt(){var t;return this.Sd.length=0,this.GW=!0,this.ji&&this.Tn&&((t=this.us.Cn)===null||t===void 0?void 0:t.entity)===this&&this.Tn(this,void 0,this.us.Cn.collectionMember),this}Ap(){return this.Sd}bd(t){var e;const i=this.Sd.indexOf(t);i>=0&&(this.Sd.splice(i,1),this.HW=!0,this.ji&&this.Tn&&((e=this.us.Cn)===null||e===void 0?void 0:e.entity)===this&&this.us.Cn.collectionMember===t&&this.Tn(this,void 0,this.us.Cn.collectionMember))}PG(t,e){var i;return t.ZW=e,this.HW=!0,this.ji&&this.Tn&&((i=this.us.Cn)===null||i===void 0?void 0:i.entity)===this&&this.us.Cn.collectionMember===t&&this.Tn(this,void 0,this.us.Cn.collectionMember),t}DG(t,e){return t.zo=e,this.YW=!0,t}$W(t,e){return t.Oa=e,this.GW=!0,t}XW(t,e){return t.u=e,this.WW=!0,t}LG(t,e){return t.jW=e==null?void 0:e.toUint32(),this.UW=!0,t}Ps(){const t=this.Bo.M(),e=this.Bo.i,i=this.ta(),s=this.YW,n=this.GW,o=this.WW,h=this.UW,a=this.HW,l=this.xe,u=this.ra(),c=this.Sd.filter(k=>k.ZW&&k.Oa.length>0);if(this.aE.mV(this.dt),(n||a)&&(this.Ya=Bi(...c.map(k=>ce(k.Oa)))),n||a){const k=cs(c.map(b=>[...b.Oa,b.Oa[0],{x:Number.NaN,y:Number.NaN}]).flat(),this.dt._i()),F=this.dt._i()?4:2;this.vG=this.RR.nV(k,!1,this.vG);let m=[];c.reduce((b,M)=>{const R=b,T=(M.Oa.length+1)*F,z=new Float32Array(k.buffer,R,T),P=hg(z,void 0,F),_=b/(Float32Array.BYTES_PER_ELEMENT*F);for(let V=0;V<P.length;V+=1)P[V]+=_;return m=ai(m,P,{canReturnB:!0}),R+(T+1*F)*Float32Array.BYTES_PER_ELEMENT},0);const S=new Uint32Array(m);this.QW=this.RR.OV(S,this.QW),this.JW=S.length,this.KW=k.length/F-1}const d=this.AN.polygonStyleSolid(i),f=this.AN.polygonStylePaletted(i),g=this.AN.polygonStyleIndividual(i),y=this.AN.polygonStyleRadialGradient(i),p=this.AN.polygonStyleLinearGradient(i),x=this.AN.polygonStyleImage(i),A=d||f||p||y||x||g,v=this.AN.lineStyleSolid(u),w=this.AN.lineStyleFilled(u),E=w,C=v&&Math.max(v.getThickness(),0);if((i||u||e)&&(this.bG.fill=A?{shader:this.RR.oz(G["2D"],d&&G.Color({dataType:"uniform"}),p&&G.Color({dataType:["gradient",p]}),y&&G.Color({dataType:["gradient",y]}),f&&G.Color({dataType:["lookup",f.getLookUpProperty(),f.lut]}),g&&G.Color({dataType:"attribute"}),x&&G.Color({dataType:["image",x]}),G.VertexLocation({axisWorldTranslation:pt(this.dt),normalSource:void 0}),G.AttributeHighlight),mousePicking:t?{shader:this.RR.oz(G["2D"],G.MousePickingAttribute,G.VertexLocation({axisWorldTranslation:pt(this.dt),normalSource:void 0}),G.AttributeHighlight)}:void 0,fillStyleSolid:d,fillStyleLinearGradient:p,fillStyleRadialGradient:y,fillStylePaletted:f,fillStyleImage:x,fillStyleIndividual:g}:void 0,this.bG.border=v&&E&&typeof C=="number"&&C!==0?{shader:this.RR.oz(G["2D"],G.Color({dataType:"uniform"}),G.LineInstanced2D({axisWorldTranslation:pt(this.dt),normalSource:void 0}),this.SG?G.AliasedEdge:void 0,G.AttributeHighlight),geometry:No(this.RR,C),mousePicking:t?{shader:this.RR.oz(G["2D"],G.MousePickingAttribute,G.LineInstanced2D({axisWorldTranslation:pt(this.dt),normalSource:void 0}),G.AttributeHighlight)}:void 0,fillStyleSolid:w,thickness:C}:void 0),s||n){const k=c.reduce((S,b)=>S+b.Oa.length+2,0),F=new Float32Array(k);let m=0;c.forEach(S=>{const b=S.Oa.length+2;for(let M=m;M<m+b;M+=1)F[M]=S.zo;m+=b}),this.qW=this.RR.nV(F,!0,this.qW)}if(t){if(n){const k=c.reduce((S,b)=>S+b.Oa.length+2,0),F=new Float32Array(4*k);let m=0;c.forEach(S=>{const b=S.Oa.length+2;for(let M=m;M<m+4*b;M+=4)F[M]=S.mN.r,F[M+1]=S.mN.g,F[M+2]=S.mN.b,F[M+3]=S.mN.a;m+=4*b}),this.tU=this.RR.nV(F,!1,this.tU)}}else this.tU&&(this.RR.yV(this.tU),this.tU=void 0);if(o||n&&f&&f.getLookUpProperty()==="value"){const k=c.reduce((b,M)=>b+M.Oa.length+2,0),F=new Float32Array(k);let m=0;const S={min:st,max:ht};c.forEach(b=>{const M=b.u!==void 0?b.u:-34028234663852886e22,R=b.Oa.length+2;for(let T=m;T<m+R;T+=1)F[T]=M;m+=R,S.min=Math.min(S.min,M),S.max=Math.max(S.max,M)}),this.iU=S,this.sU=this.RR.nV(F,!1,this.sU)}if(h||n&&g){const k=c.reduce((b,M)=>b+M.Oa.length+2,0),F=new Uint32Array(k);let m=0;const S=g?g.getFallbackColor().toUint32():vn.toUint32();c.forEach(b=>{const M=b.jW!==void 0?b.jW:S,R=b.Oa.length+2;for(let T=m;T<m+R;T+=1)F[T]=M;m+=R}),this.eU=this.RR.nV(F,!1,this.eU,Uint32Array)}return y?this.MN=qi(this.Eo||this.Ya,this.dt,y.getPosition(),y.getExtent(),y.getShape(),this.RR.$z()):p?this._N=Ji(this.Eo||this.Ya,this.dt,p.getAngle(!0),this.RR.$z()):(this.MN=void 0,this._N=void 0),this.hU=this.RR.RO(this,this.hU,x,void 0,n||a||this.dt.Ni(),(k,F,m)=>this.rU(k,F,m,c)),this.YW=!1,this.HW=!1,this.GW=!1,this.WW=!1,this.UW=!1,this.Bo.i=!1,this.ha(this.be),this.aa(l),this}zL(t){var e,i;const{fill:s,border:n}=this.bG,o=this.vG,h=this.qW,a=this.tU;if(!o||!h)return this;if(s){const{fillStyleSolid:l,fillStyleLinearGradient:u,fillStyleRadialGradient:c,fillStylePaletted:d,fillStyleImage:f,fillStyleIndividual:g}=s,y=this.QW,p=this.JW,x=t===1?(e=s.mousePicking)===null||e===void 0?void 0:e.shader:s.shader;if(!x||!o||!y||p===void 0)return this;this.RR.jR(x).aV(x,(A,v,w,E)=>{if(this.dt instanceof Gt||this.dt instanceof Gi?this.RR.uV(A("uScale"),this.aE.fV()).uV(A("uDisp"),this.aE.AV()).uV(E("uScaleStart_highpart"),this.aE.VO()).uV(E("uScaleStart_lowpart"),this.aE.OO()):this.dt instanceof Ue&&this.RR.uV(E("uScaleStart"),this.aE.MixedScaleXY.uScaleStart).uV(E("uScaleStartLog"),this.aE.MixedScaleXY.uScaleStartLog).uV(E("uScaleInterval"),this.aE.MixedScaleXY.uScaleInterval).uV(E("uScaleIntervalLog"),this.aE.MixedScaleXY.uScaleIntervalLog).uV(A("uViewportStart"),this.aE.MixedScaleXY.uViewportStart).uV(A("uViewportSize"),this.aE.MixedScaleXY.uViewportSize),this.RR.vO(w,o,this.dt._i(),void 0).XV(y).$V(v("aIsHighlighted"),h).AR(A("uHighlightColorOffset"),t===1||t===2?ue:this.Go).dV(A("uRenderEffectMask"),t===2?1:0),t===1){if(!a)return!1;this.RR.HV(v("aColor"),a)}else if(l)this.RR.AR(A("uColor"),l.getColor());else if(c){if(!this.MN)return!1;this.RR.mO(w,this.MN,c)}else if(u){if(!this._N)return!1;this.RR.yO(w,this._N,u)}else if(d){const C=Xi(d,this,this.iU);if(!C&&d.lut.percentageValues)return!1;if(this.RR.LO(w,d.lut,C),d.getLookUpProperty()==="value"){if(!this.sU)return!1;this.RR.$V(v("aLookupValue"),this.sU)}}else if(f){if(!this.hU)return!1;this.RR.AR(E("uColor"),f.getSurroundingColor()).cV(A("uColorTexture"),this.hU.texture.Gz()||this.hU.sourceMissingTexture,0).lV(this.hU.texCoordsBuffer,void 0,{location:v("aTextureCoord"),size:2}).LV(f.fitMode)}else if(g){if(!this.eU)return!1;const C=v("aColor");this.RR.gl.bindBuffer(this.RR.gl.ARRAY_BUFFER,this.eU),this.RR.gl.vertexAttribPointer(C,4,this.RR.gl.UNSIGNED_BYTE,!0,0,0),this.RR.gl.enableVertexAttribArray(C)}return this.RR.ZV(p,void 0,void 0,this.RR.gl.UNSIGNED_INT),!0})}if(n){const{geometry:l,fillStyleSolid:u,thickness:c}=n,d=this.KW,f=t===1?(i=n.mousePicking)===null||i===void 0?void 0:i.shader:n.shader;if(!f||!o||!d)return this;this.RR.jR(f).aV(f,(g,y,p,x)=>{if(this.dt instanceof Gt||this.dt instanceof Gi?this.RR.uV(g("uScale"),this.aE.fV()).uV(g("uDisp"),this.aE.AV()).uV(x("uScaleStart_highpart"),this.aE.VO()).uV(x("uScaleStart_lowpart"),this.aE.OO()):this.dt instanceof Ue&&this.RR.uV(x("uScaleStart"),this.aE.MixedScaleXY.uScaleStart).uV(x("uScaleStartLog"),this.aE.MixedScaleXY.uScaleStartLog).uV(x("uScaleInterval"),this.aE.MixedScaleXY.uScaleInterval).uV(x("uScaleIntervalLog"),this.aE.MixedScaleXY.uScaleIntervalLog).uV(g("uViewportStart"),this.aE.MixedScaleXY.uViewportStart).uV(g("uViewportSize"),this.aE.MixedScaleXY.uViewportSize),this.RR.lV(h,1,{location:y("aIsHighlighted"),size:1}).AR(g("uHighlightColorOffset"),t===1||t===2?ue:this.Go).dV(g("uRenderEffectMask"),t===2?1:0),t===1){if(!a)return!1;this.RR.lV(a,1,{location:y("aColor"),size:4})}else u&&this.RR.AR(g("uColor"),u.getColor());return Bs.fG(this.dt._i(),this.RR,o,p,this.dt._i()?4:2,0),Bs.zL(this.rN,l,p,this.SG&&t!==1,t===1,c,d),!0})}return this}rU(t,e,i,s){const n=K({x:this.Ya.min.x,y:this.Ya.min.y},this.dt,this.us.dt),o=K({x:this.Ya.max.x,y:this.Ya.max.y},this.dt,this.us.dt),h={x:Math.abs(n.x-o.x),y:Math.abs(n.y-o.y)},a=ml(t,e,h.x,h.y,i),l=a[1],u=a[4],c=a[6],d=a[7],f=s.reduce((w,E)=>w+E.Oa.length+2,0),g=new Float32Array(2*f),y=this.Ya.max.x-this.Ya.min.x,p=this.Ya.max.y-this.Ya.min.y,x=u-c,A=d-l;let v=0;for(const w of s){for(const k of w.Oa){const F=c+x*((k.x-this.Ya.min.x)/y),m=l+A*((k.y-this.Ya.min.y)/p);g[v]=F,g[v+1]=m,v+=2}const E=c+x*((w.Oa[0].x-this.Ya.min.x)/y),C=l+A*((w.Oa[0].y-this.Ya.min.y)/p);g[v]=E,g[v+1]=C,v+=2,g[v]=Number.NaN,g[v+1]=Number.NaN,v+=2}return g}lN(t){const e=this.Sd.find(i=>i.gN===t);return!!e&&{collectionMember:e}}VR(){return this.QW&&(this.RR.yV(this.QW),this.QW=void 0),this.vG&&(this.RR.yV(this.vG),this.vG=void 0),this.qW&&(this.RR.yV(this.qW),this.qW=void 0),this.tU&&(this.RR.yV(this.tU),this.tU=void 0),this.sU&&(this.RR.yV(this.sU),this.sU=void 0),this.eU&&(this.RR.yV(this.eU),this.eU=void 0),this.bG={fill:void 0,border:void 0},this.hU=this.RR.EO(this,this.hU),this}bt(){return this.Ya.max.x}vt(){return this.Ya.min.x}Mt(){return this.Ya.max.y}xt(){return this.Ya.min.y}vl(){return Ti(this.xe)}bl(){return Ti(this.xe)}}class gb extends Nx{constructor(t,e,i,s,n,o,h){super(t,e,i,s,n),this.aE=new es,this.nU=Kt,this.AN=Ei({fillStyleSolid:()=>Nt(this.be)&&this.be,fillStyleRadialGradient:()=>Ae(this.be)&&this.be,fillStyleLinearGradient:()=>ve(this.be)&&this.be,fillStyleImage:()=>Do(this.be)&&this.be,strokeStyleSolid:()=>pi(this.xe)&&this.xe,strokeFillSolid:()=>{const a=this.xe.getFillStyle();return Nt(a)&&a},strokeFillLinearGradient:()=>{const a=this.xe.getFillStyle();return ve(a)&&a},strokeFillRadialGradient:()=>{const a=this.xe.getFillStyle();return Ae(a)&&a}}),this.rU=(a,l,u)=>{const c=K(this.Fa(),this.dt,this.us.dt),d=Ut(K(gt(this.Fa(),this.oi()),this.dt,this.us.dt),c);return ml(a,l,d.x,d.y,u)},this.rN=t,this.nN=e,this.gN=o,this.mN=h,this.RR=t.oN(),this.nN=e}Ps(){super.Ps();const t=this.Bo.M(),e=this.ta(),i=this.ua.i||this.X.i||this.Aa.i||this.ma.i,s=this.xe,n=this.ra(),o=s.getThickness(),h=this.Aa.M();this.aE.mV(this.dt);const a=this.dt.Ni();if(i){const w=this.X.M();this.Oa=function(C,k,F,m,S){const b=((M,R,T)=>[M,N(M.x+R,M.y),N(M.x+R,M.y+T),N(M.x,M.y+T)])(C,k,F);if(m!==0||m%360!=0){const M=m*Math.PI/180;b[0]=ur(b[0],S,M),b[1]=ur(b[1],S,M),b[2]=ur(b[2],S,M),b[3]=ur(b[3],S,M)}return b}(this.ua.M(),w.x,w.y,h,this.ma.M());const E=cs(this.Oa,this.dt._i());this.SN=this.RR.nV(E,!1,this.SN),this.bN=this.Oa.length,this.nU=ce(this.Oa)}const l=this.AN.fillStyleSolid(e),u=this.AN.fillStyleRadialGradient(e),c=this.AN.fillStyleLinearGradient(e),d=this.AN.fillStyleImage(e),f=l||u||c||d;e&&(this.wN=f?this.RR.oz(G["2D"],l&&G.Color({dataType:"uniform"}),c&&G.Color({dataType:["gradient",c]}),u&&G.Color({dataType:["gradient",u]}),d&&G.Color({dataType:["image",d]}),G.VertexLocation({axisWorldTranslation:pt(this.dt),normalSource:void 0})):void 0),u?this.MN=qi(this.Eo||this.nU,this.dt,u.getPosition(),u.getExtent(),u.getShape(),this.RR.$z()):c?this._N=Ji(this.Eo||this.nU,this.dt,c.getAngle(!0),this.RR.$z()):(this.MN=void 0,this._N=void 0),this.hU=this.RR.RO(this,this.hU,d,void 0,a||i,this.rU);const g=this.AN.strokeStyleSolid(n),y=this.AN.strokeFillSolid(n),p=this.AN.strokeFillLinearGradient(n),x=this.AN.strokeFillRadialGradient(n),A=g,v=y||p||x;if(A&&(i||n||a&&o!==1)){if(o===1||o===-1)[this.CN,this.oU]=[this.Oa,void 0];else{const w=this.dt;[this.CN,this.oU]=w instanceof Ue?((E,C,k)=>{const F=E[0],m=E[1],S=E[2],b=E[3],M=C/2;return[[k.Ui(F,m,M,-M),k.Ui(m,F,-M,-M),k.Ui(b,S,-M,-M),k.Ui(S,b,M,-M),k.Ui(F,m,-M,M),k.Ui(m,F,M,M),k.Ui(b,S,M,M),k.Ui(S,b,-M,M)],[0,4,5,0,5,1,1,5,7,1,3,7,3,7,6,3,2,6,2,4,0,2,6,4]]})(this.Oa,o,w):((E,C,k)=>{const F=E[0],m=E[1],S=E[2],b=E[3],M=N(C.x*k*.5,C.y*k*.5),R=Li(kd(m,F)),T=Li(kd(b,F)),z=Td(R),P=Td(T);return[[gt(F,gt(St(z,M.x),St(P,M.y))),gt(m,gt(St(R,M.x),St(P,M.y))),gt(b,gt(St(z,M.x),St(T,M.y))),gt(S,gt(St(R,M.x),St(T,M.y))),gt(F,gt(St(R,M.x),St(T,M.y))),gt(m,gt(St(z,M.x),St(T,M.y))),gt(b,gt(St(R,M.x),St(P,M.y))),gt(S,gt(St(z,M.x),St(P,M.y)))],[0,4,5,0,5,1,1,5,7,1,3,7,3,7,6,3,2,6,2,4,0,2,6,4]]})(this.Oa,w.Wi(),o)}this.TN=this.RR.nV(cs(this.CN,this.dt._i()),!1,this.TN),this.oU?(this.uG=this.RR.OV(new Uint16Array(this.oU),this.uG),this.kN=this.oU.length):(this.uG&&this.RR.yV(this.uG),this.uG=void 0,this.kN=this.CN.length)}return n&&(this.RN=A&&v?this.RR.oz(G["2D"],G.Color({dataType:x?["gradient",x]:p?["gradient",p]:"uniform"}),G.VertexLocation({axisWorldTranslation:pt(this.dt),normalSource:void 0})):void 0),x?this.DN=qi(this.nU,this.dt,x.getPosition(),x.getExtent(),x.getShape(),this.RR.$z()):p?this.LN=Ji(this.nU,this.dt,p.getAngle(!0),this.RR.$z()):(this.DN=void 0,this.LN=void 0),this.EN=t&&f?this.EN||this.RR.oz(G["2D"],G.Color({dataType:"uniform"}),G.VertexLocation({axisWorldTranslation:pt(this.dt),normalSource:void 0})):void 0,this.zN=t&&this.xe!==it?this.zN||this.RR.oz(G["2D"],G.Color({dataType:"uniform"}),G.VertexLocation({axisWorldTranslation:pt(this.dt),normalSource:void 0})):void 0,this.ha(this.be),this.aa(s),this.ua.i=!1,this.Aa.i=!1,this.X.i=!1,this.ma.i=!1,this}lN(t){return this.gN===t&&{}}zL(t){const e=t===1?this.EN:this.wN,i=this.SN,s=this.bN,n=this.AN.fillStyleSolid(!1),o=this.AN.fillStyleRadialGradient(!1),h=this.AN.fillStyleLinearGradient(!1),a=this.AN.fillStyleImage(!1);e&&i&&s&&this.be!==ft&&(this.RR.jR(e),this.RR.aV(e,(y,p,x,A)=>{if(this.dt instanceof Gt||this.dt instanceof Gi?this.RR.uV(y("uScale"),this.aE.fV()).uV(y("uDisp"),this.aE.AV()).uV(A("uScaleStart_highpart"),this.aE.VO()).uV(A("uScaleStart_lowpart"),this.aE.OO()):this.dt instanceof Ue&&this.RR.uV(A("uScaleStart"),this.aE.MixedScaleXY.uScaleStart).uV(A("uScaleStartLog"),this.aE.MixedScaleXY.uScaleStartLog).uV(A("uScaleInterval"),this.aE.MixedScaleXY.uScaleInterval).uV(A("uScaleIntervalLog"),this.aE.MixedScaleXY.uScaleIntervalLog).uV(y("uViewportStart"),this.aE.MixedScaleXY.uViewportStart).uV(y("uViewportSize"),this.aE.MixedScaleXY.uViewportSize),t===1)this.RR.AR(y("uColor"),this.mN);else if(n)this.RR.AR(y("uColor"),n.getColor());else if(o){if(!this.MN)return!1;this.RR.mO(x,this.MN,o)}else if(h){if(!this._N)return!1;this.RR.yO(x,this._N,h)}else if(a){if(!this.hU)return!1;const v=this.hU&&this.hU.texture.Gz();this.RR.AR(A("uColor"),a.getSurroundingColor()).cV(y("uColorTexture"),v||this.hU.sourceMissingTexture,0).lV(this.hU.texCoordsBuffer,void 0,{location:p("aTextureCoord"),size:2}).LV(a.fitMode)}return this.RR.dV(y("uIsHighlighted"),t===1||t===2?0:this.zo).AR(y("uHighlightColorOffset"),t===1||t===2?ue:this.Go).dV(y("uRenderEffectMask"),t===2?1:0).vO(x,i,this.dt._i(),void 0).Ky(this.RR.gl.TRIANGLE_FAN,s),!0}));const l=t===1?this.zN:this.RN,u=this.AN.strokeStyleSolid(!1),c=this.AN.strokeFillSolid(!1),d=this.AN.strokeFillLinearGradient(!1),f=this.AN.strokeFillRadialGradient(!1),g=this.TN;return l&&g&&u&&(this.RR.jR(l),this.RR.aV(l,(y,p,x,A)=>{if(this.dt instanceof Gt||this.dt instanceof Gi?this.RR.uV(y("uScale"),this.aE.fV()).uV(y("uDisp"),this.aE.AV()).uV(A("uScaleStart_highpart"),this.aE.VO()).uV(A("uScaleStart_lowpart"),this.aE.OO()):this.dt instanceof Ue&&this.RR.uV(A("uScaleStart"),this.aE.MixedScaleXY.uScaleStart).uV(A("uScaleStartLog"),this.aE.MixedScaleXY.uScaleStartLog).uV(A("uScaleInterval"),this.aE.MixedScaleXY.uScaleInterval).uV(A("uScaleIntervalLog"),this.aE.MixedScaleXY.uScaleIntervalLog).uV(y("uViewportStart"),this.aE.MixedScaleXY.uViewportStart).uV(y("uViewportSize"),this.aE.MixedScaleXY.uViewportSize),t===1)this.RR.AR(y("uColor"),this.mN);else if(c)this.RR.AR(y("uColor"),c.getColor());else if(f){if(!this.DN)return!1;this.RR.mO(x,this.DN,f)}else if(d){if(!this.LN)return!1;this.RR.yO(x,this.LN,d)}return this.RR.dV(y("uIsHighlighted"),t===1||t===2?0:this.zo).AR(y("uHighlightColorOffset"),t===1||t===2?ue:this.Go).dV(y("uRenderEffectMask"),t===2?1:0).vO(x,g,this.dt._i(),void 0),this.uG?this.RR.XV(this.uG).ZV(this.kN):this.RR.Ky(this.RR.gl.LINE_LOOP,this.kN),!0})),this}VR(){return this.uG&&(this.RR.yV(this.uG),this.uG=void 0),this.SN&&(this.RR.yV(this.SN),this.SN=void 0),this.TN&&(this.RR.yV(this.TN),this.TN=void 0),this.hU=this.RR.EO(this,this.hU),this.wN=void 0,this.RN=void 0,this.EN=void 0,this.zN=void 0,this}bt(){return Math.max(this.ua.M().x,this.ua.M().x+this.X.M().x)}vt(){return Math.min(this.ua.M().x,this.ua.M().x+this.X.M().x)}Mt(){return Math.max(this.ua.M().y,this.ua.M().y+this.X.M().y)}xt(){return Math.min(this.ua.M().y,this.ua.M().y+this.X.M().y)}vl(){return Ti(this.xe)}bl(){return Ti(this.xe)}}class yb extends zx{constructor(t,e,i,s,n,o,h){super(t,e,i,s,n),this.aE=new es,this.AN=Ei({fillStyleSolid:()=>Nt(this.be)&&this.be,fillStylePaletted:()=>Be(this.be)&&this.be,fillStyleRadialGradient:()=>Ae(this.be)&&this.be,fillStyleLinearGradient:()=>ve(this.be)&&this.be,fillStyleImage:()=>Do(this.be)&&this.be,strokeLineStyleSolid:()=>pi(this.xe)&&this.xe,strokeLineSolidFill:()=>{const a=this.xe.getFillStyle();return Nt(a)&&a},strokeLinearGradientFill:()=>{const a=this.xe.getFillStyle();return ve(a)&&a},strokeRadialGradientFill:()=>{const a=this.xe.getFillStyle();return Ae(a)&&a}}),this.rU=(a,l,u)=>{const c=K({x:this.Ya.min.x,y:this.Ya.min.y},this.dt,this.us.dt),d=K({x:this.Ya.max.x,y:this.Ya.max.y},this.dt,this.us.dt),f={x:Math.abs(c.x-d.x),y:Math.abs(c.y-d.y)},g=ml(a,l,f.x,f.y,u),y=g[1],p=g[4],x=g[6],A=g[7],v=new Float32Array(2*this.Oa.length),w=this.Ya.max.x-this.Ya.min.x,E=this.Ya.max.y-this.Ya.min.y,C=p-x,k=A-y;let F=0;for(const m of this.Oa){const S=x+C*((m.x-this.Ya.min.x)/w),b=y+k*((m.y-this.Ya.min.y)/E);v[F]=S,v[F+1]=b,F+=2}return v},this.rN=t,this.nN=e,this.gN=o,this.mN=h,this.RR=t.oN(),this.nN=e}Hc(t){let e,i=Number.MAX_VALUE;for(const s of this.Oa){const n=pr(K(s,this.dt,this.us.dt),t);n<i&&(i=n,e=s)}return e}Ps(){const t=this.Bo.M(),e=this.ta(),i=this.yl,s=this.Oa.length>=3,n=this.xe,o=this.ra(),h=n.getThickness(),a=this.oa(h);this.aE.mV(this.dt),this.FT=this.dt.Wi();const l=this.dt.Ni();if(i&&(this.Ya=ce(this.Oa)),i&&s){const C=cs(this.Oa,this.dt._i());this.SN=this.RR.nV(C,!1,this.SN),this.aU=new Uint16Array(hg(C)),this.lU=this.RR.OV(this.aU,this.lU),this.bN=this.aU.length}const u=this.AN.fillStyleSolid(e),c=this.AN.fillStylePaletted(e),d=this.AN.fillStyleRadialGradient(e),f=this.AN.fillStyleLinearGradient(e),g=this.AN.fillStyleImage(e),y=u||c&&c.getLookUpProperty()!=="value"&&c||f||d||g;if(e&&(this.wN=y?this.RR.oz(G["2D"],u&&G.Color({dataType:"uniform"}),f&&G.Color({dataType:["gradient",f]}),d&&G.Color({dataType:["gradient",d]}),c&&G.Color({dataType:["lookup",c.getLookUpProperty(),c.lut]}),g&&G.Color({dataType:["image",g]}),G.VertexLocation({axisWorldTranslation:pt(this.dt),normalSource:void 0})):void 0),d?this.MN=qi(this.Eo||this.Ya,this.dt,d.getPosition(),d.getExtent(),d.getShape(),this.RR.$z()):f?this._N=Ji(this.Eo||this.Ya,this.dt,f.getAngle(!0),this.RR.$z()):(this.MN=void 0,this._N=void 0),this.hU=this.RR.RO(this,this.hU,g,void 0,l||i,this.rU),(i||a||l&&h!==1)&&s){const C=h===1||h===-1?this.Oa:tm(this.Oa,this.FT,h);this.CN=cs(C,this.dt._i()),this.TN=this.RR.nV(this.CN,!0,this.TN),this.kN=C.length}const p=this.AN.strokeLineStyleSolid(o),x=this.AN.strokeLineSolidFill(o),A=this.AN.strokeLinearGradientFill(o),v=this.AN.strokeRadialGradientFill(o),w=p,E=x||A||v;return o&&(this.RN=w&&E?this.RR.oz(G["2D"],G.Color({dataType:v?["gradient",v]:A?["gradient",A]:"uniform"}),G.VertexLocation({axisWorldTranslation:pt(this.dt),normalSource:void 0})):void 0),v?this.DN=qi(this.Eo||this.Ya,this.dt,v.getPosition(),v.getExtent(),v.getShape(),this.RR.$z()):A?this.LN=Ji(this.Eo||this.Ya,this.dt,A.getAngle(!0),this.RR.$z()):(this.DN=void 0,this.LN=void 0),this.EN=t&&y?this.EN||this.RR.oz(G["2D"],G.MousePicking,G.VertexLocation({axisWorldTranslation:pt(this.dt),normalSource:void 0})):void 0,this.zN=t&&this.xe!==it?this.EN||this.RR.oz(G["2D"],G.MousePicking,G.VertexLocation({axisWorldTranslation:pt(this.dt),normalSource:void 0})):void 0,this.yl=!1,this.ha(this.be),this.aa(n),this}zL(t){const e=t===1?this.EN:this.wN,i=this.SN,s=this.bN,n=this.AN.fillStyleSolid(!1),o=this.AN.fillStyleRadialGradient(!1),h=this.AN.fillStyleLinearGradient(!1),a=this.AN.fillStylePaletted(!1),l=this.AN.fillStyleImage(!1);e&&i&&s&&this.RR.jR(e).aV(e,(g,y,p,x)=>{if(this.RR.uV(g("uScale"),this.aE.fV()).uV(g("uDisp"),this.aE.AV()).uV(x("uScaleStart_highpart"),this.aE.VO()).uV(x("uScaleStart_lowpart"),this.aE.OO()).vO(p,i,this.dt._i(),void 0).XV(this.lU).dV(g("uIsHighlighted"),t===1||t===2?0:this.zo).AR(g("uHighlightColorOffset"),t===1||t===2?ue:this.Go).dV(g("uRenderEffectMask"),t===2?1:0),t===1)this.RR.AR(g("uColor"),this.mN);else if(n)this.RR.AR(g("uColor"),n.getColor());else if(o){if(!this.MN)return!1;this.RR.mO(p,this.MN,o)}else if(h){if(!this._N)return!1;this.RR.yO(p,this._N,h)}else if(a){const A=Xi(a,this,void 0);if(!A&&a.lut.percentageValues)return!1;this.RR.LO(p,a.lut,A)}else if(l){if(!this.hU)return!1;this.RR.AR(x("uColor"),l.getSurroundingColor()).cV(g("uColorTexture"),this.hU.texture.Gz()||this.hU.sourceMissingTexture,0).lV(this.hU.texCoordsBuffer,void 0,{location:y("aTextureCoord"),size:2}).LV(l.fitMode)}return this.RR.ZV(this.bN),!0});const u=t===1?this.zN:this.RN,c=this.xe,d=this.TN,f=this.kN;return u&&d&&f&&this.RR.jR(u).aV(u,(g,y,p,x)=>{this.RR.dV(g("uIsHighlighted"),t===1||t===2?0:this.zo).AR(g("uHighlightColorOffset"),t===1||t===2?ue:this.Go).dV(g("uRenderEffectMask"),t===2?1:0).uV(g("uScale"),this.aE.fV()).uV(g("uDisp"),this.aE.AV()).vO(p,d,this.dt._i(),void 0);const A=c.getFillStyle();if(t===1)this.RR.AR(g("uColor"),this.mN);else if(Nt(A))this.RR.AR(g("uColor"),A.getColor());else if(Ae(A)){if(!this.DN)return!1;this.RR.mO(p,this.DN,A)}else if(ve(A)){if(!this.LN)return!1;this.RR.yO(p,this.LN,A)}const v=c.getThickness(),w=v===-1||v===1;return this.RR.Ky(w?this.RR.gl.LINE_LOOP:this.RR.gl.TRIANGLE_STRIP,this.kN),!0}),this}lN(t){return this.gN===t&&{}}VR(){return this.lU&&(this.RR.yV(this.lU),this.lU=void 0),this.SN&&(this.RR.yV(this.SN),this.SN=void 0),this.TN&&(this.RR.yV(this.TN),this.TN=void 0),this.wN=void 0,this.RN=void 0,this.EN=void 0,this.zN=void 0,this.hU=this.RR.EO(this,this.hU),this}}const mb=(r,t)=>{let e=0;const i=[];for(;e<r;){const s=e;let n=t;const o=e>0;n-=o?1:0,n-=e+n<r?1:0;const h=Math.min(n,r-s),a=e-(o?1:0),l={start:a,startUnique:s,sizeData:Math.min(t,r-a),sizeUniqueData:h};i.push(l),e+=h}return i},pb=(r,t)=>{let e=0;const i=[];for(;e<r;){const s=e;let n=t;const o=e>0;n-=o?1:0,n-=0;const h=Math.min(n,r-s),a=e-(o?1:0),l={start:a,startUnique:s,sizeData:Math.min(t,r-a),sizeUniqueData:h};i.push(l),e+=h}return i},im=(r,t,e,i)=>{if(e){const n=new Map;return t.gridTiles.forEach(o=>{n.set(o,{type:e,dataInvalidationRanges:[{tileInvalidationOffset:{primary:0,secondary:0},tileInvalidationLength:o.sizeHeatmapDataVectors}]})}),n}const s=new Map;for(let n=0;n<r.length;n+=1){const o=r[n],h={x:o.startPrimary,y:o.startSecondary},a={x:h.x+o.lengthPrimary-1,y:h.y+o.lengthSecondary-1},l=[h,{x:a.x,y:h.y},a,{x:h.x,y:a.y}];t.gridTiles.forEach(u=>{const c=u.iFirstVector,d=i(u),f={x:c.primary+d.primary-1,y:c.secondary+d.secondary-1},g=[{x:c.primary,y:c.secondary},{x:f.x,y:c.secondary},f,{x:c.primary,y:f.y}];if(!ba(l,g))return;let y=s.get(u);y||(y={type:o.type,dataInvalidationRanges:[]},s.set(u,y));const p=Dg(l,g),x={primary:p.min.x-c.primary,secondary:p.min.y-c.secondary},A={primary:1+p.max.x-p.min.x,secondary:1+p.max.y-p.min.y};let v=!1;const w=[{x:x.primary,y:x.secondary},{x:x.primary+A.primary,y:x.secondary},{x:x.primary+A.primary,y:x.secondary+A.secondary},{x:x.primary,y:x.secondary+A.secondary}];for(let k=0;k<y.dataInvalidationRanges.length;k+=1)if(!v){const F=y.dataInvalidationRanges[k],m=[{x:F.tileInvalidationOffset.primary,y:F.tileInvalidationOffset.secondary},{x:F.tileInvalidationOffset.primary+F.tileInvalidationLength.primary,y:F.tileInvalidationOffset.secondary},{x:F.tileInvalidationOffset.primary+F.tileInvalidationLength.primary,y:F.tileInvalidationOffset.secondary+F.tileInvalidationLength.secondary},{x:F.tileInvalidationOffset.primary,y:F.tileInvalidationOffset.secondary+F.tileInvalidationLength.secondary}];if(ba(w,m)){const S=(E=w,C=m,{min:{x:Math.min(E[0].x,C[0].x),y:Math.min(E[0].y,C[0].y)},max:{x:Math.max(E[2].x,C[2].x),y:Math.max(E[2].y,C[2].y)}});F.tileInvalidationOffset.primary=S.min.x,F.tileInvalidationOffset.secondary=S.min.y,F.tileInvalidationLength.primary=S.max.x-S.min.x,F.tileInvalidationLength.secondary=S.max.y-S.min.y,v=!0}}var E,C;v||y.dataInvalidationRanges.push({tileInvalidationLength:A,tileInvalidationOffset:x})})}return s},sm=(r,t,e)=>{if(r.length!==1||t.startPrimary!==0||t.startSecondary!==0||t.lengthPrimary!==r[0].sizeHeatmapDataVectors.primary||t.lengthSecondary!==r[0].sizeHeatmapDataVectors.secondary)r.forEach(i=>{const s=e(i),n=Math.max(t.startPrimary,i.iFirstVector.primary),o=Math.min(t.startPrimary+t.lengthPrimary-1,i.iFirstVector.primary+i.sizeHeatmapDataVectors.primary-1),h=Math.max(t.startSecondary,i.iFirstVector.secondary),a=Math.min(t.startSecondary+t.lengthSecondary-1,i.iFirstVector.secondary+i.sizeHeatmapDataVectors.secondary-1);for(let l=n;l<=o;l+=1){const u=l-t.startPrimary,c=t.values[u],d=(l-i.iFirstVector.primary)*i.sizeHeatmapDataVectors.secondary;for(let f=h;f<=a;f+=1){const g=f-t.startSecondary,y=f-i.iFirstVector.secondary,p=c[g];s[d+y]=p}}});else{const i=r[0],s=e(i);for(let n=0;n<t.lengthPrimary;n+=1){const o=n*i.sizeHeatmapDataVectors.secondary;s.set(t.values[n],o)}}},rm=(r,t,e)=>{var i,s;const n=(i=r.gl2)===null||i===void 0?void 0:i.ctx;if(n)return r.fO(null,n.RED,!1,!0,{x:t,y:e},!1,n.FLOAT,n.R32F);const o=r.gl;return!((s=r.gl1)===null||s===void 0)&&s.optional.OES_texture_float?r.fO(null,o.LUMINANCE,!1,!0,{x:t,y:e},!1,o.FLOAT):r.fO(null,o.RGBA,!1,!0,{x:t,y:e},!1,o.UNSIGNED_BYTE)},nm=(r,t,e,i)=>{t.forEach((s,n)=>{var o,h;const a=e(n),l=i(n),u=r.gl;u.bindTexture(u.TEXTURE_2D,l),u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);const c=(o=r.gl2)===null||o===void 0?void 0:o.ctx,d=s.dataInvalidationRanges.length,f=s.dataInvalidationRanges.reduce((g,y)=>g+y.tileInvalidationLength.primary,0)/n.sizeHeatmapDataVectors.primary;d===1&&f<1||f<.5&&d<10?s.dataInvalidationRanges.forEach(g=>{var y;const p=g.tileInvalidationOffset.primary*n.sizeHeatmapDataVectors.secondary,x=p+g.tileInvalidationLength.primary*n.sizeHeatmapDataVectors.secondary;if(c)c.texSubImage2D(u.TEXTURE_2D,0,0,g.tileInvalidationOffset.primary,n.sizeHeatmapDataVectors.secondary,g.tileInvalidationLength.primary,c.RED,c.FLOAT,a.subarray(p,x));else if(!((y=r.gl1)===null||y===void 0)&&y.optional.OES_texture_float)u.texSubImage2D(u.TEXTURE_2D,0,0,g.tileInvalidationOffset.primary,n.sizeHeatmapDataVectors.secondary,g.tileInvalidationLength.primary,u.LUMINANCE,u.FLOAT,a.subarray(p,x));else{const A=new Uint8Array(a.buffer).subarray(4*p,4*x);u.texSubImage2D(u.TEXTURE_2D,0,0,g.tileInvalidationOffset.primary,n.sizeHeatmapDataVectors.secondary,g.tileInvalidationLength.primary,u.RGBA,u.UNSIGNED_BYTE,A)}}):c?c.texImage2D(u.TEXTURE_2D,0,c.R32F,n.sizeHeatmapDataVectors.secondary,n.sizeHeatmapDataVectors.primary,0,c.RED,c.FLOAT,a):!((h=r.gl1)===null||h===void 0)&&h.optional.OES_texture_float?u.texImage2D(u.TEXTURE_2D,0,u.LUMINANCE,n.sizeHeatmapDataVectors.secondary,n.sizeHeatmapDataVectors.primary,0,u.LUMINANCE,u.FLOAT,a):u.texImage2D(u.TEXTURE_2D,0,u.RGBA,n.sizeHeatmapDataVectors.secondary,n.sizeHeatmapDataVectors.primary,0,u.RGBA,u.UNSIGNED_BYTE,new Uint8Array(a.buffer)),u.bindTexture(u.TEXTURE_2D,null)})};class xb extends Pn{constructor(t,e,i,s,n,o){super(t,e,i,s,n),this.uU=vt("bilinear"),this.Pi={x:0,y:0},this.$w={x:1,y:1},this.gv=Si.lineStyle,this.engine=t;const h=o.dataOrder==="columns"?o.columns:o.rows,a=o.dataOrder==="columns"?o.rows:o.columns;this.Un={...o,primaryDimensionVectorsCount:h,secondaryDimensionVectorsCount:a}}xv(t){return this.uU.S(t),this}Mv(){return this.uU.M()}Sv(t,e){return this.Pi=t,this.$w=e,this}vv(){return{start:this.Pi,step:this.$w,end:{x:this.Pi.x+this.$w.x*this.Un.columns,y:this.Pi.y+this.$w.y*this.Un.rows}}}mv(t){return this.gv=typeof t=="function"?t(this.gv):t,this}bv(){return this.gv}}class xl extends xb{constructor(t,e,i,s,n,o,h,a){super(t,e,i,s,n,o),this.aE=new es,this.bG={},this.cU=[],this.dU=!1,this.Qa=!1,this.AN=Ei({fillStyleSolid:()=>Nt(this.be)&&this.be,fillStylePaletted:()=>Be(this.be)&&this.be,wireframeStyleLine:()=>pi(this.gv)&&this.gv,wireframeStyleFill:()=>{const g=this.gv&&this.gv.getFillStyle();return Nt(g)&&g}}),this.fU=mb,this.rN=t,this.nN=e,this.gN=h,this.mN=a,this.RR=t.oN(),this.nN=e;const l=Math.min(this.RR.zR,o.AU!==void 0?o.AU:2048),u={x:Math.min(l,this.Un.primaryDimensionVectorsCount),y:Math.min(l,this.Un.secondaryDimensionVectorsCount)},c=((g,y,p,x)=>{const A=[],v=p(g.primaryDimensionVectorsCount,y.x),w=p(g.secondaryDimensionVectorsCount,y.y);let E;return v.forEach(C=>w.forEach(k=>{const F={iFirstVector:{primary:C.start,secondary:k.start},iFirstUniqueVector:{primary:C.startUnique,secondary:k.startUnique},sizeHeatmapDataVectors:{primary:C.sizeData,secondary:k.sizeData},sizeUniqueHeatmapDataVectors:{primary:C.sizeUniqueData,secondary:k.sizeUniqueData}};A.push(F)})),E=[],A.forEach(C=>{let k=E.find(F=>F.sizeHeatmapData.primary===C.sizeHeatmapDataVectors.primary&&F.sizeHeatmapData.secondary===C.sizeHeatmapDataVectors.secondary);k||(k={sizeHeatmapData:C.sizeHeatmapDataVectors,tiles:[]},E.push(k)),k.tiles.push(C)}),{gridTiles:A,gridTileSizes:E}})(this.Un,u,this.fU),d=c.gridTiles.map(g=>{const y=new Float32Array(g.sizeHeatmapDataVectors.primary*g.sizeHeatmapDataVectors.secondary);return{...g,intensityData:y,hasIntensityData:!1}}),f=c.gridTileSizes.map(g=>({...g,tiles:d.filter(y=>y.sizeHeatmapDataVectors.primary===g.sizeHeatmapData.primary&&y.sizeHeatmapDataVectors.secondary===g.sizeHeatmapData.secondary)}));this.gU={gridTiles:d,gridTileSizes:f},this.Sv(this.Pi,this.$w)}Ps(){const t=this.cU,e=this.be,i=this.ta(),s=this.gv,n=s!==this.mU,o=this.AN.fillStylePaletted(i),h=this.AN.fillStyleSolid(i),a=this.uU.i,l=this.uU.M(),u=this.Qa,c=this.Bo.M();this.yU=this.yU||this.pU();const d=this.yU,f=im(t,d,u?"intensity":void 0,y=>y.sizeHeatmapDataVectors);f.size>0&&(nm(this.RR,f,y=>y.intensityData,y=>y.intensityDataTexture),this.dU=!0),this.aE.mV(this.dt);const g=this.bG;if((i||a)&&(g.tile=o?{renderMode:"paletted",fillStylePaletted:o,shader:this.RR.oz(G["2D"],G.ColorGrid2D({heatmapType:"intensity",interpolation:l==="bilinear"&&"bilinear",flipXY:this.Un.dataOrder==="rows",intensityTextureType:this.RR.sz?"float":"ubyte",littleEndian:this.RR.IS_MACHINE_LITTLE_ENDIAN,lut:o.lut}),G.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:pt(this.dt),flipXY:this.Un.dataOrder==="rows",normalSource:void 0}))}:h?{renderMode:"solid",fillStyleSolid:h,shader:this.RR.oz(G["2D"],G.Color({dataType:"uniform"}),G.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:pt(this.dt),flipXY:this.Un.dataOrder==="rows",normalSource:void 0}))}:void 0),n){const y=this.AN.wireframeStyleLine(n),p=this.AN.wireframeStyleFill(n);g.wireframe=y&&p?y.getThickness()===-1?{renderMode:"primitive",shader:this.RR.oz(G["2D"],G.Color({dataType:"uniform"}),G.VertexLocation({translation:{dataType:"uniform",sizeUnit:"axis"},scaling:{dataType:"uniform"},flipXY:this.Un.dataOrder==="rows",axisWorldTranslation:pt(this.dt),normalSource:void 0})),fillStyleSolid:p}:{renderMode:"triangulated",shader:this.RR.oz(G["2D"],G.Color({dataType:"uniform"}),G.LineInstanced2D({translation:{dataType:"uniform",sizeUnit:"axis"},scaling:{dataType:"uniform"},flipXY:this.Un.dataOrder==="rows",axisWorldTranslation:pt(this.dt),normalSource:void 0})),geometry:No(this.RR,1),solidLine:y,fillStyleSolid:p}:void 0,g.wireframe?this.SU=this.SU||this.vU():this.SU&&(this.RR.yV(this.SU.wireframeCoordinatesBuffer),this.SU=void 0)}if(g.mousePicking=c?this.bG.mousePicking||{shader:this.RR.oz(G["2D"],G.MousePicking,G.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:pt(this.dt),flipXY:this.Un.dataOrder==="rows",normalSource:void 0}))}:void 0,this.bG=g,this.Ja===void 0&&o&&o.lookUpProperty==="value"&&o.lut.percentageValues){let y=st,p=ht;this.yU.gridTiles.forEach(x=>{for(let A=0;A<x.intensityData.length;A+=1){const v=x.intensityData[A];v<y&&(y=v),v>p&&(p=v)}}),this.Ja={min:y,max:p}}return this.Qa=!1,this.cU.length=0,this.ha(e),this.mU=s,this.uU.i=!1,this}pU(){const t=this.gU.gridTiles.map(n=>{const o=rm(this.RR,n.sizeHeatmapDataVectors.secondary,n.sizeHeatmapDataVectors.primary);return{...n,intensityDataTexture:o,tileData:n}}),e=this.gU.gridTileSizes.map(n=>({...n,tiles:t.filter(o=>o.sizeHeatmapDataVectors.primary===n.sizeHeatmapData.primary&&o.sizeHeatmapDataVectors.secondary===n.sizeHeatmapData.secondary)})),i=this.RR.nV([0,0,1,0,0,1,1,1]),s=this.RR.gl.TRIANGLE_STRIP;return{gridTiles:t,gridTileSizes:e,rectangleLocationsBuffer:i,rectangleLocationsDrawMode:s,rectangleLocationsDrawLength:4}}vU(){const t=this.Un.primaryDimensionVectorsCount+1+this.Un.secondaryDimensionVectorsCount+1,e=new Float32Array(4*t);let i=0;for(let s=0;s<this.Un.primaryDimensionVectorsCount+1;s+=1)e[i+0]=s,e[i+1]=0,e[i+2]=s,e[i+3]=this.Un.secondaryDimensionVectorsCount,i+=4;for(let s=0;s<this.Un.secondaryDimensionVectorsCount+1;s+=1)e[i+0]=0,e[i+1]=s,e[i+2]=this.Un.primaryDimensionVectorsCount,e[i+3]=s,i+=4;return{wireframeCoordinatesBuffer:this.RR.nV(e),wireframeSegmentsLength:t}}Sv(t,e){super.Sv(t,e);const i=this.Un,s=wt({x:Math.min(this.Pi.x,this.Pi.x+i.columns*this.$w.x),y:Math.min(this.Pi.y,this.Pi.y+i.rows*this.$w.y)},{x:Math.max(this.Pi.x,this.Pi.x+i.columns*this.$w.x),y:Math.max(this.Pi.y,this.Pi.y+i.rows*this.$w.y)}),n=new Map;return this.gU.gridTiles.forEach(o=>{const h=this.Un.dataOrder==="columns"?{x:this.Pi.x+this.$w.x*o.iFirstVector.primary,y:this.Pi.y+this.$w.y*o.iFirstVector.secondary}:{x:this.Pi.x+this.$w.x*o.iFirstVector.secondary,y:this.Pi.y+this.$w.y*o.iFirstVector.primary},a=this.Un.dataOrder==="columns"?{x:this.$w.x*o.sizeHeatmapDataVectors.primary,y:this.$w.y*o.sizeHeatmapDataVectors.secondary}:{x:this.$w.x*o.sizeHeatmapDataVectors.secondary,y:this.$w.y*o.sizeHeatmapDataVectors.primary},l=this.Un.dataOrder==="columns"?{x:this.Pi.x+this.$w.x*o.iFirstUniqueVector.primary,y:this.Pi.y+this.$w.y*o.iFirstUniqueVector.secondary}:{x:this.Pi.x+this.$w.x*o.iFirstUniqueVector.secondary,y:this.Pi.y+this.$w.y*o.iFirstUniqueVector.primary},u=this.Un.dataOrder==="columns"?{x:this.$w.x*o.sizeUniqueHeatmapDataVectors.primary,y:this.$w.y*o.sizeUniqueHeatmapDataVectors.secondary}:{x:this.$w.x*o.sizeUniqueHeatmapDataVectors.secondary,y:this.$w.y*o.sizeUniqueHeatmapDataVectors.primary};n.set(o,{startLocationAxis:h,sizeAxis:a,startRenderLocationAxis:l,renderSizeAxis:u})}),this.bU={boundaries:s,tilesInfo:n},this}zL(t){var e,i;const s=this.yU,n=this.bU,o=t===1?(e=this.bG.mousePicking)===null||e===void 0?void 0:e.shader:(i=this.bG.tile)===null||i===void 0?void 0:i.shader;if(this.bG.tile&&o&&s&&n){const u=o,c=this.bG.tile,d={x:(n.boundaries.max.x-n.boundaries.min.x)*Math.sign(this.$w.x),y:(n.boundaries.max.y-n.boundaries.min.y)*Math.sign(this.$w.y)},f={x:d.x/this.Un.columns,y:d.y/this.Un.rows},g=this.dt.Wi(),y={x:f.x/g.x,y:f.y/g.y};if(c.renderMode==="solid"||t===1)this.RR.jR(u).aV(u,(p,x,A)=>{if(t===1)this.RR.AR(p("uColor"),this.mN);else if(c.renderMode==="solid"){const{fillStyleSolid:v}=c;this.RR.AR(p("uColor"),v.getColor())}return this.RR.dV(p("uIsHighlighted"),t===1||t===2?0:this.zo).AR(p("uHighlightColorOffset"),t===1||t===2?ue:this.Go).dV(p("uRenderEffectMask"),t===2?1:0).uV(p("uScale"),this.aE.fV()).uV(p("uDisp"),this.aE.AV()).lV(s.rectangleLocationsBuffer,void 0,{location:x("aPos"),size:2}).uV(p("uScaling"),[this.$w.x*this.Un.columns,this.$w.y*this.Un.rows]).uV(p("uTranslationAxis"),[this.Pi.x,this.Pi.y]).Ky(s.rectangleLocationsDrawMode,s.rectangleLocationsDrawLength),!0});else if(c.renderMode==="paletted"){const{fillStylePaletted:p}=c,x=this.Ja;this.RR.aV(u,(A,v,w)=>{let E=!1;var C,k;return this.RR.jR(u).uV(A("uScale"),this.aE.fV()).uV(A("uDisp"),this.aE.AV()).LO(w,p.lut,x).lV(s.rectangleLocationsBuffer,void 0,{location:v("aPos"),size:2}).dV(A("uIsHighlighted"),this.zo).AR(A("uHighlightColorOffset"),t===2?ue:this.Go).dV(A("uRenderEffectMask"),t===2?1:0),C=F=>{this.RR.uV(A("uTileDimensions"),[this.Un.dataOrder==="columns"?F.sizeHeatmapData.primary:F.sizeHeatmapData.secondary,this.Un.dataOrder==="columns"?F.sizeHeatmapData.secondary:F.sizeHeatmapData.primary])},k=(F,m)=>{const S=n.tilesInfo.get(F.tileData);if(!S)return;let b;const M=this.RR.$z();if(this.uU.M()==="bilinear"){const R=(this.dt.x.ct(S.startLocationAxis.x)+y.x/2)*M,T=(this.dt.y.ct(S.startLocationAxis.y)+y.y/2)*M;b=[R,T,(this.dt.x.ct(S.startLocationAxis.x+S.sizeAxis.x)-y.x/2)*M-R,(this.dt.y.ct(S.startLocationAxis.y+S.sizeAxis.y)-y.y/2)*M-T]}else{const R=this.dt.x.ct(S.startLocationAxis.x)*M,T=this.dt.y.ct(S.startLocationAxis.y)*M;b=[R,T,this.dt.x.ct(S.startLocationAxis.x+S.sizeAxis.x)*M-R,this.dt.y.ct(S.startLocationAxis.y+S.sizeAxis.y)*M-T]}this.RR.FV(A("uTileBounds"),b).uV(A("uScaling"),[S.renderSizeAxis.x,S.renderSizeAxis.y]).uV(A("uTranslationAxis"),[S.startRenderLocationAxis.x,S.startRenderLocationAxis.y]).cV(A("uTileIntensityValues"),F.intensityDataTexture,1).Ky(s.rectangleLocationsDrawMode,s.rectangleLocationsDrawLength),E=!0},s.gridTileSizes.forEach(F=>{C(F),F.tiles.forEach(m=>{k(m)})}),E})}}const h=this.SU,a=this.bG.wireframe,l=t===1||a==null?void 0:a.shader;if(h&&a&&l&&a.renderMode==="primitive"){const{fillStyleSolid:u}=a;this.RR.jR(l).aV(l,(c,d,f)=>((this.dt instanceof Gt||this.dt instanceof Gi)&&this.RR.uV(c("uScale"),this.aE.fV()).uV(c("uDisp"),this.aE.AV()),this.RR.dV(c("uIsHighlighted"),t===1||t===2?0:this.zo).AR(c("uHighlightColorOffset"),t===1||t===2?ue:this.Go).dV(c("uRenderEffectMask"),t===2?1:0).AR(c("uColor"),u.getColor()).lV(h.wireframeCoordinatesBuffer,void 0,{location:d("aPos"),size:2}).uV(c("uScaling"),[this.$w.x,this.$w.y]).uV(c("uTranslationAxis"),[this.Pi.x,this.Pi.y]).Ky(this.RR.gl.LINES,2*h.wireframeSegmentsLength),!0))}else if(h&&a&&l&&a.renderMode==="triangulated"){const{geometry:u,solidLine:c,fillStyleSolid:d}=a;this.RR.jR(l).aV(l,(f,g,y)=>((this.dt instanceof Gt||this.dt instanceof Gi)&&this.RR.uV(f("uScale"),this.aE.fV()).uV(f("uDisp"),this.aE.AV()),this.RR.dV(f("uIsHighlighted"),t===1||t===2?0:this.zo).AR(f("uHighlightColorOffset"),t===1||t===2?ue:this.Go).dV(f("uRenderEffectMask"),t===2?1:0).AR(f("uColor"),d.getColor()).dV(f("uThicknessPixels"),c.getThickness()).uV(f("uRatioPxClip"),[2/this.us.oi().x,2/this.us.oi().y]).lV(h.wireframeCoordinatesBuffer,1,{location:g("aLocationA"),size:2},{location:g("aLocationB"),size:2}).uV(f("uScaling"),[this.$w.x,this.$w.y]).uV(f("uTranslationAxis"),[this.Pi.x,this.Pi.y]),u.jR(y,!1).Ky(h.wireframeSegmentsLength),!0))}return this}_v(t){return this.cU.push(t),sm(this.gU.gridTiles,t,e=>(e.hasIntensityData=!0,e.intensityData)),this.Ja=void 0,this}Nt(){return this.dU&&(this.gU.gridTiles.forEach(t=>{t.intensityData.fill(0),t.hasIntensityData=!1}),this.Qa=!0,this.dU=!1,this.Ja=void 0),this}dispose(){super.dispose();const t=this.yU;t&&(t.gridTiles.forEach(i=>{this.RR.OR(i.intensityDataTexture)}),t.gridTiles.length=0,t.gridTileSizes.forEach(i=>{}),t.gridTileSizes.length=0,this.RR.yV(t.rectangleLocationsBuffer)),this.yU=void 0;const e=this.SU;return e&&this.RR.yV(e.wireframeCoordinatesBuffer),this.SU=void 0,this.bG={},this}VR(){return this.dispose(),this}lN(t){return this.gN===t&&{}}Hc(t){const e=t,i=this.Un.dataOrder==="columns"?e.x:e.y,s=this.Un.dataOrder==="columns"?e.y:e.x,n=this.Un.dataOrder==="columns"?this.Pi.x:this.Pi.y,o=this.Un.dataOrder==="columns"?this.Pi.y:this.Pi.x;let h=(i-n)/(this.Un.dataOrder==="columns"?this.$w.x:this.$w.y),a=(s-o)/(this.Un.dataOrder==="columns"?this.$w.y:this.$w.x);h=Math.floor(Rt(h,0,this.Un.primaryDimensionVectorsCount-1)),a=Math.floor(Rt(a,0,this.Un.secondaryDimensionVectorsCount-1));const l=this.xU(h,a),u=this.Un.dataOrder==="columns"?{x:this.Pi.x+(h+.5)*this.$w.x,y:this.Pi.y+(a+.5)*this.$w.y}:{x:this.Pi.x+(a+.5)*this.$w.x,y:this.Pi.y+(h+.5)*this.$w.y},c=this.Un.dataOrder==="columns"?h:a,d=this.Un.dataOrder==="columns"?a:h;return{x:u.x,y:u.y,column:c,row:d,cellValue:l}}zx(t){const e=this.bU;if(!e||t.x<e.boundaries.min.x||t.x>e.boundaries.max.x||t.y<e.boundaries.min.y||t.y>e.boundaries.max.y)return;const i=t,s=this.Un.dataOrder==="columns"?i.x:i.y,n=this.Un.dataOrder==="columns"?i.y:i.x,o=this.Un.dataOrder==="columns"?this.Pi.x:this.Pi.y,h=this.Un.dataOrder==="columns"?this.Pi.y:this.Pi.x,a=this.Un.dataOrder==="columns"?this.$w.x:this.$w.y,l=this.Un.dataOrder==="columns"?this.$w.y:this.$w.x,u=Rt((s-o)/a-.5,0,this.Un.primaryDimensionVectorsCount-1),c=Rt((n-h)/l-.5,0,this.Un.secondaryDimensionVectorsCount-1),d=Rt(Math.ceil(u)-1,0,this.Un.primaryDimensionVectorsCount-1),f=Rt(Math.ceil(c)-1,0,this.Un.secondaryDimensionVectorsCount-1),g={point:{x:d,y:f},value:this.xU(d,f)},y={point:{x:d,y:f+1},value:this.xU(d,f+1)},p={point:{x:d+1,y:f},value:this.xU(d+1,f)},x={point:{x:d+1,y:f+1},value:this.xU(d+1,f+1)},A=Qg({x:u,y:c},g,y,p,x);if(A===void 0)return;const v=Rt(Math.floor(u+.5),0,this.Un.primaryDimensionVectorsCount-1),w=Rt(Math.floor(c+.5),0,this.Un.secondaryDimensionVectorsCount-1),E=this.Un.dataOrder==="columns"?v:w,C=this.Un.dataOrder==="columns"?w:v,k=t;return{x:k.x,y:k.y,column:E,row:C,cellValue:A}}xU(t,e){for(let i=0;i<this.gU.gridTiles.length;i+=1){const s=this.gU.gridTiles[i];if(t>=s.iFirstVector.primary&&t<=s.iFirstVector.primary+s.sizeHeatmapDataVectors.primary-1&&e>=s.iFirstVector.secondary&&e<=s.iFirstVector.secondary+s.sizeHeatmapDataVectors.secondary-1){const n=t-s.iFirstVector.primary,o=e-s.iFirstVector.secondary,h=n*s.sizeHeatmapDataVectors.secondary+o;return s.intensityData[h]}}return 0}bt(){var t;return((t=this.bU)===null||t===void 0?void 0:t.boundaries.max.x)||0}vt(){var t;return((t=this.bU)===null||t===void 0?void 0:t.boundaries.min.x)||0}Mt(){var t;return((t=this.bU)===null||t===void 0?void 0:t.boundaries.max.y)||0}xt(){var t;return((t=this.bU)===null||t===void 0?void 0:t.boundaries.min.y)||0}vl(){return 0}bl(){return 0}D_(){const t=[];return this.gU.gridTiles.forEach(e=>{if(!e.hasIntensityData)return;const i=new Array(e.sizeUniqueHeatmapDataVectors.primary).fill(0).map(s=>new Array(e.sizeUniqueHeatmapDataVectors.secondary).fill(0));for(let s=0;s<e.sizeUniqueHeatmapDataVectors.primary;s+=1){const n=s*e.sizeHeatmapDataVectors.secondary,o=i[s];for(let h=0;h<e.sizeUniqueHeatmapDataVectors.secondary;h+=1){const a=e.intensityData[n+h];o[h]=a}}t.push({type:"intensity",startPrimary:e.iFirstUniqueVector.primary,startSecondary:e.iFirstUniqueVector.secondary,lengthPrimary:e.sizeUniqueHeatmapDataVectors.primary,lengthSecondary:e.sizeUniqueHeatmapDataVectors.secondary,values:i})}),t}}class Sb extends Pn{constructor(t,e,i,s,n,o){super(t,e,i,s,n),this.Pi={x:0,y:0},this.$w={x:1,y:1},this.gv=Si.lineStyle,this.pu=vt(void 0),this.uU=vt("bilinear"),this.engine=t,this.Un=o}Sv(t,e){return this.Pi=t,this.$w=e,this}vv(){return{start:this.Pi,step:this.$w}}mv(t){return this.gv=typeof t=="function"?t(this.gv):t,this}bv(){return this.gv}Su(t){return this.pu.S(t),this}vu(){return this.pu.M()}xv(t){return this.uU.S(t),this}Mv(){return this.uU.M()}}class Ab extends Sb{constructor(t,e,i,s,n,o,h,a){super(t,e,i,s,n,a),this.MU=0,this.QM=[],this.rN=t,this.nN=e,this.gN=o,this.mN=h,this.RR=t.oN(),this.nN=e,this.Ya=a.scrollDimension==="columns"?wt({x:this.Pi.x,y:this.Pi.y},{x:this.Pi.x,y:this.Pi.y+a.resolution*this.$w.y}):wt({x:this.Pi.x,y:this.Pi.y},{x:this.Pi.x+a.resolution*this.$w.x,y:this.Pi.y}),this._U={dataPerSegment:2048}}Ps(){this.bW||(this.Oo.push({type:"DataPattern",args:{pattern:this.Un.scrollDimension==="columns"?this.$w.x>0?"ProgressiveX":"RegressiveX":this.$w.y>0?"ProgressiveY":"RegressiveY",regularProgressiveStep:!0}}),this.bW=new em(this.dt,this));const t=this.bW.fW(this.QM,this.pu.M());if(t>0){for(let i=0;i<t;i+=1)this.QM[0].shape.dispose().VR(),this.QM.shift();this.Un.scrollDimension==="columns"?this.Ya.min.x=this.QM.length>0?this.QM[0].boundaries.min.x:st:this.Ya.min.y=this.QM.length>0?this.QM[0].boundaries.min.y:st}this.QM.forEach(i=>i.shape.Ps());const e=this.QM.reduce((i,s)=>{var n,o;return i.min=Math.min(i.min,qt((n=s.shape.Ja)===null||n===void 0?void 0:n.min,st)),i.max=Math.max(i.max,qt((o=s.shape.Ja)===null||o===void 0?void 0:o.max,ht)),i},{min:st,max:ht});return this.QM.forEach(i=>{i.shape.Ja=e}),this.pu.i=!1,this}zL(t){return this.QM.forEach(e=>e.shape.zL(t)),this}Fv(t){if(t.length===0)return this;let e=0;const i=this._U.dataPerSegment,s=t.length;do{let n=this.QM[this.QM.length-1],o=n?i-(n.existingDataPointsCount+(n.hasJoint?1:0)):0,h=!1;if(!n||o===0){const d={columns:this.Un.scrollDimension==="columns"?i:this.Un.resolution,rows:this.Un.scrollDimension==="rows"?i:this.Un.resolution,heatmapDataType:this.Un.heatmapDataType,dataOrder:this.Un.scrollDimension};let f=this.Un.scrollDimension==="columns"?{x:this.Pi.x+this.$w.x*this.MU,y:this.Pi.y}:{x:this.Pi.x,y:this.Pi.y+this.$w.y*this.MU};this.QM.length>0&&(f=this.Un.scrollDimension==="columns"?{x:f.x-1*this.$w.x,y:f.y}:{x:f.x,y:f.y-1*this.$w.y},h=!0);const g=new xl(this.rN,this.nN,this.dt,Ft,[],d,this.gN,this.mN).xv(this.uU.M()).Ce(this.be).mv(this.gv).Sv(f,this.$w);n={shape:g,existingDataPointsCount:0,existingCoordinatesCount:0,allocatedCoordinatesCount:i,dataStartIndex:this.MU,hasJoint:!1,boundaries:{min:{x:g.vt(),y:g.xt()},max:{x:g.bt(),y:g.Mt()}}},this.QM.push(n),o=i-(h?1:0)}const a=s-e,l=Math.min(o,a),u=t.slice(e,e+l),c={type:"intensity",values:u,startPrimary:n.existingDataPointsCount+(n.hasJoint?1:0),startSecondary:0,lengthPrimary:l,lengthSecondary:this.Un.resolution};h&&(c.values.unshift(this.wU),c.lengthPrimary+=1,n.hasJoint=!0),n.shape._v(c),n.existingDataPointsCount+=l,n.existingCoordinatesCount+=l+(h?1:0),this.wU=u[u.length-1],this.MU+=l,e+=l}while(e<s);return this.Ya.max=this.Un.scrollDimension==="columns"?{...this.Ya.max,x:this.Pi.x+this.MU*this.$w.x}:{...this.Ya.max,y:this.Pi.y+this.MU*this.$w.y},this}_v(t,e){const i=t,s=t+e.length-1,n=e[0].length;this.QM.forEach(h=>{const a=h.dataStartIndex,l=h.dataStartIndex+h.existingDataPointsCount-1;if(s<a||i>l)return;const u=i-a,c=Math.min(s,l),d=c-u+1,f=e.slice(u-i,c-i+1),g={type:"intensity",startSecondary:0,lengthSecondary:n,startPrimary:u,lengthPrimary:d,values:f};h.shape._v(g)});const o=this.MU-1;if(s>o){const h=s-o,a=e.slice(-h);if(a.length<h){const l=this.wU||new Array(n).fill(0);for(let u=a.length;u<h;u+=1)a.unshift(l)}this.Fv(a)}return this}O_(){return this.MU}Nt(){return this.QM.forEach(t=>{t.shape.dispose().VR()}),this.QM.length=0,this.Ya=this.Un.scrollDimension==="columns"?wt({x:this.Pi.x,y:this.Pi.y},{x:this.Pi.x,y:this.Pi.y+this.Un.resolution*this.$w.y}):wt({x:this.Pi.x,y:this.Pi.y},{x:this.Pi.x+this.Un.resolution*this.$w.x,y:this.Pi.y}),this.MU=0,this.wU=void 0,this}Sv(t,e){return super.Sv(t,e),this.QM.forEach((i,s)=>{const n={x:t.x+i.dataStartIndex*e.x,y:t.y+i.dataStartIndex*e.y};i.shape.Sv(n,e),i.boundaries={min:{x:i.shape.vt(),y:i.shape.xt()},max:{x:i.shape.bt(),y:i.shape.Mt()}}}),this.QM.length>0?this.Ya=Bi(...this.QM.map(i=>i.boundaries)):this.Ya=this.Un.scrollDimension==="columns"?wt({x:this.Pi.x,y:this.Pi.y},{x:this.Pi.x,y:this.Pi.y+this.Un.resolution*this.$w.y}):wt({x:this.Pi.x,y:this.Pi.y},{x:this.Pi.x+this.Un.resolution*this.$w.x,y:this.Pi.y}),this}Ce(t){return super.Ce(t),this.QM.forEach(e=>e.shape.Ce(this.be)),this}mv(t){return super.mv(t),this.QM.forEach(e=>e.shape.mv(this.gv)),this}xv(t){return super.xv(t),this.QM.forEach(e=>e.shape.xv(t)),this}dispose(){return super.dispose(),this.QM.forEach(t=>t.shape.dispose()),this}setVisible(t){return super.setVisible(t),this.QM.forEach(e=>e.shape.setVisible(t)),this}VR(){return this.QM.forEach(t=>t.shape.VR()),this}lN(t){return this.gN===t&&{}}Hc(t){const e=K(t,this.dt,this.engine.dt),i=this.QM.reduce((s,n)=>{const o=n.shape.Hc(t);if(o){const h=wd(K(o,this.dt,this.engine.dt),e);if(s===void 0||h<s.distance)return{result:o,distance:h,segment:n}}return s},void 0);if(i&&i.result){const s=this.Un.scrollDimension==="columns"?i.result.column+i.segment.dataStartIndex:i.result.column,n=this.Un.scrollDimension==="rows"?i.result.row+i.segment.dataStartIndex:i.result.row;return this.Un.scrollDimension==="columns"&&s>=this.MU||this.Un.scrollDimension==="rows"&&n>=this.MU?void 0:{x:i.result.x,y:i.result.y,column:s,row:n,cellValue:i.result.cellValue}}}zx(t){const e=K(t,this.dt,this.engine.dt),i=this.QM.reduce((s,n)=>{const o=n.shape.zx(t);if(o){const h=wd(K(o,this.dt,this.engine.dt),e);if(s===void 0||h<s.distance)return{result:o,distance:h,segment:n}}return s},void 0);if(i&&i.result){const s=this.Un.scrollDimension==="columns"?i.result.column+i.segment.dataStartIndex:i.result.column,n=this.Un.scrollDimension==="rows"?i.result.row+i.segment.dataStartIndex:i.result.row;return this.Un.scrollDimension==="columns"&&s>=this.MU||this.Un.scrollDimension==="rows"&&n>=this.MU?void 0:{x:i.result.x,y:i.result.y,column:s,row:n,cellValue:i.result.cellValue}}}bt(){return this.Ya.max.x}vt(){return this.Ya.min.x}Mt(){return this.Ya.max.y}xt(){return this.Ya.min.y}vl(){return 0}bl(){return 0}cs(t){return super.cs(t),this.QM.forEach(e=>e.shape.cs(t)),this}}class vb extends Pn{constructor(t,e,i,s,n,o){super(t,e,i,s,n),this.uU=vt("bilinear"),this.gv=Si.lineStyle,this.Un=o}xv(t){return this.uU.S(t),this}Mv(){return this.uU.M()}mv(t){return this.gv=typeof t=="function"?t(this.gv):t,this}bv(){return this.gv}}class bb extends vb{constructor(t,e,i,s,n,o,h,a){super(t,e,i,s,n,o),this.aE=new es,this.bG={},this.AN=Ei({fillStyleSolid:()=>Nt(this.be)&&this.be,fillStylePaletted:()=>Be(this.be)&&this.be}),this.rN=t,this.nN=e,this.gN=h,this.mN=a,this.RR=t.oN(),this.nN=e,this.I_=new xl(this.rN,t.CU,t.dt,Ft,[],{columns:o.sectors,rows:o.annuli,heatmapDataType:"intensity",dataOrder:o.dataOrder==="annuli"?"rows":"columns",AU:this.RR.zR},-1,vn).mv(it);const l=2*Math.PI/360,u=new Float32Array(724);let c=0;u[c+0]=0,u[c+1]=0,c+=2;for(let d=0;d<=360;d+=1){const f=d*l,g=Math.cos(f),y=Math.sin(f);u[c+0]=g,u[c+1]=y,c+=2}this.kU={vertexBuffer:this.RR.nV(u),drawMode:this.RR.gl.TRIANGLE_FAN,drawLength:362}}Ps(){const t=this.ta(),e=this.be,i=this.AN.fillStyleSolid(t),s=this.AN.fillStylePaletted(t),n=i||s,o=this.uU.M(),h=this.uU.i,a=this.Bo.M(),l=this.Bo.i;return this.aE.mV(this.dt),this.I_.Ps(),this.I_.yU?((t||h)&&(this.bG.fill=n?{shader:this.RR.oz(G["2D"],G.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:pt(this.dt),normalSource:void 0}),s&&G.PolarHeatmap({interpolation:o==="bilinear"&&"bilinear",intensityTextureType:this.RR.sz?"float":"ubyte",littleEndian:this.RR.IS_MACHINE_LITTLE_ENDIAN,flipXY:this.Un.dataOrder==="sectors",lut:s.lut}),i&&G.PolarHeatmap({dataType:"uniform"})),fillStylePaletted:s,fillStyleSolid:i}:void 0),l&&(this.bG.mousePicking=a?{shader:this.RR.oz(G["2D"],G.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:pt(this.dt),normalSource:void 0}),G.Color({dataType:"uniform"}))}:void 0),this.ha(e),this.uU.i=!1,this.Bo.i=!1,this):this}zL(t){var e;const{vertexBuffer:i,drawLength:s,drawMode:n}=this.kU,o=this.I_.yU;if(!this.bG.fill||!o)return this;const{fillStylePaletted:h,fillStyleSolid:a}=this.bG.fill,l=t===1?(e=this.bG.mousePicking)===null||e===void 0?void 0:e.shader:this.bG.fill.shader;if(!l)return this;const u=this.dt.mx(),c=Math.min(u.start,u.end),d=Math.max(u.start,u.end),f=Math.min(this.Un.amplitudeStart,this.Un.amplitudeStart+(this.Un.annuli-1)*this.Un.amplitudeStep),g=Math.max(this.Un.amplitudeStart,this.Un.amplitudeStart+(this.Un.annuli-1)*this.Un.amplitudeStep);let y;return y=u.end>u.start?Math.min(g,d)-u.start:Math.max(f,c)-u.start,this.RR.jR(l).aV(l,(p,x,A,v)=>{if(this.RR.uV(p("uScale"),this.aE.fV()).uV(p("uDisp"),this.aE.AV()).dV(p("uIsHighlighted"),t===1||t===2?0:this.zo).AR(p("uHighlightColorOffset"),t===1||t===2?ue:this.Go).dV(p("uRenderEffectMask"),t===2?1:0).uV(v("uViewportSize"),[this.rN.oi().x*this.RR.$z(),this.rN.oi().y*this.RR.$z()]).uV(p("uScaling"),[y,y]).uV(p("uTranslationAxis"),[0,0]).lV(i,void 0,{location:x("aPos"),size:2}).dV(v("uAngleOffset"),this.dt.xx()%(2*Math.PI)).dV(v("uAngleDirection"),this.dt.kx()?1:-1).dV(v("uSectors"),this.Un.sectors).dV(v("uAnnuli"),this.Un.annuli),t===1)this.RR.AR(p("uColor"),this.mN);else{if(this.RR.dV(p("uAmplitudeStart"),this.Un.amplitudeStart).dV(p("uAmplitudeStep"),this.Un.amplitudeStep).dV(p("uAmplitudeAxisStart"),this.dt.mx().start).dV(p("uAmplitudeAxisEnd"),this.dt.mx().end),h){const w=this.I_.Ja;this.RR.LO(A,h.lut,w).cV(p("uTileIntensityValues"),o.gridTiles[0].intensityDataTexture,0)}a&&this.RR.AR(p("uColor"),a.getColor())}return this.RR.Ky(n,s),!0}),this}_v(t){return this.I_._v(t),this}Nt(){return this.I_.Nt(),this}dispose(){return super.dispose(),this.I_.dispose(),this.bG={},this.RR.yV(this.kU.vertexBuffer),this}VR(){return this.dispose(),this}Ce(t){return super.Ce(t),this.I_.Ce(this.be),this}lN(t){return this.gN===t&&{}}Hc(t){const e=this.Un.amplitudeStart,i=this.Un.amplitudeStart+(this.Un.annuli-1)*this.Un.amplitudeStep,s=Math.min(e,i),n=Math.max(e,i);if(t.angle<0||t.angle>360||t.amplitude<s||t.amplitude>n)return;let o=Math.round((t.angle-0)/360*this.Un.sectors);o>=this.Un.sectors&&(o=0);const h=Math.round((t.amplitude-e)/(i-e)*(this.Un.annuli-1));return{iAnnulus:h,iSector:o,cellValue:this.xU(h,o),angle:o*(360/this.Un.sectors),amplitude:e+h*(i-e)/(this.Un.annuli-1)}}zx(t){const e=this.Un.amplitudeStart,i=this.Un.amplitudeStart+(this.Un.annuli-1)*this.Un.amplitudeStep,s=Math.min(e,i),n=Math.max(e,i);if(t.angle<0||t.angle>360||t.amplitude<s||t.amplitude>n)return;const o=(t.angle-0)/360*this.Un.sectors,h=(t.amplitude-e)/(i-e)*(this.Un.annuli-1),a=Math.floor(o),l=Math.floor(h),u={point:{x:l,y:a},value:this.xU(l,a)},c={point:{x:l,y:a+1},value:this.xU(l,a+1)},d={point:{x:l+1,y:a},value:this.xU(l+1,a)},f={point:{x:l+1,y:a+1},value:this.xU(l+1,a+1)},g=Qg({x:h,y:o},u,c,d,f);return g!==void 0?{iAnnulus:l,iSector:a,cellValue:g,angle:t.angle,amplitude:t.amplitude}:void 0}xU(t,e){const i=this.Un.dataOrder==="annuli"?t:e,s=this.Un.dataOrder==="annuli"?e:t;for(let n=0;n<this.I_.gU.gridTiles.length;n+=1){const o=this.I_.gU.gridTiles[n];if(i>=o.iFirstVector.primary&&i<=o.iFirstVector.primary+o.sizeHeatmapDataVectors.primary-1&&s>=o.iFirstVector.secondary&&s<=o.iFirstVector.secondary+o.sizeHeatmapDataVectors.secondary-1){const h=i-o.iFirstVector.primary,a=s-o.iFirstVector.secondary,l=h*o.sizeHeatmapDataVectors.secondary+a;return o.intensityData[l]}}return 0}bt(){return 0}vt(){return 0}Mt(){return 0}xt(){return 0}vl(){return 0}bl(){return 0}}class Mb extends _o{constructor(t){super(t);const{vertices:e,drawMode:i,drawSize:s}=this.aG();this.lG=t.nV(e),this.cG=s,this.dG=i}jR(t){return this.RR.lV(this.lG,0,{location:t.attribute("aCurveOrBaseline"),size:1},{location:t.attribute("aSegmentSide"),size:1}),this}Ky(t,e,i){return this.RR.QV(e!==void 0?e:this.dG,i||0,this.cG,t),this}aG(){return{vertices:new Float32Array([1,0,0,0,0,1,0,1,1,1,1,0]),drawMode:this.RR.gl.TRIANGLES,drawSize:6}}kz(){this.RR.yV(this.lG)}}const Rb=r=>{let t=r._V.Mz.get(void 0);return t||(t=new Mb(r),r._V.Mz.set(void 0,t),t)};class Eb extends il{constructor(t,e,i,s){super(t,e,i,s,[{type:"DataPattern",args:{pattern:"ProgressiveX"}}]),this.TU=Si.fillStyle,this.FU=Si.fillStyle,this.IU=vt(ae.Circle),this.PU=vt(5),this.DU=vt(0),this.BU=vt(void 0),this.XC=!0,this.LU={x:0,y:0}}ud(t){return this.TU=co(this.TU,t),this}ZC(){return this.TU}RU(){return fo(this.EU,this.TU)}zU(){return fo(this.VU,this.FU)}ld(t){return this.FU=co(this.FU,t),Do(this.FU)&&(this.fd(ae.Square),this.pd(1)),this}yd(){return this.FU}fd(t){return this.IU.S(t),Rn(this.IU.M())&&this.pd(1),this}Ad(){return this.IU.M()}pd(t){return this.PU.S(t),this}QC(){return this.PU.M()}gd(t){return this.DU.S(t),this}md(){return this.DU.M()}JC(t){return this.LU=t,this}KC(){return this.LU}$C(t){return this.BU.S(t),this}qC(){return this.BU.M()}}class wb extends pl{constructor(t,e){super(t,e),this.HG=!1,this.$G={enabled:!1,totalDataPointsAtTime:0},this.jG=t instanceof Gt?{type:"linear",scale:t}:{type:"unknown"},this.YG.Uo("DataPattern",i=>{i.allowDataGrouping===!1&&(this.HG=!0)})}OU(t,e){var i,s;const n=t==null?void 0:t.Cc,o=t==null?void 0:t.kc,h=t==null?void 0:t.lc,a=t==null?void 0:t.ac;if(!t||this.HG||!this.GG||this.jG.type!=="linear"||!n||!o||h===void 0||a===void 0||!e)return{cpStateChanged:!1,cpActive:!1};const l=(i=t.wc())===null||i===void 0?void 0:i.x,u=(s=t.Yc())===null||s===void 0?void 0:s.x;if(h<2||l===void 0||u===void 0)return{cpStateChanged:!1,cpActive:!1};const c=this.calculateAvgStepBetweenDataPoints(u,l,h),d=this.jG.scale,f=Math.abs(this.GG==="x"?d.Wi().x:d.Wi().y),g=f/c,y=Math.floor(.8*g),p=y*c,x=y>=4,A=this.$G.enabled?this.$G.columnWidthAxis/f<1.5:void 0,v=this.$G.enabled&&y>this.$G.dataPointsPerColumn?y/this.$G.dataPointsPerColumn>=2:void 0;let w;return this.$G.enabled===!0?A?v&&(w={enabled:!0,columnWidthAxis:p,dataPointsPerColumn:y,totalDataPointsAtTime:h}):w=x?{enabled:!0,columnWidthAxis:p,dataPointsPerColumn:y,totalDataPointsAtTime:h}:{enabled:!1,totalDataPointsAtTime:h}:x&&(w={enabled:!0,columnWidthAxis:p,dataPointsPerColumn:y,totalDataPointsAtTime:h}),this.$G=w||{...this.$G,totalDataPointsAtTime:h},w&&this.Qm(),{cpStateChanged:!!w,cpActive:this.$G.enabled}}NU(t,e){var i,s,n;const o=t.Cc,h=t.kc,a=t.uc,l=t.lc,u=t.ac;if(this.HG||!this.$G.enabled||!o||!h||e===void 0)return;const c=o.length,d=this.$G.columnWidthAxis,f=this.dt.x.getInnerStart(),g=this.dt.x.getInnerEnd(),y=Sc(f,g,o,a,l,u,e,1);if(!y)return;const p=o[y.iFirstSampleDataArray];if(this.GU){if(this.GU.iFirstPackedSample<y.iFirstSample){const m=Math.min(Math.floor((p-this.GU.origin)/d),this.GU.packedColumnsCount);if(m>0)if(this.GU.packedColumnsCount-=m,this.GU.packedColumnsCount>0){this.GU.packedDataX.splice(0,2*m),this.GU.packedDataY.splice(0,2*m),this.GU.packedDataColors&&this.GU.packedDataColors.splice(0,2*m),this.GU.packedDataLookupValues&&this.GU.packedDataLookupValues.splice(0,2*m),this.GU.origin+=m*d;const S=jr(this.GU.origin,Math.max(a-1-c+1,0),a-1,M=>o[Ne(M,a,c)]),b=Ne(S,a,c);this.GU.iFirstPackedSample=o[b]>=this.GU.origin?S:S+1}else this.GU=void 0}if(((i=this.GU)===null||i===void 0?void 0:i.iLastPackedSample)!==void 0&&this.GU.iLastPackedSample>y.iLastSample){const m=o[y.iLastSampleDataArray],S=Math.min(Math.floor((this.GU.origin+this.GU.packedColumnsCount*d-m)/d),this.GU.packedColumnsCount);if(S>0)if(this.GU.packedColumnsCount-=S,this.GU.packedColumnsCount>0){for(let R=0;R<2*S;R+=1)this.GU.packedDataX.pop(),this.GU.packedDataY.pop(),this.GU.packedDataColors&&this.GU.packedDataColors.pop(),this.GU.packedDataLookupValues&&this.GU.packedDataLookupValues.pop();const b=jr(this.GU.origin+this.GU.packedColumnsCount*d,Math.max(a-1-c+1,0),a-1,R=>o[Ne(R,a,c)]),M=Ne(b,a,c);this.GU.iLastPackedSample=o[M]<=this.GU.origin+this.GU.packedColumnsCount*d?b:b-1}else this.GU=void 0}}const x=this.GU||{origin:p,packedColumnsCount:0,packedDataX:[],packedDataY:[],packedDataColors:t.Rc?[]:void 0,packedDataLookupValues:t.Lc?[]:void 0,packedDataSize:t.Ec?[]:void 0,packedDataRotation:t.zc?[]:void 0,iFirstPackedSample:y.iFirstSample,iLastPackedSample:void 0},A=(m,S,b)=>{let M=Math.min(m,m+S*d),R=Math.max(m,m+S*d),T=b;const z=[];let P=ht,_=ht,V=-1,B=st,I=st,L=-1,U=0;for(;T<=y.iLastSample&&T>=y.iFirstSample;){const Y=T%c,O=o[Y],j=h[Y];if(M<=O&&O<=R)U+=1,Number.isNaN(j)||(j>_&&(P=O,_=j,V=T),j<I&&(B=O,I=j,L=T)),T+=S;else{if(U>0)P=P===ht?Number.NaN:P,_=_===ht?Number.NaN:_,B=B===st?Number.NaN:B,I=I===st?Number.NaN:I,V<L?(z.push({iFirst:V,iSecond:L}),S>0?(x.packedDataX.push(P),x.packedDataY.push(_),x.packedDataX.push(B),x.packedDataY.push(I)):(x.packedDataX.unshift(B),x.packedDataY.unshift(I),x.packedDataX.unshift(P),x.packedDataY.unshift(_))):(z.push({iFirst:L,iSecond:V}),S>0?(x.packedDataX.push(B),x.packedDataY.push(I),x.packedDataX.push(P),x.packedDataY.push(_)):(x.packedDataX.unshift(P),x.packedDataY.unshift(_),x.packedDataX.unshift(B),x.packedDataY.unshift(I)));else{const $=S>0?x.iLastPackedSample:x.iFirstPackedSample;if($===void 0)z.push({iFirst:0,iSecond:0}),S>0?(x.packedDataX.push(Number.NaN),x.packedDataY.push(Number.NaN),x.packedDataX.push(Number.NaN),x.packedDataY.push(Number.NaN)):(x.packedDataX.unshift(Number.NaN),x.packedDataY.unshift(Number.NaN),x.packedDataX.unshift(Number.NaN),x.packedDataY.unshift(Number.NaN));else{const Z=Ne($,a,c),Q=o[Z],ct=h[Z],et=(M+R)/2,mt=et-S*d/6,xt=ct+(mt-Q)/(O-Q)*(j-ct),Ct=et+S*d/6,Pt=ct+(Ct-Q)/(O-Q)*(j-ct);z.push({iFirst:$,iSecond:$}),S>0?(x.packedDataX.push(mt),x.packedDataY.push(xt),x.packedDataX.push(Ct),x.packedDataY.push(Pt)):(x.packedDataX.unshift(mt),x.packedDataY.unshift(xt),x.packedDataX.unshift(Ct),x.packedDataY.unshift(Pt))}}if(x.packedColumnsCount+=1,S>0?x.iLastPackedSample=T-1:(x.iFirstPackedSample=T+1,x.origin=M),M=Math.min(m+z.length*S*d,m+(z.length+1)*S*d),R=Math.max(m+z.length*S*d,m+(z.length+1)*S*d),U=0,P=ht,_=ht,V=-1,B=st,I=st,L=-1,M<f||R>g)break}}return z},v=A(x.origin+x.packedColumnsCount*d,1,((s=this.GU)===null||s===void 0?void 0:s.iLastPackedSample)!==void 0?this.GU.iLastPackedSample+1:y.iFirstSample),w=A(x.origin,-1,((n=this.GU)===null||n===void 0?void 0:n.iFirstPackedSample)!==void 0?this.GU.iFirstPackedSample-1:y.iFirstSample),E=t.Rc&&x.packedDataColors?[t.Rc,x.packedDataColors]:void 0,C=t.Lc&&x.packedDataLookupValues?[t.Lc,x.packedDataLookupValues]:void 0,k=t.Ec&&x.packedDataSize?[t.Ec,x.packedDataSize]:void 0,F=t.zc&&x.packedDataRotation?[t.zc,x.packedDataRotation]:void 0;if(E||C||k||F){for(const m of v){const S=Ne(m.iFirst,a,c),b=Ne(m.iSecond,a,c);E&&E[1].push(E[0][S],E[0][b]),C&&C[1].push(C[0][S],C[0][b]),k&&k[1].push(k[0][S],k[0][b]),F&&F[1].push(F[0][S],F[0][b])}for(const m of w){const S=Ne(m.iFirst,a,c),b=Ne(m.iSecond,a,c);E&&E[1].unshift(E[0][b],E[0][S]),C&&C[1].unshift(C[0][b],C[0][S]),k&&k[1].unshift(k[0][b],k[0][S]),F&&F[1].unshift(F[0][b],F[0][S])}}return this.GU=x.packedColumnsCount>0?x:void 0,{x:x.packedDataX,y:x.packedDataY,color:x.packedDataColors,lookup:x.packedDataLookupValues,size:x.packedDataSize,rotation:x.packedDataRotation}}Qm(){this.GU=void 0}tW(t){if(this.GG&&this.jG.type==="linear"){const e=this.GG==="x"?this.jG.scale.x.ig:this.jG.scale.y.ig;if(!e)throw new Error("CP helper has no information about Axis state.");if(e.Je===Fs.progressive||e.Je===Fs.regressive){const i=Math.abs(this.GG==="x"?this.jG.scale.x.getInnerInterval():this.jG.scale.y.getInnerInterval());if(this.$G.enabled)return 2*i/this.$G.columnWidthAxis;const s=t.length,n=t[0],o=t[s-1];return i/this.calculateAvgStepBetweenDataPoints(this.GG==="x"?n.x:n.y,this.GG==="x"?o.x:o.y,s)}}}iW(t,e,i){if(!this.GG)return e;const s=i.length;let n=uh(i,t.min,this.GG,this.WG,0,s-1);n===void 0&&(n=this.WG?s-1:0);let o=uh(i,t.max,this.GG,this.WG,0,s-1);return o===void 0&&(o=this.WG?0:s-1),1+Math.abs(o-n)}sW(){}}class kb extends Eb{constructor(t,e,i,s,n,o){super(t,e,i,s),this.aE=new es,this.SW=new wb(this.dt,this),this.AN=Ei({lineStyleSolid:()=>pi(this.lu)&&this.lu,lineStyleDashed:()=>rl(this.lu)&&this.lu,strokeFillSolid:()=>{const h=this.lu.getFillStyle();return Nt(h)&&h},strokeFillLinearGradient:()=>{const h=this.lu.getFillStyle();return ve(h)&&h},strokeFillRadialGradient:()=>{const h=this.lu.getFillStyle();return Ae(h)&&h},strokeFillIndividual:()=>{const h=this.lu.getFillStyle();return Ri(h)&&h},strokeFillPaletted:()=>{const h=this.lu.getFillStyle();return Be(h)&&h},areaFillSolid:()=>Nt(this.TU)&&this.TU,areaFillLinearGradient:()=>ve(this.TU)&&this.TU,areaFillRadialGradient:()=>Ae(this.TU)&&this.TU,areaFillIndividual:()=>Ri(this.TU)&&this.TU,areaFillPaletted:()=>Be(this.TU)&&this.TU,markerFillSolid:()=>Nt(this.FU)&&this.FU,markerFillLinearGradient:()=>ve(this.FU)&&this.FU,markerFillRadialGradient:()=>Ae(this.FU)&&this.FU,markerFillPaletted:()=>Be(this.FU)&&this.FU,markerFillIndividual:()=>Ri(this.FU)&&this.FU,markerFillImage:()=>Do(this.FU)&&this.FU,markerShapeIcon:()=>{const h=this.IU.M();return Rn(h)&&h}}),this.od=vt(void 0),this.WU=[],this.Qa=!1,this.UU=[],this.YU=void 0,this.rU=(h,a,l)=>{var u;const c=(u=this.HU)===null||u===void 0?void 0:u.shapeIcon;let d=h,f=a;return c&&(d=c.oi().x,f=c.oi().y),ml(h,a,d*this.PU.M(),f*this.PU.M(),l)},this.nN=e,this.bG={type:"none"},this.RR=t.oN(),this.rN=t,this.SG=this.RR.eO,this.gN=n,this.mN=o}ad(t){return this.od.S(uu(t,this.od.M(),()=>[t.$c((e,i)=>{this.WU.push({min:e,max:i}),t.Gc()===void 0&&this.$U&&this.UU.push({min:e,max:i})}),t.Xc(()=>{this.Qa=!0,this.$U=void 0,this.YU=void 0,this.SW.Qm()})])),this.YU=void 0,this}Ps(){var t,e,i,s,n,o,h,a,l,u,c,d,f,g,y;const p=(t=this.od.M())===null||t===void 0?void 0:t.Wt,x=this.od.i,A=p==null?void 0:p.Cc,v=p==null?void 0:p.kc;if(!p||!A||!v)return this;const w=p.Lc,E=p.Rc,C=p.Ec,k=p.zc,F=p.uc,m=p.lc,S=p.ac,b=this.lu,M=this.TU,R=x||this.ra()||this.RU()||this.zU(),T=this.AN.lineStyleSolid(R),z=this.AN.lineStyleDashed(R),P=T||z,_=P&&P.getThickness(),V=this.AN.strokeFillSolid(R),B=this.AN.strokeFillLinearGradient(R),I=this.AN.strokeFillRadialGradient(R),L=this.AN.strokeFillIndividual(R),U=this.AN.strokeFillPaletted(R),Y=V||B||I||L||U,O=this.AN.areaFillSolid(R),j=this.AN.areaFillLinearGradient(R),$=this.AN.areaFillRadialGradient(R),Z=this.AN.areaFillIndividual(R),Q=this.AN.areaFillPaletted(R),ct=O||j||$||Z||Q,et=this.AN.markerFillSolid(R),mt=this.AN.markerFillLinearGradient(R),xt=this.AN.markerFillRadialGradient(R),Ct=this.AN.markerFillPaletted(R),Pt=this.AN.markerFillIndividual(R),dt=this.AN.markerFillImage(R),ut=et||mt||xt||Ct||Pt||dt,Ys=this.IU.M(),ye=this.IU.i,te=this.AN.markerShapeIcon(ye),vr=this.PU.M(),Pe=this.PU.i,ke=this.BU.i,Ws=this.WU.length>0||ke,Yt=this.Qa,xe=Yt?[p.Wc()]:(at=>{const zt=[];for(const lt of at){let At=!1;for(const Wt of zt)if(lt.min>=Wt.min&&lt.min<=Wt.max||lt.max>=Wt.min&&lt.max<=Wt.max){Wt.min=Math.min(Wt.min,lt.min),Wt.max=Math.min(Wt.max,lt.max),At=!0;break}At||zt.push(lt)}return zt})(this.WU),si=this.dt.x.Yt,_e=this.dt.x.getInnerStart(),Oe=this.dt.x.getInnerEnd(),xs=p.Gc(),me=!!z,de=this.Bo.M(),_n=this.Bo.i,{cpStateChanged:be,cpActive:Te}=this.SW.OU(p,this.XC);if(xs&&Te&&(be||Yt||Ws||si||R)){const at=this.SW.NU(p,xs);if(at){const zt=!be&&!Yt&&!R;this.XU=$l(this.RR,[at.x,at.y],at.color,at.lookup,at.size,at.rotation,me,this.XU,zt,xs,1e3,this.dt._i(),At=>on(At,this.dt._i())),this.jU={min:st,max:ht};const lt=at.y.length;for(let At=0;At<lt;At+=1){const Wt=at.y[At];Number.isNaN(Wt)||(this.jU.min=Math.min(this.jU.min,Wt),this.jU.max=Math.max(this.jU.max,Wt))}(e=this.dt.y.ig)===null||e===void 0||e.uh()}}if(xs&&!Te&&(be||Yt||Ws||si||ke||R)){const at=Sc(_e,Oe,A,F,m,S,xs,1);if(!this.ZU||(at==null?void 0:at.iFirstSample)!==this.ZU.iFirstSample||at.iLastSample!==this.ZU.iLastSample||Yt){this.jU={min:st,max:ht};for(const zt of(at==null?void 0:at.dataRanges)||[])for(let lt=zt.offset;lt<zt.offset+zt.count;lt+=1){const At=v[lt];Number.isNaN(At)||(this.jU.min=Math.min(this.jU.min,At),this.jU.max=Math.max(this.jU.max,At))}(i=this.dt.y.ig)===null||i===void 0||i.uh()}if(this.ZU=at,at===void 0)this.RR.yV((s=this.XU)===null||s===void 0?void 0:s.bufferX),this.RR.yV((n=this.XU)===null||n===void 0?void 0:n.bufferY),this.XU=void 0,this.RR.yV((o=this.QU)===null||o===void 0?void 0:o.bufferX),this.RR.yV((h=this.QU)===null||h===void 0?void 0:h.bufferY),this.QU=void 0,this.JU=at;else if(be||Yt||!this.JU||at.iFirstSample<this.JU.iFirstSample||at.iLastSample>this.JU.iLastSample||R){let zt,lt,At,Wt,ee,Jt;if(at.dataRanges.length===1){const Mt=at.dataRanges[0];zt=A.subarray(Mt.offset,Mt.offset+Mt.count),lt=v.subarray(Mt.offset,Mt.offset+Mt.count),At=E?E.subarray(Mt.offset,Mt.offset+Mt.count):void 0,Wt=w?w.subarray(Mt.offset,Mt.offset+Mt.count):void 0,ee=C?C.subarray(Mt.offset,Mt.offset+Mt.count):void 0,Jt=k?k.subarray(Mt.offset,Mt.offset+Mt.count):void 0}else{const Mt=at.dataRanges[0],Dt=at.dataRanges[1],ie=Mt.count+Dt.count;zt=new Float32Array(ie),zt.set(A.subarray(Mt.offset),0),zt.set(A.subarray(Dt.offset,Dt.offset+Dt.count),Mt.count),lt=new Float32Array(ie),lt.set(v.subarray(Mt.offset),0),lt.set(v.subarray(Dt.offset,Dt.offset+Dt.count),Mt.count),E&&(At=new Uint32Array(ie),At.set(E.subarray(Mt.offset),0),At.set(E.subarray(Dt.offset,Dt.offset+Dt.count),Mt.count)),w&&(Wt=new Float32Array(ie),Wt.set(w.subarray(Mt.offset),0),Wt.set(w.subarray(Dt.offset,Dt.offset+Dt.count),Mt.count)),C&&(ee=new Float32Array(ie),ee.set(C.subarray(Mt.offset),0),ee.set(C.subarray(Dt.offset,Dt.offset+Dt.count),Mt.count)),k&&(Jt=new Float32Array(ie),Jt.set(k.subarray(Mt.offset),0),Jt.set(k.subarray(Dt.offset,Dt.offset+Dt.count),Mt.count))}const sn=!be&&!Yt&&!R;this.QU=$l(this.RR,[zt,lt],At,Wt,ee,Jt,me,this.QU,sn,xs,1e3,this.dt._i(),Mt=>on(Mt,this.dt._i()));let Ce=zt,ne=lt,Nn=At,Ye=Wt;const Me=this.BU.M();if(Me){const Mt=Me.type==="spline"?((Dt,ie)=>{const{xValues:tr,yValues:Ie,lookupValues:$t,colors:ci}=Dt;if(tr.length<=2)return{xValues:Array.from(tr),yValues:Array.from(Ie),lookupValues:$t?Array.from($t):void 0,colors:ci?Array.from(ci):void 0};const pe=((nt,se)=>{const ri=nt.length-1,Oi=Array(ri);if(ri>1){let Ii=N(0,0),di=N(0,0),er=N(0,0),ir=Li(Ut({x:nt[1],y:se[1]},{x:nt[0],y:se[0]}));const Ln=3;let rn=0,nn=0;for(let Re=0;Re<ri;Re+=1){const As=Array(4);if(As[0]={x:nt[Re],y:se[Re]},As[1]={x:nt[Re],y:se[Re]},As[3]={x:nt[Re+1],y:se[Re+1]},As[2]={x:nt[Re+1],y:se[Re+1]},er=ir,Ii=di,Re+1<ri?(ir=nt[Re+2]===nt[Re+1]&&se[Re+2]===se[Re+1]?N(0,0):Li(Ut({x:nt[Re+2],y:se[Re+2]},{x:nt[Re+1],y:se[Re+1]})),di=Li(gt(er,ir))):di=N(0,0),se[Re+1]===se[Re])rn=0,nn=0;else{const zn=nt[Re+1]-nt[Re];rn=Math.abs(Ii.x)>1e-5?Math.abs(zn/(Ln*Ii.x)):1,nn=Math.abs(di.x)>1e-5?Math.abs(zn/(Ln*di.x)):1}As[1]=gt(St(Ii,rn),As[1]),As[2]=Ut(As[2],St(di,nn)),Oi[Re]=As}}return Oi.length>0?Oi:[]})(tr,Ie),Se=pe.length,Ai=[],Di=[],Ss=[],Pi=[];for(let nt=0;nt<Se;nt+=1){const se=pe[nt];for(let Ps=0;Ps<ie;Ps+=1){const ri=Ps/(ie-1),Oi=ri*ri,Ii=Oi*ri,di=1-ri,er=di*di,ir=er*di;Ai.push(ir*se[0].x+3*ri*er*se[1].x+3*Oi*di*se[2].x+Ii*se[3].x),Di.push(ir*se[0].y+3*ri*er*se[1].y+3*Oi*di*se[2].y+Ii*se[3].y)}}if($t)for(let nt=0;nt<Ai.length;nt+=1){const se=$t[Math.round(nt/ie)];Pi[nt]=se}if(ci)for(let nt=0;nt<Ai.length;nt+=1){const se=ci[Math.round(nt/ie)];Ss[nt]=se}return{xValues:Ai,yValues:Di,lookupValues:$t?Pi:void 0,colors:ci?Ss:void 0}})({xValues:zt,yValues:lt,lookupValues:Wt,colors:At},Me.resolution||20):Me.type==="step"?((Dt,ie)=>{const{xValues:tr,yValues:Ie,lookupValues:$t,colors:ci}=Dt,pe=[],Se=[],Ai=[],Di=[],Ss=tr.length,Pi=ie;if(Ss>0){let nt=0,se=tr[0],Ps=Ie[0];pe[nt]=se,Se[nt]=Ps,nt+=1;for(let ri=1;ri<Ss;ri+=1){const Oi=tr[ri],Ii=Ie[ri];if(Pi<=0)pe[nt]=se,Se[nt]=Ii,nt+=1;else{const di=se*(1-Pi)+Oi*Pi;pe[nt]=di,Se[nt]=Ps,nt+=1,pe[nt]=di,Se[nt]=Ii,nt+=1}pe[nt]=Oi,Se[nt]=Ii,nt+=1,se=Oi,Ps=Ii}}if($t){if(Pi===br.before){Di[0]=$t[0];for(let nt=1;nt<Ss;nt+=1)Di[2*nt-1]=$t[nt],Di[2*nt]=$t[nt]}else if(Pi===br.middle||Pi===br.after){Di[0]=$t[0],Di[1]=$t[0];for(let nt=1;nt<Ss;nt+=1)Di[3*nt-1]=$t[nt],Di[3*nt]=$t[nt],Di[3*nt+1]=$t[nt]}}if(ci){if(Pi===br.before){Ai[0]=ci[0];for(let nt=1;nt<Ss;nt+=1)Ai[2*nt-1]=ci[nt],Ai[2*nt]=ci[nt]}else if(Pi===br.middle||Pi===br.after){Ai[0]=ci[0],Ai[1]=ci[0];for(let nt=1;nt<Ss;nt+=1)Ai[3*nt-1]=ci[nt],Ai[3*nt]=ci[nt],Ai[3*nt+1]=ci[nt]}}return{xValues:pe,yValues:Se,lookupValues:$t?Di:void 0,colors:ci?Ai:void 0}})({xValues:zt,yValues:lt,lookupValues:Wt,colors:At},Me.step==="before"?0:Me.step==="after"?1:.5):void 0;Ce=Mt?Mt.xValues:Ce,ne=Mt?Mt.yValues:ne,Nn=Mt!=null&&Mt.colors?Mt.colors:Nn,Ye=Mt!=null&&Mt.lookupValues?Mt.lookupValues:Ye}this.XU=Ce===zt&&ne===lt?this.QU:$l(this.RR,[Ce,ne],Nn,Ye,void 0,void 0,me,((a=this.XU)===null||a===void 0?void 0:a.bufferX)===this.QU.bufferX?void 0:this.XU,!(!sn||ke||Me),xs,1e3,this.dt._i(),Mt=>on(Mt,this.dt._i())),this.JU=at}}if(!xs&&(Yt||Ws||R)){if(!this.XU||this.XU.bufferSize<p.lc||me){const at=p.Vc!==void 0?p.Vc:p.lc;let zt,lt=0,At=0;if(me){const Wt=Ru(A,v,A[0],v[0],0,0);zt=this.RR.EV(2*at,Wt[0],(l=this.XU)===null||l===void 0?void 0:l.bufferLengthSoFar,Float32Array),lt=Wt[1],At=Wt[2]}this.XU={bufferX:this.RR.EV(at*(this.dt._i()?2:1),on(A,this.dt._i()),(u=this.XU)===null||u===void 0?void 0:u.bufferX),bufferY:this.RR.EV(at*(this.dt._i()?2:1),on(v,this.dt._i()),(c=this.XU)===null||c===void 0?void 0:c.bufferY),bufferColors:E?this.RR.EV(at,E,(d=this.XU)===null||d===void 0?void 0:d.bufferColors,Uint32Array):void 0,bufferLookupValues:w?this.RR.EV(at,w,(f=this.XU)===null||f===void 0?void 0:f.bufferLookupValues,Float32Array):void 0,bufferSizes:C?this.RR.EV(at,C,(g=this.XU)===null||g===void 0?void 0:g.bufferSizes,Float32Array):void 0,bufferRotations:k?this.RR.EV(at,k,(y=this.XU)===null||y===void 0?void 0:y.bufferRotations,Float32Array):void 0,bufferLengthSoFar:zt,lengthSoFarX:lt,lengthSoFarY:At,bufferSize:at,valueCount:p.lc}}else{const at=this.XU.bufferX,zt=this.XU.bufferY;xe.forEach(lt=>{var At,Wt,ee,Jt;const sn=A.subarray(lt.min,lt.max+1),Ce=v.subarray(lt.min,lt.max+1);if(this.RR.zV(at,lt.min*(this.dt._i()?2:1),on(sn,this.dt._i())),this.RR.zV(zt,lt.min*(this.dt._i()?2:1),on(Ce,this.dt._i())),E&&((At=this.XU)===null||At===void 0?void 0:At.bufferColors)){const ne=E.subarray(lt.min,lt.max+1);this.RR.zV(this.XU.bufferColors,lt.min,ne,Uint32Array)}if(w&&(!((Wt=this.XU)===null||Wt===void 0)&&Wt.bufferLookupValues)){const ne=w.subarray(lt.min,lt.max+1);this.RR.zV(this.XU.bufferLookupValues,lt.min,ne,Float32Array)}if(k&&(!((ee=this.XU)===null||ee===void 0)&&ee.bufferRotations)){const ne=k.subarray(lt.min,lt.max+1);this.RR.zV(this.XU.bufferRotations,lt.min,ne,Float32Array)}if(C&&(!((Jt=this.XU)===null||Jt===void 0)&&Jt.bufferSizes)){const ne=C.subarray(lt.min,lt.max+1);this.RR.zV(this.XU.bufferSizes,lt.min,ne,Float32Array)}}),this.XU.valueCount=p.lc}this.QU=this.XU}if(this.aE.mV(this.dt),R||Pe||ye||_n){if(Y&&P&&_!==!1){const at=_===-1?"primitive":"triangulated",zt=U?["lookup",U.lookUpProperty,U.lut]:L?"attribute":B?["gradient",B]:I?["gradient",I]:"uniform";this.bG=at==="primitive"?{type:at,shader:this.RR.oz(G["2D"],G.Color({dataType:zt}),G.VertexLocation({axisWorldTranslation:pt(this.dt),normalSource:void 0,splitPosAttribute:!0}),z&&G.StippleTexture),lineStyleSolid:T,lineStyleDashed:z,fillStyleSolid:V,fillStyleLinearGradient:B,fillStyleRadialGradient:I,fillStyleIndividual:L,fillStylePaletted:U,mousePickingShader:de&&this.RR.oz(G["2D"],G.VertexLocation({axisWorldTranslation:pt(this.dt),normalSource:void 0,splitPosAttribute:!0}),z&&G.StippleTexture,G.MousePicking)}:at==="triangulated"?{type:at,shader:this.RR.oz(G["2D"],G.Color({dataType:zt}),G.LineInstanced2D({axisWorldTranslation:pt(this.dt),normalSource:void 0,splitPosAttribute:!0}),this.SG?G.AliasedEdge:void 0,z&&G.StippleTextureInstanced),geometry:No(this.RR,_),thickness:_,lineStyleSolid:T,lineStyleDashed:z,fillStyleSolid:V,fillStyleLinearGradient:B,fillStyleRadialGradient:I,fillStyleIndividual:L,fillStylePaletted:U,mousePickingShader:de&&this.RR.oz(G["2D"],G.LineInstanced2D({axisWorldTranslation:pt(this.dt),normalSource:void 0,splitPosAttribute:!0}),z&&G.StippleTextureInstanced,G.MousePicking)}:{type:"none"}}else this.bG={type:"none"};if(this.KU=ct?{shader:this.RR.oz(G["2D"],Q&&G.Color({dataType:["lookup",Q.lookUpProperty,Q.lut]}),Z&&G.Color({dataType:"attribute"}),O&&G.Color({dataType:"uniform"}),j&&G.Color({dataType:["gradient",j]}),$&&G.Color({dataType:["gradient",$]}),G.Area2D({axisWorldTranslation:pt(this.dt),normalSource:void 0,splitPosAttribute:!0})),geometry:Rb(this.RR),fillStyleSolid:O,fillStyleLinearGradient:j,fillStyleRadialGradient:$,fillStyleIndividual:Z,fillStylePaletted:Q,mousePickingShader:de&&this.RR.oz(G["2D"],G.Area2D({axisWorldTranslation:pt(this.dt),normalSource:void 0,splitPosAttribute:!0}),G.MousePicking)}:void 0,ut){const at=!(!dt&&!te),zt=vr>1||at,lt=C?"attribute":"uniform",At=!zt&&G.PointSize("uniform"),Wt=G.VertexLocation({offset:zt&&!at?{dataType:lt,sizeUnit:"px",symmetric:!0,rotation:{dataType:k?"attribute-deg":"uniform"},useAlignment:!0}:zt&&at?{dataType:lt,sizeUnit:"scale",rotation:{dataType:k?"attribute-deg":"uniform"},useAlignment:!0}:void 0,axisWorldTranslation:pt(this.dt),normalSource:void 0,splitPosAttribute:!0});this.HU={shader:this.RR.oz(G["2D"],At,Wt,et&&G.Color({dataType:"uniform",overrideOpacity:!0,maskTexture:!!te}),mt&&G.Color({dataType:["gradient",mt],overrideOpacity:!0,maskTexture:!!te}),xt&&G.Color({dataType:["gradient",xt],overrideOpacity:!0,maskTexture:!!te}),Ct&&G.Color({dataType:["lookup",Ct.getLookUpProperty(),Ct.getPalette()],overrideOpacity:!0,maskTexture:!!te}),Pt&&G.Color({dataType:"attribute",overrideOpacity:!0,maskTexture:!!te}),dt&&G.Color({dataType:["image",dt],overrideOpacity:!0,maskTexture:!!te})),geometry:_c(Ys,this.RR,lt==="uniform"?vr:25),fillStyleSolid:et,fillStyleLinearGradient:mt,fillStyleRadialGradient:xt,fillStylePaletted:Ct,fillStyleIndividual:Pt,fillStyleImage:dt,mousePickingShader:de&&this.RR.oz(G["2D"],At,Wt,G.MousePicking),shapeIcon:te,pointSizeAsScale:at,instancedRendering:zt}}else this.HU=void 0}const Et=Xr({min:{x:this.vt(),y:this.dt.y.getInnerStart()},max:{x:this.bt(),y:this.Mt()}},{x:this.vl(),y:this.bl()},this.dt),Lt=Xr({min:{x:this.vt(),y:this.xt()},max:{x:this.bt(),y:this.Mt()}},{x:this.vl(),y:this.bl()},this.dt);if(this.qU=this.RR.NO(B,this,Lt),this.tY=this.RR.GO(I,this,Lt),this.iY=this.RR.NO(j,this,Et),this.sY=this.RR.GO($,this,Et),this.eY=this.RR.NO(mt,this,Lt),this.hY=this.RR.GO(xt,this,Lt),(this.YU===void 0||Ws)&&w&&(Xl(U)||Xl(Q)||Xl(Ct))){const at=this.YU?xe:[p.Wc()];let zt=this.YU?this.YU.max:ht,lt=this.YU?this.YU.min:st;const At=w;at.forEach(Wt=>{for(let ee=Wt.min;ee<=Wt.max;ee+=1){const Jt=At[ee];lt=Jt<lt?Jt:lt,zt=Jt>zt?Jt:zt}}),this.YU={min:lt,max:zt}}return this.MG=z?this.RR.IO(z.getPattern()):void 0,this.hU=this.RR.RO(this,this.hU,dt,te,Pe,this.rU),this.fu(b),this.EU=M,this.VU=this.FU,this.IU.i=!1,this.PU.i=!1,this.WU.length=0,this.Qa=!1,this.BU.i=!1,this.od.i=!1,this.Bo.i=!1,this}zL(t){var e,i,s,n,o,h,a,l,u,c,d,f,g,y,p,x,A;const v=this.RR.gl,w=(e=this.XU)===null||e===void 0?void 0:e.bufferX,E=(i=this.XU)===null||i===void 0?void 0:i.bufferY,C=(s=this.XU)===null||s===void 0?void 0:s.bufferColors,k=(n=this.XU)===null||n===void 0?void 0:n.bufferLookupValues,F=(o=this.XU)===null||o===void 0?void 0:o.valueCount,m=(h=this.QU)===null||h===void 0?void 0:h.valueCount,S=(a=this.od.M())===null||a===void 0?void 0:a.Wt,b=S==null?void 0:S.Gc();if(!w||!E||!S)return this;const M=(O,j,$)=>{if(Wo(this.RR,O,this.dt._i(),w,"aLocation","X",1,!1,v.FLOAT,Float32Array.BYTES_PER_ELEMENT),Wo(this.RR,O,this.dt._i(),E,"aLocation","Y",1,!1,v.FLOAT,Float32Array.BYTES_PER_ELEMENT),j&&t!==1){if(!C)return!1;Wo(this.RR,O,!1,C,"aColor","",4,!0,v.UNSIGNED_BYTE,1)}if($&&$.lookUpProperty==="value"&&t!==1){if(!k)return!1;Wo(this.RR,O,!1,k,"aLookupValue","",1,!1,v.FLOAT,Float32Array.BYTES_PER_ELEMENT)}return!0},R=t===1?(l=this.KU)===null||l===void 0?void 0:l.mousePickingShader:(u=this.KU)===null||u===void 0?void 0:u.shader;if(this.KU&&R&&F!==void 0&&F>0&&b){const O=this.KU;this.RR.jR(R).aV(R,(j,$,Z,Q)=>!!this.RR.zO(Z,t,this,{uniforms:this.aE,mousePickingColor:this.mN,fillStyleSolid:O.fillStyleSolid,fillStyleLinearGradient:O.fillStyleLinearGradient,fillStyleRadialGradient:O.fillStyleRadialGradient,fillStylePaletted:O.fillStylePaletted,linearGradientInfo:this.iY,radialGradientInfo:this.sY,lookupValueRange:O.fillStylePaletted?Xi(O.fillStylePaletted,this,this.YU):void 0,lookupValueBuffer:null})&&!!M(Z,O.fillStyleIndividual,O.fillStylePaletted)&&(O==null||O.geometry.jR(Z).Ky(F-1),!0))}const T=this.bG.type==="none"?void 0:t===1?this.bG.mousePickingShader:this.bG.shader;if(this.bG.type!=="none"&&T&&F!==void 0&&F>0){const O=this.bG;this.RR.jR(T).aV(T,(j,$,Z,Q)=>{var ct,et;if(!this.RR.zO(Z,t,this,{uniforms:this.aE,mousePickingColor:this.mN,fillStyleSolid:O.fillStyleSolid,fillStylePaletted:O.fillStylePaletted,fillStyleLinearGradient:O.fillStyleLinearGradient,fillStyleRadialGradient:O.fillStyleRadialGradient,fillStyleIndividual:O.fillStyleIndividual,linearGradientInfo:this.qU,radialGradientInfo:this.tY,lookupValueRange:O.fillStylePaletted?Xi(O.fillStylePaletted,this,this.YU):void 0,lookupValueBuffer:O.type==="primitive"?k:null,colorBuffer:O.type==="primitive"?C:null,coordsX:O.type==="primitive"?w:void 0,coordsY:O.type==="primitive"?E:void 0,coordsHighPrecision:this.dt._i()}))return!1;if(O.lineStyleDashed){if(!this.MG)return!1;this.RR.uV(j("uStippleCount"),[this.us.oi().x/this.MG.BO,this.us.oi().y/this.MG.BO]).dV(Q("uStippleTextureWidthLimiter"),this.MG.DO/this.MG.BO).dV(j("uStippleScale"),O.lineStyleDashed.getPatternScale()).cV(j("uStippleTexture"),this.MG.PO,1)}if(O.type==="primitive"){if(O.lineStyleDashed){if(!(!((ct=this.XU)===null||ct===void 0)&&ct.bufferLengthSoFar))return!1;this.RR.GV($("aLengthSoFar"),this.XU.bufferLengthSoFar)}Kn.yG(this.rN,F)}else{if(!M(Z,O.fillStyleIndividual,O.fillStylePaletted))return!1;if(O.lineStyleDashed){if(!(!((et=this.XU)===null||et===void 0)&&et.bufferLengthSoFar))return!1;Wo(this.RR,Z,!1,this.XU.bufferLengthSoFar,"aLengthSoFar","",2,!1,v.FLOAT,Float32Array.BYTES_PER_ELEMENT)}Bs.zL(this.rN,O.geometry,Z,this.SG&&t!==1,t===1,O.thickness,F-1)}return!0})}const z=(c=this.QU)===null||c===void 0?void 0:c.bufferX,P=(d=this.QU)===null||d===void 0?void 0:d.bufferY,_=(f=this.QU)===null||f===void 0?void 0:f.bufferColors,V=(g=this.QU)===null||g===void 0?void 0:g.bufferLookupValues,B=(y=this.QU)===null||y===void 0?void 0:y.bufferSizes,I=(p=this.QU)===null||p===void 0?void 0:p.bufferRotations,L=t===1?(x=this.HU)===null||x===void 0?void 0:x.mousePickingShader:(A=this.HU)===null||A===void 0?void 0:A.shader,U=this.HU;let Y=1;if(b){const O=this.od?Math.abs((this.bt()-this.vt())/S.getSampleCount()):0,j=this.dt.x.getInnerInterval()/O,$=this.PU.M(),Z=this.dt.x.ri()/$/1,Q=2*Z;Y=j<=Z?1:Math.max(1-(j-Z)/(Q-Z),0)}if(L&&U&&z&&P&&Y>0&&m!==void 0&&m>0){const O=U,j=O.instancedRendering?1:0;this.RR.jR(L).aV(L,($,Z,Q,ct)=>{if(!this.RR.zO(Q,t,this,{uniforms:this.aE,mousePickingColor:this.mN,fillStyleSolid:O.fillStyleSolid,fillStyleLinearGradient:O.fillStyleLinearGradient,fillStyleRadialGradient:O.fillStyleRadialGradient,linearGradientInfo:this.eY,radialGradientInfo:this.hY,fillStylePaletted:O.fillStylePaletted,fillStyleIndividual:O.fillStyleIndividual,lookupValueRange:O.fillStylePaletted?Xi(O.fillStylePaletted,this,this.YU):void 0,lookupValueBuffer:V,lookupValueAttribDivisor:j,colorBuffer:_,colorAttribDivisor:j,fillStyleImage:O.fillStyleImage,texturedFillGLInfo:this.hU,texCoordAttribDivisor:0,maskTexture:O.shapeIcon&&this.hU,maskTextureCoordsAttribDivisor:0}))return!1;if(this.dt._i()?this.RR.lV(z,j,{location:Z("aPos_highpartX"),size:1},{location:Z("aPos_lowpartX"),size:1}).lV(P,j,{location:Z("aPos_highpartY"),size:1},{location:Z("aPos_lowpartY"),size:1}):this.RR.$V(Z("aPosX"),z,j).$V(Z("aPosY"),P,j),t!==1&&this.RR.dV($("uOpacity"),Y),O.instancedRendering)if(I)this.RR.$V(Z("aRotDeg"),I,j).dV($("uBaseRotDeg"),O.geometry.DW);else{const et=hs(this.DU.M()+O.geometry.DW),mt=Math.sin(et),xt=Math.cos(et);this.RR.uV($("uRot"),[mt,xt])}return this.RR.uV(ct("uOffsetAlignment"),[-this.LU.x/2,-this.LU.y/2]),O.geometry.Ky(Q,B,m,O.pointSizeAsScale&&this.hU?{scale:this.PU.M(),width:O.shapeIcon?O.shapeIcon.oi().x:this.hU.texture.Fz,height:O.shapeIcon?O.shapeIcon.oi().y:this.hU.texture.Iz}:this.PU.M(),O.instancedRendering),!0})}return this}lN(t){return this.gN===t&&{}}dispose(){var t,e,i,s,n,o,h,a,l;return super.dispose(),this.RR.yV((t=this.XU)===null||t===void 0?void 0:t.bufferX),this.RR.yV((e=this.XU)===null||e===void 0?void 0:e.bufferY),this.RR.yV((i=this.XU)===null||i===void 0?void 0:i.bufferColors),this.RR.yV((s=this.XU)===null||s===void 0?void 0:s.bufferLookupValues),this.RR.yV((n=this.QU)===null||n===void 0?void 0:n.bufferX),this.RR.yV((o=this.QU)===null||o===void 0?void 0:o.bufferY),this.RR.yV((h=this.QU)===null||h===void 0?void 0:h.bufferColors),this.RR.yV((a=this.QU)===null||a===void 0?void 0:a.bufferLookupValues),this.bG={type:"none"},this.KU=void 0,this.HU=void 0,this.SW.Qm(),(l=this.od.M())===null||l===void 0||l.Gt(),this.XU=void 0,this.QU=void 0,this.qU=void 0,this.tY=void 0,this.iY=void 0,this.sY=void 0,this.eY=void 0,this.hY=void 0,this.RR.EO(this,this.hU),this}VR(){return this.dispose(),this}rY(t){if(!this.$U){const{xValues:s,yValues:n}=t.readBack();this.$U={min:{x:st,y:st},max:{x:ht,y:ht}};const o=s.length;for(let h=0;h<o;h+=1){const a=s[h],l=n[h];this.$U.min.x=a<this.$U.min.x?a:this.$U.min.x,this.$U.min.y=l<this.$U.min.y?l:this.$U.min.y,this.$U.max.x=a>this.$U.max.x?a:this.$U.max.x,this.$U.max.y=l>this.$U.max.y?l:this.$U.max.y}return this.UU.length=0,this.$U}const e=t.Cc,i=t.kc;if(this.UU.length>0&&e&&i){for(const s of this.UU){for(let n=s.min;n<=s.max;n+=1){const o=e[n],h=i[n];this.$U.min.x=o<this.$U.min.x?o:this.$U.min.x,this.$U.min.y=h<this.$U.min.y?h:this.$U.min.y,this.$U.max.x=o>this.$U.max.x?o:this.$U.max.x,this.$U.max.y=h>this.$U.max.y?h:this.$U.max.y}this.UU.length=0}return this.$U}return this.$U}bt(){var t,e,i,s,n;const o=(t=this.od.M())===null||t===void 0?void 0:t.Wt;if(!o)return 0;const h=o.Gc();return h==="ProgressiveX"?((e=o.wc())===null||e===void 0?void 0:e.x)||0:h==="RegressiveX"?((i=o.Yc())===null||i===void 0?void 0:i.x)||0:h==="ProgressiveY"?((s=this.jU)===null||s===void 0?void 0:s.max)||0:h==="RegressiveY"?((n=this.jU)===null||n===void 0?void 0:n.max)||0:this.rY(o).max.x}vt(){var t,e,i,s,n;const o=(t=this.od.M())===null||t===void 0?void 0:t.Wt;if(!o)return 0;const h=o.Gc();return h==="ProgressiveX"?((e=o.Yc())===null||e===void 0?void 0:e.x)||0:h==="RegressiveX"?((i=o.wc())===null||i===void 0?void 0:i.x)||0:h==="ProgressiveY"?((s=this.jU)===null||s===void 0?void 0:s.min)||0:h==="RegressiveY"?((n=this.jU)===null||n===void 0?void 0:n.min)||0:this.rY(o).min.x}Mt(){var t,e,i,s,n;const o=(t=this.od.M())===null||t===void 0?void 0:t.Wt;if(!o)return 0;const h=o.Gc();return h==="ProgressiveX"?qt((e=this.jU)===null||e===void 0?void 0:e.max,0):h==="RegressiveX"?qt((i=this.jU)===null||i===void 0?void 0:i.max,0):h==="ProgressiveY"?qt((s=o.wc())===null||s===void 0?void 0:s.y,0):h==="RegressiveY"?qt((n=o.Yc())===null||n===void 0?void 0:n.y,0):this.rY(o).max.y}xt(){var t,e,i,s,n;const o=(t=this.od.M())===null||t===void 0?void 0:t.Wt;if(!o)return 0;const h=o.Gc();return h==="ProgressiveX"?qt((e=this.jU)===null||e===void 0?void 0:e.min,0):h==="RegressiveX"?qt((i=this.jU)===null||i===void 0?void 0:i.min,0):h==="ProgressiveY"?qt((s=o.Yc())===null||s===void 0?void 0:s.y,0):h==="RegressiveY"?qt((n=o.wc())===null||n===void 0?void 0:n.y,0):this.rY(o).min.y}vl(){var t,e;let i=this.PU.M();this.hU&&(i=Math.max(this.hU.texture.Fz,this.hU.texture.Iz)*this.PU.M());const s=Math.max(Ti(this.lu),!((t=this.od.M())===null||t===void 0)&&t.Wt.vc?25:i),n=(e=this.od.M())===null||e===void 0?void 0:e.Wt.Gc();return!n||n!=="ProgressiveX"&&n!=="RegressiveX"?s:0}bl(){var t,e;let i=this.PU.M();this.hU&&(i=Math.max(this.hU.texture.Fz,this.hU.texture.Iz)*this.PU.M());const s=Math.max(Ti(this.lu),!((t=this.od.M())===null||t===void 0)&&t.Wt.vc?25:i),n=(e=this.od.M())===null||e===void 0?void 0:e.Wt.Gc();return!n||n!=="ProgressiveY"&&n!=="RegressiveY"?s:0}}const $l=(r,t,e,i,s,n,o,h,a,l,u,c,d)=>{if(l!=="ProgressiveX")throw new Error("Unimplemented data pattern");const f=t[0],g=t[1],y=f.length,p=f[0],x=f[y-1],A=g[0],v=g[y-1],w=c?2:1;if(h&&a&&h.firstX&&h.lastX&&p>=h.firstX){const z=jr(h.lastX,0,y-1,P=>f[P]);if(f[z]===h.lastX){const P=h.bufferSize-h.valueCount,_=z+1,V=y-_;if(V===0)return h;if(P>=V){const B=_i(f,_,void 0),I=_i(g,_,void 0);if(r.zV(h.bufferX,h.valueCount*w,d(B)),r.zV(h.bufferY,h.valueCount*w,d(I)),e&&h.bufferColors){const L=e.slice(_);r.zV(h.bufferColors,h.valueCount,L,Uint32Array)}if(i&&h.bufferLookupValues){const L=i.slice(_);r.zV(h.bufferLookupValues,h.valueCount,L,Float32Array)}if(s&&h.bufferSizes){const L=s.slice(_);r.zV(h.bufferSizes,h.valueCount,L,Float32Array)}if(n&&h.bufferRotations){const L=n.slice(_);r.zV(h.bufferRotations,h.valueCount,L,Float32Array)}if(o&&h.bufferLengthSoFar){const[L,U,Y]=Ru(B,I,h.lastX||0,h.lastY||0,h.lengthSoFarX,h.lengthSoFarY);r.zV(h.bufferLengthSoFar,2*h.valueCount,L,Float32Array),h.lengthSoFarX=U,h.lengthSoFarY=Y}return h.valueCount+=V,h.lastX=x,h.lastY=v,h}}}const E=y+u,C=r.EV(E*w,d(f),h==null?void 0:h.bufferX),k=r.EV(E*w,d(g),h==null?void 0:h.bufferY),F=e?r.EV(E,e,h==null?void 0:h.bufferColors,Uint32Array):void 0,m=i?r.EV(E,i,h==null?void 0:h.bufferLookupValues,Float32Array):void 0,S=s?r.EV(E,s,h==null?void 0:h.bufferSizes,Float32Array):void 0,b=n?r.EV(E,n,h==null?void 0:h.bufferRotations,Float32Array):void 0;let M,R=0,T=0;if(o){const z=Ru(f,g,f[0],g[0],0,0);M=r.EV(2*E,z[0],h==null?void 0:h.bufferLengthSoFar,Float32Array),R=z[1],T=z[2]}return{bufferX:C,bufferY:k,bufferColors:F,bufferLookupValues:m,bufferSizes:S,bufferRotations:b,bufferSize:E,bufferLengthSoFar:M,valueCount:y,firstX:p,lastX:x,firstY:A,lastY:v,lengthSoFarX:R,lengthSoFarY:T}},Ru=(r,t,e,i,s,n)=>{const o=r.length,h=new Float32Array(2*o);if(o===0)return[h,0,0];let a=0,l=e,u=i,c=s,d=n;for(let f=0;f<o;f+=1){const g=r[f],y=t[f];c+=Math.abs(l-g),d+=Math.abs(u-y),h[a]=c,h[a+1]=d,a+=2,l=g,u=y}return[h,c,d]},Wo=(r,t,e,i,s,n,o,h,a,l)=>{const u=r.gl;if(e){const c=t.attribute(`${s}A_highpart${n}`),d=t.attribute(`${s}A_lowpart${n}`),f=t.attribute(`${s}B_highpart${n}`),g=t.attribute(`${s}B_lowpart${n}`);u.bindBuffer(u.ARRAY_BUFFER,i),u.vertexAttribPointer(c,o,a,h,2*o*l,0*l),u.vertexAttribPointer(d,o,a,h,2*o*l,o*l),r.UV(c,1),r.UV(d,1),u.enableVertexAttribArray(c),u.enableVertexAttribArray(d),u.vertexAttribPointer(f,o,a,h,2*o*l,2*o*l),u.vertexAttribPointer(g,o,a,h,2*o*l,3*o*l),r.UV(f,1),r.UV(g,1),u.enableVertexAttribArray(f),u.enableVertexAttribArray(g),u.bindBuffer(u.ARRAY_BUFFER,null)}else{const c=t.attribute(`${s}A${n}`),d=t.attribute(`${s}B${n}`);u.bindBuffer(u.ARRAY_BUFFER,i),u.vertexAttribPointer(c,o,a,h,o*l,0*l),u.vertexAttribPointer(d,o,a,h,o*l,o*l),r.UV(c,1),r.UV(d,1),u.enableVertexAttribArray(c),u.enableVertexAttribArray(d),u.bindBuffer(u.ARRAY_BUFFER,null)}},rs={translation:(r,t)=>[1,0,0,0,1,0,r,t,1],rotation(r){const t=Math.cos(r),e=Math.sin(r);return[t,-e,0,e,t,0,0,0,1]},scaling:(r,t)=>[r,0,0,0,t,0,0,0,1],translate:(r,t,e)=>rs.multiply(r,rs.translation(t,e)),rotate:(r,t)=>rs.multiply(r,rs.rotation(t)),scale:(r,t,e)=>rs.multiply(r,rs.scaling(t,e)),multiply(r,t){const e=r[0],i=r[1],s=r[2],n=r[3],o=r[4],h=r[5],a=r[6],l=r[7],u=r[8],c=t[0],d=t[1],f=t[2],g=t[3],y=t[4],p=t[5],x=t[6],A=t[7],v=t[8];return[c*e+d*n+f*a,c*i+d*o+f*l,c*s+d*h+f*u,g*e+y*n+p*a,g*i+y*o+p*l,g*s+y*h+p*u,x*e+A*n+v*a,x*i+A*o+v*l,x*s+A*h+v*u]},projection:(r,t,e)=>[2/r,0,0,0,-2*e/t,0,-1,1*e,1]};class Tb extends _x{constructor(t,e,i,s,n,o,h){super(t,e,i,s,n),this.nY=[],this.aE=new es,this.oY=[N(0,0),N(0,0),N(0,0),N(0,0)],this.aY=wt(N(0,0),N(0,0)),this.lY=wt(N(0,0),N(0,0)),this.uY=N(0,0),this.cY=N(0,0),this.FT=N(0,0),this.dY=N(0,0),this.fY=0,this.AY=0,this.AN=Ei({fillStyleSolid:()=>Nt(this.be)&&this.be,fillStyleRadialGradient:()=>Ae(this.be)&&this.be,fillStyleLinearGradient:()=>ve(this.be)&&this.be}),this.rN=t,this.nN=e,this.gN=o,this.mN=h,this.RR=t.oN(),this.nN=e,this.IG=t.Un.jn}Ps(){const t=this.ea(),e=this.sa(),i=this.Bo.M();if(t){const s=this.ta(),n=this.AN.fillStyleSolid(s),o=this.AN.fillStyleRadialGradient(s),h=this.AN.fillStyleLinearGradient(s),a=n||o||h,l=this.RR,u=this.RR.$z(),c=u!==this.AY;if(this.AY=u,this.aE.mV(this.dt),this.ga.i||c){this.gY&&this.gY.ZR(this),this.font.S(dc(this.ga.M(),u));const A=this.font.M();this.gY=this.RR.Vh(A.properties.family),this.gY.jR(this)}const d=this.font.i,f=d||this.la.i;if(f&&this.gY){const A=this.font.M();[this.mY,this.lY]=this.gY.JR(this.la.M(),A,this.rN.qi.isDark),this.nY.forEach(v=>{v.texCoordBuff&&l.yV(v.texCoordBuff),v.vertexBuff&&l.yV(v.vertexBuff)}),this.nY=this.mY.map(v=>({texCoordBuff:l.nV(v.texCoords,!1),texture:v.texture,info:v})),this.ga.i=!1,this.font.i=!1,this.la.i=!1}const g=this.dt.Ni()||e,y=this.ua.i||this.da.i||this.ca.i||this.fa.i||this.ya.i||this.Xt.i||f||g,p=this.ya.M(),x=St(N(this.da.M()+1,this.ca.M()+1),.5);if(y&&this.mY&&(this.uY=N(-(p.left*u+this.lY.max.x-this.lY.min.x+p.right*u)*x.x-this.lY.min.x+p.right*u,-(p.bottom*u+this.lY.max.y-this.lY.min.y+p.top*u)*x.y-this.lY.min.y+p.top*u)),(y||g||this.Aa.i||this.ta())&&this.be!==ft){if(this.mY){const A=gt(this.ua.M(),this.fa.M()),v=K(A,this.dt,this.us.dt),w=St(v,u);this.dY=w;const E=hs(this.Aa.M());this.fY=E,f&&this.nY.forEach(M=>{const R=M.info;R&&(M.vertexBuffLen=R.vertices.length/2,M.vertexBuff=l.nV(R.vertices,!0,M.vertexBuff))});const C=this.Xt.M(),k=[gt(ur(N((this.lY.min.x+(-C.left-p.left)*u+this.uY.x)/u,(this.lY.max.y+(C.top+p.top)*u+this.uY.y)/u),this.ma,E),v),gt(ur(N((this.lY.max.x+(C.right+p.right)*u+this.uY.x)/u,(this.lY.max.y+(C.top+p.top)*u+this.uY.y)/u),this.ma,E),v),gt(ur(N((this.lY.max.x+(C.right+p.right)*u+this.uY.x)/u,(this.lY.min.y+(-C.bottom-p.bottom)*u+this.uY.y)/u),this.ma,E),v),gt(ur(N((this.lY.min.x+(-C.left-p.left)*u+this.uY.x)/u,(this.lY.min.y+(-C.bottom-p.bottom)*u+this.uY.y)/u),this.ma,E),v)];this.oY=[K(k[0],this.us.dt,this.dt),K(k[1],this.us.dt,this.dt),K(k[2],this.us.dt,this.dt),K(k[3],this.us.dt,this.dt)];const F=ce(k);this.cY=N(-(F.max.x-F.min.x)*u*x.x-F.min.x*u+this.dY.x,-(F.max.y-F.min.y)*u*x.y-F.min.y*u+this.dY.y),this.Fg=Ut(F.max,F.min);const m=ce(this.oY),S=this.dt.mi(m.min,this.cY),b=this.dt.mi(m.max,this.cY);this.aY=ce([S,b])}o?this.MN=qi(this.aY,this.dt,o.getPosition(),o.getExtent(),o.getShape(),this.RR.$z()):h?this._N=Ji(this.aY,this.dt,h.getAngle(!0),this.RR.$z()):(this.MN=void 0,this._N=void 0)}(this.ta()||d)&&(this.cE=a?this.RR.oz(G["2D"],G.VertexLocation({axisWorldTranslation:"matrix",normalSource:void 0,snapToNearestPixel:this.IG}),G.Color({dataType:o?["gradient",o]:h?["gradient",h]:"uniform",maskTextureText:!0})):void 0),this.yY=i&&a?this.yY||this.RR.oz(G["2D"],G.MousePicking,G.VertexLocation({axisWorldTranslation:"matrix",normalSource:void 0,snapToNearestPixel:this.IG})):void 0,this.ua.i=!1,this.da.i=!1,this.ca.i=!1,this.fa.i=!1,this.Aa.i=!1,this.ha(this.be)}return this.pa=t,this}zL(t){if(this.ea()){const e=t===1?this.yY:this.cE;if(!e||this.nY.length===0)return this;const i=this.AN.fillStyleSolid(!1),s=this.AN.fillStyleRadialGradient(!1),n=this.AN.fillStyleLinearGradient(!1),o=this.us.OE(),h=o.x,a=o.y;let l=rs.projection(h,a,-1);const u=rs.translation(this.uY.x,this.uY.y),c=rs.translation(this.cY.x,this.cY.y);l=rs.translate(l,this.dY.x,this.dY.y),l=rs.multiply(l,c),l=rs.rotate(l,this.fY),l=rs.multiply(l,u),t===1&&(l=rs.scale(l,this.lY.max.x,this.lY.max.y)),this.RR.jR(e).aV(e,(d,f,g,y)=>{if(this.RR.PV(d("uMatrix"),l).dV(d("uIsHighlighted"),t===1||t===2?0:this.zo).AR(d("uHighlightColorOffset"),t===1||t===2?ue:this.Go).dV(d("uRenderEffectMask"),t===2?1:0),this.IG&&this.RR.uV(y("uViewportSizePx"),[o.x*this.RR.$z(),o.y*this.RR.$z()]),t===1)this.RR.AR(d("uColor"),this.mN);else if(i)this.RR.AR(d("uColor"),i.getColor());else if(s&&this.MN){this.RR.uV(d("uCenter"),this.MN.center).uV(d("uDistance"),this.MN.distance).FV(d("uBounds"),this.MN.bounds).dV(d("uAspect"),this.MN.aspectRatio);const p=s.getColorStops();for(let x=0;x<p.length;x+=1)this.RR.AR(d(`color_${x}`),p[x].color).dV(d(`stop_${x}`),p[x].offset)}else if(n&&this._N){this.RR.uV(d("uStartPoint"),this._N.startPoint).uV(d("uEndPoint"),this._N.endPoint).FV(d("uBounds"),this._N.bounds);const p=n.getColorStops();for(let x=0;x<p.length;x+=1)this.RR.AR(d(`color_${x}`),p[x].color).dV(d(`stop_${x}`),p[x].offset)}return t===1&&this.RR.GV(f("aPos"),this.RR.uO).Ky(this.RR.gl.TRIANGLES,6),t!==1&&this.nY.forEach(p=>{this.RR.GV(f("aPos"),p.vertexBuff).GV(f("aMaskTextureCoord"),p.texCoordBuff).cV(d("uMaskTexture"),p.texture,0).Ky(this.RR.gl.TRIANGLES,p.vertexBuffLen)}),!0})}return this}lN(t){return this.gN===t&&{}}We(){return this.ea()?this.oY:[]}jc(){return this.ea()&&this.Fg?this.Fg:N(0,0)}oi(){if(this.ea()&&this.aY){const t=this.aY;return N(t.max.x-t.min.x,t.max.y-t.min.y)}return N(0,0)}VR(){return this.nY.forEach(t=>{t.texCoordBuff&&this.RR.yV(t.texCoordBuff),t.vertexBuff&&this.RR.yV(t.vertexBuff)}),this.nY=[],this.gY&&this.gY.ZR(this),this}bt(){return this.aY.max.x}vt(){return this.aY.min.x}Mt(){return this.aY.max.y}xt(){return this.aY.min.y}vl(){return 0}bl(){return 0}}class om{constructor(t,e,i){this.pY=new Set,this.SY=s=>(this.pY.add(s),s),this.vY=s=>(this.pY.delete(s),s.VR(),this),this.us=t,this.Zo=e,this.bY=i}EL(t){this.pY.delete(t)&&this.pY.add(t)}W(){for(const t of this.pY)t.VR().dispose();this.us.xn(this.Zo)}Ss(){return this.us.Ss(),this}bn(){return this.Zo}}class Cb extends om{constructor(){super(...arguments),this.xY=vt(void 0),this.Qo=!1}qv(t){return this.xY.S(t),this}km(){return this.xY.M()}}class Jf extends Cb{constructor(t,e,i){super(t,e,i),this.rN=t,this.gl=t.oN(),this.MY=this.pY}rV(t){const e=t instanceof tl&&t;if(!e)return Kt;const i=e.vt(),s=e.bt(),n=e.xt(),o=e.Mt();if(i===st||s===ht||n===st||o===ht)return Kt;const h=e.vl(),a=e.bl(),l=Xr({min:{x:i,y:n},max:{x:s,y:o}},{x:h,y:a},e.dt),u={min:K(l.min,e.dt,t.us.dt),max:K(l.max,e.dt,t.us.dt)},c=this.xY.M();let d;if(c){if(d={min:{x:Math.max(u.min.x,c.x),y:Math.max(u.min.y,c.y)},max:{x:Math.min(u.max.x,c.x+c.width),y:Math.min(u.max.y,c.y+c.height)}},d.max.x<d.min.x||d.max.y<d.min.y)return Kt}else d=u;return d}_Y(t){const e=Array.from(this.MY.values());for(let i=0;i<e.length;i+=1){const s=e[i],n=s.lN(t);if(n)return{entity:s,index:i,collectionMember:n.collectionMember}}}Ee(t){const e=this.rN.wY();return this.SY(new ob(this.rN,this,t,this.vY,[],e,this.rN.CY(e)))}Lg(t){return this.SY(new hb(this.rN,this,t,this.vY,[],()=>{const e=this.rN.wY();return{id:e,color:this.rN.CY(e)}}))}rp(t,e,i){const s=this.rN.wY();return this.SY(new cb(this.rN,this,t,this.vY,i,s,this.rN.CY(s),e))}dd(t){const e=this.rN.wY();return this.SY(new kb(this.rN,this,t,this.vY,e,this.rN.CY(e)))}Pr(t){const e=this.rN.wY();return this.SY(new Tb(this.rN,this,t,this.vY,[],e,this.rN.CY(e)))}bS(t){const e=this.rN.wY();return this.SY(new db(this.rN,this,t,this.vY,[],e,this.rN.CY(e)))}ic(t,e=ys.Simple){const i=this.rN.wY();if(e===ys.Simple)return this.SY(new yb(this.rN,this,t,this.vY,[],i,this.rN.CY(i)));throw new Error("GlEngine.addPolygon | No such polygon type!")}Ob(t){return this.SY(new fb(this.rN,this,t,this.vY,[],()=>{const e=this.rN.wY();return{id:e,color:this.rN.CY(e)}}))}ke(t){const e=this.rN.wY();return this.SY(new gb(this.rN,this,t,this.vY,[],e,this.rN.CY(e)))}lw(t){const e=this.rN.wY();return this.SY(new rb(this.rN,this,t,this.vY,[],e,this.rN.CY(e)))}Jc(t){const e=this.rN.wY();return this.SY(new ib(this.rN,this,t,this.vY,[],e,this.rN.CY(e)))}V_(t,e,i){if(i.heatmapDataType==="intensity"){const s=this.rN.wY();return this.SY(new Ab(this.rN,this,t,this.vY,e,s,this.rN.CY(s),i))}throw new Le("Unimplemented Heatmap Grid Static type")}P_(t,e,i){const s=this.rN.wY();return this.SY(new xl(this.rN,this,t,this.vY,e,i,s,this.rN.CY(s)))}Ex(t,e,i){const s=this.rN.wY();return this.SY(new bb(this.rN,this,t,this.vY,e,i,s,this.rN.CY(s)))}kY(t){return this.SY(new eb(this.rN,this,this.vY,[],t))}Ps(){if(this.Qo){this.Qo=!1;const t=Array.from(this.pY).sort((e,i)=>e.Ko()-i.Ko());this.pY.clear();for(const e of t)this.pY.add(e)}for(const t of this.pY)t.Ps();return this}zL(t,e){const i=this.xY.M();if(i&&this.gl.hV(i.x*this.gl.$z()*e,i.y*this.gl.$z()*e,i.width*this.gl.$z()*e,i.height*this.gl.$z()*e),t!==1)for(const s of this.pY)s.getVisible()&&s.zL(t);else for(const s of this.pY)s.getMouseInteractions()&&s.getVisible()&&s.zL(t);return this.gl.qz(!1),this}}class hm extends _o{constructor(t){super(t)}}class Fb extends hm{constructor(t){super(t),this.TY="attribute";const{vertices:e,drawSize:i,drawMode:s}=Db(t.gl);this.wR=t.nV(e),this.cG=i,this.dG=s}Ky(t,e,i,s){return this.RR.lV(this.wR,0,{location:t.attribute("aInstanceGeo"),size:3},{location:i?t.attribute("aNormal"):void 0,size:3},{location:s?t.attribute("aTriangleBary"):void 0,size:3}).QV(this.dG,0,this.cG,e),this}kz(){this.RR.yV(this.wR)}}const Db=r=>{const t=new Float32Array(324);let e=0;return t[e+0]=-1,t[e+1]=1,t[e+2]=1,t[e+3]=0,t[e+4]=1,t[e+5]=0,t[e+6]=1,t[e+7]=0,t[e+8]=0,e+=9,t[e+0]=1,t[e+1]=1,t[e+2]=1,t[e+3]=0,t[e+4]=1,t[e+5]=0,t[e+6]=1,t[e+7]=1,t[e+8]=0,e+=9,t[e+0]=-1,t[e+1]=1,t[e+2]=-1,t[e+3]=0,t[e+4]=1,t[e+5]=0,t[e+6]=0,t[e+7]=0,t[e+8]=1,e+=9,t[e+0]=-1,t[e+1]=1,t[e+2]=-1,t[e+3]=0,t[e+4]=1,t[e+5]=0,t[e+6]=0,t[e+7]=1,t[e+8]=0,e+=9,t[e+0]=1,t[e+1]=1,t[e+2]=1,t[e+3]=0,t[e+4]=1,t[e+5]=0,t[e+6]=1,t[e+7]=0,t[e+8]=1,e+=9,t[e+0]=1,t[e+1]=1,t[e+2]=-1,t[e+3]=0,t[e+4]=1,t[e+5]=0,t[e+6]=1,t[e+7]=0,t[e+8]=0,e+=9,t[e+0]=-1,t[e+1]=-1,t[e+2]=-1,t[e+3]=-1,t[e+4]=0,t[e+5]=0,t[e+6]=1,t[e+7]=0,t[e+8]=0,e+=9,t[e+0]=-1,t[e+1]=-1,t[e+2]=1,t[e+3]=-1,t[e+4]=0,t[e+5]=0,t[e+6]=1,t[e+7]=1,t[e+8]=0,e+=9,t[e+0]=-1,t[e+1]=1,t[e+2]=-1,t[e+3]=-1,t[e+4]=0,t[e+5]=0,t[e+6]=0,t[e+7]=0,t[e+8]=1,e+=9,t[e+0]=-1,t[e+1]=1,t[e+2]=-1,t[e+3]=-1,t[e+4]=0,t[e+5]=0,t[e+6]=0,t[e+7]=1,t[e+8]=0,e+=9,t[e+0]=-1,t[e+1]=-1,t[e+2]=1,t[e+3]=-1,t[e+4]=0,t[e+5]=0,t[e+6]=1,t[e+7]=0,t[e+8]=1,e+=9,t[e+0]=-1,t[e+1]=1,t[e+2]=1,t[e+3]=-1,t[e+4]=0,t[e+5]=0,t[e+6]=1,t[e+7]=0,t[e+8]=0,e+=9,t[e+0]=1,t[e+1]=-1,t[e+2]=1,t[e+3]=1,t[e+4]=0,t[e+5]=0,t[e+6]=1,t[e+7]=0,t[e+8]=0,e+=9,t[e+0]=1,t[e+1]=-1,t[e+2]=-1,t[e+3]=1,t[e+4]=0,t[e+5]=0,t[e+6]=1,t[e+7]=1,t[e+8]=0,e+=9,t[e+0]=1,t[e+1]=1,t[e+2]=1,t[e+3]=1,t[e+4]=0,t[e+5]=0,t[e+6]=0,t[e+7]=0,t[e+8]=1,e+=9,t[e+0]=1,t[e+1]=1,t[e+2]=1,t[e+3]=1,t[e+4]=0,t[e+5]=0,t[e+6]=0,t[e+7]=1,t[e+8]=0,e+=9,t[e+0]=1,t[e+1]=-1,t[e+2]=-1,t[e+3]=1,t[e+4]=0,t[e+5]=0,t[e+6]=1,t[e+7]=0,t[e+8]=1,e+=9,t[e+0]=1,t[e+1]=1,t[e+2]=-1,t[e+3]=1,t[e+4]=0,t[e+5]=0,t[e+6]=1,t[e+7]=0,t[e+8]=0,e+=9,t[e+0]=-1,t[e+1]=-1,t[e+2]=1,t[e+3]=0,t[e+4]=0,t[e+5]=1,t[e+6]=1,t[e+7]=0,t[e+8]=0,e+=9,t[e+0]=1,t[e+1]=-1,t[e+2]=1,t[e+3]=0,t[e+4]=0,t[e+5]=1,t[e+6]=1,t[e+7]=1,t[e+8]=0,e+=9,t[e+0]=-1,t[e+1]=1,t[e+2]=1,t[e+3]=0,t[e+4]=0,t[e+5]=1,t[e+6]=0,t[e+7]=0,t[e+8]=1,e+=9,t[e+0]=-1,t[e+1]=1,t[e+2]=1,t[e+3]=0,t[e+4]=0,t[e+5]=1,t[e+6]=0,t[e+7]=1,t[e+8]=0,e+=9,t[e+0]=1,t[e+1]=-1,t[e+2]=1,t[e+3]=0,t[e+4]=0,t[e+5]=1,t[e+6]=1,t[e+7]=0,t[e+8]=1,e+=9,t[e+0]=1,t[e+1]=1,t[e+2]=1,t[e+3]=0,t[e+4]=0,t[e+5]=1,t[e+6]=1,t[e+7]=0,t[e+8]=0,e+=9,t[e+0]=1,t[e+1]=-1,t[e+2]=-1,t[e+3]=0,t[e+4]=0,t[e+5]=-1,t[e+6]=1,t[e+7]=0,t[e+8]=0,e+=9,t[e+0]=-1,t[e+1]=-1,t[e+2]=-1,t[e+3]=0,t[e+4]=0,t[e+5]=-1,t[e+6]=1,t[e+7]=1,t[e+8]=0,e+=9,t[e+0]=1,t[e+1]=1,t[e+2]=-1,t[e+3]=0,t[e+4]=0,t[e+5]=-1,t[e+6]=0,t[e+7]=0,t[e+8]=1,e+=9,t[e+0]=1,t[e+1]=1,t[e+2]=-1,t[e+3]=0,t[e+4]=0,t[e+5]=-1,t[e+6]=0,t[e+7]=1,t[e+8]=0,e+=9,t[e+0]=-1,t[e+1]=-1,t[e+2]=-1,t[e+3]=0,t[e+4]=0,t[e+5]=-1,t[e+6]=1,t[e+7]=0,t[e+8]=1,e+=9,t[e+0]=-1,t[e+1]=1,t[e+2]=-1,t[e+3]=0,t[e+4]=0,t[e+5]=-1,t[e+6]=1,t[e+7]=0,t[e+8]=0,e+=9,t[e+0]=-1,t[e+1]=-1,t[e+2]=-1,t[e+3]=0,t[e+4]=-1,t[e+5]=0,t[e+6]=1,t[e+7]=0,t[e+8]=0,e+=9,t[e+0]=1,t[e+1]=-1,t[e+2]=-1,t[e+3]=0,t[e+4]=-1,t[e+5]=0,t[e+6]=1,t[e+7]=1,t[e+8]=0,e+=9,t[e+0]=-1,t[e+1]=-1,t[e+2]=1,t[e+3]=0,t[e+4]=-1,t[e+5]=0,t[e+6]=0,t[e+7]=0,t[e+8]=1,e+=9,t[e+0]=-1,t[e+1]=-1,t[e+2]=1,t[e+3]=0,t[e+4]=-1,t[e+5]=0,t[e+6]=0,t[e+7]=1,t[e+8]=0,e+=9,t[e+0]=1,t[e+1]=-1,t[e+2]=-1,t[e+3]=0,t[e+4]=-1,t[e+5]=0,t[e+6]=1,t[e+7]=0,t[e+8]=1,e+=9,t[e+0]=1,t[e+1]=-1,t[e+2]=1,t[e+3]=0,t[e+4]=-1,t[e+5]=0,t[e+6]=1,t[e+7]=0,t[e+8]=0,e+=9,{vertices:t,drawSize:e/9,drawMode:r.TRIANGLES}};class Pb extends hm{constructor(t,e){super(t),this.TY="attribute",this.FY=e;const{vertices:i,indices:s}=Ib();this.wR=t.nV(i),this.uG=t.OV(s),this.cG=s.length,this.dG=t.gl.TRIANGLES}Ky(t,e,i,s){return this.RR.lV(this.wR,0,{location:t.attribute("aEdge"),size:3},{location:i?t.attribute("aNormal"):void 0,size:3},{location:t.attribute("aInstanceGeo"),size:3}).XV(this.uG).dV(t.uniform("uEdgeRoundness"),this.FY/2).JV(this.dG,this.cG,0,e),this}kz(){this.RR.yV(this.wR),this.RR.yV(this.uG)}IY(t){return this.FY=t,this}PY(){return this.FY}}const Ib=()=>{const r=[{normal:{x:0,y:1,z:0},perpendA:{x:0,y:0,z:1},perpendB:{x:-1,y:0,z:0}},{normal:{x:0,y:0,z:-1},perpendA:{x:0,y:1,z:0},perpendB:{x:-1,y:0,z:0}},{normal:{x:-1,y:0,z:0},perpendA:{x:0,y:1,z:0},perpendB:{x:0,y:0,z:1}},{normal:{x:1,y:0,z:0},perpendA:{x:0,y:1,z:0},perpendB:{x:0,y:0,z:-1}},{normal:{x:0,y:0,z:1},perpendA:{x:0,y:1,z:0},perpendB:{x:1,y:0,z:0}},{normal:{x:0,y:-1,z:0},perpendA:{x:0,y:0,z:-1},perpendB:{x:-1,y:0,z:0}}],t=[];let e=0;const i=[];let s=0;for(const c of r){const{normal:d,perpendA:f,perpendB:g}=c,y=J.multiply(f,-1),p=J.multiply(g,-1),x=e;t[e]={thicknessDirection:J.addVec(d,f,g),edge:J.addVec(y,p),normal:d},e+=1;const A=e;t[e]={thicknessDirection:J.addVec(d,y,g),edge:J.addVec(f,p),normal:d},e+=1;const v=e;t[e]={thicknessDirection:J.addVec(d,y,p),edge:J.addVec(f,g),normal:d},e+=1;const w=e;t[e]={thicknessDirection:J.addVec(d,f,p),edge:J.addVec(y,g),normal:d},e+=1,i[s+0]=v,i[s+1]=x,i[s+2]=w,i[s+3]=v,i[s+4]=A,i[s+5]=x,s+=6;const E=[{A:f,B:g},{A:y,B:g},{A:y,B:p},{A:f,B:p}];for(const C of E){C.thicknessDirection=J.addVec(d,C.A,C.B),C.stripVerticesA=[],C.stripVerticesB=[];const k=[{direction:C.A,other:C.B,vertices:C.stripVerticesA},{direction:C.B,other:C.A,vertices:C.stripVerticesB}];for(const F of k)for(let m=0;m<8;m+=1){const S=.5*m/7,b=J.normalize(J.lerp(d,F.direction,S)),M=Math.PI/2-J.angle(b,d),R=J.addVec(J.multiply(J.multiply(F.direction,-1),1-Math.cos(M)),J.multiply(J.multiply(d,-1),1-Math.sin(M)),J.multiply(F.other,-1)),T=e;t[e]={thicknessDirection:C.thicknessDirection,normal:b,edge:R};const z=t[e];e+=1,F.vertices.push({index:T,vertex:z})}}for(let C=0;C<E.length;C+=1){const k=E[C],F=E[C<E.length-1?C+1:0],m=C%2==0?k.stripVerticesB:k.stripVerticesA,S=C%2==0?F.stripVerticesB:F.stripVerticesA;for(let b=1;b<m.length;b+=1){const M=m[b-1],R=S[b-1],T=m[b],z=S[b];i[s+0]=M.index,i[s+1]=R.index,i[s+2]=z.index,i[s+3]=T.index,i[s+4]=M.index,i[s+5]=z.index,s+=6}}}const n=[{x:-1,y:1,z:-1,flipVertexOrder:!1},{x:-1,y:1,z:1,flipVertexOrder:!0},{x:1,y:1,z:1,flipVertexOrder:!1},{x:1,y:1,z:-1,flipVertexOrder:!0},{x:-1,y:-1,z:-1,flipVertexOrder:!0},{x:-1,y:-1,z:1,flipVertexOrder:!1},{x:1,y:-1,z:1,flipVertexOrder:!0},{x:1,y:-1,z:-1,flipVertexOrder:!1}],o=Math.PI/15,h=2*Math.PI/15;let a=e;for(const c of n){let d=0;t[e]={thicknessDirection:c,normal:{x:0,y:c.y,z:0},edge:{x:-c.x,y:0,z:-c.z}},e+=1,d+=1;for(let p=1;p<8.5;p+=1){const x=p===15?Math.PI:p*o,A=1*Math.cos(x)*c.y,v=Math.sin(x);for(let w=0;w<Math.ceil(3.75)+1;w+=1){const E=w===15?0:w*h,C=v*Math.cos(E)*1*c.x,k=v*Math.sin(E)*1*c.z,F={x:C,y:A,z:k},m=J.normalize({x:C,y:A,z:k});t[e]={thicknessDirection:c,normal:m,edge:{x:F.x-c.x,y:F.y-c.y,z:F.z-c.z}},e+=1,d+=1}}const f=[];for(let p=1;p<=Math.ceil(3.75);p+=1)f.push(a),p===15?f.push(a+1):f.push(a+p+1),f.push(a+p);const g=a+1,y=Math.ceil(3.75)+1;for(let p=0;p<6.5;p+=1)for(let x=0;x<Math.ceil(3.75);x+=1){let A=0;const v=g+(p+1)*y+x;let w=0;x===14?(A=g+p*y,w=g+(p+1)*y):(A=g+p*y+x+1,w=g+(p+1)*y+x+1),f.push(g+p*y+x),f.push(A),f.push(v),f.push(v),f.push(A),f.push(w)}i.push.apply(i,c.flipVertexOrder?f.reverse():f),a+=d}const l=new Float32Array(9*t.length);let u=0;for(const c of t)l[u+0]=c.edge.x,l[u+1]=c.edge.y,l[u+2]=c.edge.z,l[u+3]=c.normal.x,l[u+4]=c.normal.y,l[u+5]=c.normal.z,l[u+6]=c.thicknessDirection.x,l[u+7]=c.thicknessDirection.y,l[u+8]=c.thicknessDirection.z,u+=9;return{vertices:l,indices:new Uint16Array(i)}},Nc=(r,t)=>{let e=r._V.Cz.get(t);return e||(e=t!==void 0&&t>0?new Pb(r,Rt(t,0,1)):new Fb(r),r._V.Cz.set(t,e),e)};class Vb extends Mu{rS(t){return this.Uz=this.qp.M(),this.qp.S(t),this}Cv(t){return this.DY=t,this}kv(){return this.DY}}class Vn extends Vb{constructor(t,e,i,s,n){super(t,e,i),this.BY=t,this.gN=s,this.mN=n,this.rN=t.rN,this.RR=this.rN.oN()}lN(t){return t===this.gN&&{}}}class _b extends Vn{constructor(t,e,i,s,n){super(t,e,i,s,n),this.DY="cull-back",this.Ya=os,this.LY={},this.RY=[],this.AN=Ei({fillStyleSolid:()=>Nt(this.be)&&this.be,fillStyleIndividual:()=>Ri(this.be)&&this.be,fillStylePaletted:()=>Be(this.be)&&this.be}),this.be=Si.fillStyle,this.qp.S(Fo)}Ps(t){const e=this.RY,i=this.be,s=i!==ft,n=this.EY,o=this.ta()||this.zY!==n,h=this.Wz(),a=this.Bo.M(),l=this.Bo.i;if(s){for(const x of e)x.id=x.id!==void 0?String(x.id):void 0,x.xSize=x.xSize!==void 0&&x.xSize<0?-x.xSize:x.xSize,x.ySize=x.ySize!==void 0&&x.ySize<0?-x.ySize:x.ySize,x.zSize=x.zSize!==void 0&&x.zSize<0?-x.zSize:x.zSize;const u=11,c=this.VY||0;let d=c;for(const x of e){const A=x.id;A!==void 0&&this.LY[A]!==void 0||(d+=1)}let f,g=!1,y=!1;if(g=d!==c,y=g,f=!y&&(e.length<100?"chunks":"all"),g){const x=d*u,A=new Float32Array(x);this.IW&&A.set(this.IW),this.IW=A,this.OY=x,this.NY=c*u}const p=Ri(i)?i.getFallbackColor():void 0;for(const x of e){const A=x.id,v=A!==void 0&&this.LY[A],w=[x.xCenter,x.yCenter,x.zCenter,x.xSize,x.ySize,x.zSize,x.color?x.color.r:p?p.r:void 0,x.color?x.color.g:p?p.g:void 0,x.color?x.color.b:p?p.b:void 0,x.color?x.color.a:p?p.a:void 0,x.value];if(v){for(let E=0;E<u;E+=1)w[E]=w[E]!==void 0?w[E]:v.buffer[E];v.buffer.set(w)}else{const E=this.NY,C=new Float32Array(this.IW.buffer,E*Float32Array.BYTES_PER_ELEMENT,u);C.set(w),A!==void 0&&(this.LY[A]={location:E,buffer:C}),this.NY+=u}}if(y&&(this.lG=this.RR.nV(this.IW,!0)),f==="all")this.RR.zV(this.lG,0,this.IW);else if(f==="chunks")for(const x of e){const A=x.id;if(A!==void 0){const v=this.LY[A];this.RR.zV(this.lG,v.location,v.buffer)}}if(o||h||l){const x=this.AN.fillStyleSolid(o),A=this.AN.fillStyleIndividual(o),v=this.AN.fillStylePaletted(o);x||A||v?(this.GY=Nc(this.RR,this.WY()),this.cE=this.RR.oz(G["3D"],G.ColorShaded3D({dataType:A?"attribute":v?["lookup",v.getLookUpProperty(),v.lut]:"uniform",shadingStyle:this.qp.M().type}),G.VertexLocation({offset:{sizeUnit:"axis",dataType:"attribute",halved:!0},axisWorldTranslation:pt(this.dt),normalSource:this.GY.TY}),this.EY!==void 0&&G.RoundedEdges3D),this.yY=a?this.RR.oz(G["3D"],G.VertexLocation({offset:{sizeUnit:"axis",dataType:"attribute",halved:!0},axisWorldTranslation:pt(this.dt),normalSource:void 0}),G.MousePicking,this.EY!==void 0&&G.RoundedEdges3D):void 0):(this.GY=void 0,this.cE=void 0,this.yY=void 0)}if(e.length>0){const x=wt({x:st,y:st,z:st},{x:ht,y:ht,z:ht});for(let A=0;A<this.NY;A+=u){const v=this.IW[A+0],w=this.IW[A+3]/2,E=v-w,C=v+w,k=this.IW[A+1],F=this.IW[A+4]/2,m=k-F,S=k+F,b=this.IW[A+2],M=this.IW[A+5]/2,R=b-M,T=b+M;x.min.x=x.min.x<E?x.min.x:E,x.min.y=x.min.y<m?x.min.y:m,x.min.z=x.min.z<R?x.min.z:R,x.max.x=x.max.x>C?x.max.x:C,x.max.y=x.max.y>S?x.max.y:S,x.max.z=x.max.z>T?x.max.z:T}this.Ya=x}this.VY=d,this.RY.length=0}return this.ha(i),this.zY=n,this.qp.i=!1,this.Bo.i=!1,this}zL(t){const e=t===1?this.yY:this.cE,i=this.GY,s=this.lG,n=this.be,o=this.VY,h=this.qp.M();return e&&s&&o!==void 0&&this.RR.aV(e,(a,l,u)=>{let c=!1;const d=l("aPos"),f=l("aOffsetAxis");this.RR.jR(e).IV(a("uScale"),this.BY.aE.fV()).IV(a("uDisp"),this.BY.aE.AV()).DV(a("uViewProjectionMatrix"),this.UY).dV(a("uIsHighlighted"),t===1||t===2?0:this.zo).AR(a("uHighlightColorOffset"),t===1||t===2?ue:this.Go).dV(a("uRenderEffectMask"),t===2?1:0);const g={location:d,size:3},y={location:f,size:3},p={location:void 0,size:4};if(t!==1&&h.type==="phong"&&this.RR.IV(a("uCameraLoc"),this.YY).IV(a("uLightLoc"),this.HY).dV(a("uAmbientReflection"),h.ambientReflection).dV(a("uSpecularReflection"),h.specularReflection).dV(a("uDiffuseReflection"),h.diffuseReflection).dV(a("uShininess"),h.shininess).AR(a("uLightColor"),h.specularColor).AR(a("uAmbientColor"),h.ambientColor),t===1)this.RR.AR(a("uColor"),this.mN);else if(Nt(n))this.RR.AR(a("uColorDiffuse"),n.getColor());else if(Ri(n)){const x=l("aColor");p.location=x}else if(Be(n)){const x=Xi(n,this,void 0);if(!x&&n.lut.percentageValues)return!1;this.RR.LO(u,n.lut,x)}return s&&(this.RR.lV(s,1,g,y,p,{location:void 0,size:1}),i.Ky(u,o,h.type==="phong"&&t!==1,!1),c=!0),c}),this}dispose(){return super.dispose(),this.lG&&(this.RR.yV(this.lG),this.lG=void 0),this.cE=void 0,this}VR(){return this.dispose(),this}gS(t){this.RY=ai(this.RY,t,{canReturnB:!0})}Ce(t){return this.be=co(this.be,t),this}Eh(){return this.be}fS(t){return this.EY=t!==void 0&&t>0?Rt(t,0,1):void 0,this}WY(){return this.EY}bt(){return this.Ya.max.x}vt(){return this.Ya.min.x}Mt(){return this.Ya.max.y}xt(){return this.Ya.min.y}aS(){return this.Ya.max.z}lS(){return this.Ya.min.z}vl(){return 0}bl(){return 0}uS(){return 0}ta(){return fo(this.ia,this.be)}ha(t){this.ia=t}}class Nb extends _o{constructor(t,e){super(t),this.TY="custom",this.oG=e;const{vertices:i,drawSize:s}=this.aG();this.lG=t.nV(i),this.cG=s}jR(t){return this.RR.lV(this.lG,0,{location:t.attribute("aSegmentPosition"),size:1},{location:t.attribute("aPerpendHorizontal"),size:1},{location:t.attribute("aPerpendVertical"),size:1}),this}Ky(t){return this.RR.QV(this.RR.gl.TRIANGLE_STRIP,0,this.cG,t),this}aG(){const t=this.oG,e=new Float32Array(2*(t+1)*3);let i=0;for(let s=0;s<=t;s+=1){const n=2*Math.PI*s/t,o=Math.cos(n),h=Math.sin(n);for(const a of[0,1])e[i+0]=a,e[i+1]=o,e[i+2]=h,i+=3}return{vertices:e,drawSize:i/3}}kz(){this.RR.yV(this.lG)}}const am=(r,t=16)=>{let e=r._V._z.get(t);return e||(e=new Nb(r,t),r._V._z.set(t,e),e)};class Lb extends Vn{constructor(t,e,i,s,n){super(t,e,i,s,n),this.DY="cull-back",this.$Y=os,this.jY=[],this.ZY=!1,this.lu=Si.lineStyle,this.qp.S(Co)}Ps(t){const e=this.ZY,i=this.lu,s=this.cu!==i,n=this.Wz(),o=e;if(e){const h=rc(this.jY);this.QY=this.RR.nV(h,!1,this.QY)}if(o&&(this.$Y=hc(this.jY)),s||n){const a=pi(i)&&i.getFillStyle(),l=i.getThickness()===1?"primitive":"instanced";this.bG=void 0,Nt(a)&&(l==="primitive"?this.bG={type:l,shader:this.RR.oz(G["3D"],G.VertexLocation({axisWorldTranslation:pt(this.dt),normalSource:void 0}),G.Color({dataType:"uniform"})),fillStyle:a}:l==="instanced"&&(this.bG={type:l,shader:this.RR.oz(G["3D"],G.ColorShaded3D({dataType:"uniform",shadingStyle:this.qp.M().type}),G.LineInstanced3D({axisWorldTranslation:pt(this.dt)})),geometry:am(this.RR,8),fillStyle:a}))}return this.ZY=!1,this.cu=i,this.qp.i=!1,this}zL(t){if(t===1)return this;const e=this.RR.gl,i=this.bG,s=this.QY,n=this.lu,o=this.qp.M();if(i&&s&&pi(n))switch(i.type){case"instanced":{const h=.5*this.ks.Op(n.thickness),a=i.fillStyle.getColor(),l=i.shader,u=i.geometry;this.RR.aV(l,(c,d,f)=>{this.RR.jR(l).IV(c("uScale"),this.BY.aE.fV()).IV(c("uDisp"),this.BY.aE.AV()).DV(c("uViewProjectionMatrix"),this.UY).AR(c("uColorDiffuse"),a).dV(c("uOffsetWU"),h).dV(c("uIsHighlighted"),this.zo).AR(c("uHighlightColorOffset"),t===2?ue:this.Go).dV(c("uRenderEffectMask"),t===2?1:0),o.type==="phong"&&this.RR.IV(c("uCameraLoc"),this.YY).IV(c("uLightLoc"),this.HY).dV(c("uAmbientReflection"),o.ambientReflection).dV(c("uSpecularReflection"),o.specularReflection).dV(c("uDiffuseReflection"),o.diffuseReflection).dV(c("uShininess"),o.shininess).AR(c("uLightColor"),o.specularColor).AR(c("uAmbientColor"),o.ambientColor),e.bindBuffer(e.ARRAY_BUFFER,s);const g=d("aLocationA"),y=d("aLocationB");return e.vertexAttribPointer(g,3,e.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),this.RR.UV(g,1),e.enableVertexAttribArray(g),e.vertexAttribPointer(y,3,e.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,3*Float32Array.BYTES_PER_ELEMENT),this.RR.UV(y,1),e.enableVertexAttribArray(y),u.jR(f).Ky(this.jY.length/2),!0});break}case"primitive":{const h=pi(n)?n.getFillStyle():void 0,a=h&&Nt(h)?h.getColor():void 0;if(a){const l=i.shader;this.RR.aV(l,(u,c)=>(this.RR.jR(l).IV(u("uScale"),this.BY.aE.fV()).IV(u("uDisp"),this.BY.aE.AV()).DV(u("uViewProjectionMatrix"),this.UY).AR(u("uColor"),a).dV(u("uIsHighlighted"),this.zo).AR(u("uHighlightColorOffset"),t===2?ue:this.Go).dV(u("uRenderEffectMask"),t===2?1:0).lV(s,void 0,{location:c("aPos"),size:3}).Ky(e.LINES,this.jY.length),!0))}break}}return this}nl(t){for(let e=0;e<t.length-1;e+=1){const i=t[e],s=t[e+1];this.jY.push(i),this.jY.push(s)}return this.ZY=!0,{cs(){return this},ys(){return this}}}Nt(){return this.jY.length=0,this.ZY=!0,this}Ap(){return[]}bd(t){}Re(t){return this.lu=typeof t=="function"?t(this.lu):t,this}uu(){return this.lu}VR(){return this.QY&&(this.RR.yV(this.QY),this.QY=void 0),this}bt(){return this.$Y.max.x}vt(){return this.$Y.min.x}Mt(){return this.$Y.max.y}xt(){return this.$Y.min.y}aS(){return this.$Y.max.z}lS(){return this.$Y.min.z}vl(){const t=this.lu;return t===it?0:t.getThickness()}bl(){const t=this.lu;return t===it?0:t.getThickness()}uS(){const t=this.lu;return t===it?0:t.getThickness()}}class zb extends _o{constructor(t,e,i){super(t),this.TY="gpu-calculate",this.JY=e,this.KY=i;const{vertices:s,drawSize:n}=this.aG();this.lG=t.nV(s),this.cG=n}Ky(t,e,i,s){return this.RR.lV(this.lG,0,{location:t.attribute("aInstanceGeo"),size:3},{location:s?t.attribute("aTriangleBary"):void 0,size:3}).QV(this.RR.gl.TRIANGLES,0,this.cG,e),this}aG(){const t=this.KY,e=this.JY,i=new Float32Array(6*(6*e+6*(t-2)*e));let s=0;const n=2*Math.PI/e,o=Math.PI/t,h=(a,l,u,c,d)=>{const f=l*n,g=Math.PI/2-a*o,y=Math.cos(g),p=y*Math.cos(f),x=y*Math.sin(f),A=Math.sin(g);i[s]=p,i[s+1]=A,i[s+2]=x,i[s+3]=u,i[s+4]=c,i[s+5]=d,s+=6};for(let a=0;a<t;a+=1)for(let l=0;l<e;l+=1)a>0&&(h(a,l,1,0,0),h(a,l+1,1,1,0),h(a+1,l,0,0,1)),a<t-1&&(h(a,l+1,1,1,0),h(a+1,l+1,0,1,0),h(a+1,l,0,0,1));return s!==i.length&&qs(0,()=>{this.RR.cA.Hn&&s>i.length&&X.console.warn(`LightningChart JS unexpected error scenario, sphere geometry buffer size mismatch.
A point series 3D component might have missing points.

This warning can be omitted with LightningChartOptions.warnings`)}),{vertices:i,drawSize:s/6}}kz(){this.RR.yV(this.lG)}}const lm=(r,t)=>{const e=Math.round(t);e<3&&qs(0,Ft);const i=e;let s=r._V.wz.get(Array.from(r._V.wz.keys()).find(n=>n.sectors===e&&n.stacks===i));return s||(s=new zb(r,e,i),r._V.wz.set({sectors:e,stacks:i},s),s)};class Bb extends Vn{constructor(t,e,i,s,n){super(t,e,i,s,n),this.DY="cull-back",this.QM=[],this.bG={},this.vW=new Vc(this.QM,o=>o.vertexBuffer&&this.RR.yV(o.vertexBuffer),!0),this.yu=[],this.Ha=0,this.$a=[],this.Xa=0,this.Ya=os,this.ja=os,this.AN=Ei({lineStyleSolid:()=>{const o=this.lu;return pi(o)&&o},lineFillSolid:()=>{const o=this.lu.getFillStyle();return Nt(o)&&o},lineFillPaletted:()=>{const o=this.lu.getFillStyle();return Be(o)&&o},jointStyleTriangulatedPoints:()=>Er(this.mS)&&this.mS,jointSizeTriangulated:()=>{const o=this.mS;return Er(o)&&o.getSize()},jointFillSolid:()=>{const o=this.mS.getFillStyle();return Nt(o)&&o},jointFillPaletted:()=>{const o=this.mS.getFillStyle();return Be(o)&&o},wireframeLineStyleSolid:()=>{const o=Er(this.mS)&&this.mS.getWireframeStyle();return pi(o)&&o},wireframeFillSolid:()=>{const o=Er(this.mS)&&this.mS.getWireframeStyle(),h=o&&o.getFillStyle();return Nt(h)&&h}}),this.Qa=!1,this.lu=Si.lineStyle,this.mS=Si.pointStyle3D,this.qp.S(Fo),this.wW={attributesPerVertex:3,prepareRenderData:(o,h)=>rc(o)}}Ps(t){const e=this.Qa,i=this.$a,s=this.Xa,n=s>0,o=this.lu,h=o!==this.cu,a=this.mS,l=a!==this.qY,u=this.Wz(),c=this.Bo.i,d=this.Bo.M();this.ja&&(this.Ya=Ma(this.Ya,this.ja),this.ja=void 0),n&&(this.yu=ai(this.yu,i,{canReturnB:!0}),this.Ha+=s);let f=i,g=s;if(e&&(this.QM.forEach(y=>{y.existingCoordinatesCount=0,y.existingDataPointsCount=0,y.boundaries=os}),this.vW.cW(),f=this.yu,g=this.Ha),g>0){const p=Math.floor(this.rN.tH/(this.wW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT)),x=this.Uo("ApplicationType",v=>v.type==="UserSeries")?g:1e3,A=Rt(x,1e5,p);this.vW.oW(f,A,(v,w,E,C)=>({existingDataPointsCount:E-C,existingCoordinatesCount:E,allocatedCoordinatesCount:v,jointPointsCount:C,lastDataPoint:w[E-1],boundaries:os,vertexBuffer:this.RR.EV(v*this.wW.attributesPerVertex,this.wW.prepareRenderData(w,E))}),(v,w,E,C)=>{this.RR.zV(v.vertexBuffer,v.existingCoordinatesCount*this.wW.attributesPerVertex,this.wW.prepareRenderData(w,E)),v.existingDataPointsCount+=E-C,v.existingCoordinatesCount+=E,v.jointPointsCount+=C,v.lastDataPoint=w[E-1]})}if(h||l||u||c){const y={},p=this.AN.lineStyleSolid(h),x=this.AN.lineFillSolid(h),A=this.AN.lineFillPaletted(h),v=x||A,w=this.AN.jointStyleTriangulatedPoints(l),E=this.AN.jointSizeTriangulated(l),C=this.AN.jointFillSolid(l),k=this.AN.jointFillPaletted(l),F=C||k,m=this.AN.wireframeLineStyleSolid(l),S=this.AN.wireframeFillSolid(l),b=o.getThickness()<0||o.getThickness()===1&&this.Uo("ApplicationType",R=>R.type==="InternalUI")?"primitive":"instanced",M=A?["lookup",A.getLookUpProperty(),A.lut]:"uniform";if(b==="primitive"&&v?y.lines={type:"primitive",fillStyleSolid:x,fillStylePaletted:A,shader:this.RR.oz(G["3D"],G.Color({dataType:M}),G.VertexLocation({axisWorldTranslation:pt(this.dt),normalSource:void 0})),mousePicking:d?{shader:this.RR.oz(G["3D"],G.MousePicking,G.VertexLocation({axisWorldTranslation:pt(this.dt),normalSource:void 0}))}:void 0}:b==="instanced"&&p&&v&&(y.lines={type:"instanced",lineStyleSolid:p,fillStyleSolid:x,fillStylePaletted:A,shader:this.RR.oz(G["3D"],G.ColorShaded3D({dataType:M,shadingStyle:this.qp.M().type}),G.LineInstanced3D({axisWorldTranslation:pt(this.dt)})),geometry:Ub(this.RR,p.getThickness()),mousePicking:d?{shader:this.RR.oz(G["3D"],G.MousePicking,G.LineInstanced3D({axisWorldTranslation:pt(this.dt)}))}:void 0}),y.markers=void 0,F&&w){const R=Eg(w.getShape(),{cube:()=>Nc(this.RR),sphere:()=>Gb(this.RR,w)});y.markers={geometry:R,pointStyle:w,pointSizeNWU:typeof E=="number"&&E,pointSizeAxis:typeof E=="object"&&E,fillStyleSolid:C,fillStylePaletted:k,shader:this.RR.oz(G["3D"],G.ColorShaded3D({dataType:k?["lookup",k.getLookUpProperty(),k.lut]:"uniform",shadingStyle:this.qp.M().type,wireframe:S!==!1}),G.VertexLocation({offset:{dataType:"uniform",sizeUnit:typeof E=="number"?"nwu":"axis",symmetric:typeof E=="number",halved:!0},axisWorldTranslation:pt(this.dt),normalSource:R.TY})),mousePicking:d?{shader:this.RR.oz(G["3D"],G.MousePicking,G.VertexLocation({offset:{dataType:"uniform",sizeUnit:typeof E=="number"?"nwu":"axis",symmetric:typeof E=="number",halved:!0},axisWorldTranslation:pt(this.dt),normalSource:void 0}))}:void 0,wireframe:m&&S&&{thickness:m.getThickness(),fillStyleSolid:S}}}this.bG=y}return this.Qa=!1,this.$a=[],this.Xa=0,this.cu=o,this.qY=a,this.qp.i=!1,this.Bo.i=!1,this}zL(t){var e,i;const s=this.RR.gl,{lines:n,markers:o}=this.bG,h=this.qp.M(),a=t===1?(e=n==null?void 0:n.mousePicking)===null||e===void 0?void 0:e.shader:n==null?void 0:n.shader;if(n&&a&&n.type==="instanced"){const u=a,{geometry:c,lineStyleSolid:d,fillStyleSolid:f,fillStylePaletted:g}=n;this.RR.aV(u,(y,p,x)=>{let A=!1;if(this.RR.jR(u).IV(y("uScale"),this.BY.aE.fV()).IV(y("uDisp"),this.BY.aE.AV()).DV(y("uViewProjectionMatrix"),this.UY).dV(y("uOffsetWU"),this.ks.Op(d.getThickness())).dV(y("uIsHighlighted"),t===1||t===2?0:this.zo).AR(y("uHighlightColorOffset"),t===1||t===2?ue:this.Go).dV(y("uRenderEffectMask"),t===2?1:0),t!==1&&h.type==="phong"&&this.RR.IV(y("uCameraLoc"),this.YY).IV(y("uLightLoc"),this.HY).dV(y("uAmbientReflection"),h.ambientReflection).dV(y("uSpecularReflection"),h.specularReflection).dV(y("uDiffuseReflection"),h.diffuseReflection).dV(y("uShininess"),h.shininess).AR(y("uLightColor"),h.specularColor).AR(y("uAmbientColor"),h.ambientColor),t===1)this.RR.AR(y("uColor"),this.mN);else if(f)this.RR.AR(y("uColorDiffuse"),f.getColor());else if(g){const v=Xi(g,this,void 0);if(!v&&g.lut.percentageValues)return!1;this.RR.LO(x,g.lut,v)}return this.QM.forEach(v=>{s.bindBuffer(s.ARRAY_BUFFER,v.vertexBuffer);const w=p("aLocationA"),E=p("aLocationB");s.vertexAttribPointer(w,3,s.FLOAT,!1,3*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),this.RR.UV(w,1),s.enableVertexAttribArray(w),s.vertexAttribPointer(E,3,s.FLOAT,!1,3*Float32Array.BYTES_PER_ELEMENT,3*Float32Array.BYTES_PER_ELEMENT),this.RR.UV(E,1),s.enableVertexAttribArray(E),c.jR(x).Ky(v.existingCoordinatesCount-1),A=!0}),A})}if(n&&a&&n.type==="primitive"){const u=a,{fillStyleSolid:c,fillStylePaletted:d}=n;this.RR.aV(u,(f,g,y)=>{let p=!1;if(this.RR.jR(u).IV(f("uScale"),this.BY.aE.fV()).IV(f("uDisp"),this.BY.aE.AV()).DV(f("uViewProjectionMatrix"),this.UY).dV(f("uIsHighlighted"),t===1||t===2?0:this.zo).AR(f("uHighlightColorOffset"),t===1||t===2?ue:this.Go).dV(f("uRenderEffectMask"),t===2?1:0),t===1)this.RR.AR(f("uColor"),this.mN);else if(c)this.RR.AR(f("uColor"),c.getColor());else if(d){const x=Xi(d,this,void 0);if(!x&&d.lut.percentageValues)return!1;this.RR.LO(y,d.lut,x)}return this.QM.forEach(x=>{this.RR.lV(x.vertexBuffer,void 0,{location:g("aPos"),size:3}).Ky(s.LINE_STRIP,x.existingCoordinatesCount),p=!0}),p})}const l=t===1?(i=o==null?void 0:o.mousePicking)===null||i===void 0?void 0:i.shader:o==null?void 0:o.shader;if(o&&l){const u=l,{geometry:c,fillStyleSolid:d,fillStylePaletted:f,pointSizeAxis:g,pointSizeNWU:y,wireframe:p}=o;this.RR.aV(u,(x,A,v,w)=>{let E=!1;if(this.RR.jR(u).IV(x("uScale"),this.BY.aE.fV()).IV(x("uDisp"),this.BY.aE.AV()).DV(x("uViewProjectionMatrix"),this.UY).dV(w("uRatioNwuWu"),this.BY.iH()).dV(x("uIsHighlighted"),t===1||t===2?0:this.zo).AR(x("uHighlightColorOffset"),t===1||t===2?ue:this.Go).dV(x("uRenderEffectMask"),t===2?1:0),t!==1&&h.type==="phong"&&this.RR.IV(x("uCameraLoc"),this.YY).IV(x("uLightLoc"),this.HY).dV(x("uAmbientReflection"),h.ambientReflection).dV(x("uSpecularReflection"),h.specularReflection).dV(x("uDiffuseReflection"),h.diffuseReflection).dV(x("uShininess"),h.shininess).AR(x("uLightColor"),h.specularColor).AR(x("uAmbientColor"),h.ambientColor),t===1)this.RR.AR(x("uColor"),this.mN);else if(d)this.RR.AR(x("uColorDiffuse"),d.getColor());else if(f){const C=Xi(f,this,void 0);if(!C&&f.lut.percentageValues)return!1;this.RR.LO(v,f.lut,C)}return p&&t!==1&&this.RR.dV(x("uWireframeThickness"),p.thickness).AR(x("uWireframeColor"),p.fillStyleSolid.getColor()),g!==!1&&this.RR.IV(x("uOffsetAxis"),[g.x,g.y,g.z]),y!==!1&&this.RR.dV(x("uOffsetNWU"),y),this.QM.forEach(C=>{this.RR.lV(C.vertexBuffer,1,{location:A("aPos"),size:3}),c.Ky(v,C.existingCoordinatesCount,h.type==="phong"&&t!==1,!!p&&t!==1),E=!0}),E})}return this}nl(t,e){Array.isArray(t)||(t=[t]),this.$a=ai(this.$a,t,{canReturnB:!0}),this.Xa+=t.length;const i=e||hc(t);return this.ja=this.ja?Ma(this.ja,i):i,this}Re(t){return this.lu=typeof t=="function"?t(this.lu):t,this}uu(){return this.lu}Rp(t){return this.mS=typeof t=="function"?t(this.mS):t,this}sH(){return this.mS}bt(){return this.ja?Math.max(this.ja.max.x,this.Ya.max.x):this.Ya.max.x}vt(){return this.ja?Math.min(this.ja.min.x,this.Ya.min.x):this.Ya.min.x}Mt(){return this.ja?Math.max(this.ja.max.y,this.Ya.max.y):this.Ya.max.y}xt(){return this.ja?Math.min(this.ja.min.y,this.Ya.min.y):this.Ya.min.y}aS(){return this.ja?Math.max(this.ja.max.z,this.Ya.max.z):this.Ya.max.z}lS(){return this.ja?Math.min(this.ja.min.z,this.Ya.min.z):this.Ya.min.z}vl(){return Ti(this.lu)}bl(){return Ti(this.lu)}uS(){return Ti(this.lu)}tl(){return this.yu}qa(){return this.$a}ol(){return this.Ha}al(){return this.Xa}Nt(){return this.Qa=!0,this.yu.length=0,this.Ha=0,this.$a=[],this.Xa=0,this.Ya=os,this.ja=void 0,this}dispose(){return super.dispose(),this.vW.dW(),this.bG={},this}VR(){return this.dispose(),this}}const Ub=(r,t)=>am(r,t>50?20:t>20?16:t>10?12:t>5?8:6),Gb=(r,t)=>{const e=t.getSize();return lm(r,typeof e=="number"?e>50?20:e>20?16:e>10?12:e>5?8:6:20)};class Ob extends Vn{constructor(t,e,i,s,n){super(t,e,i,s,n),this.DY="disabled",this.eH=!1,this.hH=!1,this.rH={x:1,y:1,z:1},this.Dv={x:0,y:0,z:0},this.Pv={x:0,y:0,z:0},this.Bv={x:0,y:0,z:0},this.Lv={x:1,y:1,z:1},this.nH=Zt.projectionOrthographic(-1,1,-1,1,1,-1),this.oH=Zt.projectionOrthographic(-1,1,-1,1,1,-1),this.aH=!1,this.AN=Ei({fillStyleSolid:()=>Nt(this.be)&&this.be,fillStyleValuePalette:()=>Be(this.be)&&this.be.lookUpProperty==="value"&&this.be}),this.be=Si.fillStyle,this.qp.S(Fo)}Ps(t){var e;const i=this.Wz(),s=this.Bo.M(),n=this.Bo.i,o=this.ta();this.AN.fillStyleSolid(o);const h=this.AN.fillStyleValuePalette(o),a=this.Bv,l=this.Lv;if(this.eH&&this.lH&&(this.lG=this.RR.nV(this.lH.vertices,void 0,this.lG),this.uG=this.RR.OV(this.lH.indices,this.uG),this.uH=this.lH.indices.length),this.qp.M().type==="phong"&&(i||this.eH)&&(!((e=this.lH)===null||e===void 0)&&e.normals)&&(this.cH=this.RR.nV(this.lH.normals,void 0,this.cH)),!this.dH&&h&&h.lookUpProperty==="value"&&this.lH&&(this.dH=new Float32Array(this.lH.vertices.length/3),this.hH=!0),this.dH&&this.hH&&(this.fH=this.RR.nV(this.dH,void 0,this.fH)),i||o||n){if(h&&h.lookUpProperty!=="value")throw new Error("LightningChart JS MeshModel3D does not support look up by x/y/z. Must be value");this.cE=this.RR.oz(G["3D"],G.ColorShaded3D({dataType:h?["lookup","value",h.lut]:"uniform",shadingStyle:this.qp.M().type,wireframe:!1}),G.Model3D({normalSource:this.qp.M().type==="phong"?"attribute":void 0})),this.yY=s?this.RR.oz(G["3D"],G.MousePicking,G.Model3D({normalSource:void 0})):void 0}if(this.aH){const u=Zt.projectionOrthographic(-1,1,-1,1,1,-1);this.oH=Zt.rotateXYZ(u,a),this.nH=Zt.translate(u,l.x/2,l.y/2,l.z/2),this.nH=Zt.rotateXYZ(this.nH,a),this.nH=Zt.translate(this.nH,-l.x/2,-l.y/2,-l.z/2),this.aH=!1}return this.qp.i=!1,this.ha(this.be),this.Bo.i=!1,this.eH=!1,this.hH=!1,this}zL(t){const e=t===1?this.yY:this.cE,i=t===1,s=this.uG,n=this.uH,o=this.lG,h=this.cH,a=this.fH,l=this.Dv,u=this.Pv,c=this.rH,d=this.Lv,f=this.nH,g=this.oH,y=this.AN.fillStyleValuePalette(!1),p=this.AN.fillStyleSolid(!1),x=this.qp.M(),A={location:void 0,size:1};return e&&o&&s&&n?(this.RR.aV(e,(v,w,E,C)=>{if(this.RR.jR(e).IV(v("uScale"),this.BY.aE.fV()).IV(v("uDisp"),this.BY.aE.AV()).DV(v("uViewProjectionMatrix"),this.UY).dV(v("uIsHighlighted"),t===1||t===2?0:this.zo).AR(v("uHighlightColorOffset"),this.Go).dV(v("uRenderEffectMask"),t===2?1:0),i)this.RR.AR(v("uColor"),this.mN);else{if(this.be===ft)return!1;if(p)this.RR.AR(v("uColorDiffuse"),p.getColor());else if(y){if(!a)return!1;const k=y.getPalette();A.location=w("aLookupValue"),this.RR.LO(E,k,void 0).lV(a,void 0,A)}}return x.type!=="phong"||i||(this.RR.IV(v("uCameraLoc"),this.YY).IV(v("uLightLoc"),this.HY).dV(v("uAmbientReflection"),x.ambientReflection).dV(v("uSpecularReflection"),x.specularReflection).dV(v("uDiffuseReflection"),x.diffuseReflection).dV(v("uShininess"),x.shininess).AR(v("uLightColor"),x.specularColor).AR(v("uAmbientColor"),x.ambientColor).DV(v("uModelRotationNormals"),g),h&&this.RR.lV(h,void 0,{location:E.attribute("aNormal"),size:3})),this.RR.DV(v("uModelRotation"),f).IV(v("uModelScale"),[c.x,c.y,c.z]).IV(v("uLocationAxis"),[l.x,l.y,l.z]).IV(v("uModelAlignment"),[u.x,u.y,u.z]).IV(v("uModelSize"),[d.x,d.y,d.z]),this.RR.lV(o,0,{location:E.attribute("aGeoPos"),size:3}).XV(s).ZV(n,this.RR.gl.TRIANGLES),!0}),this):this}dispose(){return super.dispose(),this.lG&&(this.RR.yV(this.lG),this.lG=void 0),this.uG&&(this.RR.yV(this.uG),this.uG=void 0),this.cH&&(this.RR.yV(this.cH),this.cH=void 0),this.fH&&(this.RR.yV(this.fH),this.fH=void 0),this.cE=void 0,this.yY=void 0,this.lH=void 0,this.dH=void 0,this}VR(){return this.dispose(),this}Ev(t){return this.lH=t,this.eH=!0,this.Lv=t.modelSize,this}Vv(t){return this.dH=t,this.hH=!0,this}Ce(t){return this.be=co(this.be,t),this}Eh(){return this.be}Ov(t){return this.rH=t,this}fV(){return this.rH}Nv(t){return this.Dv=t,this}Gv(t){return this.Pv=t,this}Wv(t){return this.Bv=t,this.aH=!0,this}Uv(t){return this.DY=t,this}Yv(){return this.DY}bt(){return ht}vt(){return st}Mt(){return ht}xt(){return st}aS(){return ht}lS(){return st}vl(){return 0}bl(){return 0}uS(){return 0}ta(){return fo(this.ia,this.be)}ha(t){this.ia=t}}class Yb extends Vn{constructor(t,e,i,s,n,o){super(t,e,i,s,n),this.DY="cull-back",this.QM=[],this.vW=new Vc(this.QM,x=>x.vertexBuffer&&this.RR.yV(x.vertexBuffer),!1),this.yu=[],this.Ha=0,this.$a=[],this.Xa=0,this.Ya=os,this.ja=os,this.Qa=!1,this.AN=Ei({fillStyleSolid:()=>{const x=this.SS.getFillStyle();return Nt(x)&&x},fillStyleIndividual:()=>{const x=this.SS.getFillStyle();return Ri(x)&&x},fillStylePalette:()=>{const x=this.SS.getFillStyle();return Be(x)&&x},triangulatedPointStyle:()=>{const x=this.SS;return Er(x)&&x},wireframeLineStyleSolid:()=>{const x=Er(this.SS)&&this.SS,A=x&&x.getWireframeStyle();return pi(A)&&A},wireframeFillStyleSolid:()=>{const x=Er(this.SS)&&this.SS,A=x&&x.getWireframeStyle(),v=A&&A.getFillStyle();return Nt(v)&&v}}),this.Ja=void 0,this.Un=o,this.SS=Si.pointStyle3D,this.qp.S(Fo);const h=(o==null?void 0:o.individualPointColorEnabled)===!0,a=(o==null?void 0:o.individualPointSizeEnabled)===!0,l=(o==null?void 0:o.individualLookupValuesEnabled)===!0,u=(o==null?void 0:o.individualPointSizeAxisEnabled)===!0;let c,d,f,g,y=0;y+=3,h&&(c=y,y+=4),a&&(d=y,y+=1),l&&(f=y,y+=1),u&&(g=y,y+=3);const p=((x,A,v,w)=>x||A||v||w?!x||A||v||w?x||!A||v||w?x||A||!v||w?x||A||v||!w?(E,C,k)=>{const F=3+(x?4:0)+(A?1:0)+(v?1:0)+(w?3:0),m=E.length,S=new Float32Array(m*F);let b=0,M=b;for(let R=0;R<m;R+=1){const T=E[R];S[M+0]=T.x,S[M+1]=T.y,S[M+2]=T.z,M+=F}if(b+=3,x){const R=k&&Ri(k)&&k.getFallbackColor()||vn;M=b;for(let T=0;T<m;T+=1){const z=E[T].color||R;S[M+0]=z.r,S[M+1]=z.g,S[M+2]=z.b,S[M+3]=z.a,M+=F}b+=4}if(A){const R=C&&C.getSize();let T=1;typeof R=="number"&&(T=R),M=b;for(let z=0;z<m;z+=1){const P=E[z],_=P.size!==void 0?P.size:T;S[M+0]=_,M+=F}b+=1}if(v){M=b;for(let R=0;R<m;R+=1){const T=E[R];S[M+0]=T.value!==void 0?T.value:-34028234663852886e22,M+=F}b+=1}if(w){const R=C&&C.getSize();let T={x:1,y:1,z:1};typeof R=="object"&&(T=R),M=b;for(let z=0;z<m;z+=1){const P=E[z],_=P.sizeAxisX!==void 0?P.sizeAxisX:T.x,V=P.sizeAxisY!==void 0?P.sizeAxisY:T.y,B=P.sizeAxisZ!==void 0?P.sizeAxisZ:T.z;S[M+0]=_,S[M+1]=V,S[M+2]=B,M+=F}b+=3}return S}:(E,C,k)=>((F,m)=>{const S=m&&m.getSize();let b={x:1,y:1,z:1};typeof S=="object"&&(b=S);const M=F.length,R=new Float32Array(6*M);let T=0;for(let z=0;z<M;z+=1){const P=F[z];R[T+0]=P.x,R[T+1]=P.y,R[T+2]=P.z;const _=P.sizeAxisX!==void 0?P.sizeAxisX:b.x,V=P.sizeAxisY!==void 0?P.sizeAxisY:b.y,B=P.sizeAxisZ!==void 0?P.sizeAxisZ:b.z;R[T+3]=_,R[T+4]=V,R[T+5]=B,T+=6}return R})(E,C):(E,C,k)=>(F=>{const m=F.length,S=new Float32Array(4*m);for(let b=0,M=0;b<m;b+=1){const R=F[b];S[M+0]=R.x,S[M+1]=R.y,S[M+2]=R.z,S[M+3]=R.value!==void 0?R.value:-34028234663852886e22,M+=4}return S})(E):(E,C,k)=>((F,m)=>{const S=m&&m.getSize();let b=1;typeof S=="number"&&(b=S);const M=F.length,R=new Float32Array(4*M);for(let T=0,z=0;T<M;T+=1){const P=F[T];R[z+0]=P.x,R[z+1]=P.y,R[z+2]=P.z;const _=P.size!==void 0?P.size:b;R[z+3]=_,z+=4}return R})(E,C):(E,C,k)=>((F,m)=>{const S=m&&Ri(m)&&m.getFallbackColor()||vn,b=F.length,M=new Float32Array(7*b);for(let R=0,T=0;R<b;R+=1){const z=F[R];M[T+0]=z.x,M[T+1]=z.y,M[T+2]=z.z;const P=z.color||S;M[T+3]=P.r,M[T+4]=P.g,M[T+5]=P.b,M[T+6]=P.a,T+=7}return M})(E,k):(E,C,k)=>rc(E))(h,a,l,u);this.wW={individualPointColorEnabled:h,individualPointSizeEnabled:a,individualLookupValuesEnabled:l,individualPointSizeAxisEnabled:u,attributesPerVertex:y,attributeOffsetCoordinate:0,attributeOffsetColor:c,attributeOffsetSize:d,attributeOffsetLookUpValue:f,attributeOffsetPointSize3D:g,prepareRenderData:(x,A)=>p(x,this.SS,this.SS.fillStyle)}}Ps(t){const e=this.Qa,i=this.$a,s=this.Xa,n=s>0,o=this.SS,h=this.SS!==this.AH,a=this.Bo.M(),l=this.Bo.i,u=this.Wz();this.ja&&(this.Ya=Ma(this.Ya,this.ja),this.ja=void 0),n&&(this.yu=ai(this.yu,i,{canReturnB:!0}),this.Ha+=s);let c=i,d=s;if(e&&(this.QM.forEach(A=>{A.existingDataPointsCount=0,A.existingCoordinatesCount=0,A.boundaries=os}),this.vW.cW(),c=this.yu,d=this.Ha),d>0){const A=Math.floor(this.rN.tH/(this.wW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT)),v=Rt(d,1e5,A);this.vW.oW(c,v,(w,E,C)=>({existingDataPointsCount:C,existingCoordinatesCount:C,allocatedCoordinatesCount:w,boundaries:os,vertexBuffer:this.RR.EV(w*this.wW.attributesPerVertex,this.wW.prepareRenderData(E,C))}),(w,E,C)=>{this.RR.zV(w.vertexBuffer,w.existingCoordinatesCount*this.wW.attributesPerVertex,this.wW.prepareRenderData(E,C)),w.existingDataPointsCount+=C,w.existingCoordinatesCount=w.existingDataPointsCount})}const f=o.getFillStyle(),g=this.AN.fillStyleSolid(h),y=this.AN.fillStyleIndividual(h),p=this.AN.fillStylePalette(h),x=f===ft&&ft;if(h||u||l){let A;const v=o.getSize(),w=this.wW.individualPointColorEnabled,E=this.wW.individualPointSizeEnabled,C=this.wW.individualPointSizeAxisEnabled,k=this.wW.individualLookupValuesEnabled;if(y&&!w){const S="LCJS misusage error: Series individualPointColorEnabled flag must be set if using IndividualPointFill !";throw X.alert(S),new Error(S)}if(p&&p.getLookUpProperty()==="value"&&!k){const S='LCJS misusage error: Series individualLookupValuesEnabled flag must be set if using PalettedFill with lookUpProperty="value" !';throw X.alert(S),new Error(S)}const F=this.AN.wireframeLineStyleSolid(h),m=this.AN.wireframeFillStyleSolid(h);if(g||y||p||m){const S=y?"attribute":p?["lookup",p.getLookUpProperty(),p.lut]:"uniform",b=E&&typeof v=="number",M=C&&typeof v=="object",R=b||M?"attribute":"uniform";if(Er(o)){const T=Eg(o.getShape(),{cube:()=>Nc(this.RR),sphere:()=>Wb(this.RR,o,E)});A={type:"instanced",shader:this.RR.oz(G["3D"],G.ColorShaded3D({dataType:S,shadingStyle:this.qp.M().type,wireframe:m!==!1}),G.VertexLocation({offset:{dataType:R,sizeUnit:typeof v=="number"?"nwu":"axis",halved:!0,symmetric:typeof v=="number"},axisWorldTranslation:pt(this.dt),normalSource:T.TY})),pointStyle:o,useIndividualPointSize:b,useIndividualPointSize3D:M,pointSizeNWU:typeof v=="number"&&v,pointSizeAxis:typeof v=="object"&&v,fillStyleSolid:g,fillStyleIndividual:y,fillStylePaletted:p,fillStyleEmpty:x,mousePickingShader:a&&this.RR.oz(G["3D"],G.MousePicking,G.VertexLocation({offset:{dataType:R,sizeUnit:typeof v=="number"?"nwu":"axis",halved:!0,symmetric:typeof v=="number"},axisWorldTranslation:pt(this.dt),normalSource:void 0})),geometry:T,wireframe:F&&m&&{thickness:F.getThickness()<0?1:F.getThickness(),fillStyleSolid:m}}}else zd(o)&&typeof v=="number"&&(A={type:"primitive",shader:this.RR.oz(G["3D"],G.PointSize(R),G.Color({dataType:S}),G.VertexLocation({axisWorldTranslation:pt(this.dt),normalSource:void 0})),pointStyle:o,pointSizePixels:v,useIndividualPointSize:b,fillStyleSolid:g,fillStyleIndividual:y,fillStylePaletted:p,mousePickingShader:a&&this.RR.oz(G["3D"],G.PointSize(R),G.MousePicking,G.VertexLocation({axisWorldTranslation:pt(this.dt),normalSource:void 0}))})}this.bG=A}if(this.Ja===void 0&&p&&p.lookUpProperty==="value"&&p.lut.percentageValues){let A=ht,v=st;for(let w=0;w<this.yu.length;w+=1){const E=this.yu[w];E.value!==void 0&&E.value<v&&(v=E.value),E.value!==void 0&&E.value>A&&(A=E.value)}this.Ja={min:v,max:A}}return this.Qa=!1,this.$a=[],this.Xa=0,this.AH=o,this.qp.i=!1,this}zL(t){const e=this.RR.gl,i=this.bG;if(!i)return this;const s=t===1?i.mousePickingShader:i.shader;if(!s)return this;const n=this.qp.M(),{fillStyleSolid:o,fillStylePaletted:h,useIndividualPointSize:a}=i,l=i.type==="instanced"&&i.useIndividualPointSize3D,u=i.type==="instanced"&&i.wireframe;return this.RR.aV(s,(c,d,f,g)=>{let y=!1;if(this.RR.jR(s).IV(c("uScale"),this.BY.aE.fV()).IV(c("uDisp"),this.BY.aE.AV()).DV(c("uViewProjectionMatrix"),this.UY).dV(c("uIsHighlighted"),t===1||t===2?0:this.zo).AR(c("uHighlightColorOffset"),t===1||t===2?ue:this.Go).dV(c("uRenderEffectMask"),t===2?1:0),i.type==="instanced"){const{pointSizeAxis:p,pointSizeNWU:x}=i;p!==!1&&l===!1&&this.RR.IV(c("uOffsetAxis"),[p.x,p.y,p.z]),x!==!1&&a===!1&&this.RR.dV(c("uOffsetNWU"),x).dV(g("uRatioNwuWu"),this.BY.iH())}else if(i.type==="primitive"){const{pointSizePixels:p}=i;a||this.RR.dV(c("uPointSize"),p).dV(c("uDevicePixelRatio"),this.RR.$z())}if(t===1)this.RR.AR(c("uColor"),this.mN);else if(i.type==="instanced"?(n.type==="phong"&&this.RR.IV(c("uCameraLoc"),this.YY).IV(c("uLightLoc"),this.HY).dV(c("uAmbientReflection"),n.ambientReflection).dV(c("uSpecularReflection"),n.specularReflection).dV(c("uDiffuseReflection"),n.diffuseReflection).dV(c("uShininess"),n.shininess).AR(c("uLightColor"),n.specularColor).AR(c("uAmbientColor"),n.ambientColor),u&&this.RR.dV(c("uWireframeThickness"),u.thickness).AR(c("uWireframeColor"),u.fillStyleSolid.getColor()),o&&this.RR.AR(c("uColorDiffuse"),o.getColor()),i.fillStyleEmpty&&this.RR.AR(c("uColorDiffuse"),ue)):i.type==="primitive"&&o&&this.RR.AR(c("uColor"),o.getColor()),h){const p=Xi(h,this,this.Ja);if(!p&&h.lut.percentageValues)return!1;this.RR.LO(f,h.lut,p)}return this.QM.forEach((p,x)=>{e.bindBuffer(e.ARRAY_BUFFER,p.vertexBuffer);const A=d("aPos");if(e.vertexAttribPointer(A,3,e.FLOAT,!1,this.wW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.wW.attributeOffsetCoordinate*Float32Array.BYTES_PER_ELEMENT),i.type==="instanced"&&this.RR.UV(A,1),e.enableVertexAttribArray(A),i.fillStyleIndividual&&this.wW.attributeOffsetColor!==void 0&&t!==1){const v=d("aColor");e.vertexAttribPointer(v,4,e.FLOAT,!1,this.wW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.wW.attributeOffsetColor*Float32Array.BYTES_PER_ELEMENT),i.type==="instanced"&&this.RR.UV(v,1),e.enableVertexAttribArray(v)}if(a&&this.wW.attributeOffsetSize!==void 0){i.type==="instanced"?this.RR.dV(g("uRatioNwuWu"),this.BY.iH()):i.type==="primitive"&&this.RR.dV(c("uDevicePixelRatio"),this.RR.$z());const v=d(i.type==="instanced"?"aOffsetNWU":"aPointSize");e.vertexAttribPointer(v,1,e.FLOAT,!1,this.wW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.wW.attributeOffsetSize*Float32Array.BYTES_PER_ELEMENT),i.type==="instanced"&&this.RR.UV(v,1),e.enableVertexAttribArray(v)}if(l&&this.wW.attributeOffsetPointSize3D!==void 0&&i.type==="instanced"){const v=d("aOffsetAxis");e.vertexAttribPointer(v,3,e.FLOAT,!1,this.wW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.wW.attributeOffsetPointSize3D*Float32Array.BYTES_PER_ELEMENT),i.type==="instanced"&&this.RR.UV(v,1),e.enableVertexAttribArray(v)}if(i.fillStylePaletted&&i.fillStylePaletted.getLookUpProperty()==="value"&&this.wW.attributeOffsetLookUpValue!==void 0&&t!==1){const v=d("aLookupValue");e.vertexAttribPointer(v,1,e.FLOAT,!1,this.wW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.wW.attributeOffsetLookUpValue*Float32Array.BYTES_PER_ELEMENT),i.type==="instanced"&&this.RR.UV(v,1),e.enableVertexAttribArray(v)}i.type==="instanced"?(i.geometry.Ky(f,p.existingCoordinatesCount,n.type==="phong"&&t!==1,!!u&&t!==1),y=!0):i.type==="primitive"&&(this.RR.Ky(e.POINTS,p.existingCoordinatesCount),y=!0)}),y}),this}nl(t,e){Array.isArray(t)||(t=[t]),this.$a=ai(this.$a,t,{canReturnB:!0}),this.Xa+=t.length;const i=e||hc(t);return this.ja=this.ja?Ma(this.ja,i):i,this.Ja=void 0,this}vS(t){return this.SS=typeof t=="function"?t(this.SS):t,this}gH(){return this.SS}bt(){return this.ja?Math.max(this.ja.max.x,this.Ya.max.x):this.Ya.max.x}vt(){return this.ja?Math.min(this.ja.min.x,this.Ya.min.x):this.Ya.min.x}Mt(){return this.ja?Math.max(this.ja.max.y,this.Ya.max.y):this.Ya.max.y}xt(){return this.ja?Math.min(this.ja.min.y,this.Ya.min.y):this.Ya.min.y}aS(){return this.ja?Math.max(this.ja.max.z,this.Ya.max.z):this.Ya.max.z}lS(){return this.ja?Math.min(this.ja.min.z,this.Ya.min.z):this.Ya.min.z}vl(){const t=this.SS,e=t.getSize();return typeof e=="number"?Er(t)?e/2:zd(t)?5:0:0}bl(){return this.vl()}uS(){return this.vl()}tl(){return this.yu}qa(){return this.$a}ol(){return this.Ha}al(){return this.Xa}Nt(){return this.Qa=!0,this.yu.length=0,this.Ha=0,this.$a=[],this.Xa=0,this.Ya=os,this.ja=void 0,this.Ja=void 0,this}dispose(){return super.dispose(),this.vW.dW(),this.bG=void 0,this}VR(){return this.dispose(),this}}const Wb=(r,t,e)=>{const i=t.getSize();return lm(r,typeof i=="number"?e||i>=50?20:i>=10?10:i>=3?5:3:32)};class um extends Vn{constructor(t,e,i,s,n,o){super(t,e,i,n,o),this.DY="disabled",this.be=Si.fillStyle,this.gv=Si.lineStyle,this.uU=vt("bilinear"),this.mH=[],this.yH=void 0,this.bG={},this.pH=!1,this.AN=Ei({fillStyleSolid:()=>Nt(this.be)&&this.be,fillStylePaletted:()=>Be(this.be)&&this.be,wireframeStyleLine:()=>pi(this.gv)&&this.gv,wireframeStyleFill:()=>{const d=this.gv&&this.gv.getFillStyle();return Nt(d)&&d}}),this.Pi={x:0,z:0},this.$w={x:1,z:1},this.qp.S(Co);const h=s.dataOrder==="columns"?s.columns:s.rows,a=s.dataOrder==="columns"?s.rows:s.columns;this.Un={...s,primaryDimensionVectorsCount:h,secondaryDimensionVectorsCount:a},this.SH=new Array(this.Un.primaryDimensionVectorsCount).fill(void 0),this.I_=new xl(this.rN,t.rN.CU,t.us.dt,Ft,[],this.Un,-1,vn).mv(it),this.I_.fU=pb;const l=this.I_.gU.gridTiles.map(d=>{const f=d.sizeHeatmapDataVectors,g=d.sizeUniqueHeatmapDataVectors,y=d.iFirstVector,p=d.iFirstUniqueVector,x=new Float32Array(d.sizeHeatmapDataVectors.primary*d.sizeHeatmapDataVectors.secondary),A={primary:d.sizeHeatmapDataVectors.primary-1,secondary:d.sizeHeatmapDataVectors.secondary-1};return{iFirstVector:d.iFirstVector,iFirstUniqueVector:d.iFirstUniqueVector,sizeHeatmapDataVectors:d.sizeHeatmapDataVectors,sizeUniqueHeatmapDataVectors:d.sizeUniqueHeatmapDataVectors,iFirstGeometryVector:y,iFirstGeometryUniqueVector:p,sizeGeometryDataVectors:f,sizeUniqueGeometryDataVectors:g,heightmapData:x,normalmapSize:A}}),u=this.I_.gU.gridTileSizes.map(d=>{const f=l.filter(y=>y.sizeHeatmapDataVectors.primary===d.sizeHeatmapData.primary&&y.sizeHeatmapDataVectors.secondary===d.sizeHeatmapData.secondary),g=f[0].sizeGeometryDataVectors;return{...d,tiles:f,sizeGeometryData:g}}),c=l.reduce((d,f)=>{const g=f.sizeHeatmapDataVectors.primary,y=f.sizeHeatmapDataVectors.secondary,p=g*y;return p>d.cells?{primary:g,secondary:y,cells:p}:d},{primary:0,secondary:0,cells:0});this.vH={gridTiles:l,gridTileSizes:u,largestGridTileSize:c},this.Sv(this.Pi,this.$w)}bH(t){this.xH=t,this.yH=void 0}Sv(t,e){this.Pi=t,this.$w=e;const i=this.Un,s={min:{x:Math.min(this.Pi.x,this.Pi.x+(i.columns-1)*this.$w.x),z:Math.min(this.Pi.z,this.Pi.z+(i.rows-1)*this.$w.z)},max:{x:Math.max(this.Pi.x,this.Pi.x+(i.columns-1)*this.$w.x),z:Math.max(this.Pi.z,this.Pi.z+(i.rows-1)*this.$w.z)}},n=new Map;return this.vH.gridTiles.forEach(o=>{const h=this.Un.dataOrder==="columns"?{x:this.$w.x*(o.sizeHeatmapDataVectors.primary-1),z:this.$w.z*(o.sizeHeatmapDataVectors.secondary-1)}:{x:this.$w.x*(o.sizeHeatmapDataVectors.secondary-1),z:this.$w.z*(o.sizeHeatmapDataVectors.primary-1)},a=this.Un.dataOrder==="columns"?{x:this.Pi.x+this.$w.x*o.iFirstVector.primary,z:this.Pi.z+this.$w.z*o.iFirstVector.secondary}:{x:this.Pi.x+this.$w.x*o.iFirstVector.secondary,z:this.Pi.z+this.$w.z*o.iFirstVector.primary};n.set(o,{sizeAxis:h,startLocationAxis:a})}),this.bU={MH:s,tilesInfo:n},this}vv(){return{start:this.Pi,step:this.$w,end:{x:this.Pi.x+this.$w.x*this.Un.columns,z:this.Pi.z+this.$w.z*this.Un.rows}}}Ps(t){const e=this.mH,i=fo(this.ia,this.be),s=this.AN.fillStyleSolid(i),n=this.AN.fillStylePaletted(i),o=this.gv,h=this.gv!==this.mU,a=this.AN.wireframeStyleLine(h),l=this.AN.wireframeStyleFill(h),u=l!==!1,c=this.uU.i,d=this.uU.M(),f=this.qp.M(),g=this.Wz(),y=this.Bo.M();this.I_.Ps();const p=this.I_.yU;if(!p)return this;this._H=this._H||this.wH(p);const x=this._H;this.CH(x);const A=im(e,x,void 0,w=>w.sizeGeometryDataVectors);if(A.size>0&&(nm(this.RR,A,w=>w.heightmapData,w=>w.heightmapDataTexture),this.pH=!0),f.type==="phong"&&(A.size>0||g)){const w=this.RR.gl,E=this.RR.oz(G["2D"],G.DrawToNormalTexture({flipXZ:this.Un.dataOrder==="rows",vertexIdSource:this.RR._O(),normalTextureType:this.RR.gl2?"uint":"ubyte",heightmapTextureType:this.RR.sz?"float":"ubyte",littleEndian:this.RR.IS_MACHINE_LITTLE_ENDIAN}));x.gridTileSizes.forEach(C=>{C.tiles.forEach(k=>{var F;const m=k.normalmapTexture,S=(F=this.bU)===null||F===void 0?void 0:F.tilesInfo.get(k.tileData);if(!m||!S)return;const b={x:k.normalmapSize.secondary,y:k.normalmapSize.primary},M=b.x*b.y;this.RR.oO.zL(()=>{this.RR.aV(E,(R,T,z,P)=>(this.RR.jR(E).wO(z,M).uV(R("uTileDimensionsXZ"),[this.Un.dataOrder==="columns"?C.sizeHeatmapData.primary:C.sizeHeatmapData.secondary,this.Un.dataOrder==="columns"?C.sizeHeatmapData.secondary:C.sizeHeatmapData.primary]).TV(R("uTileDimensions"),[C.sizeHeatmapData.primary,C.sizeHeatmapData.secondary]).uV(R("uTileStartLocationAxisXZ"),[S.startLocationAxis.x,S.startLocationAxis.z]).uV(R("uTileSizeAxisXZ"),[S.sizeAxis.x,S.sizeAxis.z]).cV(R("uHeightmapTexture"),k.heightmapDataTexture,1).Ky(w.POINTS,M),!0))},m,b,void 0,this.us.mn(),0)})})}const v=this.bG;if(i||h||c){const w=a&&l?{wireframeSolid:a,wireframeFillSolid:l}:void 0;s?v.surface={shader:this.RR.oz(G["3D"],G.SurfaceGrid({axisWorldTranslation:pt(this.dt),fillColor:"uniform",interpolation:d==="bilinear"&&"bilinear",flipXZ:this.Un.dataOrder==="rows",shadingStyle:f.type,wireframe:u,instanceIdSource:this.RR.CO(),normalTextureType:this.RR.gl2?"uint":"ubyte",intensityTextureType:this.RR.sz?"float":"ubyte",heightmapTextureType:this.RR.sz?"float":"ubyte",littleEndian:this.RR.IS_MACHINE_LITTLE_ENDIAN})),fill:{fillMode:"solid",fillStyleSolid:s},wireframe:w}:n&&n.getLookUpProperty()==="value"?v.surface={shader:this.RR.oz(G["3D"],G.SurfaceGrid({axisWorldTranslation:pt(this.dt),fillColor:["lookup","value",n.lut],interpolation:d==="bilinear"&&"bilinear",flipXZ:this.Un.dataOrder==="rows",shadingStyle:f.type,wireframe:u,instanceIdSource:this.RR.CO(),normalTextureType:this.RR.gl2?"uint":"ubyte",intensityTextureType:this.RR.sz?"float":"ubyte",heightmapTextureType:this.RR.sz?"float":"ubyte",littleEndian:this.RR.IS_MACHINE_LITTLE_ENDIAN})),fill:{fillMode:"intensity",fillStylePaletted:n},wireframe:w}:n?v.surface={shader:this.RR.oz(G["3D"],G.SurfaceGrid({axisWorldTranslation:pt(this.dt),fillColor:["lookup",n.getLookUpProperty(),n.lut],interpolation:d==="bilinear"&&"bilinear",flipXZ:this.Un.dataOrder==="rows",shadingStyle:f.type,wireframe:u,instanceIdSource:this.RR.CO(),normalTextureType:this.RR.gl2?"uint":"ubyte",intensityTextureType:this.RR.sz?"float":"ubyte",heightmapTextureType:this.RR.sz?"float":"ubyte",littleEndian:this.RR.IS_MACHINE_LITTLE_ENDIAN})),fill:{fillMode:"xyz",fillStylePaletted:n},wireframe:w}:u&&(v.surface={shader:this.RR.oz(G["3D"],G.SurfaceGrid({axisWorldTranslation:pt(this.dt),fillColor:void 0,interpolation:d==="bilinear"&&"bilinear",flipXZ:this.Un.dataOrder==="rows",shadingStyle:f.type,wireframe:u,instanceIdSource:this.RR.CO(),normalTextureType:this.RR.gl2?"uint":"ubyte",intensityTextureType:this.RR.sz?"float":"ubyte",heightmapTextureType:this.RR.sz?"float":"ubyte",littleEndian:this.RR.IS_MACHINE_LITTLE_ENDIAN})),fill:void 0,wireframe:w})}return v.mousePicking=y?this.bG.mousePicking||{shader:this.RR.oz(G["3D"],G.SurfaceGrid({axisWorldTranslation:pt(this.dt),fillColor:"uniform",interpolation:d==="bilinear"&&"bilinear",flipXZ:this.Un.dataOrder==="rows",shadingStyle:"simple",wireframe:!1,instanceIdSource:this.RR.CO(),normalTextureType:this.RR.gl2?"uint":"ubyte",intensityTextureType:this.RR.sz?"float":"ubyte",heightmapTextureType:this.RR.sz?"float":"ubyte",littleEndian:this.RR.IS_MACHINE_LITTLE_ENDIAN}))}:void 0,this.bG=v,this.mH.length=0,this.ia=this.be,this.mU=o,this.qp.i=!1,this}wH(t){const e=this.vH.gridTiles.map(o=>{const h=rm(this.RR,o.sizeHeatmapDataVectors.secondary,o.sizeHeatmapDataVectors.primary),a=t.gridTiles.find(l=>l.iFirstUniqueVector.primary===o.iFirstUniqueVector.primary&&l.iFirstUniqueVector.secondary===o.iFirstUniqueVector.secondary);if(!a)throw new Error("Internal LC JS error prepare surface data 2D render data not found");return{...o,intensityDataTexture:a.intensityDataTexture,heightmapDataTexture:h,normalmap:void 0,tileData:o}}),i=this.vH.gridTileSizes.map(o=>{const h=e.filter(a=>a.sizeHeatmapDataVectors.primary===o.sizeHeatmapData.primary&&a.sizeHeatmapDataVectors.secondary===o.sizeHeatmapData.secondary);return{...o,tiles:h}}),s=this.RR.nV([0,0,1,0,0,1,0,1,1,0,0,1,0,0,1,0,1,0,1,0,1,0,1,0,1,1,1,1,0,0]),n=this.RR.gl.TRIANGLES;return{gridTiles:e,gridTileSizes:i,rectangleLocationsBuffer:s,rectangleLocationsDrawLength:6,rectangleLocationsDrawMode:n}}CH(t){var e;if(this.qp.M().type==="phong")for(let i=0;i<t.gridTiles.length;i+=1){const s=t.gridTiles[i];if(s.normalmapTexture)return;let n;const o=(e=this.RR.gl2)===null||e===void 0?void 0:e.ctx;if(o)n=this.RR.fO(null,o.RGBA_INTEGER,!1,!0,{x:s.normalmapSize.secondary,y:s.normalmapSize.primary},!1,o.UNSIGNED_INT,o.RGBA32UI);else{const h=this.RR.gl;n=this.RR.fO(null,h.RGBA,!1,!0,{x:s.normalmapSize.secondary,y:s.normalmapSize.primary},!1,h.UNSIGNED_BYTE)}s.normalmapTexture=n}else t.gridTiles.forEach(i=>{i.normalmapTexture&&(this.RR.OR(i.normalmapTexture),i.normalmapTexture=void 0)})}zL(t){var e,i,s,n;const o=this.RR.gl,h=this._H;if(!h)return this;const a=this.qp.M(),l=this.bG,u=t===1?(e=l.mousePicking)===null||e===void 0?void 0:e.shader:(i=l.surface)===null||i===void 0?void 0:i.shader;if(!u)return this;const c=t!==1?(s=l.surface)===null||s===void 0?void 0:s.wireframe:void 0,d=t!==1?(n=l.surface)===null||n===void 0?void 0:n.fill:void 0;return this.RR.aV(u,(f,g,y,p)=>{let x=!1;if(this.RR.jR(u).kO(y,this.vH.largestGridTileSize.cells).IV(f("uScale"),this.BY.aE.fV()).IV(f("uDisp"),this.BY.aE.AV()).DV(f("uViewProjectionMatrix"),this.UY).dV(f("uIsHighlighted"),t===1||t===2?0:this.zo).AR(f("uHighlightColorOffset"),t===1||t===2?ue:this.Go).dV(f("uRenderEffectMask"),t===2?1:0),t!==1&&(a.type==="phong"&&this.RR.IV(f("uCameraLoc"),this.YY).IV(f("uLightLoc"),this.HY).dV(f("uAmbientReflection"),a.ambientReflection).dV(f("uSpecularReflection"),a.specularReflection).dV(f("uDiffuseReflection"),a.diffuseReflection).dV(f("uShininess"),a.shininess).AR(f("uLightColor"),a.specularColor).AR(f("uAmbientColor"),a.ambientColor),c)){const{wireframeFillSolid:A,wireframeSolid:v}=c,w=v.getThickness()<0?1:v.getThickness();this.RR.AR(f("uWireframeColor"),A.getColor()).dV(f("uWireframeThickness"),w)}return t===1?this.RR.AR(f("uColorDiffuse"),this.mN):(d==null?void 0:d.fillMode)==="solid"&&this.RR.AR(f("uColorDiffuse"),d.fillStyleSolid.getColor()),h.gridTileSizes.forEach(A=>{this.RR.uV(f("uTileDimensionsXZ"),[this.Un.dataOrder==="columns"?A.sizeHeatmapData.primary:A.sizeHeatmapData.secondary,this.Un.dataOrder==="columns"?A.sizeHeatmapData.secondary:A.sizeHeatmapData.primary]).TV(f("uTileDimensions"),[A.sizeHeatmapData.primary,A.sizeHeatmapData.secondary]),A.tiles.forEach(v=>{var w;const E=(w=this.bU)===null||w===void 0?void 0:w.tilesInfo.get(v.tileData);if(!E)return;let C=0,k=(v.sizeHeatmapDataVectors.primary-1)*(v.sizeHeatmapDataVectors.secondary-1);if(this.xH){const F=this.xH.fill.iFirstPrimary,m=this.xH.fill.iFirstPrimary+this.xH.fill.amountPrimary-1,S=v.iFirstVector.primary,b=v.iFirstVector.primary+v.sizeHeatmapDataVectors.primary-1;if(S>m||b<F)return;const M=((R,T,z,P)=>wt(Math.max(R,z),Math.min(T,P)))(F,m,S,b);C=(M.min-v.iFirstVector.primary)*(A.sizeGeometryData.secondary-1),k=(M.max-M.min)*(A.sizeGeometryData.secondary-1)}if(!(C<0||k<=0)){if((d==null?void 0:d.fillMode)==="intensity"){const{fillStylePaletted:F}=d,m=this.I_.Ja;this.RR.LO(y,F.lut,m).cV(f("uTileIntensityValues"),v.intensityDataTexture,2).FV(f("uTileBoundsAxisXZ"),[E.startLocationAxis.x,E.startLocationAxis.z,E.sizeAxis.x,E.sizeAxis.z])}if((d==null?void 0:d.fillMode)==="xyz"){const{fillStylePaletted:F}=d,m=F.getLookUpProperty()==="x"?{min:this.vt(),max:this.bt()}:F.getLookUpProperty()==="y"?{min:this.xt(),max:this.Mt()}:F.getLookUpProperty()==="z"?{min:this.lS(),max:this.aS()}:void 0;if(!m&&F.lut.percentageValues)return;this.RR.LO(y,F.lut,m)}t!==1&&this.qp.M().type==="phong"&&v.normalmapTexture&&this.RR.cV(f("uNormalmapTexture"),v.normalmapTexture,3),this.RR.lV(h.rectangleLocationsBuffer,0,{location:g("aGeoCellOffset"),size:2},{location:c?g("aTriangleBary"):void 0,size:3}).BV(f("uBaseInstance"),C).uV(f("uTileStartLocationAxisXZ"),[E.startLocationAxis.x,E.startLocationAxis.z]).uV(f("uTileSizeAxisXZ"),[E.sizeAxis.x,E.sizeAxis.z]).cV(f("uHeightmapTexture"),v.heightmapDataTexture,0).QV(h.rectangleLocationsDrawMode,0,h.rectangleLocationsDrawLength,k),x=!0,o.bindBuffer(o.ARRAY_BUFFER,null)}})}),x}),this}dispose(){return super.dispose(),this.I_.dispose(),this._H&&(this._H.gridTileSizes.forEach(t=>{}),this._H.gridTiles.forEach(t=>{this.RR.OR(t.heightmapDataTexture),t.normalmapTexture&&this.RR.OR(t.normalmapTexture)}),this.RR.yV(this._H.rectangleLocationsBuffer),this._H=void 0),this.bG={},this}VR(){return this.dispose(),this.I_.VR(),this}_v(t){return this.I_._v(t),this}wv(t){this.mH.push(t),sm(this.vH.gridTiles,t,e=>e.heightmapData);for(let e=t.startPrimary;e<t.startPrimary+t.lengthPrimary;e+=1)this.SH[e]=void 0;return this.yH=void 0,this}xv(t){return this.uU.S(t),this}Mv(){return this.uU.M()}Ce(t){return this.be=co(this.be,t),this.I_.Ce(this.be),this}Eh(){return this.be}mv(t){return this.gv=typeof t=="function"?t(this.gv):t,this}bv(){return this.gv}bt(){var t;return((t=this.bU)===null||t===void 0?void 0:t.MH.max.x)||0}vt(){var t;return((t=this.bU)===null||t===void 0?void 0:t.MH.min.x)||0}Mt(){const t=this.yH||this.kH();return this.yH=t,t.max}xt(){const t=this.yH||this.kH();return this.yH=t,t.min}aS(){var t;return((t=this.bU)===null||t===void 0?void 0:t.MH.max.z)||0}lS(){var t;return((t=this.bU)===null||t===void 0?void 0:t.MH.min.z)||0}vl(){return 0}bl(){return 0}uS(){return 0}kH(){if(this.yH)return this.yH;const t=this.xH?this.xH.fill.iFirstPrimary:0,e=this.xH?t+this.xH.fill.amountPrimary-1:this.Un.primaryDimensionVectorsCount-1;let i=st,s=ht;return this.vH.gridTiles.forEach(n=>{for(let o=Math.max(t,n.iFirstUniqueVector.primary);o<=Math.min(e,n.iFirstUniqueVector.primary+n.sizeUniqueHeatmapDataVectors.primary-1);o+=1){const h=(o-n.iFirstUniqueVector.primary)*n.sizeHeatmapDataVectors.secondary;let a=this.SH[o];if(a)i=i<a.min?i:a.min,s=s>a.max?s:a.max;else{a={min:st,max:ht},this.SH[o]=a;for(let l=0;l<n.sizeHeatmapDataVectors.secondary;l+=1){const u=n.heightmapData[h+l];i=i<u?i:u,s=s>u?s:u,a.min=Math.min(a.min,u),a.max=Math.max(a.max,u)}}}}),this.yH={min:i,max:s},this.yH}}class Hb extends Vn{constructor(t,e,i,s,n,o){super(t,e,i,n,o),this.DY="disabled",this.MU=0,this.wU={},this.Pi={x:0,z:0},this.$w={x:1,z:1},this.Un={...s,scrollDimensionSize:s.scrollDimension==="columns"?s.columns:s.rows,staticDimensionSize:s.scrollDimension==="columns"?s.rows:s.columns},this.MH={min:{x:this.Pi.x,z:this.Pi.z},max:{x:s.scrollDimension==="rows"?this.Pi.x+(s.columns-1)*this.$w.x:this.Pi.x,z:s.scrollDimension==="columns"?this.Pi.z+(s.rows-1)*this.$w.z:this.Pi.z}};const h=()=>({shape:new um(this.BY,Ft,this.Oo,{columns:s.columns+(s.scrollDimension==="columns"?1:0),rows:s.rows+(s.scrollDimension==="rows"?1:0),dataOrder:s.scrollDimension,heatmapDataType:"intensity"},this.gN,this.mN).setVisible(!1),hasData:!1});this.QM=[h(),h()]}Ps(t){this.QM.forEach(s=>{s.shape.Ps(t)});const e=this.QM.reduce((s,n)=>{var o,h;return s.min=Math.min(s.min,qt((o=n.shape.I_.Ja)===null||o===void 0?void 0:o.min,st)),s.max=Math.max(s.max,qt((h=n.shape.I_.Ja)===null||h===void 0?void 0:h.max,ht)),s},{min:st,max:ht}),i=this.QM.reduce((s,n)=>{var o,h;return s.min=Math.min(s.min,qt((o=n.shape.yH)===null||o===void 0?void 0:o.min,st)),s.max=Math.max(s.max,qt((h=n.shape.yH)===null||h===void 0?void 0:h.max,ht)),s},{min:st,max:ht});return this.QM.forEach(s=>{s.shape.I_.Ja=e,s.shape.yH=i}),this}zL(t){return this.QM.forEach(e=>{e.hasData&&(e.shape.UY=this.UY,e.shape.YY=this.YY,e.shape.HY=this.HY,e.shape.zL(t))}),this}Sv(t,e){return this.Pi=t,this.$w=e,this.QM.forEach(i=>{i.shape.Sv(this.Un.scrollDimension==="columns"?{x:i.shape.vv().start.x,z:this.Pi.z}:{x:this.Pi.x,z:i.shape.vv().start.z},this.$w)}),this.Un.scrollDimension==="columns"?(this.MH.min.z=t.z,this.MH.max.z=this.Pi.z+(this.Un.rows-1)*this.$w.z):(this.MH.min.x=t.x,this.MH.max.x=this.Pi.x+(this.Un.columns-1)*this.$w.x),this}vv(){return{start:this.Pi,step:this.$w}}Nt(){return this.MU=0,this.wU={},this.MH={min:{x:this.Pi.x,z:this.Pi.z},max:{x:this.Un.scrollDimension==="rows"?this.Pi.x+(this.Un.columns-1)*this.$w.x:this.Pi.x,z:this.Un.scrollDimension==="columns"?this.Pi.z+(this.Un.rows-1)*this.$w.z:this.Pi.z}},this.QM.forEach(t=>{t.shape.setVisible(!1),t.shape.pH=!1,t.hasData=!1}),this}Fv(t){var e;const i=this.QM[0],s=this.QM[1],n=t.heightMapValues?t.heightMapValues.length:(e=t.intensityValues)===null||e===void 0?void 0:e.length;let o=0;if(!n)return this;do{const h=Math.floor(this.MU/this.Un.scrollDimensionSize)%this.QM.length,a=this.QM[h],l=this.MU%this.Un.scrollDimensionSize,u=this.Un.scrollDimensionSize-l,c=l===0,d=Math.min(u,n),f=l+d,g=l,y=g+1,p=o,x=o+d,A=this.MU>=this.Un.scrollDimensionSize&&f<=this.Un.scrollDimensionSize-1,v=c;c&&(a.shape.Sv(this.Un.scrollDimension==="columns"?{x:this.Pi.x+(this.MU-1)*this.$w.x,z:this.Pi.z}:{x:this.Pi.x,z:this.Pi.z+(this.MU-1)*this.$w.z},this.$w),a.shape.setVisible(!0));const w=A?0:1,E=f+(A?1:0);a.shape.bH({fill:{iFirstPrimary:w,amountPrimary:E},wireframe:{iFirstPrimary:w,amountPrimary:E,connectNext:!1}});const C=a===i?s:i,k=f+1,F=1+this.Un.scrollDimensionSize-k;C.shape.bH({fill:{iFirstPrimary:k,amountPrimary:F},wireframe:{iFirstPrimary:k,amountPrimary:F-1,connectNext:!0}});const m={};if(t.heightMapValues){const S=t.heightMapValues.slice(p,x);let b=!1;v&&this.wU.yValues&&(b=!0,S.splice(0,0,this.wU.yValues));const M={startPrimary:b?g:y,startSecondary:0,lengthPrimary:S.length,lengthSecondary:this.Un.staticDimensionSize,values:S,type:"y"};a.shape.wv(M),a.hasData=!0,m.yValues=S[d-1]}if(t.intensityValues){const S=t.intensityValues.slice(p,x);let b=!1;v&&this.wU.intensityValues&&(b=!0,S.splice(0,0,this.wU.intensityValues));const M={startPrimary:b?g:y,startSecondary:0,lengthPrimary:S.length,lengthSecondary:this.Un.staticDimensionSize,values:S,type:"intensity"};a.shape._v(M),a.hasData=!0,m.intensityValues=S[d-1]}this.MU+=d,o+=d,this.wU=m}while(o<n);return this.Un.scrollDimension==="columns"?(this.MH.min.x=this.Pi.x+Math.max(this.MU-this.Un.scrollDimensionSize,0)*this.$w.x,this.MH.max.x=this.Pi.x+(this.MU-1)*this.$w.x):(this.MH.min.z=this.Pi.z+Math.max(this.MU-this.Un.scrollDimensionSize,0)*this.$w.z,this.MH.max.z=this.Pi.z+(this.MU-1)*this.$w.z),this}xv(t){return this.QM.forEach(e=>e.shape.xv(t)),this}Mv(){return this.QM[0].shape.Mv()}Ce(t){return this.QM.forEach(e=>e.shape.Ce(t)),this}Eh(){return this.QM[0].shape.Eh()}mv(t){return this.QM.forEach(e=>e.shape.mv(t)),this}bv(){return this.QM[0].shape.bv()}VR(){return this.dispose(),this.QM.forEach(t=>t.shape.VR()),this}dispose(){return super.dispose(),this.QM.forEach(t=>t.shape.dispose()),this}setVisible(t){return super.setVisible(t),this.QM.forEach(e=>e.shape.setVisible(t&&e.hasData)),this}rS(t){return super.rS(t),this.QM.forEach(e=>e.shape.rS(t)),this}bt(){return this.MH.max.x}vt(){return this.MH.min.x}Mt(){return Math.max(this.QM[0].shape.Mt(),this.QM[1].shape.Mt())}xt(){return Math.min(this.QM[0].shape.xt(),this.QM[1].shape.xt())}aS(){return this.MH.max.z}lS(){return this.MH.min.z}vl(){return 0}bl(){return 0}uS(){return 0}cs(t){return super.cs(t),this.QM.forEach(e=>e.shape.cs(t)),this}}class Xb extends om{constructor(t,e,i,s){super(t,e,i),this.TH=45,this.FH=.1,this.IH=100,this.YY=yt(0,0,1),this.PH=yt(0,0,-1),this.DH=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],this.qp=new pc,this.dt=s}Kv(){const{cellIndex:t,cellSpan:e,cellsAmount:i}=this.dt,s=e.x/i.x,n=e.y/i.y,o=t.x/i.x,h=t.y/i.y,a=this.us.oi();return{x:o*a.x,y:h*a.y,width:s*a.x,height:n*a.y}}setCameraLocation(t){return this.YY=t,this}getCameraLocation(){return this.YY}setCameraDirection(t){return this.PH=J.normalize(t),this}getCameraDirection(){return this.PH}setLightLocation(t){return this.HY=t,this}getLightLocation(){return this.HY}BH(){return yt(this.DH[0],this.DH[1],this.DH[2])}LH(){return yt(this.DH[4],this.DH[5],this.DH[6])}}class Zf extends Xb{constructor(t,e,i,s){super(t,e,i,s),this.aE=new Qv,this.RH=!0,this.rN=t,this.gl=t.oN(),this.MY=this.pY,this.EH=this.us.Co(()=>{this.RH=!0}),this.zH=s.U(()=>{this.RH=!0})}rV(t){const e=t.vt(),i=t.xt(),s=t.lS(),n=t.bt(),o=t.Mt(),h=t.aS();if(e===st||n===ht||i===st||o===ht||s===st||h===ht)return Kt;const a=t.vl(),l=t.bl(),u=t.uS(),c=Math.abs(t.ks.Op(a)*t.dt.x.et()),d=Math.abs(t.ks.Op(l)*t.dt.y.et()),f=Math.abs(t.ks.Op(u)*t.dt.z.et()),g=e-c,y=n+c,p=i-d,x=o+d,A=s-f,v=h+f;let w;return[{x:g,y:p,z:A},{x:y,y:p,z:A},{x:g,y:x,z:A},{x:y,y:x,z:A},{x:g,y:p,z:v},{x:y,y:p,z:v},{x:g,y:x,z:v},{x:y,y:x,z:v}].map(E=>t.ks.Gp(E)).forEach(E=>{if(!E)return;w=w?Bi(w,{min:E,max:E}):{min:E,max:E}}),w||Kt}_Y(t){const e=Array.from(this.MY.values());for(let i=0;i<e.length;i+=1){const s=e[i],n=s.lN(t);if(n)return{entity:s,index:i,collectionMember:n.collectionMember}}}Gp(t){if(this.VH(),this.OH(),!this.UY)return;const e=this.aE.AV(),i=yt(e[0],e[1],e[2]),s=this.aE.fV(),n=yt(s[0],s[1],s[2]),o=J.divideVec(J.subtractVec(t,i),n),h=this.UY,a=Zt.multiply(h,[o.x,o.y,o.z,1]),l=N(a[0]/a[3],a[1]/a[3]),u=this.us.oi();return{x:.5*(1+l.x)*u.x,y:.5*(1+l.y)*u.y}}ft(t){const e=this.aE.AV(),i=this.aE.fV(),s=J.divideVec(J.subtractVec(t,{x:e[0],y:e[1],z:e[2]}),{x:i[0],y:i[1],z:i[2]});return{...t,x:s.x,y:s.y,z:s.z}}yt(t){const e=this.aE.AV(),i=this.aE.fV(),s=J.addVec(J.multiplyVec(t,{x:i[0],y:i[1],z:i[2]}),{x:e[0],y:e[1],z:e[2]});return{...t,x:s.x,y:s.y,z:s.z}}Op(t){return t/1e3}iH(){return .001}Ps(){const t=this.YY,e=this.HY,i=this.dt.x.i||this.dt.y.i||this.dt.z.i;if(!e)throw qs(0,()=>wg());const{viewProjectionMatrix:s}=this.VH();this.OH();const n=[t.x,t.y,t.z],o=[e.x,e.y,e.z];return this.pY.forEach(h=>{h.UY=s,h.YY=n,h.HY=o,h.Ps(i)}),this}VH(){if(!this.RH&&this.UY)return{viewProjectionMatrix:this.UY};const t=this.Kv(),e=t.width/t.height;this.NH=Zt.projectionPerspective(this.TH,e,this.FH,this.IH);const i=this.YY;this.DH[12]=i.x,this.DH[13]=i.y,this.DH[14]=i.z;const s=this.PH,n=yt(0,1,0),o=J.multiply(s,-1),h=J.normalize(J.cross(n,o)),a=J.normalize(J.cross(o,h));this.DH[0]=h.x,this.DH[1]=h.y,this.DH[2]=h.z,this.DH[4]=a.x,this.DH[5]=a.y,this.DH[6]=a.z,this.DH[8]=o.x,this.DH[9]=o.y,this.DH[10]=o.z,this.GH=Zt.inverse(this.DH);const{cellIndex:l,cellSpan:u,cellsAmount:c}=this.dt,d=u.x/c.x,f=u.y/c.y,g=(l.x+u.x/2)/c.x,y=(l.y+u.y/2)/c.y,p=Zt.multiply(Zt.translation($r(-1,1,g),$r(-1,1,y),0),Zt.scaling(d,f,1));return this.UY=Zt.multiply(p,Zt.multiply(this.NH,this.GH)),this.WH=Zt.inverse(this.UY),this.RH=!1,{viewProjectionMatrix:this.UY}}OH(){this.aE.KO(this.dt.x),this.aE.qO(this.dt.y),this.aE.tN(this.dt.z)}zL(t,e){const i=this.gl.$z(),s=this.Kv(),n={x:s.x*i*e,y:s.y*i*e,width:s.width*i*e,height:s.height*i*e};return this.gl.hV(n.x,n.y,n.width,n.height),this.pY.forEach(o=>{o.getVisible()&&(this.gl.Kz(o.DY),t!==1&&this.gl.nS(o.iS),(t!==1||o.getMouseInteractions())&&o.zL(t))}),this.gl.Kz("disabled"),this.gl.nS(!1),this.gl.qz(!1),this}setCameraLocation(t){return this.YY.x===t.x&&this.YY.y===t.y&&this.YY.z===t.z||(this.RH=!0),super.setCameraLocation(t),this}setCameraDirection(t){return this.PH.x===t.x&&this.PH.y===t.y&&this.PH.z===t.z||(this.RH=!0),super.setCameraDirection(t),this}W(){super.W(),this.us.ko(this.EH),this.dt.Y(this.zH)}bS(t){const e=this.rN.wY();return this.SY(new Yb(this,this.vY,[],e,this.rN.CY(e),t))}rp(t){const e=this.rN.wY();return this.SY(new Bb(this,this.vY,t,e,this.rN.CY(e)))}AS(){const t=this.rN.wY();return this.SY(new _b(this,this.vY,[],t,this.rN.CY(t)))}Rv(){const t=this.rN.wY();return this.SY(new Ob(this,this.vY,[],t,this.rN.CY(t)))}Lg(){const t=this.rN.wY();return this.SY(new Lb(this,this.vY,[],t,this.rN.CY(t)))}yv(t){const e=this.rN.wY();return this.SY(new um(this,this.vY,[],t,e,this.rN.CY(e)))}Tv(t){const e=this.rN.wY();return this.SY(new Hb(this,this.vY,[],t,e,this.rN.CY(e)))}}class $b extends Tx{constructor(t,e,i,s=Jv){if(super(t,e,i),this.X=gr(1,1),this.UH=!1,this.YH=0,this.HH=!0,this.$H=0,this.tH=8388608,this.$E=[null,null],this.XH=null,this.jH=null,this.ZH=0,this.Qg=!1,this.QH=0,this.Ss=(x=!1)=>(this.$i||this.dn||this.JH()||(x&&(this.UH=!0),this.hn=!0,this.KH||this.Qr.nz(x)),this),this.KH=!1,this.cz=x=>{if(this.$i||this.dn)return;const A=x-this.YH;if(A>=this.Qn||this.Qn===-1){this.KH=!0,this.YH=x,this.UH=!1;const v=A>50?1e3/60:A;this.rn&&this.rn(v),this.hn=!1,this.Qn!==-1&&this.UH&&(this.Qr.nz(this.UH),this.hn=!0),this.ls.Ps(A),this.pn(),this.Sn(),this.nn&&this.nn(),this.KH=!1,this.D.emit("render"),this.hn&&this.Ss(this.UH)}else this.hn=!0,this.Qr.nz()},this.qH=new Map,this.oN=()=>this.RR,this.t$=()=>{var x,A,v;const w=this.On(),E=this.HH,C=X.performance.now(),k=(x=this.i$)===null||x===void 0?void 0:x.s$.reduce((b,M)=>b?M.e$&&b.e$&&M.e$>b.e$?M:b:M,void 0),F=k==null?void 0:k.e$,m=(A=this.Dn)===null||A===void 0?void 0:A.timeStamp,S=(v=this.xo)===null||v===void 0?void 0:v.timeStamp;return E?(this.Ss(!0),!1):k===void 0||(k===void 0||!k.h$)&&(S!==void 0&&F!==void 0&&S>F||(F!==void 0&&w===void 0?C-F>=1e3:!(F!==void 0&&m!==void 0&&C-m>=2e3)||C-F>=1e3))},this.r$=()=>{var x,A;this.n$=void 0;const v=(A=(x=this.i$)===null||x===void 0?void 0:x.o$)===null||A===void 0?void 0:A.a$;v===void 0||v>=this.$H||this.l$()},this.Sn=()=>{if(this.$i||this.dn)return this;const x=this.RR.gl,A=X.performance.now();this.RR.sV(x.FRAMEBUFFER,this.Qr.tz?this.$E[0]:null);const v=this.X,w=v.x>0&&v.y>0;if(this.gn.i&&this.RR.qV(this.gn.M()),x.resize&&w&&x.resize(v.x*this.RR.$z(),v.y*this.RR.$z()),this.RR.eV(0,0,v.x*this.RR.$z(),v.y*this.RR.$z()),this.RR.hV(0,0,v.x*this.RR.$z(),v.y*this.RR.$z()),this.RR.Nt(),w)for(const E of this.tn.values())E.zL(0,1);if(this.Un.Xn&&w&&(this.n$&&(X.clearTimeout(this.n$),this.n$=void 0),this.t$()?(this.l$(),this.RR.sV(x.FRAMEBUFFER,this.Qr.tz?this.$E[0]:null)):this.n$=X.setTimeout(this.r$,500)),this.j(),this.jr(),this._n&&this.Mn(this._n),this.Qr.tz){const E=this.RR.gl2.ctx;E.bindFramebuffer(E.READ_FRAMEBUFFER,this.$E[0]),E.bindFramebuffer(E.DRAW_FRAMEBUFFER,this.$E[1]),E.clearBufferfv(E.COLOR,0,[1,1,1,1]),E.blitFramebuffer(0,0,this.X.x*this.RR.$z(),this.X.y*this.RR.$z(),0,0,this.X.x*this.RR.$z(),this.X.y*this.RR.$z(),x.COLOR_BUFFER_BIT,x.LINEAR)}else x.bindTexture(x.TEXTURE_2D,this.NE),x.copyTexImage2D(x.TEXTURE_2D,0,x.RGBA,0,0,this.X.x*this.RR.$z(),this.X.y*this.RR.$z(),0),x.bindTexture(x.TEXTURE_2D,null);return this.RR.sV(x.FRAMEBUFFER,null),this.Qr.nz(),this.HH=!1,this.$H=A,this},this.pn=()=>{if(this.u$.mode==="use-window"){const A=X.devicePixelRatio||1;this.RR.dO(A)}const x=this.X;if(x.x===0||x.y===0)return this;this.oo.q(x);for(const A of this.tn.values())A.Ps();return this.j(),this},this.c$=1,this.Qr=t,this.Qr.KE){this.d$=X.document.createElement("canvas"),this.d$.style.width="100%",this.d$.style.height="100%",this.d$.style.display="block",this.d$.style.boxSizing="content-box",this.d$.style.position="absolute";const x=this.d$.getContext("2d",{willReadFrequently:!1,alpha:!0,desynchronized:!1});if(!x)throw new Le("No Canvas context available.");this.GE=x,this.Gr.appendChild(this.d$)}this.Qr.Az(this);const n={antialias:e?e.antialias:void 0,lineAntialias:!e||(e.lineAntiAlias===!0||e.lineAntiAlias===!1?e.lineAntiAlias:e.antialias!==!1)};let o;if(this.Qr.tz&&t.gl2&&(o=new s(this,this.Un,{type:"webgl2",ctx:t.gl2.ctx,antialias:n.antialias,lineAntialias:n.lineAntialias},this.qi.isDark)),o||this.Qr.tz||(o=new s(this,this.Un,{type:"webgl1",ctx:t.gl,antialias:n.antialias,lineAntialias:n.lineAntialias},this.qi.isDark)),!o)throw new Le("No WebGL context available");if(this.RR=o,typeof(e==null?void 0:e.devicePixelRatio)=="number")this.u$={mode:"fixed",value:e.devicePixelRatio},this.RR.dO(e.devicePixelRatio);else{const x=X.document.head.querySelector('meta[name="viewport"]'),A=e.devicePixelRatio===!0||(x==null?void 0:x.content.includes("width=device-width")),v=X.devicePixelRatio||1;this.u$=A?{mode:"use-window"}:{mode:"fixed",value:v},this.RR.dO(v)}const h=e?e.width:void 0,a=e?e.height:void 0;this.ho=this.f$(h),this.no=this.f$(a),this.A$(this.ho,this.no),this.CU=this.FI("engine offscreen",1e6),this.g$=this.FI("engine bg",0);const l=typeof this.qi.lcjsBackgroundFillStyle=="function"?this.qi.lcjsBackgroundFillStyle(this.Un.$s):this.qi.lcjsBackgroundFillStyle;this.oo=this.g$.ke(this.dt).Ce(l).we(this.qi.lcjsBackgroundStrokeStyle).setMouseInteractions(!1).Fe({x:0,y:0});const u=this.FI("engine effects",200001).kY(this.qi.effect);this.es=u;const c=this.Qr.tz,d=this.oi();c&&(this.$E=[o.vV(),o.vV()]);const f=this.RR.gl;c&&(this.XH=f.createRenderbuffer(),this.jH=f.createRenderbuffer()),this.NE=f.createTexture();const g=d.x*this.RR.$z(),y=d.y*this.RR.$z();if(c){f.bindRenderbuffer(f.RENDERBUFFER,this.XH);const x=this.RR.gl2.ctx;this.ZH=this.Qr.PE&&e.antialias!==!1?x.getParameter(x.MAX_SAMPLES):0,x.renderbufferStorageMultisample(x.RENDERBUFFER,this.ZH,x.RGBA8,g,y),f.bindRenderbuffer(f.RENDERBUFFER,this.jH),f.renderbufferStorage(f.RENDERBUFFER,f.DEPTH_COMPONENT16,g,y),x.renderbufferStorageMultisample(x.RENDERBUFFER,this.ZH,x.DEPTH_COMPONENT16,g,y)}c&&(this.RR.sV(f.FRAMEBUFFER,this.$E[0]),f.framebufferRenderbuffer(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.RENDERBUFFER,this.XH),f.framebufferRenderbuffer(f.FRAMEBUFFER,f.DEPTH_ATTACHMENT,f.RENDERBUFFER,this.jH)),f.bindTexture(f.TEXTURE_2D,this.NE),f.texImage2D(f.TEXTURE_2D,0,f.RGBA,g,y,0,f.RGBA,f.UNSIGNED_BYTE,null),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),c&&(this.RR.sV(f.FRAMEBUFFER,this.$E[1]),f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,this.NE,0)),this.RR.sV(f.FRAMEBUFFER,null),this.fn(),this.jr(),this.hm=kx(this),this.rm={qi:this.qi,ls:this.ls,dt:this.dt,Ss:x=>this.Ss(x),On:()=>this.On(),cB:x=>this.cB(x),Un:this.Un,Nn:x=>this.Nn(x),es:this.es,Po:x=>this.Po(x),Do:x=>this.Do(x),Ig:{Fg:(x,A,v)=>this.RR.Vh(A.family).QR(x,A,v,this.qi.isDark)}};const p=()=>{this.W()};X.addEventListener("unload",p),this.an.push(()=>{X.removeEventListener("unload",p)})}get m$(){return this.tn}Jr(t,e){let i=this.qH.get(t);if(!i){const n=this.RR.pO(t),o=new Set,h=u=>{o.add(u)},a=u=>{o.delete(u)&&o.size===0&&(n.unbindResources(),this.qH.delete(t))},l=[];i={imageTexture:n,instances:o,handleNewInstance:h,handleInstanceDisposed:a,sharedEngineReference:{dB:()=>n.Dz,fB:u=>{n.Dz?u():l.push(u)}}},this.qH.set(t,i),n.jR(this),n.Oz(()=>{l.forEach(u=>{u()}),l.length=0})}const s=new lS(t,i.handleNewInstance,i.handleInstanceDisposed,e);return i.handleNewInstance(s),s}cB(t){const e=Array.from(this.qH.values()).find(i=>i.instances.has(t));if(!e)throw qs(0,()=>new Error("LightningChart JS error, attempted to use Icon that is disposed. Please check that you are not disposing an Icon that is still in use, or attempting to use a previously disposed Icon!"));return e.sharedEngineReference}wn(t,e){var i;const s=(i=this.i$)===null||i===void 0?void 0:i.o$;if(!s)return;const n=this.Pe(e.x,e.y),o=Math.round(n.x*this.RR.$z()),h=Math.round(n.y*this.RR.$z());return[[-1,-1],[-1,0],[-1,1],[0,1],[1,1],[1,0],[1,-1],[0,-1],[0,0]].map(a=>this.y$(s,o+a[0]/s.p$,h+a[1]/s.p$)).reduce((a,l)=>{if(l===void 0)return a||void 0;const u=1e6*l.layerIndex+l.entityIndex;return!a||u>a.zIndexForComparison?{zIndexForComparison:u,entity:l.entity,collectionMember:l.collectionMember}:a},void 0)}y$(t,e,i){const s=Math.round(e*t.p$),n=Math.round(i*t.p$);if(s<0||s>=t.X.x||n<0||n>=t.X.y)return;const o=4*(s+n*t.X.x),h=t.S$[o+0],a=t.S$[o+1],l=t.S$[o+2],u=t.S$[o+3];return h!==void 0&&a!==void 0&&l!==void 0&&u!==void 0?this.v$(h,a,l,u):void 0}Hr(t,e,i){const s=this.RR.gl;this.Qr.tz?(this.RR.sV(s.FRAMEBUFFER,this.$E[1]),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,this.NE,0)):this.RR.sV(s.FRAMEBUFFER,null);const n=this.OE(),o=n.x,h=n.y,a=new Uint8Array(o*h*4);this.Qr.tz||this.Sn(),s.readPixels(0,0,o,h,s.RGBA,s.UNSIGNED_BYTE,a);const l=new ImageData(new Uint8ClampedArray(a),o,h),u=document.createElement("canvas"),c=u.getContext("2d");if(!c)throw new Error("Failed to create 2D context for saving image.");u.width=o,u.height=h,c.putImageData(l,0,0),c.translate(0,h),c.scale(1,-1),c.drawImage(u,0,0),this.Qr.tz&&(this.RR.sV(s.FRAMEBUFFER,this.$E[0]),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.RENDERBUFFER,this.XH),this.RR.sV(s.FRAMEBUFFER,this.$E[1]),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,this.NE,0)),this.RR.sV(s.FRAMEBUFFER,null);const d=u.toDataURL(t,e);return i?d:(f=>{const g=f.split(",")[0].split(":")[1].split(";")[0],y=X.atob(f.split(",")[1]),p=new Uint8Array(y.length);for(let x=0;x<y.length;x+=1)p[x]=y.charCodeAt(x);return new X.Blob([p.buffer],{type:g})})(d)}$r(t,e,i=!1){this.fn(N(Math.round(t),Math.round(e))),this.yn();const s=this.RR.gl.drawingBufferWidth,n=this.RR.gl.drawingBufferHeight,o=new Uint8Array(s*n*4);if(this.RR.gl.readPixels(0,0,s,n,this.RR.gl.RGBA,this.RR.gl.UNSIGNED_BYTE,o),!i){const h=n/2|0,a=4*s,l=new Uint8Array(4*s);for(let u=0;u<h;u+=1){const c=u*a,d=(n-u-1)*a;l.set(o.subarray(c,c+a)),o.copyWithin(c,d,d+a),o.set(l,d)}}return this.en={x:0,y:e},o}mL(t){return this.ho!==void 0?this.ho[0]=t:this.ho=[t,void 0],this.Gr.style.minWidth=`${this.ho[0]}px`,this.fn(),this}pL(t){return this.ho!==void 0?this.ho[1]=t:this.ho=[void 0,t],this.Gr.style.maxWidth=`${this.ho[1]}px`,this.fn(),this}vL(t){return this.no!==void 0?this.no[0]=t:this.no=[t,void 0],this.Gr.style.minHeight=`${this.no[0]}px`,this.fn(),this}xL(t){return this.no!==void 0?this.no[1]=t:this.no=[void 0,t],this.Gr.style.maxHeight=`${this.no[1]}px`,this.fn(),this}A$(t,e){return this.ho=t,this.no=e,this.Gr.style.minWidth=`${this.ho[0]}px`,this.Gr.style.maxWidth=`${this.ho[1]}px`,this.Gr.style.minHeight=`${this.no[0]}px`,this.Gr.style.maxHeight=`${this.no[1]}px`,this.fn(),this}zE(t){return this.Qg!==t&&(this.D.emit("inViewChange",t),this.Qg=t),this}EE(){return this.Qg}gz(t){this.QH=t}fz(){return this.QH}FI(t,e=this.do()){const i=this.co(e);if(i){if(qs(0,()=>{}),!(i instanceof Jf))throw new Error("Unexpected Engine Layer error");return i}return this.vn(new Jf(this,e,t))}BI(t,e,i){const s=this.co(e);if(s){if(qs(0,()=>{}),!(s instanceof Zf))throw new Error("Unexpected Engine Layer error");return s}return this.vn(new Zf(this,e,t,i))}oi(){return this.X}OE(){const t=this.RR.$z();return{x:Math.round(this.X.x*t),y:Math.round(this.X.y*t)}}f$(t){return t instanceof Array||(t=[t,t]),t}b$(){return this.Qr.WE}JH(){const t=this.RR.gl;return t&&"resize"in t}l$(){var t;const e=this.RR.gl,i=X.performance.now(),s=this.On(),n=this.Un.$n,o={x:Math.ceil(this.X.x*this.RR.$z()*n),y:Math.ceil(this.X.y*this.RR.$z()*n)};this.i$||(this.i$={p$:n,x$:o,s$:[],o$:void 0});let h=this.i$.s$.find(d=>!d.h$),a=!1;h||(a=!0,h={h$:!1,X:o,PO:e.createTexture(),M$:this.RR.vV(),jH:this.RR.bV(),_$:new Uint8Array,e$:void 0},this.i$.s$.push(h));const l=h;(a||l.X.x!==o.x||l.X.y!==o.y)&&(e.bindTexture(e.TEXTURE_2D,l.PO),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,o.x,o.y,0,e.RGBA,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),this.RR.sV(e.FRAMEBUFFER,l.M$),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,l.PO,0),e.bindRenderbuffer(e.RENDERBUFFER,l.jH),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,o.x,o.y),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,l.jH),l._$=new Uint8Array(o.x*o.y*4),l.X=o),l.h$=!0,l.e$=i,this.RR.sV(e.FRAMEBUFFER,l.M$),e.clearDepth(1),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),e.disable(e.BLEND),e.resize&&e.resize(o.x,o.y),this.RR.eV(0,0,o.x,o.y);for(const d of this.tn.values())d.zL(1,n);this.RR.sV(e.FRAMEBUFFER,null),e.bindTexture(e.TEXTURE_2D,null),e.bindRenderbuffer(e.RENDERBUFFER,null),e.enable(e.BLEND);const u=(t=this.RR.gl2)===null||t===void 0?void 0:t.ctx,c=()=>{if(this.i$){const d=this.i$.o$;if(d&&d.a$>i)return;this.i$.o$={a$:i,p$:n,X:o,S$:l._$,w$:s}}};u?this.RR.TO(u,l.M$,0,0,o.x,o.y,e.RGBA,e.UNSIGNED_BYTE,l._$).then(()=>{this.$i||(l.h$=!1,c())}).catch(d=>{this.$i||(l.h$=!1,X.console.warn(`LightningChart JS mouse picking failed unexpectedly. This could mean that user interactions on charts are compromised.
Please report this issue to https://lightningchart.com/js-charts/docs/contact`))}):(this.RR.FO(l.M$,0,0,o.x,o.y,e.RGBA,e.UNSIGNED_BYTE,l._$),l.h$=!1,c())}fn(t){if(this.u$.mode==="use-window"){const n=X.devicePixelRatio||1;this.RR.dO(n)}const e=this.X.x,i=this.X.y,s=t||{x:this.Gr.offsetWidth,y:this.Gr.offsetHeight};if(s.x!==0&&s.y!==0&&(s.x!==e||s.y!==i)){this.X=s,this.dt.x.J(0,s.x).q(s.x),this.dt.y.J(0,s.y).q(s.y);const n=s.x*this.RR.$z(),o=s.y*this.RR.$z(),h=this.RR.gl;this.Qr.KE&&this.GE&&(this.GE.canvas.width=n,this.GE.canvas.height=o);const a=this.Qr.tz;if(this.NE&&(h.bindTexture(h.TEXTURE_2D,this.NE),h.texImage2D(h.TEXTURE_2D,0,h.RGBA,n,o,0,h.RGBA,h.UNSIGNED_BYTE,null)),a){const l=this.RR.gl2.ctx;this.XH&&(h.bindRenderbuffer(h.RENDERBUFFER,this.XH),l.renderbufferStorageMultisample(l.RENDERBUFFER,this.ZH,l.RGBA8,n,o)),this.jH&&(h.bindRenderbuffer(h.RENDERBUFFER,this.jH),h.renderbufferStorage(h.RENDERBUFFER,h.DEPTH_COMPONENT16,n,o),l.renderbufferStorageMultisample(l.RENDERBUFFER,this.ZH,l.DEPTH_COMPONENT16,n,o))}h.bindRenderbuffer(h.RENDERBUFFER,null),this.D.emit("resize",[this.X.x,this.X.y])}}W(){var t;this.$i||(super.W(),this.n$&&(X.clearTimeout(this.n$),this.n$=void 0),Array.from(this.RR.bE.entries()).forEach(([e,i])=>{i.VR(!1),this.RR.bE.delete(e)}),Array.from(this.RR.wV.values()).forEach(e=>{e.unbindResources()}),this.RR.wV.clear(),this.RR._V.kz(),this.RR.aO.W(),this.RR.yV(this.RR.lO),this.RR.yV(this.RR.uO),this.RR.hO.forEach((e,i)=>{this.RR.gl.deleteBuffer(i)}),this.RR.hO.clear(),this.RR.MO&&(this.RR.yV(this.RR.MO.buffer),this.RR.MO=void 0),this.RR.MV(this.$E[0]),this.RR.MV(this.$E[1]),this.RR.xV(this.XH),this.RR.OR(this.NE),this.RR.xV(this.jH),this.i$&&(this.i$.s$.forEach(e=>{this.RR.xV(e.jH),this.RR.MV(e.M$),this.RR.OR(e.PO)}),this.i$=void 0),this.RR.iO.forEach(e=>this.RR.yV(e)),this.qH.clear(),this.Qr.mz(this),this.d$&&((t=this.d$.parentElement)===null||t===void 0||t.removeChild(this.d$),this.d$=void 0),this.GE&&(this.GE=void 0),this.RR.gl=void 0)}wY(){const t=this.c$;return t>4294967295&&(console.warn(`LightningChart JS picking ID overflow.
This is an unexpected error that could compromise user interactions on the chart.
Please report the issue to https://lightningchart.com/js-charts/docs/contact!`),this.c$=1),this.c$+=1,t}CY(t){let e=t;const i=Math.floor(e/16777216);e-=16777216*i;const s=Math.floor(e/65536);e-=65536*s;const n=Math.floor(e/256);return e-=256*n,D(i,s,n,e)}v$(t,e,i,s){if(t===0&&e===0&&i===0&&s===0)return;const n=16777216*t+65536*e+256*i+s;for(const o of this.m$.values()){const h=o._Y(n);if(h)return{entity:h.entity,collectionMember:h.collectionMember,entityIndex:h.index,layerIndex:o.bn()}}}}var ma=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Eu={exports:{}};(function(r,t){function e(m,S){if(!m)throw new Error(S||"Assertion failed")}function i(m,S){m.super_=S;var b=function(){};b.prototype=S.prototype,m.prototype=new b,m.prototype.constructor=m}function s(m,S,b){if(s.isBN(m))return m;this.negative=0,this.words=null,this.length=0,this.red=null,m!==null&&(S!=="le"&&S!=="be"||(b=S,S=10),this.Vz(m||0,S||10,b||"be"))}var n;typeof Eu=="object"?Eu.exports=s:t.BN=s,s.BN=s,s.wordSize=26;try{n=(void 0).Buffer}catch{}function o(m,S,b){for(var M=0,R=Math.min(m.length,b),T=0,z=S;z<R;z++){var P,_=m.charCodeAt(z)-48;M<<=4,M|=P=_>=49&&_<=54?_-49+10:_>=17&&_<=22?_-17+10:_,T|=P}return e(!(240&T),"Invalid character in "+m),M}function h(m,S,b,M){for(var R=0,T=0,z=Math.min(m.length,b),P=S;P<z;P++){var _=m.charCodeAt(P)-48;R*=M,T=_>=49?_-49+10:_>=17?_-17+10:_,e(_>=0&&T<M,"Invalid character"),R+=T}return R}function a(m,S){m.words=S.words,m.length=S.length,m.negative=S.negative,m.red=S.red}if(s.isBN=function(m){return m instanceof s||m!==null&&typeof m=="object"&&m.constructor.wordSize===s.wordSize&&Array.isArray(m.words)},s.max=function(m,S){return m.cmp(S)>0?m:S},s.min=function(m,S){return m.cmp(S)<0?m:S},s.prototype.Vz=function(m,S,b){if(typeof m=="number")return this.C$(m,S,b);if(typeof m=="object")return this.k$(m,S,b);S==="hex"&&(S=16),e(S===(0|S)&&S>=2&&S<=36);var M=0;(m=m.toString().replace(/\s+/g,""))[0]==="-"&&M++,S===16?this.T$(m,M):this.F$(m,S,M),m[0]==="-"&&(this.negative=1),this.I$(),b==="le"&&this.k$(this.toArray(),S,b)},s.prototype.C$=function(m,S,b){m<0&&(this.negative=1,m=-m),m<67108864?(this.words=[67108863&m],this.length=1):m<4503599627370496?(this.words=[67108863&m,m/67108864&67108863],this.length=2):(e(m<9007199254740992),this.words=[67108863&m,m/67108864&67108863,1],this.length=3),b==="le"&&this.k$(this.toArray(),S,b)},s.prototype.k$=function(m,S,b){if(e(typeof m.length=="number"),m.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(m.length/3),this.words=new Array(this.length);for(var M=0;M<this.length;M++)this.words[M]=0;var R,T,z=0;if(b==="be")for(M=m.length-1,R=0;M>=0;M-=3)T=m[M]|m[M-1]<<8|m[M-2]<<16,this.words[R]|=T<<z&67108863,this.words[R+1]=T>>>26-z&67108863,(z+=24)>=26&&(z-=26,R++);else if(b==="le")for(M=0,R=0;M<m.length;M+=3)T=m[M]|m[M+1]<<8|m[M+2]<<16,this.words[R]|=T<<z&67108863,this.words[R+1]=T>>>26-z&67108863,(z+=24)>=26&&(z-=26,R++);return this.I$()},s.prototype.T$=function(m,S){this.length=Math.ceil((m.length-S)/6),this.words=new Array(this.length);for(var b=0;b<this.length;b++)this.words[b]=0;var M,R,T=0;for(b=m.length-6,M=0;b>=S;b-=6)R=o(m,b,b+6),this.words[M]|=R<<T&67108863,this.words[M+1]|=R>>>26-T&4194303,(T+=24)>=26&&(T-=26,M++);b+6!==S&&(R=o(m,S,b+6),this.words[M]|=R<<T&67108863,this.words[M+1]|=R>>>26-T&4194303),this.I$()},s.prototype.F$=function(m,S,b){this.words=[0],this.length=1;for(var M=0,R=1;R<=67108863;R*=S)M++;M--,R=R/S|0;for(var T=m.length-b,z=T%M,P=Math.min(T,T-z)+b,_=0,V=b;V<P;V+=M)_=h(m,V,V+M,S),this.imuln(R),this.words[0]+_<67108864?this.words[0]+=_:this.P$(_);if(z!==0){var B=1;for(_=h(m,V,m.length,S),V=0;V<z;V++)B*=S;this.imuln(B),this.words[0]+_<67108864?this.words[0]+=_:this.P$(_)}},s.prototype.copy=function(m){m.words=new Array(this.length);for(var S=0;S<this.length;S++)m.words[S]=this.words[S];m.length=this.length,m.negative=this.negative,m.red=this.red},s.prototype.D$=function(m){a(m,this)},s.prototype.clone=function(){var m=new s(null);return this.copy(m),m},s.prototype.B$=function(m){for(;this.length<m;)this.words[this.length++]=0;return this},s.prototype.I$=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this.L$()},s.prototype.L$=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=l}catch{s.prototype.inspect=l}else s.prototype.inspect=l;function l(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],c=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(m,S,b){b.negative=S.negative^m.negative;var M=m.length+S.length|0;b.length=M,M=M-1|0;var R=0|m.words[0],T=0|S.words[0],z=R*T,P=67108863&z,_=z/67108864|0;b.words[0]=P;for(var V=1;V<M;V++){for(var B=_>>>26,I=67108863&_,L=Math.min(V,S.length-1),U=Math.max(0,V-m.length+1);U<=L;U++){var Y=V-U|0;B+=(z=(R=0|m.words[Y])*(T=0|S.words[U])+I)/67108864|0,I=67108863&z}b.words[V]=0|I,_=0|B}return _!==0?b.words[V]=0|_:b.length--,b.I$()}s.prototype.toString=function(m,S){var b;if(S=0|S||1,(m=m||10)===16||m==="hex"){b="";for(var M=0,R=0,T=0;T<this.length;T++){var z=this.words[T],P=(16777215&(z<<M|R)).toString(16);b=(R=z>>>24-M&16777215)!=0||T!==this.length-1?u[6-P.length]+P+b:P+b,(M+=2)>=26&&(M-=26,T--)}for(R!==0&&(b=R.toString(16)+b);b.length%S!=0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}if(m===(0|m)&&m>=2&&m<=36){var _=c[m],V=d[m];b="";var B=this.clone();for(B.negative=0;!B.isZero();){var I=B.modrn(V).toString(m);b=(B=B.idivn(V)).isZero()?I+b:u[_-I.length]+I+b}for(this.isZero()&&(b="0"+b);b.length%S!=0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}e(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var m=this.words[0];return this.length===2?m+=67108864*this.words[1]:this.length===3&&this.words[2]===1?m+=4503599627370496+67108864*this.words[1]:this.length>2&&e(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-m:m},s.prototype.toJSON=function(){return this.toString(16,2)},n&&(s.prototype.toBuffer=function(m,S){return this.toArrayLike(n,m,S)}),s.prototype.toArray=function(m,S){return this.toArrayLike(Array,m,S)},s.prototype.toArrayLike=function(m,S,b){this.I$();var M=this.byteLength(),R=b||Math.max(1,M);e(M<=R,"byte array longer than desired length"),e(R>0,"Requested array length <= 0");var T=function(z,P){return z.allocUnsafe?z.allocUnsafe(P):new z(P)}(m,R);return this["_toArrayLike"+(S==="le"?"LE":"BE")](T,M),T},s.prototype.R$=function(m,S){for(var b=0,M=0,R=0,T=0;R<this.length;R++){var z=this.words[R]<<T|M;m[b++]=255&z,b<m.length&&(m[b++]=z>>8&255),b<m.length&&(m[b++]=z>>16&255),T===6?(b<m.length&&(m[b++]=z>>24&255),M=0,T=0):(M=z>>>24,T+=2)}if(b<m.length)for(m[b++]=M;b<m.length;)m[b++]=0},s.prototype.E$=function(m,S){for(var b=m.length-1,M=0,R=0,T=0;R<this.length;R++){var z=this.words[R]<<T|M;m[b--]=255&z,b>=0&&(m[b--]=z>>8&255),b>=0&&(m[b--]=z>>16&255),T===6?(b>=0&&(m[b--]=z>>24&255),M=0,T=0):(M=z>>>24,T+=2)}if(b>=0)for(m[b--]=M;b>=0;)m[b--]=0},Math.clz32?s.prototype.z$=function(m){return 32-Math.clz32(m)}:s.prototype.z$=function(m){var S=m,b=0;return S>=4096&&(b+=13,S>>>=13),S>=64&&(b+=7,S>>>=7),S>=8&&(b+=4,S>>>=4),S>=2&&(b+=2,S>>>=2),b+S},s.prototype.V$=function(m){if(m===0)return 26;var S=m,b=0;return(8191&S)==0&&(b+=13,S>>>=13),(127&S)==0&&(b+=7,S>>>=7),(15&S)==0&&(b+=4,S>>>=4),(3&S)==0&&(b+=2,S>>>=2),(1&S)==0&&b++,b},s.prototype.bitLength=function(){var m=this.words[this.length-1],S=this.z$(m);return 26*(this.length-1)+S},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var m=0,S=0;S<this.length;S++){var b=this.V$(this.words[S]);if(m+=b,b!==26)break}return m},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(m){return this.negative!==0?this.abs().inotn(m).iaddn(1):this.clone()},s.prototype.fromTwos=function(m){return this.testn(m-1)?this.notn(m).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(m){for(;this.length<m.length;)this.words[this.length++]=0;for(var S=0;S<m.length;S++)this.words[S]=this.words[S]|m.words[S];return this.I$()},s.prototype.ior=function(m){return e((this.negative|m.negative)==0),this.iuor(m)},s.prototype.or=function(m){return this.length>m.length?this.clone().ior(m):m.clone().ior(this)},s.prototype.uor=function(m){return this.length>m.length?this.clone().iuor(m):m.clone().iuor(this)},s.prototype.iuand=function(m){var S;S=this.length>m.length?m:this;for(var b=0;b<S.length;b++)this.words[b]=this.words[b]&m.words[b];return this.length=S.length,this.I$()},s.prototype.iand=function(m){return e((this.negative|m.negative)==0),this.iuand(m)},s.prototype.and=function(m){return this.length>m.length?this.clone().iand(m):m.clone().iand(this)},s.prototype.uand=function(m){return this.length>m.length?this.clone().iuand(m):m.clone().iuand(this)},s.prototype.iuxor=function(m){var S,b;this.length>m.length?(S=this,b=m):(S=m,b=this);for(var M=0;M<b.length;M++)this.words[M]=S.words[M]^b.words[M];if(this!==S)for(;M<S.length;M++)this.words[M]=S.words[M];return this.length=S.length,this.I$()},s.prototype.ixor=function(m){return e((this.negative|m.negative)==0),this.iuxor(m)},s.prototype.xor=function(m){return this.length>m.length?this.clone().ixor(m):m.clone().ixor(this)},s.prototype.uxor=function(m){return this.length>m.length?this.clone().iuxor(m):m.clone().iuxor(this)},s.prototype.inotn=function(m){e(typeof m=="number"&&m>=0);var S=0|Math.ceil(m/26),b=m%26;this.B$(S),b>0&&S--;for(var M=0;M<S;M++)this.words[M]=67108863&~this.words[M];return b>0&&(this.words[M]=~this.words[M]&67108863>>26-b),this.I$()},s.prototype.notn=function(m){return this.clone().inotn(m)},s.prototype.setn=function(m,S){e(typeof m=="number"&&m>=0);var b=m/26|0,M=m%26;return this.B$(b+1),this.words[b]=S?this.words[b]|1<<M:this.words[b]&~(1<<M),this.I$()},s.prototype.iadd=function(m){var S,b,M;if(this.negative!==0&&m.negative===0)return this.negative=0,S=this.isub(m),this.negative^=1,this.L$();if(this.negative===0&&m.negative!==0)return m.negative=0,S=this.isub(m),m.negative=1,S.L$();this.length>m.length?(b=this,M=m):(b=m,M=this);for(var R=0,T=0;T<M.length;T++)S=(0|b.words[T])+(0|M.words[T])+R,this.words[T]=67108863&S,R=S>>>26;for(;R!==0&&T<b.length;T++)S=(0|b.words[T])+R,this.words[T]=67108863&S,R=S>>>26;if(this.length=b.length,R!==0)this.words[this.length]=R,this.length++;else if(b!==this)for(;T<b.length;T++)this.words[T]=b.words[T];return this},s.prototype.add=function(m){var S;return m.negative!==0&&this.negative===0?(m.negative=0,S=this.sub(m),m.negative^=1,S):m.negative===0&&this.negative!==0?(this.negative=0,S=m.sub(this),this.negative=1,S):this.length>m.length?this.clone().iadd(m):m.clone().iadd(this)},s.prototype.isub=function(m){if(m.negative!==0){m.negative=0;var S=this.iadd(m);return m.negative=1,S.L$()}if(this.negative!==0)return this.negative=0,this.iadd(m),this.negative=1,this.L$();var b,M,R=this.cmp(m);if(R===0)return this.negative=0,this.length=1,this.words[0]=0,this;R>0?(b=this,M=m):(b=m,M=this);for(var T=0,z=0;z<M.length;z++)T=(S=(0|b.words[z])-(0|M.words[z])+T)>>26,this.words[z]=67108863&S;for(;T!==0&&z<b.length;z++)T=(S=(0|b.words[z])+T)>>26,this.words[z]=67108863&S;if(T===0&&z<b.length&&b!==this)for(;z<b.length;z++)this.words[z]=b.words[z];return this.length=Math.max(this.length,z),b!==this&&(this.negative=1),this.I$()},s.prototype.sub=function(m){return this.clone().isub(m)};var g=function(m,S,b){var M,R,T,z=m.words,P=S.words,_=b.words,V=0,B=0|z[0],I=8191&B,L=B>>>13,U=0|z[1],Y=8191&U,O=U>>>13,j=0|z[2],$=8191&j,Z=j>>>13,Q=0|z[3],ct=8191&Q,et=Q>>>13,mt=0|z[4],xt=8191&mt,Ct=mt>>>13,Pt=0|z[5],dt=8191&Pt,ut=Pt>>>13,Ys=0|z[6],ye=8191&Ys,te=Ys>>>13,vr=0|z[7],Pe=8191&vr,ke=vr>>>13,Ws=0|z[8],Yt=8191&Ws,xe=Ws>>>13,si=0|z[9],_e=8191&si,Oe=si>>>13,xs=0|P[0],me=8191&xs,de=xs>>>13,_n=0|P[1],be=8191&_n,Te=_n>>>13,Et=0|P[2],Lt=8191&Et,at=Et>>>13,zt=0|P[3],lt=8191&zt,At=zt>>>13,Wt=0|P[4],ee=8191&Wt,Jt=Wt>>>13,sn=0|P[5],Ce=8191&sn,ne=sn>>>13,Nn=0|P[6],Ye=8191&Nn,Me=Nn>>>13,Mt=0|P[7],Dt=8191&Mt,ie=Mt>>>13,tr=0|P[8],Ie=8191&tr,$t=tr>>>13,ci=0|P[9],pe=8191&ci,Se=ci>>>13;b.negative=m.negative^S.negative,b.length=19;var Ai=(V+(M=Math.imul(I,me))|0)+((8191&(R=(R=Math.imul(I,de))+Math.imul(L,me)|0))<<13)|0;V=((T=Math.imul(L,de))+(R>>>13)|0)+(Ai>>>26)|0,Ai&=67108863,M=Math.imul(Y,me),R=(R=Math.imul(Y,de))+Math.imul(O,me)|0,T=Math.imul(O,de);var Di=(V+(M=M+Math.imul(I,be)|0)|0)+((8191&(R=(R=R+Math.imul(I,Te)|0)+Math.imul(L,be)|0))<<13)|0;V=((T=T+Math.imul(L,Te)|0)+(R>>>13)|0)+(Di>>>26)|0,Di&=67108863,M=Math.imul($,me),R=(R=Math.imul($,de))+Math.imul(Z,me)|0,T=Math.imul(Z,de),M=M+Math.imul(Y,be)|0,R=(R=R+Math.imul(Y,Te)|0)+Math.imul(O,be)|0,T=T+Math.imul(O,Te)|0;var Ss=(V+(M=M+Math.imul(I,Lt)|0)|0)+((8191&(R=(R=R+Math.imul(I,at)|0)+Math.imul(L,Lt)|0))<<13)|0;V=((T=T+Math.imul(L,at)|0)+(R>>>13)|0)+(Ss>>>26)|0,Ss&=67108863,M=Math.imul(ct,me),R=(R=Math.imul(ct,de))+Math.imul(et,me)|0,T=Math.imul(et,de),M=M+Math.imul($,be)|0,R=(R=R+Math.imul($,Te)|0)+Math.imul(Z,be)|0,T=T+Math.imul(Z,Te)|0,M=M+Math.imul(Y,Lt)|0,R=(R=R+Math.imul(Y,at)|0)+Math.imul(O,Lt)|0,T=T+Math.imul(O,at)|0;var Pi=(V+(M=M+Math.imul(I,lt)|0)|0)+((8191&(R=(R=R+Math.imul(I,At)|0)+Math.imul(L,lt)|0))<<13)|0;V=((T=T+Math.imul(L,At)|0)+(R>>>13)|0)+(Pi>>>26)|0,Pi&=67108863,M=Math.imul(xt,me),R=(R=Math.imul(xt,de))+Math.imul(Ct,me)|0,T=Math.imul(Ct,de),M=M+Math.imul(ct,be)|0,R=(R=R+Math.imul(ct,Te)|0)+Math.imul(et,be)|0,T=T+Math.imul(et,Te)|0,M=M+Math.imul($,Lt)|0,R=(R=R+Math.imul($,at)|0)+Math.imul(Z,Lt)|0,T=T+Math.imul(Z,at)|0,M=M+Math.imul(Y,lt)|0,R=(R=R+Math.imul(Y,At)|0)+Math.imul(O,lt)|0,T=T+Math.imul(O,At)|0;var nt=(V+(M=M+Math.imul(I,ee)|0)|0)+((8191&(R=(R=R+Math.imul(I,Jt)|0)+Math.imul(L,ee)|0))<<13)|0;V=((T=T+Math.imul(L,Jt)|0)+(R>>>13)|0)+(nt>>>26)|0,nt&=67108863,M=Math.imul(dt,me),R=(R=Math.imul(dt,de))+Math.imul(ut,me)|0,T=Math.imul(ut,de),M=M+Math.imul(xt,be)|0,R=(R=R+Math.imul(xt,Te)|0)+Math.imul(Ct,be)|0,T=T+Math.imul(Ct,Te)|0,M=M+Math.imul(ct,Lt)|0,R=(R=R+Math.imul(ct,at)|0)+Math.imul(et,Lt)|0,T=T+Math.imul(et,at)|0,M=M+Math.imul($,lt)|0,R=(R=R+Math.imul($,At)|0)+Math.imul(Z,lt)|0,T=T+Math.imul(Z,At)|0,M=M+Math.imul(Y,ee)|0,R=(R=R+Math.imul(Y,Jt)|0)+Math.imul(O,ee)|0,T=T+Math.imul(O,Jt)|0;var se=(V+(M=M+Math.imul(I,Ce)|0)|0)+((8191&(R=(R=R+Math.imul(I,ne)|0)+Math.imul(L,Ce)|0))<<13)|0;V=((T=T+Math.imul(L,ne)|0)+(R>>>13)|0)+(se>>>26)|0,se&=67108863,M=Math.imul(ye,me),R=(R=Math.imul(ye,de))+Math.imul(te,me)|0,T=Math.imul(te,de),M=M+Math.imul(dt,be)|0,R=(R=R+Math.imul(dt,Te)|0)+Math.imul(ut,be)|0,T=T+Math.imul(ut,Te)|0,M=M+Math.imul(xt,Lt)|0,R=(R=R+Math.imul(xt,at)|0)+Math.imul(Ct,Lt)|0,T=T+Math.imul(Ct,at)|0,M=M+Math.imul(ct,lt)|0,R=(R=R+Math.imul(ct,At)|0)+Math.imul(et,lt)|0,T=T+Math.imul(et,At)|0,M=M+Math.imul($,ee)|0,R=(R=R+Math.imul($,Jt)|0)+Math.imul(Z,ee)|0,T=T+Math.imul(Z,Jt)|0,M=M+Math.imul(Y,Ce)|0,R=(R=R+Math.imul(Y,ne)|0)+Math.imul(O,Ce)|0,T=T+Math.imul(O,ne)|0;var Ps=(V+(M=M+Math.imul(I,Ye)|0)|0)+((8191&(R=(R=R+Math.imul(I,Me)|0)+Math.imul(L,Ye)|0))<<13)|0;V=((T=T+Math.imul(L,Me)|0)+(R>>>13)|0)+(Ps>>>26)|0,Ps&=67108863,M=Math.imul(Pe,me),R=(R=Math.imul(Pe,de))+Math.imul(ke,me)|0,T=Math.imul(ke,de),M=M+Math.imul(ye,be)|0,R=(R=R+Math.imul(ye,Te)|0)+Math.imul(te,be)|0,T=T+Math.imul(te,Te)|0,M=M+Math.imul(dt,Lt)|0,R=(R=R+Math.imul(dt,at)|0)+Math.imul(ut,Lt)|0,T=T+Math.imul(ut,at)|0,M=M+Math.imul(xt,lt)|0,R=(R=R+Math.imul(xt,At)|0)+Math.imul(Ct,lt)|0,T=T+Math.imul(Ct,At)|0,M=M+Math.imul(ct,ee)|0,R=(R=R+Math.imul(ct,Jt)|0)+Math.imul(et,ee)|0,T=T+Math.imul(et,Jt)|0,M=M+Math.imul($,Ce)|0,R=(R=R+Math.imul($,ne)|0)+Math.imul(Z,Ce)|0,T=T+Math.imul(Z,ne)|0,M=M+Math.imul(Y,Ye)|0,R=(R=R+Math.imul(Y,Me)|0)+Math.imul(O,Ye)|0,T=T+Math.imul(O,Me)|0;var ri=(V+(M=M+Math.imul(I,Dt)|0)|0)+((8191&(R=(R=R+Math.imul(I,ie)|0)+Math.imul(L,Dt)|0))<<13)|0;V=((T=T+Math.imul(L,ie)|0)+(R>>>13)|0)+(ri>>>26)|0,ri&=67108863,M=Math.imul(Yt,me),R=(R=Math.imul(Yt,de))+Math.imul(xe,me)|0,T=Math.imul(xe,de),M=M+Math.imul(Pe,be)|0,R=(R=R+Math.imul(Pe,Te)|0)+Math.imul(ke,be)|0,T=T+Math.imul(ke,Te)|0,M=M+Math.imul(ye,Lt)|0,R=(R=R+Math.imul(ye,at)|0)+Math.imul(te,Lt)|0,T=T+Math.imul(te,at)|0,M=M+Math.imul(dt,lt)|0,R=(R=R+Math.imul(dt,At)|0)+Math.imul(ut,lt)|0,T=T+Math.imul(ut,At)|0,M=M+Math.imul(xt,ee)|0,R=(R=R+Math.imul(xt,Jt)|0)+Math.imul(Ct,ee)|0,T=T+Math.imul(Ct,Jt)|0,M=M+Math.imul(ct,Ce)|0,R=(R=R+Math.imul(ct,ne)|0)+Math.imul(et,Ce)|0,T=T+Math.imul(et,ne)|0,M=M+Math.imul($,Ye)|0,R=(R=R+Math.imul($,Me)|0)+Math.imul(Z,Ye)|0,T=T+Math.imul(Z,Me)|0,M=M+Math.imul(Y,Dt)|0,R=(R=R+Math.imul(Y,ie)|0)+Math.imul(O,Dt)|0,T=T+Math.imul(O,ie)|0;var Oi=(V+(M=M+Math.imul(I,Ie)|0)|0)+((8191&(R=(R=R+Math.imul(I,$t)|0)+Math.imul(L,Ie)|0))<<13)|0;V=((T=T+Math.imul(L,$t)|0)+(R>>>13)|0)+(Oi>>>26)|0,Oi&=67108863,M=Math.imul(_e,me),R=(R=Math.imul(_e,de))+Math.imul(Oe,me)|0,T=Math.imul(Oe,de),M=M+Math.imul(Yt,be)|0,R=(R=R+Math.imul(Yt,Te)|0)+Math.imul(xe,be)|0,T=T+Math.imul(xe,Te)|0,M=M+Math.imul(Pe,Lt)|0,R=(R=R+Math.imul(Pe,at)|0)+Math.imul(ke,Lt)|0,T=T+Math.imul(ke,at)|0,M=M+Math.imul(ye,lt)|0,R=(R=R+Math.imul(ye,At)|0)+Math.imul(te,lt)|0,T=T+Math.imul(te,At)|0,M=M+Math.imul(dt,ee)|0,R=(R=R+Math.imul(dt,Jt)|0)+Math.imul(ut,ee)|0,T=T+Math.imul(ut,Jt)|0,M=M+Math.imul(xt,Ce)|0,R=(R=R+Math.imul(xt,ne)|0)+Math.imul(Ct,Ce)|0,T=T+Math.imul(Ct,ne)|0,M=M+Math.imul(ct,Ye)|0,R=(R=R+Math.imul(ct,Me)|0)+Math.imul(et,Ye)|0,T=T+Math.imul(et,Me)|0,M=M+Math.imul($,Dt)|0,R=(R=R+Math.imul($,ie)|0)+Math.imul(Z,Dt)|0,T=T+Math.imul(Z,ie)|0,M=M+Math.imul(Y,Ie)|0,R=(R=R+Math.imul(Y,$t)|0)+Math.imul(O,Ie)|0,T=T+Math.imul(O,$t)|0;var Ii=(V+(M=M+Math.imul(I,pe)|0)|0)+((8191&(R=(R=R+Math.imul(I,Se)|0)+Math.imul(L,pe)|0))<<13)|0;V=((T=T+Math.imul(L,Se)|0)+(R>>>13)|0)+(Ii>>>26)|0,Ii&=67108863,M=Math.imul(_e,be),R=(R=Math.imul(_e,Te))+Math.imul(Oe,be)|0,T=Math.imul(Oe,Te),M=M+Math.imul(Yt,Lt)|0,R=(R=R+Math.imul(Yt,at)|0)+Math.imul(xe,Lt)|0,T=T+Math.imul(xe,at)|0,M=M+Math.imul(Pe,lt)|0,R=(R=R+Math.imul(Pe,At)|0)+Math.imul(ke,lt)|0,T=T+Math.imul(ke,At)|0,M=M+Math.imul(ye,ee)|0,R=(R=R+Math.imul(ye,Jt)|0)+Math.imul(te,ee)|0,T=T+Math.imul(te,Jt)|0,M=M+Math.imul(dt,Ce)|0,R=(R=R+Math.imul(dt,ne)|0)+Math.imul(ut,Ce)|0,T=T+Math.imul(ut,ne)|0,M=M+Math.imul(xt,Ye)|0,R=(R=R+Math.imul(xt,Me)|0)+Math.imul(Ct,Ye)|0,T=T+Math.imul(Ct,Me)|0,M=M+Math.imul(ct,Dt)|0,R=(R=R+Math.imul(ct,ie)|0)+Math.imul(et,Dt)|0,T=T+Math.imul(et,ie)|0,M=M+Math.imul($,Ie)|0,R=(R=R+Math.imul($,$t)|0)+Math.imul(Z,Ie)|0,T=T+Math.imul(Z,$t)|0;var di=(V+(M=M+Math.imul(Y,pe)|0)|0)+((8191&(R=(R=R+Math.imul(Y,Se)|0)+Math.imul(O,pe)|0))<<13)|0;V=((T=T+Math.imul(O,Se)|0)+(R>>>13)|0)+(di>>>26)|0,di&=67108863,M=Math.imul(_e,Lt),R=(R=Math.imul(_e,at))+Math.imul(Oe,Lt)|0,T=Math.imul(Oe,at),M=M+Math.imul(Yt,lt)|0,R=(R=R+Math.imul(Yt,At)|0)+Math.imul(xe,lt)|0,T=T+Math.imul(xe,At)|0,M=M+Math.imul(Pe,ee)|0,R=(R=R+Math.imul(Pe,Jt)|0)+Math.imul(ke,ee)|0,T=T+Math.imul(ke,Jt)|0,M=M+Math.imul(ye,Ce)|0,R=(R=R+Math.imul(ye,ne)|0)+Math.imul(te,Ce)|0,T=T+Math.imul(te,ne)|0,M=M+Math.imul(dt,Ye)|0,R=(R=R+Math.imul(dt,Me)|0)+Math.imul(ut,Ye)|0,T=T+Math.imul(ut,Me)|0,M=M+Math.imul(xt,Dt)|0,R=(R=R+Math.imul(xt,ie)|0)+Math.imul(Ct,Dt)|0,T=T+Math.imul(Ct,ie)|0,M=M+Math.imul(ct,Ie)|0,R=(R=R+Math.imul(ct,$t)|0)+Math.imul(et,Ie)|0,T=T+Math.imul(et,$t)|0;var er=(V+(M=M+Math.imul($,pe)|0)|0)+((8191&(R=(R=R+Math.imul($,Se)|0)+Math.imul(Z,pe)|0))<<13)|0;V=((T=T+Math.imul(Z,Se)|0)+(R>>>13)|0)+(er>>>26)|0,er&=67108863,M=Math.imul(_e,lt),R=(R=Math.imul(_e,At))+Math.imul(Oe,lt)|0,T=Math.imul(Oe,At),M=M+Math.imul(Yt,ee)|0,R=(R=R+Math.imul(Yt,Jt)|0)+Math.imul(xe,ee)|0,T=T+Math.imul(xe,Jt)|0,M=M+Math.imul(Pe,Ce)|0,R=(R=R+Math.imul(Pe,ne)|0)+Math.imul(ke,Ce)|0,T=T+Math.imul(ke,ne)|0,M=M+Math.imul(ye,Ye)|0,R=(R=R+Math.imul(ye,Me)|0)+Math.imul(te,Ye)|0,T=T+Math.imul(te,Me)|0,M=M+Math.imul(dt,Dt)|0,R=(R=R+Math.imul(dt,ie)|0)+Math.imul(ut,Dt)|0,T=T+Math.imul(ut,ie)|0,M=M+Math.imul(xt,Ie)|0,R=(R=R+Math.imul(xt,$t)|0)+Math.imul(Ct,Ie)|0,T=T+Math.imul(Ct,$t)|0;var ir=(V+(M=M+Math.imul(ct,pe)|0)|0)+((8191&(R=(R=R+Math.imul(ct,Se)|0)+Math.imul(et,pe)|0))<<13)|0;V=((T=T+Math.imul(et,Se)|0)+(R>>>13)|0)+(ir>>>26)|0,ir&=67108863,M=Math.imul(_e,ee),R=(R=Math.imul(_e,Jt))+Math.imul(Oe,ee)|0,T=Math.imul(Oe,Jt),M=M+Math.imul(Yt,Ce)|0,R=(R=R+Math.imul(Yt,ne)|0)+Math.imul(xe,Ce)|0,T=T+Math.imul(xe,ne)|0,M=M+Math.imul(Pe,Ye)|0,R=(R=R+Math.imul(Pe,Me)|0)+Math.imul(ke,Ye)|0,T=T+Math.imul(ke,Me)|0,M=M+Math.imul(ye,Dt)|0,R=(R=R+Math.imul(ye,ie)|0)+Math.imul(te,Dt)|0,T=T+Math.imul(te,ie)|0,M=M+Math.imul(dt,Ie)|0,R=(R=R+Math.imul(dt,$t)|0)+Math.imul(ut,Ie)|0,T=T+Math.imul(ut,$t)|0;var Ln=(V+(M=M+Math.imul(xt,pe)|0)|0)+((8191&(R=(R=R+Math.imul(xt,Se)|0)+Math.imul(Ct,pe)|0))<<13)|0;V=((T=T+Math.imul(Ct,Se)|0)+(R>>>13)|0)+(Ln>>>26)|0,Ln&=67108863,M=Math.imul(_e,Ce),R=(R=Math.imul(_e,ne))+Math.imul(Oe,Ce)|0,T=Math.imul(Oe,ne),M=M+Math.imul(Yt,Ye)|0,R=(R=R+Math.imul(Yt,Me)|0)+Math.imul(xe,Ye)|0,T=T+Math.imul(xe,Me)|0,M=M+Math.imul(Pe,Dt)|0,R=(R=R+Math.imul(Pe,ie)|0)+Math.imul(ke,Dt)|0,T=T+Math.imul(ke,ie)|0,M=M+Math.imul(ye,Ie)|0,R=(R=R+Math.imul(ye,$t)|0)+Math.imul(te,Ie)|0,T=T+Math.imul(te,$t)|0;var rn=(V+(M=M+Math.imul(dt,pe)|0)|0)+((8191&(R=(R=R+Math.imul(dt,Se)|0)+Math.imul(ut,pe)|0))<<13)|0;V=((T=T+Math.imul(ut,Se)|0)+(R>>>13)|0)+(rn>>>26)|0,rn&=67108863,M=Math.imul(_e,Ye),R=(R=Math.imul(_e,Me))+Math.imul(Oe,Ye)|0,T=Math.imul(Oe,Me),M=M+Math.imul(Yt,Dt)|0,R=(R=R+Math.imul(Yt,ie)|0)+Math.imul(xe,Dt)|0,T=T+Math.imul(xe,ie)|0,M=M+Math.imul(Pe,Ie)|0,R=(R=R+Math.imul(Pe,$t)|0)+Math.imul(ke,Ie)|0,T=T+Math.imul(ke,$t)|0;var nn=(V+(M=M+Math.imul(ye,pe)|0)|0)+((8191&(R=(R=R+Math.imul(ye,Se)|0)+Math.imul(te,pe)|0))<<13)|0;V=((T=T+Math.imul(te,Se)|0)+(R>>>13)|0)+(nn>>>26)|0,nn&=67108863,M=Math.imul(_e,Dt),R=(R=Math.imul(_e,ie))+Math.imul(Oe,Dt)|0,T=Math.imul(Oe,ie),M=M+Math.imul(Yt,Ie)|0,R=(R=R+Math.imul(Yt,$t)|0)+Math.imul(xe,Ie)|0,T=T+Math.imul(xe,$t)|0;var Re=(V+(M=M+Math.imul(Pe,pe)|0)|0)+((8191&(R=(R=R+Math.imul(Pe,Se)|0)+Math.imul(ke,pe)|0))<<13)|0;V=((T=T+Math.imul(ke,Se)|0)+(R>>>13)|0)+(Re>>>26)|0,Re&=67108863,M=Math.imul(_e,Ie),R=(R=Math.imul(_e,$t))+Math.imul(Oe,Ie)|0,T=Math.imul(Oe,$t);var As=(V+(M=M+Math.imul(Yt,pe)|0)|0)+((8191&(R=(R=R+Math.imul(Yt,Se)|0)+Math.imul(xe,pe)|0))<<13)|0;V=((T=T+Math.imul(xe,Se)|0)+(R>>>13)|0)+(As>>>26)|0,As&=67108863;var zn=(V+(M=Math.imul(_e,pe))|0)+((8191&(R=(R=Math.imul(_e,Se))+Math.imul(Oe,pe)|0))<<13)|0;return V=((T=Math.imul(Oe,Se))+(R>>>13)|0)+(zn>>>26)|0,zn&=67108863,_[0]=Ai,_[1]=Di,_[2]=Ss,_[3]=Pi,_[4]=nt,_[5]=se,_[6]=Ps,_[7]=ri,_[8]=Oi,_[9]=Ii,_[10]=di,_[11]=er,_[12]=ir,_[13]=Ln,_[14]=rn,_[15]=nn,_[16]=Re,_[17]=As,_[18]=zn,V!==0&&(_[19]=V,b.length++),b};function y(m,S,b){b.negative=S.negative^m.negative,b.length=m.length+S.length;for(var M=0,R=0,T=0;T<b.length-1;T++){var z=R;R=0;for(var P=67108863&M,_=Math.min(T,S.length-1),V=Math.max(0,T-m.length+1);V<=_;V++){var B=T-V,I=(0|m.words[B])*(0|S.words[V]),L=67108863&I;P=67108863&(L=L+P|0),R+=(z=(z=z+(I/67108864|0)|0)+(L>>>26)|0)>>>26,z&=67108863}b.words[T]=P,M=z,z=R}return M!==0?b.words[T]=M:b.length--,b.I$()}function p(m,S,b){return y(m,S,b)}Math.imul||(g=f),s.prototype.mulTo=function(m,S){var b=this.length+m.length;return this.length===10&&m.length===10?g(this,m,S):b<63?f(this,m,S):b<1024?y(this,m,S):p(this,m,S)},s.prototype.mul=function(m){var S=new s(null);return S.words=new Array(this.length+m.length),this.mulTo(m,S)},s.prototype.mulf=function(m){var S=new s(null);return S.words=new Array(this.length+m.length),p(this,m,S)},s.prototype.imul=function(m){return this.clone().mulTo(m,this)},s.prototype.imuln=function(m){var S=m<0;S&&(m=-m),e(typeof m=="number"),e(m<67108864);for(var b=0,M=0;M<this.length;M++){var R=(0|this.words[M])*m,T=(67108863&R)+(67108863&b);b>>=26,b+=R/67108864|0,b+=T>>>26,this.words[M]=67108863&T}return b!==0&&(this.words[M]=b,this.length++),S?this.ineg():this},s.prototype.muln=function(m){return this.clone().imuln(m)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(m){var S=function(T){for(var z=new Array(T.bitLength()),P=0;P<z.length;P++){var _=P/26|0,V=P%26;z[P]=T.words[_]>>>V&1}return z}(m);if(S.length===0)return new s(1);for(var b=this,M=0;M<S.length&&S[M]===0;M++,b=b.sqr());if(++M<S.length)for(var R=b.sqr();M<S.length;M++,R=R.sqr())S[M]!==0&&(b=b.mul(R));return b},s.prototype.iushln=function(m){e(typeof m=="number"&&m>=0);var S,b=m%26,M=(m-b)/26,R=67108863>>>26-b<<26-b;if(b!==0){var T=0;for(S=0;S<this.length;S++){var z=this.words[S]&R,P=(0|this.words[S])-z<<b;this.words[S]=P|T,T=z>>>26-b}T&&(this.words[S]=T,this.length++)}if(M!==0){for(S=this.length-1;S>=0;S--)this.words[S+M]=this.words[S];for(S=0;S<M;S++)this.words[S]=0;this.length+=M}return this.I$()},s.prototype.ishln=function(m){return e(this.negative===0),this.iushln(m)},s.prototype.iushrn=function(m,S,b){var M;e(typeof m=="number"&&m>=0),M=S?(S-S%26)/26:0;var R=m%26,T=Math.min((m-R)/26,this.length),z=67108863^67108863>>>R<<R,P=b;if(M-=T,M=Math.max(0,M),P){for(var _=0;_<T;_++)P.words[_]=this.words[_];P.length=T}if(T!==0)if(this.length>T)for(this.length-=T,_=0;_<this.length;_++)this.words[_]=this.words[_+T];else this.words[0]=0,this.length=1;var V=0;for(_=this.length-1;_>=0&&(V!==0||_>=M);_--){var B=0|this.words[_];this.words[_]=V<<26-R|B>>>R,V=B&z}return P&&V!==0&&(P.words[P.length++]=V),this.length===0&&(this.words[0]=0,this.length=1),this.I$()},s.prototype.ishrn=function(m,S,b){return e(this.negative===0),this.iushrn(m,S,b)},s.prototype.shln=function(m){return this.clone().ishln(m)},s.prototype.ushln=function(m){return this.clone().iushln(m)},s.prototype.shrn=function(m){return this.clone().ishrn(m)},s.prototype.ushrn=function(m){return this.clone().iushrn(m)},s.prototype.testn=function(m){e(typeof m=="number"&&m>=0);var S=m%26,b=(m-S)/26,M=1<<S;return!(this.length<=b||!(this.words[b]&M))},s.prototype.imaskn=function(m){e(typeof m=="number"&&m>=0);var S=m%26,b=(m-S)/26;if(e(this.negative===0,"imaskn works only with positive numbers"),this.length<=b)return this;if(S!==0&&b++,this.length=Math.min(b,this.length),S!==0){var M=67108863^67108863>>>S<<S;this.words[this.length-1]&=M}return this.I$()},s.prototype.maskn=function(m){return this.clone().imaskn(m)},s.prototype.iaddn=function(m){return e(typeof m=="number"),e(m<67108864),m<0?this.isubn(-m):this.negative!==0?this.length===1&&(0|this.words[0])<=m?(this.words[0]=m-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(m),this.negative=1,this):this.P$(m)},s.prototype.P$=function(m){this.words[0]+=m;for(var S=0;S<this.length&&this.words[S]>=67108864;S++)this.words[S]-=67108864,S===this.length-1?this.words[S+1]=1:this.words[S+1]++;return this.length=Math.max(this.length,S+1),this},s.prototype.isubn=function(m){if(e(typeof m=="number"),e(m<67108864),m<0)return this.iaddn(-m);if(this.negative!==0)return this.negative=0,this.iaddn(m),this.negative=1,this;if(this.words[0]-=m,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var S=0;S<this.length&&this.words[S]<0;S++)this.words[S]+=67108864,this.words[S+1]-=1;return this.I$()},s.prototype.addn=function(m){return this.clone().iaddn(m)},s.prototype.subn=function(m){return this.clone().isubn(m)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype.O$=function(m,S,b){var M,R,T=m.length+b;this.B$(T);var z=0;for(M=0;M<m.length;M++){R=(0|this.words[M+b])+z;var P=(0|m.words[M])*S;z=((R-=67108863&P)>>26)-(P/67108864|0),this.words[M+b]=67108863&R}for(;M<this.length-b;M++)z=(R=(0|this.words[M+b])+z)>>26,this.words[M+b]=67108863&R;if(z===0)return this.I$();for(e(z===-1),z=0,M=0;M<this.length;M++)z=(R=-(0|this.words[M])+z)>>26,this.words[M]=67108863&R;return this.negative=1,this.I$()},s.prototype.N$=function(m,S){var b=(this.length,m.length),M=this.clone(),R=m,T=0|R.words[R.length-1];(b=26-this.z$(T))!=0&&(R=R.ushln(b),M.iushln(b),T=0|R.words[R.length-1]);var z,P=M.length-R.length;if(S!=="mod"){(z=new s(null)).length=P+1,z.words=new Array(z.length);for(var _=0;_<z.length;_++)z.words[_]=0}var V=M.clone().O$(R,1,P);V.negative===0&&(M=V,z&&(z.words[P]=1));for(var B=P-1;B>=0;B--){var I=67108864*(0|M.words[R.length+B])+(0|M.words[R.length+B-1]);for(I=Math.min(I/T|0,67108863),M.O$(R,I,B);M.negative!==0;)I--,M.negative=0,M.O$(R,1,B),M.isZero()||(M.negative^=1);z&&(z.words[B]=I)}return z&&z.I$(),M.I$(),S!=="div"&&b!==0&&M.iushrn(b),{div:z||null,mod:M}},s.prototype.divmod=function(m,S,b){return e(!m.isZero()),this.isZero()?{div:new s(0),mod:new s(0)}:this.negative!==0&&m.negative===0?(T=this.neg().divmod(m,S),S!=="mod"&&(M=T.div.neg()),S!=="div"&&(R=T.mod.neg(),b&&R.negative!==0&&R.iadd(m)),{div:M,mod:R}):this.negative===0&&m.negative!==0?(T=this.divmod(m.neg(),S),S!=="mod"&&(M=T.div.neg()),{div:M,mod:T.mod}):(this.negative&m.negative)!=0?(T=this.neg().divmod(m.neg(),S),S!=="div"&&(R=T.mod.neg(),b&&R.negative!==0&&R.isub(m)),{div:T.div,mod:R}):m.length>this.length||this.cmp(m)<0?{div:new s(0),mod:this}:m.length===1?S==="div"?{div:this.divn(m.words[0]),mod:null}:S==="mod"?{div:null,mod:new s(this.modrn(m.words[0]))}:{div:this.divn(m.words[0]),mod:new s(this.modrn(m.words[0]))}:this.N$(m,S);var M,R,T},s.prototype.div=function(m){return this.divmod(m,"div",!1).div},s.prototype.mod=function(m){return this.divmod(m,"mod",!1).mod},s.prototype.umod=function(m){return this.divmod(m,"mod",!0).mod},s.prototype.divRound=function(m){var S=this.divmod(m);if(S.mod.isZero())return S.div;var b=S.div.negative!==0?S.mod.isub(m):S.mod,M=m.ushrn(1),R=m.andln(1),T=b.cmp(M);return T<0||R===1&&T===0?S.div:S.div.negative!==0?S.div.isubn(1):S.div.iaddn(1)},s.prototype.modrn=function(m){var S=m<0;S&&(m=-m),e(m<=67108863);for(var b=(1<<26)%m,M=0,R=this.length-1;R>=0;R--)M=(b*M+(0|this.words[R]))%m;return S?-M:M},s.prototype.modn=function(m){return this.modrn(m)},s.prototype.idivn=function(m){var S=m<0;S&&(m=-m),e(m<=67108863);for(var b=0,M=this.length-1;M>=0;M--){var R=(0|this.words[M])+67108864*b;this.words[M]=R/m|0,b=R%m}return this.I$(),S?this.ineg():this},s.prototype.divn=function(m){return this.clone().idivn(m)},s.prototype.egcd=function(m){e(m.negative===0),e(!m.isZero());var S=this,b=m.clone();S=S.negative!==0?S.umod(m):S.clone();for(var M=new s(1),R=new s(0),T=new s(0),z=new s(1),P=0;S.isEven()&&b.isEven();)S.iushrn(1),b.iushrn(1),++P;for(var _=b.clone(),V=S.clone();!S.isZero();){for(var B=0,I=1;(S.words[0]&I)==0&&B<26;++B,I<<=1);if(B>0)for(S.iushrn(B);B-- >0;)(M.isOdd()||R.isOdd())&&(M.iadd(_),R.isub(V)),M.iushrn(1),R.iushrn(1);for(var L=0,U=1;(b.words[0]&U)==0&&L<26;++L,U<<=1);if(L>0)for(b.iushrn(L);L-- >0;)(T.isOdd()||z.isOdd())&&(T.iadd(_),z.isub(V)),T.iushrn(1),z.iushrn(1);S.cmp(b)>=0?(S.isub(b),M.isub(T),R.isub(z)):(b.isub(S),T.isub(M),z.isub(R))}return{a:T,b:z,gcd:b.iushln(P)}},s.prototype.G$=function(m){e(m.negative===0),e(!m.isZero());var S=this,b=m.clone();S=S.negative!==0?S.umod(m):S.clone();for(var M,R=new s(1),T=new s(0),z=b.clone();S.cmpn(1)>0&&b.cmpn(1)>0;){for(var P=0,_=1;(S.words[0]&_)==0&&P<26;++P,_<<=1);if(P>0)for(S.iushrn(P);P-- >0;)R.isOdd()&&R.iadd(z),R.iushrn(1);for(var V=0,B=1;(b.words[0]&B)==0&&V<26;++V,B<<=1);if(V>0)for(b.iushrn(V);V-- >0;)T.isOdd()&&T.iadd(z),T.iushrn(1);S.cmp(b)>=0?(S.isub(b),R.isub(T)):(b.isub(S),T.isub(R))}return(M=S.cmpn(1)===0?R:T).cmpn(0)<0&&M.iadd(m),M},s.prototype.gcd=function(m){if(this.isZero())return m.abs();if(m.isZero())return this.abs();var S=this.clone(),b=m.clone();S.negative=0,b.negative=0;for(var M=0;S.isEven()&&b.isEven();M++)S.iushrn(1),b.iushrn(1);for(;;){for(;S.isEven();)S.iushrn(1);for(;b.isEven();)b.iushrn(1);var R=S.cmp(b);if(R<0){var T=S;S=b,b=T}else if(R===0||b.cmpn(1)===0)break;S.isub(b)}return b.iushln(M)},s.prototype.invm=function(m){return this.egcd(m).a.umod(m)},s.prototype.isEven=function(){return(1&this.words[0])==0},s.prototype.isOdd=function(){return(1&this.words[0])==1},s.prototype.andln=function(m){return this.words[0]&m},s.prototype.bincn=function(m){e(typeof m=="number");var S=m%26,b=(m-S)/26,M=1<<S;if(this.length<=b)return this.B$(b+1),this.words[b]|=M,this;for(var R=M,T=b;R!==0&&T<this.length;T++){var z=0|this.words[T];R=(z+=R)>>>26,z&=67108863,this.words[T]=z}return R!==0&&(this.words[T]=R,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(m){var S,b=m<0;if(this.negative!==0&&!b)return-1;if(this.negative===0&&b)return 1;if(this.I$(),this.length>1)S=1;else{b&&(m=-m),e(m<=67108863,"Number is too big");var M=0|this.words[0];S=M===m?0:M<m?-1:1}return this.negative!==0?0|-S:S},s.prototype.cmp=function(m){if(this.negative!==0&&m.negative===0)return-1;if(this.negative===0&&m.negative!==0)return 1;var S=this.ucmp(m);return this.negative!==0?0|-S:S},s.prototype.ucmp=function(m){if(this.length>m.length)return 1;if(this.length<m.length)return-1;for(var S=0,b=this.length-1;b>=0;b--){var M=0|this.words[b],R=0|m.words[b];if(M!==R){M<R?S=-1:M>R&&(S=1);break}}return S},s.prototype.gtn=function(m){return this.cmpn(m)===1},s.prototype.gt=function(m){return this.cmp(m)===1},s.prototype.gten=function(m){return this.cmpn(m)>=0},s.prototype.gte=function(m){return this.cmp(m)>=0},s.prototype.ltn=function(m){return this.cmpn(m)===-1},s.prototype.lt=function(m){return this.cmp(m)===-1},s.prototype.lten=function(m){return this.cmpn(m)<=0},s.prototype.lte=function(m){return this.cmp(m)<=0},s.prototype.eqn=function(m){return this.cmpn(m)===0},s.prototype.eq=function(m){return this.cmp(m)===0},s.red=function(m){return new k(m)},s.prototype.toRed=function(m){return e(!this.red,"Already a number in reduction context"),e(this.negative===0,"red works only with positives"),m.convertTo(this).W$(m)},s.prototype.fromRed=function(){return e(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype.W$=function(m){return this.red=m,this},s.prototype.forceRed=function(m){return e(!this.red,"Already a number in reduction context"),this.W$(m)},s.prototype.redAdd=function(m){return e(this.red,"redAdd works only with red numbers"),this.red.add(this,m)},s.prototype.redIAdd=function(m){return e(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,m)},s.prototype.redSub=function(m){return e(this.red,"redSub works only with red numbers"),this.red.sub(this,m)},s.prototype.redISub=function(m){return e(this.red,"redISub works only with red numbers"),this.red.isub(this,m)},s.prototype.redShl=function(m){return e(this.red,"redShl works only with red numbers"),this.red.shl(this,m)},s.prototype.redMul=function(m){return e(this.red,"redMul works only with red numbers"),this.red.U$(this,m),this.red.mul(this,m)},s.prototype.redIMul=function(m){return e(this.red,"redMul works only with red numbers"),this.red.U$(this,m),this.red.imul(this,m)},s.prototype.redSqr=function(){return e(this.red,"redSqr works only with red numbers"),this.red.Y$(this),this.red.sqr(this)},s.prototype.redISqr=function(){return e(this.red,"redISqr works only with red numbers"),this.red.Y$(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return e(this.red,"redSqrt works only with red numbers"),this.red.Y$(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return e(this.red,"redInvm works only with red numbers"),this.red.Y$(this),this.red.invm(this)},s.prototype.redNeg=function(){return e(this.red,"redNeg works only with red numbers"),this.red.Y$(this),this.red.neg(this)},s.prototype.redPow=function(m){return e(this.red&&!m.red,"redPow(normalNum)"),this.red.Y$(this),this.red.pow(this,m)};var x={k256:null,p224:null,p192:null,p25519:null};function A(m,S){this.name=m,this.p=new s(S,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this.H$()}function v(){A.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function w(){A.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function E(){A.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function C(){A.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function k(m){if(typeof m=="string"){var S=s.$$(m);this.m=S.p,this.prime=S}else e(m.gtn(1),"modulus must be greater than 1"),this.m=m,this.prime=null}function F(m){k.call(this,m),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r.G$(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}A.prototype.H$=function(){var m=new s(null);return m.words=new Array(Math.ceil(this.n/13)),m},A.prototype.ireduce=function(m){var S,b=m;do this.split(b,this.tmp),S=(b=(b=this.imulK(b)).iadd(this.tmp)).bitLength();while(S>this.n);var M=S<this.n?-1:b.ucmp(this.p);return M===0?(b.words[0]=0,b.length=1):M>0?b.isub(this.p):b.strip!==void 0?b.strip():b.I$(),b},A.prototype.split=function(m,S){m.iushrn(this.n,0,S)},A.prototype.imulK=function(m){return m.imul(this.k)},i(v,A),v.prototype.split=function(m,S){for(var b=4194303,M=Math.min(m.length,9),R=0;R<M;R++)S.words[R]=m.words[R];if(S.length=M,m.length<=9)return m.words[0]=0,void(m.length=1);var T=m.words[9];for(S.words[S.length++]=T&b,R=10;R<m.length;R++){var z=0|m.words[R];m.words[R-10]=(z&b)<<4|T>>>22,T=z}T>>>=22,m.words[R-10]=T,T===0&&m.length>10?m.length-=10:m.length-=9},v.prototype.imulK=function(m){m.words[m.length]=0,m.words[m.length+1]=0,m.length+=2;for(var S=0,b=0;b<m.length;b++){var M=0|m.words[b];S+=977*M,m.words[b]=67108863&S,S=64*M+(S/67108864|0)}return m.words[m.length-1]===0&&(m.length--,m.words[m.length-1]===0&&m.length--),m},i(w,A),i(E,A),i(C,A),C.prototype.imulK=function(m){for(var S=0,b=0;b<m.length;b++){var M=19*(0|m.words[b])+S,R=67108863&M;M>>>=26,m.words[b]=R,S=M}return S!==0&&(m.words[m.length++]=S),m},s.$$=function(m){if(x[m])return x[m];var S;if(m==="k256")S=new v;else if(m==="p224")S=new w;else if(m==="p192")S=new E;else{if(m!=="p25519")throw new Error("Unknown prime "+m);S=new C}return x[m]=S,S},k.prototype.Y$=function(m){e(m.negative===0,"red works only with positives"),e(m.red,"red works only with red numbers")},k.prototype.U$=function(m,S){e((m.negative|S.negative)==0,"red works only with positives"),e(m.red&&m.red===S.red,"red works only with red numbers")},k.prototype.imod=function(m){return this.prime?this.prime.ireduce(m).W$(this):(a(m,m.umod(this.m).W$(this)),m)},k.prototype.neg=function(m){return m.isZero()?m.clone():this.m.sub(m).W$(this)},k.prototype.add=function(m,S){this.U$(m,S);var b=m.add(S);return b.cmp(this.m)>=0&&b.isub(this.m),b.W$(this)},k.prototype.iadd=function(m,S){this.U$(m,S);var b=m.iadd(S);return b.cmp(this.m)>=0&&b.isub(this.m),b},k.prototype.sub=function(m,S){this.U$(m,S);var b=m.sub(S);return b.cmpn(0)<0&&b.iadd(this.m),b.W$(this)},k.prototype.isub=function(m,S){this.U$(m,S);var b=m.isub(S);return b.cmpn(0)<0&&b.iadd(this.m),b},k.prototype.shl=function(m,S){return this.Y$(m),this.imod(m.ushln(S))},k.prototype.imul=function(m,S){return this.U$(m,S),this.imod(m.imul(S))},k.prototype.mul=function(m,S){return this.U$(m,S),this.imod(m.mul(S))},k.prototype.isqr=function(m){return this.imul(m,m.clone())},k.prototype.sqr=function(m){return this.mul(m,m)},k.prototype.sqrt=function(m){if(m.isZero())return m.clone();var S=this.m.andln(3);if(e(S%2==1),S===3){var b=this.m.add(new s(1)).iushrn(2);return this.pow(m,b)}for(var M=this.m.subn(1),R=0;!M.isZero()&&M.andln(1)===0;)R++,M.iushrn(1);e(!M.isZero());var T=new s(1).toRed(this),z=T.redNeg(),P=this.m.subn(1).iushrn(1),_=this.m.bitLength();for(_=new s(2*_*_).toRed(this);this.pow(_,P).cmp(z)!==0;)_.redIAdd(z);for(var V=this.pow(_,M),B=this.pow(m,M.addn(1).iushrn(1)),I=this.pow(m,M),L=R;I.cmp(T)!==0;){for(var U=I,Y=0;U.cmp(T)!==0;Y++)U=U.redSqr();e(Y<L);var O=this.pow(V,new s(1).iushln(L-Y-1));B=B.redMul(O),V=O.redSqr(),I=I.redMul(V),L=Y}return B},k.prototype.invm=function(m){var S=m.G$(this.m);return S.negative!==0?(S.negative=0,this.imod(S).redNeg()):this.imod(S)},k.prototype.pow=function(m,S){if(S.isZero())return new s(1).toRed(this);if(S.cmpn(1)===0)return m.clone();var b=new Array(16);b[0]=new s(1).toRed(this),b[1]=m;for(var M=2;M<b.length;M++)b[M]=this.mul(b[M-1],m);var R=b[0],T=0,z=0,P=S.bitLength()%26;for(P===0&&(P=26),M=S.length-1;M>=0;M--){for(var _=S.words[M],V=P-1;V>=0;V--){var B=_>>V&1;R!==b[0]&&(R=this.sqr(R)),B!==0||T!==0?(T<<=1,T|=B,(++z==4||M===0&&V===0)&&(R=this.mul(R,b[T]),z=0,T=0)):z=0}P=26}return R},k.prototype.convertTo=function(m){var S=m.umod(this.m);return S===m?S.clone():S},k.prototype.convertFrom=function(m){var S=m.clone();return S.red=null,S},s.mont=function(m){return new F(m)},i(F,k),F.prototype.convertTo=function(m){return this.imod(m.ushln(this.shift))},F.prototype.convertFrom=function(m){var S=this.imod(m.mul(this.rinv));return S.red=null,S},F.prototype.imul=function(m,S){if(m.isZero()||S.isZero())return m.words[0]=0,m.length=1,m;var b=m.imul(S),M=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),R=b.isub(M).iushrn(this.shift),T=R;return R.cmp(this.m)>=0?T=R.isub(this.m):R.cmpn(0)<0&&(T=R.iadd(this.m)),T.W$(this)},F.prototype.mul=function(m,S){if(m.isZero()||S.isZero())return new s(0).W$(this);var b=m.mul(S),M=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),R=b.isub(M).iushrn(this.shift),T=R;return R.cmp(this.m)>=0?T=R.isub(this.m):R.cmpn(0)<0&&(T=R.iadd(this.m)),T.W$(this)},F.prototype.invm=function(m){return this.imod(m.G$(this.m).mul(this.r2)).W$(this)}})(0,ma);var re=Eu.exports;function cm(r,t){if(Array.isArray(r))return r.slice();if(!r)return[];const e=[];if(typeof r!="string"){for(let i=0;i<r.length;i++)e[i]=0|r[i];return e}if(t==="hex"){(r=r.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(r=`0${r}`);for(let i=0;i<r.length;i+=2)e.push(parseInt(r[i]+r[i+1],16))}else for(let i=0;i<r.length;i++){const s=r.charCodeAt(i),n=s>>8,o=255&s;n?e.push(n,o):e.push(o)}return e}const da=function(r,t,e){const i=new Array(Math.max(r.bitLength(),e)+1);i.fill(0);const s=1<<t+1,n=r.clone();for(let o=0;o<i.length;o++){let h;const a=n.andln(s-1);n.isOdd()?(h=a>(s>>1)-1?(s>>1)-a:a,n.isubn(h)):h=0,i[o]=h,n.iushrn(1)}return i},jb=function(r,t){const e=[[],[]];r=r.clone(),t=t.clone();let i=0,s=0;for(;r.cmpn(-i)>0||t.cmpn(-s)>0;){let n,o,h=r.andln(3)+i&3,a=t.andln(3)+s&3;if(h===3&&(h=-1),a===3&&(a=-1),(1&h)==0)n=0;else{const l=r.andln(7)+i&7;n=l!==3&&l!==5||a!==2?h:-h}if(e[0].push(n),(1&a)==0)o=0;else{const l=t.andln(7)+s&7;o=l!==3&&l!==5||h!==2?a:-a}e[1].push(o),2*i===n+1&&(i=1-i),2*s===o+1&&(s=1-s),r.iushrn(1),t.iushrn(1)}return e};class qb{constructor(t,e){this.type=t,this.p=new re(e.p,16),this.red=e.prime?re.red(e.prime):re.mont(this.p),this.zero=new re(0).toRed(this.red),this.one=new re(1).toRed(this.red),this.two=new re(2).toRed(this.red),this.n=e.n&&new re(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this.X$=new Array(4),this.j$=new Array(4),this.Z$=new Array(4),this.Q$=new Array(4),this.J$=this.n?this.n.bitLength():0;const i=this.n&&this.p.div(this.n);!i||i.cmpn(100)>0?this.redN=null:(this.K$=!0,this.redN=this.n.toRed(this.red))}q$(t,e){const i=t.tX(),s=da(e,1,this.J$);let n=(1<<i.step+1)-(i.step%2==0?2:1);n/=3;const o=[];for(let l=0;l<s.length;l+=i.step){let u=0;for(let c=l+i.step-1;c>=l;c--)u=(u<<1)+s[c];o.push(u)}let h=this.jpoint(null,null,null),a=this.jpoint(null,null,null);for(let l=n;l>0;l--){for(let u=0;u<o.length;u++){const c=o[u];c===l?a=a.mixedAdd(i.points[u]):c===-l&&(a=a.mixedAdd(i.points[u].neg()))}h=h.add(a)}return h.toP()}iX(t,e){let i=4;const s=t.sX(i);i=s.wnd;const n=s.points,o=da(e,i,this.J$);let h=this.jpoint(null,null,null);for(let a=o.length-1;a>=0;a--){for(let u=0;a>=0&&o[a]===0;a--)u++;if(a>=0&&e++,h=h.dblp(e),a<0)break;const l=o[a];h=t.type==="affine"?l>0?h.mixedAdd(n[l-1>>1]):h.mixedAdd(n[-l-1>>1].neg()):l>0?h.add(n[l-1>>1]):h.add(n[-l-1>>1].neg())}return t.type==="affine"?h.toP():h}eX(t,e,i,s,n){const o=this.X$,h=this.j$,a=this.Z$;let l=0;for(let d=0;d<s;d++){const f=e[d].sX(t);o[d]=f.wnd,h[d]=f.points}for(let d=s-1;d>=1;d-=2){const f=d-1,g=d;if(o[f]!==1||o[g]!==1){a[f]=da(i[f],o[f],this.J$),a[g]=da(i[g],o[g],this.J$),l=Math.max(a[f].length,l),l=Math.max(a[g].length,l);continue}const y=[e[f],null,null,e[g]];e[f].y.cmp(e[g].y)===0?(y[1]=e[f].add(e[g]),y[2]=e[f].toJ().mixedAdd(e[g].neg())):e[f].y.cmp(e[g].y.redNeg())===0?(y[1]=e[f].toJ().mixedAdd(e[g]),y[2]=e[f].add(e[g].neg())):(y[1]=e[f].toJ().mixedAdd(e[g]),y[2]=e[f].toJ().mixedAdd(e[g].neg()));const p=[-3,-1,-5,-7,0,7,5,1,3],x=jb(i[f],i[g]);l=Math.max(x[0].length,l),a[f]=new Array(l),a[g]=new Array(l);for(let A=0;A<l;A++){const v=0|x[0][A],w=0|x[1][A];a[f][A]=p[3*(v+1)+(w+1)],a[g][A]=0,h[f]=y}}let u=this.jpoint(null,null,null);const c=this.Q$;for(let d=l;d>=0;d--){let f=0;for(;d>=0;){let g=!0;for(let y=0;y<s;y++)c[y]=0|a[y][d],c[y]!==0&&(g=!1);if(!g)break;f++,d--}if(d>=0&&f++,u=u.dblp(f),d<0)break;for(let g=0;g<s;g++){const y=c[g];let p;y!==0&&(y>0?p=h[g][y-1>>1]:y<0&&(p=h[g][-y-1>>1].neg()),u=p.type==="affine"?u.mixedAdd(p):u.add(p))}}for(let d=0;d<s;d++)h[d]=null;return n?u:u.toP()}decodePoint(t,e){t=cm(t,e);const i=this.p.byteLength();if((t[0]===4||t[0]===6||t[0]===7)&&t.length-1==2*i)return this.point(t.slice(1,1+i),t.slice(1+i,1+2*i));if((t[0]===2||t[0]===3)&&t.length-1===i)return this.pointFromX(t.slice(1,1+i),t[0]===3);throw new Error("Unknown point format")}}class dm{constructor(t,e){this.curve=t,this.type=e,this.precomputed=null}eq(t){throw new Error("Not implemented")}validate(){return this.curve.validate(this)}encodeCompressed(t){return this.encode(t,!0)}hX(t){const e=this.curve.p.byteLength(),i=this.getX().toArray("be",e);return t?[this.getY().isEven()?2:3].concat(i):[4].concat(i,this.getY().toArray("be",e))}encode(t,e){return function(i,s){return s==="hex"?function(n){let o="";for(let a=0;a<n.length;a++)o+=(h=n[a].toString(16)).length===1?`0${h}`:h;var h;return o}(i):i}(this.hX(e),t)}precompute(t){if(this.precomputed)return this;const e={doubles:null,naf:null,beta:null};return e.naf=this.sX(8),e.doubles=this.tX(4,t),e.beta=this.rX(),this.precomputed=e,this}nX(t){if(!this.precomputed)return!1;const e=this.precomputed.doubles;return!!e&&e.points.length>=Math.ceil((t.bitLength()+1)/e.step)}tX(t,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;const i=[this];let s=this;for(let n=0;n<e;n+=t){for(let o=0;o<t;o++)s=s.dbl();i.push(s)}return{step:t,points:i}}sX(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;const e=[this],i=(1<<t)-1,s=i===1?null:this.dbl();for(let n=1;n<i;n++)e[n]=e[n-1].add(s);return{wnd:t,points:e}}rX(){return null}dblp(t){let e=this;for(let i=0;i<t;i++)e=e.dbl();return e}}class Jb extends qb{constructor(t){super("short",t),this.a=new re(t.a,16).toRed(this.red),this.b=new re(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this.oX(t),this.aX=new Array(4),this.lX=new Array(4)}pointFromJSON(t,e){return Ba.fromJSON(this,t,e)}oX(t){if(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)return;let e,i,s;if(t.beta)e=new re(t.beta,16).toRed(this.red);else{const n=this.uX(this.p);e=n[0].cmp(n[1])<0?n[0]:n[1],e=e.toRed(this.red)}if(t.lambda)i=new re(t.lambda,16);else{const n=this.uX(this.n);i=this.g.mul(n[0]).x.cmp(this.g.x.redMul(e))===0?n[0]:n[1]}return s=t.basis?t.basis.map(n=>({a:new re(n.a,16),b:new re(n.b,16)})):this.cX(i),{beta:e,lambda:i,basis:s}}uX(t){const e=t===this.p?this.red:re.mont(t),i=new re(2).toRed(e).redInvm(),s=i.redNeg(),n=new re(3).toRed(e).redNeg().redSqrt().redMul(i);return[s.redAdd(n).fromRed(),s.redSub(n).fromRed()]}cX(t){const e=this.n.ushrn(Math.floor(this.n.bitLength()/2));let i,s,n,o,h,a,l,u,c,d=t,f=this.n.clone(),g=new re(1),y=new re(0),p=new re(0),x=new re(1),A=0;for(;d.cmpn(0)!==0;){const w=f.div(d);u=f.sub(w.mul(d)),c=p.sub(w.mul(g));const E=x.sub(w.mul(y));if(!n&&u.cmp(e)<0)i=l.neg(),s=g,n=u.neg(),o=c;else if(n&&++A==2)break;l=u,f=d,d=u,p=g,g=c,x=y,y=E}h=u.neg(),a=c;const v=n.sqr().add(o.sqr());return h.sqr().add(a.sqr()).cmp(v)>=0&&(h=i,a=s),n.negative&&(n=n.neg(),o=o.neg()),h.negative&&(h=h.neg(),a=a.neg()),[{a:n,b:o},{a:h,b:a}]}dX(t){const e=this.endo.basis,i=e[0],s=e[1],n=s.b.mul(t).divRound(this.n),o=i.b.neg().mul(t).divRound(this.n),h=n.mul(i.a),a=o.mul(s.a),l=n.mul(i.b),u=o.mul(s.b);return{k1:t.sub(h).sub(a),k2:l.add(u).neg()}}point(t,e,i){return new Ba(this,t,e,i)}pointFromX(t,e){(t=new re(t,16)).red||(t=t.toRed(this.red));const i=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b);let s=i.redSqrt();if(s.redSqr().redSub(i).cmp(this.zero)!==0)throw new Error("invalid point");const n=s.fromRed().isOdd();return(e&&!n||!e&&n)&&(s=s.redNeg()),this.point(t,s)}validate(t){if(t.inf)return!0;const e=t.x,i=t.y,s=this.a.redMul(e),n=e.redSqr().redMul(e).redIAdd(s).redIAdd(this.b);return i.redSqr().redISub(n).cmpn(0)===0}fX(t,e,i){const s=this.aX,n=this.lX;let o=0;for(o=0;o<t.length;o++){const a=this.dX(e[o]);let l=t[o],u=l.rX();a.k1.negative&&(a.k1.ineg(),l=l.neg(!0)),a.k2.negative&&(a.k2.ineg(),u=u.neg(!0)),s[2*o]=l,s[2*o+1]=u,n[2*o]=a.k1,n[2*o+1]=a.k2}const h=this.eX(1,s,n,2*o,i);for(let a=0;a<2*o;a++)s[a]=null,n[a]=null;return h}jpoint(t,e,i){return new Lc(this,t,e,i)}}class Ba extends dm{constructor(t,e,i,s){super(t,"affine"),e===null&&i===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new re(e,16),this.y=new re(i,16),s&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}pointFromX(t,e){throw new Error("Method not implemented.")}point(t,e,i){return new Ba(this,t,e,i)}rX(){if(!this.curve.endo)return;const t=this.precomputed;if(t&&t.beta)return t.beta;const e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){const i=this.curve,s=function(n){return i.point(n.x.redMul(i.endo.beta),n.y)};t.beta=e,e.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(s)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(s)}}}return e}toJSON(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]}static fromJSON(t,e,i){typeof e=="string"&&(e=JSON.parse(e));const s=t.point(e[0],e[1],i);if(!e[2])return s;function n(h){return t.point(h[0],h[1],i)}const o=e[2];return s.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[s].concat(o.doubles.points.map(n))},naf:o.naf&&{wnd:o.naf.wnd,points:[s].concat(o.naf.points.map(n))}},s}inspect(){return this.isInfinity()?"<EC Point Infinity>":`<EC Point x: ${this.x.fromRed().toString(16,2)} y: ${this.y.fromRed().toString(16,2)}>`}isInfinity(){return this.inf}add(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(this.x.cmp(t.x)===0)return this.curve.point(null,null);let e=this.y.redSub(t.y);e.cmpn(0)!==0&&(e=e.redMul(this.x.redSub(t.x).redInvm()));const i=e.redSqr().redISub(this.x).redISub(t.x),s=e.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,s)}dbl(){if(this.inf)return this;const t=this.y.redAdd(this.y);if(t.cmpn(0)===0)return this.curve.point(null,null);const e=this.curve.a,i=this.x.redSqr(),s=t.redInvm(),n=i.redAdd(i).redIAdd(i).redIAdd(e).redMul(s),o=n.redSqr().redISub(this.x.redAdd(this.x)),h=n.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,h)}getX(){return this.x.fromRed()}getY(){return this.y.fromRed()}mul(t){return t=new re(t,16),this.isInfinity()?this:this.nX(t)?this.curve.q$(this,t):this.curve.endo?this.curve.fX([this],[t]):this.curve.iX(this,t)}mulAdd(t,e,i){const s=[this,e],n=[t,i];return this.curve.endo?this.curve.fX(s,n):this.curve.eX(1,s,n,2)}jmulAdd(t,e,i){const s=[this,e],n=[t,i];return this.curve.endo?this.curve.fX(s,n,!0):this.curve.eX(1,s,n,2,!0)}eq(t){return this===t||this.inf===t.inf&&(this.inf||this.x.cmp(t.x)===0&&this.y.cmp(t.y)===0)}neg(t){if(this.inf)return this;const e=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){const i=this.precomputed,s=function(n){return n.neg()};e.precomputed={naf:i.naf&&{wnd:i.naf.wnd,points:i.naf.points.map(s)},doubles:i.doubles&&{step:i.doubles.step,points:i.doubles.points.map(s)}}}return e}toJ(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)}}class Lc extends dm{constructor(t,e,i,s){super(t,"jacobian"),e===null&&i===null&&s===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new re(0)):(this.x=new re(e,16),this.y=new re(i,16),this.z=new re(s,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}getY(){throw new Error("Method not implemented.")}getX(){throw new Error("Method not implemented.")}pointFromX(t,e){throw new Error("Method not implemented.")}point(t,e,i){throw new Error("Method not implemented.")}jpoint(t,e,i){return new Lc(this,t,e,i)}toP(){if(this.isInfinity())return this.curve.point(null,null);const t=this.z.redInvm(),e=t.redSqr(),i=this.x.redMul(e),s=this.y.redMul(e).redMul(t);return this.curve.point(i,s)}neg(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)}add(t){if(this.isInfinity())return t;if(t.isInfinity())return this;const e=t.z.redSqr(),i=this.z.redSqr(),s=this.x.redMul(e),n=t.x.redMul(i),o=this.y.redMul(e.redMul(t.z)),h=t.y.redMul(i.redMul(this.z)),a=s.redSub(n),l=o.redSub(h);if(a.cmpn(0)===0)return l.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();const u=a.redSqr(),c=u.redMul(a),d=s.redMul(u),f=l.redSqr().redIAdd(c).redISub(d).redISub(d),g=l.redMul(d.redISub(f)).redISub(o.redMul(c)),y=this.z.redMul(t.z).redMul(a);return this.curve.jpoint(f,g,y)}mixedAdd(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;const e=this.z.redSqr(),i=this.x,s=t.x.redMul(e),n=this.y,o=t.y.redMul(e).redMul(this.z),h=i.redSub(s),a=n.redSub(o);if(h.cmpn(0)===0)return a.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();const l=h.redSqr(),u=l.redMul(h),c=i.redMul(l),d=a.redSqr().redIAdd(u).redISub(c).redISub(c),f=a.redMul(c.redISub(d)).redISub(n.redMul(u)),g=this.z.redMul(h);return this.curve.jpoint(d,f,g)}dblp(t){if(t===0)return this;if(this.isInfinity())return this;if(!t)return this.dbl();if(this.curve.zeroA||this.curve.threeA){let l=this;for(let u=0;u<t;u++)l=l.dbl();return l}const e=this.curve.a,i=this.curve.tinv;let s=this.x;const n=this.y;let o=this.z,h=o.redSqr().redSqr(),a=n.redAdd(n);for(let l=0;l<t;l++){const u=s.redSqr(),c=a.redSqr(),d=c.redSqr(),f=u.redAdd(u).redIAdd(u).redIAdd(e.redMul(h)),g=s.redMul(c),y=f.redSqr().redISub(g.redAdd(g)),p=g.redISub(y);let x=f.redMul(p);x=x.redIAdd(x).redISub(d);const A=a.redMul(o);l+1<t&&(h=h.redMul(d)),s=y,o=A,a=x}return this.curve.jpoint(s,a.redMul(i),o)}dbl(){return this.isInfinity()?this:this.curve.zeroA?this.AX():this.curve.threeA?this.gX():this.mX()}AX(){let t,e,i;if(this.zOne){const s=this.x.redSqr(),n=this.y.redSqr(),o=n.redSqr();let h=this.x.redAdd(n).redSqr().redISub(s).redISub(o);h=h.redIAdd(h);const a=s.redAdd(s).redIAdd(s),l=a.redSqr().redISub(h).redISub(h);let u=o.redIAdd(o);u=u.redIAdd(u),u=u.redIAdd(u),t=l,e=a.redMul(h.redISub(l)).redISub(u),i=this.y.redAdd(this.y)}else{const s=this.x.redSqr(),n=this.y.redSqr(),o=n.redSqr();let h=this.x.redAdd(n).redSqr().redISub(s).redISub(o);h=h.redIAdd(h);const a=s.redAdd(s).redIAdd(s),l=a.redSqr();let u=o.redIAdd(o);u=u.redIAdd(u),u=u.redIAdd(u),t=l.redISub(h).redISub(h),e=a.redMul(h.redISub(t)).redISub(u),i=this.y.redMul(this.z),i=i.redIAdd(i)}return this.curve.jpoint(t,e,i)}gX(){let t,e,i;if(this.zOne){const s=this.x.redSqr(),n=this.y.redSqr(),o=n.redSqr();let h=this.x.redAdd(n).redSqr().redISub(s).redISub(o);h=h.redIAdd(h);const a=s.redAdd(s).redIAdd(s).redIAdd(this.curve.a),l=a.redSqr().redISub(h).redISub(h);t=l;let u=o.redIAdd(o);u=u.redIAdd(u),u=u.redIAdd(u),e=a.redMul(h.redISub(l)).redISub(u),i=this.y.redAdd(this.y)}else{const s=this.z.redSqr(),n=this.y.redSqr(),o=this.x.redMul(n);let h=this.x.redSub(s).redMul(this.x.redAdd(s));h=h.redAdd(h).redIAdd(h);let a=o.redIAdd(o);a=a.redIAdd(a);const l=a.redAdd(a);t=h.redSqr().redISub(l),i=this.y.redAdd(this.z).redSqr().redISub(n).redISub(s);let u=n.redSqr();u=u.redIAdd(u),u=u.redIAdd(u),u=u.redIAdd(u),e=h.redMul(a.redISub(t)).redISub(u)}return this.curve.jpoint(t,e,i)}mX(){const t=this.curve.a,e=this.x,i=this.y,s=this.z,n=s.redSqr().redSqr(),o=e.redSqr(),h=i.redSqr(),a=o.redAdd(o).redIAdd(o).redIAdd(t.redMul(n));let l=e.redAdd(e);l=l.redIAdd(l);const u=l.redMul(h),c=a.redSqr().redISub(u.redAdd(u)),d=u.redISub(c);let f=h.redSqr();f=f.redIAdd(f),f=f.redIAdd(f),f=f.redIAdd(f);const g=a.redMul(d).redISub(f),y=i.redAdd(i).redMul(s);return this.curve.jpoint(c,g,y)}trpl(){if(!this.curve.zeroA)return this.dbl().add(this);const t=this.x.redSqr(),e=this.y.redSqr(),i=this.z.redSqr(),s=e.redSqr(),n=t.redAdd(t).redIAdd(t),o=n.redSqr();let h=this.x.redAdd(e).redSqr().redISub(t).redISub(s);h=h.redIAdd(h),h=h.redAdd(h).redIAdd(h),h=h.redISub(o);const a=h.redSqr();let l=s.redIAdd(s);l=l.redIAdd(l),l=l.redIAdd(l),l=l.redIAdd(l);const u=n.redIAdd(h).redSqr().redISub(o).redISub(a).redISub(l);let c=e.redMul(u);c=c.redIAdd(c),c=c.redIAdd(c);let d=this.x.redMul(a).redISub(c);d=d.redIAdd(d),d=d.redIAdd(d);let f=this.y.redMul(u.redMul(l.redISub(u)).redISub(h.redMul(a)));f=f.redIAdd(f),f=f.redIAdd(f),f=f.redIAdd(f);const g=this.z.redAdd(h).redSqr().redISub(i).redISub(a);return this.curve.jpoint(d,f,g)}mul(t,e){return t=new re(t,e),this.curve.iX(this,t)}eq(t){if(t.type==="affine")return this.eq(t.toJ());if(this===t)return!0;const e=this.z.redSqr(),i=t.z.redSqr();if(this.x.redMul(i).redISub(t.x.redMul(e)).cmpn(0)!==0)return!1;const s=e.redMul(this.z),n=i.redMul(t.z);return this.y.redMul(n).redISub(t.y.redMul(s)).cmpn(0)===0}eqXToP(t){const e=this.z.redSqr(),i=t.toRed(this.curve.red).redMul(e);if(this.x.cmp(i)===0)return!0;const s=t.clone(),n=this.curve.redN.redMul(e);for(;;){if(s.iadd(this.curve.n),s.cmp(this.curve.p)>=0)return!1;if(i.redIAdd(n),this.x.cmp(i)===0)return!0}}inspect(){return this.isInfinity()?"<EC JPoint Infinity>":`<EC JPoint x: ${this.x.toString(16,2)} y: ${this.y.toString(16,2)} z: ${this.z.toString(16,2)}>`}isInfinity(){return this.z.cmpn(0)===0}}class Qf{constructor(t){this.curve=new Jb(t),this.g=this.curve.g,this.n=this.curve.n}}const eh={};var Kf;eh.PresetCurve=Qf,Kf={type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",{doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}]},Object.defineProperty(eh,"secp256k1",{configurable:!0,enumerable:!0,get(){const r=new Qf(Kf);return Object.defineProperty(eh,"secp256k1",{configurable:!0,enumerable:!0,value:r}),r}});class Ua{constructor(t,e){this.ec=t,this.priv=null,this.pub=null,e.pub&&this.yX(e.pub,e.pubEnc)}static fromPublic(t,e,i){return e instanceof Ua?e:new Ua(t,{pub:e,pubEnc:i})}validate(){const t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}}getPublic(t,e){return typeof t=="string"&&(e=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),e?this.pub.encode(e,t):this.pub}yX(t,e){if(t.x||t.y)return this.ec.curve.type==="mont"||this.ec.curve.type==="short"||this.ec.curve.type,void(this.pub=this.ec.curve.point(t.x,t.y));this.pub=this.ec.curve.decodePoint(t,e)}verify(t,e){return this.ec.verify(t,e,this)}}function jl(r,t){const e=r[t.place++];if(!(128&e))return e;const i=15&e;if(i===0||i>4)return!1;let s=0,n=t.place;for(let o=0;o<i;o++,n++)s<<=8,s|=r[n],s>>>=0;return!(s<=127)&&(t.place=n,s)}class Zb{constructor(){this.place=0}}class zc{constructor(t,e){if(t instanceof zc)return t;this.pX(t,e)||(this.r=new re(t.r,16),this.s=new re(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}pX(t,e){t=cm(t,e);const i=new Zb;if(t[i.place++]!==48)return!1;const s=jl(t,i);if(s===!1||s+i.place!==t.length||t[i.place++]!==2)return!1;const n=jl(t,i);if(n===!1)return!1;let o=t.slice(i.place,n+i.place);if(i.place+=n,t[i.place++]!==2)return!1;const h=jl(t,i);if(h===!1||t.length!==h+i.place)return!1;let a=t.slice(i.place,h+i.place);if(o[0]===0){if(!(128&o[1]))return!1;o=o.slice(1)}if(a[0]===0){if(!(128&a[1]))return!1;a=a.slice(1)}return this.r=new re(o),this.s=new re(a),this.recoveryParam=null,!0}}class Ga{constructor(t){if(!(this instanceof Ga))return new Ga(t);typeof t=="string"&&(t=eh[t]),t instanceof eh.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1)}keyFromPublic(t,e){return Ua.fromPublic(this,t,e)}SX(t,e){const i=8*t.byteLength()-this.n.bitLength();return i>0&&(t=t.ushrn(i)),!e&&t.cmp(this.n)>=0?t.sub(this.n):t}verify(t,e,i,s){t=this.SX(new re(t,16)),i=this.keyFromPublic(i,s);const n=(e=new zc(e,"hex")).r,o=e.s;if(n.cmpn(1)<0||n.cmp(this.n)>=0||o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;const h=o.invm(this.n),a=h.mul(t).umod(this.n),l=h.mul(n).umod(this.n);if(!this.curve.K$){const c=this.g.mulAdd(a,i.getPublic(),l);return!c.isInfinity()&&c.getX().umod(this.n).cmp(n)===0}const u=this.g.jmulAdd(a,i.getPublic(),l);return!u.isInfinity()&&u.eqXToP(n)}}var ql,Zi={exports:{}};Zi.exports=(ql=ql||function(r,t){var e;if(typeof window<"u"&&window.crypto&&(e=window.crypto),typeof self<"u"&&self.crypto&&(e=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(e=globalThis.crypto),!e&&typeof window<"u"&&window.msCrypto&&(e=window.msCrypto),!e&&ma!==void 0&&ma.crypto&&(e=ma.crypto),!e)try{e=t}catch{}var i=function(){if(e){if(typeof e.getRandomValues=="function")try{return e.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof e.randomBytes=="function")try{return e.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},s=Object.create||function(){function y(){}return function(p){var x;return y.prototype=p,x=new y,y.prototype=null,x}}(),n={},o=n.lib={},h=o.Base={extend:function(y){var p=s(this);return y&&p.mixIn(y),p.hasOwnProperty("init")&&this.init!==p.init||(p.init=function(){p.$super.init.apply(this,arguments)}),p.init.prototype=p,p.$super=this,p},create:function(){var y=this.extend();return y.init.apply(y,arguments),y},init:function(){},mixIn:function(y){for(var p in y)y.hasOwnProperty(p)&&(this[p]=y[p]);y.hasOwnProperty("toString")&&(this.toString=y.toString)},clone:function(){return this.init.prototype.extend(this)}},a=o.WordArray=h.extend({init:function(y,p){y=this.words=y||[],this.sigBytes=p!=t?p:4*y.length},toString:function(y){return(y||u).stringify(this)},concat:function(y){var p=this.words,x=y.words,A=this.sigBytes,v=y.sigBytes;if(this.clamp(),A%4)for(var w=0;w<v;w++){var E=x[w>>>2]>>>24-w%4*8&255;p[A+w>>>2]|=E<<24-(A+w)%4*8}else for(var C=0;C<v;C+=4)p[A+C>>>2]=x[C>>>2];return this.sigBytes+=v,this},clamp:function(){var y=this.words,p=this.sigBytes;y[p>>>2]&=4294967295<<32-p%4*8,y.length=r.ceil(p/4)},clone:function(){var y=h.clone.call(this);return y.words=this.words.slice(0),y},random:function(y){for(var p=[],x=0;x<y;x+=4)p.push(i());return new a.init(p,y)}}),l=n.enc={},u=l.Hex={stringify:function(y){for(var p=y.words,x=y.sigBytes,A=[],v=0;v<x;v++){var w=p[v>>>2]>>>24-v%4*8&255;A.push((w>>>4).toString(16)),A.push((15&w).toString(16))}return A.join("")},parse:function(y){for(var p=y.length,x=[],A=0;A<p;A+=2)x[A>>>3]|=parseInt(y.substr(A,2),16)<<24-A%8*4;return new a.init(x,p/2)}},c=l.Latin1={stringify:function(y){for(var p=y.words,x=y.sigBytes,A=[],v=0;v<x;v++){var w=p[v>>>2]>>>24-v%4*8&255;A.push(String.fromCharCode(w))}return A.join("")},parse:function(y){for(var p=y.length,x=[],A=0;A<p;A++)x[A>>>2]|=(255&y.charCodeAt(A))<<24-A%4*8;return new a.init(x,p)}},d=l.Utf8={stringify:function(y){try{return decodeURIComponent(escape(c.stringify(y)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(y){return c.parse(unescape(encodeURIComponent(y)))}},f=o.BufferedBlockAlgorithm=h.extend({reset:function(){this.Jw=new a.init,this.vX=0},bX:function(y){typeof y=="string"&&(y=d.parse(y)),this.Jw.concat(y),this.vX+=y.sigBytes},xX:function(y){var p,x=this.Jw,A=x.words,v=x.sigBytes,w=this.blockSize,E=v/(4*w),C=(E=y?r.ceil(E):r.max((0|E)-this.MX,0))*w,k=r.min(4*C,v);if(C){for(var F=0;F<C;F+=w)this._X(A,F);p=A.splice(0,C),x.sigBytes-=k}return new a.init(p,k)},clone:function(){var y=h.clone.call(this);return y.Jw=this.Jw.clone(),y},MX:0});o.Hasher=f.extend({cfg:h.extend(),init:function(y){this.cfg=this.cfg.extend(y),this.reset()},reset:function(){f.reset.call(this),this.wX()},update:function(y){return this.bX(y),this.xX(),this},finalize:function(y){return y&&this.bX(y),this.CX()},blockSize:16,kX:function(y){return function(p,x){return new y.init(x).finalize(p)}},TX:function(y){return function(p,x){return new g.HMAC.init(y,x).finalize(p)}}});var g=n.algo={};return n}(Math),ql);var fa=function(r){return function(t){var e=r,i=e.lib,s=i.WordArray,n=i.Hasher,o=e.algo,h=[],a=[];(function(){function c(y){for(var p=t.sqrt(y),x=2;x<=p;x++)if(!(y%x))return!1;return!0}function d(y){return 4294967296*(y-(0|y))|0}for(var f=2,g=0;g<64;)c(f)&&(g<8&&(h[g]=d(t.pow(f,.5))),a[g]=d(t.pow(f,1/3)),g++),f++})();var l=[],u=o.SHA256=n.extend({wX:function(){this.FX=new s.init(h.slice(0))},_X:function(c,d){for(var f=this.FX.words,g=f[0],y=f[1],p=f[2],x=f[3],A=f[4],v=f[5],w=f[6],E=f[7],C=0;C<64;C++){if(C<16)l[C]=0|c[d+C];else{var k=l[C-15],F=(k<<25|k>>>7)^(k<<14|k>>>18)^k>>>3,m=l[C-2],S=(m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10;l[C]=F+l[C-7]+S+l[C-16]}var b=g&y^g&p^y&p,M=(g<<30|g>>>2)^(g<<19|g>>>13)^(g<<10|g>>>22),R=E+((A<<26|A>>>6)^(A<<21|A>>>11)^(A<<7|A>>>25))+(A&v^~A&w)+a[C]+l[C];E=w,w=v,v=A,A=x+R|0,x=p,p=y,y=g,g=R+(M+b)|0}f[0]=f[0]+g|0,f[1]=f[1]+y|0,f[2]=f[2]+p|0,f[3]=f[3]+x|0,f[4]=f[4]+A|0,f[5]=f[5]+v|0,f[6]=f[6]+w|0,f[7]=f[7]+E|0},CX:function(){var c=this.Jw,d=c.words,f=8*this.vX,g=8*c.sigBytes;return d[g>>>5]|=128<<24-g%32,d[14+(g+64>>>9<<4)]=t.floor(f/4294967296),d[15+(g+64>>>9<<4)]=f,c.sigBytes=4*d.length,this.xX(),this.FX},clone:function(){var c=n.clone.call(this);return c.FX=this.FX.clone(),c}});e.SHA256=n.kX(u),e.HmacSHA256=n.TX(u)}(Math),r.SHA256}(Zi.exports),Qb=function(r){return e=(t=r).lib.WordArray,i=t.algo,s=i.SHA256,n=i.SHA224=s.extend({wX:function(){this.FX=new e.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},CX:function(){var o=s.CX.call(this);return o.sigBytes-=4,o}}),t.SHA224=s.kX(n),t.HmacSHA224=s.TX(n),r.SHA224;var t,e,i,s,n}(Zi.exports),Or=Zi.exports.enc.Hex,t0=Zi.exports.enc.Utf8;(function(r){return e=(t=r).lib.WordArray,t.enc.Base64={stringify:function(i){var s=i.words,n=i.sigBytes,o=this.IX;i.clamp();for(var h=[],a=0;a<n;a+=3)for(var l=(s[a>>>2]>>>24-a%4*8&255)<<16|(s[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|s[a+2>>>2]>>>24-(a+2)%4*8&255,u=0;u<4&&a+.75*u<n;u++)h.push(o.charAt(l>>>6*(3-u)&63));var c=o.charAt(64);if(c)for(;h.length%4;)h.push(c);return h.join("")},parse:function(i){var s=i.length,n=this.IX,o=this.PX;if(!o){o=this.PX=[];for(var h=0;h<n.length;h++)o[n.charCodeAt(h)]=h}var a=n.charAt(64);if(a){var l=i.indexOf(a);l!==-1&&(s=l)}return function(u,c,d){for(var f=[],g=0,y=0;y<c;y++)if(y%4){var p=d[u.charCodeAt(y-1)]<<y%4*2|d[u.charCodeAt(y)]>>>6-y%4*2;f[g>>>2]|=p<<24-g%4*8,g++}return e.create(f,g)}(i,s,o)},IX:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},r.enc.Base64;var t,e})(Zi.exports);(function(r){(function(t){var e=r,i=e.lib,s=i.WordArray,n=i.Hasher,o=e.algo,h=[];(function(){for(var f=0;f<64;f++)h[f]=4294967296*t.abs(t.sin(f+1))|0})();var a=o.MD5=n.extend({wX:function(){this.FX=new s.init([1732584193,4023233417,2562383102,271733878])},_X:function(f,g){for(var y=0;y<16;y++){var p=g+y,x=f[p];f[p]=16711935&(x<<8|x>>>24)|4278255360&(x<<24|x>>>8)}var A=this.FX.words,v=f[g+0],w=f[g+1],E=f[g+2],C=f[g+3],k=f[g+4],F=f[g+5],m=f[g+6],S=f[g+7],b=f[g+8],M=f[g+9],R=f[g+10],T=f[g+11],z=f[g+12],P=f[g+13],_=f[g+14],V=f[g+15],B=A[0],I=A[1],L=A[2],U=A[3];B=l(B,I,L,U,v,7,h[0]),U=l(U,B,I,L,w,12,h[1]),L=l(L,U,B,I,E,17,h[2]),I=l(I,L,U,B,C,22,h[3]),B=l(B,I,L,U,k,7,h[4]),U=l(U,B,I,L,F,12,h[5]),L=l(L,U,B,I,m,17,h[6]),I=l(I,L,U,B,S,22,h[7]),B=l(B,I,L,U,b,7,h[8]),U=l(U,B,I,L,M,12,h[9]),L=l(L,U,B,I,R,17,h[10]),I=l(I,L,U,B,T,22,h[11]),B=l(B,I,L,U,z,7,h[12]),U=l(U,B,I,L,P,12,h[13]),L=l(L,U,B,I,_,17,h[14]),B=u(B,I=l(I,L,U,B,V,22,h[15]),L,U,w,5,h[16]),U=u(U,B,I,L,m,9,h[17]),L=u(L,U,B,I,T,14,h[18]),I=u(I,L,U,B,v,20,h[19]),B=u(B,I,L,U,F,5,h[20]),U=u(U,B,I,L,R,9,h[21]),L=u(L,U,B,I,V,14,h[22]),I=u(I,L,U,B,k,20,h[23]),B=u(B,I,L,U,M,5,h[24]),U=u(U,B,I,L,_,9,h[25]),L=u(L,U,B,I,C,14,h[26]),I=u(I,L,U,B,b,20,h[27]),B=u(B,I,L,U,P,5,h[28]),U=u(U,B,I,L,E,9,h[29]),L=u(L,U,B,I,S,14,h[30]),B=c(B,I=u(I,L,U,B,z,20,h[31]),L,U,F,4,h[32]),U=c(U,B,I,L,b,11,h[33]),L=c(L,U,B,I,T,16,h[34]),I=c(I,L,U,B,_,23,h[35]),B=c(B,I,L,U,w,4,h[36]),U=c(U,B,I,L,k,11,h[37]),L=c(L,U,B,I,S,16,h[38]),I=c(I,L,U,B,R,23,h[39]),B=c(B,I,L,U,P,4,h[40]),U=c(U,B,I,L,v,11,h[41]),L=c(L,U,B,I,C,16,h[42]),I=c(I,L,U,B,m,23,h[43]),B=c(B,I,L,U,M,4,h[44]),U=c(U,B,I,L,z,11,h[45]),L=c(L,U,B,I,V,16,h[46]),B=d(B,I=c(I,L,U,B,E,23,h[47]),L,U,v,6,h[48]),U=d(U,B,I,L,S,10,h[49]),L=d(L,U,B,I,_,15,h[50]),I=d(I,L,U,B,F,21,h[51]),B=d(B,I,L,U,z,6,h[52]),U=d(U,B,I,L,C,10,h[53]),L=d(L,U,B,I,R,15,h[54]),I=d(I,L,U,B,w,21,h[55]),B=d(B,I,L,U,b,6,h[56]),U=d(U,B,I,L,V,10,h[57]),L=d(L,U,B,I,m,15,h[58]),I=d(I,L,U,B,P,21,h[59]),B=d(B,I,L,U,k,6,h[60]),U=d(U,B,I,L,T,10,h[61]),L=d(L,U,B,I,E,15,h[62]),I=d(I,L,U,B,M,21,h[63]),A[0]=A[0]+B|0,A[1]=A[1]+I|0,A[2]=A[2]+L|0,A[3]=A[3]+U|0},CX:function(){var f=this.Jw,g=f.words,y=8*this.vX,p=8*f.sigBytes;g[p>>>5]|=128<<24-p%32;var x=t.floor(y/4294967296),A=y;g[15+(p+64>>>9<<4)]=16711935&(x<<8|x>>>24)|4278255360&(x<<24|x>>>8),g[14+(p+64>>>9<<4)]=16711935&(A<<8|A>>>24)|4278255360&(A<<24|A>>>8),f.sigBytes=4*(g.length+1),this.xX();for(var v=this.FX,w=v.words,E=0;E<4;E++){var C=w[E];w[E]=16711935&(C<<8|C>>>24)|4278255360&(C<<24|C>>>8)}return v},clone:function(){var f=n.clone.call(this);return f.FX=this.FX.clone(),f}});function l(f,g,y,p,x,A,v){var w=f+(g&y|~g&p)+x+v;return(w<<A|w>>>32-A)+g}function u(f,g,y,p,x,A,v){var w=f+(g&p|y&~p)+x+v;return(w<<A|w>>>32-A)+g}function c(f,g,y,p,x,A,v){var w=f+(g^y^p)+x+v;return(w<<A|w>>>32-A)+g}function d(f,g,y,p,x,A,v){var w=f+(y^(g|~p))+x+v;return(w<<A|w>>>32-A)+g}e.MD5=n.kX(a),e.HmacMD5=n.TX(a)})(Math),r.MD5})(Zi.exports);(function(r){return e=(t=r).lib,i=e.WordArray,s=e.Hasher,n=t.algo,o=[],h=n.SHA1=s.extend({wX:function(){this.FX=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_X:function(a,l){for(var u=this.FX.words,c=u[0],d=u[1],f=u[2],g=u[3],y=u[4],p=0;p<80;p++){if(p<16)o[p]=0|a[l+p];else{var x=o[p-3]^o[p-8]^o[p-14]^o[p-16];o[p]=x<<1|x>>>31}var A=(c<<5|c>>>27)+y+o[p];A+=p<20?1518500249+(d&f|~d&g):p<40?1859775393+(d^f^g):p<60?(d&f|d&g|f&g)-1894007588:(d^f^g)-899497514,y=g,g=f,f=d<<30|d>>>2,d=c,c=A}u[0]=u[0]+c|0,u[1]=u[1]+d|0,u[2]=u[2]+f|0,u[3]=u[3]+g|0,u[4]=u[4]+y|0},CX:function(){var a=this.Jw,l=a.words,u=8*this.vX,c=8*a.sigBytes;return l[c>>>5]|=128<<24-c%32,l[14+(c+64>>>9<<4)]=Math.floor(u/4294967296),l[15+(c+64>>>9<<4)]=u,a.sigBytes=4*l.length,this.xX(),this.FX},clone:function(){var a=s.clone.call(this);return a.FX=this.FX.clone(),a}}),t.SHA1=s.kX(h),t.HmacSHA1=s.TX(h),r.SHA1;var t,e,i,s,n,o,h})(Zi.exports);var Jl,e0,i0;e0=(Jl=Zi.exports).lib.Base,i0=Jl.enc.Utf8,Jl.algo.HMAC=e0.extend({init:function(r,t){r=this.DX=new r.init,typeof t=="string"&&(t=i0.parse(t));var e=r.blockSize,i=4*e;t.sigBytes>i&&(t=r.finalize(t)),t.clamp();for(var s=this.BX=t.clone(),n=this.LX=t.clone(),o=s.words,h=n.words,a=0;a<e;a++)o[a]^=1549556828,h[a]^=909522486;s.sigBytes=n.sigBytes=i,this.reset()},reset:function(){var r=this.DX;r.reset(),r.update(this.LX)},update:function(r){return this.DX.update(r),this},finalize:function(r){var t=this.DX,e=t.finalize(r);return t.reset(),t.finalize(this.BX.clone().concat(e))}}),function(r){return i=(e=(t=r).lib).Base,s=e.WordArray,o=(n=t.algo).MD5,h=n.EvpKDF=i.extend({cfg:i.extend({keySize:4,hasher:o,iterations:1}),init:function(a){this.cfg=this.cfg.extend(a)},compute:function(a,l){for(var u,c=this.cfg,d=c.hasher.create(),f=s.create(),g=f.words,y=c.keySize,p=c.iterations;g.length<y;){u&&d.update(u),u=d.update(a).finalize(l),d.reset();for(var x=1;x<p;x++)u=d.finalize(u),d.reset();f.concat(u)}return f.sigBytes=4*y,f}}),t.EvpKDF=function(a,l,u){return h.create(u).compute(a,l)},r.EvpKDF;var t,e,i,s,n,o,h}(Zi.exports);(function(r){r.lib.Cipher||function(t){var e=r,i=e.lib,s=i.Base,n=i.WordArray,o=i.BufferedBlockAlgorithm,h=e.enc;h.Utf8;var a=h.Base64,l=e.algo.EvpKDF,u=i.Cipher=o.extend({cfg:s.extend(),createEncryptor:function(w,E){return this.create(this.RX,w,E)},createDecryptor:function(w,E){return this.create(this.EX,w,E)},init:function(w,E,C){this.cfg=this.cfg.extend(C),this.zX=w,this.VX=E,this.reset()},reset:function(){o.reset.call(this),this.wX()},process:function(w){return this.bX(w),this.xX()},finalize:function(w){return w&&this.bX(w),this.CX()},keySize:4,ivSize:4,RX:1,EX:2,kX:function(){function w(E){return typeof E=="string"?v:x}return function(E){return{encrypt:function(C,k,F){return w(k).encrypt(E,C,k,F)},decrypt:function(C,k,F){return w(k).decrypt(E,C,k,F)}}}}()});i.StreamCipher=u.extend({CX:function(){return this.xX(!0)},blockSize:1});var c=e.mode={},d=i.BlockCipherMode=s.extend({createEncryptor:function(w,E){return this.Encryptor.create(w,E)},createDecryptor:function(w,E){return this.Decryptor.create(w,E)},init:function(w,E){this.OX=w,this.NX=E}}),f=c.CBC=function(){var w=d.extend();function E(C,k,F){var m,S=this.NX;S?(m=S,this.NX=void 0):m=this.GX;for(var b=0;b<F;b++)C[k+b]^=m[b]}return w.Encryptor=w.extend({processBlock:function(C,k){var F=this.OX,m=F.blockSize;E.call(this,C,k,m),F.encryptBlock(C,k),this.GX=C.slice(k,k+m)}}),w.Decryptor=w.extend({processBlock:function(C,k){var F=this.OX,m=F.blockSize,S=C.slice(k,k+m);F.decryptBlock(C,k),E.call(this,C,k,m),this.GX=S}}),w}(),g=(e.pad={}).Pkcs7={pad:function(w,E){for(var C=4*E,k=C-w.sigBytes%C,F=k<<24|k<<16|k<<8|k,m=[],S=0;S<k;S+=4)m.push(F);var b=n.create(m,k);w.concat(b)},unpad:function(w){var E=255&w.words[w.sigBytes-1>>>2];w.sigBytes-=E}};i.BlockCipher=u.extend({cfg:u.cfg.extend({mode:f,padding:g}),reset:function(){var w;u.reset.call(this);var E=this.cfg,C=E.iv,k=E.mode;this.zX==this.RX?w=k.createEncryptor:(w=k.createDecryptor,this.MX=1),this.WX&&this.WX.UX==w?this.WX.init(this,C&&C.words):(this.WX=w.call(k,this,C&&C.words),this.WX.UX=w)},_X:function(w,E){this.WX.processBlock(w,E)},CX:function(){var w,E=this.cfg.padding;return this.zX==this.RX?(E.pad(this.Jw,this.blockSize),w=this.xX(!0)):(w=this.xX(!0),E.unpad(w)),w},blockSize:4});var y=i.CipherParams=s.extend({init:function(w){this.mixIn(w)},toString:function(w){return(w||this.formatter).stringify(this)}}),p=(e.format={}).OpenSSL={stringify:function(w){var E=w.ciphertext,C=w.salt;return(C?n.create([1398893684,1701076831]).concat(C).concat(E):E).toString(a)},parse:function(w){var E,C=a.parse(w),k=C.words;return k[0]==1398893684&&k[1]==1701076831&&(E=n.create(k.slice(2,4)),k.splice(0,4),C.sigBytes-=16),y.create({ciphertext:C,salt:E})}},x=i.SerializableCipher=s.extend({cfg:s.extend({format:p}),encrypt:function(w,E,C,k){k=this.cfg.extend(k);var F=w.createEncryptor(C,k),m=F.finalize(E),S=F.cfg;return y.create({ciphertext:m,key:C,iv:S.iv,algorithm:w,mode:S.mode,padding:S.padding,blockSize:w.blockSize,formatter:k.format})},decrypt:function(w,E,C,k){return k=this.cfg.extend(k),E=this.YX(E,k.format),w.createDecryptor(C,k).finalize(E.ciphertext)},YX:function(w,E){return typeof w=="string"?E.parse(w,this):w}}),A=(e.kdf={}).OpenSSL={execute:function(w,E,C,k){k||(k=n.random(8));var F=l.create({keySize:E+C}).compute(w,k),m=n.create(F.words.slice(E),4*C);return F.sigBytes=4*E,y.create({key:F,iv:m,salt:k})}},v=i.PasswordBasedCipher=x.extend({cfg:x.cfg.extend({kdf:A}),encrypt:function(w,E,C,k){var F=(k=this.cfg.extend(k)).kdf.execute(C,w.keySize,w.ivSize);k.iv=F.iv;var m=x.encrypt.call(this,w,E,F.key,k);return m.mixIn(F),m},decrypt:function(w,E,C,k){k=this.cfg.extend(k),E=this.YX(E,k.format);var F=k.kdf.execute(C,w.keySize,w.ivSize,E.salt);return k.iv=F.iv,x.decrypt.call(this,w,E,F.key,k)}})}()})(Zi.exports);var s0=function(r){return function(){var t=r,e=t.lib.BlockCipher,i=t.algo,s=[],n=[],o=[],h=[],a=[],l=[],u=[],c=[],d=[],f=[];(function(){for(var p=[],x=0;x<256;x++)p[x]=x<128?x<<1:x<<1^283;var A=0,v=0;for(x=0;x<256;x++){var w=v^v<<1^v<<2^v<<3^v<<4;w=w>>>8^255&w^99,s[A]=w,n[w]=A;var E=p[A],C=p[E],k=p[C],F=257*p[w]^16843008*w;o[A]=F<<24|F>>>8,h[A]=F<<16|F>>>16,a[A]=F<<8|F>>>24,l[A]=F,F=16843009*k^65537*C^257*E^16843008*A,u[w]=F<<24|F>>>8,c[w]=F<<16|F>>>16,d[w]=F<<8|F>>>24,f[w]=F,A?(A=E^p[p[p[k^E]]],v^=p[p[v]]):A=v=1}})();var g=[0,1,2,4,8,16,32,64,128,27,54],y=i.AES=e.extend({wX:function(){if(!this.HX||this.$X!==this.VX){for(var p=this.$X=this.VX,x=p.words,A=p.sigBytes/4,v=4*((this.HX=A+6)+1),w=this.XX=[],E=0;E<v;E++)E<A?w[E]=x[E]:(F=w[E-1],E%A?A>6&&E%A==4&&(F=s[F>>>24]<<24|s[F>>>16&255]<<16|s[F>>>8&255]<<8|s[255&F]):(F=s[(F=F<<8|F>>>24)>>>24]<<24|s[F>>>16&255]<<16|s[F>>>8&255]<<8|s[255&F],F^=g[E/A|0]<<24),w[E]=w[E-A]^F);for(var C=this.jX=[],k=0;k<v;k++){if(E=v-k,k%4)var F=w[E];else F=w[E-4];C[k]=k<4||E<=4?F:u[s[F>>>24]]^c[s[F>>>16&255]]^d[s[F>>>8&255]]^f[s[255&F]]}}},encryptBlock:function(p,x){this.ZX(p,x,this.XX,o,h,a,l,s)},decryptBlock:function(p,x){var A=p[x+1];p[x+1]=p[x+3],p[x+3]=A,this.ZX(p,x,this.jX,u,c,d,f,n),A=p[x+1],p[x+1]=p[x+3],p[x+3]=A},ZX:function(p,x,A,v,w,E,C,k){for(var F=this.HX,m=p[x]^A[0],S=p[x+1]^A[1],b=p[x+2]^A[2],M=p[x+3]^A[3],R=4,T=1;T<F;T++){var z=v[m>>>24]^w[S>>>16&255]^E[b>>>8&255]^C[255&M]^A[R++],P=v[S>>>24]^w[b>>>16&255]^E[M>>>8&255]^C[255&m]^A[R++],_=v[b>>>24]^w[M>>>16&255]^E[m>>>8&255]^C[255&S]^A[R++],V=v[M>>>24]^w[m>>>16&255]^E[S>>>8&255]^C[255&b]^A[R++];m=z,S=P,b=_,M=V}z=(k[m>>>24]<<24|k[S>>>16&255]<<16|k[b>>>8&255]<<8|k[255&M])^A[R++],P=(k[S>>>24]<<24|k[b>>>16&255]<<16|k[M>>>8&255]<<8|k[255&m])^A[R++],_=(k[b>>>24]<<24|k[M>>>16&255]<<16|k[m>>>8&255]<<8|k[255&S])^A[R++],V=(k[M>>>24]<<24|k[m>>>16&255]<<16|k[S>>>8&255]<<8|k[255&b])^A[R++],p[x]=z,p[x+1]=P,p[x+2]=_,p[x+3]=V},keySize:8});t.AES=e.kX(y)}(),r.AES}(Zi.exports),r0=function(r){return r.mode.CTR=(e=(t=r.lib.BlockCipherMode.extend()).Encryptor=t.extend({processBlock:function(i,s){var n=this.OX,o=n.blockSize,h=this.NX,a=this.QX;h&&(a=this.QX=h.slice(0),this.NX=void 0);var l=a.slice(0);n.encryptBlock(l,0),a[o-1]=a[o-1]+1|0;for(var u=0;u<o;u++)i[s+u]^=l[u]}}),t.Decryptor=e,t),r.mode.CTR;var t,e}(Zi.exports),n0=function(r){return function(){if(typeof ArrayBuffer=="function"){var t=r.lib.WordArray,e=t.init,i=t.init=function(s){if(s instanceof ArrayBuffer&&(s=new Uint8Array(s)),(s instanceof Int8Array||typeof Uint8ClampedArray<"u"&&s instanceof Uint8ClampedArray||s instanceof Int16Array||s instanceof Uint16Array||s instanceof Int32Array||s instanceof Uint32Array||s instanceof Float32Array||s instanceof Float64Array)&&(s=new Uint8Array(s.buffer,s.byteOffset,s.byteLength)),s instanceof Uint8Array){for(var n=s.byteLength,o=[],h=0;h<n;h++)o[h>>>2]|=s[h]<<24-h%4*8;e.call(this,o,n)}else e.apply(this,arguments)};i.prototype=t}}(),r.lib.WordArray}(Zi.exports),o0=function(r){return r.pad.NoPadding={pad:function(){},unpad:function(){}},r.pad.NoPadding}(Zi.exports);const Kb={"-4":["MDQxMmQ1MWU5MjFhYTMzODUwMWE4ZGYzN2ViZTE4NTU3ZDViYmRlZDg1Yzk0OGI3YTJkMDBmZTNhZGVlMjdjY2VmNzBiMWVlOWI3MDZjMTIwYTAzZDZlZTNkNmYyOTc5Y2E2NGEzN2Y3YjY4N2E1ZjljZWY2ODYxN2I1NWU5ZmJjMA=="],"-3":["MjAxODAxMjA="],"-2":["aHR0cHM6Ly9qc2xpY2Vuc2luZy5saWdodG5pbmdjaGFydC5jb20vc2Vzc2lvbg==","aHR0cHM6Ly9saWdodG5pbmdjaGFydC5jb20vanMtY2hhcnRzL2RvY3MvdHJvdWJsZXNob290aW5nL3Jlc3RyaWN0ZWQtZmVhdHVyZXMv","aHR0cHM6Ly9saWdodG5pbmdjaGFydC5jb20vanMtY2hhcnRzLw=="],"-1":["WE1MSHR0cFJlcXVlc3Q=","ZG9jdW1lbnQ=","ZGVmYXVsdFZpZXc=","YQ==","Yg==","bGljZW5zZV9leHBpcmF0aW9uX2RhdGU=","bG9jYXRpb24=","aG9zdG5hbWU=","dGVzdF9kb21haW4=","ZG9tYWlucw==","Y3J5cHRv","U2lnbmF0dXJl","RUNEU0E=","U0hBMjI0d2l0aEVDRFNB","YWxn","Y3VydmU=","c2VjcDI1Nmsx","YWRkRXZlbnRMaXN0ZW5lcg==","cmVtb3ZlRXZlbnRMaXN0ZW5lcg==","bG9hZGVuZA==","ZXJyb3I=","YWJvcnQ=","dGltZW91dA==","cmVzcG9uc2VUZXh0","Q29udGVudC1UeXBl","YXBwbGljYXRpb24vanNvbg==","TWVzc2FnZURpZ2VzdA==","c2hhMjU2","Y3J5cHRvanM=","dXBkYXRlU3RyaW5n","ZGlnZXN0","Y29tcGFueQ==","YXBwVGl0bGU=","bGNqcy1zZXNzaW9u","bG9jYWxTdG9yYWdl","Z2V0SXRlbQ==","c2V0SXRlbQ==","ZA==","dA==","bGNqcy1zZXNzaW9uLTI="],0:["TGljZW5zZQ==","IA==","a2V5","aGFz","ZXhwaXJlZA==","Lg==","dmVyc2lvbg==","aXM=","dG9v","bmV3","b2xk","b3I=","aW52YWxpZA==","MDAwMQ==","SW52YWxpZA==","bnVtYmVy","b2Y=","ZG9tYWlucw==","ZGVwbG95bWVudA==","aW4=","ZG9tYWlu","RGVwbG95bWVudA==","ZG9tYWlu","dmFsaWRhdGlvbg==","ZmFpbGVk","Og==","UE9TVA==","c2VydmVy","cmVzcG9uZGVk","d2l0aA==","dW5leHBlY3RlZA==","dmFsdWU=","cmVxdWVzdA==","VEVTVA==","REVQTE9ZTUVOVA==","S2V5","VGFtcGVyaW5n","YmVlbg==","ZGV0ZWN0ZWQ=","TWlzc2luZw==","TGljZW5zZQ==","aW5mb3JtYXRpb24=","ZG9lcw==","bm90","aW5jbHVkZQ==","cGVybWlzc2lvbg==","dG8=","dXNl","Q2hhcnQ=","M0Q=","WFk=","RGF0YUdyaWQ=","TWFw","UG9sYXI=","RnVubmVs","R2F1Z2U=","UGll","UHlyYW1pZA==","U3BpZGVy","Zm9y","dGhpcw==","VHJhZGluZw==","ZmVhdHVyZXM=","Y2xpY2s=","aGVyZQ==","bW9yZQ==","c3VwcGxpZWQ=","Z2V0","bGljZW5zZQ==","VHJlZQ=="],1:["aHR0cHM6Ly9qc2xpY2Vuc2luZy5saWdodG5pbmdjaGFydC5jb20vc2FuZGJveA=="]},ni=X,q=(...r)=>r.slice(1).reduce((t,e)=>t+ni.atob(Kb[r[0]][e].toString()),"");let Ke,rt,h0,kr=new Uint8Array([]);class t2{set e(t){Ke=t}get e(){rt={qd:!1,tf:!1,if:!1,sf:!1,ef:!1,hf:!1,rf:!1,nf:!1,af:!1,lf:!1,uf:!1,cf:!1,df:!1,ff:!1,Af:!1,gf:!1,mf:!1,yf:!1,pf:!1,Sf:!1,vf:!1,bf:!1,xf:!1,Mf:!1};const t=kr.length,e=t>=1?kr[0]:void 0,i=t>=2?kr[1]:void 0,s=t>=3?kr[2]:void 0;return e!==void 0&&(rt.qd=!!(1&e),rt.tf=!!(2&e),rt.if=!!(4&e),rt.sf=!!(8&e),rt.ef=!!(16&e),rt.hf=!!(32&e),rt.rf=!!(64&e),rt.nf=!!(128&e)),i!==void 0&&(rt.af=!!(1&i),rt.lf=!!(2&i),rt.uf=!!(4&i),rt.cf=!!(8&i),rt.df=!!(16&i),rt.ff=!!(32&i),rt.Af=!!(64&i),rt.gf=!!(128&i)),s!==void 0&&(rt.mf=!!(1&s),rt.yf=!!(2&s),rt.pf=!!(4&s),rt.Sf=!!(8&s),rt.vf=!!(16&s),rt.bf=!!(32&s),rt.xf=!!(64&s),rt.Mf=!!(128&s)),rt.hf}set l(t){h0=t}get l(){return h0}}let cn=!1;const dn=(r,t)=>{const e=new RegExp(`.{${t}}`,"g");return(r.match(e)||[]).map(i=>parseInt(i,16))},wu=r=>{if(r.byteLength===4)return`${r[0].toString().padStart(2,"0")}${r[1].toString().padStart(2,"0")}${r[2].toString().padStart(2,"0")}${r[3].toString().padStart(2,"0")}`},Oa=r=>r.getFullYear().toString()+(r.getMonth()+1).toString().padStart(2,"0")+r.getDate().toString().padStart(2,"0"),Bc=r=>{const t={},e=r.split("-");if(e.length!==3)return{JX:q(0,0,1,7,1,12,5)};let i=0;const s=Uint8Array.from(atob(e[1]),g=>g.charCodeAt(0));i+=1;const n=s.subarray(i,i+=20),o=new DataView(s.buffer).getUint16(i,!0);i+=2;const h=Uint8Array.from(Array(o));for(let g=0;g<o;g+=1)h[g]=s[g+i]^n[g%n.byteLength];const a=new DataView(h.buffer);t.KX=h,i=0;const l=Uint8Array.from(Array(a.getUint16(i,!0)));i+=2,l.set(h.subarray(i,i+=l.byteLength)),kr=new Uint8Array(l);const u=wu(h.subarray(i,i+=4)),c=q(-3,0);if(!u)return{JX:q(0,0,1,7,1,12,5)};if(u<c)return{JX:q(0,40,1,2,1,7,1,8,1,10,1,59,1,60,1,6,5)};if(8&l[0]){const g=wu(h.subarray(i,i+=4)),y=Oa(new Date);if(!g)return{JX:q(0,0,1,7,1,12,5)};if(g<y)return{JX:q(0,0,1,2,1,3,1,4,5),qX:q(-2,2)}}t.tj=i;const d=`${e[0]}-${e[1]}`,f=Array.prototype.reduce.call(atob(e[2]),(g,y)=>g+`0${y.charCodeAt(0).toString(16)}`.slice(-2),"");return hr(d,f)?t:{JX:q(0,0,1,7,1,12,5)}},a0=r=>{const t=r.slice(0,4);let e=r.slice(5);switch(t){case"0001":{e=e.replace(/-/g,"");const i=Uint8Array.from(dn(e,2)),s=i.slice(36,40),n=new Uint8Array(4),o=(u=>{let c;const d=[];for(let g=0;g<256;g+=1){c=g;for(let y=0;y<8;y+=1)c=1&c?3988292384^c>>>1:c>>>1;d[g]=c}let f=-1;for(let g=0;g<u.length;g+=1)f=f>>>8^d[255&(f^u[g])];return(-1^f)>>>0})(i.slice(0,36));new DataView(n.buffer).setUint32(0,o,!0);const h=i.slice(28,34);let a=0;for(let u=h.length-1;u>0;u-=1)a+=h[u]*2**(8*u);const l=new Date(a);if(Oa(l)<q(-3,0))return{JX:q(0,0,1,2,1,3,1,4,5),qX:q(-2,2)};if(s.every((u,c)=>n[c]===u))return{};break}case"0002":return Bc(r);default:return{JX:q(0,0,1,2,1,6,1,7,1,8,1,9,1,11,1,10,5)}}return{JX:q(0,0,1,2,1,7,1,12,5)}},l0=r=>{if(!r)return{JX:q(0,14,1,15,1,16,1,17,1,19,1,18,1,2,5)};const t=(r[q(-1,9)]||r[q(-1,37)]).map(s=>(s||"").trim());if(t.indexOf(ni[q(-1,6)][q(-1,7)])>-1)return{ij:!0};const e=t.filter(s=>s.indexOf("*")>-1);if(d0(ni[q(-1,6)][q(-1,7)],e))return{ij:!0};const i=r[q(-1,8)]||r[q(-1,38)];if(i!==""&&i!=null){if(d0(ni[q(-1,6)][q(-1,7)],[i]))return{ij:!1};if(i===ni[q(-1,6)][q(-1,7)])return{ij:!1}}return{JX:q(0,14,1,20,5)}},hr=(r,t)=>{const e=new Ga("secp256k1").keyFromPublic(q(-4,0),"hex"),i=Qb(r).toString();return e.verify(i,t)},u0=r=>{switch(r.slice(0,4)){case"0001":return(t=>{let e,i="";try{const n=t.split("-"),o=n[1],h=n[2],a=n[3];if(!hr(h,a))return{JX:q(0,21,1,2,1,7,1,12,5)};const l=Or.parse(h);i=s0.decrypt({ciphertext:Or.parse(o)},l,{mode:r0,padding:o0,iv:Or.parse("00000000000000000000000000000001")}).toString(t0)}catch{return{JX:q(0,21,1,2,1,7,1,12,5)}}try{e=JSON.parse(i)}catch{return{JX:q(0,21,1,2,1,7,1,12,5)}}if(e[q(-1,5)]===void 0||e[q(-1,4)]===null||!e[q(-1,9)])return{JX:q(0,21,1,2,1,7,1,12,5)};const s=parseInt(q(-3,0),10)||Number(parseInt(q(-3,0),10));return e[q(-1,5)]<s?{JX:q(0,21,1,2,1,3,1,4,5)}:l0(e)})(r);case"0002":return(t=>{const e=Bc(t),i=e.KX,s=e.tj;if(e.JX||i===void 0||s===void 0)return e;let n,o="";try{const h=i.slice(e.tj,s+16),a=new DataView(h.buffer),l=new Int32Array(4);for(let x=0;x<l.length;x+=1)l[x]=a.getInt32(4*x,!1);const u=n0.create(Array.from(l)),c=s+16,d=i.slice(c,i.length),f=new DataView(d.buffer),g=new Int32Array(Math.floor(d.byteLength/4));for(let x=0;x<g.length;x+=1)g[x]=f.getInt32(4*x,!1);const y=n0.create(Array.from(g)),p=s0.decrypt({ciphertext:y},u,{mode:r0,padding:o0,iv:Or.parse("00000000000000000000000000000001")});o=ni.atob(p.toString(t0))}catch{return{JX:q(0,21,1,2,1,7,1,12,5)}}try{n=JSON.parse(o)}catch{return{JX:q(0,21,1,2,1,7,1,12,5)}}return n[q(-1,37)]?l0(n):{JX:q(0,21,1,2,1,7,1,12,5)}})(r);default:return{JX:q(0,21,1,2,1,6,1,7,1,8,1,9,1,11,1,10,5)}}},c0=(r,t)=>{switch(r.slice(0,4)){case"0001":return((e,i)=>{if(!i)return{JX:q(0,39,1,40,1,41,5)};const s=e.split("-"),n=s[1].slice(1),o=s[2],h=s[3];if(!hr(`${n}-${o}`,h))return{JX:q(0,21,1,2,1,7,1,12,5)};const a=Uint8Array.from(dn(o,2));let l=0;for(let p=a.length-1;p>0;p-=1)l+=a[p]*2**(8*p);if(l<(parseInt(q(-3,0),10)||Number(parseInt(q(-3,0),10))))return{JX:q(0,21,1,2,1,3,1,4,5)};const u=Int32Array.from(dn(n,8)),c=fa(i[q(-1,31)]).toString(Or),d=Int32Array.from(dn(c,8)),f=fa(i[q(-1,32)]).toString(Or),g=Int32Array.from(dn(f,8)),y=new Int32Array(d.length);for(let p=0;p<y.length;p+=1)y[p]=d[p]^g[p];return u.every((p,x)=>y[x]===p)?{}:{JX:q(0,21,1,2,1,7,1,12,5)}})(r,t);case"0002":return((e,i)=>{if(!i)return{JX:q(0,39,1,40,1,41,5)};const s=Bc(e),n=s.KX,o=s.tj;if(s.JX||n===void 0||o===void 0)return s;const h=n.slice(o,n.length),a=new DataView(h.buffer),l=new Int32Array(8);for(let y=0;y<l.length;y+=1)l[y]=a.getInt32(4*y,!1);const u=fa(i[q(-1,31)]).toString(Or),c=Int32Array.from(dn(u,8)),d=fa(i[q(-1,32)]).toString(Or),f=Int32Array.from(dn(d,8)),g=new Int32Array(c.length);for(let y=0;y<g.length;y+=1)g[y]=c[y]^f[y];return l.every((y,p)=>g[p]===y)?{}:{JX:q(0,21,1,2,1,7,1,12,5)}})(r,t);default:return{JX:q(0,21,1,2,1,6,1,7,1,8,1,9,1,11,1,10,5)}}},sr=(r,t,e=!0,i)=>{cn=!1,t.so();const s=t.Gr,n=!!s&&(s===X.document.body||X.document.body.contains(s)),o=s&&n?s:document.body;if(Array.from(o.children).find(h=>h.id==="lcjs-error")===void 0){const h=X.document.createElement("div");h.id="lcjs-error",o.append(h),h.style.position="absolute",h.style.top="0px",h.style.left="0px",h.style.width="100%",h.style.height="100%",h.style.backgroundColor="black",h.style.boxSizing="border-box",h.style.padding="20px",h.style.font="Arial",h.style.fontSize="20px";let a,l=(r||"LICENSE_ERROR").toLowerCase().split("_").join(" ");if(l=(e?q(0,0,1,2,1,23,1,24,25,1):"")+l.charAt(0).toUpperCase()+l.substr(1),i){const u=X.document.createElement("a");u.href=i,a=u}else a=X.document.createElement("p1");h.append(a),a.innerHTML=l,a.style.color="red"}},rr=(r,t,e)=>{t?(r[q(-1,17)](q(-1,19),e),r[q(-1,17)](q(-1,20),e),r[q(-1,17)](q(-1,21),e),r[q(-1,17)](q(-1,22),e)):(r[q(-1,18)](q(-1,19),e),r[q(-1,18)](q(-1,20),e),r[q(-1,18)](q(-1,21),e),r[q(-1,18)](q(-1,22),e))},d0=(r,t)=>{const e=r.split(".").reverse();return t.some(i=>{const s=i.split(".").reverse();let n=!1;const o=s.findIndex(a=>a==="*"),h=e.every((a,l)=>!(!n&&(!(l<s.length)||(n=s[l]==="*"&&l+1>2,!n&&a!==s[l]))));return!(o>e.length-1||!h)})},e2=new Map,i2=(r,t)=>{const e=typeof r=="object"?r.license:r,i=typeof r=="object"?r.licenseInformation:t,s=typeof r=="object"?r:void 0,n=new t2;n.e=e;let o=e2.get(e||"E");return o||(o=((h,a)=>{let l,u,c=!1,d=!1,f=!1,g=!1,y="",p=!1,x=!1;try{if(Ke){const C=(k=>{if(!Ke)return;const F=Ke.split("-");if(F.length>0)switch(F[0]){case"0001":return"0001";case"0002":return"0002";case"T001":return"T001";default:return}})();if(C==="0001"){kr=new Uint8Array([2]);const k=(F=>{if(!Ke)return;const m=Ke.split("-");return m.length===4?m[1].startsWith("m")?2:1:0})();if(k===1){const F=u0(Ke);f=!F.ij,l=F,c=!0}else k===2?(l=c0(Ke,h),d=!0):(cn=!0,l=a0(Ke),g=!0)}else if(C==="0002"){const k=(F=>{if(!Ke)return;const m=Ke.split("-");return m.length>=2?Uint8Array.from(atob(m[1]),S=>S.charCodeAt(0))[0]:void 0})();if(k===104)cn=!0,l=a0(Ke),g=!0;else if(k===189){const F=u0(Ke);f=!F.ij,l=F,c=!0}else k===159?(l=c0(Ke,h),d=!0):l={JX:q(0,0,1,7,1,12,5)}}else if(C==="T001"){const k=((m,S)=>{const b=Ke.split("-");if(b.length!==3)return{JX:q(0,0,1,7,1,12,5)};const M=`${b[1]}`,R=Array.prototype.reduce.call(atob(b[2]),(Q,ct)=>Q+`0${ct.charCodeAt(0).toString(16)}`.slice(-2),"");if(!hr(M,R))return{JX:q(0,0,1,7,1,12,5)};let T=0;const z=Uint8Array.from(atob(b[1]),Q=>Q.charCodeAt(T)),P=z.subarray(T,T+=20),_=new DataView(z.buffer).getUint16(T,!0);T+=2;const V=Uint8Array.from(Array(_));for(let Q=0;Q<_;Q+=1)V[Q]=z[Q+T]^P[Q%P.byteLength];T=0;const B=new DataView(V.buffer),I=wu(V.subarray(T,T+=4)),L=q(-3,0);if(!I)return{JX:q(0,0,1,7,1,12,5)};if(I<L)return{JX:q(0,40,1,2,1,7,1,8,1,10,1,59,1,60,1,6,5)};const U=new Date,Y=new Date;U.setDate(U.getDate()+1),Y.setDate(Y.getDate()-1);const O=Oa(Y),j=Oa(U);if(I<O||I>j)return{JX:q(0,0,1,2,1,3,1,4,5)};const $=B.getUint16(T,!0),Z=V.subarray(T+=2,T+$);if(kr=new Uint8Array(Z),S&&"dHJhZGVy"in S&&S.dHJhZGVy==="dGVjaG5pY2FsIGFuYWx5c2lz")return{sj:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="};if(S&&"logoGraphic"in S&&S.logoGraphic){const Q=S.logoGraphic.split("-");return Q.length===3&&hr(Q[0],Q[2])?{sj:Q[0]}:{JX:q(0,0,1,7,1,12,5)}}return{JX:q(0,0,1,7,1,12,5)}})(0,h);l=k;const F=k.sj;F&&a?(typeof F=="string"&&(a.l=F),c=!0):l={JX:q(0,0,1,7,1,12,5)}}else l={JX:q(0,0,1,7,1,12,5)}}else{const C=/^(10\.|172\.(1[6-9]|2[0-9]|3[0-1])|192\.168)\./;["localhost","127.0.0.1","::1"].includes(window.location.hostname)||C.test(window.location.hostname)?l={JX:q(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68),qX:q(-2,2)}:window.location.host===ni.atob("c3RhY2tzbmlwcGV0cy5uZXQ=")?(x=!0,p=!1,kr=new Uint8Array([38]),l={}):(x=!0,p=!0,kr=new Uint8Array([38]),l={})}}catch{l={JX:q(0,0,1,7,1,12,5)}}try{g&&(u=ni[q(-1,34)][q(-1,35)](q(-1,39))||void 0)}catch(C){ni.console.error(C)}let A=!1;if(u){const C=u.split("-");if(C.length===2&&hr(C[0],C[1])){const[k,F]=C[0].split(":").map(m=>Number(m));Date.now()-F<.95*k*1e3&&(A=!0)}}const v=!(x||p||l.JX||c||d||A),w=(()=>{const C=new ni[q(-1,0)];return C.open(q(0,26),q(-2,0)),C.setRequestHeader(q(-1,24),q(-1,25)),C.withCredentials=!0,C})(),E=new Xe;if(v){let C;try{C=parseInt(Ke?Ke.split("-")[1]:Math.floor(1e6*Math.random()).toString(),16)}catch{C=Math.floor(1e6*Math.random())}const k=Math.floor(1e6*Math.random());y=(C^k).toString();const F={};let m="",S="",b="";Ke=Ke||"";const M=q(-4,0);for(let T=0;T<Ke.length;T+=1){const z=Ke.charCodeAt(T)^M.charCodeAt(T);m+=String.fromCharCode(z)}const R=q(-3,0);for(let T=0;T<R.length;T+=1)S+=String.fromCharCode(R.charCodeAt(T)^M.charCodeAt(T));for(let T=0;T<y.length;T+=1)b+=String.fromCharCode(y.charCodeAt(T)^M.charCodeAt(T));F[q(-1,3)]=ni.btoa(m),F[q(-1,4)]=ni.btoa(S),F.h=ni.btoa(b),F.v=3,F.s=ni[q(-1,34)][q(-1,35)](q(-1,33))||void 0,w.send(JSON.stringify(F))}return(C,k)=>{const F=[],m={Nn:P=>{F.indexOf(P)>=0||(F.push(P),S())},Gn:P=>E.on("logoChange",P),Wn:P=>E.off(P)},S=()=>{F.forEach(P=>{const _=M(P);if(!_)return;const{ej:V,hj:B}=_,I=B?q(-2,1):void 0,L=`${q(0,40,1,42,1,43,1,44,1,45,1,46,1,47,1)}${V}${I?q(0,1,63,1,64,1,59,1,65,1,41):""}`;sr(L,R,!1,I)})},b=P=>P.toLowerCase().split("_").join(" "),M=P=>{var _;const V=(_=Object.entries(ot).find(B=>B[1]===P))===null||_===void 0?void 0:_[0];if(V){switch(P){case ot.if:return rt.qd||rt.if?void 0:{ej:b(V),hj:!0};case ot.rf:return rt.qd||rt.rf?void 0:{ej:b(V),hj:!0};case ot.nf:return rt.qd||rt.tf||rt.nf?void 0:{ej:b(V)};case ot.tf:return rt.qd||rt.tf?void 0:{ej:b(V)};case ot.df:return rt.qd||rt.tf||rt.df?void 0:{ej:b(V)};case ot.gf:return rt.qd||rt.tf||rt.gf?void 0:{ej:b(V)};case ot.Sf:return rt.qd||rt.tf||rt.Sf?void 0:{ej:b(V)};case ot.bf:return rt.qd||rt.tf||rt.bf?void 0:{ej:b(V)};case ot.xf:return rt.qd||rt.tf||rt.xf?void 0:{ej:b(V)};case ot.vf:return rt.qd||rt.tf||rt.vf?void 0:{ej:b(V)};case ot.lf:return rt.qd||rt.tf||rt.lf?void 0:{ej:b(V)};case ot.Af:return rt.qd||rt.tf||rt.Af?void 0:{ej:b(V)};case ot.cf:return rt.qd||rt.tf||rt.cf?void 0:{ej:b(V)};case ot.mf:return rt.qd||rt.tf||rt.mf?void 0:{ej:b(V)};case ot.pf:return rt.qd||rt.tf||rt.pf?void 0:{ej:b(V)};case ot.yf:return rt.qd||rt.tf||rt.yf?void 0:{ej:b(V)};case ot.af:return rt.qd||rt.tf||rt.af?void 0:{ej:b(V)};case ot.uf:return rt.qd||rt.tf||rt.uf?void 0:{ej:b(V)};case ot.ff:return rt.qd||rt.tf||rt.ff?void 0:{ej:b(V)};case ot.Mf:return rt.qd||rt.tf||rt.Mf?void 0:{ej:b(V)};case ot.qd:case ot.sf:case ot.hf:case ot.ef:return}return wo(0,"")}},R=new $b(k,C,m);l!=null&&l.JX&&sr(l.JX,R,void 0,l.qX);const T=P=>{if((P==null?void 0:P.type)==="error"&&u){const _=u.split("-");if(_.length===2&&hr(_[0],_[1])){const[,V]=_[0].split(":").map(B=>Number(B));if(V+9e5>Date.now())return cn=!1,void rr(w,!1,z)}}if(w.readyState===ni[q(-1,0)].DONE)if(w.status===200){const _=JSON.parse(w[q(-1,23)]);if(!hr(y+q(-3,0),_.h)){const V=q(0,0,1,27,1,28,1,29,1,30,1,31,5);sr(V,R)}ni[q(-1,34)][q(-1,36)](q(-1,39),_.t),ni[q(-1,34)][q(-1,36)](q(-1,33),_.s),cn=!1}else{let _="";try{_=P&&P.type!=="loadend"?q(0,0,1,23,1,32,1,24,5):JSON.parse(w[q(-1,23)]).message,rr(w,!1,z)}catch(V){console.error(V)}sr(q(0,0,1,2,1,7,1,12,5)+_,R)}},z=P=>{T(P)};if(rr(w,!0,z),v?setTimeout(()=>{if(cn){let P=!0;if(u){const _=u.split("-");if(_.length===2&&hr(_[0],_[1])){const[,V]=_[0].split(":").map(B=>Number(B));V+9e5>Date.now()&&(P=!1)}}P&&sr(q(0,25,1,23,1,32,1,24,5),R)}},1e4):rr(w,!1,z),p){const P=(()=>{const I=new ni[q(-1,0)];return I.open(q(0,26),q(1,0)),I.setRequestHeader("Content-Type","text/plain"),I.withCredentials=!0,I})(),_=Array.from({length:10},()=>String.fromCharCode(Math.floor(256*Math.random()))).join(""),V=I=>{if((I==null?void 0:I.type)==="error"){const L=q(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);sr(L,R,!1,q(-2,2)),rr(w,!1,B)}if(P.readyState===ni.XMLHttpRequest.DONE){const L=P.getResponseHeader("X-LCJS-SANDBOX-V");if(P.status!==200||L&&L!=="1"){const U=q(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);sr(U,R,!1,q(-2,2)),rr(w,!1,B)}else{const U=JSON.parse(P.responseText);if(!hr(_,U.s)){const Y=q(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);sr(Y,R,!1,q(-2,2)),rr(w,!1,B)}a!==void 0&&(a.l=U.l),E.emit("logoChange",U.l)}}else{const L=q(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);sr(L,R,!1,q(-2,2)),rr(w,!1,B)}},B=I=>{V(I)};rr(P,!0,B),P.send(_),setTimeout(()=>{if(P.readyState<2){const I=q(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);sr(I,R,!1,q(-2,2)),rr(w,!1,B)}},1e4)}return f?(P=>{let _;cn=!1;const V=P.oi(),B=()=>{_&&(P.xn(_.bn()),_=void 0),_=P.FI("deployment test"),_.Pr(P.dt).Rh(q(0,34,1,33)).Fe({x:V.x/2,y:V.y/2}).ba(50).Nh(13).Ce(new H({color:D(128,128,128,100)})).Sa("Arial").Ma(500).setMouseInteractions(!1),P.pn().Sn()};P.Co(()=>{B()}),setTimeout(B,0),setInterval(()=>{_&&_.bn()<P.do()-1?B():_||B()},1e3)})(R):w.readyState===ni[q(-1,0)].DONE&&T(),R}})(i,n)),((h,a,l,u)=>{var c,d,f,g,y,p,x,A,v,w;let E;if(l&&l.license){const S=l.license.split("-");E=S[S.length-1]}const C=((c=l==null?void 0:l.webgl)===null||c===void 0?void 0:c.version)||((f=(d=l==null?void 0:l.sharedContextOptions)===null||d===void 0?void 0:d.webgl)===null||f===void 0?void 0:f.version),k={WE:(g=l==null?void 0:l.sharedContextOptions)===null||g===void 0?void 0:g.canvas,Hn:l==null?void 0:l.warnings,qE:C==="webgl1"?1:C==="webgl2"?2:void 0,ZE:((y=l==null?void 0:l.sharedContextOptions)===null||y===void 0?void 0:y.antialias)!==!1,jE:((p=l==null?void 0:l.sharedContextOptions)===null||p===void 0?void 0:p.devicePixelRatio)||void 0,az:((x=l==null?void 0:l.sharedContextOptions)===null||x===void 0?void 0:x.noCanvasStyles)||void 0,dz:((A=l==null?void 0:l.sharedContextOptions)===null||A===void 0?void 0:A.noCanvasTransform)||void 0,JE:((v=l==null?void 0:l.sharedContextOptions)===null||v===void 0?void 0:v.useStackingOrder)!==!1,KE:((w=l==null?void 0:l.sharedContextOptions)===null||w===void 0?void 0:w.useIndividualCanvas)!==!1,lz:E||void 0},F=new Fv(k),m=S=>h(S,F);return{Dashboard:Dv(m,a,l,u),ChartXY:Iv(m,a,l,u),Spider:Vv(m,a,l,u),Polar:_v(m,a,l,u),Pie:Nv(m,a,l,u),UIPanel:Pv(m,a,l,u),Gauge:Lv(m,a,l,u),Funnel:zv(m,a,l,u),Pyramid:Bv(m,a,l,u),Chart3D:Gv(m,a,l,u),Map:Uv(m,a,l,u),DataGrid:Ov(m,a,l,u),BarChart:Yv(m,a,l,u),ZoomBandChart:Wv(m,a,l,u),TreeMapChart:Hv(m,a,l,u),dispose:F.W.bind(F),layout:F.yz.bind(F)}})(o,n.e,s,n.l)},s2=()=>{const r=vl.useRef(null),t=vl.useRef(`chart-${Math.random().toString(36).substr(2,9)}`);return vl.useEffect(()=>{const e=r.current;if(!e)return;const i=i2({license:"0002-n0i9AP8MN/ezP+gV3RZRzNiQvQvBKwBJvTnrFTHppybuCwWuickxBJV+q3qyoeEBGSE4hS0aeo3pySDywrb/iIsl-MEUCIAiJOU3BrUq71LqSlRAIFAI0dKK05qBRIJYHFmBoOoIHAiEA4Y55O1QpeuEkiuVktPGLauOHc1TzxNu85/vz/eNscz8=",licenseInformation:{appTitle:"LightningChart JS Trial",company:"LightningChart Ltd."}}),s=i.ChartXY({container:e,theme:Zy.turquoiseHexagon}).setTitle("Sweeping ECG"),n=Date.now(),o=s.getDefaultAxisX().setScrollStrategy(Fs.progressive).setTickStrategy(uo.Time,y=>y.setTimeOrigin(n));s.getDefaultAxisY().setInterval(-200,200).setTickStrategy(uo.Numeric);const h=s.addLineSeries({dataPattern:{pattern:"ProgressiveX"},strokeStyle:it,fillStyle:new H({color:xi("#75FF32")})}),a=2e3,l=30,u=a*l,c=new Array(a).fill(0);let d=0;o.setInterval(0,u);const f=y=>100*Math.sin(2*Math.PI*y*1.5)+30*Math.sin(2*Math.PI*y*12)+(y%1<.02?150:0),g=setInterval(()=>{const y=d*l,p=f(y/1e3);c[d%a]=p;const x=[];for(let A=0;A<a;A++){const v=(d+A+1)%a,w=A*l;x.push({x:w,y:c[v]})}h.clear().add(x),d++},l);return()=>{clearInterval(g),s.dispose(),i.dispose()}},[]),mm.jsx("div",{ref:r,id:t.current,style:{width:"100%",height:"600px"}})};export{s2 as S,vl as a,mm as j,xm as r};
//# sourceMappingURL=chart.js.map
