(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function e(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(s){if(s.ep)return;s.ep=!0;const n=e(s);fetch(s.href,n)}})();function Mw(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var By={exports:{}},Iu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P1;function Rw(){if(P1)return Iu;P1=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,s,n){var a=null;if(n!==void 0&&(a=""+n),s.key!==void 0&&(a=""+s.key),"key"in s){n={};for(var o in s)o!=="key"&&(n[o]=s[o])}else n=s;return s=n.ref,{$$typeof:r,type:i,key:a,ref:s!==void 0?s:null,props:n}}return Iu.Fragment=t,Iu.jsx=e,Iu.jsxs=e,Iu}var U1;function Ew(){return U1||(U1=1,By.exports=Rw()),By.exports}var sh=Ew(),Ly={exports:{}},oe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O1;function Tw(){if(O1)return oe;O1=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),n=Symbol.for("react.consumer"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;function y(P){return P===null||typeof P!="object"?null:(P=f&&P[f]||P["@@iterator"],typeof P=="function"?P:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,x={};function v(P,H,j){this.props=P,this.context=H,this.refs=x,this.updater=j||m}v.prototype.isReactComponent={},v.prototype.setState=function(P,H){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,H,"setState")},v.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function b(){}b.prototype=v.prototype;function E(P,H,j){this.props=P,this.context=H,this.refs=x,this.updater=j||m}var T=E.prototype=new b;T.constructor=E,S(T,v.prototype),T.isPureReactComponent=!0;var V=Array.isArray,F={H:null,A:null,T:null,S:null,V:null},B=Object.prototype.hasOwnProperty;function z(P,H,j,Q,J,ht){return j=ht.ref,{$$typeof:r,type:P,key:H,ref:j!==void 0?j:null,props:ht}}function L(P,H){return z(P.type,H,void 0,void 0,void 0,P.props)}function A(P){return typeof P=="object"&&P!==null&&P.$$typeof===r}function R(P){var H={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(j){return H[j]})}var w=/\/+/g;function C(P,H){return typeof P=="object"&&P!==null&&P.key!=null?R(""+P.key):H.toString(36)}function k(){}function _(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(k,k):(P.status="pending",P.then(function(H){P.status==="pending"&&(P.status="fulfilled",P.value=H)},function(H){P.status==="pending"&&(P.status="rejected",P.reason=H)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function X(P,H,j,Q,J){var ht=typeof P;(ht==="undefined"||ht==="boolean")&&(P=null);var ot=!1;if(P===null)ot=!0;else switch(ht){case"bigint":case"string":case"number":ot=!0;break;case"object":switch(P.$$typeof){case r:case t:ot=!0;break;case d:return ot=P._init,X(ot(P._payload),H,j,Q,J)}}if(ot)return J=J(P),ot=Q===""?"."+C(P,0):Q,V(J)?(j="",ot!=null&&(j=ot.replace(w,"$&/")+"/"),X(J,H,j,"",function(Et){return Et})):J!=null&&(A(J)&&(J=L(J,j+(J.key==null||P&&P.key===J.key?"":(""+J.key).replace(w,"$&/")+"/")+ot)),H.push(J)),1;ot=0;var ut=Q===""?".":Q+":";if(V(P))for(var dt=0;dt<P.length;dt++)Q=P[dt],ht=ut+C(Q,dt),ot+=X(Q,H,j,ht,J);else if(dt=y(P),typeof dt=="function")for(P=dt.call(P),dt=0;!(Q=P.next()).done;)Q=Q.value,ht=ut+C(Q,dt++),ot+=X(Q,H,j,ht,J);else if(ht==="object"){if(typeof P.then=="function")return X(_(P),H,j,Q,J);throw H=String(P),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return ot}function N(P,H,j){if(P==null)return P;var Q=[],J=0;return X(P,Q,"","",function(ht){return H.call(j,ht,J++)}),Q}function U(P){if(P._status===-1){var H=P._result;H=H(),H.then(function(j){(P._status===0||P._status===-1)&&(P._status=1,P._result=j)},function(j){(P._status===0||P._status===-1)&&(P._status=2,P._result=j)}),P._status===-1&&(P._status=0,P._result=H)}if(P._status===1)return P._result.default;throw P._result}var O=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)};function W(){}return oe.Children={map:N,forEach:function(P,H,j){N(P,function(){H.apply(this,arguments)},j)},count:function(P){var H=0;return N(P,function(){H++}),H},toArray:function(P){return N(P,function(H){return H})||[]},only:function(P){if(!A(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},oe.Component=v,oe.Fragment=e,oe.Profiler=s,oe.PureComponent=E,oe.StrictMode=i,oe.Suspense=l,oe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=F,oe.__COMPILER_RUNTIME={__proto__:null,c:function(P){return F.H.useMemoCache(P)}},oe.cache=function(P){return function(){return P.apply(null,arguments)}},oe.cloneElement=function(P,H,j){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var Q=S({},P.props),J=P.key,ht=void 0;if(H!=null)for(ot in H.ref!==void 0&&(ht=void 0),H.key!==void 0&&(J=""+H.key),H)!B.call(H,ot)||ot==="key"||ot==="__self"||ot==="__source"||ot==="ref"&&H.ref===void 0||(Q[ot]=H[ot]);var ot=arguments.length-2;if(ot===1)Q.children=j;else if(1<ot){for(var ut=Array(ot),dt=0;dt<ot;dt++)ut[dt]=arguments[dt+2];Q.children=ut}return z(P.type,J,void 0,void 0,ht,Q)},oe.createContext=function(P){return P={$$typeof:a,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:n,_context:P},P},oe.createElement=function(P,H,j){var Q,J={},ht=null;if(H!=null)for(Q in H.key!==void 0&&(ht=""+H.key),H)B.call(H,Q)&&Q!=="key"&&Q!=="__self"&&Q!=="__source"&&(J[Q]=H[Q]);var ot=arguments.length-2;if(ot===1)J.children=j;else if(1<ot){for(var ut=Array(ot),dt=0;dt<ot;dt++)ut[dt]=arguments[dt+2];J.children=ut}if(P&&P.defaultProps)for(Q in ot=P.defaultProps,ot)J[Q]===void 0&&(J[Q]=ot[Q]);return z(P,ht,void 0,void 0,null,J)},oe.createRef=function(){return{current:null}},oe.forwardRef=function(P){return{$$typeof:o,render:P}},oe.isValidElement=A,oe.lazy=function(P){return{$$typeof:d,_payload:{_status:-1,_result:P},_init:U}},oe.memo=function(P,H){return{$$typeof:u,type:P,compare:H===void 0?null:H}},oe.startTransition=function(P){var H=F.T,j={};F.T=j;try{var Q=P(),J=F.S;J!==null&&J(j,Q),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"&&Q.then(W,O)}catch(ht){O(ht)}finally{F.T=H}},oe.unstable_useCacheRefresh=function(){return F.H.useCacheRefresh()},oe.use=function(P){return F.H.use(P)},oe.useActionState=function(P,H,j){return F.H.useActionState(P,H,j)},oe.useCallback=function(P,H){return F.H.useCallback(P,H)},oe.useContext=function(P){return F.H.useContext(P)},oe.useDebugValue=function(){},oe.useDeferredValue=function(P,H){return F.H.useDeferredValue(P,H)},oe.useEffect=function(P,H,j){var Q=F.H;if(typeof j=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Q.useEffect(P,H)},oe.useId=function(){return F.H.useId()},oe.useImperativeHandle=function(P,H,j){return F.H.useImperativeHandle(P,H,j)},oe.useInsertionEffect=function(P,H){return F.H.useInsertionEffect(P,H)},oe.useLayoutEffect=function(P,H){return F.H.useLayoutEffect(P,H)},oe.useMemo=function(P,H){return F.H.useMemo(P,H)},oe.useOptimistic=function(P,H){return F.H.useOptimistic(P,H)},oe.useReducer=function(P,H,j){return F.H.useReducer(P,H,j)},oe.useRef=function(P){return F.H.useRef(P)},oe.useState=function(P){return F.H.useState(P)},oe.useSyncExternalStore=function(P,H,j){return F.H.useSyncExternalStore(P,H,j)},oe.useTransition=function(){return F.H.useTransition()},oe.version="19.1.0",oe}var G1;function qm(){return G1||(G1=1,Ly.exports=Tw()),Ly.exports}var Ef=qm(),Iy={exports:{}},Pu={},Py={exports:{}},Uy={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y1;function ww(){return Y1||(Y1=1,function(r){function t(N,U){var O=N.length;N.push(U);t:for(;0<O;){var W=O-1>>>1,P=N[W];if(0<s(P,U))N[W]=U,N[O]=P,O=W;else break t}}function e(N){return N.length===0?null:N[0]}function i(N){if(N.length===0)return null;var U=N[0],O=N.pop();if(O!==U){N[0]=O;t:for(var W=0,P=N.length,H=P>>>1;W<H;){var j=2*(W+1)-1,Q=N[j],J=j+1,ht=N[J];if(0>s(Q,O))J<P&&0>s(ht,Q)?(N[W]=ht,N[J]=O,W=J):(N[W]=Q,N[j]=O,W=j);else if(J<P&&0>s(ht,O))N[W]=ht,N[J]=O,W=J;else break t}}return U}function s(N,U){var O=N.sortIndex-U.sortIndex;return O!==0?O:N.id-U.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var n=performance;r.unstable_now=function(){return n.now()}}else{var a=Date,o=a.now();r.unstable_now=function(){return a.now()-o}}var l=[],u=[],d=1,f=null,y=3,m=!1,S=!1,x=!1,v=!1,b=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function V(N){for(var U=e(u);U!==null;){if(U.callback===null)i(u);else if(U.startTime<=N)i(u),U.sortIndex=U.expirationTime,t(l,U);else break;U=e(u)}}function F(N){if(x=!1,V(N),!S)if(e(l)!==null)S=!0,B||(B=!0,C());else{var U=e(u);U!==null&&X(F,U.startTime-N)}}var B=!1,z=-1,L=5,A=-1;function R(){return v?!0:!(r.unstable_now()-A<L)}function w(){if(v=!1,B){var N=r.unstable_now();A=N;var U=!0;try{t:{S=!1,x&&(x=!1,E(z),z=-1),m=!0;var O=y;try{e:{for(V(N),f=e(l);f!==null&&!(f.expirationTime>N&&R());){var W=f.callback;if(typeof W=="function"){f.callback=null,y=f.priorityLevel;var P=W(f.expirationTime<=N);if(N=r.unstable_now(),typeof P=="function"){f.callback=P,V(N),U=!0;break e}f===e(l)&&i(l),V(N)}else i(l);f=e(l)}if(f!==null)U=!0;else{var H=e(u);H!==null&&X(F,H.startTime-N),U=!1}}break t}finally{f=null,y=O,m=!1}U=void 0}}finally{U?C():B=!1}}}var C;if(typeof T=="function")C=function(){T(w)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,_=k.port2;k.port1.onmessage=w,C=function(){_.postMessage(null)}}else C=function(){b(w,0)};function X(N,U){z=b(function(){N(r.unstable_now())},U)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(N){N.callback=null},r.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<N?Math.floor(1e3/N):5},r.unstable_getCurrentPriorityLevel=function(){return y},r.unstable_next=function(N){switch(y){case 1:case 2:case 3:var U=3;break;default:U=y}var O=y;y=U;try{return N()}finally{y=O}},r.unstable_requestPaint=function(){v=!0},r.unstable_runWithPriority=function(N,U){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var O=y;y=N;try{return U()}finally{y=O}},r.unstable_scheduleCallback=function(N,U,O){var W=r.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?W+O:W):O=W,N){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=O+P,N={id:d++,callback:U,priorityLevel:N,startTime:O,expirationTime:P,sortIndex:-1},O>W?(N.sortIndex=O,t(u,N),e(l)===null&&N===e(u)&&(x?(E(z),z=-1):x=!0,X(F,O-W))):(N.sortIndex=P,t(l,N),S||m||(S=!0,B||(B=!0,C()))),N},r.unstable_shouldYield=R,r.unstable_wrapCallback=function(N){var U=y;return function(){var O=y;y=U;try{return N.apply(this,arguments)}finally{y=O}}}}(Uy)),Uy}var H1;function Cw(){return H1||(H1=1,Py.exports=ww()),Py.exports}var Oy={exports:{}},Us={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X1;function kw(){if(X1)return Us;X1=1;var r=qm();function t(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},s=Symbol.for("react.portal");function n(l,u,d){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:f==null?null:""+f,children:l,containerInfo:u,implementation:d}}var a=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,u){if(l==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return Us.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Us.createPortal=function(l,u){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(t(299));return n(l,u,null,d)},Us.flushSync=function(l){var u=a.T,d=i.p;try{if(a.T=null,i.p=2,l)return l()}finally{a.T=u,i.p=d,i.d.f()}},Us.preconnect=function(l,u){typeof l=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,i.d.C(l,u))},Us.prefetchDNS=function(l){typeof l=="string"&&i.d.D(l)},Us.preinit=function(l,u){if(typeof l=="string"&&u&&typeof u.as=="string"){var d=u.as,f=o(d,u.crossOrigin),y=typeof u.integrity=="string"?u.integrity:void 0,m=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;d==="style"?i.d.S(l,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:f,integrity:y,fetchPriority:m}):d==="script"&&i.d.X(l,{crossOrigin:f,integrity:y,fetchPriority:m,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},Us.preinitModule=function(l,u){if(typeof l=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var d=o(u.as,u.crossOrigin);i.d.M(l,{crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&i.d.M(l)},Us.preload=function(l,u){if(typeof l=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var d=u.as,f=o(d,u.crossOrigin);i.d.L(l,d,{crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},Us.preloadModule=function(l,u){if(typeof l=="string")if(u){var d=o(u.as,u.crossOrigin);i.d.m(l,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else i.d.m(l)},Us.requestFormReset=function(l){i.d.r(l)},Us.unstable_batchedUpdates=function(l,u){return l(u)},Us.useFormState=function(l,u,d){return a.H.useFormState(l,u,d)},Us.useFormStatus=function(){return a.H.useHostTransitionStatus()},Us.version="19.1.0",Us}var W1;function Dw(){if(W1)return Oy.exports;W1=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Oy.exports=kw(),Oy.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q1;function Fw(){if(q1)return Pu;q1=1;var r=Cw(),t=qm(),e=Dw();function i(h){var c="https://react.dev/errors/"+h;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)c+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+h+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)}function n(h){var c=h,g=h;if(h.alternate)for(;c.return;)c=c.return;else{h=c;do c=h,(c.flags&4098)!==0&&(g=c.return),h=c.return;while(h)}return c.tag===3?g:null}function a(h){if(h.tag===13){var c=h.memoizedState;if(c===null&&(h=h.alternate,h!==null&&(c=h.memoizedState)),c!==null)return c.dehydrated}return null}function o(h){if(n(h)!==h)throw Error(i(188))}function l(h){var c=h.alternate;if(!c){if(c=n(h),c===null)throw Error(i(188));return c!==h?null:h}for(var g=h,p=c;;){var M=g.return;if(M===null)break;var D=M.alternate;if(D===null){if(p=M.return,p!==null){g=p;continue}break}if(M.child===D.child){for(D=M.child;D;){if(D===g)return o(M),h;if(D===p)return o(M),c;D=D.sibling}throw Error(i(188))}if(g.return!==p.return)g=M,p=D;else{for(var G=!1,q=M.child;q;){if(q===g){G=!0,g=M,p=D;break}if(q===p){G=!0,p=M,g=D;break}q=q.sibling}if(!G){for(q=D.child;q;){if(q===g){G=!0,g=D,p=M;break}if(q===p){G=!0,p=D,g=M;break}q=q.sibling}if(!G)throw Error(i(189))}}if(g.alternate!==p)throw Error(i(190))}if(g.tag!==3)throw Error(i(188));return g.stateNode.current===g?h:c}function u(h){var c=h.tag;if(c===5||c===26||c===27||c===6)return h;for(h=h.child;h!==null;){if(c=u(h),c!==null)return c;h=h.sibling}return null}var d=Object.assign,f=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),E=Symbol.for("react.consumer"),T=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),R=Symbol.for("react.memo_cache_sentinel"),w=Symbol.iterator;function C(h){return h===null||typeof h!="object"?null:(h=w&&h[w]||h["@@iterator"],typeof h=="function"?h:null)}var k=Symbol.for("react.client.reference");function _(h){if(h==null)return null;if(typeof h=="function")return h.$$typeof===k?null:h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case S:return"Fragment";case v:return"Profiler";case x:return"StrictMode";case F:return"Suspense";case B:return"SuspenseList";case A:return"Activity"}if(typeof h=="object")switch(h.$$typeof){case m:return"Portal";case T:return(h.displayName||"Context")+".Provider";case E:return(h._context.displayName||"Context")+".Consumer";case V:var c=h.render;return h=h.displayName,h||(h=c.displayName||c.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case z:return c=h.displayName||null,c!==null?c:_(h.type)||"Memo";case L:c=h._payload,h=h._init;try{return _(h(c))}catch{}}return null}var X=Array.isArray,N=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O={pending:!1,data:null,method:null,action:null},W=[],P=-1;function H(h){return{current:h}}function j(h){0>P||(h.current=W[P],W[P]=null,P--)}function Q(h,c){P++,W[P]=h.current,h.current=c}var J=H(null),ht=H(null),ot=H(null),ut=H(null);function dt(h,c){switch(Q(ot,c),Q(ht,h),Q(J,null),c.nodeType){case 9:case 11:h=(h=c.documentElement)&&(h=h.namespaceURI)?f1(h):0;break;default:if(h=c.tagName,c=c.namespaceURI)c=f1(c),h=g1(c,h);else switch(h){case"svg":h=1;break;case"math":h=2;break;default:h=0}}j(J),Q(J,h)}function Et(){j(J),j(ht),j(ot)}function St(h){h.memoizedState!==null&&Q(ut,h);var c=J.current,g=g1(c,h.type);c!==g&&(Q(ht,h),Q(J,g))}function Vt(h){ht.current===h&&(j(J),j(ht)),ut.current===h&&(j(ut),zu._currentValue=O)}var _t=Object.prototype.hasOwnProperty,jt=r.unstable_scheduleCallback,ee=r.unstable_cancelCallback,Dt=r.unstable_shouldYield,Ct=r.unstable_requestPaint,Pi=r.unstable_now,Ge=r.unstable_getCurrentPriorityLevel,Re=r.unstable_ImmediatePriority,Zr=r.unstable_UserBlockingPriority,Ze=r.unstable_NormalPriority,ni=r.unstable_LowPriority,ur=r.unstable_IdlePriority,ce=r.log,Qe=r.unstable_setDisableYieldValue,Ai=null,fe=null;function Le(h){if(typeof ce=="function"&&Qe(h),fe&&typeof fe.setStrictMode=="function")try{fe.setStrictMode(Ai,h)}catch{}}var yi=Math.clz32?Math.clz32:Va,Ye=Math.log,Ie=Math.LN2;function Va(h){return h>>>=0,h===0?32:31-(Ye(h)/Ie|0)|0}var Pe=256,He=4194304;function Ut(h){var c=h&42;if(c!==0)return c;switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return h&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return h}}function re(h,c,g){var p=h.pendingLanes;if(p===0)return 0;var M=0,D=h.suspendedLanes,G=h.pingedLanes;h=h.warmLanes;var q=p&134217727;return q!==0?(p=q&~D,p!==0?M=Ut(p):(G&=q,G!==0?M=Ut(G):g||(g=q&~h,g!==0&&(M=Ut(g))))):(q=p&~D,q!==0?M=Ut(q):G!==0?M=Ut(G):g||(g=p&~h,g!==0&&(M=Ut(g)))),M===0?0:c!==0&&c!==M&&(c&D)===0&&(D=M&-M,g=c&-c,D>=g||D===32&&(g&4194048)!==0)?c:M}function Rt(h,c){return(h.pendingLanes&~(h.suspendedLanes&~h.pingedLanes)&c)===0}function ae(h,c){switch(h){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tt(){var h=Pe;return Pe<<=1,(Pe&4194048)===0&&(Pe=256),h}function Ot(){var h=He;return He<<=1,(He&62914560)===0&&(He=4194304),h}function he(h){for(var c=[],g=0;31>g;g++)c.push(h);return c}function de(h,c){h.pendingLanes|=c,c!==268435456&&(h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0)}function Ee(h,c,g,p,M,D){var G=h.pendingLanes;h.pendingLanes=g,h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0,h.expiredLanes&=g,h.entangledLanes&=g,h.errorRecoveryDisabledLanes&=g,h.shellSuspendCounter=0;var q=h.entanglements,Z=h.expirationTimes,rt=h.hiddenUpdates;for(g=G&~g;0<g;){var yt=31-yi(g),pt=1<<yt;q[yt]=0,Z[yt]=-1;var at=rt[yt];if(at!==null)for(rt[yt]=null,yt=0;yt<at.length;yt++){var lt=at[yt];lt!==null&&(lt.lane&=-536870913)}g&=~pt}p!==0&&Vn(h,p,0),D!==0&&M===0&&h.tag!==0&&(h.suspendedLanes|=D&~(G&~c))}function Vn(h,c,g){h.pendingLanes|=c,h.suspendedLanes&=~c;var p=31-yi(c);h.entangledLanes|=c,h.entanglements[p]=h.entanglements[p]|1073741824|g&4194090}function ii(h,c){var g=h.entangledLanes|=c;for(h=h.entanglements;g;){var p=31-yi(g),M=1<<p;M&c|h[p]&c&&(h[p]|=c),g&=~M}}function Te(h){switch(h){case 2:h=1;break;case 8:h=4;break;case 32:h=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:h=128;break;case 268435456:h=134217728;break;default:h=0}return h}function zn(h){return h&=-h,2<h?8<h?(h&134217727)!==0?32:268435456:8:2}function mi(){var h=U.p;return h!==0?h:(h=window.event,h===void 0?32:z1(h.type))}function si(h,c){var g=U.p;try{return U.p=h,c()}finally{U.p=g}}var Pt=Math.random().toString(36).slice(2),It="__reactFiber$"+Pt,Zt="__reactProps$"+Pt,ks="__reactContainer$"+Pt,ri="__reactEvents$"+Pt,ge="__reactListeners$"+Pt,$i="__reactHandles$"+Pt,Ue="__reactResources$"+Pt,Fe="__reactMarker$"+Pt;function Ui(h){delete h[It],delete h[Zt],delete h[ri],delete h[ge],delete h[$i]}function Vi(h){var c=h[It];if(c)return c;for(var g=h.parentNode;g;){if(c=g[ks]||g[It]){if(g=c.alternate,c.child!==null||g!==null&&g.child!==null)for(h=S1(h);h!==null;){if(g=h[It])return g;h=S1(h)}return c}h=g,g=h.parentNode}return null}function ss(h){if(h=h[It]||h[ks]){var c=h.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return h}return null}function Oi(h){var c=h.tag;if(c===5||c===26||c===27||c===6)return h.stateNode;throw Error(i(33))}function vt(h){var c=h[Ue];return c||(c=h[Ue]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function Ht(h){h[Fe]=!0}var $s=new Set,zi={};function _i(h,c){Ni(h,c),Ni(h+"Capture",c)}function Ni(h,c){for(zi[h]=c,h=0;h<c.length;h++)$s.add(c[h])}var Ji=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Fr={},Vr={};function za(h){return _t.call(Vr,h)?!0:_t.call(Fr,h)?!1:Ji.test(h)?Vr[h]=!0:(Fr[h]=!0,!1)}function Qr(h,c,g){if(za(c))if(g===null)h.removeAttribute(c);else{switch(typeof g){case"undefined":case"function":case"symbol":h.removeAttribute(c);return;case"boolean":var p=c.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){h.removeAttribute(c);return}}h.setAttribute(c,""+g)}}function Kr(h,c,g){if(g===null)h.removeAttribute(c);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":h.removeAttribute(c);return}h.setAttribute(c,""+g)}}function Ae(h,c,g,p){if(p===null)h.removeAttribute(g);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":h.removeAttribute(g);return}h.setAttributeNS(c,g,""+p)}}var Ds,sa;function yo(h){if(Ds===void 0)try{throw Error()}catch(g){var c=g.stack.trim().match(/\n( *(at )?)/);Ds=c&&c[1]||"",sa=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ds+h+sa}var F0=!1;function V0(h,c){if(!h||F0)return"";F0=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(c){var pt=function(){throw Error()};if(Object.defineProperty(pt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pt,[])}catch(lt){var at=lt}Reflect.construct(h,[],pt)}else{try{pt.call()}catch(lt){at=lt}h.call(pt.prototype)}}else{try{throw Error()}catch(lt){at=lt}(pt=h())&&typeof pt.catch=="function"&&pt.catch(function(){})}}catch(lt){if(lt&&at&&typeof lt.stack=="string")return[lt.stack,at.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var M=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");M&&M.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var D=p.DetermineComponentFrameRoot(),G=D[0],q=D[1];if(G&&q){var Z=G.split(`
`),rt=q.split(`
`);for(M=p=0;p<Z.length&&!Z[p].includes("DetermineComponentFrameRoot");)p++;for(;M<rt.length&&!rt[M].includes("DetermineComponentFrameRoot");)M++;if(p===Z.length||M===rt.length)for(p=Z.length-1,M=rt.length-1;1<=p&&0<=M&&Z[p]!==rt[M];)M--;for(;1<=p&&0<=M;p--,M--)if(Z[p]!==rt[M]){if(p!==1||M!==1)do if(p--,M--,0>M||Z[p]!==rt[M]){var yt=`
`+Z[p].replace(" at new "," at ");return h.displayName&&yt.includes("<anonymous>")&&(yt=yt.replace("<anonymous>",h.displayName)),yt}while(1<=p&&0<=M);break}}}finally{F0=!1,Error.prepareStackTrace=g}return(g=h?h.displayName||h.name:"")?yo(g):""}function pE(h){switch(h.tag){case 26:case 27:case 5:return yo(h.type);case 16:return yo("Lazy");case 13:return yo("Suspense");case 19:return yo("SuspenseList");case 0:case 15:return V0(h.type,!1);case 11:return V0(h.type.render,!1);case 1:return V0(h.type,!0);case 31:return yo("Activity");default:return""}}function hS(h){try{var c="";do c+=pE(h),h=h.return;while(h);return c}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}function tn(h){switch(typeof h){case"bigint":case"boolean":case"number":case"string":case"undefined":return h;case"object":return h;default:return""}}function oS(h){var c=h.type;return(h=h.nodeName)&&h.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function SE(h){var c=oS(h)?"checked":"value",g=Object.getOwnPropertyDescriptor(h.constructor.prototype,c),p=""+h[c];if(!h.hasOwnProperty(c)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var M=g.get,D=g.set;return Object.defineProperty(h,c,{configurable:!0,get:function(){return M.call(this)},set:function(G){p=""+G,D.call(this,G)}}),Object.defineProperty(h,c,{enumerable:g.enumerable}),{getValue:function(){return p},setValue:function(G){p=""+G},stopTracking:function(){h._valueTracker=null,delete h[c]}}}}function Hc(h){h._valueTracker||(h._valueTracker=SE(h))}function lS(h){if(!h)return!1;var c=h._valueTracker;if(!c)return!0;var g=c.getValue(),p="";return h&&(p=oS(h)?h.checked?"true":"false":h.value),h=p,h!==g?(c.setValue(h),!0):!1}function Xc(h){if(h=h||(typeof document<"u"?document:void 0),typeof h>"u")return null;try{return h.activeElement||h.body}catch{return h.body}}var xE=/[\n"\\]/g;function en(h){return h.replace(xE,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function z0(h,c,g,p,M,D,G,q){h.name="",G!=null&&typeof G!="function"&&typeof G!="symbol"&&typeof G!="boolean"?h.type=G:h.removeAttribute("type"),c!=null?G==="number"?(c===0&&h.value===""||h.value!=c)&&(h.value=""+tn(c)):h.value!==""+tn(c)&&(h.value=""+tn(c)):G!=="submit"&&G!=="reset"||h.removeAttribute("value"),c!=null?_0(h,G,tn(c)):g!=null?_0(h,G,tn(g)):p!=null&&h.removeAttribute("value"),M==null&&D!=null&&(h.defaultChecked=!!D),M!=null&&(h.checked=M&&typeof M!="function"&&typeof M!="symbol"),q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"?h.name=""+tn(q):h.removeAttribute("name")}function uS(h,c,g,p,M,D,G,q){if(D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(h.type=D),c!=null||g!=null){if(!(D!=="submit"&&D!=="reset"||c!=null))return;g=g!=null?""+tn(g):"",c=c!=null?""+tn(c):g,q||c===h.value||(h.value=c),h.defaultValue=c}p=p??M,p=typeof p!="function"&&typeof p!="symbol"&&!!p,h.checked=q?h.checked:!!p,h.defaultChecked=!!p,G!=null&&typeof G!="function"&&typeof G!="symbol"&&typeof G!="boolean"&&(h.name=G)}function _0(h,c,g){c==="number"&&Xc(h.ownerDocument)===h||h.defaultValue===""+g||(h.defaultValue=""+g)}function mo(h,c,g,p){if(h=h.options,c){c={};for(var M=0;M<g.length;M++)c["$"+g[M]]=!0;for(g=0;g<h.length;g++)M=c.hasOwnProperty("$"+h[g].value),h[g].selected!==M&&(h[g].selected=M),M&&p&&(h[g].defaultSelected=!0)}else{for(g=""+tn(g),c=null,M=0;M<h.length;M++){if(h[M].value===g){h[M].selected=!0,p&&(h[M].defaultSelected=!0);return}c!==null||h[M].disabled||(c=h[M])}c!==null&&(c.selected=!0)}}function cS(h,c,g){if(c!=null&&(c=""+tn(c),c!==h.value&&(h.value=c),g==null)){h.defaultValue!==c&&(h.defaultValue=c);return}h.defaultValue=g!=null?""+tn(g):""}function dS(h,c,g,p){if(c==null){if(p!=null){if(g!=null)throw Error(i(92));if(X(p)){if(1<p.length)throw Error(i(93));p=p[0]}g=p}g==null&&(g=""),c=g}g=tn(c),h.defaultValue=g,p=h.textContent,p===g&&p!==""&&p!==null&&(h.value=p)}function po(h,c){if(c){var g=h.firstChild;if(g&&g===h.lastChild&&g.nodeType===3){g.nodeValue=c;return}}h.textContent=c}var AE=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function fS(h,c,g){var p=c.indexOf("--")===0;g==null||typeof g=="boolean"||g===""?p?h.setProperty(c,""):c==="float"?h.cssFloat="":h[c]="":p?h.setProperty(c,g):typeof g!="number"||g===0||AE.has(c)?c==="float"?h.cssFloat=g:h[c]=(""+g).trim():h[c]=g+"px"}function gS(h,c,g){if(c!=null&&typeof c!="object")throw Error(i(62));if(h=h.style,g!=null){for(var p in g)!g.hasOwnProperty(p)||c!=null&&c.hasOwnProperty(p)||(p.indexOf("--")===0?h.setProperty(p,""):p==="float"?h.cssFloat="":h[p]="");for(var M in c)p=c[M],c.hasOwnProperty(M)&&g[M]!==p&&fS(h,M,p)}else for(var D in c)c.hasOwnProperty(D)&&fS(h,D,c[D])}function N0(h){if(h.indexOf("-")===-1)return!1;switch(h){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vE=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),bE=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wc(h){return bE.test(""+h)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":h}var B0=null;function L0(h){return h=h.target||h.srcElement||window,h.correspondingUseElement&&(h=h.correspondingUseElement),h.nodeType===3?h.parentNode:h}var So=null,xo=null;function yS(h){var c=ss(h);if(c&&(h=c.stateNode)){var g=h[Zt]||null;t:switch(h=c.stateNode,c.type){case"input":if(z0(h,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name),c=g.name,g.type==="radio"&&c!=null){for(g=h;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll('input[name="'+en(""+c)+'"][type="radio"]'),c=0;c<g.length;c++){var p=g[c];if(p!==h&&p.form===h.form){var M=p[Zt]||null;if(!M)throw Error(i(90));z0(p,M.value,M.defaultValue,M.defaultValue,M.checked,M.defaultChecked,M.type,M.name)}}for(c=0;c<g.length;c++)p=g[c],p.form===h.form&&lS(p)}break t;case"textarea":cS(h,g.value,g.defaultValue);break t;case"select":c=g.value,c!=null&&mo(h,!!g.multiple,c,!1)}}}var I0=!1;function mS(h,c,g){if(I0)return h(c,g);I0=!0;try{var p=h(c);return p}finally{if(I0=!1,(So!==null||xo!==null)&&(Fd(),So&&(c=So,h=xo,xo=So=null,yS(c),h)))for(c=0;c<h.length;c++)yS(h[c])}}function Wl(h,c){var g=h.stateNode;if(g===null)return null;var p=g[Zt]||null;if(p===null)return null;g=p[c];t:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(h=h.type,p=!(h==="button"||h==="input"||h==="select"||h==="textarea")),h=!p;break t;default:h=!1}if(h)return null;if(g&&typeof g!="function")throw Error(i(231,c,typeof g));return g}var ra=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),P0=!1;if(ra)try{var ql={};Object.defineProperty(ql,"passive",{get:function(){P0=!0}}),window.addEventListener("test",ql,ql),window.removeEventListener("test",ql,ql)}catch{P0=!1}var _a=null,U0=null,qc=null;function pS(){if(qc)return qc;var h,c=U0,g=c.length,p,M="value"in _a?_a.value:_a.textContent,D=M.length;for(h=0;h<g&&c[h]===M[h];h++);var G=g-h;for(p=1;p<=G&&c[g-p]===M[D-p];p++);return qc=M.slice(h,1<p?1-p:void 0)}function jc(h){var c=h.keyCode;return"charCode"in h?(h=h.charCode,h===0&&c===13&&(h=13)):h=c,h===10&&(h=13),32<=h||h===13?h:0}function $c(){return!0}function SS(){return!1}function cr(h){function c(g,p,M,D,G){this._reactName=g,this._targetInst=M,this.type=p,this.nativeEvent=D,this.target=G,this.currentTarget=null;for(var q in h)h.hasOwnProperty(q)&&(g=h[q],this[q]=g?g(D):D[q]);return this.isDefaultPrevented=(D.defaultPrevented!=null?D.defaultPrevented:D.returnValue===!1)?$c:SS,this.isPropagationStopped=SS,this}return d(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=$c)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=$c)},persist:function(){},isPersistent:$c}),c}var Mh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(h){return h.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jc=cr(Mh),jl=d({},Mh,{view:0,detail:0}),ME=cr(jl),O0,G0,$l,Zc=d({},jl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:H0,button:0,buttons:0,relatedTarget:function(h){return h.relatedTarget===void 0?h.fromElement===h.srcElement?h.toElement:h.fromElement:h.relatedTarget},movementX:function(h){return"movementX"in h?h.movementX:(h!==$l&&($l&&h.type==="mousemove"?(O0=h.screenX-$l.screenX,G0=h.screenY-$l.screenY):G0=O0=0,$l=h),O0)},movementY:function(h){return"movementY"in h?h.movementY:G0}}),xS=cr(Zc),RE=d({},Zc,{dataTransfer:0}),EE=cr(RE),TE=d({},jl,{relatedTarget:0}),Y0=cr(TE),wE=d({},Mh,{animationName:0,elapsedTime:0,pseudoElement:0}),CE=cr(wE),kE=d({},Mh,{clipboardData:function(h){return"clipboardData"in h?h.clipboardData:window.clipboardData}}),DE=cr(kE),FE=d({},Mh,{data:0}),AS=cr(FE),VE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_E={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function NE(h){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(h):(h=_E[h])?!!c[h]:!1}function H0(){return NE}var BE=d({},jl,{key:function(h){if(h.key){var c=VE[h.key]||h.key;if(c!=="Unidentified")return c}return h.type==="keypress"?(h=jc(h),h===13?"Enter":String.fromCharCode(h)):h.type==="keydown"||h.type==="keyup"?zE[h.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:H0,charCode:function(h){return h.type==="keypress"?jc(h):0},keyCode:function(h){return h.type==="keydown"||h.type==="keyup"?h.keyCode:0},which:function(h){return h.type==="keypress"?jc(h):h.type==="keydown"||h.type==="keyup"?h.keyCode:0}}),LE=cr(BE),IE=d({},Zc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vS=cr(IE),PE=d({},jl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:H0}),UE=cr(PE),OE=d({},Mh,{propertyName:0,elapsedTime:0,pseudoElement:0}),GE=cr(OE),YE=d({},Zc,{deltaX:function(h){return"deltaX"in h?h.deltaX:"wheelDeltaX"in h?-h.wheelDeltaX:0},deltaY:function(h){return"deltaY"in h?h.deltaY:"wheelDeltaY"in h?-h.wheelDeltaY:"wheelDelta"in h?-h.wheelDelta:0},deltaZ:0,deltaMode:0}),HE=cr(YE),XE=d({},Mh,{newState:0,oldState:0}),WE=cr(XE),qE=[9,13,27,32],X0=ra&&"CompositionEvent"in window,Jl=null;ra&&"documentMode"in document&&(Jl=document.documentMode);var jE=ra&&"TextEvent"in window&&!Jl,bS=ra&&(!X0||Jl&&8<Jl&&11>=Jl),MS=" ",RS=!1;function ES(h,c){switch(h){case"keyup":return qE.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function TS(h){return h=h.detail,typeof h=="object"&&"data"in h?h.data:null}var Ao=!1;function $E(h,c){switch(h){case"compositionend":return TS(c);case"keypress":return c.which!==32?null:(RS=!0,MS);case"textInput":return h=c.data,h===MS&&RS?null:h;default:return null}}function JE(h,c){if(Ao)return h==="compositionend"||!X0&&ES(h,c)?(h=pS(),qc=U0=_a=null,Ao=!1,h):null;switch(h){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return bS&&c.locale!=="ko"?null:c.data;default:return null}}var ZE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wS(h){var c=h&&h.nodeName&&h.nodeName.toLowerCase();return c==="input"?!!ZE[h.type]:c==="textarea"}function CS(h,c,g,p){So?xo?xo.push(p):xo=[p]:So=p,c=Ld(c,"onChange"),0<c.length&&(g=new Jc("onChange","change",null,g,p),h.push({event:g,listeners:c}))}var Zl=null,Ql=null;function QE(h){o1(h,0)}function Qc(h){var c=Oi(h);if(lS(c))return h}function kS(h,c){if(h==="change")return c}var DS=!1;if(ra){var W0;if(ra){var q0="oninput"in document;if(!q0){var FS=document.createElement("div");FS.setAttribute("oninput","return;"),q0=typeof FS.oninput=="function"}W0=q0}else W0=!1;DS=W0&&(!document.documentMode||9<document.documentMode)}function VS(){Zl&&(Zl.detachEvent("onpropertychange",zS),Ql=Zl=null)}function zS(h){if(h.propertyName==="value"&&Qc(Ql)){var c=[];CS(c,Ql,h,L0(h)),mS(QE,c)}}function KE(h,c,g){h==="focusin"?(VS(),Zl=c,Ql=g,Zl.attachEvent("onpropertychange",zS)):h==="focusout"&&VS()}function tT(h){if(h==="selectionchange"||h==="keyup"||h==="keydown")return Qc(Ql)}function eT(h,c){if(h==="click")return Qc(c)}function iT(h,c){if(h==="input"||h==="change")return Qc(c)}function sT(h,c){return h===c&&(h!==0||1/h===1/c)||h!==h&&c!==c}var zr=typeof Object.is=="function"?Object.is:sT;function Kl(h,c){if(zr(h,c))return!0;if(typeof h!="object"||h===null||typeof c!="object"||c===null)return!1;var g=Object.keys(h),p=Object.keys(c);if(g.length!==p.length)return!1;for(p=0;p<g.length;p++){var M=g[p];if(!_t.call(c,M)||!zr(h[M],c[M]))return!1}return!0}function _S(h){for(;h&&h.firstChild;)h=h.firstChild;return h}function NS(h,c){var g=_S(h);h=0;for(var p;g;){if(g.nodeType===3){if(p=h+g.textContent.length,h<=c&&p>=c)return{node:g,offset:c-h};h=p}t:{for(;g;){if(g.nextSibling){g=g.nextSibling;break t}g=g.parentNode}g=void 0}g=_S(g)}}function BS(h,c){return h&&c?h===c?!0:h&&h.nodeType===3?!1:c&&c.nodeType===3?BS(h,c.parentNode):"contains"in h?h.contains(c):h.compareDocumentPosition?!!(h.compareDocumentPosition(c)&16):!1:!1}function LS(h){h=h!=null&&h.ownerDocument!=null&&h.ownerDocument.defaultView!=null?h.ownerDocument.defaultView:window;for(var c=Xc(h.document);c instanceof h.HTMLIFrameElement;){try{var g=typeof c.contentWindow.location.href=="string"}catch{g=!1}if(g)h=c.contentWindow;else break;c=Xc(h.document)}return c}function j0(h){var c=h&&h.nodeName&&h.nodeName.toLowerCase();return c&&(c==="input"&&(h.type==="text"||h.type==="search"||h.type==="tel"||h.type==="url"||h.type==="password")||c==="textarea"||h.contentEditable==="true")}var rT=ra&&"documentMode"in document&&11>=document.documentMode,vo=null,$0=null,tu=null,J0=!1;function IS(h,c,g){var p=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;J0||vo==null||vo!==Xc(p)||(p=vo,"selectionStart"in p&&j0(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),tu&&Kl(tu,p)||(tu=p,p=Ld($0,"onSelect"),0<p.length&&(c=new Jc("onSelect","select",null,c,g),h.push({event:c,listeners:p}),c.target=vo)))}function Rh(h,c){var g={};return g[h.toLowerCase()]=c.toLowerCase(),g["Webkit"+h]="webkit"+c,g["Moz"+h]="moz"+c,g}var bo={animationend:Rh("Animation","AnimationEnd"),animationiteration:Rh("Animation","AnimationIteration"),animationstart:Rh("Animation","AnimationStart"),transitionrun:Rh("Transition","TransitionRun"),transitionstart:Rh("Transition","TransitionStart"),transitioncancel:Rh("Transition","TransitionCancel"),transitionend:Rh("Transition","TransitionEnd")},Z0={},PS={};ra&&(PS=document.createElement("div").style,"AnimationEvent"in window||(delete bo.animationend.animation,delete bo.animationiteration.animation,delete bo.animationstart.animation),"TransitionEvent"in window||delete bo.transitionend.transition);function Eh(h){if(Z0[h])return Z0[h];if(!bo[h])return h;var c=bo[h],g;for(g in c)if(c.hasOwnProperty(g)&&g in PS)return Z0[h]=c[g];return h}var US=Eh("animationend"),OS=Eh("animationiteration"),GS=Eh("animationstart"),nT=Eh("transitionrun"),aT=Eh("transitionstart"),hT=Eh("transitioncancel"),YS=Eh("transitionend"),HS=new Map,Q0="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Q0.push("scrollEnd");function An(h,c){HS.set(h,c),_i(c,[h])}var XS=new WeakMap;function sn(h,c){if(typeof h=="object"&&h!==null){var g=XS.get(h);return g!==void 0?g:(c={value:h,source:c,stack:hS(c)},XS.set(h,c),c)}return{value:h,source:c,stack:hS(c)}}var rn=[],Mo=0,K0=0;function Kc(){for(var h=Mo,c=K0=Mo=0;c<h;){var g=rn[c];rn[c++]=null;var p=rn[c];rn[c++]=null;var M=rn[c];rn[c++]=null;var D=rn[c];if(rn[c++]=null,p!==null&&M!==null){var G=p.pending;G===null?M.next=M:(M.next=G.next,G.next=M),p.pending=M}D!==0&&WS(g,M,D)}}function td(h,c,g,p){rn[Mo++]=h,rn[Mo++]=c,rn[Mo++]=g,rn[Mo++]=p,K0|=p,h.lanes|=p,h=h.alternate,h!==null&&(h.lanes|=p)}function tg(h,c,g,p){return td(h,c,g,p),ed(h)}function Ro(h,c){return td(h,null,null,c),ed(h)}function WS(h,c,g){h.lanes|=g;var p=h.alternate;p!==null&&(p.lanes|=g);for(var M=!1,D=h.return;D!==null;)D.childLanes|=g,p=D.alternate,p!==null&&(p.childLanes|=g),D.tag===22&&(h=D.stateNode,h===null||h._visibility&1||(M=!0)),h=D,D=D.return;return h.tag===3?(D=h.stateNode,M&&c!==null&&(M=31-yi(g),h=D.hiddenUpdates,p=h[M],p===null?h[M]=[c]:p.push(c),c.lane=g|536870912),D):null}function ed(h){if(50<Eu)throw Eu=0,ay=null,Error(i(185));for(var c=h.return;c!==null;)h=c,c=h.return;return h.tag===3?h.stateNode:null}var Eo={};function oT(h,c,g,p){this.tag=h,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _r(h,c,g,p){return new oT(h,c,g,p)}function eg(h){return h=h.prototype,!(!h||!h.isReactComponent)}function na(h,c){var g=h.alternate;return g===null?(g=_r(h.tag,c,h.key,h.mode),g.elementType=h.elementType,g.type=h.type,g.stateNode=h.stateNode,g.alternate=h,h.alternate=g):(g.pendingProps=c,g.type=h.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=h.flags&65011712,g.childLanes=h.childLanes,g.lanes=h.lanes,g.child=h.child,g.memoizedProps=h.memoizedProps,g.memoizedState=h.memoizedState,g.updateQueue=h.updateQueue,c=h.dependencies,g.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},g.sibling=h.sibling,g.index=h.index,g.ref=h.ref,g.refCleanup=h.refCleanup,g}function qS(h,c){h.flags&=65011714;var g=h.alternate;return g===null?(h.childLanes=0,h.lanes=c,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=g.childLanes,h.lanes=g.lanes,h.child=g.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=g.memoizedProps,h.memoizedState=g.memoizedState,h.updateQueue=g.updateQueue,h.type=g.type,c=g.dependencies,h.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),h}function id(h,c,g,p,M,D){var G=0;if(p=h,typeof h=="function")eg(h)&&(G=1);else if(typeof h=="string")G=uw(h,g,J.current)?26:h==="html"||h==="head"||h==="body"?27:5;else t:switch(h){case A:return h=_r(31,g,c,M),h.elementType=A,h.lanes=D,h;case S:return Th(g.children,M,D,c);case x:G=8,M|=24;break;case v:return h=_r(12,g,c,M|2),h.elementType=v,h.lanes=D,h;case F:return h=_r(13,g,c,M),h.elementType=F,h.lanes=D,h;case B:return h=_r(19,g,c,M),h.elementType=B,h.lanes=D,h;default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case b:case T:G=10;break t;case E:G=9;break t;case V:G=11;break t;case z:G=14;break t;case L:G=16,p=null;break t}G=29,g=Error(i(130,h===null?"null":typeof h,"")),p=null}return c=_r(G,g,c,M),c.elementType=h,c.type=p,c.lanes=D,c}function Th(h,c,g,p){return h=_r(7,h,p,c),h.lanes=g,h}function ig(h,c,g){return h=_r(6,h,null,c),h.lanes=g,h}function sg(h,c,g){return c=_r(4,h.children!==null?h.children:[],h.key,c),c.lanes=g,c.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},c}var To=[],wo=0,sd=null,rd=0,nn=[],an=0,wh=null,aa=1,ha="";function Ch(h,c){To[wo++]=rd,To[wo++]=sd,sd=h,rd=c}function jS(h,c,g){nn[an++]=aa,nn[an++]=ha,nn[an++]=wh,wh=h;var p=aa;h=ha;var M=32-yi(p)-1;p&=~(1<<M),g+=1;var D=32-yi(c)+M;if(30<D){var G=M-M%5;D=(p&(1<<G)-1).toString(32),p>>=G,M-=G,aa=1<<32-yi(c)+M|g<<M|p,ha=D+h}else aa=1<<D|g<<M|p,ha=h}function rg(h){h.return!==null&&(Ch(h,1),jS(h,1,0))}function ng(h){for(;h===sd;)sd=To[--wo],To[wo]=null,rd=To[--wo],To[wo]=null;for(;h===wh;)wh=nn[--an],nn[an]=null,ha=nn[--an],nn[an]=null,aa=nn[--an],nn[an]=null}var Js=null,Gi=null,Ke=!1,kh=null,_n=!1,ag=Error(i(519));function Dh(h){var c=Error(i(418,""));throw su(sn(c,h)),ag}function $S(h){var c=h.stateNode,g=h.type,p=h.memoizedProps;switch(c[It]=h,c[Zt]=p,g){case"dialog":Ce("cancel",c),Ce("close",c);break;case"iframe":case"object":case"embed":Ce("load",c);break;case"video":case"audio":for(g=0;g<wu.length;g++)Ce(wu[g],c);break;case"source":Ce("error",c);break;case"img":case"image":case"link":Ce("error",c),Ce("load",c);break;case"details":Ce("toggle",c);break;case"input":Ce("invalid",c),uS(c,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0),Hc(c);break;case"select":Ce("invalid",c);break;case"textarea":Ce("invalid",c),dS(c,p.value,p.defaultValue,p.children),Hc(c)}g=p.children,typeof g!="string"&&typeof g!="number"&&typeof g!="bigint"||c.textContent===""+g||p.suppressHydrationWarning===!0||d1(c.textContent,g)?(p.popover!=null&&(Ce("beforetoggle",c),Ce("toggle",c)),p.onScroll!=null&&Ce("scroll",c),p.onScrollEnd!=null&&Ce("scrollend",c),p.onClick!=null&&(c.onclick=Id),c=!0):c=!1,c||Dh(h)}function JS(h){for(Js=h.return;Js;)switch(Js.tag){case 5:case 13:_n=!1;return;case 27:case 3:_n=!0;return;default:Js=Js.return}}function eu(h){if(h!==Js)return!1;if(!Ke)return JS(h),Ke=!0,!1;var c=h.tag,g;if((g=c!==3&&c!==27)&&((g=c===5)&&(g=h.type,g=!(g!=="form"&&g!=="button")||by(h.type,h.memoizedProps)),g=!g),g&&Gi&&Dh(h),JS(h),c===13){if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(i(317));t:{for(h=h.nextSibling,c=0;h;){if(h.nodeType===8)if(g=h.data,g==="/$"){if(c===0){Gi=bn(h.nextSibling);break t}c--}else g!=="$"&&g!=="$!"&&g!=="$?"||c++;h=h.nextSibling}Gi=null}}else c===27?(c=Gi,Ja(h.type)?(h=Ty,Ty=null,Gi=h):Gi=c):Gi=Js?bn(h.stateNode.nextSibling):null;return!0}function iu(){Gi=Js=null,Ke=!1}function ZS(){var h=kh;return h!==null&&(gr===null?gr=h:gr.push.apply(gr,h),kh=null),h}function su(h){kh===null?kh=[h]:kh.push(h)}var hg=H(null),Fh=null,oa=null;function Na(h,c,g){Q(hg,c._currentValue),c._currentValue=g}function la(h){h._currentValue=hg.current,j(hg)}function og(h,c,g){for(;h!==null;){var p=h.alternate;if((h.childLanes&c)!==c?(h.childLanes|=c,p!==null&&(p.childLanes|=c)):p!==null&&(p.childLanes&c)!==c&&(p.childLanes|=c),h===g)break;h=h.return}}function lg(h,c,g,p){var M=h.child;for(M!==null&&(M.return=h);M!==null;){var D=M.dependencies;if(D!==null){var G=M.child;D=D.firstContext;t:for(;D!==null;){var q=D;D=M;for(var Z=0;Z<c.length;Z++)if(q.context===c[Z]){D.lanes|=g,q=D.alternate,q!==null&&(q.lanes|=g),og(D.return,g,h),p||(G=null);break t}D=q.next}}else if(M.tag===18){if(G=M.return,G===null)throw Error(i(341));G.lanes|=g,D=G.alternate,D!==null&&(D.lanes|=g),og(G,g,h),G=null}else G=M.child;if(G!==null)G.return=M;else for(G=M;G!==null;){if(G===h){G=null;break}if(M=G.sibling,M!==null){M.return=G.return,G=M;break}G=G.return}M=G}}function ru(h,c,g,p){h=null;for(var M=c,D=!1;M!==null;){if(!D){if((M.flags&524288)!==0)D=!0;else if((M.flags&262144)!==0)break}if(M.tag===10){var G=M.alternate;if(G===null)throw Error(i(387));if(G=G.memoizedProps,G!==null){var q=M.type;zr(M.pendingProps.value,G.value)||(h!==null?h.push(q):h=[q])}}else if(M===ut.current){if(G=M.alternate,G===null)throw Error(i(387));G.memoizedState.memoizedState!==M.memoizedState.memoizedState&&(h!==null?h.push(zu):h=[zu])}M=M.return}h!==null&&lg(c,h,g,p),c.flags|=262144}function nd(h){for(h=h.firstContext;h!==null;){if(!zr(h.context._currentValue,h.memoizedValue))return!0;h=h.next}return!1}function Vh(h){Fh=h,oa=null,h=h.dependencies,h!==null&&(h.firstContext=null)}function Ps(h){return QS(Fh,h)}function ad(h,c){return Fh===null&&Vh(h),QS(h,c)}function QS(h,c){var g=c._currentValue;if(c={context:c,memoizedValue:g,next:null},oa===null){if(h===null)throw Error(i(308));oa=c,h.dependencies={lanes:0,firstContext:c},h.flags|=524288}else oa=oa.next=c;return g}var lT=typeof AbortController<"u"?AbortController:function(){var h=[],c=this.signal={aborted:!1,addEventListener:function(g,p){h.push(p)}};this.abort=function(){c.aborted=!0,h.forEach(function(g){return g()})}},uT=r.unstable_scheduleCallback,cT=r.unstable_NormalPriority,ds={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ug(){return{controller:new lT,data:new Map,refCount:0}}function nu(h){h.refCount--,h.refCount===0&&uT(cT,function(){h.controller.abort()})}var au=null,cg=0,Co=0,ko=null;function dT(h,c){if(au===null){var g=au=[];cg=0,Co=fy(),ko={status:"pending",value:void 0,then:function(p){g.push(p)}}}return cg++,c.then(KS,KS),c}function KS(){if(--cg===0&&au!==null){ko!==null&&(ko.status="fulfilled");var h=au;au=null,Co=0,ko=null;for(var c=0;c<h.length;c++)(0,h[c])()}}function fT(h,c){var g=[],p={status:"pending",value:null,reason:null,then:function(M){g.push(M)}};return h.then(function(){p.status="fulfilled",p.value=c;for(var M=0;M<g.length;M++)(0,g[M])(c)},function(M){for(p.status="rejected",p.reason=M,M=0;M<g.length;M++)(0,g[M])(void 0)}),p}var tx=N.S;N.S=function(h,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&dT(h,c),tx!==null&&tx(h,c)};var zh=H(null);function dg(){var h=zh.current;return h!==null?h:vi.pooledCache}function hd(h,c){c===null?Q(zh,zh.current):Q(zh,c.pool)}function ex(){var h=dg();return h===null?null:{parent:ds._currentValue,pool:h}}var hu=Error(i(460)),ix=Error(i(474)),od=Error(i(542)),fg={then:function(){}};function sx(h){return h=h.status,h==="fulfilled"||h==="rejected"}function ld(){}function rx(h,c,g){switch(g=h[g],g===void 0?h.push(c):g!==c&&(c.then(ld,ld),c=g),c.status){case"fulfilled":return c.value;case"rejected":throw h=c.reason,ax(h),h;default:if(typeof c.status=="string")c.then(ld,ld);else{if(h=vi,h!==null&&100<h.shellSuspendCounter)throw Error(i(482));h=c,h.status="pending",h.then(function(p){if(c.status==="pending"){var M=c;M.status="fulfilled",M.value=p}},function(p){if(c.status==="pending"){var M=c;M.status="rejected",M.reason=p}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw h=c.reason,ax(h),h}throw ou=c,hu}}var ou=null;function nx(){if(ou===null)throw Error(i(459));var h=ou;return ou=null,h}function ax(h){if(h===hu||h===od)throw Error(i(483))}var Ba=!1;function gg(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function yg(h,c){h=h.updateQueue,c.updateQueue===h&&(c.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,callbacks:null})}function La(h){return{lane:h,tag:0,payload:null,callback:null,next:null}}function Ia(h,c,g){var p=h.updateQueue;if(p===null)return null;if(p=p.shared,(ai&2)!==0){var M=p.pending;return M===null?c.next=c:(c.next=M.next,M.next=c),p.pending=c,c=ed(h),WS(h,null,g),c}return td(h,p,c,g),ed(h)}function lu(h,c,g){if(c=c.updateQueue,c!==null&&(c=c.shared,(g&4194048)!==0)){var p=c.lanes;p&=h.pendingLanes,g|=p,c.lanes=g,ii(h,g)}}function mg(h,c){var g=h.updateQueue,p=h.alternate;if(p!==null&&(p=p.updateQueue,g===p)){var M=null,D=null;if(g=g.firstBaseUpdate,g!==null){do{var G={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};D===null?M=D=G:D=D.next=G,g=g.next}while(g!==null);D===null?M=D=c:D=D.next=c}else M=D=c;g={baseState:p.baseState,firstBaseUpdate:M,lastBaseUpdate:D,shared:p.shared,callbacks:p.callbacks},h.updateQueue=g;return}h=g.lastBaseUpdate,h===null?g.firstBaseUpdate=c:h.next=c,g.lastBaseUpdate=c}var pg=!1;function uu(){if(pg){var h=ko;if(h!==null)throw h}}function cu(h,c,g,p){pg=!1;var M=h.updateQueue;Ba=!1;var D=M.firstBaseUpdate,G=M.lastBaseUpdate,q=M.shared.pending;if(q!==null){M.shared.pending=null;var Z=q,rt=Z.next;Z.next=null,G===null?D=rt:G.next=rt,G=Z;var yt=h.alternate;yt!==null&&(yt=yt.updateQueue,q=yt.lastBaseUpdate,q!==G&&(q===null?yt.firstBaseUpdate=rt:q.next=rt,yt.lastBaseUpdate=Z))}if(D!==null){var pt=M.baseState;G=0,yt=rt=Z=null,q=D;do{var at=q.lane&-536870913,lt=at!==q.lane;if(lt?(Ne&at)===at:(p&at)===at){at!==0&&at===Co&&(pg=!0),yt!==null&&(yt=yt.next={lane:0,tag:q.tag,payload:q.payload,callback:null,next:null});t:{var te=h,Wt=q;at=c;var di=g;switch(Wt.tag){case 1:if(te=Wt.payload,typeof te=="function"){pt=te.call(di,pt,at);break t}pt=te;break t;case 3:te.flags=te.flags&-65537|128;case 0:if(te=Wt.payload,at=typeof te=="function"?te.call(di,pt,at):te,at==null)break t;pt=d({},pt,at);break t;case 2:Ba=!0}}at=q.callback,at!==null&&(h.flags|=64,lt&&(h.flags|=8192),lt=M.callbacks,lt===null?M.callbacks=[at]:lt.push(at))}else lt={lane:at,tag:q.tag,payload:q.payload,callback:q.callback,next:null},yt===null?(rt=yt=lt,Z=pt):yt=yt.next=lt,G|=at;if(q=q.next,q===null){if(q=M.shared.pending,q===null)break;lt=q,q=lt.next,lt.next=null,M.lastBaseUpdate=lt,M.shared.pending=null}}while(!0);yt===null&&(Z=pt),M.baseState=Z,M.firstBaseUpdate=rt,M.lastBaseUpdate=yt,D===null&&(M.shared.lanes=0),Wa|=G,h.lanes=G,h.memoizedState=pt}}function hx(h,c){if(typeof h!="function")throw Error(i(191,h));h.call(c)}function ox(h,c){var g=h.callbacks;if(g!==null)for(h.callbacks=null,h=0;h<g.length;h++)hx(g[h],c)}var Do=H(null),ud=H(0);function lx(h,c){h=ma,Q(ud,h),Q(Do,c),ma=h|c.baseLanes}function Sg(){Q(ud,ma),Q(Do,Do.current)}function xg(){ma=ud.current,j(Do),j(ud)}var Pa=0,ye=null,ui=null,rs=null,cd=!1,Fo=!1,_h=!1,dd=0,du=0,Vo=null,gT=0;function Zi(){throw Error(i(321))}function Ag(h,c){if(c===null)return!1;for(var g=0;g<c.length&&g<h.length;g++)if(!zr(h[g],c[g]))return!1;return!0}function vg(h,c,g,p,M,D){return Pa=D,ye=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,N.H=h===null||h.memoizedState===null?Wx:qx,_h=!1,D=g(p,M),_h=!1,Fo&&(D=cx(c,g,p,M)),ux(h),D}function ux(h){N.H=Sd;var c=ui!==null&&ui.next!==null;if(Pa=0,rs=ui=ye=null,cd=!1,du=0,Vo=null,c)throw Error(i(300));h===null||vs||(h=h.dependencies,h!==null&&nd(h)&&(vs=!0))}function cx(h,c,g,p){ye=h;var M=0;do{if(Fo&&(Vo=null),du=0,Fo=!1,25<=M)throw Error(i(301));if(M+=1,rs=ui=null,h.updateQueue!=null){var D=h.updateQueue;D.lastEffect=null,D.events=null,D.stores=null,D.memoCache!=null&&(D.memoCache.index=0)}N.H=vT,D=c(g,p)}while(Fo);return D}function yT(){var h=N.H,c=h.useState()[0];return c=typeof c.then=="function"?fu(c):c,h=h.useState()[0],(ui!==null?ui.memoizedState:null)!==h&&(ye.flags|=1024),c}function bg(){var h=dd!==0;return dd=0,h}function Mg(h,c,g){c.updateQueue=h.updateQueue,c.flags&=-2053,h.lanes&=~g}function Rg(h){if(cd){for(h=h.memoizedState;h!==null;){var c=h.queue;c!==null&&(c.pending=null),h=h.next}cd=!1}Pa=0,rs=ui=ye=null,Fo=!1,du=dd=0,Vo=null}function dr(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rs===null?ye.memoizedState=rs=h:rs=rs.next=h,rs}function ns(){if(ui===null){var h=ye.alternate;h=h!==null?h.memoizedState:null}else h=ui.next;var c=rs===null?ye.memoizedState:rs.next;if(c!==null)rs=c,ui=h;else{if(h===null)throw ye.alternate===null?Error(i(467)):Error(i(310));ui=h,h={memoizedState:ui.memoizedState,baseState:ui.baseState,baseQueue:ui.baseQueue,queue:ui.queue,next:null},rs===null?ye.memoizedState=rs=h:rs=rs.next=h}return rs}function Eg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function fu(h){var c=du;return du+=1,Vo===null&&(Vo=[]),h=rx(Vo,h,c),c=ye,(rs===null?c.memoizedState:rs.next)===null&&(c=c.alternate,N.H=c===null||c.memoizedState===null?Wx:qx),h}function fd(h){if(h!==null&&typeof h=="object"){if(typeof h.then=="function")return fu(h);if(h.$$typeof===T)return Ps(h)}throw Error(i(438,String(h)))}function Tg(h){var c=null,g=ye.updateQueue;if(g!==null&&(c=g.memoCache),c==null){var p=ye.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(c={data:p.data.map(function(M){return M.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),g===null&&(g=Eg(),ye.updateQueue=g),g.memoCache=c,g=c.data[c.index],g===void 0)for(g=c.data[c.index]=Array(h),p=0;p<h;p++)g[p]=R;return c.index++,g}function ua(h,c){return typeof c=="function"?c(h):c}function gd(h){var c=ns();return wg(c,ui,h)}function wg(h,c,g){var p=h.queue;if(p===null)throw Error(i(311));p.lastRenderedReducer=g;var M=h.baseQueue,D=p.pending;if(D!==null){if(M!==null){var G=M.next;M.next=D.next,D.next=G}c.baseQueue=M=D,p.pending=null}if(D=h.baseState,M===null)h.memoizedState=D;else{c=M.next;var q=G=null,Z=null,rt=c,yt=!1;do{var pt=rt.lane&-536870913;if(pt!==rt.lane?(Ne&pt)===pt:(Pa&pt)===pt){var at=rt.revertLane;if(at===0)Z!==null&&(Z=Z.next={lane:0,revertLane:0,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null}),pt===Co&&(yt=!0);else if((Pa&at)===at){rt=rt.next,at===Co&&(yt=!0);continue}else pt={lane:0,revertLane:rt.revertLane,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null},Z===null?(q=Z=pt,G=D):Z=Z.next=pt,ye.lanes|=at,Wa|=at;pt=rt.action,_h&&g(D,pt),D=rt.hasEagerState?rt.eagerState:g(D,pt)}else at={lane:pt,revertLane:rt.revertLane,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null},Z===null?(q=Z=at,G=D):Z=Z.next=at,ye.lanes|=pt,Wa|=pt;rt=rt.next}while(rt!==null&&rt!==c);if(Z===null?G=D:Z.next=q,!zr(D,h.memoizedState)&&(vs=!0,yt&&(g=ko,g!==null)))throw g;h.memoizedState=D,h.baseState=G,h.baseQueue=Z,p.lastRenderedState=D}return M===null&&(p.lanes=0),[h.memoizedState,p.dispatch]}function Cg(h){var c=ns(),g=c.queue;if(g===null)throw Error(i(311));g.lastRenderedReducer=h;var p=g.dispatch,M=g.pending,D=c.memoizedState;if(M!==null){g.pending=null;var G=M=M.next;do D=h(D,G.action),G=G.next;while(G!==M);zr(D,c.memoizedState)||(vs=!0),c.memoizedState=D,c.baseQueue===null&&(c.baseState=D),g.lastRenderedState=D}return[D,p]}function dx(h,c,g){var p=ye,M=ns(),D=Ke;if(D){if(g===void 0)throw Error(i(407));g=g()}else g=c();var G=!zr((ui||M).memoizedState,g);G&&(M.memoizedState=g,vs=!0),M=M.queue;var q=yx.bind(null,p,M,h);if(gu(2048,8,q,[h]),M.getSnapshot!==c||G||rs!==null&&rs.memoizedState.tag&1){if(p.flags|=2048,zo(9,yd(),gx.bind(null,p,M,g,c),null),vi===null)throw Error(i(349));D||(Pa&124)!==0||fx(p,c,g)}return g}function fx(h,c,g){h.flags|=16384,h={getSnapshot:c,value:g},c=ye.updateQueue,c===null?(c=Eg(),ye.updateQueue=c,c.stores=[h]):(g=c.stores,g===null?c.stores=[h]:g.push(h))}function gx(h,c,g,p){c.value=g,c.getSnapshot=p,mx(c)&&px(h)}function yx(h,c,g){return g(function(){mx(c)&&px(h)})}function mx(h){var c=h.getSnapshot;h=h.value;try{var g=c();return!zr(h,g)}catch{return!0}}function px(h){var c=Ro(h,2);c!==null&&Pr(c,h,2)}function kg(h){var c=dr();if(typeof h=="function"){var g=h;if(h=g(),_h){Le(!0);try{g()}finally{Le(!1)}}}return c.memoizedState=c.baseState=h,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:h},c}function Sx(h,c,g,p){return h.baseState=g,wg(h,ui,typeof p=="function"?p:ua)}function mT(h,c,g,p,M){if(pd(h))throw Error(i(485));if(h=c.action,h!==null){var D={payload:M,action:h,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(G){D.listeners.push(G)}};N.T!==null?g(!0):D.isTransition=!1,p(D),g=c.pending,g===null?(D.next=c.pending=D,xx(c,D)):(D.next=g.next,c.pending=g.next=D)}}function xx(h,c){var g=c.action,p=c.payload,M=h.state;if(c.isTransition){var D=N.T,G={};N.T=G;try{var q=g(M,p),Z=N.S;Z!==null&&Z(G,q),Ax(h,c,q)}catch(rt){Dg(h,c,rt)}finally{N.T=D}}else try{D=g(M,p),Ax(h,c,D)}catch(rt){Dg(h,c,rt)}}function Ax(h,c,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(p){vx(h,c,p)},function(p){return Dg(h,c,p)}):vx(h,c,g)}function vx(h,c,g){c.status="fulfilled",c.value=g,bx(c),h.state=g,c=h.pending,c!==null&&(g=c.next,g===c?h.pending=null:(g=g.next,c.next=g,xx(h,g)))}function Dg(h,c,g){var p=h.pending;if(h.pending=null,p!==null){p=p.next;do c.status="rejected",c.reason=g,bx(c),c=c.next;while(c!==p)}h.action=null}function bx(h){h=h.listeners;for(var c=0;c<h.length;c++)(0,h[c])()}function Mx(h,c){return c}function Rx(h,c){if(Ke){var g=vi.formState;if(g!==null){t:{var p=ye;if(Ke){if(Gi){e:{for(var M=Gi,D=_n;M.nodeType!==8;){if(!D){M=null;break e}if(M=bn(M.nextSibling),M===null){M=null;break e}}D=M.data,M=D==="F!"||D==="F"?M:null}if(M){Gi=bn(M.nextSibling),p=M.data==="F!";break t}}Dh(p)}p=!1}p&&(c=g[0])}}return g=dr(),g.memoizedState=g.baseState=c,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mx,lastRenderedState:c},g.queue=p,g=Yx.bind(null,ye,p),p.dispatch=g,p=kg(!1),D=Ng.bind(null,ye,!1,p.queue),p=dr(),M={state:c,dispatch:null,action:h,pending:null},p.queue=M,g=mT.bind(null,ye,M,D,g),M.dispatch=g,p.memoizedState=h,[c,g,!1]}function Ex(h){var c=ns();return Tx(c,ui,h)}function Tx(h,c,g){if(c=wg(h,c,Mx)[0],h=gd(ua)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var p=fu(c)}catch(G){throw G===hu?od:G}else p=c;c=ns();var M=c.queue,D=M.dispatch;return g!==c.memoizedState&&(ye.flags|=2048,zo(9,yd(),pT.bind(null,M,g),null)),[p,D,h]}function pT(h,c){h.action=c}function wx(h){var c=ns(),g=ui;if(g!==null)return Tx(c,g,h);ns(),c=c.memoizedState,g=ns();var p=g.queue.dispatch;return g.memoizedState=h,[c,p,!1]}function zo(h,c,g,p){return h={tag:h,create:g,deps:p,inst:c,next:null},c=ye.updateQueue,c===null&&(c=Eg(),ye.updateQueue=c),g=c.lastEffect,g===null?c.lastEffect=h.next=h:(p=g.next,g.next=h,h.next=p,c.lastEffect=h),h}function yd(){return{destroy:void 0,resource:void 0}}function Cx(){return ns().memoizedState}function md(h,c,g,p){var M=dr();p=p===void 0?null:p,ye.flags|=h,M.memoizedState=zo(1|c,yd(),g,p)}function gu(h,c,g,p){var M=ns();p=p===void 0?null:p;var D=M.memoizedState.inst;ui!==null&&p!==null&&Ag(p,ui.memoizedState.deps)?M.memoizedState=zo(c,D,g,p):(ye.flags|=h,M.memoizedState=zo(1|c,D,g,p))}function kx(h,c){md(8390656,8,h,c)}function Dx(h,c){gu(2048,8,h,c)}function Fx(h,c){return gu(4,2,h,c)}function Vx(h,c){return gu(4,4,h,c)}function zx(h,c){if(typeof c=="function"){h=h();var g=c(h);return function(){typeof g=="function"?g():c(null)}}if(c!=null)return h=h(),c.current=h,function(){c.current=null}}function _x(h,c,g){g=g!=null?g.concat([h]):null,gu(4,4,zx.bind(null,c,h),g)}function Fg(){}function Nx(h,c){var g=ns();c=c===void 0?null:c;var p=g.memoizedState;return c!==null&&Ag(c,p[1])?p[0]:(g.memoizedState=[h,c],h)}function Bx(h,c){var g=ns();c=c===void 0?null:c;var p=g.memoizedState;if(c!==null&&Ag(c,p[1]))return p[0];if(p=h(),_h){Le(!0);try{h()}finally{Le(!1)}}return g.memoizedState=[p,c],p}function Vg(h,c,g){return g===void 0||(Pa&1073741824)!==0?h.memoizedState=c:(h.memoizedState=g,h=PA(),ye.lanes|=h,Wa|=h,g)}function Lx(h,c,g,p){return zr(g,c)?g:Do.current!==null?(h=Vg(h,g,p),zr(h,c)||(vs=!0),h):(Pa&42)===0?(vs=!0,h.memoizedState=g):(h=PA(),ye.lanes|=h,Wa|=h,c)}function Ix(h,c,g,p,M){var D=U.p;U.p=D!==0&&8>D?D:8;var G=N.T,q={};N.T=q,Ng(h,!1,c,g);try{var Z=M(),rt=N.S;if(rt!==null&&rt(q,Z),Z!==null&&typeof Z=="object"&&typeof Z.then=="function"){var yt=fT(Z,p);yu(h,c,yt,Ir(h))}else yu(h,c,p,Ir(h))}catch(pt){yu(h,c,{then:function(){},status:"rejected",reason:pt},Ir())}finally{U.p=D,N.T=G}}function ST(){}function zg(h,c,g,p){if(h.tag!==5)throw Error(i(476));var M=Px(h).queue;Ix(h,M,c,O,g===null?ST:function(){return Ux(h),g(p)})}function Px(h){var c=h.memoizedState;if(c!==null)return c;c={memoizedState:O,baseState:O,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:O},next:null};var g={};return c.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ua,lastRenderedState:g},next:null},h.memoizedState=c,h=h.alternate,h!==null&&(h.memoizedState=c),c}function Ux(h){var c=Px(h).next.queue;yu(h,c,{},Ir())}function _g(){return Ps(zu)}function Ox(){return ns().memoizedState}function Gx(){return ns().memoizedState}function xT(h){for(var c=h.return;c!==null;){switch(c.tag){case 24:case 3:var g=Ir();h=La(g);var p=Ia(c,h,g);p!==null&&(Pr(p,c,g),lu(p,c,g)),c={cache:ug()},h.payload=c;return}c=c.return}}function AT(h,c,g){var p=Ir();g={lane:p,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null},pd(h)?Hx(c,g):(g=tg(h,c,g,p),g!==null&&(Pr(g,h,p),Xx(g,c,p)))}function Yx(h,c,g){var p=Ir();yu(h,c,g,p)}function yu(h,c,g,p){var M={lane:p,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null};if(pd(h))Hx(c,M);else{var D=h.alternate;if(h.lanes===0&&(D===null||D.lanes===0)&&(D=c.lastRenderedReducer,D!==null))try{var G=c.lastRenderedState,q=D(G,g);if(M.hasEagerState=!0,M.eagerState=q,zr(q,G))return td(h,c,M,0),vi===null&&Kc(),!1}catch{}finally{}if(g=tg(h,c,M,p),g!==null)return Pr(g,h,p),Xx(g,c,p),!0}return!1}function Ng(h,c,g,p){if(p={lane:2,revertLane:fy(),action:p,hasEagerState:!1,eagerState:null,next:null},pd(h)){if(c)throw Error(i(479))}else c=tg(h,g,p,2),c!==null&&Pr(c,h,2)}function pd(h){var c=h.alternate;return h===ye||c!==null&&c===ye}function Hx(h,c){Fo=cd=!0;var g=h.pending;g===null?c.next=c:(c.next=g.next,g.next=c),h.pending=c}function Xx(h,c,g){if((g&4194048)!==0){var p=c.lanes;p&=h.pendingLanes,g|=p,c.lanes=g,ii(h,g)}}var Sd={readContext:Ps,use:fd,useCallback:Zi,useContext:Zi,useEffect:Zi,useImperativeHandle:Zi,useLayoutEffect:Zi,useInsertionEffect:Zi,useMemo:Zi,useReducer:Zi,useRef:Zi,useState:Zi,useDebugValue:Zi,useDeferredValue:Zi,useTransition:Zi,useSyncExternalStore:Zi,useId:Zi,useHostTransitionStatus:Zi,useFormState:Zi,useActionState:Zi,useOptimistic:Zi,useMemoCache:Zi,useCacheRefresh:Zi},Wx={readContext:Ps,use:fd,useCallback:function(h,c){return dr().memoizedState=[h,c===void 0?null:c],h},useContext:Ps,useEffect:kx,useImperativeHandle:function(h,c,g){g=g!=null?g.concat([h]):null,md(4194308,4,zx.bind(null,c,h),g)},useLayoutEffect:function(h,c){return md(4194308,4,h,c)},useInsertionEffect:function(h,c){md(4,2,h,c)},useMemo:function(h,c){var g=dr();c=c===void 0?null:c;var p=h();if(_h){Le(!0);try{h()}finally{Le(!1)}}return g.memoizedState=[p,c],p},useReducer:function(h,c,g){var p=dr();if(g!==void 0){var M=g(c);if(_h){Le(!0);try{g(c)}finally{Le(!1)}}}else M=c;return p.memoizedState=p.baseState=M,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:M},p.queue=h,h=h.dispatch=AT.bind(null,ye,h),[p.memoizedState,h]},useRef:function(h){var c=dr();return h={current:h},c.memoizedState=h},useState:function(h){h=kg(h);var c=h.queue,g=Yx.bind(null,ye,c);return c.dispatch=g,[h.memoizedState,g]},useDebugValue:Fg,useDeferredValue:function(h,c){var g=dr();return Vg(g,h,c)},useTransition:function(){var h=kg(!1);return h=Ix.bind(null,ye,h.queue,!0,!1),dr().memoizedState=h,[!1,h]},useSyncExternalStore:function(h,c,g){var p=ye,M=dr();if(Ke){if(g===void 0)throw Error(i(407));g=g()}else{if(g=c(),vi===null)throw Error(i(349));(Ne&124)!==0||fx(p,c,g)}M.memoizedState=g;var D={value:g,getSnapshot:c};return M.queue=D,kx(yx.bind(null,p,D,h),[h]),p.flags|=2048,zo(9,yd(),gx.bind(null,p,D,g,c),null),g},useId:function(){var h=dr(),c=vi.identifierPrefix;if(Ke){var g=ha,p=aa;g=(p&~(1<<32-yi(p)-1)).toString(32)+g,c="«"+c+"R"+g,g=dd++,0<g&&(c+="H"+g.toString(32)),c+="»"}else g=gT++,c="«"+c+"r"+g.toString(32)+"»";return h.memoizedState=c},useHostTransitionStatus:_g,useFormState:Rx,useActionState:Rx,useOptimistic:function(h){var c=dr();c.memoizedState=c.baseState=h;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=g,c=Ng.bind(null,ye,!0,g),g.dispatch=c,[h,c]},useMemoCache:Tg,useCacheRefresh:function(){return dr().memoizedState=xT.bind(null,ye)}},qx={readContext:Ps,use:fd,useCallback:Nx,useContext:Ps,useEffect:Dx,useImperativeHandle:_x,useInsertionEffect:Fx,useLayoutEffect:Vx,useMemo:Bx,useReducer:gd,useRef:Cx,useState:function(){return gd(ua)},useDebugValue:Fg,useDeferredValue:function(h,c){var g=ns();return Lx(g,ui.memoizedState,h,c)},useTransition:function(){var h=gd(ua)[0],c=ns().memoizedState;return[typeof h=="boolean"?h:fu(h),c]},useSyncExternalStore:dx,useId:Ox,useHostTransitionStatus:_g,useFormState:Ex,useActionState:Ex,useOptimistic:function(h,c){var g=ns();return Sx(g,ui,h,c)},useMemoCache:Tg,useCacheRefresh:Gx},vT={readContext:Ps,use:fd,useCallback:Nx,useContext:Ps,useEffect:Dx,useImperativeHandle:_x,useInsertionEffect:Fx,useLayoutEffect:Vx,useMemo:Bx,useReducer:Cg,useRef:Cx,useState:function(){return Cg(ua)},useDebugValue:Fg,useDeferredValue:function(h,c){var g=ns();return ui===null?Vg(g,h,c):Lx(g,ui.memoizedState,h,c)},useTransition:function(){var h=Cg(ua)[0],c=ns().memoizedState;return[typeof h=="boolean"?h:fu(h),c]},useSyncExternalStore:dx,useId:Ox,useHostTransitionStatus:_g,useFormState:wx,useActionState:wx,useOptimistic:function(h,c){var g=ns();return ui!==null?Sx(g,ui,h,c):(g.baseState=h,[h,g.queue.dispatch])},useMemoCache:Tg,useCacheRefresh:Gx},_o=null,mu=0;function xd(h){var c=mu;return mu+=1,_o===null&&(_o=[]),rx(_o,h,c)}function pu(h,c){c=c.props.ref,h.ref=c!==void 0?c:null}function Ad(h,c){throw c.$$typeof===f?Error(i(525)):(h=Object.prototype.toString.call(c),Error(i(31,h==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":h)))}function jx(h){var c=h._init;return c(h._payload)}function $x(h){function c(tt,K){if(h){var st=tt.deletions;st===null?(tt.deletions=[K],tt.flags|=16):st.push(K)}}function g(tt,K){if(!h)return null;for(;K!==null;)c(tt,K),K=K.sibling;return null}function p(tt){for(var K=new Map;tt!==null;)tt.key!==null?K.set(tt.key,tt):K.set(tt.index,tt),tt=tt.sibling;return K}function M(tt,K){return tt=na(tt,K),tt.index=0,tt.sibling=null,tt}function D(tt,K,st){return tt.index=st,h?(st=tt.alternate,st!==null?(st=st.index,st<K?(tt.flags|=67108866,K):st):(tt.flags|=67108866,K)):(tt.flags|=1048576,K)}function G(tt){return h&&tt.alternate===null&&(tt.flags|=67108866),tt}function q(tt,K,st,mt){return K===null||K.tag!==6?(K=ig(st,tt.mode,mt),K.return=tt,K):(K=M(K,st),K.return=tt,K)}function Z(tt,K,st,mt){var Nt=st.type;return Nt===S?yt(tt,K,st.props.children,mt,st.key):K!==null&&(K.elementType===Nt||typeof Nt=="object"&&Nt!==null&&Nt.$$typeof===L&&jx(Nt)===K.type)?(K=M(K,st.props),pu(K,st),K.return=tt,K):(K=id(st.type,st.key,st.props,null,tt.mode,mt),pu(K,st),K.return=tt,K)}function rt(tt,K,st,mt){return K===null||K.tag!==4||K.stateNode.containerInfo!==st.containerInfo||K.stateNode.implementation!==st.implementation?(K=sg(st,tt.mode,mt),K.return=tt,K):(K=M(K,st.children||[]),K.return=tt,K)}function yt(tt,K,st,mt,Nt){return K===null||K.tag!==7?(K=Th(st,tt.mode,mt,Nt),K.return=tt,K):(K=M(K,st),K.return=tt,K)}function pt(tt,K,st){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return K=ig(""+K,tt.mode,st),K.return=tt,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case y:return st=id(K.type,K.key,K.props,null,tt.mode,st),pu(st,K),st.return=tt,st;case m:return K=sg(K,tt.mode,st),K.return=tt,K;case L:var mt=K._init;return K=mt(K._payload),pt(tt,K,st)}if(X(K)||C(K))return K=Th(K,tt.mode,st,null),K.return=tt,K;if(typeof K.then=="function")return pt(tt,xd(K),st);if(K.$$typeof===T)return pt(tt,ad(tt,K),st);Ad(tt,K)}return null}function at(tt,K,st,mt){var Nt=K!==null?K.key:null;if(typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint")return Nt!==null?null:q(tt,K,""+st,mt);if(typeof st=="object"&&st!==null){switch(st.$$typeof){case y:return st.key===Nt?Z(tt,K,st,mt):null;case m:return st.key===Nt?rt(tt,K,st,mt):null;case L:return Nt=st._init,st=Nt(st._payload),at(tt,K,st,mt)}if(X(st)||C(st))return Nt!==null?null:yt(tt,K,st,mt,null);if(typeof st.then=="function")return at(tt,K,xd(st),mt);if(st.$$typeof===T)return at(tt,K,ad(tt,st),mt);Ad(tt,st)}return null}function lt(tt,K,st,mt,Nt){if(typeof mt=="string"&&mt!==""||typeof mt=="number"||typeof mt=="bigint")return tt=tt.get(st)||null,q(K,tt,""+mt,Nt);if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case y:return tt=tt.get(mt.key===null?st:mt.key)||null,Z(K,tt,mt,Nt);case m:return tt=tt.get(mt.key===null?st:mt.key)||null,rt(K,tt,mt,Nt);case L:var ve=mt._init;return mt=ve(mt._payload),lt(tt,K,st,mt,Nt)}if(X(mt)||C(mt))return tt=tt.get(st)||null,yt(K,tt,mt,Nt,null);if(typeof mt.then=="function")return lt(tt,K,st,xd(mt),Nt);if(mt.$$typeof===T)return lt(tt,K,st,ad(K,mt),Nt);Ad(K,mt)}return null}function te(tt,K,st,mt){for(var Nt=null,ve=null,Gt=K,$t=K=0,Ms=null;Gt!==null&&$t<st.length;$t++){Gt.index>$t?(Ms=Gt,Gt=null):Ms=Gt.sibling;var Xe=at(tt,Gt,st[$t],mt);if(Xe===null){Gt===null&&(Gt=Ms);break}h&&Gt&&Xe.alternate===null&&c(tt,Gt),K=D(Xe,K,$t),ve===null?Nt=Xe:ve.sibling=Xe,ve=Xe,Gt=Ms}if($t===st.length)return g(tt,Gt),Ke&&Ch(tt,$t),Nt;if(Gt===null){for(;$t<st.length;$t++)Gt=pt(tt,st[$t],mt),Gt!==null&&(K=D(Gt,K,$t),ve===null?Nt=Gt:ve.sibling=Gt,ve=Gt);return Ke&&Ch(tt,$t),Nt}for(Gt=p(Gt);$t<st.length;$t++)Ms=lt(Gt,tt,$t,st[$t],mt),Ms!==null&&(h&&Ms.alternate!==null&&Gt.delete(Ms.key===null?$t:Ms.key),K=D(Ms,K,$t),ve===null?Nt=Ms:ve.sibling=Ms,ve=Ms);return h&&Gt.forEach(function(eh){return c(tt,eh)}),Ke&&Ch(tt,$t),Nt}function Wt(tt,K,st,mt){if(st==null)throw Error(i(151));for(var Nt=null,ve=null,Gt=K,$t=K=0,Ms=null,Xe=st.next();Gt!==null&&!Xe.done;$t++,Xe=st.next()){Gt.index>$t?(Ms=Gt,Gt=null):Ms=Gt.sibling;var eh=at(tt,Gt,Xe.value,mt);if(eh===null){Gt===null&&(Gt=Ms);break}h&&Gt&&eh.alternate===null&&c(tt,Gt),K=D(eh,K,$t),ve===null?Nt=eh:ve.sibling=eh,ve=eh,Gt=Ms}if(Xe.done)return g(tt,Gt),Ke&&Ch(tt,$t),Nt;if(Gt===null){for(;!Xe.done;$t++,Xe=st.next())Xe=pt(tt,Xe.value,mt),Xe!==null&&(K=D(Xe,K,$t),ve===null?Nt=Xe:ve.sibling=Xe,ve=Xe);return Ke&&Ch(tt,$t),Nt}for(Gt=p(Gt);!Xe.done;$t++,Xe=st.next())Xe=lt(Gt,tt,$t,Xe.value,mt),Xe!==null&&(h&&Xe.alternate!==null&&Gt.delete(Xe.key===null?$t:Xe.key),K=D(Xe,K,$t),ve===null?Nt=Xe:ve.sibling=Xe,ve=Xe);return h&&Gt.forEach(function(bw){return c(tt,bw)}),Ke&&Ch(tt,$t),Nt}function di(tt,K,st,mt){if(typeof st=="object"&&st!==null&&st.type===S&&st.key===null&&(st=st.props.children),typeof st=="object"&&st!==null){switch(st.$$typeof){case y:t:{for(var Nt=st.key;K!==null;){if(K.key===Nt){if(Nt=st.type,Nt===S){if(K.tag===7){g(tt,K.sibling),mt=M(K,st.props.children),mt.return=tt,tt=mt;break t}}else if(K.elementType===Nt||typeof Nt=="object"&&Nt!==null&&Nt.$$typeof===L&&jx(Nt)===K.type){g(tt,K.sibling),mt=M(K,st.props),pu(mt,st),mt.return=tt,tt=mt;break t}g(tt,K);break}else c(tt,K);K=K.sibling}st.type===S?(mt=Th(st.props.children,tt.mode,mt,st.key),mt.return=tt,tt=mt):(mt=id(st.type,st.key,st.props,null,tt.mode,mt),pu(mt,st),mt.return=tt,tt=mt)}return G(tt);case m:t:{for(Nt=st.key;K!==null;){if(K.key===Nt)if(K.tag===4&&K.stateNode.containerInfo===st.containerInfo&&K.stateNode.implementation===st.implementation){g(tt,K.sibling),mt=M(K,st.children||[]),mt.return=tt,tt=mt;break t}else{g(tt,K);break}else c(tt,K);K=K.sibling}mt=sg(st,tt.mode,mt),mt.return=tt,tt=mt}return G(tt);case L:return Nt=st._init,st=Nt(st._payload),di(tt,K,st,mt)}if(X(st))return te(tt,K,st,mt);if(C(st)){if(Nt=C(st),typeof Nt!="function")throw Error(i(150));return st=Nt.call(st),Wt(tt,K,st,mt)}if(typeof st.then=="function")return di(tt,K,xd(st),mt);if(st.$$typeof===T)return di(tt,K,ad(tt,st),mt);Ad(tt,st)}return typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint"?(st=""+st,K!==null&&K.tag===6?(g(tt,K.sibling),mt=M(K,st),mt.return=tt,tt=mt):(g(tt,K),mt=ig(st,tt.mode,mt),mt.return=tt,tt=mt),G(tt)):g(tt,K)}return function(tt,K,st,mt){try{mu=0;var Nt=di(tt,K,st,mt);return _o=null,Nt}catch(Gt){if(Gt===hu||Gt===od)throw Gt;var ve=_r(29,Gt,null,tt.mode);return ve.lanes=mt,ve.return=tt,ve}finally{}}}var No=$x(!0),Jx=$x(!1),hn=H(null),Nn=null;function Ua(h){var c=h.alternate;Q(fs,fs.current&1),Q(hn,h),Nn===null&&(c===null||Do.current!==null||c.memoizedState!==null)&&(Nn=h)}function Zx(h){if(h.tag===22){if(Q(fs,fs.current),Q(hn,h),Nn===null){var c=h.alternate;c!==null&&c.memoizedState!==null&&(Nn=h)}}else Oa()}function Oa(){Q(fs,fs.current),Q(hn,hn.current)}function ca(h){j(hn),Nn===h&&(Nn=null),j(fs)}var fs=H(0);function vd(h){for(var c=h;c!==null;){if(c.tag===13){var g=c.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||Ey(g)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===h)break;for(;c.sibling===null;){if(c.return===null||c.return===h)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function Bg(h,c,g,p){c=h.memoizedState,g=g(p,c),g=g==null?c:d({},c,g),h.memoizedState=g,h.lanes===0&&(h.updateQueue.baseState=g)}var Lg={enqueueSetState:function(h,c,g){h=h._reactInternals;var p=Ir(),M=La(p);M.payload=c,g!=null&&(M.callback=g),c=Ia(h,M,p),c!==null&&(Pr(c,h,p),lu(c,h,p))},enqueueReplaceState:function(h,c,g){h=h._reactInternals;var p=Ir(),M=La(p);M.tag=1,M.payload=c,g!=null&&(M.callback=g),c=Ia(h,M,p),c!==null&&(Pr(c,h,p),lu(c,h,p))},enqueueForceUpdate:function(h,c){h=h._reactInternals;var g=Ir(),p=La(g);p.tag=2,c!=null&&(p.callback=c),c=Ia(h,p,g),c!==null&&(Pr(c,h,g),lu(c,h,g))}};function Qx(h,c,g,p,M,D,G){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(p,D,G):c.prototype&&c.prototype.isPureReactComponent?!Kl(g,p)||!Kl(M,D):!0}function Kx(h,c,g,p){h=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(g,p),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(g,p),c.state!==h&&Lg.enqueueReplaceState(c,c.state,null)}function Nh(h,c){var g=c;if("ref"in c){g={};for(var p in c)p!=="ref"&&(g[p]=c[p])}if(h=h.defaultProps){g===c&&(g=d({},g));for(var M in h)g[M]===void 0&&(g[M]=h[M])}return g}var bd=typeof reportError=="function"?reportError:function(h){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof h=="object"&&h!==null&&typeof h.message=="string"?String(h.message):String(h),error:h});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",h);return}console.error(h)};function tA(h){bd(h)}function eA(h){console.error(h)}function iA(h){bd(h)}function Md(h,c){try{var g=h.onUncaughtError;g(c.value,{componentStack:c.stack})}catch(p){setTimeout(function(){throw p})}}function sA(h,c,g){try{var p=h.onCaughtError;p(g.value,{componentStack:g.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(M){setTimeout(function(){throw M})}}function Ig(h,c,g){return g=La(g),g.tag=3,g.payload={element:null},g.callback=function(){Md(h,c)},g}function rA(h){return h=La(h),h.tag=3,h}function nA(h,c,g,p){var M=g.type.getDerivedStateFromError;if(typeof M=="function"){var D=p.value;h.payload=function(){return M(D)},h.callback=function(){sA(c,g,p)}}var G=g.stateNode;G!==null&&typeof G.componentDidCatch=="function"&&(h.callback=function(){sA(c,g,p),typeof M!="function"&&(qa===null?qa=new Set([this]):qa.add(this));var q=p.stack;this.componentDidCatch(p.value,{componentStack:q!==null?q:""})})}function bT(h,c,g,p,M){if(g.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(c=g.alternate,c!==null&&ru(c,g,M,!0),g=hn.current,g!==null){switch(g.tag){case 13:return Nn===null?oy():g.alternate===null&&Yi===0&&(Yi=3),g.flags&=-257,g.flags|=65536,g.lanes=M,p===fg?g.flags|=16384:(c=g.updateQueue,c===null?g.updateQueue=new Set([p]):c.add(p),uy(h,p,M)),!1;case 22:return g.flags|=65536,p===fg?g.flags|=16384:(c=g.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([p])},g.updateQueue=c):(g=c.retryQueue,g===null?c.retryQueue=new Set([p]):g.add(p)),uy(h,p,M)),!1}throw Error(i(435,g.tag))}return uy(h,p,M),oy(),!1}if(Ke)return c=hn.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=M,p!==ag&&(h=Error(i(422),{cause:p}),su(sn(h,g)))):(p!==ag&&(c=Error(i(423),{cause:p}),su(sn(c,g))),h=h.current.alternate,h.flags|=65536,M&=-M,h.lanes|=M,p=sn(p,g),M=Ig(h.stateNode,p,M),mg(h,M),Yi!==4&&(Yi=2)),!1;var D=Error(i(520),{cause:p});if(D=sn(D,g),Ru===null?Ru=[D]:Ru.push(D),Yi!==4&&(Yi=2),c===null)return!0;p=sn(p,g),g=c;do{switch(g.tag){case 3:return g.flags|=65536,h=M&-M,g.lanes|=h,h=Ig(g.stateNode,p,h),mg(g,h),!1;case 1:if(c=g.type,D=g.stateNode,(g.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||D!==null&&typeof D.componentDidCatch=="function"&&(qa===null||!qa.has(D))))return g.flags|=65536,M&=-M,g.lanes|=M,M=rA(M),nA(M,h,g,p),mg(g,M),!1}g=g.return}while(g!==null);return!1}var aA=Error(i(461)),vs=!1;function Fs(h,c,g,p){c.child=h===null?Jx(c,null,g,p):No(c,h.child,g,p)}function hA(h,c,g,p,M){g=g.render;var D=c.ref;if("ref"in p){var G={};for(var q in p)q!=="ref"&&(G[q]=p[q])}else G=p;return Vh(c),p=vg(h,c,g,G,D,M),q=bg(),h!==null&&!vs?(Mg(h,c,M),da(h,c,M)):(Ke&&q&&rg(c),c.flags|=1,Fs(h,c,p,M),c.child)}function oA(h,c,g,p,M){if(h===null){var D=g.type;return typeof D=="function"&&!eg(D)&&D.defaultProps===void 0&&g.compare===null?(c.tag=15,c.type=D,lA(h,c,D,p,M)):(h=id(g.type,null,p,c,c.mode,M),h.ref=c.ref,h.return=c,c.child=h)}if(D=h.child,!Wg(h,M)){var G=D.memoizedProps;if(g=g.compare,g=g!==null?g:Kl,g(G,p)&&h.ref===c.ref)return da(h,c,M)}return c.flags|=1,h=na(D,p),h.ref=c.ref,h.return=c,c.child=h}function lA(h,c,g,p,M){if(h!==null){var D=h.memoizedProps;if(Kl(D,p)&&h.ref===c.ref)if(vs=!1,c.pendingProps=p=D,Wg(h,M))(h.flags&131072)!==0&&(vs=!0);else return c.lanes=h.lanes,da(h,c,M)}return Pg(h,c,g,p,M)}function uA(h,c,g){var p=c.pendingProps,M=p.children,D=h!==null?h.memoizedState:null;if(p.mode==="hidden"){if((c.flags&128)!==0){if(p=D!==null?D.baseLanes|g:g,h!==null){for(M=c.child=h.child,D=0;M!==null;)D=D|M.lanes|M.childLanes,M=M.sibling;c.childLanes=D&~p}else c.childLanes=0,c.child=null;return cA(h,c,p,g)}if((g&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},h!==null&&hd(c,D!==null?D.cachePool:null),D!==null?lx(c,D):Sg(),Zx(c);else return c.lanes=c.childLanes=536870912,cA(h,c,D!==null?D.baseLanes|g:g,g)}else D!==null?(hd(c,D.cachePool),lx(c,D),Oa(),c.memoizedState=null):(h!==null&&hd(c,null),Sg(),Oa());return Fs(h,c,M,g),c.child}function cA(h,c,g,p){var M=dg();return M=M===null?null:{parent:ds._currentValue,pool:M},c.memoizedState={baseLanes:g,cachePool:M},h!==null&&hd(c,null),Sg(),Zx(c),h!==null&&ru(h,c,p,!0),null}function Rd(h,c){var g=c.ref;if(g===null)h!==null&&h.ref!==null&&(c.flags|=4194816);else{if(typeof g!="function"&&typeof g!="object")throw Error(i(284));(h===null||h.ref!==g)&&(c.flags|=4194816)}}function Pg(h,c,g,p,M){return Vh(c),g=vg(h,c,g,p,void 0,M),p=bg(),h!==null&&!vs?(Mg(h,c,M),da(h,c,M)):(Ke&&p&&rg(c),c.flags|=1,Fs(h,c,g,M),c.child)}function dA(h,c,g,p,M,D){return Vh(c),c.updateQueue=null,g=cx(c,p,g,M),ux(h),p=bg(),h!==null&&!vs?(Mg(h,c,D),da(h,c,D)):(Ke&&p&&rg(c),c.flags|=1,Fs(h,c,g,D),c.child)}function fA(h,c,g,p,M){if(Vh(c),c.stateNode===null){var D=Eo,G=g.contextType;typeof G=="object"&&G!==null&&(D=Ps(G)),D=new g(p,D),c.memoizedState=D.state!==null&&D.state!==void 0?D.state:null,D.updater=Lg,c.stateNode=D,D._reactInternals=c,D=c.stateNode,D.props=p,D.state=c.memoizedState,D.refs={},gg(c),G=g.contextType,D.context=typeof G=="object"&&G!==null?Ps(G):Eo,D.state=c.memoizedState,G=g.getDerivedStateFromProps,typeof G=="function"&&(Bg(c,g,G,p),D.state=c.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof D.getSnapshotBeforeUpdate=="function"||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(G=D.state,typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount(),G!==D.state&&Lg.enqueueReplaceState(D,D.state,null),cu(c,p,D,M),uu(),D.state=c.memoizedState),typeof D.componentDidMount=="function"&&(c.flags|=4194308),p=!0}else if(h===null){D=c.stateNode;var q=c.memoizedProps,Z=Nh(g,q);D.props=Z;var rt=D.context,yt=g.contextType;G=Eo,typeof yt=="object"&&yt!==null&&(G=Ps(yt));var pt=g.getDerivedStateFromProps;yt=typeof pt=="function"||typeof D.getSnapshotBeforeUpdate=="function",q=c.pendingProps!==q,yt||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(q||rt!==G)&&Kx(c,D,p,G),Ba=!1;var at=c.memoizedState;D.state=at,cu(c,p,D,M),uu(),rt=c.memoizedState,q||at!==rt||Ba?(typeof pt=="function"&&(Bg(c,g,pt,p),rt=c.memoizedState),(Z=Ba||Qx(c,g,Z,p,at,rt,G))?(yt||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount()),typeof D.componentDidMount=="function"&&(c.flags|=4194308)):(typeof D.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=p,c.memoizedState=rt),D.props=p,D.state=rt,D.context=G,p=Z):(typeof D.componentDidMount=="function"&&(c.flags|=4194308),p=!1)}else{D=c.stateNode,yg(h,c),G=c.memoizedProps,yt=Nh(g,G),D.props=yt,pt=c.pendingProps,at=D.context,rt=g.contextType,Z=Eo,typeof rt=="object"&&rt!==null&&(Z=Ps(rt)),q=g.getDerivedStateFromProps,(rt=typeof q=="function"||typeof D.getSnapshotBeforeUpdate=="function")||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(G!==pt||at!==Z)&&Kx(c,D,p,Z),Ba=!1,at=c.memoizedState,D.state=at,cu(c,p,D,M),uu();var lt=c.memoizedState;G!==pt||at!==lt||Ba||h!==null&&h.dependencies!==null&&nd(h.dependencies)?(typeof q=="function"&&(Bg(c,g,q,p),lt=c.memoizedState),(yt=Ba||Qx(c,g,yt,p,at,lt,Z)||h!==null&&h.dependencies!==null&&nd(h.dependencies))?(rt||typeof D.UNSAFE_componentWillUpdate!="function"&&typeof D.componentWillUpdate!="function"||(typeof D.componentWillUpdate=="function"&&D.componentWillUpdate(p,lt,Z),typeof D.UNSAFE_componentWillUpdate=="function"&&D.UNSAFE_componentWillUpdate(p,lt,Z)),typeof D.componentDidUpdate=="function"&&(c.flags|=4),typeof D.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof D.componentDidUpdate!="function"||G===h.memoizedProps&&at===h.memoizedState||(c.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||G===h.memoizedProps&&at===h.memoizedState||(c.flags|=1024),c.memoizedProps=p,c.memoizedState=lt),D.props=p,D.state=lt,D.context=Z,p=yt):(typeof D.componentDidUpdate!="function"||G===h.memoizedProps&&at===h.memoizedState||(c.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||G===h.memoizedProps&&at===h.memoizedState||(c.flags|=1024),p=!1)}return D=p,Rd(h,c),p=(c.flags&128)!==0,D||p?(D=c.stateNode,g=p&&typeof g.getDerivedStateFromError!="function"?null:D.render(),c.flags|=1,h!==null&&p?(c.child=No(c,h.child,null,M),c.child=No(c,null,g,M)):Fs(h,c,g,M),c.memoizedState=D.state,h=c.child):h=da(h,c,M),h}function gA(h,c,g,p){return iu(),c.flags|=256,Fs(h,c,g,p),c.child}var Ug={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Og(h){return{baseLanes:h,cachePool:ex()}}function Gg(h,c,g){return h=h!==null?h.childLanes&~g:0,c&&(h|=on),h}function yA(h,c,g){var p=c.pendingProps,M=!1,D=(c.flags&128)!==0,G;if((G=D)||(G=h!==null&&h.memoizedState===null?!1:(fs.current&2)!==0),G&&(M=!0,c.flags&=-129),G=(c.flags&32)!==0,c.flags&=-33,h===null){if(Ke){if(M?Ua(c):Oa(),Ke){var q=Gi,Z;if(Z=q){t:{for(Z=q,q=_n;Z.nodeType!==8;){if(!q){q=null;break t}if(Z=bn(Z.nextSibling),Z===null){q=null;break t}}q=Z}q!==null?(c.memoizedState={dehydrated:q,treeContext:wh!==null?{id:aa,overflow:ha}:null,retryLane:536870912,hydrationErrors:null},Z=_r(18,null,null,0),Z.stateNode=q,Z.return=c,c.child=Z,Js=c,Gi=null,Z=!0):Z=!1}Z||Dh(c)}if(q=c.memoizedState,q!==null&&(q=q.dehydrated,q!==null))return Ey(q)?c.lanes=32:c.lanes=536870912,null;ca(c)}return q=p.children,p=p.fallback,M?(Oa(),M=c.mode,q=Ed({mode:"hidden",children:q},M),p=Th(p,M,g,null),q.return=c,p.return=c,q.sibling=p,c.child=q,M=c.child,M.memoizedState=Og(g),M.childLanes=Gg(h,G,g),c.memoizedState=Ug,p):(Ua(c),Yg(c,q))}if(Z=h.memoizedState,Z!==null&&(q=Z.dehydrated,q!==null)){if(D)c.flags&256?(Ua(c),c.flags&=-257,c=Hg(h,c,g)):c.memoizedState!==null?(Oa(),c.child=h.child,c.flags|=128,c=null):(Oa(),M=p.fallback,q=c.mode,p=Ed({mode:"visible",children:p.children},q),M=Th(M,q,g,null),M.flags|=2,p.return=c,M.return=c,p.sibling=M,c.child=p,No(c,h.child,null,g),p=c.child,p.memoizedState=Og(g),p.childLanes=Gg(h,G,g),c.memoizedState=Ug,c=M);else if(Ua(c),Ey(q)){if(G=q.nextSibling&&q.nextSibling.dataset,G)var rt=G.dgst;G=rt,p=Error(i(419)),p.stack="",p.digest=G,su({value:p,source:null,stack:null}),c=Hg(h,c,g)}else if(vs||ru(h,c,g,!1),G=(g&h.childLanes)!==0,vs||G){if(G=vi,G!==null&&(p=g&-g,p=(p&42)!==0?1:Te(p),p=(p&(G.suspendedLanes|g))!==0?0:p,p!==0&&p!==Z.retryLane))throw Z.retryLane=p,Ro(h,p),Pr(G,h,p),aA;q.data==="$?"||oy(),c=Hg(h,c,g)}else q.data==="$?"?(c.flags|=192,c.child=h.child,c=null):(h=Z.treeContext,Gi=bn(q.nextSibling),Js=c,Ke=!0,kh=null,_n=!1,h!==null&&(nn[an++]=aa,nn[an++]=ha,nn[an++]=wh,aa=h.id,ha=h.overflow,wh=c),c=Yg(c,p.children),c.flags|=4096);return c}return M?(Oa(),M=p.fallback,q=c.mode,Z=h.child,rt=Z.sibling,p=na(Z,{mode:"hidden",children:p.children}),p.subtreeFlags=Z.subtreeFlags&65011712,rt!==null?M=na(rt,M):(M=Th(M,q,g,null),M.flags|=2),M.return=c,p.return=c,p.sibling=M,c.child=p,p=M,M=c.child,q=h.child.memoizedState,q===null?q=Og(g):(Z=q.cachePool,Z!==null?(rt=ds._currentValue,Z=Z.parent!==rt?{parent:rt,pool:rt}:Z):Z=ex(),q={baseLanes:q.baseLanes|g,cachePool:Z}),M.memoizedState=q,M.childLanes=Gg(h,G,g),c.memoizedState=Ug,p):(Ua(c),g=h.child,h=g.sibling,g=na(g,{mode:"visible",children:p.children}),g.return=c,g.sibling=null,h!==null&&(G=c.deletions,G===null?(c.deletions=[h],c.flags|=16):G.push(h)),c.child=g,c.memoizedState=null,g)}function Yg(h,c){return c=Ed({mode:"visible",children:c},h.mode),c.return=h,h.child=c}function Ed(h,c){return h=_r(22,h,null,c),h.lanes=0,h.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},h}function Hg(h,c,g){return No(c,h.child,null,g),h=Yg(c,c.pendingProps.children),h.flags|=2,c.memoizedState=null,h}function mA(h,c,g){h.lanes|=c;var p=h.alternate;p!==null&&(p.lanes|=c),og(h.return,c,g)}function Xg(h,c,g,p,M){var D=h.memoizedState;D===null?h.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:p,tail:g,tailMode:M}:(D.isBackwards=c,D.rendering=null,D.renderingStartTime=0,D.last=p,D.tail=g,D.tailMode=M)}function pA(h,c,g){var p=c.pendingProps,M=p.revealOrder,D=p.tail;if(Fs(h,c,p.children,g),p=fs.current,(p&2)!==0)p=p&1|2,c.flags|=128;else{if(h!==null&&(h.flags&128)!==0)t:for(h=c.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&mA(h,g,c);else if(h.tag===19)mA(h,g,c);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break t;for(;h.sibling===null;){if(h.return===null||h.return===c)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}p&=1}switch(Q(fs,p),M){case"forwards":for(g=c.child,M=null;g!==null;)h=g.alternate,h!==null&&vd(h)===null&&(M=g),g=g.sibling;g=M,g===null?(M=c.child,c.child=null):(M=g.sibling,g.sibling=null),Xg(c,!1,M,g,D);break;case"backwards":for(g=null,M=c.child,c.child=null;M!==null;){if(h=M.alternate,h!==null&&vd(h)===null){c.child=M;break}h=M.sibling,M.sibling=g,g=M,M=h}Xg(c,!0,g,null,D);break;case"together":Xg(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function da(h,c,g){if(h!==null&&(c.dependencies=h.dependencies),Wa|=c.lanes,(g&c.childLanes)===0)if(h!==null){if(ru(h,c,g,!1),(g&c.childLanes)===0)return null}else return null;if(h!==null&&c.child!==h.child)throw Error(i(153));if(c.child!==null){for(h=c.child,g=na(h,h.pendingProps),c.child=g,g.return=c;h.sibling!==null;)h=h.sibling,g=g.sibling=na(h,h.pendingProps),g.return=c;g.sibling=null}return c.child}function Wg(h,c){return(h.lanes&c)!==0?!0:(h=h.dependencies,!!(h!==null&&nd(h)))}function MT(h,c,g){switch(c.tag){case 3:dt(c,c.stateNode.containerInfo),Na(c,ds,h.memoizedState.cache),iu();break;case 27:case 5:St(c);break;case 4:dt(c,c.stateNode.containerInfo);break;case 10:Na(c,c.type,c.memoizedProps.value);break;case 13:var p=c.memoizedState;if(p!==null)return p.dehydrated!==null?(Ua(c),c.flags|=128,null):(g&c.child.childLanes)!==0?yA(h,c,g):(Ua(c),h=da(h,c,g),h!==null?h.sibling:null);Ua(c);break;case 19:var M=(h.flags&128)!==0;if(p=(g&c.childLanes)!==0,p||(ru(h,c,g,!1),p=(g&c.childLanes)!==0),M){if(p)return pA(h,c,g);c.flags|=128}if(M=c.memoizedState,M!==null&&(M.rendering=null,M.tail=null,M.lastEffect=null),Q(fs,fs.current),p)break;return null;case 22:case 23:return c.lanes=0,uA(h,c,g);case 24:Na(c,ds,h.memoizedState.cache)}return da(h,c,g)}function SA(h,c,g){if(h!==null)if(h.memoizedProps!==c.pendingProps)vs=!0;else{if(!Wg(h,g)&&(c.flags&128)===0)return vs=!1,MT(h,c,g);vs=(h.flags&131072)!==0}else vs=!1,Ke&&(c.flags&1048576)!==0&&jS(c,rd,c.index);switch(c.lanes=0,c.tag){case 16:t:{h=c.pendingProps;var p=c.elementType,M=p._init;if(p=M(p._payload),c.type=p,typeof p=="function")eg(p)?(h=Nh(p,h),c.tag=1,c=fA(null,c,p,h,g)):(c.tag=0,c=Pg(null,c,p,h,g));else{if(p!=null){if(M=p.$$typeof,M===V){c.tag=11,c=hA(null,c,p,h,g);break t}else if(M===z){c.tag=14,c=oA(null,c,p,h,g);break t}}throw c=_(p)||p,Error(i(306,c,""))}}return c;case 0:return Pg(h,c,c.type,c.pendingProps,g);case 1:return p=c.type,M=Nh(p,c.pendingProps),fA(h,c,p,M,g);case 3:t:{if(dt(c,c.stateNode.containerInfo),h===null)throw Error(i(387));p=c.pendingProps;var D=c.memoizedState;M=D.element,yg(h,c),cu(c,p,null,g);var G=c.memoizedState;if(p=G.cache,Na(c,ds,p),p!==D.cache&&lg(c,[ds],g,!0),uu(),p=G.element,D.isDehydrated)if(D={element:p,isDehydrated:!1,cache:G.cache},c.updateQueue.baseState=D,c.memoizedState=D,c.flags&256){c=gA(h,c,p,g);break t}else if(p!==M){M=sn(Error(i(424)),c),su(M),c=gA(h,c,p,g);break t}else{switch(h=c.stateNode.containerInfo,h.nodeType){case 9:h=h.body;break;default:h=h.nodeName==="HTML"?h.ownerDocument.body:h}for(Gi=bn(h.firstChild),Js=c,Ke=!0,kh=null,_n=!0,g=Jx(c,null,p,g),c.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling}else{if(iu(),p===M){c=da(h,c,g);break t}Fs(h,c,p,g)}c=c.child}return c;case 26:return Rd(h,c),h===null?(g=b1(c.type,null,c.pendingProps,null))?c.memoizedState=g:Ke||(g=c.type,h=c.pendingProps,p=Pd(ot.current).createElement(g),p[It]=c,p[Zt]=h,zs(p,g,h),Ht(p),c.stateNode=p):c.memoizedState=b1(c.type,h.memoizedProps,c.pendingProps,h.memoizedState),null;case 27:return St(c),h===null&&Ke&&(p=c.stateNode=x1(c.type,c.pendingProps,ot.current),Js=c,_n=!0,M=Gi,Ja(c.type)?(Ty=M,Gi=bn(p.firstChild)):Gi=M),Fs(h,c,c.pendingProps.children,g),Rd(h,c),h===null&&(c.flags|=4194304),c.child;case 5:return h===null&&Ke&&((M=p=Gi)&&(p=ZT(p,c.type,c.pendingProps,_n),p!==null?(c.stateNode=p,Js=c,Gi=bn(p.firstChild),_n=!1,M=!0):M=!1),M||Dh(c)),St(c),M=c.type,D=c.pendingProps,G=h!==null?h.memoizedProps:null,p=D.children,by(M,D)?p=null:G!==null&&by(M,G)&&(c.flags|=32),c.memoizedState!==null&&(M=vg(h,c,yT,null,null,g),zu._currentValue=M),Rd(h,c),Fs(h,c,p,g),c.child;case 6:return h===null&&Ke&&((h=g=Gi)&&(g=QT(g,c.pendingProps,_n),g!==null?(c.stateNode=g,Js=c,Gi=null,h=!0):h=!1),h||Dh(c)),null;case 13:return yA(h,c,g);case 4:return dt(c,c.stateNode.containerInfo),p=c.pendingProps,h===null?c.child=No(c,null,p,g):Fs(h,c,p,g),c.child;case 11:return hA(h,c,c.type,c.pendingProps,g);case 7:return Fs(h,c,c.pendingProps,g),c.child;case 8:return Fs(h,c,c.pendingProps.children,g),c.child;case 12:return Fs(h,c,c.pendingProps.children,g),c.child;case 10:return p=c.pendingProps,Na(c,c.type,p.value),Fs(h,c,p.children,g),c.child;case 9:return M=c.type._context,p=c.pendingProps.children,Vh(c),M=Ps(M),p=p(M),c.flags|=1,Fs(h,c,p,g),c.child;case 14:return oA(h,c,c.type,c.pendingProps,g);case 15:return lA(h,c,c.type,c.pendingProps,g);case 19:return pA(h,c,g);case 31:return p=c.pendingProps,g=c.mode,p={mode:p.mode,children:p.children},h===null?(g=Ed(p,g),g.ref=c.ref,c.child=g,g.return=c,c=g):(g=na(h.child,p),g.ref=c.ref,c.child=g,g.return=c,c=g),c;case 22:return uA(h,c,g);case 24:return Vh(c),p=Ps(ds),h===null?(M=dg(),M===null&&(M=vi,D=ug(),M.pooledCache=D,D.refCount++,D!==null&&(M.pooledCacheLanes|=g),M=D),c.memoizedState={parent:p,cache:M},gg(c),Na(c,ds,M)):((h.lanes&g)!==0&&(yg(h,c),cu(c,null,null,g),uu()),M=h.memoizedState,D=c.memoizedState,M.parent!==p?(M={parent:p,cache:p},c.memoizedState=M,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=M),Na(c,ds,p)):(p=D.cache,Na(c,ds,p),p!==M.cache&&lg(c,[ds],g,!0))),Fs(h,c,c.pendingProps.children,g),c.child;case 29:throw c.pendingProps}throw Error(i(156,c.tag))}function fa(h){h.flags|=4}function xA(h,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)h.flags&=-16777217;else if(h.flags|=16777216,!w1(c)){if(c=hn.current,c!==null&&((Ne&4194048)===Ne?Nn!==null:(Ne&62914560)!==Ne&&(Ne&536870912)===0||c!==Nn))throw ou=fg,ix;h.flags|=8192}}function Td(h,c){c!==null&&(h.flags|=4),h.flags&16384&&(c=h.tag!==22?Ot():536870912,h.lanes|=c,Po|=c)}function Su(h,c){if(!Ke)switch(h.tailMode){case"hidden":c=h.tail;for(var g=null;c!==null;)c.alternate!==null&&(g=c),c=c.sibling;g===null?h.tail=null:g.sibling=null;break;case"collapsed":g=h.tail;for(var p=null;g!==null;)g.alternate!==null&&(p=g),g=g.sibling;p===null?c||h.tail===null?h.tail=null:h.tail.sibling=null:p.sibling=null}}function Bi(h){var c=h.alternate!==null&&h.alternate.child===h.child,g=0,p=0;if(c)for(var M=h.child;M!==null;)g|=M.lanes|M.childLanes,p|=M.subtreeFlags&65011712,p|=M.flags&65011712,M.return=h,M=M.sibling;else for(M=h.child;M!==null;)g|=M.lanes|M.childLanes,p|=M.subtreeFlags,p|=M.flags,M.return=h,M=M.sibling;return h.subtreeFlags|=p,h.childLanes=g,c}function RT(h,c,g){var p=c.pendingProps;switch(ng(c),c.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bi(c),null;case 1:return Bi(c),null;case 3:return g=c.stateNode,p=null,h!==null&&(p=h.memoizedState.cache),c.memoizedState.cache!==p&&(c.flags|=2048),la(ds),Et(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(h===null||h.child===null)&&(eu(c)?fa(c):h===null||h.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,ZS())),Bi(c),null;case 26:return g=c.memoizedState,h===null?(fa(c),g!==null?(Bi(c),xA(c,g)):(Bi(c),c.flags&=-16777217)):g?g!==h.memoizedState?(fa(c),Bi(c),xA(c,g)):(Bi(c),c.flags&=-16777217):(h.memoizedProps!==p&&fa(c),Bi(c),c.flags&=-16777217),null;case 27:Vt(c),g=ot.current;var M=c.type;if(h!==null&&c.stateNode!=null)h.memoizedProps!==p&&fa(c);else{if(!p){if(c.stateNode===null)throw Error(i(166));return Bi(c),null}h=J.current,eu(c)?$S(c):(h=x1(M,p,g),c.stateNode=h,fa(c))}return Bi(c),null;case 5:if(Vt(c),g=c.type,h!==null&&c.stateNode!=null)h.memoizedProps!==p&&fa(c);else{if(!p){if(c.stateNode===null)throw Error(i(166));return Bi(c),null}if(h=J.current,eu(c))$S(c);else{switch(M=Pd(ot.current),h){case 1:h=M.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:h=M.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":h=M.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":h=M.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":h=M.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild);break;case"select":h=typeof p.is=="string"?M.createElement("select",{is:p.is}):M.createElement("select"),p.multiple?h.multiple=!0:p.size&&(h.size=p.size);break;default:h=typeof p.is=="string"?M.createElement(g,{is:p.is}):M.createElement(g)}}h[It]=c,h[Zt]=p;t:for(M=c.child;M!==null;){if(M.tag===5||M.tag===6)h.appendChild(M.stateNode);else if(M.tag!==4&&M.tag!==27&&M.child!==null){M.child.return=M,M=M.child;continue}if(M===c)break t;for(;M.sibling===null;){if(M.return===null||M.return===c)break t;M=M.return}M.sibling.return=M.return,M=M.sibling}c.stateNode=h;t:switch(zs(h,g,p),g){case"button":case"input":case"select":case"textarea":h=!!p.autoFocus;break t;case"img":h=!0;break t;default:h=!1}h&&fa(c)}}return Bi(c),c.flags&=-16777217,null;case 6:if(h&&c.stateNode!=null)h.memoizedProps!==p&&fa(c);else{if(typeof p!="string"&&c.stateNode===null)throw Error(i(166));if(h=ot.current,eu(c)){if(h=c.stateNode,g=c.memoizedProps,p=null,M=Js,M!==null)switch(M.tag){case 27:case 5:p=M.memoizedProps}h[It]=c,h=!!(h.nodeValue===g||p!==null&&p.suppressHydrationWarning===!0||d1(h.nodeValue,g)),h||Dh(c)}else h=Pd(h).createTextNode(p),h[It]=c,c.stateNode=h}return Bi(c),null;case 13:if(p=c.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(M=eu(c),p!==null&&p.dehydrated!==null){if(h===null){if(!M)throw Error(i(318));if(M=c.memoizedState,M=M!==null?M.dehydrated:null,!M)throw Error(i(317));M[It]=c}else iu(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Bi(c),M=!1}else M=ZS(),h!==null&&h.memoizedState!==null&&(h.memoizedState.hydrationErrors=M),M=!0;if(!M)return c.flags&256?(ca(c),c):(ca(c),null)}if(ca(c),(c.flags&128)!==0)return c.lanes=g,c;if(g=p!==null,h=h!==null&&h.memoizedState!==null,g){p=c.child,M=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(M=p.alternate.memoizedState.cachePool.pool);var D=null;p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(D=p.memoizedState.cachePool.pool),D!==M&&(p.flags|=2048)}return g!==h&&g&&(c.child.flags|=8192),Td(c,c.updateQueue),Bi(c),null;case 4:return Et(),h===null&&py(c.stateNode.containerInfo),Bi(c),null;case 10:return la(c.type),Bi(c),null;case 19:if(j(fs),M=c.memoizedState,M===null)return Bi(c),null;if(p=(c.flags&128)!==0,D=M.rendering,D===null)if(p)Su(M,!1);else{if(Yi!==0||h!==null&&(h.flags&128)!==0)for(h=c.child;h!==null;){if(D=vd(h),D!==null){for(c.flags|=128,Su(M,!1),h=D.updateQueue,c.updateQueue=h,Td(c,h),c.subtreeFlags=0,h=g,g=c.child;g!==null;)qS(g,h),g=g.sibling;return Q(fs,fs.current&1|2),c.child}h=h.sibling}M.tail!==null&&Pi()>kd&&(c.flags|=128,p=!0,Su(M,!1),c.lanes=4194304)}else{if(!p)if(h=vd(D),h!==null){if(c.flags|=128,p=!0,h=h.updateQueue,c.updateQueue=h,Td(c,h),Su(M,!0),M.tail===null&&M.tailMode==="hidden"&&!D.alternate&&!Ke)return Bi(c),null}else 2*Pi()-M.renderingStartTime>kd&&g!==536870912&&(c.flags|=128,p=!0,Su(M,!1),c.lanes=4194304);M.isBackwards?(D.sibling=c.child,c.child=D):(h=M.last,h!==null?h.sibling=D:c.child=D,M.last=D)}return M.tail!==null?(c=M.tail,M.rendering=c,M.tail=c.sibling,M.renderingStartTime=Pi(),c.sibling=null,h=fs.current,Q(fs,p?h&1|2:h&1),c):(Bi(c),null);case 22:case 23:return ca(c),xg(),p=c.memoizedState!==null,h!==null?h.memoizedState!==null!==p&&(c.flags|=8192):p&&(c.flags|=8192),p?(g&536870912)!==0&&(c.flags&128)===0&&(Bi(c),c.subtreeFlags&6&&(c.flags|=8192)):Bi(c),g=c.updateQueue,g!==null&&Td(c,g.retryQueue),g=null,h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(g=h.memoizedState.cachePool.pool),p=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(p=c.memoizedState.cachePool.pool),p!==g&&(c.flags|=2048),h!==null&&j(zh),null;case 24:return g=null,h!==null&&(g=h.memoizedState.cache),c.memoizedState.cache!==g&&(c.flags|=2048),la(ds),Bi(c),null;case 25:return null;case 30:return null}throw Error(i(156,c.tag))}function ET(h,c){switch(ng(c),c.tag){case 1:return h=c.flags,h&65536?(c.flags=h&-65537|128,c):null;case 3:return la(ds),Et(),h=c.flags,(h&65536)!==0&&(h&128)===0?(c.flags=h&-65537|128,c):null;case 26:case 27:case 5:return Vt(c),null;case 13:if(ca(c),h=c.memoizedState,h!==null&&h.dehydrated!==null){if(c.alternate===null)throw Error(i(340));iu()}return h=c.flags,h&65536?(c.flags=h&-65537|128,c):null;case 19:return j(fs),null;case 4:return Et(),null;case 10:return la(c.type),null;case 22:case 23:return ca(c),xg(),h!==null&&j(zh),h=c.flags,h&65536?(c.flags=h&-65537|128,c):null;case 24:return la(ds),null;case 25:return null;default:return null}}function AA(h,c){switch(ng(c),c.tag){case 3:la(ds),Et();break;case 26:case 27:case 5:Vt(c);break;case 4:Et();break;case 13:ca(c);break;case 19:j(fs);break;case 10:la(c.type);break;case 22:case 23:ca(c),xg(),h!==null&&j(zh);break;case 24:la(ds)}}function xu(h,c){try{var g=c.updateQueue,p=g!==null?g.lastEffect:null;if(p!==null){var M=p.next;g=M;do{if((g.tag&h)===h){p=void 0;var D=g.create,G=g.inst;p=D(),G.destroy=p}g=g.next}while(g!==M)}}catch(q){pi(c,c.return,q)}}function Ga(h,c,g){try{var p=c.updateQueue,M=p!==null?p.lastEffect:null;if(M!==null){var D=M.next;p=D;do{if((p.tag&h)===h){var G=p.inst,q=G.destroy;if(q!==void 0){G.destroy=void 0,M=c;var Z=g,rt=q;try{rt()}catch(yt){pi(M,Z,yt)}}}p=p.next}while(p!==D)}}catch(yt){pi(c,c.return,yt)}}function vA(h){var c=h.updateQueue;if(c!==null){var g=h.stateNode;try{ox(c,g)}catch(p){pi(h,h.return,p)}}}function bA(h,c,g){g.props=Nh(h.type,h.memoizedProps),g.state=h.memoizedState;try{g.componentWillUnmount()}catch(p){pi(h,c,p)}}function Au(h,c){try{var g=h.ref;if(g!==null){switch(h.tag){case 26:case 27:case 5:var p=h.stateNode;break;case 30:p=h.stateNode;break;default:p=h.stateNode}typeof g=="function"?h.refCleanup=g(p):g.current=p}}catch(M){pi(h,c,M)}}function Bn(h,c){var g=h.ref,p=h.refCleanup;if(g!==null)if(typeof p=="function")try{p()}catch(M){pi(h,c,M)}finally{h.refCleanup=null,h=h.alternate,h!=null&&(h.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(M){pi(h,c,M)}else g.current=null}function MA(h){var c=h.type,g=h.memoizedProps,p=h.stateNode;try{t:switch(c){case"button":case"input":case"select":case"textarea":g.autoFocus&&p.focus();break t;case"img":g.src?p.src=g.src:g.srcSet&&(p.srcset=g.srcSet)}}catch(M){pi(h,h.return,M)}}function qg(h,c,g){try{var p=h.stateNode;WT(p,h.type,g,c),p[Zt]=c}catch(M){pi(h,h.return,M)}}function RA(h){return h.tag===5||h.tag===3||h.tag===26||h.tag===27&&Ja(h.type)||h.tag===4}function jg(h){t:for(;;){for(;h.sibling===null;){if(h.return===null||RA(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.tag===27&&Ja(h.type)||h.flags&2||h.child===null||h.tag===4)continue t;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function $g(h,c,g){var p=h.tag;if(p===5||p===6)h=h.stateNode,c?(g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g).insertBefore(h,c):(c=g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g,c.appendChild(h),g=g._reactRootContainer,g!=null||c.onclick!==null||(c.onclick=Id));else if(p!==4&&(p===27&&Ja(h.type)&&(g=h.stateNode,c=null),h=h.child,h!==null))for($g(h,c,g),h=h.sibling;h!==null;)$g(h,c,g),h=h.sibling}function wd(h,c,g){var p=h.tag;if(p===5||p===6)h=h.stateNode,c?g.insertBefore(h,c):g.appendChild(h);else if(p!==4&&(p===27&&Ja(h.type)&&(g=h.stateNode),h=h.child,h!==null))for(wd(h,c,g),h=h.sibling;h!==null;)wd(h,c,g),h=h.sibling}function EA(h){var c=h.stateNode,g=h.memoizedProps;try{for(var p=h.type,M=c.attributes;M.length;)c.removeAttributeNode(M[0]);zs(c,p,g),c[It]=h,c[Zt]=g}catch(D){pi(h,h.return,D)}}var ga=!1,Qi=!1,Jg=!1,TA=typeof WeakSet=="function"?WeakSet:Set,bs=null;function TT(h,c){if(h=h.containerInfo,Ay=Xd,h=LS(h),j0(h)){if("selectionStart"in h)var g={start:h.selectionStart,end:h.selectionEnd};else t:{g=(g=h.ownerDocument)&&g.defaultView||window;var p=g.getSelection&&g.getSelection();if(p&&p.rangeCount!==0){g=p.anchorNode;var M=p.anchorOffset,D=p.focusNode;p=p.focusOffset;try{g.nodeType,D.nodeType}catch{g=null;break t}var G=0,q=-1,Z=-1,rt=0,yt=0,pt=h,at=null;e:for(;;){for(var lt;pt!==g||M!==0&&pt.nodeType!==3||(q=G+M),pt!==D||p!==0&&pt.nodeType!==3||(Z=G+p),pt.nodeType===3&&(G+=pt.nodeValue.length),(lt=pt.firstChild)!==null;)at=pt,pt=lt;for(;;){if(pt===h)break e;if(at===g&&++rt===M&&(q=G),at===D&&++yt===p&&(Z=G),(lt=pt.nextSibling)!==null)break;pt=at,at=pt.parentNode}pt=lt}g=q===-1||Z===-1?null:{start:q,end:Z}}else g=null}g=g||{start:0,end:0}}else g=null;for(vy={focusedElem:h,selectionRange:g},Xd=!1,bs=c;bs!==null;)if(c=bs,h=c.child,(c.subtreeFlags&1024)!==0&&h!==null)h.return=c,bs=h;else for(;bs!==null;){switch(c=bs,D=c.alternate,h=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((h&1024)!==0&&D!==null){h=void 0,g=c,M=D.memoizedProps,D=D.memoizedState,p=g.stateNode;try{var te=Nh(g.type,M,g.elementType===g.type);h=p.getSnapshotBeforeUpdate(te,D),p.__reactInternalSnapshotBeforeUpdate=h}catch(Wt){pi(g,g.return,Wt)}}break;case 3:if((h&1024)!==0){if(h=c.stateNode.containerInfo,g=h.nodeType,g===9)Ry(h);else if(g===1)switch(h.nodeName){case"HEAD":case"HTML":case"BODY":Ry(h);break;default:h.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((h&1024)!==0)throw Error(i(163))}if(h=c.sibling,h!==null){h.return=c.return,bs=h;break}bs=c.return}}function wA(h,c,g){var p=g.flags;switch(g.tag){case 0:case 11:case 15:Ya(h,g),p&4&&xu(5,g);break;case 1:if(Ya(h,g),p&4)if(h=g.stateNode,c===null)try{h.componentDidMount()}catch(G){pi(g,g.return,G)}else{var M=Nh(g.type,c.memoizedProps);c=c.memoizedState;try{h.componentDidUpdate(M,c,h.__reactInternalSnapshotBeforeUpdate)}catch(G){pi(g,g.return,G)}}p&64&&vA(g),p&512&&Au(g,g.return);break;case 3:if(Ya(h,g),p&64&&(h=g.updateQueue,h!==null)){if(c=null,g.child!==null)switch(g.child.tag){case 27:case 5:c=g.child.stateNode;break;case 1:c=g.child.stateNode}try{ox(h,c)}catch(G){pi(g,g.return,G)}}break;case 27:c===null&&p&4&&EA(g);case 26:case 5:Ya(h,g),c===null&&p&4&&MA(g),p&512&&Au(g,g.return);break;case 12:Ya(h,g);break;case 13:Ya(h,g),p&4&&DA(h,g),p&64&&(h=g.memoizedState,h!==null&&(h=h.dehydrated,h!==null&&(g=NT.bind(null,g),KT(h,g))));break;case 22:if(p=g.memoizedState!==null||ga,!p){c=c!==null&&c.memoizedState!==null||Qi,M=ga;var D=Qi;ga=p,(Qi=c)&&!D?Ha(h,g,(g.subtreeFlags&8772)!==0):Ya(h,g),ga=M,Qi=D}break;case 30:break;default:Ya(h,g)}}function CA(h){var c=h.alternate;c!==null&&(h.alternate=null,CA(c)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(c=h.stateNode,c!==null&&Ui(c)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}var ki=null,fr=!1;function ya(h,c,g){for(g=g.child;g!==null;)kA(h,c,g),g=g.sibling}function kA(h,c,g){if(fe&&typeof fe.onCommitFiberUnmount=="function")try{fe.onCommitFiberUnmount(Ai,g)}catch{}switch(g.tag){case 26:Qi||Bn(g,c),ya(h,c,g),g.memoizedState?g.memoizedState.count--:g.stateNode&&(g=g.stateNode,g.parentNode.removeChild(g));break;case 27:Qi||Bn(g,c);var p=ki,M=fr;Ja(g.type)&&(ki=g.stateNode,fr=!1),ya(h,c,g),ku(g.stateNode),ki=p,fr=M;break;case 5:Qi||Bn(g,c);case 6:if(p=ki,M=fr,ki=null,ya(h,c,g),ki=p,fr=M,ki!==null)if(fr)try{(ki.nodeType===9?ki.body:ki.nodeName==="HTML"?ki.ownerDocument.body:ki).removeChild(g.stateNode)}catch(D){pi(g,c,D)}else try{ki.removeChild(g.stateNode)}catch(D){pi(g,c,D)}break;case 18:ki!==null&&(fr?(h=ki,p1(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,g.stateNode),Lu(h)):p1(ki,g.stateNode));break;case 4:p=ki,M=fr,ki=g.stateNode.containerInfo,fr=!0,ya(h,c,g),ki=p,fr=M;break;case 0:case 11:case 14:case 15:Qi||Ga(2,g,c),Qi||Ga(4,g,c),ya(h,c,g);break;case 1:Qi||(Bn(g,c),p=g.stateNode,typeof p.componentWillUnmount=="function"&&bA(g,c,p)),ya(h,c,g);break;case 21:ya(h,c,g);break;case 22:Qi=(p=Qi)||g.memoizedState!==null,ya(h,c,g),Qi=p;break;default:ya(h,c,g)}}function DA(h,c){if(c.memoizedState===null&&(h=c.alternate,h!==null&&(h=h.memoizedState,h!==null&&(h=h.dehydrated,h!==null))))try{Lu(h)}catch(g){pi(c,c.return,g)}}function wT(h){switch(h.tag){case 13:case 19:var c=h.stateNode;return c===null&&(c=h.stateNode=new TA),c;case 22:return h=h.stateNode,c=h._retryCache,c===null&&(c=h._retryCache=new TA),c;default:throw Error(i(435,h.tag))}}function Zg(h,c){var g=wT(h);c.forEach(function(p){var M=BT.bind(null,h,p);g.has(p)||(g.add(p),p.then(M,M))})}function Nr(h,c){var g=c.deletions;if(g!==null)for(var p=0;p<g.length;p++){var M=g[p],D=h,G=c,q=G;t:for(;q!==null;){switch(q.tag){case 27:if(Ja(q.type)){ki=q.stateNode,fr=!1;break t}break;case 5:ki=q.stateNode,fr=!1;break t;case 3:case 4:ki=q.stateNode.containerInfo,fr=!0;break t}q=q.return}if(ki===null)throw Error(i(160));kA(D,G,M),ki=null,fr=!1,D=M.alternate,D!==null&&(D.return=null),M.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)FA(c,h),c=c.sibling}var vn=null;function FA(h,c){var g=h.alternate,p=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:Nr(c,h),Br(h),p&4&&(Ga(3,h,h.return),xu(3,h),Ga(5,h,h.return));break;case 1:Nr(c,h),Br(h),p&512&&(Qi||g===null||Bn(g,g.return)),p&64&&ga&&(h=h.updateQueue,h!==null&&(p=h.callbacks,p!==null&&(g=h.shared.hiddenCallbacks,h.shared.hiddenCallbacks=g===null?p:g.concat(p))));break;case 26:var M=vn;if(Nr(c,h),Br(h),p&512&&(Qi||g===null||Bn(g,g.return)),p&4){var D=g!==null?g.memoizedState:null;if(p=h.memoizedState,g===null)if(p===null)if(h.stateNode===null){t:{p=h.type,g=h.memoizedProps,M=M.ownerDocument||M;e:switch(p){case"title":D=M.getElementsByTagName("title")[0],(!D||D[Fe]||D[It]||D.namespaceURI==="http://www.w3.org/2000/svg"||D.hasAttribute("itemprop"))&&(D=M.createElement(p),M.head.insertBefore(D,M.querySelector("head > title"))),zs(D,p,g),D[It]=h,Ht(D),p=D;break t;case"link":var G=E1("link","href",M).get(p+(g.href||""));if(G){for(var q=0;q<G.length;q++)if(D=G[q],D.getAttribute("href")===(g.href==null||g.href===""?null:g.href)&&D.getAttribute("rel")===(g.rel==null?null:g.rel)&&D.getAttribute("title")===(g.title==null?null:g.title)&&D.getAttribute("crossorigin")===(g.crossOrigin==null?null:g.crossOrigin)){G.splice(q,1);break e}}D=M.createElement(p),zs(D,p,g),M.head.appendChild(D);break;case"meta":if(G=E1("meta","content",M).get(p+(g.content||""))){for(q=0;q<G.length;q++)if(D=G[q],D.getAttribute("content")===(g.content==null?null:""+g.content)&&D.getAttribute("name")===(g.name==null?null:g.name)&&D.getAttribute("property")===(g.property==null?null:g.property)&&D.getAttribute("http-equiv")===(g.httpEquiv==null?null:g.httpEquiv)&&D.getAttribute("charset")===(g.charSet==null?null:g.charSet)){G.splice(q,1);break e}}D=M.createElement(p),zs(D,p,g),M.head.appendChild(D);break;default:throw Error(i(468,p))}D[It]=h,Ht(D),p=D}h.stateNode=p}else T1(M,h.type,h.stateNode);else h.stateNode=R1(M,p,h.memoizedProps);else D!==p?(D===null?g.stateNode!==null&&(g=g.stateNode,g.parentNode.removeChild(g)):D.count--,p===null?T1(M,h.type,h.stateNode):R1(M,p,h.memoizedProps)):p===null&&h.stateNode!==null&&qg(h,h.memoizedProps,g.memoizedProps)}break;case 27:Nr(c,h),Br(h),p&512&&(Qi||g===null||Bn(g,g.return)),g!==null&&p&4&&qg(h,h.memoizedProps,g.memoizedProps);break;case 5:if(Nr(c,h),Br(h),p&512&&(Qi||g===null||Bn(g,g.return)),h.flags&32){M=h.stateNode;try{po(M,"")}catch(lt){pi(h,h.return,lt)}}p&4&&h.stateNode!=null&&(M=h.memoizedProps,qg(h,M,g!==null?g.memoizedProps:M)),p&1024&&(Jg=!0);break;case 6:if(Nr(c,h),Br(h),p&4){if(h.stateNode===null)throw Error(i(162));p=h.memoizedProps,g=h.stateNode;try{g.nodeValue=p}catch(lt){pi(h,h.return,lt)}}break;case 3:if(Gd=null,M=vn,vn=Ud(c.containerInfo),Nr(c,h),vn=M,Br(h),p&4&&g!==null&&g.memoizedState.isDehydrated)try{Lu(c.containerInfo)}catch(lt){pi(h,h.return,lt)}Jg&&(Jg=!1,VA(h));break;case 4:p=vn,vn=Ud(h.stateNode.containerInfo),Nr(c,h),Br(h),vn=p;break;case 12:Nr(c,h),Br(h);break;case 13:Nr(c,h),Br(h),h.child.flags&8192&&h.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&(sy=Pi()),p&4&&(p=h.updateQueue,p!==null&&(h.updateQueue=null,Zg(h,p)));break;case 22:M=h.memoizedState!==null;var Z=g!==null&&g.memoizedState!==null,rt=ga,yt=Qi;if(ga=rt||M,Qi=yt||Z,Nr(c,h),Qi=yt,ga=rt,Br(h),p&8192)t:for(c=h.stateNode,c._visibility=M?c._visibility&-2:c._visibility|1,M&&(g===null||Z||ga||Qi||Bh(h)),g=null,c=h;;){if(c.tag===5||c.tag===26){if(g===null){Z=g=c;try{if(D=Z.stateNode,M)G=D.style,typeof G.setProperty=="function"?G.setProperty("display","none","important"):G.display="none";else{q=Z.stateNode;var pt=Z.memoizedProps.style,at=pt!=null&&pt.hasOwnProperty("display")?pt.display:null;q.style.display=at==null||typeof at=="boolean"?"":(""+at).trim()}}catch(lt){pi(Z,Z.return,lt)}}}else if(c.tag===6){if(g===null){Z=c;try{Z.stateNode.nodeValue=M?"":Z.memoizedProps}catch(lt){pi(Z,Z.return,lt)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===h)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===h)break t;for(;c.sibling===null;){if(c.return===null||c.return===h)break t;g===c&&(g=null),c=c.return}g===c&&(g=null),c.sibling.return=c.return,c=c.sibling}p&4&&(p=h.updateQueue,p!==null&&(g=p.retryQueue,g!==null&&(p.retryQueue=null,Zg(h,g))));break;case 19:Nr(c,h),Br(h),p&4&&(p=h.updateQueue,p!==null&&(h.updateQueue=null,Zg(h,p)));break;case 30:break;case 21:break;default:Nr(c,h),Br(h)}}function Br(h){var c=h.flags;if(c&2){try{for(var g,p=h.return;p!==null;){if(RA(p)){g=p;break}p=p.return}if(g==null)throw Error(i(160));switch(g.tag){case 27:var M=g.stateNode,D=jg(h);wd(h,D,M);break;case 5:var G=g.stateNode;g.flags&32&&(po(G,""),g.flags&=-33);var q=jg(h);wd(h,q,G);break;case 3:case 4:var Z=g.stateNode.containerInfo,rt=jg(h);$g(h,rt,Z);break;default:throw Error(i(161))}}catch(yt){pi(h,h.return,yt)}h.flags&=-3}c&4096&&(h.flags&=-4097)}function VA(h){if(h.subtreeFlags&1024)for(h=h.child;h!==null;){var c=h;VA(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),h=h.sibling}}function Ya(h,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)wA(h,c.alternate,c),c=c.sibling}function Bh(h){for(h=h.child;h!==null;){var c=h;switch(c.tag){case 0:case 11:case 14:case 15:Ga(4,c,c.return),Bh(c);break;case 1:Bn(c,c.return);var g=c.stateNode;typeof g.componentWillUnmount=="function"&&bA(c,c.return,g),Bh(c);break;case 27:ku(c.stateNode);case 26:case 5:Bn(c,c.return),Bh(c);break;case 22:c.memoizedState===null&&Bh(c);break;case 30:Bh(c);break;default:Bh(c)}h=h.sibling}}function Ha(h,c,g){for(g=g&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var p=c.alternate,M=h,D=c,G=D.flags;switch(D.tag){case 0:case 11:case 15:Ha(M,D,g),xu(4,D);break;case 1:if(Ha(M,D,g),p=D,M=p.stateNode,typeof M.componentDidMount=="function")try{M.componentDidMount()}catch(rt){pi(p,p.return,rt)}if(p=D,M=p.updateQueue,M!==null){var q=p.stateNode;try{var Z=M.shared.hiddenCallbacks;if(Z!==null)for(M.shared.hiddenCallbacks=null,M=0;M<Z.length;M++)hx(Z[M],q)}catch(rt){pi(p,p.return,rt)}}g&&G&64&&vA(D),Au(D,D.return);break;case 27:EA(D);case 26:case 5:Ha(M,D,g),g&&p===null&&G&4&&MA(D),Au(D,D.return);break;case 12:Ha(M,D,g);break;case 13:Ha(M,D,g),g&&G&4&&DA(M,D);break;case 22:D.memoizedState===null&&Ha(M,D,g),Au(D,D.return);break;case 30:break;default:Ha(M,D,g)}c=c.sibling}}function Qg(h,c){var g=null;h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(g=h.memoizedState.cachePool.pool),h=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(h=c.memoizedState.cachePool.pool),h!==g&&(h!=null&&h.refCount++,g!=null&&nu(g))}function Kg(h,c){h=null,c.alternate!==null&&(h=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==h&&(c.refCount++,h!=null&&nu(h))}function Ln(h,c,g,p){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)zA(h,c,g,p),c=c.sibling}function zA(h,c,g,p){var M=c.flags;switch(c.tag){case 0:case 11:case 15:Ln(h,c,g,p),M&2048&&xu(9,c);break;case 1:Ln(h,c,g,p);break;case 3:Ln(h,c,g,p),M&2048&&(h=null,c.alternate!==null&&(h=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==h&&(c.refCount++,h!=null&&nu(h)));break;case 12:if(M&2048){Ln(h,c,g,p),h=c.stateNode;try{var D=c.memoizedProps,G=D.id,q=D.onPostCommit;typeof q=="function"&&q(G,c.alternate===null?"mount":"update",h.passiveEffectDuration,-0)}catch(Z){pi(c,c.return,Z)}}else Ln(h,c,g,p);break;case 13:Ln(h,c,g,p);break;case 23:break;case 22:D=c.stateNode,G=c.alternate,c.memoizedState!==null?D._visibility&2?Ln(h,c,g,p):vu(h,c):D._visibility&2?Ln(h,c,g,p):(D._visibility|=2,Bo(h,c,g,p,(c.subtreeFlags&10256)!==0)),M&2048&&Qg(G,c);break;case 24:Ln(h,c,g,p),M&2048&&Kg(c.alternate,c);break;default:Ln(h,c,g,p)}}function Bo(h,c,g,p,M){for(M=M&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var D=h,G=c,q=g,Z=p,rt=G.flags;switch(G.tag){case 0:case 11:case 15:Bo(D,G,q,Z,M),xu(8,G);break;case 23:break;case 22:var yt=G.stateNode;G.memoizedState!==null?yt._visibility&2?Bo(D,G,q,Z,M):vu(D,G):(yt._visibility|=2,Bo(D,G,q,Z,M)),M&&rt&2048&&Qg(G.alternate,G);break;case 24:Bo(D,G,q,Z,M),M&&rt&2048&&Kg(G.alternate,G);break;default:Bo(D,G,q,Z,M)}c=c.sibling}}function vu(h,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var g=h,p=c,M=p.flags;switch(p.tag){case 22:vu(g,p),M&2048&&Qg(p.alternate,p);break;case 24:vu(g,p),M&2048&&Kg(p.alternate,p);break;default:vu(g,p)}c=c.sibling}}var bu=8192;function Lo(h){if(h.subtreeFlags&bu)for(h=h.child;h!==null;)_A(h),h=h.sibling}function _A(h){switch(h.tag){case 26:Lo(h),h.flags&bu&&h.memoizedState!==null&&dw(vn,h.memoizedState,h.memoizedProps);break;case 5:Lo(h);break;case 3:case 4:var c=vn;vn=Ud(h.stateNode.containerInfo),Lo(h),vn=c;break;case 22:h.memoizedState===null&&(c=h.alternate,c!==null&&c.memoizedState!==null?(c=bu,bu=16777216,Lo(h),bu=c):Lo(h));break;default:Lo(h)}}function NA(h){var c=h.alternate;if(c!==null&&(h=c.child,h!==null)){c.child=null;do c=h.sibling,h.sibling=null,h=c;while(h!==null)}}function Mu(h){var c=h.deletions;if((h.flags&16)!==0){if(c!==null)for(var g=0;g<c.length;g++){var p=c[g];bs=p,LA(p,h)}NA(h)}if(h.subtreeFlags&10256)for(h=h.child;h!==null;)BA(h),h=h.sibling}function BA(h){switch(h.tag){case 0:case 11:case 15:Mu(h),h.flags&2048&&Ga(9,h,h.return);break;case 3:Mu(h);break;case 12:Mu(h);break;case 22:var c=h.stateNode;h.memoizedState!==null&&c._visibility&2&&(h.return===null||h.return.tag!==13)?(c._visibility&=-3,Cd(h)):Mu(h);break;default:Mu(h)}}function Cd(h){var c=h.deletions;if((h.flags&16)!==0){if(c!==null)for(var g=0;g<c.length;g++){var p=c[g];bs=p,LA(p,h)}NA(h)}for(h=h.child;h!==null;){switch(c=h,c.tag){case 0:case 11:case 15:Ga(8,c,c.return),Cd(c);break;case 22:g=c.stateNode,g._visibility&2&&(g._visibility&=-3,Cd(c));break;default:Cd(c)}h=h.sibling}}function LA(h,c){for(;bs!==null;){var g=bs;switch(g.tag){case 0:case 11:case 15:Ga(8,g,c);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var p=g.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:nu(g.memoizedState.cache)}if(p=g.child,p!==null)p.return=g,bs=p;else t:for(g=h;bs!==null;){p=bs;var M=p.sibling,D=p.return;if(CA(p),p===g){bs=null;break t}if(M!==null){M.return=D,bs=M;break t}bs=D}}}var CT={getCacheForType:function(h){var c=Ps(ds),g=c.data.get(h);return g===void 0&&(g=h(),c.data.set(h,g)),g}},kT=typeof WeakMap=="function"?WeakMap:Map,ai=0,vi=null,we=null,Ne=0,hi=0,Lr=null,Xa=!1,Io=!1,ty=!1,ma=0,Yi=0,Wa=0,Lh=0,ey=0,on=0,Po=0,Ru=null,gr=null,iy=!1,sy=0,kd=1/0,Dd=null,qa=null,Vs=0,ja=null,Uo=null,Oo=0,ry=0,ny=null,IA=null,Eu=0,ay=null;function Ir(){if((ai&2)!==0&&Ne!==0)return Ne&-Ne;if(N.T!==null){var h=Co;return h!==0?h:fy()}return mi()}function PA(){on===0&&(on=(Ne&536870912)===0||Ke?Tt():536870912);var h=hn.current;return h!==null&&(h.flags|=32),on}function Pr(h,c,g){(h===vi&&(hi===2||hi===9)||h.cancelPendingCommit!==null)&&(Go(h,0),$a(h,Ne,on,!1)),de(h,g),((ai&2)===0||h!==vi)&&(h===vi&&((ai&2)===0&&(Lh|=g),Yi===4&&$a(h,Ne,on,!1)),In(h))}function UA(h,c,g){if((ai&6)!==0)throw Error(i(327));var p=!g&&(c&124)===0&&(c&h.expiredLanes)===0||Rt(h,c),M=p?VT(h,c):ly(h,c,!0),D=p;do{if(M===0){Io&&!p&&$a(h,c,0,!1);break}else{if(g=h.current.alternate,D&&!DT(g)){M=ly(h,c,!1),D=!1;continue}if(M===2){if(D=c,h.errorRecoveryDisabledLanes&D)var G=0;else G=h.pendingLanes&-536870913,G=G!==0?G:G&536870912?536870912:0;if(G!==0){c=G;t:{var q=h;M=Ru;var Z=q.current.memoizedState.isDehydrated;if(Z&&(Go(q,G).flags|=256),G=ly(q,G,!1),G!==2){if(ty&&!Z){q.errorRecoveryDisabledLanes|=D,Lh|=D,M=4;break t}D=gr,gr=M,D!==null&&(gr===null?gr=D:gr.push.apply(gr,D))}M=G}if(D=!1,M!==2)continue}}if(M===1){Go(h,0),$a(h,c,0,!0);break}t:{switch(p=h,D=M,D){case 0:case 1:throw Error(i(345));case 4:if((c&4194048)!==c)break;case 6:$a(p,c,on,!Xa);break t;case 2:gr=null;break;case 3:case 5:break;default:throw Error(i(329))}if((c&62914560)===c&&(M=sy+300-Pi(),10<M)){if($a(p,c,on,!Xa),re(p,0,!0)!==0)break t;p.timeoutHandle=y1(OA.bind(null,p,g,gr,Dd,iy,c,on,Lh,Po,Xa,D,2,-0,0),M);break t}OA(p,g,gr,Dd,iy,c,on,Lh,Po,Xa,D,0,-0,0)}}break}while(!0);In(h)}function OA(h,c,g,p,M,D,G,q,Z,rt,yt,pt,at,lt){if(h.timeoutHandle=-1,pt=c.subtreeFlags,(pt&8192||(pt&16785408)===16785408)&&(Vu={stylesheets:null,count:0,unsuspend:cw},_A(c),pt=fw(),pt!==null)){h.cancelPendingCommit=pt(jA.bind(null,h,c,D,g,p,M,G,q,Z,yt,1,at,lt)),$a(h,D,G,!rt);return}jA(h,c,D,g,p,M,G,q,Z)}function DT(h){for(var c=h;;){var g=c.tag;if((g===0||g===11||g===15)&&c.flags&16384&&(g=c.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var p=0;p<g.length;p++){var M=g[p],D=M.getSnapshot;M=M.value;try{if(!zr(D(),M))return!1}catch{return!1}}if(g=c.child,c.subtreeFlags&16384&&g!==null)g.return=c,c=g;else{if(c===h)break;for(;c.sibling===null;){if(c.return===null||c.return===h)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function $a(h,c,g,p){c&=~ey,c&=~Lh,h.suspendedLanes|=c,h.pingedLanes&=~c,p&&(h.warmLanes|=c),p=h.expirationTimes;for(var M=c;0<M;){var D=31-yi(M),G=1<<D;p[D]=-1,M&=~G}g!==0&&Vn(h,g,c)}function Fd(){return(ai&6)===0?(Tu(0),!1):!0}function hy(){if(we!==null){if(hi===0)var h=we.return;else h=we,oa=Fh=null,Rg(h),_o=null,mu=0,h=we;for(;h!==null;)AA(h.alternate,h),h=h.return;we=null}}function Go(h,c){var g=h.timeoutHandle;g!==-1&&(h.timeoutHandle=-1,jT(g)),g=h.cancelPendingCommit,g!==null&&(h.cancelPendingCommit=null,g()),hy(),vi=h,we=g=na(h.current,null),Ne=c,hi=0,Lr=null,Xa=!1,Io=Rt(h,c),ty=!1,Po=on=ey=Lh=Wa=Yi=0,gr=Ru=null,iy=!1,(c&8)!==0&&(c|=c&32);var p=h.entangledLanes;if(p!==0)for(h=h.entanglements,p&=c;0<p;){var M=31-yi(p),D=1<<M;c|=h[M],p&=~D}return ma=c,Kc(),g}function GA(h,c){ye=null,N.H=Sd,c===hu||c===od?(c=nx(),hi=3):c===ix?(c=nx(),hi=4):hi=c===aA?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,Lr=c,we===null&&(Yi=1,Md(h,sn(c,h.current)))}function YA(){var h=N.H;return N.H=Sd,h===null?Sd:h}function HA(){var h=N.A;return N.A=CT,h}function oy(){Yi=4,Xa||(Ne&4194048)!==Ne&&hn.current!==null||(Io=!0),(Wa&134217727)===0&&(Lh&134217727)===0||vi===null||$a(vi,Ne,on,!1)}function ly(h,c,g){var p=ai;ai|=2;var M=YA(),D=HA();(vi!==h||Ne!==c)&&(Dd=null,Go(h,c)),c=!1;var G=Yi;t:do try{if(hi!==0&&we!==null){var q=we,Z=Lr;switch(hi){case 8:hy(),G=6;break t;case 3:case 2:case 9:case 6:hn.current===null&&(c=!0);var rt=hi;if(hi=0,Lr=null,Yo(h,q,Z,rt),g&&Io){G=0;break t}break;default:rt=hi,hi=0,Lr=null,Yo(h,q,Z,rt)}}FT(),G=Yi;break}catch(yt){GA(h,yt)}while(!0);return c&&h.shellSuspendCounter++,oa=Fh=null,ai=p,N.H=M,N.A=D,we===null&&(vi=null,Ne=0,Kc()),G}function FT(){for(;we!==null;)XA(we)}function VT(h,c){var g=ai;ai|=2;var p=YA(),M=HA();vi!==h||Ne!==c?(Dd=null,kd=Pi()+500,Go(h,c)):Io=Rt(h,c);t:do try{if(hi!==0&&we!==null){c=we;var D=Lr;e:switch(hi){case 1:hi=0,Lr=null,Yo(h,c,D,1);break;case 2:case 9:if(sx(D)){hi=0,Lr=null,WA(c);break}c=function(){hi!==2&&hi!==9||vi!==h||(hi=7),In(h)},D.then(c,c);break t;case 3:hi=7;break t;case 4:hi=5;break t;case 7:sx(D)?(hi=0,Lr=null,WA(c)):(hi=0,Lr=null,Yo(h,c,D,7));break;case 5:var G=null;switch(we.tag){case 26:G=we.memoizedState;case 5:case 27:var q=we;if(!G||w1(G)){hi=0,Lr=null;var Z=q.sibling;if(Z!==null)we=Z;else{var rt=q.return;rt!==null?(we=rt,Vd(rt)):we=null}break e}}hi=0,Lr=null,Yo(h,c,D,5);break;case 6:hi=0,Lr=null,Yo(h,c,D,6);break;case 8:hy(),Yi=6;break t;default:throw Error(i(462))}}zT();break}catch(yt){GA(h,yt)}while(!0);return oa=Fh=null,N.H=p,N.A=M,ai=g,we!==null?0:(vi=null,Ne=0,Kc(),Yi)}function zT(){for(;we!==null&&!Dt();)XA(we)}function XA(h){var c=SA(h.alternate,h,ma);h.memoizedProps=h.pendingProps,c===null?Vd(h):we=c}function WA(h){var c=h,g=c.alternate;switch(c.tag){case 15:case 0:c=dA(g,c,c.pendingProps,c.type,void 0,Ne);break;case 11:c=dA(g,c,c.pendingProps,c.type.render,c.ref,Ne);break;case 5:Rg(c);default:AA(g,c),c=we=qS(c,ma),c=SA(g,c,ma)}h.memoizedProps=h.pendingProps,c===null?Vd(h):we=c}function Yo(h,c,g,p){oa=Fh=null,Rg(c),_o=null,mu=0;var M=c.return;try{if(bT(h,M,c,g,Ne)){Yi=1,Md(h,sn(g,h.current)),we=null;return}}catch(D){if(M!==null)throw we=M,D;Yi=1,Md(h,sn(g,h.current)),we=null;return}c.flags&32768?(Ke||p===1?h=!0:Io||(Ne&536870912)!==0?h=!1:(Xa=h=!0,(p===2||p===9||p===3||p===6)&&(p=hn.current,p!==null&&p.tag===13&&(p.flags|=16384))),qA(c,h)):Vd(c)}function Vd(h){var c=h;do{if((c.flags&32768)!==0){qA(c,Xa);return}h=c.return;var g=RT(c.alternate,c,ma);if(g!==null){we=g;return}if(c=c.sibling,c!==null){we=c;return}we=c=h}while(c!==null);Yi===0&&(Yi=5)}function qA(h,c){do{var g=ET(h.alternate,h);if(g!==null){g.flags&=32767,we=g;return}if(g=h.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!c&&(h=h.sibling,h!==null)){we=h;return}we=h=g}while(h!==null);Yi=6,we=null}function jA(h,c,g,p,M,D,G,q,Z){h.cancelPendingCommit=null;do zd();while(Vs!==0);if((ai&6)!==0)throw Error(i(327));if(c!==null){if(c===h.current)throw Error(i(177));if(D=c.lanes|c.childLanes,D|=K0,Ee(h,g,D,G,q,Z),h===vi&&(we=vi=null,Ne=0),Uo=c,ja=h,Oo=g,ry=D,ny=M,IA=p,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(h.callbackNode=null,h.callbackPriority=0,LT(Ze,function(){return KA(),null})):(h.callbackNode=null,h.callbackPriority=0),p=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||p){p=N.T,N.T=null,M=U.p,U.p=2,G=ai,ai|=4;try{TT(h,c,g)}finally{ai=G,U.p=M,N.T=p}}Vs=1,$A(),JA(),ZA()}}function $A(){if(Vs===1){Vs=0;var h=ja,c=Uo,g=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||g){g=N.T,N.T=null;var p=U.p;U.p=2;var M=ai;ai|=4;try{FA(c,h);var D=vy,G=LS(h.containerInfo),q=D.focusedElem,Z=D.selectionRange;if(G!==q&&q&&q.ownerDocument&&BS(q.ownerDocument.documentElement,q)){if(Z!==null&&j0(q)){var rt=Z.start,yt=Z.end;if(yt===void 0&&(yt=rt),"selectionStart"in q)q.selectionStart=rt,q.selectionEnd=Math.min(yt,q.value.length);else{var pt=q.ownerDocument||document,at=pt&&pt.defaultView||window;if(at.getSelection){var lt=at.getSelection(),te=q.textContent.length,Wt=Math.min(Z.start,te),di=Z.end===void 0?Wt:Math.min(Z.end,te);!lt.extend&&Wt>di&&(G=di,di=Wt,Wt=G);var tt=NS(q,Wt),K=NS(q,di);if(tt&&K&&(lt.rangeCount!==1||lt.anchorNode!==tt.node||lt.anchorOffset!==tt.offset||lt.focusNode!==K.node||lt.focusOffset!==K.offset)){var st=pt.createRange();st.setStart(tt.node,tt.offset),lt.removeAllRanges(),Wt>di?(lt.addRange(st),lt.extend(K.node,K.offset)):(st.setEnd(K.node,K.offset),lt.addRange(st))}}}}for(pt=[],lt=q;lt=lt.parentNode;)lt.nodeType===1&&pt.push({element:lt,left:lt.scrollLeft,top:lt.scrollTop});for(typeof q.focus=="function"&&q.focus(),q=0;q<pt.length;q++){var mt=pt[q];mt.element.scrollLeft=mt.left,mt.element.scrollTop=mt.top}}Xd=!!Ay,vy=Ay=null}finally{ai=M,U.p=p,N.T=g}}h.current=c,Vs=2}}function JA(){if(Vs===2){Vs=0;var h=ja,c=Uo,g=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||g){g=N.T,N.T=null;var p=U.p;U.p=2;var M=ai;ai|=4;try{wA(h,c.alternate,c)}finally{ai=M,U.p=p,N.T=g}}Vs=3}}function ZA(){if(Vs===4||Vs===3){Vs=0,Ct();var h=ja,c=Uo,g=Oo,p=IA;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?Vs=5:(Vs=0,Uo=ja=null,QA(h,h.pendingLanes));var M=h.pendingLanes;if(M===0&&(qa=null),zn(g),c=c.stateNode,fe&&typeof fe.onCommitFiberRoot=="function")try{fe.onCommitFiberRoot(Ai,c,void 0,(c.current.flags&128)===128)}catch{}if(p!==null){c=N.T,M=U.p,U.p=2,N.T=null;try{for(var D=h.onRecoverableError,G=0;G<p.length;G++){var q=p[G];D(q.value,{componentStack:q.stack})}}finally{N.T=c,U.p=M}}(Oo&3)!==0&&zd(),In(h),M=h.pendingLanes,(g&4194090)!==0&&(M&42)!==0?h===ay?Eu++:(Eu=0,ay=h):Eu=0,Tu(0)}}function QA(h,c){(h.pooledCacheLanes&=c)===0&&(c=h.pooledCache,c!=null&&(h.pooledCache=null,nu(c)))}function zd(h){return $A(),JA(),ZA(),KA()}function KA(){if(Vs!==5)return!1;var h=ja,c=ry;ry=0;var g=zn(Oo),p=N.T,M=U.p;try{U.p=32>g?32:g,N.T=null,g=ny,ny=null;var D=ja,G=Oo;if(Vs=0,Uo=ja=null,Oo=0,(ai&6)!==0)throw Error(i(331));var q=ai;if(ai|=4,BA(D.current),zA(D,D.current,G,g),ai=q,Tu(0,!1),fe&&typeof fe.onPostCommitFiberRoot=="function")try{fe.onPostCommitFiberRoot(Ai,D)}catch{}return!0}finally{U.p=M,N.T=p,QA(h,c)}}function t1(h,c,g){c=sn(g,c),c=Ig(h.stateNode,c,2),h=Ia(h,c,2),h!==null&&(de(h,2),In(h))}function pi(h,c,g){if(h.tag===3)t1(h,h,g);else for(;c!==null;){if(c.tag===3){t1(c,h,g);break}else if(c.tag===1){var p=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(qa===null||!qa.has(p))){h=sn(g,h),g=rA(2),p=Ia(c,g,2),p!==null&&(nA(g,p,c,h),de(p,2),In(p));break}}c=c.return}}function uy(h,c,g){var p=h.pingCache;if(p===null){p=h.pingCache=new kT;var M=new Set;p.set(c,M)}else M=p.get(c),M===void 0&&(M=new Set,p.set(c,M));M.has(g)||(ty=!0,M.add(g),h=_T.bind(null,h,c,g),c.then(h,h))}function _T(h,c,g){var p=h.pingCache;p!==null&&p.delete(c),h.pingedLanes|=h.suspendedLanes&g,h.warmLanes&=~g,vi===h&&(Ne&g)===g&&(Yi===4||Yi===3&&(Ne&62914560)===Ne&&300>Pi()-sy?(ai&2)===0&&Go(h,0):ey|=g,Po===Ne&&(Po=0)),In(h)}function e1(h,c){c===0&&(c=Ot()),h=Ro(h,c),h!==null&&(de(h,c),In(h))}function NT(h){var c=h.memoizedState,g=0;c!==null&&(g=c.retryLane),e1(h,g)}function BT(h,c){var g=0;switch(h.tag){case 13:var p=h.stateNode,M=h.memoizedState;M!==null&&(g=M.retryLane);break;case 19:p=h.stateNode;break;case 22:p=h.stateNode._retryCache;break;default:throw Error(i(314))}p!==null&&p.delete(c),e1(h,g)}function LT(h,c){return jt(h,c)}var _d=null,Ho=null,cy=!1,Nd=!1,dy=!1,Ih=0;function In(h){h!==Ho&&h.next===null&&(Ho===null?_d=Ho=h:Ho=Ho.next=h),Nd=!0,cy||(cy=!0,PT())}function Tu(h,c){if(!dy&&Nd){dy=!0;do for(var g=!1,p=_d;p!==null;){if(h!==0){var M=p.pendingLanes;if(M===0)var D=0;else{var G=p.suspendedLanes,q=p.pingedLanes;D=(1<<31-yi(42|h)+1)-1,D&=M&~(G&~q),D=D&201326741?D&201326741|1:D?D|2:0}D!==0&&(g=!0,n1(p,D))}else D=Ne,D=re(p,p===vi?D:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(D&3)===0||Rt(p,D)||(g=!0,n1(p,D));p=p.next}while(g);dy=!1}}function IT(){i1()}function i1(){Nd=cy=!1;var h=0;Ih!==0&&(qT()&&(h=Ih),Ih=0);for(var c=Pi(),g=null,p=_d;p!==null;){var M=p.next,D=s1(p,c);D===0?(p.next=null,g===null?_d=M:g.next=M,M===null&&(Ho=g)):(g=p,(h!==0||(D&3)!==0)&&(Nd=!0)),p=M}Tu(h)}function s1(h,c){for(var g=h.suspendedLanes,p=h.pingedLanes,M=h.expirationTimes,D=h.pendingLanes&-62914561;0<D;){var G=31-yi(D),q=1<<G,Z=M[G];Z===-1?((q&g)===0||(q&p)!==0)&&(M[G]=ae(q,c)):Z<=c&&(h.expiredLanes|=q),D&=~q}if(c=vi,g=Ne,g=re(h,h===c?g:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),p=h.callbackNode,g===0||h===c&&(hi===2||hi===9)||h.cancelPendingCommit!==null)return p!==null&&p!==null&&ee(p),h.callbackNode=null,h.callbackPriority=0;if((g&3)===0||Rt(h,g)){if(c=g&-g,c===h.callbackPriority)return c;switch(p!==null&&ee(p),zn(g)){case 2:case 8:g=Zr;break;case 32:g=Ze;break;case 268435456:g=ur;break;default:g=Ze}return p=r1.bind(null,h),g=jt(g,p),h.callbackPriority=c,h.callbackNode=g,c}return p!==null&&p!==null&&ee(p),h.callbackPriority=2,h.callbackNode=null,2}function r1(h,c){if(Vs!==0&&Vs!==5)return h.callbackNode=null,h.callbackPriority=0,null;var g=h.callbackNode;if(zd()&&h.callbackNode!==g)return null;var p=Ne;return p=re(h,h===vi?p:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),p===0?null:(UA(h,p,c),s1(h,Pi()),h.callbackNode!=null&&h.callbackNode===g?r1.bind(null,h):null)}function n1(h,c){if(zd())return null;UA(h,c,!0)}function PT(){$T(function(){(ai&6)!==0?jt(Re,IT):i1()})}function fy(){return Ih===0&&(Ih=Tt()),Ih}function a1(h){return h==null||typeof h=="symbol"||typeof h=="boolean"?null:typeof h=="function"?h:Wc(""+h)}function h1(h,c){var g=c.ownerDocument.createElement("input");return g.name=c.name,g.value=c.value,h.id&&g.setAttribute("form",h.id),c.parentNode.insertBefore(g,c),h=new FormData(h),g.parentNode.removeChild(g),h}function UT(h,c,g,p,M){if(c==="submit"&&g&&g.stateNode===M){var D=a1((M[Zt]||null).action),G=p.submitter;G&&(c=(c=G[Zt]||null)?a1(c.formAction):G.getAttribute("formAction"),c!==null&&(D=c,G=null));var q=new Jc("action","action",null,p,M);h.push({event:q,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(Ih!==0){var Z=G?h1(M,G):new FormData(M);zg(g,{pending:!0,data:Z,method:M.method,action:D},null,Z)}}else typeof D=="function"&&(q.preventDefault(),Z=G?h1(M,G):new FormData(M),zg(g,{pending:!0,data:Z,method:M.method,action:D},D,Z))},currentTarget:M}]})}}for(var gy=0;gy<Q0.length;gy++){var yy=Q0[gy],OT=yy.toLowerCase(),GT=yy[0].toUpperCase()+yy.slice(1);An(OT,"on"+GT)}An(US,"onAnimationEnd"),An(OS,"onAnimationIteration"),An(GS,"onAnimationStart"),An("dblclick","onDoubleClick"),An("focusin","onFocus"),An("focusout","onBlur"),An(nT,"onTransitionRun"),An(aT,"onTransitionStart"),An(hT,"onTransitionCancel"),An(YS,"onTransitionEnd"),Ni("onMouseEnter",["mouseout","mouseover"]),Ni("onMouseLeave",["mouseout","mouseover"]),Ni("onPointerEnter",["pointerout","pointerover"]),Ni("onPointerLeave",["pointerout","pointerover"]),_i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),_i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),_i("onBeforeInput",["compositionend","keypress","textInput","paste"]),_i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),_i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),_i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),YT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(wu));function o1(h,c){c=(c&4)!==0;for(var g=0;g<h.length;g++){var p=h[g],M=p.event;p=p.listeners;t:{var D=void 0;if(c)for(var G=p.length-1;0<=G;G--){var q=p[G],Z=q.instance,rt=q.currentTarget;if(q=q.listener,Z!==D&&M.isPropagationStopped())break t;D=q,M.currentTarget=rt;try{D(M)}catch(yt){bd(yt)}M.currentTarget=null,D=Z}else for(G=0;G<p.length;G++){if(q=p[G],Z=q.instance,rt=q.currentTarget,q=q.listener,Z!==D&&M.isPropagationStopped())break t;D=q,M.currentTarget=rt;try{D(M)}catch(yt){bd(yt)}M.currentTarget=null,D=Z}}}}function Ce(h,c){var g=c[ri];g===void 0&&(g=c[ri]=new Set);var p=h+"__bubble";g.has(p)||(l1(c,h,2,!1),g.add(p))}function my(h,c,g){var p=0;c&&(p|=4),l1(g,h,p,c)}var Bd="_reactListening"+Math.random().toString(36).slice(2);function py(h){if(!h[Bd]){h[Bd]=!0,$s.forEach(function(g){g!=="selectionchange"&&(YT.has(g)||my(g,!1,h),my(g,!0,h))});var c=h.nodeType===9?h:h.ownerDocument;c===null||c[Bd]||(c[Bd]=!0,my("selectionchange",!1,c))}}function l1(h,c,g,p){switch(z1(c)){case 2:var M=mw;break;case 8:M=pw;break;default:M=Fy}g=M.bind(null,c,g,h),M=void 0,!P0||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(M=!0),p?M!==void 0?h.addEventListener(c,g,{capture:!0,passive:M}):h.addEventListener(c,g,!0):M!==void 0?h.addEventListener(c,g,{passive:M}):h.addEventListener(c,g,!1)}function Sy(h,c,g,p,M){var D=p;if((c&1)===0&&(c&2)===0&&p!==null)t:for(;;){if(p===null)return;var G=p.tag;if(G===3||G===4){var q=p.stateNode.containerInfo;if(q===M)break;if(G===4)for(G=p.return;G!==null;){var Z=G.tag;if((Z===3||Z===4)&&G.stateNode.containerInfo===M)return;G=G.return}for(;q!==null;){if(G=Vi(q),G===null)return;if(Z=G.tag,Z===5||Z===6||Z===26||Z===27){p=D=G;continue t}q=q.parentNode}}p=p.return}mS(function(){var rt=D,yt=L0(g),pt=[];t:{var at=HS.get(h);if(at!==void 0){var lt=Jc,te=h;switch(h){case"keypress":if(jc(g)===0)break t;case"keydown":case"keyup":lt=LE;break;case"focusin":te="focus",lt=Y0;break;case"focusout":te="blur",lt=Y0;break;case"beforeblur":case"afterblur":lt=Y0;break;case"click":if(g.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":lt=xS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":lt=EE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":lt=UE;break;case US:case OS:case GS:lt=CE;break;case YS:lt=GE;break;case"scroll":case"scrollend":lt=ME;break;case"wheel":lt=HE;break;case"copy":case"cut":case"paste":lt=DE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":lt=vS;break;case"toggle":case"beforetoggle":lt=WE}var Wt=(c&4)!==0,di=!Wt&&(h==="scroll"||h==="scrollend"),tt=Wt?at!==null?at+"Capture":null:at;Wt=[];for(var K=rt,st;K!==null;){var mt=K;if(st=mt.stateNode,mt=mt.tag,mt!==5&&mt!==26&&mt!==27||st===null||tt===null||(mt=Wl(K,tt),mt!=null&&Wt.push(Cu(K,mt,st))),di)break;K=K.return}0<Wt.length&&(at=new lt(at,te,null,g,yt),pt.push({event:at,listeners:Wt}))}}if((c&7)===0){t:{if(at=h==="mouseover"||h==="pointerover",lt=h==="mouseout"||h==="pointerout",at&&g!==B0&&(te=g.relatedTarget||g.fromElement)&&(Vi(te)||te[ks]))break t;if((lt||at)&&(at=yt.window===yt?yt:(at=yt.ownerDocument)?at.defaultView||at.parentWindow:window,lt?(te=g.relatedTarget||g.toElement,lt=rt,te=te?Vi(te):null,te!==null&&(di=n(te),Wt=te.tag,te!==di||Wt!==5&&Wt!==27&&Wt!==6)&&(te=null)):(lt=null,te=rt),lt!==te)){if(Wt=xS,mt="onMouseLeave",tt="onMouseEnter",K="mouse",(h==="pointerout"||h==="pointerover")&&(Wt=vS,mt="onPointerLeave",tt="onPointerEnter",K="pointer"),di=lt==null?at:Oi(lt),st=te==null?at:Oi(te),at=new Wt(mt,K+"leave",lt,g,yt),at.target=di,at.relatedTarget=st,mt=null,Vi(yt)===rt&&(Wt=new Wt(tt,K+"enter",te,g,yt),Wt.target=st,Wt.relatedTarget=di,mt=Wt),di=mt,lt&&te)e:{for(Wt=lt,tt=te,K=0,st=Wt;st;st=Xo(st))K++;for(st=0,mt=tt;mt;mt=Xo(mt))st++;for(;0<K-st;)Wt=Xo(Wt),K--;for(;0<st-K;)tt=Xo(tt),st--;for(;K--;){if(Wt===tt||tt!==null&&Wt===tt.alternate)break e;Wt=Xo(Wt),tt=Xo(tt)}Wt=null}else Wt=null;lt!==null&&u1(pt,at,lt,Wt,!1),te!==null&&di!==null&&u1(pt,di,te,Wt,!0)}}t:{if(at=rt?Oi(rt):window,lt=at.nodeName&&at.nodeName.toLowerCase(),lt==="select"||lt==="input"&&at.type==="file")var Nt=kS;else if(wS(at))if(DS)Nt=iT;else{Nt=tT;var ve=KE}else lt=at.nodeName,!lt||lt.toLowerCase()!=="input"||at.type!=="checkbox"&&at.type!=="radio"?rt&&N0(rt.elementType)&&(Nt=kS):Nt=eT;if(Nt&&(Nt=Nt(h,rt))){CS(pt,Nt,g,yt);break t}ve&&ve(h,at,rt),h==="focusout"&&rt&&at.type==="number"&&rt.memoizedProps.value!=null&&_0(at,"number",at.value)}switch(ve=rt?Oi(rt):window,h){case"focusin":(wS(ve)||ve.contentEditable==="true")&&(vo=ve,$0=rt,tu=null);break;case"focusout":tu=$0=vo=null;break;case"mousedown":J0=!0;break;case"contextmenu":case"mouseup":case"dragend":J0=!1,IS(pt,g,yt);break;case"selectionchange":if(rT)break;case"keydown":case"keyup":IS(pt,g,yt)}var Gt;if(X0)t:{switch(h){case"compositionstart":var $t="onCompositionStart";break t;case"compositionend":$t="onCompositionEnd";break t;case"compositionupdate":$t="onCompositionUpdate";break t}$t=void 0}else Ao?ES(h,g)&&($t="onCompositionEnd"):h==="keydown"&&g.keyCode===229&&($t="onCompositionStart");$t&&(bS&&g.locale!=="ko"&&(Ao||$t!=="onCompositionStart"?$t==="onCompositionEnd"&&Ao&&(Gt=pS()):(_a=yt,U0="value"in _a?_a.value:_a.textContent,Ao=!0)),ve=Ld(rt,$t),0<ve.length&&($t=new AS($t,h,null,g,yt),pt.push({event:$t,listeners:ve}),Gt?$t.data=Gt:(Gt=TS(g),Gt!==null&&($t.data=Gt)))),(Gt=jE?$E(h,g):JE(h,g))&&($t=Ld(rt,"onBeforeInput"),0<$t.length&&(ve=new AS("onBeforeInput","beforeinput",null,g,yt),pt.push({event:ve,listeners:$t}),ve.data=Gt)),UT(pt,h,rt,g,yt)}o1(pt,c)})}function Cu(h,c,g){return{instance:h,listener:c,currentTarget:g}}function Ld(h,c){for(var g=c+"Capture",p=[];h!==null;){var M=h,D=M.stateNode;if(M=M.tag,M!==5&&M!==26&&M!==27||D===null||(M=Wl(h,g),M!=null&&p.unshift(Cu(h,M,D)),M=Wl(h,c),M!=null&&p.push(Cu(h,M,D))),h.tag===3)return p;h=h.return}return[]}function Xo(h){if(h===null)return null;do h=h.return;while(h&&h.tag!==5&&h.tag!==27);return h||null}function u1(h,c,g,p,M){for(var D=c._reactName,G=[];g!==null&&g!==p;){var q=g,Z=q.alternate,rt=q.stateNode;if(q=q.tag,Z!==null&&Z===p)break;q!==5&&q!==26&&q!==27||rt===null||(Z=rt,M?(rt=Wl(g,D),rt!=null&&G.unshift(Cu(g,rt,Z))):M||(rt=Wl(g,D),rt!=null&&G.push(Cu(g,rt,Z)))),g=g.return}G.length!==0&&h.push({event:c,listeners:G})}var HT=/\r\n?/g,XT=/\u0000|\uFFFD/g;function c1(h){return(typeof h=="string"?h:""+h).replace(HT,`
`).replace(XT,"")}function d1(h,c){return c=c1(c),c1(h)===c}function Id(){}function ci(h,c,g,p,M,D){switch(g){case"children":typeof p=="string"?c==="body"||c==="textarea"&&p===""||po(h,p):(typeof p=="number"||typeof p=="bigint")&&c!=="body"&&po(h,""+p);break;case"className":Kr(h,"class",p);break;case"tabIndex":Kr(h,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":Kr(h,g,p);break;case"style":gS(h,p,D);break;case"data":if(c!=="object"){Kr(h,"data",p);break}case"src":case"href":if(p===""&&(c!=="a"||g!=="href")){h.removeAttribute(g);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){h.removeAttribute(g);break}p=Wc(""+p),h.setAttribute(g,p);break;case"action":case"formAction":if(typeof p=="function"){h.setAttribute(g,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof D=="function"&&(g==="formAction"?(c!=="input"&&ci(h,c,"name",M.name,M,null),ci(h,c,"formEncType",M.formEncType,M,null),ci(h,c,"formMethod",M.formMethod,M,null),ci(h,c,"formTarget",M.formTarget,M,null)):(ci(h,c,"encType",M.encType,M,null),ci(h,c,"method",M.method,M,null),ci(h,c,"target",M.target,M,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){h.removeAttribute(g);break}p=Wc(""+p),h.setAttribute(g,p);break;case"onClick":p!=null&&(h.onclick=Id);break;case"onScroll":p!=null&&Ce("scroll",h);break;case"onScrollEnd":p!=null&&Ce("scrollend",h);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(i(61));if(g=p.__html,g!=null){if(M.children!=null)throw Error(i(60));h.innerHTML=g}}break;case"multiple":h.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":h.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){h.removeAttribute("xlink:href");break}g=Wc(""+p),h.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",g);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?h.setAttribute(g,""+p):h.removeAttribute(g);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?h.setAttribute(g,""):h.removeAttribute(g);break;case"capture":case"download":p===!0?h.setAttribute(g,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?h.setAttribute(g,p):h.removeAttribute(g);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?h.setAttribute(g,p):h.removeAttribute(g);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?h.removeAttribute(g):h.setAttribute(g,p);break;case"popover":Ce("beforetoggle",h),Ce("toggle",h),Qr(h,"popover",p);break;case"xlinkActuate":Ae(h,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":Ae(h,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":Ae(h,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":Ae(h,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":Ae(h,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":Ae(h,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":Ae(h,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":Ae(h,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":Ae(h,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":Qr(h,"is",p);break;case"innerText":case"textContent":break;default:(!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(g=vE.get(g)||g,Qr(h,g,p))}}function xy(h,c,g,p,M,D){switch(g){case"style":gS(h,p,D);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(i(61));if(g=p.__html,g!=null){if(M.children!=null)throw Error(i(60));h.innerHTML=g}}break;case"children":typeof p=="string"?po(h,p):(typeof p=="number"||typeof p=="bigint")&&po(h,""+p);break;case"onScroll":p!=null&&Ce("scroll",h);break;case"onScrollEnd":p!=null&&Ce("scrollend",h);break;case"onClick":p!=null&&(h.onclick=Id);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!zi.hasOwnProperty(g))t:{if(g[0]==="o"&&g[1]==="n"&&(M=g.endsWith("Capture"),c=g.slice(2,M?g.length-7:void 0),D=h[Zt]||null,D=D!=null?D[g]:null,typeof D=="function"&&h.removeEventListener(c,D,M),typeof p=="function")){typeof D!="function"&&D!==null&&(g in h?h[g]=null:h.hasAttribute(g)&&h.removeAttribute(g)),h.addEventListener(c,p,M);break t}g in h?h[g]=p:p===!0?h.setAttribute(g,""):Qr(h,g,p)}}}function zs(h,c,g){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ce("error",h),Ce("load",h);var p=!1,M=!1,D;for(D in g)if(g.hasOwnProperty(D)){var G=g[D];if(G!=null)switch(D){case"src":p=!0;break;case"srcSet":M=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,c));default:ci(h,c,D,G,g,null)}}M&&ci(h,c,"srcSet",g.srcSet,g,null),p&&ci(h,c,"src",g.src,g,null);return;case"input":Ce("invalid",h);var q=D=G=M=null,Z=null,rt=null;for(p in g)if(g.hasOwnProperty(p)){var yt=g[p];if(yt!=null)switch(p){case"name":M=yt;break;case"type":G=yt;break;case"checked":Z=yt;break;case"defaultChecked":rt=yt;break;case"value":D=yt;break;case"defaultValue":q=yt;break;case"children":case"dangerouslySetInnerHTML":if(yt!=null)throw Error(i(137,c));break;default:ci(h,c,p,yt,g,null)}}uS(h,D,q,Z,rt,G,M,!1),Hc(h);return;case"select":Ce("invalid",h),p=G=D=null;for(M in g)if(g.hasOwnProperty(M)&&(q=g[M],q!=null))switch(M){case"value":D=q;break;case"defaultValue":G=q;break;case"multiple":p=q;default:ci(h,c,M,q,g,null)}c=D,g=G,h.multiple=!!p,c!=null?mo(h,!!p,c,!1):g!=null&&mo(h,!!p,g,!0);return;case"textarea":Ce("invalid",h),D=M=p=null;for(G in g)if(g.hasOwnProperty(G)&&(q=g[G],q!=null))switch(G){case"value":p=q;break;case"defaultValue":M=q;break;case"children":D=q;break;case"dangerouslySetInnerHTML":if(q!=null)throw Error(i(91));break;default:ci(h,c,G,q,g,null)}dS(h,p,M,D),Hc(h);return;case"option":for(Z in g)if(g.hasOwnProperty(Z)&&(p=g[Z],p!=null))switch(Z){case"selected":h.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:ci(h,c,Z,p,g,null)}return;case"dialog":Ce("beforetoggle",h),Ce("toggle",h),Ce("cancel",h),Ce("close",h);break;case"iframe":case"object":Ce("load",h);break;case"video":case"audio":for(p=0;p<wu.length;p++)Ce(wu[p],h);break;case"image":Ce("error",h),Ce("load",h);break;case"details":Ce("toggle",h);break;case"embed":case"source":case"link":Ce("error",h),Ce("load",h);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(rt in g)if(g.hasOwnProperty(rt)&&(p=g[rt],p!=null))switch(rt){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,c));default:ci(h,c,rt,p,g,null)}return;default:if(N0(c)){for(yt in g)g.hasOwnProperty(yt)&&(p=g[yt],p!==void 0&&xy(h,c,yt,p,g,void 0));return}}for(q in g)g.hasOwnProperty(q)&&(p=g[q],p!=null&&ci(h,c,q,p,g,null))}function WT(h,c,g,p){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var M=null,D=null,G=null,q=null,Z=null,rt=null,yt=null;for(lt in g){var pt=g[lt];if(g.hasOwnProperty(lt)&&pt!=null)switch(lt){case"checked":break;case"value":break;case"defaultValue":Z=pt;default:p.hasOwnProperty(lt)||ci(h,c,lt,null,p,pt)}}for(var at in p){var lt=p[at];if(pt=g[at],p.hasOwnProperty(at)&&(lt!=null||pt!=null))switch(at){case"type":D=lt;break;case"name":M=lt;break;case"checked":rt=lt;break;case"defaultChecked":yt=lt;break;case"value":G=lt;break;case"defaultValue":q=lt;break;case"children":case"dangerouslySetInnerHTML":if(lt!=null)throw Error(i(137,c));break;default:lt!==pt&&ci(h,c,at,lt,p,pt)}}z0(h,G,q,Z,rt,yt,D,M);return;case"select":lt=G=q=at=null;for(D in g)if(Z=g[D],g.hasOwnProperty(D)&&Z!=null)switch(D){case"value":break;case"multiple":lt=Z;default:p.hasOwnProperty(D)||ci(h,c,D,null,p,Z)}for(M in p)if(D=p[M],Z=g[M],p.hasOwnProperty(M)&&(D!=null||Z!=null))switch(M){case"value":at=D;break;case"defaultValue":q=D;break;case"multiple":G=D;default:D!==Z&&ci(h,c,M,D,p,Z)}c=q,g=G,p=lt,at!=null?mo(h,!!g,at,!1):!!p!=!!g&&(c!=null?mo(h,!!g,c,!0):mo(h,!!g,g?[]:"",!1));return;case"textarea":lt=at=null;for(q in g)if(M=g[q],g.hasOwnProperty(q)&&M!=null&&!p.hasOwnProperty(q))switch(q){case"value":break;case"children":break;default:ci(h,c,q,null,p,M)}for(G in p)if(M=p[G],D=g[G],p.hasOwnProperty(G)&&(M!=null||D!=null))switch(G){case"value":at=M;break;case"defaultValue":lt=M;break;case"children":break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(i(91));break;default:M!==D&&ci(h,c,G,M,p,D)}cS(h,at,lt);return;case"option":for(var te in g)if(at=g[te],g.hasOwnProperty(te)&&at!=null&&!p.hasOwnProperty(te))switch(te){case"selected":h.selected=!1;break;default:ci(h,c,te,null,p,at)}for(Z in p)if(at=p[Z],lt=g[Z],p.hasOwnProperty(Z)&&at!==lt&&(at!=null||lt!=null))switch(Z){case"selected":h.selected=at&&typeof at!="function"&&typeof at!="symbol";break;default:ci(h,c,Z,at,p,lt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Wt in g)at=g[Wt],g.hasOwnProperty(Wt)&&at!=null&&!p.hasOwnProperty(Wt)&&ci(h,c,Wt,null,p,at);for(rt in p)if(at=p[rt],lt=g[rt],p.hasOwnProperty(rt)&&at!==lt&&(at!=null||lt!=null))switch(rt){case"children":case"dangerouslySetInnerHTML":if(at!=null)throw Error(i(137,c));break;default:ci(h,c,rt,at,p,lt)}return;default:if(N0(c)){for(var di in g)at=g[di],g.hasOwnProperty(di)&&at!==void 0&&!p.hasOwnProperty(di)&&xy(h,c,di,void 0,p,at);for(yt in p)at=p[yt],lt=g[yt],!p.hasOwnProperty(yt)||at===lt||at===void 0&&lt===void 0||xy(h,c,yt,at,p,lt);return}}for(var tt in g)at=g[tt],g.hasOwnProperty(tt)&&at!=null&&!p.hasOwnProperty(tt)&&ci(h,c,tt,null,p,at);for(pt in p)at=p[pt],lt=g[pt],!p.hasOwnProperty(pt)||at===lt||at==null&&lt==null||ci(h,c,pt,at,p,lt)}var Ay=null,vy=null;function Pd(h){return h.nodeType===9?h:h.ownerDocument}function f1(h){switch(h){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function g1(h,c){if(h===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return h===1&&c==="foreignObject"?0:h}function by(h,c){return h==="textarea"||h==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var My=null;function qT(){var h=window.event;return h&&h.type==="popstate"?h===My?!1:(My=h,!0):(My=null,!1)}var y1=typeof setTimeout=="function"?setTimeout:void 0,jT=typeof clearTimeout=="function"?clearTimeout:void 0,m1=typeof Promise=="function"?Promise:void 0,$T=typeof queueMicrotask=="function"?queueMicrotask:typeof m1<"u"?function(h){return m1.resolve(null).then(h).catch(JT)}:y1;function JT(h){setTimeout(function(){throw h})}function Ja(h){return h==="head"}function p1(h,c){var g=c,p=0,M=0;do{var D=g.nextSibling;if(h.removeChild(g),D&&D.nodeType===8)if(g=D.data,g==="/$"){if(0<p&&8>p){g=p;var G=h.ownerDocument;if(g&1&&ku(G.documentElement),g&2&&ku(G.body),g&4)for(g=G.head,ku(g),G=g.firstChild;G;){var q=G.nextSibling,Z=G.nodeName;G[Fe]||Z==="SCRIPT"||Z==="STYLE"||Z==="LINK"&&G.rel.toLowerCase()==="stylesheet"||g.removeChild(G),G=q}}if(M===0){h.removeChild(D),Lu(c);return}M--}else g==="$"||g==="$?"||g==="$!"?M++:p=g.charCodeAt(0)-48;else p=0;g=D}while(g);Lu(c)}function Ry(h){var c=h.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var g=c;switch(c=c.nextSibling,g.nodeName){case"HTML":case"HEAD":case"BODY":Ry(g),Ui(g);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(g.rel.toLowerCase()==="stylesheet")continue}h.removeChild(g)}}function ZT(h,c,g,p){for(;h.nodeType===1;){var M=g;if(h.nodeName.toLowerCase()!==c.toLowerCase()){if(!p&&(h.nodeName!=="INPUT"||h.type!=="hidden"))break}else if(p){if(!h[Fe])switch(c){case"meta":if(!h.hasAttribute("itemprop"))break;return h;case"link":if(D=h.getAttribute("rel"),D==="stylesheet"&&h.hasAttribute("data-precedence"))break;if(D!==M.rel||h.getAttribute("href")!==(M.href==null||M.href===""?null:M.href)||h.getAttribute("crossorigin")!==(M.crossOrigin==null?null:M.crossOrigin)||h.getAttribute("title")!==(M.title==null?null:M.title))break;return h;case"style":if(h.hasAttribute("data-precedence"))break;return h;case"script":if(D=h.getAttribute("src"),(D!==(M.src==null?null:M.src)||h.getAttribute("type")!==(M.type==null?null:M.type)||h.getAttribute("crossorigin")!==(M.crossOrigin==null?null:M.crossOrigin))&&D&&h.hasAttribute("async")&&!h.hasAttribute("itemprop"))break;return h;default:return h}}else if(c==="input"&&h.type==="hidden"){var D=M.name==null?null:""+M.name;if(M.type==="hidden"&&h.getAttribute("name")===D)return h}else return h;if(h=bn(h.nextSibling),h===null)break}return null}function QT(h,c,g){if(c==="")return null;for(;h.nodeType!==3;)if((h.nodeType!==1||h.nodeName!=="INPUT"||h.type!=="hidden")&&!g||(h=bn(h.nextSibling),h===null))return null;return h}function Ey(h){return h.data==="$!"||h.data==="$?"&&h.ownerDocument.readyState==="complete"}function KT(h,c){var g=h.ownerDocument;if(h.data!=="$?"||g.readyState==="complete")c();else{var p=function(){c(),g.removeEventListener("DOMContentLoaded",p)};g.addEventListener("DOMContentLoaded",p),h._reactRetry=p}}function bn(h){for(;h!=null;h=h.nextSibling){var c=h.nodeType;if(c===1||c===3)break;if(c===8){if(c=h.data,c==="$"||c==="$!"||c==="$?"||c==="F!"||c==="F")break;if(c==="/$")return null}}return h}var Ty=null;function S1(h){h=h.previousSibling;for(var c=0;h;){if(h.nodeType===8){var g=h.data;if(g==="$"||g==="$!"||g==="$?"){if(c===0)return h;c--}else g==="/$"&&c++}h=h.previousSibling}return null}function x1(h,c,g){switch(c=Pd(g),h){case"html":if(h=c.documentElement,!h)throw Error(i(452));return h;case"head":if(h=c.head,!h)throw Error(i(453));return h;case"body":if(h=c.body,!h)throw Error(i(454));return h;default:throw Error(i(451))}}function ku(h){for(var c=h.attributes;c.length;)h.removeAttributeNode(c[0]);Ui(h)}var ln=new Map,A1=new Set;function Ud(h){return typeof h.getRootNode=="function"?h.getRootNode():h.nodeType===9?h:h.ownerDocument}var pa=U.d;U.d={f:tw,r:ew,D:iw,C:sw,L:rw,m:nw,X:hw,S:aw,M:ow};function tw(){var h=pa.f(),c=Fd();return h||c}function ew(h){var c=ss(h);c!==null&&c.tag===5&&c.type==="form"?Ux(c):pa.r(h)}var Wo=typeof document>"u"?null:document;function v1(h,c,g){var p=Wo;if(p&&typeof c=="string"&&c){var M=en(c);M='link[rel="'+h+'"][href="'+M+'"]',typeof g=="string"&&(M+='[crossorigin="'+g+'"]'),A1.has(M)||(A1.add(M),h={rel:h,crossOrigin:g,href:c},p.querySelector(M)===null&&(c=p.createElement("link"),zs(c,"link",h),Ht(c),p.head.appendChild(c)))}}function iw(h){pa.D(h),v1("dns-prefetch",h,null)}function sw(h,c){pa.C(h,c),v1("preconnect",h,c)}function rw(h,c,g){pa.L(h,c,g);var p=Wo;if(p&&h&&c){var M='link[rel="preload"][as="'+en(c)+'"]';c==="image"&&g&&g.imageSrcSet?(M+='[imagesrcset="'+en(g.imageSrcSet)+'"]',typeof g.imageSizes=="string"&&(M+='[imagesizes="'+en(g.imageSizes)+'"]')):M+='[href="'+en(h)+'"]';var D=M;switch(c){case"style":D=qo(h);break;case"script":D=jo(h)}ln.has(D)||(h=d({rel:"preload",href:c==="image"&&g&&g.imageSrcSet?void 0:h,as:c},g),ln.set(D,h),p.querySelector(M)!==null||c==="style"&&p.querySelector(Du(D))||c==="script"&&p.querySelector(Fu(D))||(c=p.createElement("link"),zs(c,"link",h),Ht(c),p.head.appendChild(c)))}}function nw(h,c){pa.m(h,c);var g=Wo;if(g&&h){var p=c&&typeof c.as=="string"?c.as:"script",M='link[rel="modulepreload"][as="'+en(p)+'"][href="'+en(h)+'"]',D=M;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":D=jo(h)}if(!ln.has(D)&&(h=d({rel:"modulepreload",href:h},c),ln.set(D,h),g.querySelector(M)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(g.querySelector(Fu(D)))return}p=g.createElement("link"),zs(p,"link",h),Ht(p),g.head.appendChild(p)}}}function aw(h,c,g){pa.S(h,c,g);var p=Wo;if(p&&h){var M=vt(p).hoistableStyles,D=qo(h);c=c||"default";var G=M.get(D);if(!G){var q={loading:0,preload:null};if(G=p.querySelector(Du(D)))q.loading=5;else{h=d({rel:"stylesheet",href:h,"data-precedence":c},g),(g=ln.get(D))&&wy(h,g);var Z=G=p.createElement("link");Ht(Z),zs(Z,"link",h),Z._p=new Promise(function(rt,yt){Z.onload=rt,Z.onerror=yt}),Z.addEventListener("load",function(){q.loading|=1}),Z.addEventListener("error",function(){q.loading|=2}),q.loading|=4,Od(G,c,p)}G={type:"stylesheet",instance:G,count:1,state:q},M.set(D,G)}}}function hw(h,c){pa.X(h,c);var g=Wo;if(g&&h){var p=vt(g).hoistableScripts,M=jo(h),D=p.get(M);D||(D=g.querySelector(Fu(M)),D||(h=d({src:h,async:!0},c),(c=ln.get(M))&&Cy(h,c),D=g.createElement("script"),Ht(D),zs(D,"link",h),g.head.appendChild(D)),D={type:"script",instance:D,count:1,state:null},p.set(M,D))}}function ow(h,c){pa.M(h,c);var g=Wo;if(g&&h){var p=vt(g).hoistableScripts,M=jo(h),D=p.get(M);D||(D=g.querySelector(Fu(M)),D||(h=d({src:h,async:!0,type:"module"},c),(c=ln.get(M))&&Cy(h,c),D=g.createElement("script"),Ht(D),zs(D,"link",h),g.head.appendChild(D)),D={type:"script",instance:D,count:1,state:null},p.set(M,D))}}function b1(h,c,g,p){var M=(M=ot.current)?Ud(M):null;if(!M)throw Error(i(446));switch(h){case"meta":case"title":return null;case"style":return typeof g.precedence=="string"&&typeof g.href=="string"?(c=qo(g.href),g=vt(M).hoistableStyles,p=g.get(c),p||(p={type:"style",instance:null,count:0,state:null},g.set(c,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(g.rel==="stylesheet"&&typeof g.href=="string"&&typeof g.precedence=="string"){h=qo(g.href);var D=vt(M).hoistableStyles,G=D.get(h);if(G||(M=M.ownerDocument||M,G={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},D.set(h,G),(D=M.querySelector(Du(h)))&&!D._p&&(G.instance=D,G.state.loading=5),ln.has(h)||(g={rel:"preload",as:"style",href:g.href,crossOrigin:g.crossOrigin,integrity:g.integrity,media:g.media,hrefLang:g.hrefLang,referrerPolicy:g.referrerPolicy},ln.set(h,g),D||lw(M,h,g,G.state))),c&&p===null)throw Error(i(528,""));return G}if(c&&p!==null)throw Error(i(529,""));return null;case"script":return c=g.async,g=g.src,typeof g=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=jo(g),g=vt(M).hoistableScripts,p=g.get(c),p||(p={type:"script",instance:null,count:0,state:null},g.set(c,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,h))}}function qo(h){return'href="'+en(h)+'"'}function Du(h){return'link[rel="stylesheet"]['+h+"]"}function M1(h){return d({},h,{"data-precedence":h.precedence,precedence:null})}function lw(h,c,g,p){h.querySelector('link[rel="preload"][as="style"]['+c+"]")?p.loading=1:(c=h.createElement("link"),p.preload=c,c.addEventListener("load",function(){return p.loading|=1}),c.addEventListener("error",function(){return p.loading|=2}),zs(c,"link",g),Ht(c),h.head.appendChild(c))}function jo(h){return'[src="'+en(h)+'"]'}function Fu(h){return"script[async]"+h}function R1(h,c,g){if(c.count++,c.instance===null)switch(c.type){case"style":var p=h.querySelector('style[data-href~="'+en(g.href)+'"]');if(p)return c.instance=p,Ht(p),p;var M=d({},g,{"data-href":g.href,"data-precedence":g.precedence,href:null,precedence:null});return p=(h.ownerDocument||h).createElement("style"),Ht(p),zs(p,"style",M),Od(p,g.precedence,h),c.instance=p;case"stylesheet":M=qo(g.href);var D=h.querySelector(Du(M));if(D)return c.state.loading|=4,c.instance=D,Ht(D),D;p=M1(g),(M=ln.get(M))&&wy(p,M),D=(h.ownerDocument||h).createElement("link"),Ht(D);var G=D;return G._p=new Promise(function(q,Z){G.onload=q,G.onerror=Z}),zs(D,"link",p),c.state.loading|=4,Od(D,g.precedence,h),c.instance=D;case"script":return D=jo(g.src),(M=h.querySelector(Fu(D)))?(c.instance=M,Ht(M),M):(p=g,(M=ln.get(D))&&(p=d({},g),Cy(p,M)),h=h.ownerDocument||h,M=h.createElement("script"),Ht(M),zs(M,"link",p),h.head.appendChild(M),c.instance=M);case"void":return null;default:throw Error(i(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(p=c.instance,c.state.loading|=4,Od(p,g.precedence,h));return c.instance}function Od(h,c,g){for(var p=g.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),M=p.length?p[p.length-1]:null,D=M,G=0;G<p.length;G++){var q=p[G];if(q.dataset.precedence===c)D=q;else if(D!==M)break}D?D.parentNode.insertBefore(h,D.nextSibling):(c=g.nodeType===9?g.head:g,c.insertBefore(h,c.firstChild))}function wy(h,c){h.crossOrigin==null&&(h.crossOrigin=c.crossOrigin),h.referrerPolicy==null&&(h.referrerPolicy=c.referrerPolicy),h.title==null&&(h.title=c.title)}function Cy(h,c){h.crossOrigin==null&&(h.crossOrigin=c.crossOrigin),h.referrerPolicy==null&&(h.referrerPolicy=c.referrerPolicy),h.integrity==null&&(h.integrity=c.integrity)}var Gd=null;function E1(h,c,g){if(Gd===null){var p=new Map,M=Gd=new Map;M.set(g,p)}else M=Gd,p=M.get(g),p||(p=new Map,M.set(g,p));if(p.has(h))return p;for(p.set(h,null),g=g.getElementsByTagName(h),M=0;M<g.length;M++){var D=g[M];if(!(D[Fe]||D[It]||h==="link"&&D.getAttribute("rel")==="stylesheet")&&D.namespaceURI!=="http://www.w3.org/2000/svg"){var G=D.getAttribute(c)||"";G=h+G;var q=p.get(G);q?q.push(D):p.set(G,[D])}}return p}function T1(h,c,g){h=h.ownerDocument||h,h.head.insertBefore(g,c==="title"?h.querySelector("head > title"):null)}function uw(h,c,g){if(g===1||c.itemProp!=null)return!1;switch(h){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return h=c.disabled,typeof c.precedence=="string"&&h==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function w1(h){return!(h.type==="stylesheet"&&(h.state.loading&3)===0)}var Vu=null;function cw(){}function dw(h,c,g){if(Vu===null)throw Error(i(475));var p=Vu;if(c.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var M=qo(g.href),D=h.querySelector(Du(M));if(D){h=D._p,h!==null&&typeof h=="object"&&typeof h.then=="function"&&(p.count++,p=Yd.bind(p),h.then(p,p)),c.state.loading|=4,c.instance=D,Ht(D);return}D=h.ownerDocument||h,g=M1(g),(M=ln.get(M))&&wy(g,M),D=D.createElement("link"),Ht(D);var G=D;G._p=new Promise(function(q,Z){G.onload=q,G.onerror=Z}),zs(D,"link",g),c.instance=D}p.stylesheets===null&&(p.stylesheets=new Map),p.stylesheets.set(c,h),(h=c.state.preload)&&(c.state.loading&3)===0&&(p.count++,c=Yd.bind(p),h.addEventListener("load",c),h.addEventListener("error",c))}}function fw(){if(Vu===null)throw Error(i(475));var h=Vu;return h.stylesheets&&h.count===0&&ky(h,h.stylesheets),0<h.count?function(c){var g=setTimeout(function(){if(h.stylesheets&&ky(h,h.stylesheets),h.unsuspend){var p=h.unsuspend;h.unsuspend=null,p()}},6e4);return h.unsuspend=c,function(){h.unsuspend=null,clearTimeout(g)}}:null}function Yd(){if(this.count--,this.count===0){if(this.stylesheets)ky(this,this.stylesheets);else if(this.unsuspend){var h=this.unsuspend;this.unsuspend=null,h()}}}var Hd=null;function ky(h,c){h.stylesheets=null,h.unsuspend!==null&&(h.count++,Hd=new Map,c.forEach(gw,h),Hd=null,Yd.call(h))}function gw(h,c){if(!(c.state.loading&4)){var g=Hd.get(h);if(g)var p=g.get(null);else{g=new Map,Hd.set(h,g);for(var M=h.querySelectorAll("link[data-precedence],style[data-precedence]"),D=0;D<M.length;D++){var G=M[D];(G.nodeName==="LINK"||G.getAttribute("media")!=="not all")&&(g.set(G.dataset.precedence,G),p=G)}p&&g.set(null,p)}M=c.instance,G=M.getAttribute("data-precedence"),D=g.get(G)||p,D===p&&g.set(null,M),g.set(G,M),this.count++,p=Yd.bind(this),M.addEventListener("load",p),M.addEventListener("error",p),D?D.parentNode.insertBefore(M,D.nextSibling):(h=h.nodeType===9?h.head:h,h.insertBefore(M,h.firstChild)),c.state.loading|=4}}var zu={$$typeof:T,Provider:null,Consumer:null,_currentValue:O,_currentValue2:O,_threadCount:0};function yw(h,c,g,p,M,D,G,q){this.tag=1,this.containerInfo=h,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=he(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=he(0),this.hiddenUpdates=he(null),this.identifierPrefix=p,this.onUncaughtError=M,this.onCaughtError=D,this.onRecoverableError=G,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=q,this.incompleteTransitions=new Map}function C1(h,c,g,p,M,D,G,q,Z,rt,yt,pt){return h=new yw(h,c,g,G,q,Z,rt,pt),c=1,D===!0&&(c|=24),D=_r(3,null,null,c),h.current=D,D.stateNode=h,c=ug(),c.refCount++,h.pooledCache=c,c.refCount++,D.memoizedState={element:p,isDehydrated:g,cache:c},gg(D),h}function k1(h){return h?(h=Eo,h):Eo}function D1(h,c,g,p,M,D){M=k1(M),p.context===null?p.context=M:p.pendingContext=M,p=La(c),p.payload={element:g},D=D===void 0?null:D,D!==null&&(p.callback=D),g=Ia(h,p,c),g!==null&&(Pr(g,h,c),lu(g,h,c))}function F1(h,c){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var g=h.retryLane;h.retryLane=g!==0&&g<c?g:c}}function Dy(h,c){F1(h,c),(h=h.alternate)&&F1(h,c)}function V1(h){if(h.tag===13){var c=Ro(h,67108864);c!==null&&Pr(c,h,67108864),Dy(h,67108864)}}var Xd=!0;function mw(h,c,g,p){var M=N.T;N.T=null;var D=U.p;try{U.p=2,Fy(h,c,g,p)}finally{U.p=D,N.T=M}}function pw(h,c,g,p){var M=N.T;N.T=null;var D=U.p;try{U.p=8,Fy(h,c,g,p)}finally{U.p=D,N.T=M}}function Fy(h,c,g,p){if(Xd){var M=Vy(p);if(M===null)Sy(h,c,p,Wd,g),_1(h,p);else if(xw(M,h,c,g,p))p.stopPropagation();else if(_1(h,p),c&4&&-1<Sw.indexOf(h)){for(;M!==null;){var D=ss(M);if(D!==null)switch(D.tag){case 3:if(D=D.stateNode,D.current.memoizedState.isDehydrated){var G=Ut(D.pendingLanes);if(G!==0){var q=D;for(q.pendingLanes|=2,q.entangledLanes|=2;G;){var Z=1<<31-yi(G);q.entanglements[1]|=Z,G&=~Z}In(D),(ai&6)===0&&(kd=Pi()+500,Tu(0))}}break;case 13:q=Ro(D,2),q!==null&&Pr(q,D,2),Fd(),Dy(D,2)}if(D=Vy(p),D===null&&Sy(h,c,p,Wd,g),D===M)break;M=D}M!==null&&p.stopPropagation()}else Sy(h,c,p,null,g)}}function Vy(h){return h=L0(h),zy(h)}var Wd=null;function zy(h){if(Wd=null,h=Vi(h),h!==null){var c=n(h);if(c===null)h=null;else{var g=c.tag;if(g===13){if(h=a(c),h!==null)return h;h=null}else if(g===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;h=null}else c!==h&&(h=null)}}return Wd=h,null}function z1(h){switch(h){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ge()){case Re:return 2;case Zr:return 8;case Ze:case ni:return 32;case ur:return 268435456;default:return 32}default:return 32}}var _y=!1,Za=null,Qa=null,Ka=null,_u=new Map,Nu=new Map,th=[],Sw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function _1(h,c){switch(h){case"focusin":case"focusout":Za=null;break;case"dragenter":case"dragleave":Qa=null;break;case"mouseover":case"mouseout":Ka=null;break;case"pointerover":case"pointerout":_u.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nu.delete(c.pointerId)}}function Bu(h,c,g,p,M,D){return h===null||h.nativeEvent!==D?(h={blockedOn:c,domEventName:g,eventSystemFlags:p,nativeEvent:D,targetContainers:[M]},c!==null&&(c=ss(c),c!==null&&V1(c)),h):(h.eventSystemFlags|=p,c=h.targetContainers,M!==null&&c.indexOf(M)===-1&&c.push(M),h)}function xw(h,c,g,p,M){switch(c){case"focusin":return Za=Bu(Za,h,c,g,p,M),!0;case"dragenter":return Qa=Bu(Qa,h,c,g,p,M),!0;case"mouseover":return Ka=Bu(Ka,h,c,g,p,M),!0;case"pointerover":var D=M.pointerId;return _u.set(D,Bu(_u.get(D)||null,h,c,g,p,M)),!0;case"gotpointercapture":return D=M.pointerId,Nu.set(D,Bu(Nu.get(D)||null,h,c,g,p,M)),!0}return!1}function N1(h){var c=Vi(h.target);if(c!==null){var g=n(c);if(g!==null){if(c=g.tag,c===13){if(c=a(g),c!==null){h.blockedOn=c,si(h.priority,function(){if(g.tag===13){var p=Ir();p=Te(p);var M=Ro(g,p);M!==null&&Pr(M,g,p),Dy(g,p)}});return}}else if(c===3&&g.stateNode.current.memoizedState.isDehydrated){h.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}h.blockedOn=null}function qd(h){if(h.blockedOn!==null)return!1;for(var c=h.targetContainers;0<c.length;){var g=Vy(h.nativeEvent);if(g===null){g=h.nativeEvent;var p=new g.constructor(g.type,g);B0=p,g.target.dispatchEvent(p),B0=null}else return c=ss(g),c!==null&&V1(c),h.blockedOn=g,!1;c.shift()}return!0}function B1(h,c,g){qd(h)&&g.delete(c)}function Aw(){_y=!1,Za!==null&&qd(Za)&&(Za=null),Qa!==null&&qd(Qa)&&(Qa=null),Ka!==null&&qd(Ka)&&(Ka=null),_u.forEach(B1),Nu.forEach(B1)}function jd(h,c){h.blockedOn===c&&(h.blockedOn=null,_y||(_y=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Aw)))}var $d=null;function L1(h){$d!==h&&($d=h,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){$d===h&&($d=null);for(var c=0;c<h.length;c+=3){var g=h[c],p=h[c+1],M=h[c+2];if(typeof p!="function"){if(zy(p||g)===null)continue;break}var D=ss(g);D!==null&&(h.splice(c,3),c-=3,zg(D,{pending:!0,data:M,method:g.method,action:p},p,M))}}))}function Lu(h){function c(Z){return jd(Z,h)}Za!==null&&jd(Za,h),Qa!==null&&jd(Qa,h),Ka!==null&&jd(Ka,h),_u.forEach(c),Nu.forEach(c);for(var g=0;g<th.length;g++){var p=th[g];p.blockedOn===h&&(p.blockedOn=null)}for(;0<th.length&&(g=th[0],g.blockedOn===null);)N1(g),g.blockedOn===null&&th.shift();if(g=(h.ownerDocument||h).$$reactFormReplay,g!=null)for(p=0;p<g.length;p+=3){var M=g[p],D=g[p+1],G=M[Zt]||null;if(typeof D=="function")G||L1(g);else if(G){var q=null;if(D&&D.hasAttribute("formAction")){if(M=D,G=D[Zt]||null)q=G.formAction;else if(zy(M)!==null)continue}else q=G.action;typeof q=="function"?g[p+1]=q:(g.splice(p,3),p-=3),L1(g)}}}function Ny(h){this._internalRoot=h}Jd.prototype.render=Ny.prototype.render=function(h){var c=this._internalRoot;if(c===null)throw Error(i(409));var g=c.current,p=Ir();D1(g,p,h,c,null,null)},Jd.prototype.unmount=Ny.prototype.unmount=function(){var h=this._internalRoot;if(h!==null){this._internalRoot=null;var c=h.containerInfo;D1(h.current,2,null,h,null,null),Fd(),c[ks]=null}};function Jd(h){this._internalRoot=h}Jd.prototype.unstable_scheduleHydration=function(h){if(h){var c=mi();h={blockedOn:null,target:h,priority:c};for(var g=0;g<th.length&&c!==0&&c<th[g].priority;g++);th.splice(g,0,h),g===0&&N1(h)}};var I1=t.version;if(I1!=="19.1.0")throw Error(i(527,I1,"19.1.0"));U.findDOMNode=function(h){var c=h._reactInternals;if(c===void 0)throw typeof h.render=="function"?Error(i(188)):(h=Object.keys(h).join(","),Error(i(268,h)));return h=l(c),h=h!==null?u(h):null,h=h===null?null:h.stateNode,h};var vw={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:N,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zd.isDisabled&&Zd.supportsFiber)try{Ai=Zd.inject(vw),fe=Zd}catch{}}return Pu.createRoot=function(h,c){if(!s(h))throw Error(i(299));var g=!1,p="",M=tA,D=eA,G=iA,q=null;return c!=null&&(c.unstable_strictMode===!0&&(g=!0),c.identifierPrefix!==void 0&&(p=c.identifierPrefix),c.onUncaughtError!==void 0&&(M=c.onUncaughtError),c.onCaughtError!==void 0&&(D=c.onCaughtError),c.onRecoverableError!==void 0&&(G=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(q=c.unstable_transitionCallbacks)),c=C1(h,1,!1,null,null,g,p,M,D,G,q,null),h[ks]=c.current,py(h),new Ny(c)},Pu.hydrateRoot=function(h,c,g){if(!s(h))throw Error(i(299));var p=!1,M="",D=tA,G=eA,q=iA,Z=null,rt=null;return g!=null&&(g.unstable_strictMode===!0&&(p=!0),g.identifierPrefix!==void 0&&(M=g.identifierPrefix),g.onUncaughtError!==void 0&&(D=g.onUncaughtError),g.onCaughtError!==void 0&&(G=g.onCaughtError),g.onRecoverableError!==void 0&&(q=g.onRecoverableError),g.unstable_transitionCallbacks!==void 0&&(Z=g.unstable_transitionCallbacks),g.formState!==void 0&&(rt=g.formState)),c=C1(h,1,!0,c,g??null,p,M,D,G,q,Z,rt),c.context=k1(null),g=c.current,p=Ir(),p=Te(p),M=La(p),M.callback=null,Ia(g,M,p),g=p,c.current.lanes=g,de(c,g),In(c),h[ks]=c.current,py(h),new Jd(c)},Pu.version="19.1.0",Pu}var j1;function Vw(){if(j1)return Iy.exports;j1=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Iy.exports=Fw(),Iy.exports}var zw=Vw(),Sc="delete",Ei=5,fn=1<<Ei,Qs=fn-1,ze={};function pm(){return{value:!1}}function gn(r){r&&(r.value=!0)}function jm(){}function ul(r){return r.size===void 0&&(r.size=r.__iterate(p2)),r.size}function mh(r,t){if(typeof t!="number"){var e=t>>>0;if(""+e!==t||e===4294967295)return NaN;t=e}return t<0?ul(r)+t:t}function p2(){return!0}function e0(r,t,e){return(r===0&&!x2(r)||e!==void 0&&r<=-e)&&(t===void 0||e!==void 0&&t>=e)}function xc(r,t){return S2(r,t,0)}function i0(r,t){return S2(r,t,t)}function S2(r,t,e){return r===void 0?e:x2(r)?t===1/0?t:Math.max(0,t+r)|0:t===void 0||t===r?r:Math.min(t,r)|0}function x2(r){return r<0||r===0&&1/r===-1/0}var A2="@@__IMMUTABLE_ITERABLE__@@";function Tr(r){return!!(r&&r[A2])}var v2="@@__IMMUTABLE_KEYED__@@";function Di(r){return!!(r&&r[v2])}var b2="@@__IMMUTABLE_INDEXED__@@";function br(r){return!!(r&&r[b2])}function s0(r){return Di(r)||br(r)}var ts=function(t){return Tr(t)?t:jr(t)},Sn=function(r){function t(e){return Di(e)?e:vh(e)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t}(ts),oo=function(r){function t(e){return br(e)?e:Fn(e)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t}(ts),wl=function(r){function t(e){return Tr(e)&&!s0(e)?e:Fl(e)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t}(ts);ts.Keyed=Sn;ts.Indexed=oo;ts.Set=wl;var M2="@@__IMMUTABLE_SEQ__@@";function $m(r){return!!(r&&r[M2])}var R2="@@__IMMUTABLE_RECORD__@@";function Cl(r){return!!(r&&r[R2])}function ea(r){return Tr(r)||Cl(r)}var kl="@@__IMMUTABLE_ORDERED__@@";function Tn(r){return!!(r&&r[kl])}var Ac=0,Dn=1,pn=2,Sm=typeof Symbol=="function"&&Symbol.iterator,E2="@@iterator",r0=Sm||E2,ti=function(t){this.next=t};ti.prototype.toString=function(){return"[Iterator]"};ti.KEYS=Ac;ti.VALUES=Dn;ti.ENTRIES=pn;ti.prototype.inspect=ti.prototype.toSource=function(){return this.toString()};ti.prototype[r0]=function(){return this};function Fi(r,t,e,i){var s=r===0?t:r===1?e:[t,e];return i?i.value=s:i={value:s,done:!1},i}function wr(){return{value:void 0,done:!0}}function T2(r){return Array.isArray(r)?!0:!!n0(r)}function $1(r){return r&&typeof r.next=="function"}function xm(r){var t=n0(r);return t&&t.call(r)}function n0(r){var t=r&&(Sm&&r[Sm]||r[E2]);if(typeof t=="function")return t}function _w(r){var t=n0(r);return t&&t===r.entries}function Nw(r){var t=n0(r);return t&&t===r.keys}var Dl=Object.prototype.hasOwnProperty;function w2(r){return Array.isArray(r)||typeof r=="string"?!0:r&&typeof r=="object"&&Number.isInteger(r.length)&&r.length>=0&&(r.length===0?Object.keys(r).length===1:r.hasOwnProperty(r.length-1))}var jr=function(r){function t(e){return e==null?Zm():ea(e)?e.toSeq():Lw(e)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.toSeq=function(){return this},t.prototype.toString=function(){return this.__toString("Seq {","}")},t.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},t.prototype.__iterate=function(i,s){var n=this._cache;if(n){for(var a=n.length,o=0;o!==a;){var l=n[s?a-++o:o++];if(i(l[1],l[0],this)===!1)break}return o}return this.__iterateUncached(i,s)},t.prototype.__iterator=function(i,s){var n=this._cache;if(n){var a=n.length,o=0;return new ti(function(){if(o===a)return wr();var l=n[s?a-++o:o++];return Fi(i,l[0],l[1])})}return this.__iteratorUncached(i,s)},t}(ts),vh=function(r){function t(e){return e==null?Zm().toKeyedSeq():Tr(e)?Di(e)?e.toSeq():e.fromEntrySeq():Cl(e)?e.toSeq():Qm(e)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.toKeyedSeq=function(){return this},t}(jr),Fn=function(r){function t(e){return e==null?Zm():Tr(e)?Di(e)?e.entrySeq():e.toIndexedSeq():Cl(e)?e.toSeq().entrySeq():C2(e)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.of=function(){return t(arguments)},t.prototype.toIndexedSeq=function(){return this},t.prototype.toString=function(){return this.__toString("Seq [","]")},t}(jr),Fl=function(r){function t(e){return(Tr(e)&&!s0(e)?e:Fn(e)).toSetSeq()}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.of=function(){return t(arguments)},t.prototype.toSetSeq=function(){return this},t}(jr);jr.isSeq=$m;jr.Keyed=vh;jr.Set=Fl;jr.Indexed=Fn;jr.prototype[M2]=!0;var Kh=function(r){function t(e){this._array=e,this.size=e.length}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.get=function(i,s){return this.has(i)?this._array[mh(this,i)]:s},t.prototype.__iterate=function(i,s){for(var n=this._array,a=n.length,o=0;o!==a;){var l=s?a-++o:o++;if(i(n[l],l,this)===!1)break}return o},t.prototype.__iterator=function(i,s){var n=this._array,a=n.length,o=0;return new ti(function(){if(o===a)return wr();var l=s?a-++o:o++;return Fi(i,l,n[l])})},t}(Fn),Jm=function(r){function t(e){var i=Object.keys(e).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e):[]);this._object=e,this._keys=i,this.size=i.length}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.get=function(i,s){return s!==void 0&&!this.has(i)?s:this._object[i]},t.prototype.has=function(i){return Dl.call(this._object,i)},t.prototype.__iterate=function(i,s){for(var n=this._object,a=this._keys,o=a.length,l=0;l!==o;){var u=a[s?o-++l:l++];if(i(n[u],u,this)===!1)break}return l},t.prototype.__iterator=function(i,s){var n=this._object,a=this._keys,o=a.length,l=0;return new ti(function(){if(l===o)return wr();var u=a[s?o-++l:l++];return Fi(i,u,n[u])})},t}(vh);Jm.prototype[kl]=!0;var Bw=function(r){function t(e){this._collection=e,this.size=e.length||e.size}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.__iterateUncached=function(i,s){if(s)return this.cacheResult().__iterate(i,s);var n=this._collection,a=xm(n),o=0;if($1(a))for(var l;!(l=a.next()).done&&i(l.value,o++,this)!==!1;);return o},t.prototype.__iteratorUncached=function(i,s){if(s)return this.cacheResult().__iterator(i,s);var n=this._collection,a=xm(n);if(!$1(a))return new ti(wr);var o=0;return new ti(function(){var l=a.next();return l.done?l:Fi(i,o++,l.value)})},t}(Fn),J1;function Zm(){return J1||(J1=new Kh([]))}function Qm(r){var t=Km(r);if(t)return t.fromEntrySeq();if(typeof r=="object")return new Jm(r);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+r)}function C2(r){var t=Km(r);if(t)return t;throw new TypeError("Expected Array or collection object of values: "+r)}function Lw(r){var t=Km(r);if(t)return _w(r)?t.fromEntrySeq():Nw(r)?t.toSetSeq():t;if(typeof r=="object")return new Jm(r);throw new TypeError("Expected Array or collection object of values, or keyed object: "+r)}function Km(r){return w2(r)?new Kh(r):T2(r)?new Bw(r):void 0}var k2="@@__IMMUTABLE_MAP__@@";function tp(r){return!!(r&&r[k2])}function D2(r){return tp(r)&&Tn(r)}function Z1(r){return!!(r&&typeof r.equals=="function"&&typeof r.hashCode=="function")}function Wr(r,t){if(r===t||r!==r&&t!==t)return!0;if(!r||!t)return!1;if(typeof r.valueOf=="function"&&typeof t.valueOf=="function"){if(r=r.valueOf(),t=t.valueOf(),r===t||r!==r&&t!==t)return!0;if(!r||!t)return!1}return!!(Z1(r)&&Z1(t)&&r.equals(t))}var Uu=typeof Math.imul=="function"&&Math.imul(4294967295,2)===-2?Math.imul:function(t,e){t|=0,e|=0;var i=t&65535,s=e&65535;return i*s+((t>>>16)*s+i*(e>>>16)<<16>>>0)|0};function a0(r){return r>>>1&1073741824|r&3221225471}var Iw=Object.prototype.valueOf;function Hr(r){if(r==null)return Q1(r);if(typeof r.hashCode=="function")return a0(r.hashCode(r));var t=Hw(r);if(t==null)return Q1(t);switch(typeof t){case"boolean":return t?1108378657:1108378656;case"number":return Pw(t);case"string":return t.length>Xw?Uw(t):Am(t);case"object":case"function":return Gw(t);case"symbol":return Ow(t);default:if(typeof t.toString=="function")return Am(t.toString());throw new Error("Value type "+typeof t+" cannot be hashed.")}}function Q1(r){return r===null?1108378658:1108378659}function Pw(r){if(r!==r||r===1/0)return 0;var t=r|0;for(t!==r&&(t^=r*4294967295);r>4294967295;)r/=4294967295,t^=r;return a0(t)}function Uw(r){var t=Hy[r];return t===void 0&&(t=Am(r),Yy===Ww&&(Yy=0,Hy={}),Yy++,Hy[r]=t),t}function Am(r){for(var t=0,e=0;e<r.length;e++)t=31*t+r.charCodeAt(e)|0;return a0(t)}function Ow(r){var t=ev[r];return t!==void 0||(t=F2(),ev[r]=t),t}function Gw(r){var t;if(vm&&(t=bm.get(r),t!==void 0)||(t=r[Wh],t!==void 0)||!tv&&(t=r.propertyIsEnumerable&&r.propertyIsEnumerable[Wh],t!==void 0||(t=Yw(r),t!==void 0)))return t;if(t=F2(),vm)bm.set(r,t);else{if(K1!==void 0&&K1(r)===!1)throw new Error("Non-extensible objects are not allowed as keys.");if(tv)Object.defineProperty(r,Wh,{enumerable:!1,configurable:!1,writable:!1,value:t});else if(r.propertyIsEnumerable!==void 0&&r.propertyIsEnumerable===r.constructor.prototype.propertyIsEnumerable)r.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},r.propertyIsEnumerable[Wh]=t;else if(r.nodeType!==void 0)r[Wh]=t;else throw new Error("Unable to set a non-enumerable property on object.")}return t}var K1=Object.isExtensible,tv=function(){try{return Object.defineProperty({},"@",{}),!0}catch{return!1}}();function Yw(r){if(r&&r.nodeType>0)switch(r.nodeType){case 1:return r.uniqueID;case 9:return r.documentElement&&r.documentElement.uniqueID}}function Hw(r){return r.valueOf!==Iw&&typeof r.valueOf=="function"?r.valueOf(r):r}function F2(){var r=++Gy;return Gy&1073741824&&(Gy=0),r}var vm=typeof WeakMap=="function",bm;vm&&(bm=new WeakMap);var ev=Object.create(null),Gy=0,Wh="__immutablehash__";typeof Symbol=="function"&&(Wh=Symbol(Wh));var Xw=16,Ww=255,Yy=0,Hy={},h0=function(r){function t(e,i){this._iter=e,this._useKeys=i,this.size=e.size}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.get=function(i,s){return this._iter.get(i,s)},t.prototype.has=function(i){return this._iter.has(i)},t.prototype.valueSeq=function(){return this._iter.valueSeq()},t.prototype.reverse=function(){var i=this,s=ep(this,!0);return this._useKeys||(s.valueSeq=function(){return i._iter.toSeq().reverse()}),s},t.prototype.map=function(i,s){var n=this,a=B2(this,i,s);return this._useKeys||(a.valueSeq=function(){return n._iter.toSeq().map(i,s)}),a},t.prototype.__iterate=function(i,s){var n=this;return this._iter.__iterate(function(a,o){return i(a,o,n)},s)},t.prototype.__iterator=function(i,s){return this._iter.__iterator(i,s)},t}(vh);h0.prototype[kl]=!0;var V2=function(r){function t(e){this._iter=e,this.size=e.size}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.includes=function(i){return this._iter.includes(i)},t.prototype.__iterate=function(i,s){var n=this,a=0;return s&&ul(this),this._iter.__iterate(function(o){return i(o,s?n.size-++a:a++,n)},s)},t.prototype.__iterator=function(i,s){var n=this,a=this._iter.__iterator(Dn,s),o=0;return s&&ul(this),new ti(function(){var l=a.next();return l.done?l:Fi(i,s?n.size-++o:o++,l.value,l)})},t}(Fn),z2=function(r){function t(e){this._iter=e,this.size=e.size}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.has=function(i){return this._iter.includes(i)},t.prototype.__iterate=function(i,s){var n=this;return this._iter.__iterate(function(a){return i(a,a,n)},s)},t.prototype.__iterator=function(i,s){var n=this._iter.__iterator(Dn,s);return new ti(function(){var a=n.next();return a.done?a:Fi(i,a.value,a.value,a)})},t}(Fl),_2=function(r){function t(e){this._iter=e,this.size=e.size}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.entrySeq=function(){return this._iter.toSeq()},t.prototype.__iterate=function(i,s){var n=this;return this._iter.__iterate(function(a){if(a){sv(a);var o=Tr(a);return i(o?a.get(1):a[1],o?a.get(0):a[0],n)}},s)},t.prototype.__iterator=function(i,s){var n=this._iter.__iterator(Dn,s);return new ti(function(){for(;;){var a=n.next();if(a.done)return a;var o=a.value;if(o){sv(o);var l=Tr(o);return Fi(i,l?o.get(0):o[0],l?o.get(1):o[1],a)}}})},t}(vh);V2.prototype.cacheResult=h0.prototype.cacheResult=z2.prototype.cacheResult=_2.prototype.cacheResult=rp;function N2(r){var t=ia(r);return t._iter=r,t.size=r.size,t.flip=function(){return r},t.reverse=function(){var e=r.reverse.apply(this);return e.flip=function(){return r.reverse()},e},t.has=function(e){return r.includes(e)},t.includes=function(e){return r.has(e)},t.cacheResult=rp,t.__iterateUncached=function(e,i){var s=this;return r.__iterate(function(n,a){return e(a,n,s)!==!1},i)},t.__iteratorUncached=function(e,i){if(e===pn){var s=r.__iterator(e,i);return new ti(function(){var n=s.next();if(!n.done){var a=n.value[0];n.value[0]=n.value[1],n.value[1]=a}return n})}return r.__iterator(e===Dn?Ac:Dn,i)},t}function B2(r,t,e){var i=ia(r);return i.size=r.size,i.has=function(s){return r.has(s)},i.get=function(s,n){var a=r.get(s,ze);return a===ze?n:t.call(e,a,s,r)},i.__iterateUncached=function(s,n){var a=this;return r.__iterate(function(o,l,u){return s(t.call(e,o,l,u),l,a)!==!1},n)},i.__iteratorUncached=function(s,n){var a=r.__iterator(pn,n);return new ti(function(){var o=a.next();if(o.done)return o;var l=o.value,u=l[0];return Fi(s,u,t.call(e,l[1],u,r),o)})},i}function ep(r,t){var e=this,i=ia(r);return i._iter=r,i.size=r.size,i.reverse=function(){return r},r.flip&&(i.flip=function(){var s=N2(r);return s.reverse=function(){return r.flip()},s}),i.get=function(s,n){return r.get(t?s:-1-s,n)},i.has=function(s){return r.has(t?s:-1-s)},i.includes=function(s){return r.includes(s)},i.cacheResult=rp,i.__iterate=function(s,n){var a=this,o=0;return n&&ul(r),r.__iterate(function(l,u){return s(l,t?u:n?a.size-++o:o++,a)},!n)},i.__iterator=function(s,n){var a=0;n&&ul(r);var o=r.__iterator(pn,!n);return new ti(function(){var l=o.next();if(l.done)return l;var u=l.value;return Fi(s,t?u[0]:n?e.size-++a:a++,u[1],l)})},i}function L2(r,t,e,i){var s=ia(r);return i&&(s.has=function(n){var a=r.get(n,ze);return a!==ze&&!!t.call(e,a,n,r)},s.get=function(n,a){var o=r.get(n,ze);return o!==ze&&t.call(e,o,n,r)?o:a}),s.__iterateUncached=function(n,a){var o=this,l=0;return r.__iterate(function(u,d,f){if(t.call(e,u,d,f))return l++,n(u,i?d:l-1,o)},a),l},s.__iteratorUncached=function(n,a){var o=r.__iterator(pn,a),l=0;return new ti(function(){for(;;){var u=o.next();if(u.done)return u;var d=u.value,f=d[0],y=d[1];if(t.call(e,y,f,r))return Fi(n,i?f:l++,y,u)}})},s}function qw(r,t,e){var i=zl().asMutable();return r.__iterate(function(s,n){i.update(t.call(e,s,n,r),0,function(a){return a+1})}),i.asImmutable()}function jw(r,t,e){var i=Di(r),s=(Tn(r)?Ta():zl()).asMutable();r.__iterate(function(a,o){s.update(t.call(e,a,o,r),function(l){return l=l||[],l.push(i?[o,a]:a),l})});var n=sp(r);return s.map(function(a){return Si(r,n(a))}).asImmutable()}function $w(r,t,e){var i=Di(r),s=[[],[]];r.__iterate(function(a,o){s[t.call(e,a,o,r)?1:0].push(i?[o,a]:a)});var n=sp(r);return s.map(function(a){return Si(r,n(a))})}function ip(r,t,e,i){var s=r.size;if(e0(t,e,s))return r;if(typeof s>"u"&&(t<0||e<0))return ip(r.toSeq().cacheResult(),t,e,i);var n=xc(t,s),a=i0(e,s),o=a-n,l;o===o&&(l=o<0?0:o);var u=ia(r);return u.size=l===0?l:r.size&&l||void 0,!i&&$m(r)&&l>=0&&(u.get=function(d,f){return d=mh(this,d),d>=0&&d<l?r.get(d+n,f):f}),u.__iterateUncached=function(d,f){var y=this;if(l===0)return 0;if(f)return this.cacheResult().__iterate(d,f);var m=0,S=!0,x=0;return r.__iterate(function(v,b){if(!(S&&(S=m++<n)))return x++,d(v,i?b:x-1,y)!==!1&&x!==l}),x},u.__iteratorUncached=function(d,f){if(l!==0&&f)return this.cacheResult().__iterator(d,f);if(l===0)return new ti(wr);var y=r.__iterator(d,f),m=0,S=0;return new ti(function(){for(;m++<n;)y.next();if(++S>l)return wr();var x=y.next();return i||d===Dn||x.done?x:d===Ac?Fi(d,S-1,void 0,x):Fi(d,S-1,x.value[1],x)})},u}function Jw(r,t,e){var i=ia(r);return i.__iterateUncached=function(s,n){var a=this;if(n)return this.cacheResult().__iterate(s,n);var o=0;return r.__iterate(function(l,u,d){return t.call(e,l,u,d)&&++o&&s(l,u,a)}),o},i.__iteratorUncached=function(s,n){var a=this;if(n)return this.cacheResult().__iterator(s,n);var o=r.__iterator(pn,n),l=!0;return new ti(function(){if(!l)return wr();var u=o.next();if(u.done)return u;var d=u.value,f=d[0],y=d[1];return t.call(e,y,f,a)?s===pn?u:Fi(s,f,y,u):(l=!1,wr())})},i}function I2(r,t,e,i){var s=ia(r);return s.__iterateUncached=function(n,a){var o=this;if(a)return this.cacheResult().__iterate(n,a);var l=!0,u=0;return r.__iterate(function(d,f,y){if(!(l&&(l=t.call(e,d,f,y))))return u++,n(d,i?f:u-1,o)}),u},s.__iteratorUncached=function(n,a){var o=this;if(a)return this.cacheResult().__iterator(n,a);var l=r.__iterator(pn,a),u=!0,d=0;return new ti(function(){var f,y,m;do{if(f=l.next(),f.done)return i||n===Dn?f:n===Ac?Fi(n,d++,void 0,f):Fi(n,d++,f.value[1],f);var S=f.value;y=S[0],m=S[1],u&&(u=t.call(e,m,y,o))}while(u);return n===pn?f:Fi(n,y,m,f)})},s}function Zw(r,t){var e=Di(r),i=[r].concat(t).map(function(a){return Tr(a)?e&&(a=Sn(a)):a=e?Qm(a):C2(Array.isArray(a)?a:[a]),a}).filter(function(a){return a.size!==0});if(i.length===0)return r;if(i.length===1){var s=i[0];if(s===r||e&&Di(s)||br(r)&&br(s))return s}var n=new Kh(i);return e?n=n.toKeyedSeq():br(r)||(n=n.toSetSeq()),n=n.flatten(!0),n.size=i.reduce(function(a,o){if(a!==void 0){var l=o.size;if(l!==void 0)return a+l}},0),n}function P2(r,t,e){var i=ia(r);return i.__iterateUncached=function(s,n){if(n)return this.cacheResult().__iterate(s,n);var a=0,o=!1;function l(u,d){u.__iterate(function(f,y){return(!t||d<t)&&Tr(f)?l(f,d+1):(a++,s(f,e?y:a-1,i)===!1&&(o=!0)),!o},n)}return l(r,0),a},i.__iteratorUncached=function(s,n){if(n)return this.cacheResult().__iterator(s,n);var a=r.__iterator(s,n),o=[],l=0;return new ti(function(){for(;a;){var u=a.next();if(u.done!==!1){a=o.pop();continue}var d=u.value;if(s===pn&&(d=d[1]),(!t||o.length<t)&&Tr(d))o.push(a),a=d.__iterator(s,n);else return e?u:Fi(s,l++,d,u)}return wr()})},i}function Qw(r,t,e){var i=sp(r);return r.toSeq().map(function(s,n){return i(t.call(e,s,n,r))}).flatten(!0)}function Kw(r,t){var e=ia(r);return e.size=r.size&&r.size*2-1,e.__iterateUncached=function(i,s){var n=this,a=0;return r.__iterate(function(o){return(!a||i(t,a++,n)!==!1)&&i(o,a++,n)!==!1},s),a},e.__iteratorUncached=function(i,s){var n=r.__iterator(Dn,s),a=0,o;return new ti(function(){return(!o||a%2)&&(o=n.next(),o.done)?o:a%2?Fi(i,a++,t):Fi(i,a++,o.value,o)})},e}function cl(r,t,e){t||(t=U2);var i=Di(r),s=0,n=r.toSeq().map(function(a,o){return[o,a,s++,e?e(a,o,r):a]}).valueSeq().toArray();return n.sort(function(a,o){return t(a[3],o[3])||a[2]-o[2]}).forEach(i?function(a,o){n[o].length=2}:function(a,o){n[o]=a[1]}),i?vh(n):br(r)?Fn(n):Fl(n)}function Qd(r,t,e){if(t||(t=U2),e){var i=r.toSeq().map(function(s,n){return[s,e(s,n,r)]}).reduce(function(s,n){return iv(t,s[1],n[1])?n:s});return i&&i[0]}return r.reduce(function(s,n){return iv(t,s,n)?n:s})}function iv(r,t,e){var i=r(e,t);return i===0&&e!==t&&(e==null||e!==e)||i>0}function Kd(r,t,e,i){var s=ia(r),n=new Kh(e).map(function(a){return a.size});return s.size=i?n.max():n.min(),s.__iterate=function(a,o){for(var l=this.__iterator(Dn,o),u,d=0;!(u=l.next()).done&&a(u.value,d++,this)!==!1;);return d},s.__iteratorUncached=function(a,o){var l=e.map(function(f){return f=ts(f),xm(o?f.reverse():f)}),u=0,d=!1;return new ti(function(){var f;return d||(f=l.map(function(y){return y.next()}),d=i?f.every(function(y){return y.done}):f.some(function(y){return y.done})),d?wr():Fi(a,u++,t.apply(null,f.map(function(y){return y.value})))})},s}function Si(r,t){return r===t?r:$m(r)?t:r.constructor(t)}function sv(r){if(r!==Object(r))throw new TypeError("Expected [K, V] tuple: "+r)}function sp(r){return Di(r)?Sn:br(r)?oo:wl}function ia(r){return Object.create((Di(r)?vh:br(r)?Fn:Fl).prototype)}function rp(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):jr.prototype.cacheResult.call(this)}function U2(r,t){return r===void 0&&t===void 0?0:r===void 0?1:t===void 0?-1:r>t?1:r<t?-1:0}function Hn(r,t){t=t||0;for(var e=Math.max(0,r.length-t),i=new Array(e),s=0;s<e;s++)i[s]=r[s+t];return i}function np(r,t){if(!r)throw new Error(t)}function Xr(r){np(r!==1/0,"Cannot perform this action with an infinite size.")}function O2(r){if(w2(r)&&typeof r!="string")return r;if(Tn(r))return r.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+r)}var t5=Object.prototype.toString;function e5(r){if(!r||typeof r!="object"||t5.call(r)!=="[object Object]")return!1;var t=Object.getPrototypeOf(r);if(t===null)return!0;for(var e=t,i=Object.getPrototypeOf(t);i!==null;)e=i,i=Object.getPrototypeOf(e);return e===t}function ph(r){return typeof r=="object"&&(ea(r)||Array.isArray(r)||e5(r))}function rc(r){try{return typeof r=="string"?JSON.stringify(r):String(r)}catch{return JSON.stringify(r)}}function i5(r,t){return ea(r)?r.has(t):ph(r)&&Dl.call(r,t)}function G2(r,t,e){return ea(r)?r.get(t,e):i5(r,t)?typeof r.get=="function"?r.get(t):r[t]:e}function kf(r){if(Array.isArray(r))return Hn(r);var t={};for(var e in r)Dl.call(r,e)&&(t[e]=r[e]);return t}function s5(r,t){if(!ph(r))throw new TypeError("Cannot update non-data-structure value: "+r);if(ea(r)){if(!r.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+r);return r.remove(t)}if(!Dl.call(r,t))return r;var e=kf(r);return Array.isArray(e)?e.splice(t,1):delete e[t],e}function r5(r,t,e){if(!ph(r))throw new TypeError("Cannot update non-data-structure value: "+r);if(ea(r)){if(!r.set)throw new TypeError("Cannot update immutable value without .set() method: "+r);return r.set(t,e)}if(Dl.call(r,t)&&e===r[t])return r;var i=kf(r);return i[t]=e,i}function Vl(r,t,e,i){i||(i=e,e=void 0);var s=Y2(ea(r),r,O2(t),0,e,i);return s===ze?e:s}function Y2(r,t,e,i,s,n){var a=t===ze;if(i===e.length){var o=a?s:t,l=n(o);return l===o?t:l}if(!a&&!ph(t))throw new TypeError("Cannot update within non-data-structure value in path ["+e.slice(0,i).map(rc)+"]: "+t);var u=e[i],d=a?ze:G2(t,u,ze),f=Y2(d===ze?r:ea(d),d,e,i+1,s,n);return f===d?t:f===ze?s5(t,u):r5(a?r?En():{}:t,u,f)}function n5(r,t,e){return Vl(r,t,ze,function(){return e})}function ap(r,t){return n5(this,r,t)}function a5(r,t){return Vl(r,t,function(){return ze})}function hp(r){return a5(this,r)}function H2(r,t,e,i){return Vl(r,[t],e,i)}function op(r,t,e){return arguments.length===1?r(this):H2(this,r,t,e)}function lp(r,t,e){return Vl(this,r,t,e)}function X2(){for(var r=[],t=arguments.length;t--;)r[t]=arguments[t];return q2(this,r)}function W2(r){for(var t=[],e=arguments.length-1;e-- >0;)t[e]=arguments[e+1];if(typeof r!="function")throw new TypeError("Invalid merger function: "+r);return q2(this,t,r)}function q2(r,t,e){for(var i=[],s=0;s<t.length;s++){var n=Sn(t[s]);n.size!==0&&i.push(n)}return i.length===0?r:r.toSeq().size===0&&!r.__ownerID&&i.length===1?r.constructor(i[0]):r.withMutations(function(a){for(var o=e?function(u,d){H2(a,d,ze,function(f){return f===ze?u:e(f,u,d)})}:function(u,d){a.set(d,u)},l=0;l<i.length;l++)i[l].forEach(o)})}function up(r,t,e){return cp(r,t,h5(e))}function cp(r,t,e){if(!ph(r))throw new TypeError("Cannot merge into non-data-structure value: "+r);if(ea(r))return typeof e=="function"&&r.mergeWith?r.mergeWith.apply(r,[e].concat(t)):r.merge?r.merge.apply(r,t):r.concat.apply(r,t);for(var i=Array.isArray(r),s=r,n=i?oo:Sn,a=i?function(l){s===r&&(s=kf(s)),s.push(l)}:function(l,u){var d=Dl.call(s,u),f=d&&e?e(s[u],l,u):l;(!d||f!==s[u])&&(s===r&&(s=kf(s)),s[u]=f)},o=0;o<t.length;o++)n(t[o]).forEach(a);return s}function h5(r){function t(e,i,s){return ph(e)&&ph(i)&&o5(e,i)?cp(e,[i],t):r?r(e,i,s):i}return t}function o5(r,t){var e=jr(r),i=jr(t);return br(e)===br(i)&&Di(e)===Di(i)}function j2(){for(var r=[],t=arguments.length;t--;)r[t]=arguments[t];return up(this,r)}function $2(r){for(var t=[],e=arguments.length-1;e-- >0;)t[e]=arguments[e+1];return up(this,t,r)}function dp(r){for(var t=[],e=arguments.length-1;e-- >0;)t[e]=arguments[e+1];return Vl(this,r,En(),function(i){return cp(i,t)})}function fp(r){for(var t=[],e=arguments.length-1;e-- >0;)t[e]=arguments[e+1];return Vl(this,r,En(),function(i){return up(i,t)})}function vc(r){var t=this.asMutable();return r(t),t.wasAltered()?t.__ensureOwner(this.__ownerID):this}function bc(){return this.__ownerID?this:this.__ensureOwner(new jm)}function Mc(){return this.__ensureOwner()}function gp(){return this.__altered}var zl=function(r){function t(e){return e==null?En():tp(e)&&!Tn(e)?e:En().withMutations(function(i){var s=r(e);Xr(s.size),s.forEach(function(n,a){return i.set(a,n)})})}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.of=function(){for(var i=[],s=arguments.length;s--;)i[s]=arguments[s];return En().withMutations(function(n){for(var a=0;a<i.length;a+=2){if(a+1>=i.length)throw new Error("Missing value for key: "+i[a]);n.set(i[a],i[a+1])}})},t.prototype.toString=function(){return this.__toString("Map {","}")},t.prototype.get=function(i,s){return this._root?this._root.get(0,void 0,i,s):s},t.prototype.set=function(i,s){return av(this,i,s)},t.prototype.remove=function(i){return av(this,i,ze)},t.prototype.deleteAll=function(i){var s=ts(i);return s.size===0?this:this.withMutations(function(n){s.forEach(function(a){return n.remove(a)})})},t.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):En()},t.prototype.sort=function(i){return Ta(cl(this,i))},t.prototype.sortBy=function(i,s){return Ta(cl(this,s,i))},t.prototype.map=function(i,s){var n=this;return this.withMutations(function(a){a.forEach(function(o,l){a.set(l,i.call(s,o,l,n))})})},t.prototype.__iterator=function(i,s){return new l5(this,i,s)},t.prototype.__iterate=function(i,s){var n=this,a=0;return this._root&&this._root.iterate(function(o){return a++,i(o[1],o[0],n)},s),a},t.prototype.__ensureOwner=function(i){return i===this.__ownerID?this:i?yp(this.size,this._root,i,this.__hash):this.size===0?En():(this.__ownerID=i,this.__altered=!1,this)},t}(Sn);zl.isMap=tp;var Ci=zl.prototype;Ci[k2]=!0;Ci[Sc]=Ci.remove;Ci.removeAll=Ci.deleteAll;Ci.setIn=ap;Ci.removeIn=Ci.deleteIn=hp;Ci.update=op;Ci.updateIn=lp;Ci.merge=Ci.concat=X2;Ci.mergeWith=W2;Ci.mergeDeep=j2;Ci.mergeDeepWith=$2;Ci.mergeIn=dp;Ci.mergeDeepIn=fp;Ci.withMutations=vc;Ci.wasAltered=gp;Ci.asImmutable=Mc;Ci["@@transducer/init"]=Ci.asMutable=bc;Ci["@@transducer/step"]=function(r,t){return r.set(t[0],t[1])};Ci["@@transducer/result"]=function(r){return r.asImmutable()};var nc=function(t,e){this.ownerID=t,this.entries=e};nc.prototype.get=function(t,e,i,s){for(var n=this.entries,a=0,o=n.length;a<o;a++)if(Wr(i,n[a][0]))return n[a][1];return s};nc.prototype.update=function(t,e,i,s,n,a,o){for(var l=n===ze,u=this.entries,d=0,f=u.length;d<f&&!Wr(s,u[d][0]);d++);var y=d<f;if(y?u[d][1]===n:l)return this;if(gn(o),(l||!y)&&gn(a),!(l&&u.length===1)){if(!y&&!l&&u.length>=y5)return u5(t,u,s,n);var m=t&&t===this.ownerID,S=m?u:Hn(u);return y?l?d===f-1?S.pop():S[d]=S.pop():S[d]=[s,n]:S.push([s,n]),m?(this.entries=S,this):new nc(t,S)}};var dl=function(t,e,i){this.ownerID=t,this.bitmap=e,this.nodes=i};dl.prototype.get=function(t,e,i,s){e===void 0&&(e=Hr(i));var n=1<<((t===0?e:e>>>t)&Qs),a=this.bitmap;return(a&n)===0?s:this.nodes[J2(a&n-1)].get(t+Ei,e,i,s)};dl.prototype.update=function(t,e,i,s,n,a,o){i===void 0&&(i=Hr(s));var l=(e===0?i:i>>>e)&Qs,u=1<<l,d=this.bitmap,f=(d&u)!==0;if(!f&&n===ze)return this;var y=J2(d&u-1),m=this.nodes,S=f?m[y]:void 0,x=mp(S,t,e+Ei,i,s,n,a,o);if(x===S)return this;if(!f&&x&&m.length>=m5)return d5(t,m,d,l,x);if(f&&!x&&m.length===2&&hv(m[y^1]))return m[y^1];if(f&&x&&m.length===1&&hv(x))return x;var v=t&&t===this.ownerID,b=f?x?d:d^u:d|u,E=f?x?Z2(m,y,x,v):g5(m,y,v):f5(m,y,x,v);return v?(this.bitmap=b,this.nodes=E,this):new dl(t,b,E)};var ac=function(t,e,i){this.ownerID=t,this.count=e,this.nodes=i};ac.prototype.get=function(t,e,i,s){e===void 0&&(e=Hr(i));var n=(t===0?e:e>>>t)&Qs,a=this.nodes[n];return a?a.get(t+Ei,e,i,s):s};ac.prototype.update=function(t,e,i,s,n,a,o){i===void 0&&(i=Hr(s));var l=(e===0?i:i>>>e)&Qs,u=n===ze,d=this.nodes,f=d[l];if(u&&!f)return this;var y=mp(f,t,e+Ei,i,s,n,a,o);if(y===f)return this;var m=this.count;if(!f)m++;else if(!y&&(m--,m<p5))return c5(t,d,m,l);var S=t&&t===this.ownerID,x=Z2(d,l,y,S);return S?(this.count=m,this.nodes=x,this):new ac(t,m,x)};var fl=function(t,e,i){this.ownerID=t,this.keyHash=e,this.entries=i};fl.prototype.get=function(t,e,i,s){for(var n=this.entries,a=0,o=n.length;a<o;a++)if(Wr(i,n[a][0]))return n[a][1];return s};fl.prototype.update=function(t,e,i,s,n,a,o){i===void 0&&(i=Hr(s));var l=n===ze;if(i!==this.keyHash)return l?this:(gn(o),gn(a),pp(this,t,e,i,[s,n]));for(var u=this.entries,d=0,f=u.length;d<f&&!Wr(s,u[d][0]);d++);var y=d<f;if(y?u[d][1]===n:l)return this;if(gn(o),(l||!y)&&gn(a),l&&f===2)return new Ea(t,this.keyHash,u[d^1]);var m=t&&t===this.ownerID,S=m?u:Hn(u);return y?l?d===f-1?S.pop():S[d]=S.pop():S[d]=[s,n]:S.push([s,n]),m?(this.entries=S,this):new fl(t,this.keyHash,S)};var Ea=function(t,e,i){this.ownerID=t,this.keyHash=e,this.entry=i};Ea.prototype.get=function(t,e,i,s){return Wr(i,this.entry[0])?this.entry[1]:s};Ea.prototype.update=function(t,e,i,s,n,a,o){var l=n===ze,u=Wr(s,this.entry[0]);if(u?n===this.entry[1]:l)return this;if(gn(o),l){gn(a);return}return u?t&&t===this.ownerID?(this.entry[1]=n,this):new Ea(t,this.keyHash,[s,n]):(gn(a),pp(this,t,e,Hr(s),[s,n]))};nc.prototype.iterate=fl.prototype.iterate=function(r,t){for(var e=this.entries,i=0,s=e.length-1;i<=s;i++)if(r(e[t?s-i:i])===!1)return!1};dl.prototype.iterate=ac.prototype.iterate=function(r,t){for(var e=this.nodes,i=0,s=e.length-1;i<=s;i++){var n=e[t?s-i:i];if(n&&n.iterate(r,t)===!1)return!1}};Ea.prototype.iterate=function(r,t){return r(this.entry)};var l5=function(r){function t(e,i,s){this._type=i,this._reverse=s,this._stack=e._root&&rv(e._root)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.next=function(){for(var i=this._type,s=this._stack;s;){var n=s.node,a=s.index++,o=void 0;if(n.entry){if(a===0)return Xy(i,n.entry)}else if(n.entries){if(o=n.entries.length-1,a<=o)return Xy(i,n.entries[this._reverse?o-a:a])}else if(o=n.nodes.length-1,a<=o){var l=n.nodes[this._reverse?o-a:a];if(l){if(l.entry)return Xy(i,l.entry);s=this._stack=rv(l,s)}continue}s=this._stack=this._stack.__prev}return wr()},t}(ti);function Xy(r,t){return Fi(r,t[0],t[1])}function rv(r,t){return{node:r,index:0,__prev:t}}function yp(r,t,e,i){var s=Object.create(Ci);return s.size=r,s._root=t,s.__ownerID=e,s.__hash=i,s.__altered=!1,s}var nv;function En(){return nv||(nv=yp(0))}function av(r,t,e){var i,s;if(r._root){var n=pm(),a=pm();if(i=mp(r._root,r.__ownerID,0,void 0,t,e,n,a),!a.value)return r;s=r.size+(n.value?e===ze?-1:1:0)}else{if(e===ze)return r;s=1,i=new nc(r.__ownerID,[[t,e]])}return r.__ownerID?(r.size=s,r._root=i,r.__hash=void 0,r.__altered=!0,r):i?yp(s,i):En()}function mp(r,t,e,i,s,n,a,o){return r?r.update(t,e,i,s,n,a,o):n===ze?r:(gn(o),gn(a),new Ea(t,i,[s,n]))}function hv(r){return r.constructor===Ea||r.constructor===fl}function pp(r,t,e,i,s){if(r.keyHash===i)return new fl(t,i,[r.entry,s]);var n=(e===0?r.keyHash:r.keyHash>>>e)&Qs,a=(e===0?i:i>>>e)&Qs,o,l=n===a?[pp(r,t,e+Ei,i,s)]:(o=new Ea(t,i,s),n<a?[r,o]:[o,r]);return new dl(t,1<<n|1<<a,l)}function u5(r,t,e,i){r||(r=new jm);for(var s=new Ea(r,Hr(e),[e,i]),n=0;n<t.length;n++){var a=t[n];s=s.update(r,0,void 0,a[0],a[1])}return s}function c5(r,t,e,i){for(var s=0,n=0,a=new Array(e),o=0,l=1,u=t.length;o<u;o++,l<<=1){var d=t[o];d!==void 0&&o!==i&&(s|=l,a[n++]=d)}return new dl(r,s,a)}function d5(r,t,e,i,s){for(var n=0,a=new Array(fn),o=0;e!==0;o++,e>>>=1)a[o]=e&1?t[n++]:void 0;return a[i]=s,new ac(r,n+1,a)}function J2(r){return r-=r>>1&1431655765,r=(r&858993459)+(r>>2&858993459),r=r+(r>>4)&252645135,r+=r>>8,r+=r>>16,r&127}function Z2(r,t,e,i){var s=i?r:Hn(r);return s[t]=e,s}function f5(r,t,e,i){var s=r.length+1;if(i&&t+1===s)return r[t]=e,r;for(var n=new Array(s),a=0,o=0;o<s;o++)o===t?(n[o]=e,a=-1):n[o]=r[o+a];return n}function g5(r,t,e){var i=r.length-1;if(e&&t===i)return r.pop(),r;for(var s=new Array(i),n=0,a=0;a<i;a++)a===t&&(n=1),s[a]=r[a+n];return s}var y5=fn/4,m5=fn/2,p5=fn/4,Q2="@@__IMMUTABLE_LIST__@@";function K2(r){return!!(r&&r[Q2])}var Rc=function(r){function t(e){var i=Tf();if(e==null)return i;if(K2(e))return e;var s=r(e),n=s.size;return n===0?i:(Xr(n),n>0&&n<fn?hc(0,n,Ei,null,new uh(s.toArray())):i.withMutations(function(a){a.setSize(n),s.forEach(function(o,l){return a.set(l,o)})}))}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("List [","]")},t.prototype.get=function(i,s){if(i=mh(this,i),i>=0&&i<this.size){i+=this._origin;var n=tM(this,i);return n&&n.array[i&Qs]}return s},t.prototype.set=function(i,s){return S5(this,i,s)},t.prototype.remove=function(i){return this.has(i)?i===0?this.shift():i===this.size-1?this.pop():this.splice(i,1):this},t.prototype.insert=function(i,s){return this.splice(i,0,s)},t.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=Ei,this._root=this._tail=this.__hash=void 0,this.__altered=!0,this):Tf()},t.prototype.push=function(){var i=arguments,s=this.size;return this.withMutations(function(n){ih(n,0,s+i.length);for(var a=0;a<i.length;a++)n.set(s+a,i[a])})},t.prototype.pop=function(){return ih(this,0,-1)},t.prototype.unshift=function(){var i=arguments;return this.withMutations(function(s){ih(s,-i.length);for(var n=0;n<i.length;n++)s.set(n,i[n])})},t.prototype.shift=function(){return ih(this,1)},t.prototype.concat=function(){for(var i=arguments,s=[],n=0;n<arguments.length;n++){var a=i[n],o=r(typeof a!="string"&&T2(a)?a:[a]);o.size!==0&&s.push(o)}return s.length===0?this:this.size===0&&!this.__ownerID&&s.length===1?this.constructor(s[0]):this.withMutations(function(l){s.forEach(function(u){return u.forEach(function(d){return l.push(d)})})})},t.prototype.setSize=function(i){return ih(this,0,i)},t.prototype.map=function(i,s){var n=this;return this.withMutations(function(a){for(var o=0;o<n.size;o++)a.set(o,i.call(s,a.get(o),o,n))})},t.prototype.slice=function(i,s){var n=this.size;return e0(i,s,n)?this:ih(this,xc(i,n),i0(s,n))},t.prototype.__iterator=function(i,s){var n=s?this.size:0,a=ov(this,s);return new ti(function(){var o=a();return o===Zu?wr():Fi(i,s?--n:n++,o)})},t.prototype.__iterate=function(i,s){for(var n=s?this.size:0,a=ov(this,s),o;(o=a())!==Zu&&i(o,s?--n:n++,this)!==!1;);return n},t.prototype.__ensureOwner=function(i){return i===this.__ownerID?this:i?hc(this._origin,this._capacity,this._level,this._root,this._tail,i,this.__hash):this.size===0?Tf():(this.__ownerID=i,this.__altered=!1,this)},t}(oo);Rc.isList=K2;var us=Rc.prototype;us[Q2]=!0;us[Sc]=us.remove;us.merge=us.concat;us.setIn=ap;us.deleteIn=us.removeIn=hp;us.update=op;us.updateIn=lp;us.mergeIn=dp;us.mergeDeepIn=fp;us.withMutations=vc;us.wasAltered=gp;us.asImmutable=Mc;us["@@transducer/init"]=us.asMutable=bc;us["@@transducer/step"]=function(r,t){return r.push(t)};us["@@transducer/result"]=function(r){return r.asImmutable()};var uh=function(t,e){this.array=t,this.ownerID=e};uh.prototype.removeBefore=function(t,e,i){if(i===e?1<<e:this.array.length===0)return this;var s=i>>>e&Qs;if(s>=this.array.length)return new uh([],t);var n=s===0,a;if(e>0){var o=this.array[s];if(a=o&&o.removeBefore(t,e-Ei,i),a===o&&n)return this}if(n&&!a)return this;var l=gl(this,t);if(!n)for(var u=0;u<s;u++)l.array[u]=void 0;return a&&(l.array[s]=a),l};uh.prototype.removeAfter=function(t,e,i){if(i===(e?1<<e:0)||this.array.length===0)return this;var s=i-1>>>e&Qs;if(s>=this.array.length)return this;var n;if(e>0){var a=this.array[s];if(n=a&&a.removeAfter(t,e-Ei,i),n===a&&s===this.array.length-1)return this}var o=gl(this,t);return o.array.splice(s+1),n&&(o.array[s]=n),o};var Zu={};function ov(r,t){var e=r._origin,i=r._capacity,s=oc(i),n=r._tail;return a(r._root,r._level,0);function a(u,d,f){return d===0?o(u,f):l(u,d,f)}function o(u,d){var f=d===s?n&&n.array:u&&u.array,y=d>e?0:e-d,m=i-d;return m>fn&&(m=fn),function(){if(y===m)return Zu;var S=t?--m:y++;return f&&f[S]}}function l(u,d,f){var y,m=u&&u.array,S=f>e?0:e-f>>d,x=(i-f>>d)+1;return x>fn&&(x=fn),function(){for(;;){if(y){var v=y();if(v!==Zu)return v;y=null}if(S===x)return Zu;var b=t?--x:S++;y=a(m&&m[b],d-Ei,f+(b<<d))}}}}function hc(r,t,e,i,s,n,a){var o=Object.create(us);return o.size=t-r,o._origin=r,o._capacity=t,o._level=e,o._root=i,o._tail=s,o.__ownerID=n,o.__hash=a,o.__altered=!1,o}var lv;function Tf(){return lv||(lv=hc(0,0,Ei))}function S5(r,t,e){if(t=mh(r,t),t!==t)return r;if(t>=r.size||t<0)return r.withMutations(function(a){t<0?ih(a,t).set(0,e):ih(a,0,t+1).set(t,e)});t+=r._origin;var i=r._tail,s=r._root,n=pm();return t>=oc(r._capacity)?i=Mm(i,r.__ownerID,0,t,e,n):s=Mm(s,r.__ownerID,r._level,t,e,n),n.value?r.__ownerID?(r._root=s,r._tail=i,r.__hash=void 0,r.__altered=!0,r):hc(r._origin,r._capacity,r._level,s,i):r}function Mm(r,t,e,i,s,n){var a=i>>>e&Qs,o=r&&a<r.array.length;if(!o&&s===void 0)return r;var l;if(e>0){var u=r&&r.array[a],d=Mm(u,t,e-Ei,i,s,n);return d===u?r:(l=gl(r,t),l.array[a]=d,l)}return o&&r.array[a]===s?r:(n&&gn(n),l=gl(r,t),s===void 0&&a===l.array.length-1?l.array.pop():l.array[a]=s,l)}function gl(r,t){return t&&r&&t===r.ownerID?r:new uh(r?r.array.slice():[],t)}function tM(r,t){if(t>=oc(r._capacity))return r._tail;if(t<1<<r._level+Ei){for(var e=r._root,i=r._level;e&&i>0;)e=e.array[t>>>i&Qs],i-=Ei;return e}}function ih(r,t,e){t!==void 0&&(t|=0),e!==void 0&&(e|=0);var i=r.__ownerID||new jm,s=r._origin,n=r._capacity,a=s+t,o=e===void 0?n:e<0?n+e:s+e;if(a===s&&o===n)return r;if(a>=o)return r.clear();for(var l=r._level,u=r._root,d=0;a+d<0;)u=new uh(u&&u.array.length?[void 0,u]:[],i),l+=Ei,d+=1<<l;d&&(a+=d,s+=d,o+=d,n+=d);for(var f=oc(n),y=oc(o);y>=1<<l+Ei;)u=new uh(u&&u.array.length?[u]:[],i),l+=Ei;var m=r._tail,S=y<f?tM(r,o-1):y>f?new uh([],i):m;if(m&&y>f&&a<n&&m.array.length){u=gl(u,i);for(var x=u,v=l;v>Ei;v-=Ei){var b=f>>>v&Qs;x=x.array[b]=gl(x.array[b],i)}x.array[f>>>Ei&Qs]=m}if(o<n&&(S=S&&S.removeAfter(i,0,o)),a>=y)a-=y,o-=y,l=Ei,u=null,S=S&&S.removeBefore(i,0,a);else if(a>s||y<f){for(d=0;u;){var E=a>>>l&Qs;if(E!==y>>>l&Qs)break;E&&(d+=(1<<l)*E),l-=Ei,u=u.array[E]}u&&a>s&&(u=u.removeBefore(i,l,a-d)),u&&y<f&&(u=u.removeAfter(i,l,y-d)),d&&(a-=d,o-=d)}return r.__ownerID?(r.size=o-a,r._origin=a,r._capacity=o,r._level=l,r._root=u,r._tail=S,r.__hash=void 0,r.__altered=!0,r):hc(a,o,l,u,S)}function oc(r){return r<fn?0:r-1>>>Ei<<Ei}var Ta=function(r){function t(e){return e==null?qu():D2(e)?e:qu().withMutations(function(i){var s=Sn(e);Xr(s.size),s.forEach(function(n,a){return i.set(a,n)})})}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("OrderedMap {","}")},t.prototype.get=function(i,s){var n=this._map.get(i);return n!==void 0?this._list.get(n)[1]:s},t.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this.__altered=!0,this):qu()},t.prototype.set=function(i,s){return cv(this,i,s)},t.prototype.remove=function(i){return cv(this,i,ze)},t.prototype.__iterate=function(i,s){var n=this;return this._list.__iterate(function(a){return a&&i(a[1],a[0],n)},s)},t.prototype.__iterator=function(i,s){return this._list.fromEntrySeq().__iterator(i,s)},t.prototype.__ensureOwner=function(i){if(i===this.__ownerID)return this;var s=this._map.__ensureOwner(i),n=this._list.__ensureOwner(i);return i?Sp(s,n,i,this.__hash):this.size===0?qu():(this.__ownerID=i,this.__altered=!1,this._map=s,this._list=n,this)},t}(zl);Ta.isOrderedMap=D2;Ta.prototype[kl]=!0;Ta.prototype[Sc]=Ta.prototype.remove;function Sp(r,t,e,i){var s=Object.create(Ta.prototype);return s.size=r?r.size:0,s._map=r,s._list=t,s.__ownerID=e,s.__hash=i,s.__altered=!1,s}var uv;function qu(){return uv||(uv=Sp(En(),Tf()))}function cv(r,t,e){var i=r._map,s=r._list,n=i.get(t),a=n!==void 0,o,l;if(e===ze){if(!a)return r;s.size>=fn&&s.size>=i.size*2?(l=s.filter(function(u,d){return u!==void 0&&n!==d}),o=l.toKeyedSeq().map(function(u){return u[0]}).flip().toMap(),r.__ownerID&&(o.__ownerID=l.__ownerID=r.__ownerID)):(o=i.remove(t),l=n===s.size-1?s.pop():s.set(n,void 0))}else if(a){if(e===s.get(n)[1])return r;o=i,l=s.set(n,[t,e])}else o=i.set(t,s.size),l=s.set(s.size,[t,e]);return r.__ownerID?(r.size=o.size,r._map=o,r._list=l,r.__hash=void 0,r.__altered=!0,r):Sp(o,l)}var eM="@@__IMMUTABLE_STACK__@@";function Rm(r){return!!(r&&r[eM])}var xp=function(r){function t(e){return e==null?tf():Rm(e)?e:tf().pushAll(e)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("Stack [","]")},t.prototype.get=function(i,s){var n=this._head;for(i=mh(this,i);n&&i--;)n=n.next;return n?n.value:s},t.prototype.peek=function(){return this._head&&this._head.value},t.prototype.push=function(){var i=arguments;if(arguments.length===0)return this;for(var s=this.size+arguments.length,n=this._head,a=arguments.length-1;a>=0;a--)n={value:i[a],next:n};return this.__ownerID?(this.size=s,this._head=n,this.__hash=void 0,this.__altered=!0,this):ju(s,n)},t.prototype.pushAll=function(i){if(i=r(i),i.size===0)return this;if(this.size===0&&Rm(i))return i;Xr(i.size);var s=this.size,n=this._head;return i.__iterate(function(a){s++,n={value:a,next:n}},!0),this.__ownerID?(this.size=s,this._head=n,this.__hash=void 0,this.__altered=!0,this):ju(s,n)},t.prototype.pop=function(){return this.slice(1)},t.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):tf()},t.prototype.slice=function(i,s){if(e0(i,s,this.size))return this;var n=xc(i,this.size),a=i0(s,this.size);if(a!==this.size)return r.prototype.slice.call(this,i,s);for(var o=this.size-n,l=this._head;n--;)l=l.next;return this.__ownerID?(this.size=o,this._head=l,this.__hash=void 0,this.__altered=!0,this):ju(o,l)},t.prototype.__ensureOwner=function(i){return i===this.__ownerID?this:i?ju(this.size,this._head,i,this.__hash):this.size===0?tf():(this.__ownerID=i,this.__altered=!1,this)},t.prototype.__iterate=function(i,s){var n=this;if(s)return new Kh(this.toArray()).__iterate(function(l,u){return i(l,u,n)},s);for(var a=0,o=this._head;o&&i(o.value,a++,this)!==!1;)o=o.next;return a},t.prototype.__iterator=function(i,s){if(s)return new Kh(this.toArray()).__iterator(i,s);var n=0,a=this._head;return new ti(function(){if(a){var o=a.value;return a=a.next,Fi(i,n++,o)}return wr()})},t}(oo);xp.isStack=Rm;var er=xp.prototype;er[eM]=!0;er.shift=er.pop;er.unshift=er.push;er.unshiftAll=er.pushAll;er.withMutations=vc;er.wasAltered=gp;er.asImmutable=Mc;er["@@transducer/init"]=er.asMutable=bc;er["@@transducer/step"]=function(r,t){return r.unshift(t)};er["@@transducer/result"]=function(r){return r.asImmutable()};function ju(r,t,e,i){var s=Object.create(er);return s.size=r,s._head=t,s.__ownerID=e,s.__hash=i,s.__altered=!1,s}var dv;function tf(){return dv||(dv=ju(0))}var iM="@@__IMMUTABLE_SET__@@";function Ap(r){return!!(r&&r[iM])}function sM(r){return Ap(r)&&Tn(r)}function rM(r,t){if(r===t)return!0;if(!Tr(t)||r.size!==void 0&&t.size!==void 0&&r.size!==t.size||r.__hash!==void 0&&t.__hash!==void 0&&r.__hash!==t.__hash||Di(r)!==Di(t)||br(r)!==br(t)||Tn(r)!==Tn(t))return!1;if(r.size===0&&t.size===0)return!0;var e=!s0(r);if(Tn(r)){var i=r.entries();return t.every(function(l,u){var d=i.next().value;return d&&Wr(d[1],l)&&(e||Wr(d[0],u))})&&i.next().done}var s=!1;if(r.size===void 0)if(t.size===void 0)typeof r.cacheResult=="function"&&r.cacheResult();else{s=!0;var n=r;r=t,t=n}var a=!0,o=t.__iterate(function(l,u){if(e?!r.has(l):s?!Wr(l,r.get(u,ze)):!Wr(r.get(u,ze),l))return a=!1,!1});return a&&r.size===o}function lo(r,t){var e=function(i){r.prototype[i]=t[i]};return Object.keys(t).forEach(e),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach(e),r}function Df(r){if(!r||typeof r!="object")return r;if(!Tr(r)){if(!ph(r))return r;r=jr(r)}if(Di(r)){var t={};return r.__iterate(function(i,s){t[s]=Df(i)}),t}var e=[];return r.__iterate(function(i){e.push(Df(i))}),e}var o0=function(r){function t(e){return e==null?$u():Ap(e)&&!Tn(e)?e:$u().withMutations(function(i){var s=r(e);Xr(s.size),s.forEach(function(n){return i.add(n)})})}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.fromKeys=function(i){return this(Sn(i).keySeq())},t.intersect=function(i){return i=ts(i).toArray(),i.length?Ns.intersect.apply(t(i.pop()),i):$u()},t.union=function(i){return i=ts(i).toArray(),i.length?Ns.union.apply(t(i.pop()),i):$u()},t.prototype.toString=function(){return this.__toString("Set {","}")},t.prototype.has=function(i){return this._map.has(i)},t.prototype.add=function(i){return ef(this,this._map.set(i,i))},t.prototype.remove=function(i){return ef(this,this._map.remove(i))},t.prototype.clear=function(){return ef(this,this._map.clear())},t.prototype.map=function(i,s){var n=this,a=!1,o=ef(this,this._map.mapEntries(function(l){var u=l[1],d=i.call(s,u,u,n);return d!==u&&(a=!0),[d,d]},s));return a?o:this},t.prototype.union=function(){for(var i=[],s=arguments.length;s--;)i[s]=arguments[s];return i=i.filter(function(n){return n.size!==0}),i.length===0?this:this.size===0&&!this.__ownerID&&i.length===1?this.constructor(i[0]):this.withMutations(function(n){for(var a=0;a<i.length;a++)typeof i[a]=="string"?n.add(i[a]):r(i[a]).forEach(function(o){return n.add(o)})})},t.prototype.intersect=function(){for(var i=[],s=arguments.length;s--;)i[s]=arguments[s];if(i.length===0)return this;i=i.map(function(a){return r(a)});var n=[];return this.forEach(function(a){i.every(function(o){return o.includes(a)})||n.push(a)}),this.withMutations(function(a){n.forEach(function(o){a.remove(o)})})},t.prototype.subtract=function(){for(var i=[],s=arguments.length;s--;)i[s]=arguments[s];if(i.length===0)return this;i=i.map(function(a){return r(a)});var n=[];return this.forEach(function(a){i.some(function(o){return o.includes(a)})&&n.push(a)}),this.withMutations(function(a){n.forEach(function(o){a.remove(o)})})},t.prototype.sort=function(i){return lc(cl(this,i))},t.prototype.sortBy=function(i,s){return lc(cl(this,s,i))},t.prototype.wasAltered=function(){return this._map.wasAltered()},t.prototype.__iterate=function(i,s){var n=this;return this._map.__iterate(function(a){return i(a,a,n)},s)},t.prototype.__iterator=function(i,s){return this._map.__iterator(i,s)},t.prototype.__ensureOwner=function(i){if(i===this.__ownerID)return this;var s=this._map.__ensureOwner(i);return i?this.__make(s,i):this.size===0?this.__empty():(this.__ownerID=i,this._map=s,this)},t}(wl);o0.isSet=Ap;var Ns=o0.prototype;Ns[iM]=!0;Ns[Sc]=Ns.remove;Ns.merge=Ns.concat=Ns.union;Ns.withMutations=vc;Ns.asImmutable=Mc;Ns["@@transducer/init"]=Ns.asMutable=bc;Ns["@@transducer/step"]=function(r,t){return r.add(t)};Ns["@@transducer/result"]=function(r){return r.asImmutable()};Ns.__empty=$u;Ns.__make=nM;function ef(r,t){return r.__ownerID?(r.size=t.size,r._map=t,r):t===r._map?r:t.size===0?r.__empty():r.__make(t)}function nM(r,t){var e=Object.create(Ns);return e.size=r?r.size:0,e._map=r,e.__ownerID=t,e}var fv;function $u(){return fv||(fv=nM(En()))}var x5=function(r){function t(e,i,s){if(!(this instanceof t))return new t(e,i,s);if(np(s!==0,"Cannot step a Range by 0"),e=e||0,i===void 0&&(i=1/0),s=s===void 0?1:Math.abs(s),i<e&&(s=-s),this._start=e,this._end=i,this._step=s,this.size=Math.max(0,Math.ceil((i-e)/s-1)+1),this.size===0){if(Wy)return Wy;Wy=this}}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.toString=function(){return this.size===0?"Range []":"Range [ "+this._start+"..."+this._end+(this._step!==1?" by "+this._step:"")+" ]"},t.prototype.get=function(i,s){return this.has(i)?this._start+mh(this,i)*this._step:s},t.prototype.includes=function(i){var s=(i-this._start)/this._step;return s>=0&&s<this.size&&s===Math.floor(s)},t.prototype.slice=function(i,s){return e0(i,s,this.size)?this:(i=xc(i,this.size),s=i0(s,this.size),s<=i?new t(0,0):new t(this.get(i,this._end),this.get(s,this._end),this._step))},t.prototype.indexOf=function(i){var s=i-this._start;if(s%this._step===0){var n=s/this._step;if(n>=0&&n<this.size)return n}return-1},t.prototype.lastIndexOf=function(i){return this.indexOf(i)},t.prototype.__iterate=function(i,s){for(var n=this.size,a=this._step,o=s?this._start+(n-1)*a:this._start,l=0;l!==n&&i(o,s?n-++l:l++,this)!==!1;)o+=s?-a:a;return l},t.prototype.__iterator=function(i,s){var n=this.size,a=this._step,o=s?this._start+(n-1)*a:this._start,l=0;return new ti(function(){if(l===n)return wr();var u=o;return o+=s?-a:a,Fi(i,s?n-++l:l++,u)})},t.prototype.equals=function(i){return i instanceof t?this._start===i._start&&this._end===i._end&&this._step===i._step:rM(this,i)},t}(Fn),Wy;function aM(r,t,e){for(var i=O2(t),s=0;s!==i.length;)if(r=G2(r,i[s++],ze),r===ze)return e;return r}function hM(r,t){return aM(this,r,t)}function A5(r,t){return aM(r,t,ze)!==ze}function v5(r){return A5(this,r)}function oM(){Xr(this.size);var r={};return this.__iterate(function(t,e){r[e]=t}),r}ts.isIterable=Tr;ts.isKeyed=Di;ts.isIndexed=br;ts.isAssociative=s0;ts.isOrdered=Tn;ts.Iterator=ti;lo(ts,{toArray:function(){Xr(this.size);var t=new Array(this.size||0),e=Di(this),i=0;return this.__iterate(function(s,n){t[i++]=e?[n,s]:s}),t},toIndexedSeq:function(){return new V2(this)},toJS:function(){return Df(this)},toKeyedSeq:function(){return new h0(this,!0)},toMap:function(){return zl(this.toKeyedSeq())},toObject:oM,toOrderedMap:function(){return Ta(this.toKeyedSeq())},toOrderedSet:function(){return lc(Di(this)?this.valueSeq():this)},toSet:function(){return o0(Di(this)?this.valueSeq():this)},toSetSeq:function(){return new z2(this)},toSeq:function(){return br(this)?this.toIndexedSeq():Di(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return xp(Di(this)?this.valueSeq():this)},toList:function(){return Rc(Di(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(t,e){return this.size===0?t+e:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return Si(this,Zw(this,t))},includes:function(t){return this.some(function(e){return Wr(e,t)})},entries:function(){return this.__iterator(pn)},every:function(t,e){Xr(this.size);var i=!0;return this.__iterate(function(s,n,a){if(!t.call(e,s,n,a))return i=!1,!1}),i},filter:function(t,e){return Si(this,L2(this,t,e,!0))},partition:function(t,e){return $w(this,t,e)},find:function(t,e,i){var s=this.findEntry(t,e);return s?s[1]:i},forEach:function(t,e){return Xr(this.size),this.__iterate(e?t.bind(e):t)},join:function(t){Xr(this.size),t=t!==void 0?""+t:",";var e="",i=!0;return this.__iterate(function(s){i?i=!1:e+=t,e+=s!=null?s.toString():""}),e},keys:function(){return this.__iterator(Ac)},map:function(t,e){return Si(this,B2(this,t,e))},reduce:function(t,e,i){return gv(this,t,e,i,arguments.length<2,!1)},reduceRight:function(t,e,i){return gv(this,t,e,i,arguments.length<2,!0)},reverse:function(){return Si(this,ep(this,!0))},slice:function(t,e){return Si(this,ip(this,t,e,!0))},some:function(t,e){Xr(this.size);var i=!1;return this.__iterate(function(s,n,a){if(t.call(e,s,n,a))return i=!0,!1}),i},sort:function(t){return Si(this,cl(this,t))},values:function(){return this.__iterator(Dn)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return this.size!==void 0?this.size===0:!this.some(function(){return!0})},count:function(t,e){return ul(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return qw(this,t,e)},equals:function(t){return rM(this,t)},entrySeq:function(){var t=this;if(t._cache)return new Kh(t._cache);var e=t.toSeq().map(M5).toIndexedSeq();return e.fromEntrySeq=function(){return t.toSeq()},e},filterNot:function(t,e){return this.filter(qy(t),e)},findEntry:function(t,e,i){var s=i;return this.__iterate(function(n,a,o){if(t.call(e,n,a,o))return s=[a,n],!1}),s},findKey:function(t,e){var i=this.findEntry(t,e);return i&&i[0]},findLast:function(t,e,i){return this.toKeyedSeq().reverse().find(t,e,i)},findLastEntry:function(t,e,i){return this.toKeyedSeq().reverse().findEntry(t,e,i)},findLastKey:function(t,e){return this.toKeyedSeq().reverse().findKey(t,e)},first:function(t){return this.find(p2,null,t)},flatMap:function(t,e){return Si(this,Qw(this,t,e))},flatten:function(t){return Si(this,P2(this,t,!0))},fromEntrySeq:function(){return new _2(this)},get:function(t,e){return this.find(function(i,s){return Wr(s,t)},void 0,e)},getIn:hM,groupBy:function(t,e){return jw(this,t,e)},has:function(t){return this.get(t,ze)!==ze},hasIn:v5,isSubset:function(t){return t=typeof t.includes=="function"?t:ts(t),this.every(function(e){return t.includes(e)})},isSuperset:function(t){return t=typeof t.isSubset=="function"?t:ts(t),t.isSubset(this)},keyOf:function(t){return this.findKey(function(e){return Wr(e,t)})},keySeq:function(){return this.toSeq().map(b5).toIndexedSeq()},last:function(t){return this.toSeq().reverse().first(t)},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return Qd(this,t)},maxBy:function(t,e){return Qd(this,e,t)},min:function(t){return Qd(this,t?yv(t):pv)},minBy:function(t,e){return Qd(this,e?yv(e):pv,t)},rest:function(){return this.slice(1)},skip:function(t){return t===0?this:this.slice(Math.max(0,t))},skipLast:function(t){return t===0?this:this.slice(0,-Math.max(0,t))},skipWhile:function(t,e){return Si(this,I2(this,t,e,!0))},skipUntil:function(t,e){return this.skipWhile(qy(t),e)},sortBy:function(t,e){return Si(this,cl(this,e,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return this.slice(-Math.max(0,t))},takeWhile:function(t,e){return Si(this,Jw(this,t,e))},takeUntil:function(t,e){return this.takeWhile(qy(t),e)},update:function(t){return t(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=R5(this))}});var qs=ts.prototype;qs[A2]=!0;qs[r0]=qs.values;qs.toJSON=qs.toArray;qs.__toStringMapper=rc;qs.inspect=qs.toSource=function(){return this.toString()};qs.chain=qs.flatMap;qs.contains=qs.includes;lo(Sn,{flip:function(){return Si(this,N2(this))},mapEntries:function(t,e){var i=this,s=0;return Si(this,this.toSeq().map(function(n,a){return t.call(e,[a,n],s++,i)}).fromEntrySeq())},mapKeys:function(t,e){var i=this;return Si(this,this.toSeq().flip().map(function(s,n){return t.call(e,s,n,i)}).flip())}});var Ec=Sn.prototype;Ec[v2]=!0;Ec[r0]=qs.entries;Ec.toJSON=oM;Ec.__toStringMapper=function(r,t){return rc(t)+": "+rc(r)};lo(oo,{toKeyedSeq:function(){return new h0(this,!1)},filter:function(t,e){return Si(this,L2(this,t,e,!1))},findIndex:function(t,e){var i=this.findEntry(t,e);return i?i[0]:-1},indexOf:function(t){var e=this.keyOf(t);return e===void 0?-1:e},lastIndexOf:function(t){var e=this.lastKeyOf(t);return e===void 0?-1:e},reverse:function(){return Si(this,ep(this,!1))},slice:function(t,e){return Si(this,ip(this,t,e,!1))},splice:function(t,e){var i=arguments.length;if(e=Math.max(e||0,0),i===0||i===2&&!e)return this;t=xc(t,t<0?this.count():this.size);var s=this.slice(0,t);return Si(this,i===1?s:s.concat(Hn(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){var i=this.findLastEntry(t,e);return i?i[0]:-1},first:function(t){return this.get(0,t)},flatten:function(t){return Si(this,P2(this,t,!1))},get:function(t,e){return t=mh(this,t),t<0||this.size===1/0||this.size!==void 0&&t>this.size?e:this.find(function(i,s){return s===t},void 0,e)},has:function(t){return t=mh(this,t),t>=0&&(this.size!==void 0?this.size===1/0||t<this.size:this.indexOf(t)!==-1)},interpose:function(t){return Si(this,Kw(this,t))},interleave:function(){var t=[this].concat(Hn(arguments)),e=Kd(this.toSeq(),Fn.of,t),i=e.flatten(!0);return e.size&&(i.size=e.size*t.length),Si(this,i)},keySeq:function(){return x5(0,this.size)},last:function(t){return this.get(-1,t)},skipWhile:function(t,e){return Si(this,I2(this,t,e,!1))},zip:function(){var t=[this].concat(Hn(arguments));return Si(this,Kd(this,mv,t))},zipAll:function(){var t=[this].concat(Hn(arguments));return Si(this,Kd(this,mv,t,!0))},zipWith:function(t){var e=Hn(arguments);return e[0]=this,Si(this,Kd(this,t,e))}});var _l=oo.prototype;_l[b2]=!0;_l[kl]=!0;lo(wl,{get:function(t,e){return this.has(t)?t:e},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}});var yl=wl.prototype;yl.has=qs.includes;yl.contains=yl.includes;yl.keys=yl.values;lo(vh,Ec);lo(Fn,_l);lo(Fl,yl);function gv(r,t,e,i,s,n){return Xr(r.size),r.__iterate(function(a,o,l){s?(s=!1,e=a):e=t.call(i,e,a,o,l)},n),e}function b5(r,t){return t}function M5(r,t){return[t,r]}function qy(r){return function(){return!r.apply(this,arguments)}}function yv(r){return function(){return-r.apply(this,arguments)}}function mv(){return Hn(arguments)}function pv(r,t){return r<t?1:r>t?-1:0}function R5(r){if(r.size===1/0)return 0;var t=Tn(r),e=Di(r),i=t?1:0,s=r.__iterate(e?t?function(n,a){i=31*i+Sv(Hr(n),Hr(a))|0}:function(n,a){i=i+Sv(Hr(n),Hr(a))|0}:t?function(n){i=31*i+Hr(n)|0}:function(n){i=i+Hr(n)|0});return E5(s,i)}function E5(r,t){return t=Uu(t,3432918353),t=Uu(t<<15|t>>>-15,461845907),t=Uu(t<<13|t>>>-13,5),t=(t+3864292196|0)^r,t=Uu(t^t>>>16,2246822507),t=Uu(t^t>>>13,3266489909),t=a0(t^t>>>16),t}function Sv(r,t){return r^t+2654435769+(r<<6)+(r>>2)|0}var lc=function(r){function t(e){return e==null?Em():sM(e)?e:Em().withMutations(function(i){var s=wl(e);Xr(s.size),s.forEach(function(n){return i.add(n)})})}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.fromKeys=function(i){return this(Sn(i).keySeq())},t.prototype.toString=function(){return this.__toString("OrderedSet {","}")},t}(o0);lc.isOrderedSet=sM;var uo=lc.prototype;uo[kl]=!0;uo.zip=_l.zip;uo.zipWith=_l.zipWith;uo.zipAll=_l.zipAll;uo.__empty=Em;uo.__make=lM;function lM(r,t){var e=Object.create(uo);return e.size=r?r.size:0,e._map=r,e.__ownerID=t,e}var xv;function Em(){return xv||(xv=lM(qu()))}function T5(r){if(Cl(r))throw new Error("Can not call `Record` with an immutable Record as default values. Use a plain javascript object instead.");if(ea(r))throw new Error("Can not call `Record` with an immutable Collection as default values. Use a plain javascript object instead.");if(r===null||typeof r!="object")throw new Error("Can not call `Record` with a non-object as default values. Use a plain javascript object instead.")}var xe=function(t,e){var i;T5(t);var s=function(o){var l=this;if(o instanceof s)return o;if(!(this instanceof s))return new s(o);if(!i){i=!0;var u=Object.keys(t),d=n._indices={};n._name=e,n._keys=u,n._defaultValues=t;for(var f=0;f<u.length;f++){var y=u[f];d[y]=f,n[y]?typeof console=="object"&&console.warn&&console.warn("Cannot define "+bp(this)+' with property "'+y+'" since that property name is part of the Record API.'):w5(n,y)}}return this.__ownerID=void 0,this._values=Rc().withMutations(function(m){m.setSize(l._keys.length),Sn(o).forEach(function(S,x){m.set(l._indices[x],S===l._defaultValues[x]?void 0:S)})}),this},n=s.prototype=Object.create(bi);return n.constructor=s,e&&(s.displayName=e),s};xe.prototype.toString=function(){for(var t=bp(this)+" { ",e=this._keys,i,s=0,n=e.length;s!==n;s++)i=e[s],t+=(s?", ":"")+i+": "+rc(this.get(i));return t+" }"};xe.prototype.equals=function(t){return this===t||Cl(t)&&ml(this).equals(ml(t))};xe.prototype.hashCode=function(){return ml(this).hashCode()};xe.prototype.has=function(t){return this._indices.hasOwnProperty(t)};xe.prototype.get=function(t,e){if(!this.has(t))return e;var i=this._indices[t],s=this._values.get(i);return s===void 0?this._defaultValues[t]:s};xe.prototype.set=function(t,e){if(this.has(t)){var i=this._values.set(this._indices[t],e===this._defaultValues[t]?void 0:e);if(i!==this._values&&!this.__ownerID)return vp(this,i)}return this};xe.prototype.remove=function(t){return this.set(t)};xe.prototype.clear=function(){var t=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:vp(this,t)};xe.prototype.wasAltered=function(){return this._values.wasAltered()};xe.prototype.toSeq=function(){return ml(this)};xe.prototype.toJS=function(){return Df(this)};xe.prototype.entries=function(){return this.__iterator(pn)};xe.prototype.__iterator=function(t,e){return ml(this).__iterator(t,e)};xe.prototype.__iterate=function(t,e){return ml(this).__iterate(t,e)};xe.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._values.__ensureOwner(t);return t?vp(this,e,t):(this.__ownerID=t,this._values=e,this)};xe.isRecord=Cl;xe.getDescriptiveName=bp;var bi=xe.prototype;bi[R2]=!0;bi[Sc]=bi.remove;bi.deleteIn=bi.removeIn=hp;bi.getIn=hM;bi.hasIn=qs.hasIn;bi.merge=X2;bi.mergeWith=W2;bi.mergeIn=dp;bi.mergeDeep=j2;bi.mergeDeepWith=$2;bi.mergeDeepIn=fp;bi.setIn=ap;bi.update=op;bi.updateIn=lp;bi.withMutations=vc;bi.asMutable=bc;bi.asImmutable=Mc;bi[r0]=bi.entries;bi.toJSON=bi.toObject=qs.toObject;bi.inspect=bi.toSource=function(){return this.toString()};function vp(r,t,e){var i=Object.create(Object.getPrototypeOf(r));return i._values=t,i.__ownerID=e,i}function bp(r){return r.constructor.displayName||r.constructor.name||"Record"}function ml(r){return Qm(r._keys.map(function(t){return[t,r.get(t)]}))}function w5(r,t){try{Object.defineProperty(r,t,{get:function(){return this.get(t)},set:function(e){np(this.__ownerID,"Cannot set on an immutable record."),this.set(t,e)}})}catch{}}var Tm=function(r,t){return Tm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])},Tm(r,t)};function C5(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Tm(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function Av(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],i=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function wm(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),s,n=[],a;try{for(;(t===void 0||t-- >0)&&!(s=i.next()).done;)n.push(s.value)}catch(o){a={error:o}}finally{try{s&&!s.done&&(e=i.return)&&e.call(i)}finally{if(a)throw a.error}}return n}function k5(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(wm(arguments[t]));return r}var uM=function(r){C5(t,r);function t(e){var i=this,s="EventError: "+e+"}";return i=r.call(this,s)||this,Object.setPrototypeOf(i,t.prototype),i}return t}(Error),D5=function(r,t){return{token:r+"-"+t,ownerIndex:r,id:t}},F5=0,vv=function(r,t){return new uM("Event listener with "+r.token+" id does not exist at Eventer with "+t+" id.")},Li=function(){function r(){this.id=++F5,this.lastEventIndex=0,this.topics=new Map}return r.prototype.on=function(t,e,i){var s=this.topics.get(t),n=i||D5(this.id,++this.lastEventIndex);return s?s.set(n,e):this.topics.set(t,new Map([[n,e]])),n},r.prototype.has=function(t,e){var i,s;if(e){var n=this.topics.get(e);if(n){var a=n.get(t);return a||vv(t,this.id)}else return new uM("Eventer with "+t.ownerIndex+" does not have "+e+".")}else{try{for(var o=Av(this.topics),l=o.next();!l.done;l=o.next()){var u=wm(l.value,2),d=u[0],n=u[1],a=n.get(t);if(a)return a}}catch(f){i={error:f}}finally{try{l&&!l.done&&(s=o.return)&&s.call(o)}finally{if(i)throw i.error}}return vv(t,this.id)}},r.prototype.off=function(t,e){var i,s;if(e){var n=this.topics.get(e);return!!(n&&n.delete(t))}else{try{for(var a=Av(this.topics),o=a.next();!o.done;o=a.next()){var l=wm(o.value,2),u=l[0],n=l[1];if(n.delete(t))return!0}}catch(d){i={error:d}}finally{try{o&&!o.done&&(s=a.return)&&s.call(a)}finally{if(i)throw i.error}}return!1}},r.prototype.allOff=function(){return this.topics.clear(),this},r.prototype.topicOff=function(t){return this.topics.delete(t)},r.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var s=this.topics.get(t),n=0;if(s){var a=new Map(s);a.forEach(function(o){o.apply(void 0,k5(e)),n++})}return n},r.prototype.listeners=function(t){var e=this.topics.get(t);return e||new Map},r}(),sf={exports:{}},bv;function V5(){if(bv)return sf.exports;bv=1,sf.exports=r,sf.exports.default=r;function r(N,U,O){O=O||2;var W=U&&U.length,P=W?U[0]*O:N.length,H=t(N,0,P,O,!0),j=[];if(!H||H.next===H.prev)return j;var Q,J,ht,ot,ut,dt,Et;if(W&&(H=l(N,U,H,O)),N.length>80*O){Q=ht=N[0],J=ot=N[1];for(var St=O;St<P;St+=O)ut=N[St],dt=N[St+1],ut<Q&&(Q=ut),dt<J&&(J=dt),ut>ht&&(ht=ut),dt>ot&&(ot=dt);Et=Math.max(ht-Q,ot-J),Et=Et!==0?32767/Et:0}return i(H,j,O,Q,J,Et,0),j}function t(N,U,O,W,P){var H,j;if(P===X(N,U,O,W)>0)for(H=U;H<O;H+=W)j=C(H,N[H],N[H+1],j);else for(H=O-W;H>=U;H-=W)j=C(H,N[H],N[H+1],j);return j&&V(j,j.next)&&(k(j),j=j.next),j}function e(N,U){if(!N)return N;U||(U=N);var O=N,W;do if(W=!1,!O.steiner&&(V(O,O.next)||T(O.prev,O,O.next)===0)){if(k(O),O=U=O.prev,O===O.next)break;W=!0}else O=O.next;while(W||O!==U);return U}function i(N,U,O,W,P,H,j){if(N){!j&&H&&m(N,W,P,H);for(var Q=N,J,ht;N.prev!==N.next;){if(J=N.prev,ht=N.next,H?n(N,W,P,H):s(N)){U.push(J.i/O|0),U.push(N.i/O|0),U.push(ht.i/O|0),k(N),N=ht.next,Q=ht.next;continue}if(N=ht,N===Q){j?j===1?(N=a(e(N),U,O),i(N,U,O,W,P,H,2)):j===2&&o(N,U,O,W,P,H):i(e(N),U,O,W,P,H,1);break}}}}function s(N){var U=N.prev,O=N,W=N.next;if(T(U,O,W)>=0)return!1;for(var P=U.x,H=O.x,j=W.x,Q=U.y,J=O.y,ht=W.y,ot=P<H?P<j?P:j:H<j?H:j,ut=Q<J?Q<ht?Q:ht:J<ht?J:ht,dt=P>H?P>j?P:j:H>j?H:j,Et=Q>J?Q>ht?Q:ht:J>ht?J:ht,St=W.next;St!==U;){if(St.x>=ot&&St.x<=dt&&St.y>=ut&&St.y<=Et&&b(P,Q,H,J,j,ht,St.x,St.y)&&T(St.prev,St,St.next)>=0)return!1;St=St.next}return!0}function n(N,U,O,W){var P=N.prev,H=N,j=N.next;if(T(P,H,j)>=0)return!1;for(var Q=P.x,J=H.x,ht=j.x,ot=P.y,ut=H.y,dt=j.y,Et=Q<J?Q<ht?Q:ht:J<ht?J:ht,St=ot<ut?ot<dt?ot:dt:ut<dt?ut:dt,Vt=Q>J?Q>ht?Q:ht:J>ht?J:ht,_t=ot>ut?ot>dt?ot:dt:ut>dt?ut:dt,jt=x(Et,St,U,O,W),ee=x(Vt,_t,U,O,W),Dt=N.prevZ,Ct=N.nextZ;Dt&&Dt.z>=jt&&Ct&&Ct.z<=ee;){if(Dt.x>=Et&&Dt.x<=Vt&&Dt.y>=St&&Dt.y<=_t&&Dt!==P&&Dt!==j&&b(Q,ot,J,ut,ht,dt,Dt.x,Dt.y)&&T(Dt.prev,Dt,Dt.next)>=0||(Dt=Dt.prevZ,Ct.x>=Et&&Ct.x<=Vt&&Ct.y>=St&&Ct.y<=_t&&Ct!==P&&Ct!==j&&b(Q,ot,J,ut,ht,dt,Ct.x,Ct.y)&&T(Ct.prev,Ct,Ct.next)>=0))return!1;Ct=Ct.nextZ}for(;Dt&&Dt.z>=jt;){if(Dt.x>=Et&&Dt.x<=Vt&&Dt.y>=St&&Dt.y<=_t&&Dt!==P&&Dt!==j&&b(Q,ot,J,ut,ht,dt,Dt.x,Dt.y)&&T(Dt.prev,Dt,Dt.next)>=0)return!1;Dt=Dt.prevZ}for(;Ct&&Ct.z<=ee;){if(Ct.x>=Et&&Ct.x<=Vt&&Ct.y>=St&&Ct.y<=_t&&Ct!==P&&Ct!==j&&b(Q,ot,J,ut,ht,dt,Ct.x,Ct.y)&&T(Ct.prev,Ct,Ct.next)>=0)return!1;Ct=Ct.nextZ}return!0}function a(N,U,O){var W=N;do{var P=W.prev,H=W.next.next;!V(P,H)&&F(P,W,W.next,H)&&A(P,H)&&A(H,P)&&(U.push(P.i/O|0),U.push(W.i/O|0),U.push(H.i/O|0),k(W),k(W.next),W=N=H),W=W.next}while(W!==N);return e(W)}function o(N,U,O,W,P,H){var j=N;do{for(var Q=j.next.next;Q!==j.prev;){if(j.i!==Q.i&&E(j,Q)){var J=w(j,Q);j=e(j,j.next),J=e(J,J.next),i(j,U,O,W,P,H,0),i(J,U,O,W,P,H,0);return}Q=Q.next}j=j.next}while(j!==N)}function l(N,U,O,W){var P=[],H,j,Q,J,ht;for(H=0,j=U.length;H<j;H++)Q=U[H]*W,J=H<j-1?U[H+1]*W:N.length,ht=t(N,Q,J,W,!1),ht===ht.next&&(ht.steiner=!0),P.push(v(ht));for(P.sort(u),H=0;H<P.length;H++)O=d(P[H],O);return O}function u(N,U){return N.x-U.x}function d(N,U){var O=f(N,U);if(!O)return U;var W=w(O,N);return e(W,W.next),e(O,O.next)}function f(N,U){var O=U,W=N.x,P=N.y,H=-1/0,j;do{if(P<=O.y&&P>=O.next.y&&O.next.y!==O.y){var Q=O.x+(P-O.y)*(O.next.x-O.x)/(O.next.y-O.y);if(Q<=W&&Q>H&&(H=Q,j=O.x<O.next.x?O:O.next,Q===W))return j}O=O.next}while(O!==U);if(!j)return null;var J=j,ht=j.x,ot=j.y,ut=1/0,dt;O=j;do W>=O.x&&O.x>=ht&&W!==O.x&&b(P<ot?W:H,P,ht,ot,P<ot?H:W,P,O.x,O.y)&&(dt=Math.abs(P-O.y)/(W-O.x),A(O,N)&&(dt<ut||dt===ut&&(O.x>j.x||O.x===j.x&&y(j,O)))&&(j=O,ut=dt)),O=O.next;while(O!==J);return j}function y(N,U){return T(N.prev,N,U.prev)<0&&T(U.next,N,N.next)<0}function m(N,U,O,W){var P=N;do P.z===0&&(P.z=x(P.x,P.y,U,O,W)),P.prevZ=P.prev,P.nextZ=P.next,P=P.next;while(P!==N);P.prevZ.nextZ=null,P.prevZ=null,S(P)}function S(N){var U,O,W,P,H,j,Q,J,ht=1;do{for(O=N,N=null,H=null,j=0;O;){for(j++,W=O,Q=0,U=0;U<ht&&(Q++,W=W.nextZ,!!W);U++);for(J=ht;Q>0||J>0&&W;)Q!==0&&(J===0||!W||O.z<=W.z)?(P=O,O=O.nextZ,Q--):(P=W,W=W.nextZ,J--),H?H.nextZ=P:N=P,P.prevZ=H,H=P;O=W}H.nextZ=null,ht*=2}while(j>1);return N}function x(N,U,O,W,P){return N=(N-O)*P|0,U=(U-W)*P|0,N=(N|N<<8)&16711935,N=(N|N<<4)&252645135,N=(N|N<<2)&858993459,N=(N|N<<1)&1431655765,U=(U|U<<8)&16711935,U=(U|U<<4)&252645135,U=(U|U<<2)&858993459,U=(U|U<<1)&1431655765,N|U<<1}function v(N){var U=N,O=N;do(U.x<O.x||U.x===O.x&&U.y<O.y)&&(O=U),U=U.next;while(U!==N);return O}function b(N,U,O,W,P,H,j,Q){return(P-j)*(U-Q)>=(N-j)*(H-Q)&&(N-j)*(W-Q)>=(O-j)*(U-Q)&&(O-j)*(H-Q)>=(P-j)*(W-Q)}function E(N,U){return N.next.i!==U.i&&N.prev.i!==U.i&&!L(N,U)&&(A(N,U)&&A(U,N)&&R(N,U)&&(T(N.prev,N,U.prev)||T(N,U.prev,U))||V(N,U)&&T(N.prev,N,N.next)>0&&T(U.prev,U,U.next)>0)}function T(N,U,O){return(U.y-N.y)*(O.x-U.x)-(U.x-N.x)*(O.y-U.y)}function V(N,U){return N.x===U.x&&N.y===U.y}function F(N,U,O,W){var P=z(T(N,U,O)),H=z(T(N,U,W)),j=z(T(O,W,N)),Q=z(T(O,W,U));return!!(P!==H&&j!==Q||P===0&&B(N,O,U)||H===0&&B(N,W,U)||j===0&&B(O,N,W)||Q===0&&B(O,U,W))}function B(N,U,O){return U.x<=Math.max(N.x,O.x)&&U.x>=Math.min(N.x,O.x)&&U.y<=Math.max(N.y,O.y)&&U.y>=Math.min(N.y,O.y)}function z(N){return N>0?1:N<0?-1:0}function L(N,U){var O=N;do{if(O.i!==N.i&&O.next.i!==N.i&&O.i!==U.i&&O.next.i!==U.i&&F(O,O.next,N,U))return!0;O=O.next}while(O!==N);return!1}function A(N,U){return T(N.prev,N,N.next)<0?T(N,U,N.next)>=0&&T(N,N.prev,U)>=0:T(N,U,N.prev)<0||T(N,N.next,U)<0}function R(N,U){var O=N,W=!1,P=(N.x+U.x)/2,H=(N.y+U.y)/2;do O.y>H!=O.next.y>H&&O.next.y!==O.y&&P<(O.next.x-O.x)*(H-O.y)/(O.next.y-O.y)+O.x&&(W=!W),O=O.next;while(O!==N);return W}function w(N,U){var O=new _(N.i,N.x,N.y),W=new _(U.i,U.x,U.y),P=N.next,H=U.prev;return N.next=U,U.prev=N,O.next=P,P.prev=O,W.next=O,O.prev=W,H.next=W,W.prev=H,W}function C(N,U,O,W){var P=new _(N,U,O);return W?(P.next=W.next,P.prev=W,W.next.prev=P,W.next=P):(P.prev=P,P.next=P),P}function k(N){N.next.prev=N.prev,N.prev.next=N.next,N.prevZ&&(N.prevZ.nextZ=N.nextZ),N.nextZ&&(N.nextZ.prevZ=N.prevZ)}function _(N,U,O){this.i=N,this.x=U,this.y=O,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}r.deviation=function(N,U,O,W){var P=U&&U.length,H=P?U[0]*O:N.length,j=Math.abs(X(N,0,H,O));if(P)for(var Q=0,J=U.length;Q<J;Q++){var ht=U[Q]*O,ot=Q<J-1?U[Q+1]*O:N.length;j-=Math.abs(X(N,ht,ot,O))}var ut=0;for(Q=0;Q<W.length;Q+=3){var dt=W[Q]*O,Et=W[Q+1]*O,St=W[Q+2]*O;ut+=Math.abs((N[dt]-N[St])*(N[Et+1]-N[dt+1])-(N[dt]-N[Et])*(N[St+1]-N[dt+1]))}return j===0&&ut===0?0:Math.abs((ut-j)/j)};function X(N,U,O,W){for(var P=0,H=U,j=O-W;H<O;H+=W)P+=(N[j]-N[H])*(N[H+1]+N[j+1]),j=H;return P}return r.flatten=function(N){for(var U=N[0][0].length,O={vertices:[],holes:[],dimensions:U},W=0,P=0;P<N.length;P++){for(var H=0;H<N[P].length;H++)for(var j=0;j<U;j++)O.vertices.push(N[P][H][j]);P>0&&(W+=N[P-1].length,O.holes.push(W))}return O},sf.exports}var z5=V5();const cM=Mw(z5);class dM{constructor(){this.i=!0}o(){return this.i}}class _5 extends dM{constructor(t,e){super(),this.u=t,this.i=e}S(t){return t!==this.u&&(this.u=t,this.i=!0),this}M(){return this.u}o(){return super.o()}}const Y=(r,t)=>({x:r,y:t}),Jn=(r,t)=>({x:r,y:t}),un=(r,t,e)=>({position:r,high:t,low:e}),Bt=(r,t,e)=>({x:r,y:t,z:e}),fM=r=>{const t=Array(0),e=Array(0);return r.length>0&&r.forEach(i=>{t.push(Y(i.position,i.high)),e.push(Y(i.position,i.low))}),[t,e]},Qt=(r,t)=>({min:r,max:t}),gM=(r,t,e,i)=>({x:Math.ceil(r),y:Math.ceil(t),width:Math.ceil(e),height:Math.ceil(i)}),Xt=(r,t=!0)=>new _5(r,t),Ra=(r=0,t=0,e=0,i=0)=>({left:r,top:t,right:e,bottom:i}),Ju=Ra,nl=(r,t)=>({left:t.left!==void 0?t.left:r.left,top:t.top!==void 0?t.top:r.top,right:t.right!==void 0?t.right:r.right,bottom:t.bottom!==void 0?t.bottom:r.bottom}),N5=xe({type:"color",r:1,g:1,b:1,a:1});class qr extends N5{constructor(t){super(t)}toUint32(){return this._!==void 0||(this._=I5(this.getR(),this.getG(),this.getB(),this.getA())),this._}toString(){return`color:${this.r},${this.g},${this.b},${this.a}`}setA(t){return this.set("a",t/255)}setR(t){return this.set("r",t/255)}setG(t){return this.set("g",t/255)}setB(t){return this.set("b",t/255)}getA(){return 255*this.get("a")}getR(){return 255*this.get("r")}getG(){return 255*this.get("g")}getB(){return 255*this.get("b")}getHighlight(){return this.C||(this.C=new qr({r:this.r+.45*(1-this.r),g:this.g+.45*(1-this.g),b:this.b+.45*(1-this.b),a:this.a<1?this.a+.45*(1-this.a):1})),this.C}getLighter(){return this.T||(this.T=new qr({r:this.r+.4*(1-this.r),g:this.g+.4*(1-this.g),b:this.b+.4*(1-this.b),a:this.a})),this.T}getDarker(){return this.F||(this.F=new qr({r:this.r-.4*(1-this.r),g:this.g-.4*(1-this.g),b:this.b-.4*(1-this.b),a:this.a})),this.F}toRGBAString(){return`rgba( ${255*this.r}, ${255*this.g}, ${255*this.b}, ${255*this.a} )`}}const uc=r=>!(!r||typeof r!="object"||!("type"in r)||r.type!=="color"),I=(r,t,e,i=255)=>new qr({r:r/255,g:t/255,b:e/255,a:i/255}),xs=r=>{const t=r.startsWith("#")?r.substring(1):r.startsWith("0x")?r.substr(2):r;switch(t.length){case 8:return new qr({r:+`0x${t.substring(0,2)}`/255,g:+`0x${t.substring(2,4)}`/255,b:+`0x${t.substring(4,6)}`/255,a:+`0x${t.substring(6,8)}`/255});case 6:return new qr({r:+`0x${t.substring(0,2)}`/255,g:+`0x${t.substring(2,4)}`/255,b:+`0x${t.substring(4,6)}`/255});case 4:return new qr({r:+`0x${t.charAt(0)}${t.charAt(0)}`/255,g:+`0x${t.charAt(1)}${t.charAt(1)}`/255,b:+`0x${t.charAt(2)}${t.charAt(2)}`/255,a:+`0x${t.charAt(3)}${t.charAt(3)}`/255});case 3:return new qr({r:+`0x${t.charAt(0)}${t.charAt(0)}`/255,g:+`0x${t.charAt(1)}${t.charAt(1)}`/255,b:+`0x${t.charAt(2)}${t.charAt(2)}`/255});default:throw new Error(`ColorHEX parsing error | input: ${r}`)}},B5=(r,t=1,e=1)=>{let i,s,n;r/=360;const a=Math.floor(6*r),o=6*r-a,l=e*(1-t),u=e*(1-o*t),d=e*(1-(1-o)*t);switch(a%6){case 0:i=e,s=d,n=l;break;case 1:i=u,s=e,n=l;break;case 2:i=l,s=e,n=d;break;case 3:i=l,s=u,n=e;break;case 4:i=d,s=l,n=e;break;default:i=e,s=l,n=u}return new qr({r:i,g:s,b:n})},L5=r=>I(255&r,255&(r>>=8),255&(r>>=8),255&(r>>=8)),to=new qr({}),$e=I(0,0,0,0),I5=(r,t,e,i=255)=>(i<<24|e<<16|t<<8|r)>>>0,P5=(r,t)=>r.value-t.value,U5=xe({type:"lut",steps:[],title:"",units:"",interpolate:!0,color:I(0,0,0,255),length:0,min:0,max:0,subranges:[],isValid:!1,percentageValues:!1}),Mv=r=>{const{steps:t}=r,e=t.length;t.sort(P5);const[i,s]=e>0?[t[0].value,t[e-1].value]:[0,0],n=e>0?e-1:0,a=Array(n);for(let o=0;o<n;o+=1)a[o]={min:t[o],max:t[o+1]};return{min:i,max:s,length:e,steps:t,subranges:a,isValid:e>0&&i!==s}};class O5 extends U5{constructor(t){super(((e,i)=>({steps:e.steps,title:e.title,units:e.units,interpolate:e.interpolate,percentageValues:e.percentageValues,color:e.color,length:i.length,min:i.min,max:i.max,subranges:i.subranges,isValid:i.isValid}))(t,Mv(t)))}toString(){return`LUT:interpolate=${this.interpolate},steps=${this.steps.length},percentage=${this.percentageValues}`}setSteps(t){return this.merge(Mv({...this,steps:t}))}getSteps(){return this.get("steps")}setTitle(t){return this.set("title",t)}getTitle(){return this.get("title")}setUnits(t){return this.set("units",t)}getUnits(){return this.get("units")}setInterpolation(t){return this.set("interpolate",t)}getInterpolation(){return this.get("interpolate")}setFallbackColor(t){return this.set("color",t)}getFallbackColor(){return this.get("color")}setPercentageValues(t){return this.set("percentageValues",t)}getPercentageValues(){return this.get("percentageValues")}getColors(t){if(Array.isArray(t)){if(Array.isArray(t[0])){const n=t,a=n.length,o=n[0].length,l=[...Array(a)].map(()=>Array(o));for(let u=0;u<a;u+=1)for(let d=0;d<o;d+=1)l[u][d]=this.I(n[u][d]);return l}const e=t,i=e.length,s=Array(i);for(let n=0;n<i;n+=1)s[n]=this.I(e[n]);return s}return this.I(t)}I(t){const{steps:e}=this,i=e.length;if(i===0)return this.getFallbackColor();if(i===1)return e[0].color||this.color;if(this.interpolate){for(let o=0;o<i-1;o+=1){const l=e[o],u=e[o+1],d=Math.min(l.value,u.value),f=Math.max(l.value,u.value);if(t>=d&&t<=f){if(d===f)return l.color;const y=(t-l.value)/(u.value-l.value);return s=l.color,n=u.color,a=y,new qr({r:s.r+(n.r-s.r)*a,g:s.g+(n.g-s.g)*a,b:s.b+(n.b-s.b)*a,a:s.a+(n.a-s.a)*a})}}return t<e[0].value?e[0].color:e[i-1].color}var s,n,a;for(let o=i-1;o>=0;o-=1)if(t>=e[o].value)return e[o].color;return e[0].color}}const G5=xe({type:"fillstyle",fillType:"empty"});class Y5 extends G5{toString(){return"emptyFill"}}const Ft=new Y5,yM=r=>!!(r&&typeof r=="object"&&"type"in r&&r.type==="fillstyle"&&"fillType"in r&&r.fillType==="empty"),H5=xe({type:"fillstyle",fillType:"solid",color:I(255,255,255)});class mM extends H5{}class it extends mM{constructor(t){super({...t,fillType:"solid"})}toString(){return`solidFill:${this.color.toString()}`}setColor(t){return uc(t)?this.set("color",t):this.set("color",t(this.get("color")))}getColor(){return this.get("color")}setA(t){return this.setColor(this.getColor().setA(t))}setR(t){return this.setColor(this.getColor().setR(t))}setG(t){return this.setColor(this.getColor().setG(t))}setB(t){return this.setColor(this.getColor().setB(t))}}const ue=r=>!!(r&&typeof r=="object"&&"type"in r&&r.type==="fillstyle"&&"fillType"in r&&r.fillType==="solid");class Rv extends mM{constructor(t){super({...t,fillType:"individual"})}toString(){return`individualPointFill:${this.color.toString()}`}setFallbackColor(t){return uc(t)?this.set("color",t):this.set("color",t(this.get("color")))}getFallbackColor(){return this.get("color")}}const ws=r=>!!(r&&typeof r=="object"&&"type"in r&&r.type==="fillstyle"&&"fillType"in r&&r.fillType==="individual");xe({type:"fillstyle",fillType:"palette",lut:new O5({steps:[]}),lookUpProperty:"value"});const Ti=r=>!!(r&&typeof r=="object"&&"type"in r&&r.type==="fillstyle"&&"fillType"in r&&r.fillType==="palette"),Mr={linear:(r,t,e)=>{const i=t-r;return s=>s<e?r+i/e*s:t},easeIn:(r,t,e)=>i=>i<e?r+Math.abs(2*(Math.sqrt(.5)*i/e)**2)*(t-r):t,easeOut:(r,t,e)=>i=>i<e?r+Math.abs(1-2*(Math.sqrt(.5)*(1-i/e))**2)*(t-r):t,ease:(r,t,e)=>i=>i<e?r+(i<e/2?.5*(i/e*2)**2.5:.5+.5*(1-(1-2*(i/e-.5))**2.5))*(t-r):t,logarithmic:r=>{const t=Tp(r);return(e,i,s)=>{const n=t(e),a=t(i);return o=>o<s?r**(n+Math.abs(1-2*(Math.sqrt(.5)*(1-o/s))**2)*(a-n)):i}}};class Mp{constructor(t,e,i,s=Mr.linear,n){this.delta=0,this.nextAnimations=new Array,this.P=!1,this.easing=Mr.linear,this.D=new Li,this.isOver=()=>(this.delta===this.duration||this.P)&&this.nextAnimations.length===0,this.values=t,this.action=e,this.duration=i,this.easing=s,this.L=n,this.eases=t.map(([a,o])=>s(a,o,i))}R(){this.D.emit("start")}start(){return this.L.includes(this)||this.L.push(this),this}addNextAnimations(t){return t instanceof Array?t.forEach(e=>this.nextAnimations.push(e)):this.nextAnimations.push(t),this}NextAnimation(t,e,i=this.duration,s=this.easing){const n=new Mp(t,e,i,s,this.L);return this.nextAnimations.push(n),n}onAnimationStart(t,e){return this.D.on("start",t,e)}onAnimationEnd(t,e){return this.D.on("end",t,e)}onEveryAnimationEnd(t,e){return this.D.on("everyEnd",t,e)}onAllAnimationEnd(t,e){return this.D.on("allEnd",t,e)}allOffAnimationEnd(){return this.D.topicOff("end"),this}allOffEveryAnimationEnd(){return this.D.topicOff("everyEnd"),this}allOffAllAnimationEnd(){return this.D.topicOff("allEnd"),this}offAnimationEnd(t){return this.D.off(t,"end")}offEveryAnimationEnd(t){return this.D.off(t,"everyEnd")}offAllAnimationEnd(t){return this.D.off(t,"allEnd")}finish(t=!0){if(this.P=!0,this.L.splice(this.L.indexOf(this),1),this.nextAnimations.length>0){const e=this.nextAnimations[0];return t&&(this.D.listeners("allEnd").forEach((i,s)=>e.onAllAnimationEnd(i,s)),this.D.listeners("everyEnd").forEach((i,s)=>e.onEveryAnimationEnd(i,s))),e.addNextAnimations(this.nextAnimations.slice(1)),e.start(),t&&(this.D.emit("end",e),this.D.emit("everyEnd",e)),e}t&&(this.D.emit("end",void 0),this.D.emit("everyEnd",void 0),this.D.emit("allEnd"))}finishAll(t=!0){let e=this;for(;e;)e=e.finish(t)}getFinalValues(){return this.nextAnimations.length>0?this.nextAnimations[this.nextAnimations.length-1].values.map(wv):this.values.map(wv)}getTimeUntilFinish(){let t=this.duration-this.delta;for(let e=0;e<this.nextAnimations.length;e+=1)t+=this.nextAnimations[e].duration-this.nextAnimations[e].delta;return t}}const Zn=(r,t=60)=>{t>60&&console.log("Note: Animator FPS is usually capped at 60 by the browser!");const e=[];let i,s,n=0;const a=()=>{i=void 0;const o=Date.now();s=s||o,n=o-s,n/1e3>=1/t&&(s=Date.now()-n%(1e3/t),e.forEach(l=>{l.delta===0&&l.R(),l.delta+=n-n%(1e3/t),l.delta>l.duration&&(l.delta=l.duration),l.action(l.eases.map(u=>u(l.delta))),l.delta===l.duration&&l.finish()}),r()),e.length>0?i=nt.requestAnimationFrame(a):(i=void 0,s=void 0)};return(o=1e3,l=Mr.linear)=>(u,d,f=o)=>{const y=new Mp(u,d,f,l,e).start();return i||(i=nt.requestAnimationFrame(a)),y}};var Es,Ts;(function(r){r.circle="circle",r.ellipse="ellipse"})(Es||(Es={})),function(r){r.closestSide="closest-side",r.closestCorner="closest-corner",r.farthestSide="farthest-side",r.farthestCorner="farthest-corner"}(Ts||(Ts={}));const X5=xe({type:"fillstyle",fillType:"radial-gradient",stops:[{color:xs("#f00"),offset:0},{color:xs("#0f0"),offset:1}],position:Y(.5,.5),shape:Es.ellipse,extent:Ts.farthestCorner});class os extends X5{constructor(t){if(super(t),t===null||t&&t.stops===null||t&&t.stops&&!Array.isArray(t.stops)||t&&t.stops&&Array.isArray(t.stops)&&t.stops.length<2)throw new Error("RadialGradientFill requires minimum two color stops to be defined.")}toString(){return`radialGradientFill:${this.shape},${this.extent},${this.position.x},${this.position.y},${this.stops.map(t=>`${t.offset},${t.color.toString()}`).join(",")}`}setColorStops(t){if(t.length<2)throw new Error("Minimum of two color stops required");return this.set("stops",t)}getColorStops(){return this.get("stops")}setPosition(t){return this.set("position",t)}getPosition(){return this.get("position")}setShape(t){return this.set("shape",t)}getShape(){return this.get("shape")}setExtent(t){return this.set("extent",t)}getExtent(){return this.get("extent")}}const oi=r=>!!(r&&typeof r=="object"&&"type"in r&&r.type==="fillstyle"&&"fillType"in r&&r.fillType==="radial-gradient"),W5=xe({type:"fillstyle",fillType:"linear-gradient",stops:[{color:xs("#f00"),offset:0},{color:xs("#0f0"),offset:1}],angle:0});class ps extends W5{constructor(t){if(super(t),t===null||t&&t.stops===null||t&&t.stops&&!Array.isArray(t.stops)||t&&t.stops&&Array.isArray(t.stops)&&t.stops.length<2)throw new Error("LinearGradientFill requires minimum two color stops to be defined.")}toString(){return`linearGradientFill:${this.angle},${this.stops.map(t=>`${t.offset},${t.color.toString()}`).join(",")}`}setColorStops(t){if(t.length<2)throw new Error("Minimum of two color stops required");const e=t.sort((i,s)=>i.offset-s.offset);return this.set("stops",e)}getColorStops(){return this.get("stops")}setAngle(t,e){return this.set("angle",e?LM(t):t)}getAngle(t){return t?Ar(this.get("angle")):this.get("angle")}}const li=r=>!!(r&&typeof r=="object"&&"type"in r&&r.type==="fillstyle"&&"fillType"in r&&r.fillType==="linear-gradient"),q5=xe({type:"linestyle",lineType:"empty"}),At=new class extends q5{constructor(){super(...arguments),this.thickness=0}setThickness(r){return this}getThickness(){return 0}V(){return 0}setFillStyle(r){return this}getFillStyle(){return Ft}},Ev=r=>!(!r||typeof r!="object"||!("lineType"in r)||r.lineType!=="empty");class pM{constructor(t,e,i,s){this.cellIndex=t,this.cellSpan=e,this.cellsAmount=i,this.observedAmount=s,this.x=new jy,this.y=new jy,this.z=new jy,this.D=new Li;const n={...t},a={...e};if(s){const o=f=>{this.cellsAmount.x=f.reduce(cc,0),this.cellIndex.x=f.reduce((y,m,S)=>S>=n.x?y:y+m,0),this.cellSpan.x=f.reduce((y,m,S)=>S>=n.x&&S<n.x+a.x?y+m:y,0),this.D.emit("cell-resize")},l=s.x.O(o);o(s.x.M());const u=f=>{this.cellsAmount.y=f.reduce(cc,0),this.cellIndex.y=f.reduce((y,m,S)=>S>=n.y?y:y+m,0),this.cellSpan.y=f.reduce((y,m,S)=>S>=n.y&&S<n.y+a.y?y+m:y,0),this.D.emit("cell-resize")},d=s.y.O(u);u(s.y.M()),this.N=()=>{s.x.G(l),s.y.G(d)}}}W(){return this.N&&(this.N(),this.N=void 0),this}U(t){return this.D.on("cell-resize",t)}Y(t){return this.D.off(t,"cell-resize")}}class jy extends dM{constructor(){super(...arguments),this.H=0,this.$=10,this.X=1}j(){return this.i=!1,this}Z(){return this.i=!0,this}getInnerStart(){return this.H}getInnerEnd(){return this.$}getInnerInterval(){return Math.abs(this.getInnerEnd()-this.getInnerStart())}J(t,e){return this.H=t,this.$=e,this.K(),this}q(t){return this.X=t,this.K(),this}tt(t){return t/this.X}K(){const t=this.tt(this.$-this.H),e=this.X;this.it!==void 0&&xi(t,this.it)!==!1||(this.i=!0,this.st=e,this.it=t)}et(){return this.it}ht(){return this.st}rt(){return this.$<this.H}nt(t,e){return!0}}const cs={d1:r=>new r.scale1DConstructor(0,1,1,void 0),d2:r=>new r.scaleXYConstructor().ot({x:0,y:0},{x:1,y:1},{x:1,y:1},void 0),d3:()=>new pM({x:0,y:0},{x:1,y:1},{x:1,y:1},void 0)},pl=(r,t,e)=>t===e?r:e.ut(t.ct(r)),gt=(r,t,e)=>{if(t===e)return r;const i=t instanceof dn?t.x:t.x instanceof dn?t.x.x:t.x.dt,s=t instanceof dn?t.y:t.y instanceof dn?t.y.y:t.y.dt,n=e instanceof dn?e.x:e.x instanceof dn?e.x.x:e.x.dt,a=e instanceof dn?e.y:e.y instanceof dn?e.y.y:e.y.dt;return{...r,x:pl(r.x,i,n),y:pl(r.y,s,a)}},j5=(r,t,e)=>{if(t.id==="axes"&&e.id==="world")return t.chart.At.ft(r);if(t.id==="world"&&e.id==="axes")return t.chart.At.yt(r);if(t.id===e.id)return r;throw new Error("LC JS translatePoint3D misusage | originCoordinateSystem and targetCoordinateSystem arguments must be either Chart3D.coordsWorld or Chart3D.coordsAxis")},$5=(...r)=>{if(r.length===0)return{remove:se};let t=!1;const e=r.map(n=>n.onIntervalChange((a,o,l)=>((u,d,f)=>{t||(t=!0,r.filter(y=>y!==u).forEach(y=>y.St(d,f,!1,u.getStopped(),"synchronizedAxis")),t=!1)})(n,o,l)));let i=!1;const s=r.map(n=>n.onStoppedStateChanged((a,o)=>((l,u)=>{i||(i=!0,r.filter(d=>d!==l).forEach(d=>d.setStopped(u)),i=!1)})(n,o)));return{remove:()=>{r.forEach((n,a)=>{n.offIntervalChange(e[a]),n.offStoppedStateChanged(s[a])})}}};class Qu extends Error{constructor(t,e){super(`ChartError: ${t} ${e?`in ${e.constructor.name}`:""}`),Object.setPrototypeOf(this,Qu.prototype)}}class Ri extends Error{constructor(t,e,i=!1){const s=`EngineError: ${t} ${e?`in ${e.constructor.name}`:""}`;super(s),i&&nt.alert(s),Object.setPrototypeOf(this,Ri.prototype)}}class Rp extends Ri{constructor(t){super(t),Object.setPrototypeOf(this,Rp.prototype)}}var Me,Sr,ke,qt;(function(r){r[r.Content=0]="Content",r[r.PaddedContent=1]="PaddedContent",r[r.PaddedBackground=2]="PaddedBackground",r[r.Everything=3]="Everything"})(Me||(Me={})),function(r){r[r.never=0]="never",r[r.always=1]="always",r[r.whenHovered=2]="whenHovered",r[r.whenDragged=3]="whenDragged",r[r.whenNotDragged=4]="whenNotDragged",r[r.whenHoveredOrDragged=5]="whenHoveredOrDragged"}(Sr||(Sr={})),function(r){r[r.notDraggable=0]="notDraggable",r[r.draggable=1]="draggable",r[r.onlyHorizontal=2]="onlyHorizontal",r[r.onlyVertical=3]="onlyVertical"}(ke||(ke={})),function(r){r[r.Up=0]="Up",r[r.Right=1]="Right",r[r.Down=2]="Down",r[r.Left=3]="Left"}(qt||(qt={}));const nt=typeof window<"u"?window:typeof global<"u"&&global._lcjs?global._lcjs:{},Tv=(r,t)=>r.x===t.x&&r.y===t.y,rf=r=>r!==bt&&r!==kt&&!Number.isNaN(r)&&Number.isFinite(r)&&r!==1/0&&r!==-1/0,wv=r=>r[1],Qh=r=>r.dispose(),se=()=>{},xi=(r,t)=>r===t,Jt=(r,t,e)=>e>t?Math.min(Math.max(r,t),e):Math.min(Math.max(r,e),t),Ff=r=>Array.prototype.concat.apply([],r),De=(r,t)=>r!==void 0?r:t,SM=r=>r.vt(),xM=r=>r.bt(),AM=r=>r.xt(),vM=r=>r.Mt(),bM=r=>r.min.x,MM=r=>r.max.x,RM=r=>r.min.y,EM=r=>r.max.y,hh=(r,t,e,i,s)=>{if(r.length>0){let n=s?i(s):void 0;for(let a=0;a<r.length;a+=1){const o=t(r[a]);o!==void 0&&(n=n!==void 0?e(n,o):o)}return n}if(s)return i(s)},Cv=(r,t)=>r.position===t.position&&r.high===t.high&&r.low===t.low,J5=Y(0,1),Z5=Y(1,0),Q5=Y(0,-1),K5=Y(-1,0),tC=Y(0,0),TM=r=>{switch(r){case qt.Up:return J5;case qt.Right:return Z5;case qt.Down:return Q5;case qt.Left:return K5;default:return tC}},kv=r=>r===qt.Left||r===qt.Right,xt=r=>{r.stopPropagation(),r.preventDefault()},Ph=(r,t)=>{if(!t)return r;const e=r.length,i=new Float32Array(2*e);let s=0;for(let n=0;n<e;n+=1){const a=r[n],o=Math.fround(a);i[s+0]=o,i[s+1]=a-o,s+=2}return i},Rr=(r,t)=>{if(!t){const n=r.length,a=new Float32Array(2*n);let o=0;for(let l=0;l<n;l+=1){const u=r[l];a[o+0]=u.x,a[o+1]=u.y,o+=2}return a}const e=r.length,i=new Float32Array(4*e);let s=0;for(let n=0;n<e;n+=1){const a=r[n],o=Math.fround(a.x),l=Math.fround(a.y);i[s+0]=o,i[s+1]=l,i[s+2]=a.x-o,i[s+3]=a.y-l,s+=4}return i},Ep=r=>{const t=r.length,e=new Float32Array(3*t);let i=0;for(let s=0;s<t;s+=1){const n=r[s];e[i+0]=n.x,e[i+1]=n.y,e[i+2]=n.z,i+=3}return e},wM=r=>t=>{const e=r.indexOf(t);e>=0&&r.splice(e,1)},CM=r=>{let t=r.length;for(let e=0;e<t-1;e+=1)r[e].x===r[e+1].x&&r[e].y===r[e+1].y&&(r.splice(e,1),e-=1,t-=1);return r},Tp=r=>{const t=Math.log(r);return e=>Math.log(e)/t},eC=Tp(Math.E),kM=(r,t)=>{const e=t[r];return e?e():void 0},Dv=(r,t)=>{let e;if(t)e=t;else{const i={x:0,y:0};for(let s=0;s<r.length;s+=1)i.x+=r[s].x/r.length,i.y+=r[s].y/r.length;e=i}return r.sort((i,s)=>Vm(pe(i,e))-Vm(pe(s,e)))},ls=(r,t,e)=>{if(r.length===0)return e.canReturnB===!1?t.slice():t;const i=t.length;if(i<1e5)return r.push.apply(r,t),r;for(let s=0;s<i;s+=1)r.push(t[s]);return r},ms=(r,t,e)=>e<0?r:e>1?t:I(r.getR()+e*(t.getR()-r.getR()),r.getG()+e*(t.getG()-r.getG()),r.getB()+e*(t.getB()-r.getB()),r.getA()+e*(t.getA()-r.getA())),Cm=r=>r.getA()===255?r:r.setA(255),Vf=(()=>{const r=I(0,0,0);return t=>(t=Cm(t),new os({shape:Es.circle,extent:Ts.farthestCorner,position:{x:.2,y:.8},stops:[{offset:0,color:t},{offset:1,color:ms(t,r,.5)}]}))})(),ei=(()=>{const r=t=>{var e;if(t){if(ue(t))return t.getColor().getA()===0?void 0:t.getColor();if(oi(t)||li(t)){const i=t.getColorStops();return i.length===3?i[1].color:(e=i[0])===null||e===void 0?void 0:e.color}Ti(t)}};return(t,e,i,s)=>{const n=[];if(s.fill&&n.push(s.fill),s.fill2&&n.push(s.fill2),s.stroke){const u=s.stroke.getFillStyle();u!==Ft&&n.push(u)}if(s.point3D){const u=s.point3D;n.push(u.getFillStyle())}let a;if(s.behavior&&s.behavior.colorStep===!0){const[u,d]=n.reduce((f,y)=>{if(f[0]&&f[1])return f;const m=r(y);return m&&(f[0]===void 0?f[0]=m:f[1]=m),f},[void 0,void 0]);a=u&&d?(o=u)===(l=d)||o.getR()===l.getR()&&o.getG()===l.getG()&&o.getB()===l.getB()?Vf(o):(o=Cm(o),l=Cm(l),new ps({angle:0,stops:[{offset:0,color:l},{offset:.5,color:l},{offset:.5,color:o},{offset:1,color:o}]})):e.uiButtonFillStyle}else{const u=n.reduce((d,f)=>d||r(f),void 0);a=u?i?new it({color:u}):Vf(u):e.uiButtonFillStyle}var o,l;t.setButtonOnFillStyle(a)}})(),ji=r=>{const t=r;if(Ti(t))return{lut:t.getPalette(),lookUpProperty:t.getLookUpProperty()}},wp=r=>{let t=0;return()=>(t+=1,`${r}-${t}`)},ys=(r,t)=>{let e=typeof r=="string"?r:String(r);const i=e.indexOf(".");let s=i>=0?i:e.length;for(;s<t;s+=1)e=`0${e}`;return e},Kt=(r,t)=>typeof r=="function"?r(t):r,ch=r=>r.ctrlKey?Math.sign(r.deltaY)*Math.min(.05*Math.abs(r.deltaY),1):Math.sign(r.deltaY),wn=(r,t)=>t(),DM=()=>new Error(`LightningChart JS encountered an unexpected error.
Please report this issue to https://lightningchart.com/js-charts/docs/contact`);new it({color:I(255,255,255,1)});const km=r=>r===_e||r.min.x===_e.min.x&&r.max.x===_e.max.x&&r.min.y===_e.min.y&&r.max.y===_e.max.y,rh=r=>Array.from(new Set(r)),$y=r=>r.filter(t=>t!==void 0),dh=r=>typeof r=="boolean"?r?1:0:r>1?1:r<0?0:r,FM=(r,t,e)=>{t.length<=0||(r.setText(e.label).setOn(t[0].getVisible()),e.style&&r.setButtonOnFillStyle(e.style),e.toggleVisibilityOnClick&&r.onSwitch((i,s)=>t.forEach(n=>n.setVisible(s))),r.onMouseEnter(()=>t.forEach(i=>i.setHighlight(!0))),r.onMouseLeave(()=>t.forEach(i=>i.setHighlight(!1))),t.forEach(i=>i.onMouseEnter(()=>r.setHighlight(!0))),t.forEach(i=>i.onMouseLeave(()=>r.setHighlight(!1))),t.forEach(i=>i.onTouchStart(()=>r.setHighlight(!0))),t.forEach(i=>i.onTouchEnd(()=>r.setHighlight(!1))))},Nl=(r,t)=>{throw new Error(t)},VM=()=>{const r=Zn(()=>{});let t;return(e,i,s,n)=>{const a=n==null?void 0:n.onStart,o=n==null?void 0:n.onCompleted,l=(n==null?void 0:n.easing)||Mr.ease,u=(n==null?void 0:n.durationMs)||1e3;let d;if(t)if(t.nextAnimations.length===0){const f=t.NextAnimation([[e,i]],([y])=>{t=f,s(y)},u,l);d=f}else{e=t.nextAnimations.pop().values[0][0];const f=t.NextAnimation([[e,i]],([y])=>{t=f,s(y)},u,l);d=f}else d=r(u,l)([[e,i]],([f])=>{s(f)}),t=d;d.onAnimationEnd(()=>{t=void 0}),a&&d.onAnimationStart(a),o&&d.onAnimationEnd(o)}},Tc=r=>{let t;return()=>t||(t=r(),t)},Bs=r=>{if(r===At)return 0;const t=r.getThickness();return t<0?1:1*t},zM=(r,t,e,i)=>{const s=`LightningChart JS Resources not found.
resourcesBaseUrl: "${r}"
initiator: ${e}
resource url: ${t}
For more information, please see https://lightningchart.com/js-charts/docs/troubleshooting/error-resources-not-found/`;if(i.shouldCrash)throw nt.alert(s),new Error(s);nt.console.warn(s)},Jy=(r,t,e,i=0)=>{if(r<e(i)||e(t)<r)return;const s=t;for(;i!==t;){const a=Math.ceil((i+t)/2);r<e(a)?t=a-1:i=a}const n=Math.abs(r-e(i));return i<s&&Math.abs(r-e(i+1))<n?i+1:i},Bl=()=>{const r=new Map;return{_t:t=>(t.setMouseEnterEventHandler((e,i,s)=>{const n=s&&r.get(s);n&&n.wt(e,i,s)}),t.setMouseLeaveEventHandler((e,i,s)=>{const n=s&&r.get(s);n&&n.Ct(e,i,s)}),t.setMouseClickEventHandler((e,i,s)=>{const n=s&&r.get(s);n&&n.kt(e,i,s)}),t.setMouseDoubleClickEventHandler((e,i,s)=>{const n=s&&r.get(s);n&&n.Tt(e,i,s)}),t.setMouseDownEventHandler((e,i,s)=>{const n=s&&r.get(s);n&&n.Ft(e,i,s)}),t.setMouseUpEventHandler((e,i,s)=>{const n=s&&r.get(s);n&&n.It(e,i,s)}),t.setMouseMoveEventHandler((e,i,s)=>{const n=s&&r.get(s);n&&n.Pt(e,i,s)}),t.setMouseDragEventHandler((e,i,s,n,a,o)=>{const l=o&&r.get(o);l&&l.Dt(e,i,s,n,a,o)}),t.setMouseDragStartEventHandler((e,i,s,n)=>{const a=n&&r.get(n);a&&a.Bt(e,i,s,n)}),t.setMouseDragStopEventHandler((e,i,s,n,a)=>{const o=a&&r.get(a);o&&o.Lt(e,i,s,n,a)}),t.setMouseWheelEventHandler((e,i,s)=>{const n=s&&r.get(s);n&&n.Rt(e,i,s)}),t.setTouchStartEventHandler((e,i,s)=>{const n=s&&r.get(s);n&&n.Et(e,i,s)}),t.setTouchMoveEventHandler((e,i,s)=>{const n=s&&r.get(s);n&&n.zt(e,i,s)}),t.setTouchEndEventHandler((e,i,s)=>{const n=s&&r.get(s);n&&n.Vt(e,i,s)}),t),Ot:(t,e)=>{r.set(t,e)},Nt:()=>{r.clear()}}},Qn={left:0,right:0,top:0,bottom:0},_M=()=>Math.round(Math.random()*Number.MAX_SAFE_INTEGER),Dm=(r,t,e)=>{t&&t.Gt();const i=e();return{Wt:r,Gt:()=>{i.forEach(s=>r.Ut(s))}}},ft={add:(r,t)=>Bt(r.x+t,r.y+t,r.z+t),addVec(r,...t){const e={x:r.x,y:r.y,z:r.z};for(const i of t)e.x+=i.x,e.y+=i.y,e.z+=i.z;return e},subtract:(r,t)=>Bt(r.x-t,r.y-t,r.z-t),subtractVec(r,...t){const e={x:r.x,y:r.y,z:r.z};for(const i of t)e.x-=i.x,e.y-=i.y,e.z-=i.z;return e},multiply:(r,t)=>Bt(r.x*t,r.y*t,r.z*t),divide:(r,t)=>Bt(r.x/t,r.y/t,r.z/t),multiplyVec(r,...t){const e={x:r.x,y:r.y,z:r.z};for(const i of t)e.x*=i.x,e.y*=i.y,e.z*=i.z;return e},divideVec(r,...t){const e={x:r.x,y:r.y,z:r.z};for(const i of t)e.x/=i.x,e.y/=i.y,e.z/=i.z;return e},length:r=>Math.sqrt(r.x*r.x+r.y*r.y+r.z*r.z),normalize:r=>ft.divide(r,ft.length(r)),dot:(r,t)=>r.x*t.x+r.y*t.y+r.z*t.z,cross:(r,t)=>Bt(r.y*t.z-r.z*t.y,r.z*t.x-r.x*t.z,r.x*t.y-r.y*t.x),angle:(r,t)=>Math.acos(ft.dot(r,t)/(ft.length(r)*ft.length(t))),rotateAroundAxis(r,t,e){const i=Math.cos(e),s=Math.sin(e),n=ft.dot(t,r),a=ft.cross(t,r);return ft.addVec(ft.multiply(r,i),ft.addVec(ft.multiply(t,(1-i)*n),ft.multiply(a,s)))},lerp:(r,t,e)=>(e=Jt(e,0,1),ft.addVec(ft.multiply(r,1-e),ft.multiply(t,e))),equals:(r,t)=>xi(r.x,t.x)&&xi(r.y,t.y)&&xi(r.z,t.z),abs:r=>({x:Math.abs(r.x),y:Math.abs(r.y),z:Math.abs(r.z)}),sign:r=>({x:Math.sign(r.x),y:Math.sign(r.y),z:Math.sign(r.z)})},bt=Number.MAX_SAFE_INTEGER,kt=-Number.MAX_SAFE_INTEGER,_e=Qt(Y(bt,bt),Y(kt,kt)),xr=Qt(Bt(bt,bt,bt),Bt(kt,kt,kt)),Fm=(r,t)=>{const e=Math.log(r)/Math.log(t);return Math.floor((i=>(Math.ceil(i)-i<1e-4?i=Math.ceil(i):i-Math.floor(i)<1e-4&&(i=Math.floor(i)),i))(e))},zf=(r,t)=>!(t.min.x>r.max.x||t.max.x<r.min.x||t.min.y>r.max.y||t.max.y<r.min.y),_f=(r,t)=>!(r[1].x<t[0].x||r[0].x>t[1].x||r[3].y<t[0].y||r[0].y>t[3].y),NM=(r,t)=>Qt(Y(Math.max(Math.min(r[0].x,r[2].x),Math.min(t[0].x,t[2].x)),Math.max(Math.min(r[0].y,r[2].y),Math.min(t[0].y,t[2].y))),Y(Math.min(Math.max(r[0].x,r[2].x),Math.max(t[0].x,t[2].x)),Math.min(Math.max(r[0].y,r[2].y),Math.max(t[0].y,t[2].y)))),BM=r=>{const t=r.length;for(let e=0;e<t;e+=1)for(let i=e+1;i<t;i+=1)if(zf(r[e],r[i]))return!0;return!1},cc=(r,t)=>t+r,iC=(r,t,e)=>{const i=pe(t,r),s=i.x*i.x+i.y*i.y;if(s===0)return r;const n=pe(e,r),a=(n.x*i.x+n.y*i.y)/s;return a<=0?r:a>=1?t:Y(r.x+a*i.x,r.y+a*i.y)},Xn=(r,t,e)=>e>t?r>=t&&r<=e:r>=e&&r<=t,Kn=(r,t)=>{const e=r.x-t.x,i=r.y-t.y;return Math.sqrt(e*e+i*i)},Fv=(r,t)=>{const e=r.x-t.x,i=r.y-t.y;return e*e+i*i},wa=(r,t,e)=>zt(r,Yt(pe(t,r),e)),Zy=(r,t,e)=>ft.addVec(r,ft.multiply(ft.subtractVec(t,r),e));function Je(r){const t=r.length;if(t>0){let e=r[0].x,i=r[0].x,s=r[0].y,n=r[0].y;for(let a=0;a<t;a+=1){const o=r[a];o.x>e&&(e=o.x),o.x<i&&(i=o.x),o.y>s&&(s=o.y),o.y<n&&(n=o.y)}return Qt(Y(i,n),Y(e,s))}return _e}function Cp(r){const t=r.length;if(t>0){let e=r[0].x,i=r[0].x,s=r[0].y,n=r[0].y,a=r[0].z,o=r[0].z;for(let l=0;l<t;l+=1){const u=r[l];u.x>e&&(e=u.x),u.x<i&&(i=u.x),u.y>s&&(s=u.y),u.y<n&&(n=u.y),u.z>a&&(a=u.z),u.z<o&&(o=u.z)}return Qt(Bt(i,n,o),Bt(e,s,a))}return xr}const Ws=(...r)=>{const t={min:{x:bt,y:bt},max:{x:kt,y:kt}};for(const e of r)t.min.x=t.min.x<e.min.x?t.min.x:e.min.x,t.max.x=t.max.x>e.max.x?t.max.x:e.max.x,t.min.y=t.min.y<e.min.y?t.min.y:e.min.y,t.max.y=t.max.y>e.max.y?t.max.y:e.max.y;return t},Nf=(r,t)=>Qt(Bt(r.min.x<t.min.x?r.min.x:t.min.x,r.min.y<t.min.y?r.min.y:t.min.y,r.min.z<t.min.z?r.min.z:t.min.z),Bt(r.max.x>t.max.x?r.max.x:t.max.x,r.max.y>t.max.y?r.max.y:t.max.y,r.max.z>t.max.z?r.max.z:t.max.z));function sC(r,t,e,i){const s=r.x-i.x,n=r.y-i.y,a=i.x-e.x,o=e.y-i.y,l=o*s+a*n,u=(i.y-t.y)*s+(t.x-i.x)*n,d=o*(t.x-i.x)+a*(t.y-i.y);return d<0?l<=0&&u<=0&&l+u>=d:l>=0&&u>=0&&l+u<=d}function Wn(r,t,e){return Y(Math.cos(e)*(r.x-t.x)+Math.sin(e)*(r.y-t.y)+t.x,-Math.sin(e)*(r.x-t.x)+Math.cos(e)*(r.y-t.y)+t.y)}function Vv(r,t){return Y(r.x-t.x,r.y-t.y)}function Hs(r){const t=Ca(r);return t===0?Y(0,0):Y(r.x/t,r.y/t)}function l0(r,t){let e={x:t.x-r.x,y:t.y-r.y};e=Hs(e);const i=Math.PI/2,s=e.x;return e.x=-Math.sin(i)*e.y,e.y=s*Math.sin(i),e}function Ca(r){return Math.sqrt(r.x*r.x+r.y*r.y)}function Yt(r,t){return Y(r.x*t,r.y*t)}function zt(r,t){return Y(r.x+t.x,r.y+t.y)}function pe(r,t){return Y(r.x-t.x,r.y-t.y)}function Xs(r,t){return Y(r.x*t.x,r.y*t.y)}function Ku(r,t){return Y(r.x/t.x,r.y/t.y)}function zv(r){return Yt(r,-1)}function Qy(r,t){return r.x*t.x+r.y*t.y}const tl=(r,t,e)=>{const i=(e.y-t.y)/(e.x-t.x),s=t.y+(r-t.x)*i;return Y(r,s)},kp=(r,t,e)=>{const i=(e.y-t.y)/(e.x-t.x),s=t.x+(r-t.y)/i;return Y(s,r)};function Ar(r){return r*Math.PI/180}function LM(r){return 180*r/Math.PI}function Vm(r){return 180*Math.atan2(r.y,r.x)/Math.PI}function Dp(r){return Y(Math.cos(r),Math.sin(r))}function _v(r){let t=-1;const e=Math.cos(r),i=Math.sin(r);return e>0&&e<1&&i>0&&i<1?t=1:e<0&&e>-1&&i>0&&i<1?t=2:e<0&&e>-1&&i<0&&i>-1?t=3:e>0&&e<1&&i<0&&i>-1&&(t=4),t}const zm=(r,t,e,i)=>{let s,n,a,o;if(t.x-r.x!=0||i.x-e.x!=0)return t.x-r.x==0?(a=t.x,n=(i.y-e.y)/(i.x-e.x),o=n*(a-e.x)+e.y):i.x-e.x==0?(a=i.x,s=(t.y-r.y)/(t.x-r.x),o=s*(a-r.x)+r.y):(s=(t.y-r.y)/(t.x-r.x),n=(i.y-e.y)/(i.x-e.x),a=(e.y-n*e.x+s*r.x-r.y)/(s-n),o=s*(a-r.x)+r.y),Y(a,o)},Nv=(r,t)=>{const e=r.length,i=t.length,s=new Uint16Array(e+i);return s.set(r,0),s.set(t,e),s};class rC{constructor(){this.Yt=!0}getInnerStart(){return this.H}getInnerEnd(){return this.$}getInnerInterval(){return Math.abs(this.$-this.H)}J(t,e){return this.Yt=t!==this.H||e!==this.$,this.H=t,this.$=e,this}j(){return this.Yt=!1,this}Z(){return this.Yt=!0,this}}class IM extends rC{constructor(t,e,i,s){if(super(),this.Ht=!0,this.$t=!0,this.Xt=[0,0],this.jt=!0,this.Zt=t,this.Qt=e,this.Jt=i,this.Kt=t,this.qt=e,s){const n=s.O(this.ti.bind(this));this.ti(s.M()),this.ii=()=>s.G(n)}}q(t){return this.X=t,this.$t=!0,this}si(t){return this.Xt=t.map(Math.abs),this.jt=!0,this}ei(){return this.Zt/this.Jt*this.X+this.Xt[0]}hi(){return(this.Zt+this.Qt)/this.Jt*this.X-this.Xt[1]}ri(){return this.getCellSize()-this.ni()}oi(){return this.X}getCellSize(){return this.ai(this.X)}ni(){return this.Xt[0]+this.Xt[1]}li(){return this.Xt}ti(t){this.Jt=t.reduce(cc,0),this.Zt=t.reduce((e,i,s)=>s>=this.Kt?e:e+i,0),this.Qt=t.reduce((e,i,s)=>s>=this.Kt&&s<this.Kt+this.qt?e+i:e,0),this.Ht=!0,this.ui()}ai(t){return t*this.Qt/this.Jt}j(){return super.j(),this.$t=!1,this.jt=!1,this.Ht=!1,this}Z(){return super.Z(),this.$t=!0,this.jt=!0,this.Ht=!0,this}}class Sh extends IM{constructor(t,e,i,s){super(t,e,i,s),this.ci={internal:10,function:Jh(10),number:10},this.X=1e3,this.J(1,1e3),this.di=this.fi()}nt(t,e,i,s,n){if(t===e)return!1;const a=Math.min(t,e)<nf,o=Math.max(t,e)>Ky;return!a&&!o||!!n&&(e>t?{start:a?nf:t,end:o?Ky:e}:{start:o?Ky:t,end:a?nf:e})}ct(t){const e=this.ei(),i=this.hi(),s=Math.max(t,nf);return e+(this.ci.function(s)-this.di.scaleStartLog)/this.di.scaleIntervalLog*(i-e)}ut(t){const e=this.ei(),i=(t-e)/(this.hi()-e),s=this.di.scaleStartLog+i*this.di.scaleIntervalLog;return this.ci.number**s}ui(){this.ci&&this.fi()}J(t,e){return super.J(t,e),this.ci&&this.fi(),this}si(t){return super.si(t),this.ci&&this.fi(),this}q(t){return super.q(t),this.ci&&this.fi(),this}Ai(t){return this.ci={internal:t,function:Jh(t),number:Sl(t)},this}gi(){return this.ci.internal}mi(t,e){const i=this.ct(t)+e;return this.ut(i)}yi(){return this.$t||this.Yt||this.jt||this.Ht}fi(){const t=this.ci.function(this.H),e=this.ci.function(this.$)-t,i=2*this.ei()/this.X-1,s=2*this.hi()/this.X-1-i;return this.di={scaleStartLog:t,scaleIntervalLog:e,viewportStart:i,viewportSize:s},this.di}pi(){return this.di}}const Jh=r=>r==="e"?eC:Tp(r),Sl=r=>r==="e"?Math.E:r,nf=.9*10**-4,Ky=1.1*10**25,nC=[{prefix:"T",unit:10**12},{prefix:"B",unit:10**9},{prefix:"M",unit:1e6},{prefix:"K",unit:1e3}],PM=(r,t,e)=>{const i=Math.abs(e-t),s=Math.max(2-Fm(i,10),0);return r.toFixed(s)},Gn={Numeric:(r,t)=>PM(r,t.getInnerStart(),t.getInnerEnd()),NumericUnits:(r,t)=>{const e=Math.abs(t.getInnerEnd()-t.getInnerStart()),i=r<0;r=Math.abs(r);let s="",n="";if(e>=1e3&&r>1e3){let a="";for(const o of nC){const l=Math.round(1e3*r/o.unit)/1e3;if(l>=1){a=l.toString(),n=o.prefix;break}}s=(i?"-":"")+a}else{let a=String(Math.floor(r));const o=Fm(r,1e3);for(let l=1;l<=o;l+=1){const u=a.length-(3*l+(l-1));a=`${a.substring(0,u)} ${a.substring(u,a.length)}`}s=(i?"-":"")+a+(e<=10?((l,u)=>{if(u===0)return"";let d=(Math.abs(l)-Math.abs(Math.floor(l))).toString().substring(1);return d.length>u&&(d=d.substring(0,u+1)),d})(r,2-Fm(e,10)):"")}return s+=n,s},LogarithmicExponentsRounded:(r,t,e,i=10)=>{const s=Jh(i)(r);return`${i}${tm(s)}`},LogarithmicExponents:(r,t,e,i=10)=>{const s=Jh(i),n=Math.floor(s(r)),a=r/Sl(i)**n;return`${Math.round(a)}×${i}${tm(n)}`},LogarithmicExtreme:(r,t,e,i=10)=>{const s=Jh(i),n=Math.floor(s(r));return`${(r/Sl(i)**n).toFixed(2)}×${i}${tm(n)}`},LogarithmicNoExponents:(r,t,e,i=10)=>{const s=Jh(i);if(i==="e")return`${Math.floor(s(r))}e`;const n=r.toString();if(r>1)return n;const a=Math.floor(s(r));return r.toFixed(Math.abs(a))}},tm=r=>Math.round(r).toString().split("").map(t=>{switch(t){case"0":return"⁰";case"1":return"¹";case"2":return"²";case"3":return"³";case"4":return"⁴";case"5":return"⁵";case"6":return"⁶";case"7":return"⁷";case"8":return"⁸";case"9":return"⁹";case"-":return"⁻";default:return t}}).join("");class Ks extends IM{constructor(t,e,i,s){super(t,e,i,s),this.Si=!1,this.vi=!1,this.bi=0,this.X=1e3,this.J(0,10),this.K()}yi(){return this.vi}nt(t,e,i,s,n){if(t===e)return!1;const a=Math.abs(s-i),o=Math.abs(e-t);if(!this.Si){const f=((S,x,v)=>{const b=((E,T)=>{if(T<bt&&T>kt&&E<bt&&E>kt){const V=Math.abs(E/8388608),F=Math.abs(T/2**23),B=Math.min(V,F);return 10**Math.floor(Math.log10(B))}})(S,x);if(b!==void 0)return b*v})(t,e,this.getCellSize());if(f===void 0)return!1;if(o>f)return!0;const y=(e+t)/2,m=(n?f/2:a/2)*(t>e?-1:1);return{start:y-m,end:y+m}}const l=10**-(12-Math.log10(Math.max(Math.abs(t),1)));if(o>l)return!0;const u=(e+t)/2,d=(n?l/2:a/2)*(t>e?-1:1);return{start:u-d,end:u+d}}ui(){this.K()}ct(t){return this.ei()+(t-this.H)/(this.$-this.H)*(this.hi()-this.ei())}ut(t){return this.H+(t-this.ei())/(this.hi()-this.ei())*(this.$-this.H)}J(t,e){return super.J(t,e),this.K(),this}si(t){return super.si(t),this.K(),this}q(t){return super.q(t),this.xi=em(this.$-this.H,this.Xt,this.X,this.Qt,this.Jt),this.K(),this}Mi(){return this.Si=!0,this}_i(){return this.Si}wi(){return Math.abs(this.Ci)}ki(){return this.wi()/this.xi}Ti(){return this.Fi}Ii(){return this.Pi}getPixelSize(){return this.xi}pi(){return this.di}Z(){return super.Z(),this.vi=!0,this}j(){return super.j(),this.vi=!1,this}Di(t,e=Gn.Numeric){return e(t,this)}Bi(){const t=Math.abs(this.getInnerEnd()).toString().length,e=Math.abs(this.getInnerStart()).toString().length;return t>e?t:e}Li(t){return em(t,this.Xt,this.X,this.Qt,this.Jt)}K(){let t=this.H,e=this.$,i=0;this.Si&&(t=0,e=this.$-this.H,i=this.H);const s=e-t,n=em(s,this.Xt,this.X,this.Qt,this.Jt);this.Pi=t-this.Xt[0]*n,this.Fi=e+this.Xt[1]*n;const a=this.Fi-this.Pi,o=a-this.Ci,l=Math.abs(o/n),u=s-this.bi,d=Math.abs(u/n);(!this.di||l>=.4||d>=.4)&&(this.bi=s,this.Ci=a,this.xi=n,this.vi=!0);const f=this.Ci*this.Jt/(2*this.Qt),y=-(this.Pi-this.Ci*this.Zt/this.Qt)-f,m=2*this.ei()/this.X-1,S=2*this.hi()/this.X-1-m;this.di={displacement:y,scaling:f,highPrecisionOffset:i,viewportStart:m,viewportSize:S,scaleStartLog:0,scaleIntervalLog:0}}mi(t,e){return t+this.xi*e}}const em=(r,t,e,i=1,s=1)=>r/(e*i/s-(t[0]+t[1]));class dn{Ri(t,e){return"x"in t?(this.x=t.x,this.y=t.y):(this.x=t,this.y=e),this}j(){return this.x.j(),this.y.j(),this}Z(){return this.x.Z(),this.y.Z(),this}q(t,e){return typeof t=="object"?(this.x.q(t.x),this.y.q(t.y)):(this.x.q(t),this.y.q(e)),this}oi(){return Y(this.x.oi(),this.y.oi())}Ei(t){return this.x.si(t),this}zi(t){return this.y.si(t),this}ni(){return Y(this.x.ni(),this.y.ni())}Vi(t,e){return this.x.J(t,e),this}Oi(t,e){return this.y.J(t,e),this}getInnerIntervalPixels(){const t=this.x.getCellSize(),e=this.y.getCellSize();return{x:t-this.x.ni(),y:e-this.y.ni()}}Ni(){return this.x.yi()||this.y.yi()}}class Se extends dn{constructor(){super(...arguments),this.Gi="LinearScaleXY"}ot(t,e,i,s){return this.x=new Ks(t.x,e.x,i.x,s?s.x:void 0),this.y=new Ks(t.y,e.y,i.y,s?s.y:void 0),this}_i(){return this.x._i()||this.y._i()}Wi(){return Y(this.x.getPixelSize(),this.y.getPixelSize())}pi(){return{x:this.x.pi(),y:this.y.pi()}}mi(t,e){const i=this.Wi();return{x:t.x+e.x*i.x,y:t.y+e.y*i.y}}Ui(t,e,i,s){const n=this.Wi(),a=l0(t,e);return a.x*=s,a.y*=s,{x:t.x+i*n.x*a.x,y:t.y+i*n.y*a.y}}}class wi extends dn{constructor(){super(...arguments),this.Gi="MixedScaleXY"}_i(){return!1}mi(t,e){const i=this.x.ct(t.x),s=this.y.ct(t.y),n={x:i+e.x,y:s+e.y};return{x:this.x.ut(n.x),y:this.y.ut(n.y)}}Ui(t,e,i,s){const n={x:this.x.ct(t.x),y:this.y.ct(t.y)},a={x:this.x.ct(e.x),y:this.y.ct(e.y)},o=Hs(pe(a,n)),l=l0(a,n),u={x:n.x+o.x*s+l.x*i,y:n.y+o.y*s+l.y*i};return{x:this.x.ut(u.x),y:this.y.ut(u.y)}}pi(){const t=this.x.pi(),e=this.y.pi();return{uScaleStart:[this.x.H,this.y.H],uScaleInterval:[this.x.getInnerInterval(),this.y.getInnerInterval()],uScaleStartLog:[t.scaleStartLog,e.scaleStartLog],uScaleIntervalLog:[t.scaleIntervalLog,e.scaleIntervalLog],uViewportStart:[t.viewportStart,e.viewportStart],uViewportSize:[t.viewportSize,e.viewportSize]}}}const u0=(r,t)=>r instanceof Sh||t instanceof Sh?new wi().Ri(r,t):new Se().Ri(r,t),al=r=>r==="client",Fp=r=>!!(r&&typeof r=="object"&&"clientX"in r&&typeof r.clientX=="number"&&"clientY"in r&&typeof r.clientY=="number"),Cn=r=>r==="relative",Bv=r=>!!(r&&typeof r=="object"&&"x"in r&&typeof r.x=="number"&&"y"in r&&typeof r.y=="number");var Yr;(function(r){r[r.noHighlighting=0]="noHighlighting",r[r.onHover=1]="onHover"})(Yr||(Yr={}));class wc{constructor(t,e,i,s){this.Yi=!0,this.Hi=Yr.onHover,this.$i=!1,this.Xi=!0,this.ji=!1,this.D=new Li,this.Zi=[],this.Qi=[],this.onMouseEnter=n=>this.D.on("mouseEnter",n),this.onMouseLeave=n=>this.D.on("mouseLeave",n),this.onMouseClick=n=>this.D.on("mouseClick",n),this.onMouseDoubleClick=n=>this.D.on("mouseDoubleClick",n),this.onMouseDown=n=>this.D.on("mouseDown",n),this.onMouseUp=n=>this.D.on("mouseUp",n),this.onMouseMove=n=>this.D.on("mouseMove",n),this.offMouseEnter=n=>this.D.off(n,"mouseEnter"),this.offMouseLeave=n=>this.D.off(n,"mouseLeave"),this.offMouseClick=n=>this.D.off(n,"mouseClick"),this.offMouseDoubleClick=n=>this.D.off(n,"mouseDoubleClick"),this.offMouseDown=n=>this.D.off(n,"mouseDown"),this.offMouseUp=n=>this.D.off(n,"mouseUp"),this.offMouseMove=n=>this.D.off(n,"mouseMove"),this.offMouseDragStart=n=>this.D.off(n,"mouseDragStart"),this.offMouseDrag=n=>this.D.off(n,"mouseDrag"),this.offMouseDragStop=n=>this.D.off(n,"mouseDragStop"),this.offMouseWheel=n=>this.D.off(n,"mouseWheel"),this.wt=(n,a,o)=>{this.D.emit("mouseEnter",this,a),this.ji=!0,this.Hi===Yr.onHover&&this.setHighlight(!0)},this.Ct=(n,a,o)=>{this.D.emit("mouseLeave",this,a),this.ji=!1,this.Hi===Yr.onHover&&this.setHighlight(!1)},this.Pt=(n,a,o)=>{this.D.emit("mouseMove",this,a)},this.kt=(n,a,o)=>this.D.emit("mouseClick",this,a),this.Tt=(n,a,o)=>this.D.emit("mouseDoubleClick",this,a),this.Ft=(n,a,o)=>this.D.emit("mouseDown",this,a),this.It=(n,a,o)=>this.D.emit("mouseUp",this,a),this.Bt=(n,a,o,l)=>{this.D.emit("mouseDragStart",this,a,o)},this.Dt=(n,a,o,l,u,d)=>{this.D.emit("mouseDrag",this,a,o,l,u)},this.Lt=(n,a,o,l,u)=>{this.D.emit("mouseDragStop",this,a,o,l)},this.Rt=(n,a,o)=>{this.D.emit("mouseWheel",this,a)},this.Et=(n,a,o)=>{this.D.emit("touchStart",this,a),this.ji=!0,this.Hi===Yr.onHover&&this.setHighlight(!0)},this.zt=(n,a,o)=>{this.D.emit("touchMove",this,a)},this.Vt=(n,a,o)=>{this.D.emit("touchEnd",this,a),this.ji=!1,this.Hi===Yr.onHover&&this.setHighlight(!1)},this.Ji=t,this.Ki=e,this.qi=i,this.ts=new Map,this.ss=s,this.es=this.ss.hs(this,{rs:{themeEffectEnabled:this.qi.effectsText},ns:{}}),this.Ji.us.ls.os(this,n=>{this.ts.forEach((a,o)=>o.cs(n)),this.Qi.forEach(a=>a.setHighlight(n)),this.Zi.forEach(a=>a.cs(n))},{animationEnabled:this.Ji.getAnimationsEnabled()})}ds(t,e){const i=(e==null?void 0:e.setEventHandlers)===void 0||e.setEventHandlers,s=(e==null?void 0:e.isText)!==void 0&&e.isText;this.ts.set(t,{isText:s});const n=Array.from(this.ts);this.es.rs.fs(n.filter(o=>o[1].isText).map(o=>o[0])),this.es.ns.fs(n.filter(o=>!o[1].isText).map(o=>o[0])),t.setMouseInteractions(this.Yi).setVisible(this.Xi).cs(this.Ji.us.ls.As(this,!0)),i&&t.setMouseEnterEventHandler(this.wt).setMouseLeaveEventHandler(this.Ct).setMouseClickEventHandler(this.kt).setMouseDoubleClickEventHandler(this.Tt).setMouseDownEventHandler(this.Ft).setMouseUpEventHandler(this.It).setMouseMoveEventHandler(this.Pt).setMouseDragStartEventHandler(this.Bt).setMouseDragEventHandler(this.Dt).setMouseDragStopEventHandler(this.Lt).setMouseWheelEventHandler(this.Rt).setTouchStartEventHandler(this.Et).setTouchMoveEventHandler(this.zt).setTouchEndEventHandler(this.Vt);const a=t.onDispose(()=>{t.offDispose(a),this.ts.delete(t)})}gs(t){this.Zi=t;const e=this.Ji.us.ls.As(this,!0);t.forEach(i=>{i.cs(e).ys(this.Xi)})}setEffect(t){return this.es.rs.ps(t&&this.qi.effectsText),this.es.ns.ps(t),this.Ji.us.Ss(),this}getEffect(){return this.es.rs.vs()||this.es.ns.vs()}onHighlight(t){return this.D.on("highlight",t)}offHighlight(t){return this.D.off(t)}setIcon(t){return this.bs=t,this.Ji.us.Ss(),this}getIcon(){return this.bs}setName(t){return this.xs=t,this.Qi.forEach(e=>e.setText(this.xs)),this}getName(){return this.xs}dispose(){return this.$i||(this.$i=!0,this.ts.forEach((t,e)=>e.dispose()),this.Ki(this),this.Qi.forEach(t=>{t.dispose()}),this.Qi.length=0,this.D.emit("dispose",this),this.Ji.us.Ss()),this}setVisible(t){return t===this.Xi||(this.Xi=t,this.ts.forEach((e,i)=>i.setVisible(t)),this.Zi.forEach(e=>e.ys(t)),this.Qi.forEach(e=>e.setOn(t)),this.D.emit("visibleStateChanged",this,this.Xi),this.Ji.us.Ss()),this}getVisible(){return this.Xi}onVisibleStateChanged(t){return this.D.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.D.off(t,"visibleStateChanged")}setHighlight(t){return this.Ji.us.ls.Ms(this,t),this.D.emit("highlight",this,t),this}getHighlight(){return this.Ji.us.ls.As(this)}setAnimationHighlight(t){return this.Ji.us.ls._s(this,t),this}getAnimationHighlight(){return this.Ji.us.ls.ws(this)}setMouseInteractions(t){return this.Yi=t,this.ts.forEach((e,i)=>i.setMouseInteractions(t)),this.Ji.us.Ss(),this}getMouseInteractions(){return this.Yi}getIsUnderMouse(){return this.ji}setHighlightOnHover(t){return this.Hi=t?Yr.onHover:Yr.noHighlighting,t===!1&&this.getHighlight()>0&&this.setHighlight(!1),this}getHighlightOnHover(){return this.Hi!==Yr.noHighlighting}attach(t,e=!0,i=!1){return FM(t,[this],{toggleVisibilityOnClick:e,label:this.xs,style:void 0}),this.Qi.push(t),t.onDispose(()=>{const s=this.Qi.indexOf(t);s>=0&&this.Qi.splice(s,1)}),this}Cs(){return this.bs}onMouseDragStart(t){return this.D.on("mouseDragStart",t)}onMouseDrag(t){return this.D.on("mouseDrag",t)}onMouseDragStop(t){return this.D.on("mouseDragStop",t)}onMouseWheel(t){return this.D.on("mouseWheel",t)}onTouchStart(t){return this.D.on("touchStart",t)}onTouchMove(t){return this.D.on("touchMove",t)}onTouchEnd(t){return this.D.on("touchEnd",t)}isDisposed(){return this.$i}onDispose(t){return this.D.on("dispose",t)}offTouchStart(t){return this.D.off(t,"touchStart")}offTouchMove(t){return this.D.off(t,"touchMove")}offTouchEnd(t){return this.D.off(t,"touchEnd")}offDispose(t){return this.D.off(t,"dispose")}}class UM extends wc{constructor(t,e,i,s,n,a,o,l){super(e,i,o,l),this.ks=t,this.axis=s,this.dt=n,this.Ts=a,this.Fs()}}const im=r=>{const t=r.length;if(t>0){let e=0,i=0;for(let s=0;s<t;s+=1)e+=r[s].x,i+=r[s].y;return Y(e/t,i/t)}return Y(0,0)},Ls=(...r)=>{const t=r.length,e=new Array(t).fill(!1),i=(s,n)=>{for(let a=0;a<t;a+=1){const o=r[a],l=o.Is(s,n);l?o.Ps(s,n,!0):e[a]&&e[a]&&o.Ps(s,n,!1),e[a]=l}return!1};return{onTouchStart:i,onTouchMove:i,onTouchEnd:i}},OM=class{constructor(r,t=300){this.Ds=!1,this.Bs=[],this.Ls=300,this.Rs=r,this.Ls=t}Is(r,t){const e=nt.performance.now();let i=!1;for(let s=0;s<this.Bs.length;s+=1)e-this.Bs[s].time>=this.Ls?(this.Bs.splice(s,1),s-=1):this.Bs[s].state&&(i=!0);return this.Ds?t.interactions.length===0&&(this.Bs.push({state:!1,time:e}),this.Ds=!1):t.interactions.length===1&&t.type==="pointerdown"&&(this.Bs.push({state:!0,time:e}),i=!0,this.Ds=!0),i}Ps(r,t,e){if(e){const i=this.Bs.reduce((s,n)=>(n.state?s.on+=1:s.off+=1,s),{on:0,off:0});i.on>=2&&i.off>=1&&(this.Rs(r,t),this.Bs.length=0)}}},Er=class{constructor(r,t,e,i=1,s=100){this.Es=r,this.zs=t,this.Vs=e,this.Os=i,this.Ns=s}Is(r,t){const e=t.interactions.length;if(e===this.Os){if(this.Gs!==void 0)return!0;if(t.type==="pointerdown"&&(e===1||(i=>{const s=i.length;if(s>0){const n=im(i);let a=0;for(let o=0;o<s;o+=1)a=Math.max(a,Kn(n,Y(i[o].x,i[o].y)));return a}return bt})(t.interactions)<=this.Ns))return this.Gs=im(t.interactions),!0}return!1}Ps(r,t,e){const i=this.Ws;if(!e||t.forceTouchEnd||t.type==="pointerup")this.Vs&&this.Vs(r,this.Gs,i,t),this.Gs=void 0,this.Ws=void 0;else{const s=im(t.interactions);t.type==="pointerdown"?this.Es&&this.Es(r,this.Gs,t):t.type==="pointermove"&&this.zs&&this.zs(r,this.Gs,s,Y(s.x-i.x,i.y-s.y),t),this.Ws=s}}},Vp=class{constructor(r,t,e){this.Us=!1,this.Es=r,this.zs=t,this.Vs=e}Is(r,t){return this.Us?t.interactions.length!==2&&(this.Us=!1):t.interactions.length===2&&t.type==="pointerdown"&&(this.Us=!0),this.Us}Ps(r,t,e){let i,s;if(e&&t.type!=="pointerup"){if(t.type==="pointerdown"){const n=t.interactions;i=n[0],s=n[1],this.Es(r,i,s,t)}else if(t.type==="pointermove"){i=t.interactions[0],s=t.interactions[1];const n=this.Ys,a=this.Hs,o=Y(i.x-n.x,n.y-i.y),l=Y(s.x-a.x,a.y-s.y);this.zs(r,i,s,o,l,t)}}else{const n=t.interactions;this.Vs(r,n[0],n[1],t)}this.Ys=i,this.Hs=s}},aC=xe({type:"linestyle",lineType:"solid",fillStyle:new it({color:I(255,255,255)}),thickness:1});class ie extends aC{constructor(t){super({...t,lineType:"solid"})}setFillStyle(t){return typeof t=="function"?this.set("fillStyle",t(this.getFillStyle())):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setThickness(t){return typeof t=="function"?this.set("thickness",t(this.getThickness())):this.set("thickness",t)}getThickness(){return this.get("thickness")}V(){const t=this.getThickness();return t<0?1:t}}const Ss=r=>!(!r||typeof r!="object"||!("lineType"in r)||r.lineType!=="solid");class hC{constructor(t,e){this.$s=t,this.Xs=e,this.js=e.rows*kC,this.Zs=e.columns*DC}}var Mn,hl;(function(r){r[r.ZoomIn=0]="ZoomIn",r[r.ZoomInX=1]="ZoomInX",r[r.ZoomInY=2]="ZoomInY",r[r.ZoomOut=3]="ZoomOut",r[r.ZoomOutX=4]="ZoomOutX",r[r.ZoomOutY=5]="ZoomOutY",r[r.ZoomToFit=6]="ZoomToFit",r[r.ToggleAnimations=7]="ToggleAnimations"})(Mn||(Mn={})),function(r){r[r.Circle=0]="Circle",r[r.Rectangle=1]="Rectangle",r[r.RoundedRectangle=2]="RoundedRectangle"}(hl||(hl={}));const oC={x:-43,y:0},lC={x:-65,y:0},uC={x:-86,y:0},cC={x:-107,y:-1},dC={x:-128,y:-3},fC={x:-150,y:0},gC={x:-171,y:0},yC={x:-276,y:0},mC={x:-298,y:0},pC={x:0,y:0},SC={x:-21,y:0};class Da extends hC{constructor(t,e,i,s){super(t,i),this.Qs=nt.document.createElement("button"),this.Js=nt.document.createElement("div"),this.Ks=nt.document.createElement("label"),this.Xs=i,this.qs=e,this.Ji=s}te(t,e,i,s){this.ie(t,s),this.se(),this.ee(e),this.he(),this.Ks.textContent=i||"";const n=nt.document.createElement("div");this.re(n),this.Qs.onclick=this.onClick.bind(this),n.appendChild(this.Js),n.appendChild(this.Ks),this.Qs.appendChild(n)}he(){this.Qs.style.cursor="pointer"}re(t){t.style.display="flex",t.style.justifyContent="center",t.style.alignContent="center",t.style.flexDirection="column"}ee(t){typeof t=="string"?(this.Js.style.backgroundImage=`url(${t})`,this.Js.style.backgroundSize="100%",this.Js.style.backgroundRepeat="no-repeat",this.Js.style.backgroundPosition="center",this.Js.style.width="20px",this.Js.style.height="20px"):this.applyStyleForSprite(t),this.Js.style.margin="auto"}se(){switch(this.qs){case hl.RoundedRectangle:this.Qs.style.borderRadius="10px";break;case hl.Rectangle:this.Qs.style.borderRadius="0px";break;case hl.Circle:default:this.Qs.style.borderRadius="31px"}}ie(t,e){this.Qs.style.width=`${this.Zs.toString()}px`,this.Qs.style.height=`${this.js.toString()}px`,this.Qs.style.backgroundColor=t,this.Qs.style.opacity=e||FC,this.Qs.style.alignItems="center",this.Qs.style.border="2px solid #707070",this.Qs.style.transition="background-color .8s ease"}applyStyleForSprite(t){this.Js.style.backgroundImage=`url(${this.$s}/${HM})`,this.Js.style.backgroundPositionX=`${t.x}px`,this.Js.style.backgroundPositionY=`${t.y}px`,this.Js.style.backgroundSize="1600%",this.Js.style.backgroundRepeat="no-repeat",this.Js.style.width="20px",this.Js.style.height="20px"}ne(t){return t.appendChild(this.Qs),t}oe(){return this.Qs}}class GM extends Da{constructor(t,e,i,s){super(t,e,i,s),this.ae="",this.le="",this.ue=!1,this.Ji=s}ce(){this.de(),this.onToggledStateAction()}fe(){this.Ae(),this.onInitialStateAction()}Ae(){this.ge(this.ae)}de(){this.ge(this.le)}ge(t){typeof t=="string"?this.Js.style.background=t:(this.Js.style.backgroundImage=`url(${this.$s}/${HM})`,this.Js.style.backgroundPositionX=`${t.x}px`,this.Js.style.backgroundPositionY=`${t.y}px`)}onClick(){this.ue?this.fe():this.ce(),this.ue=!this.ue}}class xC extends Da{constructor(t,e,i){super(t,i,{rows:1,columns:1},e),this.Ji=e;const s=this.Ji.getTheme();this.te(s.onScreenMenuBackgroundColor.toRGBAString(),oC)}onClick(){const t=this.Ji.me();t&&this.Ji.zoom(t,{x:-1,y:-1})}}class AC extends Da{constructor(t,e,i){super(t,i,{rows:1,columns:1},e),this.Ji=e;const s=this.Ji.getTheme();this.te(s.onScreenMenuBackgroundColor.toRGBAString(),cC)}onClick(){const t=this.Ji.me();t&&this.Ji.zoom(t,{x:-1,y:0})}}class vC extends Da{constructor(t,e,i){super(t,i,{rows:1,columns:1},e),this.Ji=e;const s=this.Ji.getTheme();this.te(s.onScreenMenuBackgroundColor.toRGBAString(),fC)}onClick(){const t=this.Ji.me();t&&this.Ji.zoom(t,{x:0,y:-1})}}class bC extends Da{constructor(t,e,i){super(t,i,{rows:1,columns:1},e),this.Ji=e;const s=this.Ji.getTheme();this.te(s.onScreenMenuBackgroundColor.toRGBAString(),lC)}onClick(){const t=this.Ji.me();t&&this.Ji.zoom(t,{x:1,y:1})}}class MC extends Da{constructor(t,e,i){super(t,i,{rows:1,columns:1},e),this.Ji=e;const s=this.Ji.getTheme();this.te(s.onScreenMenuBackgroundColor.toRGBAString(),dC)}onClick(){const t=this.Ji.me();t&&this.Ji.zoom(t,{x:1,y:0})}}class RC extends Da{constructor(t,e,i){super(t,i,{rows:1,columns:1},e),this.Ji=e;const s=this.Ji.getTheme();this.te(s.onScreenMenuBackgroundColor.toRGBAString(),gC)}onClick(){const t=this.Ji.me();t&&this.Ji.zoom(t,{x:0,y:1})}}class EC extends GM{constructor(t,e,i){super(t,i,{rows:1,columns:1},e),this.Ji=e;const s=this.Ji.getTheme();this.ae=yC,this.le=mC,this.te(s.onScreenMenuBackgroundColor.toRGBAString(),this.ae)}onToggledStateAction(){this.Ji.setAnimationsEnabled(!1)}onInitialStateAction(){this.Ji.setAnimationsEnabled(!0)}}class TC extends Da{constructor(t,e,i){super(t,i,{rows:1,columns:1},e),this.Ji=e;const s=this.Ji.getTheme();this.te(s.onScreenMenuBackgroundColor.toRGBAString(),uC)}onClick(){this.Ji.forEachAxis(t=>{t.fit(!0)})}}class wC extends Da{constructor(t,e,i){super(t,e.shape||XM,e.dimensions||{rows:1,columns:1},i);const s=i.getTheme(),n=e.color||s.onScreenMenuBackgroundColor.toRGBAString(),a=e.icon||"",o=e.label||"",l=e.opacity||"";this.te(n,a,o,l),this.ye=e.action}onClick(){this.ye(this.Ji)}}class CC extends GM{constructor(t,e,i,s){super(t,e,{rows:1,columns:1},i),this.Ji=i,this.pe=s,this.ae=SC,this.le=pC,this.te(Lv,this.ae)}Ae(){this.ge(this.ae),this.Qs.style.backgroundColor=Lv,this.Qs.style.border="2px solid #707070",this.Qs.style.margin="0px"}de(){this.ge(this.le),this.Qs.style.background="#FECC00 0% 0% no-repeat padding-box",this.Qs.style.border="10px solid #BCBCBC12",this.Qs.style.margin="1px"}onToggledStateAction(){var t;(t=this.pe)===null||t===void 0||t.style.setProperty("display","block")}onInitialStateAction(){var t;(t=this.pe)===null||t===void 0||t.style.setProperty("display","none")}}var ne;(function(r){r.Move="move",r.ResizeColumn="col-resize",r.ResizeRow="row-resize",r.Horizontal="ew-resize",r.Vertical="ns-resize",r.NorthWest="nw-resize",r.NorthEast="ne-resize",r.Copy="copy",r.CrossHair="crosshair",r.Default="default",r.Help="help",r.Restricted="not-allowed",r.None="none",r.Point="pointer",r.Text="text",r.Wait="wait",r.ZoomIn="zoom-in",r.ZoomOut="zoom-out"})(ne||(ne={}));const xl={LeftBottom:Y(-1,-1),CenterBottom:Y(0,-1),RightCenter:Y(1,0),LeftTop:Y(-1,1),RightTop:Y(1,1)},YM=new it({color:I(255,255,255,0)});new ie({thickness:1,fillStyle:YM});const kC=60,DC=60,FC="1.0",HM="osm/osm-sprite-transparent.png",XM=hl.Circle,Lv="#363636";var el;(function(r){r[r.TopRight=0]="TopRight",r[r.TopLeft=1]="TopLeft",r[r.BottomLeft=2]="BottomLeft",r[r.BottomRight=3]="BottomRight"})(el||(el={}));class VC extends UM{constructor(t,e,i,s,n,a,o,l){super(t,e,i,s,n,a,o,l),this.xs="Band",this.Se=0,this.ve=0,this.be=this.qi.bandFillStyle,this.xe=this.qi.bandStrokeStyle,this.Me=!0,this._e=this.ks.ke(this.dt).Ce(this.be).we(this.xe).cs(this.getHighlight()),this.ds(this._e)}setValueStart(t){return this.Se=t,this.D.emit("valueChange",this,this.Se,this.ve),this.ks.Ss(),this}getValueStart(){return this.Se}setValueEnd(t){return this.ve=t,this.D.emit("valueChange",this,this.Se,this.ve),this.ks.Ss(),this}getValueEnd(){return this.ve}setFillStyle(t){this.be=typeof t=="function"?t(this.be):t;const e=this.be;return this._e.Ce(e),this.ks.Ss(),this}getFillStyle(){return this.be}setStrokeStyle(t){this.xe=typeof t=="function"?t(this.xe):t;const e=this.xe;return this._e.we(e),this.ks.Ss(),this}getStrokeStyle(){return this.xe}onValueChange(t){return this.D.on("valueChange",t)}offValueChange(t){return this.D.off(t,"valueChange")}Te(){return this._e.Fe(this.Ts.toVec2(this.Se,this.Ts.getHeight(this.dt).getInnerStart())).q(this.Ts.toVec2(this.ve-this.Se,this.Ts.getHeight(this.dt).getInnerInterval())),this}attach(t,e=!0,i=!1){return super.attach(t,e),ei(t,this.qi,i,{fill:this.be,stroke:this.xe}),this}Ie(t,e){t.cs(e),this.ks.Ss()}setDefaultMouseInteractions(t){return this.Me=t,this}Fs(){let t,e;const i=(a,o)=>{if(!this.Me)return;const l=gt(this.ks.us.Pe(o.x,o.y),this.ks.us.dt,this.dt),u=this.Ts.getWidth(l),d=this.axis.dt.ct(this.Se),f=this.axis.dt.ct(this.ve),y=(this.axis.dt.ct(u)-d)/(f-d);t=!(y<.1||y>.9),t===!1&&(e=y<.5)},s=(a,o,l,u,d)=>{if(!this.Me)return;const f=this.Ts.getWidth(u);t?(this.Se=this.axis.dt.mi(this.Se,f),this.ve=this.axis.dt.mi(this.ve,f)):e?this.Se=this.axis.dt.mi(this.Se,f):this.ve=this.axis.dt.mi(this.ve,f),xt(d),this.D.emit("valueChange",this,this.Se,this.ve),this.ks.Ss()};this.onMouseMove((a,o)=>{if(!this.Me)return;i(0,Y(o.clientX,o.clientY));const l=t?ne.Point:this.Ts.getWidth({x:ne.Horizontal,y:ne.Vertical});this.De=this.Ji.engine.setMouseStyle(l,this.De)}),this.onMouseLeave(()=>{this.Me&&(this.Ji.engine.restoreMouseStyle(this.De),this.De=void 0)}),this.onMouseDrag((a,o,l,u,d)=>{this.Me&&l===0&&s(0,0,0,d,o)});const n=Ls(new Er(i,s));this.onTouchStart(n.onTouchStart),this.onTouchMove(n.onTouchMove),this.onTouchEnd(n.onTouchEnd)}}class zC extends UM{constructor(t,e,i,s,n,a,o,l){super(t,e,i,s,n,a,o,l),this.xs="Constant Line",this.u=0,this.xe=this.qi.constantLineStrokeStyle,this.Be=!0,this.Me=!0,this.Le=this.ks.Ee(this.dt).Re(this.xe).cs(this.getHighlight()),this.ds(this.Le)}setValue(t){return this.u=t,this.D.emit("valueChange",this,this.u),this.ks.Ss(),this}getValue(){return this.u}setStrokeStyle(t){this.xe=typeof t=="function"?t(this.xe):t;const e=this.xe;return this.Le.Re(e),this.ks.Ss(),this}getStrokeStyle(){return this.xe}setInteractionMoveByDragging(t){return this.Be=t,this}getInteractionMoveByDragging(){return this.Be}onValueChange(t){return this.D.on("valueChange",t)}offValueChange(t){return this.D.off(t,"valueChange")}Te(){return this.Le.Ve(this.Ts.toVec2(this.u,this.Ts.getHeight(this.dt).getInnerStart())).ze(this.Ts.toVec2(this.u,this.Ts.getHeight(this.dt).getInnerEnd())),this}attach(t,e=!0,i=!1){return super.attach(t,e,i),ei(t,this.qi,i,{stroke:this.xe}),this}Ie(t,e){t.cs(e),this.ks.Ss()}setDefaultMouseInteractions(t){return this.Me=t,this}Fs(){const t=(i,s)=>{this.Me&&this.Be&&(this.u=this.axis.dt.mi(this.u,this.Ts.getWidth(s)),this.D.emit("valueChange",this,this.u),this.ks.Ss(),xt(i))};this.onMouseMove(()=>{if(this.Me&&this.Be){const i=this.Ts.getWidth({x:ne.Horizontal,y:ne.Vertical});this.De=this.Ji.engine.setMouseStyle(i,this.De)}}),this.onMouseLeave(()=>{this.Me&&this.Be&&(this.Ji.engine.restoreMouseStyle(this.De),this.De=void 0)}),this.onMouseDrag((i,s,n,a,o)=>{this.Me&&this.Be&&n===0&&t(s,o)});const e=Ls(new Er(void 0,(i,s,n,a,o)=>t(o,a)));this.onTouchStart(e.onTouchStart),this.onTouchMove(e.onTouchMove),this.onTouchEnd(e.onTouchEnd)}}const $r={fitting:{start:(r,t,e,i)=>t>=r?e:i,end:(r,t,e,i)=>t>=r?i:e,allowIntervalLengthChange:!0},expansion:{start:(r,t,e,i)=>t>=r?e<r?e:r:i>r?i:r,end:(r,t,e,i)=>t>=r?i>t?i:t:e<t?e:t,allowIntervalLengthChange:!0},progressive:{start:(r,t,e,i)=>t>r?$r.progressive.end(r,t,e,i)+(r-t):i>r?i:r,end:(r,t,e,i)=>t>r?i>t?i:t:$r.progressive.start(r,t,e,i)+(t-r),allowIntervalLengthChange:!1},regressive:{}},Al={Empty:"Empty",Numeric:"Numeric",Time:"Time"},Iv=r=>r.Oe!==void 0,_C=r=>r.Ne!==void 0,Zh={Ge:Gn.Numeric},NC=(r,t)=>[r,t],Zs=(r,t,e,i)=>{const s=[],n=Math.round(Math.abs((r-t)/e));for(let a=1;a<n;a+=1){const o=Math.round((r+e*a)*i)/i;o<t&&s.push(o)}return s},Ys=(r,t,e,i,s)=>{xi(r,0)&&(r=0),xi(t,0)&&(t=0);const n=[];let a=i!==void 0?((o,l,u)=>o-(o-u)%l)(r,e,i):r;if(e<=0)throw new Error(`_getRegularGreatKeyValues unit less than or equal to 0, unit: ${e}`);for(;a<t&&xi(a,t)===!1;)n.push(a),a+=e,a=Math.round(a*s)/s;return n.push(a),n},WM=(r,t,e,i)=>{const s=[];let n=e(r),a=0;for(;n<t&&xi(n,t)===!1;)if(s.push(n),n=i(n),a+=1,a>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return s.push(n),s},le=(r,...t)=>{const e=t.length>0?t.length:r?1:0;return(i,s,n,a,o,l)=>{if(s>=e)return;const u=t[s]||1;let d=!1,f=!1,y=1;return r&&(d="ignore"in r?r.ignore==="first"||r.ignore==="both":d,f="ignore"in r?r.ignore==="last"||r.ignore==="both":f,y="offset"in r&&r.offset!==void 0?r.offset:y),((m,S,x,v,b)=>(x&&(m=m.filter((E,T)=>T>0)),v&&(m=m.filter((E,T)=>T<m.length-1)),m.filter((E,T)=>(T+b)%S==0)))(i,u,d,f,y)}},sm=(...r)=>{const t=r.length>0?r.length:0;return(e,i,s,n,a,o)=>{if(i>=t)return;const l=r[i]||1;return e.filter((u,d)=>d%l==0)}},af=(r,t)=>{if(t.has(r))return t.get(r);const e=Je(r.Ue.We());if(km(e))return e;const i=r.Ye.mi(e.min,{x:-5,y:-5}),s=r.Ye.mi(e.min,{x:5,y:5}),n=r.Ye.mi(e.max,{x:-5,y:-5}),a=r.Ye.mi(e.max,{x:5,y:5}),o={min:{x:Math.min(i.x,s.x,n.x,a.x),y:Math.min(i.y,s.y,n.y,a.y)},max:{x:Math.max(i.x,s.x,n.x,a.x),y:Math.max(i.y,s.y,n.y,a.y)}};return t.set(r,o),o},Pv=r=>{const t=new Map;if(r!==Zh){for(const e of r.He)t.set(e,new Map);for(const e of r.$e)t.set(e,new Map)}return t};class eo{constructor(t,e,i,s,n,a,o){this.D=new Li,this.Xe=Zh,this.je=Al.Empty,this.Ze=new Map,this.Qe=new Map,this.Je=$r.fitting,this.Ke=!0,this.qe=Zn(()=>this.chart.us.Ss())(300,Mr.linear),this.th=!0,this.Xi=!0,this.ih=!1,this.sh=kt,this.eh=!1,this.hh=!1,this.rh=kt,this.oh=kt,this.ah=kt,this.lh=!1,this.uh=()=>{this.ih||this.Je===void 0||this.chart.us.Ss(!0)},this.dh={},this.fh=(l,u,d,f,y,m)=>{const S=[],x=[];for(const v of l){if(v<d||v>f){S.push(v);continue}const b=this.Ze.get(u),E=(b?b.get(v):void 0)||this.Ah(v,u);E.gh=!1;const T=this.mh(E,y);m.set(E,T),S.push(v),x.push(E)}return{displayedKeyValues:S,createdTicks:x}},this.yh=(l,u,d,f,y,m,S,x,v,b,E)=>{const T=[];for(let V=0;V<l.length;V+=1){const F=l[V],B=u[V];let z,L,A;if(this.ph(F,d)){const R=af(F,v);L=[l[V-1],l[V+1]],A=L.concat(b).concat(E).filter(w=>w!==void 0).filter(w=>w.Sh!==d||!!l.find(C=>C===w)).map(w=>zf(R,af(w,v))?w:void 0),z=A.some(w=>w!==void 0)}else z=!1;if(z){let R=!0;const w=A.filter(C=>C!==void 0);if(R&&w.every(C=>Iv(C.Sh))&&(R=!1),R&&d.bh&&d.bh.xh&&d.bh.xh(B,f,y,m,S,x)===!1&&(R=!1),R===!1)continue;return!0}T.push(F)}return T},this.formatValue=l=>this.Xe.Ge(l,this.dt),this.Mh=!0,this._h=!0,this.chart=t,this.wh=e,this.qi=s,this.Ch=a,this.dt=i,this.kh=o,o.type==="logarithmic"&&this.setAnimationZoom(Mr.logarithmic(Sl(o.base))),this.Th=a.numeric,this.Fh("Numeric"),this.Ih=i.getInnerStart(),this.Ph=i.getInnerEnd(),this.setAnimationsEnabled(n)}setDefaultInterval(t,e){return this.Dh=t,(e==null?void 0:e.applyImmediately)!==!1&&(this.lh=!0,this.chart.us.Ss()),this}getDefaultInterval(){return this.Dh}getTitle(){return this.Lh.Bh()}setTitle(t){return this.Lh.Rh(t),this.chart.us.Ss(),this}getTitleFillStyle(){return this.Lh.Eh()}setIntervalRestrictions(t){return this.zh=t,this.chart.us.Ss(),this}getIntervalRestrictions(){return this.zh}setTitleFillStyle(t){return this.Lh.Ce(t),this.chart.us.Ss(),this}getTitleFont(){return this.Lh.Vh()}setTitleFont(t){return this.Lh.Oh(t),this.chart.us.Ss(),this}setTitleRotation(t){return this.Lh.Nh(t),this.chart.us.Ss(),this}getTitleRotation(){return this.Lh.Gh()}setTitleEffect(t){return this.Wh.ps(t),this.chart.us.Ss(),this}getTitleEffect(){return this.Wh.vs()}Fh(t,e){if(this.Ze.size>0&&this.Uh(),t==="Empty")this.Xe=Zh,this.je=t;else if(t==="Numeric"){this.je!=="Numeric"&&(this.Th=this.Ch.numeric);const i=e||(s=>s);this.Th=i(this.Th),this.Xe=this.Th.Yh(this.kh),this.je=t}else if(t==="DateTime"){this.je!=="DateTime"&&(this.Th=this.Ch.datetime);const i=e||(s=>s);this.Th=i(this.Th),this.Xe=this.Th.Yh(this.kh),this.je=t}else if(t==="Time"){this.je!=="Time"&&(this.Th=this.Ch.time);const i=e||(s=>s);this.Th=i(this.Th),this.Xe=this.Th.Yh(this.kh),this.je=t}return this.Qe.forEach(i=>Array.from(i.values()).forEach(s=>s.dispose())),this.Qe=Pv(this.Xe),this.chart.us.Ss(),this}Hh(){return this.Xe}$h(t){this.Xe=t,this.Qe.forEach(e=>Array.from(e.values()).forEach(i=>i.dispose())),this.Qe=Pv(this.Xe),this.chart.us.Ss()}setInterval(t){const{start:e,end:i,animate:s,stopAxisAfter:n}=t;return this.St(e!==void 0?e:this.Ih,i!==void 0?i:this.Ph,s!==void 0&&s,n===void 0||n,"userSetInterval"),this}St(t,e,i=!1,s=!0,n){let a={start:t,end:e};const o=!0,l=Math.abs(e-t);if(Math.abs(this.Ph-this.Ih),this.Xe.Xh!==void 0&&this.Xe.Xh>l){const f=(e+t)/2,y=this.Xe.Xh/2*(t>e?-1:1);a={start:f-y,end:f+y}}if(this.Xe.jh!==void 0&&this.Xe.jh<l){const f=(e+t)/2,y=this.Xe.jh/2*(t>e?-1:1);a={start:f-y,end:f+y}}const u=this.dt.nt(a.start,a.end,this.Ih,this.Ph,o);if(u===!1)return this;if(u!==!0){if(a=u,n==="zoomBandChart")return this}let d;switch(n){case"userSetInterval":case"userFit":case"interactionSetInterval":case"interactionZoom":d=!0;break;case"zoomBandChart":case"synchronizedAxis":d=!1;break;default:return Nl(0,""),this}if(this.Zh&&this.Zh.finishAll(!1),this.qe&&(i===!0||i>0)){this.setStopped(!0);const f=i===!0?void 0:i,y=!this.Zh||this.Zh.isOver()?this.qe:this.Zh.NextAnimation.bind(this);this.Zh=y([[this.Ih,a.start],[this.Ph,a.end]],([m,S])=>{this.Qh(m,S,o)},f),this.Zh.onAnimationEnd(()=>{this.Zh=void 0,d&&(this.ah=nt.performance.now())}),this.Zh.onAnimationEnd(()=>this.setStopped(s))}else this.Qh(a.start,a.end,o),this.setStopped(s),d&&(this.ah=nt.performance.now());return this}getInterval(){return{start:this.Ih,end:this.Ph}}setStopped(t){return t===this.ih||(t&&(this.Zh&&this.Zh.finishAll(!1),this.Zh=void 0),this.ih=t,this.D.emit("stoppedStateChanged",this,this.ih),this.sh=nt.performance.now(),this.chart.us.Ss()),this}getStopped(){return this.ih}onStoppedStateChanged(t){return this.D.on("stoppedStateChanged",t)}offStoppedStateChanged(t){return this.D.off(t,"stoppedStateChanged")}fit(t,e){const i=this.Jh(),s=this.Dh||BC,n=typeof s=="function"?s({curStart:this.Ih,curEnd:this.Ph,dataMin:i==null?void 0:i.min,dataMax:i==null?void 0:i.max}):s;return this.St(n.start!==void 0?n.start:this.Ih,n.end!==void 0?n.end:this.Ph,n.animate!==void 0?n.animate:t===void 0||t,n.stopAxisAfter!==void 0?n.stopAxisAfter:e===void 0||e,"userFit"),this}setScrollStrategy(t){return this.Je=t,this.chart.us.Ss(),this}getScrollStrategy(){return this.Je}setAnimationScroll(t){return this.Ke=!!t,this.chart.us.Ss(),this}setAnimationZoom(t,e=300){return this.Zh&&(this.Zh.finishAll(!1),this.Zh=void 0),this.qe=t?Zn(()=>this.chart.us.Ss())(e,t):void 0,this}setAnimationsEnabled(t){return this.th=t,t?(this.setAnimationScroll(!0),this.setAnimationZoom(Mr.ease,void 0)):(this.setAnimationScroll(void 0),this.setAnimationZoom(void 0)),this}getAnimationsEnabled(){return this.th}setVisible(t){const e=this.Xi!==t;return this.Xi=t,this.Lh.setVisible(t),this.Kh(i=>{i.Ue.setVisible(t)}),e&&this.D.emit("visibleStateChanged",this,this.Xi),this}getVisible(){return this.Xi}onIntervalChange(t){return this.D.on("scaleChange",t)}offIntervalChange(t){return this.D.off(t,"scaleChange")}onVisibleStateChanged(t){return this.D.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.D.off(t,"visibleStateChanged")}qh(t,e){const i=new Map;if(this.Xe===Zh||!this.Xi)return this.Uh(),i;e=e||new Map;const s=this.tr(),n=s.min,a=s.max,o=a-n,l=t.physicalAxisSize;this.dh.physicalAxisSize=l;const u=qM(this.Xe,n,a,this.Ih,this.Ph,l),d=[];if(this.ir(),d.push(...this.sr(this.Xe,n,a,u,e,t,i)),this.er(this.Xe,n,a,u,e,t,d,i),this.hr(),u)for(const[f,y]of this.Qe){const m=u.get(f);if(m!==void 0)for(const[S,x]of y)m.includes(S)||(x==null||x.dispose(),y.delete(S))}return this.dh.min=n,this.dh.max=a,this.dh.scaleInterval=o,this.dh.physicalAxisSize=l,i}rr(t){const e=t.Sh.nr;t.Ue.Rh(e(t.u,this.dt)).Ps()}ar(t,e){const i=e.lr;t.Ue.Ce(i.getLabelFillStyle()).Oh(i.getLabelFont()).Nh(i.getLabelRotation())}Ah(t,e){const i=this.Qe.get(e);let s=i.get(t);s?(i.delete(t),s.Sh=e,s.ys(!0)):s=this.ur(t,e);const n=this.Ze.get(e)||new Map;return n.set(t,s),this.Ze.set(e,n),this.ar(s,e),s}mh(t,e){const i=this.cr(t,e);return this.rr(t),i}sr(t,e,i,s,n,a,o){const l=[];for(const u of t.He){const d=s.get(u);for(const f of d){if(f<e||f>i)continue;const y=this.Ze.get(u),m=(y?y.get(f):void 0)||this.Ah(f,u),S=this.mh(m,a),x=af(m,n);l.find(v=>zf(x,af(v,n)))&&m.Ue.setVisible(!1),m.gh=!1,o.set(m,S),l.push(m)}}return l}er(t,e,i,s,n,a,o,l){let u,d=[];for(const f of t.$e){const y=s.get(f);if(!y)break;let m;if(u===void 0)m=[{start:e,end:i,keyValues:y}];else{m=[];for(let V=0;V<u.length-1;V+=1){const F=u[V],B=u[V+1],z={start:F,end:B,keyValues:[]};for(const L of y)L>=F&&L<B&&z.keyValues.push(L);m.push(z)}}if(u=y,_C(f))continue;let S=0,x=-1,v=[],b=[];for(let V=0;V<m.length;V+=1){const F=this.fh(m[V].keyValues,f,e,i,a,l);v=v.concat(F.displayedKeyValues),b=b.concat(F.createdTicks)}let E=b,T=!0;if(f.lr.getLabelFillStyle()!==Ft){let V=[];for(;++x<m.length;){const F=m[x],B=F.start,z=F.end;let L=F.keyValues;if(S>0){if(f.bh===void 0){T=!1;break}const R=f.bh.dr;if(L=R(L,S-1,B,z,e,i),L===void 0)break}const A=this.yh(b.filter(R=>L.some(w=>xi(R.u,w))),v,f,S,B,z,e,i,n,o,d);A!==!0?V=V.concat(A):(S+=1,x=-1,V=[])}E=V,b.forEach(F=>{V.find(B=>B===F)||this.Ar(F)})}if(d=E,!T)break}}Ar(t){const e=this.Ze.get(t.Sh);e==null||e.delete(t.u);const i=this.Qe.get(t.Sh);i&&i.has(t.u)?t.dispose():i&&(t.ys(!1),i.set(t.u,t))}Kh(t){for(const e of this.Ze.values())for(const i of e.values())t(i)}gr(t,e){for(const i of this.Ze.values())for(const s of i.values())e=t(e,s);return e}Uh(){this.Ze.forEach((t,e)=>{t.forEach(i=>this.Ar(i))}),this.Ze.clear()}ir(){for(const t of this.Ze.values())for(const e of t.values())e.gh=!0}hr(){for(const t of this.Ze.values())for(const[e,i]of t.entries())i.gh&&(i.dispose(),t.delete(e))}tr(){const t=this.dt.getInnerStart()<this.dt.getInnerEnd()?this.dt.getInnerStart():this.dt.getInnerEnd(),e=this.dt.getInnerEnd()>this.dt.getInnerStart()?this.dt.getInnerEnd():this.dt.getInnerStart();return Qt(t,e)}ph(t,e){return!(t.gh||t.Ue.Bh().length===0||Iv(e)&&e.mr!==!0)}yr(t,e){return this.Xe===Zh||(this.Xe.He.forEach(i=>{e=t(e,i.lr)}),this.Xe.$e.forEach(i=>{(s=>s.nr!==void 0)(i)&&(e=t(e,i.lr))})),e}Jh(){let t=this.wh.pr();const e=this.wh.Sr();let i;if(t!==void 0&&rf(t)&&e!==void 0&&rf(e)&&(this.kh.type==="logarithmic"&&(t===0&&(t=Math.min(1,e)),Math.sign(t)!==Math.sign(e)&&(t=Math.min(1,e-.1))),i?(i.min=Math.min(i.min,t),i.max=Math.max(i.max,e)):i=Qt(t,e)),i&&rf(i.min)&&rf(i.max))return xi(i.min,i.max)?{min:i.min-1,max:i.max+1}:i}vr(){if(!this.Mh)return 0;let t=0;const e=this.wh.br();return e&&(t=Math.max(t,e)),t}setAutoRegionsEnabled(t){return this.Mh=t,this.chart.us.Ss(),this}Mr(){var t;const e=this.eh;let i=!1;if(this.lh&&this.Dh){const s=this.Jh(),n=typeof this.Dh=="function"?this.Dh({curStart:this.Ih,curEnd:this.Ph,dataMin:s==null?void 0:s.min,dataMax:s==null?void 0:s.max}):this.Dh;this.setInterval(n),this.lh=!1}if(this.Je&&!this.ih){const s=this.Jh();if(s){const n=this.Ih,a=this.Ph;let o=this.Je.start(n,a,s.min,s.max),l=this.Je.end(n,a,s.min,s.max);const u=(t=this.Je.allowIntervalLengthChange)===null||t===void 0||t,d=Ov(this.zh,s,{start:o,end:l},{start:n,end:a},u);o=d.start,l=d.end;const f=xi(n,o)===!1,y=xi(a,l)===!1;if(o=f?o:n,l=y?l:a,f||y){let m=!1;if(this.Ke&&!this._h)if(this.Ke){m=!0;const S=f?this._r(n,o):n,x=y?this._r(a,l):a;if(this.Qh(S,x,u)===!0&&(f&&xi(S,o)===!1||y&&xi(x,l)===!1)){this.chart.us.Ss(!0),i=!0;let v=Math.abs(l-o)/Math.abs(S-x);v<1&&(v=1/v),this.hh=v>=1.4}}else m=!1;m||this.Qh(o,l,u),this._h=!1}}}return i?(this.eh!==i&&(this.eh=i,this.rh=nt.performance.now()),this.wr&&(clearTimeout(this.wr),this.wr=void 0)):e===!0&&this.wr===void 0&&(this.hh=!1,this.wr=setTimeout(()=>{this.eh!==!1&&(this.eh=!1,this.rh=nt.performance.now()),this.wr=void 0,this.chart.us.Ss()},200)),this}Qh(t,e,i){let s={start:t,end:e},n=!0;if(this.zh){const f=this.Jh();s=Ov(this.zh,f,s,{start:this.Ih,end:this.Ph},i)}const a=Math.abs(e-t),o=Math.abs(this.Ph-this.Ih);if(this.Xe.Xh!==void 0&&this.Xe.Xh>a){const f=(e+t)/2,y=(i?this.Xe.Xh/2:o/2)*(t>e?-1:1);s={start:f-y,end:f+y},n=!1}if(this.Xe.jh!==void 0&&this.Xe.jh<a){const f=(e+t)/2,y=(i?this.Xe.jh/2:o/2)*(t>e?-1:1);s={start:f-y,end:f+y},n=!1}let l=this.dt.nt(s.start,s.end,this.Ih,this.Ph,i);if(l===!1)return!1;l!==!0&&(s=l);const u=this.vr(),d=this.Cr(Math.min(s.start,s.end),Math.max(s.start,s.end),u);return l=this.dt.nt(s.end>s.start?d.min:d.max,s.end>s.start?d.max:d.min,this.Ih,this.Ph,!1),!!l&&(l===!0?this.dt.J(s.end>s.start?d.min:d.max,s.end>s.start?d.max:d.min):this.dt.J(s.start,s.end),this.Ih=s.start,this.Ph=s.end,this.D.emit("scaleChange",this,s.start,s.end),this.oh=nt.performance.now(),this.chart.us.Ss(),n)}kr(){return this.eh}Tr(){return this.Zh!==void 0}}class Cc{constructor(t,e,i,s,n=i.Pr(s).Ir(Qn).Fr(Qn).setMouseInteractions(!1)){this.gh=!1,this.$i=!1,this.ts=[],this.Sh=t,this.u=e,this.Dr=i,this.Ye=s,this.Ue=n,this.ts.push(n)}ys(t){this.ts.forEach(e=>e.setVisible(t))}dispose(){return this.$i||(this.$i=!0,this.ts.forEach(t=>t.dispose())),this}}const qM=(r,t,e,i,s,n)=>{const a=new Map;for(const l of r.He){let u=l.Br(t,e,i,s);u=Uv(u),a.set(l,u)}let o;for(const l of r.$e){let u;if(o===void 0)u=l.Br(t,e,t,e);else{let d=[];const f=o.filter(y=>t<=y&&y<=e).length;if(f>0){const y=n/(f-1);if(l.Lr!==void 0&&l.Lr>y)break}for(let y=0;y<o.length-1;y+=1){const m=l.Br(o[y],o[y+1],t,e);d=d.concat(m)}u=d}u=Uv(u),a.set(l,u),o=u}return a},Uv=r=>(r=(t=>{const e={},i=[],s=t.length;let n=0;for(let a=0;a<s;a+=1){const o=t[a];e[o]!==1&&(e[o]=1,i[n]=o,n+=1)}return i})(r)).sort((t,e)=>t-e),Ov=(r,t,e,i,s)=>{const n=typeof r=="function"?r({curStart:i.start,curEnd:i.end,dataMin:t==null?void 0:t.min,dataMax:t==null?void 0:t.max}):r;if(!n)return e;const a={start:e.start,end:e.end};let o=Math.abs(e.end-e.start);if(n.intervalMin!==void 0&&o<n.intervalMin){const l=(a.start+a.end)/2;a.start=l+.5*Math.sign(e.start-l)*n.intervalMin,a.end=l+.5*Math.sign(e.end-l)*n.intervalMin}if(o=Math.abs(e.end-e.start),n.intervalMax!==void 0&&o>n.intervalMax){const l=(a.start+a.end)/2;a.start=l+.5*Math.sign(e.start-l)*n.intervalMax,a.end=l+.5*Math.sign(e.end-l)*n.intervalMax}return o=Math.abs(e.end-e.start),n.startMin!==void 0&&(a.start=Math.max(a.start,n.startMin),s||xi(Math.abs(a.start-a.end),o)||(a.end=a.start+Math.sign(e.end-e.start)*o)),o=Math.abs(e.end-e.start),n.startMax!==void 0&&(a.start=Math.min(a.start,n.startMax),s||xi(Math.abs(a.start-a.end),o)||(a.end=a.start+Math.sign(e.end-e.start)*o)),o=Math.abs(e.end-e.start),n.endMin!==void 0&&(a.end=Math.max(a.end,n.endMin),s||xi(Math.abs(a.start-a.end),o)||(a.start=a.end+Math.sign(e.start-e.end)*o)),o=Math.abs(e.end-e.start),n.endMax!==void 0&&(a.end=Math.min(a.end,n.endMax),s||xi(Math.abs(a.start-a.end),o)||(a.start=a.end+Math.sign(e.start-e.end)*o)),a},BC=r=>{if(r.dataMin===void 0||r.dataMax===void 0)return{stopAxisAfter:!1};const t=r.curEnd>=r.curStart;return{start:t?r.dataMin:r.dataMax,end:t?r.dataMax:r.dataMin,stopAxisAfter:!1}},LC=xe({type:"font",size:14,family:"Arial",weight:"normal",style:"normal",variant:!1});class c0 extends LC{constructor(t){super(t)}setSize(t){return this.set("size",t)}setFamily(t){return this.set("family",t)}setWeight(t){return this.set("weight",t)}setStyle(t){return this.set("style",t)}setVariant(t){return this.set("variant",t)}getSize(){return this.get("size")}getFamily(){return this.get("family")}getWeight(){return this.get("weight")}getStyle(){return this.get("style")}getVariant(){return this.get("variant")}}const tc=r=>!(!r||typeof r!="object"||!("type"in r)||r.type!=="font"),jM=new c0,Gv=new class{getFillStyle(){return Ft}},IC=xe({type:"triangulated-points-3d",shape:"sphere",size:10,fillStyle:new it,wireframeStyle:At});class $M extends IC{constructor(t){super(t)}setSize(t){return this.set("size",t)}getSize(){return this.get("size")}setFillStyle(t){return typeof t=="function"?this.set("fillStyle",t(this.get("fillStyle"))):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setWireframeStyle(t){return typeof t=="function"?this.set("wireframeStyle",t(this.get("wireframeStyle"))):this.set("wireframeStyle",t)}getWireframeStyle(){return this.get("wireframeStyle")}setShape(t){return this.set("shape",t)}getShape(){return this.get("shape")}}const va=r=>!(!r||typeof r!="object"||!("type"in r)||r.type!=="triangulated-points-3d"),PC=xe({type:"pixelated-points-3d",size:5,fillStyle:new it});class UC extends PC{constructor(t){super(t)}setSize(t){return this.set("size",t)}getSize(){return this.get("size")}setFillStyle(t){return typeof t=="function"?this.set("fillStyle",t(this.get("fillStyle"))):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}}const Yv=r=>!(!r||typeof r!="object"||!("type"in r)||r.type!=="pixelated-points-3d"),Bf={Triangulated:$M,Pixelated:UC};class OC{constructor(t){this.Rr=new Map,this.us=t}os(t,e,i){const s=i.animationEnabled;this.Rr.set(t,{applyHighlight:e,curUnanimatedHighlightValue:0,curAnimationPositionMillis:0,animationEnabled:s,curAnimatedHighlightValue:0});const n=t.onDispose(()=>{this.Rr.delete(t),t.offDispose(n)})}Er(t,e){let i=e.animationEnabled;const s=[],n=t.onDispose(()=>{s.forEach(a=>{this.Rr.delete(a)}),t.offDispose(n)});return{zr:(a,o)=>{const l={applyHighlight:o,curUnanimatedHighlightValue:0,curAnimationPositionMillis:0,animationEnabled:i,curAnimatedHighlightValue:0};s.push(a),this.Rr.set(a,l)},Vr:()=>{s.forEach(a=>{this.Rr.delete(a)}),s.length=0},Or:a=>{i=a,s.forEach(o=>{this._s(o,i)})},Nr:()=>i}}Ms(t,e){const i=this.Rr.get(t);i&&(i.curUnanimatedHighlightValue=dh(e),this.us.Ss())}As(t,e=!1){const i=this.Rr.get(t);return i?e?i.curAnimatedHighlightValue:i.curUnanimatedHighlightValue:0}_s(t,e){const i=this.Rr.get(t);i&&(i.animationEnabled=e)}ws(t){const e=this.Rr.get(t);return!!e&&e.animationEnabled}Ps(t){let e=!1;this.Rr.forEach((i,s)=>{let n;if(i.animationEnabled)if(i.curUnanimatedHighlightValue>0){const o=i.curAnimationPositionMillis/1e3;n=i.curUnanimatedHighlightValue*Math.abs(Math.sin(o*Math.PI/2+.5));const l=i.curAnimatedHighlightValue===0?1:t;i.curAnimationPositionMillis+=l,e=!0}else i.curAnimatedHighlightValue>0&&i.curUnanimatedHighlightValue===0?(n=Math.max(i.curAnimatedHighlightValue-t/1e3,0),e=e||n>0):n=0,i.curAnimationPositionMillis=0;else n=i.curUnanimatedHighlightValue;n!==i.curAnimatedHighlightValue&&(i.applyHighlight(n),i.curAnimatedHighlightValue=n)}),e&&this.us.Ss(!0)}}const Hv=new Map,zp=(r,t)=>{const e=r.getSize(),i=r.getFamily(),s=r.getWeight(),n=r.getStyle(),a=r.getVariant(),o=`${n} ${a?"small-caps":"normal"} ${s} ${e}px ${i}`,l=`${o} ${t.toFixed(2)}`;let u=Hv.get(l);return u||(u=((d,f,y,m)=>({font:d,properties:f,dpr:y,id:m}))(o,{type:"font",size:e,family:i,style:n,variant:a,weight:s},t,l),Hv.set(l,u)),u};var Os,cn;(function(r){r[r.click=0]="click",r[r.dbclick=1]="dbclick",r[r.mouseDown=2]="mouseDown",r[r.mouseUp=3]="mouseUp",r[r.contextmenu=4]="contextmenu",r[r.wheel=5]="wheel"})(Os||(Os={})),function(r){r[r.touchStart=0]="touchStart",r[r.touchMove=1]="touchMove",r[r.touchEnd=2]="touchEnd"}(cn||(cn={}));const GC=r=>({container:r.Gr,scale:r.dt,setMouseStyle:(t,e)=>r.Wr(t,e),restoreMouseStyle:t=>r.Ur(t),clientLocation2Engine:(t,e)=>r.Pe(t,e),engineLocation2Client:(t,e)=>r.Yr(t,e),captureFrame:(t,e,i)=>r.Hr(t,e,i),renderFrame:(t,e,i=!1)=>r.$r(t,e,i),layout:()=>{r.Xr(),r.jr(),r.Qr.Zr(),r.Ss()},setBackgroundFillStyle(t){return r.setBackgroundFillStyle(t),this},setBackgroundStrokeStyle(t){return r.setBackgroundStrokeStyle(t),this},getBackgroundFillStyle:()=>r.getBackgroundFillStyle(),getBackgroundStrokeStyle:()=>r.getBackgroundStrokeStyle(),addCustomIcon:(t,e)=>r.Jr(t,e),onRenderFrame:t=>r.Kr(t),offRenderFrame:t=>r.qr(t)}),qh=[];let On;const rm=()=>{if(On!==void 0){const r=nt.getComputedStyle(nt.document.body),t=Number(r.getPropertyValue("margin-top").replace("px",""))+Number(r.getPropertyValue("margin-bottom").replace("px",""));On.style.height=nt.innerHeight-t+"px",(()=>{for(let e=0;e<qh.length;e+=1)qh[e]()})()}},Xv=new it({color:I(255,255,255)}),As={font:zp(jM,0),fillStyle:Xv,lineStyle:new ie({fillStyle:Xv,thickness:1}),pointStyle3D:new Bf.Triangulated};class YC{constructor(t,e,i){this.D=new Li,this.dt=cs.d2({scaleXYConstructor:Se}),this.tn=new Map,this.sn=Zn(()=>this.Ss(),60),this.en=Y(0,0),this.hn=!1,this.rn=se,this.nn=()=>{},this.an=[],this.ln=-1,this.un=[],this.cn=!0,this.$i=!1,this.dn=!1,this.jr=()=>{const{bottom:u,left:d}=this.Gr.getBoundingClientRect();return this.en=Y(Math.floor(d),Math.floor(u)),this},this.Xr=()=>{this.fn&&this.fn()},this.Wr=(u,d)=>{if(!d){this.Gr.style.cursor=u;const f=this.ln;return this.ln+=1,this.un.push([f,u]),f}return this.Ur(d),this.Wr(u)},this.Ur=u=>{const d=u?this.un.findIndex(f=>f[0]===u):-1;d>=0?(this.un.splice(d,1),this.un.length>0?this.Gr.style.cursor=this.un[this.un.length-1][1]:this.Gr.style.cursor="default"):(this.un.push([0,"default"]),this.Gr.style.cursor="default")},this.An=u=>(this.gn.S(u),this),this.mn=()=>this.gn.M(),this.yn=()=>{this.rn&&this.rn(1e3/60),this.pn(),this.Sn(),this.nn&&this.nn()},this.vn=u=>(this.tn.set(u.bn(),u),this.tn=new Map([...this.tn.entries()].sort((d,f)=>d[0]-f[0])),u),this.xn=u=>(this.tn.delete(u),this),this.j=()=>(this.gn.i=!1,this),this.Z=()=>(this.gn.i=!0,this),this.Mn=u=>{if(!this.cn)return;const d=this._n,f=d&&d.clientX===u.clientX&&d.clientY===u.clientY,y=this.Pe(u.clientX,u.clientY),m=this.wn(u,{x:u.clientX,y:u.clientY});if(this.Cn&&((m==null?void 0:m.entity)!==this.Cn.entity||m.collectionMember!==this.Cn.collectionMember)&&!this.kn){this.Cn.entity.ji=!1;const S=this.Cn.entity.Tn;S&&S(this.Cn.entity,u,this.Cn.collectionMember)}if(m&&m.entity.getMouseInteractions()&&!this.kn)if(m.entity.ji){if(!f){const S=m.entity.Fn;S&&S(m.entity,u,m.collectionMember)}}else{m.entity.ji=!0;const S=m.entity.In;S&&S(m.entity,u,m.collectionMember)}if(this.kn){const S=this.kn.entity.Pn,x=d?Y(u.clientX-d.clientX,d.clientY-u.clientY):{x:0,y:0};!S||x.x===0&&x.y===0||S(this.kn.entity,u,this.kn.button,this.kn.startLocation,x,this.kn.collectionMember)}this.Dn=u,this._n=u,this.Bn=y,this.Cn=m},this.Ln=u=>{if(this.cn=!1,this.Bn=void 0,this.Dn=u,this.Cn&&!this.Rn&&!this.kn){this.Cn.entity.ji=!1;const d=this.Cn.entity.Tn;d&&d(this.Cn.entity,u,this.Cn.collectionMember),this.Cn=void 0}},this.En=u=>{if(this.cn=!0,this.Dn=u,this.kn&&u.buttons<=0){const d=this.kn.entity.zn;d&&d(this.kn.entity,u,this.kn.button,this.kn.startLocation,this.kn.collectionMember),this.kn=void 0}if(this.Rn&&u.buttons<=0){const d=this.Rn.entity.Vn;d&&d(this.Rn.entity,u,this.Rn.collectionMember),this.Rn=void 0}},this.On=()=>this.Bn,this.Qr=t,this.qi=e.theme,this.Nn=i.Nn,this.Gn=i.Gn,this.Wn=i.Wn,this.Un={Yn:e&&e.overrideInteractionMouseButtons?e.overrideInteractionMouseButtons:void 0,$s:e&&e.resourcesBaseUrl!==void 0&&e.resourcesBaseUrl!==null?e.resourcesBaseUrl:`${nt.location.origin}/resources`,Hn:!e||!("warnings"in e)||typeof e.warnings!="boolean"||e.warnings,$n:(()=>{const u=e==null?void 0:e.pickingPrecision;if(typeof u=="string"){const d=u.toLowerCase();if(d==="best")return 1;if(d==="high")return .5;if(d==="low")return 1/8}return 1/4})(),Xn:(e==null?void 0:e.interactable)===void 0||e.interactable,jn:e.textPixelSnappingEnabled===void 0||e.textPixelSnappingEnabled};const s=e?e.container:void 0;if(s){if(typeof s=="string"){const u=nt.document.getElementById(s);if(!u)throw new Error(`Container "${s}" doesn't exist.`);this.Gr=u}else this.Gr=s;nt.addEventListener("resize",this.Xr),this.an.push(()=>{nt.removeEventListener("resize",this.Xr)})}else{if(On===void 0){const d=nt.document.createElement("div");d.id="lcjs-auto-flexbox",d.style.position="relative",d.style.width="100%",d.style.display="flex",d.style.flexDirection="column",nt.document.body.appendChild(d),On=d,nt.addEventListener("resize",rm)}let u=1;for(;nt.document.getElementById(`chart-${u}`)!==null;)u+=1;this.Gr=nt.document.createElement("div"),this.Gr.id=`chart-${u}`,this.Gr.style.flex="1",this.Gr.style.height="100%",On.appendChild(this.Gr),rm(),qh.push(this.Xr),this.an.push(()=>{On&&On.removeChild(this.Gr),qh.includes(this.Xr)&&qh.splice(qh.indexOf(this.Xr),1),qh.length===0&&On&&(nt.document.body.removeChild(On),On=void 0,nt.removeEventListener("resize",rm))})}if(nt.ResizeObserver){const u=d=>{for(const f of d)f.target===this.Gr&&this.Xr()};this.Zn=new nt.ResizeObserver(u.bind(this)),this.Zn.observe(this.Gr)}this.Gr.style.position===""&&(this.Gr.style.position="relative"),this.Gr.style.boxSizing="content-box",this.Gr.addEventListener("fullscreenchange",this.Xr),this.Gr.addEventListener("webkitfullscreenchange",this.Xr);const n=e?e.maxFps:void 0;this.Qn=n?n===-1?-1:n!==0?1e3/n:0:0;const a=new Map;let o=!1;const l=(u,d)=>f=>{const y=function(m){return{x:m.clientX,y:m.clientY}}(f);switch(f.type){case"pointerover":case"pointerenter":case"pointermove":case"pointerdown":a.set(f.pointerId,y);break;default:a.delete(f.pointerId),o=!1}switch(f.interactions=Array.from(a.values()),f.pointerType){case"pen":case"mouse":default:u&&u(f);break;case"touch":d&&d(f)}f.defaultPrevented&&(o=!0)};this.Gr.onwheel=this.Jn(Os.wheel),this.Gr.oncontextmenu=this.Jn(Os.contextmenu),this.Gr.onclick=this.Jn(Os.click),this.Gr.ondblclick=this.Jn(Os.dbclick),this.Gr.onlostpointercapture=()=>{o=!1},this.Gr.ontouchmove=u=>{o&&u.preventDefault()},this.Gr.onpointerover=l(),this.Gr.onpointerenter=l(this.En),this.Gr.onpointerdown=l(this.Jn(Os.mouseDown),this.Kn(cn.touchStart)),this.Gr.onpointermove=l(this.Mn,this.Kn(cn.touchMove)),this.Gr.onpointerup=l(this.Jn(Os.mouseUp),this.Kn(cn.touchEnd)),this.Gr.onpointercancel=l(),this.Gr.onpointerout=l(),this.Gr.onpointerleave=l(this.Ln,this.Kn(cn.touchEnd)),nt.addEventListener("scroll",this.jr,{passive:!0}),this.gn=Xt(new qr({r:0,g:0,b:0,a:0})),this.ls=new OC(this)}qn(t,e){var i,s,n,a;((i=this.Cn)===null||i===void 0?void 0:i.entity)===t.entity&&this.Cn.collectionMember===t.collectionMember&&(this.Cn=e),((s=this.io)===null||s===void 0?void 0:s.entity)===t.entity&&this.io.collectionMember===t.collectionMember&&(this.io=e),((n=this.Rn)===null||n===void 0?void 0:n.entity)===t.entity&&this.Rn.collectionMember===t.collectionMember&&(this.Rn={...e,event:this.Rn.event}),((a=this.kn)===null||a===void 0?void 0:a.entity)===t.entity&&this.kn.collectionMember===t.collectionMember&&(this.kn={...e,button:this.kn.button,startLocation:this.kn.startLocation})}so(){this.dn=!0,this.rn=void 0,this.nn=void 0}Kr(t){return this.D.on("render",t)}qr(t){return this.D.off(t)}eo(){return this.ho}ro(){return this.no}setBackgroundFillStyle(t){return this.oo.Ce(t),this}getBackgroundFillStyle(){return this.oo.Eh()}setBackgroundStrokeStyle(t){return this.oo.we(t),this}getBackgroundStrokeStyle(){return this.oo.ao()}lo(t){return this.nn=t,this}uo(t){return this.rn=t,this}co(t){return this.tn.get(t)}do(){return Array.from(this.tn.keys()).reverse().reduce((t,e)=>e!==Number.MAX_SAFE_INTEGER&&e>t?e:t,0)+1}Jn(t){return e=>this.fo(t,e)}fo(t,e){if(!this.cn)return;t===Os.contextmenu&&xt(e);const i=this.Pe(e.clientX,e.clientY),s=this.wn(e,{x:e.clientX,y:e.clientY});if(t===Os.mouseUp){if(this.kn){const n=this.kn.entity.zn;if(n&&n(this.kn.entity,e,this.kn.button,this.kn.startLocation,this.kn.collectionMember),(s==null?void 0:s.entity)!==this.kn.entity||s.collectionMember!==this.kn.collectionMember){this.kn.entity.ji=!1;const a=this.kn.entity.Tn;a&&a(this.kn.entity,e,this.kn.collectionMember)}this.kn=void 0}if(this.Rn){const n=this.Rn.entity.getMouseInteractions()&&this.Rn.entity.Vn;n&&n(this.Rn.entity,e,this.Rn.collectionMember),this.Rn=void 0}}else if(s&&s.entity.getMouseInteractions()){const n=t===Os.click?s.entity.Ao:t===Os.dbclick?s.entity.mo:t===Os.mouseDown?s.entity.yo:t===Os.wheel?s.entity.po:t===Os.contextmenu?s.entity.So:void 0;if(n&&n(s.entity,e,s.collectionMember),t===Os.mouseDown){this.Rn={entity:s.entity,collectionMember:s.collectionMember,event:e};const a=this.Rn.event.button,o=s.entity.vo;o&&o(s.entity,e,a,s.collectionMember),this.kn={entity:s.entity,collectionMember:s.collectionMember,button:a,startLocation:Y(e.clientX,e.clientY)}}}this.Dn=e,this.Bn=i,this.Cn=s}Kn(t){return e=>this.bo(t,e)}bo(t,e){const i=e.interactions.length;if(this.xo=e,this.io){const s=t===cn.touchMove?this.io.entity.Mo:t===cn.touchEnd?this.io.entity._o:t===cn.touchStart?this.io.entity.wo:void 0;s&&s(this.io.entity,e,this.io.collectionMember),t===cn.touchEnd&&i===0&&(this.io.entity.ji=!1,this.io=void 0)}else if(t===cn.touchStart){for(let s=0;s<i&&(this.io=this.wn(e,{x:e.interactions[s].x,y:e.interactions[s].y}),!this.io);s+=1);if(this.io){this.io.entity.ji=!0;const s=this.io.entity.wo;s&&s(this.io.entity,e,this.io.collectionMember)}}t===cn.touchEnd?this.Bn=void 0:this.Bn=this.Pe(e.clientX,e.clientY)}Co(t){return this.D.on("resize",t)}ko(t){return this.D.off(t,"resize")}To(){return this.D.topicOff("resize"),this}Fo(t){return this.D.on("inViewChange",t)}Io(t){return this.D.off(t)}W(){if(!this.$i){if(this.$i=!0,this.tn)for(const t of this.tn.values())t.W();this.rn=void 0,this.nn=void 0,nt.removeEventListener("scroll",this.jr),this.Gr.removeEventListener("fullscreenchange",this.Xr),this.Gr.removeEventListener("webkitfullscreenchange",this.Xr),this.Zn&&(this.Zn.disconnect(),this.Zn=void 0),this.an.forEach(t=>{t()}),this.an.length=0}}Pe(t,e){return Y(t-this.en.x,this.en.y-e)}Yr(t,e){return Y(t+this.en.x,this.en.y-e)}Po(t){const e=this.Pe(t.clientX,t.clientY);return{engineX:e.x,engineY:e.y}}Do(t){const e=this.Yr(t.engineX,t.engineY);return{clientX:e.x,clientY:e.y}}}const Wv=(r=1)=>({type:"horizontalProgressive",packager:(t,e,i)=>{if(t.length>1){const s=Yt(e,i*r),n=Math.abs(s.x),a=t.length,o=[];let l=0,u=0,d=t[0].x+n;for(;u<a;){const f=t[u];if(o[l]=f,l+=1,u+=1,f.x<d&&u<a){const y=u;let m=f.y,S=f.y;for(;u<a&&t[u].x<=d;)t[u].y>m&&(m=t[u].y),t[u].y<S&&(S=t[u].y),u+=1;if(y!==u){const x=(o[l-1].x+t[u-1].x)/2;o[l+0]=Y(x,S),o[l+1]=Y(x,m),o[l+2]=t[u-1],l+=3}}d+=n}return o}return t.slice()}}),qv=(r=1)=>({type:"horizontalRegressive",packager:(t,e,i)=>{if(t.length>1){const s=Yt(e,i*r),n=Math.abs(s.x),a=t.length,o=[];let l=0,u=0,d=t[0].x-n;for(;u<a;){const f=t[u];if(o[l]=f,l+=1,u+=1,f.x>d&&u<a){const y=u;let m=f.y,S=f.y;for(;u<a&&t[u].x>=d;)t[u].y>m&&(m=t[u].y),t[u].y<S&&(S=t[u].y),u+=1;if(y!==u){const x=(o[l-1].x+t[u-1].x)/2;o[l+0]=Y(x,S),o[l+1]=Y(x,m),o[l+2]=t[u-1],l+=3}}d-=n}return o}return t.slice()}}),jv=(r=1)=>({type:"verticalProgressive",packager:(t,e,i)=>{if(t.length>1){const s=Yt(e,i*r),n=Math.abs(s.y),a=t.length,o=[];let l=0,u=0,d=t[0].y+n;for(;u<a;){const f=t[u];if(o[l]=f,l+=1,u+=1,f.y<d&&u<a){const y=u;let m=f.x,S=f.x;for(;u<a&&t[u].y<=d;)t[u].x>m&&(m=t[u].x),t[u].x<S&&(S=t[u].x),u+=1;if(y!==u){const x=(o[l-1].y+t[u-1].y)/2;o[l+0]=Y(S,x),o[l+1]=Y(m,x),o[l+2]=t[u-1],l+=3}}d+=n}return o}return t.slice()}}),$v=(r=1)=>({type:"verticalRegressive",packager:(t,e,i)=>{if(t.length>1){const s=Yt(e,i*r),n=Math.abs(s.y),a=t.length,o=[];let l=0,u=0,d=t[0].y-n;for(;u<a;){const f=t[u];if(o[l]=f,l+=1,u+=1,f.y>d&&u<a){const y=u;let m=f.x,S=f.x;for(;u<a&&t[u].y>=d;)t[u].x>m&&(m=t[u].x),t[u].x<S&&(S=t[u].x),u+=1;if(y!==u){const x=(o[l-1].y+t[u-1].y)/2;o[l+0]=Y(S,x),o[l+1]=Y(m,x),o[l+2]=t[u-1],l+=3}}d-=n}return o}return t.slice()}});var qe;(function(r){r[r.Square=0]="Square",r[r.Circle=1]="Circle",r[r.Triangle=2]="Triangle",r[r.Cross=3]="Cross",r[r.Diamond=4]="Diamond",r[r.Plus=5]="Plus",r[r.Minus=6]="Minus",r[r.Arrow=7]="Arrow",r[r.Star=8]="Star"})(qe||(qe={}));const hf={ProgressiveX:"ProgressiveX",ProgressiveY:"ProgressiveY",RegressiveX:"RegressiveX",RegressiveY:"RegressiveY"};var Wi;(function(r){r[r.Nearest=0]="Nearest",r[r.NearestX=1]="NearestX",r[r.NearestY=2]="NearestY"})(Wi||(Wi={}));const il=r=>{const t=r==="nearest"?Wi.Nearest:r==="nearest-x"?Wi.NearestX:r==="nearest-y"?Wi.NearestY:void 0;return t!==void 0?t:Wi.NearestX},_p=(r,t,e,i,s,n,a,o,l,u)=>{const d=r.length;if(d===0)return;const f=i?1:0,y=d-(s?2:1);if(e===Wi.Nearest)return HC(r,t,n,a,f,y);if(e===Wi.NearestX||e===Wi.NearestY){if(typeof u=="boolean"&&(l==="x"&&e===Wi.NearestX||l==="y"&&e===Wi.NearestY))return dc(r,gt(t,a,n),l,u,f,y);if(e===Wi.NearestX)return XC(r,gt(t,a,n),o,f,y);if(e===Wi.NearestY)return WC(r,gt(t,a,n),o,f,y)}},HC=(r,t,e,i,s,n)=>{let a,o=Number.MAX_VALUE;for(let l=s;l<=n;l+=1){const u=r[l];if(!Number.isNaN(u.x)&&!Number.isNaN(u.y)){const d=gt(u,e,i),f=(d.x-t.x)**2+(d.y-t.y)**2;f<o&&(o=f,a=l)}}return a},XC=(r,t,e,i,s)=>{if(t.x<e.min.x||t.x>e.max.x)return;let n,a=Number.MAX_VALUE;for(let o=i;o<=s;o+=1){const l=r[o],u=l.x>t.x?l.x-t.x:t.x-l.x;u<a&&!Number.isNaN(l.x)&&!Number.isNaN(l.y)&&(a=u,n=o)}return n},WC=(r,t,e,i,s)=>{if(t.y<e.min.y||t.y>e.max.y)return;let n,a=Number.MAX_VALUE;for(let o=i;o<=s;o+=1){const l=r[o],u=l.y>t.y?l.y-t.y:t.y-l.y;u<a&&!Number.isNaN(l.x)&&!Number.isNaN(l.y)&&(a=u,n=o)}return n},dc=(r,t,e,i,s,n)=>{const a=e==="x",o=a?t.x:t.y,l=r[s],u=r[n],d=l.x<u.x?l.x:u.x,f=l.y<u.y?l.y:u.y,y=l.x>u.x?l.x:u.x,m=l.y>u.y?l.y:u.y;if(a&&(o<d||o>y)||!a&&(o<f||o>m))return;let S=s,x=Math.floor((s+n)/2),v=n,b=-1;for(;;){const E=o-(a?r[x].x:r[x].y);if(E*(i?-1:1)>0)S=Math.min(x+1,v),b=Math.floor((S+v)/2);else{if(Math.abs(E)===0)return x;v=Math.max(x-1,S),b=Math.floor((S+v)/2)}if(b===x){const T=x>s?Math.abs(o-(a?r[x-1].x:r[x-1].y)):bt,V=x<n?Math.abs(o-(a?r[x+1].x:r[x+1].y)):bt,F=Math.abs(E);switch(Math.min(F,T,V)){case T:return x-1;case V:return x+1;default:return x}}else x=b}},JM=(r,t,e,i,s,n)=>{const a=e==="x",o=a?t.x:t.y,l=r[s],u=r[n],d=l.x<u.x?l.x:u.x,f=l.y<u.y?l.y:u.y,y=l.x>u.x?l.x:u.x,m=l.y>u.y?l.y:u.y;if(a&&(o<d||o>y)||!a&&(o<f||o>m))return;let S=s,x=Math.floor((s+n)/2),v=n,b=-1;for(;;){const E=o-(a?r[x].x:r[x].y);if(E*(i?-1:1)>0)S=Math.min(x+1,v),b=Math.floor((S+v)/2);else{if(Math.abs(E)===0)return{a:x,b:x,lerpAmount:0};v=Math.max(x-1,S),b=Math.floor((S+v)/2)}if(b===x){if(E*(i?-1:1)<0&&x>s){const T=r[x-1],V=r[x];return{a:x-1,b:x,lerpAmount:a?(t.x-T.x)/(V.x-T.x):(t.y-T.y)/(V.y-T.y)}}if(x<n){const T=r[x],V=r[x+1];return{a:x,b:x+1,lerpAmount:a?(t.x-T.x)/(V.x-T.x):(t.y-T.y)/(V.y-T.y)}}return{a:x,b:x,lerpAmount:0}}x=b}};let Jv=0;class ZM{constructor(t,e,i){this.Bo=Xt(!0),this.Lo=!1,this.ji=!1,this.Ro=!1,this.$i=!1,this.Xi=!0,this.Eo=void 0,this.zo=0,this.D=new Li,this.Fn=void 0,this.In=void 0,this.Tn=void 0,this.Ao=void 0,this.po=void 0,this.So=void 0,this.mo=void 0,this.yo=void 0,this.Vn=void 0,this.vo=void 0,this.Pn=void 0,this.zn=void 0,this.wo=void 0,this.Mo=void 0,this._o=void 0,this.onDispose=s=>this.D.on("dispose",s),this.offDispose=s=>this.D.off(s,"dispose"),this.us=t,this.Vo=e,this.Oo=i,this.No=Jv,Jv+=1,this.Go=t.qi.highlightColorOffset}Wo(t){return this.Oo.find(e=>e.type===t)!==void 0}Uo(t,e){var i;return!!this.Wo(t)&&e((i=this.Oo.find(s=>s.type===t))===null||i===void 0?void 0:i.args)===!0}dispose(){return this.$i||(this.ji&&this.Tn&&this.Tn(this,void 0,void 0),this.$i=!0,this.Vo(this),this.D.emit("dispose",this)),this}isDisposed(){return this.$i}setVisible(t){const e=this.Xi;return this.Xi=t,!t&&e&&(this.ji&&this.Tn&&this.Tn(this,void 0,void 0),this.ji=!1),this}getVisible(){return this.Xi}setMouseInteractions(t){const e=this.Bo.M();return this.Bo.S(t),t||(e&&this.ji&&this.Tn&&this.Tn(this,void 0,void 0),this.ji=!1),this}getMouseInteractions(){return this.Bo.M()}getIsUnderMouse(){return this.ji}getIsGrabbed(){return this.Ro}setMouseMoveEventHandler(t){return this.Fn=t,this}setMouseEnterEventHandler(t){return this.In=t,this}setMouseLeaveEventHandler(t){return this.Tn=t,this}setMouseClickEventHandler(t){return this.Ao=t,this}setMouseDoubleClickEventHandler(t){return this.mo=t,this}setMouseDownEventHandler(t){return this.yo=t,this}setMouseUpEventHandler(t){return this.Vn=t,this}setMouseWheelEventHandler(t){return this.po=t,this}setMouseContextMenuEventHandler(t){return this.So=t,this}setMouseDragEventHandler(t){return this.Pn=t,this}setMouseDragStartEventHandler(t){return this.vo=t,this}setMouseDragStopEventHandler(t){return this.zn=t,this}setTouchStartEventHandler(t){return this.wo=t,this}setTouchMoveEventHandler(t){return this.Mo=t,this}setTouchEndEventHandler(t){return this._o=t,this}Yo(t){return this.Eo=t,this}Ho(){return this.Eo?this.Eo:qC}cs(t){return this.zo=t,this}$o(){return this.zo}Xo(t){return this.Go=t,this}jo(){return this.Go}}const qC=Qt(Y(0,0),Y(0,0));class Lf extends ZM{constructor(t,e,i,s){super(t,i,s),this.Zo=0,this.ks=e,this.ks.Qo=!0}Jo(t){return this.Zo===t||(this.Zo=t,this.ks.Qo=!0),this}Ko(){return this.Zo}}class d0 extends Lf{constructor(t,e,i,s,n){super(t,e,s,n),this.qo=!0,this.dt=i}}const fh=(r,t,e)=>{if(e instanceof Se){const i=e.Wi(),s=Xs(t,{x:Math.abs(i.x),y:Math.abs(i.y)});return Qt(Y(r.min.x-s.x,r.min.y-s.y),Y(r.max.x+s.x,r.max.y+s.y))}return Qt(e.mi(Y(r.min.x,r.min.y),Yt(t,-1)),e.mi(Y(r.max.x,r.max.y),t))},vl=(r,t)=>typeof t=="function"?t(r):t,bl=(r,t)=>!r||r!==t,jC=(r,t)=>r===Ft&&t!==Ft,QM=r=>r!==Ft;class co extends d0{constructor(t,e,i,s,n){super(t,e,i,s,n),this.be=As.fillStyle,this.us=t}Ce(t){return this.be=vl(this.be,t),this}Eh(){return this.be}ta(){return bl(this.ia,this.be)}sa(){return jC(this.ia,this.be)}ea(){return QM(this.be)}ha(t){this.ia=t}}class f0 extends co{constructor(t,e,i,s,n){super(t,e,i,s,n),this.xe=As.lineStyle,this.us=t}we(t){return this.xe=typeof t=="function"?t(this.xe):t,this}ao(){return this.xe}ra(){return!this.na||this.na!==this.xe}oa(t){return!this.na||this.na.getThickness()!==t}ea(){return this.xe!==At||super.ea()}sa(){return(this.xe!==At||this.be!==Ft)&&this.na===At&&this.ia===Ft}aa(t){this.na=t}}class $C extends co{constructor(t,e,i,s,n,a=Xt(5)){super(t,e,i,s,n),this.size=Xt(5),this.size=a}q(t){return this.size.S(t),this}}class JC extends co{constructor(t,e,i,s,n,a=Xt(As.font)){super(t,e,i,s,n),this.la=Xt(""),this.ua=Xt(Y(0,0)),this.ca=Xt(0),this.da=Xt(0),this.fa=Xt(Y(0,0)),this.Aa=Xt(0),this.ga=Xt(jM),this.ma=Y(0,0),this.Xt=Xt(Ra(1,1,1,1)),this.ya=Xt(Ju(4,4,4,4)),this.font=Xt(As.font),this.pa=!1,this.font=a}ea(){return QM(this.be)&&this.la.M().length>0}sa(){return this.pa===!1&&this.ea()}Rh(t){return this.la.S(t),this}Bh(){return this.la.M()}Oh(t){return tc(t)?this.ga.S(t):this.ga.S(t(this.ga.M())),this}Vh(){return this.ga.M()}Sa(t){return this.ga.S(this.ga.M().setFamily(t)),this}va(){return this.ga.M().getFamily()}ba(t){return this.ga.S(this.ga.M().setSize(t)),this}xa(){return this.ga.M().getSize()}Ma(t){return this.ga.S(this.ga.M().setWeight(t)),this}_a(){return this.ga.M().getWeight()}wa(t){return this.ga.S(this.ga.M().setStyle(t)),this}Ca(){return this.ga.M().getStyle()}ka(t){return this.ga.S(this.ga.M().setVariant(t)),this}Ta(){return this.ga.M().getVariant()}Fe(t){return this.ua.S(t),this}Fa(){return this.ua.M()}Nh(t){return this.Aa.S(t),this}Gh(){return this.Aa.M()}Ia(t,e){return this.fa.S(Y(t,e)),this}Pa(){return this.fa.M()}Da(t){return this.da.S(t),this}Ba(){return this.da.M()}La(t){return this.ca.S(t),this}Ra(){return this.ca.M()}Ea(t){return this.da.S(t.x),this.ca.S(t.y),this}Fr(t){return this.Xt.S(t),this}za(){return this.Xt.M()}Ir(t){return this.ya.S(t),this}Va(){return this.ya.M()}}class Np extends $C{constructor(t,e,i,s,n,a=5){super(t,e,i,s,n,Xt(a)),this.Oa=[],this.Na=Xt(qe.Square),this.Aa=Xt(0),this.Ga=Xt(!1),this.Wa=Xt(!1),this.Ua=Xt(!1),this.Ya=_e,this.Ha=0,this.$a=[],this.Xa=0,this.ja=_e,this.Za=Wi.Nearest,this.Qa=!1,this.Ja=void 0}Ka(t){return this.Za=t,this}qa(){return this.$a}tl(){return this.Oa}il(t){return this.Na.S(t),this}sl(){return this.Na.M()}Nh(t){return this.Aa.S(t),this}Gh(){return this.Aa.M()}el(t){return this.Ga.S(t),this}hl(t){return this.Wa.S(t),this}rl(t){return this.Ua.S(t),this}nl(t,e){return Array.isArray(t)||(t=[t]),this.Xa+=t.length,this.$a=ls(this.$a,t,{canReturnB:!0}),this.ja&&(this.ja=e?Ws(this.ja,e):void 0),this.Ja=void 0,this}Nt(){return this.Qa=!0,this.Oa.length=0,this.Ha=0,this.Ya=_e,this.$a=[],this.Xa=0,this.Ja=void 0,this}ol(){return this.Ha}al(){return this.Xa}}class ZC extends f0{constructor(t,e,i,s,n){super(t,e,i,s,n),this.ua=Xt(Y(0,0)),this.X=Xt(Y(100,100)),this.Aa=Xt(0),this.ma=Xt(Y(0,0)),this.ll=!1}Ps(){return this.ul(),this}Fe(t){const e=this.ua.M();return t.x===e.x&&t.y===e.y||(this.ua.S(t),this.ul()),this}Fa(){return this.ua.M()}cl(t){const e=this.ua.M();return t!==e.x&&(this.ua.S(Y(t,e.y)),this.ul()),this}dl(t){const e=this.ua.M();return t!==e.y&&(this.ua.S(Y(e.x,t)),this.ul()),this}q(t){const e=this.X.M();return t.x===e.x&&t.y===e.y||(this.X.S(Y(t.x,t.y)),this.ul()),this}oi(){return this.X.M()}fl(t){const e=this.X.M();return t!==e.x&&(this.X.S(Y(t,e.y)),this.ul()),this}Al(t){const e=this.X.M();return t!==e.x&&(this.X.S(Y(e.x,t)),this.ul()),this}Nh(t){return this.Aa.S(t),this}Gh(){return this.Aa.M()}ml(t){const e=this.ma.M();return t===e&&e.x===t.x&&e.y===t.y||(t===void 0?(this.ll=!1,this.ul()):(this.ll=!0,this.ma.S(t))),this}ul(){if(!this.ll){const t=this.ua.M(),e=this.X.M(),i=Y(t.x+e.x/2,t.y+e.y/2),s=this.ma.M();i.x===s.x&&i.y===s.y||this.ma.S(i)}}}class QC extends f0{constructor(){super(...arguments),this.Oa=[],this.ua=Xt(Y(0,0)),this.Ya=_e,this.yl=!1}pl(t){return t=CM(t),this.Oa=t,this.yl=!0,this}Sl(){return this.Oa}bt(){return this.Ya.max.x}vt(){return this.Ya.min.x}Mt(){return this.Ya.max.y}xt(){return this.Ya.min.y}vl(){return 0}bl(){return 0}}class KC extends QC{}class tk extends co{constructor(t,e,i,s,n){super(t,e,i,s,n),this.xl=new Array,this.Ml=new Array,this._l=Xt({type:"disabled",packager:(a,o,l)=>a.slice()}),this.Ya=_e,this.wl=0,this.Cl=!1,this.$a=[Array(),Array()],this.kl=!1,this.Tl=new it().setColor(I(42,171,240)),this.Qa=!1,this.Fl=!1,this.Il=!1}nl(t,e){const i=this.wl-1,s=i>0&&!this.kl;let[n,a]=s?[[this.xl[i]],[this.Ml[i]]]:[[],[]];if(t instanceof Array){const[o,l]=fM(t);n=ls(n,o,{canReturnB:!0}),a=ls(a,l,{canReturnB:!0})}else{const o=t.position;n.push(Y(o,t.high)),a.push(Y(o,t.low))}return this.kl?(this.$a[0]=ls(this.$a[0],n,{canReturnB:!0}),this.$a[1]=ls(this.$a[1],a,{canReturnB:!0})):(this.$a=[n,a],this.kl=!0),this.Ya=Ws(this.Ya,e||Ws(Je(n),Je(a))),this}Nt(){return this.Qa=!0,this.xl.length=0,this.Ml.length=0,this.wl=0,this.Ya=_e,this}tl(){return[this.xl,this.Ml]}qa(){return[this.$a[0],this.$a[1]]}Pl(t){return this._l.S(t),this}Dl(){return this._l.M()}Bl(t){return this.Tl=typeof t=="function"?t(this.Tl):t,this}Ll(){return this.Tl}ol(){return this.wl-(Number(this.Fl)+Number(this.Il))}al(){return this.$a.length}Rl(t){return this.Fl=t,this}El(){return this.Fl}zl(t){return this.Il=t,this}Vl(){return this.Il}sa(){return this.ia===Ft&&this.Ol===Ft&&(this.be!==Ft||this.Tl!==Ft)}Nl(t){this.Ol=t}ea(){return this.Tl!==Ft||super.ea()}ta(){return super.ta()||!this.Ol||this.Ol!==this.Tl}}class ek extends f0{constructor(t,e,i,s,n){super(t,e,i,s,n),this.ua=Xt(Y(0,0)),this.Gl=Xt(0),this.Fi=Xt(360),this.Wl=Xt(100),this.Ul=Xt(100),this.Yl=Xt(0),this.Hl=Xt(void 0),this.$l=Y(0,0),this.Xl=Y(0,0),this.jl=Y(0,0)}Zl(){return this.Wl.M()}Ql(){return this.Ul.M()}Fa(){return this.ua.M()}Jl(){return this.Gl.M()}Ti(){return this.Fi.M()}Kl(){return this.Yl.M()}ql(){return this.Hl.M()}tu(){return this.$l}iu(){return this.Xl}su(){return this.jl}Fe(t){return this.ua.S(t),this}eu(t){return this.Gl.S(t),this}ze(t){return this.Fi.S(t),this}hu(t){return this.Ul.S(t),this.Wl.S(t),this}ru(t){return this.Wl.S(t),this}nu(t){return this.Ul.S(t),this}ou(t){return this.Yl.S(t<0?0:t),this}au(t){return this.Hl.S(t!==void 0&&t<=0?void 0:t),this}}var Cr;(function(r){r[r.Complex=0]="Complex",r[r.Simple=1]="Simple"})(Cr||(Cr={}));const ik=(r,t)=>typeof t=="function"?t(r):t,sk=(r,t)=>!r||r!==t,rk=(r,t)=>!r||r.getThickness()!==t,nk=(r,t)=>r===At&&t!==At,ak=r=>r!==At&&r.getFillStyle()!==Ft;class g0 extends d0{constructor(t,e,i,s,n){super(t,e,i,s,n),this.lu=As.lineStyle,this.engine=t}Re(t){return this.lu=ik(this.lu,t),this}uu(){return this.lu}ra(){return sk(this.cu,this.lu)}du(t){return rk(this.cu,t)}sa(){return nk(this.cu,this.lu)}ea(){return ak(this.lu)}fu(t){this.cu=t}}class hk extends g0{constructor(t,e,i,s,n){super(t,e,i,s,n),this.Pi=Y(0,0),this.Fi=Y(0,0),this.Au=!1}S({min:t,max:e}){return t.x===this.Pi.x&&t.y===this.Pi.y&&e.x===this.Fi.x&&e.y===this.Fi.y||(this.Au=!0,this.Pi=t,this.Fi=e),this}Ii(){return this.Pi}Ti(){return this.Fi}Ve(t){return t.x===this.Pi.x&&t.y===this.Pi.y||(this.Au=!0,this.Pi=t),this}ze(t){return t.x===this.Fi.x&&t.y===this.Fi.y||(this.Au=!0,this.Fi=t),this}}class ok extends g0{constructor(t,e,i,s,n){super(t,e,i,s,n),this.gu=void 0,this.mu=!1}}class _m extends g0{constructor(t,e,i,s,n){super(t,e,i,s,n),this.yu=[],this.Ya=_e,this.$a=new Array,this.Ha=0,this.Za=Wi.NearestX,this.Qa=!1,this.pu=Xt(void 0),this.Fl=!1,this.Il=!1}Su(t){return this.pu.S(t),this}vu(){return this.pu.M()}qa(){return this.$a}tl(){return this.yu}Ka(t){return this.Za=t,this}Nt(){return this.Qa=!0,this.yu.length=0,this.Ha=0,this.$a=[],this.Ya=_e,this}ol(){return this.Ha-(Number(this.Fl)+Number(this.Il))}al(){return this.$a.length}Rl(t){return this.Fl=t,this}El(){return this.Fl}zl(t){return this.Il=t,this}Vl(){return this.Il}}const lk=r=>{const t=r.getDraggingMode();return t!==void 0&&t!==ke.notDraggable?t===ke.draggable?ne.Move:t===ke.onlyHorizontal?ne.Horizontal:ne.Vertical:void 0};class y0{constructor(){this.Xi=!0,this.D=new Li,this.bu=0,this.wt=(t,e,i)=>{this.bu===0&&this.D.emit("mouseEnter",this,e),this.bu+=1},this.Ct=(t,e,i)=>{this.bu-=1,this.bu<1&&(this.D.emit("mouseLeave",this,e),this.bu=0)},this.kt=(t,e,i)=>{this.D.emit("mouseClick",this,e)},this.Tt=(t,e,i)=>{this.D.emit("mouseDoubleClick",this,e)},this.Ft=(t,e,i)=>{this.D.emit("mouseDown",this,e)},this.It=(t,e,i)=>{this.D.emit("mouseUp",this,e)},this.Pt=(t,e,i)=>{this.D.emit("mouseMove",this,e)},this.Bt=(t,e,i,s)=>{this.D.emit("mouseDragStart",this,e,i)},this.Dt=(t,e,i,s,n,a)=>{this.D.emit("mouseDrag",this,e,i,s,n)},this.Lt=(t,e,i,s,n)=>{this.D.emit("mouseDragStop",this,e,i,s)},this.Rt=(t,e,i)=>{this.D.emit("mouseWheel",this,e)},this.Et=(t,e)=>{this.bu+=1,this.D.emit("touchStart",this,e)},this.zt=(t,e)=>{this.D.emit("touchMove",this,e)},this.Vt=(t,e)=>{this.bu-=1,this.D.emit("touchEnd",this,e)},this.xu=t=>(t instanceof d0?t.setMouseEnterEventHandler(this.wt).setMouseLeaveEventHandler(this.Ct).setMouseClickEventHandler(this.kt).setMouseDoubleClickEventHandler(this.Tt).setMouseDownEventHandler(this.Ft).setMouseUpEventHandler(this.It).setMouseMoveEventHandler(this.Pt).setMouseDragEventHandler(this.Dt).setMouseDragStartEventHandler(this.Bt).setMouseDragStopEventHandler(this.Lt).setMouseWheelEventHandler(this.Rt).setTouchStartEventHandler(this.Et).setTouchMoveEventHandler(this.zt).setTouchEndEventHandler(this.Vt):(t.onMouseEnter(this.wt),t.onMouseLeave(this.Ct),t.onMouseClick(this.kt),t.onMouseDoubleClick(this.Tt),t.onMouseDown(this.Ft),t.onMouseUp(this.It),t.onMouseMove(this.Pt),t.onMouseDrag(this.Dt),t.onMouseDragStart(this.Bt),t.onMouseDragStop(this.Lt),t.onMouseWheel(this.Rt),t.onTouchStart(this.Et),t.onTouchMove(this.zt),t.onTouchEnd(this.Vt)),t)}onMouseEnter(t){return this.D.on("mouseEnter",t)}onMouseLeave(t){return this.D.on("mouseLeave",t)}onMouseClick(t){return this.D.on("mouseClick",t)}onMouseDoubleClick(t){return this.D.on("mouseDoubleClick",t)}onMouseDown(t){return this.D.on("mouseDown",t)}onMouseUp(t){return this.D.on("mouseUp",t)}onMouseMove(t){return this.D.on("mouseMove",t)}onMouseDragStart(t){return this.D.on("mouseDragStart",t)}onMouseDrag(t){return this.D.on("mouseDrag",t)}onMouseDragStop(t){return this.D.on("mouseDragStop",t)}onMouseWheel(t){return this.D.on("mouseWheel",t)}onTouchStart(t){return this.D.on("touchStart",t)}onTouchMove(t){return this.D.on("touchMove",t)}onTouchEnd(t){return this.D.on("touchEnd",t)}offMouseEnter(t){return this.D.off(t,"mouseEnter")}offMouseLeave(t){return this.D.off(t,"mouseLeave")}offMouseClick(t){return this.D.off(t,"mouseClick")}offMouseDoubleClick(t){return this.D.off(t,"mouseDoubleClick")}offMouseDown(t){return this.D.off(t,"mouseDown")}offMouseUp(t){return this.D.off(t,"mouseUp")}offMouseMove(t){return this.D.off(t,"mouseMove")}offMouseDragStart(t){return this.D.off(t,"mouseDragStart")}offMouseDrag(t){return this.D.off(t,"mouseDrag")}offMouseDragStop(t){return this.D.off(t,"mouseDragStop")}offMouseWheel(t){return this.D.off(t,"mouseWheel")}offTouchStart(t){return this.D.off(t,"touchStart")}offTouchMove(t){return this.D.off(t,"touchMove")}offTouchEnd(t){return this.D.off(t,"touchEnd")}getIsUnderMouse(){return this.bu>0}setVisible(t){const e=this.Xi!==t;return this.Xi=t,e&&this.D.emit("visibleStateChanged",this,this.Xi),this}getVisible(){return this.Xi}onVisibleStateChanged(t){return this.D.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.D.off(t,"visibleStateChanged")}}const KM=(r,t,e)=>{const i=r.getDraggingMode();if(i!==ke.notDraggable){const s=r.scale.mi(r.getPosition(),{x:i!==ke.onlyVertical?t.x:0,y:i!==ke.onlyHorizontal?t.y:0}),n=r.scale,a=r.getSize(),o=r.getOrigin(),l=n.mi({x:n.x.getInnerStart(),y:n.y.getInnerStart()},Xs({x:(1+o.x)/2,y:(1+o.y)/2},a)),u=n.mi({x:n.x.getInnerEnd(),y:n.y.getInnerEnd()},Xs({x:(o.x-1)/2,y:(o.y-1)/2},a)),d={x:Math.min(Math.max(s.x,l.x),u.x),y:Math.min(Math.max(s.y,l.y),u.y)};r.setPosition(d),xt(e)}},uk=(r,t,e,i,s)=>{KM(r,s,t)},ck=(r,t,e,i,s)=>{KM(r,i,s)};class Ll extends y0{constructor(t,e,i,s,n){super(),this.position=Y(50,50),this.origin=Y(0,0),this.size=Y(0,0),this.$i=!1,this.Mu=void 0,this._u=void 0,this.wu=lk,this.Cu=void 0,this.Bo=!0,this.ku=()=>{const o=typeof this.wu=="function"?this.wu(this):this.wu;o&&(this._u=this.ks.us.Wr(o))},this.Tu=()=>{this.ks.us.Ur(this._u)},this.Xt=Ra(0,0,0,0),this.ks=t,this.renderingScale=e,this.scale=i,this.Vo=s,this.qi=n,this.ks.Ss(),this.onMouseEnter(this.ku),this.onMouseLeave(this.Tu),this.onMouseDrag(uk);const a=Ls(new Er(se,ck,se));this.onTouchStart(a.onTouchStart),this.onTouchMove(a.onTouchMove),this.onTouchEnd(a.onTouchEnd),this.qi=n}setMouseInteractions(t){return this.Fu().forEach(e=>e.setMouseInteractions(t)),this.Bo=t,this}getMouseInteractions(){return this.Bo}setEffect(t){return this.es=this.es||this.ks.us.es.hs(this,{Iu:{shapes:this.Fu()}}),this.es.Iu.ps(t),this}getEffect(){return!!this.es&&this.es.Iu.vs()}setAutoDispose(t){return this.Cu=t,this.ks.Ss(),this}getAutoDispose(){return this.Cu}getSize(t=Me.Everything){return t===Me.Everything?Y(this.size.x+(this.Xt.left+this.Xt.right),this.size.y+(this.Xt.bottom+this.Xt.top)):this.size}setContentSize(t){this.size=t}setMargin(t){return this.Xt=typeof t=="object"?nl(this.Xt,t):{left:t,top:t,right:t,bottom:t},this.ks.Ss(),this}getMargin(){return this.Xt}Te(){if(this.Cu){const t=this.size,e=this.renderingScale.oi(),i={x:t.x/e.x,y:t.y/e.y};(this.Cu.type==="max-width"&&i.x>=this.Cu.maxWidth||this.Cu.type==="max-height"&&i.y>=this.Cu.maxHeight)&&this.dispose()}return this}Ps(){return this}dispose(){return this.$i||(this.ks.Ss(),this.$i=!0,this.Vo(this),this.D.emit("dispose",this),this.Fu().forEach(t=>t.dispose())),this}setVisible(t){return super.setVisible(t),this.Fu().forEach(e=>e.setVisible(t)),this.ks.Ss(),this}isDisposed(){return this.$i}onDispose(t){return this.D.on("dispose",t)}offDispose(t){return this.D.off(t,"dispose")}setPosition(t){return this.position=t,this.ks.Ss(),this}getPosition(t=this.origin,e=Me.Everything){const i=this.getSize(Me.Everything),s=this.scale.mi(this.position,Xs({x:-(this.origin.x+1)/2,y:-(this.origin.y+1)/2},i));if(e===Me.Everything)return this.scale.mi(s,Xs({x:(t.x+1)/2,y:(t.y+1)/2},i));const n=this.scale.mi(s,{x:this.Xt.left,y:this.Xt.bottom}),a=this.getSize(Me.Content);return this.scale.mi(n,Xs({x:(t.x+1)/2,y:(t.y+1)/2},a))}setOrigin(t){return this.origin=t,this.ks.Ss(),this}getOrigin(){return this.origin}setDraggingMode(t=ke.notDraggable){return this.Mu=t,this.ks.Ss(),this}getDraggingMode(){return this.Mu!==void 0?this.Mu:ke.notDraggable}setMouseStyle(t){return this.wu=t,this}getMouseStyle(){return this.wu}}class dk extends Ll{constructor(t,e,i,s,n,a){super(t,e,i,n,a),this.ya=Ra(),this.Pu=0,this.ks=t,this.Du=s,this.backgroundElement=new this.Du(this.ks,this.renderingScale,this.scale,se,a),this.xu(this.backgroundElement)}Fu(){return this.backgroundElement.Fu()}onHighlight(t){return this.D.on("highlight",t)}offHighlight(t){return this.D.off(t)}setBackground(t){return t(this.backgroundElement),this}getBackground(){return this.backgroundElement}Te(){return super.Te(),this.$i||this.backgroundElement.setOrigin(this.origin).setPosition(this.getPosition(this.origin,Me.PaddedBackground)).Te(),this}Ps(){const t=this.getSize(Me.PaddedContent);return this.backgroundElement.Bu(t).Ps(),super.Ps()}dispose(){return super.dispose(),this.backgroundElement.dispose(),this}setVisible(t){return super.setVisible(t),this.backgroundElement.setVisible(t),this}setPadding(t){return this.ya=typeof t=="object"?nl(this.ya,t):{left:t,top:t,right:t,bottom:t},this.ks.Ss(),this}getPadding(){return this.ya}getSize(t=Me.Everything){let e=super.getSize(t);return t>=Me.PaddedContent&&(e=Y(e.x+this.ya.left+this.ya.right,e.y+this.ya.bottom+this.ya.top)),t>=Me.PaddedBackground&&(e=Y(e.x+this.backgroundElement.Lu()+this.backgroundElement.Ru(),e.y+this.backgroundElement.Eu()+this.backgroundElement.zu())),e}getPosition(t=this.origin,e=Me.Everything){if(e===Me.Everything)return super.getPosition(t,e);const i=super.getPosition(Y(-1,-1),Me.Everything),s=this.getMargin(),n=this.scale.mi(i,{x:s.left,y:s.bottom});if(e===Me.PaddedBackground){const d=this.getSize(Me.PaddedBackground);return this.scale.mi(n,Xs({x:(t.x+1)/2,y:(t.y+1)/2},d))}const a=this.scale.mi(n,{x:this.backgroundElement.Lu(),y:this.backgroundElement.Eu()});if(e===Me.PaddedContent){const d=this.getSize(Me.PaddedContent);return this.scale.mi(a,Xs({x:(t.x+1)/2,y:(t.y+1)/2},d))}const o=this.getPadding(),l=this.scale.mi(a,{x:o.left,y:o.bottom}),u=this.getSize(Me.Content);return this.scale.mi(l,Xs({x:(t.x+1)/2,y:(t.y+1)/2},u))}setMouseInteractions(t){return super.setMouseInteractions(t),this.backgroundElement.setMouseInteractions(t),this}getHighlight(){return this.Pu}setHighlight(t){return this.Pu=dh(t),this.backgroundElement.setHighlight(t),this.D.emit("highlight",this,t),this}}const io=r=>"setBackground"in r;class fk extends y0{constructor(t,e,i,s,n,a,o,l,u,d,f){super(),this.u=0,this.Vu=1,this.Ou=!0,this.Nu=new c0,this.Gu=!0,this.$i=!1,this.axisScale=s,this.renderingScale=n,this.Wu=o,this.Uu=l,this.Yu=u,this.Vo=d,this.Hu=e,this.$u=i,this.Xu=this.xu(this.Hu.Ee(this.renderingScale)),this.qi=f,this.ju=this.xu(this.Yu.Zu(this.$u,this.renderingScale,a,se,this.qi,!1).setOrigin(TM(this.Uu)).setDirection(this.Uu)),this.axis=t,this.setMouseInteractions(!1),this.ju.Qu==="major"?this.Xu.Re(f.xAxisNumericTicks.majorTickStyle.gridStrokeStyle):this.ju.Qu==="minor"?this.Xu.Re(f.xAxisNumericTicks.minorTickStyle.gridStrokeStyle):this.ju.Qu==="other"&&this.Xu.Re(f.cursorGridStrokeStyleX)}setValue(t){return this.u=t,this.$u.Ss(),this.D.emit("valueChange",this,this.u),this}getValue(){return this.u}setTextFormatter(t){return this.Ju=t,this.$u.Ss(),this}setTickLength(t){return this.ju.setPointerLength(t),this.Hu.Ss(),this}getTickLength(){return this.ju.getPointerLength()}setTickLabelPadding(t){return this.ju.setTickLabelPadding(t),this.Hu.Ss(),this}setTickLabelRotation(t){return this.ju.setTextRotation(t),this.Hu.Ss(),this}getTickLabelRotation(){return this.ju.getTextRotation()}getTickLabelPadding(){return this.ju.getTickLabelPadding()}setGridStrokeLength(t){return this.Vu=t,this.Hu.Ss(),this}getGridStrokeLength(){return this.Vu}setGridStrokeStyle(t){return this.Xu.Re(t),this.Hu.Ss(),this}getGridStrokeStyle(){return this.Xu.uu()}dispose(){return this.$i||(this.$i=!0,this.Xu.dispose(),this.ju.dispose(),this.Vo(this),this.Hu.us.Ss(),this.D.emit("dispose",this)),this}onDispose(t){return this.D.on("dispose",t)}offDispose(t){return this.D.off(t,"dispose")}setMarkerVisible(t){return this.Ou=t,this.$u.Ss(),this}getMarkerVisible(){return this.Ou}setMarker(t){return t(this.ju),this.$u.Ss(),this}getMarker(){return this.ju}setMouseInteractions(t){return this.ju.setMouseInteractions(t),this.Xu.setMouseInteractions(t),this}getMouseInteractions(){return this.Xu.getMouseInteractions()}setAllocatesAxisSpace(t){return this.Gu=t,this.$u.Ss(),this}getAllocatesAxisSpace(){return this.Gu}isInScale(){return Xn(this.u,this.axisScale.getInnerStart(),this.axisScale.getInnerEnd())}onValueChange(t){return this.D.on("valueChange",t)}offValueChange(t){return this.D.off(t,"valueChange")}}class gk extends fk{constructor(t,e,i,s,n,a,o,l,u,d,f){super(t,e,i,s,n,a,o,l,f,u,d),this.Ku=!1,this.Vo=u,this.Hu=e,this.$u=i}dispose(){return this.Ku=!1,super.dispose()}update(){return this}plot(t,e,i,s,n){if(this.isInScale()&&this.getVisible()&&t){this.Ku=!1;const a=pl(this.u,this.axisScale,this.Wu.getWidth(this.renderingScale));this.Xu.setVisible(!0).Ve(this.Wu.toPoint(a,e)).ze(this.Wu.toPoint(a,e-(s+i*this.Vu))),this.Ou?(this.Ju&&this.ju.setText(this.Ju(this.u,this)),this.ju.setVisible(!0).setPosition(this.Wu.toPoint(a,n))):this.ju.setVisible(!1)}else this.Xu.setVisible(!1),this.ju.setVisible(!1);return this.ju.Ps().Te(),this}qu(){const t=this.ju.Ps().getSize();return this.Wu.getHeight(t)}}const kc=(r,t)=>r.setTextFillStyle(t.uiTextFillStyle).setTextFont(t.uiTextFont),tR=(r,t)=>(ei(r.setButtonSize(t.uiButtonSize),t,!1,{fill:t.uiButtonFillStyle}),r),Fa=(r,t,e)=>{e&&io(r)&&r.setBackground(i=>i.setFillStyle(t.uiBackgroundFillStyle).setStrokeStyle(t.uiBackgroundStrokeStyle)).setEffect(!0)},xn={uiElement:void 0,stylers:Rc(),addStyler(r){return{...this,stylers:this.stylers.push(r)}},applyStylers(r,t){return this.stylers.forEach(e=>e!==void 0?e(r,t):void 0),r}},fo={background:void 0,setBackground(r){return{...this,background:r}}},Bp={Zu(r,t,e,i,s,n){const a=this.applyStylers(new this.uiElement(r,t,e,i,s),s);return Fa(a,s,n),a}},yk={Zu(r,t,e,i,s,n){const a=this.applyStylers(new this.uiElement(r,t,e,this.background,i,s),s);return Fa(a,s,n),a}};class mk extends Ll{constructor(){super(...arguments),this.tc=!0}Te(){return super.Te(),this}setMouseInteractions(t){return this.tc=t,this}getMouseInteractions(){return this.tc}Fu(){return[]}}class Lp extends Ll{constructor(){super(...arguments),this.D=new Li,this.Pu=0}onHighlight(t){return this.D.on("highlight",t)}offHighlight(t){return this.D.off(t)}getHighlight(){return this.Pu}setHighlight(t){return this.Pu=t,this.Fu().forEach(e=>e.cs(t)),this.D.emit("highlight",this,t),this.ks.Ss(),this}}class eR extends Lp{}class pk extends eR{constructor(t,e,i,s,n,a){super(t,e,i,n,a),this.ks=t,this.Na=this.ks.ic(this.renderingScale,Cr.Simple).setVisible(!1).Ce(Ft).we(At),this.xu(this.Na)}sc(){const t=this.hc();if(t.length>2){const e=Je(t),i=Y(e.max.x-e.min.x,e.max.y-e.min.y);this.setContentSize(i);const s=t.map(n=>{const a=zt(n,Yt(e.min,-1));return this.scale.mi(this.position,zt(a,Xs(Yt(zt(this.origin,Y(1,1)),-.5),i)))}).map(n=>gt(n,this.scale,this.renderingScale));this.Na.pl(s).setVisible(this.getVisible()).setVisible(this.getVisible())}else this.Na&&this.Na.setVisible(!1),this.setContentSize(Y(0,0))}Te(){return super.Te(),this.$i||this.sc(),this}Ps(){return this.sc(),super.Ps()}setVisible(t){return super.setVisible(t),this.Na.setVisible(t),this}}const gh=(r,t,e)=>r*(1-e)+t*e,iR=(r,t,e,i,s)=>{if(t.value===void 0||e.value===void 0||i.value===void 0||s.value===void 0)return;const n=(r.x-e.point.x)/(s.point.x-e.point.x),a=(s.point.y-e.point.y)*n+e.point.y,o=(r.x-t.point.x)/(i.point.x-t.point.x),l=(i.point.y-t.point.y)*o+t.point.y,u=(r.y-l)/(a-l),d=gh(e.value,s.value,n),f=gh(t.value,i.value,o);return gh(f,d,u)};class Ip{constructor(){this.type="simple"}}const Il=new Ip;class Sk{constructor(t){this.type="phong",this.ambientReflection=1,this.specularReflection=.1,this.diffuseReflection=1,this.ambientColor=xs("#000"),this.specularColor=xs("#fff"),this.shininess=32,t&&(this.ambientReflection=Number.isNaN(Number(t.ambientReflection))?this.ambientReflection:Number(t.ambientReflection),this.specularReflection=Number.isNaN(Number(t.specularReflection))?this.specularReflection:Number(t.specularReflection),this.diffuseReflection=Number.isNaN(Number(t.diffuseReflection))?this.diffuseReflection:Number(t.diffuseReflection),this.ambientColor=t.ambientColor||this.ambientColor,this.specularColor=t.specularColor||this.specularColor,this.shininess=t.shininess||this.shininess)}}const Pl=new Sk,xk={Simple:Ip};var qi;(function(r){r[r.Fill=0]="Fill",r[r.Fit=1]="Fit",r[r.Stretch=2]="Stretch",r[r.Center=3]="Center",r[r.Tile=4]="Tile"})(qi||(qi={}));const Ak=xe({type:"fillstyle",fillType:"image",source:void 0,surroundingColor:I(0,0,0,0),sourceMissingColor:I(0,0,0,0),fitMode:qi.Fill});class kn extends Ak{constructor(t){super(t)}setSource(t){return this.set("source",t)}getSource(){return this.get("source")}setSurroundingColor(t){return uc(t)?this.set("surroundingColor",t):this.set("surroundingColor",t(this.get("surroundingColor")))}getSurroundingColor(){return this.get("surroundingColor")}setSourceMissingColor(t){return uc(t)?this.set("sourceMissingColor",t):this.set("sourceMissingColor",t(this.get("sourceMissingColor")))}getSourceMissingColor(){return this.get("sourceMissingColor")}setFitMode(t){return this.set("fitMode",t)}getFitMode(){return this.get("fitMode")}toString(){return`imagefill:${this.fitMode}`}}const Ul=r=>!!(r&&typeof r=="object"&&"type"in r&&r.type==="fillstyle"&&"fillType"in r&&r.fillType==="image"),sR={DashedEqual:[2,2]},vk=xe({type:"linestyle",lineType:"dashed",pattern:sR.DashedEqual,fillStyle:new it({color:I(255,255,255)}),thickness:1,patternScale:3});class bk extends vk{constructor(t){super({...t,lineType:"dashed"})}setFillStyle(t){return typeof t=="function"?this.set("fillStyle",t(this.getFillStyle())):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setThickness(t){return typeof t=="function"?this.set("thickness",t(this.getThickness())):this.set("thickness",t)}getThickness(){return this.get("thickness")}V(){const t=this.getThickness();return t<0?1:t}setPattern(t){return typeof t=="function"?this.set("pattern",t(this.getPattern())):this.set("pattern",t)}getPattern(){return this.get("pattern")}setPatternScale(t){return typeof t=="function"?this.set("patternScale",t(this.getPatternScale())):this.set("patternScale",t)}getPatternScale(){return this.get("patternScale")}}const m0=r=>!(!r||typeof r!="object"||!("lineType"in r)||r.lineType!=="dashed"),Mk=xe({type:"icon",width:void 0,height:void 0,rc:void 0,nc:se,oc:se});class Rk extends Mk{constructor(t,e,i,s){super({...s,rc:t,nc:e,oc:i})}dispose(){return this.oc(this),this}setWidth(t){const e=this.set("width",t);return this.nc(e),e}getWidth(){return this.get("width")}setHeight(t){const e=this.set("height",t);return this.nc(e),e}getHeight(){return this.get("height")}setSize(t,e){const i=this.withMutations(s=>{s.set("width",t).set("height",e)});return this.nc(i),i}oi(){if(!this.rc)return{x:0,y:0};const t=this.rc.width,e=this.rc.height;if(t===0||e===0)return{x:0,y:0};const i=this.width,s=this.height;return typeof i=="number"&&typeof s=="number"?{x:i,y:s}:typeof i=="number"?{x:i,y:e*i/t}:typeof s=="number"?{x:t*s/e,y:s}:{x:t,y:e}}}const so=r=>!(!r||typeof r!="object"||!("type"in r)||r.type!=="icon"),Ek=xe({type:"glow",color:I(255,255,255,50),spread:1,blur:4,offset:{x:0,y:0}});class p0 extends Ek{constructor(t){super(t)}setSpread(t){return this.set("spread",typeof t=="function"?t(this.get("spread")):t)}getSpread(){return this.get("spread")}setBlur(t){return this.set("blur",typeof t=="function"?t(this.get("blur")):t)}getBlur(){return this.get("blur")}setColor(t){return this.set("color",typeof t=="function"?t(this.get("color")):t)}getColor(){return this.get("color")}setOffset(t){return this.set("offset",typeof t=="function"?t(this.get("offset")):t)}getOffset(){return this.get("offset")}}class Pp{constructor(t){this.ac=0,this.lc=0,this.uc=0,this.cc=!1,this.dc=!0,this.fc=!1,this.Ac={warningDisplayed:!1,expandEvents:[]},this.D=new Li,this.dc=!t||t.autoSortingEnabled===void 0||t.autoSortingEnabled,(t==null?void 0:t.dataPattern)!==void 0&&(this.gc={userSpecified:t.dataPattern===null?void 0:t.dataPattern}),this.mc=(t==null?void 0:t.lookupValues)!==void 0&&t.lookupValues,this.yc=(t==null?void 0:t.colors)!==void 0&&t.colors,this.Sc=(t==null?void 0:t.ids)!==void 0&&t.ids,this.vc=(t==null?void 0:t.sizes)!==void 0&&t.sizes,this.bc=(t==null?void 0:t.rotations)!==void 0&&t.rotations,this.xc=t!=null&&t.dataStorage?t.dataStorage:Float64Array,this.Mc=(t==null?void 0:t.allowInputModification)!==!1}add(t){return Array.isArray(t)?this.appendJSON(t,{x:"x",y:"y"}):this.appendSample(t),this}addArraysXY(t,e){return this.appendSamples({xValues:t,yValues:e}),this}appendJSON(t,e={x:"x",y:"y"}){const i=t.length,s=e.x,n=e.y,a=e.lookupValue,o=e.size,l=e.rotation,u=e.color,d=e.id;let f,y,m,S,x,v,b;if(s){f=new this.xc(i);for(let E=0;E<i;E+=1){const T=t[E];f[E]=T[s]}}if(n){y=new this.xc(i);for(let E=0;E<i;E+=1){const T=t[E];y[E]=T[n]}}if(a){m=new Float32Array(i);for(let E=0;E<i;E+=1){const T=t[E];m[E]=T[a]}}if(u){S=[];for(let E=0;E<i;E+=1){const T=t[E];S[E]=T[u]}}if(d){x=new Uint32Array(i);for(let E=0;E<i;E+=1){const T=t[E];x[E]=T[d]}}if(o){v=new Float32Array(i);for(let E=0;E<i;E+=1){const T=t[E];v[E]=T[o]}}if(l){b=new Float32Array(i);for(let E=0;E<i;E+=1){const T=t[E];b[E]=T[l]}}return this.appendSamples({xValues:f,yValues:y,ids:x,colors:S,lookupValues:m,sizes:v,rotations:b,start:e.start,step:e.step}),this}appendSample(t){const{samplesCacheX:e,samplesCacheY:i,samplesCacheColors:s,samplesCacheIDs:n,samplesCacheLookup:a,samplesCacheSize:o,samplesCacheRotation:l,maxSampleCount:u,dataPattern:d}=this._c({appendCount:1}),f=this.wc(),y=t.step!==void 0?t.step:1,m=t.x!==void 0?t.x:f?f.x+y:0,S=t.y!==void 0?t.y:f?f.y+y:0;if(d&&this.dc&&this.Cc&&this.kc&&!this.Tc(d,m,S)&&!this.fc)return this.Fc(this.Cc,this.kc,new this.xc([m]),new this.xc([S]),t.lookupValue!==void 0?new Float32Array([t.lookupValue]):void 0,t.color!==void 0?this.Ic((t.color,[t.color])):void 0,t.id!==void 0?new Uint32Array([t.id]):void 0,t.size!==void 0?new Float32Array([t.size]):void 0,t.rotation!==void 0?new Float32Array([t.rotation]):void 0,d),this;if(e[this.ac]=m,i[this.ac]=S,t.lookupValue!==void 0&&a&&(a[this.ac]=t.lookupValue),t.color!==void 0&&s){const x=this.Ic((t.color,[t.color]));x!==void 0&&(s[this.ac]=x[0])}return t.id!==void 0&&n&&(n[this.ac]=t.id),t.size!==void 0&&o&&(o[this.ac]=t.size),t.rotation!==void 0&&l&&(l[this.ac]=t.rotation),this.Pc(this.ac,this.ac),this.ac+=1,this.ac>u-1&&(this.ac=0,this.cc=!0),this.lc=Math.min(this.lc+1,u),this.uc+=1,this}appendSamples(t){const{lookupValues:e,colors:i,ids:s,sizes:n,rotations:a,start:o,step:l}=t;let u=t.offset,d=t.count;const f=t.xValues||t.yValues;if(!f)return this;const y=f.length;if(u=u!==void 0?u:0,d=d!==void 0?d:y-u,d<=0)return this;const m=t.offsetLookupValues!==void 0?t.offsetLookupValues:u,S=t.offsetColors!==void 0?t.offsetColors:u,x=t.offsetIds!==void 0?t.offsetIds:u,v=t.offsetSizes!==void 0?t.offsetSizes:u,b=t.offsetRotations!==void 0?t.offsetRotations:u,[E,T]=this.Dc(d,t.xValues,"x",o,l,u),[V,F]=this.Dc(d,t.yValues,"y",o,l,u),B=this.Ic(i),{samplesCacheX:z,samplesCacheY:L,samplesCacheLookup:A,samplesCacheColors:R,samplesCacheIDs:w,samplesCacheSize:C,samplesCacheRotation:k,maxSampleCount:_,dataPattern:X,incomingDataReplacedCache:N}=this._c({appendCount:d,...T===0&&F===0&&u===0&&m===0&&S===0&&x===0&&v===0&&b===0?{incomingDataX:E,incomingDataY:V,incomingDataLookup:e,incomingDataIDs:s,incomingDataColors:B,incomingDataSize:n,incomingDataRotation:a}:{}});if(!N&&X&&this.dc&&this.Cc&&this.kc){const W=E[T],P=V[F];if(!this.Tc(X,W,P)&&!this.fc)return this.Fc(this.Cc,this.kc,Gs(E,T,T+d),Gs(V,F,F+d),Gs(e,m,m+d),Gs(B,S,S+d),Gs(s,x,x+d),Gs(n,v,v+d),Gs(a,b,b+d),X),this}const U=_-this.ac,O=Math.min(d,U);if(O>0&&(N||(fi(z,E,T,O,this.ac),fi(L,V,F,O,this.ac),e&&A&&fi(A,e,m,O,this.ac),s&&w&&fi(w,s,x,O,this.ac),B&&R&&fi(R,B,S,O,this.ac),n&&C&&fi(C,n,v,O,this.ac),a&&k&&fi(k,a,b,O,this.ac)),this.Pc(this.ac,this.ac+O-1),this.ac+=O,this.ac>_-1&&(this.ac=0,this.cc=!0)),this.lc=Math.min(this.lc+O,_),this.uc+=O,this.Bc(),d-O>0){const W={xValues:E?Gs(E,T+O,void 0):void 0,yValues:V?Gs(V,F+O,void 0):void 0,lookupValues:e?Gs(e,m+O,void 0):void 0,ids:s?Gs(s,x+O,void 0):void 0,colors:B?Gs(B,S+O,void 0):void 0,sizes:n?Gs(n,v+O,void 0):void 0,rotations:a?Gs(a,b+O,void 0):void 0};this.appendSamples(W)}return this}setSamples(t){return this.clear().appendSamples(t)}fill(t){const e=this.Cc||this.kc;if(!e)return this;const i=e.length;if(t.x!==void 0&&(this.Cc=this.Cc||new this.xc(i),this.Cc.fill(t.x)),t.y!==void 0&&(this.kc=this.kc||new this.xc(i),this.kc.fill(t.y)),t.lookupValue!==void 0&&(this.Lc=this.Lc||new Float32Array(i),this.Lc.fill(t.lookupValue)),t.color!==void 0){const s=this.Ic([t.color]);s&&(this.Rc=this.Rc||new Uint32Array(i),this.Rc.fill(s[0]))}return t.size!==void 0&&(this.Ec=this.Ec||new Float32Array(i),this.Ec.fill(t.size)),t.rotation!==void 0&&(this.zc=this.zc||new Float32Array(i),this.zc.fill(t.rotation)),this.D.emit("cleared"),this}alterSamples(t,e){const{xValues:i,yValues:s,lookupValues:n,colors:a,ids:o,sizes:l,rotations:u}=e;let d=e.offset,f=e.count;const y=i||s||n||a||o||l||u;if(!y)return this;const m=y.length;if(d=d!==void 0?d:0,f=f!==void 0?f:m-d,f<=0)return this;const S=e.offsetLookupValues!==void 0?e.offsetLookupValues:d,x=e.offsetColors!==void 0?e.offsetColors:d,v=e.offsetIds!==void 0?e.offsetIds:d,b=e.offsetSizes!==void 0?e.offsetSizes:d,E=e.offsetRotations!==void 0?e.offsetRotations:d,T=this.Ic(a),V=this.uc-1,F=this.Vc!==void 0?Math.max(this.uc-this.Vc,0):0,B=t+f-1,z=Math.max(t,F),L=Math.min(B,V),A=L-z+1;if(this.uc>0&&A>0){const{samplesCacheX:w,samplesCacheY:C,samplesCacheColors:k,samplesCacheIDs:_,samplesCacheLookup:X,samplesCacheSize:N,samplesCacheRotation:U}=this._c({appendCount:0}),O=w.length;if(this.Vc!==void 0&&this.cc&&this.uc%this.Vc!=0){const W=this.uc-this.uc%this.Vc,P=this.uc-1,H=this.uc-this.lc,j=W-1,Q=Math.max(z,H),J=Math.min(L,j)-Q+1;if(J>0){const ut=Q-t,dt=Mi(Q,this.uc,O,this.ac);i&&fi(w,i,d+ut,J,dt),s&&fi(C,s,d+ut,J,dt),n&&X&&fi(X,n,S+ut,J,dt),o&&_&&fi(_,o,v+ut,J,dt),T&&k&&fi(k,T,x+ut,J,dt),l&&N&&fi(N,l,b+ut,J,dt),u&&U&&fi(U,u,E+ut,J,dt)}const ht=Math.max(z,W),ot=Math.min(L,P)-ht+1;if(ot>0){const ut=ht-t,dt=Mi(ht,this.uc,O,this.ac);i&&fi(w,i,d+ut,ot,dt),s&&fi(C,s,d+ut,ot,dt),n&&X&&fi(X,n,S+ut,ot,dt),o&&_&&fi(_,o,v+ut,ot,dt),T&&k&&fi(k,T,x+ut,ot,dt),l&&N&&fi(N,l,b+ut,ot,dt),u&&U&&fi(U,u,E+ut,ot,dt)}}else{const W=z-F;i&&fi(w,i,d,A,W),s&&fi(C,s,d,A,W),n&&X&&fi(X,n,S,A,W),o&&_&&fi(_,o,v,A,W),T&&k&&fi(k,T,x,A,W),l&&N&&fi(N,l,b,A,W),u&&U&&fi(U,u,E,A,W)}this.D.emit("cleared")}const R=t+f-1-V;if(R>0){const w=L+1-t;this.appendSamples({xValues:i,yValues:s,lookupValues:n,colors:a,ids:o,sizes:l,rotations:u,offset:d+w,offsetLookupValues:S+w,offsetColors:x+w,offsetIds:v+w,offsetSizes:b+w,offsetRotations:E+w,count:R})}return this}alterSamplesByID(t,e){if(!this.Sc)throw new Error("LightningChart JS attempted to use alterSamplesByID on DataSetXY that doesn't have IDs enabled.");const i=t.length,s=this.Oc;if(i<=0||!s)return this;const n=((typeof e.color=="object"?this.Ic([e.color]):typeof e.color=="number"?[e.color]:[])||[])[0],a=Array.isArray(e.xValues)?new this.xc(e.xValues):e.xValues,o=Array.isArray(e.yValues)?new this.xc(e.yValues):e.yValues,l=Array.isArray(e.yValues)?new Float32Array(e.yValues):e.yValues,u=this.Ic(e.colors),d=Array.isArray(e.sizes)?new Float32Array(e.sizes):e.sizes,f=Array.isArray(e.rotations)?new Float32Array(e.rotations):e.rotations,y=s.length,m=this.lc,S=this.uc-1,x=Math.max(S-m+1,0);for(let v=0;v<i;v+=1){const b=t[v],E=yh(b,x,S,V=>s[Mi(V,this.uc,y,this.ac)]),T=Mi(E,this.uc,y,this.ac);s[T]===b&&(e.x!==void 0&&this.Cc&&(this.Cc[T]=e.x),e.y!==void 0&&this.kc&&(this.kc[T]=e.y),e.lookupValue!==void 0&&this.Lc&&(this.Lc[T]=e.lookupValue),e.size!==void 0&&this.Ec&&(this.Ec[T]=e.size),e.rotation!==void 0&&this.zc&&(this.zc[T]=e.rotation),n!==void 0&&this.Rc&&(this.Rc[T]=n),a&&this.Cc&&(this.Cc[T]=a[v]),o&&this.kc&&(this.kc[T]=o[v]),l&&this.Lc&&(this.Lc[T]=l[v]),u&&this.Rc&&(this.Rc[T]=u[v]),d&&this.Ec&&(this.Ec[T]=d[v]),f&&this.zc&&(this.zc[T]=f[v]))}return this.D.emit("cleared"),this}clear(){return this.ac=0,this.lc=0,this.uc=0,this.cc=!1,this.D.emit("cleared"),this}getSampleCount(){return this.lc}getNextSampleIndex(){return this.uc}setMaxSampleCount(t){if(typeof t=="object"){this.Nc&&this.offMaxSampleCountExceeded(this.Nc);const e=t.max;this.Nc=this.onMaxSampleCountExceeded((i,s,n,a)=>{if(e!==void 0&&n>=e)return;let o=2*n;e!==void 0&&(o=Math.min(o,e)),this.setMaxSampleCount(o)}),this.Vc===void 0&&this.setMaxSampleCount(1e5)}else if(typeof t=="number"){const e=t;if(this.Vc!==void 0&&this.Vc>e)throw new Error("LightningChart JS | DataSetXY.setMaxSampleCount attempted to shrink data set. This is currently not supported.");if(!this.Cc||!this.kc)return this.Vc=e,this;if(e===this.Vc)return this;if(this.cc&&this.ac!==0)throw new Error("LightningChart JS | DataSetXY.setMaxSampleCount attempted to expand data set that has exceeded its max sample count. This is currently not supported.");this.Vc=e,this.lc<e?(this.ac=this.lc,this.cc=!1):(this.ac=0,this.cc=!0);const i=new this.xc(this.Vc);i.set(this.Cc);const s=new this.xc(this.Vc);if(s.set(this.kc),this.Cc=i,this.kc=s,this.mc){const n=new Float32Array(this.Vc);this.Lc&&n.set(this.Lc),this.Lc=n}if(this.Sc){const n=new Uint32Array(this.Vc);this.Oc&&n.set(this.Oc),this.Oc=n}if(this.yc){const n=new Uint32Array(this.Vc);this.Rc&&n.set(this.Rc),this.Rc=n}if(this.vc){const n=new Float32Array(this.Vc);this.Ec&&n.set(this.Ec),this.Ec=n}if(this.bc){const n=new Float32Array(this.Vc);this.zc&&n.set(this.zc),this.zc=n}}return this}getMaxSampleCount(){return this.Vc}readBack(t){if(!this.Cc||!this.kc)return{xValues:new this.xc,yValues:new this.xc};const e=this.Cc.length;let i=[];if(t!=null&&t.onlyInRange){const m=this.Gc();if(!m)throw new Error("LightningChart JS - attempted to use `DataSetXY.readBack` with `visibleOnly: true` without a data pattern.\nThis operation is only supported for patterned data (e.g. 'ProgressiveX')");const S=Math.min(t.onlyInRange.start,t.onlyInRange.end),x=Math.max(t.onlyInRange.start,t.onlyInRange.end),v=Up(S,x,this.Cc,this.uc,this.lc,this.ac,m,0);if(!v)return{xValues:new this.xc,yValues:new this.xc};i=v.dataRanges}else if(this.Vc!==void 0&&this.cc&&this.uc%this.Vc!=0){const m=this.ac,S=e-m,x=this.ac-1;i.push({offset:m,count:S}),i.push({offset:0,count:x+1})}else i.push({offset:0,count:this.lc});const s=i.reduce((m,S)=>m+S.count,0),n=new this.xc(s),a=new this.xc(s),o=this.yc?new Uint32Array(s):void 0,l=this.mc?new Float32Array(s):void 0,u=this.Sc?new Uint32Array(s):void 0,d=this.vc?new Float32Array(s):void 0,f=this.bc?new Float32Array(s):void 0;let y=0;for(const m of i)n.set(this.Cc.subarray(m.offset,m.offset+m.count),y),a.set(this.kc.subarray(m.offset,m.offset+m.count),y),this.yc&&o&&this.Rc&&o.set(this.Rc.subarray(m.offset,m.offset+m.count),y),this.mc&&l&&this.Lc&&l.set(this.Lc.subarray(m.offset,m.offset+m.count),y),this.Sc&&u&&this.Oc&&u.set(this.Oc.subarray(m.offset,m.offset+m.count),y),this.vc&&d&&this.Ec&&d.set(this.Ec.subarray(m.offset,m.offset+m.count),y),this.bc&&f&&this.zc&&f.set(this.zc.subarray(m.offset,m.offset+m.count),y),y+=m.count;return{xValues:n,yValues:a,lookupValues:l,colors:o,ids:u,sizes:d,rotations:f}}onMaxSampleCountExceeded(t){return this.D.on("maxSampleCountExceeded",t)}offMaxSampleCountExceeded(t){return this.D.off(t)}Dc(t,e,i,s,n,a){if(e===void 0){const o=this.wc();n=n!==void 0?n:1,s=s!==void 0?s:o?o[i]+n:0;const l=new this.xc(t);for(let u=0;u<t;u+=1)l[u]=s+u*n;return[l,0]}return[e,a]}Ic(t){if(!t||t.length===0)return;const e=t[0];if(uc(e)){const i=t.length,s=new Uint32Array(i);for(let n=0;n<i;n+=1){const a=t[n],o=255*a.a<<24|255*a.b<<16|255*a.g<<8|255*a.r;s[n]=o}return s}return t}Wc(){return{min:0,max:this.Vc!==void 0&&this.cc?this.Vc-1:this.lc-1}}Uc(t){t=Math.min(t,this.lc),this.uc-=t,this.lc-=t,this.ac-=t,this.ac<0&&this.Vc!==void 0&&(this.ac+=this.Vc)}Fc(t,e,i,s,n,a,o,l,u,d){var f;const y=i.length,m=i[0],S=i[y-1],x=s[y-1];if(this.Tc(d,S,x)){const v=((f=this.wc())===null||f===void 0?void 0:f.x)||0;let b=0;for(let T=0;T<y;T+=1)if(i[T]>v){b=T;break}const E={xValues:i,yValues:s,lookupValues:n,colors:a,ids:o,sizes:l,rotations:u,offset:b};this.fc=!0,this.appendSamples(E),this.fc=!1}else{const v=t.length,b=this.lc,E=this.uc-1,T=Math.max(E-b+1,0),V=yh(m,T,E,ot=>t[Mi(ot,this.uc,v,this.ac)]),F=V-1,B=V+1,z=t[Mi(V,this.uc,v,this.ac)],L=B<=this.uc-1?t[Mi(B,this.uc,v,this.ac)]:void 0,A=L!==void 0&&L<m?B+1:z<m?V+1:F+1,R=E-A+1,w=new this.xc(R),C=new this.xc(R),k=this.mc?new Float32Array(R):void 0,_=this.yc?new Uint32Array(R):void 0,X=this.Sc?new Uint32Array(R):void 0,N=this.vc?new Float32Array(R):void 0,U=this.bc?new Float32Array(R):void 0;let O=0;for(let ot=A;ot<=E;ot+=1){const ut=Mi(ot,this.uc,v,this.ac);w[O]=t[ut],C[O]=e[ut],k&&this.Lc&&(k[O]=this.Lc[ut]),_&&this.Rc&&(_[O]=this.Rc[ut]),X&&this.Oc&&(X[O]=this.Oc[ut]),N&&this.Ec&&(N[O]=this.Ec[ut]),U&&this.zc&&(U[O]=this.zc[ut]),O+=1}this.Uc(R);const W=new this.xc(y+R);W.set(i),W.set(w,y);const P=new this.xc(y+R);let H,j,Q,J,ht;P.set(s),P.set(C,y),n&&k&&(H=new Float32Array(y+R),H.set(n),H.set(k,y)),a&&_&&(j=new Uint32Array(y+R),j.set(a),j.set(_,y)),o&&X&&(Q=new Uint32Array(y+R),Q.set(o),Q.set(X,y)),l&&N&&(J=new Float32Array(y+R),J.set(l),J.set(N,y)),u&&U&&(ht=new Float32Array(y+R),ht.set(u),ht.set(U,y)),this.fc=!0,this.appendSamples({xValues:W,yValues:P,lookupValues:H,colors:j,ids:Q,sizes:J,rotations:ht}),this.fc=!1,this.D.emit("cleared")}}Gc(){return this.Bc()}Bc(){let t;if(this.gc&&"userSpecified"in this.gc)t=this.gc.userSpecified;else if(this.gc&&"autoDetectResult"in this.gc)t=this.gc.autoDetectResult;else if(this.Cc&&this.kc&&this.uc>0){const e=this.Vc!==void 0&&this.cc?this.ac:0,i=this.lc-1,s=this.Vc!==void 0&&this.cc?0:void 0,n=this.Vc!==void 0&&this.cc?this.ac-1:void 0,[a,o]=s!==void 0&&n!==void 0&&Math.abs(n-s)>Math.abs(i-e)?[s,n]:[e,i];if(1+o-a>=2){let l,u,d=this.Cc[a],f=this.kc[a];for(let y=a+1;y<=o;y+=1){if(l!==!1){const m=this.Cc[y],S=Math.sign(m-d);S!==0&&l&&l.direction!==S?l=!1:S===0||l||(l={direction:S}),d=m}if(u!==!1){const m=this.kc[y],S=Math.sign(m-f);S!==0&&u&&u.direction!==S?u=!1:S===0||u||(u={direction:S}),f=m}}t=l&&l.direction>0?hf.ProgressiveX:l&&l.direction<0?hf.RegressiveX:u&&u.direction>0?hf.ProgressiveY:u&&u.direction<0?hf.RegressiveY:void 0,this.gc={autoDetectResult:t},t&&nt.console.warn(`LightningChart JS DataSetXY warning | Data pattern was detected automatically (DataPatterns.${t}).
Automatic detection is only intended for kick-starting application development, not for production use.
Add { dataPattern: '${t}'} } to your application when creating series or DataSetXY to get clear this warning.`)}}if(t&&t!=="ProgressiveX")throw new Error("LightningChart JS New XY rework beta features do not yet support other data patterns than ProgressiveX. This will be introduced in near future.");return t}Tc(t,e,i){const s=this.wc();return!s||(t==="ProgressiveX"?e>s.x:t==="RegressiveX"?e<s.x:t==="ProgressiveY"?i>s.y:t!=="RegressiveY"||i<s.y)}_c(t){if(t.incomingDataX&&t.incomingDataY&&this.lc===0&&!this.Cc&&!this.kc&&(this.Vc===void 0||this.Vc===t.appendCount)&&this.Mc)return this.Cc=Uh(t.incomingDataX,this.xc)||new this.xc,this.kc=Uh(t.incomingDataY,this.xc)||new this.xc,this.Lc=this.mc?Uh(t.incomingDataLookup,Float32Array):void 0,this.Oc=this.Sc?Uh(t.incomingDataIDs,Uint32Array):void 0,this.Rc=this.yc?Uh(t.incomingDataColors,Uint32Array):void 0,this.Ec=this.vc?Uh(t.incomingDataSize,Float32Array):void 0,this.zc=this.bc?Uh(t.incomingDataRotation,Float32Array):void 0,{dataPattern:this.Bc(),samplesCacheX:this.Cc,samplesCacheY:this.kc,samplesCacheLookup:this.Lc,samplesCacheIDs:this.Oc,samplesCacheColors:this.Rc,samplesCacheSize:this.Ec,samplesCacheRotation:this.zc,maxSampleCount:t.appendCount,incomingDataReplacedCache:!0};if(this.Vc===void 0){const e=this.lc+t.appendCount;if(!this.Cc||!this.kc)return this.Cc=new this.xc(e),this.kc=new this.xc(e),this.Lc=this.mc?new Float32Array(e):void 0,this.Oc=this.Sc?new Uint32Array(e):void 0,this.Rc=this.yc?new Uint32Array(e):void 0,this.Ec=this.vc?new Float32Array(e):void 0,this.zc=this.bc?new Float32Array(e):void 0,{dataPattern:this.Bc(),samplesCacheX:this.Cc,samplesCacheY:this.kc,samplesCacheLookup:this.Lc,samplesCacheIDs:this.Oc,samplesCacheColors:this.Rc,samplesCacheSize:this.Ec,samplesCacheRotation:this.zc,maxSampleCount:e};const i=this.Cc.length;if(i<e){if(!this.Ac.warningDisplayed){const a=nt.performance.now();if(this.Ac.expandEvents=this.Ac.expandEvents.filter(o=>a-o.timestamp<5e3),e>1e3&&this.Ac.expandEvents.push({timestamp:a}),this.Ac.expandEvents.length>5)return nt.console.warn(`LightningChart JS warning - DataSetXY append operation was performed more than 5 times in 5 seconds.
Automatic max sample count control was enabled.
For streaming applications, DataSetXY.setMaxSampleCount() or Series.setMaxSampleCount() should be configured explicitly to get rid of this warning.`),this.Ac.warningDisplayed=!0,this.setMaxSampleCount({mode:"auto"}),this._c(t)}const s=new this.xc(e);s.set(this.Cc),this.Cc=s;const n=new this.xc(e);if(n.set(this.kc),this.kc=n,this.mc){const a=new Float32Array(e);this.Lc&&a.set(this.Lc),this.Lc=a}if(this.Sc){const a=new Uint32Array(e);this.Oc&&a.set(this.Oc),this.Oc=a}if(this.yc){const a=new Uint32Array(e);this.Rc&&a.set(this.Rc),this.Rc=a}if(this.vc){const a=new Float32Array(e);this.Ec&&a.set(this.Ec),this.Ec=a}if(this.bc){const a=new Float32Array(e);this.zc&&a.set(this.zc),this.zc=a}return this.ac=this.lc,{dataPattern:this.Bc(),samplesCacheX:this.Cc,samplesCacheY:this.kc,samplesCacheLookup:this.Lc,samplesCacheIDs:this.Oc,samplesCacheColors:this.Rc,samplesCacheSize:this.Ec,samplesCacheRotation:this.zc,maxSampleCount:e}}if(i>4*e){const s=new this.xc(e);s.set(this.Cc.subarray(0,this.lc)),this.Cc=s;const n=new this.xc(e);if(n.set(this.kc.subarray(0,this.lc)),this.kc=n,this.mc){const a=new Float32Array(e);this.Lc&&a.set(this.Lc.subarray(0,this.lc)),this.Lc=a}if(this.Sc){const a=new Uint32Array(e);this.Oc&&a.set(this.Oc.subarray(0,this.lc)),this.Oc=a}if(this.yc){const a=new Uint32Array(e);this.Rc&&a.set(this.Rc.subarray(0,this.lc)),this.Rc=a}if(this.vc){const a=new Float32Array(e);this.Ec&&a.set(this.Ec.subarray(0,this.lc)),this.Ec=a}if(this.bc){const a=new Float32Array(e);this.zc&&a.set(this.zc.subarray(0,this.lc)),this.zc=a}return{dataPattern:this.Bc(),samplesCacheX:this.Cc,samplesCacheY:this.kc,samplesCacheLookup:this.Lc,samplesCacheIDs:this.Oc,samplesCacheColors:this.Rc,samplesCacheSize:this.Ec,samplesCacheRotation:this.zc,maxSampleCount:e}}return{dataPattern:this.Bc(),samplesCacheX:this.Cc,samplesCacheY:this.kc,samplesCacheLookup:this.Lc,samplesCacheIDs:this.Oc,samplesCacheColors:this.Rc,samplesCacheSize:this.Ec,samplesCacheRotation:this.zc,maxSampleCount:i}}return t.appendCount+this.lc>this.Vc&&this.D.emit("maxSampleCountExceeded",this,this.lc,this.Vc,this.lc+t.appendCount),this.Cc=this.Cc||new this.xc(this.Vc),this.kc=this.kc||new this.xc(this.Vc),this.Lc=this.Lc||(this.mc?new Float32Array(this.Vc):void 0),this.Oc=this.Oc||(this.Sc?new Uint32Array(this.Vc):void 0),this.Rc=this.Rc||(this.yc?new Uint32Array(this.Vc):void 0),this.Ec=this.Ec||(this.vc?new Float32Array(this.Vc):void 0),this.zc=this.zc||(this.bc?new Float32Array(this.Vc):void 0),{dataPattern:this.Bc(),samplesCacheX:this.Cc,samplesCacheY:this.kc,samplesCacheLookup:this.Lc,samplesCacheIDs:this.Oc,samplesCacheColors:this.Rc,samplesCacheSize:this.Ec,samplesCacheRotation:this.zc,maxSampleCount:this.Vc}}Yc(){if(!this.Cc||!this.kc||this.lc===0)return;if(this.Vc===void 0)return this.uc>0?{x:this.Cc[0],y:this.kc[0]}:void 0;if(!this.cc)return{x:this.Cc[0],y:this.kc[0]};let t=this.ac-this.lc;return t<0&&(t+=this.Vc),{x:this.Cc[t],y:this.kc[t]}}wc(){if(!this.Cc||!this.kc||this.lc===0)return;if(this.Vc===void 0){const e=this.lc-1;return e>=0?{x:this.Cc[e],y:this.kc[e]}:void 0}let t=this.ac-1;return t<0&&(t+=this.Vc),{x:this.Cc[t],y:this.kc[t]}}Hc(t,e,i,s){const n=this.Bc(),a=this.Cc,o=this.kc;if(!a||!o)return;const l=b=>({x:a[b],y:o[b],lookupValue:this.mc&&this.Lc?this.Lc[b]:void 0,id:this.Sc&&this.Oc?this.Oc[b]:void 0,color:this.yc&&this.Rc?this.Rc[b]:void 0,size:this.vc&&this.Ec?this.Ec[b]:void 0,rotation:this.bc&&this.zc?this.zc[b]:void 0}),u=a.length,d=this.lc,f=this.uc-1,y=Math.max(f-d+1,0);if(n){const b=this.Yc(),E=this.wc();if(!(b&&E&&this.Cc&&this.kc))return;const T=n==="ProgressiveX"||n==="RegressiveX"?"x":"y",V=T==="x"?"y":"x",F=T==="x"?this.Cc:this.kc,B=V==="x"?this.Cc:this.kc,z=t[T],L=Math.min(b[T],E[T]),A=Math.max(b[T],E[T]);if(z<L||z>A)return;const R=yh(z,y,f,Q=>F[Mi(Q,this.uc,u,this.ac)]),w=Mi(R,this.uc,u,this.ac);if(!e)return l(w);const C=R-1,k=R+1,_=z>=F[w]&&(n==="ProgressiveX"||n==="ProgressiveY")?k<=f?Mi(k,this.uc,u,this.ac):void 0:C>=y?Mi(C,this.uc,u,this.ac):void 0;if(_===void 0)return;const X=F[w],N=B[w],U=F[_],O=B[_],W=Math.min(X,U),P=W===X?N:O,H=Math.max(X,U),j=gh(P,H===X?N:O,(z-W)/(H-W));return n==="ProgressiveX"||n==="RegressiveX"?{x:z,y:j}:{x:j,y:z}}let m,S=Number.MAX_VALUE;const x=gt(t,i,s),v=this.lc-1;for(let b=0;b<=v;b+=1){const E=a[b],T=o[b];if(!Number.isNaN(E)&&!Number.isNaN(T)){const V=pl(E,i.x,s.x),F=pl(T,i.y,s.y),B=(V-x.x)**2+(F-x.y)**2;B<S&&(S=B,m=b)}}return m===void 0?void 0:l(m)}Pc(t,e){this.D.emit("changed",t,e)}Ut(t){return this.D.off(t)}$c(t){return this.D.on("changed",t)}Xc(t){return this.D.on("cleared",t)}}const Mi=(r,t,e,i)=>r%e,Up=(r,t,e,i,s,n,a,o)=>{if(i===0||s===0)return;const l=e.length,u=i-1,d=Math.max(u-s+1,0),f=yh(r,d,u,b=>e[Mi(b,i,l)]),y=yh(t,d,u,b=>e[Mi(b,i,l)]),m=Math.max(f-o,d),S=Math.min(y+o,u),x=Mi(m,i,l),v=Mi(S,i,l);return x>v?{iFirstSample:m,iLastSample:S,iFirstSampleDataArray:x,iLastSampleDataArray:v,dataRanges:[{offset:x,count:l-x},{offset:0,count:v+1}]}:{iFirstSample:m,iLastSample:S,iFirstSampleDataArray:x,iLastSampleDataArray:v,dataRanges:[{offset:x,count:v-x+1}]}},yh=(r,t,e,i)=>{const s=e;for(;t!==e;){const a=Math.ceil((t+e)/2);r<i(a)?e=a-1:t=a}const n=Math.abs(r-i(t));return t<s&&Math.abs(r-i(t+1))<n?t+1:t},fi=(r,t,e,i,s)=>{const n=t.length;if(Array.isArray(t))for(let a=0;a<i;a+=1)r[s+a]=t[e+a];else r.set(n===i?t:t.subarray(e,e+i),s)},Uh=(r,t)=>r===void 0?void 0:Array.isArray(r)?new t(r):r instanceof t?r:new t(r),Gs=(r,t,e)=>{if(r!==void 0)return Array.isArray(r)?r.slice(t,e):r.subarray(t,e)};class Nm extends Lp{constructor(t,e,i,s,n){super(t,e,i,s,n),this.la="label",this.Na=this.ks.Pr(this.renderingScale).Rh(this.la).Ce(Ft).Fr(Qn).Ir(Qn),this.setMargin(5),this.xu(this.Na)}Fu(){return[this.Na]}setFillStyle(t){return this.Na.Ce(t),this.ks.Ss(),this}getFillStyle(){return this.Na.Eh()}Te(){const t=this.getPosition(Y(0,0),Me.Content),e=gt(t,this.scale,this.renderingScale);return this.Na.Fe(e),this}Ps(){this.Na.Ps();const t=this.la.length===0?Y(0,0):this.Na.jc();return this.setContentSize(t),super.Ps()}setText(t){return this.la=t,this.Na.Rh(this.la),this.ks.Ss(),this}getText(){return this.la}setFont(t){return this.Na.Oh(t),this.ks.Ss(),this}getFont(){return this.Na.Vh()}setTextRotation(t){return this.Na.Nh(t),this.ks.Ss(),this}getTextRotation(){return this.Na.Gh()}}const Dc={...xn,...Bp,uiElement:Nm};class ir extends eR{constructor(t,e,i,s,n){super(t,e,i,s,n),this.Zc=!1,this.fitTo=this.Bu.bind(this),this.setSize=this.fitTo,this.Na=this.ks.ic(e).Ce(Ft).we(At),this.xu(this.Na)}Fu(){return[this.Na]}setFillStyle(t){return this.Na.Ce(t),this.ks.Ss(),this}getFillStyle(){return this.Na.Eh()}setStrokeStyle(t){return this.Na.we(t),this.ks.Ss(),this}getStrokeStyle(){return this.Na.ao()}Te(){const t=Je([this.getPosition(Y(-1,-1),Me.Content),this.getPosition(Y(1,1),Me.Content)].map(e=>gt(e,this.scale,this.renderingScale)));return this.Zc?this.Na.pl([{x:(t.min.x+t.max.x)/2,y:t.min.y},{x:t.min.x,y:(t.min.y+t.max.y)/2},{x:(t.min.x+t.max.x)/2,y:t.max.y},{x:t.max.x,y:(t.min.y+t.max.y)/2}]):this.Na.pl([t.min,{x:t.min.x,y:t.max.y},t.max,{x:t.max.x,y:t.min.y}]),this}Bu(t){return this.setContentSize(t),this.ks.Ss(),this}Lu(){return 0}Ru(){return 0}zu(){return 0}Eu(){return 0}}class Bm extends pk{constructor(t,e,i,s,n){super(t,e,i,Cr.Simple,s,n),this.td=Xt(Y(0,0)),this.sd=Xt(10),this.ed=Xt(void 0),this.Uu=Xt(qt.Right),this.sc()}Fu(){return[this.Na]}setFillStyle(t){return this.Na.Ce(t),this.ks.Ss(),this}getFillStyle(){return this.Na.Eh()}setStrokeStyle(t){return this.Na.we(t),this.ks.Ss(),this}getStrokeStyle(){return this.Na.ao()}setDirection(t){return this.Uu.S(t),this.ks.Ss(),this}getDirection(){return this.Uu.M()}setPointerLength(t){return this.sd.S(t),this.ks.Ss(),this}getPointerLength(){return this.sd.M()}setPointerAngle(t){return this.ed.S(t),this.ks.Ss(),this}getPointerAngle(){let t=this.ed.M();if(t===void 0){const e=this.hd();if(e===0)return 0;t=e!==0?180*Math.atan(2*this.getPointerLength()/e)/Math.PI:0}return Math.min(Math.max(t,1),89)}Bu(t){return this.td.S(t),this.ks.Ss(),this}rd(){const t=this.getPointerAngle();return t===0?0:2*this.getPointerLength()/Math.tan(t*Math.PI/180)}nd(){return kv(this.Uu.M())?this.td.M().x:this.td.M().y}hd(){return kv(this.Uu.M())?this.td.M().y:this.td.M().x}Lu(){switch(this.Uu.M()){case qt.Right:return 0;case qt.Left:return this.getPointerLength();case qt.Up:case qt.Down:return Math.max(0,this.rd()-this.hd());default:return 0}}Ru(){switch(this.Uu.M()){case qt.Right:return this.getPointerLength();case qt.Left:return 0;case qt.Up:case qt.Down:return Math.max(0,this.rd()-this.hd());default:return 0}}zu(){switch(this.Uu.M()){case qt.Right:case qt.Left:return Math.max(0,this.rd()-this.hd());case qt.Up:return this.getPointerLength();case qt.Down:default:return 0}}Eu(){switch(this.Uu.M()){case qt.Right:case qt.Left:return Math.max(0,this.rd()-this.hd());case qt.Up:return 0;case qt.Down:return this.getPointerLength();default:return 0}}hc(){const t=TM(this.Uu.M()),e=l0(Y(0,0),t),i=this.getPointerLength(),s=this.rd(),n=this.nd(),a=this.hd();if(!(i!==0&&s!==0||n!==0&&a!==0))return[];const o=Y(0,0),l=zt(zt(o,Yt(t,-i)),Yt(e,s/2)),u=zt(l,Yt(e,(a-s)/2)),d=zt(u,Yt(t,-n)),f=zt(zt(o,Yt(t,-i)),Yt(e,-s/2)),y=zt(f,Yt(e,-(a-s)/2)),m=zt(y,Yt(t,-n));let S;return S=n===0||a===0?[o,l,f]:i===0||s===0?[u,d,m,y]:xi(a,s)?[o,l,d,m,f]:[o,l,u,d,m,y,f],S}}class S0 extends Lp{constructor(t,e,i,s,n){super(t,e,i,s,n),this.fitTo=this.Bu.bind(this),this.setSize=this.fitTo,this.od=new Pp,this.Na=this.ks.dd(e).Re(At).ud(Ft).ld(Ft).ad(this.od),this.xu(this.Na)}Fu(){return[this.Na]}setShape(t){return this.Na.fd(t),this}getShape(){return this.Na.Ad()}setRotation(t){return this.Na.gd(t),this}getRotation(){return this.Na.md()}setFillStyle(t){return this.Na.ld(t),this.ks.Ss(),this}getFillStyle(){return this.Na.yd()}Te(){const t=gt(this.getPosition({x:0,y:0},Me.Content),this.scale,this.renderingScale),e=Math.max(this.size.x,this.size.y);if(this.od.clear(),e>0){const i=this.Na.Ad(),s=this.Na.yd(),n=so(i)&&i,a=Ul(s)&&s;if(n){const o=e/n.oi().y;this.Na.pd(o)}else if(a){const o=a.source;if(o instanceof Image){const l=e/o.height;this.Na.pd(l)}}else this.Na.pd(e);this.od.appendSample(t)}return this}Bu(t){return this.setContentSize(t),this.ks.Ss(),this}Lu(){return 0}Ru(){return 0}zu(){return 0}Eu(){return 0}}const Tk={...xn,...Bp,uiElement:S0};class Ml extends mk{setSize(t){return this.setContentSize(t),this.ks.Ss(),this}}class rR extends dk{constructor(){super(...arguments),this.Sd=[],this.vd=0,this.bd=t=>{const e=this.Sd.indexOf(t);e>=0&&this.Sd.splice(e,1)}}getMembers(){return this.Sd}getMemberCount(){return this.Sd.length}setMinimumSize(t){return this.xd=t,this.ks.Ss(),this}getMinimumSize(){return this.xd}addElement(t,e=-1){const i=t.Zu(this.ks,this.renderingScale,this.scale,this.bd,this.qi,!1);return i.setMouseInteractions(this.getMouseInteractions()),e>=0?this.Sd.splice(e,0,i):this.Sd.push(i),i.setVisible(this.getVisible()),this.xu(i),this.$i&&(wn(0,()=>{}),i.dispose()),i}dispose(){return super.dispose(),this.Sd.slice().forEach(Qh),this}setVisible(t){return super.setVisible(t),this.Sd.forEach(e=>e.setVisible(t)),this}setMouseInteractions(t){super.setMouseInteractions(t);for(let e=0;e<this.Sd.length;e+=1)this.Sd[e].setMouseInteractions(t);return this}getMouseInteractions(){if(super.getMouseInteractions())return!0;for(let t=0;t<this.Sd.length;t+=1)if(this.Sd[t].getMouseInteractions())return!0;return!1}setHighlight(t){super.setHighlight(t);for(let i=0;i<this.Sd.length;i+=1){const s=this.Sd[i];"getHighlight"in(e=s)&&"setHighlight"in e&&s.setHighlight(t)}var e;return this}}class Rl extends rR{Te(){super.Te();const t=this.getPosition(Y(-1,1),Me.Content),e=this.Sd.reduce((s,n)=>s+ +(n instanceof Ml),0),i=e>0?(this.size.x-this.vd)/e:0;return this.Sd.reduce((s,n)=>n instanceof Ml?this.scale.mi({x:s,y:t.y},{x:i+n.getSize().x,y:0}).x:n.setOrigin(Y(-1,1)).setPosition(Y(s,t.y)).Te().getPosition(Y(1,0)).x,t.x),this}Ps(){for(let i=0;i<this.Sd.length;i+=1){const s=this.Sd[i];s instanceof El&&s.setMinimumSize(0),s.Ps()}const t=this.Sd.reduce(this.Md.bind(this),Jn(0,0));this.vd=t.x;const e=this.xd===void 0?t:Y(Math.max(t.x,this.xd),t.y);this.setContentSize(e);for(let i=0;i<this.Sd.length;i+=1){const s=this.Sd[i];s instanceof El&&s.setMinimumSize(e.y).Ps()}return super.Ps()}Md(t,e){const i=e.getSize();return t.x+=i.x,t.y=Math.max(t.y,i.y),t}addGap(t=0,e=-1){return this.addElement(nR,e).setSize(Y(0,t))}}class El extends rR{Te(){super.Te();const t=this.getPosition(Y(-1,1),Me.Content),e=this.Sd.reduce((s,n)=>s+ +(n instanceof Ml),0),i=e>0?(this.size.y-this.vd)/e:0;return this.Sd.reduce((s,n)=>n instanceof Ml?this.scale.mi({x:t.x,y:s},{x:0,y:-(i+n.getSize().y)}).y:n.setOrigin(Y(-1,1)).setPosition(Y(t.x,s)).Te().getPosition(Y(0,-1)).y,t.y),this}Ps(){for(let i=0;i<this.Sd.length;i+=1){const s=this.Sd[i];s instanceof Rl&&s.setMinimumSize(0),s.Ps()}const t=this.Sd.reduce(this.Md.bind(this),Jn(0,0));this.vd=t.y;const e=this.xd===void 0?t:Y(t.x,Math.max(t.y,this.xd));this.setContentSize(e);for(let i=0;i<this.Sd.length;i+=1){const s=this.Sd[i];s instanceof Rl&&s.setMinimumSize(e.x).Ps()}return super.Ps()}Md(t,e){const i=e.getSize();return t.y+=i.y,t.x=Math.max(t.x,i.x),t}addGap(t=0,e=-1){return this.addElement(nR,e).setSize(Y(0,t))}}const nR={...xn,...Bp,uiElement:Ml};class wk extends El{constructor(){super(...arguments),this.Sd=[]}addRow(){return this.addElement(Fc,void 0)}getRow(t,e=!1){return e&&this.Sd.length<=t?(this.addRow(),this.getRow(t,!0)):this.Sd[t]}}const aR={...xn,...fo,...yk},ro={...aR,uiElement:El,background:ir},Fc={...aR,uiElement:Rl,background:ir},x0={setTextLabel:null,setText(r){return this.setTextLabel.setText(r),this},getText(){return this.setTextLabel.getText()}},hR=(r,t)=>{const e={},i=`stylable${r}s`;return e[i]=t,e[`set${r}FillStyle`]=function(s){return this[i].forEach(n=>n.setFillStyle(s)),this},e[`get${r}FillStyle`]=function(){return this[i][0].getFillStyle()},e[`set${r}Font`]=function(s){return this[i].forEach(n=>n.setFont(s)),this},e[`get${r}Font`]=function(){return this[i][0].getFont()},e[`set${r}Rotation`]=function(s){return this[i].forEach(n=>n.setTextRotation(s)),this},e[`get${r}Rotation`]=function(){return this[i][0].getTextRotation()},e},Vc=hR("Text",[]),oR={button:void 0,isLocked:!1,setOn(r){const t=this.button.getOn()!==r;return this.button.setOn(r),t&&this.D.emit("switch",r),this},getOn(){return this.button.getOn()},setLocked(r){return this.isLocked=r,this},getLocked(){return this.isLocked},onSwitch(r){return this.D.on("switch",t=>r(this,t))},offSwitch(r){return this.D.off(r,"switch")},setButtonOffFillStyle(r){return this.button.setOffFillStyle(r),this},getButtonOffFillStyle(){return this.button.getOffFillStyle()},setButtonOnFillStyle(r){return this.button.setOnFillStyle(r),this},getButtonOnFillStyle(){return this.button.getOnFillStyle()},setButtonSize(r){return this.button.setSize(r),this},getButtonSize(){return this.button.getSize()},setButtonShape(r){return this.button.setButtonShape(r),this},getButtonShape(){return this.button.getButtonShape()}},lR={textFillStyleHidden:void 0,setTextFillStyleHidden(r){return this.textFillStyleHidden=typeof r=="function"?r(this.textFillStyleHidden):r,this},getTextFillStyleHidden(){return this.textFillStyleHidden}},Ck={pointable:void 0,setDirection(r){return this.pointable.setDirection(r),this},getDirection(){return this.pointable.getDirection()},setPointerLength(r){return this.pointable.setPointerLength(r),this},getPointerLength(){return this.pointable.getPointerLength()}},Op={...xn,...fo,background:ir,Zu(r,t,e,i,s,n){const a=new Rl(r,t,e,this.background,i,s),o=a.addElement(Dc,void 0),l=Object.assign(a,x0,{setTextLabel:o},Vc,{stylableTexts:[o]});return Fa(l,s,n),this.applyStylers(l,s)}}.addStyler(kc),kk={...xn,...fo,background:Bm,Zu(r,t,e,i,s,n){const a=new Rl(r,t,e,this.background,i,s),o=a.addElement(Dc,void 0),l=a.getBackground(),u=Object.assign(a,x0,{setTextLabel:o},Vc,{stylableTexts:[o]},Ck,{pointable:l},{setTickLabelPadding(d){return this.getDirection()===qt.Up?(this.setPadding({top:d}),o.setMargin({top:0})):this.getDirection()===qt.Down?(this.setPadding({bottom:d}),o.setMargin({bottom:0})):this.getDirection()===qt.Right?(this.setPadding({right:d}),o.setMargin({right:0})):this.getDirection()===qt.Left&&(this.setPadding({left:d}),o.setMargin({left:0})),this},getTickLabelPadding(){return this.getDirection()===qt.Up?this.getPadding().top:this.getDirection()===qt.Down?this.getPadding().bottom:this.getDirection()===qt.Right?this.getPadding().right:this.getPadding().left}});return u.Qu="other",u.setPointerLength(s.xAxisNumericTicks.majorTickStyle.getTickLength()).setTickLabelPadding(s.xAxisNumericTicks.majorTickStyle.getTickPadding()).setTextFont(s.uiTextFont).setTextFillStyle(s.uiTextFillStyle).setBackground(d=>d.setFillStyle(s.uiBackgroundFillStyle).setStrokeStyle(s.uiBackgroundStrokeStyle)),Fa(u,s,n),this.applyStylers(u,s)}};class Dk extends Ll{constructor(t,e,i,s,n,a){super(t,e,i,n,a),this.Ds=!1,this.D=new Li,this._d=Ft,this.wd=Ft,this.getOn=()=>this.Ds,this.Cd=this.xu(new S0(this.ks,this.renderingScale,this.scale,se,a).setShape(s)),this.wd=a.uiButtonFillStyleHidden||a.uiButtonFillStyle}Fu(){return[...this.Cd.Fu()]}onHighlight(t){return this.D.on("highlight",t)}offHighlight(t){return this.D.off(t)}setOn(t){return this.Ds=t,this.Cd.setFillStyle(t?this._d:this.wd),this.ks.Ss(),this}setOffFillStyle(t){return this.wd=typeof t=="function"?t(this.wd):t,this.Ds||this.Cd.setFillStyle(this.wd),this}getOffFillStyle(){return this.wd}setSize(t){return this.Cd.fitTo(typeof t=="number"?Y(t,t):t),this}getSize(){return this.Cd.getSize()}setOnFillStyle(t){return this._d=typeof t=="function"?t(this._d):t,this.Ds&&this.Cd.setFillStyle(this._d),this}getOnFillStyle(){return this._d}setButtonShape(t){return this.Cd.setShape(t),this.ks.Ss(),this}getButtonShape(){return this.Cd.getShape()}Te(){return super.Te(),this.Cd.setVisible(this.getVisible()).setPosition(this.getPosition(Y(0,0),Me.Content)).Te(),this}Ps(){const t=this.Cd.Ps().getSize();return this.setContentSize(t),super.Ps()}dispose(){return super.dispose(),this.Cd.dispose(),this}setMouseInteractions(t){return this.Cd.setMouseInteractions(t),this}getMouseInteractions(){return this.Cd.getMouseInteractions()}setHighlight(t){const e=dh(t);return this.Cd.setHighlight(e),this.D.emit("highlight",this,t),this.ks.Ss(),this}getHighlight(){return this.Cd.getHighlight()}}const uR={...xn,uiElement:Dk,buttonShape:qe.Circle,setButtonShape(r){return{...this,buttonShape:r}},Zu(r,t,e,i,s,n){const a=this.applyStylers(new this.uiElement(r,t,e,this.buttonShape,i,s),s);return Fa(a,s,n),a}},cR={...xn,...fo,background:ir,buttonBuilder:uR,setButtonShape(r){return{...this,buttonBuilder:this.buttonBuilder.setButtonShape(r)}},Zu(r,t,e,i,s,n){const a=new Rl(r,t,e,this.background,i,s),o=a.addElement(ro);o.addGap();const l=o.addElement(this.buttonBuilder);o.addGap();const u=a.addElement(ro);u.addGap();const d=u.addElement(Dc);u.addGap(),a.addGap();const f=Object.assign(a,x0,{setTextLabel:d},Vc,{stylableTexts:[d]},oR,{button:l},lR);let y;return f.onMouseClick((m,S)=>{f.getLocked()||f.setOn(!f.getOn())}),f.onMouseEnter(()=>f.setHighlight(!0)),f.onMouseLeave(()=>f.setHighlight(!1)),f.setMouseStyle(ne.Point),f.setTextFillStyleHidden(s.uiTextFillStyleHidden||s.uiTextFillStyle),f.onSwitch((m,S)=>{S?y&&f.setTextFillStyle(y):(y=f.getTextFillStyle(),f.setTextFillStyle(f.getTextFillStyleHidden()))}),f.setPadding({left:5}),Fa(f,s,n),this.applyStylers(f,s)}}.addStyler(kc).addStyler(tR);class dR extends Ll{constructor(t,e,i,s,n,a){super(t,e,i,s,n),this.kd=[],this.Td=2,this.Fd="",this.Id=(o,l)=>o.label!==void 0?o.label:l.percentageValues?`${(100*o.value).toFixed(0)}%`:PM(o.value,l.min,l.max),this.Pd=0,this.Dd=0,this.Bd=!1,this.ks=t,this.Ld=a,this.Rd=this.xu(t.ke(e).we(At)),this.Ed=this.xu(t.Pr(e).Ce(n.uiTextFillStyle).Oh(n.uiTextFont).setMouseInteractions(!1)),a==="vertical"?(this.zd=140,this.Vd=25):(this.zd=160,this.Vd=15)}Fu(){return[this.Rd,this.Ed]}Od(t){this.Nd=t;const e=Zv(t,this.Ld==="vertical"?0:90,this.Bd);return this.Rd.Ce(e),this.ks.Ss(),this}Gd(){return this.Nd}Wd(t){return this.zd=t,this.ks.Ss(),this}Ud(){return this.zd}Yd(t){return this.Vd=t,this.ks.Ss(),this}Hd(){return this.Vd}$d(t){return this.Fd=t,this.ks.Ss(),this}Xd(){return this.Fd}jd(t){return this.Id=t,this.ks.Ss(),this}setLUTDisplayProportionalSteps(t){if(this.Bd=t,this.Nd){const e=Zv(this.Nd,this.Ld==="vertical"?0:90,this.Bd);this.Rd.Ce(e)}return this.ks.Ss(),this}getLUTDisplayProportionalSteps(){return this.Bd}setFillStyle(t){return this.Ed.Ce(t),this.ks.Ss(),this}getFillStyle(){return this.Ed.Eh()}setFont(t){return this.Ed.Oh(t),this.ks.Ss(),this}getFont(){return this.Ed.Vh()}setTextRotation(t){return this.Dd=t,this.Ed.Nh(t),this.ks.Ss(),this}getTextRotation(){return this.Ed.Gh()}Te(){var t,e,i,s;if(super.Te(),this.$i||!this.getVisible())return this;const n=this.Nd;if(n){const a=this.renderingScale.Wi(),o=n.min,l=n.max;if(this.Ld==="vertical"){const u=this.getPosition({x:-1,y:-1},Me.Content),d=zt(u,{x:this.Rd.oi().x+this.Td*a.x,y:0}),f={x:d.x,y:d.y+(this.Fd.length>0?this.Pd*a.y+this.Ed.oi().y:0)+.5*(((t=this.kd[0])===null||t===void 0?void 0:t.oi().y)||0)},y={x:f.x,y:this.getPosition({x:-1,y:1},Me.Content).y-.5*(((e=this.kd[this.kd.length-1])===null||e===void 0?void 0:e.oi().y)||0)};this.Rd.Fe({x:u.x,y:f.y}),this.Ed.Ea({x:-1,y:-1}).Fe(d),n.getSteps().forEach((m,S)=>{const x=wa(f,y,this.Bd?n.getInterpolation()===!0?(m.value-o)/(l-o):.9*(m.value-o)/(l-o):n.getInterpolation()===!0?S/(n.getSteps().length-1):S/n.getSteps().length);this.kd[S].Ea({x:-1,y:0}).Fe(x)})}else{const u=this.getPosition({x:-1,y:-1},Me.Content),d=this.getPosition({x:1,y:1},Me.Content),f=this.kd.reduce((v,b)=>Math.max(v,b.oi().y),0),y=zt(u,{x:.5*(((i=this.kd[0])===null||i===void 0?void 0:i.oi().x)||0),y:f}),m={x:d.x,y:y.y},S={x:m.x-(.5*(((s=this.kd[this.kd.length-1])===null||s===void 0?void 0:s.oi().x)||0)+(this.Fd.length>0?this.Pd*a.x+this.Ed.oi().x:0)),y:y.y},x={x:y.x,y:y.y+this.Td*a.y};this.Rd.Fe(x),this.Ed.Ea({x:1,y:1}).Fe(m),n.getSteps().forEach((v,b)=>{const E=wa(y,S,this.Bd?n.getInterpolation()===!0?(v.value-o)/(l-o):.9*(v.value-o)/(l-o):n.getInterpolation()===!0?b/(n.getSteps().length-1):b/n.getSteps().length);this.kd[b].Ea({x:0,y:1}).Fe(E)})}}return this}Ps(){if(this.Nd&&this.getVisible()){const t=this.Nd.getSteps();for(let e=this.kd.length;e<t.length;e+=1)this.kd.push(this.xu(this.ks.Pr(this.renderingScale).setMouseInteractions(!1)));for(let e=0;e<t.length;e+=1)this.kd[e].Ce(this.Ed.Eh()).Oh(this.Ed.Vh()).Rh(this.Id(t[e],this.Nd)).Nh(this.Dd);for(let e=t.length;e<this.kd.length;e+=1)this.kd[e].dispose();if(this.kd.length=t.length,this.Ed.Rh(this.Fd),this.Ld==="vertical"){const e=this.Vd,i=this.zd;this.Rd.q({x:e*this.renderingScale.x.getPixelSize(),y:i*this.renderingScale.y.getPixelSize()});const s=e+Math.max(this.kd.reduce((a,o)=>Math.max(a,o.Ps().jc().x),0),this.Ed.Ps().jc().x),n=(this.Fd.length>0?this.Pd+this.Ed.Ps().jc().y:0)+i+.5*this.kd[0].Ps().jc().y+.5*this.kd[this.kd.length-1].Ps().jc().y;this.setContentSize({x:s,y:n})}else{const e=this.zd,i=this.Vd;this.Rd.q({x:e*this.renderingScale.x.getPixelSize(),y:i*this.renderingScale.y.getPixelSize()});const s=Math.max(this.Fd.length>0?this.Pd+this.Ed.Ps().jc().x:0,.5*this.kd[this.kd.length-1].Ps().jc().x),n=e+.5*this.kd[0].Ps().jc().x+s,a=i+this.Td+this.kd.reduce((o,l)=>Math.max(o,l.Ps().jc().y),0);this.setContentSize({x:n,y:a})}}else this.kd.forEach(t=>t.dispose()),this.kd.length=0,this.Ed.setVisible(!1),this.Rd.setVisible(!1),this.setContentSize({x:0,y:0});return super.Ps()}dispose(){return super.dispose(),this.Rd.dispose(),this.kd.forEach(Qh),this.Ed.dispose(),this}setMouseInteractions(t){return this.Rd.setMouseInteractions(t),this}getMouseInteractions(){return this.Rd.getMouseInteractions()}}const fR={lutElement:{},setLUT(r){return this.lutElement.Od(r),this},getLUT(){return this.lutElement.Gd()},setLUTLength(r){return this.lutElement.Wd(r),this},getLUTLength(){return this.lutElement.Ud()},setLUTThickness(r){return this.lutElement.Yd(r),this},getLUTThickness(){return this.lutElement.Hd()},setLookUpUnit(r){return this.lutElement.$d(r),this},getLookUpUnit(){return this.lutElement.Xd()},setLUTStepValueFormatter(r){return this.lutElement.jd(r),this},setLUTDisplayProportionalSteps(r){return this.lutElement.setLUTDisplayProportionalSteps(r),this},getLUTDisplayProportionalSteps(){return this.lutElement.getLUTDisplayProportionalSteps()}};({...xn,...fo,background:ir,alignment:"horizontal",setAlignment(r){return{...this,alignment:r}},Zu(r,t,e,i,s,n){const a=new El(r,t,e,this.background,i,s),o=a.addElement({Zu:()=>new dR(r,t,e,se,s,this.alignment)}),l=Object.assign(a,Vc,{stylableTexts:[o]},fR,{lutElement:o});return Fa(l,s,n),this.applyStylers(l,s)}}).addStyler(kc);const Zv=(r,t,e)=>{const i=r.getSteps(),s=r.min,n=r.max-s;if(r.getInterpolation()===!0)return new ps({angle:t,stops:i.map((o,l)=>({offset:e?(o.value-s)/n:l/(i.length-1),color:o.color||r.color}))});const a=[];for(let o=0;o<i.length;o+=1){const l=i[o];a.push({offset:e?.9*(l.value-s)/n:o/i.length,color:l.color||r.color});const u=o<i.length-1?i[o+1]:void 0;a.push({offset:e?u?.9*(u.value-s)/n:1:u?(o+1)/i.length:1,color:l.color||r.color})}return new ps({angle:t,stops:a})},Fk={...xn,...fo,background:ir,buttonBuilder:uR,setButtonShape(r){return{...this,buttonBuilder:this.buttonBuilder.setButtonShape(r)}},alignment:"horizontal",setAlignment(r){return{...this,alignment:r}},Zu(r,t,e,i,s){const n=new El(r,t,e,this.background,i,s),a=n.addElement(Fc),o=a.addElement(ro);o.addGap();const l=o.addElement(this.buttonBuilder);o.addGap();const u=a.addElement(ro);u.addGap();const d=u.addElement(Dc);u.addGap();const f=n.addElement({Zu:()=>new dR(r,t,e,se,s,this.alignment)});this.alignment==="vertical"&&f.setMargin({left:s.uiButtonSize+6});const y=Object.assign(n,x0,{setTextLabel:d},Vc,{stylableTexts:[d,f]},hR("LUTText",[f]),oR,{button:l},fR,{lutElement:f},lR);let m;return y.onMouseClick(()=>{y.getLocked()||y.setOn(!y.getOn())}),y.onMouseEnter(()=>y.setHighlight(!0)),y.onMouseLeave(()=>y.setHighlight(!1)),y.setMouseStyle(ne.Point),y.setTextFillStyleHidden(s.uiTextFillStyleHidden||s.uiTextFillStyle),y.onSwitch((S,x)=>{x?m&&y.setTextFillStyle(m):(m=y.getTextFillStyle(),y.setTextFillStyle(y.getTextFillStyleHidden()))}),y.setPadding({left:5}),this.applyStylers(y,s)}}.addStyler(kc).addStyler(tR),Vk={alignment:null,title:null,entryStylers:null,legendBoxDisposed:null,entries:[],add(r,t){const e=!t||typeof t!="object"||t.toggleVisibilityOnClick===void 0||t.toggleVisibilityOnClick,i=t==null?void 0:t.matchStyleExactly,s=t&&typeof t=="object"&&t.builder!==void 0?t.builder:void 0;return this.legendBoxDisposed()||(r instanceof Jr?this.addChart(r,e,s,i):"attach"in r?this.addAttachable(r,e,s,i):r&&this.addDashboard(r,e,s,i)),this},addAttachable(r,t,e,i){const s=r.Gd&&r.Gd(),n=r.Cs&&r.Cs(),a=i!==void 0&&i;let o=e;if(!o){let u=s?Fk.setAlignment(this.alignment):cR;n!==void 0&&(u=u.setButtonShape(n)),o=u}const l=this.addElement(o);if(s&&"setLUT"in l){l.setLUT(s.lut);const u=s.lut.getUnits(),d=s.lookUpProperty,f=u.length>0?u:d==="x"?"x":d==="y"?"y":d==="z"?"z":"";l.setLookUpUnit(f)}return this.entryStylers.forEach(u=>u(l)),this.entries.push({entry:l,component:r}),r.attach(l,t,a),t||l.setLocked(!0),this},addChart(r,t,e,i){return r.Zd().forEach(s=>this.addAttachable(s,t,e,i)),this},addDashboard(r,t,e,i){return r.getCells().filter(s=>s.panel instanceof Jr).forEach(s=>this.addChart(s.panel,t,e,i)),this},setTitle(r){return this.title.setText(r),this},getTitle(){return this.title.getText()},setTitleFillStyle(r){return this.title.setTextFillStyle(r),this},getTitleFillStyle(){return this.title.getTextFillStyle()},setTitleFont(r){return this.title.setTextFont(r),this},getTitleFont(){return this.title.getTextFont()},setTitleRotation(r){return this.title.setTextRotation(r),this},getTitleRotation(){return this.title.getTextRotation()},setEntries(r){return this.entries.forEach(t=>r(t.entry,t.component)),this}},zk={alignment:"vertical",layoutBuilder:ro,setAlignment(r){return{...this,alignment:r,layoutBuilder:r==="horizontal"?Fc:ro}},getAlignment(){return this.alignment},titleBuilder:Op,styleTitle(r){return{...this,titleBuilder:this.titleBuilder.addStyler(r)}},entryStylers:[],styleEntries(r){return{...this,entryStylers:[...this.entryStylers,r]}}},A0={...xn,...fo,...zk,background:ir,Zu(r,t,e,i,s,n){const a=this.layoutBuilder.setBackground(this.background).Zu(r,t,e,i,s,!1);let o=Object.assign(a,Vk,{alignment:this.alignment,entryStylers:this.entryStylers,legendBoxDisposed:()=>a.$i});o.entries=[];const l=o.addElement(this.alignment==="horizontal"?ro:Fc),u=l.addElement(this.titleBuilder).setText("Legend").setTextFillStyle(s.legendTitleFillStyle).setTextFont(s.legendTitleFont);return l.addGap(),o=Object.assign(o,{title:u}),this.alignment==="horizontal"&&u.setMargin({right:6}),Fa(o,s,n),this.applyStylers(o,s)}}.addStyler((r,t)=>r.setPadding(5));class _k extends Ll{constructor(t,e,i,s,n){super(t,e,i,s,n),this.Qd=10,this.Jd=qt.Up,this.Kd=0,this.Qu="major",this.la=this.xu(t.Pr(this.renderingScale).Fr(Qn).Ir(Qn)),this.Le=this.xu(t.Ee(this.renderingScale))}Fu(){return[this.la]}Te(){if(super.Te(),this.$i)return this;const t=gt(this.getPosition(),this.scale,this.renderingScale),e=this.renderingScale.mi(t,{x:this.Jd===qt.Right?-this.Qd:this.Jd===qt.Left?this.Qd:0,y:this.Jd===qt.Up?-this.Qd:this.Jd===qt.Down?this.Qd:0}),i=this.renderingScale.mi(e,{x:this.Jd===qt.Right?-this.Kd:this.Jd===qt.Left?this.Kd:0,y:this.Jd===qt.Up?-this.Kd:this.Jd===qt.Down?this.Kd:0});return this.Le.Ve(t).ze(e),this.la.Fe(i).Ea(this.Jd===qt.Up?{x:0,y:1}:this.Jd===qt.Down?{x:0,y:-1}:this.Jd===qt.Right?{x:1,y:0}:{x:-1,y:0}),this}Ps(){const t=this.Le.uu().getThickness();return this.size=this.Jd===qt.Left||this.Jd===qt.Right?{x:this.Qd+this.Kd+this.la.Ps().jc().x,y:t}:{y:this.Qd+this.Kd+this.la.Ps().jc().y,x:t},super.Ps()}dispose(){return super.dispose(),this.la.dispose(),this.Le.dispose(),this}setVisible(t){return super.setVisible(t),this.la.setVisible(t),this.Le.setVisible(t),this}setMouseInteractions(t){return this.la.setMouseInteractions(t),this.Le.setMouseInteractions(t),this}getMouseInteractions(){return this.la.getMouseInteractions()}getText(){return this.la.Bh()}setTextFillStyle(t){return this.la.Ce(t),this.ks.Ss(),this}getTextFillStyle(){return this.la.Eh()}setTextFont(t){return this.la.Oh(t),this}setTextRotation(t){return this.la.Nh(t),this}getTextRotation(){return this.la.Gh()}getTextFont(){return this.la.Vh()}setText(t){return this.la.Rh(t),this.ks.Ss(),this}setDirection(t){return this.Jd=t,this.ks.Ss(),this}getDirection(){return this.Jd}setPointerLength(t){return this.Qd=t,this.ks.Ss(),this}getPointerLength(){return this.Qd}setTickLabelPadding(t){return this.Kd=t,this.ks.Ss(),this}getTickLabelPadding(){return this.Kd}setTickStyle(t){return this.Le.Re(t),this.ks.Ss(),this}getTickStyle(){return this.Le.uu()}}const gR={...xn,Zu(r,t,e,i,s,n){const a=new _k(r,t,e,i,s);return Fa(a,s,n),this.applyStylers(a,s)}}.addStyler(kc),Nk=gR.addStyler((r,t)=>(r.Qu="major",r.setPointerLength(t.xAxisNumericTicks.majorTickStyle.tickLength).setTickLabelPadding(t.xAxisNumericTicks.majorTickStyle.tickPadding).setTickStyle(t.xAxisNumericTicks.majorTickStyle.tickStyle).setTextFont(t.xAxisNumericTicks.majorTickStyle.labelFont).setTextFillStyle(t.xAxisNumericTicks.majorTickStyle.labelFillStyle)));gR.addStyler((r,t)=>(r.Qu="minor",r.setPointerLength(t.xAxisNumericTicks.minorTickStyle.tickLength).setTickLabelPadding(t.xAxisNumericTicks.minorTickStyle.tickPadding).setTickStyle(t.xAxisNumericTicks.minorTickStyle.tickStyle).setTextFont(t.xAxisNumericTicks.minorTickStyle.labelFont).setTextFillStyle(t.xAxisNumericTicks.minorTickStyle.labelFillStyle)));cR.addStyler(r=>r.onSwitch((t,e)=>e===!0?setTimeout(()=>r.setOn(!1),300):void 0));A0.setAlignment("horizontal");const Bk=A0.setAlignment("vertical"),no={PointableTextBox:kk,AxisTickMajor:Nk},Lk={VerticalLegendBox:Bk},es=(r,t)=>{if(Fp(r)){const e=t.Po(r);return{x:e.engineX,y:e.engineY}}return r},Lm=r=>{let t=!1,e={type:"linear"};if(r&&(r.opposite!==void 0&&(t=r.opposite),r.type&&r.type==="linear-highPrecision"&&(e={type:"linear-highPrecision"}),r.type&&r.type==="logarithmic")){let i=10;if(r.base){if(r.base==="E"||r.base==="e"||r.base==="natural")i="e";else if(typeof r.base=="number")i=r.base;else if(typeof r.base=="string")try{i=Number(r.base)}catch{console.warn(`Unidentified logarithmic base "${r.base}"`)}}e={base:i,type:"logarithmic"}}return{opposite:t,type:e}},fc=(r,t,e,i=1)=>Jt(r+.1*i*(t-r)+.5*i*e.getPixelSize()*Math.sign(t-r),r,t),If=(r,t,e,i=1)=>{const s=e.ct(r),n=e.ct(t);return Jt(e.ut(s+.1*i*(n-s)+.5*i*Math.sign(n-s)),r,t)},wt={qd:0,tf:1,if:2,sf:3,ef:4,hf:5,rf:6,nf:7,af:8,lf:9,uf:10,cf:11,df:12,ff:13,Af:14,gf:15,mf:16,yf:17,pf:18,Sf:19,vf:20,bf:21,xf:22,Mf:23};class Ik extends Cc{constructor(t,e,i,s,n,a){super(t,e,i,s,a),this._f=n}}class Pf extends eo{constructor(t,e,i,s,n,a,o,l,u,d,f,y,m,S,x,v){var b,E,T;super(d,u,o,S,x,{numeric:u.getWidth({x:S.xAxisNumericTicks,y:S.yAxisNumericTicks}),datetime:u.getWidth({x:S.xAxisDateTimeTicks,y:S.yAxisDateTimeTicks}),time:u.getWidth({x:S.xAxisTimeTicks,y:S.yAxisTimeTicks})},v),this.wf=new Map,this.Cf=void 0,this.kf=0,this.Tf=[],this.Ff=[],this.Je=$r.fitting,this.If=!0,this.Pf=8,this.Df=void 0,this.Bf=void 0,this.Lf=20,this.Rf=1,this.Ef=!0,this.zf=!0,this.Vf=!0,this.Of=!0,this.Nf=!0,this.Gf=!0,this.Wf=!0,this.Uf=!0,this.Yf=!0,this.Hf=!0,this.$f=this.wh.defaultDragMouseStyle,this.Xf=this.wh.defaultDragMouseStyle,this.jf=this.wh.defaultDragMouseStyle,this.Zf=this.wh.defaultDragMouseStyle,this.Qf=this.wh.defaultDragMouseStyle,this.D=new Li,this.Jf=[],this.Kf=z=>{const L=this.Ff.indexOf(z);L>=0&&this.Ff.splice(L,1)},this.qf=z=>(this.Ff.indexOf(z)<0&&this.Ff.push(z),this.Kf),this.Et=(z,L)=>this.D.emit("axisAreaTouch",this,L),this.tA=wM(this.Jf),this.onAxisInteractionAreaMouseClick=z=>this.D.on("axisAreaMouseClick",z),this.onAxisInteractionAreaMouseDoubleClick=z=>this.D.on("axisAreaDoubleClick",z),this.onAxisInteractionAreaMouseDown=z=>this.D.on("axisAreaMouseDown",z),this.onAxisInteractionAreaMouseUp=z=>this.D.on("axisAreaMouseUp",z),this.onAxisInteractionAreaMouseEnter=z=>this.D.on("axisAreaMouseEnter",z),this.onAxisInteractionAreaMouseLeave=z=>this.D.on("axisAreaMouseLeave",z),this.onAxisInteractionAreaMouseMove=z=>this.D.on("axisAreaMouseMove",z),this.onAxisInteractionAreaMouseWheel=z=>this.D.on("axisAreaMouseWheel",z),this.onAxisInteractionAreaMouseDragStart=z=>this.D.on("axisAreaMouseDragStart",z),this.onAxisInteractionAreaMouseDrag=z=>this.D.on("axisAreaMouseDrag",z),this.onAxisInteractionAreaMouseDragStop=z=>this.D.on("axisAreaMouseDragStop",z),this.onAxisInteractionAreaTouchStart=z=>this.D.on("axisAreaTouchStart",z),this.onAxisInteractionAreaTouch=z=>this.D.on("axisAreaTouch",z),this.onAxisInteractionAreaTouchStop=z=>this.D.on("axisAreaTouchEnd",z),this.offAxisInteractionAreaMouseClick=z=>this.D.off(z,"axisAreaMouseClick"),this.offAxisInteractionAreaMouseDoubleClick=z=>this.D.off(z,"axisAreaDoubleClick"),this.offAxisInteractionAreaMouseDown=z=>this.D.off(z,"axisAreaMouseDown"),this.offAxisInteractionAreaMouseUp=z=>this.D.off(z,"axisAreaMouseUp"),this.offAxisInteractionAreaMouseEnter=z=>this.D.off(z,"axisAreaMouseEnter"),this.offAxisInteractionAreaMouseLeave=z=>this.D.off(z,"axisAreaMouseLeave"),this.offAxisInteractionAreaMouseMove=z=>this.D.off(z,"axisAreaMouseMove"),this.offAxisInteractionAreaMouseWheel=z=>this.D.off(z,"axisAreaMouseWheel"),this.offAxisInteractionAreaMouseDragStart=z=>this.D.off(z,"axisAreaMouseDragStart"),this.offAxisInteractionAreaMouseDrag=z=>this.D.off(z,"axisAreaMouseDrag"),this.offAxisInteractionAreaMouseDragStop=z=>this.D.off(z,"axisAreaMouseDragStop"),this.offAxisInteractionAreaTouchStart=z=>this.D.off(z,"axisAreaTouchStart"),this.offAxisInteractionAreaTouch=z=>this.D.off(z,"axisAreaTouch"),this.offAxisInteractionAreaTouchStop=z=>this.D.off(z,"axisAreaTouchEnd"),this.zd={relative:1},this.iA=0,this.sA=0,this.eA=(z,L)=>L.getAllocatesAxisSpace()?Math.max(z,L.update().qu()):z,this.hA=z=>{const L=this.Tf.indexOf(z);L!==-1&&this.Tf.splice(L,1)},this.rA=(z,L)=>{this.D.emit("axisAreaDoubleClick",this,L),this.Of&&(this.setStopped(!1),xt(L))},this.nA=z=>{this.D.emit("axisAreaMouseEnter",this),(this.zf||this.Ef||this.Vf||this.Of)&&this.oA(z)},this.aA=z=>{this.lA(z),this.D.emit("axisAreaMouseLeave",this)},this.uA=(z,L,A)=>{var R,w;this.D.emit("axisAreaMouseDragStart",this,L,A);const C=De((R=this.chart.cA.Yn)===null||R===void 0?void 0:R.axisXYZoomMouseButton,0),k=De((w=this.chart.cA.Yn)===null||w===void 0?void 0:w.axisXYPanMouseButton,2),_=Y(L.clientX,L.clientY);A===k&&this.zf?(this.dA(z),xt(L)):A===C&&this.Ef&&(this.fA(z,_),xt(L))},this.AA=(z,L,A,R,w)=>{var C,k;this.D.emit("axisAreaMouseDrag",this,L,A,R,w);const _=De((C=this.chart.cA.Yn)===null||C===void 0?void 0:C.axisXYZoomMouseButton,0),X=De((k=this.chart.cA.Yn)===null||k===void 0?void 0:k.axisXYPanMouseButton,2),N=Y(L.clientX,L.clientY);A===X&&this.zf?(this.gA(z,w),xt(L)):A===_&&this.Ef&&(this.mA(z,R,N,w),xt(L))},this.yA=(z,L,A,R)=>{var w,C;this.D.emit("axisAreaMouseDragStop",this,L,A,R);const k=De((w=this.chart.cA.Yn)===null||w===void 0?void 0:w.axisXYZoomMouseButton,0),_=De((C=this.chart.cA.Yn)===null||C===void 0?void 0:C.axisXYPanMouseButton,2),X=Y(L.clientX,L.clientY);A===_&&this.zf?(this.pA(z),xt(L)):A===k&&this.Ef&&(this.SA(z,R,X),xt(L)),z.getIsUnderMouse()&&(this.zf||this.Ef||this.Vf||this.Of)&&this.oA(z)},this.vA=(z,L)=>{if(this.D.emit("axisAreaMouseWheel",this,L),this.Vf){this.setStopped(!0);const A=this.wh.getWidth(this.bA.us.Pe(L.clientX,L.clientY)),R=this.dt.ut(A);this.zoom(R,ch(L)),xt(L)}},this.xA=(z,L)=>this.D.emit("axisAreaMouseClick",this,L),this.MA=(z,L)=>this.D.emit("axisAreaMouseDown",this,L),this._A=(z,L)=>this.D.emit("axisAreaMouseUp",this,L),this.wA=(z,L)=>this.D.emit("axisAreaMouseMove",this,L),this.CA=(z,L,A)=>{this.D.emit("axisAreaTouchStart",this,A),this.Ef&&(this.oA(z),this.fA(z,L),xt(A))},this.kA=(z,L,A,R,w)=>{this.D.emit("axisAreaTouch",this,w),this.Ef&&(this.mA(z,L,A,R),xt(w))},this.TA=(z,L,A,R)=>{this.D.emit("axisAreaTouchEnd",this,R),this.Ef&&(this.SA(z,L,A),this.lA(z),xt(R))},this.FA=(z,L,A,R)=>{(this.zf||this.Vf)&&(this.oA(z),this.dA(z),xt(R))},this.IA=(z,L,A,R,w,C)=>{if(this.zf){const k=Y((R.x+w.x)/2,(R.y+w.y)/2);this.gA(z,k),xt(C)}if(this.Vf){const k=this.bA.us.Pe(L.x,L.y),_=this.bA.us.Pe(A.x,A.y),X=Math.abs(this.wh.getWidth(pe(k,R))-this.wh.getWidth(pe(_,w)))-Math.abs(this.wh.getWidth(k)-this.wh.getWidth(_)),N=this.dt.mi(this.Ih,-X),U=this.dt.mi(this.Ph,X);this.Qh(N,U,!0),xt(C)}},this.PA=(z,L,A,R)=>{(this.zf||this.Vf)&&(this.pA(z),this.lA(z),xt(R))},this.DA=(z,L)=>{(this.Nf||this.Gf)&&this.BA(z)},this.LA=(z,L)=>{this.RA(z)},this.EA=(z,L,A)=>{const R=Y(L.clientX,L.clientY);this.Nf&&this.zA(z,R)},this.VA=(z,L,A,R,w)=>{const C=Y(L.clientX,L.clientY);this.Nf&&this.OA(z,C,R,w)},this.NA=(z,L,A,R,w)=>{const C=Y(L.clientX,L.clientY);this.Nf&&this.GA(z,C,R,w)},this.WA=(z,L,A,R)=>{const w=Y(L.clientX,L.clientY);(this.Nf||this.Gf)&&this.UA(z,w,R),(this.Nf||this.Gf)&&this.BA(z)},this.YA=(z,L)=>{this.Gf&&(this.setStopped(!0),this.zoom(this.Ih,ch(L)),xt(L))},this.HA=(z,L)=>{this.Gf&&(this.setStopped(!0),this.zoom(this.Ph,ch(L)),xt(L))},this.$A=(z,L,A)=>{this.Nf&&(this.BA(z),this.zA(z,L),xt(A))},this.XA=(z,L,A,R,w)=>{this.Nf&&(this.OA(z,L,A,R),xt(w))},this.jA=(z,L,A,R,w)=>{this.Nf&&(this.GA(z,L,A,R),xt(w))},this.ZA=(z,L,A,R)=>{this.Nf&&(this.UA(z,L,A),this.RA(z),xt(R))},this.QA=t,this.bA=e,this.JA=s,this.KA=n,this.chart=d,this.qA=y,this.tg=i,this.ss=a,v.type==="logarithmic"&&this.chart.us.Nn(wt.Sf),m(this,this.qf),o.ig=this,this.sg=f,this.eg=this.sg>50?1:-1,this.hg=(T=this.wh.toPoint(0,-this.eg),Math.abs(T.x)>=Math.abs(T.y)?T.x>=0?qt.Right:qt.Left:T.y>=0?qt.Up:qt.Down),this.rg=l,this.ng=this.dt instanceof Ks?new Se().Ri(this.wh.toVec2(this.dt,this.rg)):new wi().Ri(this.wh.toVec2(this.dt,this.rg)),this.og=this.chart.pixelScale,this.ag=new Se().Ri(this.wh.toVec2(this.wh.getWidth(this.og),this.rg)),this.lg=this.bA.Ee(this.ng).setMouseInteractions(!1),this.ug=this.bA.Ee(this.ng).setMouseInteractions(!1),this.cg=this.bA.Ee(this.ng).setMouseInteractions(!1),this.dg=this.tg.ke(this.og).Ce(u.getWidth({x:S.xAxisOverlayStyle,y:S.yAxisOverlayStyle})).we(At).Xo(S.highlightColorOffsetAxisOverlay||S.highlightColorOffset),this.Ag=this.tg.ke(this.og).Ce(u.getWidth({x:S.xAxisZoomingBandFillStyle,y:S.yAxisZoomingBandFillStyle})).we(u.getWidth({x:S.xAxisZoomingBandStrokeStyle,y:S.yAxisZoomingBandStrokeStyle})),this.gg=this.tg.ke(this.og).Ce(u.getWidth({x:S.xAxisOverlayStyle,y:S.yAxisOverlayStyle})).we(At).Xo(S.highlightColorOffsetAxisOverlay||S.highlightColorOffset),this.mg=this.tg.ke(this.og).Ce(u.getWidth({x:S.xAxisOverlayStyle,y:S.yAxisOverlayStyle})).we(At).Xo(S.highlightColorOffsetAxisOverlay||S.highlightColorOffset),this.Lh=this.tg.Pr(this.ng).setMouseInteractions(!1).Nh(this.wh.getTitleTextRotation(this.eg)).Ir(Qn).Fr(Qn),this.chart.us.ls.os(this.dg,z=>this.dg.cs(z),{animationEnabled:this.th}),this.chart.us.ls.os(this.gg,z=>this.gg.cs(z),{animationEnabled:this.th}),this.chart.us.ls.os(this.mg,z=>this.mg.cs(z),{animationEnabled:this.th});const V=Ls(new Er(this.CA,this.kA,this.TA,1),new Vp(this.FA,this.IA,this.PA),new OM(this.rA)),F=Ls(new Er(this.$A,this.XA,this.ZA)),B=Ls(new Er(this.$A,this.jA,this.ZA));this.dg.setMouseEnterEventHandler(this.nA).setMouseLeaveEventHandler(this.aA).setMouseDragStartEventHandler(this.uA).setMouseDragEventHandler(this.AA).setMouseDragStopEventHandler(this.yA).setMouseWheelEventHandler(this.vA).setMouseDoubleClickEventHandler(this.rA).setMouseClickEventHandler(this.xA).setMouseDownEventHandler(this.MA).setMouseUpEventHandler(this._A).setMouseMoveEventHandler(this.wA).setTouchStartEventHandler(V.onTouchStart).setTouchMoveEventHandler(V.onTouchMove).setTouchEndEventHandler(V.onTouchEnd),this.gg.setMouseEnterEventHandler(this.DA).setMouseLeaveEventHandler(this.LA).setMouseDragStartEventHandler(this.EA).setMouseDragEventHandler(this.VA).setMouseDragStopEventHandler(this.WA).setMouseWheelEventHandler(this.YA).setTouchStartEventHandler(F.onTouchStart).setTouchMoveEventHandler(F.onTouchMove).setTouchEndEventHandler(F.onTouchEnd),this.mg.setMouseEnterEventHandler(this.DA).setMouseLeaveEventHandler(this.LA).setMouseDragStartEventHandler(this.EA).setMouseDragEventHandler(this.NA).setMouseDragStopEventHandler(this.WA).setMouseWheelEventHandler(this.HA).setTouchStartEventHandler(B.onTouchStart).setTouchMoveEventHandler(B.onTouchMove).setTouchEndEventHandler(B.onTouchEnd),this.lg.Re(u.getWidth({x:S.xAxisStrokeStyle,y:S.yAxisStrokeStyle})),this.ug.Re(u.getWidth({x:S.xAxisNibStyle,y:S.yAxisNibStyle})),this.cg.Re(u.getWidth({x:S.xAxisNibStyle,y:S.yAxisNibStyle})),this.Lh.Ce(u.getWidth({x:S.xAxisTitleFillStyle,y:S.yAxisTitleFillStyle})).Oh(u.getWidth({x:S.xAxisTitleFont,y:S.yAxisTitleFont})),this.es=a.hs(this,{}),this.Wh=this.es.yg([this.Lh]).ps(S.effectsText),this.pg=(b=u.getWidth({x:S.xAxisMarginAfterTicks,y:S.yAxisMarginAfterTicks}))!==null&&b!==void 0?b:7,this.Sg=(E=u.getWidth({x:S.xAxisMarginAfterTitle,y:S.yAxisMarginAfterTitle}))!==null&&E!==void 0?E:7}kr(){return this.eh}Tr(){return this.Zh!==void 0}setTickStrategy(t,e){return super.Fh(t,e)}getTickStrategy(){return this.je}addBand(t=!0){const e=t?this.KA:this.JA,i=new VC(e,this.chart,this.tA,this,this.ng,this.wh,this.qi,this.ss);return this.Jf.push(i),i}addConstantLine(t=!0){const e=t?this.KA:this.JA,i=new zC(e,this.chart,this.tA,this,this.ng,this.wh,this.qi,this.ss);return this.Jf.push(i),i}vg(t){this.Jf.forEach(t)}bg(t){return this.Jf.map(t)}getHighlighters(){return this.Jf}setThickness(t){return typeof t=="number"?(this.xg=t,this.Mg=t):typeof t=="object"&&(this.xg=t.min,this.Mg=t.max),this.chart.us.Ss(),this}getThickness(){return{min:this.xg,max:this.Mg}}setMouseInteractions(t){return this.setAxisInteractionPanByDragging(t).setAxisInteractionReleaseByDoubleClicking(t).setAxisInteractionZoomByDragging(t).setAxisInteractionZoomByWheeling(t).setNibInteractionScaleByDragging(t).setNibInteractionScaleByWheeling(t)}_g(){return this.Ff}ur(t,e){return new Ik(e,t,this.bA,this.ng,this.ng)}Uh(){if(this.wf){for(const t of this.wf)t[1].grid.dispose(),t[1].tick.dispose();this.wf.clear()}super.Uh()}cr(t,e){const{tickStart:i}=e,s=t.Sh.lr,n=i+s.getTickLength()*this.eg+s.getTickPadding()*this.eg;t.Ue.Fe(this.wh.toPoint(t.u,n)).Ea(this.wh.toPoint(s.getLabelAlignment(),-this.eg)).Nh(s.labelRotation).setVisible(this.getVisible())}wg(t,e){const{startPosition:i,gridStrokeLen:s,gridStrokeStart:n,tickStart:a}=e,o=t.Sh.lr,l=i-s*o.getGridStrokeLength(),u=a+o.getTickLength()*this.eg;return{gridStroke:{start:this.wh.toPoint(t.u,n),end:this.wh.toPoint(t.u,l)},tickStroke:{start:this.wh.toPoint(t.u,a),end:this.wh.toPoint(t.u,u)}}}_r(t,e){return this.kh.type==="linear"?fc(t,e,this.dt):If(t,e,this.dt)}Cg(t,e){return e instanceof Ks?fc:If}Cr(t,e,i){if(this.kh.type!=="logarithmic"){const n=this.dt.Li(e-t);return{min:t-i*n,max:e+i*n}}const s=this.dt;return{min:s.mi(t,-i),max:s.mi(e,i)}}Ps(){if(!this.Xi)return{kg:0,Tg:0,Vd:0};const t=!(this.Ze.size>0),e=this.Lh&&this.Lh.Bh().length>0&&this.getTitleFillStyle()!==Ft,i=this.wh.getHeight(e?this.chart.us.Ig.Fg(this.getTitle(),this.getTitleFont(),this.getTitleRotation()):{x:0,y:0})+(e?this.Sg:0),s=this.Xe===Zh?new Map:qM(this.Xe,Math.min(this.Ih,this.Ph),Math.max(this.Ih,this.Ph),this.Ih,this.Ph,0),n=this.dt;let a=0;s.forEach((u,d)=>{if((f=>f.lr!==void 0&&f.nr!==void 0)(d)){const f=Math.max(...u.map(y=>{if(!Xn(y,this.Ih,this.Ph))return 0;const m=this.chart.us.Ig.Fg(d.nr(y,n),d.lr.labelFont,d.lr.labelRotation);return t||!m.isEstimate?this.wh.getHeight(m):0}))+d.lr.tickLength+d.lr.tickPadding+d.lr.labelPadding;a=Math.max(a,f)}});const o=this.Tf.reduce(this.eA,0);a=Math.max(a,o),a+=this.pg;const l=Jt(i+a,this.xg!==void 0?this.xg:0,this.Mg!==void 0?this.Mg:bt);return this.kf=l,{kg:a,Tg:i,Vd:l}}Te(t){const e=this.getVisible()&&t.Pg>0;this.Dg=t;const i=this.lg.uu(),s=this.dt.getInnerStart()<this.dt.getInnerEnd()?this.dt.getInnerStart():this.dt.getInnerEnd(),n=this.dt.getInnerEnd()>this.dt.getInnerStart()?this.dt.getInnerEnd():this.dt.getInnerStart(),a=i.getThickness()*this.eg/2,o=this.rg.getInnerInterval(),l=this.sg/100*o,u=l+t.Bg,d=o*this.eg,f=u+a;if(e||this.Uh(),this.Xe!==Zh&&e){const F=this.dt.ri();this.qh({physicalAxisSize:F,startPosition:l,gridStrokeLen:d,gridStrokeStart:u,tickStart:f});for(const[B,z]of this.Ze){let L=this.wf.get(B);if(!L){if(B.Oe)L={grid:this.QA[0].Lg(this.ng).setMouseInteractions(!1),tick:this.QA[0].Lg(this.ng).setMouseInteractions(!1)};else if("Rg"in B){const A=Array.from(this.Ze.keys()).filter(w=>"Rg"in w).reverse().indexOf(B),R=this.QA[A];if(!R)throw new Error("Not enough tick layers. This is an internal LCJS error - if you see this, please contact Arction support.");L={grid:R.Lg(this.ng).setMouseInteractions(!1),tick:R.Lg(this.ng).setMouseInteractions(!1)}}}if(L){L.grid.Nt(),L.tick.Nt();for(const[A,R]of z){const w=this.wg(R,{physicalAxisSize:F,startPosition:l,gridStrokeLen:d,gridStrokeStart:u,tickStart:f});L.grid.zr().Eg(w.gridStroke.start,w.gridStroke.end),L.tick.zr().Eg(w.tickStroke.start,w.tickStroke.end)}L.grid.Re(B.lr.getGridStrokeStyle()),L.tick.Re(B.lr.getTickStyle()),this.wf.set(B,L)}}}const y=f,m=y+this.eg*t.zg,S=this.Nf||this.Gf?Math.min(this.Lf,.25*t.Pg):0,x={start:this.wh.toVec2(this.dt.mi(this.dt.getInnerStart(),S),y),end:this.wh.toVec2(this.dt.mi(this.dt.getInnerEnd(),-S),m)},v=gt(this.wh.toVec2(this.dt.getInnerStart(),m),this.ng,this.og),b=gt(x.start,this.ng,this.og),E=gt(x.end,this.ng,this.og),T=gt(this.wh.toVec2(this.dt.getInnerEnd(),y),this.ng,this.og);this.lg.Ve(this.wh.toPoint(s,u)).ze(this.wh.toPoint(n,u)).setVisible(e),this.ug.Ve(this.wh.toPoint(this.dt.mi(this.dt.getInnerStart(),this.Pf),u)).ze(this.wh.toPoint(this.dt.getInnerStart(),u)).setVisible(e),this.cg.Ve(this.wh.toPoint(this.dt.mi(this.dt.getInnerEnd(),-this.Pf),u)).ze(this.wh.toPoint(this.dt.getInnerEnd(),u)).setVisible(e);const V=u+t.kg*this.eg;if(this.Lh.Fe(this.wh.toPoint(this.wh.getWidth(gt(Yt(zt(v,T),.5),this.og,this.ng)),V)).Ea(this.wh.toPoint(0,-1*this.eg)).setVisible(e),this.Cf){const F=this.sg/100*o+t.Bg,B=-this.eg*o-t.Bg,z={start:this.wh.toVec2(this.Cf.min,f+this.eg*this.kf),end:this.wh.toVec2(this.Cf.max,F+B)},L=gt(z.start,this.ng,this.og),A=gt(z.end,this.ng,this.og);this.Ag.Fe(L).q(pe(A,L)).setVisible(!0)}else this.Ag.setVisible(!1);this.dg.Fe(b).q(pe(E,b)).setVisible(e),this.gg.Fe(v).q(pe(b,v)).setVisible(e),this.mg.Fe(E).q(pe(T,E)).setVisible(e);for(const F of this.Tf)F.update().plot(e,u,d,t.Bg,f);for(const F of this.Jf)F.Te()}setLength(t){return this.zd=t,this.chart.us.Ss(),this}getLength(){return this.zd}setMargins(t,e){return this.iA=t,this.sA=e,this.chart.us.Ss(),this}getMargins(){return{start:this.iA,end:this.sA}}getStackIndex(){var t,e;return(e=(t=[...this.chart.Vg,...this.chart.Og,...this.chart.Ng,...this.chart.Gg].find(i=>i.axis===this))===null||t===void 0?void 0:t.iStack)!==null&&e!==void 0?e:0}getParallelIndex(){var t,e;return(e=(t=[...this.chart.Vg,...this.chart.Og,...this.chart.Ng,...this.chart.Gg].find(i=>i.axis===this))===null||t===void 0?void 0:t.iParallel)!==null&&e!==void 0?e:0}Wg(){const t=this.Dg;if(!t)return;const e=this.getVisible()&&t.Pg>0,i=this.lg.uu().getThickness()*this.eg/2,s=this.rg.getInnerInterval(),n=this.sg/100*s+t.Bg,a=s*this.eg,o=n+i;for(const l of this.Tf)l.update().plot(e,n,a,t.Bg,o);for(const l of this.Jf)l.Te()}Ug(){return this.kf}Yg(t,e){e=e||no.AxisTickMajor;const i=new gk(this,t?this.QA[0]:this.tg,this.tg,this.dt,this.ag,this.ag,this.wh,this.hg,this.hA,this.qi,e).setTextFormatter(this.formatValue);return this.Tf.push(i),i}oA(t){this.chart.us.ls.Ms(t,1),this.Df=t.us.Wr(this.$f,this.Df)}lA(t){this.chart.us.ls.Ms(t,0),t.us.Ur(this.Df)}dA(t){this.setStopped(!0),t.us.Ur(this.Df)}gA(t,e){const i=-this.wh.getWidth(e);this.pan(i),this.Df=t.us.Wr(this.Xf,this.Df)}pan(t){const e=this.Ih,i=this.Ph,s=this.dt.mi(e,t),n=this.dt.mi(i,t);this.Qh(s,n,!1)}zoom(t,e){const i=this.dt.ct(this.Ih),s=this.dt.ct(this.Ph),n=this.dt.ct(t),a=Jt((n-i)/(s-i),0,1),o=.2*this.dt.ri(),l=a*this.Rf*o*-e,u=(1-a)*this.Rf*o*e,d=this.dt.mi(this.Ih,l),f=this.dt.mi(this.Ph,u);this.Qh(d,f,!0)}pA(t){this.Cf=void 0,t.us.Ur(this.Df)}fA(t,e){this.setStopped(!0),t.us.Ur(this.Df),this.chart.us.ls.Ms(this.dg,0)}mA(t,e,i,s){const n=gt(this.bA.us.Pe(i.x,i.y),this.bA.us.dt,this.ng),a=Jt(this.wh.getWidth(n),this.Ih,this.Ph),o=this.wh.getWidth(gt(this.bA.us.Pe(e.x,e.y),this.bA.us.dt,this.ng));Math.abs(this.dt.ct(a)-this.dt.ct(o))>10?(this.Cf=Qt(Math.min(a,o),Math.max(a,o)),this.Df=t.us.Wr(this.jf,this.Df)):(this.Cf=void 0,this.Df=t.us.Wr(this.$f,this.Df)),this.bA.Ss()}SA(t,e,i){if(this.Cf){const s=this.Cf.min,n=this.Cf.max,a=this.Ph<this.Ih;this.St(a?n:s,a?s:n,!0,!0,"interactionSetInterval")}this.Cf=void 0,t.us.Ur(this.Df)}BA(t){this.chart.us.ls.Ms(t,1),this.Bf=t.us.Wr(this.Zf,this.Bf)}RA(t){this.chart.us.ls.Ms(t,0),t.us.Ur(this.Bf)}zA(t,e){this.setStopped(!0),this.Bf=t.us.Wr(this.Qf,this.Bf)}OA(t,e,i,s){const n=this.wh.getWidth(s);this.Qh(this.dt.mi(this.Ih,n),this.Ph,!0)}GA(t,e,i,s){const n=this.wh.getWidth(s);this.Qh(this.Ih,this.dt.mi(this.Ph,n),!0)}UA(t,e,i){t.us.Ur(this.Bf),t.getIsUnderMouse()&&(this.Bf=t.us.Wr(this.Zf)),this.bA.Ss()}addCustomTick(t){return this.Yg(!0,t)}getUiPosition(){return this.sg}setStrokeStyle(t){return this.lg.Re(t),this.bA.Ss(),this}getStrokeStyle(){return this.lg.uu()}getOverlayStyle(){return this.dg.Eh()}setOverlayStyle(t){return this.dg.Ce(t),this.bA.Ss(),this}setAxisInteractionZoomByDragging(t){return this.Ef=t,this}getAxisInteractionZoomByDragging(){return this.Ef}setAxisInteractionPanByDragging(t){return this.zf=t,this}getAxisInteractionPanByDragging(){return this.zf}setAxisInteractionZoomByWheeling(t){return this.Vf=t,this}getAxisInteractionZoomByWheeling(){return this.Vf}setAxisInteractionReleaseByDoubleClicking(t){return this.Of=t,this}getAxisInteractionReleaseByDoubleClicking(){return this.Of}setAxisMouseHoverStyle(t=this.wh.defaultDragMouseStyle){return this.$f=t,this}getAxisMouseHoverStyle(){return this.$f}setAxisMousePanStyle(t=this.wh.defaultDragMouseStyle){return this.Xf=t,this}getAxisMousePanStyle(){return this.Xf}setAxisMouseZoomStyle(t=this.wh.defaultDragMouseStyle){return this.jf=t,this}getAxisMouseZoomStyle(){return this.jf}setAnimationHighlight(t){return this.chart.us.ls._s(this.dg,t),this.chart.us.ls._s(this.gg,t),this.chart.us.ls._s(this.mg,t),this}getAnimationHighlight(){return this.chart.us.ls.ws(this.dg)}getTitleMargin(){return this.getMarginAfterTicks()}setTitleMargin(t){return this.setMarginAfterTicks(t)}getMarginAfterTicks(){return this.pg}setMarginAfterTicks(t){return this.pg=t,this.bA.Ss(),this}getMarginAfterTitle(){return this.Sg}setMarginAfterTitle(t){return this.Sg=t,this.bA.Ss(),this}getNibLength(){return this.Pf}setNibLength(t){return this.Pf=t,this.bA.Ss(),this}getNibStyle(){return this.ug.uu()}setNibStyle(t){return this.ug.Re(t),this.cg.Re(t),this.bA.Ss(),this}getNibOverlayStyle(){return this.gg.Eh()}setNibOverlayStyle(t){return this.gg.Ce(t),this.mg.Ce(t),this.bA.Ss(),this}setNibMousePickingAreaSize(t){return this.Lf=t,this.bA.Ss(),this}getNibMousePickingAreaSize(){return this.Lf}setNibInteractionScaleByDragging(t){return this.Nf=t,this}getNibInteractionScaleByDragging(){return this.Nf}setNibInteractionScaleByWheeling(t){return this.Gf=t,this}getNibInteractionScaleByWheeling(){return this.Gf}setNibMouseHoverStyle(t=this.wh.defaultDragMouseStyle){return this.Zf=t,this}getNibMouseHoverStyle(){return this.Zf}setNibMouseScaleStyle(t=this.wh.defaultDragMouseStyle){return this.Qf=t,this}getNibMouseScaleStyle(){return this.Qf}setChartInteractions(t){return this.setChartInteractionFitByDrag(t),this.setChartInteractionPanByDrag(t),this.setChartInteractionZoomByDrag(t),this.setChartInteractionZoomByWheel(t),this}setChartInteractionPanByDrag(t){return this.Wf=t,this}getChartInteractionPanByDrag(){return this.Wf}setChartInteractionZoomByWheel(t){return this.Uf=t,this}getChartInteractionZoomByWheel(){return this.Uf}setChartInteractionZoomByDrag(t){return this.Yf=t,this}getChartInteractionZoomByDrag(){return this.Yf}setChartInteractionFitByDrag(t){return this.Hf=t,this}getChartInteractionFitByDrag(){return this.Hf}j(){return this.dt.j(),this}Z(){return this.dt.Z(),this}dispose(){this.ug.dispose(),this.cg.dispose(),this.lg.dispose(),this.dg.dispose(),this.Ag.dispose(),this.gg.dispose(),this.mg.dispose(),this.Lh.dispose(),this.Kh(Qh);for(const t of this.wf.values())t.grid.dispose(),t.tick.dispose();return this.Ff.slice().forEach(Qh),this.Jf.slice().forEach(Qh),this.qA(this),this.D.emit("dispose",this),this}onDispose(t){return this.D.on("dispose",t)}offDispose(t){return this.D.off(t,"dispose")}setVisible(t){this.ug.setVisible(t),this.cg.setVisible(t),this.lg.setVisible(t),this.Lh.setVisible(t),this.dg.setVisible(t),this.gg.setVisible(t),this.mg.setVisible(t),this.Kh(e=>{e.ys(t)});for(const e of this.wf.values())e.grid.setVisible(t),e.tick.setVisible(t);return super.setVisible(t),this.chart.us.Ss(),this}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationHighlight(this.th),this}}const Uf={getWidth:r=>r.x,getHeight:r=>r.y,toVec2:(r,t)=>({x:r,y:t}),toPoint:(r,t)=>Y(r,t)},Gp={getWidth:r=>r.y,getHeight:r=>r.x,toVec2:(r,t)=>({x:t,y:r}),toPoint:(r,t)=>Y(t,r)},ol=r=>!!(r&&typeof r=="object"&&"x"in r&&r.x instanceof Pf&&"y"in r&&r.y instanceof Pf),Pk=xe({type:"tick-style",gridStrokeLength:1,gridStrokeStyle:new ie,tickLength:7,tickStyle:new ie,tickPadding:0,labelFont:new c0,labelFillStyle:new it,labelPadding:0,labelAlignment:0,labelRotation:0});class yn extends Pk{constructor(t){super(t)}setGridStrokeLength(t){return this.set("gridStrokeLength",t)}getGridStrokeLength(){return this.get("gridStrokeLength")}setGridStrokeStyle(t){return this.set("gridStrokeStyle",typeof t=="function"?t(this.get("gridStrokeStyle")):t)}getGridStrokeStyle(){return this.get("gridStrokeStyle")}setTickLength(t){return this.set("tickLength",t)}getTickLength(){return this.get("tickLength")}setTickStyle(t){return this.set("tickStyle",typeof t=="function"?t(this.get("tickStyle")):t)}getTickStyle(){return this.get("tickStyle")}setTickPadding(t){return this.set("tickPadding",t)}getTickPadding(){return this.get("tickPadding")}setLabelFillStyle(t){return this.set("labelFillStyle",typeof t=="function"?t(this.get("labelFillStyle")):t)}getLabelFillStyle(){return this.get("labelFillStyle")}setLabelFont(t){return this.set("labelFont",typeof t=="function"?t(this.get("labelFont")):t)}getLabelFont(){return this.get("labelFont")}setLabelPadding(t){return this.set("labelPadding",t)}getLabelPadding(){return this.get("labelPadding")}setLabelAlignment(t){return this.set("labelAlignment",t)}getLabelAlignment(){return this.get("labelAlignment")}setLabelRotation(t){return this.set("labelRotation",t)}getLabelRotation(){return this.get("labelRotation")}}const yR=r=>!(!r||typeof r!="object"||!("type"in r)||r.type!=="tick-style"),mR=new yn({labelFillStyle:Ft,gridStrokeStyle:At,tickStyle:At}),Of=r=>yR(r)&&yM(r.labelFillStyle)&&Ev(r.gridStrokeStyle)&&Ev(r.tickStyle),v0=(r,t,e,i,s)=>(n,a)=>o=>{const l=new Date(o+n),u={year:a?l.getUTCFullYear():l.getFullYear(),monthIndex:a?l.getUTCMonth():l.getMonth(),day:a?l.getUTCDate():l.getDate(),hours:a?l.getUTCHours():l.getHours(),minutes:a?l.getUTCMinutes():l.getMinutes(),seconds:a?l.getUTCSeconds():l.getSeconds(),millis:a?l.getUTCMilliseconds():l.getMilliseconds()},d=i?i(u):void 0;if(r===0&&d===!0)return o;const f=u[t];s.includes("year")&&(u.year=Math.floor(u.year/e)*e),s.includes("monthIndex")&&(u.monthIndex=0),s.includes("day")&&(u.day=1),s.includes("hours")&&(u.hours=0),s.includes("minutes")&&(u.minutes=0),s.includes("seconds")&&(u.seconds=0),s.includes("millis")&&(u.millis=0);let y=(r===0?1:r)*e;return r===-1&&d===!1&&(y=0),y!==0&&(u[t]=e*(y>0?Math.floor((f+y)/e):Math.ceil((f+y)/e))),a?Date.UTC(u.year,u.monthIndex,u.day,u.hours,u.minutes,u.seconds,u.millis)-n:new Date(u.year,u.monthIndex,u.day,u.hours,u.minutes,u.seconds,u.millis).getTime()-n},of=(r,t,e,...i)=>v0(-1,r,t,e,i),Ou=(r,t,e,...i)=>v0(-1,r,t,e,i),Gu=(r,t,e,...i)=>v0(0,r,t,e,i),Yu=(r,t,...e)=>v0(1,r,t,void 0,e),nm=r=>(t,e)=>i=>{const s=new Date(i+t),n=e?s.getUTCDay():s.getDay(),a=n===1&&(e?s.getUTCHours():s.getHours())===0&&(e?s.getUTCMinutes():s.getMinutes())===0&&s.getSeconds()===0&&s.getMilliseconds()===0;if(r===0&&a===!0)return i;let o=e?s.getUTCDate():s.getDate();return r===-1&&n===1&&a===!1||(r===-1?o-=n>=2?n-1:n+6:o+=n>0?8-n:1),e?Date.UTC(s.getUTCFullYear(),s.getUTCMonth(),o,0,0,0,0)-t:new Date(s.getFullYear(),s.getMonth(),o,0,0,0,0).getTime()-t},mr=[{label:"MilliSecond100",unit:100,irregular:!1,greatTicks:void 0,majorTicks:{fitFunction:le({ignore:"first"},2,5)},minorTicks:{amount:4,fitFunction:le(void 0,2)}},{label:"Second",unit:1e3,irregular:!1,greatTicks:{getReferenceKeyValue:of("seconds",1,r=>r.millis===0,"millis")},majorTicks:{fitFunction:sm(5,10,15,30)},minorTicks:{amount:4,fitFunction:le(void 0,2)}},{label:"Minute",unit:6e4,irregular:!1,greatTicks:{getReferenceKeyValue:of("minutes",1,r=>r.seconds===0&&r.millis===0,"seconds","millis")},majorTicks:{fitFunction:sm(5,10,15,30)},minorTicks:{amount:12,fitFunction:le(void 0,3,6)}},{label:"Hour",unit:36e5,irregular:!1,greatTicks:{getReferenceKeyValue:of("hours",1,r=>r.minutes===0&&r.seconds===0&&r.millis===0,"minutes","seconds","millis")},majorTicks:{fitFunction:sm(3,6,12)},minorTicks:{amount:8,fitFunction:le(void 0,2,4)}},{label:"Day",unit:864e5,irregular:!1,greatTicks:{getReferenceKeyValue:of("day",1,r=>r.hours===0&&r.minutes===0&&r.seconds===0&&r.millis===0,"hours","minutes","seconds","millis")},majorTicks:{fitFunction:le({ignore:"last"},2,4)},minorTicks:{amount:7,fitFunction:le({ignore:"last"},2,3)}},{label:"Week",unit:6048e5,irregular:!0,getPrevKeyValue:nm(-1),getNextKeyValueIncludingRef:nm(0),getNextKeyValue:nm(1),greatTicks:!0,majorTicks:{fitFunction:le(void 0,2)},minorTicks:{fitFunction:void 0}},{label:"Month",unit:2592e6,irregular:!0,getPrevKeyValue:Ou("monthIndex",1,r=>r.day===1&&r.hours===0&&r.minutes===0&&r.seconds===0&&r.millis===0,"day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:Gu("monthIndex",1,r=>r.day===1&&r.hours===0&&r.minutes===0&&r.seconds===0&&r.millis===0,"day","hours","minutes","seconds","millis"),getNextKeyValue:Yu("monthIndex",1,"day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:le(void 0,2,3)},minorTicks:{fitFunction:le(void 0,2,4,6)}},{label:"Year",unit:31536e6,irregular:!0,getPrevKeyValue:Ou("year",1,r=>r.day===1&&r.hours===0&&r.minutes===0&&r.seconds===0&&r.millis===0,"monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:Gu("year",1,r=>r.day===1&&r.hours===0&&r.minutes===0&&r.seconds===0&&r.millis===0,"monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:Yu("year",1,"monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:le({ignore:"first"},2,5)},minorTicks:{fitFunction:le(void 0,2,5)}},{label:"Decade",unit:31536e7,irregular:!0,getPrevKeyValue:Ou("year",10,r=>r.year%10==0&&r.day===1&&r.hours===0&&r.minutes===0&&r.seconds===0&&r.millis===0,"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:Gu("year",10,r=>r.year%10==0&&r.day===1&&r.hours===0&&r.minutes===0&&r.seconds===0&&r.millis===0,"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:Yu("year",10,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:le(void 0,2,4)},minorTicks:{fitFunction:le(void 0,2,5)}},{label:"Century",unit:316224e7,irregular:!0,getPrevKeyValue:Ou("year",100,r=>r.year%100==0&&r.day===1&&r.hours===0&&r.minutes===0&&r.seconds===0&&r.millis===0,"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:Gu("year",100,r=>r.year%100==0&&r.day===1&&r.hours===0&&r.minutes===0&&r.seconds===0&&r.millis===0,"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:Yu("year",100,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:void 0},minorTicks:void 0},{label:"Millennium",unit:316224e8,irregular:!0,getPrevKeyValue:Ou("year",1e3,r=>r.year%1e3==0&&r.day===1&&r.hours===0&&r.minutes===0&&r.seconds===0&&r.millis===0,"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:Gu("year",1e3,r=>r.year%1e3==0&&r.day===1&&r.hours===0&&r.minutes===0&&r.seconds===0&&r.millis===0,"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:Yu("year",1e3,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:void 0},minorTicks:void 0}],gc=(r,t,e)=>{let i=((a,o,l,u,d)=>{const f=o-a;let y;for(let m=0;m<mr.length;m+=1)if(f/mr[m].unit<=1){y=mr[m];break}return y})(t,e);if(i!==void 0&&mr.indexOf(i)===0&&(i=mr[1]),i===void 0)return;if(r==="great")return i;const s=r==="major"?1:2,n=mr[mr.indexOf(i)-s];return n===void 0?mr[0]:n},Qv=(r,t,e)=>(i,s,n,a)=>{const o=gc("great",i,s);if(o===void 0)return[];if(o.label==="Decade"||o.label==="Century"||o.label==="Millennium")return[];const l=a>n?i:s,u=(i+s)/2,d=a>n?s:i;if(mr.indexOf(o)<=mr.findIndex(m=>m.label==="Hour"))return e==="left"?[l]:[];let f;if(o.irregular===!0)f=WM(i,s,o.getPrevKeyValue(r,t),o.getNextKeyValue(r,t));else{const m=o.greatTicks.getReferenceKeyValue(r,t)(i);f=Ys(i,s,o.unit,m,1)}const y=((m,S,x)=>{for(const v of x)if(v>=m&&v<=S)return v})(i,s,f);return e==="left"?y===void 0||Xn(y,u,d)?[l]:[y]:y!==void 0&&Xn(y,u,d)?[y]:[d]},am=(r,t,e)=>(i,s,n,a)=>{const o=gc(r,n,a);let l;if(o===void 0)return[];if(r==="great"&&o.greatTicks!==void 0)if(o.irregular===!0)l=WM(i,s,o.getPrevKeyValue(t,e),o.getNextKeyValue(t,e));else{const u=o.greatTicks.getReferenceKeyValue(t,e)(i);l=Ys(i,s,o.unit,u,1)}else if(r==="major"&&o.majorTicks!==void 0)l=o.irregular===!0?((u,d,f,y)=>{const m=[];let S=f(u),x=0;for(;S<d;)if(m.push(S),S=y(S),x+=1,x>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return m.push(S),m})(i,s,o.getPrevKeyValue(t,e),o.getNextKeyValue(t,e)):((u,d,f)=>{const y=[];let m=u,S=0;for(;m<d;)if(y.push(m),m+=f,S+=1,S>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return y.push(m),y})(i,s,o.unit);else{if(r!=="minor"||o.minorTicks===void 0)return[];if(o.irregular===!0)l=((u,d,f,y)=>{const m=[];let S=f(u),x=0;for(;S<d;)if(m.push(S),S=y(S),x+=1,x>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return m})(i,s,o.getNextKeyValueIncludingRef(t,e),o.getNextKeyValue(t,e));else{const u=(d=>{if(d!==void 0)return mr[mr.indexOf(d)+1]})(o);if(u===void 0)return[];l=Zs(i,s,u.unit/o.minorTicks.amount,1)}}return l},Kv=r=>(t,e,i,s,n,a)=>{const o=gc(r,n,a);if(o===void 0)return;let l;return r==="major"?l=o.majorTicks.fitFunction:o.minorTicks&&(l=o.minorTicks.fitFunction),l?l(t,e,i,s,n,a):void 0},Uk=xe({type:"date-time-ticks",utc:!1,locale:void 0,dateOrigin:void 0,cursorFormatter:void 0,greatTickStyle:new yn,majorTickStyle:new yn,minorTickStyle:new yn,formatOptionsMajorCentury:{year:"numeric"},formatOptionsMinorDecade:{year:"numeric"},formatOptionsMajorDecade:{year:"numeric"},formatOptionsMinorYear:{year:"numeric"},formatOptionsMajorYear:{year:"numeric"},formatOptionsMinorMonth:{month:"short"},formatOptionsGreatYear:{year:"numeric"},formatOptionsMajorMonth:{month:"long"},formatOptionsMinorWeek:{day:"numeric"},formatOptionsGreatMonth:{year:"numeric",month:"long"},formatOptionsMajorWeek:{day:"numeric",weekday:"short"},formatOptionsMinorDay:{day:"numeric",weekday:"short"},formatOptionsGreatWeek:(r,t,e)=>{const i=new Date(r),s=(n=>{const a=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate()));a.setUTCDate(a.getUTCDate()+4-(a.getUTCDay()||7));const o=new Date(Date.UTC(a.getUTCFullYear(),0,1));return Math.ceil(((a.getTime()-o.getTime())/864e5+1)/7)})(i);return`${new Intl.DateTimeFormat(e,{year:"numeric",month:"long"}).format(i)} Week ${s}`},formatOptionsMajorDay:{weekday:"long",day:"numeric"},formatOptionsMinorHour:{hour:"2-digit",minute:"2-digit"},formatOptionsGreatDay:{year:"numeric",month:"long",day:"numeric"},formatOptionsMajorHour:{hour:"2-digit",minute:"2-digit"},formatOptionsMinorMinute:{hour:"2-digit",minute:"2-digit"},formatOptionsGreatHour:{year:"numeric",month:"long",day:"numeric"},formatOptionsMajorMinute:{hour:"2-digit",minute:"2-digit"},formatOptionsMinorSecond:{hour:"2-digit",minute:"2-digit",second:"2-digit"},formatOptionsGreatMinute:{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"},formatOptionsMajorSecond:{second:"2-digit"},formatOptionsMinorMillisecond:r=>{const t=new Date(r);return`${(t.getSeconds()+t.getUTCMilliseconds()/1e3).toFixed(2)}`},formatOptionsGreatSecond:{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"},formatOptionsMajorMilliSecond:r=>{const t=new Date(r);return`${(t.getSeconds()+t.getUTCMilliseconds()/1e3).toFixed(1)}`}});class Ok extends Uk{Yh(t){const e=this.dateOrigin!==void 0?this.dateOrigin.getTime():0,i=d=>mr.map(f=>{const y=((m,S,x)=>{switch(x.label){case"MilliSecond100":return S==="Great"?void 0:S==="Major"?m.formatOptionsMajorMilliSecond:m.formatOptionsMinorMillisecond;case"Second":return S==="Great"?m.formatOptionsGreatSecond:S==="Major"?m.formatOptionsMajorSecond:m.formatOptionsMinorSecond;case"Minute":return S==="Great"?m.formatOptionsGreatMinute:S==="Major"?m.formatOptionsMajorMinute:m.formatOptionsMinorMinute;default:case"Hour":return S==="Great"?m.formatOptionsGreatHour:S==="Major"?m.formatOptionsMajorHour:m.formatOptionsMinorHour;case"Day":return S==="Great"?m.formatOptionsGreatDay:S==="Major"?m.formatOptionsMajorDay:m.formatOptionsMinorDay;case"Week":return S==="Great"?m.formatOptionsGreatWeek:S==="Major"?m.formatOptionsMajorWeek:m.formatOptionsMinorWeek;case"Month":return S==="Great"?m.formatOptionsGreatMonth:S==="Major"?m.formatOptionsMajorMonth:m.formatOptionsMinorMonth;case"Year":return S==="Great"?m.formatOptionsGreatYear:S==="Major"?m.formatOptionsMajorYear:m.formatOptionsMinorYear;case"Decade":return S==="Great"?void 0:S==="Major"?m.formatOptionsMajorDecade:m.formatOptionsMinorDecade;case"Century":return S==="Great"?void 0:S==="Major"?m.formatOptionsMajorCentury:void 0;case"Millennium":return}})(this,d,f);if(typeof y!="object")return y;try{return new Intl.DateTimeFormat(this.locale,y)}catch{let S="";for(const x in y)S+=` ${x}: ${y[x]},`;nt.console.error(`Invalid Intl.DateTimeFormat ( locale: ${this.locale}, formatOptions {${S}} )`)}}),s=new Map;s.set("great",i("Great")),s.set("major",i("Major")),s.set("minor",i("Minor"));const n=d=>String(d),a=(d,f)=>(y,m)=>{let S=y+e;const x=m.getInnerStart(),v=m.getInnerEnd(),b=x>v,E=gc(d,b?v:x,b?x:v);if(E===void 0)return n(S);if(d==="great"){const F=xi(y,f==="left"?x:v);let B;if(B=F===!1?y:E.irregular===!1?f==="left"&&b===!1||f==="right"&&b===!0?E.greatTicks.getReferenceKeyValue(e,this.utc)(y):E.greatTicks.getReferenceKeyValue(e,this.utc)(y+1*E.unit):f==="left"&&b===!1||f==="right"&&b===!0?E.getPrevKeyValue(e,this.utc)(y):E.getNextKeyValue(e,this.utc)(y),S=B+e,f==="right"&&F===!0)return""}const T=s.get(d);if(T===void 0)return n(S);const V=T[mr.indexOf(E)];return V===void 0?"":typeof V=="function"?V(S,m,this.locale):V.format(S)},o=[],l=[{Ue:"Great ticks (directive)",Rg:0,Ne:!0,Br:am("great",e,this.utc),Lr:void 0},{Ue:"Major ticks",Rg:1,lr:this.majorTickStyle,nr:a("major"),Br:am("major",e,this.utc),bh:{dr:Kv("major")},Lr:void 0}];Of(this.greatTickStyle)||(o.push({Ue:"Great ticks (left)",lr:this.greatTickStyle.setLabelAlignment(-1),nr:a("great","left"),Br:Qv(e,this.utc,"left"),Oe:!0,mr:!1}),o.push({Ue:"Great ticks (right)",lr:this.greatTickStyle.setLabelAlignment(1),nr:a("great","right"),Br:Qv(e,this.utc,"right"),Oe:!0,mr:!1})),Of(this.minorTickStyle)||l.push({Ue:"Minor ticks",Rg:2,lr:this.minorTickStyle,nr:a("minor"),Br:am("minor",e,this.utc),bh:{dr:Kv("minor"),xh:(d,f,y,m,S,x)=>{const v=gc("minor",S,x);return!v||v.label!=="Week"}},Lr:void 0});const u=this.cursorFormatter;return{He:o,$e:l,Ge:u?(d,f,y)=>u(e+d,f,y):(d,f,y)=>{const m=new Date(e+d);return`${new Intl.DateTimeFormat(y,{year:"numeric",month:"numeric",day:"numeric",minute:"2-digit",hour:"2-digit"}).format(m)} `},Xh:1e3,jh:31536e9}}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setTickStyle(t){return this.setGreatTickStyle(t).setMajorTickStyle(t).setMinorTickStyle(t)}setGreatTickStyle(t){if(typeof t=="function"){const e=this.get("greatTickStyle");return this.set("greatTickStyle",t(e))}return this.set("greatTickStyle",t)}getGreatTickStyle(){return this.get("greatTickStyle")}setMajorTickStyle(t){return typeof t=="function"?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if(typeof t=="function"){const e=this.get("minorTickStyle");return this.set("minorTickStyle",t(e))}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setUTC(t){return this.set("utc",t)}getUTC(){return this.get("utc")}setLocale(t){return this.set("locale",t)}getLocale(){return this.get("locale")}setDateOrigin(t){return this.set("dateOrigin",t)}getDateOrigin(){return this.get("dateOrigin")}setFormatting(t,e,i){return this.withMutations(s=>s.set("formatOptionsGreatYear",t||this.formatOptionsGreatYear).set("formatOptionsGreatMonth",t||this.formatOptionsGreatMonth).set("formatOptionsGreatWeek",t||this.formatOptionsGreatWeek).set("formatOptionsGreatDay",t||this.formatOptionsGreatDay).set("formatOptionsGreatHour",t||this.formatOptionsGreatHour).set("formatOptionsGreatMinute",t||this.formatOptionsGreatMinute).set("formatOptionsGreatSecond",t||this.formatOptionsGreatSecond).set("formatOptionsMajorCentury",e||this.formatOptionsMajorCentury).set("formatOptionsMajorDecade",e||this.formatOptionsMajorDecade).set("formatOptionsMajorYear",e||this.formatOptionsMajorYear).set("formatOptionsMajorMonth",e||this.formatOptionsMajorMonth).set("formatOptionsMajorWeek",e||this.formatOptionsMajorWeek).set("formatOptionsMajorDay",e||this.formatOptionsMajorDay).set("formatOptionsMajorHour",e||this.formatOptionsMajorHour).set("formatOptionsMajorMinute",e||this.formatOptionsMajorMinute).set("formatOptionsMajorSecond",e||this.formatOptionsMajorSecond).set("formatOptionsMajorMilliSecond",e||this.formatOptionsMajorMilliSecond).set("formatOptionsMinorDecade",i||this.formatOptionsMinorDecade).set("formatOptionsMinorYear",i||this.formatOptionsMinorYear).set("formatOptionsMinorMonth",i||this.formatOptionsMinorMonth).set("formatOptionsMinorWeek",i||this.formatOptionsMinorWeek).set("formatOptionsMinorDay",i||this.formatOptionsMinorDay).set("formatOptionsMinorHour",i||this.formatOptionsMinorHour).set("formatOptionsMinorMinute",i||this.formatOptionsMinorMinute).set("formatOptionsMinorSecond",i||this.formatOptionsMinorSecond))}setFormattingDecade(t,e){return this.withMutations(i=>(t&&(i=i.set("formatOptionsMajorDecade",t)),e&&(i=i.set("formatOptionsMinorYear",e)),i))}setFormattingYear(t,e){return this.withMutations(i=>(t&&(i=i.set("formatOptionsMajorYear",t)),e&&(i=i.set("formatOptionsMinorMonth",e)),i))}setFormattingMonth(t,e,i){return this.withMutations(s=>(t&&(s=s.set("formatOptionsGreatYear",t)),e&&(s=s.set("formatOptionsMajorMonth",e)),i&&(s=s.set("formatOptionsMinorWeek",i)),s))}setFormattingWeek(t,e,i){return this.withMutations(s=>(t&&(s=s.set("formatOptionsGreatMonth",t)),e&&(s=s.set("formatOptionsMajorWeek",e)),i&&(s=s.set("formatOptionsMinorDay",i)),s))}setFormattingDay(t,e,i){return this.withMutations(s=>(t&&(s=s.set("formatOptionsGreatWeek",t)),e&&(s=s.set("formatOptionsMajorDay",e)),i&&(s=s.set("formatOptionsMinorHour",i)),s))}setFormattingHour(t,e,i){return this.withMutations(s=>(t&&(s=s.set("formatOptionsGreatDay",t)),e&&(s=s.set("formatOptionsMajorHour",e)),i&&(s=s.set("formatOptionsMinorMinute",i)),s))}setFormattingMinute(t,e,i){return this.withMutations(s=>(t&&(s=s.set("formatOptionsGreatHour",t)),e&&(s=s.set("formatOptionsMajorMinute",e)),i&&(s=s.set("formatOptionsMinorSecond",i)),s))}setFormattingSecond(t,e,i){return this.withMutations(s=>(t&&(s=s.set("formatOptionsGreatMinute",t)),e&&(s=s.set("formatOptionsMajorSecond",e)),i&&(s=s.set("formatOptionsMinorMillisecond",i)),s))}setFormattingMilliSecond(t,e){return this.withMutations(i=>(t&&(i=i.set("formatOptionsGreatSecond",t)),e&&(i=i.set("formatOptionsMajorMilliSecond",e)),i))}}const tb=(r,t)=>(e,i)=>{const s=i-e;if(t){const l=Math.log10(s/2);let u=10**Math.floor(l-r);const d=1/u;u=Math.round(u*d)/d;const f=Math.round(Math.floor(e/(10*u))*u*10*d)/d;return Ys(f,i,u,void 0,d)}const n=Math.log10(s);let a=10**Math.round(n-r);const o=1/a;return a=Math.round(a*o)/o,Zs(e,i,a,o)},Gk=(r,t,e,i,s,n)=>t===0?r.filter((a,o)=>o%2==0):t===1?r.filter((a,o)=>o%5==0):void 0,Yk=(r,t,e,i,s,n)=>t===0?r.filter((a,o)=>o%2==0):t===1?r.filter((a,o)=>o%3==0):t===2?r.filter((a,o)=>o%4==0):t===3?r.filter((a,o)=>o%5==0):void 0,Hk=le(void 0,2,5),Xk=(r,t,e,i,s,n)=>t===0?[r[1],r[3],r[5]]:t===1?[r[0],r[3]]:t===2?[r[1]]:void 0,eb=(r,t)=>{const e=Jh(r),i=Sl(r);if(t)return(n,a)=>{const o=[],l=Math.floor(e(n)),u=Math.ceil(e(a));for(let d=l-1;d<=u+1;d+=1){const f=i**d;o.push(f)}return o};const s=r===10?9:4;return(n,a)=>{const o=Math.round(e(n)),l=Math.round(e(a)),u=[],d=i**o,f=(i**l-d)/s;for(let y=1;y<=s;y+=1){const m=d+f*y;m>n&&m<a&&u.push(m)}return u}},Wk=xe({type:"numeric-ticks",cursorFormatter:void 0,extremeTickStyle:new yn,majorTickStyle:new yn,minorTickStyle:new yn,formattingOffset:void 0,extremeFormattingFunction:void 0,majorFormattingFunction:void 0,minorFormattingFunction:void 0});class qk extends Wk{Yh(t){const e=this.formattingOffset,i=this.get("extremeFormattingFunction")||(t.type==="logarithmic"?(u,d)=>Gn.LogarithmicNoExponents(u,d,void 0,t.base):Gn.Numeric),s=this.get("majorFormattingFunction")||(t.type==="logarithmic"?(u,d)=>Gn.LogarithmicNoExponents(u,d,void 0,t.base):Gn.Numeric),n=this.get("minorFormattingFunction")||(t.type==="logarithmic"?(u,d)=>Gn.LogarithmicNoExponents(u,d,void 0,t.base):Gn.Numeric),a=[],o=[];Of(this.extremeTickStyle)||a.push({Ue:"Extreme ticks",lr:this.extremeTickStyle,nr:e===void 0?i:(u,d,f)=>i(e+u,d,f),Br:NC,Oe:!0,mr:!0}),o.push({Ue:"Major ticks",Rg:0,lr:this.majorTickStyle,nr:e===void 0?s:(u,d,f)=>s(e+u,d,f),Br:t.type==="logarithmic"?eb(t.base,!0):tb(0,!0),bh:t.type==="logarithmic"?{dr:Yk}:{dr:Gk},Lr:void 0}),Of(this.minorTickStyle)||o.push({Ue:"Minor ticks",Rg:1,lr:this.minorTickStyle,nr:e===void 0?n:(u,d,f)=>n(e+u,d,f),Br:t.type==="logarithmic"?eb(t.base,!1):tb(1,!1),bh:t.type==="logarithmic"?{dr:Xk}:{dr:Hk},Lr:50});const l=this.cursorFormatter?this.cursorFormatter:Gn.Numeric;return{He:a,$e:o,Ge:e===void 0?l:(u,d,f)=>l(e+u,d,f),Xh:1e-9,jh:void 0}}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setExtremeTickStyle(t){if(typeof t=="function"){const e=this.get("extremeTickStyle");return this.set("extremeTickStyle",t(e))}return this.set("extremeTickStyle",t)}getExtremeTickStyle(){return this.get("extremeTickStyle")}setFormattingOffset(t){return this.set("formattingOffset",t)}getFormattingOffset(){return this.get("formattingOffset")}setTickStyle(t){const e=this.setMajorTickStyle(t).setMinorTickStyle(t);return e.extremeTickStyle!==mR?e.setExtremeTickStyle(t):e}setMajorTickStyle(t){return typeof t=="function"?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if(typeof t=="function"){const e=this.get("minorTickStyle");return this.set("minorTickStyle",t(e))}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setFormattingFunction(t){return this.withMutations(e=>e.set("extremeFormattingFunction",t).set("majorFormattingFunction",t).set("minorFormattingFunction",t).set("cursorFormatter",t))}getExtremeFormattingFunction(){return this.get("extremeFormattingFunction")}setExtremeFormattingFunction(t){return this.set("extremeFormattingFunction",t)}getMajorFormattingFunction(){return this.get("majorFormattingFunction")}setMajorFormattingFunction(t){return this.set("majorFormattingFunction",t)}getMinorFormattingFunction(){return this.get("minorFormattingFunction")}setMinorFormattingFunction(t){return this.set("minorFormattingFunction",t)}}const jk=xe({type:"time-ticks",cursorFormatter:void 0,timeOrigin:void 0,majorTickStyle:new yn,minorTickStyle:new yn,majorFormattingFunction:void 0,minorFormattingFunction:void 0}),Oh=(r,t)=>{const e=t-r;return e>=864e5?"MajorHours12":e>=36e5?"MajorHours":e>=6e5?"MajorMinutes15":e>=9e4?"MajorMinutes":e>=10500?"MajorSeconds15":e>=1e3?"MajorSeconds":e>=100?"MajorMilliseconds100":e>=10?"MajorMilliseconds10":e>=1?"MajorMilliseconds":e>=.1?"MajorMicroseconds100":e>=.01?"MajorMicroseconds10":e>=.001?"MajorMicroseconds":e<=.001?"MajorNanoseconds100":"Unknown"},me={hhmmss:r=>{let t=Math.abs(r);const e=r>=0?"":"-",i=Math.floor(t/36e5);t%=36e5;const s=Math.floor(t/6e4);t%=6e4;const n=Math.floor(t/1e3);return`${e}${ys(i,2)}:${ys(s,2)}:${ys(n,2)}`},hhmmssmmm:r=>{let t=Math.abs(r);const e=r>=0?"":"-",i=Math.floor(t/36e5);t%=36e5;const s=Math.floor(t/6e4);t%=6e4;const n=Math.floor(t/1e3);t%=1e3;const a=Math.floor(t/1);return`${e}${ys(i,2)}:${ys(s,2)}:${ys(n,2)}.${ys(a,3)}`},hhmmssmmmuuu:r=>{const t=Math.abs(r),e=r>=0?"":"-",i=Math.floor(t/36e5),s=Math.floor(t/6e4)%60,n=Math.floor(t/1e3)%60,a=Math.floor(t/1)%1e3,o=r.toLocaleString("en-US",{minimumFractionDigits:3,maximumFractionDigits:3}).split(".")[1];return`${e}${ys(i,2)}:${ys(s,2)}:${ys(n,2)}.${ys(a,3)}${o}`},hhmmssmmmuuunnn:r=>{const t=Math.abs(r),e=r>=0?"":"-",i=Math.floor(t/36e5),s=Math.floor(t/6e4)%60,n=Math.floor(t/1e3)%60,a=Math.floor(t/1)%1e3,o=r.toLocaleString("en-US",{minimumFractionDigits:6,maximumFractionDigits:6}).split(".")[1];return`${e}${ys(i,2)}:${ys(s,2)}:${ys(n,2)}.${ys(a,3)}${o}`}},Gh={MajorHours12:{major:{format:me.hhmmss,getKeyValues:(r,t,e,i)=>(r=Math.floor(r/(4*432e5))*432e5*4,Ys(r,t,432e5,void 0,1e6)),fitKeyValues:le({ignore:"first"},2,4)},minor:{format:me.hhmmss,getKeyValues:(r,t,e,i)=>Zs(r,t,36e5,1e6),fitKeyValues:le({},2,3,4,6)},defaultValueFormatter:me.hhmmss},MajorHours:{major:{format:me.hhmmss,getKeyValues:(r,t,e,i)=>(r=Math.floor(r/(12*36e5))*36e5*12,Ys(r,t,36e5,void 0,1e6)),fitKeyValues:le({ignore:"first"},2,6,12)},minor:{format:me.hhmmss,getKeyValues:(r,t,e,i)=>Zs(r,t,3e5,1e6),fitKeyValues:le({},2,4,6)},defaultValueFormatter:me.hhmmss},MajorMinutes15:{major:{format:me.hhmmss,getKeyValues:(r,t,e,i)=>(r=36e5*Math.floor(r/36e5),Ys(r,t,9e5,void 0,1e6)),fitKeyValues:le({ignore:"first"},2)},minor:{format:me.hhmmss,getKeyValues:(r,t,e,i)=>Zs(r,t,6e4,1e6),fitKeyValues:le({},3,5)},defaultValueFormatter:me.hhmmss},MajorMinutes:{major:{format:me.hhmmss,getKeyValues:(r,t,e,i)=>(r=Math.floor(r/6e5)*6e4*10,Ys(r,t,6e4,void 0,1e6)),fitKeyValues:le({ignore:"first"},2,5)},minor:{format:me.hhmmss,getKeyValues:(r,t,e,i)=>Zs(r,t,5e3,1e6),fitKeyValues:le({},2,3,4,6)},defaultValueFormatter:me.hhmmss},MajorSeconds15:{major:{format:me.hhmmss,getKeyValues:(r,t,e,i)=>(r=Math.floor(r/6e4)*15e3*4,Ys(r,t,15e3,void 0,1e6)),fitKeyValues:le({ignore:"first"},2,4)},minor:{format:me.hhmmss,getKeyValues:(r,t,e,i)=>Zs(r,t,1e3,1e6),fitKeyValues:le({},3,5)},defaultValueFormatter:me.hhmmss},MajorSeconds:{major:{format:me.hhmmssmmm,getKeyValues:(r,t,e,i)=>(r=Math.floor(r/1e4)*1e3*10,Ys(r,t,1e3,void 0,1e6)),fitKeyValues:le({ignore:"first"},2,5)},minor:{format:me.hhmmssmmm,getKeyValues:(r,t,e,i)=>Zs(r,t,100,1e6),fitKeyValues:le({},2,3,5)},defaultValueFormatter:me.hhmmssmmm},MajorMilliseconds100:{major:{format:me.hhmmssmmm,getKeyValues:(r,t,e,i)=>(r=100*Math.floor(r/1e3)*10,Ys(r,t,100,void 0,1e6)),fitKeyValues:le({ignore:"first"},2,5)},minor:{format:me.hhmmssmmm,getKeyValues:(r,t,e,i)=>Zs(r,t,10,1e6),fitKeyValues:le({},2,3,5)},defaultValueFormatter:me.hhmmssmmm},MajorMilliseconds10:{major:{format:me.hhmmssmmm,getKeyValues:(r,t,e,i)=>(r=10*Math.floor(r/100)*10,Ys(r,t,10,void 0,1e6)),fitKeyValues:le({ignore:"first"},2,5)},minor:{format:me.hhmmssmmm,getKeyValues:(r,t,e,i)=>Zs(r,t,1,1e6),fitKeyValues:le({},2,3,5)},defaultValueFormatter:me.hhmmssmmm},MajorMilliseconds:{major:{format:me.hhmmssmmmuuu,getKeyValues:(r,t,e,i)=>(r=1*Math.floor(r/10)*10,Ys(r,t,1,void 0,1e6)),fitKeyValues:le({ignore:"first"},2,5)},minor:{format:me.hhmmssmmmuuu,getKeyValues:(r,t,e,i)=>Zs(r,t,.1,1e6),fitKeyValues:le({},2)},defaultValueFormatter:me.hhmmssmmmuuu},MajorMicroseconds100:{major:{format:me.hhmmssmmmuuu,getKeyValues:(r,t,e,i)=>(r=.1*Math.floor(r/1)*10,Ys(r,t,.1,void 0,1e6)),fitKeyValues:le({ignore:"first"},2,5)},minor:{format:me.hhmmssmmmuuu,getKeyValues:(r,t,e,i)=>Zs(r,t,.01,1e6),fitKeyValues:le({},2,3,5)},defaultValueFormatter:me.hhmmssmmmuuu},MajorMicroseconds10:{major:{format:me.hhmmssmmmuuu,getKeyValues:(r,t,e,i)=>(r=Math.floor(r/.1)*.01*10,Ys(r,t,.01,void 0,1e6)),fitKeyValues:le({ignore:"first"},2,5)},minor:{format:me.hhmmssmmmuuu,getKeyValues:(r,t,e,i)=>Zs(r,t,.001,1e6),fitKeyValues:le({},2,3,5)},defaultValueFormatter:me.hhmmssmmmuuu},MajorMicroseconds:{major:{format:me.hhmmssmmmuuunnn,getKeyValues:(r,t,e,i)=>(r=Math.floor(r/.01)*.001*10,Ys(r,t,.001,void 0,1e6)),fitKeyValues:le({ignore:"first"},2,5)},minor:{format:me.hhmmssmmmuuunnn,getKeyValues:(r,t,e,i)=>Zs(r,t,100*1e-6,1e6),fitKeyValues:le({},2,3,5)},defaultValueFormatter:me.hhmmssmmmuuunnn},MajorNanoseconds100:{major:{format:me.hhmmssmmmuuunnn,getKeyValues:(r,t,e,i)=>{const s=9999999999999999e-20;return r=Math.floor(r/.001)*s*10,Ys(r,t,s,void 0,1e6)},fitKeyValues:le({ignore:"first"},2,5)},minor:{format:me.hhmmssmmmuuunnn,getKeyValues:(r,t,e,i)=>Zs(r,t,10*1e-6,1e6),fitKeyValues:le({},2,3,5)},defaultValueFormatter:me.hhmmssmmmuuunnn},Unknown:{major:{format:(r,t,e)=>"",getKeyValues:(r,t,e,i)=>[],fitKeyValues:void 0},minor:{format:(r,t,e)=>"",getKeyValues:(r,t,e,i)=>[],fitKeyValues:void 0},defaultValueFormatter:(r,t,e)=>""}};class $k extends jk{Yh(t){const e=this.timeOrigin||0,i=[{Ue:"Major ticks",Rg:0,lr:this.majorTickStyle,nr:this.majorFormattingFunction?this.majorFormattingFunction:(s,n,a)=>{const o=Oh(Math.min(n.getInnerStart(),n.getInnerEnd()),Math.max(n.getInnerStart(),n.getInnerEnd()));return(0,Gh[o].major.format)(s+e,n,a)},Br:(s,n,a,o)=>{const l=Oh(a,o);return(0,Gh[l].major.getKeyValues)(s,n,a,o)},bh:{dr:(s,n,a,o,l,u)=>{const d=Oh(l,u),f=Gh[d].major.fitKeyValues;if(f)return f(s,n,a,o,l,u)}},Lr:void 0}];return yR(this.minorTickStyle)&&i.push({Ue:"Minor ticks",Rg:1,lr:this.minorTickStyle,nr:this.minorFormattingFunction?this.minorFormattingFunction:(s,n,a)=>{const o=Oh(Math.min(n.getInnerStart(),n.getInnerEnd()),Math.max(n.getInnerStart(),n.getInnerEnd()));return(0,Gh[o].minor.format)(s+e,n,a)},Br:(s,n,a,o)=>{const l=Oh(a,o);return(0,Gh[l].minor.getKeyValues)(s,n,a,o)},bh:{dr:(s,n,a,o,l,u)=>{const d=Oh(l,u),f=Gh[d].minor.fitKeyValues;if(f)return f(s,n,a,o,l,u)}},Lr:void 0}),{He:[],$e:i,Ge:this.cursorFormatter||((s,n,a)=>{const o=Oh(Math.min(n.getInnerStart(),n.getInnerEnd()),Math.max(n.getInnerStart(),n.getInnerEnd()));return Gh[o].defaultValueFormatter(s+e,n,a)}),Xh:1e-4,jh:864e6}}setTickStyle(t){return this.setMajorTickStyle(t).setMinorTickStyle(t)}setMajorTickStyle(t){return typeof t=="function"?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if(typeof t=="function"){const e=this.get("minorTickStyle");return this.set("minorTickStyle",t(e))}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setTimeOrigin(t){return this.set("timeOrigin",t)}getTimeOrigin(){return this.get("timeOrigin")}setFormattingFunction(t){return this.withMutations(e=>e.set("majorFormattingFunction",t).set("minorFormattingFunction",t).set("cursorFormatter",t))}getMajorFormattingFunction(){return this.get("majorFormattingFunction")}setMajorFormattingFunction(t){return this.set("majorFormattingFunction",t)}getMinorFormattingFunction(){return this.get("minorFormattingFunction")}setMinorFormattingFunction(t){return this.set("minorFormattingFunction",t)}}const pR=(r,t,e="image/png",i)=>{t+=`.${e.slice(e.indexOf("image/")+6)}`;const s=r.captureFrame(e,i);if(e!=="image/png"&&s.type.includes("image/png"))throw new Error(`saveToFile | type not supported by browser: ${e}
Check support table for HTMLCanvasElement.toDataURL`);if(nt.navigator.msSaveBlob)nt.navigator.msSaveBlob(s,t);else{const n=nt.document.createElement("a");nt.document.body.appendChild(n);const a=nt.URL.createObjectURL(s);n.href=a,n.download=t,n.click(),setTimeout(()=>{nt.URL.revokeObjectURL(a),nt.document.body.removeChild(n)},0)}},Gf=(r,t,e,i,s,n)=>{const a=r.Zu(t,e,i,s,n,!0);return a.setDraggingMode(ke.draggable),a},Yf=(r,t)=>{if(r==="relative")return t;if(r instanceof dn)return r;const e=r.x instanceof eo?r.x.dt:r.x.x,i=r.y instanceof eo?r.y.dt:r.y.y;return u0(e,i)},b0=(r,t,e,i,s)=>{if(e){const n=r,a=t,o=ol(a)?a:Cn(a)?i:void 0;if(o&&al(e)){const l=gt(n,o,s.dt);return s.Do({engineX:l.x,engineY:l.y})}if(o&&Cn(e))return gt(n,o,i);if(o&&ol(e))return gt(n,o,e)}else{const n=r;if(Cn(t)){const a=s.Po(n);return gt({x:a.engineX,y:a.engineY},s.dt,i)}if(ol(t)){const a=t,o=s.Po(n);return gt({x:o.engineX,y:o.engineY},s.dt,a)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")};class SR{constructor(t,e,i,s,n,a,o,l){this.coordsRelative="relative",this.coordsClient="client",this.Hg=[],this.$g=[],this.D=new Li,this.Xg=void 0,this.jg=void 0,this.Zg=void 0,this.Xt=Ra(0,0,0,0),this.Qg=!1,this.$i=!1,this.Jg=()=>{this.Kg=!0,this.qg.Ss()},this.tm=f=>y=>{const m=this.Hg.indexOf(y);m!==-1&&this.Hg.splice(m,1),this.us.Ss(),f.W()},this.im=f=>{const y=this.$g.indexOf(f);y!==-1&&this.$g.splice(y,1),this.us.Ss()},this.Kg=!0,this.onInViewChange=f=>this.D.on("inViewChange",f),this.offInViewChange=f=>this.D.off(f,"inViewChange"),this.cA=t,this.sm=i,this.qg=s,this.removePanel=n,this.qi=e.us.qi;const u=e.us.oi();if(this.uiScale=i.d2({scaleXYConstructor:Se}).Vi(0,100).Oi(0,100).q(u),this.pixelScale=i.d2({scaleXYConstructor:Se}).Vi(0,this.uiScale.x.getCellSize()).Oi(0,this.uiScale.y.getCellSize()).q(u),this.engine=e.us.hm,this.us=e.us.rm,this.es=this.us.es.hs(this,{}),this.nm=()=>e.om("unidentified ui"),this.am=e.lm(),this.um=this.qg.ke(this.uiScale).Fe(Y(0,0)).q(Y(100,100)).Ce(a).we(o).setMouseMoveEventHandler((f,y)=>this.D.emit("mouseMovePanelBackground",this,y)).setMouseEnterEventHandler((f,y)=>this.D.emit("mouseEnterPanelBackground",this,y)).setMouseLeaveEventHandler((f,y)=>this.D.emit("mouseLeavePanelBackground",this,y)).setMouseDownEventHandler((f,y)=>this.D.emit("mouseDownPanelBackground",this,y)).setMouseUpEventHandler((f,y)=>this.D.emit("mouseUpPanelBackground",this,y)).setMouseClickEventHandler((f,y)=>this.D.emit("mouseClickPanelBackground",this,y)).setMouseDoubleClickEventHandler((f,y)=>this.D.emit("mouseDoubleClickPanelBackground",this,y)).setMouseWheelEventHandler((f,y)=>this.D.emit("mouseWheelPanelBackground",this,y)).setMouseDragStartEventHandler((f,y,m)=>this.D.emit("mouseDragStartPanelBackground",this,y,m)).setMouseDragEventHandler((f,y,m,S,x)=>this.D.emit("mouseDragPanelBackground",this,y,m,S,x)).setMouseDragStopEventHandler((f,y,m,S)=>this.D.emit("mouseDragStopPanelBackground",this,y,m,S)).setTouchStartEventHandler((f,y)=>this.D.emit("touchStartPanelBackground",this,y)).setTouchMoveEventHandler((f,y)=>this.D.emit("touchMovePanelBackground",this,y)).setTouchEndEventHandler((f,y)=>this.D.emit("touchEndPanelBackground",this,y)),l){const f=l.on(this.Jg);this.dm=()=>l.off(f)}else{const f=e.us.Co(this.Jg);this.fm=e.us.ko.bind(e.us,f)}const d=e.us.Fo(f=>{this.Qg=f,this.D.emit("inViewChange",this,f)});this.Am=e.us.Io.bind(e.us,d),this.Xg=n}getTheme(){return this.qi}getSizePixels(){return this.pixelScale.getInnerIntervalPixels()}setBackgroundFillStyle(t){return this.um.Ce(t),this.qg.Ss(),this}getBackgroundFillStyle(){return this.um.Eh()}setBackgroundStrokeStyle(t){return this.um.we(t),this.qg.Ss(),this}getBackgroundStrokeStyle(){return this.um.ao()}translateCoordinate(t,e,i){return b0(t,e,i,this.pixelScale,this.us)}gm(t){return this.Hg.push(t),this.us.Ss(),t}ym(t){return this.$g.push(t),this.us.Ss(),t}addUIElement(t=Op,e=this.uiScale){e=Yf(e,this.pixelScale);const i=this.nm();return this.gm(Gf(t,i,this.uiScale,e,this.tm(i),this.qi))}addLegendBox(t=A0,e=this.uiScale){e=Yf(e,this.pixelScale);const i=this.ym(Gf(t,this.am,this.uiScale,e,this.im,this.qi));return i.setDraggingMode(ke.notDraggable),e!==void 0&&e!==this.uiScale||(t===void 0||t.getAlignment()==="vertical"?i.setOrigin(xl.RightCenter).setPosition({x:100,y:50}):i.setOrigin(xl.CenterBottom).setPosition(this.uiScale.mi({x:50,y:0},{x:0,y:3}))),i}getLegendBoxes(){return this.$g}dispose(){return this.$i||(this.$i=!0,this.fm&&this.fm(),this.dm&&this.dm(),Tl(this.uiScale),Tl(this.pixelScale),this.Am&&this.Am(),this.jg&&this.jg(),this.qg.W(),this.am.W(),this.Hg.slice().forEach(t=>{t.dispose()}),this.$g.slice().forEach(t=>{t.dispose()}),this.us.Ss(),this.Xg&&this.Xg(this),this.D.emit("dispose",this)),this}isDisposed(){return this.$i}onDispose(t){return this.D.on("dispose",t)}offDispose(t){return this.D.off(t,"dispose")}saveToFile(t,e,i){return pR(this.engine,t,e,i),this}Fr(t){this.Xt=t,this.Jg()}j(){return this.pixelScale.j(),this.uiScale.j(),this}Z(){return this.pixelScale.Z(),this.uiScale.Z(),this}Te(t){if(this.Kg){const e=this.qg.us.oi(),i=e.x,s=e.y;this.uiScale.q(i,s),this.pixelScale.q(i,s);const n=[this.Xt.left,this.Xt.right],a=[this.Xt.bottom,this.Xt.top];this.uiScale.Ei(n),this.uiScale.zi(a);const o=this.uiScale.getInnerIntervalPixels();this.pixelScale.Vi(0,o.x).Ei(n).Oi(0,o.y).zi(a),this.D.emit("resize",this,o.x,o.y,i,s)}this.Kg=!1}pm(){for(let t=0;t<this.Hg.length;t+=1)this.Hg[t].Ps().Te();for(let t=0;t<this.$g.length;t+=1)this.$g[t].Ps().Te();this.Zg&&this.Zg()}Sm(t,e){if(t){const i=t(e);this.onResize(i.Ps.bind(i)),this.jg=i.W.bind(i),this.Zg=i.Ps.bind(i)}}onBackgroundMouseEnter(t){return this.D.on("mouseEnterPanelBackground",t)}offBackgroundMouseEnter(t){return this.D.off(t,"mouseEnterPanelBackground")}onBackgroundMouseMove(t){return this.D.on("mouseMovePanelBackground",t)}offBackgroundMouseMove(t){return this.D.off(t,"mouseMovePanelBackground")}onBackgroundMouseLeave(t){return this.D.on("mouseLeavePanelBackground",t)}offBackgroundMouseLeave(t){return this.D.off(t,"mouseLeavePanelBackground")}onBackgroundMouseDown(t){return this.D.on("mouseDownPanelBackground",t)}offBackgroundMouseDown(t){return this.D.off(t,"mouseDownPanelBackground")}onBackgroundMouseUp(t){return this.D.on("mouseUpPanelBackground",t)}offBackgroundMouseUp(t){return this.D.off(t,"mouseUpPanelBackground")}onBackgroundMouseClick(t){return this.D.on("mouseClickPanelBackground",t)}offBackgroundMouseClick(t){return this.D.off(t,"mouseClickPanelBackground")}onBackgroundMouseDoubleClick(t){return this.D.on("mouseDoubleClickPanelBackground",t)}offBackgroundMouseDoubleClick(t){return this.D.off(t,"mouseDoubleClickPanelBackground")}onBackgroundMouseDragStart(t){return this.D.on("mouseDragStartPanelBackground",t)}offBackgroundMouseDragStart(t){return this.D.off(t,"mouseDragStartPanelBackground")}onBackgroundMouseDrag(t){return this.D.on("mouseDragPanelBackground",t)}offBackgroundMouseDrag(t){return this.D.off(t,"mouseDragPanelBackground")}onBackgroundMouseDragStop(t){return this.D.on("mouseDragStopPanelBackground",t)}offBackgroundMouseDragStop(t){return this.D.off(t,"mouseDragStopPanelBackground")}onBackgroundMouseWheel(t){return this.D.on("mouseWheelPanelBackground",t)}offBackgroundMouseWheel(t){return this.D.off(t,"mouseWheelPanelBackground")}onBackgroundTouchStart(t){return this.D.on("touchStartPanelBackground",t)}offBackgroundMouseTouchStart(t){return this.D.off(t,"touchStartPanelBackground")}onBackgroundTouchMove(t){return this.D.on("touchMovePanelBackground",t)}offBackgroundTouchMove(t){return this.D.off(t,"touchMovePanelBackground")}onBackgroundTouchEnd(t){return this.D.on("touchEndPanelBackground",t)}offBackgroundTouchEnd(t){return this.D.off(t,"touchEndPanelBackground")}onResize(t){return this.D.on("resize",t)}offResize(t){return this.D.off(t,"resize")}getIsInView(){return this.Qg}}const Tl=r=>{r.ii&&r.ii()};class Yp extends SR{constructor(t,e,i,s,n,a){super(t,e,i,e.vm("uipanel bg",0),s,e.us.qi.uiPanelBackgroundFillStyle,e.us.qi.uiPanelBackgroundStrokeStyle,a),this.Sm(n,this.pixelScale)}setMinimumSize(t){return this.xd=t,this.us.Ss(),this}getMinimumSize(){return this.xd}Te(t){super.Te(t),super.pm()}}const Jk=Ra(10,10,10,10);class Jr extends SR{constructor(t,e,i,s,n,a,o,l,u,d){super(t,e,i,s,n,a,o,d),this.bm={},this.ya=Jk,this.th=!0,this.xm=e.Mm("chart internal ui",0),this._m=this.xm.Pr(this.uiScale).Rh("Chart").Fe(Y(50,100)).Ea(Y(0,1)).Oh(l).Ce(u).setMouseInteractions(!1),this.wm=this.es.yg([this._m]).ps(this.qi.effectsText)}setAnimationsEnabled(t){return this.th=t,this}getAnimationsEnabled(){return this.th}setTitle(t){return this._m.Rh(t),this.us.Ss(),this}getTitle(){return this._m.Bh()}getTitleSize(){return this._m.Ps().jc()}setTitleFillStyle(t){return this._m.Ce(t),this.Jg(),this}getTitleFillStyle(){return this._m.Eh()}setTitleFont(t){return this._m.Oh(t),this.Jg(),this}getTitleFont(){return this._m.Vh()}setTitleRotation(t){return this._m.Nh(t),this.us.Ss(),this}getTitleRotation(){return this._m.Gh()}setTitleEffect(t){return this.wm.ps(t),this.us.Ss(),this}getTitleEffect(){return this.wm.vs()}setTitleMargin(t){var e,i;return this.bm=typeof t=="object"?this.bm?(e=this.bm,{left:(i=t).left!==void 0?i.left:e.left,top:i.top!==void 0?i.top:e.top,right:i.right!==void 0?i.right:e.right,bottom:i.bottom!==void 0?i.bottom:e.bottom}):t:{left:t,top:t,right:t,bottom:t},this.Jg(),this}getTitleMargin(){return this.bm}setPadding(t){return this.ya=typeof t=="object"?nl(this.ya,t):{left:t,top:t,right:t,bottom:t},this.Jg(),this}getPadding(){return this.ya}Cm(t){const e=t.km(),i=e==null?void 0:e.height,s=e==null?void 0:e.width;if(i!==void 0&&s!==void 0)return{x:i/2,y:s/2}}dispose(){return super.dispose(),this.xm.W(),this}}const is={Tm:(r,t)=>r.Eh()!==Ft&&r.Bh().length!==0&&r.getVisible()?r.Ps().jc().y:0,Fm(r,t){r.Fe(Y(50,100)).Fr({top:t.top!==void 0?t.top:10,right:t.right||0,left:t.left||0,bottom:t.bottom||0})}};var We;(function(r){r[r.disabled=0]="disabled",r[r.snapToClosest=1]="snapToClosest",r[r.onHover=2]="onHover"})(We||(We={}));const hs={Im(r,t,e,i,s,n){let a;const o=r.getAutoCursorMode();if(!e&&o!==We.disabled){const l=r.us.On(),u=i.find(d=>d.getIsUnderMouse());o===We.snapToClosest&&s?(t||u!==void 0)&&(a=l&&s(l)):u===void 0||u.getCursorEnabled&&!u.getCursorEnabled()||(a=l&&n(u,l))}a?r.Pm.pointAt(a).setVisible(!0):r.Pm.setVisible(!1),r.Pm.Ps().Te()},Hc(r,t,e){if(t.x<r.uiScale.x.ei()||t.x>r.uiScale.x.hi()||t.y<r.uiScale.y.ei()||t.y>r.uiScale.y.hi())return;let i,s=Number.MAX_VALUE;for(const n of e)if(n.getCursorEnabled()&&n.getVisible()){const a=n.Hc(t);if(a){const o=gt(a.location,a.scale,r.engine.scale),l=Kn(t,o);Number.isNaN(l)||i&&!(l<s)||(i=a,s=l)}}return i||void 0},Dm(r){r.onSeriesBackgroundMouseEnter(()=>{r.getAutoCursorMode()!==We.disabled&&r.us.Ss()}),r.onSeriesBackgroundMouseMove(()=>{r.getAutoCursorMode()!==We.disabled&&r.us.Ss()}),r.onSeriesBackgroundMouseLeave(()=>{r.getAutoCursorMode()!==We.disabled&&r.us.Ss()}),r.onSeriesBackgroundTouchStart(()=>{r.getAutoCursorMode()!==We.disabled&&r.us.Ss()}),r.onSeriesBackgroundTouchMove(()=>{r.getAutoCursorMode()!==We.disabled&&r.us.Ss()}),r.onSeriesBackgroundTouchEnd(()=>{r.getAutoCursorMode()!==We.disabled&&r.us.Ss()})},Bm(r,t){t.onMouseEnter((e,i)=>{r.getAutoCursorMode()!==We.disabled&&r.us.Ss()}),t.onMouseMove((e,i)=>{r.getAutoCursorMode()!==We.disabled&&r.us.Ss()}),t.onMouseLeave(()=>{r.getAutoCursorMode()!==We.disabled&&r.us.Ss()})}};class xR{constructor(t,e){this.Lm=t,this.Rm=e}alter(t){this.Em=this.Em!==void 0?this.Em:this.Rm(),this.zm=t,this.Lm(t)}resetValue(){this.zm!==void 0&&(this.Em!==void 0&&this.isAltered()&&this.Lm(this.Em),this.Em=void 0,this.zm=void 0)}getNormalValue(){return this.Em!==void 0?this.Em:this.Rm()}isAltered(){return this.zm!==void 0&&this.Rm()===this.zm}}class AR{constructor(t,e){this.Vm=[],this.Om=t,this.dt=e}update(){return this.Om.getVisible()?!(this.Nm()&&(!this.Gm()||(this.resetTable(),this.Om.Ps(),this.Nm()))&&(this.Wm(),this.Om.Ps(),this.Nm()&&(this.resetTable(),this.Om.Ps(),1))):(this.Gm()&&this.resetTable(),!0)}Gm(){for(let t=0;t<this.Vm.length;t+=1)if(this.Vm[t].isAltered())return!0;return!1}resetTable(){for(let t=0;t<this.Vm.length;t+=1)this.Vm[t].resetValue();return this}Nm(){return((t,e)=>{const i=gt(t.getPosition(Y(-1,-1),Me.PaddedBackground),t.scale,e),s=gt(t.getPosition(Y(1,1),Me.PaddedBackground),t.scale,e);return i.x<e.x.getInnerStart()||s.x>e.x.getInnerEnd()||i.y<e.y.getInnerStart()||s.y>e.y.getInnerEnd()})(this.Om,this.dt)}Um(){return((t,e)=>{const i=gt(t.getPosition(Y(-1,-1),Me.PaddedBackground),t.scale,e),s=gt(t.getPosition(Y(1,1),Me.PaddedBackground),t.scale,e);return i.x<e.x.getInnerStart()||s.x>e.x.getInnerEnd()})(this.Om,this.dt)}Ym(){return((t,e)=>{const i=gt(t.getPosition(Y(-1,-1),Me.PaddedBackground),t.scale,e),s=gt(t.getPosition(Y(1,1),Me.PaddedBackground),t.scale,e);return i.y<e.y.getInnerStart()||s.y>e.y.getInnerEnd()})(this.Om,this.dt)}Hm(t){return this.Vm.push(t),t}}class Zk extends AR{constructor(){super(...arguments),this.ma=this.Hm(new xR(t=>this.Om.setOrigin(t),()=>this.Om.getOrigin()))}Wm(){const t=this.ma.getNormalValue(),e=Y(this.Um()?-t.x:t.x,this.Ym()?-t.y:t.y);this.ma.alter(e)}}class Qk extends AR{constructor(t,e,i,s){super(t,e),this.$m=this.Hm(new xR(n=>this.Om.setTextFont(a=>a.setSize(n)),()=>this.Om.getTextFont().getSize())),this.Xm=i,this.jm=s}Wm(){const t=this.$m.getNormalValue(),e=this.Xm;if(e<t)for(let i=1;i<=this.jm;i+=1){const s=t-(t-e)*(i/this.jm);if(this.$m.alter(s),this.Om.Ps(),!this.Nm())return}}}const Kk={Flip:(r,t)=>new Zk(r,t),FontSize:(r=5,t=5)=>(e,i)=>new Qk(e,i,r,t)};class t3{constructor(){this.Zm=[]}addRow(...t){return this.Zm.push(t),this}}class Ii extends t3{Zu(){const t=this.Zm;return this.Zm=[],t}Qm(){return this.Zm.length=0,this}}class e3 extends wk{constructor(){super(...arguments),this.Nu=this.qi.cursorResultTableTextFont,this.Dd=0,this.Jm=this.qi.cursorResultTableTextFillStyle}setContent(t){for(let s=0;s<t.length;s+=1){const n=t[s];let a=!1;for(let o=0;o<n.length;o+=1){const l=n[o],u=typeof l=="object"&&"text"in l?l.text:typeof l=="string"?l:void 0,d=typeof l=="object"&&"icon"in l?l.icon:so(l)?l:void 0;if((u===void 0||u.length===0)&&!d){a=!0;break}}a||(n.unshift(""),n.push(""))}this.Km();const e=t.length;let i=this.getMembers().length;for(let s=0;s<Math.max(e,i);s+=1){const n=this.getRow(s,!0);if(s>=e)this.getMembers()[s].dispose(),s-=1,i-=1;else{const a=t[s].length;let o=n.getMembers().length;for(let l=0;l<Math.max(a,o);l+=1){const u=t[s][l],d=typeof u=="object"&&"font"in u?u.font:void 0,f=typeof u=="object"&&"fillStyle"in u?u.fillStyle:void 0,y=typeof u=="object"&&"text"in u?u.text:typeof u=="string"?u:void 0,m=typeof u=="object"&&"icon"in u?u.icon:so(u)?u:void 0,S=n.getMembers();if(l>=a)n.getMembers()[l].dispose(),l-=1,o-=1;else if(y!==void 0&&y.length>0||m){for(let E=S.length;E<l;E+=1)n.addGap(void 0,void 0);const x=d?this.Nu.withMutations(E=>{for(const T of Object.keys(d)){const V=d[T];E.set(T,V)}return E}):this.Nu,v=f||this.Jm,b=S[l];if(y){let E;b&&b instanceof Nm?E=b:(b&&b.dispose(),E=n.addElement(Dc,l)),E.setFont(x).setFillStyle(v).setText(y).setTextRotation(this.Dd)}else if(m){let E;b&&b instanceof S0?E=b:(b&&b.dispose(),E=n.addElement(Tk,l)),E.setFillStyle(v).setShape(m).setSize({y:x.size,x:x.size}),E.setMargin(5)}}else{for(let v=S.length;v<l;v+=1)n.addGap(void 0,void 0);const x=S[l];x&&x instanceof Ml||(x&&x.dispose(),n.addGap(void 0,l))}}}}return this.ks.Ss(),this}setTextFillStyle(t){this.Jm=typeof t=="function"?t(this.Jm):t;for(let e=0;e<this.getMemberCount();e+=1){const i=this.getRow(e);for(let s=0;s<i.getMembers().length;s+=1){const n=i.getMembers()[s];n instanceof Nm&&n.setFillStyle(this.Jm)}}return this.ks.Ss(),this}getTextFillStyle(){return this.Jm}setTextFont(t){return tc(t)?this.Nu=t:this.Nu=t(this.Nu),this.ks.Ss(),this}getTextFont(){return this.Nu}setTextRotation(t){return this.Dd=t,this.ks.Ss(),this}getTextRotation(){return this.Dd}Km(){for(let t=0;t<this.Sd.length;t+=1)for(let e=0;e<this.Sd[t].getMembers().length;e+=1)this.Sd[t].getMembers()[e].dispose()}Ps(){for(let t=0;t<this.Sd.length;t+=1)this.Sd[t].setMinimumSize(void 0);super.Ps();for(let t=0;t<this.Sd.length;t+=1)this.Sd[t].setMinimumSize(this.size.x);return super.Ps(),this}}class vR{constructor(t,e,i,s,n){this.qm=!0,this.ty=!0,this.Qg=!1,this.ua=Y(0,0),this.Xi=!0,this.ks=t,this.renderingScale=e,this.scale=i,this.iy=s,this.sy=new S0(this.ks,this.renderingScale,this.scale,se,n).setMouseInteractions(!1).setFillStyle(n.cursorPointMarkerFillStyle).setSize(n.cursorPointMarkerSize).setShape(n.cursorPointMarkerShape),this.Om=new e3(this.ks,this.renderingScale,this.scale,this.iy,se,n).setMouseInteractions(!1).setBackground(a=>a.setFillStyle(n.cursorResultTableFillStyle).setStrokeStyle(n.cursorResultTableStrokeStyle)).setTextFillStyle(n.cursorResultTableTextFillStyle).setTextFont(n.cursorResultTableTextFont),this.ey=Kk.Flip(this.Om,this.scale)}dispose(){return this.sy.dispose(),this.Om.dispose(),this}pointAt(t){return this.ua=t.scale===this.scale?t.location:gt(t.location,t.scale,this.scale),this.sy.setPosition(this.ua),this.Om.setPosition(this.ua).setContent(t.resultTableContent),this.ks.Ss(),this}getPosition(){return this.ua}setVisible(t){return this.Xi=t,this.ks.Ss(),this}getVisible(){return this.Xi}setPointMarkerVisible(t){return this.qm=t,this.ks.Ss(),this}getPointMarkerVisible(){return this.qm}setPointMarker(t){return t(this.sy),this.ks.Ss(),this}getPointMarker(){return this.sy}setResultTableVisible(t){return this.ty=t,this.ks.Ss(),this}getResultTableVisible(){return this.ty}setResultTable(t){return t(this.Om),this.ks.Ss(),this}getResultTable(){return this.Om}setAutoFitStrategy(t){return this.ey&&this.ey.resetTable(),this.ey=t?t(this.Om,this.ks.us.dt):void 0,this.ks.Ss(),this}getAutoFitStrategy(){return this.ey!==void 0}Te(){return this.ey&&this.ey.update(),this.Om.setVisible(this.Qg&&this.Xi&&this.ty),this.sy.setVisible(this.Qg&&this.Xi&&this.qm),this.sy.Te(),this.Om.Te(),this}Ps(){return this.sy.Ps(),this.Om.Ps(),this.Qg=((t,e,i=e)=>{const s=e!==i?gt(t,e,i):t;return s.x>=i.x.getInnerStart()&&s.x<=i.x.getInnerEnd()&&s.y>=i.y.getInnerStart()&&s.y<=i.y.getInnerEnd()})(this.ua,this.scale),this}}class bR extends vR{constructor(){super(...arguments),this.hy=!1}pointAt(t){return this.ny(t.fillStyle),super.pointAt(t)}ny(t){t&&this.hy&&this.Om.setTextFillStyle(t)}setResultTableAutoTextStyle(t){return this.hy=t,this.ks.Ss(),this}getResultTableAutoTextStyle(){return this.hy}}class MR extends vR{setPosition(t){return this.ua=t,this.sy.setPosition(t),this.Om.setPosition(t),this.ks.Ss(),this}}class Hp{constructor(t,e=[]){this.oy=[],this.ly=(i,s)=>(this.oy.forEach(n=>n(i,s)),i),this.iy=t,this.oy=e}}class yc extends Hp{constructor(){super(...arguments),this.uy=(t,e,i,s)=>this.ly(new bR(t,e,i,this.iy,s),s),this.addStyler=t=>new yc(this.iy,this.oy.map(e=>e).concat(t)),this.setResultTableBackground=t=>new yc(t,this.oy.map(e=>e))}}class Hf extends Hp{constructor(){super(...arguments),this.Ay=(t,e,i,s)=>this.ly(new MR(t,e,i,this.iy,s),s),this.addStyler=t=>new Hf(this.iy,this.oy.map(e=>e).concat(t)),this.setResultTableBackground=t=>new Hf(t,this.oy.map(e=>e))}}const Xp=r=>r.setResultTable(t=>t.setEffect(!0).setOrigin(Y(-1,-1)).setMargin(5)),RR=(r,t)=>r.setPointMarker(e=>e.setFillStyle(t.chartMarkerPointMarkerFillStyle).setSize(t.chartMarkerPointMarkerSize).setShape(t.chartMarkerPointMarkerShape)).setResultTable(e=>e.setEffect(!0).setBackground(i=>i).setOrigin(Y(-1,-1)).setMargin(10)),ER=new yc(ir,[Xp]),TR=new yc(Bm,[Xp,r=>r.setPointMarkerVisible(!1).setResultTable(t=>t.setOrigin(Y(0,-1)).setMargin(0).setBackground(e=>{e instanceof Bm&&e.setDirection(qt.Down).setPointerLength(10).setPointerAngle(60)}))]),i3=ER,Wp=ER,s3=TR,wR=new Hf(ir,[RR,r=>r.setPointMarkerVisible(!1).setResultTable(t=>t.setOrigin(xl.LeftBottom))]),Is=(r,t,e,i,s)=>({location:r,scale:t,resultTableContent:e,owner:i,fillStyle:s});var Xf;(function(r){r[r.LabelsInsideSlices=0]="LabelsInsideSlices",r[r.LabelsOnSides=1]="LabelsOnSides"})(Xf||(Xf={}));const qp={SortByName:(r,t)=>r.getName().localeCompare(t.getName(),void 0,{numeric:!0}),None:()=>0},jp={NamePlusValue:r=>`${r.getName()}: ${Math.round(r.getAnimatedValue())}`},$p=(r,t,e,i)=>r.addRow(e.getName()).addRow(e.getAnimatedValue().toString());class M0 extends wc{constructor(){super(...arguments),this.xs="Slice",this.u=0}}const ib=(r,t)=>{xt(t),r.setExploded(!r.getExploded())};class r3 extends M0{}class n3 extends r3{constructor(t,e,i,s,n,a,o,l){super(s,a,o,l),this.gy=!1,this.my=Ft,this.yy=Ft,this.py=this.u,this.Sy=this.gy?1:0,this.vy=this.getVisible(),this.by=Zn(()=>this.Ji.us.Ss()),this.xy=Zn(()=>this.Ji.us.Ss()),this.My=()=>{this._y=void 0},this.wy=()=>{this.Cy=void 0},this.index=t,this.Ji=s,this.scale=n,this.Ki=a,this.ky=e.Jc(n).cs(this.getHighlight()),this.ds(this.ky),this.Ue=i.Pr(n).cs(this.getHighlight()),this.ds(this.Ue,{isText:!0}),this.onMouseClick(ib),this.onTouchEnd(ib)}setValue(t){return this.Ji.getAnimationsEnabled()?this.vy&&this.Ty(this.py,t):this.py=t,this.u=t,this.Ji.us.Ss(),this}getValue(){return this.u}setExploded(t){if(t&&this.Ji.getMultipleSliceExplosion()===!1){const e=this.Ji.getSlices();for(let i=0;i<e.length;i+=1)e[i]!==this&&e[i].getExploded()&&e[i].setExploded(!1)}return this.Ji.getAnimationsEnabled()?(this.Cy&&this.Cy.finish(),this.Cy=this.xy(300,Mr.ease)([[this.Sy,t?1:0]],([e])=>{this.Sy=e,this.Ji.us.Ss()}),this.Cy.onEveryAnimationEnd(this.wy),this.gy=!this.gy):this.Ji.getMultipleSliceExplosion()!==!1||t?(this.Sy=this.gy?0:1,this.gy=!this.gy):(this.Sy=0,this.gy=!this.gy),this.Ji.us.Ss(),this}getExploded(){return this.gy}setVisible(t){return this.vy=t,t===!1?this.Ji.getAnimationsEnabled()&&this.py>0?(this._y&&(this._y.finish(!1),this._y=void 0),this.Ty(this.py,0,()=>super.setVisible(!1))):(this.py=0,super.setVisible(!1)):this.Ji.getAnimationsEnabled()?(this._y&&(this._y.finish(!1),this._y=void 0),super.setVisible(!0),this.Ty(this.py,this.u)):(this.py=this.u,super.setVisible(!0)),this}Ty(t,e,i){this._y=this.by(300,Mr.ease)([[t,e]],([s])=>{this.py=s,this.Ji.us.Ss()}),this._y.onEveryAnimationEnd(this.My),i&&this._y.onAnimationEnd(i)}setStyle(t,e,i,s){this.my=t,this.yy=i,this.ky.Ce(this.my).we(e),this.Ue.Ce(this.yy).Oh(s);for(let n=0;n<this.Qi.length;n+=1)this.styleAttachedEntry(this.Qi[n])}getAnimatedValue(){return this.py}getAnimatedExplosion(){return this.Sy}attach(t,e=!0,i=!1){return super.attach(t,e,i),this.styleAttachedEntry(t,e,i),this}styleAttachedEntry(t,e=!0,i=!1){ei(t,this.qi,i,{fill:this.my,stroke:this.ky.ao()})}}const a3=(r,t,e)=>zt(t,Yt(Dp(.5*(r.Jl()+r.Ti())*Math.PI/180),e)),h3=(r,t,e,i,s,n)=>{const a=r.length;let o=90;for(let l=0;l<a;l+=1){const u=r[l],d=o-360*t[l],f=u.getAnimatedExplosion();if(f===0||a===1)u.ky.Fe(e);else{const y=zt(e,Yt(Dp(.5*(o+d)*Math.PI/180),n*f));u.ky.Fe(y)}u.ky.eu(o).ze(d).ru(i).nu(i).ou(s),o=d}},sb=r=>{const t=r.getSlices();for(let e=0;e<t.length;e+=1)t[e].setExploded(!1)};class o3 extends Jr{constructor(t,e,i,s,n,a,o){super(t,e,i,e.vm("pieChart bg",0),s,e.us.qi.pieChartBackgroundFillStyle,e.us.qi.pieChartBackgroundStrokeStyle,e.us.qi.pieChartTitleFont,e.us.qi.pieChartTitleFillStyle,a),this.Fy=[],this.Iy=qp.SortByName,this.Yl=0,this.Py=this.qi.pieChartSliceFillStylePalette,this.Dy=this.qi.pieChartSliceStrokeStyle,this.By=!0,this.Ly=this.qi.pieChartSliceLabelFont,this.Ry=this.qi.pieChartSliceLabelFillStyle,this.Ey=0,this.zy=!1,this.Vy=20,this.Oy=!0,this.Ny=!0,this.Gy=We.onHover,this.Wy=$p,this.Uy=d=>{const f=this.Fy.indexOf(d);f>=0&&(this.Fy.splice(f,1),this.Yy())},this.us.Nn(wt.af),this.Hy=e.$y("pieChart bottom",0),this.Xy=e.$y("pieChart top",1),this._m.Rh("Pie Chart"),this.Sm(n,this.pixelScale),this.onBackgroundMouseDoubleClick(sb);const l=Ls(new OM(sb));this.onBackgroundTouchStart(l.onTouchStart),this.onBackgroundTouchMove(l.onTouchMove),this.onBackgroundTouchEnd(l.onTouchEnd),this.jy=e.Zy();const u=De(o?o.autoCursorBuilder:void 0,Wp);this.Pm=u.uy(this.jy,this.uiScale,this.uiScale,this.qi),this.setAnimationsEnabled((o==null?void 0:o.disableAnimations)!==!0&&(o==null?void 0:o.animationsEnabled)!==!1)}setAutoCursor(t){return this.Pm&&t(this.Pm),this.us.Ss(),this}getAutoCursor(){return this.Pm}setAutoCursorMode(t){return this.Gy=t,this.us.Ss(),this}getAutoCursorMode(){return this.Gy}setCursorResultTableFormatter(t){return this.Wy=t,this.us.Ss(),this}addSlice(t,e){const i=new n3(this.Ey,this.Hy,this.Xy,this,this.pixelScale,this.Uy,this.qi,this.us.es);this.Ey+=1,i.setName(t);const s=this.th;return this.th=!1,i.setValue(e),this.th=s,i.setEffect(this.Oy),this.Qy(i),this.Fy.push(i),this.Yy(),i.setHighlightOnHover(this.By),i.onMouseMove(()=>{this.Gy&&this.us.Ss()}),i}addSlices(t){const e=[];for(let i=0;i<t.length;i+=1)e.push(this.addSlice(t[i].name,t[i].value));return e}getSlices(){return this.Fy}setMultipleSliceExplosion(t){return this.zy=t,this}getMultipleSliceExplosion(){return this.zy}setInnerRadius(t){return this.Yl=t,this.us.Ss(),this}getInnerRadius(){return this.Yl}setSliceExplosionOffset(t){return this.Vy=t,this.us.Ss(),this}getSliceExplosionOffset(){return this.Vy}setLUT(t){return this.Nd=t,this.us.Ss(),this}setSliceFillStyle(t){this.Py=t;for(let e=0;e<this.Fy.length;e+=1)this.Qy(this.Fy[e]);return this.us.Ss(),this}getSliceFillStyle(){return this.Py}setSliceStrokeStyle(t){this.Dy=typeof t=="function"?t(this.Dy):t;for(let e=0;e<this.Fy.length;e+=1)this.Qy(this.Fy[e]);return this.us.Ss(),this}getSliceStrokeStyle(){return this.Dy}setSliceEffect(t){return this.Oy=t,this.Fy.forEach(e=>e.es.ns.ps(t)),this.us.Ss(),this}getSliceEffect(){return this.Oy}setSliceSorter(t){return this.Iy=t,this.Fy=this.Fy.sort(this.Iy),this.us.Ss(),this}getSliceSorter(){return this.Iy}setLabelFillStyle(t){this.Ry=typeof t=="function"?t(this.Ry):t;for(let e=0;e<this.Fy.length;e+=1)this.Qy(this.Fy[e]);return this.us.Ss(),this}getLabelFillStyle(){return this.Ry}setLabelFont(t){this.Ly=typeof t=="function"?t(this.Ly):t;for(let e=0;e<this.Fy.length;e+=1)this.Qy(this.Fy[e]);return this.us.Ss(),this}getLabelFont(){return this.Ly}setLabelEffect(t){return this.Ny=t,this.Fy.forEach(e=>e.es.rs.ps(t)),this.us.Ss(),this}getLabelEffect(){return this.Ny}setLabelFormatter(t){return this.Jy=t,this.us.Ss(),this}getLabelFormatter(){return this.Jy}setSliceHighlightOnHover(t){return this.By=t,this.Fy.forEach(e=>e.setHighlightOnHover(t)),this}Te(t){super.Te(t),is.Fm(this._m,this.bm),super.pm();const e=is.Tm(this._m,this.bm),i=Y(this.pixelScale.x.getInnerInterval()-(this.ya.left+this.ya.right),this.pixelScale.y.getInnerInterval()-(this.ya.bottom+this.ya.top+e)),s=Y(this.ya.left+i.x/2,this.ya.bottom+i.y/2);if(this.Nd){const u=this.Nd;this.Fy.forEach(d=>{this.Qy(d,new it({color:u.getColors(d.getAnimatedValue())}))})}for(let u=0;u<this.Fy.length;u+=1){const d=this.Fy[u].getAnimatedValue()>0;this.Fy[u].ky.setVisible(d),this.Fy[u].Ue.setVisible(d)}this.Fy=this.Fy.sort(this.Iy);const n=this.Fy.filter(u=>u.getAnimatedValue()>0);let a=0;for(let u=0;u<n.length;u+=1)a+=n[u].getAnimatedValue();const o=[];for(let u=0;u<n.length;u+=1)o.push((l=n[u].getAnimatedValue())>0?l/a:0);var l;for(let u=0;u<n.length;u+=1){const d=n[u];d.Ue.Rh(this.Jy(d,o[u])).Ps()}hs.Im(this,!1,!1,this.Fy,void 0,(u,d)=>Is(d,this.engine.scale,this.Wy(new Ii,this,u,o[n.indexOf(u)]||0).Zu(),u,void 0)),this.Ky(n,o,s,i)}Qy(t,e=this.Py(t.index,t)){t.setStyle(e,this.Dy,this.Ry,this.Ly)}Yy(){this.Fy=this.Fy.sort(this.Iy),this.us.Ss()}Zd(){return this.Fy}dispose(){return super.dispose(),this.Fy.slice().forEach(t=>t.dispose()),this.Pm.dispose(),this.Xy.W(),this.Hy.W(),this.jy.W(),this}}const kr={UserSeries:{type:"ApplicationType",args:{type:"UserSeries"}},InternalUI:{type:"ApplicationType",args:{type:"InternalUI"}}},lf=(...r)=>{const t=[];return r.forEach(e=>{var i;e&&typeof(i=e)=="object"&&i&&"pattern"in i&&t.push({type:"DataPattern",args:e})}),t};class CR extends o3{constructor(t,e,i,s,n,a,o){super(t,e,i,s,n,a,o),this.Jy=jp.NamePlusValue,this.qy=[],this.tp=40,this.ip=5,this.sp=10,this.ep=this.qi.pieChartConnectorStrokeStyle,this.setPadding({bottom:50})}setLabelConnectorStyle(t){this.ep=t;for(let e=0;e<this.qy.length;e+=1)this.qy[e].Re(this.ep);return this.us.Ss(),this}getLabelConnectorStyle(){return this.ep}setLabelSliceOffset(t){return this.tp=t,this.us.Ss(),this}getLabelSliceOffset(){return this.tp}setLabelConnectorGapStart(t){return this.ip=t,this.us.Ss(),this}getLabelConnectorGapStart(){return this.ip}setLabelConnectorEndLength(t){return this.sp=t,this.us.Ss(),this}getLabelConnectorEndLength(){return this.sp}Ky(t,e,i,s){const n=this.Ly.getSize(),a=this.tp,o=this.sp,l=this.ip,u=Math.min(this.Vy,a-l);let d=0;if(t.length===1)d=t[0].Ue.jc().x;else for(let x=0;x<t.length;x+=1)d=Math.max(d,t[x].Ue.jc().x);const f=Math.max(.5*(Math.min(s.x-2*d-2*o,s.y-2*n)-2*a),0);h3(t,e,i,f,this.Yl,u);let y=90;const m=t.map((x,v)=>{const b=360*e[v],E=y-b,T=Dp(Ar(.5*(y+E))),V=T.x>=0?-1:1,F=zt(zt(i,Yt(T,f+a)),{x:V*-o,y:0});y=E;const B={x:V,y:0};x.Ue.Fe(F).Ea(B),x.Ue.Ps();const z=Je(x.Ue.We());return{position:F,alignment:B,shape:x.Ue,boundaries:z,sliceAngleVec:T,slice:x}}),S=[];for(let x=0;x<m.length;x+=1){const v=m[x],b=S[S.length-1];b&&BM([b.boundaries,v.boundaries])!==!1?v.shape.setVisible(!1):(S.push(v),v.shape.setVisible(!0))}for(let x=0;x<this.qy.length;x+=1)this.qy[x].setVisible(!1);S.forEach((x,v)=>{const b=x.slice.ky,E=a3(b,i,f+l+u*x.slice.getAnimatedExplosion()),T=kp(x.position.y,E,i),V=x.position;this.hp([E,T,V])})}getMinimumSize(){return Y(500,300)}hp(t){let e;for(let i=0;i<this.qy.length;i+=1)if(!this.qy[i].getVisible()){e=this.qy[i].setVisible(!0);break}e===void 0&&(e=this.Xy.rp(this.pixelScale,void 0,[kr.InternalUI]).Re(this.ep).setMouseInteractions(!1),this.qy.push(e)),e.Nt().nl(t)}}const Im=r=>{if(Ss(r)){const t=r.getThickness(),e=r.getFillStyle();if(ue(e))return t===1?Gv:new $M({size:t,fillStyle:e,shape:"sphere"})}return Gv};class ka{constructor(t,e,i,s){this.op=[],this.ap=new Map,this.lp=t,this.up=e,this.cp=i,this.dp=s}fp(){this.cp&&this.cp();const t=[];return{add:(e,i)=>{t.push({instanceUniqueProperties:e,instanceSharedProperties:i})},finishPlot:()=>{const e=[];let i=[];t.forEach(a=>{const o=e.find(l=>((u,d)=>{const f=Object.keys(u);for(const y of f)if(u[y]!==d[y])return!1;return!0})(l.sharedProperties,a.instanceSharedProperties));o?o.instances.push(a.instanceUniqueProperties):e.push({sharedProperties:a.instanceSharedProperties,instances:[a.instanceUniqueProperties]})});const s=this.op.slice(),n=[];e.forEach(a=>{let o=s.pop();o||(o=this.lp(),this.op.push(o));const l=[],u=o.Ap().slice();a.instances.forEach((f,y)=>{const m=u.shift();l.push({...f,existingMember:m})});const d=this.up(o,l,a.sharedProperties);i=ls(i,d,{canReturnB:!0});for(let f=0;f<a.instances.length;f+=1)n.push({No:a.instances[f].No,collection:o,member:d[f]});u.forEach(f=>{o==null||o.bd(f)})}),s.forEach(a=>{a.dispose();const o=this.op.indexOf(a);o<0?wn(0,()=>{}):this.op.splice(o,1)}),n.forEach(a=>{const o=this.ap.get(a.No);o&&a.collection.us.qn({entity:o.collection,collectionMember:o.member},{entity:a.collection,collectionMember:a.member})}),this.ap.clear(),n.forEach(a=>{this.ap.set(a.No,a)}),this.dp&&this.dp(this.op,i)}}}gp(){this.op.forEach(t=>{t.dispose()}),this.op.length=0}}class Gr{constructor(t){this.mp=[],this.yp=t}fp(){return this.pp(),{add:()=>this.sl(),finishPlot:()=>{this.Sp()}}}sl(){let t=this.mp.find(e=>e.isFree);return t||(t={isFree:!1,shape:this.yp()},this.mp.push(t)),t.isFree=!1,t.shape}pp(){this.mp.forEach(t=>{t.isFree=!0})}Sp(){this.mp.filter(t=>t.isFree).forEach(t=>{t.shape.dispose(),this.mp.splice(this.mp.indexOf(t),1)})}gp(){this.mp.forEach(t=>t.shape.dispose()),this.mp.length=0}}class l3{constructor(t,e,i,s,n,a,o,l,u,d){this.D=new Li,this.u=0,this.Xi=!0,this.$i=!1,this.Ss=t,this.vp=e,this.bp=i,this.xp=s,this.Mp=n,this._p=a,this.Dd=o,this.Jm=l,this.wp=u,this.Ju=d}setValue(t){return t===this.u||(this.u=t,this.Ss(),this.D.emit("valueChange",this,this.u)),this}getValue(){return this.u}setTickStyle(t){return this.bp=typeof t=="function"?t(this.bp):t,this.Ss(),this}getTickStyle(){return this.bp}setTickLength(t){return this.xp=t,this.Ss(),this}getTickLength(){return this.xp}setGridStrokeStyle(t){return this.Mp=typeof t=="function"?t(this.Mp):t,this.Ss(),this}getGridStrokeStyle(){return this.Mp}setTextPadding(t){return this._p=t,this.Ss(),this}getTextPadding(){return this._p}setTextRotation(t){return this.Dd=t,this.Ss(),this}getTextRotation(){return this.Dd}setTextFillStyle(t){return this.Jm=typeof t=="function"?t(this.Jm):t,this.Ss(),this}getTextFillStyle(){return this.Jm}setTextFont(t){return this.wp=typeof t=="function"?t(this.wp):t,this.Ss(),this}getTextFont(){return this.wp}setTextFormatter(t){return this.Ju=t,this.Ss(),this}onValueChange(t){return this.D.on("valueChange",t)}offValueChange(t){return this.D.off(t,"valueChange")}dispose(){return this.$i||(this.$i=!0,this.vp(),this.Ss(),this.D.emit("dispose",this)),this}isDisposed(){return this.$i}onDispose(t){return this.D.on("dispose",t)}offDispose(t){return this.D.off(t,"dispose")}setVisible(t){const e=this.Xi!==t;return this.Xi=t,e&&(this.D.emit("visibleStateChanged",this,this.Xi),this.Ss()),this}getVisible(){return this.Xi}onVisibleStateChanged(t){return this.D.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.D.off(t,"visibleStateChanged")}}class hm extends eo{constructor(t,e,i,s,n,a,o,l,u){super(t,e,i,s,l,{numeric:e.Cp({x:t.us.qi.xAxis3DNumericTicks,y:t.us.qi.yAxis3DNumericTicks,z:t.us.qi.zAxis3DNumericTicks}),datetime:e.Cp({x:t.us.qi.xAxis3DDateTimeTicks,y:t.us.qi.yAxis3DDateTimeTicks,z:t.us.qi.zAxis3DDateTimeTicks}),time:e.Cp({x:t.us.qi.xAxis3DTimeTicks,y:t.us.qi.yAxis3DTimeTicks,z:t.us.qi.zAxis3DTimeTicks})},{type:"linear"}),this.Tf=[],this.kp=()=>{},this.Tp=()=>{},this.Fp=()=>{},this.Ip=()=>{},this.chart=t,this.At=n,this.Pp=a,this.Dp=o,this.Bp=this.At.dt;const d=this.wh.Cp({x:this.qi.xAxis3DStrokeStyle,y:this.qi.yAxis3DStrokeStyle,z:this.qi.zAxis3DStrokeStyle});this.Lp=this.At.rp([kr.InternalUI]).Re(d).Rp(Im(d)).setMouseInteractions(!1),this.Lh=this.Pp.Pr(this.Dp).setMouseInteractions(!1).Ce(e.Cp({x:t.us.qi.xAxis3DTitleFillStyle,y:t.us.qi.yAxis3DTitleFillStyle,z:t.us.qi.zAxis3DTitleFillStyle})).Oh(e.Cp({x:t.us.qi.xAxis3DTitleFont,y:t.us.qi.yAxis3DTitleFont,z:t.us.qi.zAxis3DTitleFont})),this.Ep=new Gr(()=>this.Pp.Pr(this.Dp)),this.zp=new ka(()=>this.At.Lg().setMouseInteractions(!1),(f,y,m)=>(f.Nt().Re(m.lineStyle),y.map(({positions:S,existingMember:x})=>x||f.nl(S)))),this.es=u,this.Wh=this.es.yg([this.Lh]).ps(s.effectsText),this.Lp.setMouseEnterEventHandler(this.kp).setMouseLeaveEventHandler(this.Tp).setMouseDragEventHandler(this.Fp).setMouseDragStopEventHandler(this.Ip),i.ig=this}setTickStrategy(t,e){return super.Fh(t,e)}getTickStrategy(){return this.je}addCustomTick(){const t=new l3(()=>this.chart.us.Ss(),()=>{const e=this.Tf.indexOf(t);e>=0&&this.Tf.splice(e,1)},this.qi.xAxis3DNumericTicks.majorTickStyle.tickStyle,this.qi.xAxis3DNumericTicks.majorTickStyle.tickLength,this.qi.xAxis3DNumericTicks.majorTickStyle.gridStrokeStyle,this.qi.xAxis3DNumericTicks.majorTickStyle.tickPadding,this.qi.xAxis3DNumericTicks.majorTickStyle.labelRotation,this.qi.xAxis3DNumericTicks.majorTickStyle.labelFillStyle,this.qi.xAxis3DNumericTicks.majorTickStyle.labelFont,e=>this.formatValue(e));return this.Tf.push(t),this.chart.us.Ss(),t}setStrokeStyle(t){return this.Lp.Re(t).Rp(Im(this.Lp.uu())),this.chart.us.Ss(),this}getStrokeStyle(){return this.Lp.uu()}setMouseInteractions(t){return this}setVisible(t){return super.setVisible(t),this.Lp.setVisible(t),t===!1&&(this.zp.gp(),this.Ep.gp()),this.Pp.Ss(),this}_g(){return this.chart.getSeries()}Vp(t){return Math.abs(this.dt.tt(t)*this.At.Op(1))}Cr(t,e,i){const s=Math.abs(this.dt.tt(e-t)*this.At.Op(1));return{min:t-i*s,max:e+i*s}}ur(t,e){return new u3(e,t,this.Pp,this.Dp,this.At)}cr(t,e){const i=this.Np(e,t.u,t.Sh.lr.tickLength,t.Sh.lr.tickPadding);return t.Ue.Fe(i.labelPosition).Ea(i.labelAlignment),i}Np(t,e,i,s){const{wuSize:n,start:a,end:o,tickDirection3D:l,tickDirection2D:u}=t,d=(e-this.dt.getInnerStart())/(this.dt.getInnerEnd()-this.dt.getInnerStart()),f=ft.addVec(Zy(a,o,d),ft.multiplyVec(ft.multiply(l,this.At.Op(.5*this.Lp.uu().getThickness())),n)),y=ft.addVec(f,ft.multiplyVec(ft.multiply(l,this.At.Op(i)),n)),m=this.At.Gp(y)||Y(0,0);return{labelPosition:zt(gt(m,this.chart.engine.scale,this.Dp),Yt(u,s)),labelAlignment:{x:-u.x,y:-u.y},posTickEnd3D:y,posTickStart3D:f,tickPositionRelative:d}}Wp(t,e,i){const{wuSize:s,start:n,end:a,tickDirection3D:o}=e,l=(t-this.dt.getInnerStart())/(this.dt.getInnerEnd()-this.dt.getInnerStart()),u=ft.addVec(Zy(n,a,l),ft.multiplyVec(ft.multiply(o,this.At.Op(.5*this.Lp.uu().getThickness())),s)),d=ft.addVec(u,ft.multiplyVec(ft.multiply(o,this.At.Op(10)),s)),f=this.At.Gp(u)||Y(0,0),y=this.At.Gp(d)||Y(0,0);return this.Pp.Ee(this.Dp).Ve(f).ze(y).Re(new ie({fillStyle:new it({color:B5(120*i)}),thickness:1}))}_r(t,e){return c3(t,e,this.dt)}Te(t){if(!this.Xi)return;const e=Math.min(this.Ih,this.Ph),i=Math.max(this.Ih,this.Ph),s=this.Bp,n=Bt(s.x.et(),s.y.et(),s.z.et());let a,o;this.Yp()?(a=Bt(s.x.getInnerEnd(),s.y.getInnerStart(),s.z.getInnerStart()),o=Bt(s.x.getInnerEnd(),s.y.getInnerStart(),s.z.getInnerEnd())):(a=Bt(s.x.getInnerStart(),s.y.getInnerStart(),s.z.getInnerStart()),o=this.wh.Hp(Bt(s.x.getInnerEnd(),s.y.getInnerEnd(),s.z.getInnerEnd()),a));const l=this.wh.Jd,u=this.At.Gp(a)||Y(0,0),d=this.At.Gp(o)||Y(0,0),f=Zy(a,o,.5),y=ft.addVec(f,ft.multiplyVec(ft.multiply(l,-1),n)),m=this.At.Gp(f)||Y(0,0),S=this.At.Gp(y)||Y(0,0),x=Hs(pe(gt(m,this.chart.engine.scale,this.Dp),gt(S,this.chart.engine.scale,this.Dp)));this.Lp.Nt().nl([a,o]);const{gridlinePositionA:v,gridlinePositionB:b,gridlinePositionC:E}=this.wh.$p(t),T=U=>({x:U.x===-1?this.Bp.x.getInnerStart():U.x===1?this.Bp.x.getInnerEnd():0,y:U.y===-1?this.Bp.y.getInnerStart():U.y===1?this.Bp.y.getInnerEnd():0,z:U.z===-1?this.Bp.z.getInnerStart():U.z===1?this.Bp.z.getInnerEnd():0}),V=T(v),F=T(b),B=T(E),z={physicalAxisSize:Ca(pe(u,d)),wuSize:n,start:a,end:o,tickDirection3D:l,tickDirection2D:x,gridlinePositionA:V,gridlinePositionB:F,gridlinePositionC:B},L=this.qh(z),A=this.zp.fp();for(const[U,O]of this.Ze)for(const[,W]of O){const P=L.get(W);if(!P)continue;const H=this.Xp(z,P);A.add({No:0,positions:[H.tickStroke.start,H.tickStroke.end]},{lineStyle:U.lr.tickStyle}),H.gridStroke&&A.add({No:0,positions:H.gridStroke},{lineStyle:U.lr.gridStrokeStyle})}const R=this.Ep.fp(),w={x:0,y:0};this.Tf.forEach(U=>{if(!U.Xi||U.u<e||U.u>i)return;const O=this.Np(z,U.u,U.xp,U._p),W=this.Xp(z,O),P=R.add().Fe(O.labelPosition).Ea(O.labelAlignment).Ce(U.Jm).Oh(U.wp).Rh(U.Ju(U.u)).Nh(U.Dd).Ps().oi();w.x=Math.max(w.x,P.x),w.y=Math.max(w.y,P.y),A.add({No:0,positions:[W.tickStroke.start,W.tickStroke.end]},{lineStyle:U.bp}),W.gridStroke&&A.add({No:0,positions:W.gridStroke},{lineStyle:U.Mp})}),R.finishPlot(),A.finishPlot();const C=this.gr((U,O)=>{const W=O.Ue.oi();return U.x=Math.max(U.x,W.x),U.y=Math.max(U.y,W.y),U},{x:w.x,y:w.y}),k=Math.atan((d.y-u.y)/(d.x-u.x));this.Lh.Ea({x:0,y:0}).Nh(180*-k/Math.PI);const _=ft.addVec(f,ft.multiplyVec(ft.multiply(l,this.At.Op(.5*this.Lp.uu().getThickness()+this.yr((U,O)=>Math.max(U,O.tickLength),0))),n)),X=this.At.Gp(_)||Y(0,0),N=zt(gt(X,this.chart.engine.scale,this.Dp),zt(zt(Xs(C,x),Yt(x,this.yr((U,O)=>Math.max(U,O.labelPadding),0))),Xs(Yt(this.Lh.Ps().oi(),.5),x)));this.Lh.Fe(N),this.Lp.jp={overrideFollowing:!1,skipMousePicking:!1}}Xp(t,e){const{gridlinePositionA:i,gridlinePositionB:s,gridlinePositionC:n}=t,a=e.posTickStart3D,o=e.posTickEnd3D,l=e.tickPositionRelative;let u;return xi(l,0)||xi(l,1)||(u=[this.Zp()?{...i,x:a.x}:this.Qp()?{...i,y:a.y}:this.Yp()?{...i,z:a.z}:{x:0,y:0,z:0},this.Zp()?{...s,x:a.x}:this.Qp()?{...s,y:a.y}:this.Yp()?{...s,z:a.z}:{x:0,y:0,z:0},this.Zp()?{...n,x:a.x}:this.Qp()?{...n,y:a.y}:this.Yp()?{...n,z:a.z}:{x:0,y:0,z:0}]),{gridStroke:u,tickStroke:{start:a,end:o}}}Uh(){super.Uh(),this.zp.gp(),this.Ep.gp()}Zp(){return this.wh.Zp()}Qp(){return this.wh.Qp()}Yp(){return this.wh.Yp()}}class u3 extends Cc{constructor(t,e,i,s,n,a){super(t,e,i,s,a),this.Jp=n}}const c3=(r,t,e)=>Jt(r+.1*(t-r)+Math.abs(e.et())/100*Math.sign(t-r),Math.min(r,t),Math.max(r,t)),Ol=(r,t,e,i)=>({pr:()=>{const s=r();let n;for(const a of s){if(!a.Kp())continue;const o=t(a);n=o===void 0?n:n!==void 0?Math.min(n,o):o}return n},Sr:()=>{const s=r();let n;for(const a of s){if(!a.Kp())continue;const o=e(a);n=o===void 0?n:n!==void 0?Math.max(n,o):o}return n},br:()=>{const s=r();let n;for(const a of s){if(!a.Kp())continue;const o=i(a);n=o===void 0?n:n!==void 0?Math.max(n,o):o}return n}}),d3=r=>({...Ol(r,t=>t.getYMin(),t=>t.getYMax(),t=>t.br().y),Cp:t=>t.y,Hp:(t,e)=>({x:e.x,y:t.y,z:e.z}),Jd:Bt(-1,0,0),$p:t=>{const e={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:Bt(e.x,0,e.z),gridlinePositionB:Bt(e.x,0,-e.z),gridlinePositionC:Bt(-e.x,0,-e.z)}},Zp:()=>!1,Qp:()=>!0,Yp:()=>!1}),f3=r=>({...Ol(r,t=>t.getZMin(),t=>t.getZMax(),t=>t.br().z),Cp:t=>t.z,Hp:(t,e)=>({x:e.x,y:e.y,z:t.z}),Jd:Bt(1,0,0),$p:t=>{const e={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:Bt(e.x,-e.y,0),gridlinePositionB:Bt(e.x,e.y,0),gridlinePositionC:Bt(-e.x,e.y,0)}},Zp:()=>!1,Qp:()=>!1,Yp:()=>!0});class Gl extends wc{constructor(t,e,i,s,n){super(t,e,s,n),this.qp=Pl,this.tS=!0,this.iS=!0,this.Ji=t,this.At=i,this.ts=new Map,this.onMouseWheel(this.Ji.sS),this.onMouseDrag(this.Ji.eS),this.onTouchStart(this.Ji.hS.onTouchStart),this.onTouchMove(this.Ji.hS.onTouchMove),this.onTouchEnd(this.Ji.hS.onTouchEnd)}setAutoScrollingEnabled(t){return this.tS=t,this.Ji.us.Ss(),this}getAutoScrollingEnabled(){return this.tS}setColorShadingStyle(t){return this.qp=t,this.ts.forEach((e,i)=>i.rS(t)),this.At.Ss(),this}getColorShadingStyle(){return this.qp}setDepthTestEnabled(t){return this.iS=t,this.ts.forEach((e,i)=>i.nS(t)),this.At.Ss(),this}getDepthTestEnabled(){return this.iS}oS(){}Te(){}dp(){}getXMax(){const t=this.Na;return t?t.bt():void 0}getXMin(){const t=this.Na;return t?t.vt():void 0}getYMax(){const t=this.Na;return t?t.Mt():void 0}getYMin(){const t=this.Na;return t?t.xt():void 0}getZMax(){const t=this.Na;return t?t.aS():void 0}getZMin(){const t=this.Na;return t?t.lS():void 0}br(){const t=this.Na;return t?Bt(t.vl(),t.bl(),t.uS()):Bt(0,0,0)}}class g3 extends Gl{constructor(t,e,i,s,n,a){super(t,e,i,s,a),this.xs="Box Series 3D",this.cS=.25,this.dS=!1,this.Gd=()=>ji(this.be),this.be=Kt(this.qi.boxSeries3DFillStyle,n),this.Na=this.At.AS().nS(this.iS).Ce(this.be).fS(this.cS).cs(this.getHighlight()),this.ds(this.Na)}invalidateData(t){const e=t.length;if(e===0)return this;this.dS&&this.Ji.us.Nn(wt.vf);const i=t[0];if(!i)return this;let s;if("xMin"in i||"yMin"in i||"zMin"in i||"xMax"in i||"yMax"in i||"zMax"in i){s=[];for(let n=0;n<e;n+=1){const a=t[n],o="xMin"in a&&"xMax"in a,l="yMin"in a&&"yMax"in a,u="zMin"in a&&"zMax"in a;s[n]={color:a.color,value:a.value,id:a.id,xCenter:o?(a.xMin+a.xMax)/2:void 0,yCenter:l?(a.yMin+a.yMax)/2:void 0,zCenter:u?(a.zMin+a.zMax)/2:void 0,xSize:o?a.xMax-a.xMin:void 0,ySize:l?a.yMax-a.yMin:void 0,zSize:u?a.zMax-a.zMin:void 0}}}else s=t;return this.Na.gS(s.slice()),this.Ji.us.Ss(),this.dS=!0,this}setFillStyle(t){return this.be=typeof t=="function"?t(this.be):t,this.Na.Ce(t),this.Ji.us.Ss(),this}getFillStyle(){return this.be}setRoundedEdges(t){return t!==void 0&&isNaN(t)&&(console.error("'BoxSeries3D.setRoundedEdges | NaN was supplied.'"),t=void 0),this.cS=t!==void 0?Jt(t,0,1):void 0,this.Na.fS(this.cS),this.At.Ss(),this}getRoundedEdges(){return this.cS}Kp(){return this.tS&&this.getVisible()}Ie(t,e){t.cs(e),this.Ji.us.Ss()}Te(){super.Te(),this.Na.Ps(!1)}attach(t,e=!0,i=!1){return super.attach(t,e,i),ei(t,this.qi,i,{fill:this.be}),this}}class kR extends Gl{constructor(t,e,i,s,n){super(t,e,i,s,n),this.dS=!1,this.Gd=()=>ji(this.lu.getFillStyle())}setStrokeStyle(t){this.lu=typeof t=="function"?t(this.lu):t;const e=this.lu;return this.Na.Re(e),this.At.Ss(),this}getStrokeStyle(){return this.lu}add(t){return this.dS&&this.Ji.us.Nn(wt.vf),this.dS=!0,(t=Array.isArray(t)?t:[t])?(this.Na.nl(t.slice()),this.At.Ss(),this):this}clear(){return this.Na.Nt(),this}getPointAmount(){const t=this.Na;return t.ol()+t.al()}Kp(){return this.tS&&this.getPointAmount()>0&&this.getVisible()}Ie(t,e){t.cs(e),this.At.Ss()}attach(t,e=!0,i=!1){return super.attach(t,e,i),ei(t,this.qi,i,{stroke:this.lu}),this}}class y3 extends kR{constructor(t,e,i,s,n,a){super(t,e,i,s,a),this.xs="Line Series 3D",this.lu=Kt(s.lineSeries3DStrokeStyle,n),this.mS=As.pointStyle3D,this.yS(this.lu),this.Na=this.At.rp([kr.UserSeries]).nS(this.iS).Re(this.lu).Rp(this.mS).cs(this.getHighlight()),this.ds(this.Na)}setStrokeStyle(t){super.setStrokeStyle(t),this.yS(this.lu);const e=this.mS;return this.Na.Rp(e),this}yS(t){const e=new Bf.Triangulated({shape:"sphere",fillStyle:t.getFillStyle(),size:t.getThickness()});this.mS=e}}class m3 extends kR{constructor(t,e,i,s,n,a){super(t,e,i,s,a),this.xs="Point Line Series 3D",this.Gd=()=>ji(this.lu.getFillStyle())||ji(this.mS.getFillStyle()),this.mS=Kt(s.pointLineSeries3DPointStyle,n),this.lu=Kt(s.lineSeries3DStrokeStyle,n),this.pS(),this.Na=this.At.rp([kr.UserSeries]).nS(this.iS).Re(this.lu).Rp(this.mS).cs(this.getHighlight()),this.ds(this.Na)}setPointStyle(t){return this.mS=typeof t=="function"?t(this.mS):t,this.pS(),this.Na.Rp(this.mS),this.At.Ss(),this}getPointStyle(){return this.mS}setStrokeStyle(t){super.setStrokeStyle(t);const e=this.lu,i=Math.abs(e.getThickness()),s=this.mS,n=s.getSize();i>(typeof n=="object"?Math.max(n.x,n.y,n.z):n)&&(this.mS=s.setSize(i)),this.pS();const a=this.mS;return this.Na.Rp(a),this.At.Ss(),this}pS(){const t=this.mS,e=t.getSize();this.mS=t.setSize(e)}Ie(t,e){t.cs(e),this.At.Ss()}}class p3 extends Gl{constructor(t,e,i,s,n,a){super(t,e,i,s,n),this.dS=!1,(a!=null&&a.individualPointSizeAxisEnabled||a!=null&&a.individualPointSizeEnabled)&&this.Ji.us.Nn(wt.bf)}add(t){return this.dS&&this.Ji.us.Nn(wt.vf),this.dS=!0,(t=Array.isArray(t)?t:[t])?(this.Na.nl(t.slice()),this.At.Ss(),this):this}clear(){return this.Na.Nt(),this}getPointAmount(){const t=this.Na;return t.ol()+t.al()}Kp(){return this.tS&&this.getPointAmount()>0&&this.getVisible()}Ie(t,e){t.cs(e),this.At.Ss()}attach(t,e=!0,i=!1){return super.attach(t,e,i),ei(t,this.qi,i,{point3D:this.SS}),this}}class S3 extends p3{constructor(t,e,i,s,n,a){super(t,e,i,s,n,a),this.xs="Point Series 3D",this.Gd=()=>ji(this.SS.getFillStyle());const o=(a==null?void 0:a.automaticColorIndex)!==void 0?a.automaticColorIndex:this.Ji.getSeries().length;this.SS=Kt(s.pointSeries3DPointStyle,o);const l={individualPointColorEnabled:!1,individualPointSizeEnabled:!1,individualLookupValuesEnabled:!1,individualPointSizeAxisEnabled:!1,...a};this.Na=this.At.bS(l).nS(this.iS).vS(this.SS).cs(this.getHighlight()),this.ds(this.Na)}setPointStyle(t){this.SS=typeof t=="function"?t(this.SS):t;const e=this.SS;return this.Na.vS(e),this.At.Ss(),this}getPointStyle(){return this.SS}}class zc extends Jr{constructor(t,e,i,s,n,a,o,l,u,d){super(t,e,i,s,n,a,o,l,u,d),this.xS=[],this.MS=0,this._S=f=>{const y=this.xS.indexOf(f);y>=0&&(this.xS.splice(y,1),this.D.emit("seriesDispose",this,f))},this.wS=()=>{this.MS+=1},this.CS=()=>{this.MS-=1},this.onSeriesBackgroundMouseEnter=f=>this.D.on("mouseEnterSeriesBackground",f),this.onSeriesBackgroundMouseLeave=f=>this.D.on("mouseLeaveSeriesBackground",f),this.onSeriesBackgroundMouseMove=f=>this.D.on("mouseMoveSeriesBackground",f),this.onSeriesBackgroundMouseDown=f=>this.D.on("mouseDownSeriesBackground",f),this.onSeriesBackgroundMouseUp=f=>this.D.on("mouseUpSeriesBackground",f),this.onSeriesBackgroundMouseClick=f=>this.D.on("mouseClickSeriesBackground",f),this.onSeriesBackgroundMouseDoubleClick=f=>this.D.on("mouseDoubleClickSeriesBackground",f),this.onSeriesBackgroundMouseDragStart=f=>this.D.on("mouseDragStartSeriesBackground",f),this.onSeriesBackgroundMouseDrag=f=>this.D.on("mouseDragSeriesBackground",f),this.onSeriesBackgroundMouseDragStop=f=>this.D.on("mouseDragStopSeriesBackground",f),this.onSeriesBackgroundMouseWheel=f=>this.D.on("mouseWheelSeriesBackground",f),this.onSeriesBackgroundTouchStart=f=>this.D.on("touchStartSeriesBackground",f),this.onSeriesBackgroundTouchMove=f=>this.D.on("touchMoveSeriesBackground",f),this.onSeriesBackgroundTouchEnd=f=>this.D.on("touchEndSeriesBackground",f),this.offSeriesBackgroundMouseEnter=f=>this.D.off(f,"mouseEnterSeriesBackground"),this.offSeriesBackgroundMouseLeave=f=>this.D.off(f,"mouseLeaveSeriesBackground"),this.offSeriesBackgroundMouseMove=f=>this.D.off(f,"mouseMoveSeriesBackground"),this.offSeriesBackgroundMouseDown=f=>this.D.off(f,"mouseDownSeriesBackground"),this.offSeriesBackgroundMouseUp=f=>this.D.off(f,"mouseUpSeriesBackground"),this.offSeriesBackgroundMouseClick=f=>this.D.off(f,"mouseClickSeriesBackground"),this.offSeriesBackgroundMouseDoubleClick=f=>this.D.off(f,"mouseDoubleClickSeriesBackground"),this.offSeriesBackgroundMouseDragStart=f=>this.D.off(f,"mouseDragStartSeriesBackground"),this.offSeriesBackgroundMouseDrag=f=>this.D.off(f,"mouseDragSeriesBackground"),this.offSeriesBackgroundMouseDragStop=f=>this.D.off(f,"mouseDragStopSeriesBackground"),this.offSeriesBackgroundMouseWheel=f=>this.D.off(f,"mouseWheelSeriesBackground"),this.offSeriesBackgroundTouchStart=f=>this.D.off(f,"touchStartSeriesBackground"),this.offSeriesBackgroundTouchMove=f=>this.D.off(f,"touchMoveSeriesBackground"),this.offSeriesBackgroundTouchEnd=f=>this.D.off(f,"touchEndSeriesBackground"),this.kS=this.es.yg()}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.xS.forEach(e=>e.setAnimationHighlight(t)),this}TS(t,e){this.kS.fs([e]),t.setMouseMoveEventHandler((i,s)=>{this.D.emit("mouseMoveSeriesBackground",this,s)}).setMouseEnterEventHandler((i,s)=>{this.D.emit("mouseEnterSeriesBackground",this,s)}).setMouseLeaveEventHandler((i,s)=>{this.D.emit("mouseLeaveSeriesBackground",this,s)}).setMouseDownEventHandler((i,s)=>this.D.emit("mouseDownSeriesBackground",this,s)).setMouseUpEventHandler((i,s)=>this.D.emit("mouseUpSeriesBackground",this,s)).setMouseClickEventHandler((i,s)=>this.D.emit("mouseClickSeriesBackground",this,s)).setMouseDoubleClickEventHandler((i,s)=>this.D.emit("mouseDoubleClickSeriesBackground",this,s)).setMouseWheelEventHandler((i,s)=>this.D.emit("mouseWheelSeriesBackground",this,s)).setMouseDragStartEventHandler((i,s,n)=>this.D.emit("mouseDragStartSeriesBackground",this,s,n)).setMouseDragEventHandler((i,s,n,a,o)=>this.D.emit("mouseDragSeriesBackground",this,s,n,a,o)).setMouseDragStopEventHandler((i,s,n,a)=>this.D.emit("mouseDragStopSeriesBackground",this,s,n,a)).setTouchStartEventHandler((i,s)=>{this.D.emit("touchStartSeriesBackground",this,s)}).setTouchMoveEventHandler((i,s)=>{this.D.emit("touchMoveSeriesBackground",this,s)}).setTouchEndEventHandler((i,s)=>{this.D.emit("touchEndSeriesBackground",this,s)})}setSeriesBackgroundFillStyle(t){return this.FS.Ce(t),this.us.Ss(),this}getSeriesBackgroundFillStyle(){return this.FS.Eh()}setSeriesBackgroundStrokeStyle(t){return this.IS.we(t),this.us.Ss(),this}getSeriesBackgroundStrokeStyle(){return this.IS.ao()}setSeriesBackgroundEffect(t){return this.kS.ps(t),this.us.Ss(),this}getSeriesBackgroundEffect(){return this.kS.vs()}PS(t){this.xS.push(t),t.onMouseEnter(this.wS),t.onMouseLeave(this.CS),this.DS!==void 0&&t.setHighlightOnHover(this.DS),this.D.emit("seriesAdded",this,t)}Zd(){return this.xS}BS(){return this.MS}setSeriesHighlightOnHover(t){return this.DS=t,this.xS.forEach(e=>e.setHighlightOnHover(t)),this}dispose(){return this.xS.slice().forEach(Qh),super.dispose()}LS(t){return this.D.on("seriesAdded",t)}RS(t){return this.D.off(t)}ES(t){return this.D.on("seriesDispose",t)}zS(t){return this.D.off(t)}}const rb=ft.normalize({x:-.5610788649579117,y:-.35242840511865414,z:-1.1349149375849081});class x3{constructor(t,e,i,s){this.VS=!0,this.OS=!0,this.NS=2*-Math.PI/2160,this.GS=2*Math.PI/2160,this.WS=.1,this.US=1*Math.PI/180,this.YS=t,this.HS=e,this.$S=i,this.Gp=s}getDefaultCameraConfiguration(t){const e={direction:rb,location:ft.multiply(rb,-1)};return this.cameraLocationChanged({boundingBox:t,cameraDirection:e.direction,cameraLocation:e.location})||e}applyCameraInteractions(t,e){let i={direction:t.cameraDirection,location:t.cameraLocation};return e.forEach(s=>{s.type==="rotate"?i=this.XS(i,s):s.type==="wheel-zoom"?i=this.jS(i,s):s.type==="rotate+zoom"?i=this.ZS(i,s):s.type==="fixed-rotate"?i=this.QS(i,s):s.type==="move"&&(i=this.JS(i,s))}),this.VS?i=this.KS(t.boundingBox,i):this.OS&&(i=this.qS(t.boundingBox,i)),i}XS(t,e){const{rotation:i}=e,s=t.location,n=ft.multiply(ft.normalize(t.location),-1),{Right:a,Up:o}=this.tv(n);let l=s;const u=this.sv(n),d=i.x*this.NS*u;l=ft.rotateAroundAxis(l,o,d);const f=(i.y>0?1:-1)*Math.min(Math.abs(i.y)*this.GS,u-this.US);return f!==0&&(l=ft.rotateAroundAxis(l,a,f)),{location:l,direction:ft.multiply(ft.normalize(l),-1)}}jS(t,e){const{deltaY:i}=e;this.VS&&this.ev(!1);const s=t.location,n=ft.multiply(ft.normalize(s),-1),a=i*this.WS,o=ft.length(s)*-a;return{direction:n,location:ft.addVec(s,ft.multiply(n,o))}}ZS(t,e){const{rotation:i,cameraDistance:s}=e;this.VS&&this.ev(!1);let n=this.XS(t,{type:"rotate",rotation:i});const a=n.location,o=ft.multiply(ft.normalize(a),-1),l=ft.multiply(o,-s);return n={direction:ft.multiply(ft.normalize(l),-1),location:l},n}QS(t,e){this.VS&&this.ev(!1);const{rotation:i}=e,s=t.location,n=t.direction,{Right:a,Up:o}=this.tv(n),l=i.x*this.NS;let u=ft.normalize(ft.rotateAroundAxis(n,o,l));const d=i.y*this.GS;return u=ft.normalize(ft.rotateAroundAxis(u,a,d)),{location:s,direction:u}}JS(t,e){this.VS&&this.ev(!1),this.OS=!1;const{amountRight:i,amountForward:s}=e,n=t.location,a=t.direction,{Right:o}=this.tv(a);return{location:ft.addVec(n,ft.multiply(a,.01*s),ft.multiply(o,.01*i)),direction:a}}boundingBoxChanged(t){const e={location:t.cameraLocation,direction:ft.multiply(ft.normalize(t.cameraLocation),-1)};return this.VS?this.KS(t.boundingBox,e):this.qS(t.boundingBox,e)}cameraLocationChanged(t){const e={location:t.cameraLocation,direction:ft.multiply(ft.normalize(t.cameraLocation),-1)};return this.VS?this.KS(t.boundingBox,e):this.qS(t.boundingBox,e)}viewportChanged(t){const e={location:t.cameraLocation,direction:ft.multiply(ft.normalize(t.cameraLocation),-1)};if(this.VS)return this.KS(t.boundingBox,e)}KS(t,e,i){let s=e;i=i!==void 0?i:0,s=this.hv(t,s,100,20,1,i,5);const n=this.sv(s.direction);return s=this.rv(s,this.nv(t,s,100,1),n),s}hv(t,e,i,s,n,a,o){return A3(a,o,l=>({direction:e.direction,location:ft.multiply(e.direction,-l)}),l=>this.ov(t,l),i,n,"linear",s)}nv(t,e,i,s){const{Right:n,Left:a,Up:o,Down:l}=this.tv(e.direction),u=this.av(t,!1,e);let d=e;const f=s,y=.1;return Math.abs(u.bottom-u.top)>f&&(d=u.bottom<u.top?uf(0,y,m=>({location:d.location,direction:ft.normalize(ft.lerp(d.direction,l,m))}),m=>this.lv(t,m),0,f,!0,i):uf(0,y,m=>({location:d.location,direction:ft.normalize(ft.lerp(d.direction,o,m))}),m=>this.lv(t,m),0,f,!0,i)),Math.abs(u.left-u.right)>f&&(d=u.left<u.right?uf(0,y,m=>({location:d.location,direction:ft.normalize(ft.lerp(d.direction,a,m))}),m=>this.uv(t,m),0,f,!0,i):uf(0,y,m=>({location:d.location,direction:ft.normalize(ft.lerp(d.direction,n,m))}),m=>this.uv(t,m),0,f,!0,i)),d}ov(t,e){const i=this.av(t,!0,e);return Math.min(i.left+i.right,i.top+i.bottom)}uv(t,e){const i=this.av(t,!1,e);return Math.abs(i.left-i.right)}lv(t,e){const i=this.av(t,!1,e);return Math.abs(i.top-i.bottom)}av(t,e,i){const s=Je(this.cv(t,e,i).map(n=>gt(n,this.YS,this.HS)));return{left:s.min.x,right:this.HS.x.getInnerEnd()-s.max.x,top:this.HS.y.getInnerEnd()-s.max.y,bottom:s.min.y}}cv(t,e,i){const s=this.$S,n=Bt(s.x.getInnerStart(),s.y.getInnerStart(),s.z.getInnerStart()),a=Bt(s.x.getInnerEnd(),s.y.getInnerEnd(),s.z.getInnerEnd()),o=[],l=e?16:4,u=(n.x+a.x)/2,d=(n.z+a.z)/2,f=Math.sqrt(2)*(a.x-u),y=Math.sqrt(2)*(a.z-d);return[n.y,a.y].forEach(m=>{for(let S=0;S<l;S+=1){const x=Math.PI/4+2*Math.PI*S/l,v=u+Math.cos(x)*f,b=d+Math.sin(x)*y;o.push({x:v,y:m,z:b})}}),o.map(m=>this.Gp(m,i)).filter(m=>m!==void 0)}qS(t,e){const i=ft.length(e.location),s=this.dv(t);return i<s?{direction:e.direction,location:ft.multiply(e.direction,-s)}:e}dv(t){return .8*Math.sqrt(t.x**2+t.y**2+t.z**2)}tv(t){const e=Bt(0,1,0),i=ft.normalize(ft.cross(e,ft.multiply(t,-1)));let s=ft.cross(i,t);return s.y=Math.abs(s.y),s=ft.normalize(s),{Right:i,Up:s,Down:ft.multiply(s,-1),Left:ft.multiply(i,-1)}}sv(t){const e={x:0,y:1,z:0},i=ft.angle(t,e),s=ft.angle(t,ft.multiply(e,-1));return Math.min(i,s)}rv(t,e,i){return{location:ft.lerp(t.location,e.location,i),direction:ft.normalize(ft.lerp(t.direction,e.direction,i))}}ev(t){return this.VS=t,this}fv(){return this.VS}}const A3=(r,t,e,i,s,n,a,o)=>{let l,u=0,d=(t+r)/2;do{const f=e(d);if(l={value:d,result:f,score:i(f)},Math.abs(l.score-s)<=n)break;const y=l.score>s;y&&a==="linear"||!y&&a==="reversed"?(d=(l.value+r)/2,t=l.value):(d=(l.value+t)/2,r=l.value),u+=1}while(u<o);return l.result},uf=(r,t,e,i,s,n,a,o)=>{let l,u=0,d=r;do{const f=e(d),y=i(f);if(l===void 0||Math.abs(y-s)<Math.abs(l.score-s)){if(l={value:d,result:f,score:i(f)},Math.abs(l.score-s)<=n)break}else break;u+=1,d+=1/(o-1)*(t-r)}while(u<o);return l.result};class v3 extends Gl{constructor(t,e,i,s,n,a){super(t,e,i,n,a),this.xs="Surface Grid Series 3D",this.Av={},this.dS=!1,this.Gd=()=>ji(this.be),this.qp=Il;const o=(s==null?void 0:s.automaticColorIndex)!==void 0?s.automaticColorIndex:this.Ji.getSeries().length;this.be=Kt(this.qi.surfaceGridSeries3DFillStyle,o),this.gv=Kt(this.qi.surfaceGridSeries3DWireframeStyle,o);const l={heatmapDataType:"intensity",dataOrder:s.dataOrder||"columns",columns:s.columns,rows:s.rows};this.Un=l,this.Na=this.At.yv(l).Ce(this.be).mv(this.gv).rS(this.qp).cs(this.getHighlight()),this.ds(this.Na),s.start&&this.setStart(s.start),s.end&&this.setEnd(s.end),s.step&&this.setStep(s.step)}pv(){const t=this.Av.start||{x:0,z:0};let e;e=this.Av.end?{x:(this.Av.end.x-t.x)/this.Un.columns,z:(this.Av.end.z-t.z)/this.Un.rows}:this.Av.step?this.Av.step:{x:1,z:1},this.Na.Sv(t,e),this.Ji.us.Ss()}setStart(t){return this.Av.start=t,this.pv(),this}getStart(){return this.Na.vv().start}setStep(t){return this.Av.step=t,this.pv(),this}getStep(){return this.Na.vv().step}setEnd(t){return this.Av.end=t,this.pv(),this}getEnd(){return this.Na.vv().end}setFillStyle(t){return this.be=typeof t=="function"?t(this.be):t,this.Na.Ce(this.be),this.At.Ss(),this}getFillStyle(){return this.be}setWireframeStyle(t){return this.gv=typeof t=="function"?t(this.gv):t,this.Na.mv(this.gv),this.At.Ss(),this}getWireframeStyle(){return this.Na.bv()}setIntensityInterpolation(t){return t=t||"disabled",this.Na.xv(t),this.At.Ss(),this}getIntensityInterpolation(){return this.Na.Mv()}invalidateIntensityValues(t){if(this.dS&&this.Ji.us.Nn(wt.vf),Array.isArray(t)){if(t.length===0||t[0].length===0)return this;const e={x:t.length,y:t[0].length,columns:this.Un.dataOrder==="columns"?t.length:t[0].length,rows:this.Un.dataOrder==="rows"?t.length:t[0].length},i=this.Un.dataOrder==="columns"?this.Un.columns:this.Un.rows,s=this.Un.dataOrder==="columns"?this.Un.rows:this.Un.columns;if(e.x>i||e.y>s){if(this.Ji.cA.Hn===!0){const a=`SurfaceGridSeries3D.invalidateIntensityValues intensity matrix overflow.
    Grid ${this.Un.columns}x${this.Un.rows}, input ${e.columns}x${e.rows}.
    Excess data will be automatically clipped. This can result in sub-optimal performance.`;nt.console.warn(a)}const n=[];for(let a=0;a<i;a+=1)n[a]=t[a].slice(0,s);t=n}this.Na._v({type:"intensity",lengthPrimary:t.length,lengthSecondary:t[0].length,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(t.values.length===0||t.values[0].length===0)return this;const e={primary:t.values.length,secondary:t.values[0].length,columns:this.Un.dataOrder==="columns"?t.values.length:t.values[0].length,rows:this.Un.dataOrder==="rows"?t.values.length:t.values[0].length};let i=this.Un.dataOrder==="columns"?t.iColumn:t.iRow;const s=i+e.primary-1;let n=this.Un.dataOrder==="columns"?t.iRow:t.iColumn;const a=n+e.secondary-1,o=(this.Un.dataOrder==="columns"?this.Un.columns:this.Un.rows)-1,l=(this.Un.dataOrder==="columns"?this.Un.rows:this.Un.columns)-1;if(i<0||n<0||s>o||a>l){if(this.Ji.cA.Hn===!0){const x=`SurfaceGridSeries3D.invalidateIntensityValues intensity matrix overflow.
    Grid ${this.Un.columns}x${this.Un.rows}, input ${e.columns}x${e.rows} starting at [${t.iColumn},${t.iRow}].
    Out of bounds data will be automatically clipped. This can result in sub-optimal performance.`;nt.console.warn(x)}const u=Math.max(-i,0),d=Math.max(-n,0),f=Math.max(s-o,0),y=Math.max(a-l,0),m=e.primary-(u+f),S=[];if(d===0&&y===0)for(let x=0;x<m;x+=1)S[x]=t.values[u+x];else for(let x=0;x<m;x+=1)S[x]=t.values[u+x].slice(d,y===0?void 0:-y);if(S.length===0||S[0].length===0)return this;t={iColumn:t.iColumn,iRow:t.iRow,values:S},i=Math.max(i,0),n=Math.max(n,0)}this.Na._v({type:"intensity",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:i,startSecondary:n,values:t.values})}return this.At.Ss(),this.dS=!0,this}invalidateHeightMap(t){if(this.dS&&this.Ji.us.Nn(wt.vf),Array.isArray(t)){if(t.length===0||t[0].length===0)return this;const e={x:t.length,y:t[0].length,columns:this.Un.dataOrder==="columns"?t.length:t[0].length,rows:this.Un.dataOrder==="rows"?t.length:t[0].length},i=this.Un.dataOrder==="columns"?this.Un.columns:this.Un.rows,s=this.Un.dataOrder==="columns"?this.Un.rows:this.Un.columns;if(e.x>i||e.y>s){if(this.Ji.cA.Hn===!0){const a=`SurfaceGridSeries3D.invalidateHeightMap height matrix overflow.
    Grid ${this.Un.columns}x${this.Un.rows}, input ${e.columns}x${e.rows}.
    Excess data will be automatically clipped. This can result in sub-optimal performance.`;nt.console.warn(a)}const n=[];for(let a=0;a<i;a+=1)n[a]=t[a].slice(0,s);t=n}this.Na.wv({type:"y",lengthPrimary:t.length,lengthSecondary:t[0].length,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(t.values.length===0||t.values[0].length===0)return this;const e={primary:t.values.length,secondary:t.values[0].length,columns:this.Un.dataOrder==="columns"?t.values.length:t.values[0].length,rows:this.Un.dataOrder==="rows"?t.values.length:t.values[0].length};let i=this.Un.dataOrder==="columns"?t.iColumn:t.iRow;const s=i+e.primary-1;let n=this.Un.dataOrder==="columns"?t.iRow:t.iColumn;const a=n+e.secondary-1,o=(this.Un.dataOrder==="columns"?this.Un.columns:this.Un.rows)-1,l=(this.Un.dataOrder==="columns"?this.Un.rows:this.Un.columns)-1;if(i<0||n<0||s>o||a>l){if(this.Ji.cA.Hn===!0){const x=`SurfaceGridSeries3D.invalidateHeightMap height matrix overflow.
    Grid ${this.Un.columns}x${this.Un.rows}, input ${e.columns}x${e.rows} starting at [${t.iColumn},${t.iRow}].
    Out of bounds data will be automatically clipped. This can result in sub-optimal performance.`;nt.console.warn(x)}const u=Math.max(-i,0),d=Math.max(-n,0),f=Math.max(s-o,0),y=Math.max(a-l,0),m=e.primary-(u+f),S=[];if(d===0&&y===0)for(let x=0;x<m;x+=1)S[x]=t.values[u+x];else for(let x=0;x<m;x+=1)S[x]=t.values[u+x].slice(d,y===0?void 0:-y);if(S.length===0||S[0].length===0)return this;t={iColumn:t.iColumn,iRow:t.iRow,values:S},i=Math.max(i,0),n=Math.max(n,0)}this.Na.wv({type:"y",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:i,startSecondary:n,values:t.values})}return this.At.Ss(),this.dS=!0,this}setCullMode(t){return this.Na.Cv(typeof t=="boolean"?t?"cull-back":"disabled":t),this}getCullMode(){return this.Na.kv()}oS(){}Te(){}dp(){}Kp(){return this.tS&&this.getVisible()}Ie(t,e){t.cs(e),this.At.Ss()}}class b3 extends Gl{constructor(t,e,i,s,n,a){super(t,e,i,n,a),this.xs="Surface Grid Series 3D",this.Av={},this.Gd=()=>ji(this.be),this.Ji.us.Nn(wt.vf),this.qp=Il;const o=(s==null?void 0:s.automaticColorIndex)!==void 0?s.automaticColorIndex:this.Ji.getSeries().length;this.be=Kt(this.qi.surfaceScrollingGridSeries3DFillStyle,o),this.gv=Kt(this.qi.surfaceScrollingGridSeries3DWireframeStyle,o);const l={heatmapDataType:"intensity",scrollDimension:s.scrollDimension||"columns",columns:s.columns,rows:s.rows};this.Un=l,this.Na=this.At.Tv(l).Ce(this.be).mv(this.gv).rS(this.qp).cs(this.getHighlight()),this.ds(this.Na),s.start&&this.setStart(s.start),s.step&&this.setStep(s.step)}pv(){const t=this.Av.start||{x:0,z:0};let e;e=this.Av.step?this.Av.step:{x:1,z:1},this.Na.Sv(t,e),this.Ji.us.Ss()}setStart(t){return this.Av.start=t,this.pv(),this}getStart(){return this.Na.vv().start}setStep(t){return this.Av.step=t,this.pv(),this}getStep(){return this.Na.vv().step}setFillStyle(t){return this.be=typeof t=="function"?t(this.be):t,this.Na.Ce(this.be),this.At.Ss(),this}getFillStyle(){return this.be}setWireframeStyle(t){return this.gv=typeof t=="function"?t(this.gv):t,this.Na.mv(this.gv),this.At.Ss(),this}getWireframeStyle(){return this.Na.bv()}setIntensityInterpolation(t){return t=t||"disabled",this.Na.xv(t),this.At.Ss(),this}getIntensityInterpolation(){return this.Na.Mv()}clear(){return this.Na.Nt(),this.At.Ss(),this}addValues(t){if(!t)return this;let e=t.yValues,i=t.intensityValues;if(!e&&!i)return this;if(e&&e.length===0&&(e=void 0),i&&i.length===0&&(i=void 0),e){const a=e[0].length,o=0+a-1,l=this.Un.scrollDimension==="columns"?this.Un.rows:this.Un.columns;if(o>l-1){if(this.Ji.cA.Hn===!0){const d=`SurfaceScrollingGridSeries3D.addValues input yValues overflow.
Grid was created with ${l} ${this.Un.scrollDimension==="columns"?"rows":"columns"}, input yValues have ${a}.
Excess data will be automatically clipped. This can result in sub-optimal performance.`;nt.console.warn(d)}const u=[];for(let d=0;d<e.length;d+=1)u[d]=e[d].slice(0,l+1);e=u}}if(i){const a=i[0].length,o=0+a-1,l=this.Un.scrollDimension==="columns"?this.Un.rows:this.Un.columns;if(o>l-1){if(this.Ji.cA.Hn===!0){const d=`SurfaceScrollingGridSeries3D.addValues intensityValues overflow.
Grid was created with ${l} ${this.Un.scrollDimension==="columns"?"rows":"columns"}, input intensityValues have ${a}.
Excess data will be automatically clipped. This can result in sub-optimal performance.`;nt.console.warn(d)}const u=[];for(let d=0;d<i.length;d+=1)u[d]=i[d].slice(0,l+1);i=u}}if(e&&i){const a=e.length,o=i.length;if(a!==o){if(this.Ji.cA.Hn===!0){const l=`SurfaceScrollingGridSeries3D.addValues input yValues and intensityValues size does not match.
yValues: ${a}
intensityValues: ${o}
Data will be automatically clipped according to the smaller supplied sample. This can result in sub-optimal performance.`;nt.console.warn(l)}a>o?e=e.slice(0,o):i=i.slice(0,a)}}const s=e?e.length:i==null?void 0:i.length,n=e?e[0].length:i==null?void 0:i[0].length;return this.Na.Fv({startPrimary:0,startSecondary:0,lengthPrimary:s,lengthSecondary:n,heightMapValues:e,intensityValues:i}),this.At.Ss(),this}setCullMode(t){return this.Na.Cv(typeof t=="boolean"?t?"cull-back":"disabled":t),this}getCullMode(){return this.Na.kv()}oS(){}Te(){}dp(){}Kp(){return this.tS&&this.getVisible()}Ie(t,e){t.cs(e),this.At.Ss()}}const cf=r=>!!(r&&typeof r=="object"&&"id"in r&&"chart"in r&&r.chart instanceof Jp),nb=r=>!!(r&&typeof r=="object"&&"x"in r&&typeof r.x=="number"&&"y"in r&&typeof r.y=="number"&&"z"in r&&typeof r.z=="number"),Ve={translation:(r,t,e)=>[1,0,0,0,0,1,0,0,0,0,1,0,r,t,e,1],xRotation(r){const t=Math.cos(r),e=Math.sin(r);return[1,0,0,0,0,t,e,0,0,-e,t,0,0,0,0,1]},yRotation(r){const t=Math.cos(r),e=Math.sin(r);return[t,0,-e,0,0,1,0,0,e,0,t,0,0,0,0,1]},zRotation(r){const t=Math.cos(r),e=Math.sin(r);return[t,e,0,0,-e,t,0,0,0,0,1,0,0,0,0,1]},scaling:(r,t,e)=>[r,0,0,0,0,t,0,0,0,0,e,0,0,0,0,1],translate:(r,t,e,i)=>Ve.multiply(r,Ve.translation(t,e,i)),xRotate:(r,t)=>Ve.multiply(r,Ve.xRotation(t)),yRotate:(r,t)=>Ve.multiply(r,Ve.yRotation(t)),zRotate:(r,t)=>Ve.multiply(r,Ve.zRotation(t)),rotateXYZ(r,t){let e=Ve.xRotate(r,t.x);return e=Ve.yRotate(e,t.y),e=Ve.zRotate(e,t.z),e},scale:(r,t,e,i)=>Ve.multiply(r,Ve.scaling(t,e,i)),multiply(r,t){const e=t[0],i=t[1],s=t[2],n=t[3],a=t[4],o=t[5],l=t[6],u=t[7],d=t[8],f=t[9],y=t[10],m=t[11],S=t[12],x=t[13],v=t[14],b=t[15],E=r[0],T=r[1],V=r[2],F=r[3],B=r[4],z=r[5],L=r[6],A=r[7],R=r[8],w=r[9],C=r[10],k=r[11],_=r[12],X=r[13],N=r[14],U=r[15],O=[];return O[0]=e*E+i*B+s*R+n*_,O[1]=e*T+i*z+s*w+n*X,O[2]=e*V+i*L+s*C+n*N,O[3]=e*F+i*A+s*k+n*U,O[4]=a*E+o*B+l*R+u*_,O[5]=a*T+o*z+l*w+u*X,O[6]=a*V+o*L+l*C+u*N,O[7]=a*F+o*A+l*k+u*U,O[8]=d*E+f*B+y*R+m*_,O[9]=d*T+f*z+y*w+m*X,O[10]=d*V+f*L+y*C+m*N,O[11]=d*F+f*A+y*k+m*U,O[12]=S*E+x*B+v*R+b*_,O[13]=S*T+x*z+v*w+b*X,O[14]=S*V+x*L+v*C+b*N,O[15]=S*F+x*A+v*k+b*U,O},inverse(r){const t=[],e=r[0],i=r[1],s=r[2],n=r[3],a=r[4],o=r[5],l=r[6],u=r[7],d=r[8],f=r[9],y=r[10],m=r[11],S=r[12],x=r[13],v=r[14],b=r[15],E=y*b,T=v*m,V=l*b,F=v*u,B=l*m,z=y*u,L=s*b,A=v*n,R=s*m,w=y*n,C=s*u,k=l*n,_=d*x,X=S*f,N=a*x,U=S*o,O=a*f,W=d*o,P=e*x,H=S*i,j=e*f,Q=d*i,J=e*o,ht=a*i,ot=E*o+F*f+B*x-(T*o+V*f+z*x),ut=T*i+L*f+w*x-(E*i+A*f+R*x),dt=V*i+A*o+C*x-(F*i+L*o+k*x),Et=z*i+R*o+k*f-(B*i+w*o+C*f),St=1/(e*ot+a*ut+d*dt+S*Et);return t[0]=St*ot,t[1]=St*ut,t[2]=St*dt,t[3]=St*Et,t[4]=St*(T*a+V*d+z*S-(E*a+F*d+B*S)),t[5]=St*(E*e+A*d+R*S-(T*e+L*d+w*S)),t[6]=St*(F*e+L*a+k*S-(V*e+A*a+C*S)),t[7]=St*(B*e+w*a+C*d-(z*e+R*a+k*d)),t[8]=St*(_*u+U*m+O*b-(X*u+N*m+W*b)),t[9]=St*(X*n+P*m+Q*b-(_*n+H*m+j*b)),t[10]=St*(N*n+H*u+J*b-(U*n+P*u+ht*b)),t[11]=St*(W*n+j*u+ht*m-(O*n+Q*u+J*m)),t[12]=St*(N*y+W*v+X*l-(O*v+_*l+U*y)),t[13]=St*(j*v+_*s+H*y-(P*y+Q*v+X*s)),t[14]=St*(P*l+ht*v+U*s-(J*v+N*s+H*l)),t[15]=St*(J*y+O*s+Q*l-(j*l+ht*y+W*s)),t},projectionPerspective(r,t,e,i){const s=1/Math.tan(r*Math.PI/180/2),n=1/(e-i);return[s/t,0,0,0,0,s,0,0,0,0,(e+i)*n,-1,0,0,e*i*n*2,0]},projectionOrthographic:(r,t,e,i,s,n)=>[2/(t-r),0,0,-(t+r)/(t-r),0,2/(i-e),0,-(i+e)/(i-e),0,0,-2/(n-s),-(n+s)/(n-s),0,0,0,1]};class M3 extends Gl{constructor(t,e,i,s,n,a){super(t,e,i,s,a),this.xs="Mesh Model 3D",this.Iv=new Float32Array,this.dt={x:1,y:1,z:1},this.Pv={x:0,y:0,z:0},this.Dv={x:0,y:0,z:0},this.Bv={x:0,y:0,z:0},this.Lv={x:0,y:0,z:0},this.Ya=xr,this.Gd=()=>ji(this.getFillStyle());const o=(n==null?void 0:n.automaticColorIndex)!==void 0?n.automaticColorIndex:this.Ji.getSeries().length;this.Na=this.At.Rv().nS(this.iS).Ce(Kt(this.qi.meshModel3DFillStyle||this.qi.pointSeriesFillStyle,o)).cs(this.getHighlight()),this.ds(this.Na)}setModelGeometry(t){const{indices:e,vertices:i,normals:s}=t;let n=kt,a=bt,o=kt,l=bt,u=kt,d=bt;for(let f=0;f<i.length;f+=3){const y=i[f],m=i[f+1],S=i[f+2];n=Math.max(n,y),a=Math.min(a,y),o=Math.max(o,m),l=Math.min(l,m),u=Math.max(u,S),d=Math.min(d,S)}this.Ya={min:{x:a,y:l,z:d},max:{x:n,y:o,z:u}};for(let f=0;f<i.length;f+=3)i[f]-=this.Ya.min.x,i[f+1]-=this.Ya.min.y,i[f+2]-=this.Ya.min.z;return this.Lv={x:this.Ya.max.x-this.Ya.min.x,y:this.Ya.max.y-this.Ya.min.y,z:this.Ya.max.z-this.Ya.min.z},this.Iv=i instanceof Float32Array?i:new Float32Array(i),this.checkedNormals=s&&!Number.isNaN(s[0])?s instanceof Float32Array?s:new Float32Array(s):void 0,this.checkedNormals||this.setColorShadingStyle(Il),this.Na.Ev({vertices:this.Iv,normals:this.checkedNormals,indices:e instanceof Uint16Array?e:new Uint16Array(e),modelSize:this.Lv}),this.Ji.us.Ss(),this}setVertexValues(t){const e=this.Dv,i=this.Pv,s=this.dt,n=this.Lv,a=this.Bv,o=j5(e,this.Ji.axes,this.Ji.world);let l;if(this.zv)l=t(this.zv);else{const u=[],d=Ve.projectionOrthographic(-1,1,-1,1,1,-1);let f=Ve.translate(d,n.x/2,n.y/2,n.z/2);f=Ve.rotateXYZ(f,a),f=Ve.translate(f,-n.x/2,-n.y/2,-n.z/2);const y=(i.x+1)*(n.x/2),m=(i.y+1)*(n.y/2),S=(i.z+1)*(n.z/2);for(let x=0;x<this.Iv.length;x+=3){const v=Ve.multiply(f,[this.Iv[x],this.Iv[x+1],this.Iv[x+2],1]),b={x:o.x+(v[0]-y)*s.x,y:o.y+(v[1]-m)*s.y,z:o.z+(v[2]-S)*s.z};u.push(b)}this.zv=u,l=t(u)}return l.length===0||(l.length!==this.zv.length&&this.Ji.us.Un.Hn===!0&&nt.console.warn(`LightningChart JS warning - MeshModel3D.setVertexValues returned array length is not equal to vertex locations array length.
This is most likely an application error.`),this.Na.Vv(l instanceof Float32Array?l:new Float32Array(l)),this.Ji.us.Ss()),this}setScale(t){const e={x:typeof t=="number"?t:(t==null?void 0:t.x)||1,y:typeof t=="number"?t:(t==null?void 0:t.y)||1,z:typeof t=="number"?t:(t==null?void 0:t.z)||1};return this.dt=e,this.zv=void 0,this.Na.Ov(e),this.Ji.us.Ss(),this}getScale(){return this.dt}setModelLocation(t){return this.Dv=t,this.zv=void 0,this.Na.Nv(t),this.Ji.us.Ss(),this}getModelLocation(){return this.Dv}setModelAlignment(t){return this.Pv=t,this.zv=void 0,this.Na.Gv(t),this.Ji.us.Ss(),this}getModelAlignment(){return this.Pv}setModelRotation(t){const e={x:Ar(t.x),y:Ar(t.y),z:Ar(t.z)};return this.Bv=e,this.zv=void 0,this.Na.Wv(this.Bv),this.Ji.us.Ss(),this}getModelRotation(){return this.Bv}setBackfaceCullingMode(t){return this.Na.Uv(t),this.Ji.us.Ss(),this}getBackfaceCullingMode(){return this.Na.Yv()}setFillStyle(t){return this.Na.Ce(t),this.Ji.us.Ss(),this}getFillStyle(){return this.Na.Eh()}setColorShadingStyle(t){return this.checkedNormals||t!==Pl?super.setColorShadingStyle(t):(console.warn("Phong shading style is not supported without normals. Switching to Simple shading style."),super.setColorShadingStyle(new xk.Simple))}Kp(){return!1}Ie(t,e){t.cs(e),this.Ji.us.Ss()}attach(t,e=!0,i=!1){return super.attach(t,e),ei(t,this.qi,i,{fill:this.getFillStyle()}),this}}class Jp extends zc{constructor(t,e,i,s,n,a,o){var l;let u;super(t,e,i,e.vm("chart3D bg",0),s,e.us.qi.chart3DBackgroundFillStyle,e.us.qi.chart3DBackgroundStrokeStyle,e.us.qi.chart3DTitleFont,e.us.qi.chart3DTitleFillStyle,a),this.Hv=1,this.$v=[],this.Xv=2,this.jv=!0,this.Zv=!0,this.Qv=!0,this.Jv=0,this.coordsAxis={id:"axes",chart:this},this.coordsWorld={id:"world",chart:this},this.axes={id:"axes",chart:this},this.world={id:"world",chart:this},this.an=[],this.fn=()=>{const d=this.At.Kv();this.tb.qv(d),this.ib.qv(d);const f=this.sb.viewportChanged(this.eb());f&&this.hb(f),this.us.Ss()},this.eS=(d,f,y,m,S)=>{if(this.Qv){const x=S;this.$v.push({type:"rotate",rotation:x}),this.us.Ss(),xt(f)}},this.sS=(d,f)=>{if(this.Zv){if(this.jv)Math.sign(this.Jv)!==Math.sign(f.deltaY)?this.Jv=ch(f):this.Jv+=ch(f);else{const y=ch(f);this.$v.push({type:"wheel-zoom",deltaY:y})}this.us.Ss(),xt(f)}},this.us.Nn(wt.df),this._m.Rh("Chart3D"),this.rb=i.d3(),this.rb.x.J(-1,1),this.rb.y.J(-1,1),this.rb.z.J(-1,1),this.At=e.nb("chart3D layer3D",0,this.rb),this.tb=e.ob("chart3D series bg",0),this.ib=e.$y("chart3D axis ui",1),this.ab={x:new hm(this,(l=()=>this.xS,{...Ol(l,d=>d.getXMin(),d=>d.getXMax(),d=>d.br().x),Cp:d=>d.x,Hp:(d,f)=>({x:d.x,y:f.y,z:f.z}),Jd:Bt(0,-1,0),$p:d=>{const f={x:d.x>=0?1:-1,y:d.y>=0?1:-1,z:d.z>=0?1:-1};return{gridlinePositionA:Bt(0,f.y,f.z),gridlinePositionB:Bt(0,f.y,-f.z),gridlinePositionC:Bt(0,-f.y,-f.z)}},Zp:()=>!0,Qp:()=>!1,Yp:()=>!1}),this.rb.x,this.qi,this.At,this.ib,this.pixelScale,!1,this.es),y:new hm(this,d3(()=>this.xS),this.rb.y,this.qi,this.At,this.ib,this.pixelScale,!1,this.es),z:new hm(this,f3(()=>this.xS),this.rb.z,this.qi,this.At,this.ib,this.pixelScale,!1,this.es)},this.lb=this.At.rp([kr.InternalUI]).setMouseInteractions(!1),this.setBoundingBoxStrokeStyle(this.qi.chart3DBoundingBoxStrokeStyle),this.FS=this.tb.ic(this.engine.scale,Cr.Simple).Ce(this.qi.chart3DSeriesBackgroundFillStyle).we(At).setMouseInteractions(!0),this.IS=this.tb.ic(this.engine.scale,Cr.Simple).Ce(Ft).we(this.qi.chart3DSeriesBackgroundStrokeStyle).setMouseInteractions(!1),super.TS(this.FS,this.IS),this.ub({x:1,y:1,z:1},!0),this.sb=new x3(this.engine.scale,this.pixelScale,this.rb,(d,f)=>(f&&this.hb(f),this.At.Gp(d))),this.cb=this.sb.getDefaultCameraConfiguration(this.fb(this.Ab)),this.hb(this.cb),this.hS=Ls(new Vp((d,f,y)=>{u={locationOne:f,locationTwo:y,cameraLocation:this.At.getCameraLocation()}},(d,f,y,m,S,x)=>{if(!this.Qv&&!this.Zv)return;const v=(u.locationOne.x-u.locationTwo.x)**2+(u.locationOne.y-u.locationTwo.y)**2,b=(f.x-y.x)**2+(f.y-y.y)**2,E=ft.length(u.cameraLocation),T=v/b*E,V=Y((m.x+S.x)/2,(m.y+S.y)/2);this.$v.push({type:"rotate+zoom",rotation:this.Qv?V:{x:0,y:0},cameraDistance:this.Zv?T:E}),this.us.Ss(),xt(x)},d=>{}),new Er(d=>{},(d,f,y,m,S)=>{if(this.Qv){const x=m;this.$v.push({type:"rotate",rotation:x}),this.us.Ss(),xt(S)}},d=>{})),this.onBackgroundTouchStart(this.hS.onTouchStart),this.onBackgroundTouchMove(this.hS.onTouchMove),this.onBackgroundTouchEnd(this.hS.onTouchEnd),this.onSeriesBackgroundTouchStart(this.hS.onTouchStart),this.onSeriesBackgroundTouchMove(this.hS.onTouchMove),this.onSeriesBackgroundTouchEnd(this.hS.onTouchEnd),this.onBackgroundMouseDrag(this.eS),this.onBackgroundMouseWheel(this.sS),this.onBackgroundMouseDown((d,f)=>{xt(f)}),this.onSeriesBackgroundMouseDrag(this.eS),this.onSeriesBackgroundMouseWheel(this.sS),this.onSeriesBackgroundMouseDown((d,f)=>{xt(f)}),this.setAnimationsEnabled((o==null?void 0:o.disableAnimations)!==!0&&(o==null?void 0:o.animationsEnabled)!==!1),this.onResize(this.fn),this.fn(),this.Sm(n,this.pixelScale)}addPointSeries(t){const e=new(t&&t.type||S3)(this,this._S,this.At,this.qi,this.us.es,t);return this.PS(e),e}addLineSeries(t){const e=new y3(this,this._S,this.At,this.qi,(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length,this.us.es);return this.PS(e),e}addPointLineSeries(t){const e=new m3(this,this._S,this.At,this.qi,(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length,this.us.es);return this.PS(e),e}addSurfaceGridSeries(t){const e=new v3(this,this._S,this.At,t,this.qi,this.us.es);return this.PS(e),e}addSurfaceScrollingGridSeries(t){const e=new b3(this,this._S,this.At,t,this.qi,this.us.es);return this.PS(e),e}addBoxSeries(t){const e=new g3(this,this._S,this.At,this.qi,(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length,this.us.es);return this.PS(e),e}addMeshModel(t){const e=new M3(this,this._S,this.At,this.qi,t,this.us.es);return this.PS(e),e}translateCoordinate(t,e,i){if(cf(e)||cf(i)||nb(t)){if(cf(e)&&cf(i)&&nb(t)){if(e.id==="axes"&&i.id==="world")return this.At.ft(t);if(e.id==="world"&&i.id==="axes")return this.At.yt(t);if(e.id===i.id)return t}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}return b0(t,e,i,this.pixelScale,this.us)}getDefaultAxisX(){return this.ab.x}getDefaultAxisY(){return this.ab.y}getDefaultAxisZ(){return this.ab.z}get axisX(){return this.getDefaultAxisX()}get xAxis(){return this.getDefaultAxisX()}get axisY(){return this.getDefaultAxisY()}get yAxis(){return this.getDefaultAxisY()}get axisZ(){return this.getDefaultAxisZ()}get zAxis(){return this.getDefaultAxisZ()}getDefaultAxes(){return[this.ab.x,this.ab.y,this.ab.z]}setCameraLocation(t){let e={location:t,direction:ft.normalize(ft.multiply(t,-1))};const i=this.sb.cameraLocationChanged(this.eb(e));return i&&(e=i),this.hb(e),this.us.Ss(),this}getCameraLocation(){return this.At.getCameraLocation()}getCameraDirection(){return this.At.getCameraDirection()}setCameraAutomaticFittingEnabled(t){this.sb.ev(t);const e=this.sb.cameraLocationChanged(this.eb());return e&&this.hb(e),this}getCameraAutomaticFittingEnabled(){return this.sb.fv()}onCameraChange(t){return this.D.on("cameraChange",t)}offCameraChange(t){return this.D.off(t,"cameraChange")}setBoundingBoxStrokeStyle(t){return this.lb.Re(t).Rp(Im(this.lb.uu())),this.At.Ss(),this}getBoundingBoxStrokeStyle(){return this.lb.uu()}setBoundingBox(t){return this.ub(t,!1),this}ub(t,e){this.Ab=t;const i=this.fb(t);if(this.rb.x.q(i.x),this.rb.y.q(i.y),this.rb.z.q(-i.z),!e){const s=this.sb.boundingBoxChanged(this.eb());s&&this.hb(s)}this.us.Ss()}getBoundingBox(){return this.Ab}Te(t){if(is.Fm(this._m,this.bm),this.Jv!==0){const f=this.Jv*t*.006;this.$v.push({type:"wheel-zoom",deltaY:f}),this.Jv=Math.sign(this.Jv)*Math.max(Math.abs(this.Jv)-.01*t,0),this.Jv!==0&&this.us.Ss(!0)}const e=this.getCameraDirection();if(this.$v.length>0){const f=this.sb.applyCameraInteractions(this.eb(),this.$v);f&&this.hb(f),this.$v.length=0}this.gb&&ft.equals(this.gb.location,this.cb.location)&&ft.equals(this.gb.direction,this.cb.direction)||this.D.emit("cameraChange",this,this.getCameraLocation()),this.gb=this.cb,super.Te(t);for(let f=0;f<this.xS.length;f+=1)this.xS[f].oS();for(let f=0;f<this.xS.length;f+=1)this.xS[f].Te();this.ab.x.Mr(),this.ab.y.Mr(),this.ab.z.Mr(),this.ab.x.Te(e),this.ab.y.Te(e),this.ab.z.Te(e),super.pm();const i=this.rb,s=Bt(i.x.getInnerStart(),i.y.getInnerStart(),i.z.getInnerStart()),n=Bt(i.x.getInnerEnd(),i.y.getInnerEnd(),i.z.getInnerEnd());this.lb.Nt().nl([Bt(n.x,s.y,s.z),Bt(n.x,n.y,s.z),Bt(n.x,n.y,n.z),Bt(n.x,s.y,n.z),Bt(s.x,s.y,n.z),Bt(s.x,n.y,n.z),Bt(n.x,n.y,n.z),Bt(n.x,n.y,s.z),Bt(s.x,n.y,s.z),Bt(s.x,n.y,n.z),Bt(s.x,s.y,n.z),Bt(s.x,s.y,s.z)]);const a=[Bt(s.x,s.y,s.z),Bt(n.x,s.y,s.z),Bt(s.x,n.y,s.z),Bt(n.x,n.y,s.z),Bt(s.x,s.y,n.z),Bt(n.x,s.y,n.z),Bt(s.x,n.y,n.z),Bt(n.x,n.y,n.z)].map(f=>this.At.Gp(f)),o=this.At.Gp(Bt((s.x+n.x)/2,(s.y+n.y)/2,(s.z+n.z)/2)),l=Dv(a,o),u=[];for(let f=0;f<l.length;f+=1){const y=l[f];sC(y,o,l[f>0?f-1:l.length-1],l[f<l.length-1?f+1:0])||u.push(y)}const d=Dv(u,o);this.FS.pl(d),this.IS.pl(d);for(let f=0;f<this.xS.length;f+=1)this.xS[f].dp()}dispose(){return this.an.forEach(t=>{t()}),this.an.length=0,this.rb.W(),this.At.W(),this.ib.W(),this.tb.W(),super.dispose()}j(){return this.rb.x.j(),this.rb.y.j(),this.rb.z.j(),super.j()}Z(){return super.Z()}hb(t){this.At.setCameraLocation(t.location).setCameraDirection(t.direction).setLightLocation(ft.addVec(t.location,ft.multiply(t.direction,-this.Xv))),this.cb=t,this.us.Ss()}fb(t){return ft.divide(t,ft.length(t)/this.Hv)}eb(t=this.cb){return{boundingBox:this.fb(this.Ab),cameraLocation:t.location,cameraDirection:t.direction}}setMouseInteractions(t){return this.setMouseInteractionZoom(t).setMouseInteractionRotate(t)}setMouseInteractionZoom(t){return this.Zv=t,this}getMouseInteractionZoom(){return this.Zv}setMouseInteractionRotate(t){return this.Qv=t,this}getMouseInteractionRotate(){return this.Qv}forEachAxis(t){return t(this.ab.x),t(this.ab.y),t(this.ab.z),this}getSeries(){return this.xS}getMinimumSize(){}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationZoom(t),this.forEachAxis(e=>e.setAnimationsEnabled(t)),this}setAnimationZoom(t){return this.jv=!!t,this}getAnimationZoom(){return this.jv}}const R3={Row:Fc};class E3 extends Yp{constructor(t,e,i,s,n,a){super(t,e,i,s,n,a),this.mb=new Map,this.yb=this.addUIElement(R3.Row).setPosition({x:0,y:100}).setOrigin(xl.LeftTop).setBackground(o=>o.setFillStyle(Ft).setStrokeStyle(At))}add(t,e){return(t instanceof Jr?[t]:t instanceof tE?t.getCells().filter(i=>i.panel instanceof Jr).map(i=>i.panel):[]).forEach(i=>{const s=this.yb.addElement(Lk.VerticalLegendBox).setBackground(n=>n.setFillStyle(Ft).setStrokeStyle(At)).add(i,e).setTitle(i.getTitle());this.mb.set(i,s)}),this.us.Ss(),this}setLegendBoxes(t){return this.mb.forEach((e,i)=>t(e,i)),this}getMinimumSize(){return super.getMinimumSize()||this.yb.getSize()}}const Or={World:"World",USA:"USA",NorthAmerica:"NorthAmerica",SouthAmerica:"SouthAmerica",Canada:"Canada",Europe:"Europe",Asia:"Asia",Africa:"Africa",Australia:"Australia"},T3=(r,t)=>!(!t.name||r.name.toLowerCase()!==t.name.toLowerCase())||"ISO_A3"in r&&"ISO_A3"in t&&r.ISO_A3.toLowerCase()===t.ISO_A3.toLowerCase(),w3=(r,t)=>{let e=t.geometry;return e=C3(r,t,e),e=k3(r,t,e),e},C3=(r,t,e)=>{if(r===Or.Asia){const i=[];for(let s=0;s<e.length;s+=1){i[s]=[];const n=e[s],a=i[s];for(let o=0;o<n.length;o+=1){const l=n[o];l.x<-100?a[o]={x:l.x+360,y:l.y}:a[o]=l}}return i}return e},k3=(r,t,e)=>{const i=t.name.toLowerCase();let s;if(r===Or.USA&&(i==="alaska"?s={translate:{x:55,y:-25},scale:{x:.16,y:.16}}:i==="hawaii"&&(s={translate:{x:48,y:7},scale:{x:1,y:1}})),s){const{translate:n,scale:a}=s,o=Je(Ff(e)),l=[];for(let u=0;u<e.length;u+=1){l[u]=[];const d=e[u],f=l[u];for(let y=0;y<d.length;y+=1){const m=d[y];let S=m.x;i==="alaska"&&Math.sign(S)===1&&(S=-180-(180-S)),f[y]={x:n.x+(S-o.min.x)*a.x+o.min.x,y:n.y+(m.y-o.min.y)*a.y+o.min.y}}}return t.outlier=!0,t.transform={...s,vertexBoundaries:o},l}return e},D3={World:{min:{x:-180,y:-90},max:{x:180.0000000000002,y:83.63410065300012}},Europe:{min:{x:-25,y:34},max:{x:40,y:70}},Africa:{min:{x:-17,y:-40},max:{x:52,y:37.37549753800012}},Asia:{min:{x:27,y:-10.922621351999808},max:{x:180.0000000000002,y:81.85871002800009}},NorthAmerica:{min:{x:-179.1435033839999,y:5.515082098000121},max:{x:-50,y:83.11652252800009}},SouthAmerica:{min:{x:-85,y:-55.9185042229998},max:{x:-35,y:15}},USA:{min:{x:-125,y:24},max:{x:-68,y:50}},Canada:{min:{x:-141.0181,y:41.7297},max:{x:-52.6194,y:75}},Australia:{min:{x:111,y:-43.6586},max:{x:155,y:-9.2199}}},F3={World:.6,Europe:1/1.4,Africa:1.3,Asia:.8,NorthAmerica:.9,SouthAmerica:1.5,USA:3/4,Canada:6/8,Australia:11/12};class DR extends Jr{constructor(t,e,i,s,n,a,o){super(t,e,i,e.vm("mapChart bg",0),s,e.us.qi.mapChartBackgroundFillStyle,e.us.qi.mapChartBackgroundStrokeStyle,e.us.qi.mapChartTitleFont,e.us.qi.mapChartTitleFillStyle,o),this.pb=[],this.dt=this.sm.d2({scaleXYConstructor:Se}),this.Yi=!0,this.Sb=this.qi.mapChartSeparateRegionFillStyle,this.vb=this.qi.mapChartSeparateRegionStrokeStyle,this.bb=We.onHover,this.Wy=V3,this.th=!0,this.xb=0,this.Mb=!0,this._b=new Map,this.onMouseEnter=d=>this.D.on("mouseEnter",d),this.onMouseLeave=d=>this.D.on("mouseLeave",d),this.onMouseClick=d=>this.D.on("mouseClick",d),this.onMouseDoubleClick=d=>this.D.on("mouseDoubleClick",d),this.onMouseDown=d=>this.D.on("mouseDown",d),this.onMouseUp=d=>this.D.on("mouseUp",d),this.onMouseMove=d=>this.D.on("mouseMove",d),this.offMouseEnter=d=>this.D.off(d,"mouseEnter"),this.offMouseLeave=d=>this.D.off(d,"mouseLeave"),this.offMouseClick=d=>this.D.off(d,"mouseClick"),this.offMouseDoubleClick=d=>this.D.off(d,"mouseDoubleClick"),this.offMouseDown=d=>this.D.off(d,"mouseDown"),this.offMouseUp=d=>this.D.off(d,"mouseUp"),this.offMouseMove=d=>this.D.off(d,"mouseMove"),this.offMouseDragStart=d=>this.D.off(d,"mouseDragStart"),this.offMouseDrag=d=>this.D.off(d,"mouseDrag"),this.offMouseDragStop=d=>this.D.off(d,"mouseDragStop"),this.offMouseWheel=d=>this.D.off(d,"mouseWheel"),this.onMapDataReady=d=>{const f=this.D.on("mapDataReady",d);return this.wb&&nt.setTimeout(()=>d()),f},this.onViewChange=d=>this.D.on("viewChange",d),this.Cb=(d,f,y,m,S)=>{this.dt.x.q(m).si([this.Xt.left+this.ya.left,this.Xt.right+this.ya.right]),this.dt.y.q(S).si([this.Xt.bottom+this.ya.bottom,this.Xt.top+this.ya.top+is.Tm(this._m,this.bm)]),this.kb&&this.Tb(this.Fb,this.dt,this.kb)},this.wt=(d,f)=>{const y=f;if(!y||!this.wb)return;const{iRegion:m,region:S}=this.Ib(this.wb,y);this.bb!==We.disabled&&(this.Pb(S,m),xt(d)),this.Mb&&this.us.ls.Ms(S,!0),this.Db=S,this.D.emit("mouseEnter",this,d)},this.Ct=(d,f)=>{const y=f;if(!y||!this.wb)return;const{iRegion:m,region:S}=this.Ib(this.wb,y);this.Bb(S,m),this.Mb&&this.us.ls.Ms(S,!1),this.Db=void 0,this.D.emit("mouseLeave",this,d),d&&xt(d)},this.Pt=(d,f)=>{const y=f;if(!y||!this.wb)return;const{iRegion:m,region:S}=this.Ib(this.wb,y);this.bb!==We.disabled&&(this.Pb(S,m),xt(d)),this.Db=S,this.D.emit("mouseMove",this,d)},this.kt=(d,f)=>this.D.emit("mouseClick",this,d),this.Tt=(d,f)=>this.D.emit("mouseDoubleClick",this,d),this.Ft=(d,f)=>this.D.emit("mouseDown",this,d),this.It=(d,f)=>this.D.emit("mouseUp",this,d),this.Bt=(d,f,y)=>{this.D.emit("mouseDragStart",this,d,f)},this.Dt=(d,f,y,m,S)=>{this.D.emit("mouseDrag",this,d,f,y,m)},this.Lt=(d,f,y,m)=>{this.D.emit("mouseDragStop",this,d,f,y)},this.Rt=(d,f)=>{this.D.emit("mouseWheel",this,d)},this.Et=(d,f)=>{const y=f;if(!y||!this.wb)return;const{iRegion:m,region:S}=this.Ib(this.wb,y);this.Lb=this.engine.clientLocation2Engine(d.clientX,d.clientY),this.Pb(S,m),this.Mb&&this.us.ls.Ms(S,!0),this.Db=S,this.D.emit("touchStart",this,d),xt(d)},this.zt=(d,f)=>{const y=f;if(!y||!this.wb)return;const{iRegion:m,region:S}=this.Ib(this.wb,y);this.Lb=this.engine.clientLocation2Engine(d.clientX,d.clientY),this.Pb(S,m),this.Db=S,this.D.emit("touchMove",this,d),xt(d)},this.Vt=(d,f)=>{const y=f;if(!y||!this.wb)return;const{iRegion:m,region:S}=this.Ib(this.wb,y);this.Lb=void 0,this.Bb(S,m),this.Mb&&this.us.ls.Ms(S,!1),this.Db=void 0,this.D.emit("touchEnd",this,d),xt(d)},this.us.Nn(wt.Af),this.th=(a==null?void 0:a.disableAnimations)!==!0&&(a==null?void 0:a.animationsEnabled)!==!1,this.Rb=e.$y("mapChart plotting",0),this.onResize(this.Cb),this._m.Rh("Map Chart");const l=De(a?a.autoCursorBuilder:void 0,wR);this.Eb=l.Ay(e.Zy(),this.dt,this.dt,this.qi).setVisible(!1),this.zb=this.es.yg(),this.Sm(n,this.uiScale),this.Vb=this.Rb.Ob(this.dt).setMouseInteractions(this.Yi).setMouseEnterEventHandler((d,f,y)=>this.wt(f,y)).setMouseLeaveEventHandler((d,f,y)=>this.Ct(f,y)).setMouseClickEventHandler((d,f,y)=>this.kt(f,y)).setMouseDoubleClickEventHandler((d,f,y)=>this.Tt(f,y)).setMouseDownEventHandler((d,f,y)=>this.Ft(f,y)).setMouseUpEventHandler((d,f,y)=>this.It(f,y)).setMouseMoveEventHandler((d,f,y)=>this.Pt(f,y)).setMouseDragStartEventHandler((d,f,y,m)=>this.Bt(f,y,m)).setMouseDragEventHandler((d,f,y,m,S,x)=>this.Dt(f,y,m,S,x)).setMouseDragStopEventHandler((d,f,y,m,S)=>this.Lt(f,y,m,S)).setMouseWheelEventHandler((d,f,y)=>this.Rt(f,y)).setTouchStartEventHandler((d,f,y)=>this.Et(f,y)).setTouchMoveEventHandler((d,f,y)=>this.zt(f,y)).setTouchEndEventHandler((d,f,y)=>this.Vt(f,y)).Ce(this.qi.mapChartFillStyle).we(this.qi.mapChartStrokeStyle),this.Nb=this.Rb.Ob(this.dt).setMouseInteractions(this.Yi).Ce(this.qi.mapChartOutlierRegionFillStyle).we(this.qi.mapChartOutlierRegionStrokeStyle);const u=De(a&&a.type,Or.World);this.Fb=u,this.Gb(u).then(()=>{this.D.emit("mapDataReady")})}getRegionUnderMouse(){return this.Db}setFillStyle(t){return this.Vb.Ce(t),this.us.Ss(),this}getFillStyle(){return this.Vb.Eh()}setStrokeStyle(t){return this.Vb.we(t),this.us.Ss(),this}getStrokeStyle(){return this.Vb.ao()}setEffect(t){return this.zb.ps(t),this.us.Ss(),this}getEffect(){return this.zb.vs()}setOutlierRegionFillStyle(t){return this.Nb.Ce(t),this.us.Ss(),this}getOutlierRegionFillStyle(){return this.Nb.Eh()}setOutlierRegionStrokeStyle(t){return this.Nb.we(t),this.us.Ss(),this}getOutlierRegionStrokeStyle(){return this.Nb.ao()}setSeparateRegionFillStyle(t){return this.Sb=typeof t=="function"?t(this.Sb):t,this.pb.forEach(e=>e.Ce(this.Sb)),this.us.Ss(),this}getSeparateRegionFillStyle(){return this.Sb}setSeparateRegionStrokeStyle(t){return this.vb=typeof t=="function"?t(this.vb):t,this.pb.forEach(e=>e.we(this.vb)),this.us.Ss(),this}getSeparateRegionStrokeStyle(){return this.vb}invalidateRegionValues(t){if(!this.wb||!this.Wb)return this.Ub=this.Ub||[],this.Ub.push(t),this;if(typeof t=="function")for(let e=0;e<this.wb.regions.length;e+=1){const i=this.wb.regions[e],s=this.Wb[e],n=t({...i,geometry:void 0},s);if(n!==void 0&&n!==s){this.Wb[e]=n;const a=this._b.get(i);a==null||a.forEach(o=>{o.Yb(n)})}}else for(const e of t)if(e)for(let i=0;i<this.wb.regions.length;i+=1){const s=this.wb.regions[i],n=this.Wb[i];if(e.value!==void 0&&e.value!==n&&T3(s,e)){this.Wb[i]=e.value;const a=this._b.get(s);a==null||a.forEach(o=>{o.Yb(e.value)})}}return this.us.Ss(),this}setAutoCursor(t){return this.Eb&&t(this.Eb),this.us.Ss(),this}getAutoCursor(){return this.Eb}setAutoCursorMode(t){return this.bb=t,this.us.Ss(),this}getAutoCursorMode(){return this.bb}setCursorResultTableFormatter(t){return this.Wy=t,this.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}onMouseDragStart(t){return this.D.on("mouseDragStart",t)}onMouseDrag(t){return this.D.on("mouseDrag",t)}onMouseDragStop(t){return this.D.on("mouseDragStop",t)}onMouseWheel(t){return this.D.on("mouseWheel",t)}onTouchStart(t){return this.D.on("touchStart",t)}onTouchMove(t){return this.D.on("touchMove",t)}onTouchEnd(t){return this.D.on("touchEnd",t)}offTouchStart(t){return this.D.off(t,"touchStart")}offTouchMove(t){return this.D.off(t,"touchMove")}offTouchEnd(t){return this.D.off(t,"touchEnd")}setMouseInteractions(t){return this.Yi=t,this.Vb.setMouseInteractions(t),this}getMouseInteractions(){return this.Yi}setHighlight(t){var e;return t=dh(t),this.xb=t,(e=this.wb)===null||e===void 0||e.regions.forEach(i=>{this.us.ls.Ms(i,t)}),this.D.emit("highlight",this,t),this}getHighlight(){return this.xb}setAnimationHighlight(t){var e;return(e=this.wb)===null||e===void 0||e.regions.forEach(i=>{this.us.ls._s(i,t)}),this}getAnimationHighlight(){var t;return this.us.ls.ws((t=this.wb)===null||t===void 0?void 0:t.regions[0])}setHighlightOnHover(t){return this.Mb=t,t===!1&&this.getHighlight()>0&&this.setHighlight(!1),this}getHighlightOnHover(){return this.Mb}onHighlight(t){return this.D.on("highlight",t)}offHighlight(t){return this.D.off(t)}offMapDataReady(t){return this.D.off(t,"mapDataReady")}offViewChange(t){return this.D.off(t,"viewChange")}async Gb(t){const e=await((n,a)=>{let o;if(n===Or.World)o="countries_world.json";else if(n===Or.NorthAmerica)o="countries_northAmerica.json";else if(n===Or.SouthAmerica)o="countries_southAmerica.json";else if(n===Or.Africa)o="countries_africa.json";else if(n===Or.Europe)o="countries_europe.json";else if(n===Or.Asia)o="countries_asia.json";else if(n===Or.USA)o="states_usa.json";else if(n===Or.Canada)o="territoriesProvinces_canada.json";else{if(n!==Or.Australia){const u=`LCJS MapChart unidentified \`type\`: ${n}`;throw nt.alert(u),new Error(u)}o="territories_australia.json"}const l=`${a}/maps/${o}`;return nt.fetch(l).then(u=>u.json()).catch(u=>{zM(a,l,"Map Chart",{shouldCrash:!0})})})(t,this.cA.$s);this.Wb=new Array(e.regions.length).map(n=>{}).fill(void 0);const i=D3[t];if(!i)throw new Error("Unidentified map type.");for(const n of e.outliers)for(const a of n.geometry)this.Nb.zr().pl(a);t===Or.USA&&this.pb.push(this.Rb.ke(this.dt).setMouseInteractions(!1).Ce(this.Sb).we(this.vb).Fe({x:-126,y:25.8}).q({x:10,y:29.7-25.8}),this.Rb.ke(this.dt).setMouseInteractions(!1).Ce(this.Sb).we(this.vb).Fe({x:-113,y:25.8}).q({x:7,y:29.7-25.8}));const s=this.us.ls.Er(this.Vb,{animationEnabled:this.th});for(let n=0;n<e.regions.length;n+=1){const a=e.regions[n],o=w3(t,a),l=[];for(const u of o)u.length<3||l.push(this.Vb.zr().pl(u));this._b.set(a,l),s.zr(a,u=>{l.forEach(d=>d.cs(u))})}if(this.zb.fs([this.Vb]),this.kb=i,this.Tb(t,this.dt,i),this.wb=e,this.Ub){for(const n of this.Ub)this.invalidateRegionValues(n);this.Ub=void 0}this.us.Ss()}Tb(t,e,i){const s=F3[t],n=e.x.getCellSize(),a=e.y.getCellSize()/n,o={min:{x:i.min.x,y:i.min.y},max:{x:i.max.x,y:i.max.y}};if(a<s){const d=(o.max.x-o.min.x)*(s/a-1);o.min.x-=d/2,o.max.x+=d/2}else if(a>s){const d=(o.max.y-o.min.y)*(a/s-1);o.min.y-=d/2,o.max.y+=d/2}e.x.J(o.min.x,o.max.x),e.y.J(o.min.y,o.max.y);const l=this.dt.x.li(),u=this.dt.y.li();this.D.emit("viewChange",{latitudeRange:{start:o.min.y,end:o.max.y},longitudeRange:{start:o.min.x,end:o.max.x},margin:{top:u[1],bottom:u[0],left:l[0],right:l[1]}})}Pb(t,e){this.Hb={region:t,iRegion:e},this.us.Ss()}Bb(t,e){this.Hb&&t===this.Hb.region&&(this.Hb=void 0,this.us.Ss())}Ib(t,e){const i=Array.from(this._b.entries()).findIndex(([s,n])=>n.includes(e));return{iRegion:i,region:t==null?void 0:t.regions[i]}}setAnimationsEnabled(t){return this.th=!t,this}getAnimationsEnabled(){return this.th}getMinimumSize(){}Zd(){return[this]}Te(t){super.Te(t),super.pm(),is.Fm(this._m,this.bm);const e=gM(this.dt.x.ei(),this.dt.y.ei(),this.dt.x.ri(),this.dt.y.ri());this.Rb.qv(e);const i=this.us.On()||this.Lb;if(this.Hb&&i){const s=this.Wb&&this.Wb[this.Hb.iRegion];let n=gt(i,this.engine.scale,this.dt);n={x:Jt(n.x,this.dt.x.getInnerStart(),this.dt.x.getInnerEnd()),y:Jt(n.y,this.dt.y.getInnerStart(),this.dt.y.getInnerEnd())};let a=n.x,o=n.y;const l=this.Hb.region.transform;this.Hb.region.outlier&&l&&(a=(a-l.translate.x-l.vertexBoundaries.min.x)/l.scale.x+l.vertexBoundaries.min.x,o=(o-l.translate.y-l.vertexBoundaries.min.y)/l.scale.y+l.vertexBoundaries.min.y),this.Eb.setPosition(n).setVisible(!0).getResultTable().setContent(this.Wy(new Ii,this.Hb.region,s,a,o,this).Zu())}else this.Eb.setVisible(!1);return this.Eb.Ps().Te(),this}dispose(){return this.Rb.W(),this.Eb.dispose(),Tl(this.dt),super.dispose()}j(){return super.j(),this.dt.j(),this}Z(){return super.Z(),this.dt.Z(),this}Gd(){return ji(this.getFillStyle())}attach(t,e=!0,i=!1){return t.setText(this.getTitle()),t.setOn(!0).setLocked(!0),t.onMouseEnter(()=>{this.setHighlight(!0)}),t.onMouseLeave(()=>{this.setHighlight(!1)}),this.onMouseEnter(()=>t.setHighlight(!0)),this.onMouseLeave(()=>t.setHighlight(!1)),this.onTouchStart(()=>t.setHighlight(!0)),this.onTouchEnd(()=>t.setHighlight(!1)),ei(t,this.qi,i,{fill:this.getFillStyle()}),this}}const V3=(r,t,e,i,s,n)=>(r.addRow(`${t.name}`).addRow(z3(i,s)),e!==void 0&&r.addRow(`Region value: ${e.toFixed(1)}`),r),z3=(r,t)=>{const e=r>0,i=t>0;return`${[ys(Math.abs(0|r),2),"° ",ys(Math.abs(0|(r<0?r=-r:r)%1*60),2),"' "].join("")+(e?"E":"W")}, ${[ys(Math.abs(0|t),2),"° ",ys(Math.abs(0|(t<0?t=-t:t)%1*60),2),"' "].join("")+(i?"N":"S")}`};class FR extends eo{constructor(t,e,i,s,n,a,o,l,u){super(t,e,e.$b(i),s,n,{numeric:e.Xb({amplitude:s.polarAmplitudeAxisNumericTicks,radial:s.polarAmplitudeAxisNumericTicks}),datetime:e.Xb({amplitude:s.polarAmplitudeAxisDateTimeTicks,radial:s.polarAmplitudeAxisDateTimeTicks}),time:e.Xb({amplitude:s.polarAmplitudeAxisTimeTicks,radial:s.polarAmplitudeAxisTimeTicks})},{type:"linear"}),this.jb=a,this.Zb=o,this.Qb=l,this.es=u,this.Jb=i,this.Kb=e.Xb({amplitude:s.polarAmplitudeAxisStrokeStyle,radial:s.polarRadialAxisStrokeStyle}),this.Lh=l.Pr(i).setMouseInteractions(!1).Oh(e.Xb({amplitude:s.polarAmplitudeAxisTitleFont,radial:s.polarRadialAxisTitleFont})).Ce(e.Xb({amplitude:s.polarAmplitudeAxisTitleFillStyle,radial:s.polarRadialAxisTitleFillStyle})),this.Wh=this.es.yg([this.Lh]).ps(s.effectsText)}setTickStrategy(t,e){return super.Fh(t,e)}setStrokeStyle(t){return this.Kb=typeof t=="function"?t(this.Kb):t,this.Zb.Ss(),this}getStrokeStyle(){return this.Kb}ur(t,e){return new _3(e,t,this.Jb,this.Qb,this.qb(this.jb,this.Jb),this.Qb.Ee(this.Jb).setMouseInteractions(!1))}cr(t,e){const i=this.tx(this.Jb,t);this.ix&&this.ix(t)===!1?t.Ue.setVisible(!1):t.Ue.setVisible(!0).Fe(zt(this.sx(this.Jb,t.u),i.padding)).Ea(i.alignment).Nh(i.rotation).Ia(i.offset.x,i.offset.y),this.hx(this.Jb,t.nx,t.ox,t)}setMouseInteractions(t){return this}Te(){this.qh({physicalAxisSize:0});const t=this.gr((e,i)=>{const s=i.Sh.lr,n=.5*this.Kb.getThickness()+s.tickLength+s.tickPadding+Math.abs(i.Ue.Ps().jc().y)+s.labelPadding;return Math.max(e,n)},0);return this.lx(this.Jb,this.Kb,t),this.ux(this.Jb,this.Lh,t),t}}class _3 extends Cc{constructor(t,e,i,s,n,a,o){super(t,e,s,i,o),this.nx=n,this.ox=a,n.setMouseInteractions(!1),this.ts.push(n,a)}}class N3 extends FR{constructor(t,e,i,s,n,a,o,l,u){super(t,B3(()=>this._g()),e,i,s,n,a,o,l),this.Lp=this.Zb.Ee(this.Jb).setMouseInteractions(!1),this.Ax=u,this.setScrollStrategy($r.expansion),this.setTickStrategy(Al.Numeric),this.setTitle("Amplitude")}_g(){return this.Ax()}_r(t,e){return fc(t,e,this.Jb.y)}Cr(t,e,i){const s=2*(e-t),n=this.Jb.x.Li(s);return{min:t-i*n,max:e+i*n}}sx(t,e){return{x:t.gx()?e-t.mx().start:t.mx().start-e,y:0}}qb(t,e){return t.Jc(e)}hx(t,e,i,s){const n=s.Sh.lr,a=t.gx()?s.u-t.mx().start:t.mx().start-s.u;xi(s.u,t.mx().start)||xi(s.u,t.mx().end)?e.setVisible(!1):e.setVisible(!0).eu(0).ze(360).au(void 0).ou(0).hu(a).au(60).Ce(Ft).we(n.gridStrokeStyle);const o=.5*this.Kb.getThickness();i.Ve({x:a,y:-o*t.Wi().y}).ze({x:a,y:-(o+n.tickLength)*t.Wi().y}).Re(n.tickStyle)}tx(t,e){const i=e.Sh.lr;return{alignment:{x:0,y:1},padding:{x:0,y:t.Wi().y*-(.5*this.Kb.getThickness()+i.tickLength+i.tickPadding)},rotation:0,offset:{x:0,y:0}}}lx(t,e,i){const s=t.gx()?t.mx().end-t.mx().start:t.mx().start-t.mx().end;this.Lp.Ve({x:0,y:0}).ze({x:s,y:0}).Re(e)}ux(t,e,i){const s=t.gx()?(t.mx().start+t.mx().end)/2-t.mx().start:t.mx().start-(t.mx().start+t.mx().end)/2;e.Ea({x:0,y:1}).Fe({x:s,y:-i*t.Wi().y})}}const B3=r=>({...Ol(r,t=>t.getAmplitudeMin(),t=>t.getAmplitudeMax(),t=>{}),$b:t=>({getInnerStart:()=>t.mx().start,getInnerEnd:()=>t.mx().end,J:(e,i)=>t.yx(e,i),nt:(e,i,s,n,a)=>t.y.nt(e,i,s,n,a)}),Xb:t=>t.amplitude});class L3 extends FR{constructor(t,e,i,s,n,a,o,l){super(t,I3,e,i,s,n,a,o,l),this.Sx=90,this.vx=12,this.bx=ab,this.Lp=this.Zb.Jc(this.Jb).setMouseInteractions(!1),this.ix=u=>{let d=180*(u.u-this.Jb.xx())/Math.PI%360;for(;d<0;)d+=360;for(;d>360;)d-=360;if(d>=0&&d<=20||d>=340&&d<=360)return!1},this.Je=void 0,this.setTickStyle(i.polarRadialAxisTickStyle),this.setTitle("Degrees"),this.setNorth(this.Sx)}setTickStyle(t){return this.Mx=typeof t=="function"?t(this.Mx):t,this._x(),this.Zb.Ss(),this}getTickStyle(){return this.Mx}setTickFormattingFunction(t){return this.bx=t,this._x(),this.Zb.Ss(),this}getTickFormattingFunction(){return this.bx}setClockwise(t){this.Jb.wx(t);const e=this.Sx*Math.PI/180;return t?this.Jb.Cx(e+Math.PI/2):this.Jb.Cx(e-Math.PI/2),this.Zb.Ss(),this}getClockwise(){return!this.Jb.kx()}setNorth(t){for(;t<0;)t+=360;t%=360,this.Sx=t;const e=t*Math.PI/180;return this.getClockwise()?this.Jb.Cx(e+Math.PI/2):this.Jb.Cx(e-Math.PI/2),this.Zb.Ss(),this}getNorth(){return 180*this.Jb.xx()/Math.PI}setDivision(t){return this.vx=t,this._x(),this.Zb.Ss(),this}getDivision(){return this.vx}_g(){return[]}_r(t,e){return e}Cr(t,e,i){return{min:t,max:e}}sx(t,e){const i=t.kx()?1:-1,s=t.xx(),n=t.gx()?t.mx().end-t.mx().start:t.mx().start-t.mx().end;return{x:Math.cos((e-s)*i)*n,y:Math.sin((e-s)*i)*n}}qb(t,e){return t.Ee(e)}hx(t,e,i,s){const n=this.Mx,a=t.kx()?1:-1,o=t.xx(),l=(s.u-o)*a,u=Math.cos(l),d=Math.sin(l),f=t.gx()?t.mx().end-t.mx().start:t.mx().start-t.mx().end,y={x:u*f,y:d*f};e.Ve({x:0,y:0}).ze(y);const m={x:y.x+u*n.tickLength*t.Wi().x,y:y.y+d*n.tickLength*t.Wi().y};i.Ve(y).ze(m),e.Re(n.gridStrokeStyle),i.Re(n.tickStyle)}tx(t,e){const i=this.Mx,s=t.kx()?1:-1,n=t.xx();let a,o=(e.u-n)*s;for(;o<0;)o+=2*Math.PI;for(;o>=2*Math.PI;)o-=2*Math.PI;a=o>0&&o<=Math.PI?-o+Math.PI/2:-o-Math.PI/2;const l=i.tickLength+i.tickPadding,u=Math.cos(o)*l*t.Wi().x,d=Math.sin(o)*l*t.Wi().y;return{alignment:{x:0,y:0},padding:{x:u,y:d},rotation:180*a/Math.PI,offset:{x:u,y:d}}}lx(t,e,i){const s=t.gx()?t.mx().end-t.mx().start:t.mx().start-t.mx().end;this.Lp.eu(0).ze(360).ou(0).hu(s+.5*e.getThickness()*t.Wi().x).au(360).Ce(Ft).we(e)}ux(t,e,i){const s=t.xx(),n=this.tx(t,{u:0+s}),a=t.gx()?t.mx().end-t.mx().start:t.mx().start-t.mx().end;e.Ea(n.alignment).Nh(n.rotation).Ia(n.offset.x,n.offset.y).Fe(zt({x:a,y:0},n.padding))}_x(){this.$h({He:[],$e:[{Ue:"Radial ticks",Rg:0,lr:this.Mx,nr:this.bx,Br:(t,e,i,s)=>{const n=[],a=2*Math.PI/this.vx;for(let o=0;o<2*Math.PI;o+=a)n.push(o);return n},bh:{dr:()=>{},xh:()=>!1},Lr:void 0}],Ge:ab,Xh:void 0,jh:void 0})}}const ab=(r,t,e)=>(180*r/Math.PI).toFixed(0),I3={pr:()=>{},Sr:()=>{},br:()=>{},$b:r=>({getInnerStart:()=>0,getInnerEnd:()=>2*Math.PI,J:(t,e)=>{},nt:(t,e,i,s,n)=>r.x.nt(t,e,i,s,n)}),Xb:r=>r.radial},om=r=>!!(r&&typeof r=="object"&&"axisAmplitude"in r&&"axisRadial"in r),P3=r=>!!(r&&typeof r=="object"&&"angle"in r&&typeof r.angle=="number"&&"amplitude"in r&&typeof r.amplitude=="number");class U3 extends wc{constructor(t,e,i,s,n,a){super(e,i,n,a),this.xs="Sector",this.Tx=0,this.Fx=1*Math.PI/2,this.Ix=void 0,this.Px=void 0,this.ks=t,this.Jb=s,this.ky=this.ks.Jc(this.Jb).cs(this.getHighlight()),this.ds(this.ky),this.be=n.polarSectorFillStyle,this.xe=n.polarSectorStrokeStyle,this.setMouseInteractions(!1)}setAngleStart(t){return this.Tx=Jt(t,0,360),this.ks.Ss(),this}getAngleStart(){return this.Tx}setAngleEnd(t){return this.Fx=Jt(t,0,360),this.ks.Ss(),this}getAngleEnd(){return this.Fx}setAmplitudeStart(t){return this.Ix=t,this.ks.Ss(),this}getAmplitudeStart(){return this.Ix}setAmplitudeEnd(t){return this.Px=t,this.ks.Ss(),this}getAmplitudeEnd(){return this.Px}setFillStyle(t){return this.be=typeof t=="function"?t(this.be):t,this.ks.Ss(),this}getFillStyle(){return this.be}setStrokeStyle(t){return this.xe=typeof t=="function"?t(this.xe):t,this.ks.Ss(),this}getStrokeStyle(){return this.xe}Te(){const t=this.Jb.mx(),e=180*this.Jb.xx()/Math.PI,i=this.Ix!==void 0?Jt(this.Ix,t.start,t.end):t.start,s=this.Px!==void 0?Jt(this.Px,t.start,t.end):t.end,n=this.Jb.gx()?i-t.start:t.start-i,a=this.Jb.gx()?s-t.start:t.start-s,o=Math.min(n,a),l=Math.max(n,a),u=this.Jb.kx()?1:-1,d=Math.abs(this.Fx-this.Tx);this.ky.eu((this.Tx-e)*u).ze((this.Fx-e)*u).ou(100*o/l).hu(l).Ce(this.be).we(this.xe).au(Math.ceil(d/2))}Ie(t,e){t.cs(e),this.ks.Ss()}attach(t,e=!0,i=!1){return super.attach(t,e,i),ei(t,this.qi,i,{fill:this.be,stroke:this.xe}),this}}class R0 extends wc{constructor(){super(...arguments),this.tS=!0,this.Dx=!0}setAutoScrollingEnabled(t){return this.tS=t,this.Ji.us.Ss(),this}getAutoScrollingEnabled(){return this.tS}oS(){}Te(){}dp(){}setCursorEnabled(t){return this.Dx=t,this}getCursorEnabled(){return this.Dx}}class Yl extends R0{constructor(t,e,i,s,n,a){super(e,i,n,a),this.ks=t,this.Ji=e,this.scale=s}getAmplitudeMin(){return this.Bx?this.Bx.min:void 0}getAmplitudeMax(){return this.Bx?this.Bx.max:void 0}}const _c=(r,t,e,i,s)=>{const n=t.getIcon();return n?r.addRow(n,t.getName()):r.addRow(t.getName()),r.addRow("Angle:","",Math.round(e).toString()).addRow("Amplitude","",s(i))},xh=(r,t)=>{const e=[],i=t.mx().start,s=t.mx().end,n=t.gx(),a=t.kx()?1:-1,o=t.xx(),l=Math.abs(s-i),u=Math.min(i,s)+.001*l,d=Math.max(i,s)-.001*l;for(const f of r){const y=Jt(f.amplitude,u,d),m=f.angle*Math.PI/180-o,S=Math.cos(m*a)*(n?y-i:i-y),x=Math.sin(m*a)*(n?y-i:i-y),v=f.color;e.push({x:S,y:x,color:v})}return e},Nc=r=>{const t={min:bt,max:kt};for(const e of r)t.min=Math.min(t.min,e.amplitude),t.max=Math.max(t.max,e.amplitude);return t},E0=r=>r.slice().map(t=>t.angle>=0&&t.angle<=360?t:{...t,angle:t.angle%360}),Ah=(r,t)=>{let e=Vm(r);for(t.kx()||(e*=-1),e+=180*t.xx()/Math.PI;e<0;)e+=360;e%=360;const i=Ca(r),s=t.mx(),n=Math.abs(s.end-s.start);return{angle:e,amplitude:gh(s.start,s.end,i/n)}};class O3 extends Yl{constructor(t,e,i,s,n,a,o){super(t,e,i,s,n,a),this.xs="Heatmap Series",this.Lx=!0,this.dS=!1,this.Wy=G3,this.Gd=()=>ji(this.be);const l=this.Ji.getSeries().length;this.be=Kt(this.qi.polarHeatmapSeriesFillStyle||this.qi.heatmapGridSeriesFillStyle,l);const u=o.amplitudeStart||0,d=o.amplitudeEnd?(o.amplitudeEnd-u)/(o.annuli-1):o.amplitudeStep||1,f={sectors:o.sectors,annuli:o.annuli,amplitudeStart:u,amplitudeStep:d,heatmapDataType:"intensity",dataOrder:o.dataOrder||"annuli"};this.Un=f,this.Rx=t.Ex(s,[],f).Ce(this.be).cs(this.getHighlight()),this.ds(this.Rx);const y=Math.min(f.amplitudeStart,f.amplitudeStart+(f.annuli-1)*f.amplitudeStep),m=Math.max(f.amplitudeStart,f.amplitudeStart+(f.annuli-1)*f.amplitudeStep);this.Bx={min:y,max:m},this.setHighlightOnHover(!1)}invalidateIntensityValues(t){if(this.dS&&this.Ji.us.Nn(wt.vf),Array.isArray(t)){if(t.length===0||t[0].length===0)return this;const e={x:t.length,y:t[0].length,sectors:this.Un.dataOrder==="annuli"?t[0].length:t.length,annuli:this.Un.dataOrder==="annuli"?t.length:t[0].length},i=this.Un.dataOrder==="annuli"?this.Un.annuli:this.Un.sectors,s=this.Un.dataOrder==="annuli"?this.Un.sectors:this.Un.annuli;if(e.x>i||e.y>s){if(this.Ji.cA.Hn===!0){const a=`PolarHeatmapSeries.invalidateIntensityValues intensity matrix overflow.
Heatmap ${i}x${s}, input ${e.x}x${e.y}.
Excess data will be automatically clipped. This can result in sub-optimal performance.`;nt.console.warn(a)}const n=[];for(let a=0;a<i;a+=1)n[a]=t[a].slice(0,s);if((t=n).length===0||t[0].length===0)return this}this.Rx._v({type:"intensity",lengthPrimary:e.x,lengthSecondary:e.y,startPrimary:0,startSecondary:0,values:t})}else if("iSector"in t&&"iAnnulus"in t&&"values"in t){if(t.values.length===0||t.values[0].length===0)return this;const e={primary:t.values.length,secondary:t.values[0].length,sectors:this.Un.dataOrder==="annuli"?t.values[0].length:t.values.length,annuli:this.Un.dataOrder==="annuli"?t.values.length:t.values[0].length},i=this.Un.dataOrder==="annuli"?t.iAnnulus:t.iSector,s=i+e.primary-1,n=this.Un.dataOrder==="annuli"?t.iSector:t.iAnnulus,a=n+e.secondary-1,o=this.Un.dataOrder==="annuli"?this.Un.annuli-1:this.Un.sectors-1,l=this.Un.dataOrder==="annuli"?this.Un.sectors-1:this.Un.annuli-1;if(i<0||n<0){if(this.Ji.cA.Hn===!0){const u=`PolarHeatmapSeries.invalidateIntensityValues invalidation start below 0 not permitted.
iSector: ${t.iSector}, iAnnuli: ${t.iAnnulus}.
No intensity values will be invalidated.`;nt.console.warn(u)}return this}if(s>o||a>l){if(this.Ji.cA.Hn===!0){const m=`PolarHeatmapSeries.invalidateIntensityValues intensity matrix overflow.
Max indexes ${o}x${l}, input ${e.primary}x${e.secondary} starting at [${i},${n}].
Out of bounds data will be automatically clipped. This can result in sub-optimal performance.`;nt.console.warn(m)}const u=Math.max(s-o,0),d=e.primary-u,f=Math.max(a-l,0),y=[];for(let m=0;m<d;m+=1)y[m]=t.values[m].slice(0,f>0?-f:void 0);if((t={iSector:t.iSector,iAnnulus:t.iAnnulus,values:y}).values.length===0||t.values[0].length===0)return this}this.Rx._v({type:"intensity",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:i,startSecondary:n,values:t.values})}return this.ks.Ss(),this.dS=!0,this}setFillStyle(t){return this.be=typeof t=="function"?t(this.be):t,this.Rx.Ce(this.be),this.ks.Ss(),this}getFillStyle(){return this.be}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}clear(){return this.Rx.Nt(),this.ks.Ss(),this}setCursorInterpolationEnabled(t){return this.Lx=t,this.ks.us.Ss(),this}getCursorInterpolationEnabled(){return this.Lx}setCursorEnabled(t){return super.setCursorEnabled(t)}setIntensityInterpolation(t){return t=t||"disabled",this.Rx.xv(t),this.ks.Ss(),this}getIntensityInterpolation(){return this.Rx.Mv()}Kp(){return this.tS&&this.getVisible()}Ie(t,e){t.cs(e),this.ks.Ss()}Hc(t,e){const i=gt(t,this.Ji.engine.scale,this.scale),s=Ah(i,this.scale),n=this.Lx?this.Rx.zx(s):this.Rx.Hc(s);if(n)return Is(xh([n],this.scale)[0],this.scale,this.Wy(new Ii,this,{angleDeg:n.angle,amplitude:n.amplitude,intensity:n.cellValue,iAnnulus:n.iAnnulus,iSector:n.iSector},this.Ji.getAmplitudeAxis().formatValue).Zu(),this,this.be)}solveNearestFromScreen(t){return this.Hc(es(t,this.Ji.us),!1)}Te(){}attach(t,e=!0,i=!1){return super.attach(t,e),ei(t,this.qi,i,{fill:this.be}),this}}const G3=(r,t,e,i)=>{const s=t.getIcon();return s?r.addRow(s,t.getName()):r.addRow(t.getName()),r.addRow("Angle:","",Math.round(e.angleDeg).toString()).addRow("Amplitude","",i(e.amplitude)).addRow("Intensity","",e.intensity.toFixed(1))};class Y3 extends Yl{constructor(t,e,i,s,n,a,o){super(t,e,i,s,n,o),this.xs="Line Series",this.Vx=[],this.Ox=!1,this.Nx=!1,this.Wy=_c,this.lu=Kt(this.qi.polarLineSeriesStrokeStyle,a),this.Gx=t.rp(s,void 0,[kr.UserSeries]).Re(this.lu).cs(this.getHighlight()).Ka(Wi.Nearest),this.ds(this.Gx)}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}setData(t){return this.Vx.length!==0&&this.Ji.us.Nn(wt.vf),this.Vx=E0(t),this.Ox=!0,this.Bx=Nc(this.Vx),this.ks.Ss(),this}setStrokeStyle(t){this.lu=typeof t=="function"?t(this.lu):t;const e=this.lu;return this.Gx.Re(e),this.ks.Ss(),this}getStrokeStyle(){return this.lu}setConnectDataAutomaticallyEnabled(t){return this.Nx=t,this.ks.Ss(),this}getConnectDataAutomaticallyEnabled(){return this.Nx}Kp(){return this.tS&&this.Vx.length>0&&this.getVisible()}Ie(t,e){t.cs(e),this.ks.Ss()}Hc(t,e){return this.Wx(t,this.Gx)}solveNearestFromScreen(t){return this.Wx(es(t,this.Ji.us),this.Gx)}Wx(t,e){const i=e.Ux(t);if(!i)return;const{angle:s,amplitude:n}=Ah(i,this.scale);return Is(i,this.scale,this.Wy(new Ii,this,s,n,this.Ji.getAmplitudeAxis().formatValue).Zu(),this,this.lu.getFillStyle())}Te(){if(this.Ox||this.scale.Yx()){const t=xh(this.Vx,this.scale),e=Je(t);this.Nx?(t.push({...t[0]}),this.Gx.zl(!0)):this.Gx.zl(!1),this.Gx.Nt().nl(t).Yo(e),this.Ox=!1,this.Gx.Ps()}}attach(t,e=!0,i=!1){return super.attach(t,e,i),ei(t,this.qi,i,{stroke:this.lu}),this}}class H3 extends Yl{constructor(t,e,i,s,n,a,o){super(t,e,i,s,n,o),this.xs="Point Line Series",this.Vx=[],this.Ox=!1,this.Nx=!1,this.Hx=3,this.Aa=0,this.$x=qe.Circle,this.Wy=_c,this.be=Kt(this.qi.polarPointLineSeriesFillStyle,a),this.lu=Kt(this.qi.polarPointLineSeriesStrokeStyle,a),this.Gx=t.rp(s,void 0,[kr.UserSeries]).Re(this.lu).cs(this.getHighlight()).Ka(Wi.Nearest),this.ds(this.Gx),this.Xx=t.bS(s).Ce(this.be).il(this.$x).q(this.Hx).cs(this.getHighlight()).Ka(Wi.Nearest),this.ds(this.Xx)}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}setData(t){return this.Vx.length!==0&&this.Ji.us.Nn(wt.vf),this.Vx=E0(t),this.Ox=!0,this.Bx=Nc(this.Vx),this.ks.Ss(),this}setStrokeStyle(t){this.lu=typeof t=="function"?t(this.lu):t;const e=this.lu;return this.Gx.Re(e),this.ks.Ss(),this}getStrokeStyle(){return this.lu}setPointFillStyle(t){this.be=typeof t=="function"?t(this.be):t;const e=this.be;return this.Xx.Ce(e),this.ks.Ss(),this}getPointFillStyle(){return this.be}setPointSize(t){return this.Hx=t,this.Xx.q(t),this.ks.Ss(),this}getPointSize(){return this.Hx}setPointShape(t){return this.$x=t,this.Xx.il(this.$x),this}getPointShape(){return this.$x}setPointRotation(t){return this.Aa=t,this.Xx.Nh(t),this.ks.Ss(),this}getPointRotation(){return this.Aa}setConnectDataAutomaticallyEnabled(t){return this.Nx=t,this.ks.Ss(),this}getConnectDataAutomaticallyEnabled(){return this.Nx}Kp(){return this.tS&&this.Vx.length>0&&this.getVisible()}Ie(t,e){t.cs(e),this.ks.Ss()}Hc(t,e){return this.Wx(t,this.Gx)}solveNearestFromScreen(t){return this.Wx(es(t,this.Ji.us),this.Gx)}Wx(t,e){const i=e instanceof Np?e.Hc(t):e.Ux(t);if(!i)return;const{angle:s,amplitude:n}=Ah(i,this.scale);return Is(i,this.scale,this.Wy(new Ii,this,s,n,this.Ji.getAmplitudeAxis().formatValue).Zu(),this,"color"in i&&ws(this.be)?new it({color:i.color}):this.be)}Te(){if(this.Ox||this.scale.Yx()){const t=xh(this.Vx,this.scale),e=Je(t);this.Nx?(t.push({...t[0]}),this.Gx.zl(!0)):this.Gx.zl(!1),this.Gx.Nt().nl(t).Yo(e),this.Xx.Nt().nl(t).Yo(e),this.Ox=!1,this.Gx.Ps(),this.Xx.Ps()}}Cs(){return this.bs||this.$x}}class Bc extends y0{constructor(t,e,i,s,n,a,o,l,u){super(),this.No=_M(),this.D=new Li,this.$i=!1,this.jx=s,this.Zx=n,this.Qx=a,this.Jx=o,this.Kx=l,this.ks=t,this.scale=e,this.qx=i,this.qi=u}onHighlight(t){return this.D.on("highlight",t)}offHighlight(t){return this.D.off(t)}dispose(){return this.qx&&this.qx(this),this.ks.us.Ss(),this.D.emit("dispose",this),this.$i=!0,this}setVisible(t){return super.setVisible(t),this.Qx(),this.ks.us.Ss(),this}isDisposed(){return this.$i}onDispose(t){return this.D.on("dispose",t)}offDispose(t){return this.D.off(t,"dispose")}setMouseInteractions(t){return this.Jx(this,t),this}getMouseInteractions(){return this.Kx(this)}}class hb extends Bc{constructor(t,e,i,s,n,a,o,l,u,d,f,y,m,S,x,v,b){super(t,e,i,s,n,a,o,l,b),this.tM=1,this.iM=1,this.ks=t,this.scale=e,this.dimensionStrategy=u,this.start=d,this.end=f,this.lowerExtreme=y,this.lowerQuartile=m,this.median=S,this.upperQuartile=x,this.upperExtreme=v,this.boundaries=Qt(this.dimensionStrategy.toPoint(d,y),this.dimensionStrategy.toPoint(f,v)),this.sM=this.qi.boxSeriesBodyFillStyle,this.eM=this.qi.boxSeriesBodyStrokeStyle,this.lu=this.qi.boxSeriesStrokeStyle,this.hM=this.qi.boxSeriesMedianStrokeStyle,this.Ps()}getBoundaries(){return this.boundaries}setBodyWidth(t){return this.tM=t,this.Ps(),this}getBodyWidth(){return this.tM}setBodyFillStyle(t){return this.sM=typeof t=="function"?t(this.sM):t,this.Zx(),this}getBodyFillStyle(){return this.sM}setBodyStrokeStyle(t){return this.eM=typeof t=="function"?t(this.eM):t,this.Zx(),this}getBodyStrokeStyle(){return this.eM}setTailWidth(t){return this.iM=t,this.Ps(),this}getTailWidth(){return this.iM}setStrokeStyle(t){return this.lu=typeof t=="function"?t(this.lu):t,this.Zx(),this}getStrokeStyle(){return this.lu}setMedianStrokeStyle(t){return this.hM=typeof t=="function"?t(this.hM):t,this.Zx(),this}getMedianStrokeStyle(){return this.hM}Ps(){this.jx()}getDominantStyle(){return this.getBodyFillStyle()}}const Pm=(r,t,e)=>{const i=t.dt,s=e.dt;let n=(r.x-i.getInnerStart())/(i.getInnerEnd()-i.getInnerStart()),a=(r.y-s.getInnerStart())/(s.getInnerEnd()-s.getInnerStart());return e.eg===1&&(n=1-n),t.eg===1&&(a=1-a),Y(a,n)};class X3 extends MR{constructor(t,e,i,s,n,a,o,l){super(t,e,u0(i.dt,s.dt),n,l),this.rM=!1,this.nM=!1,this.oM=!0,this.aM=!0,this.lM=!1,this.uM=!1,this.setGridStrokeYStyle=u=>(this.cM.setGridStrokeStyle(u),this),this.getGridStrokeYStyle=()=>this.cM.getGridStrokeStyle(),this.axisX=i,this.axisY=s,this.dM=a,this.fM=o,this.AM=this.axisX.Yg(!1,this.dM).setMouseInteractions(!1).setAllocatesAxisSpace(!1),this.cM=this.axisY.Yg(!1,this.fM).setMouseInteractions(!1).setAllocatesAxisSpace(!1)}dispose(){return super.dispose(),this.AM.dispose(),this.cM.dispose(),this}pointAt(t){return super.pointAt(t),this.setPosition(gt(t.location,t.scale,this.scale)),this}setPosition(t){super.setPosition(t),this.AM.setValue(t.x),this.cM.setValue(t.y);const e=Pm(Y(this.AM.getValue(),this.cM.getValue()),this.axisX,this.axisY);return this.AM.setGridStrokeLength(this.lM?e.x:1),this.cM.setGridStrokeLength(this.uM?e.y:1),this}Te(){this.AM.setVisible(this.Xi&&this.Qg).setMarkerVisible(this.Xi&&this.Qg&&this.rM),this.cM.setVisible(this.Xi&&this.Qg).setMarkerVisible(this.Xi&&this.Qg&&this.nM);const t=Pm(Y(this.AM.getValue(),this.cM.getValue()),this.axisX,this.axisY);return this.AM.setGridStrokeLength(this.lM?t.x:1),this.cM.setGridStrokeLength(this.uM?t.y:1),super.Te()}setGridStrokeXCut(t){return this.lM=t,this.ks.Ss(),this}getGridStrokeXCut(){return this.lM}setGridStrokeYCut(t){return this.uM=t,this.ks.Ss(),this}getGridStrokeYCut(){return this.uM}setGridStrokeXStyle(t){return this.AM.setGridStrokeStyle(t),this}getGridStrokeXStyle(){return this.AM.getGridStrokeStyle()}setTickMarkerXVisible(t){return this.rM=t,this.ks.Ss(),this}getTickMarkerXVisible(){return this.rM}setTickMarkerYVisible(t){return this.nM=t,this.ks.Ss(),this}getTickMarkerYVisible(){return this.nM}setTickMarkerX(t){return this.AM.setMarker(t),this}setTickMarkerY(t){return this.cM.setMarker(t),this}getTickMarkerX(){return this.AM.getMarker()}getTickMarkerY(){return this.cM.getMarker()}}class W3 extends bR{constructor(t,e,i,s,n,a,o){super(t,e,i,s,o),this.lM=!1,this.uM=!1,this.gM=!1,this.mM=!1,this.yM=new Map,this.pM=new Map,this.rM=!0,this.nM=!0,this.iy=s,this.dM=n,this.fM=a,this.SM=o.cursorGridStrokeStyleX,this.vM=o.cursorGridStrokeStyleY}dispose(){return super.dispose(),this.yM.forEach(t=>t.dispose()),this.pM.forEach(t=>t.dispose()),this.bM=void 0,this.xM=void 0,this}Te(){return this.bM&&this.bM.setVisible(this.Xi&&this.Qg).setMarkerVisible(this.Xi&&this.Qg&&this.rM),this.xM&&this.xM.setVisible(this.Xi&&this.Qg).setMarkerVisible(this.Xi&&this.Qg&&this.nM),super.Te()}pointAt(t){const{location:e}=t,i=t.owner instanceof bh&&t.owner;if(!i)return this;const{axisX:s}=i,{axisY:n}=i,a=this.Ah(s,!0),o=this.Ah(n,!1);a!==this.bM&&this.bM&&this.bM.setVisible(!1),o!==this.xM&&this.xM&&this.xM.setVisible(!1),a.setValue(e.x),o.setValue(e.y);const l=Pm(Y(e.x,e.y),s,n);return a.setGridStrokeLength(this.lM?l.x:1),o.setGridStrokeLength(this.uM?l.y:1),this.bM=a,this.xM=o,super.pointAt(t)}ny(t){if(super.ny(t),t){const e=i=>i.setTextFillStyle(t);this.bM&&this.gM&&this.bM.setMarker(e),this.xM&&this.mM&&this.xM.setMarker(e)}}Ah(t,e){let i=(e?this.yM:this.pM).get(t);return i||(e?(i=t.Yg(!1,this.dM),this.yM.set(t,i)):(i=t.Yg(!1,this.fM),this.pM.set(t,i)),this.ar(i,e),i.setMouseInteractions(!1).setAllocatesAxisSpace(!1)),i}ar(t,e){const i=e?this.SM:this.vM;return t.setGridStrokeStyle(i),t.setMouseInteractions(!1),(e?this.rM:this.nM)?t.setMarkerVisible(!0):t.setMarkerVisible(!1),t}setGridStrokeXCut(t){return this.lM=t,this.ks.Ss(),this}getGridStrokeXCut(){return this.lM}setGridStrokeYCut(t){return this.uM=t,this.ks.Ss(),this}getGridStrokeYCut(){return this.uM}setGridStrokeXStyle(t){return this.SM=t instanceof Function?t(this.getGridStrokeXStyle()):t,this.yM.forEach(e=>e.setGridStrokeStyle(this.SM)),this}getGridStrokeXStyle(){return this.SM}setGridStrokeYStyle(t){return this.vM=t instanceof Function?t(this.getGridStrokeYStyle()):t,this.pM.forEach(e=>e.setGridStrokeStyle(this.vM)),this}getGridStrokeYStyle(){return this.vM}setTickMarkerXVisible(t){return this.rM=t,this.ks.Ss(),this}getTickMarkerXVisible(){return this.rM}setTickMarkerYVisible(t){return this.nM=t,this.ks.Ss(),this}getTickMarkerYVisible(){return this.nM}setTickMarkerX(t){return this.yM.forEach(e=>e.setMarker(t)),this.dM=this.dM.addStyler(t),this.ks.Ss(),this}setTickMarkerY(t){return this.pM.forEach(e=>e.setMarker(t)),this.fM=this.fM.addStyler(t),this.ks.Ss(),this}setTickMarkerXAutoTextStyle(t){return this.gM=t,this.ks.Ss(),this}getTickMarkerXAutoTextStyle(){return this.gM}setTickMarkerYAutoTextStyle(t){return this.mM=t,this.ks.Ss(),this}getTickMarkerYAutoTextStyle(){return this.mM}}class VR extends Hp{constructor(t,e,i,s){super(t,s),this.iy=t,this.dM=e,this.fM=i,this.oy=s}}class Wf extends VR{constructor(){super(...arguments),this.uy=(t,e,i,s)=>this.ly(new W3(t,e,i,this.iy,this.dM,this.fM,s),s),this.addStyler=t=>new Wf(this.iy,this.dM,this.fM,this.oy.map(e=>e).concat(t)),this.setResultTableBackground=t=>new Wf(t,this.dM,this.fM,this.oy.map(e=>e))}}class mc extends VR{constructor(){super(...arguments),this.Ay=(t,e,i,s,n)=>this.ly(new X3(t,e,i,s,this.iy,this.dM,this.fM,n),n),this.addStyler=t=>new mc(this.iy,this.dM,this.fM,this.oy.map(e=>e).concat(t)),this.setResultTableBackground=t=>new mc(t,this.dM,this.fM,this.oy.map(e=>e))}}const q3=new Wf(ir,no.PointableTextBox,no.PointableTextBox,[(r,t)=>{Xp(r),r.setTickMarkerX(e=>{e.setEffect(!0).setTextFont(t.cursorTickMarkerXTextFont).setTextFillStyle(t.cursorTickMarkerXTextFillStyle),io(e)&&e.setBackground(i=>i.setFillStyle(t.cursorTickMarkerXBackgroundFillStyle).setStrokeStyle(t.cursorTickMarkerXBackgroundStrokeStyle))}),r.setTickMarkerY(e=>{e.setEffect(!0).setTextFont(t.cursorTickMarkerYTextFont).setTextFillStyle(t.cursorTickMarkerYTextFillStyle),io(e)&&e.setBackground(i=>i.setFillStyle(t.cursorTickMarkerYBackgroundFillStyle).setStrokeStyle(t.cursorTickMarkerYBackgroundStrokeStyle))})}]),j3=new mc(ir,no.PointableTextBox,no.PointableTextBox,[(r,t)=>{RR(r,t),r.setTickMarkerX(e=>{e.setEffect(!0).setTextFont(t.cursorTickMarkerXTextFont).setTextFillStyle(t.cursorTickMarkerXTextFillStyle),io(e)&&e.setBackground(i=>i.setFillStyle(t.cursorTickMarkerXBackgroundFillStyle).setStrokeStyle(t.cursorTickMarkerXBackgroundStrokeStyle))}),r.setTickMarkerY(e=>{e.setEffect(!0).setTextFont(t.cursorTickMarkerYTextFont).setTextFillStyle(t.cursorTickMarkerYTextFillStyle),io(e)&&e.setBackground(i=>i.setFillStyle(t.cursorTickMarkerYBackgroundFillStyle).setStrokeStyle(t.cursorTickMarkerYBackgroundStrokeStyle))})}]),$3=new mc(ir,no.PointableTextBox,no.PointableTextBox,[(r,t)=>{((e,i)=>{e.setPointMarker(s=>s.setFillStyle(i.seriesMarkerPointMarkerFillStyle).setSize(i.seriesMarkerPointMarkerSize).setShape(i.seriesMarkerPointMarkerShape)).setResultTable(s=>s.setEffect(!0).setBackground(n=>n).setOrigin(Y(-1,-1)).setMargin(10))})(r,t),r.setTickMarkerX(e=>{e.setEffect(!0).setTextFont(t.cursorTickMarkerXTextFont).setTextFillStyle(t.cursorTickMarkerXTextFillStyle),io(e)&&e.setBackground(i=>i.setFillStyle(t.cursorTickMarkerXBackgroundFillStyle).setStrokeStyle(t.cursorTickMarkerXBackgroundStrokeStyle))}),r.setTickMarkerY(e=>{e.setEffect(!0).setTextFont(t.cursorTickMarkerYTextFont).setTextFillStyle(t.cursorTickMarkerYTextFillStyle),io(e)&&e.setBackground(i=>i.setFillStyle(t.cursorTickMarkerYBackgroundFillStyle).setStrokeStyle(t.cursorTickMarkerYBackgroundStrokeStyle))})}]),sl=(r,t,e)=>{switch(r){case Sr.always:return!0;case Sr.never:return!1;case Sr.whenDragged:return e;case Sr.whenHovered:return t&&!e;case Sr.whenHoveredOrDragged:return e||t;case Sr.whenNotDragged:return!e;default:return!1}},ob=(r,t)=>Math.min(Math.max(r,t.getInnerStart()),t.getInnerEnd());class J3{constructor(t,e,i,s,n,a){this.MM=Sr.always,this._M=Sr.always,this.Bo=!0,this.$i=!1,this.wM=!1,this.CM=!1,this.ua=Y(0,0),this.Mu=ke.draggable,this._u=void 0,this.D=new Li,this.Xi=!0,this.kM=(l,u,d)=>{this.wM=!0,this.ks.Ss();const f=this.Mu===ke.notDraggable?this.Mu:d||this.Mu;this._u=this.ks.us.Wr(f===ke.notDraggable?ne.Restricted:f===ke.draggable?ne.Move:f===ke.onlyHorizontal?ne.Horizontal:ne.Vertical)},this.TM=()=>{this.wM=!1,this.ks.Ss(),this.ks.us.Ur(this._u)},this.FM=(l,u)=>{this.CM=!0,xt(u),this.ks.Ss()},this.IM=(l,u)=>{if(this.Mu!==ke.notDraggable){const d=u||this.Mu,f=gt(this.ks.us.Pe(l.x,l.y),this.ks.us.dt,this.scale),y=Y(d!==ke.onlyVertical?ob(f.x,this.scale.x):this.ua.x,d!==ke.onlyHorizontal?ob(f.y,this.scale.y):this.ua.y);return this.setPosition(y),!0}return!1},this.PM=(l,u)=>{this.CM=!1,xt(u),this.ks.Ss()},this.onDispose=l=>this.D.on("dispose",l),this.offDispose=l=>this.D.off(l,"dispose"),this.ks=t,this.renderingScale=e,this.scale=i,this.Eb=s,this.DM=n,this.qi=a;const o=s.getPointMarker().setMouseInteractions(!0);o.onMouseEnter((l,u)=>this.kM(l,u)),o.onMouseLeave(this.TM),o.onMouseDragStart(this.FM),o.onMouseDrag((l,u)=>this.IM(Y(u.clientX,u.clientY))&&xt(u)),o.onMouseDragStop(this.PM),o.onTouchStart(this.FM),o.onTouchMove((l,u)=>this.IM(Y(u.clientX,u.clientY))&&xt(u)),o.onTouchEnd(this.PM),s.getResultTable().setMouseInteractions(!0),this.setPosition(this.ua)}setPosition(t){return this.ua=t,this.Eb.setPosition(t),this.D.emit("positionChange",this,this.ua),this}getPosition(){return this.ua}onPositionChange(t){return this.D.on("positionChange",t)}offPositionChange(t){return this.D.off(t,"positionChange")}setPointMarkerVisibility(t){return this.MM=t,this.ks.Ss(),this}getPointMarkerVisibility(){return this.MM}setResultTableVisibility(t){return this._M=t,this.ks.Ss(),this}getResultTableVisibility(){return this._M}setMouseInteractions(t){return this.Bo=t,this.Eb.getPointMarker().setMouseInteractions(t),this.Eb.getResultTable().setMouseInteractions(t),this}getMouseInteractions(){return this.Bo}setAutoFitStrategy(t){return this.Eb.setAutoFitStrategy(t),this}getAutoFitStrategy(){return this.Eb.getAutoFitStrategy()}isAttached(){return!0}Te(){const t=this.isAttached();return sl(this.MM,this.wM,this.CM)?this.Eb.setPointMarkerVisible(!0):this.Eb.setPointMarkerVisible(!1),t&&sl(this._M,this.wM,this.CM)?this.Eb.setResultTableVisible(!0):this.Eb.setResultTableVisible(!1),this.Eb.Te(),this}Ps(){return this.Eb.Ps(),this}pointAt(t){return this.Eb.pointAt(t),this}dispose(){return this.$i||(this.$i=!0,this.DM(this),this.Eb.dispose(),this.D.emit("dispose")),this}isDisposed(){return this.$i}setVisible(t){const e=this.Xi!==t;return this.Xi=t,this.Eb.setVisible(t),e&&this.D.emit("visibleStateChanged",this,this.Xi),this}getVisible(){return this.Xi}onVisibleStateChanged(t){return this.D.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.D.off(t,"visibleStateChanged")}setPointMarker(t){return this.Eb.setPointMarker(t),this}getPointMarker(){return this.Eb.getPointMarker()}setResultTable(t){return this.Eb.setResultTable(t),this}getResultTable(){return this.Eb.getResultTable()}setDraggingMode(t=ke.notDraggable){return this.Mu=t,this.ks.Ss(),this}getDraggingMode(){return this.Mu}}class Z3 extends J3{constructor(t,e,i,s,n,a,o){super(t,e,u0(i.dt,s.dt),n.Ay(t,e,i,s,o),a,o),this.BM=Sr.always,this.LM=Sr.always,this.RM=Sr.always,this.EM=Sr.always,this.gridStrokeStyleX=this.Eb.getGridStrokeXStyle(),this.gridStrokeStyleY=this.Eb.getGridStrokeYStyle(),this.ks=t,this.axisX=i,this.axisY=s,this.DM=a;const l=this.Eb.getTickMarkerX().setMouseInteractions(!0);l.onMouseEnter((d,f)=>this.kM(d,f,ke.onlyHorizontal)),l.onMouseLeave(this.TM),l.onMouseDragStart(this.FM),l.onMouseDrag((d,f)=>this.IM(Y(f.clientX,f.clientY),ke.onlyHorizontal)&&xt(f)),l.onMouseDragStop(this.PM),l.onTouchStart(this.FM),l.onTouchMove((d,f)=>this.IM(Y(f.clientX,f.clientY),ke.onlyHorizontal)&&xt(f));const u=this.Eb.getTickMarkerY().setMouseInteractions(!0);u.onMouseEnter((d,f)=>this.kM(d,f,ke.onlyVertical)),u.onMouseLeave(this.TM),u.onMouseDragStart(this.FM),u.onMouseDrag((d,f)=>this.IM(Y(f.clientX,f.clientY),ke.onlyVertical)&&xt(f)),u.onMouseDragStop(this.PM),u.onTouchStart(this.FM),u.onTouchMove((d,f)=>this.IM(Y(f.clientX,f.clientY),ke.onlyVertical)&&xt(f))}Te(){const t=this.isAttached();return this.Xi&&t&&sl(this.RM,this.wM,this.CM)?this.Eb.setTickMarkerXVisible(!0):this.Eb.setTickMarkerXVisible(!1),this.Xi&&t&&sl(this.EM,this.wM,this.CM)?this.Eb.setTickMarkerYVisible(!0):this.Eb.setTickMarkerYVisible(!1),this.Eb.setGridStrokeXStyle(this.Xi&&t&&sl(this.BM,this.wM,this.CM)?this.gridStrokeStyleX:At),this.Eb.setGridStrokeYStyle(this.Xi&&t&&sl(this.LM,this.wM,this.CM)?this.gridStrokeStyleY:At),super.Te()}setGridStrokeXVisibility(t){return this.BM=t,this.ks.Ss(),this}getGridStrokeXVisibility(){return this.BM}setGridStrokeYVisibility(t){return this.LM=t,this.ks.Ss(),this}getGridStrokeYVisibility(){return this.LM}setTickMarkerXVisibility(t){return this.RM=t,this.ks.Ss(),this}getTickMarkerXVisibility(){return this.RM}setTickMarkerYVisibility(t){return this.EM=t,this.ks.Ss(),this}getTickMarkerYVisibility(){return this.EM}setGridStrokeXCut(t){return this.Eb.setGridStrokeXCut(t),this}getGridStrokeXCut(){return this.Eb.getGridStrokeXCut()}setGridStrokeYCut(t){return this.Eb.setGridStrokeYCut(t),this}getGridStrokeYCut(){return this.Eb.getGridStrokeYCut()}setGridStrokeXStyle(t){return this.gridStrokeStyleX=typeof t=="function"?t(this.gridStrokeStyleX):t,this}getGridStrokeXStyle(){return this.Eb.getGridStrokeXStyle()}setGridStrokeYStyle(t){return this.gridStrokeStyleY=typeof t=="function"?t(this.gridStrokeStyleY):t,this}getGridStrokeYStyle(){return this.Eb.getGridStrokeYStyle()}setTickMarkerX(t){return this.Eb.setTickMarkerX(t),this}getTickMarkerX(){return this.Eb.getTickMarkerX()}setTickMarkerY(t){return this.Eb.setTickMarkerY(t),this}getTickMarkerY(){return this.Eb.getTickMarkerY()}setMouseInteractions(t){return super.setMouseInteractions(t),this.Eb.getTickMarkerX().setMouseInteractions(t),this.Eb.getTickMarkerY().setMouseInteractions(t),this}}class zR extends Z3{}class Q3 extends zR{constructor(t,e,i,s,n,a){super(t,e,i.axisX,i.axisY,s,n,a),this.zM=!1,this.ks=t,this.owningSeries=i}setPosition(t){return super.setPosition(t),this.zM=!1,this.ks.Ss(),this}Ps(){if(!this.zM){const t=this.owningSeries.solveNearestFromScreen(gt(this.ua,this.scale,this.ks.us.dt));t?(this.ua=gt(t.location,this.owningSeries.scale,this.scale),this.Eb.pointAt(t),this.zM=!0):this.Eb.setPosition(this.ua)}return super.Ps()}isAttached(){return this.zM}}class bh extends R0{constructor(t,e,i,s,n,a,o,l,u,d){super(t,e,u,d),this.VM=[],this.addMarker=(f=$3)=>{const y=new Q3(this.OM(),this.Ji.uiScale,this,f,this.removeMarker,this.qi);return this.VM.push(y),y},this.removeMarker=f=>{const y=this.VM.indexOf(f);y!==-1&&this.VM.splice(y,1)},this.ts=new Map,this.chart=t,this.ks=i,this.axisX=s,this.axisY=n,this.axisXAttachHandler=a,this.axisYAttachHandler=o,this.OM=l,this.scale=u0(s.dt,n.dt),this.NM=t.GM,t.GM+=1,this.WM(this.scale),this.attacheAxis(),this.onMouseEnter(this.chart.UM),this.onMouseLeave(this.chart.YM),this.onMouseWheel(this.chart.sS),this.onMouseDragStart(this.chart.HM),this.onMouseDrag(this.chart.eS),this.onMouseDragStop(this.chart.$M),this.onTouchStart(this.chart.hS.onTouchStart),this.onTouchMove(this.chart.hS.onTouchMove),this.onTouchEnd(this.chart.hS.onTouchEnd)}get xAxis(){return this.axisX}get yAxis(){return this.axisY}attacheAxis(){this.XM=this.axisXAttachHandler(this),this.jM=this.axisYAttachHandler(this)}Te(){super.Te();for(let t=0;t<this.VM.length;t+=1)this.VM[t].Ps().Te()}ds(t,e){super.ds(t,e),t.Jo(this.NM)}setDrawOrder(t){return this.NM=t.seriesDrawOrderIndex,this.ts.forEach((e,i)=>{i.Jo(this.NM)}),this.Ji.us.Ss(),this}dispose(){return super.dispose(),this.VM.slice().forEach(t=>t.dispose()),this.XM(this),this.jM(this),this}ZM(){for(let t=0;t<this.VM.length;t+=1)this.VM[t].setPosition(this.VM[t].getPosition());this.ks.Ss()}getBoundaries(){return Qt(Y(this.getXMin()||0,this.getYMin()||0),Y(this.getXMax()||0,this.getYMax()||0))}setCursorEnabled(t){return super.setCursorEnabled(t)}}const oh=(r,t,e,i)=>{const s=r.length;let n=0;if(t!==void 0){const a=e-t;if(a>0){const o=r.slice(n,a);n+=a,i(o,!0)}}for(;n<s;){const a=r.slice(n,n+e);n+=e,i(a,!1)}},T0=(r,t=e=>e)=>{const e=[];let i;for(let s=0;s<r.length;s+=1){i=r[s];const n=t(i.tl()),a=i.qa(),o=a?t(a):[];let l=!1,u=!1;"El"in i&&(l=i.El(),u=i.Vl()),e.push.apply(e,n.slice(l?1:0,n.length-(u&&o.length===0?1:0))),e.push.apply(e,o.slice(l&&n.length===0?1:0,o.length-(u?1:0)))}return e},_R=(r,t=1,e)=>{const i=e!==void 0?e:0,s=new Array(r.length);for(let n=0;n<r.length;n+=1)s[n]={x:i+t*n,y:r[n]};return s},K3=(r,t,e,i)=>{const s=t.getIcon();return s?r.addRow(s,t.getName()):r.addRow(t.getName()),r.addRow("X","",t.axisX.formatValue(e)).addRow("Y","",t.axisY.formatValue(i))};class Zp extends bh{constructor(t,e,i,s,n,a,o,l,u,d,f){super(t,e,i,s,n,a,o,l,d,f),this.QM=[],this.yu=[],this.JM=0,this.ji=!1,this.Hi=Yr.onHover,this.Wy=K3,this.Ji.us.Nn(wt.mf),this.KM=u}setDataCleaning(t){const e=t&&t.minDataPointCount;return this.JM=e!==void 0&&e>0?e:0,this.ks.Ss(),this}add(t){if(this.QM.length!==0&&this.Ji.us.Nn(wt.vf),Array.isArray(t)?this.qM(t):this.qM([t]),this.yu.length>0){const e=this.yu[this.yu.length-1];this.t_={x:e.x,y:e.y}}return this}addArrayX(t,e=1,i){let s=i;return s||(s=this.t_?this.t_.y+e:0),this.add(((n,a=1,o)=>{const l=o!==void 0?o:0,u=new Array(n.length);for(let d=0;d<n.length;d+=1)u[d]={x:n[d],y:l+a*d};return u})(t,e,s)),this}addArrayY(t,e=1,i=0){let s=i;return s||(s=this.t_?this.t_.x+e:0),this.add(_R(t,e,s)),this}addArraysXY(t,e){if(t.length!==e.length)throw new Error("arrayX and arrayY lengths are not equal");return this.add(((i,s)=>{const n=new Array(i.length);for(let a=0;a<i.length;a+=1)n[a]={x:i[a],y:s[a]};return n})(t,e)),this}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}getPointAmount(){return this.QM.reduce((t,e)=>t+e.ol()+e.al(),this.yu.length)}clear(){this.i_=void 0;for(let t=0;t<this.QM.length;t+=1)this.QM[t].Nt();return this.yu.length=0,this.t_=void 0,this.ks.Ss(),this.D.emit("dataClear",this),this}getLastPoint(){return this.t_}Kp(){return this.tS&&this.getPointAmount()>0&&this.getVisible()}getXMax(){return this.KM.getXMax(this.QM,this.i_)||0}getXMin(){return this.KM.getXMin(this.QM,this.i_)||0}getYMax(){return this.KM.getYMax(this.QM,this.i_)||0}getYMin(){return this.KM.getYMin(this.QM,this.i_)||0}br(){const t=Y(0,0);for(const e of this.QM)t.x=Math.max(t.x,e.vl()),t.y=Math.max(t.y,e.bl());return t}s_(t,e,i,s){this.KM.s_(t,e,i,s,this.scale,n=>{})}oS(){super.oS();const t=this.QM.length;this.e_&&this.s_(this.QM,this.getPointAmount(),this.e_,this.JM),t!==this.QM.length&&this.ZM()}Te(){super.Te();const t=this.getBoundaries();this.yu.length>0&&(this.h_(this.yu),this.yu=[]);for(const e of this.QM)e.Yo(t);return super.Te()}dp(){super.dp(),this.i_=void 0,this.yu.length=0}qM(t){t.length!==0&&(this.i_?this.i_=Ws(this.i_,Je(t)):this.i_=Je(t),this.D.emit("dataAdd",this,t,this.i_),this.yu=ls(this.yu,t,{canReturnB:!1}),this.ks.Ss())}r_(){return T0(this.QM)}n_(t){return this.D.on("dataAdd",t)}o_(t){return this.D.off(t)}a_(t){return this.D.on("dataClear",t)}l_(t){return this.D.off(t)}}const ao=(r,t,e,i)=>{let s,n,a=Number.MAX_VALUE;for(let o=0;o<t.length;o+=1){const l=t[o],u=e(l,r);if(u){const d=i(r,u);(s===void 0||d<a)&&(s=u,n=l,a=d)}}return s&&n?[s,n]:void 0};class Lc extends bh{constructor(){super(...arguments),this.u_=[],this.c_=void 0,this.d_=!1,this.qx=t=>{const e=this.u_.findIndex(i=>i===t);e>=0&&this.u_.splice(e,1),this.d_=!0,this.c_=void 0,this.ks.Ss()},this.jx=()=>{this.c_=void 0,this.d_=!0,this.Ji.us.Ss()},this.Zx=()=>{this.d_=!0,this.Ji.us.Ss()},this.Qx=()=>{this.c_=void 0,this.d_=!0,this.chart.us.Ss()},this.Jx=(t,e)=>{this.setMouseInteractions(e)},this.f_=t=>this.getMouseInteractions()}Te(){super.Te(),this.d_&&(this.A_(this.u_),this.d_=!1)}clear(){return this.u_.slice().forEach(Qh),this.u_.length=0,this.d_=!0,this.c_=void 0,this.ks.Ss(),this}g_(t,e){e!==void 0?this.u_.splice(e,0,t):this.u_.push(t),this.d_=!0,this.m_&&this.m_(t),t.onMouseEnter((i,s)=>this.wt(i,s)),t.onMouseLeave((i,s)=>this.Ct(i,s)),t.onMouseClick((i,s)=>this.kt(i,s)),t.onMouseDoubleClick((i,s)=>this.Tt(i,s)),t.onMouseDown((i,s)=>this.Ft(i,s)),t.onMouseUp((i,s)=>this.It(i,s)),t.onMouseMove((i,s)=>this.Pt(i,s)),t.onMouseDragStart((i,s,n)=>this.Bt(i,s,n)),t.onMouseDrag((i,s,n,a,o)=>this.Dt(i,s,n,a,o)),t.onMouseDragStop((i,s,n,a)=>this.Lt(i,s,n,a)),t.onMouseWheel((i,s)=>this.Rt(i,s)),t.onTouchStart((i,s)=>this.Et(i,s)),t.onTouchMove((i,s)=>this.zt(i,s)),t.onTouchEnd((i,s)=>this.Vt(i,s)),this.ks.Ss()}Kp(){return this.tS&&this.u_.length>0&&this.getVisible()}setDefaultStyle(t){this.m_=t,this.u_.forEach(t),t(this.y_);for(let e=0;e<this.Qi.length;e+=1)this.p_(this.Qi[e]);return this.d_=!0,this.Ji.us.Ss(),this}Hc(t,e){const i=ao(t,e?this.u_.filter(s=>s.getVisible()&&s.getIsUnderMouse()):this.u_.filter(s=>s.getVisible()),this.S_,Kn);if(i!==void 0)return{location:gt(i[0],this.ks.us.dt,this.scale),scale:this.scale,resultTableContent:this.Wy(new Ii,this,i[1]).Zu(),owner:this,fillStyle:i[1].getDominantStyle(),figure:i[1]}}solveNearestFromScreen(t){return this.Hc(es(t,this.Ji.us),!1)}getXMax(){return this.c_||(this.c_=this.v_()),this.c_.max.x}getXMin(){return this.c_||(this.c_=this.v_()),this.c_.min.x}getYMax(){return this.c_||(this.c_=this.v_()),this.c_.max.y}getYMin(){return this.c_||(this.c_=this.v_()),this.c_.min.y}br(){return Y(0,0)}v_(){const t=Qt(Jn(bt,bt),Jn(kt,kt));for(let e=0;e<this.u_.length;e+=1)if(this.u_[e].getVisible()){const i=this.u_[e].getBoundaries();t.min.x=Math.min(t.min.x,i.min.x),t.min.y=Math.min(t.min.y,i.min.y),t.max.x=Math.max(t.max.x,i.max.x),t.max.y=Math.max(t.max.y,i.max.y)}return t}attach(t,e=!0,i=!1){return super.attach(t,e),this.p_(t,e,i),this}p_(t,e=!0,i=!1){ei(t,this.qi,i,{fill:this.u_.length>0?this.u_[0].getDominantStyle():this.y_.getDominantStyle()})}}const tD=(r,t,e)=>r.addRow(t.getName()).addRow("Lower extreme","",e.lowerExtreme.toFixed(2)).addRow("Lower quartile","",e.lowerQuartile.toFixed(2)).addRow("Median","",e.median.toFixed(2)).addRow("Upper quartile","",e.upperQuartile.toFixed(2)).addRow("Upper extreme","",e.upperExtreme.toFixed(2));class eD extends Lc{constructor(t,e,i,s,n,a,o,l,u,d,f,y){super(t,e,i,s,n,a,o,l,d,f),this.xs="Box Series",this.Wy=tD,this.b_=Bl(),this.S_=m=>gt(this.Ts.toPoint((m.start+m.end)/2,m.median),this.scale,this.ks.us.dt),this.Ji.us.Nn(wt.pf),this.Ts=u,this.y_=new hb(this.ks,this.scale,this.qx,se,se,se,se,m=>!1,this.Ts,0,0,0,0,0,0,0,this.qi).dispose(),this.x_=new ka(()=>{const m=this.ks.Lg(this.scale);return this.ds(m,{setEventHandlers:!1}),m},(m,S,x)=>(m.Re(x.strokeStyle),S.map(v=>{const b=v.existingMember||m.zr();return b.Eg(v.start,v.end),b}))),this.M_=new ka(()=>{const m=this.b_._t(this.ks.Ob(this.scale));return this.ds(m,{setEventHandlers:!1}),m},(m,S,x)=>(m.Ce(x.fillStyle).we(x.strokeStyle),S.map(v=>{const b=v.existingMember||m.zr();return b.pl(v.vertices),this.b_.Ot(b,v.figure),b})),()=>{this.b_.Nt()},(m,S)=>{this.gs(S)})}WM(t){if(!(t instanceof Se||t instanceof wi))throw new Error("BoxSeries only supports Linear Axes")}A_(t){const e=this.M_.fp(),i=this.x_.fp();t.forEach(s=>{if(!s.getVisible())return;const n=this.Ts.toPoint((s.start+s.end-s.tM*(s.end-s.start))/2,s.lowerQuartile),a=this.Ts.toPoint((s.end-s.start)*s.tM,s.upperQuartile-s.lowerQuartile),o=this.Ts.toPoint((s.start+s.end)/2,s.lowerQuartile),l=this.Ts.toPoint((s.start+s.end)/2,s.lowerExtreme),u=this.Ts.toPoint((s.start+s.end)/2,s.upperQuartile),d=this.Ts.toPoint((s.start+s.end)/2,s.upperExtreme),f=this.Ts.toPoint((s.start+s.end-s.iM*(s.end-s.start))/2,s.lowerExtreme),y=this.Ts.toPoint((s.start+s.end+s.iM*(s.end-s.start))/2,s.lowerExtreme),m=this.Ts.toPoint((s.start+s.end-s.iM*(s.end-s.start))/2,s.upperExtreme),S=this.Ts.toPoint((s.start+s.end+s.iM*(s.end-s.start))/2,s.upperExtreme),x=this.Ts.toPoint((s.start+s.end-s.tM*(s.end-s.start))/2,s.median),v=this.Ts.toPoint((s.start+s.end+s.tM*(s.end-s.start))/2,s.median);e.add({No:s.No,vertices:[{x:n.x,y:n.y},{x:n.x,y:n.y+a.y},{x:n.x+a.x,y:n.y+a.y},{x:n.x+a.x,y:n.y}],figure:s},{fillStyle:s.sM,strokeStyle:s.eM}),i.add({No:0,start:o,end:l,figure:s},{strokeStyle:s.lu}),i.add({No:0,start:u,end:d,figure:s},{strokeStyle:s.lu}),i.add({No:0,start:f,end:y,figure:s},{strokeStyle:s.lu}),i.add({No:0,start:m,end:S,figure:s},{strokeStyle:s.lu}),i.add({No:0,start:x,end:v,figure:s},{strokeStyle:s.hM})}),e.finishPlot(),i.finishPlot()}add(t){const e=new hb(this.ks,this.scale,this.qx,this.jx,this.Zx,this.Qx,this.Jx,this.f_,this.Ts,t.start,t.end,t.lowerExtreme,t.lowerQuartile,t.median,t.upperQuartile,t.upperExtreme,this.qi);return this.g_(e),this.d_=!0,this.Ji.us.Ss(),e}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}}class lb extends Bc{constructor(t,e,i,s,n,a,o,l,u,d){super(t,e,i,s,n,a,o,l,u),this.dimensions={x:0,y:0,radiusX:0,radiusY:0},this.Ya=Qt(Y(0,0),Y(0,0)),this.ks=t,this.scale=e,this.be=Kt(u.ellipseSeriesFillStyle,d),this.xe=Kt(u.ellipseSeriesStrokeStyle,d)}getBoundaries(){return this.Ya}setDimensions(t){return this.dimensions=t,this.Ya=Qt(Y(t.x-t.radiusX,t.y-t.radiusY),Y(t.x+t.radiusX,t.y+t.radiusY)),this.jx(),this.ks.Ss(),this}getDimensions(){return this.dimensions}setFillStyle(t){return this.be=typeof t=="function"?t(this.be):t,this.Zx(),this}getFillStyle(){return this.be}setStrokeStyle(t){return this.xe=typeof t=="function"?t(this.xe):t,this.Zx(),this}getStrokeStyle(){return this.xe}getDominantStyle(){return this.be}}class iD extends Lc{constructor(t,e,i,s,n,a,o,l,u,d,f){super(t,e,i,s,n,a,o,l,u,d),this.xs="Ellipse Series",this.Wy=(y,m,S)=>y.addRow(m.xs).addRow("X","",m.axisX.formatValue(S.getDimensions().x)).addRow("Y","",m.axisY.formatValue(S.getDimensions().y)).addRow("Radius X","",m.axisX.formatValue(S.getDimensions().radiusX)).addRow("Radius Y","",m.axisY.formatValue(S.getDimensions().radiusY)),this.b_=Bl(),this.S_=y=>{const m=y.getDimensions(),S=Y(m.x,m.y);return gt(S,this.scale,this.ks.us.dt)},this.Ji.us.Nn(wt.pf),this.__=f,this.y_=new lb(this.ks,this.scale,se,se,se,se,se,y=>!1,this.qi,this.__).dispose(),this.M_=new ka(()=>{const y=this.b_._t(this.ks.Ob(this.scale));return this.ds(y,{setEventHandlers:!1}),y},(y,m,S)=>(y.Ce(S.fillStyle).we(S.strokeStyle),m.map(x=>{const v=x.existingMember||y.zr();return v.pl(x.vertices),this.b_.Ot(v,x.figure),v})),()=>{this.b_.Nt()},(y,m)=>{this.gs(m)})}WM(t){if(!(t instanceof Se||t instanceof wi))throw new Error("EllipseSeries only supports Linear Axes")}A_(t){const e=this.M_.fp();t.forEach(i=>{if(!i.getVisible())return;const s=i.getDimensions(),n=[],a=s.drawSteps!==void 0?s.drawSteps:72;for(let u=0;u<=a;u+=1){const d=u/a*2*Math.PI,f=s.x+s.radiusX*Math.cos(d),y=s.y+s.radiusY*Math.sin(d);n.push({x:f,y})}const o=i.getFillStyle(),l=i.getStrokeStyle();e.add({No:i.No,vertices:n,figure:i},{fillStyle:o,strokeStyle:l})}),e.finishPlot()}add(t){const e=new lb(this.ks,this.scale,this.qx,this.jx,this.Zx,this.Qx,this.Jx,this.f_,this.qi,this.__).setDimensions(t);return this.g_(e),this.d_=!0,this.Ji.us.Ss(),e}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}}class ub extends Bc{constructor(t,e,i,s,n,a,o,l,u,d){super(t,e,i,s,n,a,o,l,u),this.w_=[],this.Ya=_e,this.ks=t,this.scale=e,this.be=Kt(u.polygonSeriesFillStyle,d),this.xe=Kt(u.polygonSeriesStrokeStyle,d)}getBoundaries(){return this.Ya}setDimensions(t){return this.w_=t,this.Ya=Je(this.w_),this.jx(),this.ks.Ss(),this}getDimensions(){return this.w_}setFillStyle(t){return this.be=typeof t=="function"?t(this.be):t,this.Zx(),this}getFillStyle(){return this.be}setStrokeStyle(t){return this.xe=typeof t=="function"?t(this.xe):t,this.Zx(),this}getStrokeStyle(){return this.xe}getDominantStyle(){return this.be}}class sD extends Lc{constructor(t,e,i,s,n,a,o,l,u,d,f){super(t,e,i,s,n,a,o,l,u,d),this.xs="Polygon Series",this.Wy=(y,m,S)=>y.addRow(m.getName()),this.b_=Bl(),this.S_=y=>{const m=y.getBoundaries(),S=Y((m.min.x+m.max.x)/2,(m.min.y+m.max.y)/2);return gt(S,this.scale,this.ks.us.dt)},this.Ji.us.Nn(wt.pf),this.__=f,this.y_=new ub(this.ks,this.scale,se,se,se,se,se,y=>!1,this.qi,this.__).dispose(),this.M_=new ka(()=>{const y=this.b_._t(this.ks.Ob(this.scale));return this.ds(y,{setEventHandlers:!1}),y},(y,m,S)=>(y.Ce(S.fillStyle).we(S.strokeStyle),m.map(x=>{const v=x.existingMember||y.zr();return v.pl(x.vertices),this.b_.Ot(v,x.figure),v})),()=>{this.b_.Nt()},(y,m)=>{this.gs(m)})}WM(t){}A_(t){const e=this.M_.fp();t.forEach(i=>{if(!i.getVisible())return;const s=i.getDimensions(),n=i.getFillStyle(),a=i.getStrokeStyle();e.add({No:i.No,vertices:s,figure:i},{fillStyle:n,strokeStyle:a})}),e.finishPlot()}add(t){const e=new ub(this.ks,this.scale,this.qx,this.jx,this.Zx,this.Qx,this.Jx,this.f_,this.qi,this.__).setDimensions(t);return this.g_(e),this.d_=!0,this.Ji.us.Ss(),e}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}}class cb extends Bc{constructor(t,e,i,s,n,a,o,l,u,d){super(t,e,i,s,n,a,o,l,u),this.C_={x:0,y:0,width:0,height:0},this.k_={x1:0,y1:0,x2:0,y2:0},this.Ya=Qt(Y(0,0),Y(0,0)),this.be=Kt(u.rectangleSeriesFillStyle,d),this.ks=t,this.scale=e,this.xe=Kt(u.rectangleSeriesStrokeStyle,d)}getBoundaries(){return this.Ya}setDimensions(t){return"x"in t?(this.C_=t,this.k_={x1:t.x,y1:t.y,x2:t.x+t.width,y2:t.y+t.height}):(this.k_=t,this.C_={x:t.x1,y:t.y1,width:t.x2-t.x1,height:t.y2-t.y1}),this.Ya=Je([this.C_,Y(this.C_.x+this.C_.width,this.C_.y+this.C_.height)]),this.jx(),this.ks.Ss(),this}getDimensionsPositionAndSize(){return this.C_}getDimensionsTwoPoints(){return this.k_}setFillStyle(t){return this.be=typeof t=="function"?t(this.be):t,this.Zx(),this}getFillStyle(){return this.be}setStrokeStyle(t){return this.xe=typeof t=="function"?t(this.xe):t,this.Zx(),this}getStrokeStyle(){return this.xe}getDominantStyle(){return this.be}}class rD extends Lc{constructor(t,e,i,s,n,a,o,l,u,d,f){super(t,e,i,s,n,a,o,l,u,d),this.xs="Rectangle Series",this.Wy=(y,m,S)=>{const x=S.getDimensionsPositionAndSize();return y.addRow(m.xs).addRow("X","",m.axisX.formatValue(x.x)).addRow("Y","",m.axisX.formatValue(x.y)).addRow("Width","",m.axisX.formatValue(x.width)).addRow("Height","",m.axisX.formatValue(x.height))},this.b_=Bl(),this.S_=y=>{const m=y.getDimensionsPositionAndSize(),S=Y(m.x+m.width/2,m.y+m.height/2);return gt(S,this.scale,this.ks.us.dt)},this.Ji.us.Nn(wt.pf),this.__=f,this.y_=new cb(this.ks,this.scale,se,se,se,se,se,y=>!1,this.qi,this.__).dispose(),this.M_=new ka(()=>{const y=this.b_._t(this.ks.Ob(this.scale));return this.ds(y,{setEventHandlers:!1}),y},(y,m,S)=>(y.Ce(S.fillStyle).we(S.strokeStyle),m.map(x=>{const v=x.existingMember||y.zr();return v.pl(x.vertices),this.b_.Ot(v,x.figure),v})),()=>{this.b_.Nt()},(y,m)=>{this.gs(m)})}WM(t){}A_(t){const e=this.M_.fp();t.forEach(i=>{if(!i.getVisible())return;const s=i.getDimensionsTwoPoints(),n=[{x:s.x1,y:s.y1},{x:s.x1,y:s.y2},{x:s.x2,y:s.y2},{x:s.x2,y:s.y1}],a=i.getFillStyle(),o=i.getStrokeStyle();e.add({No:i.No,vertices:n,figure:i},{fillStyle:a,strokeStyle:o})}),e.finishPlot()}add(t){const e=new cb(this.ks,this.scale,this.qx,this.jx,this.Zx,this.Qx,this.Jx,this.f_,this.qi,this.__).setDimensions(t);return this.g_(e),this.d_=!0,this.Ji.us.Ss(),e}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}}class db extends Bc{constructor(t,e,i,s,n,a,o,l,u,d){super(t,e,i,s,n,a,o,l,u),this.dimensions={startX:0,startY:0,endX:0,endY:0},this.Ya=Qt(Y(0,0),Y(0,0)),this.qi=u,this.ks=t,this.scale=e,this.xe=Kt(u.segmentSeriesStrokeStyle,d)}getBoundaries(){return this.Ya}setDimensions(t){return this.dimensions=t,this.Ya=Qt(Y(Math.min(t.startX,t.endX),Math.min(t.startY,t.endY)),Y(Math.max(t.startX,t.endX),Math.max(t.startY,t.endY))),this.jx(),this.ks.Ss(),this}getDimensions(){return this.dimensions}setStrokeStyle(t){return this.xe=typeof t=="function"?t(this.xe):t,this.Zx(),this}getStrokeStyle(){return this.xe}getDominantStyle(){const t=this.xe;return t!==At?t.getFillStyle():Ft}}class nD extends Lc{constructor(t,e,i,s,n,a,o,l,u,d,f){super(t,e,i,s,n,a,o,l,u,d),this.xs="Segment Series",this.Wy=(y,m,S)=>y.addRow(m.xs).addRow("Start",m.axisX.formatValue(S.getDimensions().startX),",",m.axisY.formatValue(S.getDimensions().startY)).addRow("End",m.axisX.formatValue(S.getDimensions().endX),",",m.axisY.formatValue(S.getDimensions().endY)),this.T_=Bl(),this.S_=y=>{const m=y.getDimensions(),S=Y((m.startX+m.endX)/2,(m.startY+m.endY)/2);return gt(S,this.scale,this.ks.us.dt)},this.Ji.us.Nn(wt.pf),this.__=f,this.y_=new db(this.ks,this.scale,se,se,se,se,se,y=>!1,this.qi,this.__).dispose(),this.x_=new ka(()=>{const y=this.T_._t(this.ks.Lg(this.scale));return this.ds(y,{setEventHandlers:!1}),y},(y,m,S)=>(y.Re(S.strokeStyle),m.map(x=>{const v=x.existingMember||y.zr();return v.Eg(x.start,x.end),this.T_.Ot(v,x.figure),v})),()=>{this.T_.Nt()},(y,m)=>{this.gs(m)})}WM(t){}A_(t){const e=this.x_.fp();t.forEach(i=>{if(!i.getVisible())return;const s=i.getDimensions(),n={x:s.startX,y:s.startY},a={x:s.endX,y:s.endY},o=i.getStrokeStyle();e.add({No:i.No,start:n,end:a,figure:i},{strokeStyle:o})}),e.finishPlot()}add(t){const e=new db(this.ks,this.scale,this.qx,this.jx,this.Zx,this.Qx,this.Jx,this.f_,this.qi,this.__).setDimensions(t);return this.g_(e),this.d_=!0,this.Ji.us.Ss(),e}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}}const w0=(r,t,e)=>{const i=t.getIcon();return i?r.addRow(i,t.getName()):r.addRow(t.getName()),r.addRow("X:","",t.axisX.formatValue(e.x)).addRow("Y:","",t.axisY.formatValue(e.y)).addRow("Intensity:","",e.intensity.toFixed(1))};class NR extends bh{constructor(t,e,i,s,n,a,o,l,u,d,f,y){super(t,e,i,s,n,a,o,l,d,f),this.xs="Heatmap Grid Series",this.Wy=w0,this.Lx=!1,this.Av={},this.Ji.us.Nn(wt.yf),this.F_=u,this.qi=d;const m=y;this.be=Kt(d.heatmapGridSeriesFillStyle,m),this.gv=Kt(this.qi.heatmapGridSeriesWireframeStyle,m);const S={heatmapDataType:"intensity",dataOrder:u.dataOrder||"columns",columns:u.columns,rows:u.rows};this.Un=S,this.I_=this.ks.P_(this.scale,[],S).Ce(this.be).mv(this.gv).cs(this.getHighlight()),this.ds(this.I_),u.start&&this.setStart(u.start),u.end&&this.setEnd(u.end),u.step&&this.setStep(u.step),this.setHighlightOnHover(!1)}pv(){const t=this.Av.start||{x:0,y:0};let e;e=this.Av.end?{x:(this.Av.end.x-t.x)/this.Un.columns,y:(this.Av.end.y-t.y)/this.Un.rows}:this.Av.step?this.Av.step:{x:1,y:1},this.I_.Sv(t,e),this.Ji.us.Ss()}setStart(t){return this.Av.start=t,this.pv(),this}getStart(){return this.I_.vv().start}setStep(t){return this.Av.step=t,this.pv(),this}getStep(){return this.I_.vv().step}setEnd(t){return this.Av.end=t,this.pv(),this}getEnd(){return this.I_.vv().end}clear(){return this.I_.Nt(),this.ks.Ss(),this.D.emit("dataClear",this),this}setWireframeStyle(t){return this.gv=typeof t=="function"?t(this.gv):t,this.I_.mv(this.gv),this.ks.Ss(),this.D.emit("styleChange",this),this}getWireframeStyle(){return this.gv}setCursorInterpolationEnabled(t){return this.Lx=t,this.ks.us.Ss(),this}getCursorInterpolationEnabled(){return this.Lx}setCursorEnabled(t){return super.setCursorEnabled(t)}setIntensityInterpolation(t){return t=t||"disabled",this.I_.xv(t),this.ks.Ss(),this.D.emit("styleChange",this),this}getIntensityInterpolation(){return this.I_.Mv()}Kp(){return this.tS&&this.getVisible()}Gd(){return ji(this.be)}attach(t,e=!0,i=!1){return super.attach(t,e,i),ei(t,this.qi,i,{fill:this.be}),this}D_(t){this.I_.D_().forEach(e=>{t.I_._v(e)})}l_(t){return this.D.off(t)}a_(t){return this.D.on("dataClear",t)}B_(t){return this.D.on("styleChange",t)}L_(t){return this.D.off(t)}Hc(t,e,i=this.Lx){const s=gt(t,this.ks.us.dt,this.scale),n=e?this.I_.getIsUnderMouse()?this.I_:void 0:this.I_;if(!n)return;const a=i?n.zx(s):n.Hc(s);if(a){const o={x:a.x,y:a.y,column:a.column,row:a.column,intensity:a.cellValue};return{location:o,scale:this.scale,resultTableContent:this.Wy(new Ii,this,o).Zu(),owner:this}}}solveNearestFromScreen(t,e=this.Lx){return this.Hc(es(t,this.Ji.us),!1,e)}getXMax(){const t=this.I_;return t?t.bt():void 0}getXMin(){const t=this.I_;return t?t.vt():void 0}getYMax(){const t=this.I_;return t?t.Mt():void 0}getYMin(){const t=this.I_;return t?t.xt():void 0}br(){const t=Y(0,0);return t.x=Math.max(t.x,this.I_.vl()),t.y=Math.max(t.y,this.I_.bl()),t}WM(t){if(!(t instanceof Se))throw new Error("HeatmapGridSeries can only be attached to a pair of Linear Axes.");if(t instanceof Se&&t._i())throw new Error("HeatmapGridSeries can not be attached to a high precision Axis.")}Ie(t,e){t.cs(e),this.ks.Ss()}Te(){return super.Te(),this.I_.Yo(this.getBoundaries()),this}}class aD extends NR{constructor(t,e,i,s,n,a,o,l,u,d,f,y){super(t,e,i,s,n,a,o,l,u,d,f,y),this.dS=!1,this.Wy=w0}invalidateIntensityValues(t){if(this.dS&&this.Ji.us.Nn(wt.vf),Array.isArray(t)){if(t.length===0)return this;const e={x:t.length,y:t[0].length,columns:this.Un.dataOrder==="columns"?t.length:t[0].length,rows:this.Un.dataOrder==="rows"?t.length:t[0].length},i=this.Un.dataOrder==="columns"?this.Un.columns:this.Un.rows,s=this.Un.dataOrder==="columns"?this.Un.rows:this.Un.columns;if(e.x>i||e.y>s){if(this.chart.cA.Hn===!0){const a=`HeatmapGridSeries.invalidateIntensityValues intensity matrix overflow.
Grid ${this.Un.columns}x${this.Un.rows}, input ${e.columns}x${e.rows}.
Excess data will be automatically clipped. This can result in sub-optimal performance.`;nt.console.warn(a)}const n=[];for(let a=0;a<i;a+=1)n[a]=t[a].slice(0,s);t=n}this.I_._v({type:"intensity",lengthPrimary:e.x,lengthSecondary:e.y,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(t.values.length===0)return this;const e={primary:t.values.length,secondary:t.values[0].length,columns:this.Un.dataOrder==="columns"?t.values.length:t.values[0].length,rows:this.Un.dataOrder==="rows"?t.values.length:t.values[0].length},i=this.Un.dataOrder==="columns"?t.iColumn:t.iRow,s=i+e.primary-1,n=this.Un.dataOrder==="columns"?t.iRow:t.iColumn,a=n+e.secondary-1,o=(this.Un.dataOrder==="columns"?this.Un.columns:this.Un.rows)-1,l=(this.Un.dataOrder==="columns"?this.Un.rows:this.Un.columns)-1;if(i<0||n<0){if(this.chart.cA.Hn===!0){const u=`HeatmapGridSeries.invalidateIntensityValues invalidation start below 0 not permitted.
iColumn: ${t.iColumn}, iRow: ${t.iRow}.
No intensity values will be invalidated.`;nt.console.warn(u)}return this}if(s>o||a>l){if(this.chart.cA.Hn===!0){const m=`HeatmapGridSeries.invalidateIntensityValues intensity matrix overflow.
Grid ${this.Un.columns}x${this.Un.rows}, input ${e.columns}x${e.rows} starting at [${t.iColumn},${t.iRow}].
Out of bounds data will be automatically clipped. This can result in sub-optimal performance.`;nt.console.warn(m)}const u=Math.max(s-o,0),d=e.primary-u,f=Math.max(a-l,0),y=[];for(let m=0;m<d;m+=1)y[m]=t.values[m].slice(0,f>0?-f:void 0);t={iColumn:t.iColumn,iRow:t.iRow,values:y}}this.I_._v({type:"intensity",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:i,startSecondary:n,values:t.values})}return this.D.emit("invalidateIntensity",this,t),this.ks.Ss(),this.dS=!0,this}setFillStyle(t){return this.be=typeof t=="function"?t(this.be):t,this.I_.Ce(this.be),this.D.emit("styleChange",this),this.ks.Ss(),this}getFillStyle(){return this.be}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}R_(t){return this.D.on("invalidateIntensity",t)}E_(t){return this.D.off(t)}}class hD extends bh{constructor(t,e,i,s,n,a,o,l,u,d,f,y){super(t,e,i,s,n,a,o,l,d,f),this.xs="Scrolling Heatmap Grid Series",this.Wy=w0,this.Lx=!1,this.Av={},this.Ji.us.Nn(wt.yf),this.Ji.us.Nn(wt.vf);const m=y;this.be=Kt(d.heatmapScrollingGridSeriesFillStyle,m),this.gv=Kt(this.qi.heatmapScrollingGridSeriesWireframeStyle,m);const S={scrollDimension:"columns",heatmapDataType:"intensity",...u};this.Un=S,this.z_=this.ks.V_(this.scale,[],S).Ce(this.be).mv(this.gv).cs(this.getHighlight()),this.ds(this.z_),u.start&&this.setStart(u.start),u.step&&this.setStep(u.step),this.setHighlightOnHover(!1)}pv(){const t=this.Av.start||{x:0,y:0};let e;e=this.Av.step?this.Av.step:{x:1,y:1},this.z_.Sv(t,e),this.Ji.us.Ss()}setStart(t){return this.Av.start=t,this.pv(),this}getStart(){return this.z_.vv().start}setStep(t){return this.Av.step=t,this.pv(),this}getStep(){return this.z_.vv().step}clear(){return this.z_.Nt(),this.ks.Ss(),this}setWireframeStyle(t){return this.gv=typeof t=="function"?t(this.gv):t,this.z_.mv(this.gv),this.ks.Ss(),this}getWireframeStyle(){return this.gv}setPixelInterpolationMode(t){return t=t||"disabled",this.z_.xv(t),this.ks.Ss(),this}getPixelInterpolationMode(){return this.z_.Mv()}setCursorInterpolationEnabled(t){return this.Lx=t,this.ks.us.Ss(),this}getCursorInterpolationEnabled(){return this.Lx}setCursorEnabled(t){return super.setCursorEnabled(t)}setDataCleaning(t){return this.z_.Su(t),this.ks.Ss(),this}Kp(){return this.tS&&this.getVisible()}Gd(){return ji(this.be)}attach(t,e=!0,i=!1){return super.attach(t,e,i),ei(t,this.qi,i,{fill:this.be}),this}Ce(t){return this.be=typeof t=="function"?t(this.be):t,this.z_.Ce(this.be),this.ks.Ss(),this}Hc(t,e,i=this.Lx){const s=gt(t,this.ks.us.dt,this.scale),n=e?this.z_.getIsUnderMouse()?this.z_:void 0:this.z_;if(!n)return;const a=i?n.zx(s):n.Hc(s);return a?Is(a,this.scale,this.Wy(new Ii,this,{x:a.x,y:a.y,column:a.column,row:a.column,intensity:a.cellValue}).Zu(),this):void 0}solveNearestFromScreen(t,e=this.Lx){return this.Hc(es(t,this.Ji.us),!1,e)}WM(t){if(!(t instanceof Se))throw new Error("HeatmapScrollingGridSeries can only be attached to a pair of Linear Axes.");if(t instanceof Se&&t._i())throw new Error("HeatmapScrollingGridSeries can not be attached to a high precision Axis.")}getXMax(){return this.z_.bt()||0}getXMin(){return this.z_.vt()||0}getYMax(){return this.z_.Mt()||0}getYMin(){return this.z_.xt()||0}br(){const t=Y(0,0);return t.x=Math.max(t.x,this.z_.vl()),t.y=Math.max(t.y,this.z_.bl()),t}Ie(t,e){t.cs(e),this.ks.Ss()}}class oD extends hD{constructor(t,e,i,s,n,a,o,l,u,d,f,y){super(t,e,i,s,n,a,o,l,u,d,f,y),this.Wy=w0}addIntensityValues(t){if(t.length===0||t[0].length===0)return this;const e=t.length,i=t[0].length,s=(this.Un.scrollDimension==="columns"?t.length:t[0].length,this.Un.scrollDimension==="rows"?t.length:t[0].length,0+i-1),n=this.Un.resolution-1;if(s>n){if(this.chart.cA.Hn===!0){const o=`HeatmapScrollingGridSeries.addIntensityValues intensity matrix overflow.
Grid resolution: ${this.Un.resolution}, input ${e}x${i}.
Excess data will be automatically clipped. This can result in sub-optimal performance.`;nt.console.warn(o)}const a=[];for(let o=0;o<e;o+=1)a[o]=t[o].slice(0,n+1);t=a}return this.z_.Fv(t),this.ks.Ss(),this}invalidateIntensityValues(t){return this.z_._v(t.iSample,t.values),this.ks.Ss(),this}getSampleCount(){return this.z_.O_()}setFillStyle(t){return this.Ce(t),this}getFillStyle(){return this.be}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}}class BR extends bh{constructor(){super(...arguments),this.QM=[],this.yu=[],this.N_=[],this.G_=[],this.e_=1e3,this.JM=0,this.Hi=Yr.onHover,this._l={type:"disabled",packager:(t,e,i)=>t.slice()},this.Lx=!0,this.W_=[],this.U_=[],this.Y_=!1,this.Gd=()=>ji(this.H_)||ji(this.X_),this.j_=t=>{const e=t.length;if(this.QM.length>0){const i=this.QM.length-1,s=this.QM[i];if(e>0){const[n,a]=s.tl(),[o,l]=s.qa();if((o?n.length+o.length:n.length)>=this.e_){const u=o&&o.length>0?o[o.length-1]:n[n.length-1],d=l&&l.length>0?l[l.length-1]:a[n.length-1],f=(u.x+t[0].position)/2,y=tl(f,u,Y(t[0].position,t[0].high)).y,m=tl(f,d,Y(t[0].position,t[0].low)).y,S=un(f,y,m);s.nl(S,Qt(Y(f,m),Y(f,y))).zl(!0),this.Z_([S].concat(t)).Rl(!0)}else s.nl(t)}}else e>0&&this.Z_(t)},this.Q_=t=>{const e=this.W_,i=t.length;if(this.W_.length>0){if(i>0){const s=e[e.length-1],n=s.tl(),a=s.qa();if(n.length+a.length>=this.e_){const o=a.length>0?a[a.length-1]:n[n.length-1],l=(o.x+t[0].x)/2,u=tl(l,o,Y(t[0].x,t[0].y)).y,d=Y(l,u);s.nl(d,Qt(Y(l,u),Y(l,u))).zl(!0),e.push(this.J_([d].concat(t),this.i_).Rl(!0))}else s.nl(t)}}else i>0&&e.push(this.J_(t))},this.K_=t=>{const e=this.U_,i=t.length;if(this.U_.length>0){if(i>0){const s=e[e.length-1],n=s.tl(),a=s.qa();if(n.length+a.length>=this.e_){const o=a.length>0?a[a.length-1]:n[n.length-1],l=(o.x+t[0].x)/2,u=tl(l,o,Y(t[0].x,t[0].y)).y,d=Y(l,u);s.nl(d,Qt(Y(l,u),Y(l,u))).zl(!0),e.push(this.q_([d].concat(t)).Rl(!0))}else s.nl(t)}}else i>0&&e.push(this.q_(t))},this.tw=(t,e)=>{const i=t.Ux(e);if(i)return[gt(i[0],this.scale,this.ks.us.dt),gt(i[1],this.scale,this.ks.us.dt)]},this.iw=(t,e)=>{const i=t.sw(e);if(i)return[gt(i[0],this.scale,this.ks.us.dt),gt(i[1],this.scale,this.ks.us.dt)]}}setDataCleaning(t){const e=t&&t.minDataPointCount;return this.JM=e!==void 0&&e>0?e:0,this.ks.Ss(),this}clear(){for(let t=0;t<this.QM.length;t+=1)this.QM[t].dispose();for(let t=0;t<this.W_.length;t+=1)this.W_[t].dispose();for(let t=0;t<this.U_.length;t+=1)this.U_[t].dispose();return this.yu.length=0,this.N_.length=0,this.G_.length=0,this.i_=void 0,this.QM.length=0,this.W_.length=0,this.U_.length=0,this.ks.Ss(),this.D.emit("dataClear",this),this}getPointAmount(){return this.QM.reduce((t,e)=>t+e.ol()+e.al(),this.yu.length)}setCursorInterpolationEnabled(t){return this.Lx=t,this.ks.us.Ss(),this}getCursorInterpolationEnabled(){return this.Lx}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}setCursorEnabled(t){return super.setCursorEnabled(t)}getCursorResultTableFormatter(){return this.Wy}getXMax(){return hh(this.QM,xM,Math.max,MM,this.i_)||0}getXMin(){return hh(this.QM,SM,Math.min,bM,this.i_)||0}getYMax(){return hh(this.QM,vM,Math.max,EM,this.i_)||0}getYMin(){return hh(this.QM,AM,Math.min,RM,this.i_)||0}br(){const t=Y(0,0);for(const e of this.QM)t.x=Math.max(t.x,e.vl()),t.y=Math.max(t.y,e.bl());return t}Kp(){return this.tS&&this.getPointAmount()>0&&this.getVisible()}WM(t){}qM(t,e,i){this.yu=ls(this.yu,t,{canReturnB:!1}),this.N_=ls(this.N_,e,{canReturnB:!1}),this.G_=ls(this.G_,i,{canReturnB:!1}),this.ks.Ss()}ew(t,e,i,s){this.hw(e,i,s),this.qM(Array.isArray(t)?t:[t],e,i)}hw(t,e,i){const s=Ws(Je(t),Je(e));this.i_?this.i_=Ws(this.i_,s):this.i_=s,i&&(this.i_=Ws(this.i_,i))}rw(){const t=this.QM.length,e=Math.min(this.scale.x.getInnerStart(),this.scale.x.getInnerEnd());let i=0;if(t>1)for(let s=0;s<t-1;s+=1)this.scale.x.mi(this.QM[s].bt(),this.QM[s].vl())<e&&(i+=1);return i}s_(t,e,i,s){if(i>0){const n=Math.ceil(i/e),a=t.length-n;if(a>0&&s>0){const o=a-s>0?s:a;if(o>0){for(let l=0;l<o;l+=1)t[l].dispose();t.splice(0,o)}}}}nw(t){const e=this.QM.length>0?this.QM[this.QM.length-1]:void 0,i=e?e.tl()[0].length+(e.qa()[0]?e.qa()[0].length:0):void 0;oh(t,i,this.e_,this.j_)}ow(t){const e=this.W_.length>0?this.W_[this.W_.length-1].tl().length+this.W_[this.W_.length-1].qa().length:void 0;oh(t,e,this.e_,this.Q_)}aw(t,e){const i=this.W_.length>0?this.W_[this.W_.length-1].tl().length+this.W_[this.W_.length-1].qa().length:void 0;oh(t,i,this.e_,this.Q_),oh(e,i,this.e_,this.K_)}Z_(t,e){const i=this.ks.lw(this.scale).nl(t,e).Ce(this.H_).Bl(this.X_).Pl(this._l).cs(this.getHighlight());return this.QM.push(i),this.ds(i),i}uw(t,e,i){const s=this.ks.rp(this.scale,void 0,[kr.UserSeries]).nl(t,i).setMouseInteractions(!1).Re(e).cs(this.getHighlight());return this.ds(s),s}J_(t,e){return this.uw(t,this.cw,e)}q_(t,e){return this.uw(t,this.dw,e)}fw(t){this.H_=typeof t=="function"?t(this.H_):t;const e=this.H_;for(let i=0;i<this.QM.length;i+=1)this.QM[i].Ce(e);this.ks.Ss()}Aw(t){this.X_=typeof t=="function"?t(this.X_):t;const e=this.X_;for(let i=0;i<this.QM.length;i+=1)this.QM[i].Bl(e);this.ks.Ss()}gw(){return this.H_}Ll(){return this.X_}mw(t){this.cw=typeof t=="function"?t(this.cw):t;const e=this.cw;for(let i=0;i<this.W_.length;i+=1)this.W_[i].Re(e);this.ks.Ss()}yw(t){this.dw=typeof t=="function"?t(this.dw):t;const e=this.dw;for(let i=0;i<this.U_.length;i+=1)this.U_[i].Re(e);this.ks.Ss()}pw(){return this.cw}Sw(){return this.dw}Ie(t,e){t.cs(e),this.bw(e),this.ks.Ss()}bw(t){for(let e=0;e<this.W_.length;e+=1)this.W_[e].cs(t);for(let e=0;e<this.U_.length;e+=1)this.U_[e].cs(t)}oS(){if(super.oS(),this.Y_=!1,this.JM>0){const t=this.QM.length,e=this.rw();this.s_(this.QM,this.e_,this.JM,e);const i=this.QM.length;this.W_.length>0&&this.s_(this.W_,this.e_,this.JM,e),this.U_.length>0&&this.s_(this.U_,this.e_,this.JM,e),t!==i&&this.ZM(),this.Y_=!0}}Te(){if(super.Te(),this.yu.length>0&&(this.nw(this.yu),this.xw(this.N_,this.G_),this.Y_=!0),this.Y_){const t=this.getBoundaries();for(const e of this.QM)e.Yo(t);for(const e of this.W_)e.Yo(t);for(const e of this.U_)e.Yo(t)}}dp(){this.i_=void 0,this.yu.length=0,this.N_.length=0,this.G_.length=0}Hc(t,e,i=this.Lx){const s=((n,a,o)=>{let l,u,d=Number.MAX_VALUE;for(let f=0;f<a.length;f+=1){const y=a[f],m=o(y,n);if(m){const S=Kn(n,m[0]),x=Kn(n,m[1]);(l===void 0||S<d||x<d)&&(l=m,u=y,S<d?d=S:x<d&&(d=x))}}return l&&u?[l,u]:void 0})(t,e?this.QM.filter(n=>n.getIsUnderMouse()):this.QM,i?this.iw:this.tw);if(s!==void 0&&s[0]!==void 0){const n=gt(s[0][0],this.ks.us.dt,this.scale),a=gt(s[0][1],this.ks.us.dt,this.scale);return Is(n,this.scale,this.Wy(new Ii,this,n.x,n.y,a.y).Zu(),this,s[1].Eh())}}solveNearestFromScreen(t,e=this.Lx){return this.Hc(es(t,this.Ji.us),!1,e)}}const lD=(r,t,e,i,s)=>{const n=t.getIcon();return n?r.addRow(n,t.getName()):r.addRow(t.getName()),r.addRow("Position","",t.axisX.formatValue(e)).addRow("Value","",t.axisY.formatValue(i)).addRow("Base","",t.axisY.formatValue(s))};class uD extends BR{constructor(t,e,i,s,n,a,o,l,u=0,d,f){super(t,e,i,s,n,a,o,l,d,f),this.xs="Area Series",this.Wy=lD,this.Ji.us.Nn(wt.mf),this.Mw=u}add(t){this.QM.length!==0&&this.Ji.us.Nn(wt.vf);const e=Array.isArray(t)?t:[t];if(e.length>0){const i=this._w(e),[s,n]=this.ww(i);this.ew(i,s,n,Qt(Y(bt,this.Mw),Y(kt,this.Mw)));const a=this.yu[this.yu.length-1];this.t_=a?{position:a.position,high:a.high,low:a.low}:void 0,this.D.emit("dataAdd",this,e,this.i_)}return this}addArrayY(t,e=1,i=0){let s=i;return s||(s=this.t_?this.t_.position+e:0),this.add(_R(t,e,s)),this}n_(t){return this.D.on("dataAdd",t)}o_(t){return this.D.off(t)}a_(t){return this.D.on("dataClear",t)}l_(t){return this.D.off(t)}}class Qp extends uD{constructor(){super(...arguments),this.dw=At}xw(t){return this.ow(t)}ww(t){const e=t.length,i=Array(e);for(let s=0;s<e;s+=1){const n=t[s];i[s]=Y(n.position,n.high)}return[i,[]]}setStrokeStyle(t){return this.mw(t),this}getStrokeStyle(){return this.pw()}}class cD extends Qp{constructor(t,e,i,s,n,a,o,l,u,d,f,y){super(t,e,i,s,n,a,o,l,u,d,f);const m=y;this.H_=Kt(this.qi.areaSeriesPositiveFillStyle,m),this.X_=Ft,this.cw=Kt(this.qi.areaSeriesPositiveStrokeStyle,m)}_w(t){return this.Pw(t)}Pw(t){const e=[];return t.length===1?this.Tw(t[0],e):this.Fw(t,e),e}Tw(t,e,i=0){const s=this.Mw;return e[i]=t.y<s?un(t.x,s,s):un(t.x,t.y,s),i+1}Fw(t,e,i=0){let s=0;const n=t.length-1,a=this.Mw;for(;s<n;){const o=t[s],l=t[s+=1];if(o.y>=a){const u=un(o.x,o.y,a);if(i!==0&&Cv(e[i-1],u)||(e[i]=u,i+=1),l.y<a){const d=zm(Y(kt,a),Y(bt,a),o,l);d&&(e[i]=un(d.x,d.y,a),i+=1),e[i]=un(l.x,a,a),i+=1}else e[i]=un(l.x,l.y,a),i+=1}else{const u=un(o.x,a,a);if(i!==0&&Cv(e[i-1],u)||(e[i]=u,i+=1),l.y>=a){const d=zm(Y(kt,a),Y(bt,a),o,l);d&&(e[i]=un(d.x,d.y,a),i+=1),e[i]=un(l.x,l.y,a),i+=1}else e[i]=un(l.x,a,a),i+=1}}return i}r_(){return T0(this.QM,t=>t[0]||[])}setFillStyle(t){return this.fw(t),this}getFillStyle(){return this.gw()}attach(t,e=!0,i=!1){return ei(t,this.qi,i,{fill:this.H_,stroke:this.cw}),super.attach(t,e,i)}}const dD={Positive:cD},fD=(r,t,e,i,s)=>r.addRow(t.getName()).addRow("Position","",t.axisX.formatValue(e)).addRow("High","",t.axisY.formatValue(i)).addRow("Low","",t.axisY.formatValue(s));class LR extends BR{constructor(t,e,i,s,n,a,o,l,u,d,f){super(t,e,i,s,n,a,o,l,u,d),this.xs="Area Range Series",this.Wy=fD,this.Ji.us.Nn(wt.mf);const y=f;this.H_=Kt(this.qi.areaRangeSeriesFillStyle,y),this.cw=Kt(this.qi.areaRangeSeriesStrokeStyle,y),this.X_=Kt(this.qi.areaRangeSeriesFillStyleInverted,y),this.dw=Kt(this.qi.areaRangeSeriesStrokeStyleInverted,y)}add(t){const e=Array.isArray(t)?t:[t],[i,s]=fM(e);this.ew(t,i,s);const n=this.yu[this.yu.length-1];return this.t_=n?{position:n.position,high:n.high,low:n.low}:void 0,this.D.emit("dataAdd",this,e,this.i_),this}addArraysHighLow(t,e,i=1,s=0){if(t.length!==e.length)throw new Error("arrayHigh and arrayLow lengths are not equal");{let n=s;n||(n=this.t_?this.t_.position+i:0),this.add(((a,o,l=1,u)=>{const d=u!==void 0?u:0,f=new Array(a.length);for(let y=0;y<a.length;y+=1)f[y]={position:d+l*y,high:a[y],low:o[y]};return f})(t,e,i,n))}return this}xw(t,e){this.aw(t,e)}setHighFillStyle(t){return this.fw(t),this}setLowFillStyle(t){return this.Aw(t),this}setHighStrokeStyle(t){return this.mw(t),this}setLowStrokeStyle(t){return this.yw(t),this}getHighFillStyle(){return this.gw()}getLowFillStyle(){return this.Ll()}getHighStrokeStyle(){return this.pw()}getLowStrokeStyle(){return this.Sw()}r_(){return T0(this.QM,t=>{const e=t[0],i=t[1];if(!e||!i)return[];const s=[],n=e.length;for(let a=0;a<n;a+=1)s[a]={position:e[a].x,high:e[a].y,low:i[a].y};return s})}n_(t){return this.D.on("dataAdd",t)}o_(t){return this.D.off(t)}a_(t){return this.D.on("dataClear",t)}l_(t){return this.D.off(t)}attach(t,e=!0,i=!1){return ei(t,this.qi,i,{fill:this.H_,fill2:this.X_,behavior:{colorStep:!0}}),super.attach(t,e,i)}}var Sa;(function(r){r[r.before=0]="before",r[r.middle=.5]="middle",r[r.after=1]="after"})(Sa||(Sa={}));const fb=(r,t)=>{const e=[],i=r.length,s=t;if(i>0){let n=0,a=r[0];e[n]=a,n+=1;for(let o=1;o<i;o+=1){const l=r[o];if(s<=0)e[n]=Y(a.x,l.y),n+=1;else{const u=a.x*(1-s)+l.x*s;e[n]=Y(u,a.y),n+=1,e[n]=Y(u,l.y),n+=1}e[n]=l,n+=1,a=l}}return e},gD=(r,t)=>{const e=r*r,i=e*r,s=1-r,n=s*s,a=n*s;return Y(a*t[0].x+3*r*n*t[1].x+3*e*s*t[2].x+i*t[3].x,a*t[0].y+3*r*n*t[1].y+3*e*s*t[2].y+i*t[3].y)},$o=(r,t=32)=>{if(r.length===2)return[r[0],r[1]];const e=(a=>{const l=a.length-1,u=Array(l);if(l>1){let d=Y(0,0),f=Y(0,0),y=Y(0,0),m=Hs(pe(a[1],a[0]));const S=3;let x=0,v=0;for(let b=0;b<l;b+=1){const E=Array(4);if(E[0]=a[b],E[1]=a[b],E[3]=a[b+1],E[2]=a[b+1],y=m,d=f,b+1<l?(m=a[b+2]===a[b+1]?Y(0,0):Hs(pe(a[b+2],a[b+1])),f=Hs(zt(y,m))):f=Y(0,0),a[b+1].y===a[b].y)x=0,v=0;else{const T=a[b+1].x-a[b].x;x=Math.abs(d.x)>1e-5?Math.abs(T/(S*d.x)):1,v=Math.abs(f.x)>1e-5?Math.abs(T/(S*f.x)):1}E[1]=zt(Yt(d,x),E[1]),E[2]=pe(E[2],Yt(f,v)),u[b]=E}}return u.length>0?u:[]})(r),i=e.length,s=Array(i*t);let n=0;for(let a=0;a<i;a+=1)for(let o=0;o<=t;o+=1)s[n]=gD(o/t,e[a]),n+=1;return s};class Ic extends Zp{constructor(t,e,i,s,n,a,o,l,u,d,f,y,m,S,x){super(t,e,i,s,n,a,o,l,u,f,y),this.QM=[],this.xs="Point Line series",this.e_=1e5,this.Hx=5,this.Aa=0,this.Ga=!1,this.Wa=!1,this.Ua=!1,this.Lx=!0,this.Dw="nearest-x",this.Bw=1,this.Lw=[],this.Rw=v=>{if(this.QM.length>0){const b=this.QM[this.QM.length-1];if(v.length>0){const E=b.tl(),T=b.qa(),V=E.length+T.length-+b.El();if(V>=this.e_){const F=T.length>0?T[T.length-1]:E[b.El()?V:V-1],B=Y((F.x+v[0].x)/2,(F.y+v[0].y)/2);b.nl(B,Qt(Y(B.x,B.y),Y(B.x,B.y))).zl(!0),this.Ew([B].concat(v)).Rl(!0)}else b.nl(v,this.i_)}}else v.length>0&&this.Ew(v)},this.zw=v=>{if(this.Lw.length>0){const b=this.Lw[this.Lw.length-1];v.length>0&&((b.tl().length+b.qa().length)*this.Bw>=this.e_?this.Vw(v):b.nl(v))}else v.length>0&&this.Vw(v)},this.Ow=(v,b)=>{const E=v.Hc(b);if(E)return gt(E,this.scale,this.ks.us.dt)},this.Nw=(v,b)=>{const E=v.sw(b);if(E)return gt(E,this.scale,this.ks.us.dt)},this.Un=x,this.$x=d,this.Gw=m,this.Ww=Kt(f.pointLineSeriesFillStyle,S),this.lu=Kt(this.qi.pointLineSeriesStrokeStyle,S)}add(t){return super.add(t),this}r_(){return T0(this.Lw)}setStrokeStyle(t){this.lu=typeof t=="function"?t(this.lu):t;const e=this.lu;for(let i=0;i<this.QM.length;i+=1)this.QM[i].Re(e);return this.ks.Ss(),this}getStrokeStyle(){return this.lu}setPointFillStyle(t){this.Ww=typeof t=="function"?t(this.Ww):t;const e=this.Ww;for(let i=0;i<this.Lw.length;i+=1)this.Lw[i].Ce(e);return this.ks.Ss(),this}getPointFillStyle(){return this.Ww}setPointSize(t){this.Hx=t;for(let e=0;e<this.Lw.length;e+=1)this.Lw[e].q(t);return this.ks.Ss(),this}getPointSize(){return this.Hx}getPointShape(){return this.$x}setPointRotation(t){this.Aa=t;for(let e=0;e<this.Lw.length;e+=1)this.Lw[e].Nh(t);return this.ks.Ss(),this}getPointRotation(){return this.Aa}setIndividualPointSizeEnabled(t){this.Ga=t,t&&this.Ji.us.Nn(wt.bf);for(let e=0;e<this.Lw.length;e+=1)this.Lw[e].el(t);return this.ks.Ss(),this}getIndividualPointSizeEnabled(){return this.Ga}setIndividualPointRotationEnabled(t){this.Wa=t;for(let e=0;e<this.Lw.length;e+=1)this.Lw[e].hl(t);return this.ks.Ss(),this}getIndividualPointRotationEnabled(){return this.Wa}setIndividualPointValueEnabled(t){this.Ua=t;for(let e=0;e<this.Lw.length;e+=1)this.Lw[e].rl(t);return this.ks.Ss(),this}getIndividualPointValueEnabled(){return this.Ua}setVisible(t){return super.setVisible(t),this.Lw.forEach(e=>e.setVisible(t)),this}setCursorInterpolationEnabled(t){return this.Lx=t,this.ks.us.Ss(),this}getCursorInterpolationEnabled(){return this.Lx}setCursorSolveBasis(t){return this.Dw=t,this.QM.forEach(e=>e.Ka(il(t))),this.Lw.forEach(e=>e.Ka(il(t))),this.ks.Ss(),this}getCursorSolveBasis(){return this.Dw}Gd(){return ji(this.Ww)||ji(this.lu.getFillStyle())}Cs(){return this.bs||this.$x}WM(t){}Ie(t,e){t.cs(e),this.ks.Ss()}h_(t){const e=this.QM.length>0?this.QM[this.QM.length-1].tl().length+this.QM[this.QM.length-1].qa().length-+this.QM[this.QM.length-1].El():void 0;oh(t,e,this.e_,this.Rw),oh(t,e,this.e_,this.zw)}Vw(t,e){const i=this.ks.bS(this.scale).nl(t,e).setMouseInteractions(this.Yi).Ce(this.Ww).il(this.$x).q(this.Hx).Nh(this.Aa).el(this.Ga).hl(this.Wa).rl(this.Ua).Ka(il(this.Dw)).cs(this.getHighlight());return this.ds(i),this.Lw.push(i),i}Ew(t,e){const i=this.ks.rp(this.scale,void 0,[kr.UserSeries,...this.Gw]).nl(t,e).setMouseInteractions(this.Yi).Re(this.lu).Ka(il(this.Dw)).cs(this.getHighlight());return this.ds(i),this.QM.push(i),i}attach(t,e=!0,i=!1){return ei(t,this.qi,i,{stroke:this.lu,fill:this.Ww}),super.attach(t,e,i)}getPointAmount(){return this.Lw.reduce((t,e)=>t+e.ol()+e.al(),this.yu.length)}clear(){super.clear();for(let t=0;t<this.QM.length;t+=1)this.QM[t].dispose();this.QM.length=0;for(let t=0;t<this.Lw.length;t+=1)this.Lw[t].dispose();return this.Lw.length=0,this}s_(t,e,i,s){super.s_(t,e,i,s),this.KM.s_(this.Lw,e,i,s,this.scale,n=>{})}Hc(t,e,i=this.Lx){const s=i?ao(t,e?this.QM.filter(n=>n.getIsUnderMouse()):this.QM,this.Nw,this.Dw==="nearest-x"?(n,a)=>Math.abs(n.x-a.x):this.Dw==="nearest-y"?(n,a)=>Math.abs(n.y-a.y):(n,a)=>(n.x-a.x)**2+(n.y-a.y)**2):ao(t,e?this.Lw.filter(n=>n.getIsUnderMouse()):this.Lw,this.Ow,this.Dw==="nearest-x"?(n,a)=>Math.abs(n.x-a.x):this.Dw==="nearest-y"?(n,a)=>Math.abs(n.y-a.y):(n,a)=>(n.x-a.x)**2+(n.y-a.y)**2);if(s!==void 0){const n=gt(s[0],this.ks.us.dt,this.scale),a=s[1]instanceof _m?s[1].uu():s[1].Eh(),o=s[1]instanceof Np?s[1].Eh():void 0,l=s[1]instanceof _m?s[1].uu().getFillStyle():void 0,u=ws(a)?s[0].color?new it({color:s[0].color}):new it({color:a.getFallbackColor()}):void 0;return Is(n,this.scale,this.Wy(new Ii,this,n.x,n.y,n).Zu(),this,l||u||o)}}solveNearestFromScreen(t,e=this.Lx){return this.Hc(es(t,this.Ji.us),!1,e)}}const df=(r,t)=>r.qa().length>=t?r.qa().slice(-t):Array.prototype.concat(r.tl(),r.qa()).slice(-t),gb=(r,t,e)=>{const i=Array.prototype.concat(r.tl(),r.qa()).slice(0,-33).concat(t.slice(e+1,2*e+2));r.Nt().nl(i).Ps()};class IR extends Ic{constructor(t,e,i,s,n,a,o,l,u,d,f,y,m,S,x){super(t,e,i,s,n,a,o,l,u,d,f,y,m,S,x),this.xs="Spline Series",this.Bw=32,this.e_=8e3,this.Uw=v=>{if(v.length===0)return;const b=this.Lw.length;if(b>0){const E=b>1,T=this.Lw[b-1];if(E){const V=Array.prototype.concat(T.tl(),T.qa()),F=V.length;if(32*F>=this.e_){const B=df(T,3),z=Array.prototype.concat(B,v),L=$o(z,32);gb(this.QM[b-1],L,32),this.Ew(L.slice(66))}else if(F<5){const B=this.Lw[b-2],z=df(B,3),L=Array.prototype.concat(z,V,v),A=$o(L,32),R=this.QM[b-1],w=A.slice(66);R.Nt().nl(w).Ps()}else{const B=this.QM[b-1],z=Array.prototype.concat(B.tl(),B.qa()),L=df(T,4),A=Array.prototype.concat(L,v),R=$o(A,32),w=z.slice(0,-66).concat(R.slice(33));B.Nt().nl(w).Ps()}}else{const V=Array.prototype.concat(T.tl(),T.qa()),F=V.length,B=this.QM[b-1];if(32*F>=this.e_){const z=df(T,3),L=Array.prototype.concat(z,v),A=$o(L,32);gb(this.QM[0],A,32),this.Ew(A.slice(66))}else if(F+v.length>1){const z=Array.prototype.concat(V,v),L=$o(z,32);B.Nt().nl(L).Ps()}else B.nl(v)}}else{const E=v.length>0?$o(v,32):v,T=Je(E);this.Ew(E,T)}this.zw(v)}}setCursorInterpolationEnabled(t){return super.setCursorInterpolationEnabled(t)}h_(t){const e=this.Lw.length,i=this.Lw.length>0?this.Lw[e-1].tl().length+this.Lw[e-1].qa().length:void 0;oh(t,i,Math.ceil(this.e_/this.Bw),this.Uw)}solveNearestFromScreen(t,e=this.Lx){if(e)return super.solveNearestFromScreen(es(t,this.Ji.us),e);const i=ao(es(t,this.Ji.us),this.Lw,this.Ow,this.Dw==="nearest-x"?(s,n)=>Math.abs(s.x-n.x):this.Dw==="nearest-y"?(s,n)=>Math.abs(s.y-n.y):(s,n)=>(s.x-n.x)**2+(s.y-n.y)**2);if(i!==void 0){const s=gt(i[0],this.ks.us.dt,this.scale);return Is(s,this.scale,this.Wy(new Ii,this,s.x,s.y,s).Zu(),this,i[1].Eh())}}}class PR{constructor(){this.Gi="FreeformPattern",this._l={type:"disabled",packager:(t,e,i)=>t.slice()}}s_(t,e,i,s,n,a){if(s>0){const o=Math.trunc((e-s)/i);if(o>0&&t.length>1){const l=t.splice(0,o);for(let u=0;u<l.length;u+=1)a(l[u]),l[u].dispose()}}}Yw(t,e){const i=t.x-e.x,s=t.y-e.y;return Math.sqrt(i*i+s*s)}getXMax(t=[],e){return hh(t,xM,Math.max,MM,e)}getXMin(t=[],e){return hh(t,SM,Math.min,bM,e)}getYMax(t=[],e){return hh(t,vM,Math.max,EM,e)}getYMin(t=[],e){return hh(t,AM,Math.min,RM,e)}}const ff=r=>{switch(r){case"normal":default:return 1;case"high":return .25}},yD=xe({_l:{type:"disabled",packager:(r,t,e)=>r.slice()}});class UR extends yD{s_(t,e,i,s,n,a){if(s>0){const o=Math.ceil(s/i),l=t.length-o;if(l>0){const u=this.rw(t,n);if(u>0){const d=l-u>0?u:l;if(d>0){for(let f=0;f<d;f+=1)a(t[f]),t[f].dispose();t.splice(0,d)}}}}}}const mD=(r,t)=>{const e=t.xt();return r?Math.min(e,r):e},pD=(r,t)=>{const e=t.Mt();return r?Math.max(e,r):e};class yb extends UR{Yw(t,e){return Math.abs(t.x-e.x)}getYMax(t=[],e){return t.reduce(pD,e?e.max.y:void 0)}getYMin(t=[],e){return t.reduce(mD,e?e.min.y:void 0)}}const SD=(r,t)=>{const e=t.vt();return r?Math.min(e,r):e},xD=(r,t)=>{const e=t.bt();return r?Math.max(e,r):e};class mb extends UR{Yw(t,e){return Math.abs(t.y-e.y)}getXMax(t=[],e){return t.reduce(xD,e?e.max.x:void 0)}getXMin(t=[],e){return t.reduce(SD,e?e.min.x:void 0)}}const _s={horizontalProgressive:new class extends yb{constructor(){super({_l:Wv()}),this.Gi="HorizontalProgressivePattern"}rw(r,t){const e=r.length,i=Math.min(t.x.getInnerStart(),t.x.getInnerEnd());let s=0;if(e>1)for(let n=0;n<e-1;n+=1)t.x.mi(r[n].bt(),r[n].vl())<i&&(s+=1);return s}getXMax(r=[],t){return t!==void 0?t?t.max.x:void 0:r.length>0?r[r.length-1].bt():void 0}getXMin(r=[],t){return r.length>0&&r[0].ol()>0?r[0].vt():t?t.min.x:void 0}setPrecision(r){return this.set("_columnPackaging",Wv(ff(r)))}},horizontalRegressive:new class extends yb{constructor(){super({_l:qv()}),this.Gi="HorizontalRegressivePattern"}rw(r,t){const e=r.length,i=Math.max(t.x.getInnerStart(),t.x.getInnerEnd());let s=0;if(e>1)for(let n=0;n<e-1;n+=1)i<t.x.mi(r[n].vt(),-r[n].vl())&&(s+=1);return s}getXMax(r=[],t){return r.length>0&&r[0].ol()>0?r[0].bt():t?t.max.x:void 0}getXMin(r=[],t){return t!==void 0?t?t.min.x:void 0:r.length>0?r[r.length-1].vt():void 0}setPrecision(r){return this.set("_columnPackaging",qv(ff(r)))}},verticalProgressive:new class extends mb{constructor(){super({_l:jv()}),this.Gi="VerticalProgressivePattern"}rw(r,t){const e=r.length,i=Math.min(t.y.getInnerStart(),t.y.getInnerEnd());let s=0;if(e>1)for(let n=0;n<e-1;n+=1)t.y.mi(r[n].Mt(),r[n].bl())<i&&(s+=1);return s}getYMax(r=[],t){return t!==void 0?t?t.max.y:void 0:r.length>0?r[r.length-1].Mt():void 0}getYMin(r=[],t){return r.length>0&&r[0].ol()>0?r[0].xt():t?t.min.y:void 0}setPrecision(r){return this.set("_columnPackaging",jv(ff(r)))}},verticalRegressive:new class extends mb{constructor(){super({_l:$v()}),this.Gi="VerticalRegressivePattern"}rw(r,t){const e=r.length,i=Math.max(t.y.getInnerStart(),t.y.getInnerEnd());let s=0;if(e>1)for(let n=0;n<e-1;n+=1)i<t.y.mi(r[n].xt(),-r[n].bl())&&(s+=1);return s}getYMax(r=[],t){return r.length>0&&r[0].ol()>0?r[0].Mt():t?t.max.y:void 0}getYMin(r=[],t){return t!==void 0?t?t.min.y:void 0:r.length>0?r[r.length-1].xt():void 0}setPrecision(r){return this.set("_columnPackaging",$v(ff(r)))}},freeform:new PR};class OR extends Ic{constructor(t,e,i,s,n,a,o,l,u,d,f,y,m,S,x){super(t,e,i,s,n,a,o,l,_s.horizontalProgressive,u,f,y,m,S,x),this.xs="Step Series",this.Rw=v=>{const b=this.QM.length>0?this.QM[this.QM.length-1].tl().length+this.QM[this.QM.length-1].qa().length:void 0;oh(v,b,this.e_,this.Hw)},this.Hw=v=>{const b=v.length;if(this.QM.length>0){const E=this.QM[this.QM.length-1];if(b>0){const T=E.tl(),V=E.qa(),F=V.length>0?V[V.length-1]:T[T.length-1],B=fb([F].concat(v),this.$w);B.shift();const z=Y((F.x+B[0].x)/2,(F.y+B[0].y)/2),L=Array.prototype.concat(z,B);(V.length>0?T.length+V.length:T.length)>=this.e_?(E.nl(z,Qt(Y(z.x,z.y),Y(z.x,z.y))).zl(!0),this.Ew(L).Rl(!0),this.Vw(v)):E.nl(L)}}else b>0&&this.Ew(fb(v,this.$w));this.zw(v)},this.$w=d,this.Gw.find(v=>v.type==="DataPattern")===void 0&&this.Gw.push({type:"DataPattern",args:{pattern:"ProgressiveX"}})}}class GR extends bh{constructor(t,e,i,s,n,a,o,l,u,d){super(t,e,i,s,n,a,o,l,u,d),this.xs="OHLC Series",this.Xw=f=>f[4]>=f[1],this.c_=Qt(Jn(bt,bt),Jn(kt,kt)),this.jw=[],this.Zw=!1,this.Qw=-1,this.Jw=[],this.Kw=!0,this.qw=!1,this.tC=4,this.Wy=(f,y,m)=>(f.addRow(y.getName()).addRow("Time","",y.axisX.formatValue(m.position)).addRow("Open","",m.open.toFixed(3)).addRow("High","",m.high.toFixed(3)).addRow("Low","",m.low.toFixed(3)).addRow("Close","",m.close.toFixed(3)),f),this.iC=[1e-7,1e-6,1e-5,1e-4,.001,.01,.1,1,5,10,30,60,300,600,1800,3600,7200,14400,28800,36e3,43200,50400,57600,64800,72e3,86400,172800,259200,345600,432e3,604800,1209600,2592e3,7776e3,10368e3,15552e3,31536e3,15768e4,31536e4,63072e4,7884e5,15768e5,31536e5,3942e6,47304e5,63072e5,7884e6,15768e6,31536e6,3942e7,47304e6,63072e6,7884e7,15768e7,31536e7,63072e7,7884e8,15768e8,31536e8,47304e8,63072e8],this.Ji.us.Nn(wt.rf)}r_(){return this.Jw}n_(t){return this.D.on("dataAdd",t)}o_(t){return this.D.off(t)}a_(t){return this.D.on("dataClear",t)}l_(t){return this.D.off(t)}Kp(){return this.tS&&this.Jw.length>0&&this.getVisible()}sC(t){if(!(this.Jw.length<1))return[this.Jw[t][0],this.Jw[t][1],this.Jw[t][2],this.Jw[t][3],this.Jw[t][4]]}Hc(t){if(this.Jw.length===0)return;const e=gt(t,this.ks.us.dt,this.scale).x,i=this.getPackDataState()!==void 0;let s,n,a,o,l;if(i){const d=this.eC;if(!d)return;const f=Jy(e,d.length-1,m=>d[m][0]),y=f!==void 0&&d[f];if(!y)return;o=y[3],a=y[2],n=y[1],l=y[4],s=y[0]}else{const d=Jy(e,this.Jw.length-1,y=>this.Jw[y][0]),f=d!==void 0&&this.Jw[d];if(!f)return;s=f[0],n=f[1],a=f[2],o=f[3],l=f[4]}const u={position:s,open:n,high:a,low:o,close:l,isPacked:i};return{location:Y(u.position,u.close),scale:this.scale,resultTableContent:this.Wy(new Ii,this,u).Zu(),owner:this,isPacked:i,position:s,open:n,high:a,low:o,close:l}}WM(t){if(!(t.x instanceof Ks))throw new Error("OHLCSeries must be attached to a Linear X Axis.");this.hC=t.x}br(){return Y(5,5)}Y_(t){const e=t.length-1;if(e<0)return this;for(let i=0;i<=e;i+=1)t[i][3]<this.c_.min.y&&(this.c_.min.y=t[i][3]),this.c_.max.y<t[i][2]&&(this.c_.max.y=t[i][2]);return this.c_.min.x=Math.min(this.c_.min.x,t[0][0]),this.c_.max.x=Math.max(this.c_.max.x,t[e][0]),this}getXMax(){return this.c_.max.x}getXMin(){return this.c_.min.x}getYMax(){return this.c_.max.y}getYMin(){return this.c_.min.y}add(t){this.Jw.length>0&&this.Ji.us.Nn(wt.vf);const e=Array.isArray(t[0])?t:[t[0]];if(e.length>0){this.Zw=!0;const i=this.Jw.length,s=this.jw.length,n=e.length;this.Jw.length=i+n,this.jw.length=s+n;for(let a=0;a<n;a+=1)this.Jw[i+a]=e[a],this.jw[s+a]=this.Jw[i+a];this.Y_(e),this.D.emit("dataAdd",this,e,void 0),this.ks.Ss()}return this}setPackData(t){return t!==this.Kw&&(this.qw=!0,this.Kw=t,this.Ji.us.Ss()),this}getPackData(){return this.Kw}getPackDataState(){const t=this.Qw;if(!(t<0||this.eC===void 0||this.eC.length===this.Jw.length))return{figureAxisInterval:t}}setFigureWidth(t){return this.rC=t,this.Ji.us.Ss(),this}getFigureWidth(){return this.rC}setFigureMinimumGap(t){return this.tC=t,this.Ji.us.Ss(),this}getFigureMinimumGap(){return this.tC}solveNearestFromScreen(t){return this.Hc(es(t,this.Ji.us))}clear(){return this.Jw=[],this.jw=[],this.eC=void 0,this.nC(),this.c_.min.x=bt,this.c_.min.y=bt,this.c_.max.x=kt,this.c_.max.y=kt,this.D.emit("dataClear",this),this}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}oC(t){return this.hC.getPixelSize()*t/1e3}aC(){const t=this.iC.length-1,e=this.oC(this.rC+this.tC);let i=Jy(e,t,s=>this.iC[s]);return i===void 0?i=e<this.iC[0]?0:this.iC[t]<e?t:this.iC.length/2:this.iC[i]<e&&(i+=1),this.iC.length<=i&&(i=t),1e3*this.iC[i]}Te(){if(super.Te(),!this.Kw){this.eC=void 0;let t=null;if(this.qw?(this.qw=!1,t=this.Jw,this.nC()):t=this.jw,t.length>=1){for(let e=0;e<t.length;e+=1){const i=t[e],s=i[0];this.Xw(i)?this.lC(s,i):this.uC(s,i)}this.jw.length=0,this.Zw=!1,this.Qw=-1}}}dp(){super.dp();const t=this.aC();if(this.Kw&&this.Jw.length>=1&&(t!==this.Qw||this.Zw||this.qw)){this.qw=!1,this.Qw=t,this.Zw=!1,this.nC(),this.eC=[];const e=this.Jw.length;let i=this.Jw[0][0]-this.Jw[0][0]%(t/2)+t,s=0;for(;s<e;){let n=this.sC(s);if(n===void 0)break;let a=n[3],o=n[2];const l=s;for(s+=1;s<e&&this.Jw[s][0]<i;)n=this.Jw[s],this.Jw[s][3]<a&&(a=this.Jw[s][3]),o<this.Jw[s][2]&&(o=this.Jw[s][2]),s+=1;const u=s-1;let d=n[0];l<u&&(d=this.Jw[u][0],n=[d,this.Jw[l][1],o,a,this.Jw[u][4]]),n[1]<n[4]?this.lC(d,n):this.uC(d,n),this.eC.push(n),i+=t}}}}class AD extends GR{constructor(t,e,i,s,n,a,o,l,u,d){super(t,e,i,s,n,a,o,l,u,d),this.cC=1175494351e-14,this.rC=this.qi.ohlcCandleThicknessPixels||5,this.dC=this.qi.ohlcCandleTailStrokeStylePositive,this.fC=this.qi.ohlcCandleTailStrokeStyleNegative,this.AC=this.qi.ohlcCandleBodyFillStylePositive,this.gC=this.qi.ohlcCandleBodyFillStyleNegative,this.mC=i.Lg(this.scale).Re(new ie({thickness:this.rC,fillStyle:this.AC})),this.mC.mu=!0,this.mC.gu={x:0,y:1},this.yC=i.Lg(this.scale).Re(new ie({thickness:this.rC,fillStyle:this.gC})),this.yC.mu=!0,this.yC.gu={x:0,y:-1},this.pC=i.Lg(this.scale).Re(this.dC),this.pC.mu=!0,this.SC=i.Lg(this.scale).Re(this.fC),this.SC.mu=!0,this.ds(this.mC),this.ds(this.yC),this.ds(this.pC),this.ds(this.SC)}setBodyThickness(t){return this.rC=t,this.mC.Re(new ie({thickness:this.rC,fillStyle:this.AC})),this.yC.Re(new ie({thickness:this.rC,fillStyle:this.gC})),this.Ji.us.Ss(),this}getBodyThickness(){return this.rC}setBodyFillStylePositive(t){return this.AC=typeof t=="function"?t(this.AC):t,this.mC.Re(new ie({thickness:this.rC,fillStyle:this.AC})),this.Ji.us.Ss(),this}getBodyFillStylePositive(){return this.AC}setBodyFillStyleNegative(t){return this.gC=typeof t=="function"?t(this.gC):t,this.yC.Re(new ie({thickness:this.rC,fillStyle:this.gC})),this.Ji.us.Ss(),this}getBodyFillStyleNegative(){return this.gC}setTailStrokeStylePositive(t){return this.dC=typeof t=="function"?t(this.dC):t,this.pC.Re(this.dC),this.Ji.us.Ss(),this}getTailStrokeStylePositive(){return this.dC}setTailStrokeStyleNegative(t){return this.fC=typeof t=="function"?t(this.fC):t,this.SC.Re(this.fC),this.Ji.us.Ss(),this}getTailStrokeStyleNegative(){return this.fC}attach(t,e=!0,i=!1){return super.attach(t,e,i),ei(t,this.qi,i,{fill:this.AC,fill2:this.gC,behavior:{colorStep:!0}}),this}nC(){return this.pC.Nt(),this.SC.Nt(),this.mC.Nt(),this.yC.Nt(),this}lC(t,e){return Math.abs(e[1]-e[4])<this.cC?this.mC.zr().Eg({x:t,y:e[1]-this.cC},{x:t,y:e[1]+this.cC}):this.mC.zr().Eg({x:t,y:e[1]},{x:t,y:e[4]}),e[4]<e[2]&&this.pC.zr().Eg({x:t,y:e[4]},{x:t,y:e[2]}),e[3]<e[1]&&this.pC.zr().Eg({x:t,y:e[3]},{x:t,y:e[1]}),this}uC(t,e){return Math.abs(e[1]-e[4])<this.cC?this.yC.zr().Eg({x:t,y:e[1]-this.cC},{x:t,y:e[1]+this.cC}):this.yC.zr().Eg({x:t,y:e[1]},{x:t,y:e[4]}),e[3]<e[4]&&this.SC.zr().Eg({x:t,y:e[3]},{x:t,y:e[4]}),e[1]<e[2]&&this.SC.zr().Eg({x:t,y:e[1]},{x:t,y:e[2]}),this}}const vD={Candlesticks:AD},bD=r=>({defaultDragMouseStyle:ne.Horizontal,getTitleTextRotation:()=>0,...Ol(r,t=>t.getXMin(),t=>t.getXMax(),t=>t.br().x)}),MD=r=>({defaultDragMouseStyle:ne.Vertical,getTitleTextRotation:t=>90*t,...Ol(r,t=>t.getYMin(),t=>t.getYMax(),t=>t.br().y)});class ec extends Zp{constructor(t,e,i,s,n,a,o,l,u,d,f,y,m,S){super(t,e,i,s,n,a,o,l,u,d,f),this.QM=[],this.xs="Line Series",this.Lx=!0,this.e_=void 0,this.Dw="nearest-x",this.pu=void 0,this.Gd=()=>ji(this.lu.getFillStyle()),this.TC=(x,v)=>{const b=x.Ux(v);if(b)return gt(b,this.scale,this.ks.us.dt)},this.Nw=(x,v)=>{const b=x.sw(v);if(b)return gt(b,this.scale,this.ks.us.dt)},this.Gw=y,this.Un=S,this.lu=Kt(this.qi.lineSeriesStrokeStyle,m),this.FC={individualLookupValuesEnabled:(S==null?void 0:S.individualLookupValuesEnabled)!==void 0&&S.individualLookupValuesEnabled}}add(t){return super.add(t),this}setMouseInteractions(t){return super.setMouseInteractions(t)}setStrokeStyle(t){this.lu=typeof t=="function"?t(this.lu):t;const e=this.lu;for(let i=0;i<this.QM.length;i+=1)this.QM[i].Re(e);return this.ks.Ss(),this}getStrokeStyle(){return this.lu}setDataCleaning(t){return this.pu=t,this.QM.forEach(e=>e.Su(this.pu)),this.ks.Ss(),this}setCursorInterpolationEnabled(t){return this.Lx=t,this.ks.us.Ss(),this}getCursorInterpolationEnabled(){return this.Lx}setCursorSolveBasis(t){return this.Dw=t,this.QM.forEach(e=>e.Ka(il(t))),this.ks.Ss(),this}getCursorSolveBasis(){return this.Dw}WM(t){}h_(t){let e=this.QM[0];e||(e=this.Ew(),this.QM.push(e),this.ds(e)),e.nl(t,this.i_)}Ew(){return this.ks.rp(this.scale,this.FC,[kr.UserSeries,...this.Gw]).Re(this.lu).Su(this.pu).Ka(il(this.Dw)).cs(this.getHighlight())}attach(t,e=!0,i=!1){return ei(t,this.qi,i,{stroke:this.lu}),super.attach(t,e,i)}Ie(t,e){t.cs(e),this.ks.Ss()}s_(t,e,i,s){}Hc(t,e,i=this.Lx){const s=ao(t,e?this.QM.filter(n=>n.getIsUnderMouse()):this.QM,i?this.Nw:this.TC,this.Dw==="nearest-x"?(n,a)=>Math.abs(n.x-a.x):this.Dw==="nearest-y"?(n,a)=>Math.abs(n.y-a.y):(n,a)=>(n.x-a.x)**2+(n.y-a.y)**2);if(s!==void 0){const n=gt(s[0],this.ks.us.dt,this.scale),a=s[1].uu();return Is(n,this.scale,this.Wy(new Ii,this,n.x,n.y,n).Zu(),this,a.getFillStyle())}}solveNearestFromScreen(t,e=this.Lx){return this.Hc(es(t,this.Ji.us),!1,e)}}class Kp extends Zp{constructor(t,e,i,s,n,a,o,l,u,d,f,y,m){super(t,e,i,s,n,a,o,l,new PR,d,f),this.QM=[],this.xs="Point series",this.Hx=5,this.Aa=0,this.Ga=!1,this.Wa=!1,this.Ua=!1,this.e_=void 0,this.Ow=(S,x)=>{const v=S.Hc(x);if(v)return gt(v,this.scale,this.ks.us.dt)},this.Un=m,this.$x=u,this.be=Kt(d.pointSeriesFillStyle,y)}add(t){return super.add(t),this}Gd(){return ji(this.be)}Cs(){return this.bs||this.$x}WM(t){}attach(t,e=!0,i=!1){return ei(t,this.qi,i,{fill:this.be}),super.attach(t,e)}Ie(t,e){t.cs(e),this.ks.Ss()}setPointFillStyle(t){this.be=typeof t=="function"?t(this.be):t;const e=this.be;for(let i=0;i<this.QM.length;i+=1)this.QM[i].Ce(e);return this.ks.Ss(),this}getPointFillStyle(){return this.be}setPointSize(t){this.Hx=t;for(let e=0;e<this.QM.length;e+=1)this.QM[e].q(t);return this.ks.Ss(),this}getPointSize(){return this.Hx}getPointShape(){return this.$x}setPointRotation(t){this.Aa=t;for(let e=0;e<this.QM.length;e+=1)this.QM[e].Nh(t);return this.ks.Ss(),this}getPointRotation(){return this.Aa}setIndividualPointSizeEnabled(t){this.Ga=t,t&&this.Ji.us.Nn(wt.bf);for(let e=0;e<this.QM.length;e+=1)this.QM[e].el(t);return this.ks.Ss(),this}getIndividualPointSizeEnabled(){return this.Ga}setIndividualPointRotationEnabled(t){this.Wa=t;for(let e=0;e<this.QM.length;e+=1)this.QM[e].hl(t);return this.ks.Ss(),this}getIndividualPointRotationEnabled(){return this.Wa}setIndividualPointValueEnabled(t){this.Ua=t;for(let e=0;e<this.QM.length;e+=1)this.QM[e].rl(t);return this.ks.Ss(),this}getIndividualPointValueEnabled(){return this.Ua}h_(t){let e=this.QM[0];e||(e=this.Ew()),e.nl(t,this.i_)}Ew(){const t=this.ks.bS(this.scale).il(this.$x).q(this.Hx).Nh(this.Aa).el(this.Ga).hl(this.Wa).rl(this.Ua).Ce(this.be).cs(this.getHighlight());return this.QM.push(t),this.ds(t),t}Hc(t,e){const i=ao(t,e?this.QM.filter(s=>s.getIsUnderMouse()):this.QM,this.Ow,Kn);if(i!==void 0){const s=gt(i[0],this.ks.us.dt,this.scale),n=i[1].Eh(),a=ws(n)?i[0].color?new it({color:i[0].color}):new it({color:n.getFallbackColor()}):n;return Is(s,this.scale,this.Wy(new Ii,this,s.x,s.y,s).Zu(),this,a)}}solveNearestFromScreen(t){return this.Hc(es(t,this.Ji.us),!1)}setCursorResultTableFormatter(t){return super.setCursorResultTableFormatter(t)}}class RD{constructor(t,e,i,s){this.IC=!1,this.D=new Li,this.chart=i,this.PC=s,this.$s=t.$s,this.qs=s||XM,this.DC=nt.document.createElement("div"),this.DC.style.position="absolute",this.DC.style.pointerEvents="none",nt.document.body.append(this.DC);const n=()=>{const a=i.engine.container.getBoundingClientRect();this.DC.style.left=`${a.left}px`,this.DC.style.top=`${a.top}px`,this.DC.style.width=`${a.width}px`,this.DC.style.height=`${a.height}px`};n(),i.onResize(n),this.BC(this.DC),this.LC(),this.RC(),this.EC(),this.zC(e),this.chart.VC().push(this)}BC(t){this.OC=nt.document.createElement("div"),this.OC.style.pointerEvents="all",t.append(this.OC),this.NC=nt.document.createElement("div"),this.GC=new CC(this.$s,this.qs,this.chart,this.NC),this.WC=nt.document.createElement("table"),this.WC.style.borderSpacing="0",this.OC.appendChild(this.GC.oe()),this.OC.appendChild(this.NC),this.NC.appendChild(this.WC)}RC(){let t=0,e=0,i=0,s=0,n=!1;this.IC=!1,this.OC.onmousedown=a=>{a=a||nt.event,i=a.clientX,s=a.clientY,n=!0,nt.document.onmouseup=o=>{this.IC?this.OC.addEventListener("click",xt,!0):this.OC.removeEventListener("click",xt,!0),n=!1,this.IC=!1,nt.document.onmouseup=null,nt.document.onmousemove=null},nt.document.onmousemove=o=>{o=o||nt.event,n&&(t=i-o.clientX,e=s-o.clientY,i=o.clientX,s=o.clientY,this.IC=!0,this.OC.style.top=this.OC.offsetTop-e+"px",this.OC.style.left=this.OC.offsetLeft-t+"px",this.OC.style.removeProperty("right"),this.OC.style.removeProperty("bottom"))}}}EC(){let t=0,e=0,i=0,s=0,n=!1;this.OC.ontouchstart=a=>{a=a||nt.event,i=a.touches[0].clientX,s=a.touches[0].clientY,n=!0,this.OC.ontouchend=()=>{n=!1,nt.document.ontouchend=null,nt.document.ontouchmove=null},this.OC.ontouchmove=o=>{n&&(xt(o),o=o||nt.event,t=i-o.touches[0].clientX,e=s-o.touches[0].clientY,i=o.touches[0].clientX,s=o.touches[0].clientY,this.OC.style.top=this.OC.offsetTop-e+"px",this.OC.style.left=this.OC.offsetLeft-t+"px",this.OC.style.removeProperty("right"),this.OC.style.removeProperty("bottom"))}}}LC(){this.OC.style.setProperty("top","10px"),this.OC.style.setProperty("left","10px"),this.OC.style.position="absolute",this.OC.style.display="flex",this.OC.style.alignItems="flex-start",this.NC.style.setProperty("display","none")}removePositionProperty(){this.OC.style.removeProperty("top"),this.OC.style.removeProperty("left"),this.OC.style.removeProperty("bottom"),this.OC.style.removeProperty("right")}setPositionProperty(t){switch(this.removePositionProperty(),t){case el.BottomLeft:this.OC.style.setProperty("bottom","10px"),this.OC.style.setProperty("left","10px");break;case el.TopLeft:this.OC.style.setProperty("top","10px"),this.OC.style.setProperty("left","10px");break;case el.BottomRight:this.OC.style.setProperty("bottom","10px"),this.OC.style.setProperty("right","10px");break;case el.TopRight:default:this.OC.style.setProperty("top","10px"),this.OC.style.setProperty("right","10px")}}zC(t){for(let e=0;e<t.length;e+=1){const i=this.WC.insertRow();for(let s=0;s<t[e].length;s+=1){const n=i.insertCell(),a=t[e][s];typeof a!="object"?this.UC(a,n):this.addCustomButton(a,n)}}}UC(t,e){switch(t){case Mn.ZoomIn:this.YC(new xC(this.$s,this.chart,this.qs),e);break;case Mn.ZoomInX:this.YC(new AC(this.$s,this.chart,this.qs),e);break;case Mn.ZoomInY:this.YC(new vC(this.$s,this.chart,this.qs),e);break;case Mn.ZoomOut:this.YC(new bC(this.$s,this.chart,this.qs),e);break;case Mn.ZoomOutX:this.YC(new MC(this.$s,this.chart,this.qs),e);break;case Mn.ZoomOutY:this.YC(new RC(this.$s,this.chart,this.qs),e);break;case Mn.ZoomToFit:this.YC(new TC(this.$s,this.chart,this.qs),e);break;case Mn.ToggleAnimations:this.YC(new EC(this.$s,this.chart,this.qs),e);break;default:console.error(`No predefined button like "${Mn[t]}" exists.`)}}YC(t,e){e.rowSpan=t.Xs.rows,e.colSpan=t.Xs.columns,t.ne(e)}addCustomButton(t,e){const i=new wC(this.$s,t,this.chart);return this.YC(i,e),this}dispose(){this.DC.remove(),this.D.emit("dispose",this)}onDispose(t){return this.D.on("dispose",t)}offDispose(t){return this.D.off(t,"dispose")}}class YR extends bh{constructor(t,e,i,s,n,a,o,l,u,d,f,y){var m;super(t,e,i,s,n,a,o,l,u,d),this.xs="Point Line Area Series",this.Wy=ED,this.Lx=!1,this.HC=0,this.Un=y,this.Na=this.ks.dd(this.scale).Re(Kt(this.qi.lineSeriesStrokeStyle,f)).ld(Kt(this.qi.pointSeriesFillStyle,f)).ud(Kt(this.qi.areaSeriesPositiveFillStyle,f)).$C(void 0).pd(7),this.Na.XC=((m=this.Un)===null||m===void 0?void 0:m.allowDataGrouping)!==!1,this.ds(this.Na)}setDataSet(t){var e;return t===((e=this.od)===null||e===void 0?void 0:e.Wt)||(t.yc&&this.Ji.us.Nn(wt.xf),t.vc&&this.Ji.us.Nn(wt.bf),this.od=Dm(t,this.od,()=>[t.$c(()=>{this.HC+=1,this.HC>1&&this.Ji.us.Nn(wt.vf),this.Ji.us.Ss()}),t.Xc(()=>this.Ji.us.Ss())]),this.Na.ad(t),this.chart.us.Ss()),this}getDataSet(){return this.jC()}setStrokeStyle(t){return this.Na.Re(t),this.ks.Ss(),this}getStrokeStyle(){return this.Na.uu()}setAreaFillStyle(t){return this.Na.ud(t),this.ks.Ss(),this}getAreaFillStyle(){return this.Na.ZC()}setPointFillStyle(t){return this.Na.ld(t),this.ks.Ss(),this}getPointFillStyle(){return this.Na.yd()}setPointSize(t){return this.Na.pd(t),this.ks.Ss(),this}getPointSize(){return this.Na.QC()}setPointShape(t){return this.Na.fd(t),this.ks.Ss(),this}getPointShape(){return this.Na.Ad()}setPointRotation(t){return this.Na.gd(t),this.ks.Ss(),this}getPointRotation(){return this.Na.md()}setPointAlignment(t){return this.Na.JC(t),this.Ji.us.Ss(),this}getPointAlignment(){return this.Na.KC()}setCurvePreprocessing(t){return this.Na.$C(t),this.ks.Ss(),this}getCurvePreprocessing(){return this.Na.qC()}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}setCursorInterpolationEnabled(t){return this.Lx=t,this.ks.us.Ss(),this}getCursorInterpolationEnabled(){return this.Lx}add(t){return this.jC().add(t),this.ks.Ss(),this}addArraysXY(t,e){return this.jC().addArraysXY(t,e),this.ks.Ss(),this}appendJSON(t,e){return this.jC().appendJSON(t,e),this.ks.Ss(),this}appendSample(t){return this.jC().appendSample(t),this.ks.Ss(),this}appendSamples(t){return this.jC().appendSamples(t),this.ks.Ss(),this}fill(t){return this.jC().fill(t),this.ks.Ss(),this}setSamples(t){return this.jC().setSamples(t),this.ks.Ss(),this}alterSamples(t,e){return this.jC().alterSamples(t,e),this.ks.Ss(),this}alterSamplesByID(t,e){return this.jC().alterSamplesByID(t,e),this.ks.Ss(),this}getSampleCount(){return this.jC().getSampleCount()}getNextSampleIndex(){return this.jC().getNextSampleIndex()}clear(){return this.jC().clear(),this.ks.Ss(),this}setMaxSampleCount(t){return this.jC().setMaxSampleCount(t),this.ks.Ss(),this}getMaxSampleCount(){return this.jC().getMaxSampleCount()}readBack(t){return this.jC().readBack(t)}onMaxSampleCountExceeded(t){return this.jC().onMaxSampleCountExceeded(t)}offMaxSampleCountExceeded(t){return this.jC().offMaxSampleCountExceeded(t)}tk(){return this.jC()}Gd(){return ji(this.getPointFillStyle())||ji(this.getStrokeStyle().getFillStyle())||ji(this.getAreaFillStyle())}Kp(){var t;const e=(t=this.od)===null||t===void 0?void 0:t.Wt;return this.getAutoScrollingEnabled()&&e!==void 0&&e.uc>0}WM(t){}getXMax(){return this.Na.bt()}getXMin(){return this.Na.vt()}getYMax(){return this.Na.Mt()}getYMin(){return this.Na.xt()}br(){return{x:this.Na.vl(),y:this.Na.bl()}}jC(){if(!this.od){const t=new Pp(this.Un);t.yc&&this.Ji.us.Nn(wt.xf),t.vc&&this.Ji.us.Nn(wt.bf),this.od=Dm(t,this.od,()=>[t.$c(()=>{this.HC+=1,this.HC>1&&this.Ji.us.Nn(wt.vf),this.Ji.us.Ss()}),t.Xc(()=>{this.Ji.us.Ss()})]),this.Na.ad(t)}return this.od.Wt}attach(t,e=!0,i=!1){super.attach(t,e,i);const s=this.getPointFillStyle(),n=this.getAreaFillStyle();return ei(t,this.qi,i,{stroke:this.getStrokeStyle(),fill:s!==Ft?s:n}),super.attach(t,e)}Cs(){return this.bs||this.getPointShape()}Ie(t,e){t.cs(e),this.ks.Ss()}Hc(t,e,i=this.Lx){this.getCurvePreprocessing()!==void 0&&(i=!1);const s=this.tk(),n=gt(t,this.Ji.us.dt,this.scale),a=!e||this.Na.getIsUnderMouse()?s.Hc(n,i,this.scale,this.Ji.pixelScale):void 0;if(a!==void 0){const o=[this.getStrokeStyle().getFillStyle(),this.getPointFillStyle(),this.getAreaFillStyle()];return Is(a,this.scale,this.Wy(new Ii,this,a).Zu(),this,o.filter(l=>!yM(l))[0])}}solveNearestFromScreen(t,e=!1){return this.Hc(es(t,this.Ji.us),!1,e)}}const ED=(r,t,e)=>{const i=t.getIcon();return i?r.addRow(i,t.getName()):r.addRow(t.getName()),r.addRow("X","",t.axisX.formatValue(e.x)).addRow("Y","",t.axisY.formatValue(e.y)),e.lookupValue!==void 0&&r.addRow("Value","",e.lookupValue.toFixed(1)),r},pb=(...r)=>(t,e)=>r.forEach(i=>i.forEach(s=>{s.axis.dt.q(t),s.axis.rg.q(e)})),Sb=Y(10,10);var qn;(function(r){r[r.Top=0]="Top",r[r.Bottom=1]="Bottom",r[r.Left=2]="Left",r[r.Right=3]="Right"})(qn||(qn={}));const TD=new Set([qn.Top,qn.Bottom,qn.Left,qn.Right]),gf=r=>r.setStopped(!0),wD=r=>r.getChartInteractionFitByDrag()?r.fit(!0):void 0,Ur=(r,t)=>{const e=r.kh.type==="linear-highPrecision"||t.kh.type==="linear-highPrecision",i=r.kh.type==="logarithmic"||t.kh.type==="logarithmic";if(e&&i){const s=`Invalid Axis combination | 'logarithmic' can't be combined with 'linear-highPrecision' (x: ${r.kh.type}, y: ${t.kh.type})`;throw new Error(s)}};var jh,ic,Um;(function(r){r[r.seriesBackground=0]="seriesBackground",r[r.gridLine0=1]="gridLine0",r[r.gridLine1=2]="gridLine1",r[r.gridLine2=3]="gridLine2",r[r.highlightersBelow=4]="highlightersBelow"})(jh||(jh={})),function(r){r[r.plotting=0]="plotting",r[r.highlightersAbove=1]="highlightersAbove",r[r.fg=2]="fg"}(ic||(ic={}));class tS extends zc{constructor(t,e,i,s,n,a,o){super(t,e,i,e.vm("chartXY bg",0),s,e.us.qi.chartXYBackgroundFillStyle,e.us.qi.chartXYBackgroundStrokeStyle,e.us.qi.chartXYTitleFont,e.us.qi.chartXYTitleFillStyle,o),this.ik=this.sm.d2({scaleXYConstructor:Se}),this.Vg=[],this.Og=[],this.Gg=[],this.Ng=[],this.sk=new Map,this.ek=!0,this.hk=!0,this.rk=!0,this.Rf=2,this.nk=!0,this.ak=!0,this.lk=[],this.uk=this.xm.ke(this.ik).Ce(Ft).we(At).setMouseInteractions(!1),this.ck=this.xm.Ee(this.ik).Re(At).setMouseInteractions(!1),this.dk=this.xm.Ee(this.ik).Re(At).setMouseInteractions(!1),this.fk=this.qi.chartXYZoomingRectangleFillStyle,this.Ak=this.qi.chartXYZoomingRectangleStrokeStyle,this.gk=this.qi.chartXYFittingRectangleFillStyle,this.mk=this.qi.chartXYFittingRectangleStrokeStyle,this.yk=ne.Default,this.pk=ne.Move,this.Sk=ne.ZoomIn,this.vk=ne.Default,this.bk=void 0,this.xk=yf,this.GM=0,this.Gy=We.snapToClosest,this.Mk=pb(this.Og,this.Vg),this._k=pb(this.Gg,this.Ng),this.wk=(u,d,f,y,m)=>{this.Mk(y,m),this._k(m,y),this.ik.q(y,m),this.us.Ss()},this.Ck=(u,d)=>{this.sk.set(u,d)},this.qA=u=>{const d=this.Og.findIndex(S=>S.axis===u),f=this.Vg.findIndex(S=>S.axis===u),y=this.Gg.findIndex(S=>S.axis===u),m=this.Ng.findIndex(S=>S.axis===u);d>=0&&this.Og.splice(d,1),f>=0&&this.Vg.splice(f,1),y>=0&&this.Gg.splice(y,1),m>=0&&this.Ng.splice(m,1),this.sk.delete(u),this.us.Ss()},this.addAreaSeries=u=>{const d=(u==null?void 0:u.axisX)||(u==null?void 0:u.xAxis)||this.getDefaultAxisX(),f=(u==null?void 0:u.axisY)||(u==null?void 0:u.yAxis)||this.getDefaultAxisY();Ur(d,f);const y=u&&u.baseline?u.baseline:0,m=new(u&&u.type?u.type:dD.Positive)(this,this._S,this.Rb,d,f,this.kk(d),this.kk(f),this.nm,y,this.qi,this.us.es,(u==null?void 0:u.automaticColorIndex)!==void 0?u.automaticColorIndex:this.xS.length);return this.PS(m),m},this.addAreaRangeSeries=u=>{const d=(u==null?void 0:u.axisX)||(u==null?void 0:u.xAxis)||this.getDefaultAxisX(),f=(u==null?void 0:u.axisY)||(u==null?void 0:u.yAxis)||this.getDefaultAxisY();Ur(d,f);const y=new LR(this,this._S,this.Rb,d,f,this.kk(d),this.kk(f),this.nm,this.qi,this.us.es,(u==null?void 0:u.automaticColorIndex)!==void 0?u.automaticColorIndex:this.xS.length);return this.PS(y),y},this.Tk=!1,this.Fk=!1,this.UM=()=>{(this.ek||this.hk)&&(this.bk=this.engine.setMouseStyle(this.yk))},this.YM=()=>{this.Tk=!1,this.engine.restoreMouseStyle(this.bk)},this.HM=(u,d,f)=>{var y,m;const S=De((y=this.cA.Yn)===null||y===void 0?void 0:y.chartXYRectangleZoomFitMouseButton,0),x=De((m=this.cA.Yn)===null||m===void 0?void 0:m.chartXYPanMouseButton,2);this.engine.restoreMouseStyle(this.bk);const v=this.xm.us.Pe(d.clientX,d.clientY);f===S&&(this.ek||this.hk)?(this.Ik(u,v),xt(d)):f===x&&this.nk&&(this.bk=this.engine.setMouseStyle(this.pk),this.Fk=!0,xt(d))},this.eS=(u,d,f,y,m)=>{var S,x;const v=Y(d.clientX,d.clientY),b=De((S=this.cA.Yn)===null||S===void 0?void 0:S.chartXYRectangleZoomFitMouseButton,0),E=De((x=this.cA.Yn)===null||x===void 0?void 0:x.chartXYPanMouseButton,2);f===b&&(this.ek||this.hk)?(this.Pk(u,y,v),xt(d)):f===E&&this.nk&&(this.Dk(Yt(m,-1)),xt(d)),this.us.Ss()},this.$M=(u,d,f,y)=>{var m,S;const x=De((m=this.cA.Yn)===null||m===void 0?void 0:m.chartXYRectangleZoomFitMouseButton,0),v=De((S=this.cA.Yn)===null||S===void 0?void 0:S.chartXYPanMouseButton,2);if(f===x&&(this.ek||this.hk)){const b=Y(d.clientX,d.clientY);this.Bk(u,y,b),xt(d)}else f===v&&this.nk&&xt(d);this.engine.restoreMouseStyle(this.bk),this.FS.getIsUnderMouse()&&(this.bk=this.engine.setMouseStyle(this.yk)),this.Tk=!1,this.Fk=!1},this.sS=(u,d)=>{if(this.rk){const f=this.xm.us.Pe(d.clientX,d.clientY);this.Lk(f,Y(ch(d),ch(d))),xt(d)}},this.Rk=(u,d,f,y)=>{},this.Ek=(u,d,f,y,m,S)=>{if(this.nk){const x=Y(-(y.x+m.x)/2,-(y.y+m.y)/2);this.Dk(x),xt(S),this.Fk=!0}if(this.rk){const x=this.engine.clientLocation2Engine(d.x,d.y),v=this.engine.clientLocation2Engine(f.x,f.y),b=pe(Y(Math.abs(x.x-y.x-(v.x-m.x)),Math.abs(x.y-y.y-(v.y-m.y))),Y(Math.abs(x.x-v.x),Math.abs(x.y-v.y)));this.forEachAxisX(E=>{E.getChartInteractionZoomByWheel()&&E.St(E.dt.mi(E.getInterval().start,-b.x),E.dt.mi(E.getInterval().end,b.x),!1,!0,"interactionZoom")}),this.forEachAxisY(E=>{E.getChartInteractionZoomByWheel()&&E.St(E.dt.mi(E.getInterval().start,-b.y),E.dt.mi(E.getInterval().end,b.y),!1,!0,"interactionZoom")}),xt(S),this.Tk=!0}},this.zk=(u,d,f,y)=>{this.Fk=!1,this.Tk=!1},this.Vk=(u,d,f)=>{(this.hk||this.ek)&&(this.Ik(u,d),xt(f))},this.Ok=(u,d,f,y,m)=>{(this.hk||this.ek)&&(this.Pk(u,d,f),xt(m))},this.Nk=(u,d,f,y)=>{(this.hk||this.ek)&&(this.Bk(u,d,f),xt(y))},this.us.Nn(wt.gf),this.setPadding({right:24}),this.Gk=e.ob("chartXY series bg",jh.seriesBackground),this.Wk=[jh.gridLine0,jh.gridLine1,jh.gridLine2].map(u=>e.Uk(`chartXY gridline #${u}`,u)),this.JA=e.Uk("chartXY highlighters below",jh.highlightersBelow),this.Rb=e.$y("chartXY plotting",ic.plotting),this.KA=e.$y("chartXY highlighters above",ic.highlightersAbove),this.bA=e.$y("chartXY fg",ic.fg),this.ik.x.J(0,this.uiScale.x.getCellSize()-(this.Xt.left+this.Xt.right+this.ya.left+this.ya.right)),this.ik.y.J(0,this.uiScale.y.getCellSize()-(this.Xt.bottom+this.Xt.top+this.ya.bottom+this.ya.top)),this.ik.q(this.uiScale.oi().x,this.uiScale.oi().y),this.FS=this.Gk.ke(this.ik).Ce(this.qi.chartXYSeriesBackgroundFillStyle).we(At),this.IS=this.bA.ke(this.ik).Ce(Ft).we(this.qi.chartXYSeriesBackgroundStrokeStyle).setMouseInteractions(!1),super.TS(this.FS,this.IS),this.setSeriesBackgroundEffect(!1),this.jy=e.Zy();const l=De(a?a.autoCursorBuilder:void 0,q3);this.Pm=l.uy(this.jy,this.ik,this.ik,this.qi),hs.Dm(this),this.LS((u,d)=>{hs.Bm(this,d)}),this.addAxisX(a&&a.defaultAxisX),this.addAxisY(a&&a.defaultAxisY),this.onResize(this.wk),this._m.Rh("ChartXY"),this.hS=Ls(new Er(this.Vk,this.Ok,this.Nk,1),new Vp(this.Rk,this.Ek,this.zk)),this.onSeriesBackgroundMouseEnter(this.UM),this.onSeriesBackgroundMouseLeave(this.YM),this.onSeriesBackgroundMouseWheel(this.sS),this.onSeriesBackgroundMouseDragStart(this.HM),this.onSeriesBackgroundMouseDrag(this.eS),this.onSeriesBackgroundMouseDragStop(this.$M),this.onSeriesBackgroundTouchStart(this.hS.onTouchStart),this.onSeriesBackgroundTouchMove(this.hS.onTouchMove),this.onSeriesBackgroundTouchEnd(this.hS.onTouchEnd),this.setAnimationsEnabled((a==null?void 0:a.disableAnimations)!==!0&&(a==null?void 0:a.animationsEnabled)!==!1),this.Sm(n,this.ik)}get coordsAxis(){return{x:this.getDefaultAxisX(),y:this.getDefaultAxisY()}}getSeries(){return this.xS}setAutoCursor(t){return this.Pm&&t(this.Pm),this.us.Ss(),this}getAutoCursor(){return this.Pm}setAutoCursorMode(t){return this.Gy=t,this.us.Ss(),this}getAutoCursorMode(){return this.Gy}solveNearest(t){const e=t||this.us.On();if(e)return hs.Hc(this,es(e,this.us),this.xS)}getMinimumSize(){const t={x:0,y:0};t.x+=this.Xt.left+this.Xt.right+this.ya.left+this.ya.right,t.y+=this.Xt.top+this.Xt.bottom+this.ya.top+this.ya.bottom;const e=this._m.Ps().jc(),i=nl(lm(this.xk||yf),this.bm);return t.x+=e.x+i.left+i.right,t.y+=e.y+i.top+i.bottom,this.Yk&&(t.x+=this.Yk.left,t.x+=this.Yk.right,t.y+=this.Yk.top,t.y+=this.Yk.bottom),t.x+=Sb.x,t.y+=Sb.y,t}addChartMarkerXY(t=j3,e,i){const s=this.nm(),n=new zR(s,this.uiScale,e||this.getDefaultAxisX(),i||this.getDefaultAxisY(),t,this.tm(s),this.qi);return this.gm(n),n}addAxisX(t){var e,i;const{opposite:s,type:n}=Lm(t);let a;a=n.type==="linear"?this.sm.d1({dimension:"x",scale1DConstructor:Ks}):n.type==="linear-highPrecision"?this.sm.d1({dimension:"x",scale1DConstructor:Ks}).Mi():this.sm.d1({dimension:"x",scale1DConstructor:Sh}).Ai(n.base),a.q(this.ik.x.oi());const o=s?this.Vg:this.Og,l=new Pf(this.Wk,this.bA,this.xm,this.JA,this.KA,this.us.es,a,this.ik.y,(u=()=>l._g(),{...Uf,...bD(u)}),this,s?100:0,this.qA,this.Ck,this.qi,this.th,n);var u;let d,f;return(t==null?void 0:t.iParallel)===void 0&&(t==null?void 0:t.iStack)===void 0?(d=o.reduce((y,m)=>Math.max(y,m.iParallel+1),0),f=0):(d=(e=t.iParallel)!==null&&e!==void 0?e:0,f=(i=t.iStack)!==null&&i!==void 0?i:0),o.push({axis:l,iStack:f,iParallel:d}),this.us.Ss(),l}addAxisY(t){var e,i;const{opposite:s,type:n}=Lm(t);let a;a=n.type==="linear"?this.sm.d1({dimension:"y",scale1DConstructor:Ks}):n.type==="linear-highPrecision"?this.sm.d1({dimension:"y",scale1DConstructor:Ks}).Mi():this.sm.d1({dimension:"y",scale1DConstructor:Sh}).Ai(n.base),a.q(this.ik.y.oi());const o=s?this.Ng:this.Gg,l=new Pf(this.Wk,this.bA,this.xm,this.JA,this.KA,this.us.es,a,this.ik.x,(u=()=>l._g(),{...Gp,...MD(u)}),this,s?100:0,this.qA,this.Ck,this.qi,this.th,n);var u;let d,f;return(t==null?void 0:t.iParallel)===void 0&&(t==null?void 0:t.iStack)===void 0?(d=o.reduce((y,m)=>Math.max(y,m.iParallel+1),0),f=0):(d=(e=t.iParallel)!==null&&e!==void 0?e:0,f=(i=t.iStack)!==null&&i!==void 0?i:0),o.push({axis:l,iParallel:d,iStack:f}),this.us.Ss(),l}swapAxes(t,e){const i=[this.Og,this.Gg,this.Ng,this.Vg],s=i.find(d=>d.find(f=>f.axis===t)!==void 0),n=i.find(d=>d.find(f=>f.axis===e)!==void 0);if(!s||!n)return this;if(s!==n)throw new Error("LightningChart JS ChartXY.swapAxes does not support swapping Axes that are on different sides.");const a=s.find(d=>d.axis===t),o=s.find(d=>d.axis===e);if(!a||!o)return this;const l=a.iParallel,u=a.iStack;return a.iParallel=o.iParallel,a.iStack=o.iStack,o.iParallel=l,o.iStack=u,this.us.Ss(),this}dispose(){return this.Pm.dispose(),this.Gk.W(),this.Rb.W(),this.bA.W(),this.Wk.forEach(t=>t.W()),this.KA.W(),this.JA.W(),this.jy.W(),this.VC().forEach(t=>t.dispose()),Tl(this.ik),this.Og.slice().forEach(t=>t.axis.dispose()),this.Gg.slice().forEach(t=>t.axis.dispose()),this.Ng.slice().forEach(t=>t.axis.dispose()),this.Vg.slice().forEach(t=>t.axis.dispose()),this.xS.slice().forEach(t=>{t.dispose()}),super.dispose()}getDefaultAxisX(){var t;return(t=[...this.Og,...this.Vg].find(e=>e.axis.getVisible()))===null||t===void 0?void 0:t.axis}get axisX(){return this.getDefaultAxisX()}get xAxis(){return this.getDefaultAxisX()}getDefaultAxisY(){var t;return(t=[...this.Gg,...this.Ng].find(e=>e.axis.getVisible()))===null||t===void 0?void 0:t.axis}get axisY(){return this.getDefaultAxisY()}get yAxis(){return this.getDefaultAxisY()}getDefaultAxes(){return[this.getDefaultAxisX(),this.getDefaultAxisY()]}getAxes(...t){const e=t&&t.length>0?new Set(t):TD;return Ff(Array.from(e).map(i=>{switch(i){default:case qn.Top:return this.Vg.map(s=>s.axis);case qn.Bottom:return this.Og.map(s=>s.axis);case qn.Left:return this.Gg.map(s=>s.axis);case qn.Right:return this.Ng.map(s=>s.axis)}}))}Hk(t){let e;return this.forEachAxisX(i=>{e=t===i?"x":e}),this.forEachAxisY(i=>{e=t===i?"y":e}),e}forEachAxisX(t){this.Og.forEach((e,i,s)=>t(e.axis,i,s.map(n=>n.axis))),this.Vg.forEach((e,i,s)=>t(e.axis,i,s.map(n=>n.axis)))}forEachAxisY(t){this.Gg.forEach((e,i,s)=>t(e.axis,i,s.map(n=>n.axis))),this.Ng.forEach((e,i,s)=>t(e.axis,i,s.map(n=>n.axis)))}setTitlePosition(t){return this.xk=t,this.us.Ss(),this}getTitlePosition(){return this.xk}$k(t,e,i,s){const n=this.xk||yf;let a,o=nl(lm(n),this.bm);this.getTitleFillStyle()===Ft||this.getTitle().length===0?(a={x:0,y:0},o={left:0,top:0,right:0,bottom:0}):a=this._m.Ps().jc();const l=Math.abs(s)+this.ya.bottom+this.Xt.bottom,u=Math.abs(i)+this.ya.top+this.Xt.top,d={left:Math.abs(t)+this.ya.left+this.Xt.left,right:Math.abs(e)+this.ya.right+this.Xt.right,top:u,bottom:l},f=this.uiScale.Wi(),{horizontalAlignment:y,verticalAlignment:m,position:S,marginsWithTitle:x}=xb(n,f,d,a,o,this.ya);return this._m.Fe(S).Da(y).La(m),x}Te(t){super.Te(t);for(const T of this.xS)T.oS();for(const T of this.xS)T.Te();const e=this.Gg.map(T=>T.axis.Mr().Ps()),i=this.Og.map(T=>T.axis.Mr().Ps()),s=this.Vg.map(T=>T.axis.Mr().Ps()),n=this.Ng.map(T=>T.axis.Mr().Ps());let a=!1;this.forEachAxis(T=>{(T.kr()||T.Tr())&&(a=!0)});const o=this.Tk||this.Fk||!this.ak&&a;hs.Im(this,this.FS.getIsUnderMouse(),o,this.xS,T=>hs.Hc(this,T,this.xS),(T,V)=>T.Hc(V,!0));const l=mf(this.Gg,e),u=mf(this.Og,i),d=mf(this.Vg,s),f=mf(this.Ng,n),y=this.$k(l.thicknessTotal,f.thicknessTotal,d.thicknessTotal,u.thicknessTotal),m=this.ik.x.getCellSize()-(y.left+y.right),S=this.ik.y.getCellSize()-(y.bottom+y.top),x=[y.left,y.right],v=[y.bottom,y.top];this.ik.x.J(0,m),this.ik.y.J(0,S),this.ik.x.si(x),this.ik.y.si(v);const b=(T,V,F,B)=>{let z=0;T.groups.forEach(L=>{let A=0;const R=L.stacks.reduce((_,X)=>Math.max(_,X.kg),0),w=L.stacks.reduce((_,X)=>_+(X.axis.getVisible()?X.axis.iA+X.axis.sA:0),0),C=L.stacks.reduce((_,X)=>_+(X.axis.getVisible()&&"pixels"in X.axis.zd?X.axis.zd.pixels:0),0),k=V-w-C;L.stacks.forEach(_=>{const X=_.axis,N=X.getVisible(),U=Math.max(V-A,0),O=Math.min(N?"pixels"in X.zd?X.zd.pixels:X.zd.relative/L.sumRelativeSize*k:0,U),W=N?F[0]+A+X.iA:0,P=N?F[1]+(V-A)-O-X.iA:0;X.dt.si([W,P]),X.Te({kg:R,Tg:_.Tg,Pg:O,Xk:A,zg:R+_.Tg,Bg:z}),N&&(A+=O+X.iA+X.sA)}),z+=B*L.thicknessMax})};b(l,S,v,-1),b(f,S,v,1),b(u,m,x,-1),b(d,m,x,1),this.Yk={left:l.thicknessTotal,top:d.thicknessTotal,right:f.thicknessTotal,bottom:u.thicknessTotal},this.FS.Fe(Y(0,0)).q(Y(m,S)),this.IS.Fe(Y(0,0)).q(Y(m,S));const E=gM(this.ik.x.ei(),this.ik.y.ei(),this.ik.x.ri(),this.ik.y.ri());this.Rb.qv(E),this.JA.qv(E),this.KA.qv(E),this.Zg&&this.Zg(),this.Og.forEach(T=>T.axis.Wg()),this.Vg.forEach(T=>T.axis.Wg()),this.Gg.forEach(T=>T.axis.Wg()),this.Ng.forEach(T=>T.axis.Wg()),super.pm();for(const T of this.xS)T.dp()}j(){for(let t=0;t<this.Og.length;t+=1)this.Og[t].axis.j();for(let t=0;t<this.Vg.length;t+=1)this.Vg[t].axis.j();for(let t=0;t<this.Gg.length;t+=1)this.Gg[t].axis.j();for(let t=0;t<this.Ng.length;t+=1)this.Ng[t].axis.j();return super.j()}kk(t){if(this.sk.has(t))return this.sk.get(t);throw new Error("No attach handler for axis Make sure that passed axes definitely belong to this chart and that they haven't been disposed of.")}addLineSeries(t){const e=(t==null?void 0:t.axisX)||(t==null?void 0:t.xAxis)||this.getDefaultAxisX(),i=(t==null?void 0:t.axisY)||(t==null?void 0:t.yAxis)||this.getDefaultAxisY();Ur(e,i);let s=_s.freeform;t&&t.dataPattern&&(s=t.dataPattern.pattern==="ProgressiveX"?_s.horizontalProgressive:t.dataPattern.pattern==="ProgressiveY"?_s.verticalProgressive:t.dataPattern.pattern==="RegressiveX"?_s.horizontalRegressive:t.dataPattern.pattern==="RegressiveY"?_s.verticalRegressive:_s.freeform);const n=new ec(this,this._S,this.Rb,e,i,this.kk(e),this.kk(i),this.nm,s,this.qi,this.us.es,lf(t&&t.dataPattern),(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length,t);return this.PS(n),n}addPointLineAreaSeries(t){const e=(t==null?void 0:t.axisX)||(t==null?void 0:t.xAxis)||this.getDefaultAxisX(),i=(t==null?void 0:t.axisY)||(t==null?void 0:t.yAxis)||this.getDefaultAxisY();Ur(e,i);const s=new YR(this,this._S,this.Rb,e,i,this.kk(e),this.kk(i),this.nm,this.qi,this.us.es,(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length,t);return this.PS(s),s}addPointSeries(t){const e=(t==null?void 0:t.axisX)||(t==null?void 0:t.xAxis)||this.getDefaultAxisX(),i=(t==null?void 0:t.axisY)||(t==null?void 0:t.yAxis)||this.getDefaultAxisY();Ur(e,i);const s=t&&t.pointShape&&Object.values(qe).includes(t.pointShape)?typeof t.pointShape=="string"?qe[t.pointShape]:t.pointShape:qe.Square,n=new Kp(this,this._S,this.Rb,e,i,this.kk(e),this.kk(i),this.nm,s,this.qi,this.us.es,(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length,t);return this.PS(n),n}addPointLineSeries(t){const e=(t==null?void 0:t.axisX)||(t==null?void 0:t.xAxis)||this.getDefaultAxisX(),i=(t==null?void 0:t.axisY)||(t==null?void 0:t.yAxis)||this.getDefaultAxisY();Ur(e,i);const s=t&&t.pointShape&&Object.values(qe).includes(t.pointShape)?typeof t.pointShape=="string"?qe[t.pointShape]:t.pointShape:qe.Square;let n=_s.freeform;t&&t.dataPattern&&(n=t.dataPattern.pattern==="ProgressiveX"?_s.horizontalProgressive:t.dataPattern.pattern==="ProgressiveY"?_s.verticalProgressive:t.dataPattern.pattern==="RegressiveX"?_s.horizontalRegressive:t.dataPattern.pattern==="RegressiveY"?_s.verticalRegressive:_s.freeform);const a=new Ic(this,this._S,this.Rb,e,i,this.kk(e),this.kk(i),this.nm,n,s,this.qi,this.us.es,lf(t&&t.dataPattern),(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length,t);return this.PS(a),a}addStepSeries(t){const e=(t==null?void 0:t.axisX)||(t==null?void 0:t.xAxis)||this.getDefaultAxisX(),i=(t==null?void 0:t.axisY)||(t==null?void 0:t.yAxis)||this.getDefaultAxisY();Ur(e,i);const s=t&&t.pointShape?t.pointShape:qe.Square,n=t&&t.mode?t.mode:Sa.before,a=new OR(this,this._S,this.Rb,e,i,this.kk(e),this.kk(i),this.nm,s,n,this.qi,this.us.es,lf(t&&t.dataPattern),(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length,t);return this.PS(a),a}addSplineSeries(t){const e=(t==null?void 0:t.axisX)||(t==null?void 0:t.xAxis)||this.getDefaultAxisX(),i=(t==null?void 0:t.axisY)||(t==null?void 0:t.yAxis)||this.getDefaultAxisY();Ur(e,i);const s=t&&t.pointShape?t.pointShape:qe.Square;let n=_s.freeform;t&&t.dataPattern&&(n=t.dataPattern.pattern==="ProgressiveX"?_s.horizontalProgressive:t.dataPattern.pattern==="RegressiveX"?_s.horizontalRegressive:_s.freeform);const a=new IR(this,this._S,this.Rb,e,i,this.kk(e),this.kk(i),this.nm,n,s,this.qi,this.us.es,lf(t&&t.dataPattern),(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length,t);return this.PS(a),a}addRectangleSeries(t){const e=(t==null?void 0:t.axisX)||(t==null?void 0:t.xAxis)||this.getDefaultAxisX(),i=(t==null?void 0:t.axisY)||(t==null?void 0:t.yAxis)||this.getDefaultAxisY();Ur(e,i);const s=new rD(this,this._S,this.Rb,e,i,this.kk(e),this.kk(i),this.nm,this.qi,this.us.es,(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length);return this.PS(s),s}addPolygonSeries(t){const e=(t==null?void 0:t.axisX)||(t==null?void 0:t.xAxis)||this.getDefaultAxisX(),i=(t==null?void 0:t.axisY)||(t==null?void 0:t.yAxis)||this.getDefaultAxisY(),s=new sD(this,this._S,this.Rb,e,i,this.kk(e),this.kk(i),this.nm,this.qi,this.us.es,(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length);return this.PS(s),s}addSegmentSeries(t){const e=(t==null?void 0:t.axisX)||(t==null?void 0:t.xAxis)||this.getDefaultAxisX(),i=(t==null?void 0:t.axisY)||(t==null?void 0:t.yAxis)||this.getDefaultAxisY();Ur(e,i);const s=new nD(this,this._S,this.Rb,e,i,this.kk(e),this.kk(i),this.nm,this.qi,this.us.es,(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length);return this.PS(s),s}addEllipseSeries(t){const e=(t==null?void 0:t.axisX)||(t==null?void 0:t.xAxis)||this.getDefaultAxisX(),i=(t==null?void 0:t.axisY)||(t==null?void 0:t.yAxis)||this.getDefaultAxisY();Ur(e,i);const s=new iD(this,this._S,this.Rb,e,i,this.kk(e),this.kk(i),this.nm,this.qi,this.us.es,(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length);return this.PS(s),s}addBoxSeries(t){const e=(t==null?void 0:t.axisX)||(t==null?void 0:t.xAxis)||this.getDefaultAxisX(),i=(t==null?void 0:t.axisY)||(t==null?void 0:t.yAxis)||this.getDefaultAxisY();Ur(e,i);const s=t&&t.dimensionStrategy?t.dimensionStrategy:Uf,n=new eD(this,this._S,this.Rb,e,i,this.kk(e),this.kk(i),this.nm,s,this.qi,this.us.es,(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length);return this.PS(n),n}addHeatmapGridSeries(t){const e=t.xAxis?t.xAxis:this.getDefaultAxisX(),i=t.yAxis?t.yAxis:this.getDefaultAxisY();let s;if(t.heatmapDataType!==void 0&&t.heatmapDataType!=="intensity")throw new Error(`Unsupported Heatmap Grid heatmapDataType: '${t.heatmapDataType}'`);return s=new aD(this,this._S,this.Rb,e,i,this.kk(e),this.kk(i),this.nm,t,this.qi,this.us.es,(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length),this.PS(s),s}addHeatmapScrollingGridSeries(t){const e=t.xAxis?t.xAxis:this.getDefaultAxisX(),i=t.yAxis?t.yAxis:this.getDefaultAxisY();let s;if(t.heatmapDataType!==void 0&&t.heatmapDataType!=="intensity")throw new Error(`Unsupported Heatmap Grid heatmapDataType: '${t.heatmapDataType}'`);return s=new oD(this,this._S,this.Rb,e,i,this.kk(e),this.kk(i),this.nm,t,this.qi,this.us.es,(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length),this.PS(s),s}addOHLCSeries(t){const e=(t==null?void 0:t.axisX)||(t==null?void 0:t.xAxis)||this.getDefaultAxisX(),i=(t==null?void 0:t.axisY)||(t==null?void 0:t.yAxis)||this.getDefaultAxisY();Ur(e,i);const s=new(t&&t.type?t.type:vD.Candlesticks)(this,this._S,this.Rb,e,i,this.kk(e),this.kk(i),this.nm,this.qi,this.us.es);return this.PS(s),s}addOnScreenMenu(t,e){return new RD(this.cA,t,this,e)}setMouseBackgroundStyle(t=ne.Default){return this.yk=t,this}setMouseZoomStyle(t=ne.ZoomIn){return this.Sk=t,this}setMouseFitStyle(t=ne.Default){return this.vk=t,this}setMousePanStyle(t=ne.Move){return this.pk=t,this}setMouseInteractions(t){return this.setMouseInteractionRectangleZoom(t).setMouseInteractionRectangleFit(t).setMouseInteractionWheelZoom(t).setMouseInteractionPan(t)}setMouseInteractionRectangleZoom(t){return this.ek=t,this}getMouseInteractionRectangleZoom(){return this.ek}setMouseInteractionRectangleFit(t){return this.hk=t,this}getMouseInteractionRectangleFit(){return this.hk}setMouseInteractionPan(t){return this.nk=t,this}getMouseInteractionPan(){return this.nk}setMouseInteractionWheelZoom(t){return this.rk=t,this}getMouseInteractionWheelZoom(){return this.rk}setZoomingRectangleFillStyle(t){return this.fk=typeof t=="function"?t(this.fk):t,this.us.Ss(),this}getZoomingRectangleFillStyle(){return this.fk}setZoomingRectangleStrokeStyle(t){return this.Ak=typeof t=="function"?t(this.Ak):t,this.us.Ss(),this}getZoomingRectangleStrokeStyle(){return this.Ak}setFittingRectangleFillStyle(t){return this.gk=typeof t=="function"?t(this.gk):t,this.us.Ss(),this}getFittingRectangleFillStyle(){return this.gk}setFittingRectangleStrokeStyle(t){return this.mk=typeof t=="function"?t(this.mk):t,this.us.Ss(),this}getFittingRectangleStrokeStyle(){return this.mk}addLegendBox(t,e){const i=super.addLegendBox(t,e);if(e===void 0||e===this.uiScale)if(t===void 0||t.getAlignment()==="vertical")i.setOrigin(xl.RightCenter).setPosition({x:this.uiScale.x.ut(this.uiScale.x.hi()-this.ya.right),y:pl(this.ik.y.ut(this.ik.y.ei()+this.ik.y.ri()/2),this.ik.y,this.uiScale.y)});else{const s=this.xk||yf,n=xb(s,this.uiScale.Wi(),this.ya,this.getTitleFillStyle()===Ft||this.getTitle().length===0?{x:0,y:0}:this._m.Ps().jc(),nl(lm(s),this.bm),this.ya).marginsWithTitle.top;i.setOrigin(xl.RightTop).setPosition(gt({x:this.pixelScale.x.getInnerEnd()-this.ya.right,y:this.pixelScale.y.getInnerEnd()-n},this.pixelScale,this.uiScale))}return i}Ik(t,e){this.forEachAxis(gf);const i=gt(this.engine.clientLocation2Engine(e.x,e.y),this.xm.us.dt,this.ik);this.uk.Fe(i).q(Y(0,0))}Pk(t,e,i){const s=gt(this.engine.clientLocation2Engine(e.x,e.y),this.xm.us.dt,this.ik),n=gt(this.engine.clientLocation2Engine(i.x,i.y),this.xm.us.dt,this.ik),a=Xn(n.x,this.ik.x.getInnerStart(),this.ik.x.getInnerEnd())&&Xn(n.y,this.ik.y.getInnerStart(),this.ik.y.getInnerEnd()),o=Y(Math.min(s.x,n.x),Math.min(s.y,n.y)),l=Y(Math.max(s.x,n.x),Math.max(s.y,n.y));this.uk.Fe(o).q(pe(l,o));const u=Math.min(l.x-o.x,l.y-o.y)>=10;a&&u&&l.x===s.x&&this.hk?(this.Tk=!0,this.uk.Ce(this.gk).we(this.mk),this.ck.Re(this.mk).Ve(s).ze(n),this.dk.Re(this.mk).Ve(Y(s.x,n.y)).ze(Y(n.x,s.y)),this.bk=this.engine.setMouseStyle(this.vk,this.bk)):a&&u&&(this.ek||this.hk)?(this.Tk=!0,this.uk.Ce(this.fk).we(this.Ak),this.ck.Re(At),this.dk.Re(At),this.bk=this.engine.setMouseStyle(this.Sk,this.bk)):(this.Tk=!1,this.uk.we(At).Ce(Ft),this.ck.Re(At),this.dk.Re(At),this.engine.restoreMouseStyle(this.bk)),this.us.Ss()}Bk(t,e,i){if(this.Tk){const s=gt(this.engine.clientLocation2Engine(i.x,i.y),this.xm.us.dt,this.ik),n=Xn(s.x,this.ik.x.getInnerStart(),this.ik.x.getInnerEnd())&&Xn(s.y,this.ik.y.getInnerStart(),this.ik.y.getInnerEnd()),a=i.x>=e.x||!this.hk?"zoom":"fit",o=this.uk.Fa(),l=zt(o,this.uk.oi()),u=Math.min(this.uk.oi().x,this.uk.oi().y)>=10;n&&u&&a==="zoom"&&this.ek?(this.forEachAxisX(d=>{if(d.getChartInteractionZoomByDrag()){const f=gt(o,this.ik,d.ng).x,y=gt(l,this.ik,d.ng).x;d.St(f,y,!0,!0,"interactionSetInterval")}}),this.forEachAxisY(d=>{if(d.getChartInteractionZoomByDrag()){const f=gt(o,this.ik,d.ng).y,y=gt(l,this.ik,d.ng).y;d.St(f,y,!0,!0,"interactionSetInterval")}})):n&&u&&a==="fit"&&this.hk&&this.forEachAxis(wD)}this.uk.we(At).Ce(Ft),this.ck.Re(At),this.dk.Re(At),this.us.Ss()}pan(t){this.forEachAxisX(e=>{e.setStopped(!0).pan(t.x)}),this.forEachAxisY(e=>{e.setStopped(!0).pan(t.y)})}Dk(t){this.forEachAxisX(e=>{e.getChartInteractionPanByDrag()&&e.setStopped(!0).pan(t.x)}),this.forEachAxisY(e=>{e.getChartInteractionPanByDrag()&&e.setStopped(!0).pan(t.y)})}zoom(t,e){this.forEachAxis(gf),this.forEachAxisX(i=>{i.zoom(i.dt.ut(t.x),e.x)}),this.forEachAxisY(i=>{i.zoom(i.dt.ut(t.y),e.y)})}Lk(t,e){this.forEachAxisX(i=>{i.getChartInteractionZoomByWheel()&&(gf(i),i.zoom(i.dt.ut(t.x),e.x))}),this.forEachAxisY(i=>{i.getChartInteractionZoomByWheel()&&(gf(i),i.zoom(i.dt.ut(t.y),e.y))})}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.forEachAxis(e=>e.setAnimationsEnabled(t)),this}Zd(){const t=[];return this.forEachAxis(e=>e.vg(i=>t.push(i))),super.Zd().concat(t)}VC(){return this.lk}me(){return this.Cm(this.Rb)}setAutoCursorEnabledDuringAxisAnimation(t){return this.ak=t,this}getAutoCursorEnabledDuringAxisAnimation(){return this.ak}forEachAxis(t){return this.forEachAxisX(t),this.forEachAxisY(t),this}translateCoordinate(t,e,i){if(i){const s=t,n=e,a=ol(n)?n:Cn(n)?this.pixelScale:void 0;if(a&&al(i)){const o=gt(s,a,this.engine.scale);return this.us.Do({engineX:o.x,engineY:o.y})}if(a&&Cn(i))return gt(s,a,this.pixelScale);if(a&&ol(i))return gt(s,a,i)}else{const s=t;if(Cn(e)){const n=this.us.Po(s);return gt({x:n.engineX,y:n.engineY},this.engine.scale,this.pixelScale)}if(ol(e)){const n=e,a=this.us.Po(s);return gt({x:a.engineX,y:a.engineY},this.engine.scale,n)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}}(function(r){r.CenterTop="center-top",r.RightTop="right-top",r.LeftTop="left-top",r.CenterBottom="center-bottom",r.RightBottom="right-bottom",r.LeftBottom="left-bottom",r.SeriesCenterTop="series-center-top",r.SeriesRightTop="series-right-top",r.SeriesLeftTop="series-left-top",r.SeriesCenterBottom="series-center-bottom",r.SeriesRightBottom="series-right-bottom",r.SeriesLeftBottom="series-left-bottom"})(Um||(Um={}));const yf=Um.CenterTop,lm=r=>{switch(r){case"center-top":case"series-center-bottom":return{left:0,right:0,top:0,bottom:5};case"left-top":return{left:20,right:0,top:0,bottom:5};case"right-top":return{left:0,right:20,top:0,bottom:5};case"center-bottom":return{left:0,right:0,top:0,bottom:0};case"left-bottom":return{left:20,right:0,top:0,bottom:0};case"right-bottom":return{left:0,right:20,top:0,bottom:0};case"series-center-top":return{left:0,right:0,top:5,bottom:0};case"series-left-top":return{left:5,right:0,top:5,bottom:0};case"series-right-top":return{left:0,right:5,top:5,bottom:0};case"series-left-bottom":return{left:5,right:0,top:0,bottom:5};case"series-right-bottom":return{left:0,right:5,top:0,bottom:5}}return Nl(0,`Unexpected ChartXY title position selection ${r}`)},xb=(r,t,e,i,s,n)=>{i.x,s.left,s.right;const a=i.y+s.bottom+s.top,o=(s.left-s.right)*t.x,l=(s.bottom-s.top)*t.y;switch(r){case"center-top":return{horizontalAlignment:0,verticalAlignment:1,position:{x:50+o,y:100-(n.top+s.top)*t.y},marginsWithTitle:{...e,top:e.top+a}};case"left-top":return{horizontalAlignment:-1,verticalAlignment:1,position:{x:o,y:100-(n.top-s.top)*t.y},marginsWithTitle:{...e,top:e.top+a}};case"right-top":return{horizontalAlignment:1,verticalAlignment:1,position:{x:100+o,y:100-(n.top-s.top)*t.y},marginsWithTitle:{...e,top:e.top+a}};case"center-bottom":return{horizontalAlignment:0,verticalAlignment:-1,position:{x:50+o,y:(n.bottom+s.bottom)*t.y},marginsWithTitle:{...e,bottom:e.bottom+a}};case"left-bottom":return{horizontalAlignment:-1,verticalAlignment:-1,position:{x:o,y:(n.bottom+s.bottom)*t.y},marginsWithTitle:{...e,bottom:e.bottom+a}};case"right-bottom":return{horizontalAlignment:1,verticalAlignment:-1,position:{x:100+o,y:(n.bottom+s.bottom)*t.y},marginsWithTitle:{...e,bottom:e.bottom+a}};case"series-center-top":return{horizontalAlignment:0,verticalAlignment:1,position:{x:50+o,y:100-e.top*t.y+l},marginsWithTitle:e};case"series-left-top":return{horizontalAlignment:-1,verticalAlignment:1,position:{x:e.left*t.x+o,y:100-e.top*t.y+l},marginsWithTitle:e};case"series-right-top":return{horizontalAlignment:1,verticalAlignment:1,position:{x:100-e.right*t.x+o,y:100-e.top*t.y+l},marginsWithTitle:e};case"series-center-bottom":return{horizontalAlignment:0,verticalAlignment:-1,position:{x:50,y:e.bottom*t.y+l},marginsWithTitle:e};case"series-left-bottom":return{horizontalAlignment:-1,verticalAlignment:-1,position:{x:e.left*t.x+o,y:e.bottom*t.y+l},marginsWithTitle:e};case"series-right-bottom":return{horizontalAlignment:1,verticalAlignment:-1,position:{x:100-e.right*t.x+o,y:e.bottom*t.y+l},marginsWithTitle:e}}return Nl(0,`Unexpected ChartXY title position selection ${r}`)},mf=(r,t)=>{const e=[];r.forEach((s,n)=>{const a=t[n],o=e.find(l=>l.iParallel===s.iParallel);o?(o.stacks.push({...s,...a}),o.stacks.sort((l,u)=>l.iStack-u.iStack)):e.push({iParallel:s.iParallel,stacks:[{...s,...a}]})});const i=e.map(s=>{const n=s.stacks.reduce((u,d)=>Math.max(u,d.kg),0),a=s.stacks.reduce((u,d)=>Math.max(u,d.Tg),0),o=s.stacks.reduce((u,d)=>Math.max(u,d.Vd),0),l=s.stacks.reduce((u,d)=>u+(d.axis.getVisible()&&"relative"in d.axis.zd?d.axis.zd.relative:0),0);return{...s,ticksSizeMax:n,titleSizeMax:a,sumRelativeSize:l,thicknessMax:o}});return i.sort((s,n)=>s.iParallel-n.iParallel),{groups:i,thicknessTotal:i.reduce((s,n)=>s+n.thicknessMax,0)}};class HR{constructor(t,e,i,s,n,a,o){this.coordsRelative="relative",this.coordsClient="client",this.D=new Li,this.jk=[],this.Zk=new Map,this.xS=new Map,this.Qk=(x,v,b)=>{this.xS.size!==0&&[...this.xS.values()].find(({series:E})=>E.getVisible()===!0)!==void 0||this.Jk.St(v,b,!1,!1,"zoomBandChart"),this.Kk.us.Ss()},e.us.Nn(wt.ff),this.cA=t,this.qk=(a==null?void 0:a.orientation)||"x",this.tT=(a==null?void 0:a.useSharedValueAxis)!==void 0&&a.useSharedValueAxis,this.iT=s,this.Wu=this.qk==="x"?Uf:Gp;const l={...a,defaultAxisX:this.Wu.getWidth({x:a==null?void 0:a.defaultAxis,y:void 0}),defaultAxisY:this.Wu.getHeight({x:a==null?void 0:a.defaultAxis,y:void 0})};this.Kk=new tS(t,e,i,se,n,l,o).setTitle("Zoom Band Chart").setMouseInteractions(!1).setAutoCursorMode(We.disabled),this.engine=this.Kk.engine;const u=this.Kk.getDefaultAxisX().setMouseInteractions(!1),d=this.Kk.getDefaultAxisY().setMouseInteractions(!1);this.Jk=this.Wu.getWidth({x:u,y:d}).setScrollStrategy($r.fitting).setAnimationScroll(!1).setStrokeStyle(At).setTickStrategy(Al.Empty),a!=null&&a.useSharedValueAxis?this.sT=this.Wu.getHeight({x:u,y:d}):this.Wu.getHeight({x:u,y:d}).dispose();const f=this.getTheme().zoomBandChartDefocusOverlayFillStyle||new it({color:this.getTheme().isDark?I(0,0,0,180):I(255,255,255,180)});this.eT=[this.Kk.bA.ke(this.Jk.ng).Ce(f).we(At),this.Kk.bA.ke(this.Jk.ng).Ce(f).we(At)];const y=this.Kk.bA.Lg(this.Jk.ng).Re(this.getTheme().zoomBandChartSplitterStrokeStyle||this.getTheme().chartXYSeriesBackgroundStrokeStyle);this.hT={collection:y,members:new Array(5).fill(0).map(x=>y.zr())};const m=this.getTheme(),S=typeof m.zoomBandChartKnobFillStyle=="function"?m.zoomBandChartKnobFillStyle(this.cA.$s):m.zoomBandChartKnobFillStyle||Ft;this.rT=[this.Kk.bA.ke(this.Kk.pixelScale).Ce(S).we(At),this.Kk.bA.ke(this.Kk.pixelScale).Ce(S).we(At)],this.nT=this.getTheme().zoomBandChartKnobSize||{x:0,y:0},this.oT()}add(t){var e,i,s,n,a;const o=this.jk.map(T=>T.axis),l=this.qk==="x"?t.axisX:t.axisY;if(!o.includes(l)){const T=l.onIntervalChange(this.Qk);this.jk.push({axis:l,deattach:()=>{l.offIntervalChange(T)}}),this.Jk.$h(l.Hh()),this.aT&&this.aT.remove(),this.aT=$5(...this.jk.map(V=>V.axis))}const u=this.Wu.getHeight({x:t.axisX,y:t.axisY});let d;if(this.tT)d=this.sT;else{const T=this.Zk.get(u);T?d=T:(d=this.Wu.getHeight({x:this.Kk.addAxisX.bind(this.Kk),y:this.Kk.addAxisY.bind(this.Kk)})(),this.lT(d)),this.Zk.set(u,d)}const f=this.Wu.getWidth({x:this.Jk,y:d}),y=this.Wu.getHeight({x:this.Jk,y:d});let m;const S=[],x=(T,V)=>{const F=A=>{if(A.length!==0)if("x"in A[0]){const R=A;V.add(R)}else{const R=A,w=[];for(let C=0;C<R.length;C+=1){const k=R[C];w.push({x:k[0],y:k[4]})}V.add(w)}},B=T.r_();F(B);const z=T.n_((A,R)=>F(R));S.push(()=>T.o_(z));const L=T.a_(()=>V.clear());S.push(()=>{T.l_(L)})};if(t instanceof YR)m=this.Kk.addPointLineAreaSeries({...t.Un,xAxis:f,yAxis:y}).setStrokeStyle(t.getStrokeStyle()).setAreaFillStyle(t.getAreaFillStyle()).setPointFillStyle(t.getPointFillStyle()).setCurvePreprocessing(t.getCurvePreprocessing()),m.setDataSet(t.tk());else if(t instanceof ec||t instanceof GR){const T=this.Kk.addLineSeries({xAxis:f,yAxis:y,dataPattern:t instanceof ec?(e=t.Un)===null||e===void 0?void 0:e.dataPattern:void 0});if(t instanceof ec)T.setStrokeStyle(t.getStrokeStyle());else{const V=CD(t);V&&T.setStrokeStyle(V)}x(t,T),m=T}else if(t instanceof Qp){const T=this.Kk.addAreaSeries({xAxis:f,yAxis:y,baseline:t.Mw}).setFillStyle(t.getFillStyle()).setStrokeStyle(t.getStrokeStyle());x(t,T),m=T}else if(t instanceof Kp){const T=this.Kk.addPointSeries({xAxis:f,yAxis:y,pointShape:(i=t.Un)===null||i===void 0?void 0:i.pointShape}).setPointFillStyle(t.getPointFillStyle()).setPointSize(t.getPointSize()).setPointRotation(t.getPointRotation());x(t,T),m=T}else if(t instanceof OR){const T=this.Kk.addStepSeries({xAxis:f,yAxis:y,pointShape:(s=t.Un)===null||s===void 0?void 0:s.pointShape,mode:t.$w}).setStrokeStyle(t.getStrokeStyle()).setPointFillStyle(t.getPointFillStyle()).setPointSize(t.getPointSize()).setPointRotation(t.getPointRotation());x(t,T),m=T}else if(t instanceof IR){const T=this.Kk.addSplineSeries({xAxis:f,yAxis:y,pointShape:(n=t.Un)===null||n===void 0?void 0:n.pointShape}).setStrokeStyle(t.getStrokeStyle()).setPointFillStyle(t.getPointFillStyle()).setPointSize(t.getPointSize()).setPointRotation(t.getPointRotation());x(t,T),m=T}else if(t instanceof Ic){const T=this.Kk.addSplineSeries({xAxis:f,yAxis:y,pointShape:(a=t.Un)===null||a===void 0?void 0:a.pointShape}).setStrokeStyle(t.getStrokeStyle()).setPointFillStyle(t.getPointFillStyle()).setPointSize(t.getPointSize()).setPointRotation(t.getPointRotation());x(t,T),m=T}else if(t instanceof LR){const T=this.Kk.addAreaRangeSeries({xAxis:f,yAxis:y}).setLowFillStyle(t.getLowFillStyle()).setHighFillStyle(t.getHighFillStyle()).setLowStrokeStyle(t.getLowStrokeStyle()).setHighStrokeStyle(t.getHighStrokeStyle()).add(t.r_()),V=t.n_((B,z)=>T.add(z));S.push(()=>t.o_(V)),m=T;const F=t.a_(()=>T.clear());S.push(()=>{t.l_(F)})}else{if(!(t instanceof NR))throw new Error("LightningChart JS Zoom Band Chart unsupported series type");{const T=this.Kk.addHeatmapGridSeries({xAxis:f,yAxis:y,...t.F_}),V=()=>{T.setWireframeStyle(t.getWireframeStyle()).setIntensityInterpolation(t.getIntensityInterpolation()).setFillStyle(t.getFillStyle())};V(),m=T,t.D_(m);const F=t.R_((L,A)=>T.invalidateIntensityValues(A)),B=t.B_(V);S.push(()=>{t.E_(F),t.L_(B)});const z=t.a_(()=>T.clear());S.push(()=>{t.l_(z)})}}m.setMouseInteractions(!1);const v=t.onVisibleStateChanged((T,V)=>{m.setVisible(V)});S.push(()=>{t.offVisibleStateChanged(v)});const b=t.onHighlight((T,V)=>m.setHighlight(V));S.push(()=>{t.offHighlight(b)});const E=t.onDispose(()=>{this.disposeSeries(t)});return S.push(()=>{t.offDispose(E)}),this.xS.set(t,{series:m,clearReferences:()=>S.forEach(T=>T())}),m}disposeSeries(t){const e=this.xS.get(t);if(e){const{clearReferences:s}=e;s(),this.xS.delete(t),e.series.dispose();const n=this.Wu.getHeight({x:t.axisX,y:t.axisY}),a=this.Zk.get(n);a&&a._g().length===0&&(this.Zk.delete(n),a.dispose())}const i=this.qk==="x"?t.axisX:t.axisY;if(!Array.from(this.xS.keys()).find(s=>i===(this.qk==="x"?s.axisX:s.axisY))){const s=this.jk.findIndex(n=>n.axis===i);this.jk[s].deattach(),this.jk.splice(s,1)}return this}setDefocusOverlayFillStyle(t){return this.eT.forEach(e=>e.Ce(t)),this.Kk.us.Ss(),this}getDefocusOverlayFillStyle(){return this.eT[0].Eh()}setSplitterStrokeStyle(t){return this.hT.collection.Re(t),this.Kk.us.Ss(),this}getSplitterStrokeStyle(){return this.hT.collection.uu()}setKnobFillStyle(t){return this.rT.forEach(e=>e.Ce(t)),this.Kk.us.Ss(),this}getKnobFillStyle(){return this.rT[0].Eh()}setKnobStrokeStyle(t){return this.rT.forEach(e=>e.we(t)),this.Kk.us.Ss(),this}getKnobStrokeStyle(){return this.rT[0].ao()}setKnobSize(t){return this.nT=t,this.Kk.us.Ss(),this}getKnobSize(){return this.nT}getDefaultAxisX(){return this.Kk.getDefaultAxisX()}getDefaultAxisY(){return this.Kk.getDefaultAxisY()}get axisX(){return this.getDefaultAxisX()}get xAxis(){return this.getDefaultAxisX()}get axisY(){return this.getDefaultAxisY()}get yAxis(){return this.getDefaultAxisY()}lT(t){t.setTickStrategy(Al.Empty).setMouseInteractions(!1).setNibStyle(At).setStrokeStyle(At)}oT(){let t;const e=(n,a,o)=>{var l,u;const d=this.qk==="x"?(l=Array.from(this.xS.keys())[0])===null||l===void 0?void 0:l.axisX:(u=Array.from(this.xS.keys())[0])===null||u===void 0?void 0:u.axisY;if(!d)return;const f=d.getInterval(),y=this.Jk.getInterval();Math.abs(this.Jk.dt.ct(n)-this.Jk.dt.ct(a))<10||Math.sign(a-n)!==Math.sign(f.end-f.start)||Math.min(n,a)<Math.min(y.start,y.end)||Math.max(n,a)>Math.max(y.start,y.end)&&Math.max(f.start,f.end)<Math.max(n,a)||d.St(n,a,o,!0,"zoomBandChart")};this.rT.forEach((n,a)=>{n.setMouseEnterEventHandler(()=>{t=this.engine.setMouseStyle(this.Wu.getWidth({x:ne.Horizontal,y:ne.Vertical}),t)}),n.setMouseLeaveEventHandler(()=>{this.engine.restoreMouseStyle(t)});const o=u=>{var d,f;const y=this.qk==="x"?(d=Array.from(this.xS.keys())[0])===null||d===void 0?void 0:d.axisX:(f=Array.from(this.xS.keys())[0])===null||f===void 0?void 0:f.axisY;if(!y)return;const m=this.Wu.getWidth(this.Kk.translateCoordinate(u,this.Kk.coordsAxis)),S=y.getInterval(),x=a===0?m:S.start,v=a===1?m:S.end;e(x,v,!1),xt(u)};n.setMouseDragEventHandler((u,d,f,y,m)=>o(d));const l=Ls(new Er(void 0,(u,d,f,y,m)=>o(m)));n.setTouchStartEventHandler(l.onTouchStart),n.setTouchMoveEventHandler(l.onTouchMove),n.setTouchEndEventHandler(l.onTouchEnd)}),this.Kk.onSeriesBackgroundMouseEnter(()=>{t=this.engine.setMouseStyle(ne.Move,t)}),this.Kk.onSeriesBackgroundMouseLeave(()=>{this.engine.restoreMouseStyle(t)});const i=(n,a)=>{var o,l;const u=this.qk==="x"?(o=Array.from(this.xS.keys())[0])===null||o===void 0?void 0:o.axisX:(l=Array.from(this.xS.keys())[0])===null||l===void 0?void 0:l.axisY;if(!u)return;const d=u.getInterval(),f=this.Jk.dt.mi(d.start,this.Wu.getWidth(n)),y=this.Jk.dt.mi(d.end,this.Wu.getWidth(n));e(f,y,!1),xt(a)};this.Kk.onSeriesBackgroundMouseDrag((n,a,o,l,u)=>i(u,a));const s=Ls(new Er(void 0,(n,a,o,l,u)=>i(l,u)));this.Kk.onSeriesBackgroundMouseWheel((n,a)=>{var o,l;const u=this.qk==="x"?(o=Array.from(this.xS.keys())[0])===null||o===void 0?void 0:o.axisX:(l=Array.from(this.xS.keys())[0])===null||l===void 0?void 0:l.axisY;if(!u)return;const d=u.getInterval(),f=this.Jk.getInterval(),y=this.Wu.getWidth(this.Kk.translateCoordinate(a,this.Kk.coordsAxis)),m=this.Jk.dt.ct(d.start),S=this.Jk.dt.ct(d.end),x=this.Jk.dt.ct(y),v=Jt((x-m)/(S-m),0,1),b=.2*Math.abs(S-m)*u.Rf,E=v*b*-Math.sign(a.deltaY),T=(1-v)*b*Math.sign(a.deltaY),V=Jt(this.Jk.dt.mi(d.start,E),f.start,f.end),F=Jt(this.Jk.dt.mi(d.end,T),f.start,f.end);e(V,F,!1),xt(a)}),this.Kk.onSeriesBackgroundTouchStart(s.onTouchStart),this.Kk.onSeriesBackgroundTouchMove(s.onTouchMove),this.Kk.onSeriesBackgroundTouchEnd(s.onTouchEnd),this.eT.forEach((n,a)=>{n.setMouseEnterEventHandler(()=>{t=this.engine.setMouseStyle(ne.Point,t)}),n.setMouseLeaveEventHandler(()=>{this.engine.restoreMouseStyle(t)});const o=u=>{var d,f;const y=this.qk==="x"?(d=Array.from(this.xS.keys())[0])===null||d===void 0?void 0:d.axisX:(f=Array.from(this.xS.keys())[0])===null||f===void 0?void 0:f.axisY;if(!y)return;const m=this.Wu.getWidth(this.Kk.translateCoordinate(u,this.Kk.coordsAxis)),S=y.getInterval(),x=this.Jk.getInterval(),v=Jt(m-(S.end-S.start)/2,Math.min(x.start,x.end),Math.max(x.start,x.end)-Math.abs(S.end-S.start)),b=v+(S.end-S.start);e(v,b,!0),xt(u)};n.setMouseClickEventHandler((u,d)=>o(d));const l=Ls(new class{constructor(u,d=300){this.Ds=!1,this.Bs=[],this.Ls=300,this.Rs=u,this.Ls=d}Is(u,d){const f=nt.performance.now();let y=!1;for(let m=0;m<this.Bs.length;m+=1)f-this.Bs[m].time>=this.Ls?(this.Bs.splice(m,1),m-=1):this.Bs[m].state&&(y=!0);return this.Ds?d.interactions.length===0&&(this.Bs.push({state:!1,time:f}),this.Ds=!1):d.interactions.length===1&&d.type==="pointerdown"&&(this.Bs.push({state:!0,time:f}),y=!0,this.Ds=!0),y}Ps(u,d,f){if(f&&!this.Ds){const y=this.Bs.reduce((m,S)=>(S.state?m.on+=1:m.off+=1,m),{on:0,off:0});y.on>=1&&y.off>=1&&(this.Rs(u,d),this.Bs.length=0)}}}((u,d)=>o(d)));n.setTouchStartEventHandler(l.onTouchStart),n.setTouchMoveEventHandler(l.onTouchMove),n.setTouchEndEventHandler(l.onTouchEnd)})}getSizePixels(){return this.Kk.getSizePixels()}onResize(t){return this.Kk.onResize((e,i,s,n,a)=>t(this,i,s,n,a))}offResize(t){return this.Kk.offResize(t)}Fr(t){this.Kk.Fr(t)}getMinimumSize(){return this.Kk.getMinimumSize()}j(){return this.Kk.j()}Z(){return this.Kk.Z()}Te(t){var e,i,s,n;const a=rh(Array.from(this.xS.keys()).map(v=>v.chart)),o=this.qk==="x"?(e=Array.from(this.xS.keys())[0])===null||e===void 0?void 0:e.axisX:(i=Array.from(this.xS.keys())[0])===null||i===void 0?void 0:i.axisY;if(this.qk==="x"){const v=a.reduce((V,F)=>{let B=0;return F.forEachAxisY(z=>{B+=z.sg===0?z.Ug():0}),Math.max(V,B)},0),b=a.reduce((V,F)=>{let B=0;return F.forEachAxisY(z=>{B+=z.sg===100?z.Ug():0}),Math.max(V,B)},0),E=a.reduce((V,F)=>Math.max(V,F.getPadding().left),0),T=a.reduce((V,F)=>Math.max(V,F.getPadding().right),0);(s=this.getDefaultAxisY())===null||s===void 0||s.setThickness(v),this.Kk.setPadding({left:E+(a.length===0?10:0),right:T+b+(a.length===0?10:0)})}else{const v=a.reduce((V,F)=>{let B=0;return F.forEachAxisX(z=>{B+=z.sg===0?z.Ug():0}),Math.max(V,B)},0),b=a.reduce((V,F)=>{let B=0;return F.forEachAxisX(z=>{B+=z.sg===100?z.Ug():0}),Math.max(V,B)},0),E=a.reduce((V,F)=>Math.max(V,F.getPadding().bottom),0),T=a.reduce((V,F)=>Math.max(V,F.getPadding().top),0);(n=this.getDefaultAxisX())===null||n===void 0||n.setThickness(v),this.Kk.setPadding({bottom:E+(a.length===0?10:0),top:T+b+(a.length===0?10:0)})}this.Kk.Te(t);const l=this.Jk.getInterval().start,u=this.Jk.getInterval().end,d=Jt(o?o.getInterval().start:l,l,u),f=Jt(o?o.getInterval().end:u,l,u),y=this.Wu.getHeight(this.Kk.ik.getInnerIntervalPixels());this.eT[0].Fe(this.Wu.toPoint(l,0)).q(this.Wu.toPoint(d-l,y)),this.eT[1].Fe(this.Wu.toPoint(f,0)).q(this.Wu.toPoint(u-f,y)),this.hT.members[0].Eg(this.Wu.toPoint(l,y),this.Wu.toPoint(d,y)),this.hT.members[1].Eg(this.Wu.toPoint(d,y),this.Wu.toPoint(d,0)),this.hT.members[2].Eg(this.Wu.toPoint(d,0),this.Wu.toPoint(f,0)),this.hT.members[3].Eg(this.Wu.toPoint(f,0),this.Wu.toPoint(f,y)),this.hT.members[4].Eg(this.Wu.toPoint(f,y),this.Wu.toPoint(u,y));const m=gt(this.Wu.toPoint(d,y/2),this.Jk.ng,this.Kk.pixelScale),S=gt(this.Wu.toPoint(f,y/2),this.Jk.ng,this.Kk.pixelScale),x=this.nT;this.rT[0].Fe({x:m.x-x.x/2,y:m.y-x.y/2}).q({x:x.x,y:x.y}).Nh(this.Wu.getWidth({x:0,y:90})),this.rT[1].Fe({x:S.x-x.x/2,y:S.y-x.y/2}).q({x:x.x,y:x.y}).Nh(this.Wu.getWidth({x:0,y:90}))}setSeriesBackgroundFillStyle(t){return this.Kk.setSeriesBackgroundFillStyle(t),this.Kk.us.Ss(),this}getSeriesBackgroundFillStyle(){return this.Kk.getSeriesBackgroundFillStyle()}setSeriesBackgroundStrokeStyle(t){return this.Kk.setSeriesBackgroundStrokeStyle(t),this.Kk.us.Ss(),this}getSeriesBackgroundStrokeStyle(){return this.Kk.getSeriesBackgroundStrokeStyle()}setSeriesBackgroundEffect(t){return this.Kk.setSeriesBackgroundEffect(t),this.Kk.us.Ss(),this}getSeriesBackgroundEffect(){return this.Kk.getSeriesBackgroundEffect()}getTheme(){return this.Kk.getTheme()}setTitle(t){return this.Kk.setTitle(t),this}getTitle(){return this.Kk.getTitle()}setTitleFillStyle(t){return this.Kk.setTitleFillStyle(t),this}getTitleFillStyle(){return this.Kk.getTitleFillStyle()}setTitleFont(t){return this.Kk.setTitleFont(t),this}getTitleFont(){return this.Kk.getTitleFont()}setTitleMargin(t){return this.Kk.setTitleMargin(t),this}getTitleMargin(){return this.Kk.getTitleMargin()}setPadding(t){return this.Kk.setPadding(t),this}getPadding(){return this.Kk.getPadding()}setBackgroundFillStyle(t){return this.Kk.setBackgroundFillStyle(t),this}getBackgroundFillStyle(){return this.Kk.getBackgroundFillStyle()}setBackgroundStrokeStyle(t){return this.Kk.setBackgroundStrokeStyle(t),this}getBackgroundStrokeStyle(){return this.Kk.getBackgroundStrokeStyle()}translateCoordinate(t,e,i){return b0(t,e,i,this.Kk.pixelScale,this.Kk.us)}addUIElement(t,e){return this.Kk.addUIElement(t,e)}addLegendBox(t,e){return this.Kk.addLegendBox(t,e)}getLegendBoxes(){return this.Kk.getLegendBoxes()}saveToFile(t,e,i){return this.Kk.saveToFile(t,e,i),this}dispose(){return this.Kk.dispose(),this.Zk.clear(),this.xS.clear(),this.iT(this),this}isDisposed(){return this.Kk.isDisposed()}onDispose(t){return this.Kk.onDispose(()=>t(this))}offDispose(t){return this.Kk.offDispose(t)}}const CD=r=>{if("getStrokeStyle"in r)return r.getStrokeStyle();const t=(e=>e instanceof ec||e instanceof Qp?e.getStrokeStyle().getFillStyle():e instanceof Kp||e instanceof Ic?e.getPointFillStyle():void 0)(r);return t?new ie({thickness:2,fillStyle:t}):void 0};class kD extends Yl{constructor(t,e,i,s,n,a,o){super(t,e,i,s,n,o),this.xs="Point Series",this.Vx=[],this.Ox=!1,this.Hx=3,this.Aa=0,this.Wy=_c,this.be=Kt(this.qi.polarPointSeriesFillStyle,a),this.od=new Pp({dataPattern:null}),this.Na=t.dd(s).Re(At).ud(Ft).ld(this.be).fd(qe.Circle).pd(this.Hx).cs(this.getHighlight()).ad(this.od),this.ds(this.Na)}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}setData(t){return this.Vx.length!==0&&this.Ji.us.Nn(wt.vf),this.Vx=E0(t),this.Ox=!0,this.Bx=Nc(this.Vx),this.ks.Ss(),this}setPointAlignment(t){return this.Na.JC(t),this.Ji.us.Ss(),this}getPointAlignment(){return this.Na.KC()}setPointFillStyle(t){this.be=typeof t=="function"?t(this.be):t;const e=this.be;return this.Na.ld(e),this.ks.Ss(),this}getPointFillStyle(){return this.be}setPointSize(t){return this.Hx=t,this.Na.pd(t),this.ks.Ss(),this}getPointSize(){return this.Hx}setPointShape(t){return this.Na.fd(t),this.Ji.us.Ss(),this}getPointShape(){return this.Na.Ad()}setPointRotation(t){return this.Aa=t,this.Na.gd(t),this.ks.Ss(),this}getPointRotation(){return this.Aa}Kp(){return this.tS&&this.Vx.length>0&&this.getVisible()}Ie(t,e){t.cs(e),this.ks.Ss()}Hc(t,e){const i=gt(t,this.Ji.us.dt,this.scale),s=this.od.Hc(i,!1,this.scale,this.Ji.pixelScale);if(!s)return;const{angle:n,amplitude:a}=Ah(s,this.scale);return Is(s,this.scale,this.Wy(new Ii,this,n,a,this.Ji.getAmplitudeAxis().formatValue).Zu(),this,"color"in s&&s.color!==void 0&&ws(this.be)?new it({color:L5(s.color)}):this.be)}solveNearestFromScreen(t){return this.Hc(es(t,this.Ji.us),!1)}Te(){if(this.Ox||this.scale.Yx()){const t=xh(this.Vx,this.scale),e=Je(t);this.od.clear().add(t),this.Na.Yo(e),this.Ox=!1,this.Na.Ps()}}attach(t,e=!0,i=!1){return super.attach(t,e,i),ei(t,this.qi,i,{fill:this.be}),this}Cs(){return this.bs||this.getPointShape()}}class DD{constructor(t,e,i,s){this.D=new Li,this.uT=!1,this.Ji=t,this.cT=e,this.xS=i,this.Na=s}setGeometry(t){return this.dT=t,this.uT=!0,this.Ji.us.Ss(),this}getGeometry(){return this.dT}setMouseInteractions(t){return this.Na.setMouseInteractions(t),this}dispose(){return this.Na.dispose(),this.cT(this),this.D.emit("dispose",this),this}onDispose(t){return this.D.on("dispose",t)}offDispose(t){return this.D.off(t,"dispose")}setVisible(t){const e=this.Na.getVisible()!==t;return this.Na.setVisible(t),e&&this.D.emit("visibleStateChanged",this,t),this.Ji.us.Ss(),this}getVisible(){return this.Na.getVisible()}onVisibleStateChanged(t){return this.D.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.D.off(t,"visibleStateChanged")}}class FD extends Yl{constructor(t,e,i,s,n,a,o){super(t,e,i,s,n,o),this.xs="Polygon Series",this.fT=[],this.AT=[],this.Wy=_c,this.gT=l=>{const u=this.AT.indexOf(l);u>=0&&this.AT.splice(u,1);const d=this.fT.findIndex(f=>f===l.Na);d>=0&&this.fT.splice(d,1),this.ks.Ss()},this.be=Kt(this.qi.polarPolygonSeriesFillStyle,a),this.xe=Kt(this.qi.polarPolygonSeriesStrokeStyle,a)}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}addPolygon(){const t=new DD(this.Ji,this.gT,this,this.mT());return this.AT.push(t),t}setFillStyle(t){this.be=typeof t=="function"?t(this.be):t;const e=this.be;for(const i of this.fT)i.Ce(e);return this.ks.Ss(),this}getFillStyle(){return this.be}setStrokeStyle(t){this.xe=typeof t=="function"?t(this.xe):t;const e=this.xe;for(const i of this.fT)i.we(e);return this.ks.Ss(),this}getStrokeStyle(){return this.xe}Kp(){return this.tS&&this.AT.find(t=>t.yT!==void 0)!==void 0&&this.getVisible()}Te(){this.AT.forEach(t=>{(t.uT||this.scale.Yx())&&t.pT&&(t.Na.pl(xh(t.pT,this.scale)),t.uT=!1,t.Na.Ps())})}oS(){super.oS();const t=Qt(bt,kt);this.AT.forEach(e=>{if(!e.dT)return;const i=!e.uT&&e.pT?e.pT:E0(e.dT);e.pT=i;const s=!e.uT&&e.yT?e.yT:Nc(i);e.yT=s,t.min=Math.min(t.min,s.min),t.max=Math.max(t.max,s.max)}),this.Bx=t}Ie(t,e){t.cs(e),this.ks.Ss()}Hc(t,e){const i=ao(t,this.fT,(l,u)=>{const d=l.Hc(u);if(d)return gt(d,this.scale,l.us.dt)},Kn);if(!i)return;const s=gt(i[0],i[1].us.dt,this.scale),n=this.ST(i[1]);if(!n)return;const{angle:a,amplitude:o}=Ah(s,this.scale);return{location:s,scale:this.scale,resultTableContent:this.Wy(new Ii,this,a,o,this.Ji.getAmplitudeAxis().formatValue).Zu(),owner:this,fillStyle:this.be,polarPolygon:n}}solveNearestFromScreen(t){return this.Hc(es(t,this.Ji.us),!1)}attach(t,e=!0,i=!1){return super.attach(t,e,i),ei(t,this.qi,i,{fill:this.be,stroke:this.xe}),this}mT(){const t=this.ks.ic(this.scale,Cr.Simple).Ce(this.be).we(this.xe).cs(this.getHighlight());return this.fT.push(t),this.ds(t),t}ST(t){return this.AT.find(e=>e.Na===t)}}class VD extends Yl{constructor(t,e,i,s,n,a,o){super(t,e,i,s,n,o),this.xs="Area Series",this.Vx=[],this.Ox=!1,this.Nx=!1,this.vT=!1,this.Wy=_c,this.be=Kt(this.qi.polarAreaSeriesFillStyle,a),this.xe=Kt(this.qi.polarAreaSeriesStrokeStyle,a)}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}setData(t){this.Vx.length!==0&&this.Ji.us.Nn(wt.vf);const e=(i=>{const s=[];let n,a,o=!1;for(let l=0;l<i.length;l+=1){const u=i[l];let d=!0;if(n){d=!1;const f=u.angle-n.angle;if(xi(f,0))d=!0;else{const y=Math.sign(f);a===void 0?(a=y,d=!0):a===y&&(d=!0)}}d?s.push(u):o=!0,n=u}return{progressivePoints:s,userDataModified:o}})(t);return e.userDataModified&&this.vT===!1&&(console.warn(`${this.xs} setData data format is faulty. Consecutive 'angle' values should progress in the same direction! Invalid data points have been removed.`),this.vT=!0),this.Vx=e.progressivePoints,this.Ox=!0,this.Bx=Nc(this.Vx),this.ks.Ss(),this}setFillStyle(t){return this.be=typeof t=="function"?t(this.be):t,this.ks.Ss(),this}getFillStyle(){return this.be}setStrokeStyle(t){return this.xe=typeof t=="function"?t(this.xe):t,this.ks.Ss(),this}getStrokeStyle(){return this.xe}setConnectDataAutomaticallyEnabled(t){return this.Nx=t,this.ks.Ss(),this}getConnectDataAutomaticallyEnabled(){return this.Nx}Kp(){return this.tS&&this.Vx.length>0&&this.getVisible()}attach(t,e=!0,i=!1){return super.attach(t,e,i),ei(t,this.qi,i,{fill:this.be,stroke:this.xe}),this}}class zD extends VD{constructor(t,e,i,s,n,a,o){super(t,e,i,s,n,a,o),this.bT=this.ks.ic(this.scale,Cr.Simple).cs(this.getHighlight()),this.ds(this.bT)}Te(){if(this.Ox||this.scale.Yx()){const t=this.Vx,e=this.Nx===!0?xh(t.concat((i=>{if(i.length===0)return i;const s=i[0],n=i[i.length-1];if(xi(s.angle,n.angle))return i;const a=1*Math.sign(n.angle-s.angle);let o=0;const l=[];for(let u=n.angle+a;!xi(u%360,s.angle%360);u+=a)if(l.push({angle:u,amplitude:0}),o+=1,o>360)return[];for(let u=0;u<l.length;u+=1)l[u].amplitude=gh(n.amplitude,s.amplitude,(u+1)/(l.length+1));return l})(t)),this.scale):[...xh(t,this.scale),{x:0,y:0}];this.bT.pl(e).Ce(this.be).we(this.xe),this.Ox=!1,this.bT.Ps()}}Ie(t,e){t.cs(e),this.ks.Ss()}Hc(t,e){const i=this.bT.Hc(t);if(!i)return;const{angle:s,amplitude:n}=Ah(i,this.scale);return Is(i,this.scale,this.Wy(new Ii,this,s,n,this.Ji.getAmplitudeAxis().formatValue).Zu(),this,this.be)}solveNearestFromScreen(t){return this.Hc(es(t,this.Ji.us),!1)}}class js extends dn{constructor(){super(...arguments),this.Gi="RadialScale",this.xT={start:0,end:1},this.MT=!1,this._T=0,this.X=Y(0,0),this.wT=[0,0],this.CT=[0,0],this.i=!0,this.vi=!0,this.kT=!0,this.TT=!0,this.FT={x:0,y:0},this.di={x:{displacement:0,scaling:0,highPrecisionOffset:0},y:{displacement:0,scaling:0,highPrecisionOffset:0}}}yx(t,e){return t===this.xT.start&&e===this.xT.end||(this.xT={start:t,end:e},this.kT=!0,this.IT()),this}mx(){return this.xT}gx(){return this.xT.end>=this.xT.start}wx(t){this.MT=t,this.TT=!0}kx(){return this.MT===!1}Cx(t){this._T=t,this.TT=!0}xx(){return this._T}yi(){return this.vi}_i(){return!1}ot(t,e,i,s){return this.x=new Ks(t.x,e.x,i.x,s?s.x:void 0),this.y=new Ks(t.y,e.y,i.y,s?s.y:void 0),this}pi(){return this.di}Yx(){return this.kT}PT(){return this.TT}Wi(){return this.FT}j(){return this.i=!1,this.vi=!1,this.kT=!1,this.TT=!1,this}Z(){return this.i=!0,this.vi=!0,this.kT=!0,this.TT=!0,this}q(t,e){return typeof t=="object"?(this.X.x=t.x,this.X.y=t.y):(this.X.x=t,this.X.y=e),this.IT(),this}Ei(t){return this.wT=t,this.IT(),this}zi(t){return this.CT=t,this.IT(),this}ni(){return Y(this.wT[0]+this.wT[1],this.CT[0]+this.CT[1])}oi(){return this.X}IT(){const t=this.xT,e=Y(this.x.ai(this.X.x),this.y.ai(this.X.y)),i=this.wT[0]+this.wT[1],s=this.CT[0]+this.CT[1],n=Math.max(e.x-i,0),a=Math.max(e.y-s,0),o=.5*(n>a?a:n),l=[this.wT[0]+Math.max((n-2*o)/2,0),this.wT[1]+Math.max((n-2*o)/2,0)],u=[this.CT[0]+Math.max((a-2*o)/2,0),this.CT[1]+Math.max((a-2*o)/2,0)],d=Math.abs(t.end-t.start);this.x.q(this.X.x).si(l).J(-d,d),this.y.q(this.X.y).si(u).J(-d,d),this.FT={x:this.x.getPixelSize(),y:this.y.getPixelSize()},this.di={x:this.x.pi(),y:this.y.pi()},this.Z()}mi(t,e){const i=this.Wi();return{x:t.x+e.x*i.x,y:t.y+e.y*i.y}}Ui(t,e,i,s){const n=this.Wi(),a=l0(t,e);return a.x*=s,a.y*=s,{x:t.x+i*n.x*a.x,y:t.y+i*n.y*a.y}}}class XR extends zc{constructor(t,e,i,s,n,a,o){super(t,e,i,e.vm("polarChart bg",0),s,e.us.qi.polarChartBackgroundFillStyle,e.us.qi.polarChartBackgroundStrokeStyle,e.us.qi.polarChartTitleFont,e.us.qi.polarChartTitleFillStyle,o),this.coordsClient="client",this.Jf=[],this.Bo=!0,this.Gy=We.onHover,this.DT=(u,d,f,y,m)=>{this.Jb.q(y,m)},this.tA=wM(this.Jf),this.BT=u=>{this.Jf.push(u)},this.LT=()=>this.xS,this.us.Nn(wt.cf),this.Gk=e.ob("polarChart series bg",0),this.RT=e.$y("polarChart axis gridlines",0),this.ET=e.$y("polarChart series",1),this.zT=e.$y("polarChart axis lines",2),this.VT=e.$y("polarChart axis ticks",3),this.Jb=i.d2({scaleXYConstructor:js}),this.onResize(this.DT),this._m.Rh("Polar Chart"),this.FS=this.Gk.Jc(this.Jb).Ce(this.qi.polarChartSeriesBackgroundFillStyle).we(At).eu(0).ze(360).ou(0),this.IS=this.Gk.Jc(this.Jb).Ce(Ft).we(this.qi.polarChartSeriesBackgroundStrokeStyle).eu(0).ze(360).ou(0),super.TS(this.FS,this.IS),this.Sm(n,this.pixelScale),this.OT=new N3(this,this.Jb,this.qi,(a==null?void 0:a.disableAnimations)!==!0&&(a==null?void 0:a.animationsEnabled)!==!1,this.RT,this.zT,this.VT,this.es,this.LT),this.NT=new L3(this,this.Jb,this.qi,(a==null?void 0:a.disableAnimations)!==!0&&(a==null?void 0:a.animationsEnabled)!==!1,this.RT,this.zT,this.VT,this.es),this.coordsAxis={axisAmplitude:this.OT,axisRadial:this.NT},this.jy=e.Zy();const l=De(a?a.autoCursorBuilder:void 0,s3);this.Pm=l.uy(this.jy,this.uiScale,this.uiScale,this.qi),hs.Dm(this),this.LS((u,d)=>{hs.Bm(this,d)}),this.setAnimationsEnabled((a==null?void 0:a.disableAnimations)!==!0&&(a==null?void 0:a.animationsEnabled)!==!1)}getSeries(){return this.xS}setAutoCursor(t){return this.Pm&&t(this.Pm),this.us.Ss(),this}getAutoCursor(){return this.Pm}setAutoCursorMode(t){return this.Gy=t,this.us.Ss(),this}getAutoCursorMode(){return this.Gy}solveNearest(t){const e=t||this.us.On();if(e)return hs.Hc(this,es(e,this.us),this.xS)}translateCoordinate(t,e,i){if(i){const s=t,n=this.pixelScale,a=i;if(al(a)){const o=gt(s,n,this.engine.scale);return this.us.Do({engineX:o.x,engineY:o.y})}if(Cn(a))return s;if(om(a)){const o=gt(s,n,this.Jb);return Ah(o,this.Jb)}}else{const s=t,n=e;if(Fp(s)){if(om(n)){const a=this.us.Po(s),o=gt({x:a.engineX,y:a.engineY},this.engine.scale,this.Jb);return Ah(o,this.Jb)}if(al(n))return s;if(Cn(n)){const a=this.us.Po(s);return gt({x:a.engineX,y:a.engineY},this.us.dt,this.pixelScale)}}else if(P3(s)){if(om(n))return s;const a=xh([s],this.Jb)[0];if(al(n)){const o=gt(a,this.Jb,this.engine.scale),l={engineX:o.x,engineY:o.y};return this.us.Do(l)}if(Cn(n))return gt(a,this.Jb,this.pixelScale)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}addLineSeries(t){const e=new Y3(this.ET,this,this._S,this.Jb,this.qi,(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length,this.us.es);return this.PS(e),e}addPointSeries(t){const e=new kD(this.ET,this,this._S,this.Jb,this.qi,(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length,this.us.es);return this.PS(e),e}addPointLineSeries(t){const e=new H3(this.ET,this,this._S,this.Jb,this.qi,(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length,this.us.es);return this.PS(e),e}addAreaSeries(t){const e=new zD(this.ET,this,this._S,this.Jb,this.qi,(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length,this.us.es);return this.PS(e),e}addPolygonSeries(t){const e=new FD(this.ET,this,this._S,this.Jb,this.qi,(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length,this.us.es);return this.PS(e),e}addHeatmapSeries(t){const e=new O3(this.ET,this,this._S,this.Jb,this.qi,this.us.es,t);return this.PS(e),e}addSector(){const t=new U3(this.ET,this,this.tA,this.Jb,this.qi,this.us.es);return this.BT(t),t}getAmplitudeAxis(){return this.OT}get amplitudeAxis(){return this.OT}get axisAmplitude(){return this.OT}getRadialAxis(){return this.NT}get radialAxis(){return this.radialAxis}get axisRadial(){return this.radialAxis}Te(t){var e,i;super.Te(t),is.Fm(this._m,this.bm);for(const o of this.xS)o.oS();this.OT.Mr(),this.NT.Mr();for(const o of this.xS)o.Te();for(let o=1;o<=2;o+=1){const l=this.OT.Te(),u=this.NT.Te(),d=is.Tm(this._m,this.bm),f=[this.ya.left+u,this.ya.right+u],y=[this.ya.bottom+u,this.ya.top+u+d];this.Jb.Ei(f).zi(y);const m=4;if(!(!this.GT||Math.abs(this.GT.amplitude-l)>=m||Math.abs(this.GT.radial-u)>=m)||o!==1){this.GT={amplitude:l,radial:u};break}}const s=this.Jb.mx().start,n=this.Jb.mx().end,a=this.Jb.gx()?(((e=this.GT)===null||e===void 0?void 0:e.radial)||0)*this.Jb.x.getPixelSize()+n-s:(((i=this.GT)===null||i===void 0?void 0:i.radial)||0)*this.Jb.x.getPixelSize()+s-n;this.FS.hu(a).au(360),this.IS.hu(a).au(360);for(const o of this.Jf)o.Te();hs.Im(this,this.FS.getIsUnderMouse(),!1,this.xS,o=>hs.Hc(this,o,this.xS),(o,l)=>o.Hc(l,!0));for(const o of this.xS)o.dp();return super.pm(),this.WT(),this}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.OT.setAnimationsEnabled(t),this.NT.setAnimationsEnabled(t),this}setMouseInteractions(t){return this.Bo=t,this}getMouseInteractions(){return this.Bo}getMinimumSize(){return Y(Ab,Ab)}WT(){}forEachAxis(t){return t(this.OT),t(this.NT),this}dispose(){return this.Jf.slice().forEach(t=>t.dispose()),this.Pm.dispose(),this.Gk.W(),this.RT.W(),this.ET.W(),this.zT.W(),this.VT.W(),this.jy.W(),super.dispose()}Zd(){return[...this.xS,...this.Jf]}}const Ab=300;class _D extends M0{}class ND extends _D{constructor(t,e,i,s,n,a,o,l){super(s,a,o,l),this.xs="Slice",this.u=0,this.gy=!1,this.UT=Ft,this.yy=Ft,this.py=this.u,this.by=Zn(()=>this.Ji.us.Ss()),this.My=()=>{this._y=void 0},this.index=t,this.Ji=s,this.scale=n,this.Ki=a,this.bT=e.ic(n,Cr.Simple).cs(this.getHighlight()),this.ds(this.bT),this.Ue=i.Pr(n).cs(this.getHighlight()),this.ds(this.Ue,{isText:!0})}setValue(t){return this.Ji.getAnimationsEnabled()?this.getVisible()&&this.Ty(this.py,t):this.py=t,this.u=t,this.Ji.us.Ss(),this}getValue(){return this.u}setVisible(t){return t===!1?this.Ji.getAnimationsEnabled()&&this.py>0?(this._y&&(this._y.finish(!1),this._y=void 0),this.Ty(this.py,0,()=>super.setVisible(!1))):(this.py=0,super.setVisible(!1)):this.Ji.getAnimationsEnabled()?(this._y&&(this._y.finish(!1),this._y=void 0),super.setVisible(!0),this.Ty(this.py,this.u)):(this.py=this.u,super.setVisible(!0)),this}Ty(t,e,i){this._y=this.by(300,Mr.ease)([[t,e]],([s])=>{this.py=s,this.Ji.us.Ss()}),this._y.onEveryAnimationEnd(this.My),i&&this._y.onAnimationEnd(i)}setStyle(t,e,i,s){this.UT=t,this.yy=i,this.bT.Ce(this.UT).we(e),this.Ue.Ce(this.yy).Oh(s);for(let n=0;n<this.Qi.length;n+=1)this.styleAttachedEntry(this.Qi[n])}getAnimatedValue(){return this.py}Ie(t,e){return t.cs(e),this.Ji.us.Ss(),this}attach(t,e=!0,i=!1){return super.attach(t,e,i),this.styleAttachedEntry(t,e,i),this}styleAttachedEntry(t,e=!0,i=!1){ei(t,this.qi,i,{fill:this.UT,stroke:this.bT.ao()})}}var xa;(function(r){r[r.VariableHeight=0]="VariableHeight",r[r.VariableWidth=1]="VariableWidth"})(xa||(xa={}));const vb=(r,t)=>{let e=100;return r<=0?r=0:(e=r>=100?100:r,r=t*(e/100)),r},BD=(r,t,e,i,s,n=0,a=xa.VariableHeight,o)=>{t=vb(t,i.x),e=vb(e,i.x);const l=r.length;let u=0,d=0;u=r.reduce((E,T)=>E+T.getAnimatedValue(),0);let f={x:o-t/2,y:i.y+s.bottom},y={x:o+t/2,y:i.y+s.bottom},m={x:0,y:s.bottom},S={x:0,y:s.bottom},x=0,v=0;if(n)for(let E=0;E<r.length;E+=1){v+=r[E].getAnimatedValue();const V=a===xa.VariableWidth?(i.y-n*l)/l:i.y+s.bottom-v/u*i.y;if(a===xa.VariableWidth){n=V-n<10?Math.max(20,V-10):n;break}x!==0&&x-V-n<10&&(n=Math.max(0,x-V-10)),x=V}const b=(t-e)/2/i.y;for(let E=0;E<l;E+=1){const T=r[E];d+=T.getAnimatedValue();const V=a===xa.VariableWidth?(i.y-n*l)/l:i.y+s.bottom-d/u*i.y;let F=0;E>0&&(f={x:m.x+b*n,y:m.y-n},y={x:S.x-b*n,y:S.y-n}),F=(t+d/u*(e-t))/2,m={x:o-F,y:parseInt(`${a===xa.VariableWidth?f.y-V:V}`,10)},S={x:o+F,y:parseInt(`${a===xa.VariableWidth?y.y-V:V}`,10)},y.x>=f.x&&S.x>m.x&&T.bT.pl([m,f,y,S])}};class LD extends Jr{constructor(t,e,i,s,n,a,o){super(t,e,i,e.vm("funnelChart bg",0),s,e.us.qi.funnelChartBackgroundFillStyle,e.us.qi.funnelChartBackgroundStrokeStyle,e.us.qi.funnelChartTitleFont,e.us.qi.funnelChartTitleFillStyle,a),this.Fy=[],this.Iy=qp.None,this.By=!0,this.Ey=0,this.YT=80,this.HT=20,this.$T=0,this.XT=xa.VariableHeight,this.Oy=!0,this.Gy=We.onHover,this.Wy=$p,this.Uy=u=>{const d=this.Fy.indexOf(u);d>=0&&(this.Fy.splice(d,1),this.Yy())},this.us.Nn(wt.af),this.Ny=this.qi.effectsText,this.Hy=e.$y("funnelChart bottom",0),this.Xy=e.$y("funnelChart top",1),this._m.Rh("Funnel Chart"),this.Py=this.qi.funnelChartSliceFillStylePalette,this.Dy=this.qi.funnelChartSliceStrokeStyle,this.Ly=this.qi.funnelChartSliceLabelFont,this.Ry=this.qi.funnelChartSliceLabelFillStyle,this.jy=e.Zy();const l=De(o?o.autoCursorBuilder:void 0,Wp);this.Pm=l.uy(this.jy,this.uiScale,this.uiScale,this.qi),this.setAnimationsEnabled((o==null?void 0:o.disableAnimations)!==!0&&(o==null?void 0:o.animationsEnabled)!==!1),this.Sm(n,this.pixelScale)}setAutoCursor(t){return this.Pm&&t(this.Pm),this.us.Ss(),this}getAutoCursor(){return this.Pm}setAutoCursorMode(t){return this.Gy=t,this.us.Ss(),this}getAutoCursorMode(){return this.Gy}setCursorResultTableFormatter(t){return this.Wy=t,this.us.Ss(),this}addSlice(t,e){const i=new ND(this.Ey,this.Hy,this.Xy,this,this.pixelScale,this.Uy,this.qi,this.us.es);return this.Ey+=1,i.setName(t),i.setValue(e),i.es.rs.ps(this.Ny),i.es.ns.ps(this.Oy),this.Fy.push(i),this.us.Ss(),i.setHighlightOnHover(this.By),i.onMouseMove(()=>{this.Gy&&this.us.Ss()}),i}addSlices(t){const e=[];for(let i=0;i<t.length;i+=1)e.push(this.addSlice(t[i].name,t[i].value));return e}getSlices(){return this.Fy}setHeadWidth(t){return this.YT=t,this.us.Ss(),this}getHeadWidth(){return this.YT}setNeckWidth(t){return this.HT=t,this.us.Ss(),this}getNeckWidth(){return this.HT}setSliceGap(t){return this.$T=Math.min(Math.max(t,0),20),this.us.Ss(),this}setSliceMode(t){return this.XT=t,this.us.Ss(),this}getFunnelSliceMode(){return this.XT}setLUT(t){return this.Nd=t,this.us.Ss(),this}setSliceFillStyle(t){return this.Py=t,this.us.Ss(),this}getSliceFillStyle(){return this.Py}setSliceStrokeStyle(t){return this.Dy=typeof t=="function"?t(this.Dy):t,this.us.Ss(),this}getSliceStrokeStyle(){return this.Dy}setSliceEffect(t){return this.Oy=t,this.Fy.forEach(e=>e.es.ns.ps(t)),this.us.Ss(),this}getSliceEffect(){return this.Oy}setSliceSorter(t){return this.Iy=t,this.Fy=this.Fy.sort(this.Iy),this.us.Ss(),this}getSliceSorter(){return this.Iy}setLabelFillStyle(t){return this.Ry=typeof t=="function"?t(this.Ry):t,this.us.Ss(),this}getLabelFillStyle(){return this.Ry}setLabelFont(t){return this.Ly=typeof t=="function"?t(this.Ly):t,this.us.Ss(),this}getLabelFont(){return this.Ly}setLabelEffect(t){return this.Ny=t,this.Fy.forEach(e=>e.es.rs.ps(t)),this.us.Ss(),this}getLabelEffect(){return this.Ny}setLabelFormatter(t){return this.Jy=t,this.us.Ss(),this}getLabelFormatter(){return this.Jy}setSliceHighlightOnHover(t){return this.By=t,this.Fy.forEach(e=>e.setHighlightOnHover(t)),this}Te(t){super.Te(t),is.Fm(this._m,this.bm),super.pm();const e=is.Tm(this._m,this.bm),i=Y(this.pixelScale.x.getInnerInterval()-(this.ya.left+this.ya.right),this.pixelScale.y.getInnerInterval()-(this.ya.bottom+this.ya.top+e)),s=Y(this.ya.left+i.x/2,this.ya.bottom+i.y/2);this.Fy=this.Fy.sort(this.Iy);for(let u=0,{length:d}=this.Fy;u<d;u+=1)this.Qy(this.Fy[u],u);const n=this.Fy.filter(u=>u.getAnimatedValue()>0);let a=0;for(let u=0;u<n.length;u+=1)a+=n[u].getAnimatedValue();const o=[];for(let u=0;u<n.length;u+=1)o.push((l=n[u].getAnimatedValue())>0?l/a:0);var l;for(let u=0;u<n.length;u+=1){const d=n[u];d.Ue.Rh(this.Jy(d,o[u])).Ps()}o.push(a),hs.Im(this,!1,!1,this.Fy,void 0,(u,d)=>Is(d,this.engine.scale,this.Wy(new Ii,this,u,o[n.indexOf(u)]||0).Zu(),u,void 0)),this.Ky(n,o,s,i)}Qy(t,e){t.setStyle(this.Nd?new it({color:this.Nd.getColors(t.getAnimatedValue())}):this.Py(e,t),this.Dy,this.Ry,this.Ly)}Yy(){this.Fy=this.Fy.sort(this.Iy),this.us.Ss()}Zd(){return this.Fy}dispose(){return this.Fy.slice().forEach(t=>t.dispose()),this.Pm.dispose(),this.Hy.W(),this.Xy.W(),this.jy.W(),super.dispose()}}const bb=(r,t,e)=>{const i=r.Sl();if(i.length>0){let s;const n=(i[1].y-i[0].y)/2+i[0].y;return s=t===nh.Left?(i[0].x-i[1].x)/2+i[1].x-e:(i[2].x-(i.length===4?i[3].x:i[1].x))/2+(i.length===4?i[3].x:i[1].x)+e,{x:s,y:n}}};class WR extends LD{constructor(){super(...arguments),this.Jy=jp.NamePlusValue,this.jT=10,this.ZT=nh.Left,this.QT=Xf.LabelsOnSides,this.qy=[],this.ep=this.qi.funnelChartConnectorStrokeStyle}setLabelConnectorStyle(t){this.ep=t;for(let e=0;e<this.qy.length;e+=1)this.qy[e].Re(this.ep);return this.us.Ss(),this}getLabelConnectorStyle(){return this.ep}setLabelConnectorGap(t){return this.jT=t,this.us.Ss(),this}getLabelConnectorGap(){return this.jT}setLabelSide(t){return this.ZT=t,this.us.Ss(),this}getLabelSide(){return this.ZT}Ky(t,e,i,s){const n=this.jT;let a=0;for(let f=0;f<t.length;f+=1)a=Math.max(a,t[f].Ue.oi().x);const o=s.x+this.ya.left+this.ya.right,l=this.ZT===nh.Right?(this.ya.left+(o-(this.ya.right+a)))/2:(this.ya.left+a+(o-this.ya.right))/2,u=s.x-a,d=Y(u,s.y);BD(t,this.YT,this.HT,d,this.ya,this.$T,this.XT,l),this.JT(t,this.ZT===nh.Left?-1:1,-1,i,s);for(let f=0;f<this.qy.length;f+=1)this.qy[f].setVisible(!1);for(let f=0;f<t.length;f+=1)t[f].getVisible()&&this.hp(this.KT(t[f],-1,i,n))}getMinimumSize(){return Y(500,300)}JT(t,e,i,s,n){if(t.length===0)return;const a=s.x+e*n.x*.5,o=i===1?Math.max:Math.min;let l;for(let u=0;u<t.length;u+=1){const d=t[u];if(d.bT.Sl().length===0)d.Ue.setVisible(!1);else{let f;d.Ue.setVisible(!0),l&&(f=l.Ue.Fa().y+i*(l.Ue.oi().y+10));const y=(bb(d.bT,this.ZT,0)||Y(0,0)).y,m=f===void 0?y:o(y,f);d.Ue.Fe(Y(a,m)).Da(e).La(0),l=d}}}KT(t,e,i,s){const n=t.bT,a=t.Ue,o=bb(n,this.ZT,s);if(o){const l={x:tl(this.ZT===nh.Left?a.Fa().x-e*(s+a.oi().x):a.Fa().x+e*(s+a.oi().x),o,i).x,y:kp(a.Fa().y,o,i).y};return[o,l,Y(this.ZT===nh.Left?a.Fa().x-e*(s+a.oi().x):a.Fa().x+e*(s+a.oi().x),l.y)]}}hp(t){if(t){let e;for(let i=0;i<this.qy.length;i+=1)if(!this.qy[i].getVisible()){e=this.qy[i].setVisible(!0);break}e===void 0&&(e=this.Xy.rp(this.pixelScale,void 0,[kr.InternalUI]).Re(this.ep),this.qy.push(e)),e.Nt().nl(t)}}}var nh,Aa;(function(r){r[r.Right=0]="Right",r[r.Left=1]="Left"})(nh||(nh={}));class ID extends Jr{constructor(t,e,i,s,n,a,o){super(t,e,i,e.vm("gaugeChart bg",0),s,e.us.qi.gaugeChartBackgroundFillStyle,e.us.qi.gaugeChartBackgroundStrokeStyle,e.us.qi.gaugeChartTitleFont,e.us.qi.gaugeChartTitleFillStyle,a),this.Fy=[],this.Uy=u=>{const d=this.Fy.indexOf(u);d>=0&&this.Fy.splice(d,1)},this.us.Nn(wt.lf),this.ks=e.$y("gaugeChart layer",0),this.Xy=e.$y("gaugeChart top layer",1),this._m.Rh("Gauge Chart"),this.Sm(n,this.pixelScale);const l=Ls();this.onBackgroundTouchStart(l.onTouchStart),this.onBackgroundTouchMove(l.onTouchMove),this.onBackgroundTouchEnd(l.onTouchEnd),this.setAnimationsEnabled(o===void 0||o)}dispose(){return this.ks.W(),this.Xy.W(),this.Fy.slice().forEach(t=>t.dispose()),super.dispose()}}class PD extends ID{constructor(t,e,i,s,n,a,o){super(t,e,i,s,n,a,o),this.Xl=90,this.jl=-270,this.qT={min:this.Xl,max:this.jl},this.tF=Zn(()=>this.ks.Ss()),this.iF=()=>{this.sF=void 0},this.eF=e.$y("radialGaugeChart bg arc",2),this.hF=this.ks.Jc(this.pixelScale).Ce(this.qi.gaugeChartEmptyGaugeFillStyle).we(this.qi.gaugeChartEmptyGaugeStrokeStyle)}setAngleInterval(t,e){t===e?e-=360:Math.abs(e-t)>360&&(e-=(e-t)%360);const i=this.Xl,s=this.jl,n=this.qT;return this.getAnimationsEnabled()?this.rF(n,{min:t,max:e}):(n.min=t,n.max=e,this.Xl=t,this.jl=e),this.D.emit("angleIntervalChange",this,{min:i,max:s},{min:t,max:e}),this.us.Ss(),this}getAngleInterval(){return{min:this.Xl,max:this.jl}}setGaugeFillStyle(t){return this.hF.Ce(t),this.us.Ss(),this}setGaugeStrokeStyle(t){return this.hF.we(t),this.us.Ss(),this}rF(t,e,i){this.sF=this.tF(1e3,Mr.ease)([[t.min,e.min],[t.max,e.max]],([s,n])=>{this.qT={min:s,max:n},this.Xl=s,this.jl=n,this.ks.Ss()}),this.sF.onEveryAnimationEnd(this.iF),i&&this.sF.onAnimationEnd(i)}onAngleIntervalChange(t){return this.D.on("angleIntervalChange",t)}offAngleIntervalChange(t){return this.D.off(t,"angleIntervalChange")}dispose(){return super.dispose(),this.eF.W(),this}}class UD extends M0{nF(t){return this.D.on("valueChange",t)}oF(t){return this.D.on("valueIntervalChange",t)}offValueChange(t){return this.D.off(t,"valueChange")}offIntervalChange(t){return this.D.off(t,"valueIntervalChange")}attach(t,e=!0,i=!1){return super.attach(t,e,i),this.styleAttachedEntry(t,e,i),this}styleAttachedEntry(t,e=!0,i=!1){ei(t,this.qi,i,{fill:this.aF})}}class OD extends UD{onValueChange(t){return this.nF(t)}onIntervalChange(t){return this.oF(t)}}class GD extends OD{constructor(t,e,i,s,n,a,o){super(i,n,a,o),this.Xl=0,this.jl=0,this.lF=0,this.uF=0,this.cF=0,this.dF=100,this.fF=!0,this.py=this.u,this.vy=this.getVisible(),this.by=VM(),this.AF=l=>{this.py=l,this.Ji.us.Ss()},this.gF=t,this.Dr=e,this.Ji=i,this.scale=s,this.aF=this.qi.gaugeChartGaugeFillStyle,this.ky=t.Jc(s).Ce(this.aF).we(At).cs(this.getHighlight()),this.ds(this.ky),this.mF=e.Pr(s).cs(this.getHighlight()),this.ds(this.mF,{isText:!0}),this.yF=e.Pr(s).cs(this.getHighlight()),this.ds(this.yF,{isText:!0}),this.Ue=e.Pr(s).cs(this.getHighlight()),this.ds(this.Ue,{isText:!0}),this.mF.Ce(a.gaugeChartIntervalLabelsFillStyle).Oh(a.gaugeChartIntervalLabelsFont),this.yF.Ce(a.gaugeChartIntervalLabelsFillStyle).Oh(a.gaugeChartIntervalLabelsFont),this.Ue.Ce(a.gaugeChartValueLabelFillStyle).Oh(a.gaugeChartValueLabelFont),this.setName("Gauge Slice")}Te(){const t=this.Ji.getDataLabelFormatter(),e=this.Xl/90<this.jl/90?1:-1;let i=this.Ji.getAnimationsEnabled()?this.py:this.u;const[s,n]=this.cF<this.dF?[this.cF,this.dF]:[this.dF,this.cF];i<s?i=s:i>n&&(i=n);const a=this.jl-e*this.uF,o=this.Xl+e*this.lF,l=this.dF-this.cF,u=(l!==0?(a-o)/l:1/0)*(i-this.cF);this.ky.eu(o).ze(o+u);const d=typeof t=="function"?t(i,{getInnerStart:()=>s,getInnerEnd:()=>n}):t.format(i);this.Ue.Rh(d)}pF(){const t=this.Ji.getIntervalLabelFormatter(),e=typeof t=="function"?t(this.cF,{getInnerStart:()=>this.cF,getInnerEnd:()=>this.dF}):t.format(this.cF);return this.mF.Rh(e).Ps(),this.mF.oi()}SF(){const t=this.Ji.getIntervalLabelFormatter(),e=typeof t=="function"?t(this.dF,{getInnerStart:()=>this.cF,getInnerEnd:()=>this.dF}):t.format(this.dF);return this.yF.Rh(e).Ps(),this.yF.oi()}setName(t){return super.setName(t),this.Ji.us.Ss(),this}setValue(t){const e=this.u;return this.Ji.getAnimationsEnabled()?this.vy&&this.by(e,t,this.AF):this.py=t,this.u=t,this.D.emit("valueChange",this,e,t),this.Ji.us.Ss(),this}getValue(){return this.u}setVisible(t){return this.vy=t,t===!1?this.Ji.getAnimationsEnabled()&&this.py>0?this.by(this.py,0,this.AF,{onCompleted:()=>super.setVisible(!1)}):(this.py=0,super.setVisible(!1)):this.Ji.getAnimationsEnabled()?(super.setVisible(!0),this.by(this.py,this.u,this.AF)):(this.py=this.u,super.setVisible(!0)),this}setInterval(t,e){const i=this.cF,s=this.dF;return this.D.emit("valueIntervalChange",this,{min:i,max:s},{min:t,max:e}),this.cF=t,this.dF=e,this.Ji.us.Ss(),this}setIntervalLabelsFont(t){return this.mF.Oh(t),this.yF.Oh(t),this.Ji.us.Ss(),this}getIntervalLabelsFont(){return this.mF.Vh()}setIntervalLabelsFillStyle(t){return this.mF.Ce(t),this.yF.Ce(t),this.Ji.us.Ss(),this}getIntervalLabelsFillStyle(){return this.mF.Eh()}setIntervalLabelsVisible(t){return t?(this.mF.setVisible(!0),this.yF.setVisible(!0)):(this.mF.setVisible(!1),this.yF.setVisible(!1)),this.fF=t,this}getIntervalLabelsVisible(){return this.fF}setAngleInterval(t,e){return this.Xl=t,this.jl=e,this.Ji.us.Ss(),this}setMinAngle(t){return this.Xl=t,this.Ji.us.Ss(),this}setMaxAngle(t){return this.jl=t,this.Ji.us.Ss(),this}setMarginInDegrees(t=this.lF,e=this.uF){return t!==this.lF&&(this.lF=t),e!==this.uF&&(this.uF=e),this.Ji.us.Ss(),this}setFillStyle(t){this.aF=typeof t=="function"?t(this.aF):t;const e=this.aF;this.ky.Ce(e);for(let i=0;i<this.Qi.length;i+=1)this.styleAttachedEntry(this.Qi[i]);return this.Ji.us.Ss(),this}vF(t){return this.Ue.Ce(t),this.Dr.Ss(),this}bF(){return this.Ue.Eh()}getAnimatedValue(){return this.py}}function qf(r,t,e,i,s,n=Math.floor(Math.sqrt(i>s?25*i:25*s))){const a=Array(n+2),o=Math.PI;let l=0,u=0;const d=t*o/180,f=(e*o/180-d)/n;for(a[l]=Y(r.x,r.y),l+=1;l<=n+1;)a[l]=Y(r.x+i*Math.cos(d+u*f),r.y+s*Math.sin(d+u*f)),l+=1,u+=1;return[a,n]}class qR extends PD{constructor(t,e,i,s,n,a,o){super(t,e,i,s,n,a,o),this.Vd=20,this.xF=new Intl.NumberFormat,this.MF=new Intl.NumberFormat,this._F=!1,this.wF=5;const l=new GD(this.ks,this.Xy,this,this.pixelScale,this.Uy,this.qi,this.us.es);this.CF=l,this.Fy.push(l),this.setPadding(10)}Te(t){super.Te(t),is.Fm(this._m,this.bm),super.pm();const e=is.Tm(this._m,this.bm),i=Je([this.CF.pF(),this.CF.SF()]),s=Y(this.pixelScale.x.getInnerInterval()-(this.ya.left+this.ya.right+2*i.max.x),this.pixelScale.y.getInnerInterval()-(this.ya.bottom+this.ya.top+1*i.max.y+e)),n=Math.max(.5*Math.min(s.x,s.y),0),a=Y(this.ya.left+i.max.x+.5*s.x,this.ya.bottom+i.max.y+.5*s.y),o=this._F?this.kF(a,n):a,l=this.hF.xe.getThickness(),u=n-.5*l,d=n-this.Vd;let f=d/n*100;f=f>100||f<0?99:f;const y=100*(1-(this.Vd-l)/n);this.TF(o,d)&&(this.hF.hu(n).ou(f),this.CF.ky.hu(u).ou(y));const m=.5*(S=n,(x=this.jl-this.Xl)/(2*Math.PI*S*(x/360))*l);var S,x;this.hF.eu(this.Xl).ze(this.jl).Fe(o),this.CF.ky.Fe(o),this.CF.Ue.Fe(o),this.Nd&&this.CF.setFillStyle(new it({color:this.Nd.getColors(this.CF.getAnimatedValue())})),this.CF.setMinAngle(this.Xl).setMaxAngle(this.jl).setMarginInDegrees(m,m).Te();const v=this.hF.Zl();if(this.CF.getIntervalLabelsVisible()){this.FF(this.Xl,this.jl,o,v+this.wF);const b=this.CF.mF.Ps().We(),E=this.CF.yF.Ps().We();_f(b,E)&&this.IF(b,E,o,v+this.wF)}}TF(t,e){const i=Yt(this.CF.Ue.Ps().oi(),.5),s=t.x+e,n=t.x-e,a=t.y+e,o=t.y-e;return!(t.x+i.x>s||t.x-i.x<n||t.y+i.y>a||t.y-i.y<o)}IF(t,e,i,s){const n=NM(t,e),[a,o]=[_v(Ar(this.Xl)),_v(Ar(this.jl))],[l,u]=a!==o||a!==1&&a!==3?[pe(n.min,i),pe(n.max,i)]:[pe(Y(n.min.x,n.max.y),i),pe(Y(n.max.x,n.min.y),i)],d=l.x*u.x+l.y*u.y,f=Ca(l)*Ca(u),y=.7*LM(Math.acos(d/f)),[m,S]=this.PF();this.FF(this.Xl-m*y,this.jl-S*y,i,s)}PF(){const t=this.jl-this.Xl,e=Math.sign(t);let i=Math.sign(this.Xl),s=Math.sign(this.jl);return i===s&&(e>=0?i=-s:s=-i),[i,s]}kF(t,e){const[i]=qf(t,this.Xl,this.jl,e,e),s=Je(i),n=.5*(s.max.x-s.min.x),a=.5*(s.max.y-s.min.y);return zt(pe(t,Y(s.min.x+n,s.min.y+a)),t)}FF(t,e,i,s){const n=Ar(t),a=Ar(e);this.CF.mF.Fe(Wn(Y(i.x+s,i.y),i,-n)),this.CF.yF.Fe(Wn(Y(i.x+s,i.y),i,-a)),this.CF.mF.Ea(Y(-Math.cos(n),-Math.sin(n))),this.CF.yF.Ea(Y(-Math.cos(a),-Math.sin(a)))}getDefaultSlice(){return this.CF}setAutoScaling(t){return this._F=t,this.us.Ss(),this}getAutoScaling(){return this._F}setDataLabelFormatter(t){return this.MF=t,this.us.Ss(),this}getDataLabelFormatter(){return this.MF}setIntervalLabelFormatter(t){return this.xF=t,this.us.Ss(),this}getIntervalLabelFormatter(){return this.xF}setIntervalLabelPadding(t){return this.wF=t,this.us.Ss(),this}getIntervalLabelPadding(){return this.wF}setThickness(t){return this.Vd=t,this}setLUT(t){return this.Nd=t,this.us.Ss(),this}setDataLabelFont(t){return this.CF.Ue.Oh(t),this.us.Ss(),this}getDataLabelFont(){return this.CF.Ue.Vh()}getMinimumSize(){return Y(500,300)}setDataLabelFillStyle(t){return this.CF.vF(t),this.us.Ss(),this}getDataLabelFillStyle(){return this.CF.bF()}Zd(){return this.Fy}dispose(){return this.CF.dispose(),super.dispose()}}class YD extends M0{}class HD extends YD{constructor(t,e,i,s,n,a,o,l){super(s,a,o,l),this.xs="Slice",this.u=0,this.gy=!1,this.UT=Ft,this.yy=Ft,this.py=this.u,this.by=Zn(()=>this.Ji.us.Ss()),this.My=()=>{this._y=void 0},this.index=t,this.Ji=s,this.scale=n,this.Ki=a,this.bT=e.ic(n,Cr.Simple).cs(this.getHighlight()),this.ds(this.bT),this.Ue=i.Pr(n).cs(this.getHighlight()),this.ds(this.Ue,{isText:!0})}setValue(t){return this.Ji.getAnimationsEnabled()?this.getVisible()&&this.Ty(this.py,t):this.py=t,this.u=t,this.Ji.us.Ss(),this}getValue(){return this.u}setVisible(t){return t===!1?this.Ji.getAnimationsEnabled()&&this.py>0?(this._y&&(this._y.finish(!1),this._y=void 0),this.Ty(this.py,0,()=>super.setVisible(!1))):(this.py=0,super.setVisible(!1)):this.Ji.getAnimationsEnabled()?(this._y&&(this._y.finish(!1),this._y=void 0),super.setVisible(!0),this.Ty(this.py,this.u)):(this.py=this.u,super.setVisible(!0)),this}Ty(t,e,i){this._y=this.by(300,Mr.ease)([[t,e]],([s])=>{this.py=s,this.Ji.us.Ss()}),this._y.onEveryAnimationEnd(this.My),i&&this._y.onAnimationEnd(i)}setStyle(t,e,i,s){this.UT=t,this.yy=i,this.bT.Ce(this.UT).we(e),this.Ue.Ce(this.yy).Oh(s);for(let n=0;n<this.Qi.length;n+=1)this.styleAttachedEntry(this.Qi[n])}getAnimatedValue(){return this.py}attach(t,e=!0,i=!1){return super.attach(t,e,i),this.styleAttachedEntry(t,e,i),this}styleAttachedEntry(t,e=!0,i=!1){ei(t,this.qi,i,{fill:this.UT,stroke:this.bT.ao()})}}(function(r){r[r.VariableHeight=0]="VariableHeight",r[r.VariableWidth=1]="VariableWidth"})(Aa||(Aa={}));const Mb=(r,t)=>{let e=100;return r<=0?r=0:(e=r>=100?100:r,r=t*(e/100)),r},XD=(r,t,e,i,s,n=0,a=Aa.VariableHeight,o)=>{t=Mb(t,i.x),e=Mb(e,i.x);const l=r.length;let u=0,d=0;u=r.reduce((E,T)=>E+T.getAnimatedValue(),0);let f={x:o-t/2,y:i.y+s.bottom},y={x:o+t/2,y:i.y+s.bottom},m={x:0,y:s.bottom},S={x:0,y:s.bottom},x=0,v=0;if(n)for(let E=0;E<r.length;E+=1){v+=r[E].getAnimatedValue();const V=a===Aa.VariableWidth?(i.y-n*l)/l:i.y+s.bottom-v/u*i.y;if(a===Aa.VariableWidth){n=V-n<10?Math.max(20,V-10):n;break}x!==0&&x-V-n<10&&(n=Math.max(0,x-V-10)),x=V}const b=(t-e)/2/i.y;for(let E=0;E<l;E+=1){const T=r[E];d+=T.getAnimatedValue();const V=a===Aa.VariableWidth?(i.y-n*l)/l:i.y+s.bottom-d/u*i.y;let F=0;E>0&&(f={x:m.x+b*n,y:m.y-n},y={x:S.x-b*n,y:S.y-n}),F=(t+d/u*(e-t))/2,m={x:o-F,y:parseInt(`${a===Aa.VariableWidth?f.y-V:V}`,10)},S={x:o+F,y:parseInt(`${a===Aa.VariableWidth?y.y-V:V}`,10)},y.x>=f.x&&S.x>=m.x&&T.bT.pl([m,f,y,S])}};class WD extends Jr{constructor(t,e,i,s,n,a,o){super(t,e,i,e.vm("pyramidChart bg",0),s,e.us.qi.pyramidChartBackgroundFillStyle,e.us.qi.pyramidChartBackgroundStrokeStyle,e.us.qi.pyramidChartTitleFont,e.us.qi.pyramidChartTitleFillStyle,a),this.Fy=[],this.Iy=qp.None,this.Py=this.qi.pyramidChartSliceFillStylePalette,this.Dy=this.qi.pyramidChartSliceStrokeStyle,this.By=!0,this.Ly=this.qi.pyramidChartSliceLabelFont,this.Ry=this.qi.pyramidChartSliceLabelFillStyle,this.Ey=0,this.YT=0,this.HT=80,this.$T=0,this.XT=Aa.VariableHeight,this.Oy=!0,this.Gy=We.onHover,this.Wy=$p,this.Uy=u=>{const d=this.Fy.indexOf(u);d>=0&&(this.Fy.splice(d,1),this.Yy())},this.us.Nn(wt.af),this.Ny=this.qi.effectsText,this.Hy=e.$y("pyramidChart bottom",0),this.Xy=e.$y("pyramidChart top",1),this._m.Rh("Pyramid Chart"),this.jy=e.Zy();const l=De(o?o.autoCursorBuilder:void 0,Wp);this.Pm=l.uy(this.jy,this.uiScale,this.uiScale,this.qi),this.Sm(n,this.pixelScale),this.setAnimationsEnabled((o==null?void 0:o.disableAnimations)!==!0&&(o==null?void 0:o.animationsEnabled)!==!1)}setAutoCursor(t){return this.Pm&&t(this.Pm),this.us.Ss(),this}getAutoCursor(){return this.Pm}setAutoCursorMode(t){return this.Gy=t,this.us.Ss(),this}getAutoCursorMode(){return this.Gy}setCursorResultTableFormatter(t){return this.Wy=t,this.us.Ss(),this}addSlice(t,e){const i=new HD(this.Ey,this.Hy,this.Xy,this,this.pixelScale,this.Uy,this.qi,this.us.es);return this.Ey+=1,i.setName(t),i.setValue(e),i.es.rs.ps(this.Ny),i.es.ns.ps(this.Oy),this.Fy.push(i),this.us.Ss(),i.onMouseMove(()=>{this.Gy&&this.us.Ss()}),i}addSlices(t){const e=[];for(let i=0;i<t.length;i+=1)e.push(this.addSlice(t[i].name,t[i].value));return e}getSlices(){return this.Fy}setNeckWidth(t){return this.HT=t,this.us.Ss(),this}getNeckWidth(){return this.HT}setSliceGap(t){return this.$T=Math.min(Math.max(t,0),20),this.us.Ss(),this}setSliceMode(t){return this.XT=t,this.us.Ss(),this}getPyramidSliceMode(){return this.XT}setLUT(t){return this.Nd=t,this.us.Ss(),this}setSliceFillStyle(t){return this.Py=t,this.us.Ss(),this}getSliceFillStyle(){return this.Py}setSliceStrokeStyle(t){return this.Dy=typeof t=="function"?t(this.Dy):t,this.us.Ss(),this}getSliceStrokeStyle(){return this.Dy}setSliceEffect(t){return this.Oy=t,this.Fy.forEach(e=>e.es.ns.ps(t)),this.us.Ss(),this}getSliceEffect(){return this.Oy}setSliceSorter(t){return this.Iy=t,this.Fy=this.Fy.sort(this.Iy),this.us.Ss(),this}getSliceSorter(){return this.Iy}setLabelFillStyle(t){return this.Ry=typeof t=="function"?t(this.Ry):t,this.us.Ss(),this}getLabelFillStyle(){return this.Ry}setLabelFont(t){return this.Ly=typeof t=="function"?t(this.Ly):t,this.us.Ss(),this}getLabelFont(){return this.Ly}setLabelEffect(t){return this.Ny=t,this.Fy.forEach(e=>e.es.rs.ps(t)),this.us.Ss(),this}getLabelEffect(){return this.Ny}setLabelFormatter(t){return this.Jy=t,this.us.Ss(),this}getLabelFormatter(){return this.Jy}setSliceHighlightOnHover(t){return this.By=t,this.Fy.forEach(e=>e.setHighlightOnHover(t)),this}Te(t){super.Te(t),is.Fm(this._m,this.bm),super.pm();const e=is.Tm(this._m,this.bm),i=Y(this.pixelScale.x.getInnerInterval()-(this.ya.left+this.ya.right),this.pixelScale.y.getInnerInterval()-(this.ya.bottom+this.ya.top+e)),s=Y(this.ya.left+i.x/2,this.ya.bottom+i.y/2);this.Fy=this.Fy.sort(this.Iy);for(let u=0,{length:d}=this.Fy;u<d;u+=1)this.Qy(this.Fy[u],u);const n=this.Fy.filter(u=>u.getAnimatedValue()>0);let a=0;for(let u=0;u<n.length;u+=1)a+=n[u].getAnimatedValue();const o=[];for(let u=0;u<n.length;u+=1)o.push((l=n[u].getAnimatedValue())>0?l/a:0);var l;for(let u=0;u<n.length;u+=1){const d=n[u];d.Ue.Rh(this.Jy(d,o[u])).Ps()}o.push(a),hs.Im(this,!1,!1,this.Fy,void 0,(u,d)=>Is(d,this.engine.scale,this.Wy(new Ii,this,u,o[n.indexOf(u)]||0).Zu(),u,void 0)),this.Ky(n,o,s,i)}Qy(t,e){t.setStyle(this.Nd?new it({color:this.Nd.getColors(t.getAnimatedValue())}):this.Py(e,t),this.Dy,this.Ry,this.Ly)}Yy(){this.Fy=this.Fy.sort(this.Iy),this.us.Ss()}Zd(){return this.Fy}dispose(){return this.Fy.slice().forEach(t=>t.dispose()),this.Pm.dispose(),this.Hy.W(),this.Xy.W(),this.jy.W(),super.dispose()}}const Rb=(r,t,e)=>{const i=r.Sl();if(i.length>0){let s;const n=(i[1].y-i[0].y)/2+i[0].y;return s=t===ah.Left?(i[0].x-i[1].x)/2+i[1].x-e:(i[2].x-(i.length===4?i[3].x:i[1].x))/2+(i.length===4?i[3].x:i[1].x)+e,{x:s,y:n}}};class jR extends WD{constructor(){super(...arguments),this.Jy=jp.NamePlusValue,this.jT=10,this.ZT=ah.Left,this.QT=Xf.LabelsOnSides,this.qy=[],this.ep=this.qi.pyramidChartConnectorStrokeStyle}setLabelConnectorStyle(t){this.ep=t;for(let e=0;e<this.qy.length;e+=1)this.qy[e].Re(this.ep);return this.us.Ss(),this}getLabelConnectorStyle(){return this.ep}setLabelConnectorGap(t){return this.jT=t,this.us.Ss(),this}getLabelConnectorGap(){return this.jT}setLabelSide(t){return this.ZT=t,this.us.Ss(),this}getLabelSide(){return this.ZT}Ky(t,e,i,s){const n=this.jT;let a=0;for(let f=0;f<t.length;f+=1)a=Math.max(a,t[f].Ue.oi().x);const o=s.x+this.ya.left+this.ya.right,l=this.ZT===ah.Right?(this.ya.left+(o-(this.ya.right+a)))/2:(this.ya.left+a+(o-this.ya.right))/2,u=s.x-a,d=Y(u,s.y);XD(t,this.YT,this.HT,d,this.ya,this.$T,this.XT,l),this.JT(t,this.ZT===ah.Left?-1:1,-1,i,s);for(let f=0;f<this.qy.length;f+=1)this.qy[f].setVisible(!1);for(let f=0;f<t.length;f+=1)if(t[f].getVisible()){const y=this.KT(t[f],-1,i,n);y&&this.hp(y)}}getMinimumSize(){return Y(500,300)}JT(t,e,i,s,n){if(t.length===0)return;const a=s.x+e*n.x*.5,o=i===1?Math.max:Math.min;let l;for(let u=0;u<t.length;u+=1){const d=t[u];let f;d.bT.Sl().length===0?d.Ue.setVisible(!1):d.Ue.setVisible(!0),l&&(f=l.Ue.Fa().y+i*(l.Ue.oi().y+10));const y=Rb(d.bT,this.ZT,0);if(y){const m=y.y,S=f===void 0?m:o(m,f);d.Ue.Fe(Y(a,S)).Da(e).La(0)}l=d}}KT(t,e,i,s){const n=t.bT,a=t.Ue,o=Rb(n,this.ZT,s);if(o){const l={x:tl(this.ZT===ah.Left?a.Fa().x-e*(s+a.oi().x):a.Fa().x+e*(s+a.oi().x),o,i).x,y:kp(a.Fa().y,o,i).y};return[o,l,Y(this.ZT===ah.Left?a.Fa().x-e*(s+a.oi().x):a.Fa().x+e*(s+a.oi().x),l.y)]}}hp(t){let e;for(let i=0;i<this.qy.length;i+=1)if(!this.qy[i].getVisible()){e=this.qy[i].setVisible(!0);break}e===void 0&&(e=this.Xy.rp(this.pixelScale,void 0,[kr.InternalUI]).Re(this.ep),this.qy.push(e)),e.Nt().nl(t)}}var ah;(function(r){r[r.Right=0]="Right",r[r.Left=1]="Left"})(ah||(ah={}));const qD=(r,t,e,i,s,n)=>(r.alignmentX=(s+Math.PI/2)%(2*Math.PI)<=Math.PI?-1:1,r.alignmentY=s%(2*Math.PI)<=Math.PI?-1:1,r.paddingX=Math.cos(s)*n,r.paddingY=Math.sin(s)*n,r),jD=(r,t,e,i,s,n,a,o)=>{if(t===0)return r.paddingX=o,r.alignmentX=-1,r};var pc;(function(r){r[r.Normal=0]="Normal",r[r.Circle=1]="Circle"})(pc||(pc={}));class $D{constructor(t,e,i,s,n,a,o,l){this.D=new Li,this.DF=t,this.Dr=e,this.scale=i,this.chart=s,this.tag=n,this.axisScale=a,this.BF=o,this.LF=l,this.RF=this.DF.Ee(this.scale).setMouseInteractions(!1),this.EF=this.Dr.Pr(this.scale).Rh(this.tag).setMouseInteractions(!1),this.zF=this.BF(this,this.DF.rp(this.scale,void 0,[kr.InternalUI])).Re(this.chart.getNibStyle()),this.LF.fs([this.EF])}Ky(t,e,i,s,n,a,o){const l=e.length,u=e[i>0?i-1:l-1],d=e[i],f=e[i<l-1?i+1:0],y=this.chart.getNibLength();this.RF.Ve(t).ze(d).Re(this.chart.getAxisStyle()),this.zF.Nt().nl(a===pc.Normal?[wa(d,u,Jt(.5*y/Ca(pe(u,d)),0,1)),d,wa(d,f,Jt(.5*y/Ca(pe(f,d)),0,1))]:((m,S,x,v,b=2)=>{const E=v/x,T=[];for(let V=-v/2;V<=v/2;V+=b){const F=E*(V/v)+S,B=Y(m.x+Math.cos(F)*x,m.y+Math.sin(F)*x);T.push(B)}return T})(t,s,n,y)),o?this.EF.setVisible(!0).Fe(zt(d,Y(o.paddingX,o.paddingY))).Da(o.alignmentX).La(o.alignmentY):this.EF.setVisible(!1)}getLabelSize(){return this.EF.Oh(this.chart.getAxisLabelFont()).Ce(this.chart.getAxisLabelStyle()).Ps().oi()}dispose(){this.RF&&this.RF.dispose(),this.EF&&this.EF.dispose(),this.zF&&this.zF.dispose()}}const JD=(r,t,e,i,s)=>{const n=t.getIcon();return n?r.addRow(n,t.getName()):r.addRow(t.getName()),r.addRow("Axis:","",i).addRow("Value:","",s(e))};class ZD extends R0{constructor(t,e,i,s,n,a,o,l,u,d,f,y){super(t,u,d,y),this.xs="Spider Series",this.yu=new Map,this.Hi=Yr.onHover,this.Wy=JD,this.Hx=8,this.Aa=0,this.VF=VM(),this.OF={},this.NF={},this.vy=this.getVisible(),this.GF=1,this.WF=((m,S)=>{const x=Zn(()=>{});let v,b,E=1;return(T,V,F)=>{if(T===b)return;b=T;const B=(F==null?void 0:F.easing)||Mr.ease,z=(F==null?void 0:F.durationMs)||1e3;v&&(v.finish(!1),v=void 0),T===!1?V&&E?(v=x(z,B)([[E,0]],([L])=>{E=L,m(E)}),v.onAnimationEnd(()=>{v=void 0,S(!1)})):(E=0,S(!1)):V?(S(!0),v=x(z,B)([[E,1]],([L])=>{E=L,m(E)}),v.onAnimationEnd(()=>{v=void 0})):(E=1,S(!0))}})(m=>{this.GF=m,this.ks.us.Ss()},m=>{super.setVisible(m)}),this.Ji=t,this.ks=e,this.$x=s,this.UF=n,this.ab=a,this.YF=o,this.HF=l,this.scale=i,this.$F=Kt(d.spiderSeriesFillStyle,f),this.XF=Kt(d.spiderSeriesStrokeStyle,f),this.jF=Kt(d.spiderSeriesPointFillStyle,f)}Kp(){return this.tS&&this.yu.size>0&&this.getVisible()}addPoints(...t){this.yu.size>0&&this.Ji.us.Nn(wt.vf),t=t.filter(e=>e.axis!==void 0);for(let e=0;e<t.length;e+=1)this.UF(t[e].axis);if(this.Ji.getAnimationsEnabled()&&this.OF!==void 0){const e=new Map;let i;t.forEach(s=>e.set(s.axis,s.value)),this.VF(0,1,s=>{e.forEach((n,a)=>{const o=(i==null?void 0:i.get(a))||0;this.yu.set(a,o+s*(n-o)),this.ks.us.Ss()})},{easing:this.OF.easing,durationMs:this.OF.durationMs,onStart:()=>{i=new Map(this.yu)}})}else for(let e=0;e<t.length;e+=1){const i=t[e].axis;this.yu.set(i,t[e].value)}return this.ks.Ss(),this}getValue(t,e=!1){const i=this.yu.get(t),s=this.Ji.getOriginValue();if(i!==void 0)return e?s+this.GF*(i-s):i}setAnimationAddPoints(t,e){return this.OF=t?{easing:t,durationMs:e}:void 0,this.ks.Ss(),this}setVisibleStateChangedAnimation(t,e){return this.NF=t?{easing:t,durationMs:e}:void 0,this.ks.Ss(),this}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}setCursorEnabled(t){return super.setCursorEnabled(t)}setFillStyle(t){return this.$F=typeof t=="function"?t(this.$F):t,this.bT&&(this.bT.Ce(this.$F),this.ks.Ss()),this}getFillStyle(){return this.$F}setStrokeStyle(t){return this.XF=typeof t=="function"?t(this.XF):t,this.bT&&(this.bT.we(this.XF),this.ks.Ss()),this}getStrokeStyle(){return this.XF}setPointFillStyle(t){return this.jF=typeof t=="function"?t(this.jF):t,this.Xx&&(this.Xx.Ce(this.jF),this.ks.Ss()),this}getPointFillStyle(){return this.jF}setPointSize(t){return this.Hx=t,this.Xx&&this.Xx.q(t),this}getPointSize(){return this.Hx}getPointShape(){return this.$x}setPointRotation(t){return this.Aa=t,this.Xx&&this.Xx.Nh(t),this.ks.Ss(),this}getPointRotation(){return this.Aa}Te(){if(super.Te(),!this.$i){const t=new Array(this.ab.length),e=this.Ji.getOriginValue();for(let i=0;i<this.ab.length;i+=1){const s=this.yu.get(this.ab[i].tag);t[i]=s!==void 0?this.YF(this.ab[i].tag,e+this.GF*(s-e)):this.YF(this.ab[i].tag,e)}CM(t),t.length>=3&&(this.bT||(this.bT=this.ks.ic(this.scale,Cr.Simple).we(this.XF).Ce(this.$F).cs(this.getHighlight()),this.ds(this.bT)),this.bT.pl(t),this.Xx||(this.Xx=this.ks.bS(this.scale).q(this.Hx).il(this.$x).Nh(this.Aa).Ce(this.jF).cs(this.getHighlight()),this.ds(this.Xx)),this.Xx.Nt().nl(t))}}attach(t,e=!0,i=!1){return super.attach(t,e,i),ei(t,this.qi,i,{fill:this.$F,stroke:this.XF}),this}Cs(){return this.bs||this.$x}ZF(){for(let t=0;t<this.Qi.length;t+=1)ei(this.Qi[t],this.qi,!1,{fill:this.$F,stroke:this.XF})}Hc(t,e){if(this.bT){const i=this.HF(t);if(i!==void 0&&this.yu.has(i.tag)){const s=this.yu.get(i.tag),n=this.YF(i.tag,s);return Is(n,this.scale,this.Wy(new Ii,this,s,i.tag,this.Ji.formatValue).Zu(),this,this.$F)}}}solveNearestFromScreen(t){return this.Hc(es(t,this.Ji.us),!1)}Ie(t,e){return t.cs(e),this.ks.Ss(),this}setVisible(t){var e,i;return this.vy=t,this.WF(t,this.Ji.getAnimationsEnabled()&&this.NF!==void 0,{easing:(e=this.NF)===null||e===void 0?void 0:e.easing,durationMs:(i=this.NF)===null||i===void 0?void 0:i.durationMs}),this}}const Hu=(r,t)=>{const e=Math.PI/2-2*r*Math.PI/t;return e>=0?e:e+2*Math.PI},QD=r=>Je(r.EF.We()),KD=r=>Je(r.We()),um=(r,t,e,i)=>r.ou(0).Fe(e).eu(90).ze(-270).au(t===pc.Circle?void 0:i.length),Xu={alignmentX:0,alignmentY:0,paddingX:0,paddingY:0},rl={alignmentX:0,alignmentY:0,paddingX:0,paddingY:0},Eb=()=>{rl.alignmentX=0,rl.alignmentY=0,rl.paddingX=0,rl.paddingY=0};class $R extends zc{constructor(t,e,i,s,n,a,o){super(t,e,i,e.vm("spiderChart bg",0),s,e.us.qi.spiderChartBackgroundFillStyle,e.us.qi.spiderChartBackgroundStrokeStyle,e.us.qi.spiderChartTitleFont,e.us.qi.spiderChartTitleFillStyle,o),this.ya=Ra(20,20,20,20),this.axisScale=cs.d1({scale1DConstructor:Ks,dimension:"x"}).J(0,1),this.ab=[],this.QF=[],this.JF=[],this.KF=$r.expansion,this.qF=!0,this.tI=jD,this.iI=qD,this.Bo=!0,this.sI=pc.Normal,this.eI=4,this.hI=this.qi.spiderChartWebStyle,this.rI=this.qi.spiderChartScaleLabelFillStyle,this.nI=this.qi.spiderChartScaleLabelFont,this.oI=5,this.aI=this.qi.spiderChartAxisLabelFillStyle,this.lI=this.qi.spiderChartAxisLabelFont,this.uI=5,this.cI=this.qi.spiderChartAxisStrokeStyle,this.dI=this.qi.spiderChartAxisNibStrokeStyle,this.Pf=10,this.fI=Ra(),this.Gy=We.onHover,this.hasAxis=u=>this.ab.reduce((d,f)=>d||f.tag===u,!1),this.formatValue=u=>this.axisScale.Di(u,Gn.Numeric),this.AI=()=>{const u=this.ab.map(QD).concat(this.JF.map(KD));return BM(u)},this.gI=()=>this.mI.Jc(this.pixelScale).setMouseInteractions(!1),this.yI=u=>u.dispose(),this.pI=()=>this.bA.Pr(this.pixelScale).setMouseInteractions(!1),this.SI=u=>u.dispose(),this.vI=u=>this.formatValue(this.axisScale.getInnerStart()+u*(this.axisScale.getInnerEnd()-this.axisScale.getInnerStart())),this.bI=(u,d)=>{let f,y;const m=()=>{this.xI!==void 0&&this.xI.finish(),f=Qt(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd()),y=this.KF,this.KF=void 0},S=(b,E,T,V,F)=>{const B=Y(T.x-E.x,E.y-T.y),z=this.ab.findIndex(L=>L===u);if(z>=0&&f!==void 0){const L=Hu(z,this.ab.length),A=Y(Math.cos(L),Math.sin(L)),R=B.x*A.x+B.y*A.y,w=Ca(pe(u.RF.Ii(),u.RF.Ti())),C=f.min+(f.max-f.min)*Math.max(1+R/w,.01);this.axisScale.J(f.min,C),xt(F),this.us.Ss()}},x=()=>{if(f=void 0,y!==void 0)if(this.th){const b=Qt(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd()),E=this.MI(),T=y;if(E!==void 0){const V=T.start(b.min,b.max,E.min,E.max),F=T.end(b.min,b.max,E.min,E.max);this.xI=this.qg.us.sn(300,Mr.ease)([[0,1]],([B])=>{this.axisScale.J(b.min+B*(V-b.min),b.max+B*(F-b.max))}),this.xI.onAnimationEnd(()=>{this.xI=void 0,this.KF=T})}else this.KF=y}else this.KF=y;y=void 0};d.setMouseEnterEventHandler(this._I).setMouseLeaveEventHandler(this.wI).setMouseDragStartEventHandler(m).setMouseDragEventHandler((b,E,T,V,F)=>S(0,Y(E.clientX,E.clientY),V,0,E)).setMouseDragStopEventHandler(x);const v=Ls(new Er((b,E,T)=>{this._I(b),m(),xt(T)},S,(b,E,T,V)=>{this.wI(b),x(),xt(V)}));return d.setTouchStartEventHandler(v.onTouchStart).setTouchMoveEventHandler(v.onTouchMove).setTouchEndEventHandler(v.onTouchEnd)},this.CI=u=>{this.qF&&!this.hasAxis(u)&&this.addAxis(u)},this.YF=(u,d)=>{for(const f of this.ab)if(f.tag===u){const y=Math.max(Math.min((d-this.axisScale.getInnerStart())/(this.axisScale.getInnerEnd()-this.axisScale.getInnerStart()),1),0);return wa(f.RF.Ii(),f.RF.Ti(),y)}},this.HF=u=>{if(this.ab.length===0)return;const d=pe(gt(u,this.engine.scale,this.pixelScale),this.ab[0].RF.Ii()),f=Math.atan2(d.y,d.x);let y,m=bt;for(const S of this.ab){const x=pe(S.RF.Ti(),S.RF.Ii()),v=Math.atan2(x.y,x.x),b=Math.abs(f-v);b<m&&(y=S,m=b)}return y},this._I=u=>{this.Bo&&(u.Re(this.dI),this.us.Ss())},this.wI=u=>{u.Re(this.dI),this.us.Ss()},this.us.Nn(wt.uf),this.Gk=e.ob("spiderChart series bg",0),this.mI=e.$y("spiderChart web shapes",0),this.kI=e.$y("spiderChart axis bg",1),this.Rb=e.$y("spiderChart plotting",2),this.bA=e.$y("spiderChart fg",3),this.LF=this.es.yg().ps(this.qi.effectsText),this._m.Rh("Spider Chart"),this.FS=this.Gk.Jc(this.pixelScale).Ce(this.qi.spiderChartSeriesBackgroundFillStyle).we(At).eu(90).ze(-270).ou(0),this.IS=this.Gk.Jc(this.pixelScale).Ce(Ft).we(this.qi.spiderChartSeriesBackgroundStrokeStyle).eu(90).ze(-270).ou(0),super.TS(this.FS,this.IS),this.jy=e.Zy();const l=De(a?a.autoCursorBuilder:void 0,TR);this.Pm=l.uy(this.jy,this.uiScale,this.uiScale,this.qi),hs.Dm(this),this.LS((u,d)=>{hs.Bm(this,d)}),this.setAnimationsEnabled((a==null?void 0:a.disableAnimations)!==!0&&(a==null?void 0:a.animationsEnabled)!==!1),this.Sm(n,this.pixelScale)}getSeries(){return this.xS}setAutoCursor(t){return this.Pm&&t(this.Pm),this.us.Ss(),this}getAutoCursor(){return this.Pm}setAutoCursorMode(t){return this.Gy=t,this.us.Ss(),this}getAutoCursorMode(){return this.Gy}solveNearest(t){const e=t||this.us.On();if(e)return hs.Hc(this,es(e,this.us),this.xS)}addAxis(t){if(typeof t=="string"){if(!this.hasAxis(t)){const e=new $D(this.kI,this.bA,this.pixelScale,this,t,this.axisScale,this.bI,this.LF);this.ab.push(e)}}else t&&this.ab.push(t);return this.LF.fs(this.ab.map(e=>e.EF)),this.us.Ss(),this}addSeries(t){const e=typeof t=="object"?t.pointShape?t.pointShape:qe.Circle:t||qe.Circle,i=typeof t=="object"&&t.automaticColorIndex?t.automaticColorIndex:this.xS.length,s=new ZD(this,this.Rb,this.pixelScale,e,this.CI,this.ab,this.YF,this.HF,this._S,this.qi,i,this.us.es);return this.PS(s),s}getSeriesCount(){return this.xS.length}setWebMode(t){return this.sI=t,this.us.Ss(),this}getWebMode(){return this.sI}setWebCount(t){return this.eI=t,this.us.Ss(),this}getWebCount(){return this.eI}setWebStyle(t){return this.hI=typeof t=="function"?t(this.hI):t,this.us.Ss(),this}getWebStyle(){return this.hI}setScaleLabelStyle(t){return this.rI=typeof t=="function"?t(this.rI):t,this.us.Ss(),this}getScaleLabelStyle(){return this.rI}setScaleLabelFont(t){return this.nI=typeof t=="function"?t(this.nI):t,this.us.Ss(),this}getScaleLabelFont(){return this.nI}setScaleLabelPadding(t){return this.oI=t,this.us.Ss(),this}getScaleLabelPadding(){return this.oI}setScaleLabelStrategy(t){return this.tI=t,this.us.Ss(),this}setScaleLabelFormatter(t){return this.formatValue=t,this.us.Ss(),this}setAxisLabelStyle(t){return this.aI=typeof t=="function"?t(this.aI):t,this.us.Ss(),this}getAxisLabelStyle(){return this.aI}setAxisLabelFont(t){return this.lI=typeof t=="function"?t(this.lI):t,this.us.Ss(),this}getAxisLabelFont(){return this.lI}setAxisLabelEffect(t){return this.LF.ps(t),this.us.Ss(),this}getAxisLabelEffect(){return this.LF.vs()}setAxisLabelPadding(t){return this.uI=t,this.us.Ss(),this}getAxisLabelPadding(){return this.uI}setAxisLabelStrategy(t){return this.iI=t,this.us.Ss(),this}setAxisStyle(t){return this.cI=typeof t=="function"?t(this.cI):t,this.us.Ss(),this}getAxisStyle(){return this.cI}setNibStyle(t){return this.dI=typeof t=="function"?t(this.dI):t,this.us.Ss(),this}getNibStyle(){return this.dI}setNibLength(t){return this.Pf=t,this.us.Ss(),this}getNibLength(){return this.Pf}setAutoAxis(t){return this.qF=t,this}getAutoAxis(){return this.qF}setMouseInteractions(t){return this.Bo=t,this}getMouseInteractions(){return this.Bo}setAxisScrollStrategy(t){return this.KF=t,this.us.Ss(),this}getAxisScrollStrategy(){return this.KF}setAxisInterval(t,e=0){return this.axisScale.J(e,t),this.us.Ss(),this}getOriginValue(){return this.axisScale.getInnerStart()}getEdgeValue(){return this.axisScale.getInnerEnd()}Te(t){super.Te(t),is.Fm(this._m,this.bm);const e=this.ab.length,i=is.Tm(this._m,this.bm),s=Y(this.pixelScale.x.getInnerInterval()-(this.ya.left+this.ya.right),this.pixelScale.y.getInnerInterval()-(this.ya.bottom+this.ya.top+i)),n=((l=0,u=0,d=0,f=0)=>({left:l,top:u,right:d,bottom:f}))(0,0,0,0);if(this.iI!==void 0){const l=Math.min(s.x,s.y)/2;for(let u=0;u<e;u+=1){const d=Hu(u,e),f=Math.cos(d),y=Math.sin(d),m=this.ab[u].getLabelSize();Eb();const S=this.iI(rl,u,e,this.ab[u].tag,d,this.uI),x=Y(f*l+S.paddingX,y*l+S.paddingY);f>0?n.right=Math.max(n.right,x.x+.5*(1-S.alignmentX)*m.x-l):n.left=Math.max(n.left,-x.x+.5*(S.alignmentX+1)*m.x-l),y>0?n.top=Math.max(n.top,x.y+.5*(1-S.alignmentY)*m.y-l):n.bottom=Math.max(n.bottom,-x.y+.5*(S.alignmentY+1)*m.y-l)}}if(this.KF){const l=this.MI();if(l!==void 0){const u=this.KF.start(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd(),l.min,l.max),d=this.KF.end(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd(),l.min,l.max);this.axisScale.J(u,d)}}const a=Y(this.pixelScale.x.getInnerStart()+(n.left+this.pixelScale.x.getInnerInterval()-n.right)/2,this.pixelScale.y.getInnerStart()+(n.bottom+this.pixelScale.y.getInnerInterval()-n.top)/2),o=Math.min(s.x/2-(n.left+n.right)/2,s.y/2-(n.bottom+n.top)/2);this.fI=Ra(this.Xt.left+this.ya.left+n.left,this.Xt.top+this.ya.top+i+n.top,this.Xt.right+this.ya.right+n.right,this.Xt.bottom+this.ya.bottom+n.bottom),this.Ky(a,o);for(const l of this.xS)l.oS();for(const l of this.xS)l.Te();super.pm(),hs.Im(this,this.FS.getIsUnderMouse(),!1,this.xS,l=>hs.Hc(this,l,this.xS),(l,u)=>l.Hc(u,!0));for(const l of this.xS)l.dp()}dispose(){return this.Gk.W(),this.mI.W(),this.kI.W(),this.Rb.W(),this.bA.W(),this.Pm.dispose(),this.jy.W(),super.dispose()}getMinimumSize(){return Y(this.fI.left+this.fI.right+100,this.fI.bottom+this.fI.top+100)}Ky(t,e){const i=this.ab.length,s=[];for(let n=0;n<i;n+=1){const a=Hu(n,i),o=Y(t.x+Math.cos(a)*e,t.y+Math.sin(a)*e);s.push(o)}um(this.FS,this.sI,t,s),um(this.IS,this.sI,t,s),this.FS.hu(e),this.IS.hu(e),((n,a,o,l,u,d,f,y)=>{const m=n.length,S=d.length,x=a>0&&S>1;for(let v=0;v<Math.max(a,m);v+=1)if(x&&v<a){v>=m&&n.push(f());const b=n[v];um(b,o,l,d);const E=u*((v+1)/a);b.hu(E)}else v<n.length&&y(n[v]);n.length=x?a:0})(this.QF,this.eI,this.sI,t,e,s,this.gI,this.yI);for(const n of this.QF)n.Ce(Ft).we(this.hI);for(let n=0;n<i;n+=1){const a=this.ab[n],o=Hu(n,i);Eb();const l=this.iI!==void 0?this.iI(rl,n,i,this.ab[n].tag,o,this.uI):void 0;a.Ky(t,s,n,o,e,this.sI,l)}((n,a,o,l,u,d,f,y,m,S)=>{const x=u.length,v=n.length;let b=0;if(a!==void 0)for(let E=0;E<x;E+=1){const T=u[E].tag,V=Hu(E,x);for(let F=0;F<o+ +(E===0);F+=1){Xu.alignmentX=0,Xu.alignmentY=0,Xu.paddingX=0,Xu.paddingY=0;const B=a(Xu,E,x,T,V,F,o,l);if(B!==void 0){b>=v&&n.push(y());const z=n[b];b+=1;const L=(o-F)/o,A=wa(d,f[E],L);z.Fe(zt(A,Y(B.paddingX,B.paddingY))).Da(B.alignmentX).La(B.alignmentY).Rh(S(L))}}}for(let E=b;E<v;E+=1)m(n[E]);n.length=b})(this.JF,this.tI,this.eI,this.oI,this.ab,t,s,this.pI,this.SI,this.vI);for(const n of this.JF)n.Ce(this.rI).Oh(this.nI)}MI(){let t,e;const i=this.getSeriesCount()>1;for(const s of this.ab)for(const n of this.xS){const a=n.getValue(s.tag,i);a!==void 0&&(t=t===void 0?a:Math.min(t,a),e=e===void 0?a:Math.max(e,a))}if(t!==void 0&&e!==void 0)return Qt(t,e)}}const ar=(r,t)=>{const e=Math.floor(99999/t),i=Math.floor(99999/t),s=Math.floor(99998/t),n=Math.floor(99998/t),a=Math.floor(99999/(t+1)),o=Math.floor(89999/(t+1)),l=510001+t*o;let u=0;return{TI:()=>{const d=r.FI("dashboard ui",l+u);return u+=1,d},II:()=>r.FI("dashboard legend",51e4),DI:d=>{const f=1+d*e,y=100001+d*i,m=200002+d*s,S=300002+d*n,x=400001+d*a,v=510001+d*o;let b=0;return{us:r,vm:(E,T)=>{const V=f+T;return r.FI(E,V)},ob:(E,T)=>{const V=y+T;return r.FI(E,V)},Uk:(E,T)=>{const V=m+T;return r.FI(E,V)},$y:(E,T)=>{const V=S+T;return r.FI(E,V)},nb:(E,T,V)=>{const F=S+T;return r.BI(E,F,V)},Mm:(E,T)=>{const V=x+T;return r.FI(E,V)},om:E=>{const T=v+b,V=r.FI(E,T);return b+=1,V},lm:()=>r.FI("panel legend",500002+d),Zy:()=>r.FI("panel cursor",600001+d)}}}};class Tb{constructor(t){this.D=new Li,this.u=t}S(t){return this.u=t,this.D.emit("set",t),this}M(){return this.u}O(t){return this.D.on("set",t)}G(t){return this.D.off(t,"set")}}const tF={uh:()=>{},ih:!1,sh:0,eh:!1,rh:0,hh:!1,oh:0,ah:0,Je:$r.fitting},eF=r=>{if(!r||typeof r!="object"||r===null)return!1;const t=r.type;return!(!t||!["spark-line","spark-bar","spark-win-loss","spark-area","spark-pie"].includes(t))},iF=(r,t,e,i,s,n,a,o)=>{const{type:l,data:u}=r;if(u.length===0)return;const d=[i,s];l==="spark-line"&&hF(r,t,d,n,a,o),l==="spark-bar"&&wb({...r,winLoss:!1},t,d,n,a,o),l==="spark-win-loss"&&wb({...r,winLoss:!0},t,d,n,a,o),l==="spark-area"&&oF(r,t,d,n,a,o),l==="spark-pie"&&lF(r,t,d,n,a,o)},vr=(r,t,e,i)=>({x:JR(r.x,t.x,e.x,i),y:Om(r.y,t.y,e.y,i)}),sF=(r,t,e,i)=>({position:JR(r.position,t.x,e.x,i),high:Om(r.high,t.y,e.y,i),low:Om(r.low,t.y,e.y,i)}),JR=(r,t,e,i)=>{const s=Jt(r,t,t+e);return i[0].x+i[1].x*(s-t)/e},Om=(r,t,e,i)=>{const s=Jt(r,t,t+e);return i[0].y+i[1].y*(s-t)/e},ZR=(r,t,e,i,s,n,a,o)=>{for(const l of r)l.type==="point"&&rF(l,t,e,s,n,a,o),l.type==="axis-band"&&nF(l,e,s,n,a,o),l.type==="constant-line"&&aF(l,e,i,s,n,a,o)},rF=(r,t,e,i,s,n,a)=>{const{value:o,fillStyle:l,shape:u,size:d,rotation:f}=r;let y={x:NaN,y:NaN};if(o==="start"&&(y=t[0]),o==="end"&&(y=t[t.length-1]),o==="min"){y=t[0];for(const m of t)y=y.y<m.y?y:m}if(o==="max"){y=t[0];for(const m of t)y=y.y>m.y?y:m}(typeof o!="object"||(y=vr(o,e,i,s),((m,S)=>{const x=S[0],v=S[1],b=m.x,E=m.y;return x.x<=b&&b<=x.x+v.x&&x.y<=E&&E<=x.y+v.y})(y,s)))&&n.pointSet.add().Nt().il(u!==void 0?u:qe.Circle).Nh(f||0).q(d||5).Ce(l||a.sparkPointChartFillStyle).nl(y)},nF=(r,t,e,i,s,n)=>{const{axis:a,start:o,end:l,fillStyle:u,strokeStyle:d}=r;let f=Y(kt,bt),y=Y(kt,bt);a==="x"&&(f=vr({x:o,y:kt},t,e,i),y=vr({x:l,y:bt},t,e,i)),a==="y"&&(f=vr({x:kt,y:o},t,e,i),y=vr({x:bt,y:l},t,e,i));const m=i[0],S=i[1],x=Jt(f.x,m.x,m.x+S.x),v=Jt(f.y,m.y,m.y+S.y),b=Jt(y.x,m.x,m.x+S.x),E=Jt(y.y,m.y,m.y+S.y);s.rect.add().cl(x).dl(v).q(Y(b-x,E-v)).Ce(u||n.sparkChartBandFillStyle).we(d||n.sparkChartBandStrokeStyle).we(At)},aF=(r,t,e,i,s,n,a)=>{const{axis:o,value:l,strokeStyle:u}=r,d=l||0,f=t.y,y=e.y,m=t.x,S=e.x,x=[];if(o==="y"&&f<=d&&d<=y){const v=vr(Y(m,d),{x:m,y:f},i,s),b=vr(Y(S,d),{x:m,y:f},i,s);x.push([v,b])}if(o==="x"&&m<=d&&d<=S){const v=vr(Y(d,f),{x:m,y:f},i,s),b=vr(Y(d,y),{x:m,y:f},i,s);x.push([v,b])}x.length>0&&n.line.add().Re(u||a.sparkChartConstantLineStrokeStyle).Ve(x[0][0]).ze(x[0][1])},hF=(r,t,e,i,s,n)=>{const{strokeStyle:a,data:o,markers:l}=r,u=o.length;u>1e4&&s.Hn&&nt.console.warn("LightningChart JS warning: SparkLineChart has over 10000 data points. This feature is not designed for large data sets which might show as performance drop. If you want to request improvements to this, contact https://lightningchart.com/js-charts/docs/contact. To disable this warning, use LightningChartOptions.warning property (refer to API documentation for more detail).");let d=bt,f=kt,y=bt,m=kt;for(let v=0;v<u;v+=1){const b=o[v];d=Math.min(d,b.x),f=Math.max(f,b.x),y=Math.min(y,b.y),m=Math.max(m,b.y)}const S={x:f-d,y:m-y},x=o.map(v=>vr(v,{x:d,y},S,e));t.lineSet.add().cs(n).Re(a||i.sparkLineChartStrokeStyle).Nt().nl(x),l&&ZR(l,x,{x:d,y},{x:f,y:m},S,e,t,i)},wb=(r,t,e,i,s,n)=>{const{data:a,fillStyle:o,strokeStyle:l,threshold:u,winFillStyle:d,lossFillStyle:f}=r,y=r.barSize||1,m=r.gap||1,S=r.winLoss,x=u||0,v=m/y*1;let b=bt,E=kt;if(S)b=-1,E=1;else for(const F of a)b=Math.min(b,F),E=Math.max(E,F);const T={x:0,y:S?-1:Math.min(0,b)},V={x:1*a.length+(a.length-1)*v,y:S?2:Math.max(E,1e-5)};a.map((F,B)=>{const z={x:1*(B+1)+B*v,y:S?F>=x?1:0:F},L=vr({x:1*B+B*v,y:S?F>=x?0:-1:0},T,V,e),A=vr(z,T,V,e);return{value:F,position:L,width:A.x-L.x,height:A.y-L.y}}).forEach(F=>{var B;t.rect.add().cs(n).Fe(F.position).Al(F.height).fl(F.width).Ce((B=F.value,S?(B>=x?d:f)||i.sparkBarChartFillStyle:o||i.sparkBarChartFillStyle)).we(l||i.sparkBarChartStrokeStyle)})},oF=(r,t,e,i,s,n)=>{const{data:a,fillStyle:o,strokeStyle:l,markers:u}=r,d=a.length;d>1e4&&s.Hn&&nt.console.warn("LightningChart JS warning: SparkAreaChart has over 10000 data points. This feature is not designed for large data sets which might show as performance drop. If you want to request improvements to this, contact https://lightningchart.com/js-charts/docs/contact. To disable this warning, use LightningChartOptions.warning property (refer to API documentation for more detail).");let f=bt,y=kt,m=bt,S=kt;for(let E=0;E<d;E+=1){const T=a[E];f=Math.min(f,T.x),y=Math.max(y,T.x),m=Math.min(m,T.y),S=Math.max(S,T.y)}const x={x:y-f,y:S-m},v=[],b=[];for(const E of a){const T=un(E.x,E.y,m);v.push(sF(T,{x:f,y:m},x,e)),b.push(vr(E,{x:f,y:m},x,e))}t.junction.add().cs(n).Nt().nl(v).Ce(o||i.sparkAreaChartFillStyle),t.lineSet.add().cs(n).Nt().nl(b).Re(l||i.sparkAreaChartStrokeStyle),u&&ZR(u,b,{x:f,y:m},{x:y,y:S},x,e,t,i)},lF=(r,t,e,i,s,n)=>{const{data:a,strokeStyle:o}=r,l=a.map(x=>typeof x=="number"?x:x.value),u=a.map(x=>typeof x=="object"?x.fillStyle:void 0),d=l.reduce((x,v)=>x+v,0),f=vr(Y(50,50),{x:0,y:0},{x:100,y:100},e),y=e[1],m=y.x<=y.y?y.x/2:y.y/2;let S=90;l.forEach((x,v)=>{const b=x/d*360;t.arc.add().cs(n).Fe(f).hu(m).ou(0).eu(S).ze(S+b).Ce(u[v]||Kt(i.sparkPieChartFillStyle,v)).we(o||i.sparkPieChartStrokeStyle),S+=b})};var be,$n,jn;(function(r){r[r.UpToDown=0]="UpToDown",r[r.LeftToRight=1]="LeftToRight"})(be||(be={})),function(r){r[r.Vertical=0]="Vertical",r[r.Horizontal=1]="Horizontal",r[r.Both=2]="Both"}($n||($n={})),function(r){r[r.Up=0]="Up",r[r.Down=1]="Down",r[r.Left=2]="Left",r[r.Right=3]="Right"}(jn||(jn={}));class Cb extends y0{constructor(t,e,i,s,n){super(),this.Ds=!1,this.C_={x:0,y:0,height:20,width:20},this.LI={x:10,y:10},this.ks=t,this.RI=n,this.EI=new ir(t,e,i,se,s).setMouseInteractions(!0),this.zI=t.ic(e,Cr.Simple).Ce(s.dataGridScrollBarButtonArrowFillStyle).we(s.dataGridScrollBarButtonArrowStrokeStyle).setMouseInteractions(!1),this.xu(this),this.EI.onMouseEnter(a=>a.setHighlight(1)),this.EI.onMouseLeave(a=>a.setHighlight(0))}VI(){switch(this.RI){case jn.Up:this.zI.pl([{x:this.C_.x,y:this.C_.y+this.LI.y/2},{x:this.C_.x+this.LI.x/2,y:this.C_.y-this.LI.y/2},{x:this.C_.x-this.LI.x/2,y:this.C_.y-this.LI.y/2}]);break;case jn.Down:this.zI.pl([{x:this.C_.x-this.LI.x/2,y:this.C_.y+this.LI.y/2},{x:this.C_.x+this.LI.x/2,y:this.C_.y+this.LI.y/2},{x:this.C_.x,y:this.C_.y-this.LI.y/2}]);break;case jn.Left:this.zI.pl([{x:this.C_.x-this.LI.x/2,y:this.C_.y},{x:this.C_.x+this.LI.x/2,y:this.C_.y+this.LI.y/2},{x:this.C_.x+this.LI.x/2,y:this.C_.y-this.LI.y/2}]);break;case jn.Right:this.zI.pl([{x:this.C_.x-this.LI.x/2,y:this.C_.y+this.LI.y/2},{x:this.C_.x+this.LI.x/2,y:this.C_.y},{x:this.C_.x-this.LI.x/2,y:this.C_.y-this.LI.y/2}])}}Fe(t){return this.C_.x=t.x,this.C_.y=t.y,this}Fa(){return Y(this.C_.x,this.C_.y)}q(t){return this.C_.height=t.x,this.C_.width=t.y,this}oi(){return{x:this.C_.height,y:this.C_.width}}onMouseDown(t){return this.EI.onMouseDown(t)}onMouseUp(t){return this.EI.onMouseUp(t)}setFillStyle(t){return this.EI.setFillStyle(t),this}getFillStyle(){return this.EI.getFillStyle()}setStrokeStyle(t){return this.EI.setStrokeStyle(t),this}getStrokeStyle(){return this.EI.getStrokeStyle()}Te(){return this.EI.Te(),this.VI(),this}Ps(){return this.EI.setSize(Y(this.C_.height,this.C_.width)).setPosition(Y(this.C_.x,this.C_.y)),this}setVisible(t){return this.EI.setVisible(t),this.zI.setVisible(t),this}dispose(){return this.EI.dispose(),this.zI.dispose(),this}setMouseInteractions(t){return this.EI.setMouseInteractions(t),this}getMouseInteractions(){return this.EI.getMouseInteractions()}onHighlight(t){return this.D.on("highlight",t)}offHighlight(t){return this.D.off(t)}getHighlight(){return this.EI.getHighlight()}setHighlight(t){return this.EI.setHighlight(dh(t)),this.D.emit("highlight",this,!!t),this.ks.Ss(),this}}const kb=(r,t)=>Math.min(Math.max(r,t.getInnerStart()),t.getInnerEnd());class uF{constructor(t,e,i,s,n,a,o){this.Kc={x:0,y:0},this.C_={x:0,y:0,height:0,width:0},this.D=new Li,this.OI={min:Y(0,0),max:Y(0,0)},this.wM=!1,this.CM=!1,this.NI={x:0,y:0},this._u=void 0,this.GI=Y(0,0),this.WI={x:0,y:0},this.UI=0,this.YI=15,this.kM=(l,u)=>{this.wM=!0,this.bA.Ss();const d=this.HI.getDraggingMode();this._u=this.bA.us.Wr(d===ke.notDraggable?ne.Restricted:d===ke.draggable?ne.Move:d===ke.onlyHorizontal?ne.Horizontal:ne.Vertical),this.$I&&clearInterval(this.$I)},this.TM=()=>{this.wM=!1,this.bA.Ss(),this.bA.us.Ur(this._u)},this.FM=l=>(this.CM=!0,this.NI=gt(this.bA.us.Pe(l.x,l.y),this.bA.us.dt,this.scale),!0),this.XI=(l,u)=>(this.jI(u),this.$I=setInterval(()=>this.jI(u),300),!0),this.ZI=()=>(clearInterval(this.$I),!0),this.IM=(l,u)=>{const d=this.HI.getDraggingMode();if(d!==ke.notDraggable){const f=u||d,y=gt(this.bA.us.Pe(l.x,l.y),this.bA.us.dt,this.scale),m=Y(f!==ke.onlyVertical?kb(y.x,this.scale.x):this.C_.x,f!==ke.onlyHorizontal?kb(y.y,this.scale.y):this.C_.y),S=Y(m.x-this.NI.x,m.y-this.NI.y),x=Y(this.HI.getPosition().x+S.x,this.HI.getPosition().y+S.y),v=this.QI(x),b={x:Math.abs(this.GI.x-v.x),y:Math.abs(this.GI.y-v.y)};return this.JI(b),this.WI.y>S.y&&(this.NI=y),this.Te(),!0}return!1},this.PM=(l,u)=>{this.CM=!1,xt(u),this.bA.Ss()},this.bA=t,this.qg=e,this.scale=s,this.contentScale=n,this.KI=o,this.qI=new Cb(t,i,s,a,o===be.UpToDown?jn.Up:jn.Left).setStrokeStyle(a.dataGridScrollBarButtonStrokeStyle).setFillStyle(a.dataGridScrollBarButtonFillStyle),this.tP=new Cb(t,i,s,a,o===be.UpToDown?jn.Down:jn.Right).setStrokeStyle(a.dataGridScrollBarButtonStrokeStyle).setFillStyle(a.dataGridScrollBarButtonFillStyle),this.HI=new ir(t,i,s,se,a).setFillStyle(a.dataGridScrollBarFillStyle).setStrokeStyle(a.dataGridScrollBarStrokeStyle).setMouseInteractions(!0).setDraggingMode(o===be.UpToDown?ke.onlyVertical:o===be.LeftToRight?ke.onlyHorizontal:ke.notDraggable),this.iP=new ir(e,i,s,se,a).setFillStyle(a.dataGridScrollBarBackgroundFillStyle).setStrokeStyle(a.dataGridScrollBarBackgroundStrokeStyle).setMouseInteractions(!0),this.HI.onMouseEnter(this.kM),this.HI.onMouseLeave(this.TM),this.HI.onMouseDragStart((l,u)=>this.FM(Y(u.clientX,u.clientY))&&xt(u)),this.HI.onMouseDrag((l,u)=>this.IM(Y(u.clientX,u.clientY))&&xt(u)),this.HI.onMouseDragStop(this.PM),this.HI.onTouchStart((l,u)=>this.FM(Y(u.clientX,u.clientY))&&xt(u)),this.HI.onTouchMove((l,u)=>this.IM(Y(u.clientX,u.clientY))&&xt(u)),this.HI.onTouchEnd(this.PM),this.qI.onMouseDown((l,u)=>this.XI(l,u)&&xt(u)),this.tP.onMouseDown((l,u)=>this.XI(l,u)&&xt(u)),this.qI.onMouseUp((l,u)=>this.ZI()&&xt(u)),this.tP.onMouseUp((l,u)=>this.ZI()&&xt(u)),this.iP.onMouseWheel((l,u)=>this.sP(u)),this.HI.onMouseWheel((l,u)=>this.sP(u)),this.iP.onMouseDown((l,u)=>this.XI(l,u)&&xt(u)),this.iP.onMouseUp((l,u)=>this.ZI()&&xt(u))}eP(t){return this.C_=t,this}fl(t){return this.C_.width=t,this}hP(){return this.C_.width}rP(t){return this.GI=t,this}nP(t){return this.Kc=t,this}oP(){return this.Kc}aP(t){return this.YI=t,this}lP(){return this.KI}uP(t){let e;switch(this.KI){case be.UpToDown:return e=t>0?Math.min(this.GI.y-this.OI.max.y,this.WI.y+t):Math.max(0,this.WI.y+t),e!==this.WI.y&&(this.JI({x:0,y:e}),this.Te(),!0);case be.LeftToRight:return e=Math.min(this.OI.max.x-this.GI.x,this.WI.x+t),e!==this.WI.x&&(this.JI({y:0,x:e}),this.Te(),!0);default:return!1}}cP(t){let e;switch(this.KI){case be.UpToDown:return e=Math.max(0,this.WI.y-t),e!==this.WI.y&&(this.JI({x:0,y:e}),this.Te(),!0);case be.LeftToRight:return e=t>0?Math.max(0,this.WI.x-t):Math.min(this.OI.max.x-this.GI.x,this.WI.x-t),e!==this.WI.x&&(this.JI({x:e,y:0}),this.Te(),!0);default:return!0}}dP(t){switch(this.KI){case be.UpToDown:return this.D.on("scrollY",t);case be.LeftToRight:return this.D.on("scrollX",t)}return this.D.on("scrollY",t)}QI(t){switch(this.KI){case be.UpToDown:if(t.y>this.OI.min.y)return Y(t.x,this.OI.min.y);if(t.y<this.OI.max.y)return Y(t.x,this.OI.max.y);break;case be.LeftToRight:if(t.x<this.OI.min.x)return Y(this.OI.min.x,t.y);if(t.x>this.OI.max.x)return Y(this.OI.max.x,t.y)}return t}sP(t){t.deltaY>0&&this.fP()&&xt(t),t.deltaY<0&&this.AP()&&xt(t)}jI(t){const e=gt(this.bA.us.Pe(t.clientX,t.clientY),this.bA.us.dt,this.scale);let i;const s=this.HI.getPosition(),n=this.HI.getSize();this.gP(e,s,n)?clearInterval(this.$I):(i=this.KI===be.UpToDown?Y(0,e.y-s.y>0?this.YI:-this.YI):Y(s.x-e.x>0?this.YI:-this.YI,0),(i.x>0||i.y>0)&&this.mP(i.x!==0?Math.abs(i.x):Math.abs(i.y)),(i.x<0||i.y<0)&&this.yP(i.x!==0?Math.abs(i.x):Math.abs(i.y)))}gP(t,e,i){return this.KI===be.UpToDown?t.y<e.y+i.y/2&&t.y>e.y-i.y/2:t.x>e.x-i.x/2&&t.x<e.x+i.x/2}pP(t){this.OI=t}mP(t){switch(this.KI){case be.UpToDown:{const e=Math.max(0,this.WI.y-t);return e!==this.WI.y&&(this.JI({x:0,y:e}),this.Te(),!0)}case be.LeftToRight:{const e=Math.max(0,this.WI.x-t);return e!==this.WI.x&&(this.JI({x:e,y:0}),this.Te(),!0)}default:return!1}}yP(t){switch(this.KI){case be.UpToDown:{let e;return e=this.Kc.x>this.C_.height?Math.min(this.GI.y-this.OI.max.y,this.WI.y+t):0,e!==this.WI.y&&(this.JI({x:0,y:e}),this.Te(),!0)}case be.LeftToRight:{const e=Math.min(this.OI.max.x-this.GI.x,this.WI.x+t);return e!==this.WI.x&&(this.JI({y:0,x:e}),this.Te(),!0)}default:return!1}}AP(){return this.mP(this.YI)}fP(){return this.yP(this.YI)}JI(t){if(t.x===this.WI.x&&t.y===this.WI.y)return;let e;switch(this.WI=t,this.KI){case be.UpToDown:e=this.WI.y*this.UI*this.contentScale.Wi().y,this.D.emit("scrollY",$n.Vertical,e),this.bA.us.Ss();break;case be.LeftToRight:e=this.WI.x*this.UI*this.contentScale.Wi().x,this.D.emit("scrollX",$n.Horizontal,e)}}setVisible(t){return this.qI.setVisible(t),this.tP.setVisible(t),this.iP.setVisible(t),this.HI.setVisible(t),this}dispose(){return this.qI.dispose(),this.tP.dispose(),this.iP.dispose(),this.HI.dispose(),this.$I&&clearInterval(this.$I),this}Ps(){switch(this.SP(),this.vP(),this.KI){case be.UpToDown:this.qI.Fe({x:this.C_.x,y:this.C_.y+this.C_.height-this.qI.oi().x/2}).q(Y(this.C_.width,this.C_.width)).Ps(),this.tP.Fe({x:this.C_.x,y:this.C_.y+10}).q(Y(this.C_.width,this.C_.width)).Ps(),this.iP.setSize({x:this.C_.width,y:this.C_.height-2*this.qI.oi().x}).setPosition({x:this.C_.x,y:this.C_.y+this.tP.oi().y+this.iP.getSize().y/2}),this.HI.setSize(Y(this.C_.width,this.bP())),this.GI={x:this.C_.x,y:this.qI.Fa().y-this.qI.oi().y/2-this.HI.getSize().y/2},this.pP({min:{x:this.C_.x,y:this.qI.Fa().y-this.qI.oi().y/2-this.HI.getSize().y/2},max:{x:this.C_.x,y:this.tP.Fa().y+this.tP.oi().x/2+this.HI.getSize().y/2}});break;case be.LeftToRight:this.qI.Fe({x:this.C_.x,y:this.C_.y}).q(Y(this.C_.height,this.C_.height)).Ps(),this.tP.Fe({x:this.C_.x+this.C_.width-this.tP.oi().x,y:this.C_.y}).q(Y(this.C_.height,this.C_.height)).Ps(),this.iP.setSize({y:this.C_.height,x:this.C_.width-2*this.qI.oi().y}).setPosition({x:this.C_.x+this.qI.oi().x/2+this.iP.getSize().x/2,y:this.C_.y}),this.HI.setSize(Y(this.bP(),this.C_.height)),this.GI={x:this.qI.Fa().x+this.qI.oi().x/2+this.HI.getSize().x/2,y:this.C_.y},this.pP({min:{x:this.qI.Fa().x+this.qI.oi().x/2+this.HI.getSize().x/2,y:this.C_.y},max:{x:this.tP.Fa().x-this.tP.oi().x/2-this.HI.getSize().x/2,y:this.C_.y}})}return this.xP(),this}SP(){switch(this.KI){case be.UpToDown:this.MP()||this.setVisible(!1),this.MP()&&this.setVisible(!0);break;case be.LeftToRight:this._P()||this.setVisible(!1),this._P()&&this.setVisible(!0)}}vP(){switch(this.KI){case be.UpToDown:this.MP()||this.JI({x:0,y:0});break;case be.LeftToRight:this._P()||this.JI({x:0,y:0})}}MP(){return this.Kc.x>this.C_.height}_P(){return this.Kc.y>this.C_.width}bP(){switch(this.KI){case be.UpToDown:return this.C_.height*(this.C_.height-2*this.qI.oi().x)/this.Kc.x;case be.LeftToRight:return this.C_.width*(this.C_.width-2*this.qI.oi().y)/this.Kc.y;default:return 0}}xP(){switch(this.KI){case be.UpToDown:this.UI=(this.Kc.x-this.C_.height)/(this.OI.min.y-this.OI.max.y);break;case be.LeftToRight:this.UI=(this.Kc.y-this.C_.width)/(this.OI.max.x-this.OI.min.x)}}Te(){switch(this.qI.Te(),this.tP.Te(),this.iP.Te(),this.KI){case be.UpToDown:this.HI.setPosition({x:this.C_.x,y:this.qI.Fa().y-this.qI.oi().y/2-this.HI.getSize().y/2-this.WI.y}).Te();break;case be.LeftToRight:this.HI.setPosition({y:this.C_.y,x:this.qI.Fa().x+this.qI.oi().x/2+this.HI.getSize().x/2+this.WI.x}).Te()}return this}}class cF{constructor(t,e,i,s,n,a,o){switch(this.bA=t,this.qg=e,this.scale=s,this.contentScale=n,o){case $n.Vertical:this.wP=this.CP(i,a,be.UpToDown);break;case $n.Horizontal:this.kP=this.CP(i,a,be.LeftToRight);break;case $n.Both:this.wP=this.CP(i,a,be.UpToDown),this.kP=this.CP(i,a,be.LeftToRight)}this.TP=Ls(new Er(void 0,(l,u,d,f,y)=>{var m,S;f.x!==0&&(!((m=this.kP)===null||m===void 0)&&m.cP(f.x))&&xt(y),f.y!==0&&(!((S=this.wP)===null||S===void 0)&&S.uP(f.y))&&xt(y)}))}CP(t,e,i){return new uF(this.bA,this.qg,t,this.scale,this.contentScale,e,i)}hP(){return 20}nP(t){var e,i;return(e=this.wP)===null||e===void 0||e.nP(t),(i=this.kP)===null||i===void 0||i.nP(t),this}FP(t){var e;return(e=this.kP)===null||e===void 0||e.aP(t),this}IP(t){var e;return(e=this.wP)===null||e===void 0||e.aP(t),this}PP(t){const e=this.wP;return e&&e.sP(t),this}DP(t){return this.TP.onTouchStart(this,t),this}BP(t){return this.TP.onTouchMove(this,t),this}LP(t){return this.TP.onTouchEnd(this,t),this}onScroll(t){var e,i;return(e=this.kP)===null||e===void 0||e.dP(t),(i=this.wP)===null||i===void 0||i.dP(t),this}dispose(){var t,e;return(t=this.wP)===null||t===void 0||t.dispose(),(e=this.kP)===null||e===void 0||e.dispose(),this}Te(){var t,e;return(t=this.wP)===null||t===void 0||t.Te(),(e=this.kP)===null||e===void 0||e.Te(),this}Ps(){var t,e,i,s;const n=this.scale.x,a=this.scale.y;return(t=this.wP)===null||t===void 0||t.eP({x:n.getInnerEnd()-10,y:a.getInnerStart()+20,height:a.getInnerEnd()-20,width:20}),(e=this.kP)===null||e===void 0||e.eP({x:n.getInnerStart()+10,y:a.getInnerStart()+10,height:20,width:n.getInnerEnd()-20}),(i=this.wP)===null||i===void 0||i.Ps(),(s=this.kP)===null||s===void 0||s.Ps(),this}}class QR extends Jr{constructor(t,e,i,s,n,a){super(t,e,i,e.vm("dataGrid bg",0),s,e.us.qi.dataGridBackgroundFillStyle,e.us.qi.dataGridBackgroundStrokeStyle,e.us.qi.dataGridTitleFont,e.us.qi.dataGridTitleFillStyle,a),this.RP=[],this.EP=[],this.zP=[],this.VP=new Map,this.OP=!0,this.NP=!0,this.GP=!0,this.WP=!0,this.UP=!0,this.YP=!0,this.HP=!0,this.$P=!0,this.XP=!0,this.jP=!0,this.ZP=!0,this.QP=!0,this.JP=!0,this.KP=!0,this.qP=!0,this.tD=!0,this.iD=new Set,this.sD=new Set,this.eD=!0,this.hD=!0,this.rD=(o,l)=>{o.borders=l===void 0?Vb:{...o.borders,...l},this.nD(o),this.QP=!0,this.us.Ss()},this.nD=o=>{o.borders&&(o.borders.top===!1&&this.oD(o.column,o.row-1,l=>{l.borders=l.borders?{...l==null?void 0:l.borders,bottom:!1}:{...this.aD,bottom:!1}}),o.borders.bottom===!1&&this.oD(o.column,o.row+1,l=>{l.borders=l.borders?{...l.borders,top:!1}:{...this.aD,top:!1}}),o.borders.left===!1&&this.oD(o.column-1,o.row,l=>{l.borders=l.borders?{...l.borders,right:!1}:{...this.aD,right:!1}}),o.borders.right===!1&&this.oD(o.column+1,o.row,l=>{l.borders=l.borders?{...l.borders,left:!1}:{...this.aD,left:!1}}),o.borders.top===!0&&this.oD(o.column,o.row-1,l=>{l.borders=l.borders?{...l==null?void 0:l.borders,bottom:!0}:{...this.aD,bottom:!0}}),o.borders.bottom===!0&&this.oD(o.column,o.row+1,l=>{l.borders=l.borders?{...l.borders,top:!0}:{...this.aD,top:!0}}),o.borders.left===!0&&this.oD(o.column-1,o.row,l=>{l.borders=l.borders?{...l.borders,right:!0}:{...this.aD,right:!0}}),o.borders.right===!0&&this.oD(o.column+1,o.row,l=>{l.borders=l.borders?{...l.borders,left:!0}:{...this.aD,left:!0}}))},this.lD=(o,l)=>{const u=this.VP.get(o);u&&this.D.emit(gi.cellMouseEnter,u,l)},this.uD=(o,l)=>{const u=this.VP.get(o);u&&this.D.emit(gi.cellMouseLeave,u,l)},this.cD=(o,l)=>{const u=this.VP.get(o);u&&this.D.emit(gi.cellMouseClick,u,l)},this.dD=(o,l)=>{const u=this.VP.get(o);u&&this.D.emit(gi.cellMouseDoubleClick,u,l)},this.fD=(o,l)=>{const u=this.VP.get(o);u&&this.D.emit(gi.cellMouseDown,u,l)},this.AD=(o,l)=>{const u=this.VP.get(o);u&&this.D.emit(gi.cellMouseUp,u,l)},this.gD=(o,l)=>{const u=this.VP.get(o);u&&this.D.emit(gi.cellMouseMove,u,l)},this.mD=(o,l)=>{const u=this.VP.get(o);u&&this.D.emit(gi.cellMouseDrag,u,l)},this.yD=(o,l)=>{const u=this.VP.get(o);u&&this.D.emit(gi.cellMouseDragStart,u,l)},this.pD=(o,l)=>{const u=this.VP.get(o);u&&this.D.emit(gi.cellMouseDragStop,u,l)},this.SD=(o,l)=>{const u=this.VP.get(o);u&&(this.D.emit(gi.cellMouseWheel,u,l),!l.defaultPrevented&&this.eD&&this.vD.PP(l))},this.bD=(o,l)=>{const u=this.VP.get(o);u&&(this.D.emit(gi.cellTouchStart,u,l),!l.defaultPrevented&&this.hD&&this.vD.DP(l))},this.xD=(o,l)=>{const u=this.VP.get(o);u&&(this.D.emit(gi.cellTouchMove,u,l),!l.defaultPrevented&&this.hD&&this.vD.BP(l))},this.MD=(o,l)=>{const u=this.VP.get(o);u&&(this.D.emit(gi.cellTouchEnd,u,l),!l.defaultPrevented&&this.hD&&this.vD.LP(l))},this.us.Nn(wt.if),this._m.Rh("Data Grid"),this._D=i.d2({scaleXYConstructor:Se}),this._D.x.ig=tF,this.wD=i.d2({scaleXYConstructor:Se}),this.CD={x:0,y:0},this.kD=this.qi.dataGridTextFont,this.TD=this.qi.dataGridTextFillStyle,this.aD={top:!0,bottom:!0,left:!0,right:!0},this.FD=this.qi.dataGridCellBackgroundFillStyle,this.ID=this.qi.dataGridBorderStrokeStyle,this.PD="left-center",this.DD={left:5,right:5,bottom:5,top:5},this.BD=e.ob("dataGrid grid bg",0),this.LD=e.ob("dataGrid cell bg",1),this.RD=e.$y("dataGrid cell content",0),this.ED=e.$y("dataGrid scrollbar bg",1),this.zD=e.$y("dataGrid scrollbar fg",2),this.vD=this.VD(),this.onBackgroundMouseWheel((o,l)=>{this.eD&&this.vD.PP(l)}),this.onBackgroundTouchStart((o,l)=>{this.hD&&this.vD.DP(l)}),this.onBackgroundTouchMove((o,l)=>{this.hD&&this.vD.BP(l)}),this.onBackgroundTouchEnd((o,l)=>{this.hD&&this.vD.LP(l)}),this.OD=this.BD.ke(this._D).Ce(this.qi.dataGridBackgroundFillStyle).we(At).setMouseInteractions(!1),this.ND=this.RD.Lg(this._D).setMouseInteractions(!1),this.GD=new Gr(()=>this.LD.ke(this._D).setMouseInteractions(!0).setMouseEnterEventHandler(this.lD).setMouseLeaveEventHandler(this.uD).setMouseClickEventHandler(this.cD).setMouseDoubleClickEventHandler(this.dD).setMouseDownEventHandler(this.fD).setMouseUpEventHandler(this.AD).setMouseMoveEventHandler(this.gD).setMouseDragEventHandler(this.mD).setMouseDragStartEventHandler(this.yD).setMouseDragStopEventHandler(this.pD).setMouseWheelEventHandler(this.SD).setTouchStartEventHandler(this.bD).setTouchMoveEventHandler(this.xD).setTouchEndEventHandler(this.MD)),this.WD=new Gr(()=>this.RD.ke(this._D).setMouseInteractions(!1)),this.UD=new Gr(()=>this.RD.Pr(this._D).setMouseInteractions(!1)),this.YD=new Gr(()=>this.RD.rp(this._D,{},[kr.InternalUI,{type:"DataPattern",args:{pattern:"ProgressiveX"}}]).setMouseInteractions(!1)),this.HD=new Gr(()=>this.RD.Ee(this._D).setMouseInteractions(!1)),this.$D=new Gr(()=>this.RD.bS(this._D).setMouseInteractions(!1)),this.XD=new Gr(()=>this.RD.ke(this._D).setMouseInteractions(!1)),this.jD=new Gr(()=>this.RD.lw(this._D).setMouseInteractions(!1)),this.ZD=new Gr(()=>this.RD.Jc(this._D).setMouseInteractions(!1)),this.Sm(n,this.uiScale),this.onResize(()=>{this.OP=!0,this.us.Ss(),this._D.q(this.pixelScale.oi()),this.wD.q(this.pixelScale.oi())}),this.QD=this.es.yg([this.OD])}getMinimumSize(){return{x:200,y:200}}setAnimationsEnabled(t){return this}Zd(){return[]}dispose(){return super.dispose(),this.BD.W(),this.LD.W(),this.RD.W(),this.ED.W(),this.zD.W(),Tl(this._D),Tl(this.wD),this.vD.dispose(),this.UD.gp(),this.GD.gp(),this.WD.gp(),this.YD.gp(),this.HD.gp(),this.$D.gp(),this.XD.gp(),this.jD.gp(),this.ZD.gp(),this}j(){return super.j(),this._D.j(),this.wD.j(),this}Z(){return super.Z(),this._D.Z(),this.wD.Z(),this}setBackgroundEffect(t){return this.QD.ps(t),this.us.Ss(),this}getBackgroundEffect(){return this.QD.vs()}setInteractionScrollOnWheel(t){return this.eD=t,this}getInteractionScrollOnWheel(){return this.eD}setInteractionPanOnTouch(t){return this.hD=t,this}getInteractionPanOnTouch(){return this.hD}onCellMouseEnter(t){return this.D.on(gi.cellMouseEnter,t)}offCellMouseEnter(t){return this.D.off(t)}onCellMouseLeave(t){return this.D.on(gi.cellMouseLeave,t)}offCellMouseLeave(t){return this.D.off(t)}onCellMouseClick(t){return this.D.on(gi.cellMouseClick,t)}offCellMouseClick(t){return this.D.off(t)}onCellMouseDoubleClick(t){return this.D.on(gi.cellMouseDoubleClick,t)}offCellMouseDoubleClick(t){return this.D.off(t)}onCellMouseDown(t){return this.D.on(gi.cellMouseDown,t)}offCellMouseDown(t){return this.D.off(t)}onCellMouseUp(t){return this.D.on(gi.cellMouseUp,t)}offCellMouseUp(t){return this.D.off(t)}onCellMouseMove(t){return this.D.on(gi.cellMouseMove,t)}offCellMouseMove(t){return this.D.off(t)}onCellMouseDrag(t){return this.D.on(gi.cellMouseDrag,t)}offCellMouseDrag(t){return this.D.off(t)}onCellMouseDragStart(t){return this.D.on(gi.cellMouseDragStart,t)}offCellMouseDragStart(t){return this.D.off(t)}onCellMouseDragStop(t){return this.D.on(gi.cellMouseDragStop,t)}offCellMouseDragStop(t){return this.D.off(t)}onCellMouseWheel(t){return this.D.on(gi.cellMouseWheel,t)}offCellMouseWheel(t){return this.D.off(t)}onCellTouchStart(t){return this.D.on(gi.cellTouchStart,t)}offCellTouchStart(t){return this.D.off(t)}onCellTouchMove(t){return this.D.on(gi.cellTouchMove,t)}offCellTouchMove(t){return this.D.off(t)}onCellTouchEnd(t){return this.D.on(gi.cellTouchEnd,t)}offCellTouchEnd(t){return this.D.off(t)}setGridBackgroundFillStyle(t){return this.OD.Ce(t),this.us.Ss(),this}getGridBackgroundFillStyle(){return this.OD.Eh()}setCellContent(t,e,i,s,n){if(typeof i=="number"&&s!==void 0&&n!==void 0){const a=i,o=s,l=n;let u=[];for(let y=t;y<t+a;y+=1)for(let m=e;m<e+o;m+=1){const S=this.oD(y,m);S&&u.push(S)}u=rh(u);let d={highlight:0};for(const y of u){const m=this.RP.indexOf(y);m<0||(d={...d,highlight:y.highlight,textFont:y.textFont,textFillStyle:y.textFillStyle,contentAlignment:y.contentAlignment,borders:y.borders,padding:y.padding,backgroundFillStyle:y.backgroundFillStyle},this.RP.splice(m,1))}const f={...d,column:t,row:e,columnSpan:a,rowSpan:o,content:l};this.RP.push(f),this.WP=!0,typeof f.content=="string"||typeof f.content=="number"?this.NP=!0:this.GP=!0,this.us.Ss()}else this.JD(t,e,i);return this}setColumnContent(t,e){const i=e.length;if(i===0)return this;for(let s=0;s<i;s+=1){const n=e[s];this.JD(t,s,n)}return this}setRowContent(t,e){const i=e.length;if(i===0)return this;for(let s=0;s<i;s+=1){const n=e[s];this.JD(s,t,n)}return this}setTableContent(t){const e=t.length;if(e===0)return this;const i=t[0].length;if(i===0)return this;for(let s=0;s<i;s+=1)for(let n=0;n<e;n+=1){const a=t[n][s];this.JD(s,n,a)}return this}setColumnWidth(t,e){let i=this.EP.find(s=>s.column===t);return i||(i={column:t,min:void 0,max:void 0},this.EP.push(i)),typeof e=="object"?(i.min=e.min,i.max=e.max):e===void 0?this.EP.splice(this.EP.indexOf(i),1):(i.min=e,i.max=e),this.YP=!0,this.us.Ss(),this}setRowHeight(t,e){let i=this.zP.find(s=>s.row===t);return i||(i={row:t,min:void 0,max:void 0},this.zP.push(i)),typeof e=="object"?(i.min=e.min,i.max=e.max):e===void 0?this.zP.splice(this.zP.indexOf(i),1):(i.min=e,i.max=e),this.YP=!0,this.us.Ss(),this}setColumnPaddings(t,e){return typeof e=="number"&&(e=Ju(e,e,e,e)),this.KD(t,i=>this.qD(i,e)),this}setRowPaddings(t,e){return typeof e=="number"&&(e=Ju(e,e,e,e)),this.tB(t,i=>this.qD(i,e)),this}setCellPadding(t,e,i){return typeof i=="number"&&(i=Ju(i,i,i,i)),this.oD(t,e,s=>this.qD(s,i)),this}setCellsPaddings(t){return typeof t=="number"&&(t=Ju(t,t,t,t)),this.DD={...this.DD,...t},this.iB(e=>this.qD(e,this.DD)),this}setCellBorders(t,e,i){return this.oD(t,e,s=>this.rD(s,i)),this}setRowBorders(t,e){return this.tB(t,i=>this.rD(i,e)),this}setColumnBorders(t,e){return this.KD(t,i=>this.rD(i,e)),this}setCellsBorders(t){return this.aD=t===void 0?Vb:t,this.iB(e=>this.rD(e,this.aD)),this}setCellsBorderStrokeStyle(t){return this.ID=typeof t=="function"?t(this.ID):t,this.KP=!0,this.us.Ss(),this}setColumnTextFillStyle(t,e){return this.KD(t,i=>this.sB(i,e)),this}setRowTextFillStyle(t,e){return this.tB(t,i=>this.sB(i,e)),this}setCellTextFillStyle(t,e,i){return this.oD(t,e,s=>this.sB(s,i)),this}setCellsTextFillStyle(t){return this.TD=typeof t=="function"?t(this.TD):t,this.iB(e=>this.sB(e,this.TD)),this}setColumnTextFont(t,e){return this.KD(t,i=>this.eB(i,e)),this}setRowTextFont(t,e){return this.tB(t,i=>this.eB(i,e)),this}setCellTextFont(t,e,i){return this.oD(t,e,s=>this.eB(s,i)),this}setCellsTextFont(t){return this.kD=typeof t=="function"?t(this.kD):t,this.iB(e=>this.eB(e,this.kD)),this}setColumnContentAlignment(t,e){return this.KD(t,i=>this.hB(i,e)),this}setRowContentAlignment(t,e){return this.tB(t,i=>this.hB(i,e)),this}setCellContentAlignment(t,e,i){return this.oD(t,e,s=>this.hB(s,i)),this}setCellsContentAlignment(t){return this.PD=t,this.iB(e=>this.hB(e,this.PD)),this}setCellBackgroundFillStyle(t,e,i){return this.oD(t,e,s=>this.rB(s,i)),this}setColumnBackgroundFillStyle(t,e){return this.KD(t,i=>this.rB(i,e)),this}setRowBackgroundFillStyle(t,e){return this.tB(t,i=>this.rB(i,e)),this}setCellsBackgroundFillStyle(t){return this.FD=typeof t=="function"?t(this.FD):t,this.iB(e=>this.rB(e,this.FD)),this}setCellHighlight(t,e,i){return this.oD(t,e,s=>{s.highlight=dh(i)}),this.JP=!0,this.us.Ss(),this}setColumnHighlight(t,e){const i=dh(e);return this.KD(t,s=>{s.highlight=i}),this.JP=!0,this.us.Ss(),this}setRowHighlight(t,e){const i=dh(e);return this.tB(t,s=>{s.highlight=i}),this.JP=!0,this.us.Ss(),this}removeCell(t,e){return this.oD(t,e,i=>this.RP.splice(this.RP.indexOf(i),1)),this.UP=!0,this.us.Ss(),this}removeRow(t){return this.tB(t,e=>this.RP.splice(this.RP.indexOf(e),1)),this.RP.filter(e=>e.row>t).forEach(e=>{e.row-=1}),this.UP=!0,this.us.Ss(),this}removeColumn(t){return this.KD(t,e=>this.RP.splice(this.RP.indexOf(e),1)),this.RP.filter(e=>e.column>t).forEach(e=>{e.column-=1}),this.UP=!0,this.us.Ss(),this}removeCells(){return this.RP.splice(0),this.UP=!0,this.us.Ss(),this}getColumnMax(){return this.RP.length===0?0:this.RP.reduce((t,e)=>Math.max(t,e.column+e.columnSpan-1),0)}getRowMax(){return this.RP.length===0?0:this.RP.reduce((t,e)=>Math.max(t,e.row+e.rowSpan-1),0)}Te(t){super.Te(t),is.Fm(this._m,this.bm),super.pm();const e=Math.round(this.ID.V()),i=e/2;let s=this.NP||this.GP||this.WP||this.UP||this.YP||this.HP||this.ZP||this.QP||this.KP||this.tD;if(s){this.RP.forEach(S=>{this.sD.add(S.column)}),this.RP.forEach(S=>{this.iD.add(S.row)});const a=this.UD.fp(),o=this.nB(i,a);a.finishPlot();const l=this.oB(this.sD.size,o),u=this.aB(this.iD.size,o),d=l.reduce(cc,0)+e,f=u.reduce(cc,0)+e,y=new Array(l.length+1).fill(0).map((S,x)=>l.reduce((v,b,E)=>v+(E<x?b:0),0)),m=new Array(u.length+1).fill(0).map((S,x)=>u.reduce((v,b,E)=>v+(E<x?b:0),0));if(this.lB){const S=this.lB.columnWidths.every((v,b)=>v===l[b]),x=this.lB.rowHeights.every((v,b)=>v===u[b]);S&&x&&(s=!1)}this.lB={columnWidths:l,rowHeights:u,dataGridWidth:d,dataGridHeight:f,columnWidthsCumulative:y,rowHeightsCumulative:m,cellsContentSizes:o}}const n=s||this.GP||this.WP||this.UP||this.$P||this.XP||this.jP||this.QP||this.JP||this.KP||this.OP||this.tD;if((n||this.qP)&&this.lB){const a=this.pixelScale.getInnerIntervalPixels(),o=is.Tm(this._m,this.bm),l=[this.ya.left+i,this.ya.right+i],u=[this.ya.bottom+i,this.ya.top+o+i],d={x:a.x-l[0]-l[1],y:a.y-u[0]-u[1]},f=[this.ya.left,this.ya.right],y=[this.ya.bottom,this.ya.top+o],m={x:Math.round(a.x-f[0]-f[1]),y:Math.round(a.y-y[0]-y[1])},S={x:Math.ceil(i),y:Math.floor(m.y-i)};this.wD.Ei(l).zi(u).Vi(0,d.x).Oi(0,d.y),this.vD.nP({x:this.lB.dataGridHeight,y:this.lB.dataGridWidth}).Ps().Te();const x={x:Math.round(this.CD.x),y:Math.round(Math.min(0,this.CD.y))};this._D.Ei(f).zi(y).Vi(x.x,m.x+x.x).Oi(x.y,m.y+x.y),this.OD.Fe({x:S.x,y:S.y});const v={x:this._D.x.ei(),y:this._D.y.ei()+this.vD.hP(),width:this._D.x.ri()+e-this.vD.hP(),height:this._D.y.ri()+e};this.RD.qv(v),this.LD.qv(v),this.BD.qv(v);const b=this.lB,E=[{x:this._D.x.getInnerStart(),y:this._D.y.getInnerStart()},{x:this._D.x.getInnerEnd(),y:this._D.y.getInnerStart()},{x:this._D.x.getInnerEnd(),y:this._D.y.getInnerEnd()},{x:this._D.x.getInnerStart(),y:this._D.y.getInnerEnd()}];b.cellsContentSizes.forEach(T=>{var V;const F={x:S.x+b.columnWidthsCumulative[T.cell.column],y:S.y-b.rowHeightsCumulative[T.cell.row+T.cell.rowSpan]},B={x:F.x+b.columnWidths[T.cell.column],y:F.y+b.rowHeights[T.cell.row]},z=_f([F,{x:B.x,y:F.y},B,{x:F.x,y:B.y}],E);(V=T.text)===null||V===void 0||V.setVisible(z)}),n&&this.uB(S,this.lB,e)}this.OP=!1,this.NP=!1,this.GP=!1,this.WP=!1,this.UP=!1,this.YP=!1,this.HP=!1,this.$P=!1,this.XP=!1,this.jP=!1,this.ZP=!1,this.QP=!1,this.JP=!1,this.KP=!1,this.qP=!1,this.tD=!1}nB(t,e){const i=[],s={left:Math.ceil(t),right:Math.ceil(t),top:Math.ceil(t),bottom:Math.ceil(t)};for(const n of this.RP){const{content:a}=n,o={...this.DD,...n.padding};let l,u,d,f={x:0,y:0};if(typeof a=="string"||typeof a=="number"){const y=String(a);l=e.add(),f=l.Rh(y).Oh(n.textFont||this.kD).Ps().jc()}if(eF(a)&&(u=a,f={x:200,y:50}),so(a)){const y=this.us.cB(a);y.dB()?(d=a,f=d.oi()):y.fB(()=>{this.tD=!0,this.us.Ss()})}if(l||u||d){o.top=Math.round(o.top),o.left=Math.round(o.left),o.right=Math.round(o.right),o.bottom=Math.round(o.bottom);const y={x:Math.round(f.x+o.left+o.right+s.left+s.right),y:Math.round(f.y+o.top+o.bottom+s.top+s.bottom)};i.push({cell:n,contentSize:y,text:l,sparkChart:u,icon:d,cellPadding:o,cellMargin:s})}}return i}uB(t,e,i){const{dataGridWidth:s,dataGridHeight:n,cellsContentSizes:a,columnWidths:o,columnWidthsCumulative:l,rowHeights:u,rowHeightsCumulative:d}=e,f={x:s-i,y:-n+i};this.OD.q(f),this.ND.Re(this.ID),this.VP.clear();const y={cellBackground:this.GD.fp(),cellIconRect:this.WD.fp(),lineSet:this.YD.fp(),line:this.HD.fp(),pointSet:this.$D.fp(),rect:this.XD.fp(),junction:this.jD.fp(),arc:this.ZD.fp()},m=[];for(const S of a){const{cell:x,text:v,sparkChart:b,icon:E,cellPadding:T,cellMargin:V}=S,F={column:x.column,row:x.row},B={x:t.x+l[x.column],y:t.y-d[x.row+x.rowSpan]},z={x:B.x+V.left,y:B.y+V.bottom},L={x:z.x+T.left,y:z.y+T.bottom},A={x:new Array(x.columnSpan).fill(0).reduce((_,X,N)=>_+o[x.column+N],0),y:new Array(x.rowSpan).fill(0).reduce((_,X,N)=>_+u[x.row+N],0)},R={x:A.x-V.left-V.right,y:A.y-V.top-V.bottom},w={x:R.x-T.left-T.right,y:R.y-T.top-T.bottom};if(v){const _=Fb(L,w,x.contentAlignment||this.PD);v.Fe(_[0]).Ea({x:_[1],y:_[2]}).Ce(this.AB(x.textFillStyle||this.TD,x.content,this.TD)).cs(x.highlight)}const C=this.AB(x.backgroundFillStyle||this.FD,x.content);if(C!==Ft){const _=y.cellBackground.add();_.Fe(B).q(A).Ce(C).we(At).cs(x.highlight),this.VP.set(_,F)}const k=x.borders||this.aD;if(k&&dF(B,A,k,i,m),b){const _=L,X=w;iF(b,y,this._D,_,X,this.qi,this.cA,x.highlight)}if(E){const _=E.oi(),X=Fb(L,w,x.contentAlignment||this.PD);y.cellIconRect.add().Fe({x:X[0].x+_.x*(-.5-X[1]/2),y:X[0].y+_.y*(-.5-X[2]/2)}).q(_).Ce(new kn({source:E.rc,fitMode:qi.Stretch})).we(At).cs(x.highlight)}}this.ND.Nt();for(const S of m)this.ND.zr().Eg(S[0],S[1]);y.cellBackground.finishPlot(),y.cellIconRect.finishPlot(),y.lineSet.finishPlot(),y.line.finishPlot(),y.pointSet.finishPlot(),y.rect.finishPlot(),y.junction.finishPlot(),y.arc.finishPlot()}oB(t,e){const i=new Array(t).fill(0);for(const s of this.sD.values()){const n=e.filter(l=>s>=l.cell.column&&s+1<=l.cell.column+l.cell.columnSpan).reduce((l,u)=>{const d=u.contentSize.x/u.cell.columnSpan;return Math.max(l,d)},0),a=this.EP.find(l=>l.column===s),o=a?Jt(n,a.min!==void 0?a.min:kt,a.max!==void 0?a.max:bt):n;i[s]=o}return i}aB(t,e){const i=new Array(t).fill(0);for(const s of this.iD.values()){const n=e.filter(l=>s>=l.cell.row&&s+1<=l.cell.row+l.cell.rowSpan).reduce((l,u)=>{const d=u.contentSize.y/u.cell.rowSpan;return Math.max(l,d)},0),a=this.zP.find(l=>l.row===s),o=a?Jt(n,a.min!==void 0?a.min:kt,a.max!==void 0?a.max:bt):n;i[s]=o}return i}AB(t,e,i){if(Ti(t)){try{const s=Number(e);return new it({color:t.getPalette().getColors(s)})}catch{}return i||Ft}return t}sB(t,e){t.textFillStyle=typeof e=="function"?e(t.textFillStyle||this.TD):e,this.jP=!0,this.us.Ss()}eB(t,e){t.textFont=typeof e=="function"?e(t.textFont||this.kD):e,this.ZP=!0,this.us.Ss()}rB(t,e){t.backgroundFillStyle=typeof e=="function"?e(t.backgroundFillStyle||this.FD):e,this.XP=!0,this.us.Ss()}hB(t,e){t.contentAlignment=e,this.$P=!0,this.us.Ss()}qD(t,e){t.padding={...t.padding,...e},this.HP=!0,this.us.Ss()}JD(t,e,i){let s=this.oD(t,e);s?s.content=i:(s={column:t,row:e,columnSpan:1,rowSpan:1,content:i,highlight:0},this.RP.push(s),this.WP=!0),typeof s.content=="string"||typeof s.content=="number"?this.NP=!0:this.GP=!0,this.us.Ss()}iB(t){this.RP.forEach(e=>t(e))}oD(t,e,i){const s=this.RP.find(n=>t>=n.column&&t+1<=n.column+n.columnSpan&&e>=n.row&&e+1<=n.row+n.rowSpan);return s&&i&&i(s),s}KD(t,e){const i=this.RP.filter(s=>t>=s.column&&t+1<=s.column+s.columnSpan);for(const s of i)s&&e(s)}tB(t,e){const i=this.RP.filter(s=>t>=s.row&&t+1<=s.row+s.rowSpan);for(const s of i)s&&e(s)}VD(){return new cF(this.zD,this.ED,this.wD,this.wD,this._D,this.qi,$n.Both).onScroll((t,e)=>{this.lB&&(t===$n.Vertical&&(this.CD.y=-e),t===$n.Horizontal&&(this.CD.x=e),this.qP=!0,this.us.Ss())}).FP(50).IP(12)}}const gi={cellMouseEnter:"cellMouseEnter",cellMouseLeave:"cellMouseLeave",cellMouseClick:"cellMouseClick",cellMouseDoubleClick:"cellMouseDoubleClick",cellMouseDown:"cellMouseDown",cellMouseUp:"cellMouseUp",cellMouseMove:"cellMouseMove",cellMouseDrag:"cellMouseDrag",cellMouseDragStart:"cellMouseDragStart",cellMouseDragStop:"cellMouseDragStop",cellMouseWheel:"cellMouseWheel",cellTouchStart:"cellTouchStart",cellTouchMove:"cellTouchMove",cellTouchEnd:"cellTouchEnd"};var Db;(function(r){r.Center="center",r.RightCenter="right-center",r.LeftCenter="left-center",r.RightTop="right-top",r.LeftTop="left-top",r.RightBottom="right-bottom",r.LeftBottom="left-bottom",r.CenterTop="center-top",r.CenterBottom="center-bottom"})(Db||(Db={}));const dF=(r,t,e,i,s)=>{const n={x:r.x,y:r.y},a={x:r.x,y:r.y+t.y},o={x:r.x+t.x,y:r.y},l={x:r.x+t.x,y:r.y+t.y};e.top&&s.push([a,l]),e.bottom&&s.push([n,o]),e.left&&s.push([n,a]),e.right&&s.push([o,l])},Fb=(r,t,e)=>{const i=r.x,s=r.x+t.x,n=r.x+t.x/2,a=r.y+t.y,o=r.y,l=r.y+t.y/2;switch(e){case"left-center":return[Y(i,l),-1,0];case"right-center":return[Y(s,l),1,0];case"center":return[Y(n,l),0,0];case"left-bottom":return[Y(i,o),-1,-1];case"right-bottom":return[Y(s,o),1,-1];case"center-bottom":return[Y(n,o),0,-1];case"left-top":return[Y(i,a),-1,1];case"right-top":return[Y(s,a),1,1];case"center-top":return[Y(n,a),0,1]}return Nl(0,`Unidentified DataGrid cell content alignment option: ${e}`)},Vb={top:!1,bottom:!1,left:!1,right:!1};class fF extends eo{constructor(t,e,i,s,n,a){super(t,{Sr(){},pr(){},br(){}},s,e,i,{numeric:e.xAxisNumericTicks,datetime:e.xAxisDateTimeTicks,time:e.xAxisTimeTicks},{type:"linear"}),this.chart=t,this.es=a,this.ks=n,this.Lh=n.Pr(t.gB).Oh(this.qi.barChartCategoryAxisTitleFont||this.qi.xAxisTitleFont).Ce(this.qi.barChartCategoryAxisTitleFillStyle||this.qi.xAxisTitleFillStyle),this.setTitleRotation(this.chart.Ts.getWidth({x:0,y:-90})),this.Wh=this.es.yg([this.Lh]).ps(e.effectsText),this.mB=n.Ee(t.gB).Re(e.barChartCategoryAxisStrokeStyle||e.xAxisStrokeStyle)}setThickness(t){return typeof t=="number"?(this.xg=t,this.Mg=t):typeof t=="object"&&(this.xg=t.min,this.Mg=t.max),this.chart.us.Ss(),this}getThickness(){return{min:this.xg,max:this.Mg}}setStrokeStyle(t){return this.mB.Re(t),this.chart.us.Ss(),this}getStrokeStyle(){return this.mB.uu()}Ps(){if(!this.Xi)return{kg:0,Tg:0,Vd:Jt(0,this.xg!==void 0?this.xg:0,this.Mg!==void 0?this.Mg:bt)};const t=this.mB.uu().V()/2,e=this.chart.Ts.getHeight(this.Lh.Ps().jc());return{kg:t,Tg:e,Vd:t+e}}Te(t,e,i,s){const n=this.getInterval(),a=this.chart.valueAxis.getInterval();this.mB.Ve(this.chart.Ts.toPoint(n.start,a.start)).ze(this.chart.Ts.toPoint(n.end,a.start)).setVisible(this.Xi),this.Lh.Fe(this.chart.Ts.toPoint(.5*(n.start+n.end),this.chart.valueAxis.dt.mi(a.start,-(t.kg+s.labelMarginBeforeCategoryAxisPixels)))).Ea(this.chart.Ts.toPoint(0,1)).setVisible(this.Xi)}setMouseInteractions(t){return this}ur(t,e){return new Cc(e,t,this.ks,this.chart.gB)}cr(t,e){return{}}_r(t,e){return e}Cr(t,e,i){return{min:t,max:e}}}class gF extends eo{constructor(t,e,i,s,n,a,o){super(t,{Sr:()=>{var l;if(t.yB){if(t.pB==="positive"||t.pB==="bipolar"){if(((l=t.SB)===null||l===void 0?void 0:l.position)==="after-bar"){const u=this.dt.ri();return this.dt.mi(t.yB.max,Math.min(this.chart.Ts.getHeight(this.chart.vB())+t.SB.labelMargin,.3*u))}return t.yB.max}return t.bB?Jt(-1,-1e-6,t.yB.max):0}},pr:()=>{var l;if(t.yB){if(t.pB==="negative"||t.pB==="bipolar"){if(((l=t.SB)===null||l===void 0?void 0:l.position)==="after-bar"){const u=this.dt.ri();return this.dt.mi(t.yB.min,-Math.min(this.chart.Ts.getHeight(this.chart.vB())+t.SB.labelMargin,.3*u))}return t.yB.min}return t.bB?Jt(1,1e-6,t.yB.min):0}},br:()=>{}},s,e,i,{numeric:e.barChartValueAxisTicks||e.yAxisNumericTicks,datetime:e.yAxisDateTimeTicks,time:e.yAxisTimeTicks},o),this.chart=t,this.es=a,this.ks=n,this.Lh=n.Pr(t.gB).Oh(this.qi.barChartValueAxisTitleFont||this.qi.yAxisTitleFont).Ce(this.qi.barChartValueAxisTitleFillStyle||this.qi.yAxisTitleFillStyle),this.setTitleRotation(this.chart.Ts.getHeight({x:0,y:-90})),this.Wh=this.es.yg([this.Lh]).ps(e.effectsText),this.mB=n.Ee(t.gB).Re(e.barChartValueAxisStrokeStyle||this.qi.yAxisStrokeStyle)}setThickness(t){return typeof t=="number"?(this.xg=t,this.Mg=t):typeof t=="object"&&(this.xg=t.min,this.Mg=t.max),this.chart.us.Ss(),this}getThickness(){return{min:this.xg,max:this.Mg}}setStrokeStyle(t){return this.mB.Re(t),this.chart.us.Ss(),this}getStrokeStyle(){return this.mB.uu()}setTickStrategy(t,e){return super.Fh(t,e)}Ps(t){if(!this.Xi)return this.Uh(),{kg:0,Tg:0,Vd:Jt(0,this.xg!==void 0?this.xg:0,this.Mg!==void 0?this.Mg:bt)};const e=this.chart.Ts.getWidth(this.chart.gB).ri(),i=this.dt.ri();this.qh({physicalAxisSize:i,oppositeAxisSize:e,plotLines:t});let s=0;for(const o of this.Ze.values())for(const l of o.values()){const u=l.Sh.lr,d=this.chart.Ts.getWidth(l.Ue.jc()),f=u.getTickLength()+u.getTickPadding()+d+u.getLabelPadding();s=Math.max(s,f)}const n=s+this.mB.uu().V()/2,a=this.chart.Ts.getWidth(this.Lh.Ps().jc());return{kg:n,Tg:a,Vd:Jt(n+a,this.xg!==void 0?this.xg:0,this.Mg!==void 0?this.Mg:bt)}}Te(t){const e=this.getInterval();this.mB.Ve(this.chart.Ts.toPoint(-.5,this.Ih)).ze(this.chart.Ts.toPoint(-.5,this.Ph)).setVisible(this.Xi);const i=this.kh.type==="logarithmic"?Math.sqrt(e.start+e.end):.5*(e.start+e.end),s=this.chart.Ts.toPoint(this.chart.categoryAxis.dt.mi(-.5,t.kg*this.chart.Ts.xB),i),n=this.chart.Ts.toPoint(this.chart.Ts.MB,0);this.Lh.Fe(s).Ea(n).setVisible(this.Xi)}setMouseInteractions(t){return this}ur(t,e){return new Cc(e,t,this.ks,this.chart.gB)}cr(t,e){const i=t.Sh.lr,s=this.chart.Ts.toPoint(-.5,t.u),n=this.chart.gB.mi(s,this.chart.Ts.toPoint(i.getTickLength()*this.chart.Ts.xB,0)),a=this.chart.gB.mi(s,this.chart.Ts.toPoint(i.gridStrokeLength*e.oppositeAxisSize*-this.chart.Ts.xB,0)),o=this.chart.gB.mi(n,this.chart.Ts.toPoint(i.getTickPadding()*this.chart.Ts.xB,0));t.Ue.Fe(o).Ea(this.chart.Ts.toPoint(this.chart.Ts.MB,i.getLabelAlignment())).Nh(i.getLabelRotation()),i.tickStyle!==At&&i.tickLength!==0&&e.plotLines.add({positions:[s,n]},{lineStyle:i.tickStyle}),i.gridStrokeStyle!==At&&i.gridStrokeLength>0&&e.plotLines.add({positions:[s,a]},{lineStyle:i.gridStrokeStyle})}_r(t,e){return this.kh.type==="linear"?fc(t,e,this.dt):If(t,e,this.dt)}Cr(t,e,i){return{min:t,max:e}}}class yF extends R0{constructor(t,e,i,s,n,a,o){super(t,e,i,s),this.No=_M(),this.u=0,this._B=!1,this.chart=t,this.Ji=t,this.category=n,this.subCategory=a,this.xs=n,this.be=Kt(i.barChartBarFillStyle||i.rectangleSeriesFillStyle,o),this.xe=Kt(i.barChartBarStrokeStyle||i.rectangleSeriesStrokeStyle,o),this.onVisibleStateChanged(()=>{this.Ji.wB()}),this.onDispose(()=>{this.Ji.wB(),this.Ji.CB.delete(this)})}setValue(t){return this._B=!0,this.u=t,this.Ji.wB(),this.Ji.us.Ss(),this.Ji.CB.delete(this),this}getValue(){return this.u}get value(){return this.u}setFillStyle(t){return this.be=typeof t=="function"?t(this.be):t,this.Ji.wB(),this}getFillStyle(){return this.be}setStrokeStyle(t){return this.xe=typeof t=="function"?t(this.xe):t,this.Ji.wB(),this}getStrokeStyle(){return this.xe}Kp(){return this.tS}Hc(t,e){return Is(t,this.Ji.engine.scale,this.Ji.Wy(new Ii,this.category,this.u,this).Zu(),this,void 0)}solveNearestFromScreen(t){}setEffect(t){return this.Ji.setBarsEffect(t),this}}const mF=r=>!!(r&&typeof r=="object"&&"iCategory"in r&&typeof r.iCategory=="number"&&"value"in r&&typeof r.value=="number"),zb=(r,t,e)=>{const i=r.kd.filter(a=>a!==void 0),s=i.map(a=>e(a.sizePixels)).reduce((a,o)=>Math.max(a,o),1),n=Math.ceil(s/(t/i.length));return n<=1?i:i.filter((a,o)=>o%n==0)};class KR extends zc{constructor(t,e,i,s,n,a,o){var l;let u;super(t,e,i,e.vm("barChart bg",0),s,e.us.qi.barChartBackgroundFillStyle||e.us.qi.chartXYBackgroundFillStyle,e.us.qi.barChartBackgroundStrokeStyle||e.us.qi.chartXYBackgroundStrokeStyle,e.us.qi.barChartTitleFont||e.us.qi.chartXYTitleFont,e.us.qi.barChartTitleFillStyle||e.us.qi.chartXYTitleFillStyle,a),this.coordsBars="barChart",this.kB=pF.Descending,this.TB=this.qi.barChartCategoryLabels,this.SB=this.qi.barChartValueLabelsAfterBars,this.FB=!1,this.b_=Bl(),this.IB=new Map,this.CB=new Map,this.pB="positive",this.PB="columns",this.DB=!0,this.BB=new Map,this.LB={speed:1},this._y={speed:1},this.RB=.08,this.Gy=We.snapToClosest,this.Wy=(y,m,S,x)=>{this.categoryAxis.getTitle().length>0&&y.addRow(this.categoryAxis.getTitle()),y.addRow({text:m,font:{weight:"bold"}}),this.valueAxis.getTitle().length>0&&y.addRow(this.valueAxis.getTitle());const v=[];return x.subCategory&&x.subCategory.length>0&&v.push(x.subCategory),v.push(this.valueAxis.formatValue(S)),y.addRow(...v),y},this.fn=(y,m,S,x,v)=>{this.gB.q(x,v)},this.us.Nn(wt.nf),this.Ts=(o==null?void 0:o.type)==="horizontal"?xF:SF,this._m.Rh("Bar Chart"),this.EB=e.$y("barChart plotting 1",0),this.zB=e.$y("barChart plotting 2",1),this.bB=((l=o==null?void 0:o.valueAxis)===null||l===void 0?void 0:l.type)==="logarithmic",this.bB?this.Ts.VB==="horizontal"?(u=i.d1({scale1DConstructor:Ks,dimension:"y"}),this.gB=new wi().Ri(i.d1({scale1DConstructor:Sh,dimension:"x"}),u)):(u=i.d1({scale1DConstructor:Ks,dimension:"x"}),this.gB=new wi().Ri(u,i.d1({scale1DConstructor:Sh,dimension:"y"}))):(this.gB=i.d2({scaleXYConstructor:Se}),u=this.Ts.getWidth(this.gB)),this.OB=this.es.yg(),this.M_=new ka(()=>this.b_._t(this.EB.Ob(this.gB).Jo(0)),(y,m,S)=>(y.Ce(S.fillStyle).we(S.strokeStyle),m.map(x=>{const v=x.existingMember||y.zr();return v.pl(x.vertices),this.b_.Ot(v,x.bar),x.bar.gs([v]),v})),()=>{this.b_.Nt()},y=>{this.OB.fs(y)}),this.FS=this.qg.ke(this.gB).Ce(this.qi.barChartSeriesBackgroundFillStyle||Ft).we(At),this.IS=this.qg.ke(this.gB).Ce(Ft).we(this.qi.barChartSeriesBackgroundStrokeStyle||At).setMouseInteractions(!1),super.TS(this.FS,this.IS),this.categoryAxis=new fF(this,this.qi,(o==null?void 0:o.disableAnimations)!==!0&&(o==null?void 0:o.animationsEnabled)!==!1,u,this.zB,this.es);const d=Lm(o==null?void 0:o.valueAxis);this.valueAxis=new gF(this,this.qi,(o==null?void 0:o.disableAnimations)!==!0&&(o==null?void 0:o.animationsEnabled)!==!1,this.Ts.getHeight(this.gB),this.zB,this.es,d.type),this.NB=new Gr(()=>this.zB.Pr(this.gB).Ir(Qn).Fr(Qn).Jo(1)),this.GB=new ka(()=>this.qg.Lg(this.gB).setMouseInteractions(!1),(y,m,S)=>(y.Re(S.lineStyle),m.map(({positions:x,existingMember:v})=>(v||y.zr()).Eg(x[0],x[1])))),this.jy=e.Zy();const f=De(o?o.autoCursorBuilder:void 0,i3);this.Pm=f.uy(this.jy,this.uiScale,this.uiScale,this.qi),this.onResize(this.fn),this.Sm(n,this.gB),this.setAutoCursorMode(We.onHover),this.setAnimationsEnabled((o==null?void 0:o.disableAnimations)!==!0&&(o==null?void 0:o.animationsEnabled)!==!1),this.LS((y,m)=>{hs.Bm(this,m)})}getSeries(){return this.xS}setAutoCursor(t){return this.Pm&&t(this.Pm),this.us.Ss(),this}getAutoCursor(){return this.Pm}setAutoCursorMode(t){return this.Gy=t,this.us.Ss(),this}getAutoCursorMode(){return this.Gy}setCursorResultTableFormatter(t){return this.Wy=t,this.us.Ss(),this}setBarsMargin(t){return this.RB=Jt(t,0,.49),this.FB=!0,this.us.Ss(),this}getBarsMargin(){return this.RB}setBarsEffect(t){return this.OB.ps(t),this.us.Ss(),this}getBarsEffect(){return this.OB.vs()}setData(t){let e;if(Array.isArray(t))e=[],t.forEach((i,s)=>{typeof i=="string"?e.push({category:i}):typeof i=="number"?e.push({category:`Category ${s+1}`,value:i}):typeof i=="object"&&e.push(i)});else{e=[];const i=Object.keys(t);for(const s of i){const n=t[s];e.push({category:s,value:typeof n=="number"?n:void 0})}}return this.WB("columns",e),this}setDataStacked(t,e){const i=[];return e.forEach(s=>{const{subCategory:n,values:a}=s;a.forEach((o,l)=>{const u=t[l];i.push({category:u,subCategory:n,value:o})})}),this.WB("stacks",i),this}setDataGrouped(t,e){const i=[];return e.forEach(s=>{const{subCategory:n,values:a}=s;a.forEach((o,l)=>{const u=t[l];i.push({category:u,subCategory:n,value:o})})}),this.WB("groups",i),this}WB(t,e){this.xS.length>0&&this.us.Nn(wt.vf),this.PB=t,this.UB(e);const i=rh(e.map(a=>a.category)),s=i.length,n=rh(e.map(a=>a.subCategory)).filter(a=>a!==void 0);if(e.forEach(a=>{let o=this.xS.find(l=>l.category===a.category&&l.subCategory===a.subCategory);if(!o){const l=i.indexOf(a.category),u=n.includes(a.subCategory)?n.indexOf(a.subCategory):void 0;o=new yF(this,this._S,this.qi,this.us.es,a.category,a.subCategory,De(u,l)),this.PS(o),this.BB.set(o,{category:l,valueStart:this.bB?1e-6:0,valueEnd:a.value!==void 0?a.value:0})}a.value!==void 0&&o.setValue(a.value)}),this.xS.slice().forEach(a=>{e.find(o=>o.category===a.category&&o.subCategory===a.subCategory)===void 0&&(a.dispose(),this.BB.delete(a))}),this.categoryAxis.setInterval(this.Ts.getWidth({x:{start:-.5,end:s-.5},y:{start:s-.5,end:-.5}})),this.yB=this.xS.length===0?void 0:t!=="stacks"?this.xS.reduce((a,o)=>({min:Math.min(a.min,o.getValue()),max:Math.max(a.max,o.getValue())}),{min:bt,max:kt}):{min:0,max:i.reduce((a,o)=>Math.max(a,e.reduce((l,u)=>u.category!==o?l:u.value!==void 0?l+u.value:l,0)),0)},this.yB&&(this.pB=this.yB.min>=0?"positive":this.yB.max<=0?"negative":"bipolar",(this.pB==="bipolar"||this.pB==="negative")&&this.bB))throw new Error("LightningChart JS BarChart bipolar/negative data + logarithmic value axis combination not supported.");this.UB(this.xS),this.IB.clear(),this.CB.clear(),this.FB=!0,this.us.Ss()}setCategoryLabels(t){const e=typeof t=="function"?this.TB?t(this.TB):this.TB:t;return this.TB=e?{...this.qi.barChartCategoryLabels,...e}:void 0,this.IB.clear(),this.us.Ss(),this}getCategoryLabels(){return this.TB}setValueLabels(t){var e;const i=typeof t=="function"?this.SB?t(this.SB):this.SB:t,s=(i==null?void 0:i.position)||((e=this.SB)===null||e===void 0?void 0:e.position);return i&&s?s==="after-bar"?this.SB={...this.qi.barChartValueLabelsAfterBars,...i}:s!=="inside-bar"&&s!=="inside-bar-start"&&s!=="inside-bar-centered"&&s!=="inside-bar-end"||(this.SB={...this.qi.barChartValueLabelsInsideBars,...i}):this.SB=void 0,this.CB.clear(),this.us.Ss(),this}getValueLabels(){return this.SB}setLabelFittingEnabled(t){return this.DB=t,this.us.Ss(),this}getLabelFittingEnabled(){return this.DB}getBar(t,e){if((this.PB==="groups"||this.PB==="stacks")&&e===void 0)throw new Error("LightningChart JS BarChart.getBar() | `subCategory` parameter is required for grouped and stacked bar charts!");const i=this.xS.find(s=>s.category===t&&(e===void 0||e===s.subCategory));if(!i)throw new Error(`BarChart.getBar() no such bar: "${t}" ${e?`"${e}"`:""}`);return i}getBars(){return this.xS}setSorting(t){return this.kB=t,this.UB(this.xS),this.us.Ss(),this}getSorting(){return this.kB}setAnimationCategoryPosition(t,e=1){return this.LB=t?{speed:e}:void 0,this.us.Ss(),this}setAnimationValues(t,e=1){return this._y=t?{speed:e}:void 0,this.us.Ss(),this}translateCoordinate(t,e,i){if(i&&Bv(t)&&Cn(e))return super.translateCoordinate(t,e,i);const s=e;let n;if(Fp(t))n=this.us.Po(t);else if(Bv(t)){const a=gt(t,this.pixelScale,this.us.dt);n={engineX:a.x,engineY:a.y}}else{if(!mF(t))throw new Error("LightningChart JS BarChart.translateCoordinate unexpected error. Input coordinate system not recognized.");{const a=gt(this.Ts.toPoint(t.iCategory,t.value),this.gB,this.us.dt);n={engineX:a.x,engineY:a.y}}}if(al(s))return this.us.Do(n);if(s==="barChart"){const a=gt({x:n.engineX,y:n.engineY},this.us.dt,this.gB);return{iCategory:this.Ts.getWidth(a),value:this.Ts.getHeight(a)}}if(Cn(s))return gt({x:n.engineX,y:n.engineY},this.us.dt,this.pixelScale);throw new Error("LightningChart JS BarChart.translateCoordinate unexpected error. Target coordinate system not recognized.")}Zd(){if(this.PB==="columns")return this.xS;const t=rh($y(this.xS.map(e=>e.subCategory)));return $y(t.map(e=>{const i=this.xS.filter(n=>n.subCategory===e),s=i[0];if(s)return(n=>{let a=!1;n.forEach(o=>o.onHighlight((l,u)=>{a||(a=!0,n.forEach(d=>o!==d?d.setHighlight(u):void 0),a=!1)})),n.forEach(o=>o.onDispose(()=>{const l=n.indexOf(o);l>=0&&n.splice(l,1)}))})(i),{attach(n,a){return FM(n,i,{toggleVisibilityOnClick:!0,label:e,style:s.getFillStyle()}),this}}}))}Te(t){var e,i;super.Te(t);const s=this.NB.fp(),n=this.GB.fp(),a=this.xS.filter(A=>A.getVisible()&&A._B),o=rh(a.map(A=>A.category)),l=rh($y(a.map(A=>A.subCategory))),u=5e-4*t*(((e=this.LB)===null||e===void 0?void 0:e.speed)||0),d=.003*t*(((i=this.LB)===null||i===void 0?void 0:i.speed)||0),f=this.valueAxis.dt,y=f instanceof Ks?(A,R)=>{var w;return fc(A,R,f,((w=this._y)===null||w===void 0?void 0:w.speed)||0)}:(A,R)=>{var w;return If(A,R,f,((w=this._y)===null||w===void 0?void 0:w.speed)||0)};let m;this.PB==="columns"?m=a.map(A=>({bar:A,position:{category:o.indexOf(A.category),valueStart:this.bB?1e-6:0,valueEnd:A.value}})):this.PB==="groups"?m=a.map(A=>{const R=o.indexOf(A.category),w=l.indexOf(A.subCategory),C=1/(l.length+2*(l.length+1)*this.RB),k=this.RB*C;return{bar:A,position:{category:R+(w-(l.length-1)/2)*(C+k),valueStart:this.bB?1e-6:0,valueEnd:A.value}}}):(m=[],o.forEach((A,R)=>{const w=a.filter(k=>k.category===A);let C=this.bB?1e-6:0;w.forEach((k,_)=>{m.push({bar:k,position:{category:o.indexOf(A),valueStart:C,valueEnd:C+k.value}}),C+=k.value})})),m.forEach(A=>{const{bar:R,position:w}=A;let C,k,_=this.BB.get(R);_===void 0&&(_=w);const X=w.valueStart;if(this.LB&&_.category!==w.category){const N=Math.sign(w.category-_.category);C=_.category+u*N+d*(w.category-_.category),N!==Math.sign(w.category-C)&&(C=w.category)}else C=w.category;if(this._y&&_.valueEnd!==w.valueEnd){const N=Math.sign(w.valueEnd-_.valueEnd);k=y(_.valueEnd,w.valueEnd),N!==Math.sign(w.valueEnd-k)&&(k=w.valueEnd)}else k=w.valueEnd;this.BB.set(R,{category:C,valueStart:X,valueEnd:k}),C===w.category&&k===w.valueEnd||this.us.Ss(!0),C===_.category&&k===_.valueEnd||(this.FB=!0)}),is.Fm(this._m,this.bm);const S=a.length>0;this.categoryAxis.Mr(),this.valueAxis.Mr();const x=this.categoryAxis.setVisible(S).Ps(),v=this.valueAxis.setVisible(S).Ps(n),{labelMarginBeforeCategoryAxisPixels:b}=S?this.YB(o,a,s,n):{labelMarginBeforeCategoryAxisPixels:0};this.categoryAxis.Te(x,s,n,{labelMarginBeforeCategoryAxisPixels:b}),this.valueAxis.Te(v);const E=this.categoryAxis.getThickness(),T=Jt(x.Vd+b,E.min!==void 0?E.min:0,E.max!==void 0?E.max:bt),V={x:Math.min(this.gB.x.getInnerStart(),this.gB.x.getInnerEnd()),y:Math.min(this.gB.y.getInnerStart(),this.gB.y.getInnerEnd())},F=Math.max(this.gB.x.getInnerStart(),this.gB.x.getInnerEnd()),B=Math.max(this.gB.y.getInnerStart(),this.gB.y.getInnerEnd()),z={x:F-V.x,y:B-V.y};this.FS.Fe(V),this.FS.q(z),this.IS.Fe(V),this.IS.q(z),super.pm(),hs.Im(this,this.FS.getIsUnderMouse(),!1,this.xS,void 0,(A,R)=>A.Hc(R,!0));const L=is.Tm(this._m,this.bm);if(this.gB.zi([this.Xt.bottom+this.ya.bottom+(this.Ts.VB==="vertical"?T:0),this.Xt.top+this.ya.top+L+(this.Ts.VB==="horizontal"?v.Vd:0)]),this.gB.Ei([this.Xt.left+this.ya.left+this.Ts.getHeight({x:T,y:v.Vd}),this.Xt.right+this.ya.right]),this.EB.qv({x:this.gB.x.ei(),y:this.gB.y.ei(),width:this.gB.x.ri(),height:this.gB.y.ri()}),this.Zg&&this.Zg(),this.FB){const A=this.M_.fp(),R=this.PB==="groups"?1/(l.length+2*(l.length+1)*this.RB):1-2*this.RB;a.forEach(w=>{const C=this.BB.get(w);if(C===void 0)return;const k=C.category-.5*R,_=C.category+.5*R,X=[this.Ts.toPoint(k,C.valueStart),this.Ts.toPoint(k,C.valueEnd),this.Ts.toPoint(_,C.valueEnd),this.Ts.toPoint(_,C.valueStart)];A.add({No:w.No,vertices:X,bar:w},{fillStyle:w.be,strokeStyle:w.xe})}),A.finishPlot()}s.finishPlot(),n.finishPlot(),this.FB=!1}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationCategoryPosition(t),this.setAnimationValues(t),this.valueAxis.setAnimationsEnabled(t),this.categoryAxis.setAnimationsEnabled(t),this}solveNearest(t){}dispose(){return this.zB.W(),this.EB.W(),this.Pm.dispose(),this.jy.W(),super.dispose()}UB(t){const e=this.kB;e&&t.sort((i,s)=>e({category:i.category,value:t.reduce((n,a)=>n+(a.category===i.category&&a.value||0),0)},{category:s.category,value:t.reduce((n,a)=>n+(a.category===s.category&&a.value||0),0)}))}YB(t,e,i,s){let n=0;const a=this.TB,o=this.SB,l=this.valueAxis.getInterval(),u=this.Ts.getWidth({x:this.gB.x.ri(),y:this.gB.y.ri()});if(a&&a.labelFillStyle!==Ft){const d=a.tickLength+a.labelMargin,f=this.Ts.toPoint(0,1),y={kd:t.map((S,x)=>{const v=e.reduce((T,V)=>V.category!==S?T:T+V.value,0),b=a.formatter(S,v);if(!b)return;const E=x;return E!==void 0?{text:b,position:this.Ts.toPoint(E,this.valueAxis.dt.mi(l.start,-d)),alignment:f,rotation:a.labelRotation,sizePixels:this.HB(S,v)}:void 0}),Nu:a.labelFont,dt:this.gB},m=y?this.DB?zb(y,u,this.Ts.getWidth):y.kd:[];m.forEach(S=>{S&&i.add().Rh(S.text).Fe(S.position).Ea(S.alignment).Nh(S.rotation).Ce(a.labelFillStyle).Oh(a.labelFont)}),a.tickStyle!==At&&a.tickLength!==0&&m.forEach(S=>{if(!S)return;const x=this.Ts.getWidth(S.position);s.add({positions:[this.Ts.toPoint(x,this.valueAxis.dt.getInnerStart()),this.Ts.toPoint(x,this.valueAxis.dt.mi(l.start,-a.tickLength))]},{lineStyle:a.tickStyle})}),n=m.reduce((S,x)=>x?Math.max(S,this.Ts.getHeight(x.sizePixels)):S,0)+a.tickLength+a.labelMargin}if(o&&o.labelFillStyle!==Ft){let d;o.position==="after-bar"?d={kd:e.map((f,y)=>{const m=o.formatter(f,f.category,f.value);if(!m)return;const S=this.BB.get(f);return S!==void 0?{text:m,position:this.Ts.toPoint(S.category,this.valueAxis.dt.mi(S.valueEnd,o.labelMargin*Math.sign(S.valueEnd))),alignment:this.Ts.toPoint(0,-1*Math.sign(S.valueEnd)),rotation:o.labelRotation,sizePixels:this.$B(f)}:void 0}),Nu:o.labelFont,dt:this.gB}:o.position!=="inside-bar"&&o.position!=="inside-bar-start"&&o.position!=="inside-bar-centered"&&o.position!=="inside-bar-end"||(d={kd:e.map((f,y)=>{const m=o.formatter(f,f.category,f.value);if(!m)return;const S=this.BB.get(f);if(S===void 0)return;const x=this.pB==="bipolar"?Math.sign(S.valueEnd):this.pB==="negative"?-1:1,v=this.Ts.toPoint(0,o.position==="inside-bar"||o.position==="inside-bar-end"?1*x:o.position==="inside-bar-centered"?0:-1*x);return{text:m,position:this.Ts.toPoint(S.category,o.position==="inside-bar"||o.position==="inside-bar-end"?this.valueAxis.dt.mi(S.valueEnd,-o.labelMargin*x):o.position==="inside-bar-centered"?(S.valueStart+S.valueEnd)/2:this.valueAxis.dt.mi(S.valueStart,o.labelMargin*x)),alignment:v,rotation:o.labelRotation,sizePixels:this.$B(f)}}),Nu:o.labelFont,dt:this.gB}),d&&(d?this.DB?zb(d,u,this.Ts.getWidth):d.kd:[]).forEach(f=>{f&&i.add().Rh(f.text).Fe(f.position).Ea(f.alignment).Nh(f.rotation).Ce(o.labelFillStyle).Oh(o.labelFont).setMouseInteractions(!1)})}return{labelMarginBeforeCategoryAxisPixels:n}}HB(t,e){if(!this.TB||this.TB.labelFillStyle===Ft)return{x:0,y:0};const i=this.IB.get(t);if(i)return i;const s=this.TB.formatter(t,e),n=this.us.Ig.Fg(s,this.TB.labelFont,this.TB.labelRotation);return n.isEstimate?this.us.Ss(!0):this.IB.set(t,n),n}$B(t){if(!this.SB||this.SB.labelFillStyle===Ft)return{x:0,y:0};const e=this.CB.get(t);if(e)return e;const i=this.us.Ig.Fg(this.SB.formatter(t,t.category,t.value),this.SB.labelFont,this.SB.labelRotation);return i.isEstimate?this.us.Ss(!0):this.CB.set(t,i),i}vB(){return this.xS.reduce((t,e)=>{const i=this.$B(e);return{x:Math.max(t.x,i.x),y:Math.max(t.y,i.y)}},{x:0,y:0})}wB(){this.FB=!0,this.us.Ss()}getMinimumSize(){return{x:200,y:200}}}const pF={Descending:(r,t)=>t.value-r.value},SF={...Uf,VB:"vertical",xB:-1,MB:1},xF={...Gp,VB:"horizontal",xB:1,MB:-1},pf=(r,t)=>t?r.x:r.y,AF=(r,t,e,i)=>t===1&&i===(e?r.columnIndex:r.rowIndex)||t===-1&&i===(e?r.columnIndex+r.columnSpan:r.rowIndex+r.rowSpan),_b=(r,t,e,i,s,n)=>{const a=t.length,o=Math.sign(i),l=[],u=t.reduce((S,x)=>S+x);for(let S=1;S<=a-1;S+=1)l.push(pf(s,n)*t.slice(0,S).reduce((x,v)=>x+v,0)/u);const d=l.map(S=>0);let f=l[e-1]+i;for(let S=e;S>0&&S<a;S+=o){const x=r.filter(b=>AF(b,o,n,S)).reduce((b,E)=>Math.max(b,pf(E.panel.getMinimumSize()||{x:0,y:0},n)),20),v=l[S-1];if(o===1&&f>pf(s,n)-x||o===-1&&f<0+x){d.fill(0);break}if(S!==e&&(o===1?v>f:v<f))break;d[S-1]=f-v,f+=x*o}const y=d.map((S,x)=>l[x]+S),m=y.map((S,x)=>(S-(x>0?y[x-1]:0))/pf(s,n));return m.push(1-m.reduce((S,x)=>S+x,0)),m};class tE{constructor(t,e,i,s,n){this.coordsRelative="relative",this.coordsClient="client",this.$i=!1,this.RP=new Array,this.D=new Li,this.XB=[],this.$g=[],this.jB=void 0,this.ZB=!0,this.QB=!0,this.JB=!0,this.Qg=!1,this.KB=!0,this.qB=()=>{this.KB=!0,this.us.Ss()},this.tL=[],this.onInViewChange=f=>this.D.on("inViewChange",f),this.offInViewChange=f=>this.D.off(f,"inViewChange"),this.iL=f=>{for(let y=0;y<this.RP.length;y+=1)if(this.RP[y].panel===f){this.RP.splice(y,1),this.ZB=!0,this.us.Ss();break}},this.sL=f=>{const y=this.XB.indexOf(f);y>=0&&this.XB.splice(y,1)},this.im=f=>{const y=this.$g.indexOf(f);y>=0&&this.$g.splice(y,1)},this.eL=(f,y,m,S,x)=>{if(this.hL(y,m,S,x)){const v={panel:f,columnIndex:y,rowIndex:m,columnSpan:S,rowSpan:x};return this.RP.push(v),this.rL(v),this.ZB=!0,f}throw new Qu("Out of dashboard range.")},this.nL=e.numberOfRows,this.oL=e.numberOfColumns,this.cA=t,this.aL=e,this.lL=s;const a=this.oL*this.nL;this.uL={x:new Tb(new Array(this.oL).fill(1)),y:new Tb(new Array(this.nL).fill(1))},this.qi=i.qi,this.cL=this.qi.dashboardSplitterStyle,this.th=(e==null?void 0:e.disableAnimations)!==!0&&(e==null?void 0:e.animationsEnabled)!==!1,this.dL=ar(i,a),this.fL=i.FI("dashboard splitters",500001),this.OM=()=>this.dL.TI(),this.am=this.dL.II(),this.es=i.es.hs(this,{AL:{}}),this.es.AL.ps(this.qi.effectsDashboardSplitters);const o=i.oi();this.uiScale=cs.d2({scaleXYConstructor:Se}).Vi(0,100).Oi(0,100).q(o),this.pixelScale=cs.d2({scaleXYConstructor:Se}).Vi(0,this.uiScale.x.getCellSize()).Oi(0,this.uiScale.y.getCellSize()).q(o),this.gL=i.mL.bind(i),this.yL=i.pL.bind(i),this.SL=i.vL.bind(i),this.bL=i.xL.bind(i),this.eo=i.eo.bind(i),this.ro=i.ro.bind(i),this.engine=i.hm,this.us=i.rm,i.Co(()=>this.qB()),i.Ss();const l=i.Fo(f=>{this.Qg=f,this.D.emit("inViewChange",this,f)});this.Am=i.Io.bind(i,l),this.ML(),this.setAnimationsEnabled(this.th);const u={on:(d=this.D).on.bind(d,"resize"),off:d.off.bind(d)};var d;this.createChartXY=f=>{const y=yr(f,this.aL,this.th);return this.eL(new tS(this.cA,this.dL.DI(this._L(f.columnIndex,f.rowIndex)),this.wL(y,this.uL),this.iL,n,y,u),y.columnIndex,y.rowIndex,y.columnSpan,y.rowSpan)},this.createSpiderChart=f=>{const y=yr(f,this.aL,this.th);return this.eL(new $R(this.cA,this.dL.DI(this._L(f.columnIndex,f.rowIndex)),this.wL(y,this.uL),this.iL,n,y,u),y.columnIndex,y.rowIndex,y.columnSpan,y.rowSpan)},this.createPolarChart=f=>{const y=yr(f,this.aL,this.th);return this.eL(new XR(this.cA,this.dL.DI(this._L(f.columnIndex,f.rowIndex)),this.wL(y,this.uL),this.iL,n,y,u),y.columnIndex,y.rowIndex,y.columnSpan,y.rowSpan)},this.createPieChart=f=>{const y=yr(f,this.aL,this.th),m=y&&y.type?y.type:CR;return this.eL(new m(this.cA,this.dL.DI(this._L(f.columnIndex,f.rowIndex)),this.wL(y,this.uL),this.iL,n,u,y),y.columnIndex,y.rowIndex,y.columnSpan,y.rowSpan)},this.createGaugeChart=f=>{const y=yr(f,this.aL,this.th),m=y&&y.type?y.type:qR;return this.eL(new m(this.cA,this.dL.DI(this._L(f.columnIndex,f.rowIndex)),this.wL(y,this.uL),this.iL,n,u,y.disableAnimations),y.columnIndex,y.rowIndex,y.columnSpan,y.rowSpan)},this.createFunnelChart=f=>{const y=yr(f,this.aL,this.th),m=y&&y.type?y.type:WR;return this.eL(new m(this.cA,this.dL.DI(this._L(f.columnIndex,f.rowIndex)),this.wL(y,this.uL),this.iL,n,u,y),y.columnIndex,y.rowIndex,y.columnSpan,y.rowSpan)},this.createPyramidChart=f=>{const y=yr(f,this.aL,this.th),m=f&&f.type?f.type:jR;return this.eL(new m(this.cA,this.dL.DI(this._L(f.columnIndex,f.rowIndex)),this.wL(y,this.uL),this.iL,n,u,y),y.columnIndex,y.rowIndex,y.columnSpan,y.rowSpan)},this.createUIPanel=f=>{const y=yr(f,this.aL,this.th);return this.eL(new Yp(this.cA,this.dL.DI(this._L(f.columnIndex,f.rowIndex)),this.wL(y,this.uL),this.iL,n,u),y.columnIndex,y.rowIndex,y.columnSpan,y.rowSpan)},this.createLegendBoxPanel=f=>{const y=yr(f,this.aL,this.th);return this.eL(new E3(this.cA,this.dL.DI(this._L(f.columnIndex,f.rowIndex)),this.wL(y,this.uL),this.iL,n,u),y.columnIndex,y.rowIndex,y.columnSpan,y.rowSpan)},this.createZoomBandChart=f=>{const y=yr(f,this.aL,this.th);return this.eL(new HR(this.cA,this.dL.DI(this._L(f.columnIndex,f.rowIndex)),this.wL(y,this.uL),this.iL,n,y,u),y.columnIndex,y.rowIndex,y.columnSpan,y.rowSpan)},this.createMapChart=f=>{const y=yr(f,this.aL,this.th);return this.eL(new DR(this.cA,this.dL.DI(this._L(f.columnIndex,f.rowIndex)),this.wL(y,this.uL),this.iL,n,y,u),y.columnIndex,y.rowIndex,y.columnSpan,y.rowSpan)},this.createChart3D=f=>{const y=yr(f,this.aL,this.th),m=new Jp(this.cA,this.dL.DI(this._L(f.columnIndex,f.rowIndex)),this.wL(y,this.uL),this.iL,n,u,y);return this.eL(m,y.columnIndex,y.rowIndex,y.columnSpan,y.rowSpan)},this.createDataGrid=f=>{const y=yr(f,this.aL,this.th),m=new QR(this.cA,this.dL.DI(this._L(f.columnIndex,f.rowIndex)),this.wL(y,this.uL),this.iL,n,u);return this.eL(m,y.columnIndex,y.rowIndex,y.columnSpan,y.rowSpan)},this.createBarChart=f=>{const y=yr(f,this.aL,this.th),m=new KR(this.cA,this.dL.DI(this._L(f.columnIndex,f.rowIndex)),this.wL(y,this.uL),this.iL,n,u,y);return this.eL(m,y.columnIndex,y.rowIndex,y.columnSpan,y.rowSpan)}}_L(t,e){return t+e*this.oL}wL(t,e){return{d1:i=>new i.scale1DConstructor(i.dimension==="x"?t.columnIndex:t.rowIndex,i.dimension==="x"?t.columnSpan:t.rowSpan,i.dimension==="x"?this.oL:this.nL,i.dimension==="x"?e.x:e.y),d2:i=>new i.scaleXYConstructor().ot({x:t.columnIndex,y:t.rowIndex},{x:t.columnSpan,y:t.rowSpan},{x:this.oL,y:this.nL},e),d3:()=>new pM({x:t.columnIndex,y:t.rowIndex},{x:t.columnSpan,y:t.rowSpan},{x:this.oL,y:this.nL},e)}}setWidth(t){return t instanceof Array||(t=[t,t]),this.gL(t[0]),this.yL(t[1]),this}setHeight(t){return t instanceof Array||(t=[t,t]),this.SL(t[0]),this.bL(t[1]),this}getWidth(){return this.eo()}getHeight(){return this.ro()}setBackgroundFillStyle(t){return this.engine.setBackgroundFillStyle(t),this.fL.Ss(),this}getBackgroundFillStyle(){return this.engine.getBackgroundFillStyle()}setBackgroundStrokeStyle(t){return this.engine.setBackgroundStrokeStyle(t),this.fL.Ss(),this}getBackgroundStrokeStyle(){return this.engine.getBackgroundStrokeStyle()}getTheme(){return this.qi}setSplitterStyle(t){const e=this.cL;return this.cL=typeof t=="function"?t(this.cL):t,this.CL(e),this}getSplitterStyle(){return this.cL}setSplitterEffect(t){return this.es.AL.ps(t),this.us.Ss(),this}getSplitterEffect(){return this.es.AL.vs()}setAnimationHighlight(t){return this.JB=t,this.tL.forEach(e=>this.us.ls._s(e.line,t)),this}getAnimationHighlight(){return this.JB}CL(t){for(const e of this.tL)e.line.Re(this.cL);this.ML()}setColumnWidth(t,e){const i=this.uL.x.M();return t>=0&&t<i.length&&(i[t]=e,this.uL.x.S(i)),this.qB(),this}getColumnWidth(t){const e=this.uL.x.M();if(t>=e.length)throw new Qu("Column index is out of dashboard range.");return e[t]}setRowHeight(t,e){const i=this.uL.y.M();return t>=0&&t<i.length&&(i[Math.abs(i.length-1-t)]=e,this.uL.y.S(i)),this.qB(),this}getRowHeight(t){const e=this.uL.y.M();if(t>=e.length)throw new Qu("Row index is out of dashboard range.");return e[Math.abs(e.length-1-t)]}getSizePixels(){return this.pixelScale.getInnerIntervalPixels()}onResize(t){return this.D.on("resize",t)}offResize(t){return this.D.off(t,"resize")}kL(t,e,i){if(i&&Math.abs(t.x)>0)this.TL(e,t.x);else{if(i||!(Math.abs(t.y)>0))return;this.FL(e,t.y)}for(const s of this.RP)s.panel.Z();this.qB()}FL(t,e){const i=_b(this.RP,this.uL.y.M(),t,e,this.pixelScale.oi(),!1);this.uL.y.S(i),this.qB()}TL(t,e){const i=_b(this.RP,this.uL.x.M(),t,e,this.pixelScale.oi(),!0);this.uL.x.S(i),this.qB()}IL(){this.tL.forEach(t=>t.line.dispose()),this.tL.length=0;for(let t=1;t<=this.oL-1;t+=1)for(let e=0;e<=this.nL-1;e+=1)if(this.RP.find(i=>Xn(e,i.rowIndex,i.rowIndex+i.rowSpan-1)&&(t===i.columnIndex||t===i.columnIndex+i.columnSpan))!==void 0){const i=Ls(new Er(()=>{this.PL(t)},(n,a,o,l,u)=>{this.kL(l,t,!0),xt(u)},()=>{this.DL(t)})),s=this.fL.Ee(this.pixelScale).Re(this.cL).setMouseEnterEventHandler(()=>{this.PL(t)}).setMouseLeaveEventHandler(()=>{this.DL(t)}).setMouseDragEventHandler((n,a,o,l,u)=>{this.kL(u,t,!0),xt(a)}).setTouchStartEventHandler(i.onTouchStart).setTouchMoveEventHandler(i.onTouchMove).setTouchEndEventHandler(i.onTouchEnd);this.us.ls.os(s,n=>s.cs(n),{animationEnabled:this.JB}),this.tL.push({row:e,column:t,line:s,alignment:"vertical"})}for(let t=1;t<=this.nL-1;t+=1)for(let e=0;e<=this.oL-1;e+=1)if(this.RP.find(i=>Xn(e,i.columnIndex,i.columnIndex+i.columnSpan-1)&&(t===i.rowIndex||t===i.rowIndex+i.rowSpan))!==void 0){const i=Ls(new Er(()=>{this.BL(t)},(n,a,o,l,u)=>{this.kL(l,t,!1),xt(u)},()=>{this.LL(t)})),s=this.fL.Ee(this.pixelScale).Re(this.cL).setMouseEnterEventHandler(()=>{this.BL(t)}).setMouseLeaveEventHandler(()=>{this.LL(t)}).setMouseDragEventHandler((n,a,o,l,u)=>{this.kL(u,t,!1),xt(a)}).setTouchStartEventHandler(i.onTouchStart).setTouchMoveEventHandler(i.onTouchMove).setTouchEndEventHandler(i.onTouchEnd);this.us.ls.os(s,n=>s.cs(n),{animationEnabled:this.JB}),this.tL.push({row:t,column:e,line:s,alignment:"horizontal"})}this.es.AL.fs(this.tL.map(t=>t.line))}RL(){const t=this.pixelScale.oi(),e=this.uL.x.M(),i=e.reduce((a,o)=>a+o),s=this.uL.y.M(),n=s.reduce((a,o)=>a+o);this.tL.forEach(a=>{if(a.alignment==="vertical"){const o=Y(t.x*e.slice(0,a.column).reduce((u,d)=>u+d,0)/i,t.y*s.slice(0,a.row).reduce((u,d)=>u+d,0)/n),l=Y(o.x,t.y*s.slice(0,a.row+1).reduce((u,d)=>u+d,0)/n);a.line.Ve(o).ze(l)}else{const o=Y(t.x*e.slice(0,a.column).reduce((u,d)=>u+d,0)/i,t.y*s.slice(0,a.row).reduce((u,d)=>u+d,0)/n),l=Y(t.x*e.slice(0,a.column+1).reduce((u,d)=>u+d,0)/i,o.y);a.line.Ve(o).ze(l)}})}PL(t){this.tL.forEach(e=>{e.alignment==="vertical"&&e.column===t&&(this.us.ls.Ms(e.line,1),this.fL.EL(e.line))}),this.jB=this.engine.setMouseStyle(ne.ResizeColumn),this.us.Ss()}BL(t){this.tL.forEach(e=>{e.alignment==="horizontal"&&e.row===t&&(this.us.ls.Ms(e.line,1),this.fL.EL(e.line))}),this.jB=this.engine.setMouseStyle(ne.ResizeRow),this.us.Ss()}DL(t){this.tL.forEach(e=>{e.alignment==="vertical"&&e.column===t&&this.us.ls.Ms(e.line,0)}),this.engine.restoreMouseStyle(this.jB),this.us.Ss()}LL(t){this.tL.forEach(e=>{e.alignment==="horizontal"&&e.row===t&&this.us.ls.Ms(e.line,0)}),this.engine.restoreMouseStyle(this.jB),this.us.Ss()}setAnimationsEnabled(t){return this.th=t,this.getCells().filter(e=>e.panel instanceof Jr).forEach(e=>e.panel.setAnimationsEnabled(t)),this.setAnimationHighlight(this.th),this}getAnimationsEnabled(){return this.th}getCells(){return this.RP.slice()}dispose(){return this.$i||(this.Am&&this.Am(),this.RP.slice().forEach(t=>t.panel.dispose()),this.XB.slice().forEach(t=>t.dispose()),this.$g.slice().forEach(t=>t.dispose()),this.$i=!0,this.lL(),this.D.emit("dispose",this)),this}isDisposed(){return this.$i}onDispose(t){return this.D.on("dispose",t)}offDispose(t){return this.D.off(t,"dispose")}getIsInView(){return this.Qg}saveToFile(t,e,i){return pR(this.engine,t,e,i),this}zL(t){if(this.KB){const e=this.us.dt.oi(),i=e.x,s=e.y;this.uiScale.q(i,s),this.pixelScale.q(i,s);const n=this.uiScale.getInnerIntervalPixels();this.pixelScale.Vi(0,n.x).Oi(0,n.y),this.D.emit("resize",this,n.x,n.y,i,s),this.QB=!0}this.ZB&&(this.IL(),this.ZB=!1,this.QB=!0),this.QB&&(this.RL(),this.QB=!1);for(const e of this.RP)e.panel.Te(t);return this.XB.forEach(e=>e.Ps()),this.XB.forEach(e=>e.Te()),this.$g.forEach(e=>e.Ps()),this.$g.forEach(e=>e.Te()),this.KB=!1,this}j(){for(const t of this.RP)t.panel.j();return this.pixelScale.x.j(),this.pixelScale.y.j(),this.uiScale.x.j(),this.uiScale.y.j(),this}Z(){for(const t of this.RP)t.panel.Z();return this.pixelScale.x.Z(),this.pixelScale.y.Z(),this.uiScale.x.Z(),this.uiScale.y.Z(),this}translateCoordinate(t,e,i){return b0(t,e,i,this.pixelScale,this.us)}addUIElement(t=Op,e=this.uiScale){e=Yf(e,this.pixelScale);const i=Gf(t,this.OM(),this.uiScale,e,this.sL,this.qi);return this.XB.push(i),i}addLegendBox(t=A0,e=this.uiScale){e=Yf(e,this.pixelScale);const i=Gf(t,this.am,this.uiScale,e,this.im,this.qi);return i.setDraggingMode(ke.notDraggable),this.$g.push(i),i}getLegendBoxes(){return this.$g}hL(t,e,i,s){return e>=0&&t>=0&&e+s<=this.nL&&t+i<=this.oL}rL(t){const e=this.cL,i=e===At?0:e.getThickness()/2,s={left:t.columnIndex>0?i:0,top:t.rowIndex<this.nL-1?i:0,right:t.columnIndex<this.oL-1?i:0,bottom:t.rowIndex>0?i:0};t.panel.Fr(s)}ML(){this.uiScale.x.si([0,0]),this.uiScale.y.si([0,0]),this.pixelScale.x.si([0,0]),this.pixelScale.y.si([0,0]);for(const t of this.RP)this.rL(t);this.us.Ss()}}const yr=(r,t,e)=>{const i={...r,columnSpan:r.columnSpan||1,rowSpan:r.rowSpan||1,animationsEnabled:r.disableAnimations!==void 0?!r.disableAnimations:r.animationsEnabled!==void 0?r.animationsEnabled:e};var s,n;return i.rowIndex=(s=i.rowIndex,n=i.rowSpan,t.numberOfRows-(s+n)),i},jf=(r,t)=>Math.abs(r)+Math.abs(t);function Nb(r,t){const e=r.reduce(jf,0),i=(s=r,Math.max(...s.map(a=>a)));var s;const n=(a=>Math.min(...a.map(o=>o)))(r);return Math.max(t**2*i/e**2,e**2/(t**2*n))}const wf=({height:r,width:t})=>r>t?{value:t,vertical:!1}:{value:r,vertical:!0},Bb=({data:r,dimensions:t})=>{const{x:e,y:i,width:s,height:n}=t;r.map(y=>y.value).reduce(jf,0);const a=r.map(y=>y.animatedValue).reduce(jf,0),o=r.map(y=>y.animatedValue*n*s/a),l=o.reduce((y,m)=>y+m,0),u=o.map(y=>y/l*100),d=o.filter((y,m)=>u[m]),f={children:[],x:e,y:i,width:s,height:n};if(r.length===1){const y={...r[0],x:t.x,y:t.y,width:t.width,height:t.height};f.children.push(y)}else vF(d,wf(f).value,r,f);return f.children},Lb=(r,t,e,i,s)=>{const n=r.reduce(jf,0)/t;r.forEach((a,o)=>{const l=Math.abs(a)/n,{x:u,y:d,children:f}=s,y={...i[f.length],x:u,y:d,width:e?n:l,height:e?l:n};e?s.y+=l:s.x+=l,f.push(y)}),e?(s.x+=n,s.y-=t,s.width-=n):(s.x-=t,s.y+=n,s.height-=n)},vF=(r,t,e,i)=>{const s=[{children:r,width:t,row:[]}];for(;s.length>0;){const n=s.pop();if(!n)continue;const{children:a,width:o,row:l}=n;let u=0;const d=[...l];for(;u<a.length;){const f=[...d,a[u]],y=Nb(d,o),m=Nb(f,o);if(!(d.length===0||y>m)){Lb(d,o,wf(i).vertical,e,i),s.push({children:a.slice(u),width:wf(i).value,row:[]});break}d.push(a[u]),u+=1}u===a.length&&Lb(d,o,wf(i).vertical,e,i)}};class bF extends Jr{constructor(t,e,i,s,n,a,o){if(super(t,e,i,e.vm("treeMapChart bg",0),s,e.us.qi.treeMapChartBackgroundFillStyle||e.us.qi.chartXYSeriesBackgroundFillStyle,e.us.qi.treeMapChartBackgroundStrokeStyle||e.us.qi.chartXYBackgroundStrokeStyle,e.us.qi.treeMapChartTitleFont||e.us.qi.chartXYTitleFont,e.us.qi.treeMapChartTitleFillStyle||e.us.qi.chartXYTitleFillStyle,o),this.VL=new Map,this.OL=[],this.NL={},this.GL=Xt([]),this._y={speed:1},this.WL=bt,this.UL=!0,this.YL="Go Back",this.HL=[],this.$L=this.qi.treeMapChartPathLabelFillStyle||this.qi.uiTextFillStyle,this.XL=this.qi.treeMapChartPathLabelFont||this.qi.uiTextFont,this.jL=this.qi.treeMapChartLabelHeaderFillStyle||this.qi.uiTextFillStyle,this.ZL=this.qi.treeMapChartLabelHeaderFont||this.qi.uiTextFont,this.QL=this.qi.treeMapChartLabelFillStyle||this.qi.uiTextFillStyle,this.JL=this.qi.treeMapChartLabelFont||this.qi.uiTextFont,this.Yi=!0,this.bb=We.onHover,this.Wy=MF,this.Mb=!0,this.KL=!1,this.qL=this.qi.treeMapChartParentColor||$e,this.tR=this.qi.treeMapChartNodeStrokeStyle||this.qi.uiBackgroundStrokeStyle,this.onNodeMouseEnter=u=>this.D.on("mouseEnter",u),this.onNodeMouseLeave=u=>this.D.on("mouseLeave",u),this.onNodeMouseClick=u=>this.D.on("mouseClick",u),this.onNodeMouseDoubleClick=u=>this.D.on("mouseDoubleClick",u),this.onNodeMouseDown=u=>this.D.on("mouseDown",u),this.onNodeMouseUp=u=>this.D.on("mouseUp",u),this.onNodeMouseMove=u=>this.D.on("mouseMove",u),this.offNodeMouseEnter=u=>this.D.off(u,"mouseEnter"),this.offNodeMouseLeave=u=>this.D.off(u,"mouseLeave"),this.offNodeMouseClick=u=>this.D.off(u,"mouseClick"),this.offNodeMouseDoubleClick=u=>this.D.off(u,"mouseDoubleClick"),this.offNodeMouseDown=u=>this.D.off(u,"mouseDown"),this.offNodeMouseUp=u=>this.D.off(u,"mouseUp"),this.offNodeMouseMove=u=>this.D.off(u,"mouseMove"),this.offNodeMouseDragStart=u=>this.D.off(u,"mouseDragStart"),this.offNodeMouseDrag=u=>this.D.off(u,"mouseDrag"),this.offNodeMouseDragStop=u=>this.D.off(u,"mouseDragStop"),this.offNodeMouseWheel=u=>this.D.off(u,"mouseWheel"),this.Cb=(u,d,f,y,m)=>{this.us.Ss(),this.KL=!0},this.wt=(u,d)=>{const f=this.iR(d);f&&(this.bb!==We.disabled&&(this.Hb=f,xt(u)),this.Mb&&this.us.ls.Ms(d,!0),this.UL&&this.engine.setMouseStyle(ne.Point),this.D.emit("mouseEnter",this,u,f.userNode),this.us.Ss())},this.Ct=(u,d)=>{const f=this.iR(d);f&&(this.bb!==We.disabled&&(this.Hb=void 0,u&&xt(u)),this.Mb&&this.us.ls.Ms(d,!1),this.engine.setMouseStyle(ne.Default),this.D.emit("mouseLeave",this,u,f.userNode),this.us.Ss())},this.Pt=(u,d)=>{const f=this.iR(d);f&&(this.bb!==We.disabled&&(this.Hb=f,xt(u)),this.Mb&&this.us.ls.Ms(d,!0),this.UL&&this.engine.setMouseStyle(ne.Point),this.D.emit("mouseEnter",this,u,f.userNode),this.us.Ss())},this.kt=(u,d)=>{const f=this.iR(d);if(f){if(this.UL){const y=f!=null&&f.children.length?f:f.parentID?this.NL[f.parentID]:void 0;y&&(this.GL.S([y]),this.Hb=void 0,this.D.emit("viewChange",this.GL.M()),this.KL=!0),u&&xt(u)}this.D.emit("mouseClick",this,u,f.userNode),this.us.Ss()}},this.Tt=(u,d)=>{var f;const y=(f=this.VL.get(d))===null||f===void 0?void 0:f.userNode;this.D.emit("mouseDoubleClick",this,u,y)},this.Ft=(u,d)=>{var f;const y=(f=this.VL.get(d))===null||f===void 0?void 0:f.userNode;this.D.emit("mouseDown",this,u,y)},this.It=(u,d)=>{var f;const y=(f=this.VL.get(d))===null||f===void 0?void 0:f.userNode;this.D.emit("mouseUp",this,u,y)},this.Bt=(u,d,f)=>{var y;const m=(y=this.VL.get(f))===null||y===void 0?void 0:y.userNode;this.D.emit("mouseDragStart",this,u,d,m)},this.Dt=(u,d,f,y,m)=>{var S;const x=(S=this.VL.get(m))===null||S===void 0?void 0:S.userNode;this.D.emit("mouseDrag",this,u,d,f,y,x)},this.Lt=(u,d,f,y)=>{var m;const S=(m=this.VL.get(y))===null||m===void 0?void 0:m.userNode;this.D.emit("mouseDragStop",this,u,d,f,S)},this.Rt=(u,d)=>{var f;const y=(f=this.VL.get(d))===null||f===void 0?void 0:f.userNode;this.D.emit("mouseWheel",this,u,y)},this.Et=(u,d)=>{const f=this.iR(d);f&&(this.bb!==We.disabled&&(this.Hb=f),this.Mb&&this.us.ls.Ms(d,!0),this.D.emit("touchStart",this,u,f.userNode),this.us.Ss(),xt(u))},this.zt=(u,d)=>{const f=this.iR(d);f&&(this.bb!==We.disabled&&(this.Hb=f),this.Mb&&this.us.ls.Ms(d,!0),this.D.emit("touchMove",this,u,f.userNode),this.us.Ss(),xt(u))},this.Vt=(u,d)=>{const f=this.iR(d);if(f){if(this.bb!==We.disabled&&(this.Hb=void 0),this.UL){const y=f!=null&&f.children.length?f:f.parentID?this.NL[f.parentID]:void 0;y&&(this.GL.S([y]),this.D.emit("viewChange",this.GL.M()),this.KL=!0),u&&xt(u)}this.Mb&&this.us.ls.Ms(d,!1),this.D.emit("touchEnd",this,u,f.userNode),this.us.Ss(),xt(u)}},this.sR=u=>{const d=this.NL[this.HL[u].id]?[this.NL[this.HL[u].id]]:this.OL;this.GL.S(d),this.D.emit("viewChange",d),this.KL=!0,this.us.Ss()},this.qi.treeMapChartNodeColors)this.eR=this.qi.treeMapChartNodeColors;else{const u=this.qi.pointSeriesFillStyle,d=f=>ue(f)?f.getColor():$e;this.eR=typeof u=="function"?new Array(5).fill(0).map((f,y)=>d(u(y))):[d(u)]}this.us.Nn(wt.Mf),this.Hy=e.ob("TreeMapChart plotting",0),this.Xy=e.ob("TreeMap UI plotting",1),this.onResize(this.Cb),this._m.Rh("TreeMap Chart");const l=De(void 0,wR);this.Eb=l.Ay(e.Zy(),this.pixelScale,this.pixelScale,this.qi).setVisible(!1),this.hR=this.es.yg(),this.Sm(n,this.uiScale),this.Vb=this.Hy.Ob(this.pixelScale).Ce(new Rv).we(this.tR),this.rR=this.us.ls.Er(this,{animationEnabled:(a==null?void 0:a.disableAnimations)!==!0&&(a==null?void 0:a.animationsEnabled)!==!1}),this.nR=new Gr(()=>this.Xy.Pr(this.pixelScale).setMouseInteractions(!1)),this.oR=new Gr(()=>this.Xy.Pr(this.uiScale)),this.Vb.setMouseInteractions(this.Yi).setMouseEnterEventHandler((u,d,f)=>this.wt(d,f)).setMouseLeaveEventHandler((u,d,f)=>this.Ct(d,f)).setMouseClickEventHandler((u,d,f)=>this.kt(d,f)).setMouseDoubleClickEventHandler((u,d,f)=>this.Tt(d,f)).setMouseDownEventHandler((u,d,f)=>this.Ft(d,f)).setMouseUpEventHandler((u,d,f)=>this.It(d,f)).setMouseMoveEventHandler((u,d,f)=>this.Pt(d,f)).setMouseDragStartEventHandler((u,d,f,y)=>this.Bt(d,f,y)).setMouseDragEventHandler((u,d,f,y,m,S)=>this.Dt(d,f,y,m,S)).setMouseDragStopEventHandler((u,d,f,y,m)=>this.Lt(d,f,y,m)).setMouseWheelEventHandler((u,d,f)=>this.Rt(d,f)).setTouchStartEventHandler((u,d,f)=>this.Et(d,f)).setTouchMoveEventHandler((u,d,f)=>this.zt(d,f)).setTouchEndEventHandler((u,d,f)=>this.Vt(d,f)),this.setAnimationsEnabled((a==null?void 0:a.disableAnimations)!==!0&&(a==null?void 0:a.animationsEnabled)!==!1)}setData(t){t=Array.isArray(t)?t.slice():[t];const{aR:e}=(()=>{let s=0;return{aR:n=>{var a;const o=n.map((f,y)=>({node:f,parent:null})),l=[];for(;o.length>0;){const f=o.pop();if(!f)continue;const{node:y,parent:m}=f;s+=1;const S={id:s,parentID:m==null?void 0:m.id,name:y.name,value:y.value||0,animatedValue:y.value||0,children:[],nodeIndex:m?m.nodeIndex:-1,userNode:y};m?m.children.push(S):l.push(S),(a=y.children)===null||a===void 0||a.forEach(x=>{o.push({node:x,parent:S})})}const u=f=>{f.children.forEach(u),f.children.length>0&&(f.value+=f.children.reduce((y,m)=>y+m.value,0),f.animatedValue+=f.children.reduce((y,m)=>y+m.animatedValue,0),f.children.sort((y,m)=>m.animatedValue-y.animatedValue))};l.forEach(u);const d=n.length===1?l[0].children:l;return d.sort((f,y)=>y.animatedValue-f.animatedValue),d.forEach((f,y)=>{f.nodeIndex=y;const m=S=>{S.children.forEach(x=>{x.nodeIndex=f.nodeIndex,m(x)})};m(f)}),l}}})(),i=e(t);return i.forEach(s=>{const n=this.NL[s.id];n&&this.lR(s,n)}),this.Hb=void 0,this.GL.S(i),this.OL=i,this.NL=this.uR(i),this.KL=!0,this.us.Ss(),this}setAnimationValues(t,e=1){return this._y=t?{speed:e}:void 0,this.us.Ss(),this}setInitPathButtonText(t){return this.YL=t,this.KL=!0,this.us.Ss(),this}setDisplayedLevelsCount(t){return this.WL=t,this.KL=!0,this.us.Ss(),this}setDrillDownEnabled(t){return this.UL=t,this.KL=!0,this.us.Ss(),this}setDrillDownNode(t){var e,i;if(this.Hb=void 0,t===void 0)this.GL.S(this.OL);else{const s=[...this.OL];for(;s.length>0;){const n=s.pop();if(n){if(n.value!==void 0&&n.userNode===t||n.parentID&&Array.isArray(t)&&((i=(e=this.NL[n.parentID])===null||e===void 0?void 0:e.userNode)===null||i===void 0?void 0:i.children)===t){const a=n.children.length?n:n.parentID?this.NL[n.parentID]:this.OL[0];this.GL.S([a]);break}if(n.children)for(let a=n.children.length-1;a>=0;a-=1)s.push(n.children[a])}}}return this.D.emit("viewChange",this.GL.M()),this.KL=!0,this.us.Ss(),this}setNodeColoring(t){return t instanceof Array?(this.Vb.Ce(new Rv),this.eR=t):this.Vb.Ce(t),this.KL=!0,this.us.Ss(),this}setParentNodeColor(t){return this.qL=t,this.KL=!0,this.us.Ss(),this}setPathLabelFillStyle(t){return this.$L=typeof t=="function"?t(this.$L):t,this.KL=!0,this.us.Ss(),this}getPathLabelFillStyle(){return this.$L}setPathLabelFont(t){return tc(t)?this.XL=t:this.XL=t(this.XL),this.KL=!0,this.us.Ss(),this}getPathLabelFont(){return this.XL}setHeaderFont(t){return tc(t)?this.ZL=t:this.ZL=t(this.ZL),this.KL=!0,this.us.Ss(),this}getHeaderFont(){return this.ZL}setHeaderFillStyle(t){return this.jL=typeof t=="function"?t(this.jL):t,this.KL=!0,this.us.Ss(),this}getHeaderFillStyle(){return this.jL}setLabelFont(t){return tc(t)?this.JL=t:this.JL=t(this.JL),this.KL=!0,this.us.Ss(),this}getLabelFont(){return this.JL}setLabelFillStyle(t){return this.QL=typeof t=="function"?t(this.QL):t,this.KL=!0,this.us.Ss(),this}getLabelFillStyle(){return this.QL}setNodeBorderStyle(t){return this.Vb.we(t),this.KL=!0,this.us.Ss(),this}getNodeBorderStyle(){return this.Vb.ao()}setNodeEffect(t){return this.hR.ps(t),this.us.Ss(),this}getNodeEffect(){return this.hR.vs()}setAutoCursor(t){return this.Eb&&t(this.Eb),this.us.Ss(),this}getAutoCursor(){return this.Eb}setAutoCursorMode(t){return this.bb=t,this.us.Ss(),this}getAutoCursorMode(){return this.bb}setCursorResultTableFormatter(t){return this.Wy=t,this.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}onNodeMouseDragStart(t){return this.D.on("mouseDragStart",t)}onNodeMouseDrag(t){return this.D.on("mouseDrag",t)}onNodeMouseDragStop(t){return this.D.on("mouseDragStop",t)}onNodeMouseWheel(t){return this.D.on("mouseWheel",t)}onNodeTouchStart(t){return this.D.on("touchStart",t)}onNodeTouchMove(t){return this.D.on("touchMove",t)}onNodeTouchEnd(t){return this.D.on("touchEnd",t)}onViewChange(t){return this.D.on("viewChange",t)}offNodeTouchStart(t){return this.D.off(t,"touchStart")}offNodeTouchMove(t){return this.D.off(t,"touchMove")}offNodeTouchEnd(t){return this.D.off(t,"touchEnd")}offViewChange(t){return this.D.off(t,"viewChange")}setMouseInteractions(t){return this.Yi=t,this.Vb.setMouseInteractions(t),this}getMouseInteractions(){return this.Yi}setAnimationHighlight(t){return this.rR.Or(t),this}getAnimationHighlight(){return this.rR.Nr()}setHighlightOnHover(t){return this.Mb=t,this}getHighlightOnHover(){return this.Mb}getMinimumSize(){}Zd(){return[this]}Te(t){super.Te(t),super.pm(),is.Fm(this._m,this.bm);const e=is.Tm(this._m,this.bm);if(this.KL&&this.GL.M().length){this.Vb.Nt(),this.VL.clear(),this.rR.Vr(),this.th&&this.cR(t);const s=Bb({data:this.GL.M(),dimensions:{x:0+this.ya.left,y:0+this.ya.bottom,width:this.pixelScale.x.getInnerEnd()-this.ya.right-this.ya.left,height:this.pixelScale.y.getInnerEnd()-e-this.ya.top-this.ya.bottom}}),n=this.nR.fp();this.dR(s,n),n.finishPlot(),this.fR(),this.OL!==this.GL.M()&&this.OL.length>1&&this.HL.unshift({name:this.YL,id:0});let a=0;const o=this.oR.fp(),l=this.XL;this.HL.forEach((u,d)=>{const f=o.add(),y=this.us.Ig.Fg(u.name,l,0);f.Rh(`← ${u.name}`).Oh(l).Fe({x:0,y:100}).Ea({x:-1,y:1}).Fr({left:this.ya.left+a,top:this.ya.top,right:0,bottom:0}).Ce(this.$L).setMouseClickEventHandler(m=>this.sR(d)).setMouseEnterEventHandler(()=>this.engine.setMouseStyle(ne.Point)).setMouseLeaveEventHandler(()=>this.engine.setMouseStyle(ne.Default)),a+=y.x+25}),o.finishPlot(),this.GL.M().every(u=>u.value===u.animatedValue)?this.KL=!1:this.us.Ss(!0)}const i=this.us.On();if(this.Hb&&i){const s=i;this.Eb.setPosition(s).setVisible(!0).getResultTable().setContent(this.Wy(new Ii,this.Hb).Zu())}else this.Eb.setVisible(!1);return this.Eb.Ps().Te(),this}dispose(){return this.Xy.W(),this.Hy.W(),this.Eb.dispose(),this.Vb.dispose(),this.VL.clear(),this.nR.gp(),this.oR.gp(),super.dispose()}j(){return super.j(),this}Z(){return super.Z(),this}Gd(){return ji(this.Vb.Eh())}attach(t,e=!0,i=!1){return t.setText(this.getTitle()),t.setOn(!0).setLocked(!0),ei(t,this.qi,i,{}),this}dR(t,e,i=!1,s=0){const n=t.map((a,o)=>({node:a,isChild:i,depth:s}));for(;n.length>0;){const a=n.pop();if(!a)continue;const{node:o,depth:l,opacity:u}=a,{x:d,y:f,height:y,width:m,children:S,animatedValue:x,name:v,nodeIndex:b}=o,E=this.eR,T=l===0&&this.GL.M().length===1?this.qL:E[b%E.length],V=[{x:d,y:f},{x:d,y:y+f},{x:m+d,y:y+f},{x:m+d,y:f}],F=this.Vb.zr().pl(V).AR(T.setA(u||250)).Yb(x);this.VL.set(F,o),this.rR.zr(F,X=>F.cs(X));const B=d+5,z=f+5,L=Math.max(y-25-5,0),A=Math.max(m-5-5,0);if(S&&S.length&&l<this.WL&&A>15&&L>15){const X=Bb({data:S,dimensions:{x:A>0?B:d,y:L>0?z:f,width:A,height:L}});for(let N=0;N<X.length;N+=1){const U=(250-(S.length>7?50:150))/(S.length-1),O=o.id===1&&this.OL.length===1||this.OL===this.GL.M()?250:u?u/(l+1):250-N*U;n.push({node:X[N],isChild:!0,depth:l+1,opacity:O})}}const R=l===0&&this.GL.M().length===1?this.jL:this.QL,w=l===0?this.ZL:this.JL,C=this.gR(v,m-25,w),k=this.us.Ig.Fg(C,w,0),_=e.add();m-25>k.x&&y>25?_.Rh(C).Fe({x:d+5,y:y+f-2.5}).Ea({x:-1,y:1}).Ce(R).Oh(w):_.Rh("")}}uR(t){const e={},i=[...t];for(;i.length>0;){const s=i.pop();s&&(e[s.id]=s,s.children&&i.push(...s.children))}return e}iR(t){if(!this.KL&&t)return this.VL.get(t)}fR(){this.HL=[];const t=this.GL.M()[0].id;let e=this.NL[t].parentID;for(;e;)this.HL.push({name:this.NL[e].name,id:e}),e=this.NL[e].parentID;return this.HL.reverse()}gR(t,e,i){let s=this.us.Ig.Fg(t,i,0).x;if(s<=e)return t;const n=t.split(" ");let a=t;for(;n.length>1&&s>e;)n.pop(),a=`${n.join(" ")}...`,s=this.us.Ig.Fg(a,i,0).x;if(s>e)for(a=`${n[0]}...`,s=this.us.Ig.Fg(a,i,0).x;a.length>3&&s>e;)a=`${a.substring(0,a.length-4)}...`,s=this.us.Ig.Fg(a,i,0).x;return a.length<=3&&s>e?"":a}cR(t){var e;const i=[...this.OL];for(;i.length>0;){const s=i.pop();if(!s)continue;const n=s.value-s.animatedValue;if(Math.abs(n)<.0015*s.value||this._y===void 0)s.animatedValue=s.value;else{const a=n/250*(((e=this._y)===null||e===void 0?void 0:e.speed)||1)*t;s.animatedValue+=a,(n>0&&s.animatedValue>s.value||n<0&&s.animatedValue<s.value)&&(s.animatedValue=s.value)}s.children&&s.children.length>0&&i.push(...s.children)}}lR(t,e){const i=[{current:t,previous:e}];for(;i.length>0;){const s=i.pop();if(!s)continue;const{current:n,previous:a}=s;n.animatedValue=this.th?a.animatedValue:n.value,a.nodeIndex<0?n.nodeIndex=0:n.nodeIndex=a.nodeIndex;const o=new Map(a.children.map(l=>[l.id,l]));n.children.forEach((l,u)=>{const d=o.get(l.id);i.push({current:l,previous:d||a})})}}}const MF=(r,t)=>{const{name:e,value:i}=t;return r.addRow(`${e}`).addRow(`${i}`),r},Pc=(r,t)=>{const e=(s=>{const n=new it({color:s.uiStrokeColorContrastHigh}),a=new it({color:s.uiStrokeColorContrastMedium}),o=new it({color:s.uiStrokeColorContrastLow}),l=new c0({family:s.fontFamily,weight:"normal",style:"normal"}),u=l.setSize(18*s.fontScaler),d=l.setSize(16*s.fontScaler),f=l.setSize(14*s.fontScaler),y=l.setSize(10*s.fontScaler),m=l.withMutations(Ut=>Ut.set("size",14*s.fontScaler).set("weight","bold")),S=l.setSize(13*s.fontScaler),x=new ie({thickness:2,fillStyle:o}),v=new it({color:s.dataHighlightOverlayColor}),b=new ie({thickness:2,fillStyle:s.legendBackgroundBorderFillStyle}),E=s.dataColorPalette.map(Ut=>new it({color:Ut.stroke})),T=Ut=>E[Ut%E.length],V=E.map(Ut=>new ie({thickness:2,fillStyle:Ut})),F=Ut=>V[Ut%V.length],B=s.dataColorPalette.map(Ut=>new it({color:Ut.border})).map(Ut=>new ie({thickness:2,fillStyle:Ut})),z=Ut=>B[Ut%B.length],L=s.dataColorPalette.map(Ut=>{const re=Ut.area;return new ps({angle:180,stops:[{color:ms(re,I(255,255,255,re.getA()),.3),offset:0},{color:re,offset:.5},{color:ms(re,I(0,0,0,re.getA()),.3),offset:1}]})}),A=Ut=>L[Ut%L.length],R=s.dataColorPaletteInverted.map(Ut=>{const re=Ut.area;return new ps({angle:180,stops:[{color:ms(re,I(255,255,255,re.getA()),.3),offset:0},{color:re,offset:.5},{color:ms(re,I(0,0,0,re.getA()),.3),offset:1}]})}),w=Ut=>R[Ut%R.length],C=s.dataColorPaletteInverted.map(Ut=>new it({color:Ut.border})).map(Ut=>new ie({thickness:2,fillStyle:Ut})),k=Ut=>C[Ut%C.length],_=new it({color:s.dataColorPositive}),X=new it({color:s.dataColorNegative}),N=new ie({thickness:1,fillStyle:new it({color:s.dataStrokeColorContrastHigh.setA(50)})}),U=new ie({thickness:2,fillStyle:s.axisLineFillStyle}),O=At,W=new it({color:I(0,0,0,1)}),P=new ie({thickness:1,fillStyle:s.axisGridMajorFillStyle}),H=new ie({thickness:1,fillStyle:s.axisTickMajorFillStyle}),j=f,Q=s.axisLabelMajorFillStyle,J=new ie({thickness:1,fillStyle:s.axisGridMajorFillStyle}),ht=new ie({thickness:1,fillStyle:s.axisTickMajorFillStyle}),ot=f,ut=s.axisLabelMajorFillStyle,dt=new ie({thickness:1,fillStyle:s.axisGridMinorFillStyle}),Et=new ie({thickness:1,fillStyle:s.axisTickMinorFillStyle}),St=y,Vt=s.axisLabelMinorFillStyle,_t=mR,jt=new yn({gridStrokeStyle:P,tickStyle:H,tickLength:50,tickPadding:-14,labelFont:j,labelPadding:0,labelFillStyle:Q}),ee=new yn({gridStrokeStyle:J,tickStyle:ht,tickLength:7,tickPadding:5,labelFont:ot,labelPadding:0,labelFillStyle:ut}),Dt=new yn({gridStrokeStyle:dt,tickStyle:Et,tickLength:4,tickPadding:10,labelFont:St,labelPadding:0,labelFillStyle:Vt}),Ct=new qk({extremeTickStyle:_t,majorTickStyle:ee,minorTickStyle:Dt}),Pi=new Ok({greatTickStyle:jt,majorTickStyle:ee,minorTickStyle:Dt}),Ge=new $k({majorTickStyle:ee,minorTickStyle:Dt}),Re=new it({color:s.dataHighlightOverlayColor}),Zr=new ie({thickness:1,fillStyle:a}),Ze=new ie({thickness:2,fillStyle:a}),ni=Ut=>new Bf.Triangulated({shape:"sphere",size:10,fillStyle:E[Ut%E.length]}),ur=E[0],ce=s.uiTextFillStyle,Qe=s.legendBackgroundFillStyle,Ai=new ie({thickness:1,fillStyle:s.legendBackgroundBorderFillStyle}),fe=Vf(s.legendButtonDefaultColor),Le=Vf(s.isDark?I(70,70,70,255):I(170,170,170,255)),yi=new it({color:s.isDark?I(70,70,70,255):I(170,170,170,255)}),Ye=new ie({thickness:1,fillStyle:n}),Ie=new bk({thickness:1,fillStyle:s.cursorGridFillStyle,pattern:sR.DashedEqual,patternScale:3}),Va=s.zoomBandChartDefocusOverlayFillStyle,Pe=new ie({thickness:2,fillStyle:new it({color:s.zoomBandChartSplitterColor})});let He={isDark:s.isDark,effect:s.effect,effectsText:s.effectsText,effectsDashboardSplitters:s.effectsDashboardSplitters,lcjsBackgroundFillStyle:s.lcjsBackgroundFillStyle,lcjsBackgroundStrokeStyle:At,highlightColorOffset:s.highlightColorOffset,highlightColorOffsetAxisOverlay:s.highlightColorOffsetAxisOverlay,dashboardSplitterStyle:new ie({thickness:4,fillStyle:s.dashboardSplitterFillStyle}),chartXYBackgroundFillStyle:s.panelBackgroundFillStyle,chartXYBackgroundStrokeStyle:At,chartXYTitleFont:u,chartXYTitleFillStyle:s.titleFillStyle,chartXYSeriesBackgroundFillStyle:s.seriesBackgroundFillStyle,chartXYSeriesBackgroundStrokeStyle:x,chartXYZoomingRectangleFillStyle:v,chartXYZoomingRectangleStrokeStyle:b,chartXYFittingRectangleFillStyle:v,chartXYFittingRectangleStrokeStyle:b,lineSeriesStrokeStyle:F,pointLineSeriesStrokeStyle:F,pointLineSeriesFillStyle:T,pointSeriesFillStyle:T,ellipseSeriesFillStyle:T,ellipseSeriesStrokeStyle:F,polygonSeriesFillStyle:T,polygonSeriesStrokeStyle:F,rectangleSeriesFillStyle:T,rectangleSeriesStrokeStyle:At,segmentSeriesStrokeStyle:F,boxSeriesBodyFillStyle:T(0),boxSeriesBodyStrokeStyle:At,boxSeriesStrokeStyle:new ie({thickness:1,fillStyle:E[0]}),boxSeriesMedianStrokeStyle:new ie({thickness:1,fillStyle:new it({color:I(0,0,0)})}),ohlcCandleThicknessPixels:5,ohlcCandleBodyFillStylePositive:_,ohlcCandleBodyFillStyleNegative:X,ohlcCandleTailStrokeStylePositive:new ie({thickness:1,fillStyle:new it({color:s.uiStrokeColorContrastHigh})}),ohlcCandleTailStrokeStyleNegative:new ie({thickness:1,fillStyle:new it({color:s.uiStrokeColorContrastHigh})}),ohlcBarThicknessPixels:10,ohlcBarStrokeStylePositive:new ie({thickness:2,fillStyle:_}),ohlcBarStrokeStyleNegative:new ie({thickness:2,fillStyle:X}),heatmapGridSeriesFillStyle:T,heatmapGridSeriesWireframeStyle:N,heatmapScrollingGridSeriesFillStyle:T,heatmapScrollingGridSeriesWireframeStyle:N,areaRangeSeriesFillStyle:A,areaRangeSeriesStrokeStyle:z,areaRangeSeriesFillStyleInverted:w,areaRangeSeriesStrokeStyleInverted:k,areaSeriesBipolarHighFillStyle:A,areaSeriesBipolarHighStrokeStyle:z,areaSeriesBipolarLowFillStyle:w,areaSeriesBipolarLowStrokeStyle:k,areaSeriesPositiveFillStyle:A,areaSeriesPositiveStrokeStyle:z,areaSeriesNegativeFillStyle:w,areaSeriesNegativeStrokeStyle:k,xAxisTitleFont:d,xAxisTitleFillStyle:s.axisTitleFillStyle,xAxisStrokeStyle:U,xAxisNibStyle:O,xAxisOverlayStyle:W,xAxisZoomingBandFillStyle:v,xAxisZoomingBandStrokeStyle:At,xAxisNumericTicks:Ct,xAxisDateTimeTicks:Pi,xAxisTimeTicks:Ge,yAxisTitleFont:d,yAxisTitleFillStyle:s.axisTitleFillStyle,yAxisStrokeStyle:U,yAxisNibStyle:O,yAxisOverlayStyle:W,yAxisZoomingBandFillStyle:v,yAxisZoomingBandStrokeStyle:At,yAxisNumericTicks:Ct,yAxisDateTimeTicks:Pi,yAxisTimeTicks:Ge,bandFillStyle:Re,bandStrokeStyle:Zr,constantLineStrokeStyle:Ze,barChartBackgroundFillStyle:s.panelBackgroundFillStyle,barChartBackgroundStrokeStyle:At,barChartTitleFont:u,barChartTitleFillStyle:s.titleFillStyle,barChartSeriesBackgroundFillStyle:Ft,barChartSeriesBackgroundStrokeStyle:At,barChartBarFillStyle:T,barChartBarStrokeStyle:new ie({thickness:1,fillStyle:o}),barChartValueAxisTitleFont:d,barChartValueAxisTitleFillStyle:s.axisTitleFillStyle,barChartValueAxisStrokeStyle:U,barChartValueAxisTicks:Ct.setMajorTickStyle(Ut=>Ut.setGridStrokeStyle(At)).setMinorTickStyle(Ut=>Ut.setGridStrokeStyle(At)),barChartCategoryAxisTitleFont:d,barChartCategoryAxisTitleFillStyle:s.axisTitleFillStyle,barChartCategoryAxisStrokeStyle:U,barChartCategoryLabels:{formatter:(Ut,re)=>Ut,labelFillStyle:Ct.majorTickStyle.labelFillStyle,labelFont:Ct.majorTickStyle.labelFont,labelMargin:8,labelRotation:0,tickStyle:Ct.majorTickStyle.tickStyle,tickLength:0},barChartValueLabelsAfterBars:{position:"after-bar",formatter:(Ut,re,Rt)=>Ut.chart.valueAxis.formatValue(Rt),labelFillStyle:Ct.majorTickStyle.labelFillStyle,labelFont:Ct.majorTickStyle.labelFont,labelMargin:8,labelRotation:0},barChartValueLabelsInsideBars:{position:"inside-bar",formatter:(Ut,re,Rt)=>Ut.chart.valueAxis.formatValue(Rt),labelFillStyle:Ct.majorTickStyle.labelFillStyle,labelFont:Ct.majorTickStyle.labelFont,labelMargin:8,labelRotation:0},chart3DBackgroundFillStyle:s.panelBackgroundFillStyle,chart3DBackgroundStrokeStyle:At,chart3DTitleFont:u,chart3DTitleFillStyle:s.titleFillStyle,chart3DSeriesBackgroundFillStyle:s.seriesBackgroundFillStyle,chart3DSeriesBackgroundStrokeStyle:x,chart3DBoundingBoxStrokeStyle:At,xAxis3DTitleFont:d,xAxis3DTitleFillStyle:s.axisTitleFillStyle,xAxis3DStrokeStyle:U,xAxis3DNumericTicks:Ct,xAxis3DDateTimeTicks:Pi,xAxis3DTimeTicks:Ge,yAxis3DTitleFont:d,yAxis3DTitleFillStyle:s.axisTitleFillStyle,yAxis3DStrokeStyle:U,yAxis3DNumericTicks:Ct,yAxis3DDateTimeTicks:Pi,yAxis3DTimeTicks:Ge,zAxis3DTitleFont:d,zAxis3DTitleFillStyle:s.axisTitleFillStyle,zAxis3DStrokeStyle:U,zAxis3DNumericTicks:Ct,zAxis3DDateTimeTicks:Pi,zAxis3DTimeTicks:Ge,lineSeries3DStrokeStyle:F,pointLineSeries3DStrokeStyle:F,pointLineSeries3DPointStyle:ni,pointSeries3DPointStyle:ni,pointCloudSeries3DPointStyle:Ut=>new Bf.Pixelated({size:5,fillStyle:E[Ut%E.length]}),surfaceGridSeries3DFillStyle:T,surfaceGridSeries3DWireframeStyle:N,surfaceScrollingGridSeries3DFillStyle:T,surfaceScrollingGridSeries3DWireframeStyle:N,boxSeries3DFillStyle:T,meshModel3DFillStyle:T(0),polarChartBackgroundFillStyle:s.panelBackgroundFillStyle,polarChartBackgroundStrokeStyle:At,polarChartTitleFont:u,polarChartTitleFillStyle:s.titleFillStyle,polarChartSeriesBackgroundFillStyle:s.seriesBackgroundFillStyle,polarChartSeriesBackgroundStrokeStyle:x,polarSectorFillStyle:Re,polarSectorStrokeStyle:Zr,polarAmplitudeAxisTitleFont:d,polarAmplitudeAxisTitleFillStyle:s.axisTitleFillStyle,polarAmplitudeAxisStrokeStyle:U,polarAmplitudeAxisNumericTicks:Ct,polarAmplitudeAxisDateTimeTicks:Pi,polarAmplitudeAxisTimeTicks:Ge,polarRadialAxisTitleFont:d,polarRadialAxisTitleFillStyle:s.axisTitleFillStyle,polarRadialAxisStrokeStyle:U,polarRadialAxisTickStyle:ee,polarLineSeriesStrokeStyle:F,polarPointLineSeriesFillStyle:T,polarPointLineSeriesStrokeStyle:F,polarPointSeriesFillStyle:T,polarPolygonSeriesFillStyle:A,polarPolygonSeriesStrokeStyle:z,polarAreaSeriesFillStyle:A,polarAreaSeriesStrokeStyle:z,polarHeatmapSeriesFillStyle:T,mapChartBackgroundFillStyle:s.panelBackgroundFillStyle,mapChartBackgroundStrokeStyle:At,mapChartTitleFont:u,mapChartTitleFillStyle:s.titleFillStyle,mapChartFillStyle:ur,mapChartStrokeStyle:new ie({thickness:1,fillStyle:new it({color:s.dataStrokeColorContrastMedium})}),mapChartOutlierRegionFillStyle:Ft,mapChartOutlierRegionStrokeStyle:new ie({thickness:1,fillStyle:o}),mapChartSeparateRegionFillStyle:Qe,mapChartSeparateRegionStrokeStyle:Ai,dataGridBackgroundFillStyle:s.panelBackgroundFillStyle,dataGridBackgroundStrokeStyle:At,dataGridTitleFont:u,dataGridTitleFillStyle:s.titleFillStyle,dataGridTextFont:f,dataGridTextFillStyle:ur,dataGridCellBackgroundFillStyle:new it({color:s.uiBackgroundColor}),dataGridBorderStrokeStyle:new ie({thickness:.4,fillStyle:new it({color:s.uiBackgroundBorderColor})}),dataGridScrollBarBackgroundFillStyle:s.seriesBackgroundFillStyle,dataGridScrollBarBackgroundStrokeStyle:At,dataGridScrollBarFillStyle:s.seriesBackgroundFillStyle,dataGridScrollBarStrokeStyle:Ai,dataGridScrollBarButtonFillStyle:s.seriesBackgroundFillStyle,dataGridScrollBarButtonStrokeStyle:Ai,dataGridScrollBarButtonArrowFillStyle:fe,dataGridScrollBarButtonArrowStrokeStyle:Ai,sparkLineChartStrokeStyle:F(0),sparkPointChartFillStyle:T(0),sparkBarChartFillStyle:T(0),sparkBarChartStrokeStyle:z(0),sparkAreaChartFillStyle:A(0),sparkAreaChartStrokeStyle:z(0),sparkPieChartFillStyle:T,sparkPieChartStrokeStyle:Ai,sparkChartBandFillStyle:Re,sparkChartBandStrokeStyle:Zr,sparkChartConstantLineStrokeStyle:Ze,spiderChartBackgroundFillStyle:s.panelBackgroundFillStyle,spiderChartBackgroundStrokeStyle:At,spiderChartTitleFont:u,spiderChartTitleFillStyle:s.titleFillStyle,spiderChartSeriesBackgroundFillStyle:s.seriesBackgroundFillStyle,spiderChartSeriesBackgroundStrokeStyle:x,spiderChartWebStyle:new ie({thickness:2,fillStyle:o}),spiderChartScaleLabelFillStyle:s.axisLabelMajorFillStyle,spiderChartScaleLabelFont:f,spiderChartAxisLabelFillStyle:s.axisTitleFillStyle,spiderChartAxisLabelFont:d,spiderChartAxisStrokeStyle:new ie({thickness:2,fillStyle:a}),spiderChartAxisNibStrokeStyle:new ie({thickness:2,fillStyle:n}),spiderSeriesFillStyle:A,spiderSeriesStrokeStyle:z,spiderSeriesPointFillStyle:T,pieChartBackgroundFillStyle:s.panelBackgroundFillStyle,pieChartBackgroundStrokeStyle:At,pieChartTitleFont:u,pieChartTitleFillStyle:s.titleFillStyle,pieChartSliceFillStylePalette:T,pieChartSliceStrokeStyle:Ai,pieChartSliceLabelFont:S,pieChartSliceLabelFillStyle:s.uiTextFillStyle,pieChartConnectorStrokeStyle:Ye,funnelChartBackgroundFillStyle:s.panelBackgroundFillStyle,funnelChartBackgroundStrokeStyle:At,funnelChartTitleFont:u,funnelChartTitleFillStyle:s.titleFillStyle,funnelChartSliceFillStylePalette:T,funnelChartSliceStrokeStyle:Ai,funnelChartSliceLabelFont:S,funnelChartSliceLabelFillStyle:s.uiTextFillStyle,funnelChartConnectorStrokeStyle:Ye,pyramidChartBackgroundFillStyle:s.panelBackgroundFillStyle,pyramidChartBackgroundStrokeStyle:At,pyramidChartTitleFont:u,pyramidChartTitleFillStyle:s.titleFillStyle,pyramidChartSliceFillStylePalette:T,pyramidChartSliceStrokeStyle:Ai,pyramidChartSliceLabelFont:S,pyramidChartSliceLabelFillStyle:s.uiTextFillStyle,pyramidChartConnectorStrokeStyle:Ye,gaugeChartBackgroundFillStyle:s.panelBackgroundFillStyle,gaugeChartBackgroundStrokeStyle:At,gaugeChartTitleFont:u,gaugeChartTitleFillStyle:s.titleFillStyle,gaugeChartEmptyGaugeFillStyle:new it({color:s.uiBackgroundColor}),gaugeChartEmptyGaugeStrokeStyle:Ai,gaugeChartGaugeFillStyle:ur,gaugeChartIntervalLabelsFillStyle:ce,gaugeChartIntervalLabelsFont:S,gaugeChartValueLabelFillStyle:ce,gaugeChartValueLabelFont:S,treeMapChartBackgroundFillStyle:s.panelBackgroundFillStyle,treeMapChartBackgroundStrokeStyle:At,treeMapChartParentColor:s.treeMapChartParentColor,treeMapChartNodeColors:s.treeMapChartNodeColors,treeMapChartNodeStrokeStyle:new ie({thickness:1,fillStyle:new it({color:xs("000")})}),treeMapChartTitleFillStyle:s.titleFillStyle,treeMapChartTitleFont:u,treeMapChartPathLabelFillStyle:ce,treeMapChartPathLabelFont:S,treeMapChartLabelHeaderFillStyle:s.treeMapChartLabelHeaderFillStyle,treeMapChartLabelHeaderFont:u,treeMapChartLabelFillStyle:s.treeMapChartLabelFillStyle,treeMapChartLabelFont:S,uiPanelBackgroundFillStyle:s.panelBackgroundFillStyle,uiPanelBackgroundStrokeStyle:At,zoomBandChartDefocusOverlayFillStyle:Va,zoomBandChartSplitterStrokeStyle:Pe,zoomBandChartKnobFillStyle:s.zoomBandChartKnobFillStyle,zoomBandChartKnobSize:s.zoomBandChartKnobSize,onScreenMenuBackgroundColor:I(254,204,0,.7),uiButtonFillStyle:fe,uiButtonFillStyleHidden:Le,uiButtonStrokeStyle:Ai,uiButtonSize:10,uiBackgroundFillStyle:Qe,uiBackgroundStrokeStyle:Ai,uiTextFillStyle:ce,uiTextFillStyleHidden:yi,uiTextFont:S,legendTitleFillStyle:ce,legendTitleFont:m,cursorTickMarkerXBackgroundFillStyle:Qe,cursorTickMarkerXBackgroundStrokeStyle:Ai,cursorTickMarkerXTextFillStyle:ce,cursorTickMarkerXTextFont:S,cursorTickMarkerYBackgroundFillStyle:Qe,cursorTickMarkerYBackgroundStrokeStyle:Ai,cursorTickMarkerYTextFillStyle:ce,cursorTickMarkerYTextFont:S,cursorPointMarkerFillStyle:Ie.getFillStyle(),cursorPointMarkerSize:{x:9,y:9},cursorPointMarkerShape:qe.Cross,cursorResultTableFillStyle:Qe,cursorResultTableStrokeStyle:Ai,cursorResultTableTextFillStyle:ce,cursorResultTableTextFont:S,cursorGridStrokeStyleX:Ie,cursorGridStrokeStyleY:Ie,chartMarkerPointMarkerFillStyle:Ie.getFillStyle(),chartMarkerPointMarkerSize:{x:20,y:20},chartMarkerPointMarkerShape:qe.Star,seriesMarkerPointMarkerFillStyle:Ie.getFillStyle(),seriesMarkerPointMarkerSize:{x:9,y:9},seriesMarkerPointMarkerShape:qe.Cross};return s.overrideThemeProperties&&(He={...He,...s.overrideThemeProperties}),He})(r),i={...t,header1Font:e.xAxisTitleFont,header2Font:e.xAxisNumericTicks.getMajorTickStyle().labelFont,header3Font:e.uiTextFont,mainDataColor:r.dataColorPalette[0].stroke};return{...e,examples:i}},ho=(r,t)=>{const e=new Image;e.crossOrigin="*";const i=`${r}/${t}`;return e.addEventListener("error",s=>{zM(r,i,"Theme resource",{shouldCrash:!1})}),e.src=i,e},Uc=(r,t,e)=>i=>{const s=r===!0?t[i%t.length].stroke:ms(t[i%t.length].stroke,I(255,255,255),.5);return new os({stops:[{color:ms(s,I(255,255,255),.5*e).setA(100),offset:0},{color:s.setA(100),offset:.5},{color:ms(s,I(30,30,30),.5*e).setA(100),offset:1}]})},Oc=(r,t,e)=>i=>{const s=r===!0?t[i%t.length].stroke:ms(t[i%t.length].stroke,I(255,255,255),.2);return new os({stops:[{color:ms(s,I(255,255,255),.2*e),offset:0},{color:s,offset:.5},{color:ms(s,I(0,0,0),.2*e),offset:1}]})},ta=(r,t,e)=>i=>{const s=r===!0?t[i%t.length].stroke:ms(t[i%t.length].stroke,I(255,255,255),.2);return new ps({angle:90,stops:[{color:ms(s,I(255,255,255),.5*e),offset:0},{color:s,offset:.35},{color:ms(s,I(30,30,30),.5*e),offset:1}]})},Gc=(r,t,e)=>(i=>{const s=new Map;return n=>{const a=s.get(n);if(a)return a;const o=(l=>{const u=r===!0?t[l%t.length].stroke:ms(t[l%t.length].stroke,I(255,255,255),.3);return new ps({angle:90,stops:[{color:ms(u,I(255,255,255),.5),offset:0},{color:u,offset:.35},{color:ms(u,I(30,30,30),.5),offset:1}]})})(n);return s.set(n,o),o}})(),Yc=(r,t,e)=>{const i=t[0].stroke;return new os({shape:Es.ellipse,extent:Ts.farthestCorner,position:{x:.5,y:.5},stops:[{color:r===!0?i:ms(i,I(255,255,255),.5*e),offset:0},{color:i,offset:.5},{color:r===!0?i:ms(i,I(0,0,0),.5*e),offset:1}]})},RF=Tc(()=>{const r=I(255,255,255),t=new it({color:r}),e=!0,i=new p0({spread:1,blur:9,offset:{x:0,y:0},color:I(0,0,0,150)}),s=new os({position:{x:.8,y:.8},extent:Ts.farthestCorner,shape:Es.ellipse,stops:[{offset:0,color:I(50,51,52)},{offset:.5,color:I(14,15,16)},{offset:1,color:I(0,0,0)}]}),n=new it({color:I(45,45,45)}),a=new os({position:{x:.5,y:.5},extent:Ts.farthestCorner,shape:Es.circle,stops:[{offset:0,color:I(120,120,120,100)},{offset:1,color:I(0,0,0,50)}]}),o=new os({position:{x:.5,y:.5},extent:Ts.farthestCorner,shape:Es.circle,stops:[{offset:0,color:I(30,30,30,200)},{offset:1,color:I(0,0,0,255)}]}),l=new it({color:I(255,255,220)}),u=new it({color:I(255,255,166)}),d=new it({color:I(255,255,220)}),f=new it({color:I(255,255,220,130)}),y=new it({color:I(255,255,200)}),m=y,S=new ps({angle:45,stops:[{offset:0,color:I(230,230,230)},{offset:1,color:I(150,150,150)}]}),x=new it({color:I(220,220,220)}),v=new it({color:I(200,200,200,50)}),b=new it({color:I(200,200,200,150)}),E=new it({color:I(200,200,200,20)}),T=new it({color:I(150,150,150)}),V=new ps({angle:0,stops:[{offset:0,color:I(10,10,10,220)},{offset:1,color:I(30,30,30,220)}]}),F=t,B=I(255,255,200),z=I(20,20,20),L=I(0,0,0),A=r,R=I(150,150,150),w=I(50,50,50),C=I(50,50,50),k=I(100,100,100);I(200,200,200);const _=[I(255,255,91,255),I(255,205,91,255),I(255,155,91,255),I(255,196,188,255),I(255,148,184,255),I(219,148,198,255),I(235,196,224,255),I(169,148,198,255),I(148,226,198,255),I(148,255,176,255),I(180,255,165,255)].map(Ct=>({stroke:Ct,border:Ct,area:Ct.setA(100)})),X=r.setA(20),N=I(176,255,157,255),U=I(255,112,76,255),O={mapChartFillStyle:new ps({angle:135,stops:[{color:I(255,255,91,255),offset:0},{color:I(255,155,91,255),offset:1}]}),spiderSeriesFillStyle:Uc(e,_,.5),pieChartSliceFillStylePalette:Oc(e,_,1),funnelChartSliceFillStylePalette:ta(e,_,1),pyramidChartSliceFillStylePalette:ta(e,_,1),rectangleSeriesFillStyle:Gc(e,_),gaugeChartGaugeFillStyle:Yc(e,_,1)},W=new it({color:I(176,255,157,255)}),P=new it({color:I(255,146,146,255)}),H=new it({color:I(176,255,157,255)}),j=new it({color:I(230,63,63,255)}),Q=new it({color:I(176,255,157,120)}),J=new it({color:I(229,63,63,180)}),ht=new it({color:I(27,37,36,255)}),ot=new it({color:I(62,27,27,255)}),ut=[I(255,0,0),I(255,255,0),I(0,255,0)],dt=[I(10,10,255),I(10,190,255),I(251,255,0),I(255,38,0)],Et=[I(255,255,0),I(255,204,0),I(255,128,0),I(255,0,0)],St=[I(0,0,0),I(167,4,69,255),I(255,0,0),I(252,252,168,255)],Vt=new os({stops:[{color:I(61,61,80,100),offset:0},{color:I(44,44,55,30),offset:1}]}),_t=new it({color:I(148,148,198,255)}),jt=Q.getColor().setA(255),ee=I(100,100,100),Dt=[I(255,241,149,200),I(255,230,65,200),I(238,211,32,200),I(238,176,32,200),I(255,159,13,200),I(254,120,37,200),I(253,91,56,200),I(253,75,84,200),I(254,95,124,200),I(227,56,160,200),I(226,53,134,200),I(216,90,166,200),I(254,151,206,200),I(237,151,254,200),I(243,177,255,200),I(233,133,252,200),I(210,101,230,200),I(178,61,200,200),I(193,81,156,200),I(217,95,145,200)];return Pc({isDark:e,highlightColorOffset:I(60,60,60,60),highlightColorOffsetAxisOverlay:I(255,255,255,40),effect:i,effectsText:!0,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:s,dashboardSplitterFillStyle:n,panelBackgroundFillStyle:a,seriesBackgroundFillStyle:o,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:l,axisTitleFillStyle:u,axisLabelMajorFillStyle:d,axisLabelMinorFillStyle:f,uiTextFillStyle:m,axisLineFillStyle:S,axisTickMajorFillStyle:x,axisGridMajorFillStyle:v,axisTickMinorFillStyle:b,axisGridMinorFillStyle:E,cursorGridFillStyle:T,legendBackgroundFillStyle:V,legendBackgroundBorderFillStyle:F,legendButtonDefaultColor:B,uiBackgroundColor:z,uiBackgroundBorderColor:L,uiStrokeColorContrastHigh:A,uiStrokeColorContrastMedium:R,uiStrokeColorContrastLow:w,dataStrokeColorContrastHigh:C,dataStrokeColorContrastMedium:k,dataColorPalette:_,dataColorPaletteInverted:[{area:I(190,50,50,100),border:I(210,80,80)}],dataHighlightOverlayColor:X,dataColorPositive:N,dataColorNegative:U,zoomBandChartDefocusOverlayFillStyle:new it({color:I(0,0,0,180)}),zoomBandChartSplitterColor:xs("#FBFB5A"),zoomBandChartKnobFillStyle:Ct=>new kn({source:ho(Ct,"zoomBandChart/darkgold-selector.png"),fitMode:qi.Fill}),zoomBandChartKnobSize:{x:14,y:30},overrideThemeProperties:O,treeMapChartParentColor:xs("#181E21"),treeMapChartNodeColors:Dt,treeMapChartLabelFillStyle:new it({color:I(33,33,33)}),treeMapChartLabelHeaderFillStyle:new it({color:I(250,250,250)})},{positiveTextFillStyle:W,negativeTextFillStyle:P,positiveFillStyle:H,negativeFillStyle:j,positiveAreaFillStyle:Q,negativeAreaFillStyle:J,positiveBackgroundFillStyle:ht,negativeBackgroundFillStyle:ot,badGoodColorPalette:ut,coldHotColorPalette:dt,intensityColorPalette:Et,spectrogramColorPalette:St,bollingerFillStyle:Vt,bollingerBorderFillStyle:_t,highlightPointColor:r,highlightDataGridColor:jt,unfocusedDataColor:ee})}),EF=Tc(()=>{const r=I(255,255,255),t=new it({color:r}),e=!0,i=new p0({spread:0,blur:9,offset:{x:0,y:0},color:I(105,255,236,40)}),s=new it({color:I(2,21,30)}),n=new os({stops:[{color:I(19,40,66,150),offset:0},{color:I(0,0,0,150),offset:1}]}),a=new it({color:I(0,5,8,150)}),o=t,l=t,u=t,d=new it({color:I(255,255,220,130)}),f=t,y=new it({color:I(20,224,250,255)}),m=t,S=new it({color:I(61,94,110,100)}),x=new it({color:I(61,94,110,255)}),v=new it({color:I(61,94,110,40)}),b=t,E=new it({color:I(0,18,23,255)}),T=t,V=r;new it({color:I(0,17,22,240)});const F=I(0,38,48,220),B=I(0,0,0),z=r,L=I(150,150,150),A=I(19,78,93),R=I(50,50,50),w=I(0,36,48);I(200,200,200);const C=[I(45,253,253,255),I(44,172,247,255),I(46,100,248,255),I(96,84,199,255),I(184,104,245,255),I(98,160,218,255),I(43,238,245,255),I(38,140,206,255),I(112,96,224,255),I(206,157,255,255)].map(ee=>({stroke:ee,border:ee,area:ee.setA(100)})),k=r.setA(50),_=I(3,217,194,255),X=I(230,63,63,255),N={mapChartFillStyle:new ps({angle:135,stops:[{color:I(118,248,231,255),offset:0},{color:I(45,177,255,255),offset:1}]}),spiderSeriesFillStyle:Uc(e,C,1),pieChartSliceFillStylePalette:Oc(e,C,1),funnelChartSliceFillStylePalette:ta(e,C,1),pyramidChartSliceFillStylePalette:ta(e,C,1),rectangleSeriesFillStyle:Gc(e,C),gaugeChartGaugeFillStyle:Yc(e,C,1)},U=new it({color:I(45,253,253,255)}),O=new it({color:I(255,146,146,255)}),W=new it({color:I(45,253,253,255)}),P=new it({color:I(230,63,63,255)}),H=new it({color:I(1,190,164,120)}),j=new it({color:I(229,63,63,180)}),Q=new it({color:I(1,53,57,255)}),J=new it({color:I(62,27,27,255)}),ht=[I(1,104,119,255),I(0,165,144,255),I(0,246,214,255)],ot=[I(0,87,95,255),I(0,125,124,255),I(1,209,182,255),I(0,255,221,255),I(218,112,112,255),I(172,47,47,255)],ut=[I(126,255,253,255),I(50,233,230,255),I(0,196,193,255),I(62,138,178,255),I(139,88,191,255),I(162,55,143,255)],dt=[I(13,31,52,255),I(101,50,118,255),I(1,142,172,255),I(2,196,170,255),I(0,255,221,255)],Et=new os({stops:[{color:I(122,103,254,70),offset:0},{color:I(178,168,255,10),offset:1}]}),St=new it({color:I(122,103,254,255)}),Vt=H.getColor().setA(255),_t=I(15,83,83),jt=[I(139,252,252,150),I(60,239,239,150),I(2,201,201,150),I(26,159,159,150),I(15,146,187,150),I(65,168,200,150),I(67,146,207,150),I(64,108,209,150),I(189,64,233,150),I(219,84,238,150),I(192,55,212,150),I(212,98,229,150),I(248,110,211,150),I(251,154,225,150),I(251,154,184,150),I(233,105,144,150),I(255,133,170,150),I(249,110,135,150),I(245,72,101,150),I(210,57,84,150)];return Pc({isDark:e,highlightColorOffset:I(60,60,60,60),highlightColorOffsetAxisOverlay:I(255,255,255,40),effect:i,effectsText:!1,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:ee=>new kn({source:ho(ee,"themes/turquoiseHexagon.jpg"),fitMode:qi.Fill}),dashboardSplitterFillStyle:s,panelBackgroundFillStyle:n,seriesBackgroundFillStyle:a,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:o,axisTitleFillStyle:l,axisLabelMajorFillStyle:u,axisLabelMinorFillStyle:d,uiTextFillStyle:f,axisLineFillStyle:y,axisTickMajorFillStyle:m,axisGridMajorFillStyle:S,axisTickMinorFillStyle:x,axisGridMinorFillStyle:v,cursorGridFillStyle:b,legendBackgroundFillStyle:E,legendBackgroundBorderFillStyle:T,legendButtonDefaultColor:V,uiBackgroundColor:F,uiBackgroundBorderColor:B,uiStrokeColorContrastHigh:z,uiStrokeColorContrastMedium:L,uiStrokeColorContrastLow:A,dataStrokeColorContrastHigh:R,dataStrokeColorContrastMedium:w,dataColorPalette:C,dataColorPaletteInverted:[{area:I(170,60,210,100),border:I(210,100,250)}],dataHighlightOverlayColor:k,dataColorPositive:_,dataColorNegative:X,zoomBandChartDefocusOverlayFillStyle:new it({color:I(0,0,0,180)}),zoomBandChartSplitterColor:xs("#2BF4F4"),zoomBandChartKnobFillStyle:ee=>new kn({source:ho(ee,"zoomBandChart/turquoise-selector.png"),fitMode:qi.Fill}),zoomBandChartKnobSize:{x:14,y:30},overrideThemeProperties:N,treeMapChartParentColor:xs("#002329"),treeMapChartNodeColors:jt,treeMapChartLabelFillStyle:new it({color:I(33,33,33)}),treeMapChartLabelHeaderFillStyle:new it({color:I(250,250,250)})},{positiveTextFillStyle:U,negativeTextFillStyle:O,positiveFillStyle:W,negativeFillStyle:P,positiveAreaFillStyle:H,negativeAreaFillStyle:j,positiveBackgroundFillStyle:Q,negativeBackgroundFillStyle:J,badGoodColorPalette:ht,coldHotColorPalette:ot,intensityColorPalette:ut,spectrogramColorPalette:dt,bollingerFillStyle:Et,bollingerBorderFillStyle:St,highlightPointColor:r,highlightDataGridColor:Vt,unfocusedDataColor:_t})}),TF=Tc(()=>{const t=new p0({spread:0,blur:6,offset:{x:2,y:-2},color:I(0,0,0,30)}),e=new os({position:{x:.8,y:.8},extent:Ts.farthestCorner,shape:Es.ellipse,stops:[{offset:0,color:I(255,255,255)},{offset:1,color:I(255,255,255)}]}),i=new it({color:I(219,227,233,255)}),s=new os({position:{x:.5,y:.5},extent:Ts.farthestCorner,shape:Es.circle,stops:[{offset:0,color:I(255,255,255,200)},{offset:1,color:I(240,244,246,200)}]}),n=new os({position:{x:.5,y:.5},extent:Ts.farthestCorner,shape:Es.circle,stops:[{offset:0,color:I(255,255,255,255)},{offset:1,color:I(255,255,255,255)}]}),a=new it({color:I(33,43,49)}),o=new it({color:I(33,43,49)}),l=new it({color:I(33,43,49)}),u=new it({color:I(33,43,49,150)}),d=new it({color:I(33,43,49)}),f=d,y=new ps({angle:45,stops:[{offset:0,color:I(225,225,225)},{offset:1,color:I(225,225,225)}]}),m=new it({color:I(150,150,150,255)}),S=new it({color:I(150,150,150,170)}),x=new it({color:I(150,150,150,150)}),v=new it({color:I(150,150,150,100)}),b=new it({color:I(128,146,159)}),E=new ps({angle:0,stops:[{offset:0,color:I(255,255,255,240)},{offset:1,color:I(255,255,255,240)}]}),T=new it({color:I(168,186,199)}),V=I(255,255,200);new it({color:I(255,255,255,240)}),new it({color:I(128,146,159,255)});const F=I(255,255,255,255),B=I(168,168,199,255),z=I(168,186,199,255),L=I(168,186,199,255),A=I(168,186,199,255),R=I(168,186,199,255),w=I(100,100,100);I(200,200,200);const C=[I(28,181,140,255),I(255,132,0,255),I(240,39,39,255),I(86,121,251,255),I(2,181,213,255),I(13,212,158,255),I(22,167,3,255),I(234,103,232,255),I(62,183,179,255),I(140,93,3,255),I(155,158,186,255)].map(Dt=>({stroke:Dt,border:Dt,area:Dt.setA(100)})),k=I(150,150,150,80),_=I(46,182,120,255),X=I(255,66,66,255),N=new ie({thickness:2,fillStyle:new it({color:I(168,186,199,255)})}),U={mapChartFillStyle:new ps({angle:-45,stops:[{color:I(2,181,213,255),offset:0},{color:I(175,243,255,255),offset:1}]}),spiderSeriesFillStyle:Uc(!1,C,.8),pieChartSliceFillStylePalette:Oc(!1,C,.8),funnelChartSliceFillStylePalette:ta(!1,C,.5),pyramidChartSliceFillStylePalette:ta(!1,C,.5),rectangleSeriesFillStyle:Gc(!1,C),gaugeChartGaugeFillStyle:Yc(!1,C,.8),chartXYSeriesBackgroundStrokeStyle:N,chart3DSeriesBackgroundStrokeStyle:N,polarChartSeriesBackgroundStrokeStyle:N,spiderChartSeriesBackgroundStrokeStyle:N,dataGridTextFillStyle:new it({color:I(0,88,64,255)})},O=new it({color:I(4,146,108,255)}),W=new it({color:I(240,39,39,255)}),P=new it({color:I(28,181,140,255)}),H=new it({color:I(230,88,88,255)}),j=new it({color:I(28,181,140,180)}),Q=new it({color:I(230,88,88,180)}),J=new it({color:I(229,243,228)}),ht=new it({color:I(232,225,216)}),ot=[I(193,48,48,255),I(240,234,60,255),I(45,191,55,255)],ut=[I(10,19,255,255),I(15,191,250,255),I(249,255,2,255),I(253,133,0,255),I(255,24,0,255)],dt=[I(50,99,213),I(8,179,77),I(255,246,0),I(255,126,0),I(189,36,30)],Et=[I(16,64,176),I(8,179,77),I(255,246,0),I(255,126,0),I(168,6,0)],St=new it({color:I(185,198,207,255)}),Vt=new os({stops:[{color:I(151,190,220,10),offset:0},{color:I(151,190,220,50),offset:1}]}),_t=j.getColor().setA(255),jt=I(150,150,150),ee=[I(255,243,136,125),I(254,237,99,125),I(255,216,109,125),I(255,172,100,125),I(255,133,101,125),I(255,113,142,125),I(230,103,129,125),I(242,126,219,125),I(255,155,235,125),I(255,181,240,125),I(203,143,255,125),I(208,154,255,125),I(171,188,255,125),I(197,209,255,125),I(171,187,255,125),I(84,167,239,125),I(38,196,214,125),I(38,214,196,125),I(69,225,141,125),I(36,191,88,125)];return Pc({isDark:!1,highlightColorOffset:I(-60,-60,-60,60),highlightColorOffsetAxisOverlay:I(0,0,0,40),effect:t,effectsText:!1,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:e,dashboardSplitterFillStyle:i,panelBackgroundFillStyle:s,seriesBackgroundFillStyle:n,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:a,axisTitleFillStyle:o,axisLabelMajorFillStyle:l,axisLabelMinorFillStyle:u,uiTextFillStyle:f,axisLineFillStyle:y,axisTickMajorFillStyle:m,axisGridMajorFillStyle:S,axisTickMinorFillStyle:x,axisGridMinorFillStyle:v,cursorGridFillStyle:b,legendBackgroundFillStyle:E,legendBackgroundBorderFillStyle:T,legendButtonDefaultColor:V,uiBackgroundColor:F,uiBackgroundBorderColor:B,uiStrokeColorContrastHigh:z,uiStrokeColorContrastMedium:L,uiStrokeColorContrastLow:A,dataStrokeColorContrastHigh:R,dataStrokeColorContrastMedium:w,dataColorPalette:C,dataColorPaletteInverted:[{area:I(190,50,50,100),border:I(210,80,80)}],dataHighlightOverlayColor:k,dataColorPositive:_,dataColorNegative:X,zoomBandChartDefocusOverlayFillStyle:new it({color:I(255,255,255,180)}),zoomBandChartSplitterColor:xs("#505D65"),zoomBandChartKnobFillStyle:Dt=>new kn({source:ho(Dt,"zoomBandChart/light-selector.png"),fitMode:qi.Fill}),zoomBandChartKnobSize:{x:14,y:30},overrideThemeProperties:U,treeMapChartParentColor:xs("#D9D9D9"),treeMapChartNodeColors:ee,treeMapChartLabelFillStyle:new it({color:I(0,0,0)}),treeMapChartLabelHeaderFillStyle:new it({color:I(33,33,33)})},{positiveTextFillStyle:O,negativeTextFillStyle:W,positiveFillStyle:P,negativeFillStyle:H,positiveAreaFillStyle:j,negativeAreaFillStyle:Q,positiveBackgroundFillStyle:J,negativeBackgroundFillStyle:ht,badGoodColorPalette:ot,coldHotColorPalette:ut,intensityColorPalette:dt,spectrogramColorPalette:Et,bollingerFillStyle:Vt,bollingerBorderFillStyle:St,highlightPointColor:I(0,0,0),highlightDataGridColor:_t,unfocusedDataColor:jt})}),wF=Tc(()=>{const t=new os({position:{x:.8,y:.8},extent:Ts.farthestCorner,shape:Es.ellipse,stops:[{offset:0,color:I(255,255,255)},{offset:1,color:I(255,255,255)}]}),e=new it({color:I(214,236,216,255)}),i=new os({position:{x:.5,y:.5},extent:Ts.farthestCorner,shape:Es.circle,stops:[{offset:0,color:I(233,244,231,70)},{offset:1,color:I(233,244,231,200)}]}),s=new os({position:{x:.5,y:.5},extent:Ts.farthestCorner,shape:Es.circle,stops:[{offset:0,color:I(255,255,255,255)},{offset:1,color:I(255,255,255,255)}]}),n=new it({color:I(1,61,53)}),a=new it({color:I(1,61,53)}),o=new it({color:I(1,61,53)}),l=new it({color:I(1,61,53,150)}),u=new it({color:I(1,61,53)}),d=u,f=new ps({angle:45,stops:[{offset:0,color:I(225,225,225)},{offset:1,color:I(225,225,225)}]}),y=new it({color:I(188,211,186,255)}),m=new it({color:I(188,211,186,150)}),S=new it({color:I(188,211,186,50)}),x=new it({color:I(188,211,186,50)}),v=new it({color:I(104,148,111,255)}),b=new ps({angle:0,stops:[{offset:0,color:I(255,255,255,240)},{offset:1,color:I(255,255,255,240)}]}),E=new it({color:I(104,148,111)}),T=I(255,255,200);new it({color:I(255,255,255,240)}),new it({color:I(104,148,111,255)});const V=I(255,255,255,255),F=I(179,201,183,255),B=I(188,211,186,255),z=I(188,211,186,255),L=I(188,211,186,255),A=I(188,211,186,255),R=I(100,100,100);I(200,200,200);const w=[I(138,195,142,255),I(193,161,114,255),I(178,99,99,255),I(142,156,210,255),I(154,209,219,255),I(164,212,199,255),I(104,156,97,255),I(196,147,195,255),I(92,190,187,255),I(126,100,51,255),I(136,138,157,255)].map(ee=>({stroke:ee,border:ee,area:ee.setA(100)})),C=I(150,150,150,80),k=I(46,182,84,255),_=I(232,96,96,255),X=new ie({thickness:2,fillStyle:new it({color:I(188,211,186,255)})}),N={mapChartFillStyle:new ps({angle:-45,stops:[{color:I(118,160,121,255),offset:0},{color:I(174,227,178,255),offset:1}]}),spiderSeriesFillStyle:Uc(!1,w,.8),pieChartSliceFillStylePalette:Oc(!1,w,.8),pyramidChartSliceFillStylePalette:ta(!1,w,.5),funnelChartSliceFillStylePalette:ta(!1,w,.5),rectangleSeriesFillStyle:Gc(!1,w),gaugeChartGaugeFillStyle:Yc(!1,w,.8),chartXYSeriesBackgroundStrokeStyle:X,chart3DSeriesBackgroundStrokeStyle:X,polarChartSeriesBackgroundStrokeStyle:X,spiderChartSeriesBackgroundStrokeStyle:X,dataGridTextFillStyle:new it({color:I(77,66,21,255)})},U=new it({color:I(93,151,97,255)}),O=new it({color:I(178,99,99,255)}),W=new it({color:I(138,195,142,255)}),P=new it({color:I(178,99,99,255)}),H=new it({color:I(138,195,142,180)}),j=new it({color:I(178,99,99,180)}),Q=new it({color:I(224,240,237)}),J=new it({color:I(251,227,227)}),ht=[I(178,99,99,255),I(215,224,111,255),I(80,186,88,255)],ot=[I(62,64,142,255),I(66,131,77,255),I(250,250,135,255),I(202,161,78,255),I(179,53,53,255)],ut=[I(64,86,138),I(123,192,205),I(255,252,149),I(220,155,92),I(184,78,74)],dt=[I(64,86,138),I(123,192,205),I(255,252,149),I(220,155,92),I(132,60,57)],Et=new it({color:I(185,198,207,255)}),St=new os({stops:[{color:I(151,190,220,10),offset:0},{color:I(151,190,220,50),offset:1}]}),Vt=H.getColor().setA(255),_t=I(150,150,150),jt=[I(242,239,210,150),I(243,238,183,150),I(210,222,136,150),I(204,217,148,150),I(157,190,124,150),I(143,178,72,150),I(198,147,88,150),I(216,148,71,150),I(229,142,103,150),I(225,174,152,150),I(219,149,203,150),I(216,188,209,150),I(109,198,189,150),I(172,206,202,150),I(164,223,217,150),I(174,215,233,150),I(203,225,235,150),I(220,227,243,150),I(207,213,227,150),I(171,182,209,150)];return Pc({isDark:!1,highlightColorOffset:I(-60,-60,-60,60),highlightColorOffsetAxisOverlay:I(0,0,0,40),effect:void 0,effectsText:!1,effectsDashboardSplitters:!1,lcjsBackgroundFillStyle:t,dashboardSplitterFillStyle:e,panelBackgroundFillStyle:i,seriesBackgroundFillStyle:s,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:n,axisTitleFillStyle:a,axisLabelMajorFillStyle:o,axisLabelMinorFillStyle:l,uiTextFillStyle:d,axisLineFillStyle:f,axisTickMajorFillStyle:y,axisGridMajorFillStyle:m,axisTickMinorFillStyle:S,axisGridMinorFillStyle:x,cursorGridFillStyle:v,legendBackgroundFillStyle:b,legendBackgroundBorderFillStyle:E,legendButtonDefaultColor:T,uiBackgroundColor:V,uiBackgroundBorderColor:F,uiStrokeColorContrastHigh:B,uiStrokeColorContrastMedium:z,uiStrokeColorContrastLow:L,dataStrokeColorContrastHigh:A,dataStrokeColorContrastMedium:R,dataColorPalette:w,dataColorPaletteInverted:[{area:I(210,70,70,100),border:I(200,110,110)}],dataHighlightOverlayColor:C,dataColorPositive:k,dataColorNegative:_,zoomBandChartDefocusOverlayFillStyle:new it({color:I(255,255,255,180)}),zoomBandChartSplitterColor:xs("#446A40"),zoomBandChartKnobFillStyle:ee=>new kn({source:ho(ee,"zoomBandChart/lightnature-selector.png"),fitMode:qi.Fill}),zoomBandChartKnobSize:{x:14,y:30},overrideThemeProperties:N,treeMapChartParentColor:xs("#EFF7EE"),treeMapChartNodeColors:jt,treeMapChartLabelFillStyle:new it({color:I(0,0,0)}),treeMapChartLabelHeaderFillStyle:new it({color:I(33,33,33)})},{positiveTextFillStyle:U,negativeTextFillStyle:O,positiveFillStyle:W,negativeFillStyle:P,positiveAreaFillStyle:H,negativeAreaFillStyle:j,positiveBackgroundFillStyle:Q,negativeBackgroundFillStyle:J,badGoodColorPalette:ht,coldHotColorPalette:ot,intensityColorPalette:ut,spectrogramColorPalette:dt,bollingerFillStyle:St,bollingerBorderFillStyle:Et,highlightPointColor:I(0,0,0),highlightDataGridColor:Vt,unfocusedDataColor:_t})}),CF=Tc(()=>{const r=I(255,255,255),t=new it({color:r}),e=!0,i=new p0({spread:1,blur:9,offset:{x:0,y:0},color:I(255,255,255,30)}),s=new it({color:I(6,15,36)}),n=new os({stops:[{color:I(46,13,87,50),offset:0},{color:I(0,0,0,150),offset:1}]}),a=new it({color:I(0,5,8,150)}),o=t,l=t,u=t,d=new it({color:I(255,255,220,130)}),f=t,y=new ps({angle:45,stops:[{offset:0,color:I(241,133,255,255)},{offset:1,color:I(115,207,238,255)}]}),m=t,S=new it({color:I(61,94,110,100)}),x=new it({color:I(61,94,110,255)}),v=new it({color:I(61,94,110,40)}),b=t,E=new it({color:I(0,18,23,255)}),T=t,V=I(115,207,238,255);new it({color:I(0,17,22,240)});const F=I(0,38,48,255),B=I(0,0,0),z=r,L=I(150,150,150),A=I(19,57,93),R=I(50,50,50),w=I(0,17,48);I(200,200,200);const C=[I(20,211,237,255),I(98,147,252,255),I(164,73,250,255),I(129,117,253,255),I(95,134,252,255),I(22,133,212,255),I(35,200,242,255),I(104,121,233,255),I(137,69,232,255),I(70,72,241,255)].map(ee=>({stroke:ee,border:ee,area:ee.setA(100)})),k=r.setA(50),_=I(3,217,194,255),X=I(243,21,110,255),N={mapChartFillStyle:new ps({angle:135,stops:[{color:I(118,248,231,255),offset:0},{color:I(45,177,255,255),offset:1}]}),spiderSeriesFillStyle:Uc(e,C,.5),pieChartSliceFillStylePalette:Oc(e,C,2),funnelChartSliceFillStylePalette:ta(e,C,1),pyramidChartSliceFillStylePalette:ta(e,C,1),rectangleSeriesFillStyle:Gc(e,C),gaugeChartGaugeFillStyle:Yc(e,C,1)},U=new it({color:I(20,211,237,255)}),O=new it({color:I(253,145,178,255)}),W=new it({color:I(20,211,237,255)}),P=new it({color:I(239,68,121,255)}),H=new it({color:I(20,211,237,120)}),j=new it({color:I(239,68,121,180)}),Q=new it({color:I(1,53,57,255)}),J=new it({color:I(94,19,42,255)}),ht=[I(174,51,132,255),I(204,107,218,255),I(189,215,253,255)],ot=[I(0,63,95,255),I(0,149,255,255),I(0,225,255,255),I(255,154,254,255),I(204,98,170,255),I(139,39,84,255)],ut=[I(197,241,255,255),I(70,210,255,255),I(0,164,217,255),I(90,99,222,255),I(138,75,192,255),I(151,27,162,255)],dt=[I(13,31,52,255),I(129,54,130,255),I(131,108,176,255),I(7,162,213,255),I(26,247,255,255)],Et=new os({stops:[{color:I(219,42,235,60),offset:0},{color:I(237,73,252,10),offset:1}]}),St=new it({color:I(237,73,252,255)}),Vt=H.getColor().setA(255),_t=I(8,70,100),jt=[I(149,230,255,150),I(93,213,243,150),I(20,189,223,150),I(5,151,181,150),I(2,138,198,150),I(2,113,198,150),I(97,148,236,150),I(93,111,230,150),I(151,120,223,150),I(128,87,227,150),I(153,52,230,150),I(179,92,245,150),I(248,110,211,150),I(255,155,228,150),I(251,88,207,150),I(255,0,162,150),I(214,73,177,150),I(209,71,159,150),I(238,101,169,150),I(210,57,134,150)];return Pc({isDark:e,highlightColorOffset:I(60,60,60,60),highlightColorOffsetAxisOverlay:I(255,255,255,40),effect:i,effectsText:!0,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:ee=>new kn({source:ho(ee,"themes/cyberSpace.jpg"),fitMode:qi.Fill}),dashboardSplitterFillStyle:s,panelBackgroundFillStyle:n,seriesBackgroundFillStyle:a,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:o,axisTitleFillStyle:l,axisLabelMajorFillStyle:u,axisLabelMinorFillStyle:d,uiTextFillStyle:f,axisLineFillStyle:y,axisTickMajorFillStyle:m,axisGridMajorFillStyle:S,axisTickMinorFillStyle:x,axisGridMinorFillStyle:v,cursorGridFillStyle:b,legendBackgroundFillStyle:E,legendBackgroundBorderFillStyle:T,legendButtonDefaultColor:V,uiBackgroundColor:F,uiBackgroundBorderColor:B,uiStrokeColorContrastHigh:z,uiStrokeColorContrastMedium:L,uiStrokeColorContrastLow:A,dataStrokeColorContrastHigh:R,dataStrokeColorContrastMedium:w,dataColorPalette:C,dataColorPaletteInverted:[{area:I(41,130,255,100),border:I(45,110,240)}],dataHighlightOverlayColor:k,dataColorPositive:_,dataColorNegative:X,zoomBandChartDefocusOverlayFillStyle:new it({color:I(0,0,0,180)}),zoomBandChartSplitterColor:xs("#DB77FF"),zoomBandChartKnobFillStyle:ee=>new kn({source:ho(ee,"zoomBandChart/cyberspace-selector.png"),fitMode:qi.Fill}),zoomBandChartKnobSize:{x:14,y:30},overrideThemeProperties:N,treeMapChartParentColor:xs("#1E1E3B"),treeMapChartNodeColors:jt,treeMapChartLabelFillStyle:new it({color:I(33,33,33)}),treeMapChartLabelHeaderFillStyle:new it({color:I(250,250,250)})},{positiveTextFillStyle:U,negativeTextFillStyle:O,positiveFillStyle:W,negativeFillStyle:P,positiveAreaFillStyle:H,negativeAreaFillStyle:j,positiveBackgroundFillStyle:Q,negativeBackgroundFillStyle:J,badGoodColorPalette:ht,coldHotColorPalette:ot,intensityColorPalette:ut,spectrogramColorPalette:dt,bollingerFillStyle:Et,bollingerBorderFillStyle:St,highlightPointColor:r,highlightDataGridColor:Vt,unfocusedDataColor:_t})}),Ko={};Object.defineProperty(Ko,"darkGold",{get:RF,enumerable:!0}),Object.defineProperty(Ko,"turquoiseHexagon",{get:EF,enumerable:!0}),Object.defineProperty(Ko,"light",{get:TF,enumerable:!0}),Object.defineProperty(Ko,"lightNature",{get:wF,enumerable:!0}),Object.defineProperty(Ko,"cyberSpace",{get:CF,enumerable:!0});const eE=Ko,hr=eE.darkGold,or=(r,t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAgCAYAAADwkoGKAAAsa2NhQlgAACxranVtYgAAAB5qdW1kYzJwYQARABCAAACqADibcQNjMnBhAAAALEVqdW1iAAAAR2p1bWRjMm1hABEAEIAAAKoAOJtxA3Vybjp1dWlkOjlmZDBkZjkzLTVmMDMtNDczYi1hZThhLTFhNDM4NmMzNmJhYQAAAAGzanVtYgAAAClqdW1kYzJhcwARABCAAACqADibcQNjMnBhLmFzc2VydGlvbnMAAAAA12p1bWIAAAAmanVtZGNib3IAEQAQgAAAqgA4m3EDYzJwYS5hY3Rpb25zAAAAAKljYm9yoWdhY3Rpb25zgaNmYWN0aW9ua2MycGEuZWRpdGVkbXNvZnR3YXJlQWdlbnRtQWRvYmUgRmlyZWZseXFkaWdpdGFsU291cmNlVHlwZXhTaHR0cDovL2N2LmlwdGMub3JnL25ld3Njb2Rlcy9kaWdpdGFsc291cmNldHlwZS9jb21wb3NpdGVXaXRoVHJhaW5lZEFsZ29yaXRobWljTWVkaWEAAACranVtYgAAAChqdW1kY2JvcgARABCAAACqADibcQNjMnBhLmhhc2guZGF0YQAAAAB7Y2JvcqVqZXhjbHVzaW9uc4GiZXN0YXJ0GCFmbGVuZ3RoGSx3ZG5hbWVuanVtYmYgbWFuaWZlc3RjYWxnZnNoYTI1NmRoYXNoWCBvErgv+J0u7bVCYViyMUgw5yMb8idAv1erA3/DALx9NWNwYWRIAAAAAAAAAAAAAAIDanVtYgAAACRqdW1kYzJjbAARABCAAACqADibcQNjMnBhLmNsYWltAAAAAddjYm9yqGhkYzp0aXRsZW9HZW5lcmF0ZWQgaW1hZ2VpZGM6Zm9ybWF0aWltYWdlL3BuZ2ppbnN0YW5jZUlEeCh4bXAuaWlkOjI3NEMxQjdDN0E0MDExRUVBQkZFQUNFQjJDOTA0NzVCb2NsYWltX2dlbmVyYXRvcng2QWRvYmVfUGhvdG9zaG9wLzI1LjIuMCBhZG9iZV9jMnBhLzAuNy42IGMycGEtcnMvMC4yNS4ydGNsYWltX2dlbmVyYXRvcl9pbmZvgb9kbmFtZW9BZG9iZSBQaG90b3Nob3BndmVyc2lvbmYyNS4yLjD/aXNpZ25hdHVyZXgZc2VsZiNqdW1iZj1jMnBhLnNpZ25hdHVyZWphc3NlcnRpb25zgqJjdXJseCdzZWxmI2p1bWJmPWMycGEuYXNzZXJ0aW9ucy9jMnBhLmFjdGlvbnNkaGFzaFggSmnBvf+o3kEweL4k7cz4MTrB0WSVNFZxoA1rBrM31K+iY3VybHgpc2VsZiNqdW1iZj1jMnBhLmFzc2VydGlvbnMvYzJwYS5oYXNoLmRhdGFkaGFzaFggL2g6Dghd536quyA5vPlS/9NGA5WvLRkkKJmqn0VxCoFjYWxnZnNoYTI1NgAAKEBqdW1iAAAAKGp1bWRjMmNzABEAEIAAAKoAOJtxA2MycGEuc2lnbmF0dXJlAAAAKBBjYm9y0oREoQE4JKNmc2lnVHN0oWl0c3RUb2tlbnOBoWN2YWxZDjYwgg4yMAMCAQAwgg4pBgkqhkiG9w0BBwKggg4aMIIOFgIBAzEPMA0GCWCGSAFlAwQCAQUAMIGCBgsqhkiG9w0BCRABBKBzBHEwbwIBAQYJYIZIAYb9bAcBMDEwDQYJYIZIAWUDBAIBBQAEIHj4VpJDPzaO0x4hOPnj/w1GTHuwXU0IpBf4VVocIQzoAhB3SsxvHza2JR1fKj3Mjr0yGA8yMDIzMTEwMzExNTcyNloCCQCyOL6wAOGCbaCCC70wggUHMIIC76ADAgECAhAFHp6R1x6RCrvkPVzt0N3ZMA0GCSqGSIb3DQEBCwUAMGMxCzAJBgNVBAYTAlVTMRcwFQYDVQQKEw5EaWdpQ2VydCwgSW5jLjE7MDkGA1UEAxMyRGlnaUNlcnQgVHJ1c3RlZCBHNCBSU0E0MDk2IFNIQTI1NiBUaW1lU3RhbXBpbmcgQ0EwHhcNMjMwOTA4MDAwMDAwWhcNMzQxMjA3MjM1OTU5WjBYMQswCQYDVQQGEwJVUzEXMBUGA1UEChMORGlnaUNlcnQsIEluYy4xMDAuBgNVBAMTJ0RpZ2lDZXJ0IEFkb2JlIEFBVEwgVGltZXN0YW1wIFJlc3BvbmRlcjBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IABE0srlH5A/+15/MFl1asNh8Q8TubOsEVfu0qlJrF0smjtwL1IeHZ/AB7J59u1Trpho1BDN85lfTY30rNBsfT+myjggGLMIIBhzAOBgNVHQ8BAf8EBAMCB4AwDAYDVR0TAQH/BAIwADAWBgNVHSUBAf8EDDAKBggrBgEFBQcDCDAgBgNVHSAEGTAXMAgGBmeBDAEEAjALBglghkgBhv1sBwEwHwYDVR0jBBgwFoAUuhbZbU2FL3MpdpovdYxqII+eyG8wHQYDVR0OBBYEFLA1qlbDIamLztO4vIsWJVed7zThMFoGA1UdHwRTMFEwT6BNoEuGSWh0dHA6Ly9jcmwzLmRpZ2ljZXJ0LmNvbS9EaWdpQ2VydFRydXN0ZWRHNFJTQTQwOTZTSEEyNTZUaW1lU3RhbXBpbmdDQS5jcmwwgZAGCCsGAQUFBwEBBIGDMIGAMCQGCCsGAQUFBzABhhhodHRwOi8vb2NzcC5kaWdpY2VydC5jb20wWAYIKwYBBQUHMAKGTGh0dHA6Ly9jYWNlcnRzLmRpZ2ljZXJ0LmNvbS9EaWdpQ2VydFRydXN0ZWRHNFJTQTQwOTZTSEEyNTZUaW1lU3RhbXBpbmdDQS5jcnQwDQYJKoZIhvcNAQELBQADggIBAHgrjELHhBCEWJSCyRX7lsL0C9LJgbX1ryVYySNRxHkMR2LqC7PQZRJgDNR+kJop8P5v2Bzp/jMrzw4U4pY6rYv3I8HpFlJa4uBwUTIUgHWpi8Xxd1JEEX94POODi7HySekX60A055BozFb7GGVaxb0LreQTRXnkr6ggPNUPX9Gh+2ScOxlTdQQLgZbkdYvxo3Ap6cy9riZijRxOZqiOyWSxMUhgKxeKzwrFW6Xbe0awNhOUXZzIxc4ixpKzWSItpPJ30ZiBQn49U3ADYTnshbN9ZkTA1pHf/Nov2ZUvvddkZ8UYvwo9vBvLTDvnmABnRMBKaXYAs3ZCvw9CkDPOWTeUJMFRAtmUx52ohaA3nD8bCJ6UfpQ2pFfOdShwpb6GKv0g+BgcdIG2LHPJ0Ufmr+XmpgZgq/HIge0hjcCADpjDgq2z4B0L4xtAA1M8MrUx02hxb7104nFKqMuv5zJTQl3sgwqXUyP+9zHQP9y/Z5Fx/AQWrOXCW56dV7P4cFBJl8zHqinlhkOStZ1m22+9Hlq+eC0hJ2lkF1LuzRdJJb/51LXoPKRnopFDng6XpoD7eG6w4YpAx9+P00JuUoBsYSrdsuFiyWyQQGBAnjI69ggbSLcW+hJytuinaxawVlItJkS2eV5Z4XsxPg7f82uRkdtN0hTHeI93CN3OWeRebnK7MIIGrjCCBJagAwIBAgIQBzY3tyRUfNhHrP0oZipeWzANBgkqhkiG9w0BAQsFADBiMQswCQYDVQQGEwJVUzEVMBMGA1UEChMMRGlnaUNlcnQgSW5jMRkwFwYDVQQLExB3d3cuZGlnaWNlcnQuY29tMSEwHwYDVQQDExhEaWdpQ2VydCBUcnVzdGVkIFJvb3QgRzQwHhcNMjIwMzIzMDAwMDAwWhcNMzcwMzIyMjM1OTU5WjBjMQswCQYDVQQGEwJVUzEXMBUGA1UEChMORGlnaUNlcnQsIEluYy4xOzA5BgNVBAMTMkRpZ2lDZXJ0IFRydXN0ZWQgRzQgUlNBNDA5NiBTSEEyNTYgVGltZVN0YW1waW5nIENBMIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAxoY1BkmzwT1ySVFVxyUDxPKRN6mXUaHW0oPRnkyibaCwzIP5WvYRoUQVQl+kiPNo+n3znIkLf50fng8zH1ATCyZzlm34V6gCff1DtITaEfFzsbPuK4CEiiIY3+vaPcQXf6sZKz5C3GeO6lE98NZW1OcoLevTsbV15x8GZY2UKdPZ7Gnf2ZCHRgB720RBidx8ald68Dd5n12sy+iEZLRS8nZH92GDGd1ftFQLIWhuNyG7QKxfst5Kfc71ORJn7w6lY2zkpsUdzTYNXNXmG6jBZHRAp8ByxbpOH7G1WE15/tePc5OsLDnipUjW8LAxE6lXKZYnLvWHpo9OdhVVJnCYJn+gGkcgQ+NDY4B7dW4nJZCYOjgRs/b2nuY7W+yB3iIU2YIqx5K/oN7jPqJz+ucfWmyU8lKVEStYdEAoq3NDzt9KoRxrOMUp88qqlnNCaJ+2RrOdOqPVA+C/8KI8ykLcGEh/FDTP0kyr75s9/g64ZCr6dSgkQe1CvwWcZklSUPRR8zZJTYsg0ixXNXkrqPNFYLwjjVj33GHek/45wPmyMKVM1+mYSlg+0wOI/rOP015LdhJRk8mMDDtbiiKowSYI+RQQEgN9XyO7ZONj4KbhPvbCdLI/Hgl27KtdRnXiYKNYCQEoAA6EVO7O6V3IXjASvUaetdN2udIOa5kM0jO0zbECAwEAAaOCAV0wggFZMBIGA1UdEwEB/wQIMAYBAf8CAQAwHQYDVR0OBBYEFLoW2W1NhS9zKXaaL3WMaiCPnshvMB8GA1UdIwQYMBaAFOzX44LScV1kTN8uZz/nupiuHA9PMA4GA1UdDwEB/wQEAwIBhjATBgNVHSUEDDAKBggrBgEFBQcDCDB3BggrBgEFBQcBAQRrMGkwJAYIKwYBBQUHMAGGGGh0dHA6Ly9vY3NwLmRpZ2ljZXJ0LmNvbTBBBggrBgEFBQcwAoY1aHR0cDovL2NhY2VydHMuZGlnaWNlcnQuY29tL0RpZ2lDZXJ0VHJ1c3RlZFJvb3RHNC5jcnQwQwYDVR0fBDwwOjA4oDagNIYyaHR0cDovL2NybDMuZGlnaWNlcnQuY29tL0RpZ2lDZXJ0VHJ1c3RlZFJvb3RHNC5jcmwwIAYDVR0gBBkwFzAIBgZngQwBBAIwCwYJYIZIAYb9bAcBMA0GCSqGSIb3DQEBCwUAA4ICAQB9WY7Ak7ZvmKlEIgF+ZtbYIULhsBguEE0TzzBTzr8Y+8dQXeJLKftwig2qKWn8acHPHQfpPmDI2AvlXFvXbYf6hCAlNDFnzbYSlm/EUExiHQwIgqgWvalWzxVzjQEiJc6VaT9Hd/tydBTX/6tPiix6q4XNQ1/tYLaqT5Fmniye4Iqs5f2MvGQmh2ySvZ180HAKfO+ovHVPulr3qRCyXen/KFSJ8NWKcXZl2szwcqMj+sAngkSumScbqyQeJsG33irr9p6xeZmBo1aGqwpFyd/EjaDnmPv7pp1yr8THwcFqcdnGE4AJxLafzYeHJLtPo0m5d2aR8XKc6UsCUqc3fpNTrDsdCEkPlM05et3/JWOZJyw9P2un8WbDQc1PtkCbISFA0LcTJM3cHXg65J6t5TRxktcma+Q4c6umAU+9Pzt4rUyt+8SVe+0KXzM5h0F4ejjpnOHdI/0dKNPH+ejxmF/7K9h+8kaddSweJywm228Vex4Ziza4k9Tm8heZWcpw8De/mADfIBZPJ/tgZxahZrrdVcA6KYawmKAr7ZVBtzrVFZgxtGIJDwq9gdkT/r+k0fNX2bwE+oLeMt8EifAAzV3C+dAjfwAL5HYCJtnwZXZCpimHCUcr5n8apIUP/JiW9lVUKx+A+sDyDivl1vupL0QVSucTDh3bNzgaoSv27dZ8/DGCAbgwggG0AgEBMHcwYzELMAkGA1UEBhMCVVMxFzAVBgNVBAoTDkRpZ2lDZXJ0LCBJbmMuMTswOQYDVQQDEzJEaWdpQ2VydCBUcnVzdGVkIEc0IFJTQTQwOTYgU0hBMjU2IFRpbWVTdGFtcGluZyBDQQIQBR6ekdcekQq75D1c7dDd2TANBglghkgBZQMEAgEFAKCB0TAaBgkqhkiG9w0BCQMxDQYLKoZIhvcNAQkQAQQwHAYJKoZIhvcNAQkFMQ8XDTIzMTEwMzExNTcyNlowKwYLKoZIhvcNAQkQAgwxHDAaMBgwFgQU2Rq5M/4XremCHqYT9aQ6cU4+fn0wLwYJKoZIhvcNAQkEMSIEIGmY+GsCefCDmP0PFcYjdxBUfi0EgKYuEZb9pUMyLNuVMDcGCyqGSIb3DQEJEAIvMSgwJjAkMCIEIILa8ZSVezaEAkWP1ScAaf5ixxRW+p4Lhqv4J+hTICfZMAoGCCqGSM49BAMCBEcwRQIgcxxuf7QHV9Fkpj1VhPrFqhNFh8dZzl8qUU/2N3Sr4eoCIQDKu0KGYL++CSsDAXjJciMDbr5ImTy3jw0yQU5GYYeLimd4NWNoYWluglkGMzCCBi8wggQXoAMCAQICEBtbCzvasORd8vMNnlTR2tIwDQYJKoZIhvcNAQELBQAwdTELMAkGA1UEBhMCVVMxIzAhBgNVBAoTGkFkb2JlIFN5c3RlbXMgSW5jb3Jwb3JhdGVkMR0wGwYDVQQLExRBZG9iZSBUcnVzdCBTZXJ2aWNlczEiMCAGA1UEAxMZQWRvYmUgUHJvZHVjdCBTZXJ2aWNlcyBHMzAeFw0yMzAyMDEwMDAwMDBaFw0yNDAyMDEyMzU5NTlaMIGhMREwDwYDVQQDDAhjYWktcHJvZDEcMBoGA1UECwwTQ29udGVudCBDcmVkZW50aWFsczETMBEGA1UECgwKQWRvYmUgSW5jLjERMA8GA1UEBwwIU2FuIEpvc2UxEzARBgNVBAgMCkNhbGlmb3JuaWExCzAJBgNVBAYTAlVTMSQwIgYJKoZIhvcNAQkBFhVncnAtY2FpLW9wc0BhZG9iZS5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDv0wCnfYY9lkHDsykrTG7FYlnYHBcyualuD5u9ULjzv+FsTWOLg8Nhrz9RTxI9EeBbu3Wm7f4vqPsQYfxkEp0wIa6DVmEOZhbAeRfbhybWQ/D4Wvvck4mEZR+QZmTpIn7HX61gbtMFHlJUxkYBctIoAt9TBAFbz9d5Ig2WG0bsH39b6/8USXnIIk4FB6dtBRT1xeEwSDtwOd1YBpXXNBJmRWHXNJZZ85of2tBTesg/kMvTrOJJxYDZ97U416wcvbVomlees+NXUY3/ZB4xH+NsZils7m1bL2v2hSnHiLoqZeUKklbHUmT4ZpjrZCdtuIsWm5j2PPXKr7HKUuCbZSXBAgMBAAWjggGMMIIBiDAMBgNVHRMBAf8EAjAAMA4GA1UdDwEB/wQEAwIHgDAeBgNVHSUEFzAVBgkqhkiG9y8BAQwGCCsGAQUFBwMEMIGOBgNVHSAEgYYwgYMwgYAGCSqGSIb3LwECAzBzMHEGCCsGAQUFBwICMGUMY1lvdSBhcmUgbm90IHBlcm1pdHRlZCB0byB1c2UgdGhpcyBMaWNlbnNlIENlcnRpZmljYXRlIGV4Y2VwdCBhcyBwZXJtaXR0ZWQgYnkgdGhlIGxpY2Vuc2UgYWdyZWVtZW50LjBdBgNVHR8EVjBUMFKgUKBOhkxodHRwOi8vcGtpLWNybC5zeW1hdXRoLmNvbS9jYV83YTVjM2EwYzczMTE3NDA2YWRkMTkzMTJiYzFiYzIzZi9MYXRlc3RDUkwuY3JsMDcGCCsGAQUFBwEBBCswKTAnBggrBgEFBQcwAYYbaHR0cDovL3BraS1vY3NwLnN5bWF1dGguY29tMB8GA1UdIwQYMBaAFFcpejJNzP7kNU7AHyRzznNTq99qMA0GCSqGSIb3DQEBCwUAA4ICAQBXjlGa3yAK/Gijn6n/JNU9FZm72MP6vc5czrWe9y0T+EawuRvhpD5Edi1TnXkrpe8sMkgSjTGdbY+yGhq8zlCWQeXN1/aWo3L9Xr1uNxY/oVpLn0uWWfnfJ7yR9gKl/yoMfhjydT4t1fXHi/MhfhrWSVRHqX2U31UFGz/e298P2kv+vqhzpIUo1bj+jibtoPLMMQcCOTtKiJOTh4o3VSZpwQDERCzo91NkF+LnZjwYl6fE5USIkg/oCoomXxSPpowybDrcRJ9ilbtJcER48/LGgwzv/c7OYdron4PnEXm1FkOaVj+QRf7OwiNTizonhIzLR5Vfp0QHOWv/bPzvCjPQd+Xr0Q4032WlSxQwostNTAPtoVAU4OCwVH3Ech38emJ00/6fkDCdr7MN8/4n2LSNrMUvaBEZdmLqDCBnO02dbFrmpg3pTc0FqRQ4GL/88pjRNSMy5tU9SoQnSCGYqIsjfL8AzgPEGiXXRgABYc1uXecf4/eayb3K2MPs7hnWTbUKpHHJIwxpdN3vTGdZNWpz9Oxfuo3eELQlkTvACHgqkaXi/FAanHe5PChn6fr1/4cNF8goD0buPApgS3zzwqjRhxrH8ISwPfJn8JqzurMaLDMnnc18tHzUiMtX73jf6oXh7voCxX/T4D3nFPlxU3om2cpcLQ1Wd4026x18rlSGR1kGpTCCBqEwggSJoAMCAQICEAyotlR7iebSBol1zYubieIwDQYJKoZIhvcNAQELBQAwbDELMAkGA1UEBhMCVVMxIzAhBgNVBAoTGkFkb2JlIFN5c3RlbXMgSW5jb3Jwb3JhdGVkMR0wGwYDVQQLExRBZG9iZSBUcnVzdCBTZXJ2aWNlczEZMBcGA1UEAxMQQWRvYmUgUm9vdCBDQSBHMjAeFw0xNjExMjkwMDAwMDBaFw00MTExMjgyMzU5NTlaMHUxCzAJBgNVBAYTAlVTMSMwIQYDVQQKExpBZG9iZSBTeXN0ZW1zIEluY29ycG9yYXRlZDEdMBsGA1UECxMUQWRvYmUgVHJ1c3QgU2VydmljZXMxIjAgBgNVBAMTGUFkb2JlIFByb2R1Y3QgU2VydmljZXMgRzMwggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQC3Hy69vQmzXEhs/gyDrmwB6lF4JaSAPomnsbKIZNr2iXaB+fkd85X8eJiNmI7P5O4cVT4Nc1p3zrESqBV4ZUyW8gcZ78QdwoHG8QNd2VNcHnMgSR+XT9Iafsnq9Nfww3Jt9KL3l5ANQ5n1+MJqr48EWNLll942bOL/JH4ywDSMoqhZqtJEIUUUGlQVBZ8CAvJc7LE6ddA5C52PE2Ppa7RfQgHXf4gfXVZwpxYRZcziPiOHqEvLb0J3cShUbejFxV6cwX8QyAPa1ePHg1RtM0HX+D34xHo3DkyGnmT+Ddq00TEDGG26AL5PdINKFIQl+zaq6KJFQe1fdGE5wrWzU4mBPmzaz3EbLn+7FWlwAhorYqIMldbfHE3ydc+aTU1JW7+bG19qmvhO9IluGtTtQDeqFBj2fg6faxsfVfVPD7stN6TwoIDlkOCE4RE+Iin8m3z3eqi/VsTmsmRqBxWDRaqOHz02EJoEDxXJG3ei+UbIIp01XZQvdufm90WxOTuqqan2ZqTPX9K5VdjEh/ovr7xFc5q1dZo+Sa5y4sTVM854/tLU3klOgUKzzSXYPYS3GhBcYJHjwr9xNRHnNX99D6F0g7OijScWfvtjxh13aTv/H0ETvymah4yfDpVdh9cK5YSCPqnuOlsujFAyhYwJXOWDvZZU2EkWVLDhoPx9zp7N4QIDAQABo4IBNDCCATAwEgYDVR0TAQH/BAgwBgEB/wIBADA1BgNVHR8ELjAsMCqgKKAmhiRodHRwOi8vY3JsLmFkb2JlLmNvbS9hZG9iZXJvb3RnMi5jcmwwDgYDVR0PAQH/BAQDAgEGMBQGA1UdJQQNMAsGCSqGSIb3LwEBBzBXBgNVHSAEUDBOMEwGCSqGSIb3LwECAzA/MD0GCCsGAQUFBwIBFjFodHRwczovL3d3dy5hZG9iZS5jb20vbWlzYy9wa2kvcHJvZF9zdmNlX2Nwcy5odG1sMCQGA1UdEQQdMBukGTAXMRUwEwYDVQQDEwxTWU1DLTQwOTYtMzMwHQYDVR0OBBYEFFcpejJNzP7kNU7AHyRzznNTq99qMB8GA1UdIwQYMBaAFKYc4W1UJEyoj0hyv26pjNXk7DHUMA0GCSqGSIb3DQEBCwUAA4ICAQBxzuUHjKbcLdzI4DtlXgCSgZXrlSAkr59pOF3JfPG42qVNAGU7JcEYXJ6+WbfcGwY7WYMl+jO7IvJPb7shXFYW9bnJgxX7lLU14KExchmcLNY1ee6IhBJ2Y8PzZMRUKSd5CkURPg0PBLGjz/KR/DofHx+G4rPTCOGORYxeYrd01lci5hVxvKccvIk7MD69ZTewfZPSM+0WnsU3f0Zmd7hgbRpUyWceG0eHFpdUKK/ZFWhHjDVC28odCnN885tHncKXviItK0ZUUo/AIthFKlhEXsnq9VL9fFbgvO83ZvpUQo5y8mY3cuGnEVGXdhjNb53CfC1u4dbpYmWaN99subUzEsUaUb3loLPfVfzDOpg2y9v37kBdy/wuXr20teY7U62xj/fAgs1QSnhUtlMTfCqbefyEycKVmKIrJkJLsvgTSYKVvH4FFIwfd5WjqOC97jX98rcVAzhAI0iSkazsWOMvL6m0L4nLJapx+85GsVX8Y6AHmEP4bmCElwil6KAP+UewJFiw5rmwV2pESHAhYuZJa03B8tl0nd2QJzvJGmbeBqXqpF9ORinFM3HErK8puRokOjFH2+1asLeI2tB31W/ELdNe27Ogduq6Z6qBwCp59YX27qydDhD0WRfN64kCs25K88iGAGNW2CAfTDS+b+WYJBiIL9jXYZ4LF+BiUvfdu2NwYWRZC70AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPZZAQBKX2Q2ihN2fLDLReHISpfOF0xIqNpOZXbBwZ0XanWG98erbIBdawl7r9nVma/uZjYH457wp00TVpKYUTJHMnzJMKskvM2Df4K6t5pUKGtJqEvMXLUy3g9kJq53aYDwikcUE+8wv+CYtu/+vii4XYSXQIxT4NN+JKoTDXmrNH1G46Nmpfq6SKk0g9GQ2brbkW3fzGR0xDxY3BXRy71guSBxN9TAbQGqUjMnkIyBcwV9wUQ2oCW9oIMNKASjW0CRkcFEzzmrQ+y+zHYpNvUaG7QehHcyhvOec3plzlyP6DZeQWp3PHA5bmonI8t5j6Qj15X1KnQiXuJ0rW+xoMA89aIVmpx4VgAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAOSaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA5LjEtYzAwMSA3OS4xNDYyODk5Nzc3LCAyMDIzLzA2LzI1LTIzOjU3OjE0ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjYyYTdmYWExLWJmZTMtMjE0Ny04MjAwLWMxM2NlMGU4ZTc1NCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoyNzRDMUI3RDdBNDAxMUVFQUJGRUFDRUIyQzkwNDc1QiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoyNzRDMUI3QzdBNDAxMUVFQUJGRUFDRUIyQzkwNDc1QiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjUuMiAoMjAyMzEwMjQubS4yMzc0IDRhYjk0MzkpICAoV2luZG93cykiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDphYjQzZjNjYy1hNTY4LTRkNGQtOTdiZC1iYjk0YjBlZjhjYmQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NjJhN2ZhYTEtYmZlMy0yMTQ3LTgyMDAtYzEzY2UwZThlNzU0Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+HNvo5wAADZFJREFUeNrsXFtPVUkW3gc4yP0qDigKON517FFbHRGn1TamjaOJvvhsjIkvPplgfEKe1AefNDE+GP+AmWTszPTYcbpn2piJzc1GWwlOekRBEBFQ7jeZ9ZVrnVkUtfc5CGp3h5VU9qUuu3bVV9+67DonND4+7omEQiHPJaWlpYlxcXGLKX8epTCdB5aXNnHU6c2bN5POcaREp+O9dHxSX1/f5s3KL1ImYCkasMrKyvIISJspD+AyZSTpOrodDSaIBpQCkwtgSM8oVd2/f39M2quoqAijmcrKyjG/l7L77vde+v6sfCRgbdu2LY3AtJNSgg0qDa5oTOViKQtM9nXTgQMHaqmpPEoLKXUQqJpcYIqPj/cSEhLMUZgUbYyNjZkjRPpu50n+VEUvKtditMEb7Xom5OrVqzvpkOXIukFps5XXTunO4cOHR7heKp1/ye1gEX9BCcdv6H4330cbCyh9iXrRgJUQ1FmarFWUIqDS4ApiCT9AobxMpj24uI/209LSvMLCwiLKz6fyQModAlW73TeAac6cOV5SUpIBlasv9qKRvgBYIyMj3tDQkDmPdaLRPzwrHA6bhGsNWr9xsMfEZnC7XDSg+tzv4lRCCRPfjJtHjhzpu3LlCkDVx4BKZICsx9gy4PT4rmFQQbIpdfM5ynX7gWrS/Phl7NixI0SDWCCD52Is14vqAXIByoluAkl+fr43f/58Lyvr7cIaHh4OJSYmfkug6rXZApOamprqUb6vned3X4CBujj29/cbkEl/7EUj74o+og4S2gh6xkypk6mUPXnyZN25c+fCDKzm8vLyOuQzqCAtJ06cuH/+/PkwAytMLCR57VjQFy5cmKeAiXJZGOeLFy/iPBVt4Nqeb60dogKLBm9O/FvxXIwVxBAaUBpgixYt8np7e7329vYJZUtKSkwSefHihVdTU9N2586dXrtfmNj09HQz0dMRvAsYD0dhLryrvG8s7/w+ZCrPcJSdx8duAb+6l0WgWqeu/8uMZMoDWCTr+BpMVoZ8jLUq18XXgdohEFg0cXF6kF2s5Uf9NqBwxL0FCxaYSXz58qWZSNzr6+vzioqKIm01NTV5ZLgbT9HuExgGAzBdUOmJEeb6EKD5AJKt1KJ9TwAFNrpz6tSpljNnzgiQuuh8DbNSNx9HlF0mx26/cbTHLy6AsSKGcVCyjWepJwnS2trqbdiwwZyDJaDyUBbslZmZGTG6Hz9+7D18+NDdUSqTkpIyY6B6V5b4mYsBAIGm27rXR/f+DFXGKm5Ega6P7a5lqvw6sbMIcFkKlCUAI6esQI0QBCwBjxirNqCkDACSkZFhQKLVCSassbHR27Jli6kvsnDhQnN8/vy5t3Hjxsj95ubmSQ6CVoEA5a8IBO+LsSKgoskPKxaC1DKo1mmDXF1/AwAyCO+rNoX1FrANVqLA6V6sfuGGgwcPphBovrCBIuwCgRp7+vSpAUd2dra5bmtrM6pvdHTUu3fvnrGdNHhEbt265XV1dXn79+9/y8V0XltbGwkDkKpsqqqqqhG2AmgBrFn5+Qo0Uyw21gRm0kwCLwqAAgC2b99u2AQCVYWyACtUGkRUoC2bNm0yYBIBe/l5ncKaWmg1hrj/47TCRu32ebUam4LyAweEymK1QG+PUdk3PmXCrGZicrej9e99CD0znvs4NsPtRh2fmMMNLmBBYHgDmTC4ly1bNslWAbhu375tyh06dGgCw2kB+yDEAIEh39HR4RsjE+/NkgJKf0DwlNJ3jkndi2Yo/QXOZ5RxWElpOaUqSk99QLWPErzUr2OcD+j7T+GPUKqZocldyu2mWWbMv1mt4T3q2OObSVnNz46MD49xMfelE85ArOGGiA2FSR0cHDRggVe3fv16Lzc317cXCBeUlZUZu8sVBLUF7YrnaDMWygsjWpLJx1eOvCS8LKX+GFeYdPS1T356wLOC7NcOK/g4HSbaSmku2zZtlo0D6l8U5R2mIxmO91/F79iP8aY+lmhAR2Us09PXr439hAles2ZNoK2Tl5dnwgorV66clHfz5k1v165dk8CFuJYfWwm4/Twgn4FMZqO0U00OPg/lsgck0k3Ae6JACq8HamsAJgPl9fOAzef8VLpey1HtVGXUQoZ45b7QawzgojqpauJNZIYnpEXUFpWZw8ZxMqsdEdgUixlUqPMt1RlygE8mv4jO5/M7tFHZXs4HI+uJG4YFQvldnF+sAPRGjd8SSjl8fzGVG6I6Dxk76GcKl8uOlbESh4eHDVOBpWCcQ/1F88qQv2fPnknlnjx5YsIJOBYXF/9/NqhtANcV8ZbYlc8zswJYJJ8H5Eem7A3WxEYmjdVcigycyltBeV/RsVANbDKDrJnL5jom+Dsa+A5e0WDOn7g/Kx3PR/06qpPDjBS28gG6e6pfDT6gimeV5LF6iqh4focxHo84Ne8hzv8ng2sJA6tfjUedROkZbPkqRhbie8JauTEBi7y6ePncAQaaO3fulKLaWgDQgYEBoxrh+WlgiW3l9znFNtp5IBN5kv0YS6vJYgYVVlU120mfUPot58sqbeaBxJh8zqs7TIN+i573R2aMfykGQD2w21dcfx2DMI3yXjOosLqH6Fr6U8VqDHGhzVw2ns8T2BaTWNMefrc09a7PA1R1iNuuYibZwfXmUB8Qq/qrZa9tZjs1i65fcRswHf5O1zuYgZ7yeG1jdq3SbM9gauFF8yimOBYABaN66dKlUwKVS0TVQT2+evVqgjcIYAWxXxQ12O/jcWUq0MlqvwtQsIeo8zOUWoQHOcCTNMbqQsqPcTARE5PCk/+a64woB6HPYf/JMzq57KgqW8AAaKa8Jn4fbfOlKe92wGeoMq13GFQqdwD95aDmZ5Q+Z9AJwwwoYL5Wn3vqHH2JCOU9pkMjg7jWMgH8GYtspVx8cIwW6QYDrV271rccgATGAkhgm8GTfPDggbd161YTWIUqdLGVnPt4lQKsQQebJTCVj7CNlO4YmAwFlCUaBAo0XVR/nK6T+RqTNh5g7GuwLrTyMxlMfY760r/eKI4J+hJSffA1rlm9o989DK5SLtOmnpOm+pCr6zNoojpJVK6HnxFbuKGiomI5u5hRQVVdXW0+0UjowGa97u6Jn5ewewExMIAN3mA0lepjX8nLgsYXMy2P8SAmWJM6zGoJhnkrr7BEBRwbJLYHJJ/zQ5gwZhx7IkMMkEFWfZF8BcxOFU9zAes33L9+yzERMKLP66nMM8V4HjNFpgPI0r9kft4AmwLjzE4wD0Z58S0OMCvk/RMDgB1zHGtZtIoIgopKe/TokRNYnZ2dzroAIsAFo93Vrq0OAxgLdPZ7TZBsLOtBAl2vZbvqE1VWT4JWM/YkDfJk4P4+GtxqR5l07otrYjMdk6Ydj24ebxjwO23CZ6A+YGegiJOn+vY3xcC9jncY5TwA7E92+zGEW/r5+CnbUjdijbXYbJXs8E6ck11aWmp2G+B7oC1Qc2AsP+AAVHqT3RR3Vd5nQ9dO93hw6ik95hX9H7jonF/PIQBjj7ARC9f5rhUTQrlWrt/L9e/y/XbOq1ce0ihfy0A85useZop6K2gJ8P8A0FACo/7De7tV5Qd4sgIa8QDp2IBoDTNOvU7Mlo1sQ44rwNSzwS3t19l14WWq/tb4qLW76rn3Yp2gSd8KCVjwWMqC1JP6nmei8Ddu3DBRdgmI4jshDHbkByVpQ5+rY9P3339fk5OT46m9RVMNLGLQf2cxdCGff62M3I8m1EcY73nqVg4nhBYe/FK+EwJH+E4cpAozgxoQlhEQwGNctWqVUW2rV6+OGOx++96jbcm193bJBrx3lBQV3NRu8o+xgCrWvervsoddWD8pKamQ40Py9QEM00htNrzrnvxY3yeW/kUTIRlbO7kYa4OlxyMsZG87loQ8Yhdv9+7dJkIPYGk28mOrFStWGOMeux+wdx0foq9fvx7Z3QDGgmeK9D63y8j74D2QpI+unZHTAZdsgJzKxE33vfQzowEuluC3q57eyx/EWBn2DQQ3MdDa9bd/xrV8+fLIpx8beH4/HigoKHgbKi4u9s6ePeuVl5cbYOkOIxwB0M30Bj+0DRDhy4LE7KSfszJ9SbAMd0+5vxEjG6EB+SWMRq3eepycnGwMdq0mfX7aNWHbsrAhovvXrl2bpCKRB2DDSZjuKpd2AVa0qX9EMSszK3GOmEWCjopLgBMJE4GEyZajVh8OA9zJXBpUOL98+bJ37Ngxr6WlRbPbuIABrILPS+8KAtRD/3t6ekzsTBbLLKg+HLC0GrxLkzCmAaWTDSptm0QDGf92cMKvdy5duuQdPXpU6+sB7TAAWFCzOI8VTCiLOoinIeaGNqbyO8JZmXlg3a2srPyJANQqQHIBTIPLBlYQc8GTxM5SAdHevXvNr3NgSylGe2Z7owAG2AZHcSbshHJgOJQDoCSeNgumj2hjMbAMqHBBE/IAv0imiU6AjSUGvN9Pv1z2lAtc2AiILTg4r6mpMfGP48ePew0NDdJGU21t7SuXaysAt3e26l85z7LSx5cJ4YbTp0/PJVBN2G6wb9++PJrAzdif5fpBhTaK/f70I1qygPeMrqvq6upi0nmuPyWZlY8XJPWNY7mEVJX5GyNK8yiFg34J7fM3RYEgIyCN09H8jVF1dfXs3xj9CoD1PwEGAKorJqR4atjIAAAAAElFTkSuQmCC")=>{let e,i=0,s=0;const n=[],a=d=>{const f=new nt.Image;f.src=d,f.onload=()=>{n.forEach(y=>{var m;const S=new kn({source:f,fitMode:qi.Stretch});(m=y.Rd)===null||m===void 0||m.Ce(S),i=f.width,s=f.height,u(y)})}};a(t);const o=r.Gn(d=>a(d));let l;if(new nt.Image instanceof nt.HTMLImageElement){const d=new nt.Image;d.src=t,l=new kn({source:d,fitMode:qi.Stretch})}else if(nt.lcjs_setup){const d=new nt.Image;d.src=t;const f=nt.lcjs_setup(d.naturalWidth,d.naturalHeight);f.getContext("2d").drawImage(d,0,0),l=new kn({source:f,fitMode:qi.Stretch})}else l=new it({color:xs("#f00")});const u=d=>{if(d.Rd){const f=d.dt.mi({x:d.dt.x.getInnerEnd(),y:d.dt.y.getInnerStart()},{x:-(3+i),y:3}),y=d.dt.mi({x:d.dt.x.getInnerEnd(),y:d.dt.y.getInnerStart()},{x:-3,y:3+s}),m={x:y.x-f.x,y:y.y-f.y};d.Rd.Fe(f).q(m)}e&&e.Ss()};return e=r.FI("logo",Number.MAX_SAFE_INTEGER),d=>{const f={dt:d};return(y=>{y.Rd&&y.Rd.dispose(),e&&(y.Rd=e.ke(y.dt).Ce(l).setMouseInteractions(!0).we(At).setMouseEnterEventHandler(()=>{r.Wr(ne.Point)}).setMouseLeaveEventHandler(()=>{r.Wr(ne.None)}).setMouseClickEventHandler(Ib).setTouchEndEventHandler(Ib),u(y))})(f),n.push(f),{Ps:()=>u(f),W:()=>(y=>{y.Rd&&(y.Rd.dispose(),y.Rd=void 0);const m=n.indexOf(y);m>=0&&n.splice(m,1),n.length<=0&&r.Wn(o)})(f)}}},Ib=()=>nt.open("https://lightningchart.com/lightningchart-js/");class kF{constructor(){this.mR=this.dP.bind(this),nt.addEventListener("scroll",this.mR,{passive:!0})}W(){this.mR&&nt.removeEventListener("scroll",this.mR),this.mR=void 0}}class Sf{constructor(t,e){this.ma=t,this.X=e,this.yR=!0,this.pR=null,this.SR=null}}class cm{constructor(t){this.vR=!1,this.bR=1,this.xR=t,this.MR={ma:Y(0,0),X:Y(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),yR:!0,pR:null,SR:null},this._R=Y(64,64),this.wR=new Uint8ClampedArray(this._R.x*this._R.y*this.bR)}CR(t,e){if(!t.yR)return null;if(t.pR&&t.SR){const u=this.CR(t.pR,e);return u!==null?u:this.CR(t.SR,e)}const i=Jn(t.X.x,t.X.y);if(t.ma.x+t.X.x>=Number.MAX_SAFE_INTEGER&&(i.x=this._R.x-t.ma.x-1),t.ma.y+t.X.y>=Number.MAX_SAFE_INTEGER&&(i.y=this._R.y-t.ma.y-1),t.X.x===e.x&&t.X.y===e.y)return t.yR=!1,t;if(i.x<e.x||i.y<e.y)return null;let s,n;const a=i.x-e.x,o=i.y-e.y;let l=a<o;return a===0&&o===0&&(l=!(t.X.x>t.X.y)),l?(s=new Sf(zt(t.ma,{x:0,y:1}),Y(t.X.x,e.y)),n=new Sf(zt(t.ma,{x:0,y:e.y+1}),Y(t.X.x,t.X.y-1-e.y))):(s=new Sf(zt(t.ma,{x:1,y:0}),Y(e.x,t.X.y)),n=new Sf(zt(t.ma,{x:e.x+1,y:0}),Y(t.X.x-1-e.x,t.X.y))),t.pR=s,t.SR=n,this.CR(t.pR,e)}kR(t,e){const i={TR:!1,ma:null};let s=this.CR(this.MR,e);if(s===null)for(;s===null&&this._R.x<this.xR&&this._R.y<this.xR;){if(!this.FR(Y(2*this._R.x,2*this._R.y)))return this.vR=!0,null;i.TR=!0,s=this.CR(this.MR,e)}if(s===null)return this.vR=!0,null;for(let n=0;n<e.y;n+=1)for(let a=0;a<e.x;a+=1){const o=s.ma.y+n,l=s.ma.x+a;this.wR[o*this.bR*this._R.x+l*this.bR+0]=t[n*this.bR*e.x+a*this.bR+0]}return i.ma=s.ma,i}FR(t){if(t.x>this.xR||t.y>this.xR)return!1;const e=new Uint8ClampedArray(t.x*t.y*this.bR);for(let i=0;i<this._R.y;i+=1)for(let s=0;s<this._R.x;s+=1)e[i*t.x*this.bR+s*this.bR+0]=this.wR[i*this._R.x*this.bR+s*this.bR+0];return this._R=t,this.wR=e,!0}}class DF{constructor(t){this.IR=new Map,this.xR=t,this.IR.set(this.IR.size,new cm(this.xR))}PR(t){return this.IR.get(t)}kR(t,e){let i=-1;const s=Array.from(this.IR.values());for(let o=0;o<s.length;o+=1){const l=s[o];if(!l)break;if(!l.vR){i=o;break}}i===-1&&(i=this.IR.size,this.IR.set(this.IR.size,new cm(this.xR)));const n=this.IR.get(i);if(!n)return null;let a=n.kR(t,e);if(!a&&n.vR){const o=this.IR.size,l=new cm(this.xR);this.IR.set(o,l),i=o,a=l.kR(t,e)}return a?{DR:i,...a}:null}}var ba;(function(r){r[r.Fail=0]="Fail",r[r.Success=1]="Success",r[r.Resize=2]="Resize"})(ba||(ba={}));const FF=wp("font-texture");class VF{constructor(t){this.BR=new Map,this.LR=new Map,this.No=FF(),this.RR=t,this.ER=new DF(this.RR.zR||4096)}VR(){return this.LR.forEach(t=>{this.RR.OR(t)}),this.LR.clear(),this}NR(t,e){const i=this.BR.get(e);if(i)return i.get(t)}GR(t,e,i){let s=this.BR.get(e);if(s||(s=new Map,this.BR.set(e,s)),s.has(t.glyph))return ba.Success;const n=this.ER.kR(i,t.size);if(!n||!n.ma)return ba.Fail;n.TR&&this.WR();const a=this.ER.PR(n.DR);if(!a)return ba.Fail;let o=this.LR.get(n.DR);if(!o){const z=this.RR.gl.createTexture();if(!z)throw new Ri("Failed to create texture for font!");o=z,this.LR.set(n.DR,z)}const l=n.ma,u=a._R.x,d=a._R.y,f=-t.offsetX,y=t.baseline-t.size.y,m=-t.offsetX+t.size.x,S=t.baseline,x=l.x/u,v=(l.y+t.size.y)/d,b=(l.x+t.size.x)/u,E=l.y/d,T=[x,v,b,v,x,E,x,E,b,v,b,E],V=[f,y,m,y,f,S,f,S,m,y,m,S],F={origin:l,size:t.size,advanceX:t.advance,baseline:t.baseline,vertices:V,texCoords:T,packerId:n.DR,texture:o};s.set(t.glyph,F);const B=this.RR.gl;return B.pixelStorei(B.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),B.bindTexture(B.TEXTURE_2D,o),B.texImage2D(B.TEXTURE_2D,0,B.LUMINANCE,a._R.x,a._R.y,0,B.LUMINANCE,B.UNSIGNED_BYTE,this.RR.UR?a.wR:new Uint8Array(a.wR)),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MIN_FILTER,B.LINEAR),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MAG_FILTER,B.LINEAR),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_WRAP_S,B.CLAMP_TO_EDGE),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_WRAP_T,B.CLAMP_TO_EDGE),B.bindTexture(B.TEXTURE_2D,null),n.TR?ba.Resize:ba.Success}WR(){this.BR.forEach(t=>{t.forEach((e,i)=>{const s=this.ER.PR(e.packerId);if(!s)return;const n=e.origin,a=s._R.x,o=s._R.y,l=n.x/a,u=(n.y+e.size.y)/o,d=(n.x+e.size.x)/a,f=n.y/o,y=[l,u,d,u,l,f,l,f,d,u,d,f];e.texCoords=y,t.set(i,e)})})}}const Lt=r=>{if(r instanceof Se||r instanceof js)return r._i()?"linear-highPrecision":"linear";if(r instanceof wi){const t={};return r.x instanceof Sh&&(t.x={base:r.x.gi()}),r.y instanceof Sh&&(t.y={base:r.y.gi()}),["logarithmic",t]}return"linear"},Cs=r=>{const t=Object.keys(r),e={};return t.forEach(i=>{const s=r[i];let n=!1;e[i]=a=>{if(!a)return n;const o=s();return n=o,o}}),e},tr=(r,t,e)=>r.getLookUpProperty()==="value"?e:r.getLookUpProperty()==="x"?{min:t.vt(),max:t.bt()}:r.getLookUpProperty()==="y"?{min:t.xt(),max:t.Mt()}:r.getLookUpProperty()==="z"?{min:t.lS(),max:t.aS()}:void 0,dm=r=>!(!r||r.lookUpProperty!=="value"||!r.lut.percentageValues),zF=r=>(t,e)=>e%2?t:t+r;class _F{constructor(t){this.YR=new Map,this.HR=wp("font"),this.$R=new Map,this.XR=new Set,this.RR=t}VR(t=!1){return(t||this.XR.size===0)&&(this.YR.forEach((e,i)=>{e.VR(),this.YR.delete(i)}),this.XR.clear()),this}jR(t){this.XR.add(t)}ZR(t){this.XR.delete(t)}QR(t,e,i,s){const n=nt.devicePixelRatio,a=`${s?"dark":"light"} - ${zp(e,n).id}`,o=this.$R.get(a),l=this.YR.get(o);let u=0,d=0,f=0;const y=t.split(""),m=e.size,S=.45*e.size*n,x=Math.round(1*e.size);let v=!1;for(let E=0;E<y.length;E+=1){const T=y[E],V=l&&l.NR(T,m);V?(T.trim()!==""&&(d=Math.max(d,V.baseline),u=Math.min(u,V.baseline-(V.size.y-1))),f+=V.advanceX):(T.trim()!==""&&(d=Math.max(d,0),u=Math.min(u,0-(x-1))),f+=S,v=!0)}const b=((E,T,V)=>{if(V===0||V===360||V===180||V%180==0)return{x:E,y:T};if(V===90||V===-90||(V+90)%180==0)return{x:T,y:E};const F=V*Math.PI/180,B=Math.cos(F),z=Math.sin(F);return{x:Math.abs(E*B)+Math.abs(T*z),y:Math.abs(E*z)+Math.abs(T*B)}})(f/n,(d-u+1)/n,i);return{x:b.x,y:b.y,isEstimate:v}}JR(t,e,i){const s=`${i?"dark":"light"} - ${e.id}`;let n=this.$R.get(s);n||(n=this.HR(),this.YR.set(n,new VF(this.RR)),this.$R.set(s,n));const a=this.YR.get(n);if(!a)throw new Ri("Failed to get font texture!");let o=0,l=0,u=0;const d=t.split(""),f=new Map;let y=0;const m=e.properties.size;for(let v=0;v<d.length;v+=1){const b=d[v],E=Math.ceil(y);let T=a.NR(b,m);if(!T){const V=this.RR.KR(b,e.properties,e.dpr,i);if(!V)continue;const F=a.GR(V[1],m,V[0]);if(F===ba.Resize){this.XR.forEach(B=>{B.la.i=!0}),v=-1,y=0,l=0,o=0,f.clear();continue}if(F===ba.Fail)throw new Ri("Failed to create glyph");if(T=a.NR(b,m),!T)throw new Ri("Failed to get glyph after creation")}if(b.trim()!==""){let V=f.get(T.texture);V||(V={vertices:[],texCoords:[]},f.set(T.texture,V)),V.vertices.push(...T.vertices.map(zF(E))),V.texCoords.push(...T.texCoords),l=Math.max(l,T.baseline),o=Math.min(o,T.baseline-(T.size.y-1))}y+=T.advanceX}u=y;const S=Qt(Y(0,o),Y(u,l)),x=[];return f.forEach((v,b)=>{x.push({texCoords:new Float32Array(v.texCoords),vertices:new Float32Array(v.vertices),texture:b})}),[x,S]}}class Pb{constructor(t){this.modifiers=[],this.modifiers=t}build(t){const e=this.modifiers.filter(i=>NF(i));for(const i of e)t=i(t);return`${rh(this.modifiers.filter(i=>BF(i))).map(i=>i.qR).join(`
`)}
${t}`}}const NF=r=>typeof r=="function",BF=r=>r&&typeof r=="object"&&"tE"in r,et=(...r)=>t=>{r=r.reverse();for(let e of r)typeof e=="string"&&(e=e.includes("{")||e.endsWith(";")?e:`${e};`,e=e.trim(),t=t.replace("void main(void)",`${e}
void main(void)`));return t},$f=r=>t=>(r=r.endsWith(";")?r:`${r};`,t.replace(r,"")),Oe=(...r)=>t=>{const e=r.filter(s=>s!==!1);for(let s=0;s<e.length;s+=1)e[s]=e[s].endsWith(";")?e[s]:`${e[s]};`,e[s]=e[s].startsWith("	")?e[s]:`	${e[s]}`;const i=e.join(`
`);return t.replace(`void main(void) {
`,`void main(void) {
${i}
`)},Jf=(r,...t)=>e=>{for(let a=0;a<t.length;a+=1)t[a]=t[a].endsWith(";")?t[a]:`${t[a]};`,t[a]=t[a].startsWith("	")?t[a]:`	${t[a]}`;const i=t.join(`
`),s=new RegExp(`(.*${r}.*)`),n=e.replace(s,`${i}
$1`);return t.forEach(a=>{if(!n.includes(a))throw new Error(`ShaderBefore misusage (not found: 
${a}
match: 
${r}
result: 
${n}
)`)}),n},Xi=(r,...t)=>e=>{const i=t.filter(d=>typeof d=="string");for(let d=0;d<i.length;d+=1)i[d]=i[d].endsWith(";")?i[d]:`${i[d]};`,i[d]=i[d].startsWith("	")?i[d]:`	${i[d]}`;const s=i.join(`
`),n=e.lastIndexOf(r),a=e.substring(n),o=a.indexOf(`
`),l=a.substring(o),u=`${e.substring(0,n+o)}
${s}${l}`;return i.forEach(d=>{if(!u.includes(d))throw new Error(`ShaderAfter misusage (not found: "${d}", match: "${r}", result: "${u}")`)}),u},Rn=(...r)=>t=>{for(let e of r)if(typeof e=="string"){e=e.endsWith(";")?e:`${e};`,e=e.trim(),e=e.startsWith("	")?e:`	${e}`;const i=t.lastIndexOf("}");t=`${t.substring(0,i-1)}
${e}
}`}return t},gs=(r,t)=>e=>{let i,s;if(r.includes("uniform")||r.includes("attribute")){const n=r.endsWith(";")?r:`${r};`;e=et(n)(e),i=r.split(" ")[2].replace(";","")}else i=r;if(t.includes(" ")){const n=t.endsWith(";")?t:`${t};`;e=et(n)(e),s=t.split(" ")[2].replace(";","")}else s=t;return Rn(`	${s} = ${i};`)(e)},LF=(...r)=>t=>{r=r.reverse();for(const e of r)t=e+t;return t},Hi={roundUnsigned:{tE:"roundUnsigned",qR:`float roundUnsigned(float number) {
  return floor(number + 0.5);
}`},linearStep:{tE:"linearStep",qR:`float linearStep(float step0, float step1, float step) {
  return clamp((step - step0) / (step1 - step0), 0.0, 1.0);
}`},decodeUbyteRGBAEncodedFloat:{tE:"decodeUbyteRGBAEncodedFloat",qR:`
      // Denormalize 8-bit color channels to integers in the range 0 to 255.
      ivec4 floatsToBytes(vec4 inputFloats, bool littleEndian) {
        ivec4 bytes = ivec4(inputFloats * 255.0);
        return (
          littleEndian
          ? bytes.abgr
          : bytes
        );
      }
      
      // Break the four bytes down into an array of 32 bits.
      void bytesToBits(const in ivec4 bytes, out bool bits[32]) {
        for (int channelIndex = 0; channelIndex < 4; ++channelIndex) {
          float acc = float(bytes[channelIndex]);
          for (int indexInByte = 7; indexInByte >= 0; --indexInByte) {
            float powerOfTwo = exp2(float(indexInByte));
            bool bit = acc >= powerOfTwo;
            bits[channelIndex * 8 + (7 - indexInByte)] = bit;
            acc = mod(acc, powerOfTwo);
          }
        }
      }
      
      // Compute the exponent of the 32-bit float.
      float getExponent(bool bits[32]) {
        const int startIndex = 1;
        const int bitStringLength = 8;
        const int endBeforeIndex = startIndex + bitStringLength;
        float acc = 0.0;
        int pow2 = bitStringLength - 1;
        for (int bitIndex = startIndex; bitIndex < endBeforeIndex; ++bitIndex) {
          acc += float(bits[bitIndex]) * exp2(float(pow2--));
        }
        return acc;
      }
      
      // Compute the mantissa of the 32-bit float.
      float getMantissa(bool bits[32], bool subnormal) {
        const int startIndex = 9;
        const int bitStringLength = 23;
        const int endBeforeIndex = startIndex + bitStringLength;
        // Leading/implicit/hidden bit convention:
        // If the number is not subnormal (with exponent 0), we add a leading 1 digit.
        float acc = float(!subnormal) * exp2(float(bitStringLength));
        int pow2 = bitStringLength - 1;
        for (int bitIndex = startIndex; bitIndex < endBeforeIndex; ++bitIndex) {
          acc += float(bits[bitIndex]) * exp2(float(pow2--));
        }
        return acc;
      }
      
      // Parse the float from its 32 bits.
      float bitsToFloat(bool bits[32]) {
        float signBit = float(bits[0]) * -2.0 + 1.0;
        float exponent = getExponent(bits);
        bool subnormal = abs(exponent - 0.0) < 0.01;
        float mantissa = getMantissa(bits, subnormal);
        float exponentBias = 127.0;
        return signBit * mantissa * exp2(exponent - exponentBias - 23.0);
      }
      
      // Decode a 32-bit float from the RGBA color channels of a texel.
      float decodeUbyteRGBAEncodedFloat(vec4 rgba, bool littleEndian) {
        ivec4 rgbaBytes = floatsToBytes(rgba, littleEndian);
        bool bits[32];
        bytesToBits(rgbaBytes, bits);
        return bitsToFloat(bits);
      }
      `},texelFetchWithFallback:{webgl2:{tE:"texelFetchWithFallback",qR:`vec4 texelFetchWithFallback(sampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {
  return texelFetch(textureSampler, iTexel, 0);
}`},webgl1:{tE:"texelFetchWithFallback",qR:`vec4 texelFetchWithFallback(sampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {
  vec2 halfTexel = 0.5 / textureSize;
  return texture2D(textureSampler, (vec2(iTexel) * 2.0 + 1.0) * halfTexel);
}`}},texelFetchUnsignedWithFallback:{webgl2:{tE:"texelFetchUnsignedWithFallback",qR:`uvec4 texelFetchUnsignedWithFallback(usampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {
  return texelFetch(textureSampler, iTexel, 0);
}`},webgl1:{tE:"texelFetchUnsignedWithFallback",qR:`uvec4 texelFetchUnsignedWithFallback(usampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {
  vec2 halfTexel = 0.5 / textureSize;
  return texture2D(textureSampler, (vec2(iTexel) * 2.0 + 1.0) * halfTexel);
}`}},modulus:{tE:"modulus",qR:`int modulus(int a, int b) {
  return (a)-((a)/(b))*(b);
}`},computeScreenSpaceWireframe:{tE:"computeScreenSpaceWireframe",qR:`#extension GL_OES_standard_derivatives : enable
float computeScreenSpaceWireframe (vec3 barycentric, float lineWidth) {
  vec3 dist = fwidth(barycentric);
  vec3 smoothed = smoothstep(dist * ((lineWidth * 0.5) - 0.5), dist * ((lineWidth * 0.5) + 0.5), barycentric);
  return 1.0 - min(min(smoothed.x, smoothed.y), smoothed.z);
}`}},Jo=(r,t)=>{const e=t.steps,i=e.length-1,s=[et("uniform vec4 uFallbackColor")],n=[],a=[];for(let o=0;o<t.steps.length;o+=1)n.push(`uniform float uLUTValue${o}`),a.push(`uniform vec4 uLUTColor${o}`);return s.push(et(...n,...a),t.percentageValues&&et("uniform float uMinValue","uniform float uMaxValue")),t.interpolate?s.push(Jf("colorFragment","vec4 colorLookup = vec4(0.0)",`if (${r} <= -340282346638528859811704183484516925440.0) {
                    colorLookup = uFallbackColor;
                }`,"float value = "+(t.percentageValues?`clamp((${r} - uMinValue) / (uMaxValue  - uMinValue), 0.0, 1.0);`:`${r}`),`if (value <= uLUTValue0) {
                    colorLookup = uLUTColor0;
                }`,`if (value >= uLUTValue${i}) {
                    colorLookup = uLUTColor${i};
                }`,...e.slice(0,-1).map((o,l)=>`if (value >= uLUTValue${l} && value <= uLUTValue${l+1}) { colorLookup = uLUTColor${l} + vec4(
                        uLUTColor${l+1}[0] -  uLUTColor${l}[0],
                        uLUTColor${l+1}[1] -  uLUTColor${l}[1],
                        uLUTColor${l+1}[2] -  uLUTColor${l}[2],
                        uLUTColor${l+1}[3] -  uLUTColor${l}[3]
                    ) * (value - uLUTValue${l})/(uLUTValue${l+1} - uLUTValue${l});}`),"vec4 colorFragment = colorLookup")):s.push(Jf("colorFragment","vec4 colorLookup = vec4(uLUTValue0)",`if (${r} <= -340282346638528859811704183484516925440.0) {
                    colorLookup = uFallbackColor;
                }`,"float value = "+(t.percentageValues?`clamp((${r} - uMinValue) / (uMaxValue  - uMinValue), 0.0, 1.0);`:`${r}`),`if (${r} >= uLUTValue${i}) { colorLookup = uLUTColor${i};}`,...e.slice(1).reverse().map(o=>{const l=e[e.indexOf(o)-1];return`if (value < uLUTValue${e.indexOf(o)}) { colorLookup = uLUTColor${e.indexOf(l)};}`}),"vec4 colorFragment = colorLookup")),s},Zo=[et("uniform sampler2D uMaskTexture"),et("varying vec2 vMaskTextureCoord"),Xi("antiAliasFactor =","vec4 maskTextureSample = texture2D(uMaskTexture, vMaskTextureCoord)","antiAliasFactor = maskTextureSample.r")],Qo=[et("uniform sampler2D uMaskTexture"),et("varying vec2 vMaskTextureCoord"),Xi("antiAliasFactor =","vec4 maskTextureSample = texture2D(uMaskTexture, vMaskTextureCoord)","antiAliasFactor = maskTextureSample.a")],Ub=[et("varying vec3 vPosWorld;","varying vec3 vNormal;","uniform vec3 uCameraLoc;","uniform vec3 uLightLoc;","uniform vec4 uLightColor;","uniform vec4 uAmbientColor;","uniform float uShininess;","uniform float uAmbientReflection;","uniform float uDiffuseReflection;","uniform float uSpecularReflection;"),Xi("colorFragment =","float ambientReflection = uAmbientReflection","float diffuseReflection = uDiffuseReflection","float specularReflection = uSpecularReflection","vec3 ambientColor = uAmbientColor.rgb","vec3 diffuseColor = colorFragment.rgb","vec3 specularColor = uLightColor.rgb","vec3 vNormalNormalized = normalize(vNormal)","vNormalNormalized = (float(gl_FrontFacing) * 2.0 - 1.0) * vNormalNormalized","vec3 lightDir = normalize( uLightLoc - vPosWorld )","float lambertian = abs(dot(vNormalNormalized, lightDir))","float specular = 0.0","vec3 R =  reflect(-lightDir, vNormalNormalized)","vec3 V = normalize(uCameraLoc - vPosWorld)","float specAngle = max(dot(R,V),0.0)","specular = pow(specAngle, uShininess)","colorFragment = vec4(ambientReflection * ambientColor + diffuseReflection * lambertian * diffuseColor + specularReflection * specular * specularColor, colorFragment.a)")];class xf extends Error{constructor(t,e,i){super(`Dynamic shader generation error
(id: ${e})
 ${i?`when applying feature: ${i.idVertex?`vert: ${i.idVertex}`:""} ${i.idFragment?`frag: ${i.idFragment}`:""}`:""} | ${t}`)}}const Rs=(...r)=>{let t="";for(const e of r){if(typeof e!="object"){t+=`${String(e)},`;continue}const i=[{prefix:"",obj:e}];for(;i.length>0;){const{prefix:s,obj:n}=i.shift();t+=`${s}:`;const a=Object.keys(n).sort();for(const o of a){const l=n[o];typeof l=="object"&&l.__proto__===Object.prototype||Array.isArray(l)?i.push({prefix:o,obj:l}):t+=`${o}=${String(l)},`}}}return t},Ob=r=>r.find(t=>{var e;return(e=t.iE)===null||e===void 0?void 0:e.sE})!==void 0,Af=r=>r.find(t=>{var e;return(e=t.iE)===null||e===void 0?void 0:e.eE})!==void 0,Yh=(r,t,...e)=>{const i=[],s=t?"vec3":"vec2",{axisWorldTranslation:n,scaling:a,translation:o,offset:l,flipXY:u,flipXZ:d,splitPosAttribute:f,normalSource:y}=r,m=[];if(y==="attribute"&&i.push(et("attribute vec3 aNormal"),Oe("vec3 normal = aNormal")),n!=="linear-highPrecision"?e.forEach(S=>{S.attributeNameAxisCoord!==void 0&&S.variableNameAxisCoord!==void 0&&(f!==!0?i.push(Oe(`${s} ${S.variableNameAxisCoord} = ${S.attributeNameAxisCoord}`)):i.push(Oe(`${s} ${S.variableNameAxisCoord} = ${t?`vec3(${S.attributeNameAxisCoord}X, ${S.attributeNameAxisCoord}Y, ${S.attributeNameAxisCoord}Z)`:`vec2(${S.attributeNameAxisCoord}X, ${S.attributeNameAxisCoord}Y)`}`)))}):e.forEach(S=>{r.splitPosAttribute!==!0?i.push(Oe(`${s} ${S.variableNameAxisCoord}_highpart = ${S.attributeNameAxisCoord}_highpart`),Oe(`${s} ${S.variableNameAxisCoord}_lowpart = ${S.attributeNameAxisCoord}_lowpart`)):i.push(Oe(`${s} ${S.variableNameAxisCoord}_highpart = vec2(${S.attributeNameAxisCoord}_highpartX, ${S.attributeNameAxisCoord}_highpartY)`),Oe(`${s} ${S.variableNameAxisCoord}_lowpart = vec2(${S.attributeNameAxisCoord}_lowpartX, ${S.attributeNameAxisCoord}_lowpartY)`))}),l&&l.rotation){const S=l.rotation.dataType,x=S==="uniform"?"u":"a";if(S==="attribute-deg"){i.push(et("attribute float aRotDeg"),et("uniform float uBaseRotDeg"));const v="cRot",b="aInstanceGeo";i.push(Oe(`vec2 ${v} = vec2(sin((aRotDeg + uBaseRotDeg) * 0.01745329252), cos((aRotDeg + uBaseRotDeg) * 0.01745329252))`,`vec2 rotatedGeo = vec2(${b}.x * ${v}.y + ${b}.y * ${v}.x, ${b}.y * ${v}.y - ${b}.x * ${v}.x)`))}else{const v=`${x}Rot`;i.push(et(`${S} vec2 ${v}`));const b="aInstanceGeo";i.push(Oe(`vec2 rotatedGeo = vec2(${b}.x * ${v}.y + ${b}.y * ${v}.x, ${b}.y * ${v}.y - ${b}.x * ${v}.x)`))}}if(l&&i.push(et(`attribute ${s} aInstanceGeo`)),u===!0){if(n==="linear-highPrecision")throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + flipXY");e.forEach(S=>{m.push(`${S.variableNameAxisCoord} = ${t?`vec3(${S.variableNameAxisCoord}.y, ${S.variableNameAxisCoord}.x, ${S.variableNameAxisCoord}.z)`:`vec2(${S.variableNameAxisCoord}.y, ${S.variableNameAxisCoord}.x)`}`)})}if(d===!0){if(n==="linear-highPrecision")throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + flipXZ");e.forEach(S=>{m.push(`${S.variableNameAxisCoord} = vec3(${S.variableNameAxisCoord}.z, ${S.variableNameAxisCoord}.y, ${S.variableNameAxisCoord}.x)`)})}if(a){if(n==="linear-highPrecision")throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + scaling");const S=(a.dataType==="attribute"?"a":"u")+"Scaling",x=t?"vec3":"vec2";i.push(et(`${a.dataType} ${x} ${S}`)),e.forEach(v=>{m.push(`${v.variableNameAxisCoord} = ${v.variableNameAxisCoord} * ${S}`)})}if(o&&o.sizeUnit==="axis"){if(n==="linear-highPrecision")throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + translation (axis)");const S=(o.dataType==="attribute"?"a":"u")+"TranslationAxis",x=t?"vec3":"vec2";i.push(et(`${o.dataType} ${x} ${S}`)),e.forEach(v=>{m.push(`${v.variableNameAxisCoord} = ${v.variableNameAxisCoord} + ${S}`)})}if(l&&l.sizeUnit==="axis"){if(n==="linear-highPrecision")throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + offset (axis)");const S=(l.dataType==="attribute"?"a":"u")+"OffsetAxis",x=l.symmetric===!0?"float":s;i.push(et(`${l.dataType} ${x} ${S}`));const v=l.halved?" * 0.5":"",b=l.rotation?"rotatedGeo":"aInstanceGeo",E="offsetGeometry";m.push(`${s} ${E} = ${S} * ${b}${v} * sign(uScale)`),t&&y==="gpu-calculate"&&m.push(`${s} normal = ${b}`),e.forEach(T=>{m.push(`${T.variableNameAxisCoord} = ${T.variableNameAxisCoord} + ${E}`)})}if(n===void 0||n==="linear")i.push(et(`uniform ${s} uDisp`,`uniform ${s} uScale`)),e.forEach(S=>{m.push(`${s} ${S.variableNameWorldCoord} = (${S.variableNameAxisCoord} - uDisp) / uScale`)});else if(n==="linear-highPrecision")i.push(et(`uniform ${s} uDisp`,`uniform ${s} uScale`,`uniform ${s} uScaleStart_highpart`,`uniform ${s} uScaleStart_lowpart`)),e.forEach(S=>{m.push(`${s} ${S.variableNameAxisCoord}_hprecision = (${S.variableNameAxisCoord}_highpart - uScaleStart_highpart) + (${S.variableNameAxisCoord}_lowpart - uScaleStart_lowpart)`,`${s} ${S.variableNameWorldCoord} = (${S.variableNameAxisCoord}_hprecision - uDisp) / uScale`,`${s} ${S.variableNameAxisCoord} = ${S.variableNameAxisCoord}_highpart + ${S.variableNameAxisCoord}_lowpart`)});else if(n==="matrix")i.push(et("uniform mat3 uMatrix")),e.forEach(S=>{m.push(`vec2 ${S.variableNameWorldCoord} = (uMatrix * vec3(${S.variableNameAxisCoord}, 1.0)).xy`)});else if(n==="matrix4")i.push(et("uniform mat4 uMatrix")),e.forEach(S=>{m.push(`vec4 ${S.variableNameWorldCoord} = uMatrix * ${S.attributeNameAxisCoord}`)});else if(n[0]==="logarithmic"){i.push(et(`uniform ${s} uScaleStart`,`uniform ${s} uScaleStartLog`,`uniform ${s} uScaleInterval`,`uniform ${s} uScaleIntervalLog`,`uniform ${s} uViewportStart`,`uniform ${s} uViewportSize`));const S=t?["x","y","z"]:["x","y"],x=[];S.forEach(v=>{const b=n[1][v];if(b!==void 0){const E=b.base;if(E==="e")return;const T=`float cLog${E} = 1.0 / log(${Sl(E).toFixed(1)})`;x.includes(T)||x.push(T)}}),i.push(et(...x)),e.forEach((v,b)=>{const E=`${b}`,T=[];S.forEach(V=>{const F=V.toUpperCase(),B=n[1][V];if(B===void 0)m.push(`float posPercent${F}${E} = (${v.variableNameAxisCoord}.${V} - uScaleStart.${V}) / uScaleInterval.${V}`);else{const z=B.base,L=z==="e";m.push(`float posLog${F}${E} = log(${v.variableNameAxisCoord}.${V})${L?"":` * cLog${z}`}`,`float posPercent${F}${E} = (posLog${F}${E} - uScaleStartLog.${V}) / uScaleIntervalLog.${V}`)}T.push(`posPercent${F}${E}`)}),m.push(`${s} ${v.variableNameWorldCoord} = uViewportStart + ${s}(${T.join(", ")}) * uViewportSize`)})}if(l&&l.sizeUnit==="px"){i.push(et("uniform vec2 uRatioPxClip"));let S="vec2(0.0, 0.0)";l.useAlignment&&(i.push(et("uniform vec2 uOffsetAlignment")),S="uOffsetAlignment");const x=(l.dataType==="attribute"?"a":"u")+"OffsetPixels",v=l.symmetric===!0?"float":s;i.push(et(`${l.dataType} ${v} ${x}`));const b=l.halved?" * 0.5":"",E=`(${l.rotation?"rotatedGeo":"aInstanceGeo"} + ${S}) * ${x}${b} * uRatioPxClip`;e.forEach(T=>{m.push(`${T.variableNameWorldCoord} = ${T.variableNameWorldCoord} + ${E}`)})}if(l&&l.sizeUnit==="scale"){i.push(et("uniform vec2 uRatioPxClip")),i.push(et("uniform vec2 uSizePixels"));let S="vec2(0.0, 0.0)";l.useAlignment&&(i.push(et("uniform vec2 uOffsetAlignment")),S="uOffsetAlignment");const x=(l.dataType==="uniform"?"u":"a")+"OffsetScale";i.push(et(`${l.dataType} float ${x}`));const v=`(${l.rotation?"rotatedGeo":"aInstanceGeo"} + ${S}) * ${x} * uSizePixels * uRatioPxClip`;e.forEach(b=>{m.push(`${b.variableNameWorldCoord} = ${b.variableNameWorldCoord} + ${v}`)})}if(l&&l.sizeUnit==="wu"){const S=(l.dataType==="attribute"?"a":"u")+"OffsetWU",x=l.symmetric===!0?"float":s;i.push(et(`${l.dataType} ${x} ${S}`));const v=l.halved?" * 0.5":"",b=l.rotation?"rotatedGeo":"aInstanceGeo",E="offsetGeometry";m.push(`${s} ${E} = ${S} * ${b}${v}`),t&&y==="gpu-calculate"&&m.push(`${s} normal = normalize(${E})`),e.forEach(T=>{m.push(`${T.variableNameWorldCoord} = ${T.variableNameWorldCoord} + ${E}`)})}if(l&&l.sizeUnit==="nwu"){i.push(et("uniform float uRatioNwuWu"));const S=(l.dataType==="attribute"?"a":"u")+"OffsetNWU",x=l.symmetric===!0?"float":s;i.push(et(`${l.dataType} ${x} ${S}`));const v=l.halved?" * 0.5":"",b=l.rotation?"rotatedGeo":"aInstanceGeo",E="offsetGeometry";m.push(`${s} ${E} = ${S} * ${b}${v}`),t&&y==="gpu-calculate"&&m.push(`${s} normal = normalize(${E})`),e.forEach(T=>{m.push(`${T.variableNameWorldCoord} = ${T.variableNameWorldCoord} + ${E} * uRatioNwuWu`)})}return r.snapToNearestPixel&&(i.push(et("uniform vec2 uViewportSizePx")),e.forEach(S=>{m.push(`${S.variableNameWorldCoord} = 2.0 * floor(((${S.variableNameWorldCoord} + 1.0) * 0.5) * uViewportSizePx + 0.5) / uViewportSizePx - 1.0`)})),i.push(Jf("gl_Position =",...m)),i},vf=(r,t,e,i)=>{const s=[],n=r.axisWorldTranslation,a=t?"vec3":"vec2";if(n==="linear")s.push(Xi(e,`${a} ${i} = ${e} * uScale + uDisp`));else if(n==="linear-highPrecision")s.push(Xi(e,`${a} ${i} = ${e} * uScale + uDisp + uScaleStart_highpart + uScaleStart_lowpart`));else{if(n==="matrix")throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");if(n==="matrix4")throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");if(n[0]!=="logarithmic")throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");{const o=[`${a} ${e}_percent = (${e} - uViewportStart) / uViewportSize`];(t?["x","y","z"]:["x","y"]).forEach(l=>{const u=l.toUpperCase(),d=n[1][l];if(d===void 0)o.push(`float pos${u}Back = ${e}_percent.${l} * uScaleInterval.${l} + uScaleStart.${l}`);else{const f=d.base,y=f==="e"?"1.0":`cLog${f}`;o.push(`float pos${u}Back = pow(2.71828, (${e}_percent.${l} * uScaleIntervalLog.${l} + uScaleStartLog.${l}) / ${y})`)}}),o.push(`${a} ${i} = ${a}(posXBack, posYBack${t?", posZBack":""})`),s.push(Xi(e,...o))}}return s},Gb=r=>(t=>t.find(e=>{var i;return(i=e.iE)===null||i===void 0?void 0:i.hE})!==void 0)(r)?[$f("attribute vec4 aColor"),$f("vColor = aColor"),et("attribute vec4 aColorA"),et("attribute vec4 aColorB"),Rn("vColor = mix(aColorA, aColorB, aSegmentSide)")]:[],Yb=r=>(t=>t.find(e=>{var i;return(i=e.iE)===null||i===void 0?void 0:i.rE})!==void 0)(r)?[$f("attribute float aLookupValue"),$f("vLookupValue = aLookupValue"),et("attribute float aLookupValueA"),et("attribute float aLookupValueB"),Rn("vLookupValue = mix(aLookupValueA, aLookupValueB, aSegmentSide)")]:[],$={"2D":{idFeature:"2D",apply:r=>({idVertex:"2D",idFragment:"2D",defaultVertexShader:"2D",defaultFragmentShader:"FragmentShader"})},"2DCompose":{idFeature:"2DCompose",apply:r=>({idVertex:"2DCompose",idFragment:"2DCompose",defaultVertexShader:"2DMatrix",defaultFragmentShader:"Empty"})},"3D":{idFeature:"3D",iE:{sE:!0},apply:r=>({idVertex:"3D",idFragment:"3D",defaultVertexShader:"3D",defaultFragmentShader:"FragmentShader"})},PointSize:r=>({idFeature:"PointSize",apply:t=>{const e=r==="uniform"?"u":"a";return{idVertex:`SizePrimitive:${Rs(r)}`,idFragment:void 0,vertexShaderModifiers:[et(`${r} float ${e}PointSize`,"uniform float uDevicePixelRatio"),Rn(`gl_PointSize = ${e}PointSize * uDevicePixelRatio`)]}}}),Color:r=>{const t=r&&r.dataType,e=r&&r.maskTextureText,i=r&&r.maskTexture,s=r&&r.overrideOpacity;return{idFeature:"Color",iE:{eE:!(!Array.isArray(r.dataType)||r.dataType[1]==="value")||void 0,rE:!(!Array.isArray(r.dataType)||r.dataType[1]!=="value")||void 0,hE:r.dataType==="attribute"||void 0},apply:(n,a)=>{let o,l=`Color:${Rs(r)}`;const u=[];let d="FragmentShader";const f=[];if(t==="uniform")f.push(et("uniform vec4 uColor"),Oe("vec4 colorFragment = uColor"),...e?Zo:[],...i?Qo:[]);else if(t==="attribute")o="colorAttribute",u.push(gs("attribute vec4 aColor","varying vec4 vColor")),f.push(et("varying vec4 vColor"),Oe("vec4 colorFragment = vColor"),...e?Zo:[],...i?Qo:[]);else if(t==="texture")o="colorTexCoord",u.push(gs("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")),f.push(et("varying vec2 vTextureCoord"),et("uniform sampler2D uColorTexture"),et("uniform vec4 uColor"),Oe("vec4 colorFragment = texture2D(uColorTexture, vTextureCoord)",`if(vTextureCoord.x < 0. || vTextureCoord.x > 1. || vTextureCoord.y < 0. || vTextureCoord.y > 1.) {
                        colorFragment = uColor;
                    }`),...e?Zo:[],...i?Qo:[]);else if(t==="texture-coord-calc-gpu")o="colorTexCoord",d="Empty",u.push(et("attribute vec2 aTextureCoord"),et("varying vec2 vTextureCoord"),Rn("vTextureCoord = gl_Position.xy * 0.5 + 0.5")),f.push(et("varying vec2 vTextureCoord"),et("uniform sampler2D uColorTexture"),Oe("vec4 colorFragment = texture2D(uColorTexture, vTextureCoord)","gl_FragColor = colorFragment;"));else if(Array.isArray(t)&&t[0]==="image")o="colorTexCoord",u.push(gs("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")),t[1].fitMode===qi.Tile?f.push(et("uniform sampler2D uColorTexture"),et("varying vec2 vTextureCoord"),Oe("vec4 colorFragment = texture2D(uColorTexture, vTextureCoord);")):f.push(et("uniform sampler2D uColorTexture"),et("varying vec2 vTextureCoord"),et("uniform vec4 uColor"),Oe("vec4 colorFragment = texture2D(uColorTexture, vTextureCoord);",`if(vTextureCoord.x < 0. || vTextureCoord.x > 1. || vTextureCoord.y < 0. || vTextureCoord.y > 1.){
                                colorFragment = uColor;
                            }`));else if(Array.isArray(t)&&t[0]==="lookup"){const y=t[1];if(y==="value")o="lookup:value",u.push(gs("attribute float aLookupValue","varying float vLookupValue"));else{const m=`posAxis.${y}`;o=`lookup:${y}`,u.push(gs(m,"varying float vLookupValue"))}f.push(et("varying float vLookupValue"),...Jo("vLookupValue",t[2]),...e?Zo:[],...i?Qo:[])}else if(Array.isArray(t)&&t[0]==="gradient"){const y=t[1],m=y.getColorStops();oi(y)?(l=`rgradient${m.length},${i},${e}`,f.push(et("uniform vec4 uBounds","uniform vec2 uCenter","uniform vec2 uDistance","uniform float uAspect"),et(...Ff(m.map((S,x)=>[`uniform vec4 color_${x}`,`uniform float stop_${x}`]))),Hi.linearStep,Oe("vec2 uv = vec2((((gl_FragCoord.x)-uBounds.x)/(uBounds.z))*uAspect,((gl_FragCoord.y)-uBounds.y)/(uBounds.w))","float mixVal = distance(uv/uDistance, uCenter/uDistance)","vec4 color = mix(color_0, color_1, linearStep(stop_0, stop_1, mixVal))",...m.map((S,x)=>x<2?"":`color = mix(color, color_${x}, linearStep(stop_${x-1}, stop_${x}, mixVal));`),"vec4 colorFragment = color"),...e?Zo:[],...i?Qo:[])):li(y)&&(l=`lgradient${m.length},${i},${e}`,f.push(et("uniform vec4 uBounds","uniform vec2 uStartPoint","uniform vec2 uEndPoint"),et(...Ff(m.map((S,x)=>[`uniform vec4 color_${x}`,`uniform float stop_${x}`]))),Hi.linearStep,Oe("vec2 uv = gl_FragCoord.xy - uBounds.xy","float magnitude = ((uv.x-uStartPoint.x) * (uEndPoint.x-uStartPoint.x) + (uv.y-uStartPoint.y) * (uEndPoint.y-uStartPoint.y)) / (pow(uEndPoint.x - uStartPoint.x, 2.0) + pow(uEndPoint.y-uStartPoint.y,2.0))","vec4 color = mix(color_0, color_1, linearStep(stop_0, stop_1, magnitude))",...m.map((S,x)=>x<2?"":`color = mix(color, color_${x}, linearStep(stop_${x-1}, stop_${x}, magnitude))`),"vec4 colorFragment = color"),...e?Zo:[],...i?Qo:[]))}if(e||i){const y="maskTexture";o=o?`${o} ${y}`:`Color:${y}`,u.push(gs("attribute vec2 aMaskTextureCoord","varying vec2 vMaskTextureCoord"))}return s&&f.push(et("uniform float uOpacity"),Xi("colorFragment =","colorFragment.a *= uOpacity")),{vertexShaderModifiers:u,fragmentShader:d,fragmentShaderModifiers:f,idVertex:o,idFragment:l}}}},ColorShaded3D:r=>{const{dataType:t,shadingStyle:e,wireframe:i}=r;let s;const n=`ColorShaded3D:${Rs(r)}`;return{idFeature:"ColorShaded3D",iE:{eE:!(!Array.isArray(r.dataType)||r.dataType[1]==="value")||void 0,rE:!(!Array.isArray(r.dataType)||r.dataType[1]!=="value")||void 0},apply:(a,o)=>{const l=[],u=[];if(l.push(e==="phong"&&gs("normal","varying vec3 vNormal"),gs("posWorld","varying vec3 vPosWorld")),t==="uniform")u.push(et("uniform vec4 uColorDiffuse"),Oe("vec4 colorFragment = uColorDiffuse"));else if(t==="attribute")s="per-vertex-color",l.push(gs("attribute vec4 aColor","varying vec4 vColor")),u.push(et("varying vec4 vColor"),Oe("vec4 colorFragment = vColor"));else if(Array.isArray(t)){const d=t[1];if(d==="value")s="lookup:value",l.push(gs("attribute float aLookupValue","varying float vLookupValue"));else{const f=`posAxis.${d}`;s=`lookup:${d}`,l.push(gs(f,"varying float vLookupValue"))}u.push(et("varying float vLookupValue"),...Jo("vLookupValue",t[2]))}if(i){const d="wireframe";s=s?`${s},${d}`:d,l.push(gs("attribute vec3 aTriangleBary","varying vec3 vTriangleBary")),u.push(et("varying vec3 vTriangleBary"),et("uniform vec4 uWireframeColor","uniform float uWireframeThickness"),Hi.computeScreenSpaceWireframe,Xi("colorFragment =","float edge = computeScreenSpaceWireframe(vTriangleBary, uWireframeThickness)","colorFragment = mix(colorFragment, uWireframeColor, edge)"))}return e==="phong"&&u.push(...Ub),{idVertex:s,idFragment:n,vertexShaderModifiers:l,fragmentShader:"FragmentShader",fragmentShaderModifiers:u}}}},VertexLocation:r=>({idFeature:"VertexLocation",apply:t=>{const e=[],i=Ob(t),s=r.coordType?r.coordType:i?"vec3":"vec2";return r.axisWorldTranslation!=="linear-highPrecision"?r.splitPosAttribute!==!0?e.push(et(`attribute ${s} aPos`)):e.push(et("attribute float aPosX"),et("attribute float aPosY"),i&&et("attribute float aPosZ")):r.splitPosAttribute===!0?e.push(et("attribute float aPos_highpartX"),et("attribute float aPos_lowpartX"),et("attribute float aPos_highpartY"),et("attribute float aPos_lowpartY")):e.push(et(`attribute ${s} aPos_highpart`),et(`attribute ${s} aPos_lowpart`)),e.push(...Yh(r,i,{attributeNameAxisCoord:"aPos",variableNameAxisCoord:r.coordType==="vec4"?void 0:"posAxis",variableNameWorldCoord:"posWorld"})),{idVertex:`VertexLocation:${Rs(r)}`,idFragment:void 0,vertexShaderModifiers:e}}}),Model3D:r=>({idFeature:"Model3D",apply:t=>{const e=[];return e.push(et("attribute vec3 aGeoPos"),et("uniform mat4 uModelRotation"),et("uniform mat4 uModelRotationNormals"),et("uniform vec3 uLocationAxis"),et("uniform vec3 uModelAlignment"),et("uniform vec3 uModelScale"),et("uniform vec3 uModelSize"),...Yh({axisWorldTranslation:"linear",normalSource:r.normalSource},!0,{attributeNameAxisCoord:"uLocationAxis",variableNameAxisCoord:"locationAxis",variableNameWorldCoord:"locationWorld"}),Jf("gl_Position =","vec3 posWorld = locationWorld + ((uModelRotation * vec4(aGeoPos, 1.0)).xyz  - (uModelAlignment + 1.0) * uModelSize/2.0) * uModelScale;"),r.normalSource==="attribute"&&Xi("vec3 normal ="," normal = (uModelRotationNormals * vec4(normal, 1.0)).xyz;"),...Af(t)?vf({axisWorldTranslation:"linear",normalSource:r.normalSource},!0,"posWorld","posAxis"):[]),{vertexShaderModifiers:e,idVertex:`Model3D:${Rs(r)}`,idFragment:void 0}}}),LineInstanced2D:r=>({idFeature:"LineInstanced2D",apply:t=>({idVertex:`LineInstanced2D:${Rs(r)}`,idFragment:void 0,vertexShaderModifiers:[et("uniform float uThicknessPixels"),et("uniform vec2 uRatioPxClip"),...r.axisWorldTranslation!=="linear-highPrecision"&&r.splitPosAttribute!==!0?[et("attribute vec2 aLocationA"),et("attribute vec2 aLocationB")]:r.axisWorldTranslation==="linear-highPrecision"&&r.splitPosAttribute!==!0?[et("attribute vec2 aLocationA_highpart"),et("attribute vec2 aLocationB_highpart"),et("attribute vec2 aLocationA_lowpart"),et("attribute vec2 aLocationB_lowpart")]:r.axisWorldTranslation!=="linear-highPrecision"&&r.splitPosAttribute===!0?[et("attribute float aLocationAX"),et("attribute float aLocationAY"),et("attribute float aLocationBX"),et("attribute float aLocationBY")]:r.axisWorldTranslation==="linear-highPrecision"&&r.splitPosAttribute===!0?[et("attribute float aLocationA_highpartX"),et("attribute float aLocationA_highpartY"),et("attribute float aLocationB_highpartX"),et("attribute float aLocationB_highpartY"),et("attribute float aLocationA_lowpartX"),et("attribute float aLocationA_lowpartY"),et("attribute float aLocationB_lowpartX"),et("attribute float aLocationB_lowpartY")]:[],et("attribute vec2 aSegmentPosition"),et("attribute float aSegmentSide"),...Yh(r,!1,{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA"},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB"}),r.ensureMinimumSegmentLength&&et("uniform vec2 uMinSegmentPixelVector"),Xi("worldB = ",r.ensureMinimumSegmentLength&&"float segmentLengthPixels = sqrt(pow(worldB.x - worldA.x, 2.0) + pow(worldB.y - worldA.y, 2.0)) / length(uRatioPxClip)",r.ensureMinimumSegmentLength&&`if (segmentLengthPixels == 0.0 || segmentLengthPixels < length(uMinSegmentPixelVector)) {
                        worldB = worldA + uMinSegmentPixelVector * uRatioPxClip;
                    }`,"vec2 directionBasis = worldB - worldA","vec2 directionBasisNorm = normalize(directionBasis)","vec2 perpendBasisNorm = vec2(-directionBasisNorm.y, directionBasisNorm.x)","vec2 offset = mix(worldA, worldB, aSegmentSide)","vec2 thicknessDirection = aSegmentPosition.x * directionBasisNorm + aSegmentPosition.y * perpendBasisNorm","vec2 posWorld = offset + thicknessDirection * uThicknessPixels * uRatioPxClip"),...Yb(t),...Gb(t),...Af(t)?vf(r,!1,"posWorld","posAxis"):[]]})}),Area2D:r=>({idFeature:"Area2D",apply:t=>({idVertex:`Area2D:${Rs(r)}`,idFragment:void 0,vertexShaderModifiers:[...r.axisWorldTranslation!=="linear-highPrecision"&&r.splitPosAttribute!==!0?[et("attribute vec2 aLocationA"),et("attribute vec2 aLocationB")]:r.axisWorldTranslation==="linear-highPrecision"&&r.splitPosAttribute!==!0?[et("attribute vec2 aLocationA_highpart"),et("attribute vec2 aLocationB_highpart"),et("attribute vec2 aLocationA_lowpart"),et("attribute vec2 aLocationB_lowpart")]:r.axisWorldTranslation!=="linear-highPrecision"&&r.splitPosAttribute===!0?[et("attribute float aLocationAX"),et("attribute float aLocationAY"),et("attribute float aLocationBX"),et("attribute float aLocationBY")]:r.axisWorldTranslation==="linear-highPrecision"&&r.splitPosAttribute===!0?[et("attribute float aLocationA_highpartX"),et("attribute float aLocationA_highpartY"),et("attribute float aLocationB_highpartX"),et("attribute float aLocationB_highpartY"),et("attribute float aLocationA_lowpartX"),et("attribute float aLocationA_lowpartY"),et("attribute float aLocationB_lowpartX"),et("attribute float aLocationB_lowpartY")]:[],et("attribute float aCurveOrBaseline"),et("attribute float aSegmentSide"),...Yh(r,!1,{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA"},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB"}),Xi("worldB = ","vec2 posCoord = mix(worldA, worldB, aSegmentSide)","float baseline = min(posCoord.y, -1.0)","vec2 posWorld = vec2(posCoord.x, mix(posCoord.y, baseline, aCurveOrBaseline))"),...Yb(t),...Gb(t),...Af(t)?vf(r,!1,"posWorld","posAxis"):[]]})}),LineInstanced3D:r=>({idFeature:"LineInstanced3D",apply:t=>({idVertex:`LineInstanced3D:${Rs(r)}`,idFragment:void 0,defaultFragmentShader:"FragmentShader",vertexShaderModifiers:[et("uniform float uOffsetWU"),et("attribute vec3 aLocationA"),et("attribute vec3 aLocationB"),et("attribute float aSegmentPosition"),et("attribute float aPerpendHorizontal"),et("attribute float aPerpendVertical"),...Yh({axisWorldTranslation:r.axisWorldTranslation,normalSource:"custom"},Ob(t),{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA"},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB"}),Xi("worldB = ","vec3 directionBasis = worldB - worldA","vec3 directionBasisNorm = normalize(directionBasis)","vec3 notParallel = normalize(mix( vec3( 0.0, 1.0, 0.0 ), vec3( 0.2, 0.8, 0.0 ), step( abs(directionBasis.y), 0.9 ) ))","vec3 horizontalBasis = normalize( cross( notParallel, directionBasisNorm ) )","vec3 verticalBasis = normalize( cross( horizontalBasis, directionBasisNorm ) )","vec3 normal = aPerpendHorizontal * horizontalBasis + aPerpendVertical * verticalBasis","vec3 posWorld = worldA + aSegmentPosition * directionBasis + normal * uOffsetWU * 0.5"),...Af(t)?vf({axisWorldTranslation:r.axisWorldTranslation},!0,"posWorld","posAxis"):[]]})}),RoundedEdges3D:{idFeature:"RoundedEdges3D",apply:r=>({idVertex:"RoundedEdges3D",idFragment:void 0,vertexShaderModifiers:[et("attribute vec3 aEdge"),et("uniform float uEdgeRoundness"),Xi("posWorld =","vec3 boxSizeWorld = abs( aOffsetAxis / uScale )","float boxMinDimensionWorldXZ = min( boxSizeWorld.x, boxSizeWorld.z )","vec3 edgeRoundAmount = uEdgeRoundness * vec3( boxMinDimensionWorldXZ, min( boxMinDimensionWorldXZ, boxSizeWorld.y ), boxMinDimensionWorldXZ )","posWorld = posWorld + aEdge * edgeRoundAmount")]})},ColorGrid2D:r=>{const t=r.flipXY,e=r.intensityTextureType,i=r.littleEndian;return{idFeature:"ColorGrid2D",apply:(s,n)=>({idVertex:void 0,idFragment:`ColorGrid2D:${Rs(r)}`,fragmentShader:"FragmentShader",fragmentShaderModifiers:[et("uniform vec4 uTileBounds","uniform vec2 uTileDimensions","uniform sampler2D uTileIntensityValues"),e==="ubyte"&&Hi.decodeUbyteRGBAEncodedFloat,r.interpolation==="bilinear"?Oe("vec2 cellSizePx = uTileBounds.zw / (uTileDimensions - 1.0)","vec2 cellIndex = (gl_FragCoord.xy - uTileBounds.xy) / cellSizePx","vec2 cellStart = floor(cellIndex)","vec2 cellEnd = ceil(cellIndex)","vec2 cellStartNormalized = cellStart / (uTileDimensions - 1.0)","vec2 cellEndNormalized = cellEnd / (uTileDimensions - 1.0)",`vec4 sample00 = texture2D(uTileIntensityValues, ${t?"cellStartNormalized":"vec2(cellStartNormalized.y, cellStartNormalized.x)"})`,`vec4 sample01 = texture2D(uTileIntensityValues, ${t?"vec2(cellStartNormalized.x, cellEndNormalized.y)":"vec2(cellStartNormalized.y, cellEndNormalized.x)"})`,`vec4 sample10 = texture2D(uTileIntensityValues, ${t?"vec2(cellEndNormalized.x, cellStartNormalized.y)":"vec2(cellEndNormalized.y, cellStartNormalized.x)"})`,`vec4 sample11 = texture2D(uTileIntensityValues, ${t?"cellEndNormalized":"vec2(cellEndNormalized.y, cellEndNormalized.x)"})`,"float intensity00 = "+(e==="float"?"sample00.x":`decodeUbyteRGBAEncodedFloat(sample00, ${i})`),"float intensity01 = "+(e==="float"?"sample01.x":`decodeUbyteRGBAEncodedFloat(sample01, ${i})`),"float intensity10 = "+(e==="float"?"sample10.x":`decodeUbyteRGBAEncodedFloat(sample10, ${i})`),"float intensity11 = "+(e==="float"?"sample11.x":`decodeUbyteRGBAEncodedFloat(sample11, ${i})`),"vec2 lerpFactors = cellIndex - cellStart",`float intensityR1 = mix(intensity00, intensity10, ${t?"lerpFactors.x":"lerpFactors.y"})`,`float intensityR2 = mix(intensity01, intensity11, ${t?"lerpFactors.x":"lerpFactors.y"})`,`float intensityP = mix(intensityR1, intensityR2,  ${t?"lerpFactors.y":"lerpFactors.x"})`):Oe("vec2 cellSizePx = uTileBounds.zw / (uTileDimensions)","vec2 cellIndex = (gl_FragCoord.xy - uTileBounds.xy) / cellSizePx","vec2 cellIndexNormalized = cellIndex / uTileDimensions",`vec4 sample0 = texture2D(uTileIntensityValues, ${t?"cellIndexNormalized":"vec2(cellIndexNormalized.y, cellIndexNormalized.x)"})`,"float intensityP = "+(e==="float"?"sample0.x":`decodeUbyteRGBAEncodedFloat(sample0, ${i})`)),...Jo("intensityP",r.lut)]})}},DrawToNormalTexture:r=>{const t=r.flipXZ,e=r.vertexIdSource,i=r.normalTextureType,s=r.heightmapTextureType,n=r.littleEndian;return{idFeature:"DrawToNormalTexture",apply:(a,o)=>{const l=[],u=[];return l.push(et("uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture",i==="uint"?"flat varying uvec3 vNormalRGB":"varying vec3 vNormalRGB",e==="attribute"&&"attribute float aVertexID"),e!==void 0&&Hi.roundUnsigned,Hi.modulus,Hi.texelFetchWithFallback[o],s==="ubyte"&&Hi.decodeUbyteRGBAEncodedFloat,Oe(e===void 0?"int iVertex = gl_VertexID":"int iVertex = int(roundUnsigned(aVertexID))","int iSecondary = modulus(iVertex, (uTileDimensions.y - 1))","int iPrimary = iVertex / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 uTileDimensionsMinus1 = vec2(uTileDimensions) - 1.0","vec2 halfTexelWorld = 2.0 / (uTileDimensionsMinus1 * 2.0)","vec2 posWorld = vec2(-1.0 + halfTexelWorld.y + iCell.y * 2.0 * halfTexelWorld.y, -1.0 + halfTexelWorld.x + iCell.x * 2.0 * halfTexelWorld.x)","vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)",`vec3 posAxis0 = vec3(
                            uTileStartLocationAxisXZ.x + iCell.${t?"y":"x"} * cellSizeAxis.x,
                            ${s==="float"?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${n})`} ,
                            uTileStartLocationAxisXZ.y + iCell.${t?"x":"y"} * cellSizeAxis.y
                        )`,"vec2 iCell1 = iCell + vec2(1.0, 0.0)",`vec3 posAxis1 = vec3(
                            uTileStartLocationAxisXZ.x + iCell1.${t?"y":"x"} * cellSizeAxis.x,
                            ${s==="float"?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell1.y, iCell1.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell1.y, iCell1.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${n})`},
                            uTileStartLocationAxisXZ.y + iCell1.${t?"x":"y"} * cellSizeAxis.y
                        )`,"vec2 iCell2 = iCell + vec2(0.0, 1.0)",`vec3 posAxis2 = vec3(
                            uTileStartLocationAxisXZ.x + iCell2.${t?"y":"x"} * cellSizeAxis.x,
                            ${s==="float"?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell2.y, iCell2.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell2.y, iCell2.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${n})`},
                            uTileStartLocationAxisXZ.y + iCell2.${t?"x":"y"} * cellSizeAxis.y
                        )`,"vec2 iCell3 = iCell + vec2(1.0, 1.0)",`vec3 posAxis3 = vec3(
                            uTileStartLocationAxisXZ.x + iCell3.${t?"y":"x"} * cellSizeAxis.x,
                            ${s==="float"?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell3.y, iCell3.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell3.y, iCell3.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${n})`},
                            uTileStartLocationAxisXZ.y + iCell3.${t?"x":"y"} * cellSizeAxis.y
                        )`,"vec3 normal = normalize(cross(posAxis2 - posAxis0, posAxis1 - posAxis0) + cross(posAxis1 - posAxis3, posAxis2 - posAxis3))",i==="uint"?"vNormalRGB = uvec3(((normal / 2.0) + 0.5) * float(-1u))":"vNormalRGB = (normal / 2.0) + 0.5","gl_PointSize = 1.0")),u.push(et(i==="uint"?"flat varying uvec3 vNormalRGB":"varying vec3 vNormalRGB"),Oe(i==="uint"?"gl_FragColor = uvec4(vNormalRGB, -1u)":"gl_FragColor = vec4(vNormalRGB, 1.0)")),{idVertex:`DrawToNormalTexture:${Rs(r)}`,idFragment:`DrawToNormalTexture:${Rs(r)}`,vertexShaderModifiers:l,fragmentShaderModifiers:u,fragmentShader:"Empty",hints:[i==="uint"&&{type:"fragOutput",fragOutput:"uvec4"}]}}}},SurfaceGrid:r=>{const t=r.fillColor,e=r.interpolation,i=r.flipXZ,s=r.shadingStyle,n=r.wireframe,a=r.instanceIdSource,o=r.normalTextureType,l=r.heightmapTextureType,u=r.intensityTextureType,d=r.littleEndian;return{idFeature:"SurfaceGrid",apply:(f,y)=>{const m=[],S=[];return m.push(et("attribute vec2 aGeoCellOffset","uniform int uBaseInstance","uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture",a==="attribute"&&"attribute float aInstanceID"),a!==void 0&&Hi.roundUnsigned,Hi.modulus,Hi.texelFetchWithFallback[y],l==="ubyte"&&Hi.decodeUbyteRGBAEncodedFloat,Oe(a===void 0?"int iInstance = gl_InstanceID":"int iInstance = int(roundUnsigned(aInstanceID))","iInstance = iInstance + uBaseInstance","int iSecondary = modulus(iInstance, (uTileDimensions.y - 1))","int iPrimary = iInstance / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 iCellVertex = iCell + aGeoCellOffset","vec2 uTileDimensionsMinus1 = vec2(float(uTileDimensions.x), float(uTileDimensions.y)) - 1.0","vec2 ySampleCoordinate = vec2(iCellVertex.y, iCellVertex.x) / vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x)","float y = "+(l==="float"?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCellVertex.y, iCellVertex.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCellVertex.y, iCellVertex.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${d})`),"vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)","vec2 posAxisXZ = uTileStartLocationAxisXZ + cellSizeAxis * "+(i?"vec2(iCellVertex.y, iCellVertex.x)":"iCellVertex"),"vec3 posAxis = vec3(posAxisXZ.x, y, posAxisXZ.y)")),m.push(...Yh({axisWorldTranslation:r.axisWorldTranslation,normalSource:"custom"},!0,{attributeNameAxisCoord:void 0,variableNameAxisCoord:"posAxis",variableNameWorldCoord:"posWorld"})),s==="phong"&&m.push(gs("posWorld","varying vec3 vPosWorld"),...o==="uint"?[Hi.texelFetchUnsignedWithFallback[y],Rn("vec4 normalAxisRGB = vec4(texelFetchUnsignedWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))) / float(-1u)")]:[Rn("vec4 normalAxisRGB = texelFetchWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))")],Rn("vec3 normalAxis = (normalAxisRGB.rgb * 2.0) - 1.0","vNormal = normalize(normalAxis * uScale)"),et("varying vec3 vNormal",...o==="uint"?["uniform usampler2D uNormalmapTexture"]:["uniform sampler2D uNormalmapTexture"])),S.push(et("varying vec3 vTriangleBary")),t==="uniform"?S.push(et("uniform vec4 uColorDiffuse"),Oe("vec4 colorFragment = uColorDiffuse")):Array.isArray(t)&&t[0]==="lookup"?t[1]==="value"?(m.push(gs("posAxis.xz","varying vec2 vVertexLocationAxisXZ")),S.push(et("uniform vec4 uTileBoundsAxisXZ","uniform vec2 uTileDimensionsXZ","varying vec2 vVertexLocationAxisXZ","uniform sampler2D uTileIntensityValues","uniform mat4 uViewProjectionMatrix","uniform vec3 uScale","uniform vec3 uDisp"),u==="ubyte"&&Hi.decodeUbyteRGBAEncodedFloat,e==="bilinear"?Oe("vec2 cellSizeAxisXZ = uTileBoundsAxisXZ.zw / (uTileDimensionsXZ - 1.0)","vec2 cellIndex = (vVertexLocationAxisXZ - uTileBoundsAxisXZ.xy) / cellSizeAxisXZ","vec2 cellStart = floor(cellIndex)","vec2 cellEnd = ceil(cellIndex)","vec2 cellStartNormalized = cellStart / (uTileDimensionsXZ - 1.0)","vec2 cellEndNormalized = cellEnd / (uTileDimensionsXZ - 1.0)",`vec4 sample00 = texture2D(uTileIntensityValues, ${i?"cellStartNormalized":"vec2(cellStartNormalized.y, cellStartNormalized.x)"})`,`vec4 sample01 = texture2D(uTileIntensityValues, ${i?"vec2(cellStartNormalized.x, cellEndNormalized.y)":"vec2(cellStartNormalized.y, cellEndNormalized.x)"})`,`vec4 sample10 = texture2D(uTileIntensityValues, ${i?"vec2(cellEndNormalized.x, cellStartNormalized.y)":"vec2(cellEndNormalized.y, cellStartNormalized.x)"})`,`vec4 sample11 = texture2D(uTileIntensityValues, ${i?"cellEndNormalized":"vec2(cellEndNormalized.y, cellEndNormalized.x)"})`,"float intensity00 = "+(u==="float"?"sample00.x":`decodeUbyteRGBAEncodedFloat(sample00, ${d})`),"float intensity01 = "+(u==="float"?"sample01.x":`decodeUbyteRGBAEncodedFloat(sample01, ${d})`),"float intensity10 = "+(u==="float"?"sample10.x":`decodeUbyteRGBAEncodedFloat(sample10, ${d})`),"float intensity11 = "+(u==="float"?"sample11.x":`decodeUbyteRGBAEncodedFloat(sample11, ${d})`),"vec2 lerpFactors = cellIndex - cellStart",`float intensityR1 = mix(intensity00, intensity10, ${i?"lerpFactors.x":"lerpFactors.y"})`,`float intensityR2 = mix(intensity01, intensity11, ${i?"lerpFactors.x":"lerpFactors.y"})`,`float intensityP = mix(intensityR1, intensityR2,  ${i?"lerpFactors.y":"lerpFactors.x"})`):Oe("vec2 cellSizeAxisXZ = uTileBoundsAxisXZ.zw / (uTileDimensionsXZ - 1.0)","vec2 cellIndex = floor((vVertexLocationAxisXZ - uTileBoundsAxisXZ.xy) / cellSizeAxisXZ)","vec2 cellIndexNormalized = cellIndex / (uTileDimensionsXZ - 1.0)",`vec4 sample0 = texture2D(uTileIntensityValues, ${i?"cellIndexNormalized":"vec2(cellIndexNormalized.y, cellIndexNormalized.x)"})`,"float intensityP = sample0.x"),...Jo("intensityP",t[2]))):(m.push(gs(`posAxis.${t[1]}`,"varying float vLookupValue")),S.push(et("varying float vLookupValue"),...Jo("vLookupValue",t[2]))):t===void 0&&S.push(Oe("vec4 colorFragment = vec4(0.0, 0.0, 0.0, 0.0)")),s==="phong"&&S.push(...Ub),n&&(m.push(et("attribute vec3 aTriangleBary"),gs("aTriangleBary","varying vec3 vTriangleBary")),S.push(et("uniform vec4 uWireframeColor","uniform float uWireframeThickness"),Hi.computeScreenSpaceWireframe,Xi("colorFragment =","float edge = computeScreenSpaceWireframe(vTriangleBary, uWireframeThickness)",t?`if (edge > 0.0) {
                                    colorFragment = vec4(mix(colorFragment.rgb, uWireframeColor.rgb, edge * uWireframeColor.a), max(colorFragment.a, uWireframeColor.a));
                                }`:`if (edge > 0.0) {
                                    colorFragment = uWireframeColor;
                                  } else {
                                      discard;
                                  }`))),{idVertex:`SurfaceGrid:${Rs(r)}`,idFragment:`SurfaceGrid:${Rs(r)}`,vertexShaderModifiers:m,fragmentShader:"FragmentShader",fragmentShaderModifiers:S}}}},DebugSurfaceGridNormals:r=>({idFeature:"DebugSurfaceGridNormals",apply:(t,e)=>({idVertex:`DebugSurfaceGridNormals:${Rs(r)}`,idFragment:`DebugSurfaceGridNormals:${Rs(r)}`,vertexShaderModifiers:[et("attribute float aNormalArrow","uniform int uBaseInstance","uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture",r.instanceIdSource==="attribute"&&"attribute float aInstanceID",...r.normalTextureType==="uint"?["uniform usampler2D uNormalmapTexture"]:["uniform sampler2D uNormalmapTexture"]),Hi.roundUnsigned,Hi.modulus,Hi.texelFetchWithFallback[e],r.heightmapTextureType==="ubyte"&&Hi.decodeUbyteRGBAEncodedFloat,Oe(r.instanceIdSource===void 0?"int iInstance = gl_InstanceID":"int iInstance = int(roundUnsigned(aInstanceID))","iInstance = iInstance + uBaseInstance","int iSecondary = modulus(iInstance, (uTileDimensions.y - 1))","int iPrimary = iInstance / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 uTileDimensionsMinus1 = vec2(float(uTileDimensions.x), float(uTileDimensions.y)) - 1.0","float y00 = "+(r.heightmapTextureType==="float"?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${r.littleEndian})`),"float y01 = "+(r.heightmapTextureType==="float"?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${r.littleEndian})`),"float y10 = "+(r.heightmapTextureType==="float"?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)), ${r.littleEndian})`),"float y11 = "+(r.heightmapTextureType==="float"?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)), ${r.littleEndian})`),"float y = (y00 + y01 + y10 + y11) / 4.0","vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)",`vec2 posAxisXZ = uTileStartLocationAxisXZ + cellSizeAxis * (0.5 + ${r.flipXZ?"vec2(iCell.y, iCell.x)":"iCell"})`,"vec3 posAxis = vec3(posAxisXZ.x, y, posAxisXZ.y)",...r.normalTextureType==="uint"?["vec4 normalAxisRGB = vec4(texelFetchUnsignedWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))) / float(-1u)"]:["vec4 normalAxisRGB = texelFetchWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))"],"vec3 normalAxis = (normalAxisRGB.rgb * 2.0) - 1.0","vec3 normalWorld = normalize(normalAxis * uScale)"),...r.normalTextureType==="uint"?[Hi.texelFetchUnsignedWithFallback[e]]:[],...Yh({axisWorldTranslation:r.axisWorldTranslation,normalSource:"custom"},!0,{attributeNameAxisCoord:void 0,variableNameAxisCoord:"posAxis",variableNameWorldCoord:"posWorld"}),Xi("posWorld =","vec3 dirArrow = normalWorld","vec3 posArrowStart = posWorld","vec3 posArrowEnd = posWorld + dirArrow * 0.010","vec3 notParallel = normalize(mix( vec3( 0.0, 1.0, 0.0 ), vec3( 0.2, 0.8, 0.0 ), step( abs(dirArrow.y), 0.9 ) ))","vec3 dirArrowLeft = normalize(-dirArrow + 0.50 * normalize(cross(dirArrow, notParallel)))","vec3 dirArrowRight = normalize(-dirArrow + 0.50 * normalize(cross(notParallel, dirArrow)))","vec3 posArrowLeft = posArrowEnd + dirArrowLeft * 0.0025","vec3 posArrowRight = posArrowEnd + dirArrowRight * 0.0025",`if (aNormalArrow == 0.0) {
                        posWorld = posArrowStart;
                    } else if (aNormalArrow == 1.0) {
                        posWorld = posArrowEnd;
                    } else if (aNormalArrow == 2.0) {
                        posWorld = posArrowLeft;
                    } else if (aNormalArrow == 3.0) {
                        posWorld = posArrowRight;
                    }`)],fragmentShader:"FragmentShader",fragmentShaderModifiers:[Rn("gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0)")]})}),OffsetTowardsCamera:()=>({idFeature:"OffsetTowardsCamera",apply:r=>({idVertex:"OffsetTowardsCamera",idFragment:void 0,vertexShaderModifiers:[et("uniform vec3 uCameraLoc"),Xi("posWorld =","posWorld = posWorld + normalize(uCameraLoc) * 0.0025")]})}),AliasedEdge:{idFeature:"AliasedEdge",apply:r=>({idVertex:"AliasedEdge",idFragment:"AliasedEdge",vertexShaderModifiers:[et("attribute float aSegmentInside"),et("varying float vSegmentInside"),et("varying float vSegmentSide"),Xi("gl_Position = ",`
                vSegmentInside = aSegmentInside;
                vSegmentSide = aSegmentSide;
                `)],fragmentShaderModifiers:[LF("#extension GL_OES_standard_derivatives : enable"),et("uniform float uAALimit"),et("varying float vSegmentInside"),et("varying float vSegmentSide"),Xi("antiAliasFactor = ",`
                float dist = (uAALimit - vSegmentInside);
                vec2 ddist = vec2(dFdx(dist), dFdy(dist));
                float pixelDist = dist / length(ddist);
                // additional blurring
                pixelDist *= 0.5;

                float aa = clamp(0.5 - pixelDist, 0.0, 1.0);
                if((vSegmentSide <= 0.0 || vSegmentSide >= 1.0) && aa <=0.99){
                    aa *= 0.5;
                }
                antiAliasFactor = aa;
                `)]})},Glow1D:r=>({idFeature:"Glow1D",apply:()=>{const t=Math.round(r.spreadPx),e=Math.round(r.blurPx),i=t+e,s=r.firstPass,n=[];for(let a=-i;a<=i;a+=1){const o=Math.abs(a);n.push(s?{x:a.toFixed(1),y:"0.0",distPx:o.toFixed(1)}:{x:"0.0",y:a.toFixed(1),distPx:o.toFixed(1)})}return{idVertex:`Glow1D:${Rs(r)}`,idFragment:`Glow1D:${Rs(r)}`,vertexShaderModifiers:[gs("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")],fragmentShader:"FragmentShader",fragmentShaderModifiers:[et("uniform sampler2D uTexture"),et("varying vec2 vTextureCoord"),et("uniform vec2 uTextureSize"),s&&et("uniform vec2 uOffsetPx"),!s&&et("uniform sampler2D uTextureFirstGlowPass"),!s&&et("uniform vec4 uGlowColor"),Xi("antiAliasFactor =","vec2 oneTexel = vec2(1.0, 1.0) / uTextureSize",...s?[]:[`float inverseIntensity =
                        0.25 * texture2D(uTexture, vTextureCoord).a +
                        0.125 * texture2D(uTexture, vTextureCoord + vec2(-oneTexel.x, 0.0)).a +
                        0.125 * texture2D(uTexture, vTextureCoord + vec2(oneTexel.x, 0.0)).a +
                        0.125 * texture2D(uTexture, vTextureCoord + vec2(0.0, -oneTexel.y)).a +
                        0.125 * texture2D(uTexture, vTextureCoord + vec2(0.0, oneTexel.y)).a +
                        0.0625 * texture2D(uTexture, vTextureCoord + vec2(-oneTexel.x, -oneTexel.y)).a +
                        0.0625 * texture2D(uTexture, vTextureCoord + vec2(oneTexel.x, -oneTexel.y)).a +
                        0.0625 * texture2D(uTexture, vTextureCoord + vec2(-oneTexel.x, oneTexel.y)).a +
                        0.0625 * texture2D(uTexture, vTextureCoord + vec2(oneTexel.x, oneTexel.y)).a`,"antiAliasFactor *= 1.0 - (inverseIntensity * inverseIntensity)","if (antiAliasFactor <= 0.0) { discard; }"],"float distancePx = 255.0","vec2 sample_tx = vec2(0.0)",...s?["vec2 texCoordOffset = vTextureCoord - uOffsetPx * oneTexel",...n.map((a,o)=>[`sample_tx = texCoordOffset + oneTexel * vec2(${a.x}, ${a.y})`,`if (distancePx > ${a.distPx} && sample_tx.x <= 1.0 && sample_tx.y <= 1.0 && sample_tx.x >= 0.0 && sample_tx.y >= 0.0 && texture2D(uTexture, sample_tx).a > 0.0) { distancePx = ${a.distPx}; }`]).flat(),"vec4 colorFragment = vec4(distancePx / 255.0, 0.0, 0.0, 1.0)"]:["vec4 sample_horizontal = vec4(0.0)","float horizontal_dist = 255.0","float min_horizontal_dist = 255.0",...n.map((a,o)=>[`sample_tx = vTextureCoord + oneTexel * vec2(${a.x}, ${a.y})`,`if (sample_tx.x <= 1.0 && sample_tx.y <= 1.0 && sample_tx.x >= 0.0 && sample_tx.y >= 0.0) {
                                            sample_horizontal = texture2D(uTextureFirstGlowPass, sample_tx);
                                            horizontal_dist = sample_horizontal.r * 255.0;
                                          }`,"if (sample_horizontal.a < 0.9) { horizontal_dist = 255.0; }","min_horizontal_dist = min(min_horizontal_dist, horizontal_dist)",`distancePx = min(distancePx, pow(horizontal_dist * horizontal_dist + ${a.y} * ${a.y}, 0.5))`]).flat(),`if (distancePx > ${i.toFixed(1)}) { discard; }`,"vec4 pixelGlowColor = vec4(0.0, 0.0, 0.0, 0.0)",`if (distancePx > ${t.toFixed(1)}) {
                                        float lerpAmount = (distancePx - ${t.toFixed(1)}) / ${(e+1).toFixed(1)};
                                        pixelGlowColor = mix(uGlowColor, vec4(uGlowColor.rgb, 0.0), 1.0 - (1.0 - lerpAmount) * (1.0 - lerpAmount));
                                    } else {
                                        pixelGlowColor = uGlowColor;
                                    }`,"vec4 colorFragment = pixelGlowColor"])]}}}),MousePicking:{idFeature:"MousePicking",apply:r=>({idVertex:void 0,idFragment:"MousePicking",fragmentShaderModifiers:[et("uniform vec4 uColor"),Oe("vec4 colorFragment = uColor"),t=>t.replace("gl_FragColor = vec4(fragColorEnd.rgb, fragColorEnd.a * antiAliasFactor)",`if (antiAliasFactor <= 0.0) { discard; }
gl_FragColor = fragColorEnd`)]})},MousePickingAttribute:{idFeature:"MousePickingAttribute",apply:r=>({idVertex:"MousePickingAttribute",idFragment:"MousePickingAttribute",vertexShaderModifiers:[gs("attribute vec4 aColor","varying vec4 vColor")],fragmentShaderModifiers:[et("varying vec4 vColor"),Oe("vec4 colorFragment = vColor"),t=>t.replace("gl_FragColor = vec4(fragColorEnd.rgb, fragColorEnd.a * antiAliasFactor)",`if (antiAliasFactor <= 0.0) { discard; }
gl_FragColor = fragColorEnd`)]})},AttributeHighlight:{idFeature:"AttributeHighlight",apply:r=>({idVertex:"AttributeHighlight",idFragment:"AttributeHighlight",vertexShaderModifiers:[gs("attribute float aIsHighlighted","varying float vIsHighlighted")],fragmentShaderModifiers:[t=>t.replace("uniform float uIsHighlighted","varying float vIsHighlighted").replace("uIsHighlighted","vIsHighlighted")]})},StippleTexture:{idFeature:"StippleTexture",apply:(r,t)=>({idVertex:"StippleTexture",idFragment:"StippleTexture",vertexShaderModifiers:[et("attribute vec2 aLengthSoFar"),et("varying float vLengthSoFar"),et("uniform vec2 uStippleCount"),Rn(`
                vec2 len = (((aLengthSoFar) / uScale) / 2.0) * uStippleCount;
                vLengthSoFar = len.x + len.y;
                `)],fragmentShaderModifiers:[et("uniform sampler2D uStippleTexture"),et("uniform float uStippleScale"),et("varying float vLengthSoFar"),t==="webgl1"&&et("uniform float uStippleTextureWidthLimiter"),Xi("antiAliasFactor = ",`
                    float stippleSampleY = texture2D(
                        uStippleTexture, 
                        ${t==="webgl1"?"vec2(mod((vLengthSoFar / uStippleScale) , uStippleTextureWidthLimiter), 0)":"vec2((vLengthSoFar / uStippleScale), 0)"}
                    ).r;
                    float stippleAA = (stippleSampleY - 0.5) * 2.0;
                    antiAliasFactor *= stippleAA;
                    if (antiAliasFactor <= 0.0) { discard; }`)]})},StippleTextureInstanced:{idFeature:"StippleTextureInstanced",apply:(r,t)=>({idVertex:"StippleTextureInstanced",idFragment:"StippleTextureInstanced",vertexShaderModifiers:[et("attribute vec2 aLengthSoFarA"),et("attribute vec2 aLengthSoFarB"),et("varying float vLengthSoFar"),et("uniform vec2 uStippleCount"),Rn(`
                vec2 aLengthSoFar = mix(aLengthSoFarA, aLengthSoFarB, aSegmentSide);
                vec2 len = (((aLengthSoFar) / uScale) / 2.0) * uStippleCount;
                vLengthSoFar = len.x + len.y;
                `)],fragmentShaderModifiers:[et("uniform sampler2D uStippleTexture"),et("uniform float uStippleScale"),et("varying float vLengthSoFar"),t==="webgl1"&&et("uniform float uStippleTextureWidthLimiter"),Xi("antiAliasFactor = ",`
                    float stippleSampleY = texture2D(
                        uStippleTexture, 
                        ${t==="webgl1"?"vec2(mod((vLengthSoFar / uStippleScale) , uStippleTextureWidthLimiter), 0)":"vec2((vLengthSoFar / uStippleScale), 0)"}
                    ).r;
                    float stippleAA = (stippleSampleY - 0.5) * 2.0;
                    antiAliasFactor *= stippleAA;
                    if (antiAliasFactor <= 0.0) { discard; }`)]})},PolarHeatmap:r=>({idFeature:"PolarHeatmap",apply:(t,e)=>{const i="dataType"in r,s="interpolation"in r?r:void 0,n=(s==null?void 0:s.interpolation)==="bilinear",a=s==null?void 0:s.intensityTextureType,o=s==null?void 0:s.littleEndian;return{idVertex:void 0,idFragment:`PolarHeatmap:${Rs(r)}`,vertexShaderModifiers:[],fragmentShaderModifiers:[et("uniform vec2 uViewportSize","uniform vec2 uScale","uniform vec2 uDisp","uniform float uSectors","uniform float uAnnuli","uniform float uAmplitudeStart","uniform float uAmplitudeStep","uniform float uAmplitudeAxisStart","uniform float uAmplitudeAxisEnd","uniform float uAngleOffset","uniform float uAngleDirection",s&&"uniform sampler2D uTileIntensityValues",i&&"uniform vec4 uColor"),Hi.texelFetchWithFallback[e],a==="ubyte"&&Hi.decodeUbyteRGBAEncodedFloat,Oe("vec2 posWorld = (2.0 * gl_FragCoord.xy / uViewportSize) - 1.0","vec2 posAxis = posWorld * uScale + uDisp","float amplitudeAxisInterval = uAmplitudeAxisEnd - uAmplitudeAxisStart","float amplitude = uAmplitudeAxisStart + sign(amplitudeAxisInterval) * sqrt(posAxis.x * posAxis.x + posAxis.y * posAxis.y)","float iAnnulus = (amplitude - uAmplitudeStart) / uAmplitudeStep","if (iAnnulus < 0.0 || iAnnulus > uAnnuli) { discard; }"),i&&Oe("vec4 colorFragment = uColor"),s&&Xi("if (iAnnulus","float angRad = atan(posAxis.y, posAxis.x) * uAngleDirection + uAngleOffset","if (angRad < 0.0) { angRad = angRad + 2.0 * 3.1415926538; }","if (angRad > 2.0 * 3.1415926538) { angRad = angRad - 2.0 * 3.1415926538; }","float iSector = uSectors * angRad / (2.0 * 3.1415926538)","vec2 cellIndex = vec2(iSector, iAnnulus)","ivec2 cellStart = ivec2(floor(cellIndex))","ivec2 cellEnd = cellStart + ivec2(1)","if (cellEnd.x >= int(uSectors)) { cellEnd = ivec2(0, cellEnd.y); }",s.flipXY&&"cellIndex = vec2(cellIndex.y, cellIndex.x)",s.flipXY&&"cellStart = ivec2(cellStart.y, cellStart.x)",s.flipXY&&"cellEnd = ivec2(cellEnd.y, cellEnd.x)","vec2 tileDimensions = "+(s.flipXY?"vec2(uAnnuli, uSectors)":"vec2(uSectors, uAnnuli)"),n&&"vec4 sample00 = texelFetchWithFallback(uTileIntensityValues, cellStart, tileDimensions)",n&&"vec4 sample01 = texelFetchWithFallback(uTileIntensityValues, ivec2(cellStart.x, cellEnd.y), tileDimensions)",n&&"vec4 sample10 = texelFetchWithFallback(uTileIntensityValues, ivec2(cellEnd.x, cellStart.y), tileDimensions)",n&&"vec4 sample11 = texelFetchWithFallback(uTileIntensityValues, cellEnd, tileDimensions)",n&&"float intensity00 = "+(a==="float"?"sample00.x":`decodeUbyteRGBAEncodedFloat(sample00, ${o})`),n&&"float intensity01 = "+(a==="float"?"sample01.x":`decodeUbyteRGBAEncodedFloat(sample01, ${o})`),n&&"float intensity10 = "+(a==="float"?"sample10.x":`decodeUbyteRGBAEncodedFloat(sample10, ${o})`),n&&"float intensity11 = "+(a==="float"?"sample11.x":`decodeUbyteRGBAEncodedFloat(sample11, ${o})`),n&&"vec2 lerpFactors = cellIndex - vec2(cellStart)",n&&"float intensityR1 = mix(intensity00, intensity10, lerpFactors.x)",n&&"float intensityR2 = mix(intensity01, intensity11, lerpFactors.x)",n&&"float intensityP = mix(intensityR1, intensityR2,  lerpFactors.y)",!n&&"vec4 sample0 = texelFetchWithFallback(uTileIntensityValues, cellStart, tileDimensions)",!n&&"float intensityP = "+(a==="float"?"sample0.x":`decodeUbyteRGBAEncodedFloat(sample0, ${o})`)),...s?Jo("intensityP",s.lut):[]]}}})},IF={"2D":`
void main(void) {
    gl_Position = vec4(posWorld, 0.0, 1.0 );
}
`,"2DMatrix":`
void main(void) {
    gl_Position = posWorld;
}
`,"3D":`
uniform mat4 uViewProjectionMatrix;
void main(void) {
    gl_Position = uViewProjectionMatrix * vec4(posWorld, 1.0);
}
`},PF={FragmentShader:`
uniform float uIsHighlighted;
uniform vec4 uHighlightColorOffset;
uniform float uRenderEffectMask;
void main(void) {
    float antiAliasFactor = 1.0;
    vec4 fragColorEnd = colorFragment;
    if (fragColorEnd.a <= 0.0) { discard; }
    fragColorEnd = clamp(fragColorEnd + uIsHighlighted * uHighlightColorOffset, vec4(0.0), vec4(1.0));
    fragColorEnd = mix(fragColorEnd, vec4(1.0), uRenderEffectMask * fragColorEnd.a * 1000.0);
    gl_FragColor = vec4(fragColorEnd.rgb, fragColorEnd.a * antiAliasFactor);
}
`,Empty:`
void main(void) {
}
`};class iE{constructor(t,e,i,s,n){if(this.id=t,this.shader=i,this.gl=s,this.info=n,!e||!i)throw new Rp(`Could not find ${this.nE()} ${this.oE()} shader source code.`);this.gl.shaderSource(i,e),this.gl.compileShader(i)}get src(){return""}nE(){return this.id.toString()}oE(){return this.gl.getShaderParameter(this.shader,this.gl.SHADER_TYPE)===this.gl.FRAGMENT_SHADER?"fragment":"vertex"}}class UF extends iE{constructor(t,e,i,s){super(t,e,i.createShader(i.VERTEX_SHADER),i,s)}}class OF extends iE{constructor(t,e,i,s){super(t,e,i.createShader(i.FRAGMENT_SHADER),i,s)}}class GF{constructor(t,e,i,s){this.aE=new Map,this.lE=new Map,this.uE=i,this.cE=i.createProgram(),this.dE=`${t.nE()} vertex`,this.fE=`${e.nE()} fragment`,i.attachShader(this.cE,t.shader),i.attachShader(this.cE,e.shader),i.bindAttribLocation(this.cE,0,"aPos"),i.linkProgram(this.cE),i.deleteShader(t.shader),i.deleteShader(e.shader),this.allAttributeNames=t.info.allAttributeNames,this.allUniformNames=Array.from(new Set(t.info.allUniformNames.concat(e.info.allUniformNames)).values()),this.vertexSharedRemovedVariables=t.info.removedVariableNames,this.fragmentSharedRemovedVariables=e.info.removedVariableNames}get vertexShaderSrc(){return""}get fragmentShaderSrc(){return""}AE(t){return wn(0,()=>DM())}gE(t){const e=this.mE(t);if(e===void 0)throw this.AE(`Could not get ${t} uniform from ${this.dE} and ${this.fE} shaders.`);return e}mE(t){const e=this.aE.get(t);if(e)return e;const i=this.uE.getUniformLocation(this.cE,t);return i?(this.aE.set(t,i),i):void 0}yE(t){const e=this.pE(t);if(e===void 0)throw this.AE(`Could not get ${t} attribute from ${this.dE} and ${this.fE} shaders.`);return e}pE(t){const e=this.lE.get(t);if(e||e===0)return e;const i=this.uE.getAttribLocation(this.cE,t);return i>=0?(this.lE.set(t,i),i):void 0}W(){this.uE.deleteProgram(this.cE)}}const YF=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/,Gm=r=>{let t;try{t=nt.getComputedStyle(r)}catch{return null}return t};/**
 * stacking-order by Rich Harris
 * https://github.com/Rich-Harris/stacking-order
 *
 * @license MIT
 *
 * Converted to TypeScript and edited to match LCJS requirements.
 */function HF(r){const t=Gm(r);return!!t&&(t.position==="fixed"||!!(t.zIndex!=="auto"&&t.position!=="static"||function(e){const i=Gm(sE(e)),s=i?i.display:"auto";return s==="flex"||s==="inline-flex"}(r))||+t.opacity<1||"transform"in t&&t.transform!=="none"||"webkitTransform"in t&&t.webkitTransform!=="none"||"mixBlendMode"in t&&t.mixBlendMode!=="normal"||"filter"in t&&t.filter!=="none"||"webkitFilter"in t&&t.webkitFilter!=="none"||"isolation"in t&&t.isolation==="isolate"||!!YF.test(t.willChange)||t.webkitOverflowScrolling==="touch")}function Hb(r){let t=r.length;for(;t--;)if(HF(r[t]))return r[t];return null}function Xb(r){var t;return r&&Number(((t=Gm(r))===null||t===void 0?void 0:t.zIndex)||0)||0}function Wb(r){const t=[];for(;r;)t.push(r),r=sE(r);return t}function sE(r){var t;return((t=r.parentNode)===null||t===void 0?void 0:t.host)||r.parentNode}class XF extends kF{constructor(t){if(super(),this.SE=new Map,this.vE=new Map,this.bE=new Map,this.xE=!0,this.ME=null,this._E=null,this.wE=null,this.CE=null,this.kE=0,this.TE=0,this.FE=0,this.IE=!1,this.PE=!0,this.$i=!1,this.DE=wp(`chart-engine-${new Date().getTime()}${Math.trunc(1e6*Math.random()).toString()}`),this.X={x:100,y:100},this.BE=()=>{this.LE&&clearTimeout(this.LE),this.LE=setTimeout(()=>this.Zr(),12)},this.RE=o=>{const l=o.intersectionRatio>0,u=o.target.getAttribute("data-lcjs-engine-id");if(u){const d=this.SE.get(u);if(d){const f=d.EE();d.zE(l),l?this.vE.set(u,d):this.vE.delete(u),f!==l&&d.Ss()}}},this.VE=(o,l,u,d,f)=>{const y=f[0],m=this.gl;if(m.bindFramebuffer(m==null?void 0:m.FRAMEBUFFER,null),m.useProgram(this._E.cE),m.clear(m.COLOR_BUFFER_BIT),y.Gr.getBoundingClientRect()){const S=y.OE();m.viewport(0,0,S.x,S.y),m.activeTexture(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,y.NE),m.uniform1i(this.kE,0),m.uniformMatrix4fv(this.TE,!1,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),m.bindBuffer(m.ARRAY_BUFFER,this.wE),m.enableVertexAttribArray(0),m.vertexAttribPointer(this.FE,2,m.FLOAT,!1,0,0),m.drawArrays(m.TRIANGLES,0,6),m.bindFramebuffer(m.FRAMEBUFFER,null),y.GE&&(y.GE.clearRect(0,0,y.GE.canvas.width,y.GE.canvas.height),y.GE.drawImage(this.WE,0,this.WE.height-S.y,S.x,S.y,0,0,y.GE.canvas.width,y.GE.canvas.height))}},this.UE=(o,l,u,d,f)=>{const y=this.gl;y.bindFramebuffer(y==null?void 0:y.FRAMEBUFFER,null),y.useProgram(this._E.cE),y.clear(y.COLOR_BUFFER_BIT),f.forEach(m=>{const S=m.Gr.getBoundingClientRect();if(S){const x=S.right-S.left,v=S.bottom-S.top,b=S.left,E=d-S.bottom;y.viewport(b*this.YE-o*this.YE,E*this.YE+l*this.YE,x*this.YE,v*this.YE)}y.activeTexture(y.TEXTURE0),y.bindTexture(y.TEXTURE_2D,m.NE),y.uniform1i(this.kE,0),y.uniformMatrix4fv(this.TE,!1,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),y.bindBuffer(y.ARRAY_BUFFER,this.wE),y.enableVertexAttribArray(0),y.vertexAttribPointer(this.FE,2,y.FLOAT,!1,0,0),y.drawArrays(y.TRIANGLES,0,6)}),y.bindFramebuffer(y.FRAMEBUFFER,null)},this.HE=(o,l,u,d,f)=>{const y=f[0],m=this.gl2.ctx;m.bindFramebuffer(m.DRAW_FRAMEBUFFER,null),m.clear(m.COLOR_BUFFER_BIT);const S=y.OE();m.bindFramebuffer(m.READ_FRAMEBUFFER,y.$E[1]),m.blitFramebuffer(0,0,S.x,S.y,0,this.WE.height-S.y,S.x,this.WE.height,m.COLOR_BUFFER_BIT,m.LINEAR),y.GE&&(y.GE.clearRect(0,0,y.GE.canvas.width,y.GE.canvas.height),y.GE.drawImage(this.WE,0,0)),m.bindFramebuffer(m.FRAMEBUFFER,null)},this.XE=(o,l,u,d,f)=>{const y=this.gl2.ctx;y.bindFramebuffer(y.DRAW_FRAMEBUFFER,null),y.clear(y.COLOR_BUFFER_BIT),f.forEach(m=>{const S=m.Gr.getBoundingClientRect();if(S){const x=S.right-S.left,v=S.bottom-S.top,b=S.left,E=d-S.bottom,T=m.OE();y.bindFramebuffer(y.READ_FRAMEBUFFER,m.$E[1]),y.blitFramebuffer(0,0,T.x,T.y,b*this.YE-o*this.YE,E*this.YE+l*this.YE,(b-o+x)*this.YE,(E+l+v)*this.YE,y.COLOR_BUFFER_BIT,y.LINEAR)}}),y.bindFramebuffer(y.FRAMEBUFFER,null)},this.LE=void 0,this.Un=t,!nt.requestAnimationFrame||!nt.cancelAnimationFrame)throw new Error("LightningChart JS depends on requestAnimationFrame. Make sure to load a polyfill in older browsers.");let e=1;if(t&&t.jE)e=t.jE===!0?nt.devicePixelRatio||1:t.jE||1;else{const o=nt.document.head.querySelector('meta[name="viewport"]');o&&o.content.includes("width=device-width")&&(e=nt.devicePixelRatio||1)}this.YE=e,t.Hn=t.Hn===!0,this.PE=t.ZE!==!1,this.QE=t.JE!==!1,this.KE=t.KE||!1;let i=!1;if(t.WE)if(typeof t.WE=="string"){const o=nt.document.getElementById(t.WE);if(!o)throw new Error(`Canvas "${t.WE}" doesn't exist.`);this.WE=o,i=!0}else this.WE=t.WE,i=!0;else this.WE=nt.document.createElement("canvas");const s={preserveDrawingBuffer:!0,alpha:!0,antialias:!1};if(t.qE!==2&&t.qE){const o=this.WE.getContext("webgl",{...s,antialias:!!t.ZE})||this.WE.getContext("experimental-webgl",{...s,antialias:!!t.ZE});this.gl=o,this.tz=!1}else{const o=this.WE.getContext("webgl2",s);this.gl2={ctx:o},this.gl=o,this.tz=!0}if(!this.gl)throw new Ri("No WebGL context available."+(t!=null&&t.qE?`
Selected explicit target: WebGL ${t.qE}`:""));const n=[];if(this.iz={WEBGL_lose_context:this.gl.getExtension("WEBGL_lose_context")},Object.keys(this.iz).forEach(o=>{this.iz[o]===null&&n.push(o)}),this.tz)this.sz=!0;else{const o={ANGLE_instanced_arrays:this.gl.getExtension("ANGLE_instanced_arrays"),EXT_blend_minmax:this.gl.getExtension("EXT_blend_minmax"),OES_element_index_uint:this.gl.getExtension("OES_element_index_uint"),OES_standard_derivatives:this.gl.getExtension("OES_standard_derivatives"),OES_vertex_array_object:this.gl.getExtension("OES_vertex_array_object")};o.OES_standard_derivatives||(this.xE=!1),Object.keys(o).forEach(u=>{o[u]===null&&n.push(u)});const l={OES_texture_float:this.gl.getExtension("OES_texture_float")};this.sz=!!l.OES_texture_float,this.gl1={ctx:this.gl,iz:o,optional:l}}const a=n;if(a.length>0&&t.Hn!==!1){const o=nt.document.createElement("div");o.innerText="LightningChart JS: Some features might not work properly, due to missing WebGL features.",o.style.cssText="position:absolute;top:0;background:red;width:100%;padding:10px;text-align:center;color:white;z-index:1;";const l=nt.document.createElement("button");l.innerText="X",l.addEventListener("click",()=>{o.parentElement&&o.parentElement.removeChild(o)}),nt.document.body.appendChild(o),o.appendChild(l),nt.console.warn("LightningChart JS - Following WebGL extensions could not be loaded:",a.join(", "))}if(this.ez=this.KE?this.hz(this.tz?this.HE.bind(this):this.VE.bind(this)).bind(this):this.rz(this.tz?this.XE.bind(this):this.UE.bind(this)).bind(this),nt.ResizeObserver){const o=l=>{for(const u of l)u.target===this.WE&&this.nz()};this.Zn=new nt.ResizeObserver(o.bind(this)),this.Zn.observe(this.WE)}if(this.oz=((o,l)=>{const u=o,d=new Map,f=new Map,y=new Map,m={totalMs:0,vertexShaders:0,fragmentShaders:0,programs:0},S=(x,v,b=[])=>{const E=[],T=[],V={allAttributeNames:Array.from(x.matchAll(/attribute\s[^\s]*\s(.*);/g)).map(F=>F[1]),allUniformNames:Array.from(x.matchAll(/uniform\s[^\s]*\s(.*);/g)).map(F=>F[1]),allVaryingNames:Array.from(x.matchAll(/varying\s[^\s]*\s(.*);/g)).map(F=>F[1]),removedVariableNames:[]};if(l){const F=x.match(/#extension.*/g);F&&T.push(...F),x=x.replace(/#extension.*/g,"")}else if(E.push("#version 300 es"),(x=(x=(x=x.replace(/#extension.*/g,"")).replace(/attribute/g,"in")).replace(/texture2D/g,"texture")).includes("usampler2D")&&E.push("precision highp usampler2D;"),v==="vertex")x=x.replace(/varying/g,"out");else{x=x.replace(/varying/g,"in");const F=b.find(B=>B.type==="fragOutput");x=(x=F?`out ${F.fragOutput} fragOutput;
${x}`:`out vec4 fragOutput;
${x}`).replace(/gl_FragColor/g,"fragOutput")}return T&&E.push(...T),E.push("precision highp float;"),E.push("precision highp int;"),{source:x=`${E.join(`
`)}
${x}`,info:V}};return(...x)=>{const v=l?"webgl1":"webgl2";let b,E,T,V,F,B,z,L,A;try{const R=nt.performance.now();b=x.filter(O=>O!==!1&&O!==void 0),E=((O,W)=>{const P=O.map(Vt=>Vt.apply(O,W)),H=P.map(Vt=>Vt.idVertex).filter(Vt=>Vt!==void 0).sort().join(" "),j=P.map(Vt=>Vt.idFragment).filter(Vt=>Vt!==void 0).sort().join(" "),Q=`vert: ${H} frag: ${j}`;let J,ht=!1,ot=!1;const ut=[];let dt;const Et=[],St=[];if(P.forEach(Vt=>{if(Vt.defaultVertexShader&&(ht||(J=Vt.defaultVertexShader)),Vt.vertexShader){if(J&&ht&&J!==Vt.vertexShader)throw new xf(`Conflicting vertex shader templates ${J} vs ${Vt.vertexShader}`,Q,Vt);J=Vt.vertexShader,ht=!0}if(Vt.vertexShaderModifiers)for(const _t of Vt.vertexShaderModifiers)_t!==void 0&&_t!==!1&&ut.push(_t);if(Vt.defaultFragmentShader&&(ot||(dt=Vt.defaultFragmentShader)),Vt.fragmentShader){if(dt&&ot&&dt!==Vt.fragmentShader)throw new xf(`Conflicting fragment shader templates ${dt} vs ${Vt.fragmentShader}`,Q,Vt);dt=Vt.fragmentShader,ot=!0}if(Vt.fragmentShaderModifiers)for(const _t of Vt.fragmentShaderModifiers)_t!==void 0&&_t!==!1&&Et.push(_t);Vt.hints&&Vt.hints.forEach(_t=>{_t&&St.push(_t)})}),!J)throw new xf("No vertex shader template defined",Q);if(!dt)throw new xf("Fragment shader not defined",Q);return{id:Q,vertexShader:{id:H,template:J,modifiers:ut},fragmentShader:{id:j,template:dt,modifiers:Et},hints:St}})(b,v);const w=y.get(E.id);if(T="new",w)return T="existing",B=w.vertexShaderSrc,z=w.fragmentShaderSrc,w;const C=E.vertexShader.id;let k=d.get(C);if(k)B=k.src,V="existing";else{V="new";const O=new Pb(E.vertexShader.modifiers).build(IF[E.vertexShader.template]),{source:W,info:P}=S(O,"vertex");B=W,L=P,k=new UF(C,W,u,P),d.set(C,k),m.vertexShaders+=1}const _=E.fragmentShader;let X;const N=_.id;if(X=f.get(N),X)z=X.src,F="existing";else{F="new";const O=PF[_.template],W=new Pb([..._.modifiers]).build(O),{source:P,info:H}=S(W,"fragment",E.hints);z=P,A=H,X=new OF(N,P,u,H),f.set(N,X),m.fragmentShaders+=1}const U=new GF(k,X,u,E);return y.set(E.id,U),m.programs+=1,m.totalMs+=nt.performance.now()-R,U}catch{throw wn(0,()=>{const w=`Unexpected LightningChart JS rendering error.
This can mean a bug in the library, or that it is simply used in unsupported manner (passing wrong type to method, using disposed component, etc).`;return nt.alert(w),new Error(w)})}}})(this.gl,!this.tz),this.KR=(()=>{const o=nt.document.createElement("canvas"),l=o.getContext("2d",{willReadFrequently:!0});if(!l)throw new Ri("Failed to get Text canvas rendering context");return l.fillStyle="#fff",(u,d,f,y)=>{const m=`${d.style} ${d.weight} ${d.size*f}px ${d.family}`;l.font=m,l.textBaseline="alphabetic",l.textAlign="left";const S=l.measureText(u);if(S.width===0)return;const x=S.actualBoundingBoxLeft!==void 0&&S.actualBoundingBoxRight!==void 0?Math.ceil(S.actualBoundingBoxLeft+S.actualBoundingBoxRight):Math.ceil(S.width),v=S.width,b=Math.round(d.size*f),E=S.actualBoundingBoxLeft!==void 0?S.actualBoundingBoxLeft:0;o.width=x>0?x:v,o.height=2*b,l.font=m,l.textBaseline="alphabetic",l.textAlign="left",y?(l.clearRect(0,0,o.width,o.height),l.fillStyle="#fff"):(l.fillStyle="rgba(255,255,255,0)",l.fillRect(0,0,o.width,o.height),l.fillStyle="#000"),l.fillText(u,E,b);const T=l.getImageData(0,0,o.width,o.height);let V=0,F=0;const B=T.width;for(let w=0;w<T.height;w+=1){for(let C=0;C<B;C+=1)if(T.data[w*B*4+4*C+3]!==0){V=w;break}if(V!==0)break}for(let w=T.height-1;w>=0;w-=1){for(let C=0;C<B;C+=1)if(T.data[w*B*4+4*C+3]!==0){F=w;break}if(F!==0)break}const z=l.canvas.height/2-V,L=F-V+1,A=B,R=new Uint8ClampedArray(A*L*1);for(let w=0;w<L;w+=1)for(let C=0;C<A;C+=1)R[1*w*A+1*C+0]=T.data[(w+V)*A*4+4*C+3];return[R,{advance:v,offsetX:E,baseline:z,glyph:u,size:Y(A,L)}]}})(),t.az||(this.KE?this.WE.style.display="none":(this.WE.style.position="absolute",this.WE.style.top="0",this.WE.style.left="0",this.WE.style.right="0",this.WE.style.bottom="0",this.WE.style.width="100%",this.WE.style.height="100%",this.WE.style.boxSizing="content-box",this.WE.style.display="block",this.WE.style.pointerEvents="none")),this.WE.classList.add("lcjs-canvas"),t.lz&&this.WE.setAttribute("data-lcjs-id",t.lz),i||nt.document.body.appendChild(this.WE),nt.IntersectionObserver&&(this.uz=new nt.IntersectionObserver(o=>{for(let l=0;l<o.length;l+=1){const u=o[l];this.RE(u)}},{threshold:Array.from(Array(100)).map((o,l)=>l/100)})),nt.addEventListener("resize",this.BE,{passive:!0}),!this.tz){if(this._E=this.oz($["2DCompose"],$.Color({dataType:"texture-coord-calc-gpu"}),$.VertexLocation({axisWorldTranslation:"matrix4",normalSource:void 0,coordType:"vec4"})),!this._E.cE)throw new Ri("Unable to setup composition shader!");const o=this.gl,l=o.getUniformLocation(this._E.cE,"uColorTexture");if(!l)throw new Ri("Unable to setup composition shader! Failed to find uColorTexture");const u=o.getUniformLocation(this._E.cE,"uMatrix");if(!u)throw new Ri("Unable to setup composition shader! Failed to find uMatrix");this.kE=l,this.TE=u,this.FE=o.getAttribLocation(this._E.cE,"aPos"),this.wE=o.createBuffer(),o.bindBuffer(o.ARRAY_BUFFER,this.wE),o.bufferData(o.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),o.STATIC_DRAW),o.bindBuffer(o.ARRAY_BUFFER,null),this.CE=o.createBuffer(),o.bindBuffer(o.ARRAY_BUFFER,this.CE),o.bufferData(o.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,1,0,0,1,1,1]),o.STATIC_DRAW),o.bindBuffer(o.ARRAY_BUFFER,null)}}hz(t){return e=>{this.ME=null;const i=this.gl.canvas,s=Array.from(this.vE.values());this.IE=!1,s.forEach(n=>{const a=n.OE();(this.X.x<a.x||this.X.y<a.y)&&(this.X.x=Math.max(this.X.x,a.x),this.X.y=Math.max(this.X.y,a.y),i instanceof HTMLCanvasElement&&(i.width=this.X.x,i.height=this.X.y)),n.hn&&n.cz(e),t(0,0,0,0,[n])}),this.IE&&this.nz()}}rz(t){return e=>{this.ME=null,"style"in this.gl.canvas&&!this.Un.dz&&(this.gl.canvas.style.transform=`translateX(${window.scrollX}px) translateY(${window.scrollY}px)`);const i=this.gl.canvas,s=this.WE.clientHeight,n=this.WE.clientWidth;let a=0,o=0;if(i instanceof HTMLCanvasElement){i.width===n*this.YE&&i.height===s*this.YE||(i.width=n*this.YE,i.height=s*this.YE);const u=i.getBoundingClientRect();a=u.x,o=u.y}const l=Array.from(this.vE.values());this.IE=!1,l.sort((u,d)=>u.fz()-d.fz()).forEach(u=>{u.hn&&u.cz(e)}),t(a,o,n,s,l),this.IE&&this.nz()}}nz(t){return!this.IE&&t&&(this.IE=!0),this.ME||this.$i||(this.ME=nt.requestAnimationFrame(this.ez)),this}Az(t){const e=this.DE();return t.Gr.setAttribute("data-lcjs-engine-id",e),this.SE.set(e,t),t.gz(this.SE.size-1),t.zE(!0),this.vE.set(e,t),this.uz&&this.uz.observe(t.Gr),this.LE&&clearTimeout(this.LE),this.LE=setTimeout(()=>this.Zr(),0),this}mz(t){const e=t.Gr.getAttribute("data-lcjs-engine-id");return e?(this.SE.delete(e),this.vE.delete(e),this.uz&&this.uz.unobserve(t.Gr),t.Gr.removeAttribute("data-lcjs-engine-id"),this):this}Zr(){if(this.uz){const t=this.uz.takeRecords();for(let e=0;e<t.length;e+=1){const i=t[e];this.RE(i)}}return!this.KE&&this.QE&&Array.from(this.SE.values()).sort((t,e)=>function(i,s){if(i===s)throw new Error("Cannot compare node with itself");const n={a:Wb(i),b:Wb(s)};let a;for(;n.a[n.a.length-1]===n.b[n.b.length-1];)i=n.a.pop(),s=n.b.pop(),a=i;const o=Xb(Hb(n.a)),l=Xb(Hb(n.b));if(o===l&&a){const u=a.childNodes,d={a:n.a[n.a.length-1],b:n.b[n.b.length-1]};let f=u.length;for(;f--;){const y=u[f];if(y===d.a)return 1;if(y===d.b)return-1}}return Math.sign(o-l)}(t.Gr,e.Gr)).forEach((t,e)=>t.gz(e)),this.nz(!0),this}dP(){return this.nz(),this}yz(){this.$i||this.SE.forEach(t=>t.hm.layout())}W(){var t;if(this.$i)return;this.$i=!0,super.W(),this.ME&&(nt.cancelAnimationFrame(this.ME),this.ME=null),this.IE=!1,this.Zn&&(this.Zn.disconnect(),this.Zn=void 0),this.uz&&(this.uz.disconnect(),this.uz=void 0),nt.removeEventListener("resize",this.BE),this.BE=void 0,this.SE.forEach(i=>{i.W()}),this.SE.clear(),Array.from(this.bE.values()).forEach(i=>{i.VR(!0)}),this.bE.clear();const e=this.gl;e.deleteBuffer(this.wE),e.deleteBuffer(this.CE),this.WE&&!this.Un.WE?(this.WE.width=1,this.WE.height=1,(t=this.WE.parentElement)===null||t===void 0||t.removeChild(this.WE),this.WE=void 0):this.WE=void 0,this.oz=void 0,this.KR=void 0,this.ez=()=>{},this.iz.WEBGL_lose_context&&this.iz.WEBGL_lose_context.loseContext()}}const WF=(r,t,e,i)=>s=>{const n={theme:hr,...e,...s},a=r(n),o=t||i?or(a,i):void 0,l=new tE(a.Un,s,a,a.W.bind(a),o);return a.uo(u=>l.zL(u)).lo(()=>l.j()).Ss(),l},Dr=(r,t)=>{r.uo(e=>{t.Te(e)}).lo(()=>t.j()).Ss()},qF=(r,t,e,i)=>s=>{const n={...e,...s,theme:(s==null?void 0:s.theme)||hr},a=r(n),o=t||i?or(a,i):void 0,l=new Yp(a.Un,ar(a,1).DI(0),cs,a.W.bind(a),o);return Dr(a,l),l},jF=(r,t,e,i)=>s=>{const n={...e,...s,theme:(s==null?void 0:s.theme)||hr},a=r(n),o=t||i?or(a,i):void 0,l=new tS(a.Un,ar(a,1).DI(0),cs,a.W.bind(a),o,s);return Dr(a,l),l},$F=(r,t,e,i)=>s=>{const n={...e,...s,theme:(s==null?void 0:s.theme)||hr},a=r(n),o=t||i?or(a,i):void 0,l=new $R(a.Un,ar(a,1).DI(0),cs,a.W.bind(a),o,s);return Dr(a,l),l},JF=(r,t,e,i)=>s=>{const n={...e,...s,theme:(s==null?void 0:s.theme)||hr},a=r(n),o=t||i?or(a,i):void 0,l=new XR(a.Un,ar(a,1).DI(0),cs,a.W.bind(a),o,s);return Dr(a,l),l},ZF=(r,t,e,i)=>s=>{const n={...e,...s,theme:(s==null?void 0:s.theme)||hr},a=r(n),o=t||i?or(a,i):void 0,l=new(s&&s.type?s.type:CR)(a.Un,ar(a,1).DI(0),cs,a.W.bind(a),o,void 0,s);return Dr(a,l),l},QF=(r,t,e,i)=>s=>{const n={...e,...s,theme:(s==null?void 0:s.theme)||hr},a=r(n),o=t||i?or(a,i):void 0,l=new(s&&s.type?s.type:qR)(a.Un,ar(a,1).DI(0),cs,a.W.bind(a),o,void 0,(s==null?void 0:s.disableAnimations)!==!0&&(s==null?void 0:s.animationsEnabled)!==!1);return Dr(a,l),l},KF=(r,t,e,i)=>s=>{const n={...e,...s,theme:(s==null?void 0:s.theme)||hr},a=r(n),o=t||i?or(a,i):void 0,l=new(s&&s.type?s.type:WR)(a.Un,ar(a,1).DI(0),cs,a.W.bind(a),o,void 0,s);return Dr(a,l),l},t4=(r,t,e,i)=>s=>{const n={...e,...s,theme:(s==null?void 0:s.theme)||hr},a=r(n),o=t||i?or(a,i):void 0,l=new(s&&s.type?s.type:jR)(a.Un,ar(a,1).DI(0),cs,a.W.bind(a),o,void 0,s);return Dr(a,l),l},e4=(r,t,e,i)=>s=>{const n={...e,...s,theme:(s==null?void 0:s.theme)||hr},a=r(n),o=t||i?or(a,i):void 0,l=new DR(a.Un,ar(a,1).DI(0),cs,a.W.bind(a),o,s,void 0);return Dr(a,l),l},i4=(r,t,e,i)=>s=>{const n={...e,...s,theme:(s==null?void 0:s.theme)||hr},a=r(n),o=t||i?or(a,i):void 0,l=new Jp(a.Un,ar(a,1).DI(0),cs,a.W.bind(a),o,void 0,s);return Dr(a,l),l},s4=(r,t,e,i)=>s=>{const n={...e,...s,theme:(s==null?void 0:s.theme)||hr},a=r(n),o=t||i?or(a,i):void 0,l=new QR(a.Un,ar(a,1).DI(0),cs,a.W.bind(a),o,void 0);return Dr(a,l),l},r4=(r,t,e,i)=>s=>{const n={...e,...s,theme:(s==null?void 0:s.theme)||hr},a=r(n),o=t||i?or(a,i):void 0,l=new KR(a.Un,ar(a,1).DI(0),cs,a.W.bind(a),o,void 0,s);return Dr(a,l),l},n4=(r,t,e,i)=>s=>{const n={...e,...s,theme:(s==null?void 0:s.theme)||hr},a=r(n),o=t||i?or(a,i):void 0,l=new HR(a.Un,ar(a,1).DI(0),cs,a.W.bind(a),o,s);return Dr(a,l),l},a4=(r,t,e,i)=>s=>{const n={...e,...s,theme:(s==null?void 0:s.theme)||hr},a=r(n),o=t||i?or(a,i):void 0,l=new bF(a.Un,ar(a,1).DI(0),cs,a.W.bind(a),o,s);return Dr(a,l),l};function sr(r,t,e,i,s,n){let a=t.x.ct(r.max.x),o=t.x.ct(r.min.x),l=t.y.ct(r.max.y),u=t.y.ct(r.min.y),d=a-o,f=l-u;if(d<1){const z=(o+a)/2;o=z-.5,a=z+.5,d=1}if(f<1){const z=(u+l)/2;u=z-.5,l=z+.5,f=1}const y=d/f,m=d*e.x,S=f*e.y,x=d-m,v=f-S,b=m>x?[x,m]:[m,x],E=S>v?[v,S]:[S,v];let T,V,F=1,B=1;switch(i){default:case Ts.closestSide:if(T=b[0]/d,V=E[0]/f,s===Es.circle){const z=Math.min(T*y,V);F=z,B=z}else F=T*y,B=V;break;case Ts.farthestSide:if(T=b[1]/d,V=E[1]/f,s===Es.circle){const z=Math.max(T*y,V);F=z,B=z}else F=T*y,B=V;break;case Ts.closestCorner:if(V=E[0]/f,s===Es.circle){T=b[0]/d*y;const z=Math.sqrt(T*T+V*V);F=z,B=z}else{T=b[0]/d;const z=Math.sqrt(T*T+V*V);F=z*y,B=z}break;case Ts.farthestCorner:if(V=E[1]/f,s===Es.circle){T=b[1]/d*y;const z=Math.sqrt(T*T+V*V);F=z,B=z}else{T=b[1]/d;const z=Math.sqrt(T*T+V*V);F=z*y,B=z}}return{bounds:[o*n,u*n,d*n,f*n],center:[e.x*y,e.y],distance:[Math.max(F,1e-4),Math.max(B,1e-4)],aspectRatio:y}}function rr(r,t,e,i){const s=t.x.ct(r.max.x),n=t.x.ct(r.min.x),a=t.y.ct(r.max.y),o=t.y.ct(r.min.y),l=s-n,u=a-o,d=Math.abs(l*Math.sin(e))+Math.abs(u*Math.cos(e)),f=Y(l/2-Math.sin(e)*(d/2),u/2-Math.cos(e)*(d/2)),y=Y(l/2+Math.sin(e)*(d/2),u/2+Math.cos(e)*(d/2));return{bounds:[n*i,o*i,l*i,u*i],startPoint:[f.x*i,f.y*i],endPoint:[y.x*i,y.y*i]}}class Hl{constructor(t){this.RR=t}}class h4{constructor(){this.pz=new Array,this.Sz=t=>(this.pz.push(t),t),this.vz=this.Sz(new Map),this.bz=this.Sz(new Map),this.xz=this.Sz(new Map),this.Mz=this.Sz(new Map),this._z=this.Sz(new Map),this.wz=this.Sz(new Map),this.Cz=this.Sz(new Map)}kz(){this.pz.forEach(t=>{t.forEach(e=>e.kz()),t.clear()})}}const bf=(r,t,e)=>()=>{r.Tz=t,e&&e()},C0=(r,t,e,i,s)=>{const n=Math.min(e/r,i/t),a=r*n,o=t*n,l=e/a,u=i/o,d=a/e,f=o/i;let y=0,m=1,S=0,x=1;switch(s){case qi.Fill:u<l?(y=0,m=1,S=.5+-d/2,x=.5+d/2):(S=0,x=1,y=.5+-f/2,m=.5+f/2);break;case qi.Fit:u<l?(S=0,x=1,y=.5+-l/2,m=.5+l/2):(y=0,m=1,S=.5+-u/2,x=.5+u/2);break;case qi.Center:{const v=e/r,b=i/t;y=.5+-v/2,m=.5+v/2,S=.5+-b/2,x=.5+b/2}break;case qi.Tile:y=0,m=e/r,S=0,x=i/t;break;case qi.Stretch:default:y=0,m=1,S=0,x=1}return new Float32Array([y,x,m,x,m,S,y,S])};class o4{constructor(t,e){if(this.Fz=0,this.Iz=0,this.Pz=!1,this.Tz=!1,this.Dz=!1,this.Bz=!1,this.Lz=!1,this.Rz=new Set,this.Ez=new Set,this.rc=e,this.uE=t,this.zz=null,this.Pz=e instanceof nt.HTMLVideoElement,this.rc instanceof nt.HTMLImageElement)this.rc.addEventListener("load",()=>{this.Bz=!0,this.Vz()}),this.rc.addEventListener("error",()=>{this.Lz=!0}),this.rc.complete&&(this.Bz=!0,this.Vz());else if(this.rc instanceof nt.HTMLVideoElement){const i=this;this.rc.addEventListener("canplay",function(){i.Iz=this.videoHeight,i.Fz=this.videoWidth,i.Bz=!0,i.Vz()},!0),this.rc.addEventListener("play",bf(this,!0,()=>this.Vz())),this.rc.addEventListener("playing",bf(this,!0,()=>this.Vz())),this.rc.addEventListener("pause",bf(this,!1)),this.rc.addEventListener("ended",bf(this,!1)),this.rc.readyState>=1&&(this.Fz=this.rc.videoWidth,this.Iz=this.rc.videoHeight,this.Tz=!this.rc.paused,this.Bz=!0,this.Vz())}else this.Bz=!0,this.Vz()}jR(t){this.Ez.size===0&&this.Bz&&this.Vz(),this.Ez.add(t)}ZR(t){this.Ez.delete(t),this.Ez.size===0&&this.unbindResources()}Oz(t){this.Rz.add(t),this.Dz&&(t(),this.Nz(t))}Nz(t){this.Rz.delete(t)}Vz(){if(this.Lz||this.Dz||!this.Bz)return;const t=this.uE.gl;if(!this.zz&&this.rc&&t){this.zz=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.zz),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);const e=0,i=t.RGBA,s=t.RGBA,n=t.UNSIGNED_BYTE,a=this.rc,o=this.Fz>0?this.Fz:a.width,l=this.Iz>0?this.Iz:a.height;t.texImage2D(t.TEXTURE_2D,e,i,s,n,a),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),this.Fz=o,this.Iz=l,t.bindTexture(t.TEXTURE_2D,null)}this.Dz=!0,this.Rz&&this.Rz.forEach(e=>{e(),this.Nz(e)})}Ps(){const t=this.uE.gl;if(!this.Lz&&this.Dz&&this.zz){const i=t.RGBA,s=t.RGBA,n=t.UNSIGNED_BYTE,a=this.rc;a&&(t.bindTexture(t.TEXTURE_2D,this.zz),t.texImage2D(t.TEXTURE_2D,0,i,s,n,a))}}Gz(){return this.zz}unbindResources(){return this.Dz&&(this.zz&&(this.uE.OR(this.zz),this.zz=null),this.Dz=!1),this}}class Ym extends ZM{constructor(t,e,i){super(t.us,e,i),this.iS=!0,this.jp={},this.qp=Xt(Il),this.ks=t,this.dt=t.dt}Wz(){var t;return this.qp.i&&this.qp.M().type!==((t=this.Uz)===null||t===void 0?void 0:t.type)}nS(t){return this.iS=t,this}Yz(t){return this.jp=t,this}}const l4=(r,t,e,i)=>{const s=r.$z(),n=Math.round(Math.min(e.spread,10)*s),a=Math.round(Math.min(e.blur,10)*s),o={x:Math.round(e.offset.x*s),y:Math.round(e.offset.y*s)},l=r.Xz(),u=r.jz(),d=r.Zz(),f=r.Qz(),y=r.Jz();r.Kz("disabled"),r.nS(!1),r.qz(!1);const m=t.tV(),S=n+a/2;((F,B,z,L)=>{const A=F.gl,R=F.$z(),w=F.iV();F.sV(A.FRAMEBUFFER,L.frameBuffer),A.bindRenderbuffer(A.RENDERBUFFER,L.depthBuffer),A.bindTexture(A.TEXTURE_2D,L.texture),A.clearDepth(1),A.clearColor(0,0,0,0),A.clear(A.COLOR_BUFFER_BIT|A.DEPTH_BUFFER_BIT);const C=L.sizeDpr;F.eV(0,0,C.x,C.y),B.forEach(k=>{let _;if(k instanceof Lf?_=k.ks.km():k instanceof Ym&&(_=k.ks.Kv()),_){const X=_.x+z.left,N=_.y+z.bottom,U=Math.max(_.width-(z.left+z.right),0),O=Math.max(_.height-(z.bottom+z.top),0);F.hV(X*R,N*R,U*R,O*R)}else F.qz(!1);k.zL(2)}),F.sV(A.FRAMEBUFFER,w),A.bindRenderbuffer(A.RENDERBUFFER,null),A.bindTexture(A.TEXTURE_2D,null),F.qz(!1)})(r,i,{left:S+(o.x<0?-o.x:0),top:S+(o.y>0?o.y:0),right:S+(o.x>0?o.x:0),bottom:S+(o.y<0?-o.y:0)},m);let x=m;const v=n+a+5,b=((F,B,z,L)=>{const A=(k=>{const _=[];for(let X=0;X<k.length;X+=1){let N,U=k[X];do{const O=_.findIndex(W=>zf(U,W));N=O>=0?_[O]:void 0,N&&(_.splice(O,1),U=Ws(U,N))}while(N);_.push(U)}return _})(B.map(k=>{const _=k instanceof Lf||k instanceof Ym?k.ks.rV(k):_e;if(km(_))return _e;const X={min:{x:Math.max(_.min.x-z.left,0),y:Math.max(_.min.y-z.bottom,0)},max:{x:Math.min(_.max.x+z.right,L.x),y:Math.min(_.max.y+z.top,L.y)}};return X.max.x<=X.min.x||X.max.y<=X.min.y?_e:X}).filter(k=>!km(k))),R=6*A.length,w=new Float32Array(4*R);let C=0;return A.forEach(k=>{const _=Ku(k.min,L),X=Ku(k.max,L),N=_,U=X;w[C+0]=_.x,w[C+1]=_.y,w[C+2]=N.x,w[C+3]=N.y,w[C+4]=X.x,w[C+5]=_.y,w[C+6]=U.x,w[C+7]=N.y,w[C+8]=X.x,w[C+9]=X.y,w[C+10]=U.x,w[C+11]=U.y,w[C+12]=X.x,w[C+13]=X.y,w[C+14]=U.x,w[C+15]=U.y,w[C+16]=_.x,w[C+17]=X.y,w[C+18]=N.x,w[C+19]=U.y,w[C+20]=_.x,w[C+21]=_.y,w[C+22]=N.x,w[C+23]=N.y,C+=24}),{vertexBuffer:F.nV(w),vertexCount:R}})(r,i,{left:v+(o.x<0?-o.x:0),top:v+(o.y>0?o.y:0),right:v+(o.x>0?o.x:0),bottom:v+(o.y<0?-o.y:0)},t.oV()),E=t.tV(m,x),T=r.oz($["2D"],$.Glow1D({spreadPx:n,blurPx:a,firstPass:!0}),$.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:"linear",normalSource:void 0}));((F,B,z,L,A,R)=>{const w=F.gl,C=F.iV();F.sV(w.FRAMEBUFFER,z.frameBuffer),w.bindRenderbuffer(w.RENDERBUFFER,z.depthBuffer),w.bindTexture(w.TEXTURE_2D,z.texture),w.clearDepth(1),w.clearColor(0,0,0,0),w.clear(w.COLOR_BUFFER_BIT|w.DEPTH_BUFFER_BIT),F.eV(0,0,z.sizeDpr.x,z.sizeDpr.y),F.aV(L,(k,_,X,N)=>(F.jR(L),R&&R(k),F.dV(k("uIsHighlighted"),0).AR(k("uHighlightColorOffset"),to).dV(k("uRenderEffectMask"),0).cV(k("uTexture"),B.texture,0).uV(N("uTextureSize"),[B.sizeDpr.x,B.sizeDpr.y]).uV(k("uScale"),z.uniforms.fV()).uV(k("uDisp"),z.uniforms.AV()).uV(k("uScaling"),[z.size.x,z.size.y]).uV(k("uTranslationAxis"),[0,0]).lV(A.vertexBuffer,void 0,{location:_("aPos"),size:2},{location:_("aTextureCoord"),size:2}).Ky(w.TRIANGLES,A.vertexCount,0),!0)),F.sV(w.FRAMEBUFFER,C),w.bindRenderbuffer(w.RENDERBUFFER,null),w.bindTexture(w.TEXTURE_2D,null)})(r,x,E,T,b,(F,B,z,L)=>(r.uV(F("uOffsetPx"),[o.x,o.y]),!0)),x=E,r.qz(u),r.gV(y);const V=r.oz($["2D"],$.Glow1D({spreadPx:n,blurPx:a,firstPass:!1}),$.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:"linear",normalSource:void 0}));((F,B,z,L,A)=>{const R=F.gl,w={x:F.us.oi().x,y:F.us.oi().y};F.eV(0,0,w.x*F.$z(),w.y*F.$z());const C=cs.d2({scaleXYConstructor:Se}).q(w).Vi(0,w.x).Oi(0,w.y),k=new lr;k.mV(C),F.aV(z,(_,X,N,U)=>(F.jR(z),A&&A(_),F.dV(_("uIsHighlighted"),0).AR(_("uHighlightColorOffset"),to).dV(_("uRenderEffectMask"),0).cV(_("uTexture"),B.texture,0).uV(U("uTextureSize"),[B.sizeDpr.x,B.sizeDpr.y]).uV(_("uScale"),k.fV()).uV(_("uDisp"),k.AV()).uV(_("uScaling"),[w.x,w.y]).uV(_("uTranslationAxis"),[0,0]).lV(L.vertexBuffer,void 0,{location:X("aPos"),size:2},{location:X("aTextureCoord"),size:2}).Ky(R.TRIANGLES,L.vertexCount,0),!0))})(r,m,V,b,(F,B,z,L)=>(r.cV(F("uTextureFirstGlowPass"),E.texture,1).AR(F("uGlowColor"),e.color),!0)),r.eV(l.x,l.y,l.width,l.height),r.Kz(d),r.nS(f),r.yV(b.vertexBuffer)};class u4{constructor(t){this.pV=[],this.RR=t}SV(t,e){l4(this.RR,this,e,t)}oV(){const t=this.RR.us.oi();return{x:Math.ceil(t.x),y:Math.ceil(t.y)}}tV(...t){const e=this.pV,i=this.oV(),s={x:Math.ceil(i.x*this.RR.$z()),y:Math.ceil(i.y*this.RR.$z())},n=this.RR.gl,a=e.find(S=>!t.includes(S));if(a)return a.sizeDpr.x===s.x&&a.sizeDpr.y===s.y||(a.size=i,a.sizeDpr=s,n.bindTexture(n.TEXTURE_2D,a.texture),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,s.x,s.y,0,n.RGBA,n.UNSIGNED_BYTE,null),n.bindRenderbuffer(n.RENDERBUFFER,a.depthBuffer),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,s.x,s.y),n.bindTexture(n.TEXTURE_2D,null),n.bindRenderbuffer(n.RENDERBUFFER,null),a.scale.q(i).Vi(0,i.x).Oi(0,i.y),a.uniforms.mV(a.scale)),a;const o=n.createTexture(),l=this.RR.vV(),u=this.RR.bV();n.bindTexture(n.TEXTURE_2D,o),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,s.x,s.y,0,n.RGBA,n.UNSIGNED_BYTE,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);const d=this.RR.iV();this.RR.sV(n.FRAMEBUFFER,l),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,o,0),n.bindRenderbuffer(n.RENDERBUFFER,u),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,s.x,s.y),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,u),n.bindTexture(n.TEXTURE_2D,null),this.RR.sV(n.FRAMEBUFFER,d),n.bindRenderbuffer(n.RENDERBUFFER,null);const f=cs.d2({scaleXYConstructor:Se}).q(i).Vi(0,i.x).Oi(0,i.y),y=new lr;y.mV(f);const m={size:i,sizeDpr:s,texture:o,frameBuffer:l,depthBuffer:u,scale:f,uniforms:y};return e.push(m),m}W(){[this.pV].forEach(t=>{t.forEach(e=>{this.RR.xV(e.depthBuffer),this.RR.MV(e.frameBuffer),this.RR.OR(e.texture)}),t.length=0})}}class c4{constructor(t,e,i,s,n=!0){this._V=new h4,this.wV=new Map,this.CV=new Map,this.kV=[],this.jE=1,this.IS_MACHINE_LITTLE_ENDIAN=(()=>{const a=new Uint32Array([287454020]),o=new Uint8Array(a.buffer);return o[0]===68||o[0]!==17&&(nt.console.error("Unidentified machine endianness. Some features might behave unexpectedly."),!0)})(),this.iS=!1,this.uV=(a,[o,l])=>(a===void 0||this.gl.uniform2f(a,o,l),this),this.TV=(a,[o,l])=>(a===void 0||this.gl.uniform2i(a,o,l),this),this.FV=(a,[o,l,u,d])=>(a===void 0||this.gl.uniform4f(a,o,l,u,d),this),this.IV=(a,[o,l,u])=>(a===void 0||this.gl.uniform3f(a,o,l,u),this),this.PV=(a,o)=>(a===void 0||this.gl.uniformMatrix3fv(a,!1,o),this),this.DV=(a,o)=>(a===void 0||this.gl.uniformMatrix4fv(a,!1,o),this),this.AR=(a,o)=>(a===void 0||this.gl.uniform4f(a,o.r,o.g,o.b,o.a),this),this.dV=(a,o)=>(a===void 0||this.gl.uniform1f(a,o),this),this.BV=(a,o)=>(this.gl.uniform1i(a,o),this),this.cV=(a,o,l)=>{if(a===void 0)return this;if(o){const u=this.gl.TEXTURE0+l;return this.gl.activeTexture(u),this.gl.bindTexture(this.gl.TEXTURE_2D,o),this.gl.uniform1i(a,l),this}throw new Ri("Could not bind a texture.")},this.LV=a=>(((o,l)=>{l===qi.Tile?(o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.REPEAT),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.REPEAT)):(o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE))})(this.gl,a),this),this.nV=(a,o=!1,l,u=Float32Array)=>{const d=a.length,f=this.RV(d,l);if(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,f),this.gl.bufferData(this.gl.ARRAY_BUFFER,a instanceof u?a:new u(a),o?this.gl.DYNAMIC_DRAW:this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),f)return f;throw new Ri("Could not create vertex buffer")},this.EV=(a,o,l,u=Float32Array)=>{const d=l||this.gl.createBuffer();if(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,d),o&&o.length===a?this.gl.bufferData(this.gl.ARRAY_BUFFER,o instanceof u?o:new u(o),this.gl.STATIC_DRAW):(this.gl.bufferData(this.gl.ARRAY_BUFFER,new u(a),this.gl.STATIC_DRAW),o&&this.gl.bufferSubData(this.gl.ARRAY_BUFFER,0,o instanceof u?o:new u(o))),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),d)return d;throw new Ri("Could not create vertex buffer")},this.zV=(a,o,l,u=Float32Array)=>{this.gl.bindBuffer(this.gl.ARRAY_BUFFER,a),this.gl.bufferSubData(this.gl.ARRAY_BUFFER,o*u.BYTES_PER_ELEMENT,l instanceof u?l:new u(l)),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null)},this.VV=(a,o,l=!1)=>{this.gl.bindBuffer(this.gl.ARRAY_BUFFER,a),this.gl.bufferData(this.gl.ARRAY_BUFFER,o,l?this.gl.DYNAMIC_DRAW:this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null)},this.OV=(a,o)=>{const l=a.length,u=this.RV(l,o);if(this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,u),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,a,this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),u)return u;throw new Ri("Could not create index buffer")},this.NV=a=>{const o=this.gl.createBuffer();if(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,o),this.gl.bufferData(this.gl.ARRAY_BUFFER,a instanceof Float32Array?a:new Float32Array(a),this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),o)return o;throw new Ri("Could not create float buffer")},this.GV=(a,o)=>(a===void 0||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,o),this.gl.enableVertexAttribArray(a),this.gl.vertexAttribPointer(a,2,this.gl.FLOAT,!1,0,0)),this),this.WV=(a,o)=>(a===void 0||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,o),this.gl.vertexAttribPointer(a,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(a)),this),this.lV=(a,o,...l)=>{this.gl.bindBuffer(this.gl.ARRAY_BUFFER,a);const u=l.length;let d=0;for(let y=0;y<u;y+=1)d+=l[y].size;for(let y=0;y<u;y+=1){const m=l[y].location;m!==void 0&&m>-1&&this.gl.enableVertexAttribArray(m)}let f=0;for(let y=0;y<u;y+=1){const m=l[y];m.location!==void 0&&m.location>-1&&this.gl.vertexAttribPointer(m.location,m.size,this.gl.FLOAT,!1,d*Float32Array.BYTES_PER_ELEMENT,f*Float32Array.BYTES_PER_ELEMENT),f+=m.size}if(o!==void 0)for(let y=0;y<u;y+=1){const m=l[y].location;m!==void 0&&m>-1&&this.UV(m,o)}return this},this.YV=(...a)=>{const o=a.length;for(let l=0;l<o;l+=1){const u=a[l];u!==0&&u>-1&&this.gl.disableVertexAttribArray(u)}return this},this.HV=(a,o)=>(a===void 0||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,o),this.gl.enableVertexAttribArray(a),this.gl.vertexAttribPointer(a,4,this.gl.FLOAT,!1,0,0)),this),this.$V=(a,o,l)=>(a===void 0||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,o),this.gl.vertexAttribPointer(a,1,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(a),l!==void 0&&this.UV(a,l)),this),this.XV=a=>(this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,a),this),this.jV=null,this.Ky=(a,o,l=0)=>(o>0&&this.gl.drawArrays(a,l,o),this),this.ZV=(a,o=this.gl.TRIANGLES,l=0,u=this.gl.UNSIGNED_SHORT)=>(a>0&&this.gl.drawElements(o,a,u,l),this),this.QV=(a,o,l,u)=>{if(u>0&&(this.gl2&&this.gl2.ctx.drawArraysInstanced(a,o,l,u),this.gl1)){if(!this.gl1.iz.ANGLE_instanced_arrays)return nt.console.warn(`The browser does not support REQUIRED WebGL 1 extension: ANGLE_instanced_arrays.
This application will NOT work properly!`),this;this.gl1.iz.ANGLE_instanced_arrays.drawArraysInstancedANGLE(a,o,l,u)}return this},this.JV=(a,o,l,u,d=this.gl.UNSIGNED_SHORT)=>{if(u>0&&(this.gl2&&this.gl2.ctx.drawElementsInstanced(a,o,d,l,u),this.gl1)){if(!this.gl1.iz.ANGLE_instanced_arrays)return nt.console.warn(`The browser does not support REQUIRED WebGL 1 extension: ANGLE_instanced_arrays.
This application will NOT work properly!`),this;this.gl1.iz.ANGLE_instanced_arrays.drawElementsInstancedANGLE(a,o,d,l,u)}return this},this.UV=(a,o)=>{if(a>-1&&(this.gl2&&this.gl2.ctx.vertexAttribDivisor(a,o),this.gl1)){if(!this.gl1.iz.ANGLE_instanced_arrays)return nt.console.warn(`The browser does not support REQUIRED WebGL 1 extension: ANGLE_instanced_arrays.
This application will NOT work properly!`),this;this.gl1.iz.ANGLE_instanced_arrays.vertexAttribDivisorANGLE(a,o)}return this},this.KV=(a,o,l,u=0)=>{const d=this.gl.TEXTURE0+u;this.gl.activeTexture(d);const f=this.iV();this.sV(this.gl.FRAMEBUFFER,o),this.gl.bindTexture(this.gl.TEXTURE_2D,l),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,l,0);const y=this.jz();y&&this.qz(!1),a(),y&&this.qz(!0),this.gl.bindTexture(this.gl.TEXTURE_2D,null),this.sV(this.gl.FRAMEBUFFER,f)},this.Nt=()=>(this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this),this.qV=a=>(this.gl.clearColor(a.r,a.g,a.b,a.a),this),this.jR=a=>(this.gl.useProgram(a.cE),this),this.tO=!1,this.iO=[],this.us=t,this.cA=e,this.us=t,this.gl=i.ctx,this.sO=i.antialias,this.eO=!!this.us.Qr.xE&&i.lineAntialias,this.sz=this.us.Qr.sz,this.hO=new Map,this.gl1=this.us.Qr.gl1,this.gl2=this.us.Qr.gl2,n&&(this.gV(!0),this.rO()),this.iz=this.us.Qr.iz,this.zR=this.gl.getParameter(this.gl.MAX_TEXTURE_SIZE),this.UR=this.nO(),this.oz=this.us.Qr.oz,this.oO=new g4(this),this.KR=this.us.Qr.KR,this.aO=new u4(this),this.bE=this.us.Qr.bE,this.lO=this.nV([0,0,1,0,1,1,0,1]),this.uO=this.nV([0,0,1,0,0,1,0,1,1,0,1,1])}Kz(t){return t!==this.cO&&(this.cO=t,t==="disabled"?this.gl.disable(this.gl.CULL_FACE):t==="cull-back"?(this.gl.enable(this.gl.CULL_FACE),this.gl.cullFace(this.gl.BACK)):t==="cull-front"&&(this.gl.enable(this.gl.CULL_FACE),this.gl.cullFace(this.gl.FRONT))),this}Zz(){return this.cO||"disabled"}nS(t){return t!==this.iS&&(this.iS=t,t?this.gl.enable(this.gl.DEPTH_TEST):this.gl.disable(this.gl.DEPTH_TEST)),this}Qz(){return this.iS}dO(t){return this.jE=t,this}$z(){return this.jE}RV(t,e){let i;if(e){const s=this.hO.get(e);s&&s.size>=t&&s.size-t<1e6?i=e:this.yV(e)}return i||(i=this.gl.createBuffer(),this.hO.set(i,{size:t})),i}fO(t,e=this.gl.RGBA,i=!1,s,n,a=!1,o=this.gl.UNSIGNED_BYTE,l=e){const u=this.gl.createTexture();if(!u)throw new Ri("Couldn't reserve Texture.");return this.gl.bindTexture(this.gl.TEXTURE_2D,u),this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a),t&&n===null?this.gl.texImage2D(this.gl.TEXTURE_2D,0,l,e,o,t):n&&this.gl.texImage2D(this.gl.TEXTURE_2D,0,l,n.x,n.y,0,e,o,t),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,s?this.gl.NEAREST:this.gl.LINEAR),i?(this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR_MIPMAP_LINEAR),this.gl.generateMipmap(this.gl.TEXTURE_2D)):this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,s?this.gl.NEAREST:this.gl.LINEAR),this.gl.bindTexture(this.gl.TEXTURE_2D,null),u}OR(t){this.gl.deleteTexture(t)}vV(){const t=this.gl.createFramebuffer();if(!t)throw new Ri("Couldn't reserve Framebuffer.");return t}sV(t,e){this.jV=e,this.gl.bindFramebuffer(t,e)}iV(){return this.jV}MV(t){this.gl.deleteFramebuffer(t)}bV(){const t=this.gl.createRenderbuffer();if(!t)throw new Ri("Couldn't reserve Render buffer.");return t}xV(t){this.gl.deleteRenderbuffer(t)}eV(t,e,i,s){return this.gl.viewport(t,e,i,s),this.AO&&t===this.AO.x&&e===this.AO.y&&i===this.AO.width&&s===this.AO.height||(this.AO={x:t,y:e,width:i,height:s}),this}Xz(){return this.AO||{x:0,y:0,width:0,height:0}}hV(t,e,i,s){return this.qz(!0),this.gl.scissor(Math.max(t,0),Math.max(e,0),Math.max(i,0),Math.max(s,0)),this}qz(t){return t===this.gO||(t?this.gl.enable(this.gl.SCISSOR_TEST):this.gl.disable(this.gl.SCISSOR_TEST),this.gO=t),this}gV(t){return t!==this.tO&&(this.tO=t,t&&this.gl.enable(this.gl.BLEND),t||this.gl.disable(this.gl.BLEND)),this}Jz(){return this.tO}rO(t,e,i,s){return t?(t!==void 0&&e!==void 0&&(i!==void 0&&s!==void 0?this.gl.blendFuncSeparate(t,e,i,s):this.gl.blendFunc(t,e)),this):(this.gl.blendFuncSeparate(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA),this)}jz(){return this.gO!==void 0&&this.gO}aV(t,e){const i=new y4(this,t),s=e(i.uniform,i.attribute,i,i.uniformOptional);i.finish(s)}yV(t){t&&(this.gl.deleteBuffer(t),this.hO.delete(t))}mO(t,e,i){this.uV(t.uniform("uCenter"),e.center).uV(t.uniform("uDistance"),e.distance).FV(t.uniform("uBounds"),e.bounds).dV(t.uniform("uAspect"),e.aspectRatio);const s=i.getColorStops();if(s.length<2)throw new Error("Minimum two color stops required");for(let n=0;n<s.length;n+=1)this.AR(t.uniform(`color_${n}`),s[n].color).dV(t.uniform(`stop_${n}`),s[n].offset);return this}yO(t,e,i){this.uV(t.uniform("uStartPoint"),e.startPoint).uV(t.uniform("uEndPoint"),e.endPoint).FV(t.uniform("uBounds"),e.bounds);const s=i.getColorStops();if(s.length<2)throw new Error("Minimum two color stops required");for(let n=0;n<s.length;n+=1)this.AR(t.uniform(`color_${n}`),s[n].color).dV(t.uniform(`stop_${n}`),s[n].offset);return this}Vh(t){const e=this.bE.get(t);if(!e){const i=new _F(this);return this.bE.set(t,i),i}return e}pO(t){const e=this.wV.get(t);if(!e){const i=new o4(this,t);return this.SO(t,i),i}return e}SO(t,e){this.wV.set(t,e)}nO(){const t=this.gl,e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,1,1,0,t.ALPHA,t.UNSIGNED_BYTE,new Uint8ClampedArray([0]));const i=t.getError()===0;return i||this.cA.Hn!==!1&&nt.console.info("LightningChart JS - Uint8ClampedArray is not supported as texture data. The above WebGL error/warning is from the feature detection. There is nothing to worry about."),t.deleteTexture(e),i}vO(t,e,i,s){if(i)this.lV(e,s,{location:t.attribute("aPos_highpart"),size:2},{location:t.attribute("aPos_lowpart"),size:2});else{const n=t.attribute("aPos");this.GV(n,e),s!==void 0&&this.UV(n,s)}return this}bO(){this.iz.WEBGL_lose_context&&this.iz.WEBGL_lose_context.loseContext()}xO(t){if(this.MO&&this.MO.bufferIdsCount>=t)return this.MO.buffer;this.MO&&(this.yV(this.MO.buffer),this.MO=void 0);const e=t,i=new Float32Array(e);for(let n=0;n<e;n+=1)i[n]=n;const s=this.nV(i);return this.MO={buffer:s,bufferIdsCount:e},s}_O(){return this.gl2?void 0:"attribute"}wO(t,e){if(this._O()==="attribute"){const i=this.xO(e);this.lV(i,void 0,{location:t.attribute("aVertexID"),size:1})}return this}CO(){return this.gl2?void 0:"attribute"}kO(t,e){if(this.CO()==="attribute"){const i=this.xO(e);this.lV(i,1,{location:t.attribute("aInstanceID"),size:1})}return this}TO(t,e,i,s,n,a,o,l,u){const d=t.createBuffer();return this.iO.push(d),t.bindFramebuffer(t.FRAMEBUFFER,e),t.bindBuffer(t.PIXEL_PACK_BUFFER,d),t.bufferData(t.PIXEL_PACK_BUFFER,u.byteLength,t.STREAM_READ),t.readPixels(i,s,n,a,o,l,0),t.bindBuffer(t.PIXEL_PACK_BUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null),d4(t,t.PIXEL_PACK_BUFFER,d,0,u).then(()=>u).catch(f=>{throw f}).finally(()=>{t.deleteBuffer(d),this.iO.splice(this.iO.indexOf(d),1)})}FO(t,e,i,s,n,a,o,l){const u=this.gl,d=this.iV();this.sV(u.FRAMEBUFFER,t),u.readPixels(e,i,s,n,a,o,l),this.sV(this.gl.FRAMEBUFFER,d)}IO(t){const e=this.CV.get(t);if(!e){const s=this.gl.createTexture();if(!s)throw new Ri("Couldn't reserve Texture.");this.gl.bindTexture(this.gl.TEXTURE_2D,s);const n=[];let a=255;for(let u=0;u<t.length;u+=1){for(let d=0;d<t[u];d+=1)n.push(a);a=a===255?0:255}const o=n.length;if(!this.gl2&&((i=n.length)&i-1)!=0){const u=(d=>{d-=1;for(let f=1;f<32;f<<=1)d|=d>>1;return d+1})(n.length);for(let d=n.length;d<u;d+=1)n[d]=0}this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),this.gl.pixelStorei(this.gl.PACK_ALIGNMENT,1),this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,1),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.REPEAT),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.REPEAT),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,n.length,1,0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,new Uint8Array(n)),this.gl.bindTexture(this.gl.TEXTURE_2D,null);const l={PO:s,DO:o,BO:n.length};return this.CV.set(t,l),l}var i;return e}LO(t,e,i){const{uniform:s}=t;this.AR(s("uFallbackColor"),e.getFallbackColor());for(let n=0;n<e.steps.length;n+=1)this.dV(s(`uLUTValue${n}`),e.steps[n].value),this.AR(s(`uLUTColor${n}`),e.steps[n].color);if(e.percentageValues){if(!i)return wn(0,()=>{}),this;this.dV(s("uMinValue"),i.min),this.dV(s("uMaxValue"),i.max)}return this}RO(t,e,i,s,n,a){const o=i&&i.getSource()||s&&s.rc,l=i?i.getFitMode():qi.Stretch,u=d=>{d.texCoordsBuffer=this.nV(a(d.texture.Fz,d.texture.Iz,l),!1,d.texCoordsBuffer)};if(o){let d=e;if((!e||o!==e.source)&&o){e&&(e.texture.ZR(t),this.yV(e.texCoordsBuffer));const f=this.pO(o);f.jR(t);const y=i?i.getSourceMissingColor():YM.color;d={texture:f,source:o,texCoordsBuffer:this.nV([]),sourceMissingTexture:this.fO(new Uint8Array([y.getR(),y.getG(),y.getB(),y.getA()]),this.gl.RGBA,!1,!0,{x:1,y:1},!1),textureReadyCallback:()=>{d&&o&&(u(d),this.us.Ss())}},f.Oz(d.textureReadyCallback),u(d)}return d&&d.texture.Dz&&d.texture.Pz&&d.texture.Tz&&(d.texture.Ps(),this.us.Ss()),n&&d&&d.texture.Dz&&u(d),d}e&&this.EO(t,e)}EO(t,e){e&&(e.texture.ZR(t),e.texture.Nz(e.textureReadyCallback),this.OR(e.sourceMissingTexture),this.yV(e.texCoordsBuffer))}zO(t,e,i,s){const{uniform:n,uniformOptional:a,attribute:o}=t,l=i.dt,u=this.$z();this.dV(n("uIsHighlighted"),e===1||e===2?0:i.zo).AR(n("uHighlightColorOffset"),e===1||e===2?$e:i.Go).dV(n("uRenderEffectMask"),e===2?1:0).uV(a("uRatioPxClip"),[2/this.us.oi().x,2/this.us.oi().y]).dV(a("uDevicePixelRatio"),u),l instanceof Se||l instanceof js?this.uV(n("uScale"),s.uniforms.fV()).uV(n("uDisp"),s.uniforms.AV()).uV(a("uScaleStart_highpart"),s.uniforms.VO()).uV(a("uScaleStart_lowpart"),s.uniforms.OO()):l instanceof wi&&this.uV(a("uScaleStart"),s.uniforms.MixedScaleXY.uScaleStart).uV(a("uScaleStartLog"),s.uniforms.MixedScaleXY.uScaleStartLog).uV(a("uScaleInterval"),s.uniforms.MixedScaleXY.uScaleInterval).uV(a("uScaleIntervalLog"),s.uniforms.MixedScaleXY.uScaleIntervalLog).uV(n("uViewportStart"),s.uniforms.MixedScaleXY.uViewportStart).uV(n("uViewportSize"),s.uniforms.MixedScaleXY.uViewportSize);const d=s.coordsHighPrecision===!0;if(s.coordsX)if(d){const f=o("aPos_highpartX"),y=o("aPos_lowpartX");this.gl.bindBuffer(this.gl.ARRAY_BUFFER,s.coordsX),this.gl.vertexAttribPointer(f,1,this.gl.FLOAT,!1,2*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),this.gl.enableVertexAttribArray(f),this.gl.vertexAttribPointer(y,1,this.gl.FLOAT,!1,2*Float32Array.BYTES_PER_ELEMENT,1*Float32Array.BYTES_PER_ELEMENT),this.gl.enableVertexAttribArray(y)}else this.$V(o("aPosX"),s.coordsX);if(s.coordsY)if(d){const f=o("aPos_highpartY"),y=o("aPos_lowpartY");this.gl.bindBuffer(this.gl.ARRAY_BUFFER,s.coordsY),this.gl.vertexAttribPointer(f,1,this.gl.FLOAT,!1,2*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),this.gl.enableVertexAttribArray(f),this.gl.vertexAttribPointer(y,1,this.gl.FLOAT,!1,2*Float32Array.BYTES_PER_ELEMENT,1*Float32Array.BYTES_PER_ELEMENT),this.gl.enableVertexAttribArray(y)}else this.$V(o("aPosY"),s.coordsY);if(e===1)this.AR(n("uColor"),s.mousePickingColor);else{if(s.fillStyleSolid&&this.AR(n("uColor"),s.fillStyleSolid.getColor()),s.fillStylePaletted){if(s.fillStylePaletted.getLookUpProperty()==="value"&&s.lookupValueBuffer!==null){if(!s.lookupValueBuffer)return!1;const f=o("aLookupValue");this.$V(f,s.lookupValueBuffer),s.lookupValueAttribDivisor!==void 0&&this.UV(f,s.lookupValueAttribDivisor)}this.LO(t,s.fillStylePaletted.lut,s.lookupValueRange)}if(s.fillStyleLinearGradient){if(!s.linearGradientInfo)return!1;this.yO(t,s.linearGradientInfo,s.fillStyleLinearGradient)}if(s.fillStyleRadialGradient){if(!s.radialGradientInfo)return!1;this.mO(t,s.radialGradientInfo,s.fillStyleRadialGradient)}if(s.fillStyleIndividual&&s.colorBuffer!==null){if(!s.colorBuffer)return!1;const f=o("aColor");this.gl.bindBuffer(this.gl.ARRAY_BUFFER,s.colorBuffer),this.gl.vertexAttribPointer(f,4,this.gl.UNSIGNED_BYTE,!0,0,0),this.gl.enableVertexAttribArray(f),s.colorAttribDivisor!==void 0&&this.UV(f,s.colorAttribDivisor)}if(s.fillStyleImage){if(!s.texturedFillGLInfo)return!1;const f=s.texturedFillGLInfo&&s.texturedFillGLInfo.texture.Gz();this.AR(a("uColor"),s.fillStyleImage.getSurroundingColor()).cV(n("uColorTexture"),f||s.texturedFillGLInfo.sourceMissingTexture,0).lV(s.texturedFillGLInfo.texCoordsBuffer,s.texCoordAttribDivisor,{location:o("aTextureCoord"),size:2}).LV(s.fillStyleImage.fitMode)}if(s.maskTexture){const f=s.maskTexture&&s.maskTexture.texture.Gz();this.cV(n("uMaskTexture"),f||s.maskTexture.sourceMissingTexture,0).lV(s.maskTexture.texCoordsBuffer,s.maskTextureCoordsAttribDivisor,{location:o("aMaskTextureCoord"),size:2})}}return!0}NO(t,e,i){if(t)return rr(i||e.Ho(),e.dt,t.getAngle(!0),this.$z())}GO(t,e,i){if(t)return sr(i||e.Ho(),e.dt,t.getPosition(),t.getExtent(),t.getShape(),this.$z())}}const d4=async(r,t,e,i,s,n,a)=>{const o=r.fenceSync(r.SYNC_GPU_COMMANDS_COMPLETE,0);return r.flush(),((l,u,d)=>{const f=d.flags!==void 0?d.flags:0,y=d.retryTimeout!==void 0?d.retryTimeout:10;return new Promise((m,S)=>{const x=()=>{const v=l.clientWaitSync(u,f,0);return v===l.WAIT_FAILED?S(new Error(`WebGL Sync WAIT_FAILED ${l.getError()}`)):v!==l.TIMEOUT_EXPIRED?m(void 0):void nt.setTimeout(x,y)};nt.setTimeout(x,0)})})(r,o,{retryTimeout:10}).then(()=>(r.deleteSync(o),r.bindBuffer(t,e),r.getBufferSubData(t,i,s,n,a),r.bindBuffer(t,null),s)).catch(l=>{throw l})};class lr{mV(t){if(t instanceof Se||t instanceof js){const e=t.pi();this.WO=e.x.scaling,this.UO=-e.x.displacement,this.YO=e.y.scaling,this.HO=-e.y.displacement,this.$O=e.x.highPrecisionOffset,this.XO=e.x.highPrecisionOffset-Math.fround(e.x.highPrecisionOffset),this.jO=e.y.highPrecisionOffset,this.ZO=e.y.highPrecisionOffset-Math.fround(e.y.highPrecisionOffset)}else t instanceof wi&&(this.MixedScaleXY=t.pi());return this}AV(){return[this.UO,this.HO]}fV(){return[this.WO,this.YO]}VO(){return[this.$O,this.jO]}OO(){return[this.XO,this.ZO]}}class f4{constructor(){this.WO=0,this.YO=0,this.QO=0,this.UO=0,this.HO=0,this.JO=0}KO(t){return this.WO=t.et(),this.UO=t.getInnerStart()+.5*this.WO*t.ht(),this}qO(t){return this.YO=t.et(),this.HO=t.getInnerStart()+.5*this.YO*t.ht(),this}tN(t){return this.QO=t.et(),this.JO=t.getInnerStart()+.5*this.QO*t.ht(),this}fV(){return[this.WO,this.YO,this.QO]}AV(){return[this.UO,this.HO,this.JO]}iN(t,e,i,s,n){const a=Y(2*(t-i.x)/(i.width-i.x)-1,2*(e-i.y)/(i.height-i.y)-1),o=Ve.multiply(s,[a.x,a.y,n,1]);return Bt(o[0],o[1],o[2])}}class g4{constructor(t){this.RR=t}zL(t,e,i,s,n,a=0){const o=this.RR,l=s===void 0;if(!(s=s||o.vV()))throw new Ri("Could not bind a framebuffer.");const u=o.Xz(),d=o.Jz();o.gV(!1),o.KV(()=>{o.eV(0,0,i.x,i.y),t()},s,e,a),l&&o.MV(s),this.RR.qV(n),this.RR.eV(u.x,u.y,u.width,u.height),o.gV(d)}}class y4{constructor(t,e){this.sN=[],this.eN=[],this.uniform=i=>{const s=this.shader.gE(i);return this.eN.push({name:i,optional:!1}),s},this.uniformOptional=i=>{const s=this.shader.mE(i);return this.eN.push({name:i,optional:!0}),s},this.attribute=i=>{const s=this.shader.yE(i);return this.sN.push({name:i,location:s}),s},this.glUtils=t,this.shader=e}finish(t){for(const e of this.sN)this.glUtils.YV(e.location),this.glUtils.UV(e.location,0)}}class m4 extends Lf{constructor(t,e,i,s,n){super(t,e,i,s),this.hN=new Map,this.rN=t,this.nN=e,this.RR=t.oN(),this.aN=n,this.nN=e}lN(t){return!1}VR(){return this}zL(t){if(!this.aN||t!==0||this.hN.size===0)return this;const e=Array.from(this.hN.values()).map(s=>s.uN.filter(n=>n.cN).map(n=>n.ts).flat().filter(n=>n!==void 0).filter(n=>n.getVisible())).flat();if(e.length===0)return this;const i=this.aN;return this.RR.aO.SV(e,i),this}Ps(){return this}bt(){return 0}vt(){return 0}Mt(){return 0}xt(){return 0}vl(){return 0}bl(){return 0}hs(t,e){const i={uN:[]},s=(l,u)=>{const d={ts:l||[],cN:u===void 0||u};i.uN.push(d);const f={fs:y=>(d.ts=y,f),ps:y=>(d.cN=y,f),vs:()=>d.cN};return f},n={};Object.keys(e).forEach(l=>{const u=e[l],d=u.shapes||[],f=u.themeEffectEnabled===void 0||u.themeEffectEnabled,y=s(d,f);n[l]=y});const a={yg:s,...n};this.hN.set(t,i);const o=t.onDispose(()=>{this.hN.delete(t),t.offDispose(o)});return a}}const rE=(r,t,e)=>((i,s,n,a)=>{const o=[];let l=0;const u=Yt(s,n/2);let d,f,y,m,S=i[i.length-1],x=0;for(let v=0;v<i.length;v+=1){d=i[v],f=v===i.length-1?i[0]:i[v+1],v>0&&(S=i[v-1]),Tv(d,S)&&(S=zt(d,Hs(Yt(pe(f,d),-1)))),Tv(d,f)&&(f=zt(d,Hs(Yt(pe(S,d),-1))));const b=Ku(S,s),E=Ku(d,s),T=Ku(f,s),V=Hs(pe(E,b)),F=Hs(pe(T,E)),B=zt(V,F),z=Y(-B.y,B.x),L=Y(-V.y,V.x),A=1/Qy(z,L),R=Ca(z),w=Hs(pe(V,F)),C=Math.sign(Qy(z,w))||1,k=Xs(z,Yt(u,A)),_=Xs(z,Yt(u,-A));if(R<1||A===1/0){let X={x:0,y:0},N={x:0,y:0},U={x:0,y:0},O={x:0,y:0};const W=Y(-F.y,F.x),P=Math.sign(Qy(V,z))||C,H=Xs(L,Yt(u,P)),j=Xs(W,Yt(u,P));C===1?(X=H,N=_,U=j,O=_):(X=k,N=H,U=k,O=j);const Q=4*Kn(S,d),J=4*Kn(d,f);(A>Q||A>J)&&(C===1?(X=H,N=j,U=j,O=H):(X=j,N=H,U=H,O=j));const ht=zt(d,X),ot=zt(d,N),ut=zt(d,U),dt=zt(d,O);o[l]=ht,l+=1,o[l]=ot,l+=1,o[l]=ut,l+=1,o[l]=dt,l+=1,x=4}else{const X=zt(d,k),N=zt(d,_);o[l]=X,l+=1,o[l]=N,l+=1,x=2}m=y,y=i[v]}return o[l]=o[0],l+=1,o[l]=o[1],l+=1,[o,x,[m,y]]})(r,t,e)[0];class p4 extends ek{constructor(t,e,i,s,n,a,o){super(t,e,i,s,n),this.aE=new lr,this.dN=_e,this.fN=_e,this.AN=Cs({arcStyleSolid:()=>ue(this.be)&&this.be,arcStyleRadialGradient:()=>oi(this.be)&&this.be,arcStyleLinearGradient:()=>li(this.be)&&this.be}),this.rN=t,this.nN=e,this.gN=a,this.mN=o,this.RR=t.oN()}yN(t,e){let i=0,s=Array(0),n=0;if(e!==void 0){const o=t.length,l=Array(o+e.length);let u=0,d=0;for(;u<o;)l[d]=t[u],l[d+1]=e[u],d+=2,u+=1;s=l,i=this.RR.gl.TRIANGLE_STRIP}else s=t,i=this.RR.gl.TRIANGLE_FAN;const a=Rr(s,this.dt._i());return n=s.length,[s,this.RR.nV(a),n,i]}pN(t,e,i,s){let n=Array(0);if(e===void 0)n=t;else{let o=0,l=0;const u=t.length;for(o=0,l=u,n=Array(u+e.length-2),e.reverse();o<u;)n[o]=t[o],n[l]=e[o],l+=1,o+=1}if(i===1||i===-1)return[Rr(n,this.dt._i()),n.length];const a=rE(n,s,i);return[Rr(a,this.dt._i()),a.length]}Ps(){const t=this.sa(),e=this.Bo.M();if(this.ea()){const i=Math.abs(this.Fi.M()-this.Gl.M());this.aE.mV(this.dt);const s=this.dt.Ni()||t,n=this.dt.Wi(),a=this.Wl.M(),o=this.Ul.M(),[l,u]=qf(this.ua.M(),this.Gl.M(),this.Fi.M(),this.Wl.M(),this.Ul.M(),this.Hl.M()),d=this.Yl.M(),f=d>0?qf(this.ua.M(),this.Gl.M(),this.Fi.M(),this.Wl.M()*d/100,this.Ul.M()*d/100,u)[0]:[this.ua.M()],y=l.length-1;if(y===2){const F=(l[y-1].x+l[1].x)/2,B=(l[y-1].y+l[1].y)/2;this.$l=Y(F,B)}else{const F=Math.floor(y/2);this.$l=Y(l[F].x,l[F].y)}this.Xl=l[1];const m=l.length-1;this.jl=l[m],this.Yl.M()&&(l.shift(),f.shift());let S=!1;(this.ua.i||this.Gl.i||this.Fi.i||this.Wl.i||this.Ul.i||this.Yl.i||this.Hl.i||s)&&(this.fN=Qt(Y(this.Fa().x-a,this.Fa().y-o),Y(this.Fa().x+a,this.Fa().y+o)),S=!0,this.ua.i=!1,this.Gl.i=!1,this.Fi.i=!1,this.Wl.i=!1,this.Ul.i=!1,this.Yl.i=!1,this.Hl.i=!1);const x=this.ta();(S||x)&&this.be!==Ft&&(this.Yl.M()?(this.SN&&this.RR.yV(this.SN),[this.vN,this.SN,this.bN,this.xN]=this.yN(l,f)):(this.SN&&this.RR.yV(this.SN),[this.vN,this.SN,this.bN,this.xN]=this.yN(l,void 0)),oi(this.be)?this.MN=sr(this.fN,this.dt,this.be.getPosition(),this.be.getExtent(),this.be.getShape(),this.RR.$z()):li(this.be)?this._N=rr(this.fN,this.dt,this.be.getAngle(!0),this.RR.$z()):(this.MN=void 0,this._N=void 0));const v=this.AN.arcStyleSolid(x),b=this.AN.arcStyleLinearGradient(x),E=this.AN.arcStyleRadialGradient(x),T=v||b||E;x&&(this.wN=T?this.RR.oz($["2D"],$.Color({dataType:oi(this.be)||li(this.be)?["gradient",this.be]:"uniform"}),$.VertexLocation({axisWorldTranslation:Lt(this.dt),normalSource:void 0})):void 0,this.ha(this.be));const V=this.xe;if(Ss(V)&&(S||this.oa(V.getThickness())||s)){this.Yl.M()?i===360?(l.pop(),f.pop(),[this.CN,this.kN]=this.pN(l,void 0,V.getThickness(),n),this.TN&&this.CN?this.RR.VV(this.TN,this.CN,!0):!this.TN&&this.CN?this.TN=this.RR.nV(this.CN,!0):this.TN&&!this.CN&&(this.RR.yV(this.TN),this.TN=void 0),[this.FN,this.IN]=this.pN(f,void 0,V.getThickness(),n),this.PN&&this.FN?this.RR.VV(this.PN,this.FN,!0):!this.PN&&this.FN?this.PN=this.RR.nV(this.FN,!0):this.PN&&!this.FN&&(this.RR.yV(this.PN),this.PN=void 0)):([this.CN,this.kN]=this.pN(l,f,V.getThickness(),n),this.TN&&this.CN?this.RR.VV(this.TN,this.CN,!0):!this.TN&&this.CN?this.TN=this.RR.nV(this.CN,!0):this.TN&&!this.CN&&(this.RR.yV(this.TN),this.TN=void 0),this.FN&&(this.PN&&this.RR.yV(this.PN),this.PN=void 0,this.IN=0)):(i===360&&(l.shift(),l.pop()),[this.CN,this.kN]=this.pN(l,void 0,V.getThickness(),n),this.TN&&this.CN?this.RR.VV(this.TN,this.CN,!0):!this.TN&&this.CN?this.TN=this.RR.nV(this.CN,!0):this.TN&&!this.CN&&(this.RR.yV(this.TN),this.TN=void 0));const F=V.getFillStyle();oi(F)?this.DN=sr(this.fN,this.dt,F.getPosition(),F.getExtent(),F.getShape(),this.RR.$z()):li(F)?this.LN=rr(this.fN,this.dt,F.getAngle(!0),this.RR.$z()):(this.DN=void 0,this.LN=void 0),this.RN=F===Ft?void 0:this.RR.oz($["2D"],$.Color({dataType:oi(F)||li(F)?["gradient",F]:"uniform"}),$.VertexLocation({axisWorldTranslation:Lt(this.dt),normalSource:void 0})),this.aa(V)}if(S){let F=1,B=1;Ss(V)&&(F=V.getThickness()*n.x,B=V.getThickness()*n.y),this.dN=Qt(Y(this.fN.min.x-F,this.fN.min.y-B),Y(this.fN.max.x+F,this.fN.max.y+B))}this.EN=e&&T?this.EN||this.RR.oz($["2D"],$.MousePicking,$.VertexLocation({axisWorldTranslation:Lt(this.dt),normalSource:void 0})):void 0,this.zN=e&&this.xe!==At?this.zN||this.RR.oz($["2D"],$.MousePicking,$.VertexLocation({axisWorldTranslation:Lt(this.dt),normalSource:void 0})):void 0}return this}zL(t){if(this.ea()){const e=t===1?this.EN:this.wN,i=this.be,s=this.SN;e&&s&&this.RR.jR(e).aV(e,(a,o,l,u)=>{if(this.RR.uV(a("uScale"),this.aE.fV()).uV(a("uDisp"),this.aE.AV()).uV(u("uScaleStart_highpart"),this.aE.VO()).uV(u("uScaleStart_lowpart"),this.aE.OO()).vO(l,s,this.dt._i(),void 0).dV(a("uIsHighlighted"),t===1||t===2?0:this.zo).AR(a("uHighlightColorOffset"),t===1||t===2?$e:this.Go).dV(a("uRenderEffectMask"),t===2?1:0),t===1)this.RR.AR(a("uColor"),this.mN);else if(ue(i))this.RR.AR(a("uColor"),i.getColor());else if(oi(i)){if(!this.MN)return!1;this.RR.mO(l,this.MN,i)}else if(li(i)){if(!this._N)return!1;this.RR.yO(l,this._N,i)}return this.RR.Ky(this.xN,this.bN),!0});const n=this.xe;Ss(n)&&(this.TN!==void 0&&this.VN(t,this.TN,this.kN,n),this.PN!==void 0&&this.VN(t,this.PN,this.IN,n))}return this}VN(t,e,i,s){const n=t===1?this.zN:this.RN,a=s.getFillStyle();n&&this.RR.jR(n).aV(n,(o,l,u,d)=>{if(this.RR.uV(o("uScale"),this.aE.fV()).uV(o("uDisp"),this.aE.AV()).vO(u,e,this.dt._i(),void 0).dV(o("uIsHighlighted"),t===1||t===2?0:this.zo).AR(o("uHighlightColorOffset"),t===1||t===2?$e:this.Go).dV(o("uRenderEffectMask"),t===2?1:0),t===1)this.RR.AR(o("uColor"),this.mN);else if(ue(a))this.RR.AR(o("uColor"),a.getColor());else if(oi(a)){if(!this.DN)return!1;this.RR.mO(u,this.DN,a)}else if(li(a)){if(!this.LN)return!1;this.RR.yO(u,this.LN,a)}const f=s.getThickness(),y=f===-1||f===1;return this.RR.Ky(y?this.RR.gl.LINE_LOOP:this.RR.gl.TRIANGLE_STRIP,i),!0})}lN(t){return this.gN===t&&{}}VR(){return this.ON&&(this.RR.yV(this.ON),this.ON=void 0),this.NN&&(this.RR.yV(this.NN),this.NN=void 0),this.SN&&(this.RR.yV(this.SN),this.SN=void 0),this.TN&&(this.RR.yV(this.TN),this.TN=void 0),this.PN&&(this.RR.yV(this.PN),this.PN=void 0),this.wN=void 0,this.RN=void 0,this.EN=void 0,this.zN=void 0,this}bt(){return this.fN.max.x}vt(){return this.fN.min.x}Mt(){return this.fN.max.y}xt(){return this.fN.min.y}vl(){return Bs(this.xe)}bl(){return Bs(this.xe)}}class S4{constructor(){this.first=0,this.second=1,this.third=2,this.fourth=3,this.fifth=4,this.sixth=5}GN(t){return this.first=t,this.second=t+1,this.third=t+2,this.fourth=t+3,this.fifth=t+4,this.sixth=t+5,t+=6,this}WN(){return this.first=this.second,this.second=this.third,this.third=this.fourth,this.fourth=this.fifth,this.fifth=this.sixth,this.sixth+=1,this}UN(){return this.first=this.third,this.second=this.fourth,this.third=this.fifth,this.fourth=this.sixth,this.fifth=this.fourth+1,this.sixth=this.fifth+1,this}YN(t){const e=t.buffer;let{position:i}=t;return e[i]=this.first,e[i+1]=this.second,e[i+2]=this.third,i+=3,t.position=i,t.next&&this.WN(),this}HN(t){const e=t.buffer;let{position:i}=t;return e[i]=this.first,e[i+1]=this.third,e[i+2]=this.second,e[i+3]=this.third,e[i+4]=this.fourth,e[i+5]=this.second,i+=6,t.position=i,t.next&&this.UN(),this}$N(t,e){e.next=!0,6*t>=e.buffer.length&&(e.buffer=Array(6*t));for(let i=0;i<t;i+=1)this.HN(e);return this}XN(){return[this.first,this.second,this.third,this.fourth,this.fifth,this.sixth]}}const je=((r=0)=>new S4().GN(r))(),qb=(r,t,e,i,s,n,a,o,l,u)=>(o===void 0&&a===void 0||je.WN(),n.push(r,t),s.push(je.first,je.second,je.third),o=void 0,a=void 0,s.push(je.third,je.fourth,je.second),l=je.third,je.UN(),u&&n.push(e,i),[a,o,l]),jb=(r,t,e,i,s,n,a,o,l,u,d)=>{l===void 0&&o===void 0||je.WN(),a.push(r,t),s.push(je.first,je.second,je.third);const f=zm(r,e,t,i);return l=void 0,f!==void 0&&(l===void 0&&(l=f),a.push(l),n.push(je.third,je.fourth,je.fifth),u=je.fourth),je.UN(),d&&a.push(e,i),[o,l,u]},$b=(r,t,e,i,s,n,a,o,l,u)=>(a===void 0&&n===void 0||je.WN(),s.push(r,t),i.push(je.first,je.second,je.third),n=e,a=void 0,o=je.third,u?s.push(e):l=!0,[n,a,o,l]),Jb=(r,t,e,i,s,n,a,o,l,u,d)=>(n.length!==0?(o===void 0&&a===void 0||je.WN(),je.WN()):l>0&&(je.WN(),d>0&&(d-=1)),n.push(r),s.push(je.first,je.second,je.third),l=je.second,a=r,o=void 0,u&&n.push(e,i),[a,o,l,d]),Zb=(r,t=0)=>{je.GN(t);const[e,i]=r,s=e.length,n=[],a=[],o=[];let l,u,d=t,f=0,y=e[f],m=i[f],S=e[f],x=i[f],v=!1,b=d>0?S.y!==x.y?2:1:0;if(s>1)for(;f<s-1;){S=y,x=m,f+=1,y=e[f],m=i[f];const E=f===s-1;S.y>x.y?y.y>m.y?[l,u,d]=qb(S,x,y,m,n,o,l,u,d,E):y.y<m.y?[l,u,d]=jb(S,x,y,m,n,a,o,l,u,d,E):[l,u,d,v]=$b(S,x,y,n,o,l,u,d,v,E):S.y<x.y?y.y<m.y?[l,u,d]=qb(S,x,y,m,a,o,l,u,d,E):y.y>m.y?[l,u,d]=jb(S,x,y,m,a,n,o,l,u,d,E):[l,u,d,v]=$b(S,x,y,a,o,l,u,d,v,E):y.y===m.y?(l=S,v&&(o.push(S),v=!1,je.WN()),o.length===0&&d>0&&b>0&&(b-=1)):y.y>m.y?[l,u,d,b]=Jb(S,0,y,m,n,o,l,u,d,E,b):[l,u,d,b]=Jb(S,0,y,m,a,o,l,u,d,E,b)}return[o,new Uint16Array(n),new Uint16Array(a),d,b]};class x4 extends tk{constructor(t,e,i,s,n,a,o){super(t,e,i,s,n),this.aE=new lr,this.jN=0,this.Oa=Array(),this.ZN=0,this.QN=new Uint16Array(0),this.JN=new Uint16Array(0),this.AN=Cs({hightFillSolid:()=>ue(this.be)&&this.be,hightFillRadialGradient:()=>oi(this.be)&&this.be,hightFillLinearGradient:()=>li(this.be)&&this.be,hightFillPaletted:()=>Ti(this.be)&&this.be,lowFillSolid:()=>ue(this.Tl)&&this.Tl,lowFillRadialGradient:()=>oi(this.Tl)&&this.Tl,lowFillLinearGradient:()=>li(this.Tl)&&this.Tl,lowFillPaletted:()=>Ti(this.Tl)&&this.Tl}),this.rN=t,this.nN=e,this.gN=a,this.mN=o,this.RR=t.oN()}Ps(){const t=this.sa(),e=this.Bo.M(),i=this.Qa;if(this.ea()){this.aE.mV(this.dt);const s=this.dt instanceof wi==0,n=s?this.dt.Wi():void 0,a=this.Dl(),o=this.dt.Ni()||t,l=i||this._l.i||o&&a.type!=="disabled";if(l){if(this.jN=0,this.QN=new Uint16Array(0),this.JN=new Uint16Array(0),this.Oa.length=0,this.ZN=0,this.wl>1){const[z,L,A,R]=Zb([s?a.packager(this.xl,n,.5):this.xl,s?a.packager(this.Ml,n,.5):this.Ml]);this.jN=R,this.QN=L,this.JN=A,this.Oa=z,this.ZN=z.length}this._l.i=!1}if(this.kl&&this.$a[0].length>1){const[z,L]=this.$a,A=z.length,[R,w,C,k,_]=Zb([s?a.packager(z,n,.5):z,s?a.packager(L,n,.5):L],this.jN);this.jN=k;const X=R.length;for(let N=_;N<X;N+=1)this.Oa[this.ZN]=R[N],this.ZN+=1;this.QN=Nv(this.QN,w),this.JN=Nv(this.JN,C);for(let N=_>0||this.wl>0?1:_;N<A;N+=1)this.xl[this.wl]=z[N],this.Ml[this.wl]=L[N],this.wl+=1;this.Cl=!0,this.kl=!1,this.$a=[]}const u=this.be,d=this.ia!==u,f=this.AN.hightFillSolid(d),y=this.AN.hightFillRadialGradient(d),m=this.AN.hightFillLinearGradient(d),S=this.AN.hightFillPaletted(d),x=f||y||m||S&&["x","y"].includes(S.getLookUpProperty())&&S,v=this.Tl,b=this.Ol!==v,E=this.AN.lowFillSolid(b),T=this.AN.lowFillRadialGradient(b),V=this.AN.lowFillLinearGradient(b),F=this.AN.lowFillPaletted(b),B=E||T||V||F&&["x","y"].includes(F.getLookUpProperty())&&F;if((d||t)&&(this.KN=x?this.RR.oz($["2D"],$.Color({dataType:m?["gradient",m]:y?["gradient",y]:S?["lookup",S.getLookUpProperty(),S.lut]:"uniform"}),$.VertexLocation({axisWorldTranslation:Lt(this.dt),normalSource:void 0})):void 0),y?this.MN=sr(this.Eo||this.Ya,this.dt,y.getPosition(),y.getExtent(),y.getShape(),this.RR.$z()):m?this._N=rr(this.Eo||this.Ya,this.dt,m.getAngle(!0),this.RR.$z()):(this.MN=void 0,this._N=void 0),(b||t)&&(this.qN=B?this.RR.oz($["2D"],$.Color({dataType:V?["gradient",V]:T?["gradient",T]:F?["lookup",F.getLookUpProperty(),F.lut]:"uniform"}),$.VertexLocation({axisWorldTranslation:Lt(this.dt),normalSource:void 0})):void 0),T?this.tG=sr(this.Eo||this.Ya,this.dt,T.getPosition(),T.getExtent(),T.getShape(),this.RR.$z()):V?this.iG=rr(this.Eo||this.Ya,this.dt,V.getAngle(!0),this.RR.$z()):(this.tG=void 0,this.iG=void 0),(t||this.Cl||l)&&this.Cl||l){const z=this.Oa,L=Rr(z,this.dt._i());this.sG=this.RR.nV(L,!1,this.sG),x&&(this.eG=this.RR.OV(this.QN,this.eG),this.hG=this.QN.length),B&&(this.rG=this.RR.OV(this.JN,this.rG),this.nG=this.JN.length),this.Cl=!1}this.EN=e&&(B||x)?this.EN||this.RR.oz($["2D"],$.MousePicking,$.VertexLocation({axisWorldTranslation:Lt(this.dt),normalSource:void 0})):void 0,this.ha(this.be),this.Nl(this.Tl),this.Qa=!1}return this}zL(t){const e=this.be,i=this.Tl,s=t===1?this.EN:this.qN;if(s&&this.sG&&this.rG){const a=this.sG,o=this.rG;this.RR.jR(s).aV(s,(l,u,d,f)=>{if(this.RR.vO(d,a,this.dt._i(),void 0).XV(o).dV(l("uIsHighlighted"),t===1||t===2?0:this.zo).AR(l("uHighlightColorOffset"),t===1||t===2?$e:this.Go).dV(l("uRenderEffectMask"),t===2?1:0),this.dt instanceof Se||this.dt instanceof js?this.RR.uV(l("uScale"),this.aE.fV()).uV(l("uDisp"),this.aE.AV()).uV(f("uScaleStart_highpart"),this.aE.VO()).uV(f("uScaleStart_lowpart"),this.aE.OO()):this.dt instanceof wi&&this.RR.uV(f("uScaleStart"),this.aE.MixedScaleXY.uScaleStart).uV(f("uScaleStartLog"),this.aE.MixedScaleXY.uScaleStartLog).uV(f("uScaleInterval"),this.aE.MixedScaleXY.uScaleInterval).uV(f("uScaleIntervalLog"),this.aE.MixedScaleXY.uScaleIntervalLog).uV(l("uViewportStart"),this.aE.MixedScaleXY.uViewportStart).uV(l("uViewportSize"),this.aE.MixedScaleXY.uViewportSize),t===1)this.RR.AR(l("uColor"),this.mN);else if(ue(i))this.RR.AR(l("uColor"),i.getColor());else if(oi(i)){if(!this.tG)return!1;this.RR.mO(d,this.tG,i)}else if(li(i)){if(!this.iG)return!1;this.RR.yO(d,this.iG,i)}else if(Ti(i)){const y=tr(i,this,void 0);if(!y&&i.lut.percentageValues)return!1;this.RR.LO(d,i.lut,y)}return this.RR.ZV(this.nG),!0})}const n=t===1?this.EN:this.KN;if(n&&this.sG&&this.eG){const a=this.sG,o=this.eG;this.RR.jR(n).aV(n,(l,u,d,f)=>{if(this.RR.vO(d,a,this.dt._i(),void 0).XV(o).dV(l("uIsHighlighted"),t===1||t===2?0:this.zo).AR(l("uHighlightColorOffset"),t===1||t===2?$e:this.Go).dV(l("uRenderEffectMask"),t===2?1:0),this.dt instanceof Se||this.dt instanceof js?this.RR.uV(l("uScale"),this.aE.fV()).uV(l("uDisp"),this.aE.AV()).uV(f("uScaleStart_highpart"),this.aE.VO()).uV(f("uScaleStart_lowpart"),this.aE.OO()):this.dt instanceof wi&&this.RR.uV(f("uScaleStart"),this.aE.MixedScaleXY.uScaleStart).uV(f("uScaleStartLog"),this.aE.MixedScaleXY.uScaleStartLog).uV(f("uScaleInterval"),this.aE.MixedScaleXY.uScaleInterval).uV(f("uScaleIntervalLog"),this.aE.MixedScaleXY.uScaleIntervalLog).uV(l("uViewportStart"),this.aE.MixedScaleXY.uViewportStart).uV(l("uViewportSize"),this.aE.MixedScaleXY.uViewportSize),t===1)this.RR.AR(l("uColor"),this.mN);else if(ue(e))this.RR.AR(l("uColor"),e.getColor());else if(oi(e)){if(!this.MN)return!1;this.RR.mO(d,this.MN,e)}else if(li(e)){if(!this._N)return!1;this.RR.yO(d,this._N,e)}else if(Ti(e)){const y=tr(e,this,void 0);if(!y&&e.lut.percentageValues)return!1;this.RR.LO(d,e.lut,y)}return this.RR.ZV(this.hG),!0})}return this}lN(t){return this.gN===t&&{}}bt(){return this.Ya.max.x}vt(){return this.Ya.min.x}Mt(){return this.Ya.max.y}xt(){return this.Ya.min.y}vl(){return 0}bl(){return 0}Ux(t){this.al()>0&&this.Ps();const[e,i]=this.tl(),s=e.length>2&&e[1].x<e[0].x,n=_p(e,t,Wi.NearestX,this.Fl,this.Il,this.dt,this.us.dt,this.Ya,"x",s);if(n===void 0)return;const a=[e[n],i[n]];return Number.isNaN(a[0].y)||Number.isNaN(a[1].y)?void 0:a}sw(t){this.al()>0&&this.Ps();const[e,i]=this.tl(),s=e.length;if(s===0)return;const n=this.Fl?1:0,a=s-(this.Il?2:1),o=e.length>2&&e[1].x<e[0].x,l=JM(e,gt(t,this.us.dt,this.dt),"x",o,n,a);if(!l)return;const u=[wa(e[l.a],e[l.b],l.lerpAmount),wa(i[l.a],i[l.b],l.lerpAmount)];return Number.isNaN(u[0].y)||Number.isNaN(u[1].y)?void 0:u}dispose(){return super.dispose(),this.rG&&(this.RR.yV(this.rG),this.rG=void 0),this.eG&&(this.RR.yV(this.eG),this.eG=void 0),this.sG&&(this.RR.yV(this.sG),this.sG=void 0),this}VR(){return this.dispose(),this}}class A4 extends Hl{constructor(t,e){super(t),this.oG=e;const{vertices:i,indices:s,indicesCount:n,drawMode:a}=this.aG();this.lG=t.nV(i),this.uG=t.OV(s),this.cG=n,this.dG=a}jR(t,e){return this.RR.lV(this.lG,0,{location:t.attribute("aSegmentPosition"),size:2},{location:t.attribute("aSegmentSide"),size:1},{location:e?t.attribute("aSegmentInside"):void 0,size:1}),this.RR.XV(this.uG),this}Ky(t,e,i){return this.RR.JV(e!==void 0?e:this.dG,this.cG,i||0,t,this.RR.gl.UNSIGNED_BYTE),this}aG(){const t=[];[1,0].forEach(s=>{const n=s===1?.5*Math.PI:1.5*Math.PI;for(let a=0;a<=this.oG;a+=1){const o=n-a*Math.PI/this.oG;t.push(.5*Math.cos(o),.5*Math.sin(o),s,0)}}),t.push(0,0,1,1),t.push(0,0,0,1);const e=t.length/4,i=[];for(let s=0;s<this.oG;s+=1)i.push(s,s+1,e-2),i.push(s+e/2-1,s+e/2,e-1);return i.push(0,e-2,e-1),i.push(e-1,e-2,e/2-1),i.push(0,e-3,e-1),i.push(e/2-2,e-2,e/2-1),{vertices:new Float32Array(t),indices:new Uint8Array(i),indicesCount:i.length,verticesCount:e,drawMode:this.RR.gl.TRIANGLES}}kz(){this.RR.yV(this.lG),this.RR.yV(this.uG)}}const Xl=(r,t,e=!0)=>((i,s)=>{let n=i._V.xz.get(s);return n||(n=new A4(i,s),i._V.xz.set(s,n),n)})(r,e?t>=50?8:t>=20?6:t>=7?4:t>=4?3:t===1?1:2:1),mn={fG:(r,t,e,i,s,n)=>{const{attribute:a}=i,o=t.gl;if(o.bindBuffer(o.ARRAY_BUFFER,e),r){const l=a("aLocationA_highpart"),u=a("aLocationA_lowpart"),d=a("aLocationB_highpart"),f=a("aLocationB_lowpart");o.vertexAttribPointer(l,2,o.FLOAT,!1,s*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),t.UV(l,1),o.enableVertexAttribArray(l),o.vertexAttribPointer(u,2,o.FLOAT,!1,s*Float32Array.BYTES_PER_ELEMENT,(n+2)*Float32Array.BYTES_PER_ELEMENT),t.UV(u,1),o.enableVertexAttribArray(u),o.vertexAttribPointer(d,2,o.FLOAT,!1,s*Float32Array.BYTES_PER_ELEMENT,(n+s)*Float32Array.BYTES_PER_ELEMENT),t.UV(d,1),o.enableVertexAttribArray(d),o.vertexAttribPointer(f,2,o.FLOAT,!1,s*Float32Array.BYTES_PER_ELEMENT,(n+s+2)*Float32Array.BYTES_PER_ELEMENT),t.UV(f,1),o.enableVertexAttribArray(f)}else{const l=a("aLocationA"),u=a("aLocationB");o.vertexAttribPointer(l,2,o.FLOAT,!1,s*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),t.UV(l,1),o.enableVertexAttribArray(l),o.vertexAttribPointer(u,2,o.FLOAT,!1,s*Float32Array.BYTES_PER_ELEMENT,(n+s)*Float32Array.BYTES_PER_ELEMENT),t.UV(u,1),o.enableVertexAttribArray(u)}},AG:(r,t,e,i,s,n,a)=>{const o=r.gl;o.bindBuffer(o.ARRAY_BUFFER,e),o.vertexAttribPointer(i,n,o.FLOAT,!1,n*Float32Array.BYTES_PER_ELEMENT,a*Float32Array.BYTES_PER_ELEMENT),r.UV(i,1),o.enableVertexAttribArray(i),o.vertexAttribPointer(s,n,o.FLOAT,!1,n*Float32Array.BYTES_PER_ELEMENT,(a+n)*Float32Array.BYTES_PER_ELEMENT),r.UV(s,1),o.enableVertexAttribArray(s)},gG:(r,t,e,i,s,n)=>{const{attribute:a}=i,o=t.gl;if(o.bindBuffer(o.ARRAY_BUFFER,e),r){const l=a("aLocationA_highpart"),u=a("aLocationA_lowpart"),d=a("aLocationB_highpart"),f=a("aLocationB_lowpart");o.vertexAttribPointer(l,2,o.FLOAT,!1,2*s*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),t.UV(l,1),o.enableVertexAttribArray(l),o.vertexAttribPointer(u,2,o.FLOAT,!1,2*s*Float32Array.BYTES_PER_ELEMENT,(n+2)*Float32Array.BYTES_PER_ELEMENT),t.UV(u,1),o.enableVertexAttribArray(u),o.vertexAttribPointer(d,2,o.FLOAT,!1,2*s*Float32Array.BYTES_PER_ELEMENT,(n+s)*Float32Array.BYTES_PER_ELEMENT),t.UV(d,1),o.enableVertexAttribArray(d),o.vertexAttribPointer(f,2,o.FLOAT,!1,2*s*Float32Array.BYTES_PER_ELEMENT,(n+s+2)*Float32Array.BYTES_PER_ELEMENT),t.UV(f,1),o.enableVertexAttribArray(f)}else{const l=a("aLocationA"),u=a("aLocationB");o.vertexAttribPointer(l,2,o.FLOAT,!1,2*s*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),t.UV(l,1),o.enableVertexAttribArray(l),o.vertexAttribPointer(u,2,o.FLOAT,!1,2*s*Float32Array.BYTES_PER_ELEMENT,(n+s)*Float32Array.BYTES_PER_ELEMENT),t.UV(u,1),o.enableVertexAttribArray(u)}},mG:(r,t,e,i,s,n,a)=>{const o=r.gl;o.bindBuffer(o.ARRAY_BUFFER,e),o.vertexAttribPointer(i,n,o.FLOAT,!1,2*n*Float32Array.BYTES_PER_ELEMENT,a*Float32Array.BYTES_PER_ELEMENT),r.UV(i,1),o.enableVertexAttribArray(i),o.vertexAttribPointer(s,n,o.FLOAT,!1,2*n*Float32Array.BYTES_PER_ELEMENT,(a+n)*Float32Array.BYTES_PER_ELEMENT),r.UV(s,1),o.enableVertexAttribArray(s)},zL:(r,t,e,i,s,n,a)=>{const o=r.oN(),{uniform:l,uniformOptional:u}=e,d=1/r.Un.$n,f=(s?Math.max(n,d):Math.max(n,0))+1;o.dV(l("uThicknessPixels"),f).dV(u("uAALimit"),1-(f-1)/f).uV(l("uRatioPxClip"),[2/r.oi().x,2/r.oi().y]),t.jR(e,i).Ky(a)}},ll={fG:(r,t,e,i,s,n)=>{const{attribute:a}=i,o=t.gl;if(o.bindBuffer(o.ARRAY_BUFFER,e),r){const l=a("aPos_highpart");o.vertexAttribPointer(l,2,o.FLOAT,!1,s*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),o.enableVertexAttribArray(l);const u=a("aPos_lowpart");o.vertexAttribPointer(u,2,o.FLOAT,!1,s*Float32Array.BYTES_PER_ELEMENT,(n+2)*Float32Array.BYTES_PER_ELEMENT),o.enableVertexAttribArray(u)}else{const l=a("aPos");o.vertexAttribPointer(l,2,o.FLOAT,!1,s*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),o.enableVertexAttribArray(l)}},AG:(r,t,e,i,s,n)=>{const a=r.gl;a.bindBuffer(a.ARRAY_BUFFER,e),a.vertexAttribPointer(i,s,a.FLOAT,!1,s*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),a.enableVertexAttribArray(i)},gG:(r,t,e,i,s,n)=>{const{attribute:a}=i,o=t.gl;if(o.bindBuffer(o.ARRAY_BUFFER,e),!r){const l=a("aPos");o.vertexAttribPointer(l,2,o.FLOAT,!1,s*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),o.enableVertexAttribArray(l)}},yG:(r,t)=>{const e=r.oN();e.Ky(e.gl.LINE_STRIP,t,0)},pG:(r,t)=>{const e=r.oN();e.Ky(e.gl.LINES,2*t,0)}};class v4 extends hk{constructor(t,e,i,s,n,a,o){super(t,e,i,s,n),this.aE=new lr,this.Ya=_e,this.AN=Cs({lineStyleSolid:()=>Ss(this.lu)&&this.lu,lineStyleDashed:()=>m0(this.lu)&&this.lu,strokeFillSolid:()=>{const l=this.lu.getFillStyle();return ue(l)&&l},strokeFillLinearGradient:()=>{const l=this.lu.getFillStyle();return li(l)&&l},strokeFillRadialGradient:()=>{const l=this.lu.getFillStyle();return oi(l)&&l},strokeFillPaletted:()=>{const l=this.lu.getFillStyle();return Ti(l)&&l}}),this.rN=t,this.nN=e,this.gN=a,this.mN=o,this.RR=t.oN(),this.SG=this.RR.eO}Ps(){const t=this.ra(),e=this.lu,i=this.AN.lineStyleSolid(t),s=this.AN.lineStyleDashed(t),n=i||s,a=this.AN.strokeFillSolid(t),o=this.AN.strokeFillLinearGradient(t),l=this.AN.strokeFillRadialGradient(t),u=this.AN.strokeFillPaletted(t),d=a||o||l||u&&["x","y"].includes(u.getLookUpProperty())&&u,f=this.Ii(),y=this.Ti(),m=this.Bo.M(),S=this.Bo.i,x=e.V();if(s&&this.dt instanceof wi)return nt.console.error("LightningChart JS DashedLine is not supported on logarithmic axis"),this;if(this.aE.mV(this.dt),this.Au&&(this.vG=this.RR.nV(Rr([f,y],this.dt._i()),!1,this.vG),this.Ya=Qt(Y(f.x,f.y),Y(y.x,y.y))),t||S){const v=this.ea()&&n&&d&&x>0,b=o?["gradient",o]:l?["gradient",l]:u?["lookup",u.getLookUpProperty(),u.lut]:"uniform";this.bG=v?{type:"triangulated",shader:this.RR.oz($["2D"],$.Color({dataType:b}),$.LineInstanced2D({axisWorldTranslation:Lt(this.dt),normalSource:void 0}),this.SG?$.AliasedEdge:void 0,s&&$.StippleTextureInstanced),mousePickingShader:m?this.RR.oz($["2D"],$.MousePicking,$.LineInstanced2D({axisWorldTranslation:Lt(this.dt),normalSource:void 0}),s&&$.StippleTextureInstanced):void 0,geometry:Xl(this.RR,x),thickness:x,lineStyleSolid:i,lineStyleDashed:s,fillStyleSolid:a,fillStyleLinearGradient:o,fillStyleRadialGradient:l,fillStylePaletted:u}:void 0}if(l?this.DN=sr(fh(this.Ya,{x:this.vl(),y:this.bl()},this.dt),this.dt,l.getPosition(),l.getExtent(),l.getShape(),this.RR.$z()):o?this.LN=rr(fh(this.Ya,{x:this.vl(),y:this.bl()},this.dt),this.dt,o.getAngle(!0),this.RR.$z()):(this.DN=void 0,this.LN=void 0),s){if(t||this.Au){const v=[0,0,Math.abs(y.x-f.x),Math.abs(y.y-f.y)];this.xG=this.RR.nV(v,!1,this.xG)}this.MG=this.RR.IO(s.getPattern())}else this.xG&&(this.RR.yV(this.xG),this.xG=void 0),this.MG=void 0;return this.fu(e),this.Au=!1,this.Bo.i=!1,this}zL(t){var e,i;const s=this.vG;if(!s)return this;const n=this.bG;if(!n)return this;const{fillStyleSolid:a,fillStyleLinearGradient:o,fillStyleRadialGradient:l,fillStylePaletted:u,lineStyleDashed:d,thickness:f}=n,y=t===1?(e=this.bG)===null||e===void 0?void 0:e.mousePickingShader:(i=this.bG)===null||i===void 0?void 0:i.shader;return y?(this.RR.jR(y).aV(y,(m,S,x,v)=>{if(this.RR.dV(m("uIsHighlighted"),t===1||t===2?0:this.zo).AR(m("uHighlightColorOffset"),t===1||t===2?$e:this.Go).dV(m("uRenderEffectMask"),t===2?1:0),this.dt instanceof Se||this.dt instanceof js?this.RR.uV(m("uScale"),this.aE.fV()).uV(m("uDisp"),this.aE.AV()).uV(v("uScaleStart_highpart"),this.aE.VO()).uV(v("uScaleStart_lowpart"),this.aE.OO()):this.dt instanceof wi&&this.RR.uV(v("uScaleStart"),this.aE.MixedScaleXY.uScaleStart).uV(v("uScaleStartLog"),this.aE.MixedScaleXY.uScaleStartLog).uV(v("uScaleInterval"),this.aE.MixedScaleXY.uScaleInterval).uV(v("uScaleIntervalLog"),this.aE.MixedScaleXY.uScaleIntervalLog).uV(m("uViewportStart"),this.aE.MixedScaleXY.uViewportStart).uV(m("uViewportSize"),this.aE.MixedScaleXY.uViewportSize),t===1)this.RR.AR(m("uColor"),this.mN);else if(a)this.RR.AR(m("uColor"),a.getColor());else if(l){if(!this.DN)return!1;this.RR.mO(x,this.DN,l)}else if(o){if(!this.LN)return!1;this.RR.yO(x,this.LN,o)}else if(u){const b=tr(u,this,void 0);if(!b&&u.lut.percentageValues)return!1;this.RR.LO(x,u.lut,b)}if(d){if(!this.xG||!this.MG)return!1;mn.AG(this.RR,x,this.xG,S("aLengthSoFarA"),S("aLengthSoFarB"),2,0),this.RR.uV(m("uStippleCount"),[this.us.oi().x/this.MG.BO,this.us.oi().y/this.MG.BO]).dV(v("uStippleTextureWidthLimiter"),this.MG.DO/this.MG.BO).dV(m("uStippleScale"),d.getPatternScale()).cV(m("uStippleTexture"),this.MG.PO,1)}return mn.fG(this.dt._i(),this.RR,s,x,this.dt._i()?4:2,0),mn.zL(this.rN,n.geometry,x,this.SG&&t!==1,t===1,f,1),!0}),this):this}lN(t){return this.gN===t&&{}}dispose(){return super.dispose(),this.bG=void 0,this.vG&&(this.RR.yV(this.vG),this.vG=void 0),this.xG&&(this.RR.yV(this.xG),this.xG=void 0),this.MG=void 0,this}VR(){return this}bt(){return this.Ya.max.x}vt(){return this.Ya.min.x}Mt(){return this.Ya.max.y}xt(){return this.Ya.min.y}vl(){return Bs(this.lu)}bl(){return Bs(this.lu)}}class b4 extends ok{constructor(t,e,i,s,n,a){super(t,e,i,s,n),this._G=[],this.wG=!1,this.CG=!1,this.kG=!1,this.TG=!1,this.aE=new lr,this.Ya=_e,this.AN=Cs({lineStyleSolid:()=>Ss(this.lu)&&this.lu,lineStyleDashed:()=>m0(this.lu)&&this.lu,lineFillSolid:()=>{const u=this.lu.getFillStyle();return ue(u)&&u},lineFillRadialGradient:()=>{const u=this.lu.getFillStyle();return oi(u)&&u},lineFillLinearGradient:()=>{const u=this.lu.getFillStyle();return li(u)&&u},lineIndividualPointFill:()=>{const u=this.lu.getFillStyle();return ws(u)&&u}}),this.rN=t,this.nN=e,this.FG=a,this.RR=t.oN(),this.SG=this.RR.eO,this.IG=t.Un.jn;const{color:o,id:l}=this.FG();this.mN=o,this.gN=l}zr(){const t=this.mu?void 0:this.FG(),e={ys:i=>this.PG(e,i),cs:i=>this.DG(e,i),Eg:(i,s)=>this.BG(e,i,s),AR:i=>this.LG(e,i),Pi:{x:0,y:0},Fi:{x:0,y:0},zo:0,EG:void 0,gN:t==null?void 0:t.id,mN:t==null?void 0:t.color};return this._G.push(e),e}Nt(){var t;return this._G.length=0,this.wG=!0,this.ji&&this.Tn&&((t=this.us.Cn)===null||t===void 0?void 0:t.entity)===this&&this.Tn(this,void 0,this.us.Cn.collectionMember),this}zG(){return this._G.length}M(t){const e=this._G[t];return[e.Pi,e.Fi]}Ap(){return this._G}bd(t){var e;const i=this._G.indexOf(t);i>=0&&(this._G.splice(i,1),this.wG=!0,this.ji&&this.Tn&&((e=this.us.Cn)===null||e===void 0?void 0:e.entity)===this&&this.Tn(this,void 0,this.us.Cn.collectionMember))}PG(t,e){if(e&&!this._G.includes(t))this._G.push(t);else if(!e){const i=this._G.indexOf(t);this._G.splice(i,1)}return this.kG=!0,t}DG(t,e){return t.zo=e,this.CG=!0,t}BG(t,e,i){return t.Pi=e,t.Fi=i,this.wG=!0,t}LG(t,e){return t.EG=e,this.TG=!0,t}Ps(){const t=this.Bo.M(),e=this.Bo.i,i=this.ra(),s=this.lu,n=this._G,a=this.CG,o=this.wG,l=this.kG,u=this.TG,d=this.AN.lineStyleSolid(i),f=this.AN.lineStyleDashed(i),y=d||f,m=this.AN.lineFillSolid(i),S=this.AN.lineIndividualPointFill(i),x=this.AN.lineFillRadialGradient(i),v=this.AN.lineFillLinearGradient(i),b=m||S||v||x,E=s.V(),T=f?"triangulated":s.getThickness()<0?"primitive":"triangulated";if(f&&this.dt instanceof wi)return nt.console.error("LightningChart JS DashedLine is not supported on logarithmic axis"),this;this.aE.mV(this.dt);const V=o||l;if(V){const F=[];for(let B=0;B<n.length;B+=1){const z=n[B];F.push(z.Pi),F.push(z.Fi)}this.vG=this.RR.nV(Rr(F,this.dt._i()),!1,this.vG),this.Ya=Je(F)}if(i||e){const F=m?"uniform":S?"attribute":v?["gradient",v]:x?["gradient",x]:void 0,B=y&&b&&E>0&&F;this.bG=B?T==="triangulated"?{type:"triangulated",shader:this.RR.oz($["2D"],$.Color({dataType:F}),$.LineInstanced2D({axisWorldTranslation:Lt(this.dt),normalSource:void 0,snapToNearestPixel:this.IG,ensureMinimumSegmentLength:this.gu!==void 0}),this.SG?$.AliasedEdge:void 0,f&&$.StippleTextureInstanced,$.AttributeHighlight),mousePicking:t?{shader:this.RR.oz($["2D"],this.mu?$.MousePicking:$.MousePickingAttribute,$.LineInstanced2D({axisWorldTranslation:Lt(this.dt),normalSource:void 0,snapToNearestPixel:this.IG,ensureMinimumSegmentLength:this.gu!==void 0}),f&&$.StippleTextureInstanced,$.AttributeHighlight)}:void 0,geometry:Xl(this.RR,E,!1),thickness:E,lineStyleSolid:d,lineStyleDashed:f,fillStyleSolid:m,fillStyleIndividual:S,fillStyleLinearGradient:v,fillStyleRadialGradient:x}:{type:"primitive",shader:this.RR.oz($["2D"],$.Color({dataType:F}),$.VertexLocation({axisWorldTranslation:Lt(this.dt),normalSource:void 0,snapToNearestPixel:this.IG}),$.AttributeHighlight),mousePicking:t?{shader:this.RR.oz($["2D"],this.mu?$.MousePicking:$.MousePickingAttribute,$.VertexLocation({axisWorldTranslation:Lt(this.dt),normalSource:void 0,snapToNearestPixel:this.IG}),$.AttributeHighlight)}:void 0,lineStyleSolid:d,lineStyleDashed:f,fillStyleSolid:m,fillStyleIndividual:S,fillStyleLinearGradient:v,fillStyleRadialGradient:x}:void 0}if(f){if(i||V){const F=new Float32Array(4*n.length);let B=0;for(let z=0;z<n.length;z+=1){const L=n[z].Pi,A=n[z].Fi;F[B]=0,F[B+1]=0,F[B+2]=Math.abs(A.x-L.x),F[B+3]=Math.abs(A.y-L.y),B+=4}this.xG=this.RR.nV(F,!1,this.xG)}this.MG=this.RR.IO(f.getPattern())}else this.xG&&(this.RR.yV(this.xG),this.xG=void 0),this.MG=void 0;if(V||a)if(T==="triangulated"){const F=new Float32Array(n.length);let B=0;n.forEach(z=>{F[B]=z.zo,B+=1}),this.VG=this.RR.nV(F,!0,this.VG)}else{const F=new Float32Array(2*n.length);let B=0;n.forEach(z=>{for(let L=B;L<B+2;L+=2)F[L]=z.zo,F[L+1]=z.zo;B+=2}),this.VG=this.RR.nV(F,!1,this.VG)}if(S)if(u||V||i)if(T==="triangulated"){const F=new Float32Array(4*n.length);let B=0;n.forEach(z=>{const L=z.EG||S.color;F[B]=L.r,F[B+1]=L.g,F[B+2]=L.b,F[B+3]=L.a,B+=4}),this.OG=this.RR.nV(F,!1,this.OG)}else{const F=new Float32Array(8*n.length);let B=0;n.forEach(z=>{const L=z.EG||S.color;for(let A=B;A<B+8;A+=4)F[A]=L.r,F[A+1]=L.g,F[A+2]=L.b,F[A+3]=L.a;B+=8}),this.OG=this.RR.nV(F,!1,this.OG)}else this.OG&&(this.RR.yV(this.OG),this.OG=void 0);if(t&&!this.mu){if(V)if(T==="triangulated"){const F=new Float32Array(4*n.length);let B=0;n.forEach(z=>{var L,A,R,w;F[B+0]=((L=z.mN)===null||L===void 0?void 0:L.r)||0,F[B+1]=((A=z.mN)===null||A===void 0?void 0:A.g)||0,F[B+2]=((R=z.mN)===null||R===void 0?void 0:R.b)||0,F[B+3]=((w=z.mN)===null||w===void 0?void 0:w.a)||0,B+=4}),this.NG=this.RR.nV(F,!0,this.NG)}else{const F=new Float32Array(8*n.length);let B=0;n.forEach(z=>{var L,A,R,w;for(let C=B;C<B+4;C+=4)F[B+0]=((L=z.mN)===null||L===void 0?void 0:L.r)||0,F[B+1]=((A=z.mN)===null||A===void 0?void 0:A.g)||0,F[B+2]=((R=z.mN)===null||R===void 0?void 0:R.b)||0,F[B+3]=((w=z.mN)===null||w===void 0?void 0:w.a)||0;B+=8}),this.NG=this.RR.nV(F,!1,this.NG)}}else this.NG&&(this.RR.yV(this.NG),this.NG=void 0);return x?this.MN=sr(this.Eo||this.Ya,this.dt,x.getPosition(),x.getExtent(),x.getShape(),this.RR.$z()):v?this._N=rr(this.Eo||this.Ya,this.dt,v.getAngle(!0),this.RR.$z()):(this.MN=void 0,this._N=void 0),this.fu(s),this.CG=!1,this.kG=!1,this.wG=!1,this.TG=!1,this.Bo.i=!1,this}zL(t){var e;const i=this.vG,s=this.VG,n=this.NG;if(!i||!s)return this;const a=this.bG;if(!a)return this;const{type:o,fillStyleSolid:l,fillStyleIndividual:u,fillStyleLinearGradient:d,fillStyleRadialGradient:f,lineStyleDashed:y}=a,m=t===1?(e=a.mousePicking)===null||e===void 0?void 0:e.shader:a.shader;return m?(this.RR.jR(m).aV(m,(S,x,v,b)=>{if(this.dt instanceof Se||this.dt instanceof js?this.RR.uV(S("uScale"),this.aE.fV()).uV(S("uDisp"),this.aE.AV()).uV(b("uScaleStart_highpart"),this.aE.VO()).uV(b("uScaleStart_lowpart"),this.aE.OO()):this.dt instanceof wi&&this.RR.uV(b("uScaleStart"),this.aE.MixedScaleXY.uScaleStart).uV(b("uScaleStartLog"),this.aE.MixedScaleXY.uScaleStartLog).uV(b("uScaleInterval"),this.aE.MixedScaleXY.uScaleInterval).uV(b("uScaleIntervalLog"),this.aE.MixedScaleXY.uScaleIntervalLog).uV(S("uViewportStart"),this.aE.MixedScaleXY.uViewportStart).uV(S("uViewportSize"),this.aE.MixedScaleXY.uViewportSize),this.IG&&this.RR.uV(b("uViewportSizePx"),[this.us.oi().x*this.RR.$z(),this.us.oi().y*this.RR.$z()]),this.gu!==void 0&&this.RR.uV(S("uMinSegmentPixelVector"),[this.gu.x,this.gu.y]),this.RR.AR(S("uHighlightColorOffset"),t===1||t===2?$e:this.Go).dV(S("uRenderEffectMask"),t===2?1:0),t===1)if(this.mu)this.RR.AR(S("uColor"),this.mN);else{if(!n)return!1;o==="triangulated"?this.RR.lV(n,1,{location:x("aColor"),size:4}):this.RR.HV(x("aColor"),n)}else if(l)this.RR.AR(S("uColor"),l.getColor());else if(u){if(!this.OG)return!1;this.RR.lV(this.OG,o==="triangulated"?1:void 0,{location:x("aColor"),size:4})}else if(f){if(!this.MN)return!1;this.RR.mO(v,this.MN,f)}else if(d){if(!this._N)return!1;this.RR.yO(v,this._N,d)}if(y){if(!this.xG||!this.MG)return!1;mn.mG(this.RR,v,this.xG,x("aLengthSoFarA"),x("aLengthSoFarB"),2,0),this.RR.uV(S("uStippleCount"),[this.us.oi().x/this.MG.BO,this.us.oi().y/this.MG.BO]).dV(b("uStippleTextureWidthLimiter"),this.MG.DO/this.MG.BO).dV(S("uStippleScale"),y.getPatternScale()).cV(S("uStippleTexture"),this.MG.PO,0)}if(o==="triangulated"){const{geometry:E,thickness:T}=a;mn.gG(this.dt._i(),this.RR,i,v,this.dt._i()?4:2,0),this.RR.lV(s,1,{location:x("aIsHighlighted"),size:1}),mn.zL(this.rN,E,v,this.SG&&t!==1,t===1,T,this._G.length)}else ll.gG(this.dt._i(),this.RR,i,v,this.dt._i()?4:2,0),this.RR.$V(x("aIsHighlighted"),s),ll.pG(this.rN,this._G.length);return!0}),this):this}lN(t){if(t===this.gN)return{};const e=this._G.find(i=>i.gN===t);return!!e&&{collectionMember:e}}dispose(){return super.dispose(),this.bG=void 0,this.vG&&(this.RR.yV(this.vG),this.vG=void 0),this.xG&&(this.RR.yV(this.xG),this.xG=void 0),this.VG&&(this.RR.yV(this.VG),this.VG=void 0),this.NG&&(this.RR.yV(this.NG),this.NG=void 0),this.OG&&(this.RR.yV(this.OG),this.OG=void 0),this.MG=void 0,this}VR(){return this}cs(t){super.cs(t);for(const e of this._G)e.cs(t);return this}bt(){return this.Ya.max.x}vt(){return this.Ya.min.x}Mt(){return this.Ya.max.y}xt(){return this.Ya.min.y}vl(){return Bs(this.lu)}bl(){return Bs(this.lu)}}class k0{constructor(t,e){this.GG=!1,this.WG=!1,this.UG=!1,this.dt=t,this.YG=e,this.YG.Uo("DataPattern",i=>{i.pattern!=="ProgressiveX"&&i.pattern!=="RegressiveX"||(this.GG="x"),i.pattern!=="ProgressiveY"&&i.pattern!=="RegressiveY"||(this.GG="y"),i.pattern!=="RegressiveX"&&i.pattern!=="RegressiveY"||(this.WG=!0),i.regularProgressiveStep===!0&&(this.UG=!0)})}calculateUserDataPointsProgressiveRange(t){if(t.length===0)throw new Error("calculateUserDataPointsProgressiveRange called with 0 data points");return{start:this.GG==="x"?t[0].x:t[0].y,end:this.GG==="x"?t[t.length-1].x:t[t.length-1].y}}calculateUserDataPointsBoundaries(t){return this.GG?this.GG==="x"?function(e){const i=e.length;if(i>0){const s=Math.max(e[i-1].x,e[0].x),n=Math.min(e[i-1].x,e[0].x);let a=e[0].y,o=e[0].y;for(let l=0;l<i;l+=1){const u=e[l];u.y>a&&(a=u.y),u.y<o&&(o=u.y)}return Qt(Y(n,o),Y(s,a))}return _e}(t):function(e){const i=e.length;if(i>0){const s=Math.max(e[i-1].y,e[0].y),n=Math.min(e[i-1].y,e[0].y);let a=e[0].x,o=e[0].x;for(let l=0;l<i;l+=1){const u=e[l];u.x>a&&(a=u.x),u.x<o&&(o=u.x)}return Qt(Y(o,n),Y(a,s))}return _e}(t):Je(t)}calculateAvgStepBetweenDataPoints(t,e,i){return Math.abs(t-e)/(i-1)}}const M4=Math.min(1,1.5);class R4 extends k0{constructor(t,e,i){super(t,e),this.HG=!1,this.$G={enabled:!1,totalDataPointsAtTime:0},this.XG=[],this.Ss=i,this.jG=t instanceof Se?{type:"linear",scale:t}:t instanceof wi?{type:"mixed",scale:t}:{type:"unknown"},this.YG.Uo("DataPattern",s=>{s.allowDataGrouping===!1&&(this.HG=!0)})}ZG(t,e=!1){if(this.HG||!this.GG||this.jG.type!=="linear")return!1;e===!1&&this.QG&&(clearTimeout(this.QG),this.QG=void 0);const i=this.GG==="x"?this.jG.scale.x.ig:this.jG.scale.y.ig;if(!i)throw new Error("CP helper has no information about Axis state.");const s=t.length;if(s<2)return!1;const n=t[0],a=t[s-1],o=this.calculateAvgStepBetweenDataPoints(this.GG==="x"?n.x:n.y,this.GG==="x"?a.x:a.y,s),l=this.jG.scale,u=Math.abs(this.GG==="x"?l.Wi().x:l.Wi().y),d=u/o,f=Math.floor(d*M4),y=f*o,m=nt.performance.now(),S=!(m-i.ah<500)&&(i.ih?m-i.oh<1e3:m-i.sh<2e3||i.hh),x=s>2*this.$G.totalDataPointsAtTime;if(S&&!x)return this.QG=setTimeout(()=>this.JG(t),1e3),!1;const v=f>=10,b=this.$G.enabled?this.$G.columnWidthAxis/u<1.5:void 0,E=this.$G.enabled&&f>this.$G.dataPointsPerColumn?f/this.$G.dataPointsPerColumn>=2:void 0;let T;this.$G.enabled===!0?b?E&&(T={enabled:!0,columnWidthAxis:y,dataPointsPerColumn:f,totalDataPointsAtTime:s}):T=v?{enabled:!0,columnWidthAxis:y,dataPointsPerColumn:f,totalDataPointsAtTime:s}:{enabled:!1,totalDataPointsAtTime:s}:v&&(T={enabled:!0,columnWidthAxis:y,dataPointsPerColumn:f,totalDataPointsAtTime:s});const V=e===!1;return T?(V&&(this.$G=T),!0):(V&&(this.$G={...this.$G,totalDataPointsAtTime:s}),!1)}Qm(){this.KG=void 0,this.XG.length=0,this.QG&&(clearTimeout(this.QG),this.QG=void 0)}qG(t){if(t.length===0||this.HG||!this.GG||this.jG.type!=="linear"||!this.$G.enabled)return t;let e;e=this.XG.length>0?ls(this.XG,t,{canReturnB:!0}):t;const i=e.length,s=[];let n,a,o=this.KG===void 0,l=-1,u=-1,d=0,f=0;if(this.GG!=="x"||this.WG)if(this.GG==="x"&&this.WG){const m=this.$G.columnWidthAxis;let S=this.KG?this.KG.x:e[0].x,x=S-m;for(let v=0;v<i;v+=1){const b=e[v];b.x>=x?((!n||b.y>n.y)&&(n=b,l=v),(!a||b.y<a.y)&&(a=b,u=v),f=v):(n&&a&&(o&&s.push(e[0]),l<u?s.push(n,a):s.push(a,n)),o=!1,S=b.x,x=S-m,n=b,l=v,a=b,u=v,d=v,f=v)}}else if(this.GG!=="y"||this.WG){if(this.GG==="y"&&this.WG){const m=this.$G.columnWidthAxis;let S=this.KG?this.KG.y:e[0].y,x=S-m;for(let v=0;v<i;v+=1){const b=e[v];b.y>=x?((!n||b.x>n.x)&&(n=b,l=v),(!a||b.x<a.x)&&(a=b,u=v),f=v):(a&&n&&(o&&s.push(e[0]),l<u?s.push(n,a):s.push(a,n)),o=!1,S=b.y,x=S-m,n=b,l=v,a=b,u=v,d=v,f=v)}}}else{const m=this.$G.columnWidthAxis;let S=this.KG?this.KG.y:e[0].y,x=S+m;for(let v=0;v<i;v+=1){const b=e[v];b.y<=x?((!n||b.x>n.x)&&(n=b,l=v),(!a||b.x<a.x)&&(a=b,u=v),f=v):(a&&n&&(o&&s.push(e[0]),l<u?s.push(n,a):s.push(a,n)),o=!1,S=b.y,x=S+m,n=b,l=v,a=b,u=v,d=v,f=v)}}else{const m=this.$G.columnWidthAxis;let S=this.KG?this.KG.x:e[0].x,x=S+m;for(let v=0;v<i;v+=1){const b=e[v];b.x<=x?((!n||b.y>n.y)&&(n=b,l=v),(!a||b.y<a.y)&&(a=b,u=v),f=v):(n&&a&&(o&&s.push(e[0]),l<u?s.push(n,a):s.push(a,n)),o=!1,S=b.x,x=S+m,n=b,l=v,a=b,u=v,d=v,f=v)}}if(n||a){const m=e.slice(d,f+1);this.XG=m}else this.XG.length=0;const y=s.length;return y>0&&(this.KG=s[y-1]),s}tW(t){if(this.GG&&this.jG.type==="linear"){const e=this.GG==="x"?this.jG.scale.x.ig:this.jG.scale.y.ig;if(!e)throw new Error("CP helper has no information about Axis state.");if(e.Je===$r.progressive||e.Je===$r.regressive){const i=Math.abs(this.GG==="x"?this.jG.scale.x.getInnerInterval():this.jG.scale.y.getInnerInterval());if(this.$G.enabled)return 2*i/this.$G.columnWidthAxis;const s=t.length,n=t[0],a=t[s-1];return i/this.calculateAvgStepBetweenDataPoints(this.GG==="x"?n.x:n.y,this.GG==="x"?a.x:a.y,s)}}}iW(t,e,i){if(!this.GG)return e;const s=i.length;let n=dc(i,t.min,this.GG,this.WG,0,s-1);n===void 0&&(n=this.WG?s-1:0);let a=dc(i,t.max,this.GG,this.WG,0,s-1);return a===void 0&&(a=this.WG?0:s-1),1+Math.abs(a-n)}sW(){this.QG&&(clearTimeout(this.QG),this.QG=void 0)}JG(t){this.ZG(t,!0)&&this.Ss()}}class E4 extends k0{renderVisibleOnly(t,e){const i=this.dt.x.getInnerStart(),s=this.dt.x.getInnerEnd(),n=Math.min(i,s),a=Math.max(i,s),o=this.dt.y.getInnerStart(),l=this.dt.y.getInnerEnd(),u=Math.min(o,l),d=Math.max(o,l);t.forEach((f,y)=>{f.existingCoordinatesCount<=1||f.boundaries.max.x<n||f.boundaries.min.x>a||f.boundaries.max.y<u||f.boundaries.min.y>d||e(f)})}}class eS{constructor(t,e,i){this.eW=e,this.hW=i,this.rW=t,this.nW=[]}oW(t,e,i,s){const n=t.length;if(n===0)return;let a=t,o=n,l=this.rW[this.rW.length-1];do{const u=this.rW.length;let d;l||(l=this.aW(e,o)),l&&l.allocatedCoordinatesCount-l.existingCoordinatesCount==0&&(l=void 0);let f=0;if(this.hW&&u>0&&(l===void 0||l.existingCoordinatesCount===0)){const y=this.rW[u-1].lastDataPoint;y?(a.splice(0,0,y),f=1,o+=1):console.error("SegmentationHelper _connectSegments = true, but segment has no lastDataPoint information!")}if(l)d=Math.min(o,l.allocatedCoordinatesCount-l.existingCoordinatesCount),s(l,a.slice(0,d),d,f);else{const y=Math.ceil(e)+f;d=Math.min(y,o);const m={...i(y,a.slice(0,d),d,f),isDropped:!1};this.rW.push(m)}d>0&&(o>d?(a=a.slice(d),o=a.length):(a=[],o=0))}while(o>0);this.lW()}uW(t){const e=t,i=this.rW.indexOf(e);i>=0&&this.rW.splice(i,1),e.droppedTimestamp=nt.performance.now(),this.nW.push(e)}cW(){this.rW.slice().forEach(t=>this.uW(t))}dW(){this.rW.forEach(t=>this.eW(t)),this.nW.forEach(t=>this.eW(t)),this.rW.length=0,this.nW.length=0}aW(t,e){const i=2*t/3,s=4*t/3,n=this.nW.findIndex(a=>a.allocatedCoordinatesCount>=i&&a.allocatedCoordinatesCount<=s);if(n>=0){const a=this.nW[n];return this.nW.splice(n,1),this.rW.push(a),a}}lW(){if(this.nW.length>5){const t=nt.performance.now();for(let e=0;e<this.nW.length-5;e+=1){const i=this.nW[e];(i.droppedTimestamp===void 0||t-i.droppedTimestamp>=1e4)&&(this.eW(i),this.nW.splice(e,1),e-=1)}}}}class nE extends k0{fW(t,e){if(!e||typeof e!="object")return 0;const i=this.dt.x.getInnerStart(),s=this.dt.x.getInnerEnd(),n=Math.min(i,s),a=Math.max(i,s),o=this.dt.y.getInnerStart(),l=this.dt.y.getInnerEnd(),u=Math.min(o,l),d=Math.max(o,l);if("maxDataPointCount"in e)return this.AW(t,e.maxDataPointCount,n,a,u,d);if("minDataPointCount"in e)return this.gW(t,e.minDataPointCount,n,a,u,d);if("progressiveDataCleaningThreshold"in e)return this.mW(t,e.progressiveDataCleaningThreshold,n,a,u,d);throw new Error(`Unimplemented data cleaning configuration: ${JSON.stringify(e)}`)}AW(t,e,i,s,n,a){if(e===void 0||e<=0)return 0;const o=t.reduce((d,f)=>d+f.existingDataPointsCount,0);if(o<=e)return 0;let l=0,u=o;for(let d=0;d<t.length;d+=1){const f=t[d];u>e&&(l+=1,u-=f.existingDataPointsCount)}return l}mW(t,e,i,s,n,a){if(e===void 0||!this.GG)return 0;let o=0;for(let l=0;l<t.length;l+=1){const u=t[l],d=this.WG?this.GG==="x"?u.boundaries.min.x>s:u.boundaries.min.y>a:this.GG==="x"?u.boundaries.max.x<i:u.boundaries.max.y<n;if(!((this.WG?this.GG==="x"?u.boundaries.min.x>e:u.boundaries.min.y>e:this.GG==="x"?u.boundaries.max.x<e:u.boundaries.max.y<e)&&d&&u.existingCoordinatesCount>2))break;o+=1}return o}gW(t,e,i,s,n,a){if(e===void 0||e===0)return 0;let o=0,l=0;for(let u=t.length-1;u>=0;u-=1){const d=t[u];if(l>e)if(this.GG){if(this.WG?this.GG==="x"?d.boundaries.min.x>s:d.boundaries.min.y>a:this.GG==="x"?d.boundaries.max.x<i:d.boundaries.max.y<n){o=1+u;break}}else d.boundaries.max.x<i||d.boundaries.min.x>s||d.boundaries.max.y<n||d.boundaries.min.y>a?o+=1:o=0;l+=d.existingDataPointsCount}return o}yW(t,e){const i=t.reduce((s,n)=>Ws(s,n.boundaries),_e);if(e&&"progressiveDataCleaningThreshold"in e&&e.progressiveDataCleaningThreshold){const s=e.progressiveDataCleaningThreshold;this.GG!=="x"||this.WG?this.GG==="x"&&this.WG?i.max.x=Math.min(i.max.x,s):this.GG!=="y"||this.WG?this.GG==="y"&&this.WG&&(i.max.y=Math.min(i.max.y,s)):i.min.y=Math.max(i.min.y,s):i.min.x=Math.max(i.min.x,s)}return i}}class T4 extends _m{constructor(t,e,i,s,n,a,o,l){super(t,e,i,s,n),this.aE=new lr,this.QM=[],this.pW=new E4(this.dt,this),this.SW=new R4(this.dt,this,()=>this.us.Ss()),this.vW=new eS(this.QM,v=>{v.coordsBuffer&&this.RR.yV(v.coordsBuffer),v.xG&&this.RR.yV(v.xG)},!0),this.bW=new nE(this.dt,this),this.xW=0,this.MW=0,this._W=!1,this.AN=Cs({lineStyleSolid:()=>Ss(this.lu)&&this.lu,lineStyleDashed:()=>m0(this.lu)&&this.lu,strokeFillSolid:()=>{const v=this.lu.getFillStyle();return ue(v)&&v},strokeFillLinearGradient:()=>{const v=this.lu.getFillStyle();return li(v)&&v},strokeFillRadialGradient:()=>{const v=this.lu.getFillStyle();return oi(v)&&v},strokeFillPaletted:()=>{const v=this.lu.getFillStyle();return Ti(v)&&v}}),this.nN=e,this.gN=a,this.mN=o,this.Un=l,this.bG={type:"none"},this.RR=t.oN(),this.rN=t,this.SG=this.RR.eO;const u=this.dt._i(),d=(l==null?void 0:l.individualLookupValuesEnabled)===!0;let f,y,m,S=0;u||(f=S,S+=2),u&&(y=S,S+=4),d&&(m=S,S+=1);const x=((v,b)=>b?(E,T)=>((V,F)=>{if(!F){const A=V.length,R=new Float32Array(3*A);for(let w=0,C=0;w<A;w+=1){const k=V[w];R[C+0]=k.x,R[C+1]=k.y,R[C+2]=k.value!==void 0?k.value:0,C+=3}return R}const B=V.length,z=new Float32Array(5*B);let L=0;for(let A=0;A<B;A+=1){const R=V[A],w=Math.fround(R.x),C=Math.fround(R.y);z[L+0]=w,z[L+1]=C,z[L+2]=R.x-w,z[L+3]=R.y-C,z[L+4]=R.value!==void 0?R.value:0,L+=5}return z})(E,v):(E,T)=>Rr(E,v))(u,d);this.wW={individualLookupValuesEnabled:d,attributesPerVertex:S,attributeOffsetCoordinateLowPrecision:f,attributeOffsetCoordinateHighPrecision:y,attributeOffsetLookUpValue:m,prepareRenderData:(v,b)=>x(v,this.lu.getFillStyle())}}kW(t,e,i){const s=new Float32Array(2*e);let n=0,a=i||t[0];for(let o=0;o<e;o+=1){const l=t[o];this.xW+=Math.abs(a.x-l.x),this.MW+=Math.abs(a.y-l.y),s[n]=this.xW,s[n+1]=this.MW,n+=2,a=l}return s}Ps(){const t=this.Qa,e=this.lu,i=this.ra(),s=this.$a,n=s.length,a=n>0,o=this.Bo.M(),l=this.Bo.i,u=this.AN.lineStyleSolid(i),d=this.AN.lineStyleDashed(i),f=u||d,y=f&&f.getThickness(),m=this.AN.strokeFillSolid(i),S=this.AN.strokeFillLinearGradient(i),x=this.AN.strokeFillRadialGradient(i),v=this.AN.strokeFillPaletted(i),b=m||S||x||v,E=this.wW.individualLookupValuesEnabled;if(d&&this.dt instanceof wi)return nt.console.error("LightningChart JS DashedLine is not supported on logarithmic axis"),this;a&&(this.yu=ls(this.yu,s,{canReturnB:!0}),this.Ha+=n);let T=this.pu.i;const V=this.bW.fW(this.QM,this.pu.M());if(V>0){let A=0;for(let R=0;R<V;R+=1){const w=this.QM[0];A+=w.existingDataPointsCount,w.existingDataPointsCount=0,w.existingCoordinatesCount=0,w.jointPointsCount=0,w.boundaries=_e,w.lastDataPoint=void 0,this.vW.uW(w)}this.yu=this.yu.slice(A),this.Ha=this.yu.length,T=!0}let F=s,B=!1;(this.SW.ZG(this.yu)||t)&&(B=!0),d&&!this._W?(B=!0,this._W=!0,this.vW.dW()):!d&&this._W&&(this.QM.forEach(A=>{A.xG&&(this.RR.yV(A.xG),A.xG=void 0)}),this._W=!1),B&&(this.SW.Qm(),this.QM.forEach(A=>{A.existingDataPointsCount=0,A.existingCoordinatesCount=0,A.jointPointsCount=0,A.boundaries=_e,A.lastDataPoint=void 0}),this.vW.cW(),F=this.yu,this.xW=0,this.MW=0);const z=this.SW.qG(F),L=z.length;if(L>0){let A=this.SW.tW(this.yu)||(this.Uo("ApplicationType",R=>R.type==="InternalUI")?this.Ha:1e5);L/A>10&&(A=L/10),this.vW.oW(z,A,(R,w,C,k)=>{const _=this.pW.calculateUserDataPointsBoundaries(w),X=this.SW.iW(_,C,this.yu)-k;return this.TW=w[C-1],{allocatedCoordinatesCount:R,existingDataPointsCount:X,existingCoordinatesCount:C,jointPointsCount:k,boundaries:_,coordsBuffer:this.RR.EV(R*this.wW.attributesPerVertex,this.wW.prepareRenderData(w,C)),lastDataPoint:w[C-1],xG:this._W?this.RR.EV(2*R,this.kW(w,C,this.TW)):void 0}},(R,w,C,k)=>{const _=Ws(R.boundaries,this.pW.calculateUserDataPointsBoundaries(w)),X=this.SW.iW(_,R.existingCoordinatesCount+C,this.yu)-(R.jointPointsCount+k);this.RR.zV(R.coordsBuffer,R.existingCoordinatesCount*this.wW.attributesPerVertex,this.wW.prepareRenderData(w,C)),this._W&&R.xG&&this.RR.zV(R.xG,2*R.existingCoordinatesCount,this.kW(w,C,this.TW)),this.TW=w[C-1],R.jointPointsCount+=k,R.lastDataPoint=w[C-1],R.existingDataPointsCount=X,R.existingCoordinatesCount+=C,R.boundaries=_})}if(T&&(this.Ya=this.bW.yW(this.QM,this.pu.M())),this.aE.mV(this.dt),x?this.DN=sr(this.Eo||this.Ya,this.dt,x.getPosition(),x.getExtent(),x.getShape(),this.RR.$z()):S?this.LN=rr(this.Eo||this.Ya,this.dt,S.getAngle(!0),this.RR.$z()):(this.DN=void 0,this.LN=void 0),i||l){if(v&&v.getLookUpProperty()==="value"&&!E){const A='LCJS misusage error: Series individualLookupValuesEnabled flag must be set if using PalettedFill with lookUpProperty="value" !';throw nt.alert(A),new Error(A)}if(b&&f&&y!==!1){const A=y===-1?"primitive":"triangulated",R=S?["gradient",S]:x?["gradient",x]:v?["lookup",v.getLookUpProperty(),v.lut]:"uniform";this.bG=A==="primitive"?{type:A,shader:this.RR.oz($["2D"],$.Color({dataType:R}),$.VertexLocation({axisWorldTranslation:Lt(this.dt),normalSource:void 0}),d&&$.StippleTexture),mousePickingShader:o?this.RR.oz($["2D"],$.MousePicking,$.VertexLocation({axisWorldTranslation:Lt(this.dt),normalSource:void 0}),d&&$.StippleTexture):void 0,lineStyleSolid:u,lineStyleDashed:d,fillStyleSolid:m,fillStyleLinearGradient:S,fillStyleRadialGradient:x,fillStylePaletted:v}:A==="triangulated"?{type:A,shader:this.RR.oz($["2D"],$.Color({dataType:R}),$.LineInstanced2D({axisWorldTranslation:Lt(this.dt),normalSource:void 0}),this.SG?$.AliasedEdge:void 0,d&&$.StippleTextureInstanced),mousePickingShader:o?this.RR.oz($["2D"],$.MousePicking,$.LineInstanced2D({axisWorldTranslation:Lt(this.dt),normalSource:void 0}),d&&$.StippleTextureInstanced):void 0,geometry:Xl(this.RR,y),thickness:y,lineStyleSolid:u,lineStyleDashed:d,fillStyleSolid:m,fillStyleLinearGradient:S,fillStyleRadialGradient:x,fillStylePaletted:v}:{type:"none"}}else this.bG={type:"none"}}return this.MG=d?this.RR.IO(d.getPattern()):void 0,this.fu(e),this.Qa=!1,this.$a=[],this.Bo.i=!1,this.pu.i=!1,this}zL(t){const e=this.RR.gl,i=this.bG;if(!i||i.type==="none")return this;const s=t===1?i.mousePickingShader:i.shader;if(!s)return this;const{lineStyleDashed:n,fillStyleSolid:a,fillStyleLinearGradient:o,fillStyleRadialGradient:l,fillStylePaletted:u}=i;return this.RR.jR(s).aV(s,(d,f,y,m)=>{let S=!1;if(this.RR.dV(d("uIsHighlighted"),t===1||t===2?0:this.zo).AR(d("uHighlightColorOffset"),t===1||t===2?$e:this.Go).dV(d("uRenderEffectMask"),t===2?1:0),this.dt instanceof Se||this.dt instanceof js?this.RR.uV(d("uScale"),this.aE.fV()).uV(d("uDisp"),this.aE.AV()).uV(m("uScaleStart_highpart"),this.aE.VO()).uV(m("uScaleStart_lowpart"),this.aE.OO()):this.dt instanceof wi&&this.RR.uV(m("uScaleStart"),this.aE.MixedScaleXY.uScaleStart).uV(m("uScaleStartLog"),this.aE.MixedScaleXY.uScaleStartLog).uV(m("uScaleInterval"),this.aE.MixedScaleXY.uScaleInterval).uV(m("uScaleIntervalLog"),this.aE.MixedScaleXY.uScaleIntervalLog).uV(d("uViewportStart"),this.aE.MixedScaleXY.uViewportStart).uV(d("uViewportSize"),this.aE.MixedScaleXY.uViewportSize),t===1)this.RR.AR(d("uColor"),this.mN);else if(a)this.RR.AR(d("uColor"),a.getColor());else if(l){if(!this.DN)return!1;this.RR.mO(y,this.DN,l)}else if(o){if(!this.LN)return!1;this.RR.yO(y,this.LN,o)}else if(u){const x=tr(u,this,void 0);if(!x&&u.lut.percentageValues)return!1;this.RR.LO(y,u.lut,x)}return this.pW.renderVisibleOnly(this.QM,x=>{const{coordsBuffer:v}=x;if(!v)return;e.bindBuffer(e.ARRAY_BUFFER,v);const b=i.type==="triangulated"?mn.fG:ll.fG;if(this.dt._i()||this.wW.attributeOffsetCoordinateLowPrecision===void 0?this.dt._i()&&this.wW.attributeOffsetCoordinateHighPrecision!==void 0&&b(!0,this.RR,v,y,this.wW.attributesPerVertex,this.wW.attributeOffsetCoordinateHighPrecision):b(!1,this.RR,v,y,this.wW.attributesPerVertex,this.wW.attributeOffsetCoordinateLowPrecision),n){if(!x.xG||!this.MG)return;i.type==="triangulated"?mn.AG(this.RR,y,x.xG,f("aLengthSoFarA"),f("aLengthSoFarB"),2,0):ll.AG(this.RR,y,x.xG,f("aLengthSoFar"),2,0),this.RR.uV(d("uStippleCount"),[this.us.oi().x/this.MG.BO,this.us.oi().y/this.MG.BO]).dV(m("uStippleTextureWidthLimiter"),this.MG.DO/this.MG.BO).dV(d("uStippleScale"),n.getPatternScale()).cV(d("uStippleTexture"),this.MG.PO,1)}if(u&&u.lookUpProperty==="value"&&this.wW.attributeOffsetLookUpValue!==void 0&&t!==1)if(i.type==="triangulated"){const E=f("aLookupValueA");e.vertexAttribPointer(E,1,e.FLOAT,!1,this.wW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.wW.attributeOffsetLookUpValue*Float32Array.BYTES_PER_ELEMENT),this.RR.UV(E,1),e.enableVertexAttribArray(E);const T=f("aLookupValueB");e.vertexAttribPointer(T,1,e.FLOAT,!1,this.wW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,(this.wW.attributeOffsetLookUpValue+this.wW.attributesPerVertex)*Float32Array.BYTES_PER_ELEMENT),this.RR.UV(T,1),e.enableVertexAttribArray(T)}else{const E=f("aLookupValue");e.vertexAttribPointer(E,1,e.FLOAT,!1,this.wW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.wW.attributeOffsetLookUpValue*Float32Array.BYTES_PER_ELEMENT),e.enableVertexAttribArray(E)}if(i.type==="triangulated"){const{thickness:E}=i;mn.zL(this.rN,i.geometry,y,this.SG&&t!==1,t===1,E,x.existingCoordinatesCount-1)}else ll.yG(this.rN,x.existingCoordinatesCount);S=!0}),e.bindBuffer(e.ARRAY_BUFFER,null),S}),this}lN(t){return this.gN===t&&{}}nl(t,e){return Array.isArray(t)||(t=[t]),this.$a=ls(this.$a,t,{canReturnB:!0}),this.Ya=Ws(this.Ya,e||e||this.pW.calculateUserDataPointsBoundaries(t)),this}Nt(){return super.Nt(),this.xW=0,this.MW=0,this.TW=void 0,this}dispose(){return super.dispose(),this.vW.dW(),this.SW.sW(),this.bG={type:"none"},this.MG=void 0,this}VR(){return this}Ux(t){this.al()>0&&this.Ps();const e=this.tl(),i=_p(e,t,this.Za,this.Fl,this.Il,this.dt,this.engine.dt,this.Ya,this.pW.GG,this.pW.WG);return i!==void 0?e[i]:void 0}sw(t){this.al()>0&&this.Ps();const e=this.tl(),i=e.length;if(i===0)return;const s=this.Fl?1:0,n=i-(this.Il?2:1);if(this.Za===Wi.Nearest){let a,o,l=bt;for(let u=0;u<i;u+=1){const d=gt(e[u],this.dt,this.us.dt);if(o!==void 0){const f=iC(o,d,t),y=(f.x-t.x)**2+(f.y-t.y)**2;y<l&&(l=y,a=f)}o=d}return a!==void 0?gt(a,this.us.dt,this.dt):void 0}if(this.pW.GG==="x"&&this.Za===Wi.NearestX||this.pW.GG==="y"&&this.Za===Wi.NearestY){const a=JM(e,gt(t,this.us.dt,this.dt),this.pW.GG,this.pW.WG,s,n);return a?wa(e[a.a],e[a.b],a.lerpAmount):void 0}return this.Ux(t)}bt(){return this.Ya.max.x}vt(){return this.Ya.min.x}Mt(){return this.Ya.max.y}xt(){return this.Ya.min.y}vl(){return Bs(this.lu)}bl(){return Bs(this.lu)}}class $h extends Hl{constructor(t,e,i,s){super(t),this.dG=i,this.FW=e,this.IW=Rr(e,!1),this.PW=e.length,this.wR=t.nV(this.IW);const n=Je(this.FW);this.X=Y(n.max.x-n.min.x,n.max.y-n.min.y),this.DW=s}BW(t){return t>1}Ky(t,e,i,s,n){return typeof s=="object"?e?this.RR.$V(t.attribute("aOffsetScale"),e,1).uV(t.uniform("uSizePixels"),[s.width,s.height]):this.RR.dV(t.uniform("uOffsetScale"),s.scale).uV(t.uniform("uSizePixels"),[s.width,s.height]):n?e?this.RR.$V(t.attribute("aOffsetPixels"),e,1):this.RR.dV(t.uniform("uOffsetPixels"),s):this.RR.dV(t.uniform("uPointSize"),s),n?this.RR.lV(this.wR,0,{location:t.attribute("aInstanceGeo"),size:2}).QV(this.dG,0,this.PW,i):this.RR.Ky(this.RR.gl.POINTS,i),this}kz(){this.RR.yV(this.wR)}}const Qb=(r,t=0)=>{const e=[Y(-.5,-.5),Y(.5,-.5),Y(.5,.5),Y(-.5,.5)];return new $h(r,e,r.gl.TRIANGLE_FAN,t)},Kb=(r,t=0)=>{const i=[Y(-.5,-.05),Y(.5,-.05),Y(.5,.05),Y(.5,.05),Y(-.5,.05),Y(-.5,-.05),Y(-.05,-.5),Y(.05,-.5),Y(.05,.5),Y(.05,.5),Y(-.05,.5),Y(-.05,-.5)];return new $h(r,i,r.gl.TRIANGLES,t)},iS=(r,t,e)=>{if(so(r))return iS(qe.Square,t,e);let i=t._V.vz.get(r);if(r===qe.Circle){const s=e<=3?4:e<=5?8:e<=10?16:24;return i=t._V.bz.get(s)||((n,a,o=0)=>{const l=function(u=25){return qf(Y(0,0),0,360,.5,.5,u)[0]}(a);return new $h(n,l,n.gl.TRIANGLE_FAN,o)})(t,s),t._V.bz.set(s,i),i}if(!i){switch(r){case qe.Triangle:i=((s,n=0)=>{const a=function(){const o=[];return o.push(Y(-.5773502691892515,.3333333333333333)),o.push(Y(0,-.6666666666666666)),o.push(Y(1.154700538378503/2,.3333333333333333)),o}();return new $h(s,a,s.gl.TRIANGLES,n)})(t);break;case qe.Square:i=Qb(t);break;case qe.Plus:i=Kb(t);break;case qe.Cross:i=Kb(t,45);break;case qe.Diamond:i=Qb(t,45);break;case qe.Arrow:i=((s,n=0)=>{const o=[Y(-.05,-.5),Y(.05,-.5),Y(.05,.45),Y(.05,.45),Y(-.05,.45),Y(-.05,-.5),Y(-.5,0),Y(-.4,0),Y(0,.4),Y(0,.4),Y(0,.5),Y(-.5,0),Y(.5,0),Y(.4,0),Y(0,.4),Y(0,.4),Y(0,.5),Y(.5,0)];return new $h(s,o,s.gl.TRIANGLES,n)})(t);break;case qe.Star:i=((s,n=0)=>new $h(s,[{x:0,y:0},{x:0,y:.5},{x:.1,y:.1},{x:.5,y:.1},{x:.2,y:-.1},{x:.3,y:-.5},{x:0,y:-.25},{x:-.3,y:-.5},{x:-.2,y:-.1},{x:-.5,y:.1},{x:-.1,y:.1},{x:0,y:.5}],s.gl.TRIANGLE_FAN,n))(t);break;case qe.Minus:i=((s,n=0)=>{const o=[Y(-.5,-.05),Y(.5,-.05),Y(.5,.05),Y(.5,.05),Y(-.5,.05),Y(-.5,-.05)];return new $h(s,o,s.gl.TRIANGLES,n)})(t);break;default:return Nl(0,"LightningChart JS unidentified point shape")}t._V.vz.set(r,i)}return i};class w4 extends Np{constructor(t,e,i,s,n,a,o){super(t,e,i,s,n),this.aE=new lr,this.dN=Qt(Jn(kt,kt),Jn(bt,bt)),this.AN=Cs({pointStyleSolid:()=>ue(this.be)&&this.be,pointStyleRadialGradient:()=>oi(this.be)&&this.be,pointStyleLinearGradient:()=>li(this.be)&&this.be,pointStylePaletted:()=>Ti(this.be)&&this.be,pointStyleIndividual:()=>ws(this.be)&&this.be}),this.rN=t,this.nN=e,this.gN=a,this.mN=o,this.RR=t.oN()}Ps(){var t;const e=this.Bo.M(),i=this.Bo.i,s=this.$a,n=s.length,a=n>0,o=this.Na.M(),l=this.be,u=this.size.M(),d=this.Na.i||this.Aa.i,f=this.dt.Ni(),y=this.size.i||this.Na.i,m=this.Qa||s&&s.length>0,S=f||y,x=this.ta(),v=this.AN.pointStyleSolid(x),b=this.AN.pointStyleRadialGradient(x),E=this.AN.pointStyleLinearGradient(x),T=this.AN.pointStylePaletted(x),V=this.AN.pointStyleIndividual(x),F=v||b||E||T||V;if(a&&(this.Oa=ls(this.Oa,s,{canReturnB:!0}),this.Ha+=n),a||this.Qa){this.Ya=this.ja?Ws(this.Ya,this.ja):Ws(this.Ya,Je(this.Oa));const L=Rr(this.Oa,this.dt._i());this.LW=this.Ha,this.RW=this.RR.nV(L,!1,this.RW)}this.aE.mV(this.dt),l!==Ft?S&&(this.EW&&(this.EW=void 0),u>1||this.Ga.M()?u<=1&&!this.Ga.M()?this.dG=this.RR.gl.POINTS:(this.EW=iS(o,this.RR,this.Ga.M()?25:u),this.dG=this.EW.dG):this.dG=this.RR.gl.POINTS):this.EW&&(this.EW=void 0);const B=((t=this.EW)===null||t===void 0?void 0:t.DW)||0,z=this.Aa.M()+B;if(y||x||i||d){const L=this.Ga.M()?"attribute":"uniform",A=u<=1&&$.PointSize(L),R=$.VertexLocation({offset:u>1?{dataType:L,sizeUnit:"px",symmetric:!0,rotation:(this.Wa.M()||z%360!=0)&&{dataType:this.Wa.M()?"attribute":"uniform"}}:void 0,axisWorldTranslation:Lt(this.dt),normalSource:void 0});this.cE=F?this.RR.oz($["2D"],A,R,v?$.Color({dataType:"uniform"}):V?$.Color({dataType:"attribute"}):T?$.Color({dataType:["lookup",T.getLookUpProperty(),T.lut]}):b?$.Color({dataType:["gradient",b]}):E?$.Color({dataType:["gradient",E]}):void 0):void 0,this.EN=e&&F?this.RR.oz($["2D"],A,R,$.MousePicking):void 0}if(m||x){const L=this.Oa.length;if(ws(l)&&this.LW&&this.LW>0){const A=l.getFallbackColor(),R=new Float32Array(4*L);for(let w=0;w<L;w+=1){const C=this.Oa[w];C.color?(R[4*w+0]=C.color.r,R[4*w+1]=C.color.g,R[4*w+2]=C.color.b,R[4*w+3]=C.color.a):(R[4*w+0]=A.r,R[4*w+1]=A.g,R[4*w+2]=A.b,R[4*w+3]=A.a)}this.zW=this.RR.nV(R,!0,this.zW)}else this.zW&&this.RR.yV(this.zW),this.zW=void 0;if(this.Ga.M()&&this.LW&&this.LW>0&&u>1){const A=new Float32Array(L);for(let R=0;R<L;R+=1){const w=this.Oa[R];w.size?A[R]=w.size:A[R]=u}this.VW=this.RR.nV(A,!0,this.VW)}else this.VW&&(this.RR.yV(this.VW),this.VW=void 0);if(this.Wa.M()&&this.LW&&this.LW>0&&u>1){const A=new Float32Array(2*L),R=Ar(z),w=Math.sin(R),C=Math.cos(R);for(let k=0;k<L;k+=1){const _=this.Oa[k];if(_.rotation){const X=Ar(_.rotation+B);A[2*k+0]=Math.sin(X),A[2*k+1]=Math.cos(X)}else A[2*k+0]=w,A[2*k+1]=C}this.OW=this.RR.nV(A,!0,this.OW)}else this.OW&&(this.RR.yV(this.OW),this.OW=void 0);if(this.Ua.M()&&this.LW&&this.LW>0){const A=new Float32Array(L);for(let R=0;R<L;R+=1){const w=this.Oa[R];"value"in w&&w.value!==void 0&&w.value!==null?A[R]=w.value:A[R]=-34028234663852886e22}this.NW=this.RR.nV(A,!0,this.NW)}else this.NW&&(this.RR.yV(this.NW),this.NW=void 0);this.ha(this.be)}if(oi(l)?this.MN=sr(fh(this.Eo||this.Ya,{x:this.vl(),y:this.bl()},this.dt),this.dt,l.getPosition(),l.getExtent(),l.getShape(),this.RR.$z()):li(l)?this._N=rr(fh(this.Eo||this.Ya,{x:this.vl(),y:this.bl()},this.dt),this.dt,l.getAngle(!0),this.RR.$z()):(this.MN=void 0,this._N=void 0),m&&(this.Ya&&m&&(this.dN=fh(this.Ya,{x:u,y:u},this.dt)),this.$a=[],this.Xa=0,this.ja=_e),this.Ja===void 0&&T&&T.lookUpProperty==="value"&&T.lut.percentageValues){let L=kt,A=bt;for(let R=0;R<this.Oa.length;R+=1){const w=this.Oa[R];w.value!==void 0&&w.value<A&&(A=w.value),w.value!==void 0&&w.value>L&&(L=w.value)}this.Ja={min:A,max:L}}return this.ia=l,this.Na.i=!1,this.size.i=!1,this.Aa.i=!1,this.Bo.i=!1,this.Qa=!1,this}zL(t){const e=t===1?this.EN:this.cE,i=this.RW,s=this.LW;return e&&i&&s&&(this.RR.jR(e),this.RR.aV(e,(n,a,o,l)=>{var u;if(this.dt instanceof Se||this.dt instanceof js?this.RR.uV(n("uScale"),this.aE.fV()).uV(n("uDisp"),this.aE.AV()).uV(l("uScaleStart_highpart"),this.aE.VO()).uV(l("uScaleStart_lowpart"),this.aE.OO()):this.dt instanceof wi&&this.RR.uV(l("uScaleStart"),this.aE.MixedScaleXY.uScaleStart).uV(l("uScaleStartLog"),this.aE.MixedScaleXY.uScaleStartLog).uV(l("uScaleInterval"),this.aE.MixedScaleXY.uScaleInterval).uV(l("uScaleIntervalLog"),this.aE.MixedScaleXY.uScaleIntervalLog).uV(n("uViewportStart"),this.aE.MixedScaleXY.uViewportStart).uV(n("uViewportSize"),this.aE.MixedScaleXY.uViewportSize),this.RR.vO(o,i,this.dt._i(),this.EW?1:void 0).dV(n("uIsHighlighted"),t===1||t===2?0:this.zo).AR(n("uHighlightColorOffset"),t===1||t===2?$e:this.Go).dV(n("uRenderEffectMask"),t===2?1:0).dV(l("uDevicePixelRatio"),this.RR.$z()),this.EW){const y=a("aInstanceGeo");this.RR.GV(y,this.EW.wR).UV(y,0)}if(t===1)this.RR.AR(n("uColor"),this.mN);else if(ue(this.be))this.RR.AR(n("uColor"),this.be.getColor());else if(ws(this.be)&&this.zW){const y=a("aColor");this.RR.HV(y,this.zW),this.dG!==this.RR.gl.POINTS&&this.RR.UV(y,1)}else if(Ti(this.be)){if(this.be.getLookUpProperty()==="value"&&this.NW){const m=a("aLookupValue");this.RR.$V(m,this.NW),this.dG!==this.RR.gl.POINTS&&this.RR.UV(m,1)}const y=tr(this.be,this,this.Ja);if(!y&&this.be.lut.percentageValues)return!1;this.RR.LO(o,this.be.lut,y)}else if(oi(this.be)){if(!this.MN)return!1;this.RR.mO(o,this.MN,this.be)}else if(li(this.be)){if(!this._N)return!1;this.RR.yO(o,this._N,this.be)}if(this.VW&&this.dG!==this.RR.gl.POINTS){const y=a("aOffsetPixels");this.RR.$V(y,this.VW),this.dG!==this.RR.gl.POINTS&&this.RR.UV(y,1)}else if(this.dG!==this.RR.gl.POINTS){const y=n("uOffsetPixels");this.RR.dV(y,this.size.M())}const d=(((u=this.EW)===null||u===void 0?void 0:u.DW)||0)+this.Aa.M();if(this.OW&&this.dG!==this.RR.gl.POINTS){const y=a("aRot");this.RR.GV(y,this.OW),this.dG!==this.RR.gl.POINTS&&this.RR.UV(y,1)}else if(this.dG!==this.RR.gl.POINTS&&d%360!=0){const y=Ar(d),m=Math.sin(y),S=Math.cos(y);this.RR.uV(n("uRot"),[m,S])}if(this.dG===this.RR.gl.POINTS)this.RR.dV(n("uPointSize"),this.size.M());else{const y={x:2/this.us.oi().x,y:2/this.us.oi().y};this.RR.uV(n("uRatioPxClip"),[y.x,y.y])}let f=!1;return this.dG===this.RR.gl.POINTS?(this.RR.Ky(this.dG,s),f=!0):this.EW&&(this.RR.QV(this.dG,0,this.EW.PW,s),f=!0),f})),this}lN(t){return this.gN===t&&{}}Hc(t){this.al()>0&&this.Ps();const e=this.tl(),i=_p(e,t,this.Za,!1,!1,this.dt,this.us.dt,this.Ya,void 0,void 0);return i!==void 0?e[i]:void 0}Ce(t){return super.Ce(t)}bt(){return this.Ya.max.x}vt(){return this.Ya.min.x}Mt(){return this.Ya.max.y}xt(){return this.Ya.min.y}vl(){return this.Ga.M()?25:this.size.M()}bl(){return this.Ga.M()?25:this.size.M()}VR(){return this.RW&&(this.RR.yV(this.RW),this.RW=void 0),this.EW&&(this.EW=void 0),this.zW&&(this.RR.yV(this.zW),this.zW=void 0),this.OW&&(this.RR.yV(this.OW),this.OW=void 0),this.NW&&(this.RR.yV(this.NW),this.NW=void 0),this}}class C4 extends f0{constructor(t,e,i,s,n,a){super(t,e,i,s,n),this.bG={fill:void 0,border:void 0},this.aE=new lr,this.Ya=_e,this.GW=!1,this.WW=!1,this.UW=!1,this.YW=!1,this.HW=!1,this.Sd=[],this.AN=Cs({polygonStyleSolid:()=>ue(this.be)&&this.be,polygonStyleImage:()=>Ul(this.be)&&this.be,polygonStyleRadialGradient:()=>oi(this.be)&&this.be,polygonStyleLinearGradient:()=>li(this.be)&&this.be,polygonStylePaletted:()=>Ti(this.be)&&this.be,polygonStyleIndividual:()=>ws(this.be)&&this.be,lineStyleSolid:()=>Ss(this.xe)&&this.xe,lineStyleFilled:()=>{const o=this.xe&&this.xe.getFillStyle();return ue(o)&&o}}),this.rN=t,this.nN=e,this.FG=a,this.RR=t.oN(),this.SG=this.RR.eO}zr(){const t=this.FG(),e={ys:i=>this.PG(e,i),cs:i=>this.DG(e,i),pl:i=>this.$W(e,i),Yb:i=>this.XW(e,i),AR:i=>this.LG(e,i),Oa:[],u:void 0,jW:void 0,zo:0,ZW:!0,gN:t.id,mN:t.color};return this.Sd.push(e),e}Nt(){var t;return this.Sd.length=0,this.GW=!0,this.ji&&this.Tn&&((t=this.us.Cn)===null||t===void 0?void 0:t.entity)===this&&this.Tn(this,void 0,this.us.Cn.collectionMember),this}Ap(){return this.Sd}bd(t){var e;const i=this.Sd.indexOf(t);i>=0&&(this.Sd.splice(i,1),this.HW=!0,this.ji&&this.Tn&&((e=this.us.Cn)===null||e===void 0?void 0:e.entity)===this&&this.us.Cn.collectionMember===t&&this.Tn(this,void 0,this.us.Cn.collectionMember))}PG(t,e){var i;return t.ZW=e,this.HW=!0,this.ji&&this.Tn&&((i=this.us.Cn)===null||i===void 0?void 0:i.entity)===this&&this.us.Cn.collectionMember===t&&this.Tn(this,void 0,this.us.Cn.collectionMember),t}DG(t,e){return t.zo=e,this.YW=!0,t}$W(t,e){return t.Oa=e,this.GW=!0,t}XW(t,e){return t.u=e,this.WW=!0,t}LG(t,e){return t.jW=e==null?void 0:e.toUint32(),this.UW=!0,t}Ps(){const t=this.Bo.M(),e=this.Bo.i,i=this.ta(),s=this.YW,n=this.GW,a=this.WW,o=this.UW,l=this.HW,u=this.xe,d=this.ra(),f=this.Sd.filter(z=>z.ZW&&z.Oa.length>0);if(this.aE.mV(this.dt),(n||l)&&(this.Ya=Ws(...f.map(z=>Je(z.Oa)))),n||l){const z=Rr(f.map(w=>[...w.Oa,w.Oa[0],{x:Number.NaN,y:Number.NaN}]).flat(),this.dt._i()),L=this.dt._i()?4:2;this.vG=this.RR.nV(z,!1,this.vG);let A=[];f.reduce((w,C)=>{const k=w,_=(C.Oa.length+1)*L,X=new Float32Array(z.buffer,k,_),N=cM(X,void 0,L),U=w/(Float32Array.BYTES_PER_ELEMENT*L);for(let O=0;O<N.length;O+=1)N[O]+=U;return A=ls(A,N,{canReturnB:!0}),k+(_+1*L)*Float32Array.BYTES_PER_ELEMENT},0);const R=new Uint32Array(A);this.QW=this.RR.OV(R,this.QW),this.JW=R.length,this.KW=z.length/L-1}const y=this.AN.polygonStyleSolid(i),m=this.AN.polygonStylePaletted(i),S=this.AN.polygonStyleIndividual(i),x=this.AN.polygonStyleRadialGradient(i),v=this.AN.polygonStyleLinearGradient(i),b=this.AN.polygonStyleImage(i),E=y||m||v||x||b||S,T=this.AN.lineStyleSolid(d),V=this.AN.lineStyleFilled(d),F=V,B=T&&Math.max(T.getThickness(),0);if((i||d||e)&&(this.bG.fill=E?{shader:this.RR.oz($["2D"],y&&$.Color({dataType:"uniform"}),v&&$.Color({dataType:["gradient",v]}),x&&$.Color({dataType:["gradient",x]}),m&&$.Color({dataType:["lookup",m.getLookUpProperty(),m.lut]}),S&&$.Color({dataType:"attribute"}),b&&$.Color({dataType:["image",b]}),$.VertexLocation({axisWorldTranslation:Lt(this.dt),normalSource:void 0}),$.AttributeHighlight),mousePicking:t?{shader:this.RR.oz($["2D"],$.MousePickingAttribute,$.VertexLocation({axisWorldTranslation:Lt(this.dt),normalSource:void 0}),$.AttributeHighlight)}:void 0,fillStyleSolid:y,fillStyleLinearGradient:v,fillStyleRadialGradient:x,fillStylePaletted:m,fillStyleImage:b,fillStyleIndividual:S}:void 0,this.bG.border=T&&F&&typeof B=="number"&&B!==0?{shader:this.RR.oz($["2D"],$.Color({dataType:"uniform"}),$.LineInstanced2D({axisWorldTranslation:Lt(this.dt),normalSource:void 0}),this.SG?$.AliasedEdge:void 0,$.AttributeHighlight),geometry:Xl(this.RR,B),mousePicking:t?{shader:this.RR.oz($["2D"],$.MousePickingAttribute,$.LineInstanced2D({axisWorldTranslation:Lt(this.dt),normalSource:void 0}),$.AttributeHighlight)}:void 0,fillStyleSolid:V,thickness:B}:void 0),s||n){const z=f.reduce((R,w)=>R+w.Oa.length+2,0),L=new Float32Array(z);let A=0;f.forEach(R=>{const w=R.Oa.length+2;for(let C=A;C<A+w;C+=1)L[C]=R.zo;A+=w}),this.qW=this.RR.nV(L,!0,this.qW)}if(t){if(n){const z=f.reduce((R,w)=>R+w.Oa.length+2,0),L=new Float32Array(4*z);let A=0;f.forEach(R=>{const w=R.Oa.length+2;for(let C=A;C<A+4*w;C+=4)L[C]=R.mN.r,L[C+1]=R.mN.g,L[C+2]=R.mN.b,L[C+3]=R.mN.a;A+=4*w}),this.tU=this.RR.nV(L,!1,this.tU)}}else this.tU&&(this.RR.yV(this.tU),this.tU=void 0);if(a||n&&m&&m.getLookUpProperty()==="value"){const z=f.reduce((w,C)=>w+C.Oa.length+2,0),L=new Float32Array(z);let A=0;const R={min:bt,max:kt};f.forEach(w=>{const C=w.u!==void 0?w.u:-34028234663852886e22,k=w.Oa.length+2;for(let _=A;_<A+k;_+=1)L[_]=C;A+=k,R.min=Math.min(R.min,C),R.max=Math.max(R.max,C)}),this.iU=R,this.sU=this.RR.nV(L,!1,this.sU)}if(o||n&&S){const z=f.reduce((w,C)=>w+C.Oa.length+2,0),L=new Uint32Array(z);let A=0;const R=S?S.getFallbackColor().toUint32():to.toUint32();f.forEach(w=>{const C=w.jW!==void 0?w.jW:R,k=w.Oa.length+2;for(let _=A;_<A+k;_+=1)L[_]=C;A+=k}),this.eU=this.RR.nV(L,!1,this.eU,Uint32Array)}return x?this.MN=sr(this.Eo||this.Ya,this.dt,x.getPosition(),x.getExtent(),x.getShape(),this.RR.$z()):v?this._N=rr(this.Eo||this.Ya,this.dt,v.getAngle(!0),this.RR.$z()):(this.MN=void 0,this._N=void 0),this.hU=this.RR.RO(this,this.hU,b,void 0,n||l||this.dt.Ni(),(z,L,A)=>this.rU(z,L,A,f)),this.YW=!1,this.HW=!1,this.GW=!1,this.WW=!1,this.UW=!1,this.Bo.i=!1,this.ha(this.be),this.aa(u),this}zL(t){var e,i;const{fill:s,border:n}=this.bG,a=this.vG,o=this.qW,l=this.tU;if(!a||!o)return this;if(s){const{fillStyleSolid:u,fillStyleLinearGradient:d,fillStyleRadialGradient:f,fillStylePaletted:y,fillStyleImage:m,fillStyleIndividual:S}=s,x=this.QW,v=this.JW,b=t===1?(e=s.mousePicking)===null||e===void 0?void 0:e.shader:s.shader;if(!b||!a||!x||v===void 0)return this;this.RR.jR(b).aV(b,(E,T,V,F)=>{if(this.dt instanceof Se||this.dt instanceof js?this.RR.uV(E("uScale"),this.aE.fV()).uV(E("uDisp"),this.aE.AV()).uV(F("uScaleStart_highpart"),this.aE.VO()).uV(F("uScaleStart_lowpart"),this.aE.OO()):this.dt instanceof wi&&this.RR.uV(F("uScaleStart"),this.aE.MixedScaleXY.uScaleStart).uV(F("uScaleStartLog"),this.aE.MixedScaleXY.uScaleStartLog).uV(F("uScaleInterval"),this.aE.MixedScaleXY.uScaleInterval).uV(F("uScaleIntervalLog"),this.aE.MixedScaleXY.uScaleIntervalLog).uV(E("uViewportStart"),this.aE.MixedScaleXY.uViewportStart).uV(E("uViewportSize"),this.aE.MixedScaleXY.uViewportSize),this.RR.vO(V,a,this.dt._i(),void 0).XV(x).$V(T("aIsHighlighted"),o).AR(E("uHighlightColorOffset"),t===1||t===2?$e:this.Go).dV(E("uRenderEffectMask"),t===2?1:0),t===1){if(!l)return!1;this.RR.HV(T("aColor"),l)}else if(u)this.RR.AR(E("uColor"),u.getColor());else if(f){if(!this.MN)return!1;this.RR.mO(V,this.MN,f)}else if(d){if(!this._N)return!1;this.RR.yO(V,this._N,d)}else if(y){const B=tr(y,this,this.iU);if(!B&&y.lut.percentageValues)return!1;if(this.RR.LO(V,y.lut,B),y.getLookUpProperty()==="value"){if(!this.sU)return!1;this.RR.$V(T("aLookupValue"),this.sU)}}else if(m){if(!this.hU)return!1;this.RR.AR(F("uColor"),m.getSurroundingColor()).cV(E("uColorTexture"),this.hU.texture.Gz()||this.hU.sourceMissingTexture,0).lV(this.hU.texCoordsBuffer,void 0,{location:T("aTextureCoord"),size:2}).LV(m.fitMode)}else if(S){if(!this.eU)return!1;const B=T("aColor");this.RR.gl.bindBuffer(this.RR.gl.ARRAY_BUFFER,this.eU),this.RR.gl.vertexAttribPointer(B,4,this.RR.gl.UNSIGNED_BYTE,!0,0,0),this.RR.gl.enableVertexAttribArray(B)}return this.RR.ZV(v,void 0,void 0,this.RR.gl.UNSIGNED_INT),!0})}if(n){const{geometry:u,fillStyleSolid:d,thickness:f}=n,y=this.KW,m=t===1?(i=n.mousePicking)===null||i===void 0?void 0:i.shader:n.shader;if(!m||!a||!y)return this;this.RR.jR(m).aV(m,(S,x,v,b)=>{if(this.dt instanceof Se||this.dt instanceof js?this.RR.uV(S("uScale"),this.aE.fV()).uV(S("uDisp"),this.aE.AV()).uV(b("uScaleStart_highpart"),this.aE.VO()).uV(b("uScaleStart_lowpart"),this.aE.OO()):this.dt instanceof wi&&this.RR.uV(b("uScaleStart"),this.aE.MixedScaleXY.uScaleStart).uV(b("uScaleStartLog"),this.aE.MixedScaleXY.uScaleStartLog).uV(b("uScaleInterval"),this.aE.MixedScaleXY.uScaleInterval).uV(b("uScaleIntervalLog"),this.aE.MixedScaleXY.uScaleIntervalLog).uV(S("uViewportStart"),this.aE.MixedScaleXY.uViewportStart).uV(S("uViewportSize"),this.aE.MixedScaleXY.uViewportSize),this.RR.lV(o,1,{location:x("aIsHighlighted"),size:1}).AR(S("uHighlightColorOffset"),t===1||t===2?$e:this.Go).dV(S("uRenderEffectMask"),t===2?1:0),t===1){if(!l)return!1;this.RR.lV(l,1,{location:x("aColor"),size:4})}else d&&this.RR.AR(S("uColor"),d.getColor());return mn.fG(this.dt._i(),this.RR,a,v,this.dt._i()?4:2,0),mn.zL(this.rN,u,v,this.SG&&t!==1,t===1,f,y),!0})}return this}rU(t,e,i,s){const n=gt({x:this.Ya.min.x,y:this.Ya.min.y},this.dt,this.us.dt),a=gt({x:this.Ya.max.x,y:this.Ya.max.y},this.dt,this.us.dt),o={x:Math.abs(n.x-a.x),y:Math.abs(n.y-a.y)},l=C0(t,e,o.x,o.y,i),u=l[1],d=l[4],f=l[6],y=l[7],m=s.reduce((V,F)=>V+F.Oa.length+2,0),S=new Float32Array(2*m),x=this.Ya.max.x-this.Ya.min.x,v=this.Ya.max.y-this.Ya.min.y,b=d-f,E=y-u;let T=0;for(const V of s){for(const z of V.Oa){const L=f+b*((z.x-this.Ya.min.x)/x),A=u+E*((z.y-this.Ya.min.y)/v);S[T]=L,S[T+1]=A,T+=2}const F=f+b*((V.Oa[0].x-this.Ya.min.x)/x),B=u+E*((V.Oa[0].y-this.Ya.min.y)/v);S[T]=F,S[T+1]=B,T+=2,S[T]=Number.NaN,S[T+1]=Number.NaN,T+=2}return S}lN(t){const e=this.Sd.find(i=>i.gN===t);return!!e&&{collectionMember:e}}VR(){return this.QW&&(this.RR.yV(this.QW),this.QW=void 0),this.vG&&(this.RR.yV(this.vG),this.vG=void 0),this.qW&&(this.RR.yV(this.qW),this.qW=void 0),this.tU&&(this.RR.yV(this.tU),this.tU=void 0),this.sU&&(this.RR.yV(this.sU),this.sU=void 0),this.eU&&(this.RR.yV(this.eU),this.eU=void 0),this.bG={fill:void 0,border:void 0},this.hU=this.RR.EO(this,this.hU),this}bt(){return this.Ya.max.x}vt(){return this.Ya.min.x}Mt(){return this.Ya.max.y}xt(){return this.Ya.min.y}vl(){return Bs(this.xe)}bl(){return Bs(this.xe)}}class k4 extends ZC{constructor(t,e,i,s,n,a,o){super(t,e,i,s,n),this.aE=new lr,this.nU=_e,this.AN=Cs({fillStyleSolid:()=>ue(this.be)&&this.be,fillStyleRadialGradient:()=>oi(this.be)&&this.be,fillStyleLinearGradient:()=>li(this.be)&&this.be,fillStyleImage:()=>Ul(this.be)&&this.be,strokeStyleSolid:()=>Ss(this.xe)&&this.xe,strokeFillSolid:()=>{const l=this.xe.getFillStyle();return ue(l)&&l},strokeFillLinearGradient:()=>{const l=this.xe.getFillStyle();return li(l)&&l},strokeFillRadialGradient:()=>{const l=this.xe.getFillStyle();return oi(l)&&l}}),this.rU=(l,u,d)=>{const f=gt(this.Fa(),this.dt,this.us.dt),y=pe(gt(zt(this.Fa(),this.oi()),this.dt,this.us.dt),f);return C0(l,u,y.x,y.y,d)},this.rN=t,this.nN=e,this.gN=a,this.mN=o,this.RR=t.oN(),this.nN=e}Ps(){super.Ps();const t=this.Bo.M(),e=this.ta(),i=this.ua.i||this.X.i||this.Aa.i||this.ma.i,s=this.xe,n=this.ra(),a=s.getThickness(),o=this.Aa.M();this.aE.mV(this.dt);const l=this.dt.Ni();if(i){const V=this.X.M();this.Oa=function(B,z,L,A,R){const w=((C,k,_)=>[C,Y(C.x+k,C.y),Y(C.x+k,C.y+_),Y(C.x,C.y+_)])(B,z,L);if(A!==0||A%360!=0){const C=A*Math.PI/180;w[0]=Wn(w[0],R,C),w[1]=Wn(w[1],R,C),w[2]=Wn(w[2],R,C),w[3]=Wn(w[3],R,C)}return w}(this.ua.M(),V.x,V.y,o,this.ma.M());const F=Rr(this.Oa,this.dt._i());this.SN=this.RR.nV(F,!1,this.SN),this.bN=this.Oa.length,this.nU=Je(this.Oa)}const u=this.AN.fillStyleSolid(e),d=this.AN.fillStyleRadialGradient(e),f=this.AN.fillStyleLinearGradient(e),y=this.AN.fillStyleImage(e),m=u||d||f||y;e&&(this.wN=m?this.RR.oz($["2D"],u&&$.Color({dataType:"uniform"}),f&&$.Color({dataType:["gradient",f]}),d&&$.Color({dataType:["gradient",d]}),y&&$.Color({dataType:["image",y]}),$.VertexLocation({axisWorldTranslation:Lt(this.dt),normalSource:void 0})):void 0),d?this.MN=sr(this.Eo||this.nU,this.dt,d.getPosition(),d.getExtent(),d.getShape(),this.RR.$z()):f?this._N=rr(this.Eo||this.nU,this.dt,f.getAngle(!0),this.RR.$z()):(this.MN=void 0,this._N=void 0),this.hU=this.RR.RO(this,this.hU,y,void 0,l||i,this.rU);const S=this.AN.strokeStyleSolid(n),x=this.AN.strokeFillSolid(n),v=this.AN.strokeFillLinearGradient(n),b=this.AN.strokeFillRadialGradient(n),E=S,T=x||v||b;if(E&&(i||n||l&&a!==1)){if(a===1||a===-1)[this.CN,this.oU]=[this.Oa,void 0];else{const V=this.dt;[this.CN,this.oU]=V instanceof wi?((F,B,z)=>{const L=F[0],A=F[1],R=F[2],w=F[3],C=B/2;return[[z.Ui(L,A,C,-C),z.Ui(A,L,-C,-C),z.Ui(w,R,-C,-C),z.Ui(R,w,C,-C),z.Ui(L,A,-C,C),z.Ui(A,L,C,C),z.Ui(w,R,C,C),z.Ui(R,w,-C,C)],[0,4,5,0,5,1,1,5,7,1,3,7,3,7,6,3,2,6,2,4,0,2,6,4]]})(this.Oa,a,V):((F,B,z)=>{const L=F[0],A=F[1],R=F[2],w=F[3],C=Y(B.x*z*.5,B.y*z*.5),k=Hs(Vv(A,L)),_=Hs(Vv(w,L)),X=zv(k),N=zv(_);return[[zt(L,zt(Yt(X,C.x),Yt(N,C.y))),zt(A,zt(Yt(k,C.x),Yt(N,C.y))),zt(w,zt(Yt(X,C.x),Yt(_,C.y))),zt(R,zt(Yt(k,C.x),Yt(_,C.y))),zt(L,zt(Yt(k,C.x),Yt(_,C.y))),zt(A,zt(Yt(X,C.x),Yt(_,C.y))),zt(w,zt(Yt(k,C.x),Yt(N,C.y))),zt(R,zt(Yt(X,C.x),Yt(N,C.y)))],[0,4,5,0,5,1,1,5,7,1,3,7,3,7,6,3,2,6,2,4,0,2,6,4]]})(this.Oa,V.Wi(),a)}this.TN=this.RR.nV(Rr(this.CN,this.dt._i()),!1,this.TN),this.oU?(this.uG=this.RR.OV(new Uint16Array(this.oU),this.uG),this.kN=this.oU.length):(this.uG&&this.RR.yV(this.uG),this.uG=void 0,this.kN=this.CN.length)}return n&&(this.RN=E&&T?this.RR.oz($["2D"],$.Color({dataType:b?["gradient",b]:v?["gradient",v]:"uniform"}),$.VertexLocation({axisWorldTranslation:Lt(this.dt),normalSource:void 0})):void 0),b?this.DN=sr(this.nU,this.dt,b.getPosition(),b.getExtent(),b.getShape(),this.RR.$z()):v?this.LN=rr(this.nU,this.dt,v.getAngle(!0),this.RR.$z()):(this.DN=void 0,this.LN=void 0),this.EN=t&&m?this.EN||this.RR.oz($["2D"],$.Color({dataType:"uniform"}),$.VertexLocation({axisWorldTranslation:Lt(this.dt),normalSource:void 0})):void 0,this.zN=t&&this.xe!==At?this.zN||this.RR.oz($["2D"],$.Color({dataType:"uniform"}),$.VertexLocation({axisWorldTranslation:Lt(this.dt),normalSource:void 0})):void 0,this.ha(this.be),this.aa(s),this.ua.i=!1,this.Aa.i=!1,this.X.i=!1,this.ma.i=!1,this}lN(t){return this.gN===t&&{}}zL(t){const e=t===1?this.EN:this.wN,i=this.SN,s=this.bN,n=this.AN.fillStyleSolid(!1),a=this.AN.fillStyleRadialGradient(!1),o=this.AN.fillStyleLinearGradient(!1),l=this.AN.fillStyleImage(!1);e&&i&&s&&this.be!==Ft&&(this.RR.jR(e),this.RR.aV(e,(x,v,b,E)=>{if(this.dt instanceof Se||this.dt instanceof js?this.RR.uV(x("uScale"),this.aE.fV()).uV(x("uDisp"),this.aE.AV()).uV(E("uScaleStart_highpart"),this.aE.VO()).uV(E("uScaleStart_lowpart"),this.aE.OO()):this.dt instanceof wi&&this.RR.uV(E("uScaleStart"),this.aE.MixedScaleXY.uScaleStart).uV(E("uScaleStartLog"),this.aE.MixedScaleXY.uScaleStartLog).uV(E("uScaleInterval"),this.aE.MixedScaleXY.uScaleInterval).uV(E("uScaleIntervalLog"),this.aE.MixedScaleXY.uScaleIntervalLog).uV(x("uViewportStart"),this.aE.MixedScaleXY.uViewportStart).uV(x("uViewportSize"),this.aE.MixedScaleXY.uViewportSize),t===1)this.RR.AR(x("uColor"),this.mN);else if(n)this.RR.AR(x("uColor"),n.getColor());else if(a){if(!this.MN)return!1;this.RR.mO(b,this.MN,a)}else if(o){if(!this._N)return!1;this.RR.yO(b,this._N,o)}else if(l){if(!this.hU)return!1;const T=this.hU&&this.hU.texture.Gz();this.RR.AR(E("uColor"),l.getSurroundingColor()).cV(x("uColorTexture"),T||this.hU.sourceMissingTexture,0).lV(this.hU.texCoordsBuffer,void 0,{location:v("aTextureCoord"),size:2}).LV(l.fitMode)}return this.RR.dV(x("uIsHighlighted"),t===1||t===2?0:this.zo).AR(x("uHighlightColorOffset"),t===1||t===2?$e:this.Go).dV(x("uRenderEffectMask"),t===2?1:0).vO(b,i,this.dt._i(),void 0).Ky(this.RR.gl.TRIANGLE_FAN,s),!0}));const u=t===1?this.zN:this.RN,d=this.AN.strokeStyleSolid(!1),f=this.AN.strokeFillSolid(!1),y=this.AN.strokeFillLinearGradient(!1),m=this.AN.strokeFillRadialGradient(!1),S=this.TN;return u&&S&&d&&(this.RR.jR(u),this.RR.aV(u,(x,v,b,E)=>{if(this.dt instanceof Se||this.dt instanceof js?this.RR.uV(x("uScale"),this.aE.fV()).uV(x("uDisp"),this.aE.AV()).uV(E("uScaleStart_highpart"),this.aE.VO()).uV(E("uScaleStart_lowpart"),this.aE.OO()):this.dt instanceof wi&&this.RR.uV(E("uScaleStart"),this.aE.MixedScaleXY.uScaleStart).uV(E("uScaleStartLog"),this.aE.MixedScaleXY.uScaleStartLog).uV(E("uScaleInterval"),this.aE.MixedScaleXY.uScaleInterval).uV(E("uScaleIntervalLog"),this.aE.MixedScaleXY.uScaleIntervalLog).uV(x("uViewportStart"),this.aE.MixedScaleXY.uViewportStart).uV(x("uViewportSize"),this.aE.MixedScaleXY.uViewportSize),t===1)this.RR.AR(x("uColor"),this.mN);else if(f)this.RR.AR(x("uColor"),f.getColor());else if(m){if(!this.DN)return!1;this.RR.mO(b,this.DN,m)}else if(y){if(!this.LN)return!1;this.RR.yO(b,this.LN,y)}return this.RR.dV(x("uIsHighlighted"),t===1||t===2?0:this.zo).AR(x("uHighlightColorOffset"),t===1||t===2?$e:this.Go).dV(x("uRenderEffectMask"),t===2?1:0).vO(b,S,this.dt._i(),void 0),this.uG?this.RR.XV(this.uG).ZV(this.kN):this.RR.Ky(this.RR.gl.LINE_LOOP,this.kN),!0})),this}VR(){return this.uG&&(this.RR.yV(this.uG),this.uG=void 0),this.SN&&(this.RR.yV(this.SN),this.SN=void 0),this.TN&&(this.RR.yV(this.TN),this.TN=void 0),this.hU=this.RR.EO(this,this.hU),this.wN=void 0,this.RN=void 0,this.EN=void 0,this.zN=void 0,this}bt(){return Math.max(this.ua.M().x,this.ua.M().x+this.X.M().x)}vt(){return Math.min(this.ua.M().x,this.ua.M().x+this.X.M().x)}Mt(){return Math.max(this.ua.M().y,this.ua.M().y+this.X.M().y)}xt(){return Math.min(this.ua.M().y,this.ua.M().y+this.X.M().y)}vl(){return Bs(this.xe)}bl(){return Bs(this.xe)}}class D4 extends KC{constructor(t,e,i,s,n,a,o){super(t,e,i,s,n),this.aE=new lr,this.AN=Cs({fillStyleSolid:()=>ue(this.be)&&this.be,fillStylePaletted:()=>Ti(this.be)&&this.be,fillStyleRadialGradient:()=>oi(this.be)&&this.be,fillStyleLinearGradient:()=>li(this.be)&&this.be,fillStyleImage:()=>Ul(this.be)&&this.be,strokeLineStyleSolid:()=>Ss(this.xe)&&this.xe,strokeLineSolidFill:()=>{const l=this.xe.getFillStyle();return ue(l)&&l},strokeLinearGradientFill:()=>{const l=this.xe.getFillStyle();return li(l)&&l},strokeRadialGradientFill:()=>{const l=this.xe.getFillStyle();return oi(l)&&l}}),this.rU=(l,u,d)=>{const f=gt({x:this.Ya.min.x,y:this.Ya.min.y},this.dt,this.us.dt),y=gt({x:this.Ya.max.x,y:this.Ya.max.y},this.dt,this.us.dt),m={x:Math.abs(f.x-y.x),y:Math.abs(f.y-y.y)},S=C0(l,u,m.x,m.y,d),x=S[1],v=S[4],b=S[6],E=S[7],T=new Float32Array(2*this.Oa.length),V=this.Ya.max.x-this.Ya.min.x,F=this.Ya.max.y-this.Ya.min.y,B=v-b,z=E-x;let L=0;for(const A of this.Oa){const R=b+B*((A.x-this.Ya.min.x)/V),w=x+z*((A.y-this.Ya.min.y)/F);T[L]=R,T[L+1]=w,L+=2}return T},this.rN=t,this.nN=e,this.gN=a,this.mN=o,this.RR=t.oN(),this.nN=e}Hc(t){let e,i=Number.MAX_VALUE;for(const s of this.Oa){const n=Kn(gt(s,this.dt,this.us.dt),t);n<i&&(i=n,e=s)}return e}Ps(){const t=this.Bo.M(),e=this.ta(),i=this.yl,s=this.Oa.length>=3,n=this.xe,a=this.ra(),o=n.getThickness(),l=this.oa(o);this.aE.mV(this.dt),this.FT=this.dt.Wi();const u=this.dt.Ni();if(i&&(this.Ya=Je(this.Oa)),i&&s){const B=Rr(this.Oa,this.dt._i());this.SN=this.RR.nV(B,!1,this.SN),this.aU=new Uint16Array(cM(B)),this.lU=this.RR.OV(this.aU,this.lU),this.bN=this.aU.length}const d=this.AN.fillStyleSolid(e),f=this.AN.fillStylePaletted(e),y=this.AN.fillStyleRadialGradient(e),m=this.AN.fillStyleLinearGradient(e),S=this.AN.fillStyleImage(e),x=d||f&&f.getLookUpProperty()!=="value"&&f||m||y||S;if(e&&(this.wN=x?this.RR.oz($["2D"],d&&$.Color({dataType:"uniform"}),m&&$.Color({dataType:["gradient",m]}),y&&$.Color({dataType:["gradient",y]}),f&&$.Color({dataType:["lookup",f.getLookUpProperty(),f.lut]}),S&&$.Color({dataType:["image",S]}),$.VertexLocation({axisWorldTranslation:Lt(this.dt),normalSource:void 0})):void 0),y?this.MN=sr(this.Eo||this.Ya,this.dt,y.getPosition(),y.getExtent(),y.getShape(),this.RR.$z()):m?this._N=rr(this.Eo||this.Ya,this.dt,m.getAngle(!0),this.RR.$z()):(this.MN=void 0,this._N=void 0),this.hU=this.RR.RO(this,this.hU,S,void 0,u||i,this.rU),(i||l||u&&o!==1)&&s){const B=o===1||o===-1?this.Oa:rE(this.Oa,this.FT,o);this.CN=Rr(B,this.dt._i()),this.TN=this.RR.nV(this.CN,!0,this.TN),this.kN=B.length}const v=this.AN.strokeLineStyleSolid(a),b=this.AN.strokeLineSolidFill(a),E=this.AN.strokeLinearGradientFill(a),T=this.AN.strokeRadialGradientFill(a),V=v,F=b||E||T;return a&&(this.RN=V&&F?this.RR.oz($["2D"],$.Color({dataType:T?["gradient",T]:E?["gradient",E]:"uniform"}),$.VertexLocation({axisWorldTranslation:Lt(this.dt),normalSource:void 0})):void 0),T?this.DN=sr(this.Eo||this.Ya,this.dt,T.getPosition(),T.getExtent(),T.getShape(),this.RR.$z()):E?this.LN=rr(this.Eo||this.Ya,this.dt,E.getAngle(!0),this.RR.$z()):(this.DN=void 0,this.LN=void 0),this.EN=t&&x?this.EN||this.RR.oz($["2D"],$.MousePicking,$.VertexLocation({axisWorldTranslation:Lt(this.dt),normalSource:void 0})):void 0,this.zN=t&&this.xe!==At?this.EN||this.RR.oz($["2D"],$.MousePicking,$.VertexLocation({axisWorldTranslation:Lt(this.dt),normalSource:void 0})):void 0,this.yl=!1,this.ha(this.be),this.aa(n),this}zL(t){const e=t===1?this.EN:this.wN,i=this.SN,s=this.bN,n=this.AN.fillStyleSolid(!1),a=this.AN.fillStyleRadialGradient(!1),o=this.AN.fillStyleLinearGradient(!1),l=this.AN.fillStylePaletted(!1),u=this.AN.fillStyleImage(!1);e&&i&&s&&this.RR.jR(e).aV(e,(S,x,v,b)=>{if(this.RR.uV(S("uScale"),this.aE.fV()).uV(S("uDisp"),this.aE.AV()).uV(b("uScaleStart_highpart"),this.aE.VO()).uV(b("uScaleStart_lowpart"),this.aE.OO()).vO(v,i,this.dt._i(),void 0).XV(this.lU).dV(S("uIsHighlighted"),t===1||t===2?0:this.zo).AR(S("uHighlightColorOffset"),t===1||t===2?$e:this.Go).dV(S("uRenderEffectMask"),t===2?1:0),t===1)this.RR.AR(S("uColor"),this.mN);else if(n)this.RR.AR(S("uColor"),n.getColor());else if(a){if(!this.MN)return!1;this.RR.mO(v,this.MN,a)}else if(o){if(!this._N)return!1;this.RR.yO(v,this._N,o)}else if(l){const E=tr(l,this,void 0);if(!E&&l.lut.percentageValues)return!1;this.RR.LO(v,l.lut,E)}else if(u){if(!this.hU)return!1;this.RR.AR(b("uColor"),u.getSurroundingColor()).cV(S("uColorTexture"),this.hU.texture.Gz()||this.hU.sourceMissingTexture,0).lV(this.hU.texCoordsBuffer,void 0,{location:x("aTextureCoord"),size:2}).LV(u.fitMode)}return this.RR.ZV(this.bN),!0});const d=t===1?this.zN:this.RN,f=this.xe,y=this.TN,m=this.kN;return d&&y&&m&&this.RR.jR(d).aV(d,(S,x,v,b)=>{this.RR.dV(S("uIsHighlighted"),t===1||t===2?0:this.zo).AR(S("uHighlightColorOffset"),t===1||t===2?$e:this.Go).dV(S("uRenderEffectMask"),t===2?1:0).uV(S("uScale"),this.aE.fV()).uV(S("uDisp"),this.aE.AV()).vO(v,y,this.dt._i(),void 0);const E=f.getFillStyle();if(t===1)this.RR.AR(S("uColor"),this.mN);else if(ue(E))this.RR.AR(S("uColor"),E.getColor());else if(oi(E)){if(!this.DN)return!1;this.RR.mO(v,this.DN,E)}else if(li(E)){if(!this.LN)return!1;this.RR.yO(v,this.LN,E)}const T=f.getThickness(),V=T===-1||T===1;return this.RR.Ky(V?this.RR.gl.LINE_LOOP:this.RR.gl.TRIANGLE_STRIP,this.kN),!0}),this}lN(t){return this.gN===t&&{}}VR(){return this.lU&&(this.RR.yV(this.lU),this.lU=void 0),this.SN&&(this.RR.yV(this.SN),this.SN=void 0),this.TN&&(this.RR.yV(this.TN),this.TN=void 0),this.wN=void 0,this.RN=void 0,this.EN=void 0,this.zN=void 0,this.hU=this.RR.EO(this,this.hU),this}}const F4=(r,t)=>{let e=0;const i=[];for(;e<r;){const s=e;let n=t;const a=e>0;n-=a?1:0,n-=e+n<r?1:0;const o=Math.min(n,r-s),l=e-(a?1:0),u={start:l,startUnique:s,sizeData:Math.min(t,r-l),sizeUniqueData:o};i.push(u),e+=o}return i},V4=(r,t)=>{let e=0;const i=[];for(;e<r;){const s=e;let n=t;const a=e>0;n-=a?1:0,n-=0;const o=Math.min(n,r-s),l=e-(a?1:0),u={start:l,startUnique:s,sizeData:Math.min(t,r-l),sizeUniqueData:o};i.push(u),e+=o}return i},aE=(r,t,e,i)=>{if(e){const n=new Map;return t.gridTiles.forEach(a=>{n.set(a,{type:e,dataInvalidationRanges:[{tileInvalidationOffset:{primary:0,secondary:0},tileInvalidationLength:a.sizeHeatmapDataVectors}]})}),n}const s=new Map;for(let n=0;n<r.length;n+=1){const a=r[n],o={x:a.startPrimary,y:a.startSecondary},l={x:o.x+a.lengthPrimary-1,y:o.y+a.lengthSecondary-1},u=[o,{x:l.x,y:o.y},l,{x:o.x,y:l.y}];t.gridTiles.forEach(d=>{const f=d.iFirstVector,y=i(d),m={x:f.primary+y.primary-1,y:f.secondary+y.secondary-1},S=[{x:f.primary,y:f.secondary},{x:m.x,y:f.secondary},m,{x:f.primary,y:m.y}];if(!_f(u,S))return;let x=s.get(d);x||(x={type:a.type,dataInvalidationRanges:[]},s.set(d,x));const v=NM(u,S),b={primary:v.min.x-f.primary,secondary:v.min.y-f.secondary},E={primary:1+v.max.x-v.min.x,secondary:1+v.max.y-v.min.y};let T=!1;const V=[{x:b.primary,y:b.secondary},{x:b.primary+E.primary,y:b.secondary},{x:b.primary+E.primary,y:b.secondary+E.secondary},{x:b.primary,y:b.secondary+E.secondary}];for(let z=0;z<x.dataInvalidationRanges.length;z+=1)if(!T){const L=x.dataInvalidationRanges[z],A=[{x:L.tileInvalidationOffset.primary,y:L.tileInvalidationOffset.secondary},{x:L.tileInvalidationOffset.primary+L.tileInvalidationLength.primary,y:L.tileInvalidationOffset.secondary},{x:L.tileInvalidationOffset.primary+L.tileInvalidationLength.primary,y:L.tileInvalidationOffset.secondary+L.tileInvalidationLength.secondary},{x:L.tileInvalidationOffset.primary,y:L.tileInvalidationOffset.secondary+L.tileInvalidationLength.secondary}];if(_f(V,A)){const R=(F=V,B=A,{min:{x:Math.min(F[0].x,B[0].x),y:Math.min(F[0].y,B[0].y)},max:{x:Math.max(F[2].x,B[2].x),y:Math.max(F[2].y,B[2].y)}});L.tileInvalidationOffset.primary=R.min.x,L.tileInvalidationOffset.secondary=R.min.y,L.tileInvalidationLength.primary=R.max.x-R.min.x,L.tileInvalidationLength.secondary=R.max.y-R.min.y,T=!0}}var F,B;T||x.dataInvalidationRanges.push({tileInvalidationLength:E,tileInvalidationOffset:b})})}return s},hE=(r,t,e)=>{if(r.length!==1||t.startPrimary!==0||t.startSecondary!==0||t.lengthPrimary!==r[0].sizeHeatmapDataVectors.primary||t.lengthSecondary!==r[0].sizeHeatmapDataVectors.secondary)r.forEach(i=>{const s=e(i),n=Math.max(t.startPrimary,i.iFirstVector.primary),a=Math.min(t.startPrimary+t.lengthPrimary-1,i.iFirstVector.primary+i.sizeHeatmapDataVectors.primary-1),o=Math.max(t.startSecondary,i.iFirstVector.secondary),l=Math.min(t.startSecondary+t.lengthSecondary-1,i.iFirstVector.secondary+i.sizeHeatmapDataVectors.secondary-1);for(let u=n;u<=a;u+=1){const d=u-t.startPrimary,f=t.values[d],y=(u-i.iFirstVector.primary)*i.sizeHeatmapDataVectors.secondary;for(let m=o;m<=l;m+=1){const S=m-t.startSecondary,x=m-i.iFirstVector.secondary,v=f[S];s[y+x]=v}}});else{const i=r[0],s=e(i);for(let n=0;n<t.lengthPrimary;n+=1){const a=n*i.sizeHeatmapDataVectors.secondary;s.set(t.values[n],a)}}},oE=(r,t,e)=>{var i,s;const n=(i=r.gl2)===null||i===void 0?void 0:i.ctx;if(n)return r.fO(null,n.RED,!1,!0,{x:t,y:e},!1,n.FLOAT,n.R32F);const a=r.gl;return!((s=r.gl1)===null||s===void 0)&&s.optional.OES_texture_float?r.fO(null,a.LUMINANCE,!1,!0,{x:t,y:e},!1,a.FLOAT):r.fO(null,a.RGBA,!1,!0,{x:t,y:e},!1,a.UNSIGNED_BYTE)},lE=(r,t,e,i)=>{t.forEach((s,n)=>{var a,o;const l=e(n),u=i(n),d=r.gl;d.bindTexture(d.TEXTURE_2D,u),d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);const f=(a=r.gl2)===null||a===void 0?void 0:a.ctx,y=s.dataInvalidationRanges.length,m=s.dataInvalidationRanges.reduce((S,x)=>S+x.tileInvalidationLength.primary,0)/n.sizeHeatmapDataVectors.primary;y===1&&m<1||m<.5&&y<10?s.dataInvalidationRanges.forEach(S=>{var x;const v=S.tileInvalidationOffset.primary*n.sizeHeatmapDataVectors.secondary,b=v+S.tileInvalidationLength.primary*n.sizeHeatmapDataVectors.secondary;if(f)f.texSubImage2D(d.TEXTURE_2D,0,0,S.tileInvalidationOffset.primary,n.sizeHeatmapDataVectors.secondary,S.tileInvalidationLength.primary,f.RED,f.FLOAT,l.subarray(v,b));else if(!((x=r.gl1)===null||x===void 0)&&x.optional.OES_texture_float)d.texSubImage2D(d.TEXTURE_2D,0,0,S.tileInvalidationOffset.primary,n.sizeHeatmapDataVectors.secondary,S.tileInvalidationLength.primary,d.LUMINANCE,d.FLOAT,l.subarray(v,b));else{const E=new Uint8Array(l.buffer).subarray(4*v,4*b);d.texSubImage2D(d.TEXTURE_2D,0,0,S.tileInvalidationOffset.primary,n.sizeHeatmapDataVectors.secondary,S.tileInvalidationLength.primary,d.RGBA,d.UNSIGNED_BYTE,E)}}):f?f.texImage2D(d.TEXTURE_2D,0,f.R32F,n.sizeHeatmapDataVectors.secondary,n.sizeHeatmapDataVectors.primary,0,f.RED,f.FLOAT,l):!((o=r.gl1)===null||o===void 0)&&o.optional.OES_texture_float?d.texImage2D(d.TEXTURE_2D,0,d.LUMINANCE,n.sizeHeatmapDataVectors.secondary,n.sizeHeatmapDataVectors.primary,0,d.LUMINANCE,d.FLOAT,l):d.texImage2D(d.TEXTURE_2D,0,d.RGBA,n.sizeHeatmapDataVectors.secondary,n.sizeHeatmapDataVectors.primary,0,d.RGBA,d.UNSIGNED_BYTE,new Uint8Array(l.buffer)),d.bindTexture(d.TEXTURE_2D,null)})};class z4 extends co{constructor(t,e,i,s,n,a){super(t,e,i,s,n),this.uU=Xt("bilinear"),this.Pi={x:0,y:0},this.$w={x:1,y:1},this.gv=As.lineStyle,this.engine=t;const o=a.dataOrder==="columns"?a.columns:a.rows,l=a.dataOrder==="columns"?a.rows:a.columns;this.Un={...a,primaryDimensionVectorsCount:o,secondaryDimensionVectorsCount:l}}xv(t){return this.uU.S(t),this}Mv(){return this.uU.M()}Sv(t,e){return this.Pi=t,this.$w=e,this}vv(){return{start:this.Pi,step:this.$w,end:{x:this.Pi.x+this.$w.x*this.Un.columns,y:this.Pi.y+this.$w.y*this.Un.rows}}}mv(t){return this.gv=typeof t=="function"?t(this.gv):t,this}bv(){return this.gv}}class D0 extends z4{constructor(t,e,i,s,n,a,o,l){super(t,e,i,s,n,a),this.aE=new lr,this.bG={},this.cU=[],this.dU=!1,this.Qa=!1,this.AN=Cs({fillStyleSolid:()=>ue(this.be)&&this.be,fillStylePaletted:()=>Ti(this.be)&&this.be,wireframeStyleLine:()=>Ss(this.gv)&&this.gv,wireframeStyleFill:()=>{const S=this.gv&&this.gv.getFillStyle();return ue(S)&&S}}),this.fU=F4,this.rN=t,this.nN=e,this.gN=o,this.mN=l,this.RR=t.oN(),this.nN=e;const u=Math.min(this.RR.zR,a.AU!==void 0?a.AU:2048),d={x:Math.min(u,this.Un.primaryDimensionVectorsCount),y:Math.min(u,this.Un.secondaryDimensionVectorsCount)},f=((S,x,v,b)=>{const E=[],T=v(S.primaryDimensionVectorsCount,x.x),V=v(S.secondaryDimensionVectorsCount,x.y);let F;return T.forEach(B=>V.forEach(z=>{const L={iFirstVector:{primary:B.start,secondary:z.start},iFirstUniqueVector:{primary:B.startUnique,secondary:z.startUnique},sizeHeatmapDataVectors:{primary:B.sizeData,secondary:z.sizeData},sizeUniqueHeatmapDataVectors:{primary:B.sizeUniqueData,secondary:z.sizeUniqueData}};E.push(L)})),F=[],E.forEach(B=>{let z=F.find(L=>L.sizeHeatmapData.primary===B.sizeHeatmapDataVectors.primary&&L.sizeHeatmapData.secondary===B.sizeHeatmapDataVectors.secondary);z||(z={sizeHeatmapData:B.sizeHeatmapDataVectors,tiles:[]},F.push(z)),z.tiles.push(B)}),{gridTiles:E,gridTileSizes:F}})(this.Un,d,this.fU),y=f.gridTiles.map(S=>{const x=new Float32Array(S.sizeHeatmapDataVectors.primary*S.sizeHeatmapDataVectors.secondary);return{...S,intensityData:x,hasIntensityData:!1}}),m=f.gridTileSizes.map(S=>({...S,tiles:y.filter(x=>x.sizeHeatmapDataVectors.primary===S.sizeHeatmapData.primary&&x.sizeHeatmapDataVectors.secondary===S.sizeHeatmapData.secondary)}));this.gU={gridTiles:y,gridTileSizes:m},this.Sv(this.Pi,this.$w)}Ps(){const t=this.cU,e=this.be,i=this.ta(),s=this.gv,n=s!==this.mU,a=this.AN.fillStylePaletted(i),o=this.AN.fillStyleSolid(i),l=this.uU.i,u=this.uU.M(),d=this.Qa,f=this.Bo.M();this.yU=this.yU||this.pU();const y=this.yU,m=aE(t,y,d?"intensity":void 0,x=>x.sizeHeatmapDataVectors);m.size>0&&(lE(this.RR,m,x=>x.intensityData,x=>x.intensityDataTexture),this.dU=!0),this.aE.mV(this.dt);const S=this.bG;if((i||l)&&(S.tile=a?{renderMode:"paletted",fillStylePaletted:a,shader:this.RR.oz($["2D"],$.ColorGrid2D({heatmapType:"intensity",interpolation:u==="bilinear"&&"bilinear",flipXY:this.Un.dataOrder==="rows",intensityTextureType:this.RR.sz?"float":"ubyte",littleEndian:this.RR.IS_MACHINE_LITTLE_ENDIAN,lut:a.lut}),$.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:Lt(this.dt),flipXY:this.Un.dataOrder==="rows",normalSource:void 0}))}:o?{renderMode:"solid",fillStyleSolid:o,shader:this.RR.oz($["2D"],$.Color({dataType:"uniform"}),$.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:Lt(this.dt),flipXY:this.Un.dataOrder==="rows",normalSource:void 0}))}:void 0),n){const x=this.AN.wireframeStyleLine(n),v=this.AN.wireframeStyleFill(n);S.wireframe=x&&v?x.getThickness()===-1?{renderMode:"primitive",shader:this.RR.oz($["2D"],$.Color({dataType:"uniform"}),$.VertexLocation({translation:{dataType:"uniform",sizeUnit:"axis"},scaling:{dataType:"uniform"},flipXY:this.Un.dataOrder==="rows",axisWorldTranslation:Lt(this.dt),normalSource:void 0})),fillStyleSolid:v}:{renderMode:"triangulated",shader:this.RR.oz($["2D"],$.Color({dataType:"uniform"}),$.LineInstanced2D({translation:{dataType:"uniform",sizeUnit:"axis"},scaling:{dataType:"uniform"},flipXY:this.Un.dataOrder==="rows",axisWorldTranslation:Lt(this.dt),normalSource:void 0})),geometry:Xl(this.RR,1),solidLine:x,fillStyleSolid:v}:void 0,S.wireframe?this.SU=this.SU||this.vU():this.SU&&(this.RR.yV(this.SU.wireframeCoordinatesBuffer),this.SU=void 0)}if(S.mousePicking=f?this.bG.mousePicking||{shader:this.RR.oz($["2D"],$.MousePicking,$.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:Lt(this.dt),flipXY:this.Un.dataOrder==="rows",normalSource:void 0}))}:void 0,this.bG=S,this.Ja===void 0&&a&&a.lookUpProperty==="value"&&a.lut.percentageValues){let x=bt,v=kt;this.yU.gridTiles.forEach(b=>{for(let E=0;E<b.intensityData.length;E+=1){const T=b.intensityData[E];T<x&&(x=T),T>v&&(v=T)}}),this.Ja={min:x,max:v}}return this.Qa=!1,this.cU.length=0,this.ha(e),this.mU=s,this.uU.i=!1,this}pU(){const t=this.gU.gridTiles.map(n=>{const a=oE(this.RR,n.sizeHeatmapDataVectors.secondary,n.sizeHeatmapDataVectors.primary);return{...n,intensityDataTexture:a,tileData:n}}),e=this.gU.gridTileSizes.map(n=>({...n,tiles:t.filter(a=>a.sizeHeatmapDataVectors.primary===n.sizeHeatmapData.primary&&a.sizeHeatmapDataVectors.secondary===n.sizeHeatmapData.secondary)})),i=this.RR.nV([0,0,1,0,0,1,1,1]),s=this.RR.gl.TRIANGLE_STRIP;return{gridTiles:t,gridTileSizes:e,rectangleLocationsBuffer:i,rectangleLocationsDrawMode:s,rectangleLocationsDrawLength:4}}vU(){const t=this.Un.primaryDimensionVectorsCount+1+this.Un.secondaryDimensionVectorsCount+1,e=new Float32Array(4*t);let i=0;for(let s=0;s<this.Un.primaryDimensionVectorsCount+1;s+=1)e[i+0]=s,e[i+1]=0,e[i+2]=s,e[i+3]=this.Un.secondaryDimensionVectorsCount,i+=4;for(let s=0;s<this.Un.secondaryDimensionVectorsCount+1;s+=1)e[i+0]=0,e[i+1]=s,e[i+2]=this.Un.primaryDimensionVectorsCount,e[i+3]=s,i+=4;return{wireframeCoordinatesBuffer:this.RR.nV(e),wireframeSegmentsLength:t}}Sv(t,e){super.Sv(t,e);const i=this.Un,s=Qt({x:Math.min(this.Pi.x,this.Pi.x+i.columns*this.$w.x),y:Math.min(this.Pi.y,this.Pi.y+i.rows*this.$w.y)},{x:Math.max(this.Pi.x,this.Pi.x+i.columns*this.$w.x),y:Math.max(this.Pi.y,this.Pi.y+i.rows*this.$w.y)}),n=new Map;return this.gU.gridTiles.forEach(a=>{const o=this.Un.dataOrder==="columns"?{x:this.Pi.x+this.$w.x*a.iFirstVector.primary,y:this.Pi.y+this.$w.y*a.iFirstVector.secondary}:{x:this.Pi.x+this.$w.x*a.iFirstVector.secondary,y:this.Pi.y+this.$w.y*a.iFirstVector.primary},l=this.Un.dataOrder==="columns"?{x:this.$w.x*a.sizeHeatmapDataVectors.primary,y:this.$w.y*a.sizeHeatmapDataVectors.secondary}:{x:this.$w.x*a.sizeHeatmapDataVectors.secondary,y:this.$w.y*a.sizeHeatmapDataVectors.primary},u=this.Un.dataOrder==="columns"?{x:this.Pi.x+this.$w.x*a.iFirstUniqueVector.primary,y:this.Pi.y+this.$w.y*a.iFirstUniqueVector.secondary}:{x:this.Pi.x+this.$w.x*a.iFirstUniqueVector.secondary,y:this.Pi.y+this.$w.y*a.iFirstUniqueVector.primary},d=this.Un.dataOrder==="columns"?{x:this.$w.x*a.sizeUniqueHeatmapDataVectors.primary,y:this.$w.y*a.sizeUniqueHeatmapDataVectors.secondary}:{x:this.$w.x*a.sizeUniqueHeatmapDataVectors.secondary,y:this.$w.y*a.sizeUniqueHeatmapDataVectors.primary};n.set(a,{startLocationAxis:o,sizeAxis:l,startRenderLocationAxis:u,renderSizeAxis:d})}),this.bU={boundaries:s,tilesInfo:n},this}zL(t){var e,i;const s=this.yU,n=this.bU,a=t===1?(e=this.bG.mousePicking)===null||e===void 0?void 0:e.shader:(i=this.bG.tile)===null||i===void 0?void 0:i.shader;if(this.bG.tile&&a&&s&&n){const d=a,f=this.bG.tile,y={x:(n.boundaries.max.x-n.boundaries.min.x)*Math.sign(this.$w.x),y:(n.boundaries.max.y-n.boundaries.min.y)*Math.sign(this.$w.y)},m={x:y.x/this.Un.columns,y:y.y/this.Un.rows},S=this.dt.Wi(),x={x:m.x/S.x,y:m.y/S.y};if(f.renderMode==="solid"||t===1)this.RR.jR(d).aV(d,(v,b,E)=>{if(t===1)this.RR.AR(v("uColor"),this.mN);else if(f.renderMode==="solid"){const{fillStyleSolid:T}=f;this.RR.AR(v("uColor"),T.getColor())}return this.RR.dV(v("uIsHighlighted"),t===1||t===2?0:this.zo).AR(v("uHighlightColorOffset"),t===1||t===2?$e:this.Go).dV(v("uRenderEffectMask"),t===2?1:0).uV(v("uScale"),this.aE.fV()).uV(v("uDisp"),this.aE.AV()).lV(s.rectangleLocationsBuffer,void 0,{location:b("aPos"),size:2}).uV(v("uScaling"),[this.$w.x*this.Un.columns,this.$w.y*this.Un.rows]).uV(v("uTranslationAxis"),[this.Pi.x,this.Pi.y]).Ky(s.rectangleLocationsDrawMode,s.rectangleLocationsDrawLength),!0});else if(f.renderMode==="paletted"){const{fillStylePaletted:v}=f,b=this.Ja;this.RR.aV(d,(E,T,V)=>{let F=!1;var B,z;return this.RR.jR(d).uV(E("uScale"),this.aE.fV()).uV(E("uDisp"),this.aE.AV()).LO(V,v.lut,b).lV(s.rectangleLocationsBuffer,void 0,{location:T("aPos"),size:2}).dV(E("uIsHighlighted"),this.zo).AR(E("uHighlightColorOffset"),t===2?$e:this.Go).dV(E("uRenderEffectMask"),t===2?1:0),B=L=>{this.RR.uV(E("uTileDimensions"),[this.Un.dataOrder==="columns"?L.sizeHeatmapData.primary:L.sizeHeatmapData.secondary,this.Un.dataOrder==="columns"?L.sizeHeatmapData.secondary:L.sizeHeatmapData.primary])},z=(L,A)=>{const R=n.tilesInfo.get(L.tileData);if(!R)return;let w;const C=this.RR.$z();if(this.uU.M()==="bilinear"){const k=(this.dt.x.ct(R.startLocationAxis.x)+x.x/2)*C,_=(this.dt.y.ct(R.startLocationAxis.y)+x.y/2)*C;w=[k,_,(this.dt.x.ct(R.startLocationAxis.x+R.sizeAxis.x)-x.x/2)*C-k,(this.dt.y.ct(R.startLocationAxis.y+R.sizeAxis.y)-x.y/2)*C-_]}else{const k=this.dt.x.ct(R.startLocationAxis.x)*C,_=this.dt.y.ct(R.startLocationAxis.y)*C;w=[k,_,this.dt.x.ct(R.startLocationAxis.x+R.sizeAxis.x)*C-k,this.dt.y.ct(R.startLocationAxis.y+R.sizeAxis.y)*C-_]}this.RR.FV(E("uTileBounds"),w).uV(E("uScaling"),[R.renderSizeAxis.x,R.renderSizeAxis.y]).uV(E("uTranslationAxis"),[R.startRenderLocationAxis.x,R.startRenderLocationAxis.y]).cV(E("uTileIntensityValues"),L.intensityDataTexture,1).Ky(s.rectangleLocationsDrawMode,s.rectangleLocationsDrawLength),F=!0},s.gridTileSizes.forEach(L=>{B(L),L.tiles.forEach(A=>{z(A)})}),F})}}const o=this.SU,l=this.bG.wireframe,u=t===1||l==null?void 0:l.shader;if(o&&l&&u&&l.renderMode==="primitive"){const{fillStyleSolid:d}=l;this.RR.jR(u).aV(u,(f,y,m)=>((this.dt instanceof Se||this.dt instanceof js)&&this.RR.uV(f("uScale"),this.aE.fV()).uV(f("uDisp"),this.aE.AV()),this.RR.dV(f("uIsHighlighted"),t===1||t===2?0:this.zo).AR(f("uHighlightColorOffset"),t===1||t===2?$e:this.Go).dV(f("uRenderEffectMask"),t===2?1:0).AR(f("uColor"),d.getColor()).lV(o.wireframeCoordinatesBuffer,void 0,{location:y("aPos"),size:2}).uV(f("uScaling"),[this.$w.x,this.$w.y]).uV(f("uTranslationAxis"),[this.Pi.x,this.Pi.y]).Ky(this.RR.gl.LINES,2*o.wireframeSegmentsLength),!0))}else if(o&&l&&u&&l.renderMode==="triangulated"){const{geometry:d,solidLine:f,fillStyleSolid:y}=l;this.RR.jR(u).aV(u,(m,S,x)=>((this.dt instanceof Se||this.dt instanceof js)&&this.RR.uV(m("uScale"),this.aE.fV()).uV(m("uDisp"),this.aE.AV()),this.RR.dV(m("uIsHighlighted"),t===1||t===2?0:this.zo).AR(m("uHighlightColorOffset"),t===1||t===2?$e:this.Go).dV(m("uRenderEffectMask"),t===2?1:0).AR(m("uColor"),y.getColor()).dV(m("uThicknessPixels"),f.getThickness()).uV(m("uRatioPxClip"),[2/this.us.oi().x,2/this.us.oi().y]).lV(o.wireframeCoordinatesBuffer,1,{location:S("aLocationA"),size:2},{location:S("aLocationB"),size:2}).uV(m("uScaling"),[this.$w.x,this.$w.y]).uV(m("uTranslationAxis"),[this.Pi.x,this.Pi.y]),d.jR(x,!1).Ky(o.wireframeSegmentsLength),!0))}return this}_v(t){return this.cU.push(t),hE(this.gU.gridTiles,t,e=>(e.hasIntensityData=!0,e.intensityData)),this.Ja=void 0,this}Nt(){return this.dU&&(this.gU.gridTiles.forEach(t=>{t.intensityData.fill(0),t.hasIntensityData=!1}),this.Qa=!0,this.dU=!1,this.Ja=void 0),this}dispose(){super.dispose();const t=this.yU;t&&(t.gridTiles.forEach(i=>{this.RR.OR(i.intensityDataTexture)}),t.gridTiles.length=0,t.gridTileSizes.forEach(i=>{}),t.gridTileSizes.length=0,this.RR.yV(t.rectangleLocationsBuffer)),this.yU=void 0;const e=this.SU;return e&&this.RR.yV(e.wireframeCoordinatesBuffer),this.SU=void 0,this.bG={},this}VR(){return this.dispose(),this}lN(t){return this.gN===t&&{}}Hc(t){const e=t,i=this.Un.dataOrder==="columns"?e.x:e.y,s=this.Un.dataOrder==="columns"?e.y:e.x,n=this.Un.dataOrder==="columns"?this.Pi.x:this.Pi.y,a=this.Un.dataOrder==="columns"?this.Pi.y:this.Pi.x;let o=(i-n)/(this.Un.dataOrder==="columns"?this.$w.x:this.$w.y),l=(s-a)/(this.Un.dataOrder==="columns"?this.$w.y:this.$w.x);o=Math.floor(Jt(o,0,this.Un.primaryDimensionVectorsCount-1)),l=Math.floor(Jt(l,0,this.Un.secondaryDimensionVectorsCount-1));const u=this.xU(o,l),d=this.Un.dataOrder==="columns"?{x:this.Pi.x+(o+.5)*this.$w.x,y:this.Pi.y+(l+.5)*this.$w.y}:{x:this.Pi.x+(l+.5)*this.$w.x,y:this.Pi.y+(o+.5)*this.$w.y},f=this.Un.dataOrder==="columns"?o:l,y=this.Un.dataOrder==="columns"?l:o;return{x:d.x,y:d.y,column:f,row:y,cellValue:u}}zx(t){const e=this.bU;if(!e||t.x<e.boundaries.min.x||t.x>e.boundaries.max.x||t.y<e.boundaries.min.y||t.y>e.boundaries.max.y)return;const i=t,s=this.Un.dataOrder==="columns"?i.x:i.y,n=this.Un.dataOrder==="columns"?i.y:i.x,a=this.Un.dataOrder==="columns"?this.Pi.x:this.Pi.y,o=this.Un.dataOrder==="columns"?this.Pi.y:this.Pi.x,l=this.Un.dataOrder==="columns"?this.$w.x:this.$w.y,u=this.Un.dataOrder==="columns"?this.$w.y:this.$w.x,d=Jt((s-a)/l-.5,0,this.Un.primaryDimensionVectorsCount-1),f=Jt((n-o)/u-.5,0,this.Un.secondaryDimensionVectorsCount-1),y=Jt(Math.ceil(d)-1,0,this.Un.primaryDimensionVectorsCount-1),m=Jt(Math.ceil(f)-1,0,this.Un.secondaryDimensionVectorsCount-1),S={point:{x:y,y:m},value:this.xU(y,m)},x={point:{x:y,y:m+1},value:this.xU(y,m+1)},v={point:{x:y+1,y:m},value:this.xU(y+1,m)},b={point:{x:y+1,y:m+1},value:this.xU(y+1,m+1)},E=iR({x:d,y:f},S,x,v,b);if(E===void 0)return;const T=Jt(Math.floor(d+.5),0,this.Un.primaryDimensionVectorsCount-1),V=Jt(Math.floor(f+.5),0,this.Un.secondaryDimensionVectorsCount-1),F=this.Un.dataOrder==="columns"?T:V,B=this.Un.dataOrder==="columns"?V:T,z=t;return{x:z.x,y:z.y,column:F,row:B,cellValue:E}}xU(t,e){for(let i=0;i<this.gU.gridTiles.length;i+=1){const s=this.gU.gridTiles[i];if(t>=s.iFirstVector.primary&&t<=s.iFirstVector.primary+s.sizeHeatmapDataVectors.primary-1&&e>=s.iFirstVector.secondary&&e<=s.iFirstVector.secondary+s.sizeHeatmapDataVectors.secondary-1){const n=t-s.iFirstVector.primary,a=e-s.iFirstVector.secondary,o=n*s.sizeHeatmapDataVectors.secondary+a;return s.intensityData[o]}}return 0}bt(){var t;return((t=this.bU)===null||t===void 0?void 0:t.boundaries.max.x)||0}vt(){var t;return((t=this.bU)===null||t===void 0?void 0:t.boundaries.min.x)||0}Mt(){var t;return((t=this.bU)===null||t===void 0?void 0:t.boundaries.max.y)||0}xt(){var t;return((t=this.bU)===null||t===void 0?void 0:t.boundaries.min.y)||0}vl(){return 0}bl(){return 0}D_(){const t=[];return this.gU.gridTiles.forEach(e=>{if(!e.hasIntensityData)return;const i=new Array(e.sizeUniqueHeatmapDataVectors.primary).fill(0).map(s=>new Array(e.sizeUniqueHeatmapDataVectors.secondary).fill(0));for(let s=0;s<e.sizeUniqueHeatmapDataVectors.primary;s+=1){const n=s*e.sizeHeatmapDataVectors.secondary,a=i[s];for(let o=0;o<e.sizeUniqueHeatmapDataVectors.secondary;o+=1){const l=e.intensityData[n+o];a[o]=l}}t.push({type:"intensity",startPrimary:e.iFirstUniqueVector.primary,startSecondary:e.iFirstUniqueVector.secondary,lengthPrimary:e.sizeUniqueHeatmapDataVectors.primary,lengthSecondary:e.sizeUniqueHeatmapDataVectors.secondary,values:i})}),t}}class _4 extends co{constructor(t,e,i,s,n,a){super(t,e,i,s,n),this.Pi={x:0,y:0},this.$w={x:1,y:1},this.gv=As.lineStyle,this.pu=Xt(void 0),this.uU=Xt("bilinear"),this.engine=t,this.Un=a}Sv(t,e){return this.Pi=t,this.$w=e,this}vv(){return{start:this.Pi,step:this.$w}}mv(t){return this.gv=typeof t=="function"?t(this.gv):t,this}bv(){return this.gv}Su(t){return this.pu.S(t),this}vu(){return this.pu.M()}xv(t){return this.uU.S(t),this}Mv(){return this.uU.M()}}class N4 extends _4{constructor(t,e,i,s,n,a,o,l){super(t,e,i,s,n,l),this.MU=0,this.QM=[],this.rN=t,this.nN=e,this.gN=a,this.mN=o,this.RR=t.oN(),this.nN=e,this.Ya=l.scrollDimension==="columns"?Qt({x:this.Pi.x,y:this.Pi.y},{x:this.Pi.x,y:this.Pi.y+l.resolution*this.$w.y}):Qt({x:this.Pi.x,y:this.Pi.y},{x:this.Pi.x+l.resolution*this.$w.x,y:this.Pi.y}),this._U={dataPerSegment:2048}}Ps(){this.bW||(this.Oo.push({type:"DataPattern",args:{pattern:this.Un.scrollDimension==="columns"?this.$w.x>0?"ProgressiveX":"RegressiveX":this.$w.y>0?"ProgressiveY":"RegressiveY",regularProgressiveStep:!0}}),this.bW=new nE(this.dt,this));const t=this.bW.fW(this.QM,this.pu.M());if(t>0){for(let i=0;i<t;i+=1)this.QM[0].shape.dispose().VR(),this.QM.shift();this.Un.scrollDimension==="columns"?this.Ya.min.x=this.QM.length>0?this.QM[0].boundaries.min.x:bt:this.Ya.min.y=this.QM.length>0?this.QM[0].boundaries.min.y:bt}this.QM.forEach(i=>i.shape.Ps());const e=this.QM.reduce((i,s)=>{var n,a;return i.min=Math.min(i.min,De((n=s.shape.Ja)===null||n===void 0?void 0:n.min,bt)),i.max=Math.max(i.max,De((a=s.shape.Ja)===null||a===void 0?void 0:a.max,kt)),i},{min:bt,max:kt});return this.QM.forEach(i=>{i.shape.Ja=e}),this.pu.i=!1,this}zL(t){return this.QM.forEach(e=>e.shape.zL(t)),this}Fv(t){if(t.length===0)return this;let e=0;const i=this._U.dataPerSegment,s=t.length;do{let n=this.QM[this.QM.length-1],a=n?i-(n.existingDataPointsCount+(n.hasJoint?1:0)):0,o=!1;if(!n||a===0){const y={columns:this.Un.scrollDimension==="columns"?i:this.Un.resolution,rows:this.Un.scrollDimension==="rows"?i:this.Un.resolution,heatmapDataType:this.Un.heatmapDataType,dataOrder:this.Un.scrollDimension};let m=this.Un.scrollDimension==="columns"?{x:this.Pi.x+this.$w.x*this.MU,y:this.Pi.y}:{x:this.Pi.x,y:this.Pi.y+this.$w.y*this.MU};this.QM.length>0&&(m=this.Un.scrollDimension==="columns"?{x:m.x-1*this.$w.x,y:m.y}:{x:m.x,y:m.y-1*this.$w.y},o=!0);const S=new D0(this.rN,this.nN,this.dt,se,[],y,this.gN,this.mN).xv(this.uU.M()).Ce(this.be).mv(this.gv).Sv(m,this.$w);n={shape:S,existingDataPointsCount:0,existingCoordinatesCount:0,allocatedCoordinatesCount:i,dataStartIndex:this.MU,hasJoint:!1,boundaries:{min:{x:S.vt(),y:S.xt()},max:{x:S.bt(),y:S.Mt()}}},this.QM.push(n),a=i-(o?1:0)}const l=s-e,u=Math.min(a,l),d=t.slice(e,e+u),f={type:"intensity",values:d,startPrimary:n.existingDataPointsCount+(n.hasJoint?1:0),startSecondary:0,lengthPrimary:u,lengthSecondary:this.Un.resolution};o&&(f.values.unshift(this.wU),f.lengthPrimary+=1,n.hasJoint=!0),n.shape._v(f),n.existingDataPointsCount+=u,n.existingCoordinatesCount+=u+(o?1:0),this.wU=d[d.length-1],this.MU+=u,e+=u}while(e<s);return this.Ya.max=this.Un.scrollDimension==="columns"?{...this.Ya.max,x:this.Pi.x+this.MU*this.$w.x}:{...this.Ya.max,y:this.Pi.y+this.MU*this.$w.y},this}_v(t,e){const i=t,s=t+e.length-1,n=e[0].length;this.QM.forEach(o=>{const l=o.dataStartIndex,u=o.dataStartIndex+o.existingDataPointsCount-1;if(s<l||i>u)return;const d=i-l,f=Math.min(s,u),y=f-d+1,m=e.slice(d-i,f-i+1),S={type:"intensity",startSecondary:0,lengthSecondary:n,startPrimary:d,lengthPrimary:y,values:m};o.shape._v(S)});const a=this.MU-1;if(s>a){const o=s-a,l=e.slice(-o);if(l.length<o){const u=this.wU||new Array(n).fill(0);for(let d=l.length;d<o;d+=1)l.unshift(u)}this.Fv(l)}return this}O_(){return this.MU}Nt(){return this.QM.forEach(t=>{t.shape.dispose().VR()}),this.QM.length=0,this.Ya=this.Un.scrollDimension==="columns"?Qt({x:this.Pi.x,y:this.Pi.y},{x:this.Pi.x,y:this.Pi.y+this.Un.resolution*this.$w.y}):Qt({x:this.Pi.x,y:this.Pi.y},{x:this.Pi.x+this.Un.resolution*this.$w.x,y:this.Pi.y}),this.MU=0,this.wU=void 0,this}Sv(t,e){return super.Sv(t,e),this.QM.forEach((i,s)=>{const n={x:t.x+i.dataStartIndex*e.x,y:t.y+i.dataStartIndex*e.y};i.shape.Sv(n,e),i.boundaries={min:{x:i.shape.vt(),y:i.shape.xt()},max:{x:i.shape.bt(),y:i.shape.Mt()}}}),this.QM.length>0?this.Ya=Ws(...this.QM.map(i=>i.boundaries)):this.Ya=this.Un.scrollDimension==="columns"?Qt({x:this.Pi.x,y:this.Pi.y},{x:this.Pi.x,y:this.Pi.y+this.Un.resolution*this.$w.y}):Qt({x:this.Pi.x,y:this.Pi.y},{x:this.Pi.x+this.Un.resolution*this.$w.x,y:this.Pi.y}),this}Ce(t){return super.Ce(t),this.QM.forEach(e=>e.shape.Ce(this.be)),this}mv(t){return super.mv(t),this.QM.forEach(e=>e.shape.mv(this.gv)),this}xv(t){return super.xv(t),this.QM.forEach(e=>e.shape.xv(t)),this}dispose(){return super.dispose(),this.QM.forEach(t=>t.shape.dispose()),this}setVisible(t){return super.setVisible(t),this.QM.forEach(e=>e.shape.setVisible(t)),this}VR(){return this.QM.forEach(t=>t.shape.VR()),this}lN(t){return this.gN===t&&{}}Hc(t){const e=gt(t,this.dt,this.engine.dt),i=this.QM.reduce((s,n)=>{const a=n.shape.Hc(t);if(a){const o=Fv(gt(a,this.dt,this.engine.dt),e);if(s===void 0||o<s.distance)return{result:a,distance:o,segment:n}}return s},void 0);if(i&&i.result){const s=this.Un.scrollDimension==="columns"?i.result.column+i.segment.dataStartIndex:i.result.column,n=this.Un.scrollDimension==="rows"?i.result.row+i.segment.dataStartIndex:i.result.row;return this.Un.scrollDimension==="columns"&&s>=this.MU||this.Un.scrollDimension==="rows"&&n>=this.MU?void 0:{x:i.result.x,y:i.result.y,column:s,row:n,cellValue:i.result.cellValue}}}zx(t){const e=gt(t,this.dt,this.engine.dt),i=this.QM.reduce((s,n)=>{const a=n.shape.zx(t);if(a){const o=Fv(gt(a,this.dt,this.engine.dt),e);if(s===void 0||o<s.distance)return{result:a,distance:o,segment:n}}return s},void 0);if(i&&i.result){const s=this.Un.scrollDimension==="columns"?i.result.column+i.segment.dataStartIndex:i.result.column,n=this.Un.scrollDimension==="rows"?i.result.row+i.segment.dataStartIndex:i.result.row;return this.Un.scrollDimension==="columns"&&s>=this.MU||this.Un.scrollDimension==="rows"&&n>=this.MU?void 0:{x:i.result.x,y:i.result.y,column:s,row:n,cellValue:i.result.cellValue}}}bt(){return this.Ya.max.x}vt(){return this.Ya.min.x}Mt(){return this.Ya.max.y}xt(){return this.Ya.min.y}vl(){return 0}bl(){return 0}cs(t){return super.cs(t),this.QM.forEach(e=>e.shape.cs(t)),this}}class B4 extends co{constructor(t,e,i,s,n,a){super(t,e,i,s,n),this.uU=Xt("bilinear"),this.gv=As.lineStyle,this.Un=a}xv(t){return this.uU.S(t),this}Mv(){return this.uU.M()}mv(t){return this.gv=typeof t=="function"?t(this.gv):t,this}bv(){return this.gv}}class L4 extends B4{constructor(t,e,i,s,n,a,o,l){super(t,e,i,s,n,a),this.aE=new lr,this.bG={},this.AN=Cs({fillStyleSolid:()=>ue(this.be)&&this.be,fillStylePaletted:()=>Ti(this.be)&&this.be}),this.rN=t,this.nN=e,this.gN=o,this.mN=l,this.RR=t.oN(),this.nN=e,this.I_=new D0(this.rN,t.CU,t.dt,se,[],{columns:a.sectors,rows:a.annuli,heatmapDataType:"intensity",dataOrder:a.dataOrder==="annuli"?"rows":"columns",AU:this.RR.zR},-1,to).mv(At);const u=2*Math.PI/360,d=new Float32Array(724);let f=0;d[f+0]=0,d[f+1]=0,f+=2;for(let y=0;y<=360;y+=1){const m=y*u,S=Math.cos(m),x=Math.sin(m);d[f+0]=S,d[f+1]=x,f+=2}this.kU={vertexBuffer:this.RR.nV(d),drawMode:this.RR.gl.TRIANGLE_FAN,drawLength:362}}Ps(){const t=this.ta(),e=this.be,i=this.AN.fillStyleSolid(t),s=this.AN.fillStylePaletted(t),n=i||s,a=this.uU.M(),o=this.uU.i,l=this.Bo.M(),u=this.Bo.i;return this.aE.mV(this.dt),this.I_.Ps(),this.I_.yU?((t||o)&&(this.bG.fill=n?{shader:this.RR.oz($["2D"],$.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:Lt(this.dt),normalSource:void 0}),s&&$.PolarHeatmap({interpolation:a==="bilinear"&&"bilinear",intensityTextureType:this.RR.sz?"float":"ubyte",littleEndian:this.RR.IS_MACHINE_LITTLE_ENDIAN,flipXY:this.Un.dataOrder==="sectors",lut:s.lut}),i&&$.PolarHeatmap({dataType:"uniform"})),fillStylePaletted:s,fillStyleSolid:i}:void 0),u&&(this.bG.mousePicking=l?{shader:this.RR.oz($["2D"],$.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:Lt(this.dt),normalSource:void 0}),$.Color({dataType:"uniform"}))}:void 0),this.ha(e),this.uU.i=!1,this.Bo.i=!1,this):this}zL(t){var e;const{vertexBuffer:i,drawLength:s,drawMode:n}=this.kU,a=this.I_.yU;if(!this.bG.fill||!a)return this;const{fillStylePaletted:o,fillStyleSolid:l}=this.bG.fill,u=t===1?(e=this.bG.mousePicking)===null||e===void 0?void 0:e.shader:this.bG.fill.shader;if(!u)return this;const d=this.dt.mx(),f=Math.min(d.start,d.end),y=Math.max(d.start,d.end),m=Math.min(this.Un.amplitudeStart,this.Un.amplitudeStart+(this.Un.annuli-1)*this.Un.amplitudeStep),S=Math.max(this.Un.amplitudeStart,this.Un.amplitudeStart+(this.Un.annuli-1)*this.Un.amplitudeStep);let x;return x=d.end>d.start?Math.min(S,y)-d.start:Math.max(m,f)-d.start,this.RR.jR(u).aV(u,(v,b,E,T)=>{if(this.RR.uV(v("uScale"),this.aE.fV()).uV(v("uDisp"),this.aE.AV()).dV(v("uIsHighlighted"),t===1||t===2?0:this.zo).AR(v("uHighlightColorOffset"),t===1||t===2?$e:this.Go).dV(v("uRenderEffectMask"),t===2?1:0).uV(T("uViewportSize"),[this.rN.oi().x*this.RR.$z(),this.rN.oi().y*this.RR.$z()]).uV(v("uScaling"),[x,x]).uV(v("uTranslationAxis"),[0,0]).lV(i,void 0,{location:b("aPos"),size:2}).dV(T("uAngleOffset"),this.dt.xx()%(2*Math.PI)).dV(T("uAngleDirection"),this.dt.kx()?1:-1).dV(T("uSectors"),this.Un.sectors).dV(T("uAnnuli"),this.Un.annuli),t===1)this.RR.AR(v("uColor"),this.mN);else{if(this.RR.dV(v("uAmplitudeStart"),this.Un.amplitudeStart).dV(v("uAmplitudeStep"),this.Un.amplitudeStep).dV(v("uAmplitudeAxisStart"),this.dt.mx().start).dV(v("uAmplitudeAxisEnd"),this.dt.mx().end),o){const V=this.I_.Ja;this.RR.LO(E,o.lut,V).cV(v("uTileIntensityValues"),a.gridTiles[0].intensityDataTexture,0)}l&&this.RR.AR(v("uColor"),l.getColor())}return this.RR.Ky(n,s),!0}),this}_v(t){return this.I_._v(t),this}Nt(){return this.I_.Nt(),this}dispose(){return super.dispose(),this.I_.dispose(),this.bG={},this.RR.yV(this.kU.vertexBuffer),this}VR(){return this.dispose(),this}Ce(t){return super.Ce(t),this.I_.Ce(this.be),this}lN(t){return this.gN===t&&{}}Hc(t){const e=this.Un.amplitudeStart,i=this.Un.amplitudeStart+(this.Un.annuli-1)*this.Un.amplitudeStep,s=Math.min(e,i),n=Math.max(e,i);if(t.angle<0||t.angle>360||t.amplitude<s||t.amplitude>n)return;let a=Math.round((t.angle-0)/360*this.Un.sectors);a>=this.Un.sectors&&(a=0);const o=Math.round((t.amplitude-e)/(i-e)*(this.Un.annuli-1));return{iAnnulus:o,iSector:a,cellValue:this.xU(o,a),angle:a*(360/this.Un.sectors),amplitude:e+o*(i-e)/(this.Un.annuli-1)}}zx(t){const e=this.Un.amplitudeStart,i=this.Un.amplitudeStart+(this.Un.annuli-1)*this.Un.amplitudeStep,s=Math.min(e,i),n=Math.max(e,i);if(t.angle<0||t.angle>360||t.amplitude<s||t.amplitude>n)return;const a=(t.angle-0)/360*this.Un.sectors,o=(t.amplitude-e)/(i-e)*(this.Un.annuli-1),l=Math.floor(a),u=Math.floor(o),d={point:{x:u,y:l},value:this.xU(u,l)},f={point:{x:u,y:l+1},value:this.xU(u,l+1)},y={point:{x:u+1,y:l},value:this.xU(u+1,l)},m={point:{x:u+1,y:l+1},value:this.xU(u+1,l+1)},S=iR({x:o,y:a},d,f,y,m);return S!==void 0?{iAnnulus:u,iSector:l,cellValue:S,angle:t.angle,amplitude:t.amplitude}:void 0}xU(t,e){const i=this.Un.dataOrder==="annuli"?t:e,s=this.Un.dataOrder==="annuli"?e:t;for(let n=0;n<this.I_.gU.gridTiles.length;n+=1){const a=this.I_.gU.gridTiles[n];if(i>=a.iFirstVector.primary&&i<=a.iFirstVector.primary+a.sizeHeatmapDataVectors.primary-1&&s>=a.iFirstVector.secondary&&s<=a.iFirstVector.secondary+a.sizeHeatmapDataVectors.secondary-1){const o=i-a.iFirstVector.primary,l=s-a.iFirstVector.secondary,u=o*a.sizeHeatmapDataVectors.secondary+l;return a.intensityData[u]}}return 0}bt(){return 0}vt(){return 0}Mt(){return 0}xt(){return 0}vl(){return 0}bl(){return 0}}class I4 extends Hl{constructor(t){super(t);const{vertices:e,drawMode:i,drawSize:s}=this.aG();this.lG=t.nV(e),this.cG=s,this.dG=i}jR(t){return this.RR.lV(this.lG,0,{location:t.attribute("aCurveOrBaseline"),size:1},{location:t.attribute("aSegmentSide"),size:1}),this}Ky(t,e,i){return this.RR.QV(e!==void 0?e:this.dG,i||0,this.cG,t),this}aG(){return{vertices:new Float32Array([1,0,0,0,0,1,0,1,1,1,1,0]),drawMode:this.RR.gl.TRIANGLES,drawSize:6}}kz(){this.RR.yV(this.lG)}}const P4=r=>{let t=r._V.Mz.get(void 0);return t||(t=new I4(r),r._V.Mz.set(void 0,t),t)};class U4 extends g0{constructor(t,e,i,s){super(t,e,i,s,[{type:"DataPattern",args:{pattern:"ProgressiveX"}}]),this.TU=As.fillStyle,this.FU=As.fillStyle,this.IU=Xt(qe.Circle),this.PU=Xt(5),this.DU=Xt(0),this.BU=Xt(void 0),this.XC=!0,this.LU={x:0,y:0}}ud(t){return this.TU=vl(this.TU,t),this}ZC(){return this.TU}RU(){return bl(this.EU,this.TU)}zU(){return bl(this.VU,this.FU)}ld(t){return this.FU=vl(this.FU,t),Ul(this.FU)&&(this.fd(qe.Square),this.pd(1)),this}yd(){return this.FU}fd(t){return this.IU.S(t),so(this.IU.M())&&this.pd(1),this}Ad(){return this.IU.M()}pd(t){return this.PU.S(t),this}QC(){return this.PU.M()}gd(t){return this.DU.S(t),this}md(){return this.DU.M()}JC(t){return this.LU=t,this}KC(){return this.LU}$C(t){return this.BU.S(t),this}qC(){return this.BU.M()}}class O4 extends k0{constructor(t,e){super(t,e),this.HG=!1,this.$G={enabled:!1,totalDataPointsAtTime:0},this.jG=t instanceof Se?{type:"linear",scale:t}:{type:"unknown"},this.YG.Uo("DataPattern",i=>{i.allowDataGrouping===!1&&(this.HG=!0)})}OU(t,e){var i,s;const n=t==null?void 0:t.Cc,a=t==null?void 0:t.kc,o=t==null?void 0:t.lc,l=t==null?void 0:t.ac;if(!t||this.HG||!this.GG||this.jG.type!=="linear"||!n||!a||o===void 0||l===void 0||!e)return{cpStateChanged:!1,cpActive:!1};const u=(i=t.wc())===null||i===void 0?void 0:i.x,d=(s=t.Yc())===null||s===void 0?void 0:s.x;if(o<2||u===void 0||d===void 0)return{cpStateChanged:!1,cpActive:!1};const f=this.calculateAvgStepBetweenDataPoints(d,u,o),y=this.jG.scale,m=Math.abs(this.GG==="x"?y.Wi().x:y.Wi().y),S=m/f,x=Math.floor(.8*S),v=x*f,b=x>=4,E=this.$G.enabled?this.$G.columnWidthAxis/m<1.5:void 0,T=this.$G.enabled&&x>this.$G.dataPointsPerColumn?x/this.$G.dataPointsPerColumn>=2:void 0;let V;return this.$G.enabled===!0?E?T&&(V={enabled:!0,columnWidthAxis:v,dataPointsPerColumn:x,totalDataPointsAtTime:o}):V=b?{enabled:!0,columnWidthAxis:v,dataPointsPerColumn:x,totalDataPointsAtTime:o}:{enabled:!1,totalDataPointsAtTime:o}:b&&(V={enabled:!0,columnWidthAxis:v,dataPointsPerColumn:x,totalDataPointsAtTime:o}),this.$G=V||{...this.$G,totalDataPointsAtTime:o},V&&this.Qm(),{cpStateChanged:!!V,cpActive:this.$G.enabled}}NU(t,e){var i,s,n;const a=t.Cc,o=t.kc,l=t.uc,u=t.lc,d=t.ac;if(this.HG||!this.$G.enabled||!a||!o||e===void 0)return;const f=a.length,y=this.$G.columnWidthAxis,m=this.dt.x.getInnerStart(),S=this.dt.x.getInnerEnd(),x=Up(m,S,a,l,u,d,e,1);if(!x)return;const v=a[x.iFirstSampleDataArray];if(this.GU){if(this.GU.iFirstPackedSample<x.iFirstSample){const A=Math.min(Math.floor((v-this.GU.origin)/y),this.GU.packedColumnsCount);if(A>0)if(this.GU.packedColumnsCount-=A,this.GU.packedColumnsCount>0){this.GU.packedDataX.splice(0,2*A),this.GU.packedDataY.splice(0,2*A),this.GU.packedDataColors&&this.GU.packedDataColors.splice(0,2*A),this.GU.packedDataLookupValues&&this.GU.packedDataLookupValues.splice(0,2*A),this.GU.origin+=A*y;const R=yh(this.GU.origin,Math.max(l-1-f+1,0),l-1,C=>a[Mi(C,l,f)]),w=Mi(R,l,f);this.GU.iFirstPackedSample=a[w]>=this.GU.origin?R:R+1}else this.GU=void 0}if(((i=this.GU)===null||i===void 0?void 0:i.iLastPackedSample)!==void 0&&this.GU.iLastPackedSample>x.iLastSample){const A=a[x.iLastSampleDataArray],R=Math.min(Math.floor((this.GU.origin+this.GU.packedColumnsCount*y-A)/y),this.GU.packedColumnsCount);if(R>0)if(this.GU.packedColumnsCount-=R,this.GU.packedColumnsCount>0){for(let k=0;k<2*R;k+=1)this.GU.packedDataX.pop(),this.GU.packedDataY.pop(),this.GU.packedDataColors&&this.GU.packedDataColors.pop(),this.GU.packedDataLookupValues&&this.GU.packedDataLookupValues.pop();const w=yh(this.GU.origin+this.GU.packedColumnsCount*y,Math.max(l-1-f+1,0),l-1,k=>a[Mi(k,l,f)]),C=Mi(w,l,f);this.GU.iLastPackedSample=a[C]<=this.GU.origin+this.GU.packedColumnsCount*y?w:w-1}else this.GU=void 0}}const b=this.GU||{origin:v,packedColumnsCount:0,packedDataX:[],packedDataY:[],packedDataColors:t.Rc?[]:void 0,packedDataLookupValues:t.Lc?[]:void 0,packedDataSize:t.Ec?[]:void 0,packedDataRotation:t.zc?[]:void 0,iFirstPackedSample:x.iFirstSample,iLastPackedSample:void 0},E=(A,R,w)=>{let C=Math.min(A,A+R*y),k=Math.max(A,A+R*y),_=w;const X=[];let N=kt,U=kt,O=-1,W=bt,P=bt,H=-1,j=0;for(;_<=x.iLastSample&&_>=x.iFirstSample;){const Q=_%f,J=a[Q],ht=o[Q];if(C<=J&&J<=k)j+=1,Number.isNaN(ht)||(ht>U&&(N=J,U=ht,O=_),ht<P&&(W=J,P=ht,H=_)),_+=R;else{if(j>0)N=N===kt?Number.NaN:N,U=U===kt?Number.NaN:U,W=W===bt?Number.NaN:W,P=P===bt?Number.NaN:P,O<H?(X.push({iFirst:O,iSecond:H}),R>0?(b.packedDataX.push(N),b.packedDataY.push(U),b.packedDataX.push(W),b.packedDataY.push(P)):(b.packedDataX.unshift(W),b.packedDataY.unshift(P),b.packedDataX.unshift(N),b.packedDataY.unshift(U))):(X.push({iFirst:H,iSecond:O}),R>0?(b.packedDataX.push(W),b.packedDataY.push(P),b.packedDataX.push(N),b.packedDataY.push(U)):(b.packedDataX.unshift(N),b.packedDataY.unshift(U),b.packedDataX.unshift(W),b.packedDataY.unshift(P)));else{const ot=R>0?b.iLastPackedSample:b.iFirstPackedSample;if(ot===void 0)X.push({iFirst:0,iSecond:0}),R>0?(b.packedDataX.push(Number.NaN),b.packedDataY.push(Number.NaN),b.packedDataX.push(Number.NaN),b.packedDataY.push(Number.NaN)):(b.packedDataX.unshift(Number.NaN),b.packedDataY.unshift(Number.NaN),b.packedDataX.unshift(Number.NaN),b.packedDataY.unshift(Number.NaN));else{const ut=Mi(ot,l,f),dt=a[ut],Et=o[ut],St=(C+k)/2,Vt=St-R*y/6,_t=Et+(Vt-dt)/(J-dt)*(ht-Et),jt=St+R*y/6,ee=Et+(jt-dt)/(J-dt)*(ht-Et);X.push({iFirst:ot,iSecond:ot}),R>0?(b.packedDataX.push(Vt),b.packedDataY.push(_t),b.packedDataX.push(jt),b.packedDataY.push(ee)):(b.packedDataX.unshift(Vt),b.packedDataY.unshift(_t),b.packedDataX.unshift(jt),b.packedDataY.unshift(ee))}}if(b.packedColumnsCount+=1,R>0?b.iLastPackedSample=_-1:(b.iFirstPackedSample=_+1,b.origin=C),C=Math.min(A+X.length*R*y,A+(X.length+1)*R*y),k=Math.max(A+X.length*R*y,A+(X.length+1)*R*y),j=0,N=kt,U=kt,O=-1,W=bt,P=bt,H=-1,C<m||k>S)break}}return X},T=E(b.origin+b.packedColumnsCount*y,1,((s=this.GU)===null||s===void 0?void 0:s.iLastPackedSample)!==void 0?this.GU.iLastPackedSample+1:x.iFirstSample),V=E(b.origin,-1,((n=this.GU)===null||n===void 0?void 0:n.iFirstPackedSample)!==void 0?this.GU.iFirstPackedSample-1:x.iFirstSample),F=t.Rc&&b.packedDataColors?[t.Rc,b.packedDataColors]:void 0,B=t.Lc&&b.packedDataLookupValues?[t.Lc,b.packedDataLookupValues]:void 0,z=t.Ec&&b.packedDataSize?[t.Ec,b.packedDataSize]:void 0,L=t.zc&&b.packedDataRotation?[t.zc,b.packedDataRotation]:void 0;if(F||B||z||L){for(const A of T){const R=Mi(A.iFirst,l,f),w=Mi(A.iSecond,l,f);F&&F[1].push(F[0][R],F[0][w]),B&&B[1].push(B[0][R],B[0][w]),z&&z[1].push(z[0][R],z[0][w]),L&&L[1].push(L[0][R],L[0][w])}for(const A of V){const R=Mi(A.iFirst,l,f),w=Mi(A.iSecond,l,f);F&&F[1].unshift(F[0][w],F[0][R]),B&&B[1].unshift(B[0][w],B[0][R]),z&&z[1].unshift(z[0][w],z[0][R]),L&&L[1].unshift(L[0][w],L[0][R])}}return this.GU=b.packedColumnsCount>0?b:void 0,{x:b.packedDataX,y:b.packedDataY,color:b.packedDataColors,lookup:b.packedDataLookupValues,size:b.packedDataSize,rotation:b.packedDataRotation}}Qm(){this.GU=void 0}tW(t){if(this.GG&&this.jG.type==="linear"){const e=this.GG==="x"?this.jG.scale.x.ig:this.jG.scale.y.ig;if(!e)throw new Error("CP helper has no information about Axis state.");if(e.Je===$r.progressive||e.Je===$r.regressive){const i=Math.abs(this.GG==="x"?this.jG.scale.x.getInnerInterval():this.jG.scale.y.getInnerInterval());if(this.$G.enabled)return 2*i/this.$G.columnWidthAxis;const s=t.length,n=t[0],a=t[s-1];return i/this.calculateAvgStepBetweenDataPoints(this.GG==="x"?n.x:n.y,this.GG==="x"?a.x:a.y,s)}}}iW(t,e,i){if(!this.GG)return e;const s=i.length;let n=dc(i,t.min,this.GG,this.WG,0,s-1);n===void 0&&(n=this.WG?s-1:0);let a=dc(i,t.max,this.GG,this.WG,0,s-1);return a===void 0&&(a=this.WG?0:s-1),1+Math.abs(a-n)}sW(){}}class G4 extends U4{constructor(t,e,i,s,n,a){super(t,e,i,s),this.aE=new lr,this.SW=new O4(this.dt,this),this.AN=Cs({lineStyleSolid:()=>Ss(this.lu)&&this.lu,lineStyleDashed:()=>m0(this.lu)&&this.lu,strokeFillSolid:()=>{const o=this.lu.getFillStyle();return ue(o)&&o},strokeFillLinearGradient:()=>{const o=this.lu.getFillStyle();return li(o)&&o},strokeFillRadialGradient:()=>{const o=this.lu.getFillStyle();return oi(o)&&o},strokeFillIndividual:()=>{const o=this.lu.getFillStyle();return ws(o)&&o},strokeFillPaletted:()=>{const o=this.lu.getFillStyle();return Ti(o)&&o},areaFillSolid:()=>ue(this.TU)&&this.TU,areaFillLinearGradient:()=>li(this.TU)&&this.TU,areaFillRadialGradient:()=>oi(this.TU)&&this.TU,areaFillIndividual:()=>ws(this.TU)&&this.TU,areaFillPaletted:()=>Ti(this.TU)&&this.TU,markerFillSolid:()=>ue(this.FU)&&this.FU,markerFillLinearGradient:()=>li(this.FU)&&this.FU,markerFillRadialGradient:()=>oi(this.FU)&&this.FU,markerFillPaletted:()=>Ti(this.FU)&&this.FU,markerFillIndividual:()=>ws(this.FU)&&this.FU,markerFillImage:()=>Ul(this.FU)&&this.FU,markerShapeIcon:()=>{const o=this.IU.M();return so(o)&&o}}),this.od=Xt(void 0),this.WU=[],this.Qa=!1,this.UU=[],this.YU=void 0,this.rU=(o,l,u)=>{var d;const f=(d=this.HU)===null||d===void 0?void 0:d.shapeIcon;let y=o,m=l;return f&&(y=f.oi().x,m=f.oi().y),C0(o,l,y*this.PU.M(),m*this.PU.M(),u)},this.nN=e,this.bG={type:"none"},this.RR=t.oN(),this.rN=t,this.SG=this.RR.eO,this.gN=n,this.mN=a}ad(t){return this.od.S(Dm(t,this.od.M(),()=>[t.$c((e,i)=>{this.WU.push({min:e,max:i}),t.Gc()===void 0&&this.$U&&this.UU.push({min:e,max:i})}),t.Xc(()=>{this.Qa=!0,this.$U=void 0,this.YU=void 0,this.SW.Qm()})])),this.YU=void 0,this}Ps(){var t,e,i,s,n,a,o,l,u,d,f,y,m,S,x;const v=(t=this.od.M())===null||t===void 0?void 0:t.Wt,b=this.od.i,E=v==null?void 0:v.Cc,T=v==null?void 0:v.kc;if(!v||!E||!T)return this;const V=v.Lc,F=v.Rc,B=v.Ec,z=v.zc,L=v.uc,A=v.lc,R=v.ac,w=this.lu,C=this.TU,k=b||this.ra()||this.RU()||this.zU(),_=this.AN.lineStyleSolid(k),X=this.AN.lineStyleDashed(k),N=_||X,U=N&&N.getThickness(),O=this.AN.strokeFillSolid(k),W=this.AN.strokeFillLinearGradient(k),P=this.AN.strokeFillRadialGradient(k),H=this.AN.strokeFillIndividual(k),j=this.AN.strokeFillPaletted(k),Q=O||W||P||H||j,J=this.AN.areaFillSolid(k),ht=this.AN.areaFillLinearGradient(k),ot=this.AN.areaFillRadialGradient(k),ut=this.AN.areaFillIndividual(k),dt=this.AN.areaFillPaletted(k),Et=J||ht||ot||ut||dt,St=this.AN.markerFillSolid(k),Vt=this.AN.markerFillLinearGradient(k),_t=this.AN.markerFillRadialGradient(k),jt=this.AN.markerFillPaletted(k),ee=this.AN.markerFillIndividual(k),Dt=this.AN.markerFillImage(k),Ct=St||Vt||_t||jt||ee||Dt,Pi=this.IU.M(),Ge=this.IU.i,Re=this.AN.markerShapeIcon(Ge),Zr=this.PU.M(),Ze=this.PU.i,ni=this.BU.i,ur=this.WU.length>0||ni,ce=this.Qa,Qe=ce?[v.Wc()]:(Rt=>{const ae=[];for(const Tt of Rt){let Ot=!1;for(const he of ae)if(Tt.min>=he.min&&Tt.min<=he.max||Tt.max>=he.min&&Tt.max<=he.max){he.min=Math.min(he.min,Tt.min),he.max=Math.min(he.max,Tt.max),Ot=!0;break}Ot||ae.push(Tt)}return ae})(this.WU),Ai=this.dt.x.Yt,fe=this.dt.x.getInnerStart(),Le=this.dt.x.getInnerEnd(),yi=v.Gc(),Ye=!!X,Ie=this.Bo.M(),Va=this.Bo.i,{cpStateChanged:Pe,cpActive:He}=this.SW.OU(v,this.XC);if(yi&&He&&(Pe||ce||ur||Ai||k)){const Rt=this.SW.NU(v,yi);if(Rt){const ae=!Pe&&!ce&&!k;this.XU=fm(this.RR,[Rt.x,Rt.y],Rt.color,Rt.lookup,Rt.size,Rt.rotation,Ye,this.XU,ae,yi,1e3,this.dt._i(),Ot=>Ph(Ot,this.dt._i())),this.jU={min:bt,max:kt};const Tt=Rt.y.length;for(let Ot=0;Ot<Tt;Ot+=1){const he=Rt.y[Ot];Number.isNaN(he)||(this.jU.min=Math.min(this.jU.min,he),this.jU.max=Math.max(this.jU.max,he))}(e=this.dt.y.ig)===null||e===void 0||e.uh()}}if(yi&&!He&&(Pe||ce||ur||Ai||ni||k)){const Rt=Up(fe,Le,E,L,A,R,yi,1);if(!this.ZU||(Rt==null?void 0:Rt.iFirstSample)!==this.ZU.iFirstSample||Rt.iLastSample!==this.ZU.iLastSample||ce){this.jU={min:bt,max:kt};for(const ae of(Rt==null?void 0:Rt.dataRanges)||[])for(let Tt=ae.offset;Tt<ae.offset+ae.count;Tt+=1){const Ot=T[Tt];Number.isNaN(Ot)||(this.jU.min=Math.min(this.jU.min,Ot),this.jU.max=Math.max(this.jU.max,Ot))}(i=this.dt.y.ig)===null||i===void 0||i.uh()}if(this.ZU=Rt,Rt===void 0)this.RR.yV((s=this.XU)===null||s===void 0?void 0:s.bufferX),this.RR.yV((n=this.XU)===null||n===void 0?void 0:n.bufferY),this.XU=void 0,this.RR.yV((a=this.QU)===null||a===void 0?void 0:a.bufferX),this.RR.yV((o=this.QU)===null||o===void 0?void 0:o.bufferY),this.QU=void 0,this.JU=Rt;else if(Pe||ce||!this.JU||Rt.iFirstSample<this.JU.iFirstSample||Rt.iLastSample>this.JU.iLastSample||k){let ae,Tt,Ot,he,de,Ee;if(Rt.dataRanges.length===1){const Pt=Rt.dataRanges[0];ae=E.subarray(Pt.offset,Pt.offset+Pt.count),Tt=T.subarray(Pt.offset,Pt.offset+Pt.count),Ot=F?F.subarray(Pt.offset,Pt.offset+Pt.count):void 0,he=V?V.subarray(Pt.offset,Pt.offset+Pt.count):void 0,de=B?B.subarray(Pt.offset,Pt.offset+Pt.count):void 0,Ee=z?z.subarray(Pt.offset,Pt.offset+Pt.count):void 0}else{const Pt=Rt.dataRanges[0],It=Rt.dataRanges[1],Zt=Pt.count+It.count;ae=new Float32Array(Zt),ae.set(E.subarray(Pt.offset),0),ae.set(E.subarray(It.offset,It.offset+It.count),Pt.count),Tt=new Float32Array(Zt),Tt.set(T.subarray(Pt.offset),0),Tt.set(T.subarray(It.offset,It.offset+It.count),Pt.count),F&&(Ot=new Uint32Array(Zt),Ot.set(F.subarray(Pt.offset),0),Ot.set(F.subarray(It.offset,It.offset+It.count),Pt.count)),V&&(he=new Float32Array(Zt),he.set(V.subarray(Pt.offset),0),he.set(V.subarray(It.offset,It.offset+It.count),Pt.count)),B&&(de=new Float32Array(Zt),de.set(B.subarray(Pt.offset),0),de.set(B.subarray(It.offset,It.offset+It.count),Pt.count)),z&&(Ee=new Float32Array(Zt),Ee.set(z.subarray(Pt.offset),0),Ee.set(z.subarray(It.offset,It.offset+It.count),Pt.count))}const Vn=!Pe&&!ce&&!k;this.QU=fm(this.RR,[ae,Tt],Ot,he,de,Ee,Ye,this.QU,Vn,yi,1e3,this.dt._i(),Pt=>Ph(Pt,this.dt._i()));let ii=ae,Te=Tt,zn=Ot,mi=he;const si=this.BU.M();if(si){const Pt=si.type==="spline"?((It,Zt)=>{const{xValues:ks,yValues:ri,lookupValues:ge,colors:$i}=It;if(ks.length<=2)return{xValues:Array.from(ks),yValues:Array.from(ri),lookupValues:ge?Array.from(ge):void 0,colors:$i?Array.from($i):void 0};const Ue=((vt,Ht)=>{const zi=vt.length-1,_i=Array(zi);if(zi>1){let Ni=Y(0,0),Ji=Y(0,0),Fr=Y(0,0),Vr=Hs(pe({x:vt[1],y:Ht[1]},{x:vt[0],y:Ht[0]}));const za=3;let Qr=0,Kr=0;for(let Ae=0;Ae<zi;Ae+=1){const Ds=Array(4);if(Ds[0]={x:vt[Ae],y:Ht[Ae]},Ds[1]={x:vt[Ae],y:Ht[Ae]},Ds[3]={x:vt[Ae+1],y:Ht[Ae+1]},Ds[2]={x:vt[Ae+1],y:Ht[Ae+1]},Fr=Vr,Ni=Ji,Ae+1<zi?(Vr=vt[Ae+2]===vt[Ae+1]&&Ht[Ae+2]===Ht[Ae+1]?Y(0,0):Hs(pe({x:vt[Ae+2],y:Ht[Ae+2]},{x:vt[Ae+1],y:Ht[Ae+1]})),Ji=Hs(zt(Fr,Vr))):Ji=Y(0,0),Ht[Ae+1]===Ht[Ae])Qr=0,Kr=0;else{const sa=vt[Ae+1]-vt[Ae];Qr=Math.abs(Ni.x)>1e-5?Math.abs(sa/(za*Ni.x)):1,Kr=Math.abs(Ji.x)>1e-5?Math.abs(sa/(za*Ji.x)):1}Ds[1]=zt(Yt(Ni,Qr),Ds[1]),Ds[2]=pe(Ds[2],Yt(Ji,Kr)),_i[Ae]=Ds}}return _i.length>0?_i:[]})(ks,ri),Fe=Ue.length,Ui=[],Vi=[],ss=[],Oi=[];for(let vt=0;vt<Fe;vt+=1){const Ht=Ue[vt];for(let $s=0;$s<Zt;$s+=1){const zi=$s/(Zt-1),_i=zi*zi,Ni=_i*zi,Ji=1-zi,Fr=Ji*Ji,Vr=Fr*Ji;Ui.push(Vr*Ht[0].x+3*zi*Fr*Ht[1].x+3*_i*Ji*Ht[2].x+Ni*Ht[3].x),Vi.push(Vr*Ht[0].y+3*zi*Fr*Ht[1].y+3*_i*Ji*Ht[2].y+Ni*Ht[3].y)}}if(ge)for(let vt=0;vt<Ui.length;vt+=1){const Ht=ge[Math.round(vt/Zt)];Oi[vt]=Ht}if($i)for(let vt=0;vt<Ui.length;vt+=1){const Ht=$i[Math.round(vt/Zt)];ss[vt]=Ht}return{xValues:Ui,yValues:Vi,lookupValues:ge?Oi:void 0,colors:$i?ss:void 0}})({xValues:ae,yValues:Tt,lookupValues:he,colors:Ot},si.resolution||20):si.type==="step"?((It,Zt)=>{const{xValues:ks,yValues:ri,lookupValues:ge,colors:$i}=It,Ue=[],Fe=[],Ui=[],Vi=[],ss=ks.length,Oi=Zt;if(ss>0){let vt=0,Ht=ks[0],$s=ri[0];Ue[vt]=Ht,Fe[vt]=$s,vt+=1;for(let zi=1;zi<ss;zi+=1){const _i=ks[zi],Ni=ri[zi];if(Oi<=0)Ue[vt]=Ht,Fe[vt]=Ni,vt+=1;else{const Ji=Ht*(1-Oi)+_i*Oi;Ue[vt]=Ji,Fe[vt]=$s,vt+=1,Ue[vt]=Ji,Fe[vt]=Ni,vt+=1}Ue[vt]=_i,Fe[vt]=Ni,vt+=1,Ht=_i,$s=Ni}}if(ge){if(Oi===Sa.before){Vi[0]=ge[0];for(let vt=1;vt<ss;vt+=1)Vi[2*vt-1]=ge[vt],Vi[2*vt]=ge[vt]}else if(Oi===Sa.middle||Oi===Sa.after){Vi[0]=ge[0],Vi[1]=ge[0];for(let vt=1;vt<ss;vt+=1)Vi[3*vt-1]=ge[vt],Vi[3*vt]=ge[vt],Vi[3*vt+1]=ge[vt]}}if($i){if(Oi===Sa.before){Ui[0]=$i[0];for(let vt=1;vt<ss;vt+=1)Ui[2*vt-1]=$i[vt],Ui[2*vt]=$i[vt]}else if(Oi===Sa.middle||Oi===Sa.after){Ui[0]=$i[0],Ui[1]=$i[0];for(let vt=1;vt<ss;vt+=1)Ui[3*vt-1]=$i[vt],Ui[3*vt]=$i[vt],Ui[3*vt+1]=$i[vt]}}return{xValues:Ue,yValues:Fe,lookupValues:ge?Vi:void 0,colors:$i?Ui:void 0}})({xValues:ae,yValues:Tt,lookupValues:he,colors:Ot},si.step==="before"?0:si.step==="after"?1:.5):void 0;ii=Pt?Pt.xValues:ii,Te=Pt?Pt.yValues:Te,zn=Pt!=null&&Pt.colors?Pt.colors:zn,mi=Pt!=null&&Pt.lookupValues?Pt.lookupValues:mi}this.XU=ii===ae&&Te===Tt?this.QU:fm(this.RR,[ii,Te],zn,mi,void 0,void 0,Ye,((l=this.XU)===null||l===void 0?void 0:l.bufferX)===this.QU.bufferX?void 0:this.XU,!(!Vn||ni||si),yi,1e3,this.dt._i(),Pt=>Ph(Pt,this.dt._i())),this.JU=Rt}}if(!yi&&(ce||ur||k)){if(!this.XU||this.XU.bufferSize<v.lc||Ye){const Rt=v.Vc!==void 0?v.Vc:v.lc;let ae,Tt=0,Ot=0;if(Ye){const he=Hm(E,T,E[0],T[0],0,0);ae=this.RR.EV(2*Rt,he[0],(u=this.XU)===null||u===void 0?void 0:u.bufferLengthSoFar,Float32Array),Tt=he[1],Ot=he[2]}this.XU={bufferX:this.RR.EV(Rt*(this.dt._i()?2:1),Ph(E,this.dt._i()),(d=this.XU)===null||d===void 0?void 0:d.bufferX),bufferY:this.RR.EV(Rt*(this.dt._i()?2:1),Ph(T,this.dt._i()),(f=this.XU)===null||f===void 0?void 0:f.bufferY),bufferColors:F?this.RR.EV(Rt,F,(y=this.XU)===null||y===void 0?void 0:y.bufferColors,Uint32Array):void 0,bufferLookupValues:V?this.RR.EV(Rt,V,(m=this.XU)===null||m===void 0?void 0:m.bufferLookupValues,Float32Array):void 0,bufferSizes:B?this.RR.EV(Rt,B,(S=this.XU)===null||S===void 0?void 0:S.bufferSizes,Float32Array):void 0,bufferRotations:z?this.RR.EV(Rt,z,(x=this.XU)===null||x===void 0?void 0:x.bufferRotations,Float32Array):void 0,bufferLengthSoFar:ae,lengthSoFarX:Tt,lengthSoFarY:Ot,bufferSize:Rt,valueCount:v.lc}}else{const Rt=this.XU.bufferX,ae=this.XU.bufferY;Qe.forEach(Tt=>{var Ot,he,de,Ee;const Vn=E.subarray(Tt.min,Tt.max+1),ii=T.subarray(Tt.min,Tt.max+1);if(this.RR.zV(Rt,Tt.min*(this.dt._i()?2:1),Ph(Vn,this.dt._i())),this.RR.zV(ae,Tt.min*(this.dt._i()?2:1),Ph(ii,this.dt._i())),F&&((Ot=this.XU)===null||Ot===void 0?void 0:Ot.bufferColors)){const Te=F.subarray(Tt.min,Tt.max+1);this.RR.zV(this.XU.bufferColors,Tt.min,Te,Uint32Array)}if(V&&(!((he=this.XU)===null||he===void 0)&&he.bufferLookupValues)){const Te=V.subarray(Tt.min,Tt.max+1);this.RR.zV(this.XU.bufferLookupValues,Tt.min,Te,Float32Array)}if(z&&(!((de=this.XU)===null||de===void 0)&&de.bufferRotations)){const Te=z.subarray(Tt.min,Tt.max+1);this.RR.zV(this.XU.bufferRotations,Tt.min,Te,Float32Array)}if(B&&(!((Ee=this.XU)===null||Ee===void 0)&&Ee.bufferSizes)){const Te=B.subarray(Tt.min,Tt.max+1);this.RR.zV(this.XU.bufferSizes,Tt.min,Te,Float32Array)}}),this.XU.valueCount=v.lc}this.QU=this.XU}if(this.aE.mV(this.dt),k||Ze||Ge||Va){if(Q&&N&&U!==!1){const Rt=U===-1?"primitive":"triangulated",ae=j?["lookup",j.lookUpProperty,j.lut]:H?"attribute":W?["gradient",W]:P?["gradient",P]:"uniform";this.bG=Rt==="primitive"?{type:Rt,shader:this.RR.oz($["2D"],$.Color({dataType:ae}),$.VertexLocation({axisWorldTranslation:Lt(this.dt),normalSource:void 0,splitPosAttribute:!0}),X&&$.StippleTexture),lineStyleSolid:_,lineStyleDashed:X,fillStyleSolid:O,fillStyleLinearGradient:W,fillStyleRadialGradient:P,fillStyleIndividual:H,fillStylePaletted:j,mousePickingShader:Ie&&this.RR.oz($["2D"],$.VertexLocation({axisWorldTranslation:Lt(this.dt),normalSource:void 0,splitPosAttribute:!0}),X&&$.StippleTexture,$.MousePicking)}:Rt==="triangulated"?{type:Rt,shader:this.RR.oz($["2D"],$.Color({dataType:ae}),$.LineInstanced2D({axisWorldTranslation:Lt(this.dt),normalSource:void 0,splitPosAttribute:!0}),this.SG?$.AliasedEdge:void 0,X&&$.StippleTextureInstanced),geometry:Xl(this.RR,U),thickness:U,lineStyleSolid:_,lineStyleDashed:X,fillStyleSolid:O,fillStyleLinearGradient:W,fillStyleRadialGradient:P,fillStyleIndividual:H,fillStylePaletted:j,mousePickingShader:Ie&&this.RR.oz($["2D"],$.LineInstanced2D({axisWorldTranslation:Lt(this.dt),normalSource:void 0,splitPosAttribute:!0}),X&&$.StippleTextureInstanced,$.MousePicking)}:{type:"none"}}else this.bG={type:"none"};if(this.KU=Et?{shader:this.RR.oz($["2D"],dt&&$.Color({dataType:["lookup",dt.lookUpProperty,dt.lut]}),ut&&$.Color({dataType:"attribute"}),J&&$.Color({dataType:"uniform"}),ht&&$.Color({dataType:["gradient",ht]}),ot&&$.Color({dataType:["gradient",ot]}),$.Area2D({axisWorldTranslation:Lt(this.dt),normalSource:void 0,splitPosAttribute:!0})),geometry:P4(this.RR),fillStyleSolid:J,fillStyleLinearGradient:ht,fillStyleRadialGradient:ot,fillStyleIndividual:ut,fillStylePaletted:dt,mousePickingShader:Ie&&this.RR.oz($["2D"],$.Area2D({axisWorldTranslation:Lt(this.dt),normalSource:void 0,splitPosAttribute:!0}),$.MousePicking)}:void 0,Ct){const Rt=!(!Dt&&!Re),ae=Zr>1||Rt,Tt=B?"attribute":"uniform",Ot=!ae&&$.PointSize("uniform"),he=$.VertexLocation({offset:ae&&!Rt?{dataType:Tt,sizeUnit:"px",symmetric:!0,rotation:{dataType:z?"attribute-deg":"uniform"},useAlignment:!0}:ae&&Rt?{dataType:Tt,sizeUnit:"scale",rotation:{dataType:z?"attribute-deg":"uniform"},useAlignment:!0}:void 0,axisWorldTranslation:Lt(this.dt),normalSource:void 0,splitPosAttribute:!0});this.HU={shader:this.RR.oz($["2D"],Ot,he,St&&$.Color({dataType:"uniform",overrideOpacity:!0,maskTexture:!!Re}),Vt&&$.Color({dataType:["gradient",Vt],overrideOpacity:!0,maskTexture:!!Re}),_t&&$.Color({dataType:["gradient",_t],overrideOpacity:!0,maskTexture:!!Re}),jt&&$.Color({dataType:["lookup",jt.getLookUpProperty(),jt.getPalette()],overrideOpacity:!0,maskTexture:!!Re}),ee&&$.Color({dataType:"attribute",overrideOpacity:!0,maskTexture:!!Re}),Dt&&$.Color({dataType:["image",Dt],overrideOpacity:!0,maskTexture:!!Re})),geometry:iS(Pi,this.RR,Tt==="uniform"?Zr:25),fillStyleSolid:St,fillStyleLinearGradient:Vt,fillStyleRadialGradient:_t,fillStylePaletted:jt,fillStyleIndividual:ee,fillStyleImage:Dt,mousePickingShader:Ie&&this.RR.oz($["2D"],Ot,he,$.MousePicking),shapeIcon:Re,pointSizeAsScale:Rt,instancedRendering:ae}}else this.HU=void 0}const Ut=fh({min:{x:this.vt(),y:this.dt.y.getInnerStart()},max:{x:this.bt(),y:this.Mt()}},{x:this.vl(),y:this.bl()},this.dt),re=fh({min:{x:this.vt(),y:this.xt()},max:{x:this.bt(),y:this.Mt()}},{x:this.vl(),y:this.bl()},this.dt);if(this.qU=this.RR.NO(W,this,re),this.tY=this.RR.GO(P,this,re),this.iY=this.RR.NO(ht,this,Ut),this.sY=this.RR.GO(ot,this,Ut),this.eY=this.RR.NO(Vt,this,re),this.hY=this.RR.GO(_t,this,re),(this.YU===void 0||ur)&&V&&(dm(j)||dm(dt)||dm(jt))){const Rt=this.YU?Qe:[v.Wc()];let ae=this.YU?this.YU.max:kt,Tt=this.YU?this.YU.min:bt;const Ot=V;Rt.forEach(he=>{for(let de=he.min;de<=he.max;de+=1){const Ee=Ot[de];Tt=Ee<Tt?Ee:Tt,ae=Ee>ae?Ee:ae}}),this.YU={min:Tt,max:ae}}return this.MG=X?this.RR.IO(X.getPattern()):void 0,this.hU=this.RR.RO(this,this.hU,Dt,Re,Ze,this.rU),this.fu(w),this.EU=C,this.VU=this.FU,this.IU.i=!1,this.PU.i=!1,this.WU.length=0,this.Qa=!1,this.BU.i=!1,this.od.i=!1,this.Bo.i=!1,this}zL(t){var e,i,s,n,a,o,l,u,d,f,y,m,S,x,v,b,E;const T=this.RR.gl,V=(e=this.XU)===null||e===void 0?void 0:e.bufferX,F=(i=this.XU)===null||i===void 0?void 0:i.bufferY,B=(s=this.XU)===null||s===void 0?void 0:s.bufferColors,z=(n=this.XU)===null||n===void 0?void 0:n.bufferLookupValues,L=(a=this.XU)===null||a===void 0?void 0:a.valueCount,A=(o=this.QU)===null||o===void 0?void 0:o.valueCount,R=(l=this.od.M())===null||l===void 0?void 0:l.Wt,w=R==null?void 0:R.Gc();if(!V||!F||!R)return this;const C=(J,ht,ot)=>{if(Wu(this.RR,J,this.dt._i(),V,"aLocation","X",1,!1,T.FLOAT,Float32Array.BYTES_PER_ELEMENT),Wu(this.RR,J,this.dt._i(),F,"aLocation","Y",1,!1,T.FLOAT,Float32Array.BYTES_PER_ELEMENT),ht&&t!==1){if(!B)return!1;Wu(this.RR,J,!1,B,"aColor","",4,!0,T.UNSIGNED_BYTE,1)}if(ot&&ot.lookUpProperty==="value"&&t!==1){if(!z)return!1;Wu(this.RR,J,!1,z,"aLookupValue","",1,!1,T.FLOAT,Float32Array.BYTES_PER_ELEMENT)}return!0},k=t===1?(u=this.KU)===null||u===void 0?void 0:u.mousePickingShader:(d=this.KU)===null||d===void 0?void 0:d.shader;if(this.KU&&k&&L!==void 0&&L>0&&w){const J=this.KU;this.RR.jR(k).aV(k,(ht,ot,ut,dt)=>!!this.RR.zO(ut,t,this,{uniforms:this.aE,mousePickingColor:this.mN,fillStyleSolid:J.fillStyleSolid,fillStyleLinearGradient:J.fillStyleLinearGradient,fillStyleRadialGradient:J.fillStyleRadialGradient,fillStylePaletted:J.fillStylePaletted,linearGradientInfo:this.iY,radialGradientInfo:this.sY,lookupValueRange:J.fillStylePaletted?tr(J.fillStylePaletted,this,this.YU):void 0,lookupValueBuffer:null})&&!!C(ut,J.fillStyleIndividual,J.fillStylePaletted)&&(J==null||J.geometry.jR(ut).Ky(L-1),!0))}const _=this.bG.type==="none"?void 0:t===1?this.bG.mousePickingShader:this.bG.shader;if(this.bG.type!=="none"&&_&&L!==void 0&&L>0){const J=this.bG;this.RR.jR(_).aV(_,(ht,ot,ut,dt)=>{var Et,St;if(!this.RR.zO(ut,t,this,{uniforms:this.aE,mousePickingColor:this.mN,fillStyleSolid:J.fillStyleSolid,fillStylePaletted:J.fillStylePaletted,fillStyleLinearGradient:J.fillStyleLinearGradient,fillStyleRadialGradient:J.fillStyleRadialGradient,fillStyleIndividual:J.fillStyleIndividual,linearGradientInfo:this.qU,radialGradientInfo:this.tY,lookupValueRange:J.fillStylePaletted?tr(J.fillStylePaletted,this,this.YU):void 0,lookupValueBuffer:J.type==="primitive"?z:null,colorBuffer:J.type==="primitive"?B:null,coordsX:J.type==="primitive"?V:void 0,coordsY:J.type==="primitive"?F:void 0,coordsHighPrecision:this.dt._i()}))return!1;if(J.lineStyleDashed){if(!this.MG)return!1;this.RR.uV(ht("uStippleCount"),[this.us.oi().x/this.MG.BO,this.us.oi().y/this.MG.BO]).dV(dt("uStippleTextureWidthLimiter"),this.MG.DO/this.MG.BO).dV(ht("uStippleScale"),J.lineStyleDashed.getPatternScale()).cV(ht("uStippleTexture"),this.MG.PO,1)}if(J.type==="primitive"){if(J.lineStyleDashed){if(!(!((Et=this.XU)===null||Et===void 0)&&Et.bufferLengthSoFar))return!1;this.RR.GV(ot("aLengthSoFar"),this.XU.bufferLengthSoFar)}ll.yG(this.rN,L)}else{if(!C(ut,J.fillStyleIndividual,J.fillStylePaletted))return!1;if(J.lineStyleDashed){if(!(!((St=this.XU)===null||St===void 0)&&St.bufferLengthSoFar))return!1;Wu(this.RR,ut,!1,this.XU.bufferLengthSoFar,"aLengthSoFar","",2,!1,T.FLOAT,Float32Array.BYTES_PER_ELEMENT)}mn.zL(this.rN,J.geometry,ut,this.SG&&t!==1,t===1,J.thickness,L-1)}return!0})}const X=(f=this.QU)===null||f===void 0?void 0:f.bufferX,N=(y=this.QU)===null||y===void 0?void 0:y.bufferY,U=(m=this.QU)===null||m===void 0?void 0:m.bufferColors,O=(S=this.QU)===null||S===void 0?void 0:S.bufferLookupValues,W=(x=this.QU)===null||x===void 0?void 0:x.bufferSizes,P=(v=this.QU)===null||v===void 0?void 0:v.bufferRotations,H=t===1?(b=this.HU)===null||b===void 0?void 0:b.mousePickingShader:(E=this.HU)===null||E===void 0?void 0:E.shader,j=this.HU;let Q=1;if(w){const J=this.od?Math.abs((this.bt()-this.vt())/R.getSampleCount()):0,ht=this.dt.x.getInnerInterval()/J,ot=this.PU.M(),ut=this.dt.x.ri()/ot/1,dt=2*ut;Q=ht<=ut?1:Math.max(1-(ht-ut)/(dt-ut),0)}if(H&&j&&X&&N&&Q>0&&A!==void 0&&A>0){const J=j,ht=J.instancedRendering?1:0;this.RR.jR(H).aV(H,(ot,ut,dt,Et)=>{if(!this.RR.zO(dt,t,this,{uniforms:this.aE,mousePickingColor:this.mN,fillStyleSolid:J.fillStyleSolid,fillStyleLinearGradient:J.fillStyleLinearGradient,fillStyleRadialGradient:J.fillStyleRadialGradient,linearGradientInfo:this.eY,radialGradientInfo:this.hY,fillStylePaletted:J.fillStylePaletted,fillStyleIndividual:J.fillStyleIndividual,lookupValueRange:J.fillStylePaletted?tr(J.fillStylePaletted,this,this.YU):void 0,lookupValueBuffer:O,lookupValueAttribDivisor:ht,colorBuffer:U,colorAttribDivisor:ht,fillStyleImage:J.fillStyleImage,texturedFillGLInfo:this.hU,texCoordAttribDivisor:0,maskTexture:J.shapeIcon&&this.hU,maskTextureCoordsAttribDivisor:0}))return!1;if(this.dt._i()?this.RR.lV(X,ht,{location:ut("aPos_highpartX"),size:1},{location:ut("aPos_lowpartX"),size:1}).lV(N,ht,{location:ut("aPos_highpartY"),size:1},{location:ut("aPos_lowpartY"),size:1}):this.RR.$V(ut("aPosX"),X,ht).$V(ut("aPosY"),N,ht),t!==1&&this.RR.dV(ot("uOpacity"),Q),J.instancedRendering)if(P)this.RR.$V(ut("aRotDeg"),P,ht).dV(ot("uBaseRotDeg"),J.geometry.DW);else{const St=Ar(this.DU.M()+J.geometry.DW),Vt=Math.sin(St),_t=Math.cos(St);this.RR.uV(ot("uRot"),[Vt,_t])}return this.RR.uV(Et("uOffsetAlignment"),[-this.LU.x/2,-this.LU.y/2]),J.geometry.Ky(dt,W,A,J.pointSizeAsScale&&this.hU?{scale:this.PU.M(),width:J.shapeIcon?J.shapeIcon.oi().x:this.hU.texture.Fz,height:J.shapeIcon?J.shapeIcon.oi().y:this.hU.texture.Iz}:this.PU.M(),J.instancedRendering),!0})}return this}lN(t){return this.gN===t&&{}}dispose(){var t,e,i,s,n,a,o,l,u;return super.dispose(),this.RR.yV((t=this.XU)===null||t===void 0?void 0:t.bufferX),this.RR.yV((e=this.XU)===null||e===void 0?void 0:e.bufferY),this.RR.yV((i=this.XU)===null||i===void 0?void 0:i.bufferColors),this.RR.yV((s=this.XU)===null||s===void 0?void 0:s.bufferLookupValues),this.RR.yV((n=this.QU)===null||n===void 0?void 0:n.bufferX),this.RR.yV((a=this.QU)===null||a===void 0?void 0:a.bufferY),this.RR.yV((o=this.QU)===null||o===void 0?void 0:o.bufferColors),this.RR.yV((l=this.QU)===null||l===void 0?void 0:l.bufferLookupValues),this.bG={type:"none"},this.KU=void 0,this.HU=void 0,this.SW.Qm(),(u=this.od.M())===null||u===void 0||u.Gt(),this.XU=void 0,this.QU=void 0,this.qU=void 0,this.tY=void 0,this.iY=void 0,this.sY=void 0,this.eY=void 0,this.hY=void 0,this.RR.EO(this,this.hU),this}VR(){return this.dispose(),this}rY(t){if(!this.$U){const{xValues:s,yValues:n}=t.readBack();this.$U={min:{x:bt,y:bt},max:{x:kt,y:kt}};const a=s.length;for(let o=0;o<a;o+=1){const l=s[o],u=n[o];this.$U.min.x=l<this.$U.min.x?l:this.$U.min.x,this.$U.min.y=u<this.$U.min.y?u:this.$U.min.y,this.$U.max.x=l>this.$U.max.x?l:this.$U.max.x,this.$U.max.y=u>this.$U.max.y?u:this.$U.max.y}return this.UU.length=0,this.$U}const e=t.Cc,i=t.kc;if(this.UU.length>0&&e&&i){for(const s of this.UU){for(let n=s.min;n<=s.max;n+=1){const a=e[n],o=i[n];this.$U.min.x=a<this.$U.min.x?a:this.$U.min.x,this.$U.min.y=o<this.$U.min.y?o:this.$U.min.y,this.$U.max.x=a>this.$U.max.x?a:this.$U.max.x,this.$U.max.y=o>this.$U.max.y?o:this.$U.max.y}this.UU.length=0}return this.$U}return this.$U}bt(){var t,e,i,s,n;const a=(t=this.od.M())===null||t===void 0?void 0:t.Wt;if(!a)return 0;const o=a.Gc();return o==="ProgressiveX"?((e=a.wc())===null||e===void 0?void 0:e.x)||0:o==="RegressiveX"?((i=a.Yc())===null||i===void 0?void 0:i.x)||0:o==="ProgressiveY"?((s=this.jU)===null||s===void 0?void 0:s.max)||0:o==="RegressiveY"?((n=this.jU)===null||n===void 0?void 0:n.max)||0:this.rY(a).max.x}vt(){var t,e,i,s,n;const a=(t=this.od.M())===null||t===void 0?void 0:t.Wt;if(!a)return 0;const o=a.Gc();return o==="ProgressiveX"?((e=a.Yc())===null||e===void 0?void 0:e.x)||0:o==="RegressiveX"?((i=a.wc())===null||i===void 0?void 0:i.x)||0:o==="ProgressiveY"?((s=this.jU)===null||s===void 0?void 0:s.min)||0:o==="RegressiveY"?((n=this.jU)===null||n===void 0?void 0:n.min)||0:this.rY(a).min.x}Mt(){var t,e,i,s,n;const a=(t=this.od.M())===null||t===void 0?void 0:t.Wt;if(!a)return 0;const o=a.Gc();return o==="ProgressiveX"?De((e=this.jU)===null||e===void 0?void 0:e.max,0):o==="RegressiveX"?De((i=this.jU)===null||i===void 0?void 0:i.max,0):o==="ProgressiveY"?De((s=a.wc())===null||s===void 0?void 0:s.y,0):o==="RegressiveY"?De((n=a.Yc())===null||n===void 0?void 0:n.y,0):this.rY(a).max.y}xt(){var t,e,i,s,n;const a=(t=this.od.M())===null||t===void 0?void 0:t.Wt;if(!a)return 0;const o=a.Gc();return o==="ProgressiveX"?De((e=this.jU)===null||e===void 0?void 0:e.min,0):o==="RegressiveX"?De((i=this.jU)===null||i===void 0?void 0:i.min,0):o==="ProgressiveY"?De((s=a.Yc())===null||s===void 0?void 0:s.y,0):o==="RegressiveY"?De((n=a.wc())===null||n===void 0?void 0:n.y,0):this.rY(a).min.y}vl(){var t,e;let i=this.PU.M();this.hU&&(i=Math.max(this.hU.texture.Fz,this.hU.texture.Iz)*this.PU.M());const s=Math.max(Bs(this.lu),!((t=this.od.M())===null||t===void 0)&&t.Wt.vc?25:i),n=(e=this.od.M())===null||e===void 0?void 0:e.Wt.Gc();return!n||n!=="ProgressiveX"&&n!=="RegressiveX"?s:0}bl(){var t,e;let i=this.PU.M();this.hU&&(i=Math.max(this.hU.texture.Fz,this.hU.texture.Iz)*this.PU.M());const s=Math.max(Bs(this.lu),!((t=this.od.M())===null||t===void 0)&&t.Wt.vc?25:i),n=(e=this.od.M())===null||e===void 0?void 0:e.Wt.Gc();return!n||n!=="ProgressiveY"&&n!=="RegressiveY"?s:0}}const fm=(r,t,e,i,s,n,a,o,l,u,d,f,y)=>{if(u!=="ProgressiveX")throw new Error("Unimplemented data pattern");const m=t[0],S=t[1],x=m.length,v=m[0],b=m[x-1],E=S[0],T=S[x-1],V=f?2:1;if(o&&l&&o.firstX&&o.lastX&&v>=o.firstX){const X=yh(o.lastX,0,x-1,N=>m[N]);if(m[X]===o.lastX){const N=o.bufferSize-o.valueCount,U=X+1,O=x-U;if(O===0)return o;if(N>=O){const W=Gs(m,U,void 0),P=Gs(S,U,void 0);if(r.zV(o.bufferX,o.valueCount*V,y(W)),r.zV(o.bufferY,o.valueCount*V,y(P)),e&&o.bufferColors){const H=e.slice(U);r.zV(o.bufferColors,o.valueCount,H,Uint32Array)}if(i&&o.bufferLookupValues){const H=i.slice(U);r.zV(o.bufferLookupValues,o.valueCount,H,Float32Array)}if(s&&o.bufferSizes){const H=s.slice(U);r.zV(o.bufferSizes,o.valueCount,H,Float32Array)}if(n&&o.bufferRotations){const H=n.slice(U);r.zV(o.bufferRotations,o.valueCount,H,Float32Array)}if(a&&o.bufferLengthSoFar){const[H,j,Q]=Hm(W,P,o.lastX||0,o.lastY||0,o.lengthSoFarX,o.lengthSoFarY);r.zV(o.bufferLengthSoFar,2*o.valueCount,H,Float32Array),o.lengthSoFarX=j,o.lengthSoFarY=Q}return o.valueCount+=O,o.lastX=b,o.lastY=T,o}}}const F=x+d,B=r.EV(F*V,y(m),o==null?void 0:o.bufferX),z=r.EV(F*V,y(S),o==null?void 0:o.bufferY),L=e?r.EV(F,e,o==null?void 0:o.bufferColors,Uint32Array):void 0,A=i?r.EV(F,i,o==null?void 0:o.bufferLookupValues,Float32Array):void 0,R=s?r.EV(F,s,o==null?void 0:o.bufferSizes,Float32Array):void 0,w=n?r.EV(F,n,o==null?void 0:o.bufferRotations,Float32Array):void 0;let C,k=0,_=0;if(a){const X=Hm(m,S,m[0],S[0],0,0);C=r.EV(2*F,X[0],o==null?void 0:o.bufferLengthSoFar,Float32Array),k=X[1],_=X[2]}return{bufferX:B,bufferY:z,bufferColors:L,bufferLookupValues:A,bufferSizes:R,bufferRotations:w,bufferSize:F,bufferLengthSoFar:C,valueCount:x,firstX:v,lastX:b,firstY:E,lastY:T,lengthSoFarX:k,lengthSoFarY:_}},Hm=(r,t,e,i,s,n)=>{const a=r.length,o=new Float32Array(2*a);if(a===0)return[o,0,0];let l=0,u=e,d=i,f=s,y=n;for(let m=0;m<a;m+=1){const S=r[m],x=t[m];f+=Math.abs(u-S),y+=Math.abs(d-x),o[l]=f,o[l+1]=y,l+=2,u=S,d=x}return[o,f,y]},Wu=(r,t,e,i,s,n,a,o,l,u)=>{const d=r.gl;if(e){const f=t.attribute(`${s}A_highpart${n}`),y=t.attribute(`${s}A_lowpart${n}`),m=t.attribute(`${s}B_highpart${n}`),S=t.attribute(`${s}B_lowpart${n}`);d.bindBuffer(d.ARRAY_BUFFER,i),d.vertexAttribPointer(f,a,l,o,2*a*u,0*u),d.vertexAttribPointer(y,a,l,o,2*a*u,a*u),r.UV(f,1),r.UV(y,1),d.enableVertexAttribArray(f),d.enableVertexAttribArray(y),d.vertexAttribPointer(m,a,l,o,2*a*u,2*a*u),d.vertexAttribPointer(S,a,l,o,2*a*u,3*a*u),r.UV(m,1),r.UV(S,1),d.enableVertexAttribArray(m),d.enableVertexAttribArray(S),d.bindBuffer(d.ARRAY_BUFFER,null)}else{const f=t.attribute(`${s}A${n}`),y=t.attribute(`${s}B${n}`);d.bindBuffer(d.ARRAY_BUFFER,i),d.vertexAttribPointer(f,a,l,o,a*u,0*u),d.vertexAttribPointer(y,a,l,o,a*u,a*u),r.UV(f,1),r.UV(y,1),d.enableVertexAttribArray(f),d.enableVertexAttribArray(y),d.bindBuffer(d.ARRAY_BUFFER,null)}},pr={translation:(r,t)=>[1,0,0,0,1,0,r,t,1],rotation(r){const t=Math.cos(r),e=Math.sin(r);return[t,-e,0,e,t,0,0,0,1]},scaling:(r,t)=>[r,0,0,0,t,0,0,0,1],translate:(r,t,e)=>pr.multiply(r,pr.translation(t,e)),rotate:(r,t)=>pr.multiply(r,pr.rotation(t)),scale:(r,t,e)=>pr.multiply(r,pr.scaling(t,e)),multiply(r,t){const e=r[0],i=r[1],s=r[2],n=r[3],a=r[4],o=r[5],l=r[6],u=r[7],d=r[8],f=t[0],y=t[1],m=t[2],S=t[3],x=t[4],v=t[5],b=t[6],E=t[7],T=t[8];return[f*e+y*n+m*l,f*i+y*a+m*u,f*s+y*o+m*d,S*e+x*n+v*l,S*i+x*a+v*u,S*s+x*o+v*d,b*e+E*n+T*l,b*i+E*a+T*u,b*s+E*o+T*d]},projection:(r,t,e)=>[2/r,0,0,0,-2*e/t,0,-1,1*e,1]};class Y4 extends JC{constructor(t,e,i,s,n,a,o){super(t,e,i,s,n),this.nY=[],this.aE=new lr,this.oY=[Y(0,0),Y(0,0),Y(0,0),Y(0,0)],this.aY=Qt(Y(0,0),Y(0,0)),this.lY=Qt(Y(0,0),Y(0,0)),this.uY=Y(0,0),this.cY=Y(0,0),this.FT=Y(0,0),this.dY=Y(0,0),this.fY=0,this.AY=0,this.AN=Cs({fillStyleSolid:()=>ue(this.be)&&this.be,fillStyleRadialGradient:()=>oi(this.be)&&this.be,fillStyleLinearGradient:()=>li(this.be)&&this.be}),this.rN=t,this.nN=e,this.gN=a,this.mN=o,this.RR=t.oN(),this.nN=e,this.IG=t.Un.jn}Ps(){const t=this.ea(),e=this.sa(),i=this.Bo.M();if(t){const s=this.ta(),n=this.AN.fillStyleSolid(s),a=this.AN.fillStyleRadialGradient(s),o=this.AN.fillStyleLinearGradient(s),l=n||a||o,u=this.RR,d=this.RR.$z(),f=d!==this.AY;if(this.AY=d,this.aE.mV(this.dt),this.ga.i||f){this.gY&&this.gY.ZR(this),this.font.S(zp(this.ga.M(),d));const E=this.font.M();this.gY=this.RR.Vh(E.properties.family),this.gY.jR(this)}const y=this.font.i,m=y||this.la.i;if(m&&this.gY){const E=this.font.M();[this.mY,this.lY]=this.gY.JR(this.la.M(),E,this.rN.qi.isDark),this.nY.forEach(T=>{T.texCoordBuff&&u.yV(T.texCoordBuff),T.vertexBuff&&u.yV(T.vertexBuff)}),this.nY=this.mY.map(T=>({texCoordBuff:u.nV(T.texCoords,!1),texture:T.texture,info:T})),this.ga.i=!1,this.font.i=!1,this.la.i=!1}const S=this.dt.Ni()||e,x=this.ua.i||this.da.i||this.ca.i||this.fa.i||this.ya.i||this.Xt.i||m||S,v=this.ya.M(),b=Yt(Y(this.da.M()+1,this.ca.M()+1),.5);if(x&&this.mY&&(this.uY=Y(-(v.left*d+this.lY.max.x-this.lY.min.x+v.right*d)*b.x-this.lY.min.x+v.right*d,-(v.bottom*d+this.lY.max.y-this.lY.min.y+v.top*d)*b.y-this.lY.min.y+v.top*d)),(x||S||this.Aa.i||this.ta())&&this.be!==Ft){if(this.mY){const E=zt(this.ua.M(),this.fa.M()),T=gt(E,this.dt,this.us.dt),V=Yt(T,d);this.dY=V;const F=Ar(this.Aa.M());this.fY=F,m&&this.nY.forEach(C=>{const k=C.info;k&&(C.vertexBuffLen=k.vertices.length/2,C.vertexBuff=u.nV(k.vertices,!0,C.vertexBuff))});const B=this.Xt.M(),z=[zt(Wn(Y((this.lY.min.x+(-B.left-v.left)*d+this.uY.x)/d,(this.lY.max.y+(B.top+v.top)*d+this.uY.y)/d),this.ma,F),T),zt(Wn(Y((this.lY.max.x+(B.right+v.right)*d+this.uY.x)/d,(this.lY.max.y+(B.top+v.top)*d+this.uY.y)/d),this.ma,F),T),zt(Wn(Y((this.lY.max.x+(B.right+v.right)*d+this.uY.x)/d,(this.lY.min.y+(-B.bottom-v.bottom)*d+this.uY.y)/d),this.ma,F),T),zt(Wn(Y((this.lY.min.x+(-B.left-v.left)*d+this.uY.x)/d,(this.lY.min.y+(-B.bottom-v.bottom)*d+this.uY.y)/d),this.ma,F),T)];this.oY=[gt(z[0],this.us.dt,this.dt),gt(z[1],this.us.dt,this.dt),gt(z[2],this.us.dt,this.dt),gt(z[3],this.us.dt,this.dt)];const L=Je(z);this.cY=Y(-(L.max.x-L.min.x)*d*b.x-L.min.x*d+this.dY.x,-(L.max.y-L.min.y)*d*b.y-L.min.y*d+this.dY.y),this.Fg=pe(L.max,L.min);const A=Je(this.oY),R=this.dt.mi(A.min,this.cY),w=this.dt.mi(A.max,this.cY);this.aY=Je([R,w])}a?this.MN=sr(this.aY,this.dt,a.getPosition(),a.getExtent(),a.getShape(),this.RR.$z()):o?this._N=rr(this.aY,this.dt,o.getAngle(!0),this.RR.$z()):(this.MN=void 0,this._N=void 0)}(this.ta()||y)&&(this.cE=l?this.RR.oz($["2D"],$.VertexLocation({axisWorldTranslation:"matrix",normalSource:void 0,snapToNearestPixel:this.IG}),$.Color({dataType:a?["gradient",a]:o?["gradient",o]:"uniform",maskTextureText:!0})):void 0),this.yY=i&&l?this.yY||this.RR.oz($["2D"],$.MousePicking,$.VertexLocation({axisWorldTranslation:"matrix",normalSource:void 0,snapToNearestPixel:this.IG})):void 0,this.ua.i=!1,this.da.i=!1,this.ca.i=!1,this.fa.i=!1,this.Aa.i=!1,this.ha(this.be)}return this.pa=t,this}zL(t){if(this.ea()){const e=t===1?this.yY:this.cE;if(!e||this.nY.length===0)return this;const i=this.AN.fillStyleSolid(!1),s=this.AN.fillStyleRadialGradient(!1),n=this.AN.fillStyleLinearGradient(!1),a=this.us.OE(),o=a.x,l=a.y;let u=pr.projection(o,l,-1);const d=pr.translation(this.uY.x,this.uY.y),f=pr.translation(this.cY.x,this.cY.y);u=pr.translate(u,this.dY.x,this.dY.y),u=pr.multiply(u,f),u=pr.rotate(u,this.fY),u=pr.multiply(u,d),t===1&&(u=pr.scale(u,this.lY.max.x,this.lY.max.y)),this.RR.jR(e).aV(e,(y,m,S,x)=>{if(this.RR.PV(y("uMatrix"),u).dV(y("uIsHighlighted"),t===1||t===2?0:this.zo).AR(y("uHighlightColorOffset"),t===1||t===2?$e:this.Go).dV(y("uRenderEffectMask"),t===2?1:0),this.IG&&this.RR.uV(x("uViewportSizePx"),[a.x*this.RR.$z(),a.y*this.RR.$z()]),t===1)this.RR.AR(y("uColor"),this.mN);else if(i)this.RR.AR(y("uColor"),i.getColor());else if(s&&this.MN){this.RR.uV(y("uCenter"),this.MN.center).uV(y("uDistance"),this.MN.distance).FV(y("uBounds"),this.MN.bounds).dV(y("uAspect"),this.MN.aspectRatio);const v=s.getColorStops();for(let b=0;b<v.length;b+=1)this.RR.AR(y(`color_${b}`),v[b].color).dV(y(`stop_${b}`),v[b].offset)}else if(n&&this._N){this.RR.uV(y("uStartPoint"),this._N.startPoint).uV(y("uEndPoint"),this._N.endPoint).FV(y("uBounds"),this._N.bounds);const v=n.getColorStops();for(let b=0;b<v.length;b+=1)this.RR.AR(y(`color_${b}`),v[b].color).dV(y(`stop_${b}`),v[b].offset)}return t===1&&this.RR.GV(m("aPos"),this.RR.uO).Ky(this.RR.gl.TRIANGLES,6),t!==1&&this.nY.forEach(v=>{this.RR.GV(m("aPos"),v.vertexBuff).GV(m("aMaskTextureCoord"),v.texCoordBuff).cV(y("uMaskTexture"),v.texture,0).Ky(this.RR.gl.TRIANGLES,v.vertexBuffLen)}),!0})}return this}lN(t){return this.gN===t&&{}}We(){return this.ea()?this.oY:[]}jc(){return this.ea()&&this.Fg?this.Fg:Y(0,0)}oi(){if(this.ea()&&this.aY){const t=this.aY;return Y(t.max.x-t.min.x,t.max.y-t.min.y)}return Y(0,0)}VR(){return this.nY.forEach(t=>{t.texCoordBuff&&this.RR.yV(t.texCoordBuff),t.vertexBuff&&this.RR.yV(t.vertexBuff)}),this.nY=[],this.gY&&this.gY.ZR(this),this}bt(){return this.aY.max.x}vt(){return this.aY.min.x}Mt(){return this.aY.max.y}xt(){return this.aY.min.y}vl(){return 0}bl(){return 0}}class uE{constructor(t,e,i){this.pY=new Set,this.SY=s=>(this.pY.add(s),s),this.vY=s=>(this.pY.delete(s),s.VR(),this),this.us=t,this.Zo=e,this.bY=i}EL(t){this.pY.delete(t)&&this.pY.add(t)}W(){for(const t of this.pY)t.VR().dispose();this.us.xn(this.Zo)}Ss(){return this.us.Ss(),this}bn(){return this.Zo}}class H4 extends uE{constructor(){super(...arguments),this.xY=Xt(void 0),this.Qo=!1}qv(t){return this.xY.S(t),this}km(){return this.xY.M()}}class t2 extends H4{constructor(t,e,i){super(t,e,i),this.rN=t,this.gl=t.oN(),this.MY=this.pY}rV(t){const e=t instanceof d0&&t;if(!e)return _e;const i=e.vt(),s=e.bt(),n=e.xt(),a=e.Mt();if(i===bt||s===kt||n===bt||a===kt)return _e;const o=e.vl(),l=e.bl(),u=fh({min:{x:i,y:n},max:{x:s,y:a}},{x:o,y:l},e.dt),d={min:gt(u.min,e.dt,t.us.dt),max:gt(u.max,e.dt,t.us.dt)},f=this.xY.M();let y;if(f){if(y={min:{x:Math.max(d.min.x,f.x),y:Math.max(d.min.y,f.y)},max:{x:Math.min(d.max.x,f.x+f.width),y:Math.min(d.max.y,f.y+f.height)}},y.max.x<y.min.x||y.max.y<y.min.y)return _e}else y=d;return y}_Y(t){const e=Array.from(this.MY.values());for(let i=0;i<e.length;i+=1){const s=e[i],n=s.lN(t);if(n)return{entity:s,index:i,collectionMember:n.collectionMember}}}Ee(t){const e=this.rN.wY();return this.SY(new v4(this.rN,this,t,this.vY,[],e,this.rN.CY(e)))}Lg(t){return this.SY(new b4(this.rN,this,t,this.vY,[],()=>{const e=this.rN.wY();return{id:e,color:this.rN.CY(e)}}))}rp(t,e,i){const s=this.rN.wY();return this.SY(new T4(this.rN,this,t,this.vY,i,s,this.rN.CY(s),e))}dd(t){const e=this.rN.wY();return this.SY(new G4(this.rN,this,t,this.vY,e,this.rN.CY(e)))}Pr(t){const e=this.rN.wY();return this.SY(new Y4(this.rN,this,t,this.vY,[],e,this.rN.CY(e)))}bS(t){const e=this.rN.wY();return this.SY(new w4(this.rN,this,t,this.vY,[],e,this.rN.CY(e)))}ic(t,e=Cr.Simple){const i=this.rN.wY();if(e===Cr.Simple)return this.SY(new D4(this.rN,this,t,this.vY,[],i,this.rN.CY(i)));throw new Error("GlEngine.addPolygon | No such polygon type!")}Ob(t){return this.SY(new C4(this.rN,this,t,this.vY,[],()=>{const e=this.rN.wY();return{id:e,color:this.rN.CY(e)}}))}ke(t){const e=this.rN.wY();return this.SY(new k4(this.rN,this,t,this.vY,[],e,this.rN.CY(e)))}lw(t){const e=this.rN.wY();return this.SY(new x4(this.rN,this,t,this.vY,[],e,this.rN.CY(e)))}Jc(t){const e=this.rN.wY();return this.SY(new p4(this.rN,this,t,this.vY,[],e,this.rN.CY(e)))}V_(t,e,i){if(i.heatmapDataType==="intensity"){const s=this.rN.wY();return this.SY(new N4(this.rN,this,t,this.vY,e,s,this.rN.CY(s),i))}throw new Ri("Unimplemented Heatmap Grid Static type")}P_(t,e,i){const s=this.rN.wY();return this.SY(new D0(this.rN,this,t,this.vY,e,i,s,this.rN.CY(s)))}Ex(t,e,i){const s=this.rN.wY();return this.SY(new L4(this.rN,this,t,this.vY,e,i,s,this.rN.CY(s)))}kY(t){return this.SY(new m4(this.rN,this,this.vY,[],t))}Ps(){if(this.Qo){this.Qo=!1;const t=Array.from(this.pY).sort((e,i)=>e.Ko()-i.Ko());this.pY.clear();for(const e of t)this.pY.add(e)}for(const t of this.pY)t.Ps();return this}zL(t,e){const i=this.xY.M();if(i&&this.gl.hV(i.x*this.gl.$z()*e,i.y*this.gl.$z()*e,i.width*this.gl.$z()*e,i.height*this.gl.$z()*e),t!==1)for(const s of this.pY)s.getVisible()&&s.zL(t);else for(const s of this.pY)s.getMouseInteractions()&&s.getVisible()&&s.zL(t);return this.gl.qz(!1),this}}class cE extends Hl{constructor(t){super(t)}}class X4 extends cE{constructor(t){super(t),this.TY="attribute";const{vertices:e,drawSize:i,drawMode:s}=W4(t.gl);this.wR=t.nV(e),this.cG=i,this.dG=s}Ky(t,e,i,s){return this.RR.lV(this.wR,0,{location:t.attribute("aInstanceGeo"),size:3},{location:i?t.attribute("aNormal"):void 0,size:3},{location:s?t.attribute("aTriangleBary"):void 0,size:3}).QV(this.dG,0,this.cG,e),this}kz(){this.RR.yV(this.wR)}}const W4=r=>{const t=new Float32Array(324);let e=0;return t[e+0]=-1,t[e+1]=1,t[e+2]=1,t[e+3]=0,t[e+4]=1,t[e+5]=0,t[e+6]=1,t[e+7]=0,t[e+8]=0,e+=9,t[e+0]=1,t[e+1]=1,t[e+2]=1,t[e+3]=0,t[e+4]=1,t[e+5]=0,t[e+6]=1,t[e+7]=1,t[e+8]=0,e+=9,t[e+0]=-1,t[e+1]=1,t[e+2]=-1,t[e+3]=0,t[e+4]=1,t[e+5]=0,t[e+6]=0,t[e+7]=0,t[e+8]=1,e+=9,t[e+0]=-1,t[e+1]=1,t[e+2]=-1,t[e+3]=0,t[e+4]=1,t[e+5]=0,t[e+6]=0,t[e+7]=1,t[e+8]=0,e+=9,t[e+0]=1,t[e+1]=1,t[e+2]=1,t[e+3]=0,t[e+4]=1,t[e+5]=0,t[e+6]=1,t[e+7]=0,t[e+8]=1,e+=9,t[e+0]=1,t[e+1]=1,t[e+2]=-1,t[e+3]=0,t[e+4]=1,t[e+5]=0,t[e+6]=1,t[e+7]=0,t[e+8]=0,e+=9,t[e+0]=-1,t[e+1]=-1,t[e+2]=-1,t[e+3]=-1,t[e+4]=0,t[e+5]=0,t[e+6]=1,t[e+7]=0,t[e+8]=0,e+=9,t[e+0]=-1,t[e+1]=-1,t[e+2]=1,t[e+3]=-1,t[e+4]=0,t[e+5]=0,t[e+6]=1,t[e+7]=1,t[e+8]=0,e+=9,t[e+0]=-1,t[e+1]=1,t[e+2]=-1,t[e+3]=-1,t[e+4]=0,t[e+5]=0,t[e+6]=0,t[e+7]=0,t[e+8]=1,e+=9,t[e+0]=-1,t[e+1]=1,t[e+2]=-1,t[e+3]=-1,t[e+4]=0,t[e+5]=0,t[e+6]=0,t[e+7]=1,t[e+8]=0,e+=9,t[e+0]=-1,t[e+1]=-1,t[e+2]=1,t[e+3]=-1,t[e+4]=0,t[e+5]=0,t[e+6]=1,t[e+7]=0,t[e+8]=1,e+=9,t[e+0]=-1,t[e+1]=1,t[e+2]=1,t[e+3]=-1,t[e+4]=0,t[e+5]=0,t[e+6]=1,t[e+7]=0,t[e+8]=0,e+=9,t[e+0]=1,t[e+1]=-1,t[e+2]=1,t[e+3]=1,t[e+4]=0,t[e+5]=0,t[e+6]=1,t[e+7]=0,t[e+8]=0,e+=9,t[e+0]=1,t[e+1]=-1,t[e+2]=-1,t[e+3]=1,t[e+4]=0,t[e+5]=0,t[e+6]=1,t[e+7]=1,t[e+8]=0,e+=9,t[e+0]=1,t[e+1]=1,t[e+2]=1,t[e+3]=1,t[e+4]=0,t[e+5]=0,t[e+6]=0,t[e+7]=0,t[e+8]=1,e+=9,t[e+0]=1,t[e+1]=1,t[e+2]=1,t[e+3]=1,t[e+4]=0,t[e+5]=0,t[e+6]=0,t[e+7]=1,t[e+8]=0,e+=9,t[e+0]=1,t[e+1]=-1,t[e+2]=-1,t[e+3]=1,t[e+4]=0,t[e+5]=0,t[e+6]=1,t[e+7]=0,t[e+8]=1,e+=9,t[e+0]=1,t[e+1]=1,t[e+2]=-1,t[e+3]=1,t[e+4]=0,t[e+5]=0,t[e+6]=1,t[e+7]=0,t[e+8]=0,e+=9,t[e+0]=-1,t[e+1]=-1,t[e+2]=1,t[e+3]=0,t[e+4]=0,t[e+5]=1,t[e+6]=1,t[e+7]=0,t[e+8]=0,e+=9,t[e+0]=1,t[e+1]=-1,t[e+2]=1,t[e+3]=0,t[e+4]=0,t[e+5]=1,t[e+6]=1,t[e+7]=1,t[e+8]=0,e+=9,t[e+0]=-1,t[e+1]=1,t[e+2]=1,t[e+3]=0,t[e+4]=0,t[e+5]=1,t[e+6]=0,t[e+7]=0,t[e+8]=1,e+=9,t[e+0]=-1,t[e+1]=1,t[e+2]=1,t[e+3]=0,t[e+4]=0,t[e+5]=1,t[e+6]=0,t[e+7]=1,t[e+8]=0,e+=9,t[e+0]=1,t[e+1]=-1,t[e+2]=1,t[e+3]=0,t[e+4]=0,t[e+5]=1,t[e+6]=1,t[e+7]=0,t[e+8]=1,e+=9,t[e+0]=1,t[e+1]=1,t[e+2]=1,t[e+3]=0,t[e+4]=0,t[e+5]=1,t[e+6]=1,t[e+7]=0,t[e+8]=0,e+=9,t[e+0]=1,t[e+1]=-1,t[e+2]=-1,t[e+3]=0,t[e+4]=0,t[e+5]=-1,t[e+6]=1,t[e+7]=0,t[e+8]=0,e+=9,t[e+0]=-1,t[e+1]=-1,t[e+2]=-1,t[e+3]=0,t[e+4]=0,t[e+5]=-1,t[e+6]=1,t[e+7]=1,t[e+8]=0,e+=9,t[e+0]=1,t[e+1]=1,t[e+2]=-1,t[e+3]=0,t[e+4]=0,t[e+5]=-1,t[e+6]=0,t[e+7]=0,t[e+8]=1,e+=9,t[e+0]=1,t[e+1]=1,t[e+2]=-1,t[e+3]=0,t[e+4]=0,t[e+5]=-1,t[e+6]=0,t[e+7]=1,t[e+8]=0,e+=9,t[e+0]=-1,t[e+1]=-1,t[e+2]=-1,t[e+3]=0,t[e+4]=0,t[e+5]=-1,t[e+6]=1,t[e+7]=0,t[e+8]=1,e+=9,t[e+0]=-1,t[e+1]=1,t[e+2]=-1,t[e+3]=0,t[e+4]=0,t[e+5]=-1,t[e+6]=1,t[e+7]=0,t[e+8]=0,e+=9,t[e+0]=-1,t[e+1]=-1,t[e+2]=-1,t[e+3]=0,t[e+4]=-1,t[e+5]=0,t[e+6]=1,t[e+7]=0,t[e+8]=0,e+=9,t[e+0]=1,t[e+1]=-1,t[e+2]=-1,t[e+3]=0,t[e+4]=-1,t[e+5]=0,t[e+6]=1,t[e+7]=1,t[e+8]=0,e+=9,t[e+0]=-1,t[e+1]=-1,t[e+2]=1,t[e+3]=0,t[e+4]=-1,t[e+5]=0,t[e+6]=0,t[e+7]=0,t[e+8]=1,e+=9,t[e+0]=-1,t[e+1]=-1,t[e+2]=1,t[e+3]=0,t[e+4]=-1,t[e+5]=0,t[e+6]=0,t[e+7]=1,t[e+8]=0,e+=9,t[e+0]=1,t[e+1]=-1,t[e+2]=-1,t[e+3]=0,t[e+4]=-1,t[e+5]=0,t[e+6]=1,t[e+7]=0,t[e+8]=1,e+=9,t[e+0]=1,t[e+1]=-1,t[e+2]=1,t[e+3]=0,t[e+4]=-1,t[e+5]=0,t[e+6]=1,t[e+7]=0,t[e+8]=0,e+=9,{vertices:t,drawSize:e/9,drawMode:r.TRIANGLES}};class q4 extends cE{constructor(t,e){super(t),this.TY="attribute",this.FY=e;const{vertices:i,indices:s}=j4();this.wR=t.nV(i),this.uG=t.OV(s),this.cG=s.length,this.dG=t.gl.TRIANGLES}Ky(t,e,i,s){return this.RR.lV(this.wR,0,{location:t.attribute("aEdge"),size:3},{location:i?t.attribute("aNormal"):void 0,size:3},{location:t.attribute("aInstanceGeo"),size:3}).XV(this.uG).dV(t.uniform("uEdgeRoundness"),this.FY/2).JV(this.dG,this.cG,0,e),this}kz(){this.RR.yV(this.wR),this.RR.yV(this.uG)}IY(t){return this.FY=t,this}PY(){return this.FY}}const j4=()=>{const r=[{normal:{x:0,y:1,z:0},perpendA:{x:0,y:0,z:1},perpendB:{x:-1,y:0,z:0}},{normal:{x:0,y:0,z:-1},perpendA:{x:0,y:1,z:0},perpendB:{x:-1,y:0,z:0}},{normal:{x:-1,y:0,z:0},perpendA:{x:0,y:1,z:0},perpendB:{x:0,y:0,z:1}},{normal:{x:1,y:0,z:0},perpendA:{x:0,y:1,z:0},perpendB:{x:0,y:0,z:-1}},{normal:{x:0,y:0,z:1},perpendA:{x:0,y:1,z:0},perpendB:{x:1,y:0,z:0}},{normal:{x:0,y:-1,z:0},perpendA:{x:0,y:0,z:-1},perpendB:{x:-1,y:0,z:0}}],t=[];let e=0;const i=[];let s=0;for(const f of r){const{normal:y,perpendA:m,perpendB:S}=f,x=ft.multiply(m,-1),v=ft.multiply(S,-1),b=e;t[e]={thicknessDirection:ft.addVec(y,m,S),edge:ft.addVec(x,v),normal:y},e+=1;const E=e;t[e]={thicknessDirection:ft.addVec(y,x,S),edge:ft.addVec(m,v),normal:y},e+=1;const T=e;t[e]={thicknessDirection:ft.addVec(y,x,v),edge:ft.addVec(m,S),normal:y},e+=1;const V=e;t[e]={thicknessDirection:ft.addVec(y,m,v),edge:ft.addVec(x,S),normal:y},e+=1,i[s+0]=T,i[s+1]=b,i[s+2]=V,i[s+3]=T,i[s+4]=E,i[s+5]=b,s+=6;const F=[{A:m,B:S},{A:x,B:S},{A:x,B:v},{A:m,B:v}];for(const B of F){B.thicknessDirection=ft.addVec(y,B.A,B.B),B.stripVerticesA=[],B.stripVerticesB=[];const z=[{direction:B.A,other:B.B,vertices:B.stripVerticesA},{direction:B.B,other:B.A,vertices:B.stripVerticesB}];for(const L of z)for(let A=0;A<8;A+=1){const R=.5*A/7,w=ft.normalize(ft.lerp(y,L.direction,R)),C=Math.PI/2-ft.angle(w,y),k=ft.addVec(ft.multiply(ft.multiply(L.direction,-1),1-Math.cos(C)),ft.multiply(ft.multiply(y,-1),1-Math.sin(C)),ft.multiply(L.other,-1)),_=e;t[e]={thicknessDirection:B.thicknessDirection,normal:w,edge:k};const X=t[e];e+=1,L.vertices.push({index:_,vertex:X})}}for(let B=0;B<F.length;B+=1){const z=F[B],L=F[B<F.length-1?B+1:0],A=B%2==0?z.stripVerticesB:z.stripVerticesA,R=B%2==0?L.stripVerticesB:L.stripVerticesA;for(let w=1;w<A.length;w+=1){const C=A[w-1],k=R[w-1],_=A[w],X=R[w];i[s+0]=C.index,i[s+1]=k.index,i[s+2]=X.index,i[s+3]=_.index,i[s+4]=C.index,i[s+5]=X.index,s+=6}}}const n=[{x:-1,y:1,z:-1,flipVertexOrder:!1},{x:-1,y:1,z:1,flipVertexOrder:!0},{x:1,y:1,z:1,flipVertexOrder:!1},{x:1,y:1,z:-1,flipVertexOrder:!0},{x:-1,y:-1,z:-1,flipVertexOrder:!0},{x:-1,y:-1,z:1,flipVertexOrder:!1},{x:1,y:-1,z:1,flipVertexOrder:!0},{x:1,y:-1,z:-1,flipVertexOrder:!1}],a=Math.PI/15,o=2*Math.PI/15;let l=e;for(const f of n){let y=0;t[e]={thicknessDirection:f,normal:{x:0,y:f.y,z:0},edge:{x:-f.x,y:0,z:-f.z}},e+=1,y+=1;for(let v=1;v<8.5;v+=1){const b=v===15?Math.PI:v*a,E=1*Math.cos(b)*f.y,T=Math.sin(b);for(let V=0;V<Math.ceil(3.75)+1;V+=1){const F=V===15?0:V*o,B=T*Math.cos(F)*1*f.x,z=T*Math.sin(F)*1*f.z,L={x:B,y:E,z},A=ft.normalize({x:B,y:E,z});t[e]={thicknessDirection:f,normal:A,edge:{x:L.x-f.x,y:L.y-f.y,z:L.z-f.z}},e+=1,y+=1}}const m=[];for(let v=1;v<=Math.ceil(3.75);v+=1)m.push(l),v===15?m.push(l+1):m.push(l+v+1),m.push(l+v);const S=l+1,x=Math.ceil(3.75)+1;for(let v=0;v<6.5;v+=1)for(let b=0;b<Math.ceil(3.75);b+=1){let E=0;const T=S+(v+1)*x+b;let V=0;b===14?(E=S+v*x,V=S+(v+1)*x):(E=S+v*x+b+1,V=S+(v+1)*x+b+1),m.push(S+v*x+b),m.push(E),m.push(T),m.push(T),m.push(E),m.push(V)}i.push.apply(i,f.flipVertexOrder?m.reverse():m),l+=y}const u=new Float32Array(9*t.length);let d=0;for(const f of t)u[d+0]=f.edge.x,u[d+1]=f.edge.y,u[d+2]=f.edge.z,u[d+3]=f.normal.x,u[d+4]=f.normal.y,u[d+5]=f.normal.z,u[d+6]=f.thicknessDirection.x,u[d+7]=f.thicknessDirection.y,u[d+8]=f.thicknessDirection.z,d+=9;return{vertices:u,indices:new Uint16Array(i)}},sS=(r,t)=>{let e=r._V.Cz.get(t);return e||(e=t!==void 0&&t>0?new q4(r,Jt(t,0,1)):new X4(r),r._V.Cz.set(t,e),e)};class $4 extends Ym{rS(t){return this.Uz=this.qp.M(),this.qp.S(t),this}Cv(t){return this.DY=t,this}kv(){return this.DY}}class go extends $4{constructor(t,e,i,s,n){super(t,e,i),this.BY=t,this.gN=s,this.mN=n,this.rN=t.rN,this.RR=this.rN.oN()}lN(t){return t===this.gN&&{}}}class J4 extends go{constructor(t,e,i,s,n){super(t,e,i,s,n),this.DY="cull-back",this.Ya=xr,this.LY={},this.RY=[],this.AN=Cs({fillStyleSolid:()=>ue(this.be)&&this.be,fillStyleIndividual:()=>ws(this.be)&&this.be,fillStylePaletted:()=>Ti(this.be)&&this.be}),this.be=As.fillStyle,this.qp.S(Pl)}Ps(t){const e=this.RY,i=this.be,s=i!==Ft,n=this.EY,a=this.ta()||this.zY!==n,o=this.Wz(),l=this.Bo.M(),u=this.Bo.i;if(s){for(const b of e)b.id=b.id!==void 0?String(b.id):void 0,b.xSize=b.xSize!==void 0&&b.xSize<0?-b.xSize:b.xSize,b.ySize=b.ySize!==void 0&&b.ySize<0?-b.ySize:b.ySize,b.zSize=b.zSize!==void 0&&b.zSize<0?-b.zSize:b.zSize;const d=11,f=this.VY||0;let y=f;for(const b of e){const E=b.id;E!==void 0&&this.LY[E]!==void 0||(y+=1)}let m,S=!1,x=!1;if(S=y!==f,x=S,m=!x&&(e.length<100?"chunks":"all"),S){const b=y*d,E=new Float32Array(b);this.IW&&E.set(this.IW),this.IW=E,this.OY=b,this.NY=f*d}const v=ws(i)?i.getFallbackColor():void 0;for(const b of e){const E=b.id,T=E!==void 0&&this.LY[E],V=[b.xCenter,b.yCenter,b.zCenter,b.xSize,b.ySize,b.zSize,b.color?b.color.r:v?v.r:void 0,b.color?b.color.g:v?v.g:void 0,b.color?b.color.b:v?v.b:void 0,b.color?b.color.a:v?v.a:void 0,b.value];if(T){for(let F=0;F<d;F+=1)V[F]=V[F]!==void 0?V[F]:T.buffer[F];T.buffer.set(V)}else{const F=this.NY,B=new Float32Array(this.IW.buffer,F*Float32Array.BYTES_PER_ELEMENT,d);B.set(V),E!==void 0&&(this.LY[E]={location:F,buffer:B}),this.NY+=d}}if(x&&(this.lG=this.RR.nV(this.IW,!0)),m==="all")this.RR.zV(this.lG,0,this.IW);else if(m==="chunks")for(const b of e){const E=b.id;if(E!==void 0){const T=this.LY[E];this.RR.zV(this.lG,T.location,T.buffer)}}if(a||o||u){const b=this.AN.fillStyleSolid(a),E=this.AN.fillStyleIndividual(a),T=this.AN.fillStylePaletted(a);b||E||T?(this.GY=sS(this.RR,this.WY()),this.cE=this.RR.oz($["3D"],$.ColorShaded3D({dataType:E?"attribute":T?["lookup",T.getLookUpProperty(),T.lut]:"uniform",shadingStyle:this.qp.M().type}),$.VertexLocation({offset:{sizeUnit:"axis",dataType:"attribute",halved:!0},axisWorldTranslation:Lt(this.dt),normalSource:this.GY.TY}),this.EY!==void 0&&$.RoundedEdges3D),this.yY=l?this.RR.oz($["3D"],$.VertexLocation({offset:{sizeUnit:"axis",dataType:"attribute",halved:!0},axisWorldTranslation:Lt(this.dt),normalSource:void 0}),$.MousePicking,this.EY!==void 0&&$.RoundedEdges3D):void 0):(this.GY=void 0,this.cE=void 0,this.yY=void 0)}if(e.length>0){const b=Qt({x:bt,y:bt,z:bt},{x:kt,y:kt,z:kt});for(let E=0;E<this.NY;E+=d){const T=this.IW[E+0],V=this.IW[E+3]/2,F=T-V,B=T+V,z=this.IW[E+1],L=this.IW[E+4]/2,A=z-L,R=z+L,w=this.IW[E+2],C=this.IW[E+5]/2,k=w-C,_=w+C;b.min.x=b.min.x<F?b.min.x:F,b.min.y=b.min.y<A?b.min.y:A,b.min.z=b.min.z<k?b.min.z:k,b.max.x=b.max.x>B?b.max.x:B,b.max.y=b.max.y>R?b.max.y:R,b.max.z=b.max.z>_?b.max.z:_}this.Ya=b}this.VY=y,this.RY.length=0}return this.ha(i),this.zY=n,this.qp.i=!1,this.Bo.i=!1,this}zL(t){const e=t===1?this.yY:this.cE,i=this.GY,s=this.lG,n=this.be,a=this.VY,o=this.qp.M();return e&&s&&a!==void 0&&this.RR.aV(e,(l,u,d)=>{let f=!1;const y=u("aPos"),m=u("aOffsetAxis");this.RR.jR(e).IV(l("uScale"),this.BY.aE.fV()).IV(l("uDisp"),this.BY.aE.AV()).DV(l("uViewProjectionMatrix"),this.UY).dV(l("uIsHighlighted"),t===1||t===2?0:this.zo).AR(l("uHighlightColorOffset"),t===1||t===2?$e:this.Go).dV(l("uRenderEffectMask"),t===2?1:0);const S={location:y,size:3},x={location:m,size:3},v={location:void 0,size:4};if(t!==1&&o.type==="phong"&&this.RR.IV(l("uCameraLoc"),this.YY).IV(l("uLightLoc"),this.HY).dV(l("uAmbientReflection"),o.ambientReflection).dV(l("uSpecularReflection"),o.specularReflection).dV(l("uDiffuseReflection"),o.diffuseReflection).dV(l("uShininess"),o.shininess).AR(l("uLightColor"),o.specularColor).AR(l("uAmbientColor"),o.ambientColor),t===1)this.RR.AR(l("uColor"),this.mN);else if(ue(n))this.RR.AR(l("uColorDiffuse"),n.getColor());else if(ws(n)){const b=u("aColor");v.location=b}else if(Ti(n)){const b=tr(n,this,void 0);if(!b&&n.lut.percentageValues)return!1;this.RR.LO(d,n.lut,b)}return s&&(this.RR.lV(s,1,S,x,v,{location:void 0,size:1}),i.Ky(d,a,o.type==="phong"&&t!==1,!1),f=!0),f}),this}dispose(){return super.dispose(),this.lG&&(this.RR.yV(this.lG),this.lG=void 0),this.cE=void 0,this}VR(){return this.dispose(),this}gS(t){this.RY=ls(this.RY,t,{canReturnB:!0})}Ce(t){return this.be=vl(this.be,t),this}Eh(){return this.be}fS(t){return this.EY=t!==void 0&&t>0?Jt(t,0,1):void 0,this}WY(){return this.EY}bt(){return this.Ya.max.x}vt(){return this.Ya.min.x}Mt(){return this.Ya.max.y}xt(){return this.Ya.min.y}aS(){return this.Ya.max.z}lS(){return this.Ya.min.z}vl(){return 0}bl(){return 0}uS(){return 0}ta(){return bl(this.ia,this.be)}ha(t){this.ia=t}}class Z4 extends Hl{constructor(t,e){super(t),this.TY="custom",this.oG=e;const{vertices:i,drawSize:s}=this.aG();this.lG=t.nV(i),this.cG=s}jR(t){return this.RR.lV(this.lG,0,{location:t.attribute("aSegmentPosition"),size:1},{location:t.attribute("aPerpendHorizontal"),size:1},{location:t.attribute("aPerpendVertical"),size:1}),this}Ky(t){return this.RR.QV(this.RR.gl.TRIANGLE_STRIP,0,this.cG,t),this}aG(){const t=this.oG,e=new Float32Array(2*(t+1)*3);let i=0;for(let s=0;s<=t;s+=1){const n=2*Math.PI*s/t,a=Math.cos(n),o=Math.sin(n);for(const l of[0,1])e[i+0]=l,e[i+1]=a,e[i+2]=o,i+=3}return{vertices:e,drawSize:i/3}}kz(){this.RR.yV(this.lG)}}const dE=(r,t=16)=>{let e=r._V._z.get(t);return e||(e=new Z4(r,t),r._V._z.set(t,e),e)};class Q4 extends go{constructor(t,e,i,s,n){super(t,e,i,s,n),this.DY="cull-back",this.$Y=xr,this.jY=[],this.ZY=!1,this.lu=As.lineStyle,this.qp.S(Il)}Ps(t){const e=this.ZY,i=this.lu,s=this.cu!==i,n=this.Wz(),a=e;if(e){const o=Ep(this.jY);this.QY=this.RR.nV(o,!1,this.QY)}if(a&&(this.$Y=Cp(this.jY)),s||n){const l=Ss(i)&&i.getFillStyle(),u=i.getThickness()===1?"primitive":"instanced";this.bG=void 0,ue(l)&&(u==="primitive"?this.bG={type:u,shader:this.RR.oz($["3D"],$.VertexLocation({axisWorldTranslation:Lt(this.dt),normalSource:void 0}),$.Color({dataType:"uniform"})),fillStyle:l}:u==="instanced"&&(this.bG={type:u,shader:this.RR.oz($["3D"],$.ColorShaded3D({dataType:"uniform",shadingStyle:this.qp.M().type}),$.LineInstanced3D({axisWorldTranslation:Lt(this.dt)})),geometry:dE(this.RR,8),fillStyle:l}))}return this.ZY=!1,this.cu=i,this.qp.i=!1,this}zL(t){if(t===1)return this;const e=this.RR.gl,i=this.bG,s=this.QY,n=this.lu,a=this.qp.M();if(i&&s&&Ss(n))switch(i.type){case"instanced":{const o=.5*this.ks.Op(n.thickness),l=i.fillStyle.getColor(),u=i.shader,d=i.geometry;this.RR.aV(u,(f,y,m)=>{this.RR.jR(u).IV(f("uScale"),this.BY.aE.fV()).IV(f("uDisp"),this.BY.aE.AV()).DV(f("uViewProjectionMatrix"),this.UY).AR(f("uColorDiffuse"),l).dV(f("uOffsetWU"),o).dV(f("uIsHighlighted"),this.zo).AR(f("uHighlightColorOffset"),t===2?$e:this.Go).dV(f("uRenderEffectMask"),t===2?1:0),a.type==="phong"&&this.RR.IV(f("uCameraLoc"),this.YY).IV(f("uLightLoc"),this.HY).dV(f("uAmbientReflection"),a.ambientReflection).dV(f("uSpecularReflection"),a.specularReflection).dV(f("uDiffuseReflection"),a.diffuseReflection).dV(f("uShininess"),a.shininess).AR(f("uLightColor"),a.specularColor).AR(f("uAmbientColor"),a.ambientColor),e.bindBuffer(e.ARRAY_BUFFER,s);const S=y("aLocationA"),x=y("aLocationB");return e.vertexAttribPointer(S,3,e.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),this.RR.UV(S,1),e.enableVertexAttribArray(S),e.vertexAttribPointer(x,3,e.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,3*Float32Array.BYTES_PER_ELEMENT),this.RR.UV(x,1),e.enableVertexAttribArray(x),d.jR(m).Ky(this.jY.length/2),!0});break}case"primitive":{const o=Ss(n)?n.getFillStyle():void 0,l=o&&ue(o)?o.getColor():void 0;if(l){const u=i.shader;this.RR.aV(u,(d,f)=>(this.RR.jR(u).IV(d("uScale"),this.BY.aE.fV()).IV(d("uDisp"),this.BY.aE.AV()).DV(d("uViewProjectionMatrix"),this.UY).AR(d("uColor"),l).dV(d("uIsHighlighted"),this.zo).AR(d("uHighlightColorOffset"),t===2?$e:this.Go).dV(d("uRenderEffectMask"),t===2?1:0).lV(s,void 0,{location:f("aPos"),size:3}).Ky(e.LINES,this.jY.length),!0))}break}}return this}nl(t){for(let e=0;e<t.length-1;e+=1){const i=t[e],s=t[e+1];this.jY.push(i),this.jY.push(s)}return this.ZY=!0,{cs(){return this},ys(){return this}}}Nt(){return this.jY.length=0,this.ZY=!0,this}Ap(){return[]}bd(t){}Re(t){return this.lu=typeof t=="function"?t(this.lu):t,this}uu(){return this.lu}VR(){return this.QY&&(this.RR.yV(this.QY),this.QY=void 0),this}bt(){return this.$Y.max.x}vt(){return this.$Y.min.x}Mt(){return this.$Y.max.y}xt(){return this.$Y.min.y}aS(){return this.$Y.max.z}lS(){return this.$Y.min.z}vl(){const t=this.lu;return t===At?0:t.getThickness()}bl(){const t=this.lu;return t===At?0:t.getThickness()}uS(){const t=this.lu;return t===At?0:t.getThickness()}}class K4 extends Hl{constructor(t,e,i){super(t),this.TY="gpu-calculate",this.JY=e,this.KY=i;const{vertices:s,drawSize:n}=this.aG();this.lG=t.nV(s),this.cG=n}Ky(t,e,i,s){return this.RR.lV(this.lG,0,{location:t.attribute("aInstanceGeo"),size:3},{location:s?t.attribute("aTriangleBary"):void 0,size:3}).QV(this.RR.gl.TRIANGLES,0,this.cG,e),this}aG(){const t=this.KY,e=this.JY,i=new Float32Array(6*(6*e+6*(t-2)*e));let s=0;const n=2*Math.PI/e,a=Math.PI/t,o=(l,u,d,f,y)=>{const m=u*n,S=Math.PI/2-l*a,x=Math.cos(S),v=x*Math.cos(m),b=x*Math.sin(m),E=Math.sin(S);i[s]=v,i[s+1]=E,i[s+2]=b,i[s+3]=d,i[s+4]=f,i[s+5]=y,s+=6};for(let l=0;l<t;l+=1)for(let u=0;u<e;u+=1)l>0&&(o(l,u,1,0,0),o(l,u+1,1,1,0),o(l+1,u,0,0,1)),l<t-1&&(o(l,u+1,1,1,0),o(l+1,u+1,0,1,0),o(l+1,u,0,0,1));return s!==i.length&&wn(0,()=>{this.RR.cA.Hn&&s>i.length&&nt.console.warn(`LightningChart JS unexpected error scenario, sphere geometry buffer size mismatch.
A point series 3D component might have missing points.

This warning can be omitted with LightningChartOptions.warnings`)}),{vertices:i,drawSize:s/6}}kz(){this.RR.yV(this.lG)}}const fE=(r,t)=>{const e=Math.round(t);e<3&&wn(0,se);const i=e;let s=r._V.wz.get(Array.from(r._V.wz.keys()).find(n=>n.sectors===e&&n.stacks===i));return s||(s=new K4(r,e,i),r._V.wz.set({sectors:e,stacks:i},s),s)};class tV extends go{constructor(t,e,i,s,n){super(t,e,i,s,n),this.DY="cull-back",this.QM=[],this.bG={},this.vW=new eS(this.QM,a=>a.vertexBuffer&&this.RR.yV(a.vertexBuffer),!0),this.yu=[],this.Ha=0,this.$a=[],this.Xa=0,this.Ya=xr,this.ja=xr,this.AN=Cs({lineStyleSolid:()=>{const a=this.lu;return Ss(a)&&a},lineFillSolid:()=>{const a=this.lu.getFillStyle();return ue(a)&&a},lineFillPaletted:()=>{const a=this.lu.getFillStyle();return Ti(a)&&a},jointStyleTriangulatedPoints:()=>va(this.mS)&&this.mS,jointSizeTriangulated:()=>{const a=this.mS;return va(a)&&a.getSize()},jointFillSolid:()=>{const a=this.mS.getFillStyle();return ue(a)&&a},jointFillPaletted:()=>{const a=this.mS.getFillStyle();return Ti(a)&&a},wireframeLineStyleSolid:()=>{const a=va(this.mS)&&this.mS.getWireframeStyle();return Ss(a)&&a},wireframeFillSolid:()=>{const a=va(this.mS)&&this.mS.getWireframeStyle(),o=a&&a.getFillStyle();return ue(o)&&o}}),this.Qa=!1,this.lu=As.lineStyle,this.mS=As.pointStyle3D,this.qp.S(Pl),this.wW={attributesPerVertex:3,prepareRenderData:(a,o)=>Ep(a)}}Ps(t){const e=this.Qa,i=this.$a,s=this.Xa,n=s>0,a=this.lu,o=a!==this.cu,l=this.mS,u=l!==this.qY,d=this.Wz(),f=this.Bo.i,y=this.Bo.M();this.ja&&(this.Ya=Nf(this.Ya,this.ja),this.ja=void 0),n&&(this.yu=ls(this.yu,i,{canReturnB:!0}),this.Ha+=s);let m=i,S=s;if(e&&(this.QM.forEach(x=>{x.existingCoordinatesCount=0,x.existingDataPointsCount=0,x.boundaries=xr}),this.vW.cW(),m=this.yu,S=this.Ha),S>0){const v=Math.floor(this.rN.tH/(this.wW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT)),b=this.Uo("ApplicationType",T=>T.type==="UserSeries")?S:1e3,E=Jt(b,1e5,v);this.vW.oW(m,E,(T,V,F,B)=>({existingDataPointsCount:F-B,existingCoordinatesCount:F,allocatedCoordinatesCount:T,jointPointsCount:B,lastDataPoint:V[F-1],boundaries:xr,vertexBuffer:this.RR.EV(T*this.wW.attributesPerVertex,this.wW.prepareRenderData(V,F))}),(T,V,F,B)=>{this.RR.zV(T.vertexBuffer,T.existingCoordinatesCount*this.wW.attributesPerVertex,this.wW.prepareRenderData(V,F)),T.existingDataPointsCount+=F-B,T.existingCoordinatesCount+=F,T.jointPointsCount+=B,T.lastDataPoint=V[F-1]})}if(o||u||d||f){const x={},v=this.AN.lineStyleSolid(o),b=this.AN.lineFillSolid(o),E=this.AN.lineFillPaletted(o),T=b||E,V=this.AN.jointStyleTriangulatedPoints(u),F=this.AN.jointSizeTriangulated(u),B=this.AN.jointFillSolid(u),z=this.AN.jointFillPaletted(u),L=B||z,A=this.AN.wireframeLineStyleSolid(u),R=this.AN.wireframeFillSolid(u),w=a.getThickness()<0||a.getThickness()===1&&this.Uo("ApplicationType",k=>k.type==="InternalUI")?"primitive":"instanced",C=E?["lookup",E.getLookUpProperty(),E.lut]:"uniform";if(w==="primitive"&&T?x.lines={type:"primitive",fillStyleSolid:b,fillStylePaletted:E,shader:this.RR.oz($["3D"],$.Color({dataType:C}),$.VertexLocation({axisWorldTranslation:Lt(this.dt),normalSource:void 0})),mousePicking:y?{shader:this.RR.oz($["3D"],$.MousePicking,$.VertexLocation({axisWorldTranslation:Lt(this.dt),normalSource:void 0}))}:void 0}:w==="instanced"&&v&&T&&(x.lines={type:"instanced",lineStyleSolid:v,fillStyleSolid:b,fillStylePaletted:E,shader:this.RR.oz($["3D"],$.ColorShaded3D({dataType:C,shadingStyle:this.qp.M().type}),$.LineInstanced3D({axisWorldTranslation:Lt(this.dt)})),geometry:eV(this.RR,v.getThickness()),mousePicking:y?{shader:this.RR.oz($["3D"],$.MousePicking,$.LineInstanced3D({axisWorldTranslation:Lt(this.dt)}))}:void 0}),x.markers=void 0,L&&V){const k=kM(V.getShape(),{cube:()=>sS(this.RR),sphere:()=>iV(this.RR,V)});x.markers={geometry:k,pointStyle:V,pointSizeNWU:typeof F=="number"&&F,pointSizeAxis:typeof F=="object"&&F,fillStyleSolid:B,fillStylePaletted:z,shader:this.RR.oz($["3D"],$.ColorShaded3D({dataType:z?["lookup",z.getLookUpProperty(),z.lut]:"uniform",shadingStyle:this.qp.M().type,wireframe:R!==!1}),$.VertexLocation({offset:{dataType:"uniform",sizeUnit:typeof F=="number"?"nwu":"axis",symmetric:typeof F=="number",halved:!0},axisWorldTranslation:Lt(this.dt),normalSource:k.TY})),mousePicking:y?{shader:this.RR.oz($["3D"],$.MousePicking,$.VertexLocation({offset:{dataType:"uniform",sizeUnit:typeof F=="number"?"nwu":"axis",symmetric:typeof F=="number",halved:!0},axisWorldTranslation:Lt(this.dt),normalSource:void 0}))}:void 0,wireframe:A&&R&&{thickness:A.getThickness(),fillStyleSolid:R}}}this.bG=x}return this.Qa=!1,this.$a=[],this.Xa=0,this.cu=a,this.qY=l,this.qp.i=!1,this.Bo.i=!1,this}zL(t){var e,i;const s=this.RR.gl,{lines:n,markers:a}=this.bG,o=this.qp.M(),l=t===1?(e=n==null?void 0:n.mousePicking)===null||e===void 0?void 0:e.shader:n==null?void 0:n.shader;if(n&&l&&n.type==="instanced"){const d=l,{geometry:f,lineStyleSolid:y,fillStyleSolid:m,fillStylePaletted:S}=n;this.RR.aV(d,(x,v,b)=>{let E=!1;if(this.RR.jR(d).IV(x("uScale"),this.BY.aE.fV()).IV(x("uDisp"),this.BY.aE.AV()).DV(x("uViewProjectionMatrix"),this.UY).dV(x("uOffsetWU"),this.ks.Op(y.getThickness())).dV(x("uIsHighlighted"),t===1||t===2?0:this.zo).AR(x("uHighlightColorOffset"),t===1||t===2?$e:this.Go).dV(x("uRenderEffectMask"),t===2?1:0),t!==1&&o.type==="phong"&&this.RR.IV(x("uCameraLoc"),this.YY).IV(x("uLightLoc"),this.HY).dV(x("uAmbientReflection"),o.ambientReflection).dV(x("uSpecularReflection"),o.specularReflection).dV(x("uDiffuseReflection"),o.diffuseReflection).dV(x("uShininess"),o.shininess).AR(x("uLightColor"),o.specularColor).AR(x("uAmbientColor"),o.ambientColor),t===1)this.RR.AR(x("uColor"),this.mN);else if(m)this.RR.AR(x("uColorDiffuse"),m.getColor());else if(S){const T=tr(S,this,void 0);if(!T&&S.lut.percentageValues)return!1;this.RR.LO(b,S.lut,T)}return this.QM.forEach(T=>{s.bindBuffer(s.ARRAY_BUFFER,T.vertexBuffer);const V=v("aLocationA"),F=v("aLocationB");s.vertexAttribPointer(V,3,s.FLOAT,!1,3*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),this.RR.UV(V,1),s.enableVertexAttribArray(V),s.vertexAttribPointer(F,3,s.FLOAT,!1,3*Float32Array.BYTES_PER_ELEMENT,3*Float32Array.BYTES_PER_ELEMENT),this.RR.UV(F,1),s.enableVertexAttribArray(F),f.jR(b).Ky(T.existingCoordinatesCount-1),E=!0}),E})}if(n&&l&&n.type==="primitive"){const d=l,{fillStyleSolid:f,fillStylePaletted:y}=n;this.RR.aV(d,(m,S,x)=>{let v=!1;if(this.RR.jR(d).IV(m("uScale"),this.BY.aE.fV()).IV(m("uDisp"),this.BY.aE.AV()).DV(m("uViewProjectionMatrix"),this.UY).dV(m("uIsHighlighted"),t===1||t===2?0:this.zo).AR(m("uHighlightColorOffset"),t===1||t===2?$e:this.Go).dV(m("uRenderEffectMask"),t===2?1:0),t===1)this.RR.AR(m("uColor"),this.mN);else if(f)this.RR.AR(m("uColor"),f.getColor());else if(y){const b=tr(y,this,void 0);if(!b&&y.lut.percentageValues)return!1;this.RR.LO(x,y.lut,b)}return this.QM.forEach(b=>{this.RR.lV(b.vertexBuffer,void 0,{location:S("aPos"),size:3}).Ky(s.LINE_STRIP,b.existingCoordinatesCount),v=!0}),v})}const u=t===1?(i=a==null?void 0:a.mousePicking)===null||i===void 0?void 0:i.shader:a==null?void 0:a.shader;if(a&&u){const d=u,{geometry:f,fillStyleSolid:y,fillStylePaletted:m,pointSizeAxis:S,pointSizeNWU:x,wireframe:v}=a;this.RR.aV(d,(b,E,T,V)=>{let F=!1;if(this.RR.jR(d).IV(b("uScale"),this.BY.aE.fV()).IV(b("uDisp"),this.BY.aE.AV()).DV(b("uViewProjectionMatrix"),this.UY).dV(V("uRatioNwuWu"),this.BY.iH()).dV(b("uIsHighlighted"),t===1||t===2?0:this.zo).AR(b("uHighlightColorOffset"),t===1||t===2?$e:this.Go).dV(b("uRenderEffectMask"),t===2?1:0),t!==1&&o.type==="phong"&&this.RR.IV(b("uCameraLoc"),this.YY).IV(b("uLightLoc"),this.HY).dV(b("uAmbientReflection"),o.ambientReflection).dV(b("uSpecularReflection"),o.specularReflection).dV(b("uDiffuseReflection"),o.diffuseReflection).dV(b("uShininess"),o.shininess).AR(b("uLightColor"),o.specularColor).AR(b("uAmbientColor"),o.ambientColor),t===1)this.RR.AR(b("uColor"),this.mN);else if(y)this.RR.AR(b("uColorDiffuse"),y.getColor());else if(m){const B=tr(m,this,void 0);if(!B&&m.lut.percentageValues)return!1;this.RR.LO(T,m.lut,B)}return v&&t!==1&&this.RR.dV(b("uWireframeThickness"),v.thickness).AR(b("uWireframeColor"),v.fillStyleSolid.getColor()),S!==!1&&this.RR.IV(b("uOffsetAxis"),[S.x,S.y,S.z]),x!==!1&&this.RR.dV(b("uOffsetNWU"),x),this.QM.forEach(B=>{this.RR.lV(B.vertexBuffer,1,{location:E("aPos"),size:3}),f.Ky(T,B.existingCoordinatesCount,o.type==="phong"&&t!==1,!!v&&t!==1),F=!0}),F})}return this}nl(t,e){Array.isArray(t)||(t=[t]),this.$a=ls(this.$a,t,{canReturnB:!0}),this.Xa+=t.length;const i=e||Cp(t);return this.ja=this.ja?Nf(this.ja,i):i,this}Re(t){return this.lu=typeof t=="function"?t(this.lu):t,this}uu(){return this.lu}Rp(t){return this.mS=typeof t=="function"?t(this.mS):t,this}sH(){return this.mS}bt(){return this.ja?Math.max(this.ja.max.x,this.Ya.max.x):this.Ya.max.x}vt(){return this.ja?Math.min(this.ja.min.x,this.Ya.min.x):this.Ya.min.x}Mt(){return this.ja?Math.max(this.ja.max.y,this.Ya.max.y):this.Ya.max.y}xt(){return this.ja?Math.min(this.ja.min.y,this.Ya.min.y):this.Ya.min.y}aS(){return this.ja?Math.max(this.ja.max.z,this.Ya.max.z):this.Ya.max.z}lS(){return this.ja?Math.min(this.ja.min.z,this.Ya.min.z):this.Ya.min.z}vl(){return Bs(this.lu)}bl(){return Bs(this.lu)}uS(){return Bs(this.lu)}tl(){return this.yu}qa(){return this.$a}ol(){return this.Ha}al(){return this.Xa}Nt(){return this.Qa=!0,this.yu.length=0,this.Ha=0,this.$a=[],this.Xa=0,this.Ya=xr,this.ja=void 0,this}dispose(){return super.dispose(),this.vW.dW(),this.bG={},this}VR(){return this.dispose(),this}}const eV=(r,t)=>dE(r,t>50?20:t>20?16:t>10?12:t>5?8:6),iV=(r,t)=>{const e=t.getSize();return fE(r,typeof e=="number"?e>50?20:e>20?16:e>10?12:e>5?8:6:20)};class sV extends go{constructor(t,e,i,s,n){super(t,e,i,s,n),this.DY="disabled",this.eH=!1,this.hH=!1,this.rH={x:1,y:1,z:1},this.Dv={x:0,y:0,z:0},this.Pv={x:0,y:0,z:0},this.Bv={x:0,y:0,z:0},this.Lv={x:1,y:1,z:1},this.nH=Ve.projectionOrthographic(-1,1,-1,1,1,-1),this.oH=Ve.projectionOrthographic(-1,1,-1,1,1,-1),this.aH=!1,this.AN=Cs({fillStyleSolid:()=>ue(this.be)&&this.be,fillStyleValuePalette:()=>Ti(this.be)&&this.be.lookUpProperty==="value"&&this.be}),this.be=As.fillStyle,this.qp.S(Pl)}Ps(t){var e;const i=this.Wz(),s=this.Bo.M(),n=this.Bo.i,a=this.ta();this.AN.fillStyleSolid(a);const o=this.AN.fillStyleValuePalette(a),l=this.Bv,u=this.Lv;if(this.eH&&this.lH&&(this.lG=this.RR.nV(this.lH.vertices,void 0,this.lG),this.uG=this.RR.OV(this.lH.indices,this.uG),this.uH=this.lH.indices.length),this.qp.M().type==="phong"&&(i||this.eH)&&(!((e=this.lH)===null||e===void 0)&&e.normals)&&(this.cH=this.RR.nV(this.lH.normals,void 0,this.cH)),!this.dH&&o&&o.lookUpProperty==="value"&&this.lH&&(this.dH=new Float32Array(this.lH.vertices.length/3),this.hH=!0),this.dH&&this.hH&&(this.fH=this.RR.nV(this.dH,void 0,this.fH)),i||a||n){if(o&&o.lookUpProperty!=="value")throw new Error("LightningChart JS MeshModel3D does not support look up by x/y/z. Must be value");this.cE=this.RR.oz($["3D"],$.ColorShaded3D({dataType:o?["lookup","value",o.lut]:"uniform",shadingStyle:this.qp.M().type,wireframe:!1}),$.Model3D({normalSource:this.qp.M().type==="phong"?"attribute":void 0})),this.yY=s?this.RR.oz($["3D"],$.MousePicking,$.Model3D({normalSource:void 0})):void 0}if(this.aH){const d=Ve.projectionOrthographic(-1,1,-1,1,1,-1);this.oH=Ve.rotateXYZ(d,l),this.nH=Ve.translate(d,u.x/2,u.y/2,u.z/2),this.nH=Ve.rotateXYZ(this.nH,l),this.nH=Ve.translate(this.nH,-u.x/2,-u.y/2,-u.z/2),this.aH=!1}return this.qp.i=!1,this.ha(this.be),this.Bo.i=!1,this.eH=!1,this.hH=!1,this}zL(t){const e=t===1?this.yY:this.cE,i=t===1,s=this.uG,n=this.uH,a=this.lG,o=this.cH,l=this.fH,u=this.Dv,d=this.Pv,f=this.rH,y=this.Lv,m=this.nH,S=this.oH,x=this.AN.fillStyleValuePalette(!1),v=this.AN.fillStyleSolid(!1),b=this.qp.M(),E={location:void 0,size:1};return e&&a&&s&&n?(this.RR.aV(e,(T,V,F,B)=>{if(this.RR.jR(e).IV(T("uScale"),this.BY.aE.fV()).IV(T("uDisp"),this.BY.aE.AV()).DV(T("uViewProjectionMatrix"),this.UY).dV(T("uIsHighlighted"),t===1||t===2?0:this.zo).AR(T("uHighlightColorOffset"),this.Go).dV(T("uRenderEffectMask"),t===2?1:0),i)this.RR.AR(T("uColor"),this.mN);else{if(this.be===Ft)return!1;if(v)this.RR.AR(T("uColorDiffuse"),v.getColor());else if(x){if(!l)return!1;const z=x.getPalette();E.location=V("aLookupValue"),this.RR.LO(F,z,void 0).lV(l,void 0,E)}}return b.type!=="phong"||i||(this.RR.IV(T("uCameraLoc"),this.YY).IV(T("uLightLoc"),this.HY).dV(T("uAmbientReflection"),b.ambientReflection).dV(T("uSpecularReflection"),b.specularReflection).dV(T("uDiffuseReflection"),b.diffuseReflection).dV(T("uShininess"),b.shininess).AR(T("uLightColor"),b.specularColor).AR(T("uAmbientColor"),b.ambientColor).DV(T("uModelRotationNormals"),S),o&&this.RR.lV(o,void 0,{location:F.attribute("aNormal"),size:3})),this.RR.DV(T("uModelRotation"),m).IV(T("uModelScale"),[f.x,f.y,f.z]).IV(T("uLocationAxis"),[u.x,u.y,u.z]).IV(T("uModelAlignment"),[d.x,d.y,d.z]).IV(T("uModelSize"),[y.x,y.y,y.z]),this.RR.lV(a,0,{location:F.attribute("aGeoPos"),size:3}).XV(s).ZV(n,this.RR.gl.TRIANGLES),!0}),this):this}dispose(){return super.dispose(),this.lG&&(this.RR.yV(this.lG),this.lG=void 0),this.uG&&(this.RR.yV(this.uG),this.uG=void 0),this.cH&&(this.RR.yV(this.cH),this.cH=void 0),this.fH&&(this.RR.yV(this.fH),this.fH=void 0),this.cE=void 0,this.yY=void 0,this.lH=void 0,this.dH=void 0,this}VR(){return this.dispose(),this}Ev(t){return this.lH=t,this.eH=!0,this.Lv=t.modelSize,this}Vv(t){return this.dH=t,this.hH=!0,this}Ce(t){return this.be=vl(this.be,t),this}Eh(){return this.be}Ov(t){return this.rH=t,this}fV(){return this.rH}Nv(t){return this.Dv=t,this}Gv(t){return this.Pv=t,this}Wv(t){return this.Bv=t,this.aH=!0,this}Uv(t){return this.DY=t,this}Yv(){return this.DY}bt(){return kt}vt(){return bt}Mt(){return kt}xt(){return bt}aS(){return kt}lS(){return bt}vl(){return 0}bl(){return 0}uS(){return 0}ta(){return bl(this.ia,this.be)}ha(t){this.ia=t}}class rV extends go{constructor(t,e,i,s,n,a){super(t,e,i,s,n),this.DY="cull-back",this.QM=[],this.vW=new eS(this.QM,b=>b.vertexBuffer&&this.RR.yV(b.vertexBuffer),!1),this.yu=[],this.Ha=0,this.$a=[],this.Xa=0,this.Ya=xr,this.ja=xr,this.Qa=!1,this.AN=Cs({fillStyleSolid:()=>{const b=this.SS.getFillStyle();return ue(b)&&b},fillStyleIndividual:()=>{const b=this.SS.getFillStyle();return ws(b)&&b},fillStylePalette:()=>{const b=this.SS.getFillStyle();return Ti(b)&&b},triangulatedPointStyle:()=>{const b=this.SS;return va(b)&&b},wireframeLineStyleSolid:()=>{const b=va(this.SS)&&this.SS,E=b&&b.getWireframeStyle();return Ss(E)&&E},wireframeFillStyleSolid:()=>{const b=va(this.SS)&&this.SS,E=b&&b.getWireframeStyle(),T=E&&E.getFillStyle();return ue(T)&&T}}),this.Ja=void 0,this.Un=a,this.SS=As.pointStyle3D,this.qp.S(Pl);const o=(a==null?void 0:a.individualPointColorEnabled)===!0,l=(a==null?void 0:a.individualPointSizeEnabled)===!0,u=(a==null?void 0:a.individualLookupValuesEnabled)===!0,d=(a==null?void 0:a.individualPointSizeAxisEnabled)===!0;let f,y,m,S,x=0;x+=3,o&&(f=x,x+=4),l&&(y=x,x+=1),u&&(m=x,x+=1),d&&(S=x,x+=3);const v=((b,E,T,V)=>b||E||T||V?!b||E||T||V?b||!E||T||V?b||E||!T||V?b||E||T||!V?(F,B,z)=>{const L=3+(b?4:0)+(E?1:0)+(T?1:0)+(V?3:0),A=F.length,R=new Float32Array(A*L);let w=0,C=w;for(let k=0;k<A;k+=1){const _=F[k];R[C+0]=_.x,R[C+1]=_.y,R[C+2]=_.z,C+=L}if(w+=3,b){const k=z&&ws(z)&&z.getFallbackColor()||to;C=w;for(let _=0;_<A;_+=1){const X=F[_].color||k;R[C+0]=X.r,R[C+1]=X.g,R[C+2]=X.b,R[C+3]=X.a,C+=L}w+=4}if(E){const k=B&&B.getSize();let _=1;typeof k=="number"&&(_=k),C=w;for(let X=0;X<A;X+=1){const N=F[X],U=N.size!==void 0?N.size:_;R[C+0]=U,C+=L}w+=1}if(T){C=w;for(let k=0;k<A;k+=1){const _=F[k];R[C+0]=_.value!==void 0?_.value:-34028234663852886e22,C+=L}w+=1}if(V){const k=B&&B.getSize();let _={x:1,y:1,z:1};typeof k=="object"&&(_=k),C=w;for(let X=0;X<A;X+=1){const N=F[X],U=N.sizeAxisX!==void 0?N.sizeAxisX:_.x,O=N.sizeAxisY!==void 0?N.sizeAxisY:_.y,W=N.sizeAxisZ!==void 0?N.sizeAxisZ:_.z;R[C+0]=U,R[C+1]=O,R[C+2]=W,C+=L}w+=3}return R}:(F,B,z)=>((L,A)=>{const R=A&&A.getSize();let w={x:1,y:1,z:1};typeof R=="object"&&(w=R);const C=L.length,k=new Float32Array(6*C);let _=0;for(let X=0;X<C;X+=1){const N=L[X];k[_+0]=N.x,k[_+1]=N.y,k[_+2]=N.z;const U=N.sizeAxisX!==void 0?N.sizeAxisX:w.x,O=N.sizeAxisY!==void 0?N.sizeAxisY:w.y,W=N.sizeAxisZ!==void 0?N.sizeAxisZ:w.z;k[_+3]=U,k[_+4]=O,k[_+5]=W,_+=6}return k})(F,B):(F,B,z)=>(L=>{const A=L.length,R=new Float32Array(4*A);for(let w=0,C=0;w<A;w+=1){const k=L[w];R[C+0]=k.x,R[C+1]=k.y,R[C+2]=k.z,R[C+3]=k.value!==void 0?k.value:-34028234663852886e22,C+=4}return R})(F):(F,B,z)=>((L,A)=>{const R=A&&A.getSize();let w=1;typeof R=="number"&&(w=R);const C=L.length,k=new Float32Array(4*C);for(let _=0,X=0;_<C;_+=1){const N=L[_];k[X+0]=N.x,k[X+1]=N.y,k[X+2]=N.z;const U=N.size!==void 0?N.size:w;k[X+3]=U,X+=4}return k})(F,B):(F,B,z)=>((L,A)=>{const R=A&&ws(A)&&A.getFallbackColor()||to,w=L.length,C=new Float32Array(7*w);for(let k=0,_=0;k<w;k+=1){const X=L[k];C[_+0]=X.x,C[_+1]=X.y,C[_+2]=X.z;const N=X.color||R;C[_+3]=N.r,C[_+4]=N.g,C[_+5]=N.b,C[_+6]=N.a,_+=7}return C})(F,z):(F,B,z)=>Ep(F))(o,l,u,d);this.wW={individualPointColorEnabled:o,individualPointSizeEnabled:l,individualLookupValuesEnabled:u,individualPointSizeAxisEnabled:d,attributesPerVertex:x,attributeOffsetCoordinate:0,attributeOffsetColor:f,attributeOffsetSize:y,attributeOffsetLookUpValue:m,attributeOffsetPointSize3D:S,prepareRenderData:(b,E)=>v(b,this.SS,this.SS.fillStyle)}}Ps(t){const e=this.Qa,i=this.$a,s=this.Xa,n=s>0,a=this.SS,o=this.SS!==this.AH,l=this.Bo.M(),u=this.Bo.i,d=this.Wz();this.ja&&(this.Ya=Nf(this.Ya,this.ja),this.ja=void 0),n&&(this.yu=ls(this.yu,i,{canReturnB:!0}),this.Ha+=s);let f=i,y=s;if(e&&(this.QM.forEach(E=>{E.existingDataPointsCount=0,E.existingCoordinatesCount=0,E.boundaries=xr}),this.vW.cW(),f=this.yu,y=this.Ha),y>0){const E=Math.floor(this.rN.tH/(this.wW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT)),T=Jt(y,1e5,E);this.vW.oW(f,T,(V,F,B)=>({existingDataPointsCount:B,existingCoordinatesCount:B,allocatedCoordinatesCount:V,boundaries:xr,vertexBuffer:this.RR.EV(V*this.wW.attributesPerVertex,this.wW.prepareRenderData(F,B))}),(V,F,B)=>{this.RR.zV(V.vertexBuffer,V.existingCoordinatesCount*this.wW.attributesPerVertex,this.wW.prepareRenderData(F,B)),V.existingDataPointsCount+=B,V.existingCoordinatesCount=V.existingDataPointsCount})}const m=a.getFillStyle(),S=this.AN.fillStyleSolid(o),x=this.AN.fillStyleIndividual(o),v=this.AN.fillStylePalette(o),b=m===Ft&&Ft;if(o||d||u){let E;const T=a.getSize(),V=this.wW.individualPointColorEnabled,F=this.wW.individualPointSizeEnabled,B=this.wW.individualPointSizeAxisEnabled,z=this.wW.individualLookupValuesEnabled;if(x&&!V){const R="LCJS misusage error: Series individualPointColorEnabled flag must be set if using IndividualPointFill !";throw nt.alert(R),new Error(R)}if(v&&v.getLookUpProperty()==="value"&&!z){const R='LCJS misusage error: Series individualLookupValuesEnabled flag must be set if using PalettedFill with lookUpProperty="value" !';throw nt.alert(R),new Error(R)}const L=this.AN.wireframeLineStyleSolid(o),A=this.AN.wireframeFillStyleSolid(o);if(S||x||v||A){const R=x?"attribute":v?["lookup",v.getLookUpProperty(),v.lut]:"uniform",w=F&&typeof T=="number",C=B&&typeof T=="object",k=w||C?"attribute":"uniform";if(va(a)){const _=kM(a.getShape(),{cube:()=>sS(this.RR),sphere:()=>nV(this.RR,a,F)});E={type:"instanced",shader:this.RR.oz($["3D"],$.ColorShaded3D({dataType:R,shadingStyle:this.qp.M().type,wireframe:A!==!1}),$.VertexLocation({offset:{dataType:k,sizeUnit:typeof T=="number"?"nwu":"axis",halved:!0,symmetric:typeof T=="number"},axisWorldTranslation:Lt(this.dt),normalSource:_.TY})),pointStyle:a,useIndividualPointSize:w,useIndividualPointSize3D:C,pointSizeNWU:typeof T=="number"&&T,pointSizeAxis:typeof T=="object"&&T,fillStyleSolid:S,fillStyleIndividual:x,fillStylePaletted:v,fillStyleEmpty:b,mousePickingShader:l&&this.RR.oz($["3D"],$.MousePicking,$.VertexLocation({offset:{dataType:k,sizeUnit:typeof T=="number"?"nwu":"axis",halved:!0,symmetric:typeof T=="number"},axisWorldTranslation:Lt(this.dt),normalSource:void 0})),geometry:_,wireframe:L&&A&&{thickness:L.getThickness()<0?1:L.getThickness(),fillStyleSolid:A}}}else Yv(a)&&typeof T=="number"&&(E={type:"primitive",shader:this.RR.oz($["3D"],$.PointSize(k),$.Color({dataType:R}),$.VertexLocation({axisWorldTranslation:Lt(this.dt),normalSource:void 0})),pointStyle:a,pointSizePixels:T,useIndividualPointSize:w,fillStyleSolid:S,fillStyleIndividual:x,fillStylePaletted:v,mousePickingShader:l&&this.RR.oz($["3D"],$.PointSize(k),$.MousePicking,$.VertexLocation({axisWorldTranslation:Lt(this.dt),normalSource:void 0}))})}this.bG=E}if(this.Ja===void 0&&v&&v.lookUpProperty==="value"&&v.lut.percentageValues){let E=kt,T=bt;for(let V=0;V<this.yu.length;V+=1){const F=this.yu[V];F.value!==void 0&&F.value<T&&(T=F.value),F.value!==void 0&&F.value>E&&(E=F.value)}this.Ja={min:T,max:E}}return this.Qa=!1,this.$a=[],this.Xa=0,this.AH=a,this.qp.i=!1,this}zL(t){const e=this.RR.gl,i=this.bG;if(!i)return this;const s=t===1?i.mousePickingShader:i.shader;if(!s)return this;const n=this.qp.M(),{fillStyleSolid:a,fillStylePaletted:o,useIndividualPointSize:l}=i,u=i.type==="instanced"&&i.useIndividualPointSize3D,d=i.type==="instanced"&&i.wireframe;return this.RR.aV(s,(f,y,m,S)=>{let x=!1;if(this.RR.jR(s).IV(f("uScale"),this.BY.aE.fV()).IV(f("uDisp"),this.BY.aE.AV()).DV(f("uViewProjectionMatrix"),this.UY).dV(f("uIsHighlighted"),t===1||t===2?0:this.zo).AR(f("uHighlightColorOffset"),t===1||t===2?$e:this.Go).dV(f("uRenderEffectMask"),t===2?1:0),i.type==="instanced"){const{pointSizeAxis:v,pointSizeNWU:b}=i;v!==!1&&u===!1&&this.RR.IV(f("uOffsetAxis"),[v.x,v.y,v.z]),b!==!1&&l===!1&&this.RR.dV(f("uOffsetNWU"),b).dV(S("uRatioNwuWu"),this.BY.iH())}else if(i.type==="primitive"){const{pointSizePixels:v}=i;l||this.RR.dV(f("uPointSize"),v).dV(f("uDevicePixelRatio"),this.RR.$z())}if(t===1)this.RR.AR(f("uColor"),this.mN);else if(i.type==="instanced"?(n.type==="phong"&&this.RR.IV(f("uCameraLoc"),this.YY).IV(f("uLightLoc"),this.HY).dV(f("uAmbientReflection"),n.ambientReflection).dV(f("uSpecularReflection"),n.specularReflection).dV(f("uDiffuseReflection"),n.diffuseReflection).dV(f("uShininess"),n.shininess).AR(f("uLightColor"),n.specularColor).AR(f("uAmbientColor"),n.ambientColor),d&&this.RR.dV(f("uWireframeThickness"),d.thickness).AR(f("uWireframeColor"),d.fillStyleSolid.getColor()),a&&this.RR.AR(f("uColorDiffuse"),a.getColor()),i.fillStyleEmpty&&this.RR.AR(f("uColorDiffuse"),$e)):i.type==="primitive"&&a&&this.RR.AR(f("uColor"),a.getColor()),o){const v=tr(o,this,this.Ja);if(!v&&o.lut.percentageValues)return!1;this.RR.LO(m,o.lut,v)}return this.QM.forEach((v,b)=>{e.bindBuffer(e.ARRAY_BUFFER,v.vertexBuffer);const E=y("aPos");if(e.vertexAttribPointer(E,3,e.FLOAT,!1,this.wW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.wW.attributeOffsetCoordinate*Float32Array.BYTES_PER_ELEMENT),i.type==="instanced"&&this.RR.UV(E,1),e.enableVertexAttribArray(E),i.fillStyleIndividual&&this.wW.attributeOffsetColor!==void 0&&t!==1){const T=y("aColor");e.vertexAttribPointer(T,4,e.FLOAT,!1,this.wW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.wW.attributeOffsetColor*Float32Array.BYTES_PER_ELEMENT),i.type==="instanced"&&this.RR.UV(T,1),e.enableVertexAttribArray(T)}if(l&&this.wW.attributeOffsetSize!==void 0){i.type==="instanced"?this.RR.dV(S("uRatioNwuWu"),this.BY.iH()):i.type==="primitive"&&this.RR.dV(f("uDevicePixelRatio"),this.RR.$z());const T=y(i.type==="instanced"?"aOffsetNWU":"aPointSize");e.vertexAttribPointer(T,1,e.FLOAT,!1,this.wW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.wW.attributeOffsetSize*Float32Array.BYTES_PER_ELEMENT),i.type==="instanced"&&this.RR.UV(T,1),e.enableVertexAttribArray(T)}if(u&&this.wW.attributeOffsetPointSize3D!==void 0&&i.type==="instanced"){const T=y("aOffsetAxis");e.vertexAttribPointer(T,3,e.FLOAT,!1,this.wW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.wW.attributeOffsetPointSize3D*Float32Array.BYTES_PER_ELEMENT),i.type==="instanced"&&this.RR.UV(T,1),e.enableVertexAttribArray(T)}if(i.fillStylePaletted&&i.fillStylePaletted.getLookUpProperty()==="value"&&this.wW.attributeOffsetLookUpValue!==void 0&&t!==1){const T=y("aLookupValue");e.vertexAttribPointer(T,1,e.FLOAT,!1,this.wW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.wW.attributeOffsetLookUpValue*Float32Array.BYTES_PER_ELEMENT),i.type==="instanced"&&this.RR.UV(T,1),e.enableVertexAttribArray(T)}i.type==="instanced"?(i.geometry.Ky(m,v.existingCoordinatesCount,n.type==="phong"&&t!==1,!!d&&t!==1),x=!0):i.type==="primitive"&&(this.RR.Ky(e.POINTS,v.existingCoordinatesCount),x=!0)}),x}),this}nl(t,e){Array.isArray(t)||(t=[t]),this.$a=ls(this.$a,t,{canReturnB:!0}),this.Xa+=t.length;const i=e||Cp(t);return this.ja=this.ja?Nf(this.ja,i):i,this.Ja=void 0,this}vS(t){return this.SS=typeof t=="function"?t(this.SS):t,this}gH(){return this.SS}bt(){return this.ja?Math.max(this.ja.max.x,this.Ya.max.x):this.Ya.max.x}vt(){return this.ja?Math.min(this.ja.min.x,this.Ya.min.x):this.Ya.min.x}Mt(){return this.ja?Math.max(this.ja.max.y,this.Ya.max.y):this.Ya.max.y}xt(){return this.ja?Math.min(this.ja.min.y,this.Ya.min.y):this.Ya.min.y}aS(){return this.ja?Math.max(this.ja.max.z,this.Ya.max.z):this.Ya.max.z}lS(){return this.ja?Math.min(this.ja.min.z,this.Ya.min.z):this.Ya.min.z}vl(){const t=this.SS,e=t.getSize();return typeof e=="number"?va(t)?e/2:Yv(t)?5:0:0}bl(){return this.vl()}uS(){return this.vl()}tl(){return this.yu}qa(){return this.$a}ol(){return this.Ha}al(){return this.Xa}Nt(){return this.Qa=!0,this.yu.length=0,this.Ha=0,this.$a=[],this.Xa=0,this.Ya=xr,this.ja=void 0,this.Ja=void 0,this}dispose(){return super.dispose(),this.vW.dW(),this.bG=void 0,this}VR(){return this.dispose(),this}}const nV=(r,t,e)=>{const i=t.getSize();return fE(r,typeof i=="number"?e||i>=50?20:i>=10?10:i>=3?5:3:32)};class gE extends go{constructor(t,e,i,s,n,a){super(t,e,i,n,a),this.DY="disabled",this.be=As.fillStyle,this.gv=As.lineStyle,this.uU=Xt("bilinear"),this.mH=[],this.yH=void 0,this.bG={},this.pH=!1,this.AN=Cs({fillStyleSolid:()=>ue(this.be)&&this.be,fillStylePaletted:()=>Ti(this.be)&&this.be,wireframeStyleLine:()=>Ss(this.gv)&&this.gv,wireframeStyleFill:()=>{const y=this.gv&&this.gv.getFillStyle();return ue(y)&&y}}),this.Pi={x:0,z:0},this.$w={x:1,z:1},this.qp.S(Il);const o=s.dataOrder==="columns"?s.columns:s.rows,l=s.dataOrder==="columns"?s.rows:s.columns;this.Un={...s,primaryDimensionVectorsCount:o,secondaryDimensionVectorsCount:l},this.SH=new Array(this.Un.primaryDimensionVectorsCount).fill(void 0),this.I_=new D0(this.rN,t.rN.CU,t.us.dt,se,[],this.Un,-1,to).mv(At),this.I_.fU=V4;const u=this.I_.gU.gridTiles.map(y=>{const m=y.sizeHeatmapDataVectors,S=y.sizeUniqueHeatmapDataVectors,x=y.iFirstVector,v=y.iFirstUniqueVector,b=new Float32Array(y.sizeHeatmapDataVectors.primary*y.sizeHeatmapDataVectors.secondary),E={primary:y.sizeHeatmapDataVectors.primary-1,secondary:y.sizeHeatmapDataVectors.secondary-1};return{iFirstVector:y.iFirstVector,iFirstUniqueVector:y.iFirstUniqueVector,sizeHeatmapDataVectors:y.sizeHeatmapDataVectors,sizeUniqueHeatmapDataVectors:y.sizeUniqueHeatmapDataVectors,iFirstGeometryVector:x,iFirstGeometryUniqueVector:v,sizeGeometryDataVectors:m,sizeUniqueGeometryDataVectors:S,heightmapData:b,normalmapSize:E}}),d=this.I_.gU.gridTileSizes.map(y=>{const m=u.filter(x=>x.sizeHeatmapDataVectors.primary===y.sizeHeatmapData.primary&&x.sizeHeatmapDataVectors.secondary===y.sizeHeatmapData.secondary),S=m[0].sizeGeometryDataVectors;return{...y,tiles:m,sizeGeometryData:S}}),f=u.reduce((y,m)=>{const S=m.sizeHeatmapDataVectors.primary,x=m.sizeHeatmapDataVectors.secondary,v=S*x;return v>y.cells?{primary:S,secondary:x,cells:v}:y},{primary:0,secondary:0,cells:0});this.vH={gridTiles:u,gridTileSizes:d,largestGridTileSize:f},this.Sv(this.Pi,this.$w)}bH(t){this.xH=t,this.yH=void 0}Sv(t,e){this.Pi=t,this.$w=e;const i=this.Un,s={min:{x:Math.min(this.Pi.x,this.Pi.x+(i.columns-1)*this.$w.x),z:Math.min(this.Pi.z,this.Pi.z+(i.rows-1)*this.$w.z)},max:{x:Math.max(this.Pi.x,this.Pi.x+(i.columns-1)*this.$w.x),z:Math.max(this.Pi.z,this.Pi.z+(i.rows-1)*this.$w.z)}},n=new Map;return this.vH.gridTiles.forEach(a=>{const o=this.Un.dataOrder==="columns"?{x:this.$w.x*(a.sizeHeatmapDataVectors.primary-1),z:this.$w.z*(a.sizeHeatmapDataVectors.secondary-1)}:{x:this.$w.x*(a.sizeHeatmapDataVectors.secondary-1),z:this.$w.z*(a.sizeHeatmapDataVectors.primary-1)},l=this.Un.dataOrder==="columns"?{x:this.Pi.x+this.$w.x*a.iFirstVector.primary,z:this.Pi.z+this.$w.z*a.iFirstVector.secondary}:{x:this.Pi.x+this.$w.x*a.iFirstVector.secondary,z:this.Pi.z+this.$w.z*a.iFirstVector.primary};n.set(a,{sizeAxis:o,startLocationAxis:l})}),this.bU={MH:s,tilesInfo:n},this}vv(){return{start:this.Pi,step:this.$w,end:{x:this.Pi.x+this.$w.x*this.Un.columns,z:this.Pi.z+this.$w.z*this.Un.rows}}}Ps(t){const e=this.mH,i=bl(this.ia,this.be),s=this.AN.fillStyleSolid(i),n=this.AN.fillStylePaletted(i),a=this.gv,o=this.gv!==this.mU,l=this.AN.wireframeStyleLine(o),u=this.AN.wireframeStyleFill(o),d=u!==!1,f=this.uU.i,y=this.uU.M(),m=this.qp.M(),S=this.Wz(),x=this.Bo.M();this.I_.Ps();const v=this.I_.yU;if(!v)return this;this._H=this._H||this.wH(v);const b=this._H;this.CH(b);const E=aE(e,b,void 0,V=>V.sizeGeometryDataVectors);if(E.size>0&&(lE(this.RR,E,V=>V.heightmapData,V=>V.heightmapDataTexture),this.pH=!0),m.type==="phong"&&(E.size>0||S)){const V=this.RR.gl,F=this.RR.oz($["2D"],$.DrawToNormalTexture({flipXZ:this.Un.dataOrder==="rows",vertexIdSource:this.RR._O(),normalTextureType:this.RR.gl2?"uint":"ubyte",heightmapTextureType:this.RR.sz?"float":"ubyte",littleEndian:this.RR.IS_MACHINE_LITTLE_ENDIAN}));b.gridTileSizes.forEach(B=>{B.tiles.forEach(z=>{var L;const A=z.normalmapTexture,R=(L=this.bU)===null||L===void 0?void 0:L.tilesInfo.get(z.tileData);if(!A||!R)return;const w={x:z.normalmapSize.secondary,y:z.normalmapSize.primary},C=w.x*w.y;this.RR.oO.zL(()=>{this.RR.aV(F,(k,_,X,N)=>(this.RR.jR(F).wO(X,C).uV(k("uTileDimensionsXZ"),[this.Un.dataOrder==="columns"?B.sizeHeatmapData.primary:B.sizeHeatmapData.secondary,this.Un.dataOrder==="columns"?B.sizeHeatmapData.secondary:B.sizeHeatmapData.primary]).TV(k("uTileDimensions"),[B.sizeHeatmapData.primary,B.sizeHeatmapData.secondary]).uV(k("uTileStartLocationAxisXZ"),[R.startLocationAxis.x,R.startLocationAxis.z]).uV(k("uTileSizeAxisXZ"),[R.sizeAxis.x,R.sizeAxis.z]).cV(k("uHeightmapTexture"),z.heightmapDataTexture,1).Ky(V.POINTS,C),!0))},A,w,void 0,this.us.mn(),0)})})}const T=this.bG;if(i||o||f){const V=l&&u?{wireframeSolid:l,wireframeFillSolid:u}:void 0;s?T.surface={shader:this.RR.oz($["3D"],$.SurfaceGrid({axisWorldTranslation:Lt(this.dt),fillColor:"uniform",interpolation:y==="bilinear"&&"bilinear",flipXZ:this.Un.dataOrder==="rows",shadingStyle:m.type,wireframe:d,instanceIdSource:this.RR.CO(),normalTextureType:this.RR.gl2?"uint":"ubyte",intensityTextureType:this.RR.sz?"float":"ubyte",heightmapTextureType:this.RR.sz?"float":"ubyte",littleEndian:this.RR.IS_MACHINE_LITTLE_ENDIAN})),fill:{fillMode:"solid",fillStyleSolid:s},wireframe:V}:n&&n.getLookUpProperty()==="value"?T.surface={shader:this.RR.oz($["3D"],$.SurfaceGrid({axisWorldTranslation:Lt(this.dt),fillColor:["lookup","value",n.lut],interpolation:y==="bilinear"&&"bilinear",flipXZ:this.Un.dataOrder==="rows",shadingStyle:m.type,wireframe:d,instanceIdSource:this.RR.CO(),normalTextureType:this.RR.gl2?"uint":"ubyte",intensityTextureType:this.RR.sz?"float":"ubyte",heightmapTextureType:this.RR.sz?"float":"ubyte",littleEndian:this.RR.IS_MACHINE_LITTLE_ENDIAN})),fill:{fillMode:"intensity",fillStylePaletted:n},wireframe:V}:n?T.surface={shader:this.RR.oz($["3D"],$.SurfaceGrid({axisWorldTranslation:Lt(this.dt),fillColor:["lookup",n.getLookUpProperty(),n.lut],interpolation:y==="bilinear"&&"bilinear",flipXZ:this.Un.dataOrder==="rows",shadingStyle:m.type,wireframe:d,instanceIdSource:this.RR.CO(),normalTextureType:this.RR.gl2?"uint":"ubyte",intensityTextureType:this.RR.sz?"float":"ubyte",heightmapTextureType:this.RR.sz?"float":"ubyte",littleEndian:this.RR.IS_MACHINE_LITTLE_ENDIAN})),fill:{fillMode:"xyz",fillStylePaletted:n},wireframe:V}:d&&(T.surface={shader:this.RR.oz($["3D"],$.SurfaceGrid({axisWorldTranslation:Lt(this.dt),fillColor:void 0,interpolation:y==="bilinear"&&"bilinear",flipXZ:this.Un.dataOrder==="rows",shadingStyle:m.type,wireframe:d,instanceIdSource:this.RR.CO(),normalTextureType:this.RR.gl2?"uint":"ubyte",intensityTextureType:this.RR.sz?"float":"ubyte",heightmapTextureType:this.RR.sz?"float":"ubyte",littleEndian:this.RR.IS_MACHINE_LITTLE_ENDIAN})),fill:void 0,wireframe:V})}return T.mousePicking=x?this.bG.mousePicking||{shader:this.RR.oz($["3D"],$.SurfaceGrid({axisWorldTranslation:Lt(this.dt),fillColor:"uniform",interpolation:y==="bilinear"&&"bilinear",flipXZ:this.Un.dataOrder==="rows",shadingStyle:"simple",wireframe:!1,instanceIdSource:this.RR.CO(),normalTextureType:this.RR.gl2?"uint":"ubyte",intensityTextureType:this.RR.sz?"float":"ubyte",heightmapTextureType:this.RR.sz?"float":"ubyte",littleEndian:this.RR.IS_MACHINE_LITTLE_ENDIAN}))}:void 0,this.bG=T,this.mH.length=0,this.ia=this.be,this.mU=a,this.qp.i=!1,this}wH(t){const e=this.vH.gridTiles.map(a=>{const o=oE(this.RR,a.sizeHeatmapDataVectors.secondary,a.sizeHeatmapDataVectors.primary),l=t.gridTiles.find(u=>u.iFirstUniqueVector.primary===a.iFirstUniqueVector.primary&&u.iFirstUniqueVector.secondary===a.iFirstUniqueVector.secondary);if(!l)throw new Error("Internal LC JS error prepare surface data 2D render data not found");return{...a,intensityDataTexture:l.intensityDataTexture,heightmapDataTexture:o,normalmap:void 0,tileData:a}}),i=this.vH.gridTileSizes.map(a=>{const o=e.filter(l=>l.sizeHeatmapDataVectors.primary===a.sizeHeatmapData.primary&&l.sizeHeatmapDataVectors.secondary===a.sizeHeatmapData.secondary);return{...a,tiles:o}}),s=this.RR.nV([0,0,1,0,0,1,0,1,1,0,0,1,0,0,1,0,1,0,1,0,1,0,1,0,1,1,1,1,0,0]),n=this.RR.gl.TRIANGLES;return{gridTiles:e,gridTileSizes:i,rectangleLocationsBuffer:s,rectangleLocationsDrawLength:6,rectangleLocationsDrawMode:n}}CH(t){var e;if(this.qp.M().type==="phong")for(let i=0;i<t.gridTiles.length;i+=1){const s=t.gridTiles[i];if(s.normalmapTexture)return;let n;const a=(e=this.RR.gl2)===null||e===void 0?void 0:e.ctx;if(a)n=this.RR.fO(null,a.RGBA_INTEGER,!1,!0,{x:s.normalmapSize.secondary,y:s.normalmapSize.primary},!1,a.UNSIGNED_INT,a.RGBA32UI);else{const o=this.RR.gl;n=this.RR.fO(null,o.RGBA,!1,!0,{x:s.normalmapSize.secondary,y:s.normalmapSize.primary},!1,o.UNSIGNED_BYTE)}s.normalmapTexture=n}else t.gridTiles.forEach(i=>{i.normalmapTexture&&(this.RR.OR(i.normalmapTexture),i.normalmapTexture=void 0)})}zL(t){var e,i,s,n;const a=this.RR.gl,o=this._H;if(!o)return this;const l=this.qp.M(),u=this.bG,d=t===1?(e=u.mousePicking)===null||e===void 0?void 0:e.shader:(i=u.surface)===null||i===void 0?void 0:i.shader;if(!d)return this;const f=t!==1?(s=u.surface)===null||s===void 0?void 0:s.wireframe:void 0,y=t!==1?(n=u.surface)===null||n===void 0?void 0:n.fill:void 0;return this.RR.aV(d,(m,S,x,v)=>{let b=!1;if(this.RR.jR(d).kO(x,this.vH.largestGridTileSize.cells).IV(m("uScale"),this.BY.aE.fV()).IV(m("uDisp"),this.BY.aE.AV()).DV(m("uViewProjectionMatrix"),this.UY).dV(m("uIsHighlighted"),t===1||t===2?0:this.zo).AR(m("uHighlightColorOffset"),t===1||t===2?$e:this.Go).dV(m("uRenderEffectMask"),t===2?1:0),t!==1&&(l.type==="phong"&&this.RR.IV(m("uCameraLoc"),this.YY).IV(m("uLightLoc"),this.HY).dV(m("uAmbientReflection"),l.ambientReflection).dV(m("uSpecularReflection"),l.specularReflection).dV(m("uDiffuseReflection"),l.diffuseReflection).dV(m("uShininess"),l.shininess).AR(m("uLightColor"),l.specularColor).AR(m("uAmbientColor"),l.ambientColor),f)){const{wireframeFillSolid:E,wireframeSolid:T}=f,V=T.getThickness()<0?1:T.getThickness();this.RR.AR(m("uWireframeColor"),E.getColor()).dV(m("uWireframeThickness"),V)}return t===1?this.RR.AR(m("uColorDiffuse"),this.mN):(y==null?void 0:y.fillMode)==="solid"&&this.RR.AR(m("uColorDiffuse"),y.fillStyleSolid.getColor()),o.gridTileSizes.forEach(E=>{this.RR.uV(m("uTileDimensionsXZ"),[this.Un.dataOrder==="columns"?E.sizeHeatmapData.primary:E.sizeHeatmapData.secondary,this.Un.dataOrder==="columns"?E.sizeHeatmapData.secondary:E.sizeHeatmapData.primary]).TV(m("uTileDimensions"),[E.sizeHeatmapData.primary,E.sizeHeatmapData.secondary]),E.tiles.forEach(T=>{var V;const F=(V=this.bU)===null||V===void 0?void 0:V.tilesInfo.get(T.tileData);if(!F)return;let B=0,z=(T.sizeHeatmapDataVectors.primary-1)*(T.sizeHeatmapDataVectors.secondary-1);if(this.xH){const L=this.xH.fill.iFirstPrimary,A=this.xH.fill.iFirstPrimary+this.xH.fill.amountPrimary-1,R=T.iFirstVector.primary,w=T.iFirstVector.primary+T.sizeHeatmapDataVectors.primary-1;if(R>A||w<L)return;const C=((k,_,X,N)=>Qt(Math.max(k,X),Math.min(_,N)))(L,A,R,w);B=(C.min-T.iFirstVector.primary)*(E.sizeGeometryData.secondary-1),z=(C.max-C.min)*(E.sizeGeometryData.secondary-1)}if(!(B<0||z<=0)){if((y==null?void 0:y.fillMode)==="intensity"){const{fillStylePaletted:L}=y,A=this.I_.Ja;this.RR.LO(x,L.lut,A).cV(m("uTileIntensityValues"),T.intensityDataTexture,2).FV(m("uTileBoundsAxisXZ"),[F.startLocationAxis.x,F.startLocationAxis.z,F.sizeAxis.x,F.sizeAxis.z])}if((y==null?void 0:y.fillMode)==="xyz"){const{fillStylePaletted:L}=y,A=L.getLookUpProperty()==="x"?{min:this.vt(),max:this.bt()}:L.getLookUpProperty()==="y"?{min:this.xt(),max:this.Mt()}:L.getLookUpProperty()==="z"?{min:this.lS(),max:this.aS()}:void 0;if(!A&&L.lut.percentageValues)return;this.RR.LO(x,L.lut,A)}t!==1&&this.qp.M().type==="phong"&&T.normalmapTexture&&this.RR.cV(m("uNormalmapTexture"),T.normalmapTexture,3),this.RR.lV(o.rectangleLocationsBuffer,0,{location:S("aGeoCellOffset"),size:2},{location:f?S("aTriangleBary"):void 0,size:3}).BV(m("uBaseInstance"),B).uV(m("uTileStartLocationAxisXZ"),[F.startLocationAxis.x,F.startLocationAxis.z]).uV(m("uTileSizeAxisXZ"),[F.sizeAxis.x,F.sizeAxis.z]).cV(m("uHeightmapTexture"),T.heightmapDataTexture,0).QV(o.rectangleLocationsDrawMode,0,o.rectangleLocationsDrawLength,z),b=!0,a.bindBuffer(a.ARRAY_BUFFER,null)}})}),b}),this}dispose(){return super.dispose(),this.I_.dispose(),this._H&&(this._H.gridTileSizes.forEach(t=>{}),this._H.gridTiles.forEach(t=>{this.RR.OR(t.heightmapDataTexture),t.normalmapTexture&&this.RR.OR(t.normalmapTexture)}),this.RR.yV(this._H.rectangleLocationsBuffer),this._H=void 0),this.bG={},this}VR(){return this.dispose(),this.I_.VR(),this}_v(t){return this.I_._v(t),this}wv(t){this.mH.push(t),hE(this.vH.gridTiles,t,e=>e.heightmapData);for(let e=t.startPrimary;e<t.startPrimary+t.lengthPrimary;e+=1)this.SH[e]=void 0;return this.yH=void 0,this}xv(t){return this.uU.S(t),this}Mv(){return this.uU.M()}Ce(t){return this.be=vl(this.be,t),this.I_.Ce(this.be),this}Eh(){return this.be}mv(t){return this.gv=typeof t=="function"?t(this.gv):t,this}bv(){return this.gv}bt(){var t;return((t=this.bU)===null||t===void 0?void 0:t.MH.max.x)||0}vt(){var t;return((t=this.bU)===null||t===void 0?void 0:t.MH.min.x)||0}Mt(){const t=this.yH||this.kH();return this.yH=t,t.max}xt(){const t=this.yH||this.kH();return this.yH=t,t.min}aS(){var t;return((t=this.bU)===null||t===void 0?void 0:t.MH.max.z)||0}lS(){var t;return((t=this.bU)===null||t===void 0?void 0:t.MH.min.z)||0}vl(){return 0}bl(){return 0}uS(){return 0}kH(){if(this.yH)return this.yH;const t=this.xH?this.xH.fill.iFirstPrimary:0,e=this.xH?t+this.xH.fill.amountPrimary-1:this.Un.primaryDimensionVectorsCount-1;let i=bt,s=kt;return this.vH.gridTiles.forEach(n=>{for(let a=Math.max(t,n.iFirstUniqueVector.primary);a<=Math.min(e,n.iFirstUniqueVector.primary+n.sizeUniqueHeatmapDataVectors.primary-1);a+=1){const o=(a-n.iFirstUniqueVector.primary)*n.sizeHeatmapDataVectors.secondary;let l=this.SH[a];if(l)i=i<l.min?i:l.min,s=s>l.max?s:l.max;else{l={min:bt,max:kt},this.SH[a]=l;for(let u=0;u<n.sizeHeatmapDataVectors.secondary;u+=1){const d=n.heightmapData[o+u];i=i<d?i:d,s=s>d?s:d,l.min=Math.min(l.min,d),l.max=Math.max(l.max,d)}}}}),this.yH={min:i,max:s},this.yH}}class aV extends go{constructor(t,e,i,s,n,a){super(t,e,i,n,a),this.DY="disabled",this.MU=0,this.wU={},this.Pi={x:0,z:0},this.$w={x:1,z:1},this.Un={...s,scrollDimensionSize:s.scrollDimension==="columns"?s.columns:s.rows,staticDimensionSize:s.scrollDimension==="columns"?s.rows:s.columns},this.MH={min:{x:this.Pi.x,z:this.Pi.z},max:{x:s.scrollDimension==="rows"?this.Pi.x+(s.columns-1)*this.$w.x:this.Pi.x,z:s.scrollDimension==="columns"?this.Pi.z+(s.rows-1)*this.$w.z:this.Pi.z}};const o=()=>({shape:new gE(this.BY,se,this.Oo,{columns:s.columns+(s.scrollDimension==="columns"?1:0),rows:s.rows+(s.scrollDimension==="rows"?1:0),dataOrder:s.scrollDimension,heatmapDataType:"intensity"},this.gN,this.mN).setVisible(!1),hasData:!1});this.QM=[o(),o()]}Ps(t){this.QM.forEach(s=>{s.shape.Ps(t)});const e=this.QM.reduce((s,n)=>{var a,o;return s.min=Math.min(s.min,De((a=n.shape.I_.Ja)===null||a===void 0?void 0:a.min,bt)),s.max=Math.max(s.max,De((o=n.shape.I_.Ja)===null||o===void 0?void 0:o.max,kt)),s},{min:bt,max:kt}),i=this.QM.reduce((s,n)=>{var a,o;return s.min=Math.min(s.min,De((a=n.shape.yH)===null||a===void 0?void 0:a.min,bt)),s.max=Math.max(s.max,De((o=n.shape.yH)===null||o===void 0?void 0:o.max,kt)),s},{min:bt,max:kt});return this.QM.forEach(s=>{s.shape.I_.Ja=e,s.shape.yH=i}),this}zL(t){return this.QM.forEach(e=>{e.hasData&&(e.shape.UY=this.UY,e.shape.YY=this.YY,e.shape.HY=this.HY,e.shape.zL(t))}),this}Sv(t,e){return this.Pi=t,this.$w=e,this.QM.forEach(i=>{i.shape.Sv(this.Un.scrollDimension==="columns"?{x:i.shape.vv().start.x,z:this.Pi.z}:{x:this.Pi.x,z:i.shape.vv().start.z},this.$w)}),this.Un.scrollDimension==="columns"?(this.MH.min.z=t.z,this.MH.max.z=this.Pi.z+(this.Un.rows-1)*this.$w.z):(this.MH.min.x=t.x,this.MH.max.x=this.Pi.x+(this.Un.columns-1)*this.$w.x),this}vv(){return{start:this.Pi,step:this.$w}}Nt(){return this.MU=0,this.wU={},this.MH={min:{x:this.Pi.x,z:this.Pi.z},max:{x:this.Un.scrollDimension==="rows"?this.Pi.x+(this.Un.columns-1)*this.$w.x:this.Pi.x,z:this.Un.scrollDimension==="columns"?this.Pi.z+(this.Un.rows-1)*this.$w.z:this.Pi.z}},this.QM.forEach(t=>{t.shape.setVisible(!1),t.shape.pH=!1,t.hasData=!1}),this}Fv(t){var e;const i=this.QM[0],s=this.QM[1],n=t.heightMapValues?t.heightMapValues.length:(e=t.intensityValues)===null||e===void 0?void 0:e.length;let a=0;if(!n)return this;do{const o=Math.floor(this.MU/this.Un.scrollDimensionSize)%this.QM.length,l=this.QM[o],u=this.MU%this.Un.scrollDimensionSize,d=this.Un.scrollDimensionSize-u,f=u===0,y=Math.min(d,n),m=u+y,S=u,x=S+1,v=a,b=a+y,E=this.MU>=this.Un.scrollDimensionSize&&m<=this.Un.scrollDimensionSize-1,T=f;f&&(l.shape.Sv(this.Un.scrollDimension==="columns"?{x:this.Pi.x+(this.MU-1)*this.$w.x,z:this.Pi.z}:{x:this.Pi.x,z:this.Pi.z+(this.MU-1)*this.$w.z},this.$w),l.shape.setVisible(!0));const V=E?0:1,F=m+(E?1:0);l.shape.bH({fill:{iFirstPrimary:V,amountPrimary:F},wireframe:{iFirstPrimary:V,amountPrimary:F,connectNext:!1}});const B=l===i?s:i,z=m+1,L=1+this.Un.scrollDimensionSize-z;B.shape.bH({fill:{iFirstPrimary:z,amountPrimary:L},wireframe:{iFirstPrimary:z,amountPrimary:L-1,connectNext:!0}});const A={};if(t.heightMapValues){const R=t.heightMapValues.slice(v,b);let w=!1;T&&this.wU.yValues&&(w=!0,R.splice(0,0,this.wU.yValues));const C={startPrimary:w?S:x,startSecondary:0,lengthPrimary:R.length,lengthSecondary:this.Un.staticDimensionSize,values:R,type:"y"};l.shape.wv(C),l.hasData=!0,A.yValues=R[y-1]}if(t.intensityValues){const R=t.intensityValues.slice(v,b);let w=!1;T&&this.wU.intensityValues&&(w=!0,R.splice(0,0,this.wU.intensityValues));const C={startPrimary:w?S:x,startSecondary:0,lengthPrimary:R.length,lengthSecondary:this.Un.staticDimensionSize,values:R,type:"intensity"};l.shape._v(C),l.hasData=!0,A.intensityValues=R[y-1]}this.MU+=y,a+=y,this.wU=A}while(a<n);return this.Un.scrollDimension==="columns"?(this.MH.min.x=this.Pi.x+Math.max(this.MU-this.Un.scrollDimensionSize,0)*this.$w.x,this.MH.max.x=this.Pi.x+(this.MU-1)*this.$w.x):(this.MH.min.z=this.Pi.z+Math.max(this.MU-this.Un.scrollDimensionSize,0)*this.$w.z,this.MH.max.z=this.Pi.z+(this.MU-1)*this.$w.z),this}xv(t){return this.QM.forEach(e=>e.shape.xv(t)),this}Mv(){return this.QM[0].shape.Mv()}Ce(t){return this.QM.forEach(e=>e.shape.Ce(t)),this}Eh(){return this.QM[0].shape.Eh()}mv(t){return this.QM.forEach(e=>e.shape.mv(t)),this}bv(){return this.QM[0].shape.bv()}VR(){return this.dispose(),this.QM.forEach(t=>t.shape.VR()),this}dispose(){return super.dispose(),this.QM.forEach(t=>t.shape.dispose()),this}setVisible(t){return super.setVisible(t),this.QM.forEach(e=>e.shape.setVisible(t&&e.hasData)),this}rS(t){return super.rS(t),this.QM.forEach(e=>e.shape.rS(t)),this}bt(){return this.MH.max.x}vt(){return this.MH.min.x}Mt(){return Math.max(this.QM[0].shape.Mt(),this.QM[1].shape.Mt())}xt(){return Math.min(this.QM[0].shape.xt(),this.QM[1].shape.xt())}aS(){return this.MH.max.z}lS(){return this.MH.min.z}vl(){return 0}bl(){return 0}uS(){return 0}cs(t){return super.cs(t),this.QM.forEach(e=>e.shape.cs(t)),this}}class hV extends uE{constructor(t,e,i,s){super(t,e,i),this.TH=45,this.FH=.1,this.IH=100,this.YY=Bt(0,0,1),this.PH=Bt(0,0,-1),this.DH=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],this.qp=new Ip,this.dt=s}Kv(){const{cellIndex:t,cellSpan:e,cellsAmount:i}=this.dt,s=e.x/i.x,n=e.y/i.y,a=t.x/i.x,o=t.y/i.y,l=this.us.oi();return{x:a*l.x,y:o*l.y,width:s*l.x,height:n*l.y}}setCameraLocation(t){return this.YY=t,this}getCameraLocation(){return this.YY}setCameraDirection(t){return this.PH=ft.normalize(t),this}getCameraDirection(){return this.PH}setLightLocation(t){return this.HY=t,this}getLightLocation(){return this.HY}BH(){return Bt(this.DH[0],this.DH[1],this.DH[2])}LH(){return Bt(this.DH[4],this.DH[5],this.DH[6])}}class e2 extends hV{constructor(t,e,i,s){super(t,e,i,s),this.aE=new f4,this.RH=!0,this.rN=t,this.gl=t.oN(),this.MY=this.pY,this.EH=this.us.Co(()=>{this.RH=!0}),this.zH=s.U(()=>{this.RH=!0})}rV(t){const e=t.vt(),i=t.xt(),s=t.lS(),n=t.bt(),a=t.Mt(),o=t.aS();if(e===bt||n===kt||i===bt||a===kt||s===bt||o===kt)return _e;const l=t.vl(),u=t.bl(),d=t.uS(),f=Math.abs(t.ks.Op(l)*t.dt.x.et()),y=Math.abs(t.ks.Op(u)*t.dt.y.et()),m=Math.abs(t.ks.Op(d)*t.dt.z.et()),S=e-f,x=n+f,v=i-y,b=a+y,E=s-m,T=o+m;let V;return[{x:S,y:v,z:E},{x,y:v,z:E},{x:S,y:b,z:E},{x,y:b,z:E},{x:S,y:v,z:T},{x,y:v,z:T},{x:S,y:b,z:T},{x,y:b,z:T}].map(F=>t.ks.Gp(F)).forEach(F=>{if(!F)return;V=V?Ws(V,{min:F,max:F}):{min:F,max:F}}),V||_e}_Y(t){const e=Array.from(this.MY.values());for(let i=0;i<e.length;i+=1){const s=e[i],n=s.lN(t);if(n)return{entity:s,index:i,collectionMember:n.collectionMember}}}Gp(t){if(this.VH(),this.OH(),!this.UY)return;const e=this.aE.AV(),i=Bt(e[0],e[1],e[2]),s=this.aE.fV(),n=Bt(s[0],s[1],s[2]),a=ft.divideVec(ft.subtractVec(t,i),n),o=this.UY,l=Ve.multiply(o,[a.x,a.y,a.z,1]),u=Y(l[0]/l[3],l[1]/l[3]),d=this.us.oi();return{x:.5*(1+u.x)*d.x,y:.5*(1+u.y)*d.y}}ft(t){const e=this.aE.AV(),i=this.aE.fV(),s=ft.divideVec(ft.subtractVec(t,{x:e[0],y:e[1],z:e[2]}),{x:i[0],y:i[1],z:i[2]});return{...t,x:s.x,y:s.y,z:s.z}}yt(t){const e=this.aE.AV(),i=this.aE.fV(),s=ft.addVec(ft.multiplyVec(t,{x:i[0],y:i[1],z:i[2]}),{x:e[0],y:e[1],z:e[2]});return{...t,x:s.x,y:s.y,z:s.z}}Op(t){return t/1e3}iH(){return .001}Ps(){const t=this.YY,e=this.HY,i=this.dt.x.i||this.dt.y.i||this.dt.z.i;if(!e)throw wn(0,()=>DM());const{viewProjectionMatrix:s}=this.VH();this.OH();const n=[t.x,t.y,t.z],a=[e.x,e.y,e.z];return this.pY.forEach(o=>{o.UY=s,o.YY=n,o.HY=a,o.Ps(i)}),this}VH(){if(!this.RH&&this.UY)return{viewProjectionMatrix:this.UY};const t=this.Kv(),e=t.width/t.height;this.NH=Ve.projectionPerspective(this.TH,e,this.FH,this.IH);const i=this.YY;this.DH[12]=i.x,this.DH[13]=i.y,this.DH[14]=i.z;const s=this.PH,n=Bt(0,1,0),a=ft.multiply(s,-1),o=ft.normalize(ft.cross(n,a)),l=ft.normalize(ft.cross(a,o));this.DH[0]=o.x,this.DH[1]=o.y,this.DH[2]=o.z,this.DH[4]=l.x,this.DH[5]=l.y,this.DH[6]=l.z,this.DH[8]=a.x,this.DH[9]=a.y,this.DH[10]=a.z,this.GH=Ve.inverse(this.DH);const{cellIndex:u,cellSpan:d,cellsAmount:f}=this.dt,y=d.x/f.x,m=d.y/f.y,S=(u.x+d.x/2)/f.x,x=(u.y+d.y/2)/f.y,v=Ve.multiply(Ve.translation(gh(-1,1,S),gh(-1,1,x),0),Ve.scaling(y,m,1));return this.UY=Ve.multiply(v,Ve.multiply(this.NH,this.GH)),this.WH=Ve.inverse(this.UY),this.RH=!1,{viewProjectionMatrix:this.UY}}OH(){this.aE.KO(this.dt.x),this.aE.qO(this.dt.y),this.aE.tN(this.dt.z)}zL(t,e){const i=this.gl.$z(),s=this.Kv(),n={x:s.x*i*e,y:s.y*i*e,width:s.width*i*e,height:s.height*i*e};return this.gl.hV(n.x,n.y,n.width,n.height),this.pY.forEach(a=>{a.getVisible()&&(this.gl.Kz(a.DY),t!==1&&this.gl.nS(a.iS),(t!==1||a.getMouseInteractions())&&a.zL(t))}),this.gl.Kz("disabled"),this.gl.nS(!1),this.gl.qz(!1),this}setCameraLocation(t){return this.YY.x===t.x&&this.YY.y===t.y&&this.YY.z===t.z||(this.RH=!0),super.setCameraLocation(t),this}setCameraDirection(t){return this.PH.x===t.x&&this.PH.y===t.y&&this.PH.z===t.z||(this.RH=!0),super.setCameraDirection(t),this}W(){super.W(),this.us.ko(this.EH),this.dt.Y(this.zH)}bS(t){const e=this.rN.wY();return this.SY(new rV(this,this.vY,[],e,this.rN.CY(e),t))}rp(t){const e=this.rN.wY();return this.SY(new tV(this,this.vY,t,e,this.rN.CY(e)))}AS(){const t=this.rN.wY();return this.SY(new J4(this,this.vY,[],t,this.rN.CY(t)))}Rv(){const t=this.rN.wY();return this.SY(new sV(this,this.vY,[],t,this.rN.CY(t)))}Lg(){const t=this.rN.wY();return this.SY(new Q4(this,this.vY,[],t,this.rN.CY(t)))}yv(t){const e=this.rN.wY();return this.SY(new gE(this,this.vY,[],t,e,this.rN.CY(e)))}Tv(t){const e=this.rN.wY();return this.SY(new aV(this,this.vY,[],t,e,this.rN.CY(e)))}}class oV extends YC{constructor(t,e,i,s=c4){if(super(t,e,i),this.X=Jn(1,1),this.UH=!1,this.YH=0,this.HH=!0,this.$H=0,this.tH=8388608,this.$E=[null,null],this.XH=null,this.jH=null,this.ZH=0,this.Qg=!1,this.QH=0,this.Ss=(b=!1)=>(this.$i||this.dn||this.JH()||(b&&(this.UH=!0),this.hn=!0,this.KH||this.Qr.nz(b)),this),this.KH=!1,this.cz=b=>{if(this.$i||this.dn)return;const E=b-this.YH;if(E>=this.Qn||this.Qn===-1){this.KH=!0,this.YH=b,this.UH=!1;const T=E>50?1e3/60:E;this.rn&&this.rn(T),this.hn=!1,this.Qn!==-1&&this.UH&&(this.Qr.nz(this.UH),this.hn=!0),this.ls.Ps(E),this.pn(),this.Sn(),this.nn&&this.nn(),this.KH=!1,this.D.emit("render"),this.hn&&this.Ss(this.UH)}else this.hn=!0,this.Qr.nz()},this.qH=new Map,this.oN=()=>this.RR,this.t$=()=>{var b,E,T;const V=this.On(),F=this.HH,B=nt.performance.now(),z=(b=this.i$)===null||b===void 0?void 0:b.s$.reduce((w,C)=>w?C.e$&&w.e$&&C.e$>w.e$?C:w:C,void 0),L=z==null?void 0:z.e$,A=(E=this.Dn)===null||E===void 0?void 0:E.timeStamp,R=(T=this.xo)===null||T===void 0?void 0:T.timeStamp;return F?(this.Ss(!0),!1):z===void 0||(z===void 0||!z.h$)&&(R!==void 0&&L!==void 0&&R>L||(L!==void 0&&V===void 0?B-L>=1e3:!(L!==void 0&&A!==void 0&&B-A>=2e3)||B-L>=1e3))},this.r$=()=>{var b,E;this.n$=void 0;const T=(E=(b=this.i$)===null||b===void 0?void 0:b.o$)===null||E===void 0?void 0:E.a$;T===void 0||T>=this.$H||this.l$()},this.Sn=()=>{if(this.$i||this.dn)return this;const b=this.RR.gl,E=nt.performance.now();this.RR.sV(b.FRAMEBUFFER,this.Qr.tz?this.$E[0]:null);const T=this.X,V=T.x>0&&T.y>0;if(this.gn.i&&this.RR.qV(this.gn.M()),b.resize&&V&&b.resize(T.x*this.RR.$z(),T.y*this.RR.$z()),this.RR.eV(0,0,T.x*this.RR.$z(),T.y*this.RR.$z()),this.RR.hV(0,0,T.x*this.RR.$z(),T.y*this.RR.$z()),this.RR.Nt(),V)for(const F of this.tn.values())F.zL(0,1);if(this.Un.Xn&&V&&(this.n$&&(nt.clearTimeout(this.n$),this.n$=void 0),this.t$()?(this.l$(),this.RR.sV(b.FRAMEBUFFER,this.Qr.tz?this.$E[0]:null)):this.n$=nt.setTimeout(this.r$,500)),this.j(),this.jr(),this._n&&this.Mn(this._n),this.Qr.tz){const F=this.RR.gl2.ctx;F.bindFramebuffer(F.READ_FRAMEBUFFER,this.$E[0]),F.bindFramebuffer(F.DRAW_FRAMEBUFFER,this.$E[1]),F.clearBufferfv(F.COLOR,0,[1,1,1,1]),F.blitFramebuffer(0,0,this.X.x*this.RR.$z(),this.X.y*this.RR.$z(),0,0,this.X.x*this.RR.$z(),this.X.y*this.RR.$z(),b.COLOR_BUFFER_BIT,b.LINEAR)}else b.bindTexture(b.TEXTURE_2D,this.NE),b.copyTexImage2D(b.TEXTURE_2D,0,b.RGBA,0,0,this.X.x*this.RR.$z(),this.X.y*this.RR.$z(),0),b.bindTexture(b.TEXTURE_2D,null);return this.RR.sV(b.FRAMEBUFFER,null),this.Qr.nz(),this.HH=!1,this.$H=E,this},this.pn=()=>{if(this.u$.mode==="use-window"){const E=nt.devicePixelRatio||1;this.RR.dO(E)}const b=this.X;if(b.x===0||b.y===0)return this;this.oo.q(b);for(const E of this.tn.values())E.Ps();return this.j(),this},this.c$=1,this.Qr=t,this.Qr.KE){this.d$=nt.document.createElement("canvas"),this.d$.style.width="100%",this.d$.style.height="100%",this.d$.style.display="block",this.d$.style.boxSizing="content-box",this.d$.style.position="absolute";const b=this.d$.getContext("2d",{willReadFrequently:!1,alpha:!0,desynchronized:!1});if(!b)throw new Ri("No Canvas context available.");this.GE=b,this.Gr.appendChild(this.d$)}this.Qr.Az(this);const n={antialias:e?e.antialias:void 0,lineAntialias:!e||(e.lineAntiAlias===!0||e.lineAntiAlias===!1?e.lineAntiAlias:e.antialias!==!1)};let a;if(this.Qr.tz&&t.gl2&&(a=new s(this,this.Un,{type:"webgl2",ctx:t.gl2.ctx,antialias:n.antialias,lineAntialias:n.lineAntialias},this.qi.isDark)),a||this.Qr.tz||(a=new s(this,this.Un,{type:"webgl1",ctx:t.gl,antialias:n.antialias,lineAntialias:n.lineAntialias},this.qi.isDark)),!a)throw new Ri("No WebGL context available");if(this.RR=a,typeof(e==null?void 0:e.devicePixelRatio)=="number")this.u$={mode:"fixed",value:e.devicePixelRatio},this.RR.dO(e.devicePixelRatio);else{const b=nt.document.head.querySelector('meta[name="viewport"]'),E=e.devicePixelRatio===!0||(b==null?void 0:b.content.includes("width=device-width")),T=nt.devicePixelRatio||1;this.u$=E?{mode:"use-window"}:{mode:"fixed",value:T},this.RR.dO(T)}const o=e?e.width:void 0,l=e?e.height:void 0;this.ho=this.f$(o),this.no=this.f$(l),this.A$(this.ho,this.no),this.CU=this.FI("engine offscreen",1e6),this.g$=this.FI("engine bg",0);const u=typeof this.qi.lcjsBackgroundFillStyle=="function"?this.qi.lcjsBackgroundFillStyle(this.Un.$s):this.qi.lcjsBackgroundFillStyle;this.oo=this.g$.ke(this.dt).Ce(u).we(this.qi.lcjsBackgroundStrokeStyle).setMouseInteractions(!1).Fe({x:0,y:0});const d=this.FI("engine effects",200001).kY(this.qi.effect);this.es=d;const f=this.Qr.tz,y=this.oi();f&&(this.$E=[a.vV(),a.vV()]);const m=this.RR.gl;f&&(this.XH=m.createRenderbuffer(),this.jH=m.createRenderbuffer()),this.NE=m.createTexture();const S=y.x*this.RR.$z(),x=y.y*this.RR.$z();if(f){m.bindRenderbuffer(m.RENDERBUFFER,this.XH);const b=this.RR.gl2.ctx;this.ZH=this.Qr.PE&&e.antialias!==!1?b.getParameter(b.MAX_SAMPLES):0,b.renderbufferStorageMultisample(b.RENDERBUFFER,this.ZH,b.RGBA8,S,x),m.bindRenderbuffer(m.RENDERBUFFER,this.jH),m.renderbufferStorage(m.RENDERBUFFER,m.DEPTH_COMPONENT16,S,x),b.renderbufferStorageMultisample(b.RENDERBUFFER,this.ZH,b.DEPTH_COMPONENT16,S,x)}f&&(this.RR.sV(m.FRAMEBUFFER,this.$E[0]),m.framebufferRenderbuffer(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.RENDERBUFFER,this.XH),m.framebufferRenderbuffer(m.FRAMEBUFFER,m.DEPTH_ATTACHMENT,m.RENDERBUFFER,this.jH)),m.bindTexture(m.TEXTURE_2D,this.NE),m.texImage2D(m.TEXTURE_2D,0,m.RGBA,S,x,0,m.RGBA,m.UNSIGNED_BYTE,null),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,m.LINEAR),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,m.CLAMP_TO_EDGE),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,m.CLAMP_TO_EDGE),f&&(this.RR.sV(m.FRAMEBUFFER,this.$E[1]),m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,this.NE,0)),this.RR.sV(m.FRAMEBUFFER,null),this.fn(),this.jr(),this.hm=GC(this),this.rm={qi:this.qi,ls:this.ls,dt:this.dt,Ss:b=>this.Ss(b),On:()=>this.On(),cB:b=>this.cB(b),Un:this.Un,Nn:b=>this.Nn(b),es:this.es,Po:b=>this.Po(b),Do:b=>this.Do(b),Ig:{Fg:(b,E,T)=>this.RR.Vh(E.family).QR(b,E,T,this.qi.isDark)}};const v=()=>{this.W()};nt.addEventListener("unload",v),this.an.push(()=>{nt.removeEventListener("unload",v)})}get m$(){return this.tn}Jr(t,e){let i=this.qH.get(t);if(!i){const n=this.RR.pO(t),a=new Set,o=d=>{a.add(d)},l=d=>{a.delete(d)&&a.size===0&&(n.unbindResources(),this.qH.delete(t))},u=[];i={imageTexture:n,instances:a,handleNewInstance:o,handleInstanceDisposed:l,sharedEngineReference:{dB:()=>n.Dz,fB:d=>{n.Dz?d():u.push(d)}}},this.qH.set(t,i),n.jR(this),n.Oz(()=>{u.forEach(d=>{d()}),u.length=0})}const s=new Rk(t,i.handleNewInstance,i.handleInstanceDisposed,e);return i.handleNewInstance(s),s}cB(t){const e=Array.from(this.qH.values()).find(i=>i.instances.has(t));if(!e)throw wn(0,()=>new Error("LightningChart JS error, attempted to use Icon that is disposed. Please check that you are not disposing an Icon that is still in use, or attempting to use a previously disposed Icon!"));return e.sharedEngineReference}wn(t,e){var i;const s=(i=this.i$)===null||i===void 0?void 0:i.o$;if(!s)return;const n=this.Pe(e.x,e.y),a=Math.round(n.x*this.RR.$z()),o=Math.round(n.y*this.RR.$z());return[[-1,-1],[-1,0],[-1,1],[0,1],[1,1],[1,0],[1,-1],[0,-1],[0,0]].map(l=>this.y$(s,a+l[0]/s.p$,o+l[1]/s.p$)).reduce((l,u)=>{if(u===void 0)return l||void 0;const d=1e6*u.layerIndex+u.entityIndex;return!l||d>l.zIndexForComparison?{zIndexForComparison:d,entity:u.entity,collectionMember:u.collectionMember}:l},void 0)}y$(t,e,i){const s=Math.round(e*t.p$),n=Math.round(i*t.p$);if(s<0||s>=t.X.x||n<0||n>=t.X.y)return;const a=4*(s+n*t.X.x),o=t.S$[a+0],l=t.S$[a+1],u=t.S$[a+2],d=t.S$[a+3];return o!==void 0&&l!==void 0&&u!==void 0&&d!==void 0?this.v$(o,l,u,d):void 0}Hr(t,e,i){const s=this.RR.gl;this.Qr.tz?(this.RR.sV(s.FRAMEBUFFER,this.$E[1]),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,this.NE,0)):this.RR.sV(s.FRAMEBUFFER,null);const n=this.OE(),a=n.x,o=n.y,l=new Uint8Array(a*o*4);this.Qr.tz||this.Sn(),s.readPixels(0,0,a,o,s.RGBA,s.UNSIGNED_BYTE,l);const u=new ImageData(new Uint8ClampedArray(l),a,o),d=document.createElement("canvas"),f=d.getContext("2d");if(!f)throw new Error("Failed to create 2D context for saving image.");d.width=a,d.height=o,f.putImageData(u,0,0),f.translate(0,o),f.scale(1,-1),f.drawImage(d,0,0),this.Qr.tz&&(this.RR.sV(s.FRAMEBUFFER,this.$E[0]),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.RENDERBUFFER,this.XH),this.RR.sV(s.FRAMEBUFFER,this.$E[1]),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,this.NE,0)),this.RR.sV(s.FRAMEBUFFER,null);const y=d.toDataURL(t,e);return i?y:(m=>{const S=m.split(",")[0].split(":")[1].split(";")[0],x=nt.atob(m.split(",")[1]),v=new Uint8Array(x.length);for(let b=0;b<x.length;b+=1)v[b]=x.charCodeAt(b);return new nt.Blob([v.buffer],{type:S})})(y)}$r(t,e,i=!1){this.fn(Y(Math.round(t),Math.round(e))),this.yn();const s=this.RR.gl.drawingBufferWidth,n=this.RR.gl.drawingBufferHeight,a=new Uint8Array(s*n*4);if(this.RR.gl.readPixels(0,0,s,n,this.RR.gl.RGBA,this.RR.gl.UNSIGNED_BYTE,a),!i){const o=n/2|0,l=4*s,u=new Uint8Array(4*s);for(let d=0;d<o;d+=1){const f=d*l,y=(n-d-1)*l;u.set(a.subarray(f,f+l)),a.copyWithin(f,y,y+l),a.set(u,y)}}return this.en={x:0,y:e},a}mL(t){return this.ho!==void 0?this.ho[0]=t:this.ho=[t,void 0],this.Gr.style.minWidth=`${this.ho[0]}px`,this.fn(),this}pL(t){return this.ho!==void 0?this.ho[1]=t:this.ho=[void 0,t],this.Gr.style.maxWidth=`${this.ho[1]}px`,this.fn(),this}vL(t){return this.no!==void 0?this.no[0]=t:this.no=[t,void 0],this.Gr.style.minHeight=`${this.no[0]}px`,this.fn(),this}xL(t){return this.no!==void 0?this.no[1]=t:this.no=[void 0,t],this.Gr.style.maxHeight=`${this.no[1]}px`,this.fn(),this}A$(t,e){return this.ho=t,this.no=e,this.Gr.style.minWidth=`${this.ho[0]}px`,this.Gr.style.maxWidth=`${this.ho[1]}px`,this.Gr.style.minHeight=`${this.no[0]}px`,this.Gr.style.maxHeight=`${this.no[1]}px`,this.fn(),this}zE(t){return this.Qg!==t&&(this.D.emit("inViewChange",t),this.Qg=t),this}EE(){return this.Qg}gz(t){this.QH=t}fz(){return this.QH}FI(t,e=this.do()){const i=this.co(e);if(i){if(wn(0,()=>{}),!(i instanceof t2))throw new Error("Unexpected Engine Layer error");return i}return this.vn(new t2(this,e,t))}BI(t,e,i){const s=this.co(e);if(s){if(wn(0,()=>{}),!(s instanceof e2))throw new Error("Unexpected Engine Layer error");return s}return this.vn(new e2(this,e,t,i))}oi(){return this.X}OE(){const t=this.RR.$z();return{x:Math.round(this.X.x*t),y:Math.round(this.X.y*t)}}f$(t){return t instanceof Array||(t=[t,t]),t}b$(){return this.Qr.WE}JH(){const t=this.RR.gl;return t&&"resize"in t}l$(){var t;const e=this.RR.gl,i=nt.performance.now(),s=this.On(),n=this.Un.$n,a={x:Math.ceil(this.X.x*this.RR.$z()*n),y:Math.ceil(this.X.y*this.RR.$z()*n)};this.i$||(this.i$={p$:n,x$:a,s$:[],o$:void 0});let o=this.i$.s$.find(y=>!y.h$),l=!1;o||(l=!0,o={h$:!1,X:a,PO:e.createTexture(),M$:this.RR.vV(),jH:this.RR.bV(),_$:new Uint8Array,e$:void 0},this.i$.s$.push(o));const u=o;(l||u.X.x!==a.x||u.X.y!==a.y)&&(e.bindTexture(e.TEXTURE_2D,u.PO),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,a.x,a.y,0,e.RGBA,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),this.RR.sV(e.FRAMEBUFFER,u.M$),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,u.PO,0),e.bindRenderbuffer(e.RENDERBUFFER,u.jH),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,a.x,a.y),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,u.jH),u._$=new Uint8Array(a.x*a.y*4),u.X=a),u.h$=!0,u.e$=i,this.RR.sV(e.FRAMEBUFFER,u.M$),e.clearDepth(1),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),e.disable(e.BLEND),e.resize&&e.resize(a.x,a.y),this.RR.eV(0,0,a.x,a.y);for(const y of this.tn.values())y.zL(1,n);this.RR.sV(e.FRAMEBUFFER,null),e.bindTexture(e.TEXTURE_2D,null),e.bindRenderbuffer(e.RENDERBUFFER,null),e.enable(e.BLEND);const d=(t=this.RR.gl2)===null||t===void 0?void 0:t.ctx,f=()=>{if(this.i$){const y=this.i$.o$;if(y&&y.a$>i)return;this.i$.o$={a$:i,p$:n,X:a,S$:u._$,w$:s}}};d?this.RR.TO(d,u.M$,0,0,a.x,a.y,e.RGBA,e.UNSIGNED_BYTE,u._$).then(()=>{this.$i||(u.h$=!1,f())}).catch(y=>{this.$i||(u.h$=!1,nt.console.warn(`LightningChart JS mouse picking failed unexpectedly. This could mean that user interactions on charts are compromised.
Please report this issue to https://lightningchart.com/js-charts/docs/contact`))}):(this.RR.FO(u.M$,0,0,a.x,a.y,e.RGBA,e.UNSIGNED_BYTE,u._$),u.h$=!1,f())}fn(t){if(this.u$.mode==="use-window"){const n=nt.devicePixelRatio||1;this.RR.dO(n)}const e=this.X.x,i=this.X.y,s=t||{x:this.Gr.offsetWidth,y:this.Gr.offsetHeight};if(s.x!==0&&s.y!==0&&(s.x!==e||s.y!==i)){this.X=s,this.dt.x.J(0,s.x).q(s.x),this.dt.y.J(0,s.y).q(s.y);const n=s.x*this.RR.$z(),a=s.y*this.RR.$z(),o=this.RR.gl;this.Qr.KE&&this.GE&&(this.GE.canvas.width=n,this.GE.canvas.height=a);const l=this.Qr.tz;if(this.NE&&(o.bindTexture(o.TEXTURE_2D,this.NE),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,n,a,0,o.RGBA,o.UNSIGNED_BYTE,null)),l){const u=this.RR.gl2.ctx;this.XH&&(o.bindRenderbuffer(o.RENDERBUFFER,this.XH),u.renderbufferStorageMultisample(u.RENDERBUFFER,this.ZH,u.RGBA8,n,a)),this.jH&&(o.bindRenderbuffer(o.RENDERBUFFER,this.jH),o.renderbufferStorage(o.RENDERBUFFER,o.DEPTH_COMPONENT16,n,a),u.renderbufferStorageMultisample(u.RENDERBUFFER,this.ZH,u.DEPTH_COMPONENT16,n,a))}o.bindRenderbuffer(o.RENDERBUFFER,null),this.D.emit("resize",[this.X.x,this.X.y])}}W(){var t;this.$i||(super.W(),this.n$&&(nt.clearTimeout(this.n$),this.n$=void 0),Array.from(this.RR.bE.entries()).forEach(([e,i])=>{i.VR(!1),this.RR.bE.delete(e)}),Array.from(this.RR.wV.values()).forEach(e=>{e.unbindResources()}),this.RR.wV.clear(),this.RR._V.kz(),this.RR.aO.W(),this.RR.yV(this.RR.lO),this.RR.yV(this.RR.uO),this.RR.hO.forEach((e,i)=>{this.RR.gl.deleteBuffer(i)}),this.RR.hO.clear(),this.RR.MO&&(this.RR.yV(this.RR.MO.buffer),this.RR.MO=void 0),this.RR.MV(this.$E[0]),this.RR.MV(this.$E[1]),this.RR.xV(this.XH),this.RR.OR(this.NE),this.RR.xV(this.jH),this.i$&&(this.i$.s$.forEach(e=>{this.RR.xV(e.jH),this.RR.MV(e.M$),this.RR.OR(e.PO)}),this.i$=void 0),this.RR.iO.forEach(e=>this.RR.yV(e)),this.qH.clear(),this.Qr.mz(this),this.d$&&((t=this.d$.parentElement)===null||t===void 0||t.removeChild(this.d$),this.d$=void 0),this.GE&&(this.GE=void 0),this.RR.gl=void 0)}wY(){const t=this.c$;return t>4294967295&&(console.warn(`LightningChart JS picking ID overflow.
This is an unexpected error that could compromise user interactions on the chart.
Please report the issue to https://lightningchart.com/js-charts/docs/contact!`),this.c$=1),this.c$+=1,t}CY(t){let e=t;const i=Math.floor(e/16777216);e-=16777216*i;const s=Math.floor(e/65536);e-=65536*s;const n=Math.floor(e/256);return e-=256*n,I(i,s,n,e)}v$(t,e,i,s){if(t===0&&e===0&&i===0&&s===0)return;const n=16777216*t+65536*e+256*i+s;for(const a of this.m$.values()){const o=a._Y(n);if(o)return{entity:o.entity,collectionMember:o.collectionMember,entityIndex:o.index,layerIndex:a.bn()}}}}var Cf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Xm={exports:{}};(function(r,t){function e(A,R){if(!A)throw new Error(R||"Assertion failed")}function i(A,R){A.super_=R;var w=function(){};w.prototype=R.prototype,A.prototype=new w,A.prototype.constructor=A}function s(A,R,w){if(s.isBN(A))return A;this.negative=0,this.words=null,this.length=0,this.red=null,A!==null&&(R!=="le"&&R!=="be"||(w=R,R=10),this.Vz(A||0,R||10,w||"be"))}var n;typeof Xm=="object"?Xm.exports=s:t.BN=s,s.BN=s,s.wordSize=26;try{n=(void 0).Buffer}catch{}function a(A,R,w){for(var C=0,k=Math.min(A.length,w),_=0,X=R;X<k;X++){var N,U=A.charCodeAt(X)-48;C<<=4,C|=N=U>=49&&U<=54?U-49+10:U>=17&&U<=22?U-17+10:U,_|=N}return e(!(240&_),"Invalid character in "+A),C}function o(A,R,w,C){for(var k=0,_=0,X=Math.min(A.length,w),N=R;N<X;N++){var U=A.charCodeAt(N)-48;k*=C,_=U>=49?U-49+10:U>=17?U-17+10:U,e(U>=0&&_<C,"Invalid character"),k+=_}return k}function l(A,R){A.words=R.words,A.length=R.length,A.negative=R.negative,A.red=R.red}if(s.isBN=function(A){return A instanceof s||A!==null&&typeof A=="object"&&A.constructor.wordSize===s.wordSize&&Array.isArray(A.words)},s.max=function(A,R){return A.cmp(R)>0?A:R},s.min=function(A,R){return A.cmp(R)<0?A:R},s.prototype.Vz=function(A,R,w){if(typeof A=="number")return this.C$(A,R,w);if(typeof A=="object")return this.k$(A,R,w);R==="hex"&&(R=16),e(R===(0|R)&&R>=2&&R<=36);var C=0;(A=A.toString().replace(/\s+/g,""))[0]==="-"&&C++,R===16?this.T$(A,C):this.F$(A,R,C),A[0]==="-"&&(this.negative=1),this.I$(),w==="le"&&this.k$(this.toArray(),R,w)},s.prototype.C$=function(A,R,w){A<0&&(this.negative=1,A=-A),A<67108864?(this.words=[67108863&A],this.length=1):A<4503599627370496?(this.words=[67108863&A,A/67108864&67108863],this.length=2):(e(A<9007199254740992),this.words=[67108863&A,A/67108864&67108863,1],this.length=3),w==="le"&&this.k$(this.toArray(),R,w)},s.prototype.k$=function(A,R,w){if(e(typeof A.length=="number"),A.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(A.length/3),this.words=new Array(this.length);for(var C=0;C<this.length;C++)this.words[C]=0;var k,_,X=0;if(w==="be")for(C=A.length-1,k=0;C>=0;C-=3)_=A[C]|A[C-1]<<8|A[C-2]<<16,this.words[k]|=_<<X&67108863,this.words[k+1]=_>>>26-X&67108863,(X+=24)>=26&&(X-=26,k++);else if(w==="le")for(C=0,k=0;C<A.length;C+=3)_=A[C]|A[C+1]<<8|A[C+2]<<16,this.words[k]|=_<<X&67108863,this.words[k+1]=_>>>26-X&67108863,(X+=24)>=26&&(X-=26,k++);return this.I$()},s.prototype.T$=function(A,R){this.length=Math.ceil((A.length-R)/6),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var C,k,_=0;for(w=A.length-6,C=0;w>=R;w-=6)k=a(A,w,w+6),this.words[C]|=k<<_&67108863,this.words[C+1]|=k>>>26-_&4194303,(_+=24)>=26&&(_-=26,C++);w+6!==R&&(k=a(A,R,w+6),this.words[C]|=k<<_&67108863,this.words[C+1]|=k>>>26-_&4194303),this.I$()},s.prototype.F$=function(A,R,w){this.words=[0],this.length=1;for(var C=0,k=1;k<=67108863;k*=R)C++;C--,k=k/R|0;for(var _=A.length-w,X=_%C,N=Math.min(_,_-X)+w,U=0,O=w;O<N;O+=C)U=o(A,O,O+C,R),this.imuln(k),this.words[0]+U<67108864?this.words[0]+=U:this.P$(U);if(X!==0){var W=1;for(U=o(A,O,A.length,R),O=0;O<X;O++)W*=R;this.imuln(W),this.words[0]+U<67108864?this.words[0]+=U:this.P$(U)}},s.prototype.copy=function(A){A.words=new Array(this.length);for(var R=0;R<this.length;R++)A.words[R]=this.words[R];A.length=this.length,A.negative=this.negative,A.red=this.red},s.prototype.D$=function(A){l(A,this)},s.prototype.clone=function(){var A=new s(null);return this.copy(A),A},s.prototype.B$=function(A){for(;this.length<A;)this.words[this.length++]=0;return this},s.prototype.I$=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this.L$()},s.prototype.L$=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=u}catch{s.prototype.inspect=u}else s.prototype.inspect=u;function u(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],y=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function m(A,R,w){w.negative=R.negative^A.negative;var C=A.length+R.length|0;w.length=C,C=C-1|0;var k=0|A.words[0],_=0|R.words[0],X=k*_,N=67108863&X,U=X/67108864|0;w.words[0]=N;for(var O=1;O<C;O++){for(var W=U>>>26,P=67108863&U,H=Math.min(O,R.length-1),j=Math.max(0,O-A.length+1);j<=H;j++){var Q=O-j|0;W+=(X=(k=0|A.words[Q])*(_=0|R.words[j])+P)/67108864|0,P=67108863&X}w.words[O]=0|P,U=0|W}return U!==0?w.words[O]=0|U:w.length--,w.I$()}s.prototype.toString=function(A,R){var w;if(R=0|R||1,(A=A||10)===16||A==="hex"){w="";for(var C=0,k=0,_=0;_<this.length;_++){var X=this.words[_],N=(16777215&(X<<C|k)).toString(16);w=(k=X>>>24-C&16777215)!=0||_!==this.length-1?d[6-N.length]+N+w:N+w,(C+=2)>=26&&(C-=26,_--)}for(k!==0&&(w=k.toString(16)+w);w.length%R!=0;)w="0"+w;return this.negative!==0&&(w="-"+w),w}if(A===(0|A)&&A>=2&&A<=36){var U=f[A],O=y[A];w="";var W=this.clone();for(W.negative=0;!W.isZero();){var P=W.modrn(O).toString(A);w=(W=W.idivn(O)).isZero()?P+w:d[U-P.length]+P+w}for(this.isZero()&&(w="0"+w);w.length%R!=0;)w="0"+w;return this.negative!==0&&(w="-"+w),w}e(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var A=this.words[0];return this.length===2?A+=67108864*this.words[1]:this.length===3&&this.words[2]===1?A+=4503599627370496+67108864*this.words[1]:this.length>2&&e(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-A:A},s.prototype.toJSON=function(){return this.toString(16,2)},n&&(s.prototype.toBuffer=function(A,R){return this.toArrayLike(n,A,R)}),s.prototype.toArray=function(A,R){return this.toArrayLike(Array,A,R)},s.prototype.toArrayLike=function(A,R,w){this.I$();var C=this.byteLength(),k=w||Math.max(1,C);e(C<=k,"byte array longer than desired length"),e(k>0,"Requested array length <= 0");var _=function(X,N){return X.allocUnsafe?X.allocUnsafe(N):new X(N)}(A,k);return this["_toArrayLike"+(R==="le"?"LE":"BE")](_,C),_},s.prototype.R$=function(A,R){for(var w=0,C=0,k=0,_=0;k<this.length;k++){var X=this.words[k]<<_|C;A[w++]=255&X,w<A.length&&(A[w++]=X>>8&255),w<A.length&&(A[w++]=X>>16&255),_===6?(w<A.length&&(A[w++]=X>>24&255),C=0,_=0):(C=X>>>24,_+=2)}if(w<A.length)for(A[w++]=C;w<A.length;)A[w++]=0},s.prototype.E$=function(A,R){for(var w=A.length-1,C=0,k=0,_=0;k<this.length;k++){var X=this.words[k]<<_|C;A[w--]=255&X,w>=0&&(A[w--]=X>>8&255),w>=0&&(A[w--]=X>>16&255),_===6?(w>=0&&(A[w--]=X>>24&255),C=0,_=0):(C=X>>>24,_+=2)}if(w>=0)for(A[w--]=C;w>=0;)A[w--]=0},Math.clz32?s.prototype.z$=function(A){return 32-Math.clz32(A)}:s.prototype.z$=function(A){var R=A,w=0;return R>=4096&&(w+=13,R>>>=13),R>=64&&(w+=7,R>>>=7),R>=8&&(w+=4,R>>>=4),R>=2&&(w+=2,R>>>=2),w+R},s.prototype.V$=function(A){if(A===0)return 26;var R=A,w=0;return(8191&R)==0&&(w+=13,R>>>=13),(127&R)==0&&(w+=7,R>>>=7),(15&R)==0&&(w+=4,R>>>=4),(3&R)==0&&(w+=2,R>>>=2),(1&R)==0&&w++,w},s.prototype.bitLength=function(){var A=this.words[this.length-1],R=this.z$(A);return 26*(this.length-1)+R},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var A=0,R=0;R<this.length;R++){var w=this.V$(this.words[R]);if(A+=w,w!==26)break}return A},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(A){return this.negative!==0?this.abs().inotn(A).iaddn(1):this.clone()},s.prototype.fromTwos=function(A){return this.testn(A-1)?this.notn(A).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(A){for(;this.length<A.length;)this.words[this.length++]=0;for(var R=0;R<A.length;R++)this.words[R]=this.words[R]|A.words[R];return this.I$()},s.prototype.ior=function(A){return e((this.negative|A.negative)==0),this.iuor(A)},s.prototype.or=function(A){return this.length>A.length?this.clone().ior(A):A.clone().ior(this)},s.prototype.uor=function(A){return this.length>A.length?this.clone().iuor(A):A.clone().iuor(this)},s.prototype.iuand=function(A){var R;R=this.length>A.length?A:this;for(var w=0;w<R.length;w++)this.words[w]=this.words[w]&A.words[w];return this.length=R.length,this.I$()},s.prototype.iand=function(A){return e((this.negative|A.negative)==0),this.iuand(A)},s.prototype.and=function(A){return this.length>A.length?this.clone().iand(A):A.clone().iand(this)},s.prototype.uand=function(A){return this.length>A.length?this.clone().iuand(A):A.clone().iuand(this)},s.prototype.iuxor=function(A){var R,w;this.length>A.length?(R=this,w=A):(R=A,w=this);for(var C=0;C<w.length;C++)this.words[C]=R.words[C]^w.words[C];if(this!==R)for(;C<R.length;C++)this.words[C]=R.words[C];return this.length=R.length,this.I$()},s.prototype.ixor=function(A){return e((this.negative|A.negative)==0),this.iuxor(A)},s.prototype.xor=function(A){return this.length>A.length?this.clone().ixor(A):A.clone().ixor(this)},s.prototype.uxor=function(A){return this.length>A.length?this.clone().iuxor(A):A.clone().iuxor(this)},s.prototype.inotn=function(A){e(typeof A=="number"&&A>=0);var R=0|Math.ceil(A/26),w=A%26;this.B$(R),w>0&&R--;for(var C=0;C<R;C++)this.words[C]=67108863&~this.words[C];return w>0&&(this.words[C]=~this.words[C]&67108863>>26-w),this.I$()},s.prototype.notn=function(A){return this.clone().inotn(A)},s.prototype.setn=function(A,R){e(typeof A=="number"&&A>=0);var w=A/26|0,C=A%26;return this.B$(w+1),this.words[w]=R?this.words[w]|1<<C:this.words[w]&~(1<<C),this.I$()},s.prototype.iadd=function(A){var R,w,C;if(this.negative!==0&&A.negative===0)return this.negative=0,R=this.isub(A),this.negative^=1,this.L$();if(this.negative===0&&A.negative!==0)return A.negative=0,R=this.isub(A),A.negative=1,R.L$();this.length>A.length?(w=this,C=A):(w=A,C=this);for(var k=0,_=0;_<C.length;_++)R=(0|w.words[_])+(0|C.words[_])+k,this.words[_]=67108863&R,k=R>>>26;for(;k!==0&&_<w.length;_++)R=(0|w.words[_])+k,this.words[_]=67108863&R,k=R>>>26;if(this.length=w.length,k!==0)this.words[this.length]=k,this.length++;else if(w!==this)for(;_<w.length;_++)this.words[_]=w.words[_];return this},s.prototype.add=function(A){var R;return A.negative!==0&&this.negative===0?(A.negative=0,R=this.sub(A),A.negative^=1,R):A.negative===0&&this.negative!==0?(this.negative=0,R=A.sub(this),this.negative=1,R):this.length>A.length?this.clone().iadd(A):A.clone().iadd(this)},s.prototype.isub=function(A){if(A.negative!==0){A.negative=0;var R=this.iadd(A);return A.negative=1,R.L$()}if(this.negative!==0)return this.negative=0,this.iadd(A),this.negative=1,this.L$();var w,C,k=this.cmp(A);if(k===0)return this.negative=0,this.length=1,this.words[0]=0,this;k>0?(w=this,C=A):(w=A,C=this);for(var _=0,X=0;X<C.length;X++)_=(R=(0|w.words[X])-(0|C.words[X])+_)>>26,this.words[X]=67108863&R;for(;_!==0&&X<w.length;X++)_=(R=(0|w.words[X])+_)>>26,this.words[X]=67108863&R;if(_===0&&X<w.length&&w!==this)for(;X<w.length;X++)this.words[X]=w.words[X];return this.length=Math.max(this.length,X),w!==this&&(this.negative=1),this.I$()},s.prototype.sub=function(A){return this.clone().isub(A)};var S=function(A,R,w){var C,k,_,X=A.words,N=R.words,U=w.words,O=0,W=0|X[0],P=8191&W,H=W>>>13,j=0|X[1],Q=8191&j,J=j>>>13,ht=0|X[2],ot=8191&ht,ut=ht>>>13,dt=0|X[3],Et=8191&dt,St=dt>>>13,Vt=0|X[4],_t=8191&Vt,jt=Vt>>>13,ee=0|X[5],Dt=8191&ee,Ct=ee>>>13,Pi=0|X[6],Ge=8191&Pi,Re=Pi>>>13,Zr=0|X[7],Ze=8191&Zr,ni=Zr>>>13,ur=0|X[8],ce=8191&ur,Qe=ur>>>13,Ai=0|X[9],fe=8191&Ai,Le=Ai>>>13,yi=0|N[0],Ye=8191&yi,Ie=yi>>>13,Va=0|N[1],Pe=8191&Va,He=Va>>>13,Ut=0|N[2],re=8191&Ut,Rt=Ut>>>13,ae=0|N[3],Tt=8191&ae,Ot=ae>>>13,he=0|N[4],de=8191&he,Ee=he>>>13,Vn=0|N[5],ii=8191&Vn,Te=Vn>>>13,zn=0|N[6],mi=8191&zn,si=zn>>>13,Pt=0|N[7],It=8191&Pt,Zt=Pt>>>13,ks=0|N[8],ri=8191&ks,ge=ks>>>13,$i=0|N[9],Ue=8191&$i,Fe=$i>>>13;w.negative=A.negative^R.negative,w.length=19;var Ui=(O+(C=Math.imul(P,Ye))|0)+((8191&(k=(k=Math.imul(P,Ie))+Math.imul(H,Ye)|0))<<13)|0;O=((_=Math.imul(H,Ie))+(k>>>13)|0)+(Ui>>>26)|0,Ui&=67108863,C=Math.imul(Q,Ye),k=(k=Math.imul(Q,Ie))+Math.imul(J,Ye)|0,_=Math.imul(J,Ie);var Vi=(O+(C=C+Math.imul(P,Pe)|0)|0)+((8191&(k=(k=k+Math.imul(P,He)|0)+Math.imul(H,Pe)|0))<<13)|0;O=((_=_+Math.imul(H,He)|0)+(k>>>13)|0)+(Vi>>>26)|0,Vi&=67108863,C=Math.imul(ot,Ye),k=(k=Math.imul(ot,Ie))+Math.imul(ut,Ye)|0,_=Math.imul(ut,Ie),C=C+Math.imul(Q,Pe)|0,k=(k=k+Math.imul(Q,He)|0)+Math.imul(J,Pe)|0,_=_+Math.imul(J,He)|0;var ss=(O+(C=C+Math.imul(P,re)|0)|0)+((8191&(k=(k=k+Math.imul(P,Rt)|0)+Math.imul(H,re)|0))<<13)|0;O=((_=_+Math.imul(H,Rt)|0)+(k>>>13)|0)+(ss>>>26)|0,ss&=67108863,C=Math.imul(Et,Ye),k=(k=Math.imul(Et,Ie))+Math.imul(St,Ye)|0,_=Math.imul(St,Ie),C=C+Math.imul(ot,Pe)|0,k=(k=k+Math.imul(ot,He)|0)+Math.imul(ut,Pe)|0,_=_+Math.imul(ut,He)|0,C=C+Math.imul(Q,re)|0,k=(k=k+Math.imul(Q,Rt)|0)+Math.imul(J,re)|0,_=_+Math.imul(J,Rt)|0;var Oi=(O+(C=C+Math.imul(P,Tt)|0)|0)+((8191&(k=(k=k+Math.imul(P,Ot)|0)+Math.imul(H,Tt)|0))<<13)|0;O=((_=_+Math.imul(H,Ot)|0)+(k>>>13)|0)+(Oi>>>26)|0,Oi&=67108863,C=Math.imul(_t,Ye),k=(k=Math.imul(_t,Ie))+Math.imul(jt,Ye)|0,_=Math.imul(jt,Ie),C=C+Math.imul(Et,Pe)|0,k=(k=k+Math.imul(Et,He)|0)+Math.imul(St,Pe)|0,_=_+Math.imul(St,He)|0,C=C+Math.imul(ot,re)|0,k=(k=k+Math.imul(ot,Rt)|0)+Math.imul(ut,re)|0,_=_+Math.imul(ut,Rt)|0,C=C+Math.imul(Q,Tt)|0,k=(k=k+Math.imul(Q,Ot)|0)+Math.imul(J,Tt)|0,_=_+Math.imul(J,Ot)|0;var vt=(O+(C=C+Math.imul(P,de)|0)|0)+((8191&(k=(k=k+Math.imul(P,Ee)|0)+Math.imul(H,de)|0))<<13)|0;O=((_=_+Math.imul(H,Ee)|0)+(k>>>13)|0)+(vt>>>26)|0,vt&=67108863,C=Math.imul(Dt,Ye),k=(k=Math.imul(Dt,Ie))+Math.imul(Ct,Ye)|0,_=Math.imul(Ct,Ie),C=C+Math.imul(_t,Pe)|0,k=(k=k+Math.imul(_t,He)|0)+Math.imul(jt,Pe)|0,_=_+Math.imul(jt,He)|0,C=C+Math.imul(Et,re)|0,k=(k=k+Math.imul(Et,Rt)|0)+Math.imul(St,re)|0,_=_+Math.imul(St,Rt)|0,C=C+Math.imul(ot,Tt)|0,k=(k=k+Math.imul(ot,Ot)|0)+Math.imul(ut,Tt)|0,_=_+Math.imul(ut,Ot)|0,C=C+Math.imul(Q,de)|0,k=(k=k+Math.imul(Q,Ee)|0)+Math.imul(J,de)|0,_=_+Math.imul(J,Ee)|0;var Ht=(O+(C=C+Math.imul(P,ii)|0)|0)+((8191&(k=(k=k+Math.imul(P,Te)|0)+Math.imul(H,ii)|0))<<13)|0;O=((_=_+Math.imul(H,Te)|0)+(k>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,C=Math.imul(Ge,Ye),k=(k=Math.imul(Ge,Ie))+Math.imul(Re,Ye)|0,_=Math.imul(Re,Ie),C=C+Math.imul(Dt,Pe)|0,k=(k=k+Math.imul(Dt,He)|0)+Math.imul(Ct,Pe)|0,_=_+Math.imul(Ct,He)|0,C=C+Math.imul(_t,re)|0,k=(k=k+Math.imul(_t,Rt)|0)+Math.imul(jt,re)|0,_=_+Math.imul(jt,Rt)|0,C=C+Math.imul(Et,Tt)|0,k=(k=k+Math.imul(Et,Ot)|0)+Math.imul(St,Tt)|0,_=_+Math.imul(St,Ot)|0,C=C+Math.imul(ot,de)|0,k=(k=k+Math.imul(ot,Ee)|0)+Math.imul(ut,de)|0,_=_+Math.imul(ut,Ee)|0,C=C+Math.imul(Q,ii)|0,k=(k=k+Math.imul(Q,Te)|0)+Math.imul(J,ii)|0,_=_+Math.imul(J,Te)|0;var $s=(O+(C=C+Math.imul(P,mi)|0)|0)+((8191&(k=(k=k+Math.imul(P,si)|0)+Math.imul(H,mi)|0))<<13)|0;O=((_=_+Math.imul(H,si)|0)+(k>>>13)|0)+($s>>>26)|0,$s&=67108863,C=Math.imul(Ze,Ye),k=(k=Math.imul(Ze,Ie))+Math.imul(ni,Ye)|0,_=Math.imul(ni,Ie),C=C+Math.imul(Ge,Pe)|0,k=(k=k+Math.imul(Ge,He)|0)+Math.imul(Re,Pe)|0,_=_+Math.imul(Re,He)|0,C=C+Math.imul(Dt,re)|0,k=(k=k+Math.imul(Dt,Rt)|0)+Math.imul(Ct,re)|0,_=_+Math.imul(Ct,Rt)|0,C=C+Math.imul(_t,Tt)|0,k=(k=k+Math.imul(_t,Ot)|0)+Math.imul(jt,Tt)|0,_=_+Math.imul(jt,Ot)|0,C=C+Math.imul(Et,de)|0,k=(k=k+Math.imul(Et,Ee)|0)+Math.imul(St,de)|0,_=_+Math.imul(St,Ee)|0,C=C+Math.imul(ot,ii)|0,k=(k=k+Math.imul(ot,Te)|0)+Math.imul(ut,ii)|0,_=_+Math.imul(ut,Te)|0,C=C+Math.imul(Q,mi)|0,k=(k=k+Math.imul(Q,si)|0)+Math.imul(J,mi)|0,_=_+Math.imul(J,si)|0;var zi=(O+(C=C+Math.imul(P,It)|0)|0)+((8191&(k=(k=k+Math.imul(P,Zt)|0)+Math.imul(H,It)|0))<<13)|0;O=((_=_+Math.imul(H,Zt)|0)+(k>>>13)|0)+(zi>>>26)|0,zi&=67108863,C=Math.imul(ce,Ye),k=(k=Math.imul(ce,Ie))+Math.imul(Qe,Ye)|0,_=Math.imul(Qe,Ie),C=C+Math.imul(Ze,Pe)|0,k=(k=k+Math.imul(Ze,He)|0)+Math.imul(ni,Pe)|0,_=_+Math.imul(ni,He)|0,C=C+Math.imul(Ge,re)|0,k=(k=k+Math.imul(Ge,Rt)|0)+Math.imul(Re,re)|0,_=_+Math.imul(Re,Rt)|0,C=C+Math.imul(Dt,Tt)|0,k=(k=k+Math.imul(Dt,Ot)|0)+Math.imul(Ct,Tt)|0,_=_+Math.imul(Ct,Ot)|0,C=C+Math.imul(_t,de)|0,k=(k=k+Math.imul(_t,Ee)|0)+Math.imul(jt,de)|0,_=_+Math.imul(jt,Ee)|0,C=C+Math.imul(Et,ii)|0,k=(k=k+Math.imul(Et,Te)|0)+Math.imul(St,ii)|0,_=_+Math.imul(St,Te)|0,C=C+Math.imul(ot,mi)|0,k=(k=k+Math.imul(ot,si)|0)+Math.imul(ut,mi)|0,_=_+Math.imul(ut,si)|0,C=C+Math.imul(Q,It)|0,k=(k=k+Math.imul(Q,Zt)|0)+Math.imul(J,It)|0,_=_+Math.imul(J,Zt)|0;var _i=(O+(C=C+Math.imul(P,ri)|0)|0)+((8191&(k=(k=k+Math.imul(P,ge)|0)+Math.imul(H,ri)|0))<<13)|0;O=((_=_+Math.imul(H,ge)|0)+(k>>>13)|0)+(_i>>>26)|0,_i&=67108863,C=Math.imul(fe,Ye),k=(k=Math.imul(fe,Ie))+Math.imul(Le,Ye)|0,_=Math.imul(Le,Ie),C=C+Math.imul(ce,Pe)|0,k=(k=k+Math.imul(ce,He)|0)+Math.imul(Qe,Pe)|0,_=_+Math.imul(Qe,He)|0,C=C+Math.imul(Ze,re)|0,k=(k=k+Math.imul(Ze,Rt)|0)+Math.imul(ni,re)|0,_=_+Math.imul(ni,Rt)|0,C=C+Math.imul(Ge,Tt)|0,k=(k=k+Math.imul(Ge,Ot)|0)+Math.imul(Re,Tt)|0,_=_+Math.imul(Re,Ot)|0,C=C+Math.imul(Dt,de)|0,k=(k=k+Math.imul(Dt,Ee)|0)+Math.imul(Ct,de)|0,_=_+Math.imul(Ct,Ee)|0,C=C+Math.imul(_t,ii)|0,k=(k=k+Math.imul(_t,Te)|0)+Math.imul(jt,ii)|0,_=_+Math.imul(jt,Te)|0,C=C+Math.imul(Et,mi)|0,k=(k=k+Math.imul(Et,si)|0)+Math.imul(St,mi)|0,_=_+Math.imul(St,si)|0,C=C+Math.imul(ot,It)|0,k=(k=k+Math.imul(ot,Zt)|0)+Math.imul(ut,It)|0,_=_+Math.imul(ut,Zt)|0,C=C+Math.imul(Q,ri)|0,k=(k=k+Math.imul(Q,ge)|0)+Math.imul(J,ri)|0,_=_+Math.imul(J,ge)|0;var Ni=(O+(C=C+Math.imul(P,Ue)|0)|0)+((8191&(k=(k=k+Math.imul(P,Fe)|0)+Math.imul(H,Ue)|0))<<13)|0;O=((_=_+Math.imul(H,Fe)|0)+(k>>>13)|0)+(Ni>>>26)|0,Ni&=67108863,C=Math.imul(fe,Pe),k=(k=Math.imul(fe,He))+Math.imul(Le,Pe)|0,_=Math.imul(Le,He),C=C+Math.imul(ce,re)|0,k=(k=k+Math.imul(ce,Rt)|0)+Math.imul(Qe,re)|0,_=_+Math.imul(Qe,Rt)|0,C=C+Math.imul(Ze,Tt)|0,k=(k=k+Math.imul(Ze,Ot)|0)+Math.imul(ni,Tt)|0,_=_+Math.imul(ni,Ot)|0,C=C+Math.imul(Ge,de)|0,k=(k=k+Math.imul(Ge,Ee)|0)+Math.imul(Re,de)|0,_=_+Math.imul(Re,Ee)|0,C=C+Math.imul(Dt,ii)|0,k=(k=k+Math.imul(Dt,Te)|0)+Math.imul(Ct,ii)|0,_=_+Math.imul(Ct,Te)|0,C=C+Math.imul(_t,mi)|0,k=(k=k+Math.imul(_t,si)|0)+Math.imul(jt,mi)|0,_=_+Math.imul(jt,si)|0,C=C+Math.imul(Et,It)|0,k=(k=k+Math.imul(Et,Zt)|0)+Math.imul(St,It)|0,_=_+Math.imul(St,Zt)|0,C=C+Math.imul(ot,ri)|0,k=(k=k+Math.imul(ot,ge)|0)+Math.imul(ut,ri)|0,_=_+Math.imul(ut,ge)|0;var Ji=(O+(C=C+Math.imul(Q,Ue)|0)|0)+((8191&(k=(k=k+Math.imul(Q,Fe)|0)+Math.imul(J,Ue)|0))<<13)|0;O=((_=_+Math.imul(J,Fe)|0)+(k>>>13)|0)+(Ji>>>26)|0,Ji&=67108863,C=Math.imul(fe,re),k=(k=Math.imul(fe,Rt))+Math.imul(Le,re)|0,_=Math.imul(Le,Rt),C=C+Math.imul(ce,Tt)|0,k=(k=k+Math.imul(ce,Ot)|0)+Math.imul(Qe,Tt)|0,_=_+Math.imul(Qe,Ot)|0,C=C+Math.imul(Ze,de)|0,k=(k=k+Math.imul(Ze,Ee)|0)+Math.imul(ni,de)|0,_=_+Math.imul(ni,Ee)|0,C=C+Math.imul(Ge,ii)|0,k=(k=k+Math.imul(Ge,Te)|0)+Math.imul(Re,ii)|0,_=_+Math.imul(Re,Te)|0,C=C+Math.imul(Dt,mi)|0,k=(k=k+Math.imul(Dt,si)|0)+Math.imul(Ct,mi)|0,_=_+Math.imul(Ct,si)|0,C=C+Math.imul(_t,It)|0,k=(k=k+Math.imul(_t,Zt)|0)+Math.imul(jt,It)|0,_=_+Math.imul(jt,Zt)|0,C=C+Math.imul(Et,ri)|0,k=(k=k+Math.imul(Et,ge)|0)+Math.imul(St,ri)|0,_=_+Math.imul(St,ge)|0;var Fr=(O+(C=C+Math.imul(ot,Ue)|0)|0)+((8191&(k=(k=k+Math.imul(ot,Fe)|0)+Math.imul(ut,Ue)|0))<<13)|0;O=((_=_+Math.imul(ut,Fe)|0)+(k>>>13)|0)+(Fr>>>26)|0,Fr&=67108863,C=Math.imul(fe,Tt),k=(k=Math.imul(fe,Ot))+Math.imul(Le,Tt)|0,_=Math.imul(Le,Ot),C=C+Math.imul(ce,de)|0,k=(k=k+Math.imul(ce,Ee)|0)+Math.imul(Qe,de)|0,_=_+Math.imul(Qe,Ee)|0,C=C+Math.imul(Ze,ii)|0,k=(k=k+Math.imul(Ze,Te)|0)+Math.imul(ni,ii)|0,_=_+Math.imul(ni,Te)|0,C=C+Math.imul(Ge,mi)|0,k=(k=k+Math.imul(Ge,si)|0)+Math.imul(Re,mi)|0,_=_+Math.imul(Re,si)|0,C=C+Math.imul(Dt,It)|0,k=(k=k+Math.imul(Dt,Zt)|0)+Math.imul(Ct,It)|0,_=_+Math.imul(Ct,Zt)|0,C=C+Math.imul(_t,ri)|0,k=(k=k+Math.imul(_t,ge)|0)+Math.imul(jt,ri)|0,_=_+Math.imul(jt,ge)|0;var Vr=(O+(C=C+Math.imul(Et,Ue)|0)|0)+((8191&(k=(k=k+Math.imul(Et,Fe)|0)+Math.imul(St,Ue)|0))<<13)|0;O=((_=_+Math.imul(St,Fe)|0)+(k>>>13)|0)+(Vr>>>26)|0,Vr&=67108863,C=Math.imul(fe,de),k=(k=Math.imul(fe,Ee))+Math.imul(Le,de)|0,_=Math.imul(Le,Ee),C=C+Math.imul(ce,ii)|0,k=(k=k+Math.imul(ce,Te)|0)+Math.imul(Qe,ii)|0,_=_+Math.imul(Qe,Te)|0,C=C+Math.imul(Ze,mi)|0,k=(k=k+Math.imul(Ze,si)|0)+Math.imul(ni,mi)|0,_=_+Math.imul(ni,si)|0,C=C+Math.imul(Ge,It)|0,k=(k=k+Math.imul(Ge,Zt)|0)+Math.imul(Re,It)|0,_=_+Math.imul(Re,Zt)|0,C=C+Math.imul(Dt,ri)|0,k=(k=k+Math.imul(Dt,ge)|0)+Math.imul(Ct,ri)|0,_=_+Math.imul(Ct,ge)|0;var za=(O+(C=C+Math.imul(_t,Ue)|0)|0)+((8191&(k=(k=k+Math.imul(_t,Fe)|0)+Math.imul(jt,Ue)|0))<<13)|0;O=((_=_+Math.imul(jt,Fe)|0)+(k>>>13)|0)+(za>>>26)|0,za&=67108863,C=Math.imul(fe,ii),k=(k=Math.imul(fe,Te))+Math.imul(Le,ii)|0,_=Math.imul(Le,Te),C=C+Math.imul(ce,mi)|0,k=(k=k+Math.imul(ce,si)|0)+Math.imul(Qe,mi)|0,_=_+Math.imul(Qe,si)|0,C=C+Math.imul(Ze,It)|0,k=(k=k+Math.imul(Ze,Zt)|0)+Math.imul(ni,It)|0,_=_+Math.imul(ni,Zt)|0,C=C+Math.imul(Ge,ri)|0,k=(k=k+Math.imul(Ge,ge)|0)+Math.imul(Re,ri)|0,_=_+Math.imul(Re,ge)|0;var Qr=(O+(C=C+Math.imul(Dt,Ue)|0)|0)+((8191&(k=(k=k+Math.imul(Dt,Fe)|0)+Math.imul(Ct,Ue)|0))<<13)|0;O=((_=_+Math.imul(Ct,Fe)|0)+(k>>>13)|0)+(Qr>>>26)|0,Qr&=67108863,C=Math.imul(fe,mi),k=(k=Math.imul(fe,si))+Math.imul(Le,mi)|0,_=Math.imul(Le,si),C=C+Math.imul(ce,It)|0,k=(k=k+Math.imul(ce,Zt)|0)+Math.imul(Qe,It)|0,_=_+Math.imul(Qe,Zt)|0,C=C+Math.imul(Ze,ri)|0,k=(k=k+Math.imul(Ze,ge)|0)+Math.imul(ni,ri)|0,_=_+Math.imul(ni,ge)|0;var Kr=(O+(C=C+Math.imul(Ge,Ue)|0)|0)+((8191&(k=(k=k+Math.imul(Ge,Fe)|0)+Math.imul(Re,Ue)|0))<<13)|0;O=((_=_+Math.imul(Re,Fe)|0)+(k>>>13)|0)+(Kr>>>26)|0,Kr&=67108863,C=Math.imul(fe,It),k=(k=Math.imul(fe,Zt))+Math.imul(Le,It)|0,_=Math.imul(Le,Zt),C=C+Math.imul(ce,ri)|0,k=(k=k+Math.imul(ce,ge)|0)+Math.imul(Qe,ri)|0,_=_+Math.imul(Qe,ge)|0;var Ae=(O+(C=C+Math.imul(Ze,Ue)|0)|0)+((8191&(k=(k=k+Math.imul(Ze,Fe)|0)+Math.imul(ni,Ue)|0))<<13)|0;O=((_=_+Math.imul(ni,Fe)|0)+(k>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,C=Math.imul(fe,ri),k=(k=Math.imul(fe,ge))+Math.imul(Le,ri)|0,_=Math.imul(Le,ge);var Ds=(O+(C=C+Math.imul(ce,Ue)|0)|0)+((8191&(k=(k=k+Math.imul(ce,Fe)|0)+Math.imul(Qe,Ue)|0))<<13)|0;O=((_=_+Math.imul(Qe,Fe)|0)+(k>>>13)|0)+(Ds>>>26)|0,Ds&=67108863;var sa=(O+(C=Math.imul(fe,Ue))|0)+((8191&(k=(k=Math.imul(fe,Fe))+Math.imul(Le,Ue)|0))<<13)|0;return O=((_=Math.imul(Le,Fe))+(k>>>13)|0)+(sa>>>26)|0,sa&=67108863,U[0]=Ui,U[1]=Vi,U[2]=ss,U[3]=Oi,U[4]=vt,U[5]=Ht,U[6]=$s,U[7]=zi,U[8]=_i,U[9]=Ni,U[10]=Ji,U[11]=Fr,U[12]=Vr,U[13]=za,U[14]=Qr,U[15]=Kr,U[16]=Ae,U[17]=Ds,U[18]=sa,O!==0&&(U[19]=O,w.length++),w};function x(A,R,w){w.negative=R.negative^A.negative,w.length=A.length+R.length;for(var C=0,k=0,_=0;_<w.length-1;_++){var X=k;k=0;for(var N=67108863&C,U=Math.min(_,R.length-1),O=Math.max(0,_-A.length+1);O<=U;O++){var W=_-O,P=(0|A.words[W])*(0|R.words[O]),H=67108863&P;N=67108863&(H=H+N|0),k+=(X=(X=X+(P/67108864|0)|0)+(H>>>26)|0)>>>26,X&=67108863}w.words[_]=N,C=X,X=k}return C!==0?w.words[_]=C:w.length--,w.I$()}function v(A,R,w){return x(A,R,w)}Math.imul||(S=m),s.prototype.mulTo=function(A,R){var w=this.length+A.length;return this.length===10&&A.length===10?S(this,A,R):w<63?m(this,A,R):w<1024?x(this,A,R):v(this,A,R)},s.prototype.mul=function(A){var R=new s(null);return R.words=new Array(this.length+A.length),this.mulTo(A,R)},s.prototype.mulf=function(A){var R=new s(null);return R.words=new Array(this.length+A.length),v(this,A,R)},s.prototype.imul=function(A){return this.clone().mulTo(A,this)},s.prototype.imuln=function(A){var R=A<0;R&&(A=-A),e(typeof A=="number"),e(A<67108864);for(var w=0,C=0;C<this.length;C++){var k=(0|this.words[C])*A,_=(67108863&k)+(67108863&w);w>>=26,w+=k/67108864|0,w+=_>>>26,this.words[C]=67108863&_}return w!==0&&(this.words[C]=w,this.length++),R?this.ineg():this},s.prototype.muln=function(A){return this.clone().imuln(A)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(A){var R=function(_){for(var X=new Array(_.bitLength()),N=0;N<X.length;N++){var U=N/26|0,O=N%26;X[N]=_.words[U]>>>O&1}return X}(A);if(R.length===0)return new s(1);for(var w=this,C=0;C<R.length&&R[C]===0;C++,w=w.sqr());if(++C<R.length)for(var k=w.sqr();C<R.length;C++,k=k.sqr())R[C]!==0&&(w=w.mul(k));return w},s.prototype.iushln=function(A){e(typeof A=="number"&&A>=0);var R,w=A%26,C=(A-w)/26,k=67108863>>>26-w<<26-w;if(w!==0){var _=0;for(R=0;R<this.length;R++){var X=this.words[R]&k,N=(0|this.words[R])-X<<w;this.words[R]=N|_,_=X>>>26-w}_&&(this.words[R]=_,this.length++)}if(C!==0){for(R=this.length-1;R>=0;R--)this.words[R+C]=this.words[R];for(R=0;R<C;R++)this.words[R]=0;this.length+=C}return this.I$()},s.prototype.ishln=function(A){return e(this.negative===0),this.iushln(A)},s.prototype.iushrn=function(A,R,w){var C;e(typeof A=="number"&&A>=0),C=R?(R-R%26)/26:0;var k=A%26,_=Math.min((A-k)/26,this.length),X=67108863^67108863>>>k<<k,N=w;if(C-=_,C=Math.max(0,C),N){for(var U=0;U<_;U++)N.words[U]=this.words[U];N.length=_}if(_!==0)if(this.length>_)for(this.length-=_,U=0;U<this.length;U++)this.words[U]=this.words[U+_];else this.words[0]=0,this.length=1;var O=0;for(U=this.length-1;U>=0&&(O!==0||U>=C);U--){var W=0|this.words[U];this.words[U]=O<<26-k|W>>>k,O=W&X}return N&&O!==0&&(N.words[N.length++]=O),this.length===0&&(this.words[0]=0,this.length=1),this.I$()},s.prototype.ishrn=function(A,R,w){return e(this.negative===0),this.iushrn(A,R,w)},s.prototype.shln=function(A){return this.clone().ishln(A)},s.prototype.ushln=function(A){return this.clone().iushln(A)},s.prototype.shrn=function(A){return this.clone().ishrn(A)},s.prototype.ushrn=function(A){return this.clone().iushrn(A)},s.prototype.testn=function(A){e(typeof A=="number"&&A>=0);var R=A%26,w=(A-R)/26,C=1<<R;return!(this.length<=w||!(this.words[w]&C))},s.prototype.imaskn=function(A){e(typeof A=="number"&&A>=0);var R=A%26,w=(A-R)/26;if(e(this.negative===0,"imaskn works only with positive numbers"),this.length<=w)return this;if(R!==0&&w++,this.length=Math.min(w,this.length),R!==0){var C=67108863^67108863>>>R<<R;this.words[this.length-1]&=C}return this.I$()},s.prototype.maskn=function(A){return this.clone().imaskn(A)},s.prototype.iaddn=function(A){return e(typeof A=="number"),e(A<67108864),A<0?this.isubn(-A):this.negative!==0?this.length===1&&(0|this.words[0])<=A?(this.words[0]=A-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(A),this.negative=1,this):this.P$(A)},s.prototype.P$=function(A){this.words[0]+=A;for(var R=0;R<this.length&&this.words[R]>=67108864;R++)this.words[R]-=67108864,R===this.length-1?this.words[R+1]=1:this.words[R+1]++;return this.length=Math.max(this.length,R+1),this},s.prototype.isubn=function(A){if(e(typeof A=="number"),e(A<67108864),A<0)return this.iaddn(-A);if(this.negative!==0)return this.negative=0,this.iaddn(A),this.negative=1,this;if(this.words[0]-=A,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var R=0;R<this.length&&this.words[R]<0;R++)this.words[R]+=67108864,this.words[R+1]-=1;return this.I$()},s.prototype.addn=function(A){return this.clone().iaddn(A)},s.prototype.subn=function(A){return this.clone().isubn(A)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype.O$=function(A,R,w){var C,k,_=A.length+w;this.B$(_);var X=0;for(C=0;C<A.length;C++){k=(0|this.words[C+w])+X;var N=(0|A.words[C])*R;X=((k-=67108863&N)>>26)-(N/67108864|0),this.words[C+w]=67108863&k}for(;C<this.length-w;C++)X=(k=(0|this.words[C+w])+X)>>26,this.words[C+w]=67108863&k;if(X===0)return this.I$();for(e(X===-1),X=0,C=0;C<this.length;C++)X=(k=-(0|this.words[C])+X)>>26,this.words[C]=67108863&k;return this.negative=1,this.I$()},s.prototype.N$=function(A,R){var w=(this.length,A.length),C=this.clone(),k=A,_=0|k.words[k.length-1];(w=26-this.z$(_))!=0&&(k=k.ushln(w),C.iushln(w),_=0|k.words[k.length-1]);var X,N=C.length-k.length;if(R!=="mod"){(X=new s(null)).length=N+1,X.words=new Array(X.length);for(var U=0;U<X.length;U++)X.words[U]=0}var O=C.clone().O$(k,1,N);O.negative===0&&(C=O,X&&(X.words[N]=1));for(var W=N-1;W>=0;W--){var P=67108864*(0|C.words[k.length+W])+(0|C.words[k.length+W-1]);for(P=Math.min(P/_|0,67108863),C.O$(k,P,W);C.negative!==0;)P--,C.negative=0,C.O$(k,1,W),C.isZero()||(C.negative^=1);X&&(X.words[W]=P)}return X&&X.I$(),C.I$(),R!=="div"&&w!==0&&C.iushrn(w),{div:X||null,mod:C}},s.prototype.divmod=function(A,R,w){return e(!A.isZero()),this.isZero()?{div:new s(0),mod:new s(0)}:this.negative!==0&&A.negative===0?(_=this.neg().divmod(A,R),R!=="mod"&&(C=_.div.neg()),R!=="div"&&(k=_.mod.neg(),w&&k.negative!==0&&k.iadd(A)),{div:C,mod:k}):this.negative===0&&A.negative!==0?(_=this.divmod(A.neg(),R),R!=="mod"&&(C=_.div.neg()),{div:C,mod:_.mod}):(this.negative&A.negative)!=0?(_=this.neg().divmod(A.neg(),R),R!=="div"&&(k=_.mod.neg(),w&&k.negative!==0&&k.isub(A)),{div:_.div,mod:k}):A.length>this.length||this.cmp(A)<0?{div:new s(0),mod:this}:A.length===1?R==="div"?{div:this.divn(A.words[0]),mod:null}:R==="mod"?{div:null,mod:new s(this.modrn(A.words[0]))}:{div:this.divn(A.words[0]),mod:new s(this.modrn(A.words[0]))}:this.N$(A,R);var C,k,_},s.prototype.div=function(A){return this.divmod(A,"div",!1).div},s.prototype.mod=function(A){return this.divmod(A,"mod",!1).mod},s.prototype.umod=function(A){return this.divmod(A,"mod",!0).mod},s.prototype.divRound=function(A){var R=this.divmod(A);if(R.mod.isZero())return R.div;var w=R.div.negative!==0?R.mod.isub(A):R.mod,C=A.ushrn(1),k=A.andln(1),_=w.cmp(C);return _<0||k===1&&_===0?R.div:R.div.negative!==0?R.div.isubn(1):R.div.iaddn(1)},s.prototype.modrn=function(A){var R=A<0;R&&(A=-A),e(A<=67108863);for(var w=(1<<26)%A,C=0,k=this.length-1;k>=0;k--)C=(w*C+(0|this.words[k]))%A;return R?-C:C},s.prototype.modn=function(A){return this.modrn(A)},s.prototype.idivn=function(A){var R=A<0;R&&(A=-A),e(A<=67108863);for(var w=0,C=this.length-1;C>=0;C--){var k=(0|this.words[C])+67108864*w;this.words[C]=k/A|0,w=k%A}return this.I$(),R?this.ineg():this},s.prototype.divn=function(A){return this.clone().idivn(A)},s.prototype.egcd=function(A){e(A.negative===0),e(!A.isZero());var R=this,w=A.clone();R=R.negative!==0?R.umod(A):R.clone();for(var C=new s(1),k=new s(0),_=new s(0),X=new s(1),N=0;R.isEven()&&w.isEven();)R.iushrn(1),w.iushrn(1),++N;for(var U=w.clone(),O=R.clone();!R.isZero();){for(var W=0,P=1;(R.words[0]&P)==0&&W<26;++W,P<<=1);if(W>0)for(R.iushrn(W);W-- >0;)(C.isOdd()||k.isOdd())&&(C.iadd(U),k.isub(O)),C.iushrn(1),k.iushrn(1);for(var H=0,j=1;(w.words[0]&j)==0&&H<26;++H,j<<=1);if(H>0)for(w.iushrn(H);H-- >0;)(_.isOdd()||X.isOdd())&&(_.iadd(U),X.isub(O)),_.iushrn(1),X.iushrn(1);R.cmp(w)>=0?(R.isub(w),C.isub(_),k.isub(X)):(w.isub(R),_.isub(C),X.isub(k))}return{a:_,b:X,gcd:w.iushln(N)}},s.prototype.G$=function(A){e(A.negative===0),e(!A.isZero());var R=this,w=A.clone();R=R.negative!==0?R.umod(A):R.clone();for(var C,k=new s(1),_=new s(0),X=w.clone();R.cmpn(1)>0&&w.cmpn(1)>0;){for(var N=0,U=1;(R.words[0]&U)==0&&N<26;++N,U<<=1);if(N>0)for(R.iushrn(N);N-- >0;)k.isOdd()&&k.iadd(X),k.iushrn(1);for(var O=0,W=1;(w.words[0]&W)==0&&O<26;++O,W<<=1);if(O>0)for(w.iushrn(O);O-- >0;)_.isOdd()&&_.iadd(X),_.iushrn(1);R.cmp(w)>=0?(R.isub(w),k.isub(_)):(w.isub(R),_.isub(k))}return(C=R.cmpn(1)===0?k:_).cmpn(0)<0&&C.iadd(A),C},s.prototype.gcd=function(A){if(this.isZero())return A.abs();if(A.isZero())return this.abs();var R=this.clone(),w=A.clone();R.negative=0,w.negative=0;for(var C=0;R.isEven()&&w.isEven();C++)R.iushrn(1),w.iushrn(1);for(;;){for(;R.isEven();)R.iushrn(1);for(;w.isEven();)w.iushrn(1);var k=R.cmp(w);if(k<0){var _=R;R=w,w=_}else if(k===0||w.cmpn(1)===0)break;R.isub(w)}return w.iushln(C)},s.prototype.invm=function(A){return this.egcd(A).a.umod(A)},s.prototype.isEven=function(){return(1&this.words[0])==0},s.prototype.isOdd=function(){return(1&this.words[0])==1},s.prototype.andln=function(A){return this.words[0]&A},s.prototype.bincn=function(A){e(typeof A=="number");var R=A%26,w=(A-R)/26,C=1<<R;if(this.length<=w)return this.B$(w+1),this.words[w]|=C,this;for(var k=C,_=w;k!==0&&_<this.length;_++){var X=0|this.words[_];k=(X+=k)>>>26,X&=67108863,this.words[_]=X}return k!==0&&(this.words[_]=k,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(A){var R,w=A<0;if(this.negative!==0&&!w)return-1;if(this.negative===0&&w)return 1;if(this.I$(),this.length>1)R=1;else{w&&(A=-A),e(A<=67108863,"Number is too big");var C=0|this.words[0];R=C===A?0:C<A?-1:1}return this.negative!==0?0|-R:R},s.prototype.cmp=function(A){if(this.negative!==0&&A.negative===0)return-1;if(this.negative===0&&A.negative!==0)return 1;var R=this.ucmp(A);return this.negative!==0?0|-R:R},s.prototype.ucmp=function(A){if(this.length>A.length)return 1;if(this.length<A.length)return-1;for(var R=0,w=this.length-1;w>=0;w--){var C=0|this.words[w],k=0|A.words[w];if(C!==k){C<k?R=-1:C>k&&(R=1);break}}return R},s.prototype.gtn=function(A){return this.cmpn(A)===1},s.prototype.gt=function(A){return this.cmp(A)===1},s.prototype.gten=function(A){return this.cmpn(A)>=0},s.prototype.gte=function(A){return this.cmp(A)>=0},s.prototype.ltn=function(A){return this.cmpn(A)===-1},s.prototype.lt=function(A){return this.cmp(A)===-1},s.prototype.lten=function(A){return this.cmpn(A)<=0},s.prototype.lte=function(A){return this.cmp(A)<=0},s.prototype.eqn=function(A){return this.cmpn(A)===0},s.prototype.eq=function(A){return this.cmp(A)===0},s.red=function(A){return new z(A)},s.prototype.toRed=function(A){return e(!this.red,"Already a number in reduction context"),e(this.negative===0,"red works only with positives"),A.convertTo(this).W$(A)},s.prototype.fromRed=function(){return e(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype.W$=function(A){return this.red=A,this},s.prototype.forceRed=function(A){return e(!this.red,"Already a number in reduction context"),this.W$(A)},s.prototype.redAdd=function(A){return e(this.red,"redAdd works only with red numbers"),this.red.add(this,A)},s.prototype.redIAdd=function(A){return e(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,A)},s.prototype.redSub=function(A){return e(this.red,"redSub works only with red numbers"),this.red.sub(this,A)},s.prototype.redISub=function(A){return e(this.red,"redISub works only with red numbers"),this.red.isub(this,A)},s.prototype.redShl=function(A){return e(this.red,"redShl works only with red numbers"),this.red.shl(this,A)},s.prototype.redMul=function(A){return e(this.red,"redMul works only with red numbers"),this.red.U$(this,A),this.red.mul(this,A)},s.prototype.redIMul=function(A){return e(this.red,"redMul works only with red numbers"),this.red.U$(this,A),this.red.imul(this,A)},s.prototype.redSqr=function(){return e(this.red,"redSqr works only with red numbers"),this.red.Y$(this),this.red.sqr(this)},s.prototype.redISqr=function(){return e(this.red,"redISqr works only with red numbers"),this.red.Y$(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return e(this.red,"redSqrt works only with red numbers"),this.red.Y$(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return e(this.red,"redInvm works only with red numbers"),this.red.Y$(this),this.red.invm(this)},s.prototype.redNeg=function(){return e(this.red,"redNeg works only with red numbers"),this.red.Y$(this),this.red.neg(this)},s.prototype.redPow=function(A){return e(this.red&&!A.red,"redPow(normalNum)"),this.red.Y$(this),this.red.pow(this,A)};var b={k256:null,p224:null,p192:null,p25519:null};function E(A,R){this.name=A,this.p=new s(R,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this.H$()}function T(){E.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function V(){E.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function F(){E.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function B(){E.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function z(A){if(typeof A=="string"){var R=s.$$(A);this.m=R.p,this.prime=R}else e(A.gtn(1),"modulus must be greater than 1"),this.m=A,this.prime=null}function L(A){z.call(this,A),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r.G$(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}E.prototype.H$=function(){var A=new s(null);return A.words=new Array(Math.ceil(this.n/13)),A},E.prototype.ireduce=function(A){var R,w=A;do this.split(w,this.tmp),R=(w=(w=this.imulK(w)).iadd(this.tmp)).bitLength();while(R>this.n);var C=R<this.n?-1:w.ucmp(this.p);return C===0?(w.words[0]=0,w.length=1):C>0?w.isub(this.p):w.strip!==void 0?w.strip():w.I$(),w},E.prototype.split=function(A,R){A.iushrn(this.n,0,R)},E.prototype.imulK=function(A){return A.imul(this.k)},i(T,E),T.prototype.split=function(A,R){for(var w=4194303,C=Math.min(A.length,9),k=0;k<C;k++)R.words[k]=A.words[k];if(R.length=C,A.length<=9)return A.words[0]=0,void(A.length=1);var _=A.words[9];for(R.words[R.length++]=_&w,k=10;k<A.length;k++){var X=0|A.words[k];A.words[k-10]=(X&w)<<4|_>>>22,_=X}_>>>=22,A.words[k-10]=_,_===0&&A.length>10?A.length-=10:A.length-=9},T.prototype.imulK=function(A){A.words[A.length]=0,A.words[A.length+1]=0,A.length+=2;for(var R=0,w=0;w<A.length;w++){var C=0|A.words[w];R+=977*C,A.words[w]=67108863&R,R=64*C+(R/67108864|0)}return A.words[A.length-1]===0&&(A.length--,A.words[A.length-1]===0&&A.length--),A},i(V,E),i(F,E),i(B,E),B.prototype.imulK=function(A){for(var R=0,w=0;w<A.length;w++){var C=19*(0|A.words[w])+R,k=67108863&C;C>>>=26,A.words[w]=k,R=C}return R!==0&&(A.words[A.length++]=R),A},s.$$=function(A){if(b[A])return b[A];var R;if(A==="k256")R=new T;else if(A==="p224")R=new V;else if(A==="p192")R=new F;else{if(A!=="p25519")throw new Error("Unknown prime "+A);R=new B}return b[A]=R,R},z.prototype.Y$=function(A){e(A.negative===0,"red works only with positives"),e(A.red,"red works only with red numbers")},z.prototype.U$=function(A,R){e((A.negative|R.negative)==0,"red works only with positives"),e(A.red&&A.red===R.red,"red works only with red numbers")},z.prototype.imod=function(A){return this.prime?this.prime.ireduce(A).W$(this):(l(A,A.umod(this.m).W$(this)),A)},z.prototype.neg=function(A){return A.isZero()?A.clone():this.m.sub(A).W$(this)},z.prototype.add=function(A,R){this.U$(A,R);var w=A.add(R);return w.cmp(this.m)>=0&&w.isub(this.m),w.W$(this)},z.prototype.iadd=function(A,R){this.U$(A,R);var w=A.iadd(R);return w.cmp(this.m)>=0&&w.isub(this.m),w},z.prototype.sub=function(A,R){this.U$(A,R);var w=A.sub(R);return w.cmpn(0)<0&&w.iadd(this.m),w.W$(this)},z.prototype.isub=function(A,R){this.U$(A,R);var w=A.isub(R);return w.cmpn(0)<0&&w.iadd(this.m),w},z.prototype.shl=function(A,R){return this.Y$(A),this.imod(A.ushln(R))},z.prototype.imul=function(A,R){return this.U$(A,R),this.imod(A.imul(R))},z.prototype.mul=function(A,R){return this.U$(A,R),this.imod(A.mul(R))},z.prototype.isqr=function(A){return this.imul(A,A.clone())},z.prototype.sqr=function(A){return this.mul(A,A)},z.prototype.sqrt=function(A){if(A.isZero())return A.clone();var R=this.m.andln(3);if(e(R%2==1),R===3){var w=this.m.add(new s(1)).iushrn(2);return this.pow(A,w)}for(var C=this.m.subn(1),k=0;!C.isZero()&&C.andln(1)===0;)k++,C.iushrn(1);e(!C.isZero());var _=new s(1).toRed(this),X=_.redNeg(),N=this.m.subn(1).iushrn(1),U=this.m.bitLength();for(U=new s(2*U*U).toRed(this);this.pow(U,N).cmp(X)!==0;)U.redIAdd(X);for(var O=this.pow(U,C),W=this.pow(A,C.addn(1).iushrn(1)),P=this.pow(A,C),H=k;P.cmp(_)!==0;){for(var j=P,Q=0;j.cmp(_)!==0;Q++)j=j.redSqr();e(Q<H);var J=this.pow(O,new s(1).iushln(H-Q-1));W=W.redMul(J),O=J.redSqr(),P=P.redMul(O),H=Q}return W},z.prototype.invm=function(A){var R=A.G$(this.m);return R.negative!==0?(R.negative=0,this.imod(R).redNeg()):this.imod(R)},z.prototype.pow=function(A,R){if(R.isZero())return new s(1).toRed(this);if(R.cmpn(1)===0)return A.clone();var w=new Array(16);w[0]=new s(1).toRed(this),w[1]=A;for(var C=2;C<w.length;C++)w[C]=this.mul(w[C-1],A);var k=w[0],_=0,X=0,N=R.bitLength()%26;for(N===0&&(N=26),C=R.length-1;C>=0;C--){for(var U=R.words[C],O=N-1;O>=0;O--){var W=U>>O&1;k!==w[0]&&(k=this.sqr(k)),W!==0||_!==0?(_<<=1,_|=W,(++X==4||C===0&&O===0)&&(k=this.mul(k,w[_]),X=0,_=0)):X=0}N=26}return k},z.prototype.convertTo=function(A){var R=A.umod(this.m);return R===A?R.clone():R},z.prototype.convertFrom=function(A){var R=A.clone();return R.red=null,R},s.mont=function(A){return new L(A)},i(L,z),L.prototype.convertTo=function(A){return this.imod(A.ushln(this.shift))},L.prototype.convertFrom=function(A){var R=this.imod(A.mul(this.rinv));return R.red=null,R},L.prototype.imul=function(A,R){if(A.isZero()||R.isZero())return A.words[0]=0,A.length=1,A;var w=A.imul(R),C=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),k=w.isub(C).iushrn(this.shift),_=k;return k.cmp(this.m)>=0?_=k.isub(this.m):k.cmpn(0)<0&&(_=k.iadd(this.m)),_.W$(this)},L.prototype.mul=function(A,R){if(A.isZero()||R.isZero())return new s(0).W$(this);var w=A.mul(R),C=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),k=w.isub(C).iushrn(this.shift),_=k;return k.cmp(this.m)>=0?_=k.isub(this.m):k.cmpn(0)<0&&(_=k.iadd(this.m)),_.W$(this)},L.prototype.invm=function(A){return this.imod(A.G$(this.m).mul(this.r2)).W$(this)}})(0,Cf);var Be=Xm.exports;function yE(r,t){if(Array.isArray(r))return r.slice();if(!r)return[];const e=[];if(typeof r!="string"){for(let i=0;i<r.length;i++)e[i]=0|r[i];return e}if(t==="hex"){(r=r.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(r=`0${r}`);for(let i=0;i<r.length;i+=2)e.push(parseInt(r[i]+r[i+1],16))}else for(let i=0;i<r.length;i++){const s=r.charCodeAt(i),n=s>>8,a=255&s;n?e.push(n,a):e.push(a)}return e}const Mf=function(r,t,e){const i=new Array(Math.max(r.bitLength(),e)+1);i.fill(0);const s=1<<t+1,n=r.clone();for(let a=0;a<i.length;a++){let o;const l=n.andln(s-1);n.isOdd()?(o=l>(s>>1)-1?(s>>1)-l:l,n.isubn(o)):o=0,i[a]=o,n.iushrn(1)}return i},lV=function(r,t){const e=[[],[]];r=r.clone(),t=t.clone();let i=0,s=0;for(;r.cmpn(-i)>0||t.cmpn(-s)>0;){let n,a,o=r.andln(3)+i&3,l=t.andln(3)+s&3;if(o===3&&(o=-1),l===3&&(l=-1),(1&o)==0)n=0;else{const u=r.andln(7)+i&7;n=u!==3&&u!==5||l!==2?o:-o}if(e[0].push(n),(1&l)==0)a=0;else{const u=t.andln(7)+s&7;a=u!==3&&u!==5||o!==2?l:-l}e[1].push(a),2*i===n+1&&(i=1-i),2*s===a+1&&(s=1-s),r.iushrn(1),t.iushrn(1)}return e};class uV{constructor(t,e){this.type=t,this.p=new Be(e.p,16),this.red=e.prime?Be.red(e.prime):Be.mont(this.p),this.zero=new Be(0).toRed(this.red),this.one=new Be(1).toRed(this.red),this.two=new Be(2).toRed(this.red),this.n=e.n&&new Be(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this.X$=new Array(4),this.j$=new Array(4),this.Z$=new Array(4),this.Q$=new Array(4),this.J$=this.n?this.n.bitLength():0;const i=this.n&&this.p.div(this.n);!i||i.cmpn(100)>0?this.redN=null:(this.K$=!0,this.redN=this.n.toRed(this.red))}q$(t,e){const i=t.tX(),s=Mf(e,1,this.J$);let n=(1<<i.step+1)-(i.step%2==0?2:1);n/=3;const a=[];for(let u=0;u<s.length;u+=i.step){let d=0;for(let f=u+i.step-1;f>=u;f--)d=(d<<1)+s[f];a.push(d)}let o=this.jpoint(null,null,null),l=this.jpoint(null,null,null);for(let u=n;u>0;u--){for(let d=0;d<a.length;d++){const f=a[d];f===u?l=l.mixedAdd(i.points[d]):f===-u&&(l=l.mixedAdd(i.points[d].neg()))}o=o.add(l)}return o.toP()}iX(t,e){let i=4;const s=t.sX(i);i=s.wnd;const n=s.points,a=Mf(e,i,this.J$);let o=this.jpoint(null,null,null);for(let l=a.length-1;l>=0;l--){for(let d=0;l>=0&&a[l]===0;l--)d++;if(l>=0&&e++,o=o.dblp(e),l<0)break;const u=a[l];o=t.type==="affine"?u>0?o.mixedAdd(n[u-1>>1]):o.mixedAdd(n[-u-1>>1].neg()):u>0?o.add(n[u-1>>1]):o.add(n[-u-1>>1].neg())}return t.type==="affine"?o.toP():o}eX(t,e,i,s,n){const a=this.X$,o=this.j$,l=this.Z$;let u=0;for(let y=0;y<s;y++){const m=e[y].sX(t);a[y]=m.wnd,o[y]=m.points}for(let y=s-1;y>=1;y-=2){const m=y-1,S=y;if(a[m]!==1||a[S]!==1){l[m]=Mf(i[m],a[m],this.J$),l[S]=Mf(i[S],a[S],this.J$),u=Math.max(l[m].length,u),u=Math.max(l[S].length,u);continue}const x=[e[m],null,null,e[S]];e[m].y.cmp(e[S].y)===0?(x[1]=e[m].add(e[S]),x[2]=e[m].toJ().mixedAdd(e[S].neg())):e[m].y.cmp(e[S].y.redNeg())===0?(x[1]=e[m].toJ().mixedAdd(e[S]),x[2]=e[m].add(e[S].neg())):(x[1]=e[m].toJ().mixedAdd(e[S]),x[2]=e[m].toJ().mixedAdd(e[S].neg()));const v=[-3,-1,-5,-7,0,7,5,1,3],b=lV(i[m],i[S]);u=Math.max(b[0].length,u),l[m]=new Array(u),l[S]=new Array(u);for(let E=0;E<u;E++){const T=0|b[0][E],V=0|b[1][E];l[m][E]=v[3*(T+1)+(V+1)],l[S][E]=0,o[m]=x}}let d=this.jpoint(null,null,null);const f=this.Q$;for(let y=u;y>=0;y--){let m=0;for(;y>=0;){let S=!0;for(let x=0;x<s;x++)f[x]=0|l[x][y],f[x]!==0&&(S=!1);if(!S)break;m++,y--}if(y>=0&&m++,d=d.dblp(m),y<0)break;for(let S=0;S<s;S++){const x=f[S];let v;x!==0&&(x>0?v=o[S][x-1>>1]:x<0&&(v=o[S][-x-1>>1].neg()),d=v.type==="affine"?d.mixedAdd(v):d.add(v))}}for(let y=0;y<s;y++)o[y]=null;return n?d:d.toP()}decodePoint(t,e){t=yE(t,e);const i=this.p.byteLength();if((t[0]===4||t[0]===6||t[0]===7)&&t.length-1==2*i)return this.point(t.slice(1,1+i),t.slice(1+i,1+2*i));if((t[0]===2||t[0]===3)&&t.length-1===i)return this.pointFromX(t.slice(1,1+i),t[0]===3);throw new Error("Unknown point format")}}class mE{constructor(t,e){this.curve=t,this.type=e,this.precomputed=null}eq(t){throw new Error("Not implemented")}validate(){return this.curve.validate(this)}encodeCompressed(t){return this.encode(t,!0)}hX(t){const e=this.curve.p.byteLength(),i=this.getX().toArray("be",e);return t?[this.getY().isEven()?2:3].concat(i):[4].concat(i,this.getY().toArray("be",e))}encode(t,e){return function(i,s){return s==="hex"?function(n){let a="";for(let l=0;l<n.length;l++)a+=(o=n[l].toString(16)).length===1?`0${o}`:o;var o;return a}(i):i}(this.hX(e),t)}precompute(t){if(this.precomputed)return this;const e={doubles:null,naf:null,beta:null};return e.naf=this.sX(8),e.doubles=this.tX(4,t),e.beta=this.rX(),this.precomputed=e,this}nX(t){if(!this.precomputed)return!1;const e=this.precomputed.doubles;return!!e&&e.points.length>=Math.ceil((t.bitLength()+1)/e.step)}tX(t,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;const i=[this];let s=this;for(let n=0;n<e;n+=t){for(let a=0;a<t;a++)s=s.dbl();i.push(s)}return{step:t,points:i}}sX(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;const e=[this],i=(1<<t)-1,s=i===1?null:this.dbl();for(let n=1;n<i;n++)e[n]=e[n-1].add(s);return{wnd:t,points:e}}rX(){return null}dblp(t){let e=this;for(let i=0;i<t;i++)e=e.dbl();return e}}class cV extends uV{constructor(t){super("short",t),this.a=new Be(t.a,16).toRed(this.red),this.b=new Be(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this.oX(t),this.aX=new Array(4),this.lX=new Array(4)}pointFromJSON(t,e){return Zf.fromJSON(this,t,e)}oX(t){if(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)return;let e,i,s;if(t.beta)e=new Be(t.beta,16).toRed(this.red);else{const n=this.uX(this.p);e=n[0].cmp(n[1])<0?n[0]:n[1],e=e.toRed(this.red)}if(t.lambda)i=new Be(t.lambda,16);else{const n=this.uX(this.n);i=this.g.mul(n[0]).x.cmp(this.g.x.redMul(e))===0?n[0]:n[1]}return s=t.basis?t.basis.map(n=>({a:new Be(n.a,16),b:new Be(n.b,16)})):this.cX(i),{beta:e,lambda:i,basis:s}}uX(t){const e=t===this.p?this.red:Be.mont(t),i=new Be(2).toRed(e).redInvm(),s=i.redNeg(),n=new Be(3).toRed(e).redNeg().redSqrt().redMul(i);return[s.redAdd(n).fromRed(),s.redSub(n).fromRed()]}cX(t){const e=this.n.ushrn(Math.floor(this.n.bitLength()/2));let i,s,n,a,o,l,u,d,f,y=t,m=this.n.clone(),S=new Be(1),x=new Be(0),v=new Be(0),b=new Be(1),E=0;for(;y.cmpn(0)!==0;){const V=m.div(y);d=m.sub(V.mul(y)),f=v.sub(V.mul(S));const F=b.sub(V.mul(x));if(!n&&d.cmp(e)<0)i=u.neg(),s=S,n=d.neg(),a=f;else if(n&&++E==2)break;u=d,m=y,y=d,v=S,S=f,b=x,x=F}o=d.neg(),l=f;const T=n.sqr().add(a.sqr());return o.sqr().add(l.sqr()).cmp(T)>=0&&(o=i,l=s),n.negative&&(n=n.neg(),a=a.neg()),o.negative&&(o=o.neg(),l=l.neg()),[{a:n,b:a},{a:o,b:l}]}dX(t){const e=this.endo.basis,i=e[0],s=e[1],n=s.b.mul(t).divRound(this.n),a=i.b.neg().mul(t).divRound(this.n),o=n.mul(i.a),l=a.mul(s.a),u=n.mul(i.b),d=a.mul(s.b);return{k1:t.sub(o).sub(l),k2:u.add(d).neg()}}point(t,e,i){return new Zf(this,t,e,i)}pointFromX(t,e){(t=new Be(t,16)).red||(t=t.toRed(this.red));const i=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b);let s=i.redSqrt();if(s.redSqr().redSub(i).cmp(this.zero)!==0)throw new Error("invalid point");const n=s.fromRed().isOdd();return(e&&!n||!e&&n)&&(s=s.redNeg()),this.point(t,s)}validate(t){if(t.inf)return!0;const e=t.x,i=t.y,s=this.a.redMul(e),n=e.redSqr().redMul(e).redIAdd(s).redIAdd(this.b);return i.redSqr().redISub(n).cmpn(0)===0}fX(t,e,i){const s=this.aX,n=this.lX;let a=0;for(a=0;a<t.length;a++){const l=this.dX(e[a]);let u=t[a],d=u.rX();l.k1.negative&&(l.k1.ineg(),u=u.neg(!0)),l.k2.negative&&(l.k2.ineg(),d=d.neg(!0)),s[2*a]=u,s[2*a+1]=d,n[2*a]=l.k1,n[2*a+1]=l.k2}const o=this.eX(1,s,n,2*a,i);for(let l=0;l<2*a;l++)s[l]=null,n[l]=null;return o}jpoint(t,e,i){return new rS(this,t,e,i)}}class Zf extends mE{constructor(t,e,i,s){super(t,"affine"),e===null&&i===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new Be(e,16),this.y=new Be(i,16),s&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}pointFromX(t,e){throw new Error("Method not implemented.")}point(t,e,i){return new Zf(this,t,e,i)}rX(){if(!this.curve.endo)return;const t=this.precomputed;if(t&&t.beta)return t.beta;const e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){const i=this.curve,s=function(n){return i.point(n.x.redMul(i.endo.beta),n.y)};t.beta=e,e.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(s)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(s)}}}return e}toJSON(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]}static fromJSON(t,e,i){typeof e=="string"&&(e=JSON.parse(e));const s=t.point(e[0],e[1],i);if(!e[2])return s;function n(o){return t.point(o[0],o[1],i)}const a=e[2];return s.precomputed={beta:null,doubles:a.doubles&&{step:a.doubles.step,points:[s].concat(a.doubles.points.map(n))},naf:a.naf&&{wnd:a.naf.wnd,points:[s].concat(a.naf.points.map(n))}},s}inspect(){return this.isInfinity()?"<EC Point Infinity>":`<EC Point x: ${this.x.fromRed().toString(16,2)} y: ${this.y.fromRed().toString(16,2)}>`}isInfinity(){return this.inf}add(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(this.x.cmp(t.x)===0)return this.curve.point(null,null);let e=this.y.redSub(t.y);e.cmpn(0)!==0&&(e=e.redMul(this.x.redSub(t.x).redInvm()));const i=e.redSqr().redISub(this.x).redISub(t.x),s=e.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,s)}dbl(){if(this.inf)return this;const t=this.y.redAdd(this.y);if(t.cmpn(0)===0)return this.curve.point(null,null);const e=this.curve.a,i=this.x.redSqr(),s=t.redInvm(),n=i.redAdd(i).redIAdd(i).redIAdd(e).redMul(s),a=n.redSqr().redISub(this.x.redAdd(this.x)),o=n.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,o)}getX(){return this.x.fromRed()}getY(){return this.y.fromRed()}mul(t){return t=new Be(t,16),this.isInfinity()?this:this.nX(t)?this.curve.q$(this,t):this.curve.endo?this.curve.fX([this],[t]):this.curve.iX(this,t)}mulAdd(t,e,i){const s=[this,e],n=[t,i];return this.curve.endo?this.curve.fX(s,n):this.curve.eX(1,s,n,2)}jmulAdd(t,e,i){const s=[this,e],n=[t,i];return this.curve.endo?this.curve.fX(s,n,!0):this.curve.eX(1,s,n,2,!0)}eq(t){return this===t||this.inf===t.inf&&(this.inf||this.x.cmp(t.x)===0&&this.y.cmp(t.y)===0)}neg(t){if(this.inf)return this;const e=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){const i=this.precomputed,s=function(n){return n.neg()};e.precomputed={naf:i.naf&&{wnd:i.naf.wnd,points:i.naf.points.map(s)},doubles:i.doubles&&{step:i.doubles.step,points:i.doubles.points.map(s)}}}return e}toJ(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)}}class rS extends mE{constructor(t,e,i,s){super(t,"jacobian"),e===null&&i===null&&s===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new Be(0)):(this.x=new Be(e,16),this.y=new Be(i,16),this.z=new Be(s,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}getY(){throw new Error("Method not implemented.")}getX(){throw new Error("Method not implemented.")}pointFromX(t,e){throw new Error("Method not implemented.")}point(t,e,i){throw new Error("Method not implemented.")}jpoint(t,e,i){return new rS(this,t,e,i)}toP(){if(this.isInfinity())return this.curve.point(null,null);const t=this.z.redInvm(),e=t.redSqr(),i=this.x.redMul(e),s=this.y.redMul(e).redMul(t);return this.curve.point(i,s)}neg(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)}add(t){if(this.isInfinity())return t;if(t.isInfinity())return this;const e=t.z.redSqr(),i=this.z.redSqr(),s=this.x.redMul(e),n=t.x.redMul(i),a=this.y.redMul(e.redMul(t.z)),o=t.y.redMul(i.redMul(this.z)),l=s.redSub(n),u=a.redSub(o);if(l.cmpn(0)===0)return u.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();const d=l.redSqr(),f=d.redMul(l),y=s.redMul(d),m=u.redSqr().redIAdd(f).redISub(y).redISub(y),S=u.redMul(y.redISub(m)).redISub(a.redMul(f)),x=this.z.redMul(t.z).redMul(l);return this.curve.jpoint(m,S,x)}mixedAdd(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;const e=this.z.redSqr(),i=this.x,s=t.x.redMul(e),n=this.y,a=t.y.redMul(e).redMul(this.z),o=i.redSub(s),l=n.redSub(a);if(o.cmpn(0)===0)return l.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();const u=o.redSqr(),d=u.redMul(o),f=i.redMul(u),y=l.redSqr().redIAdd(d).redISub(f).redISub(f),m=l.redMul(f.redISub(y)).redISub(n.redMul(d)),S=this.z.redMul(o);return this.curve.jpoint(y,m,S)}dblp(t){if(t===0)return this;if(this.isInfinity())return this;if(!t)return this.dbl();if(this.curve.zeroA||this.curve.threeA){let u=this;for(let d=0;d<t;d++)u=u.dbl();return u}const e=this.curve.a,i=this.curve.tinv;let s=this.x;const n=this.y;let a=this.z,o=a.redSqr().redSqr(),l=n.redAdd(n);for(let u=0;u<t;u++){const d=s.redSqr(),f=l.redSqr(),y=f.redSqr(),m=d.redAdd(d).redIAdd(d).redIAdd(e.redMul(o)),S=s.redMul(f),x=m.redSqr().redISub(S.redAdd(S)),v=S.redISub(x);let b=m.redMul(v);b=b.redIAdd(b).redISub(y);const E=l.redMul(a);u+1<t&&(o=o.redMul(y)),s=x,a=E,l=b}return this.curve.jpoint(s,l.redMul(i),a)}dbl(){return this.isInfinity()?this:this.curve.zeroA?this.AX():this.curve.threeA?this.gX():this.mX()}AX(){let t,e,i;if(this.zOne){const s=this.x.redSqr(),n=this.y.redSqr(),a=n.redSqr();let o=this.x.redAdd(n).redSqr().redISub(s).redISub(a);o=o.redIAdd(o);const l=s.redAdd(s).redIAdd(s),u=l.redSqr().redISub(o).redISub(o);let d=a.redIAdd(a);d=d.redIAdd(d),d=d.redIAdd(d),t=u,e=l.redMul(o.redISub(u)).redISub(d),i=this.y.redAdd(this.y)}else{const s=this.x.redSqr(),n=this.y.redSqr(),a=n.redSqr();let o=this.x.redAdd(n).redSqr().redISub(s).redISub(a);o=o.redIAdd(o);const l=s.redAdd(s).redIAdd(s),u=l.redSqr();let d=a.redIAdd(a);d=d.redIAdd(d),d=d.redIAdd(d),t=u.redISub(o).redISub(o),e=l.redMul(o.redISub(t)).redISub(d),i=this.y.redMul(this.z),i=i.redIAdd(i)}return this.curve.jpoint(t,e,i)}gX(){let t,e,i;if(this.zOne){const s=this.x.redSqr(),n=this.y.redSqr(),a=n.redSqr();let o=this.x.redAdd(n).redSqr().redISub(s).redISub(a);o=o.redIAdd(o);const l=s.redAdd(s).redIAdd(s).redIAdd(this.curve.a),u=l.redSqr().redISub(o).redISub(o);t=u;let d=a.redIAdd(a);d=d.redIAdd(d),d=d.redIAdd(d),e=l.redMul(o.redISub(u)).redISub(d),i=this.y.redAdd(this.y)}else{const s=this.z.redSqr(),n=this.y.redSqr(),a=this.x.redMul(n);let o=this.x.redSub(s).redMul(this.x.redAdd(s));o=o.redAdd(o).redIAdd(o);let l=a.redIAdd(a);l=l.redIAdd(l);const u=l.redAdd(l);t=o.redSqr().redISub(u),i=this.y.redAdd(this.z).redSqr().redISub(n).redISub(s);let d=n.redSqr();d=d.redIAdd(d),d=d.redIAdd(d),d=d.redIAdd(d),e=o.redMul(l.redISub(t)).redISub(d)}return this.curve.jpoint(t,e,i)}mX(){const t=this.curve.a,e=this.x,i=this.y,s=this.z,n=s.redSqr().redSqr(),a=e.redSqr(),o=i.redSqr(),l=a.redAdd(a).redIAdd(a).redIAdd(t.redMul(n));let u=e.redAdd(e);u=u.redIAdd(u);const d=u.redMul(o),f=l.redSqr().redISub(d.redAdd(d)),y=d.redISub(f);let m=o.redSqr();m=m.redIAdd(m),m=m.redIAdd(m),m=m.redIAdd(m);const S=l.redMul(y).redISub(m),x=i.redAdd(i).redMul(s);return this.curve.jpoint(f,S,x)}trpl(){if(!this.curve.zeroA)return this.dbl().add(this);const t=this.x.redSqr(),e=this.y.redSqr(),i=this.z.redSqr(),s=e.redSqr(),n=t.redAdd(t).redIAdd(t),a=n.redSqr();let o=this.x.redAdd(e).redSqr().redISub(t).redISub(s);o=o.redIAdd(o),o=o.redAdd(o).redIAdd(o),o=o.redISub(a);const l=o.redSqr();let u=s.redIAdd(s);u=u.redIAdd(u),u=u.redIAdd(u),u=u.redIAdd(u);const d=n.redIAdd(o).redSqr().redISub(a).redISub(l).redISub(u);let f=e.redMul(d);f=f.redIAdd(f),f=f.redIAdd(f);let y=this.x.redMul(l).redISub(f);y=y.redIAdd(y),y=y.redIAdd(y);let m=this.y.redMul(d.redMul(u.redISub(d)).redISub(o.redMul(l)));m=m.redIAdd(m),m=m.redIAdd(m),m=m.redIAdd(m);const S=this.z.redAdd(o).redSqr().redISub(i).redISub(l);return this.curve.jpoint(y,m,S)}mul(t,e){return t=new Be(t,e),this.curve.iX(this,t)}eq(t){if(t.type==="affine")return this.eq(t.toJ());if(this===t)return!0;const e=this.z.redSqr(),i=t.z.redSqr();if(this.x.redMul(i).redISub(t.x.redMul(e)).cmpn(0)!==0)return!1;const s=e.redMul(this.z),n=i.redMul(t.z);return this.y.redMul(n).redISub(t.y.redMul(s)).cmpn(0)===0}eqXToP(t){const e=this.z.redSqr(),i=t.toRed(this.curve.red).redMul(e);if(this.x.cmp(i)===0)return!0;const s=t.clone(),n=this.curve.redN.redMul(e);for(;;){if(s.iadd(this.curve.n),s.cmp(this.curve.p)>=0)return!1;if(i.redIAdd(n),this.x.cmp(i)===0)return!0}}inspect(){return this.isInfinity()?"<EC JPoint Infinity>":`<EC JPoint x: ${this.x.toString(16,2)} y: ${this.y.toString(16,2)} z: ${this.z.toString(16,2)}>`}isInfinity(){return this.z.cmpn(0)===0}}class i2{constructor(t){this.curve=new cV(t),this.g=this.curve.g,this.n=this.curve.n}}const sc={};var s2;sc.PresetCurve=i2,s2={type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",{doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}]},Object.defineProperty(sc,"secp256k1",{configurable:!0,enumerable:!0,get(){const r=new i2(s2);return Object.defineProperty(sc,"secp256k1",{configurable:!0,enumerable:!0,value:r}),r}});class Qf{constructor(t,e){this.ec=t,this.priv=null,this.pub=null,e.pub&&this.yX(e.pub,e.pubEnc)}static fromPublic(t,e,i){return e instanceof Qf?e:new Qf(t,{pub:e,pubEnc:i})}validate(){const t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}}getPublic(t,e){return typeof t=="string"&&(e=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),e?this.pub.encode(e,t):this.pub}yX(t,e){if(t.x||t.y)return this.ec.curve.type==="mont"||this.ec.curve.type==="short"||this.ec.curve.type,void(this.pub=this.ec.curve.point(t.x,t.y));this.pub=this.ec.curve.decodePoint(t,e)}verify(t,e){return this.ec.verify(t,e,this)}}function gm(r,t){const e=r[t.place++];if(!(128&e))return e;const i=15&e;if(i===0||i>4)return!1;let s=0,n=t.place;for(let a=0;a<i;a++,n++)s<<=8,s|=r[n],s>>>=0;return!(s<=127)&&(t.place=n,s)}class dV{constructor(){this.place=0}}class nS{constructor(t,e){if(t instanceof nS)return t;this.pX(t,e)||(this.r=new Be(t.r,16),this.s=new Be(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}pX(t,e){t=yE(t,e);const i=new dV;if(t[i.place++]!==48)return!1;const s=gm(t,i);if(s===!1||s+i.place!==t.length||t[i.place++]!==2)return!1;const n=gm(t,i);if(n===!1)return!1;let a=t.slice(i.place,n+i.place);if(i.place+=n,t[i.place++]!==2)return!1;const o=gm(t,i);if(o===!1||t.length!==o+i.place)return!1;let l=t.slice(i.place,o+i.place);if(a[0]===0){if(!(128&a[1]))return!1;a=a.slice(1)}if(l[0]===0){if(!(128&l[1]))return!1;l=l.slice(1)}return this.r=new Be(a),this.s=new Be(l),this.recoveryParam=null,!0}}class Kf{constructor(t){if(!(this instanceof Kf))return new Kf(t);typeof t=="string"&&(t=sc[t]),t instanceof sc.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1)}keyFromPublic(t,e){return Qf.fromPublic(this,t,e)}SX(t,e){const i=8*t.byteLength()-this.n.bitLength();return i>0&&(t=t.ushrn(i)),!e&&t.cmp(this.n)>=0?t.sub(this.n):t}verify(t,e,i,s){t=this.SX(new Be(t,16)),i=this.keyFromPublic(i,s);const n=(e=new nS(e,"hex")).r,a=e.s;if(n.cmpn(1)<0||n.cmp(this.n)>=0||a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;const o=a.invm(this.n),l=o.mul(t).umod(this.n),u=o.mul(n).umod(this.n);if(!this.curve.K$){const f=this.g.mulAdd(l,i.getPublic(),u);return!f.isInfinity()&&f.getX().umod(this.n).cmp(n)===0}const d=this.g.jmulAdd(l,i.getPublic(),u);return!d.isInfinity()&&d.eqXToP(n)}}var ym,nr={exports:{}};nr.exports=(ym=ym||function(r,t){var e;if(typeof window<"u"&&window.crypto&&(e=window.crypto),typeof self<"u"&&self.crypto&&(e=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(e=globalThis.crypto),!e&&typeof window<"u"&&window.msCrypto&&(e=window.msCrypto),!e&&Cf!==void 0&&Cf.crypto&&(e=Cf.crypto),!e)try{e=t}catch{}var i=function(){if(e){if(typeof e.getRandomValues=="function")try{return e.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof e.randomBytes=="function")try{return e.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},s=Object.create||function(){function x(){}return function(v){var b;return x.prototype=v,b=new x,x.prototype=null,b}}(),n={},a=n.lib={},o=a.Base={extend:function(x){var v=s(this);return x&&v.mixIn(x),v.hasOwnProperty("init")&&this.init!==v.init||(v.init=function(){v.$super.init.apply(this,arguments)}),v.init.prototype=v,v.$super=this,v},create:function(){var x=this.extend();return x.init.apply(x,arguments),x},init:function(){},mixIn:function(x){for(var v in x)x.hasOwnProperty(v)&&(this[v]=x[v]);x.hasOwnProperty("toString")&&(this.toString=x.toString)},clone:function(){return this.init.prototype.extend(this)}},l=a.WordArray=o.extend({init:function(x,v){x=this.words=x||[],this.sigBytes=v!=t?v:4*x.length},toString:function(x){return(x||d).stringify(this)},concat:function(x){var v=this.words,b=x.words,E=this.sigBytes,T=x.sigBytes;if(this.clamp(),E%4)for(var V=0;V<T;V++){var F=b[V>>>2]>>>24-V%4*8&255;v[E+V>>>2]|=F<<24-(E+V)%4*8}else for(var B=0;B<T;B+=4)v[E+B>>>2]=b[B>>>2];return this.sigBytes+=T,this},clamp:function(){var x=this.words,v=this.sigBytes;x[v>>>2]&=4294967295<<32-v%4*8,x.length=r.ceil(v/4)},clone:function(){var x=o.clone.call(this);return x.words=this.words.slice(0),x},random:function(x){for(var v=[],b=0;b<x;b+=4)v.push(i());return new l.init(v,x)}}),u=n.enc={},d=u.Hex={stringify:function(x){for(var v=x.words,b=x.sigBytes,E=[],T=0;T<b;T++){var V=v[T>>>2]>>>24-T%4*8&255;E.push((V>>>4).toString(16)),E.push((15&V).toString(16))}return E.join("")},parse:function(x){for(var v=x.length,b=[],E=0;E<v;E+=2)b[E>>>3]|=parseInt(x.substr(E,2),16)<<24-E%8*4;return new l.init(b,v/2)}},f=u.Latin1={stringify:function(x){for(var v=x.words,b=x.sigBytes,E=[],T=0;T<b;T++){var V=v[T>>>2]>>>24-T%4*8&255;E.push(String.fromCharCode(V))}return E.join("")},parse:function(x){for(var v=x.length,b=[],E=0;E<v;E++)b[E>>>2]|=(255&x.charCodeAt(E))<<24-E%4*8;return new l.init(b,v)}},y=u.Utf8={stringify:function(x){try{return decodeURIComponent(escape(f.stringify(x)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(x){return f.parse(unescape(encodeURIComponent(x)))}},m=a.BufferedBlockAlgorithm=o.extend({reset:function(){this.Jw=new l.init,this.vX=0},bX:function(x){typeof x=="string"&&(x=y.parse(x)),this.Jw.concat(x),this.vX+=x.sigBytes},xX:function(x){var v,b=this.Jw,E=b.words,T=b.sigBytes,V=this.blockSize,F=T/(4*V),B=(F=x?r.ceil(F):r.max((0|F)-this.MX,0))*V,z=r.min(4*B,T);if(B){for(var L=0;L<B;L+=V)this._X(E,L);v=E.splice(0,B),b.sigBytes-=z}return new l.init(v,z)},clone:function(){var x=o.clone.call(this);return x.Jw=this.Jw.clone(),x},MX:0});a.Hasher=m.extend({cfg:o.extend(),init:function(x){this.cfg=this.cfg.extend(x),this.reset()},reset:function(){m.reset.call(this),this.wX()},update:function(x){return this.bX(x),this.xX(),this},finalize:function(x){return x&&this.bX(x),this.CX()},blockSize:16,kX:function(x){return function(v,b){return new x.init(b).finalize(v)}},TX:function(x){return function(v,b){return new S.HMAC.init(x,b).finalize(v)}}});var S=n.algo={};return n}(Math),ym);var Rf=function(r){return function(t){var e=r,i=e.lib,s=i.WordArray,n=i.Hasher,a=e.algo,o=[],l=[];(function(){function f(x){for(var v=t.sqrt(x),b=2;b<=v;b++)if(!(x%b))return!1;return!0}function y(x){return 4294967296*(x-(0|x))|0}for(var m=2,S=0;S<64;)f(m)&&(S<8&&(o[S]=y(t.pow(m,.5))),l[S]=y(t.pow(m,1/3)),S++),m++})();var u=[],d=a.SHA256=n.extend({wX:function(){this.FX=new s.init(o.slice(0))},_X:function(f,y){for(var m=this.FX.words,S=m[0],x=m[1],v=m[2],b=m[3],E=m[4],T=m[5],V=m[6],F=m[7],B=0;B<64;B++){if(B<16)u[B]=0|f[y+B];else{var z=u[B-15],L=(z<<25|z>>>7)^(z<<14|z>>>18)^z>>>3,A=u[B-2],R=(A<<15|A>>>17)^(A<<13|A>>>19)^A>>>10;u[B]=L+u[B-7]+R+u[B-16]}var w=S&x^S&v^x&v,C=(S<<30|S>>>2)^(S<<19|S>>>13)^(S<<10|S>>>22),k=F+((E<<26|E>>>6)^(E<<21|E>>>11)^(E<<7|E>>>25))+(E&T^~E&V)+l[B]+u[B];F=V,V=T,T=E,E=b+k|0,b=v,v=x,x=S,S=k+(C+w)|0}m[0]=m[0]+S|0,m[1]=m[1]+x|0,m[2]=m[2]+v|0,m[3]=m[3]+b|0,m[4]=m[4]+E|0,m[5]=m[5]+T|0,m[6]=m[6]+V|0,m[7]=m[7]+F|0},CX:function(){var f=this.Jw,y=f.words,m=8*this.vX,S=8*f.sigBytes;return y[S>>>5]|=128<<24-S%32,y[14+(S+64>>>9<<4)]=t.floor(m/4294967296),y[15+(S+64>>>9<<4)]=m,f.sigBytes=4*y.length,this.xX(),this.FX},clone:function(){var f=n.clone.call(this);return f.FX=this.FX.clone(),f}});e.SHA256=n.kX(d),e.HmacSHA256=n.TX(d)}(Math),r.SHA256}(nr.exports),fV=function(r){return e=(t=r).lib.WordArray,i=t.algo,s=i.SHA256,n=i.SHA224=s.extend({wX:function(){this.FX=new e.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},CX:function(){var a=s.CX.call(this);return a.sigBytes-=4,a}}),t.SHA224=s.kX(n),t.HmacSHA224=s.TX(n),r.SHA224;var t,e,i,s,n}(nr.exports),lh=nr.exports.enc.Hex,r2=nr.exports.enc.Utf8;(function(r){return e=(t=r).lib.WordArray,t.enc.Base64={stringify:function(i){var s=i.words,n=i.sigBytes,a=this.IX;i.clamp();for(var o=[],l=0;l<n;l+=3)for(var u=(s[l>>>2]>>>24-l%4*8&255)<<16|(s[l+1>>>2]>>>24-(l+1)%4*8&255)<<8|s[l+2>>>2]>>>24-(l+2)%4*8&255,d=0;d<4&&l+.75*d<n;d++)o.push(a.charAt(u>>>6*(3-d)&63));var f=a.charAt(64);if(f)for(;o.length%4;)o.push(f);return o.join("")},parse:function(i){var s=i.length,n=this.IX,a=this.PX;if(!a){a=this.PX=[];for(var o=0;o<n.length;o++)a[n.charCodeAt(o)]=o}var l=n.charAt(64);if(l){var u=i.indexOf(l);u!==-1&&(s=u)}return function(d,f,y){for(var m=[],S=0,x=0;x<f;x++)if(x%4){var v=y[d.charCodeAt(x-1)]<<x%4*2|y[d.charCodeAt(x)]>>>6-x%4*2;m[S>>>2]|=v<<24-S%4*8,S++}return e.create(m,S)}(i,s,a)},IX:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},r.enc.Base64;var t,e})(nr.exports);(function(r){(function(t){var e=r,i=e.lib,s=i.WordArray,n=i.Hasher,a=e.algo,o=[];(function(){for(var m=0;m<64;m++)o[m]=4294967296*t.abs(t.sin(m+1))|0})();var l=a.MD5=n.extend({wX:function(){this.FX=new s.init([1732584193,4023233417,2562383102,271733878])},_X:function(m,S){for(var x=0;x<16;x++){var v=S+x,b=m[v];m[v]=16711935&(b<<8|b>>>24)|4278255360&(b<<24|b>>>8)}var E=this.FX.words,T=m[S+0],V=m[S+1],F=m[S+2],B=m[S+3],z=m[S+4],L=m[S+5],A=m[S+6],R=m[S+7],w=m[S+8],C=m[S+9],k=m[S+10],_=m[S+11],X=m[S+12],N=m[S+13],U=m[S+14],O=m[S+15],W=E[0],P=E[1],H=E[2],j=E[3];W=u(W,P,H,j,T,7,o[0]),j=u(j,W,P,H,V,12,o[1]),H=u(H,j,W,P,F,17,o[2]),P=u(P,H,j,W,B,22,o[3]),W=u(W,P,H,j,z,7,o[4]),j=u(j,W,P,H,L,12,o[5]),H=u(H,j,W,P,A,17,o[6]),P=u(P,H,j,W,R,22,o[7]),W=u(W,P,H,j,w,7,o[8]),j=u(j,W,P,H,C,12,o[9]),H=u(H,j,W,P,k,17,o[10]),P=u(P,H,j,W,_,22,o[11]),W=u(W,P,H,j,X,7,o[12]),j=u(j,W,P,H,N,12,o[13]),H=u(H,j,W,P,U,17,o[14]),W=d(W,P=u(P,H,j,W,O,22,o[15]),H,j,V,5,o[16]),j=d(j,W,P,H,A,9,o[17]),H=d(H,j,W,P,_,14,o[18]),P=d(P,H,j,W,T,20,o[19]),W=d(W,P,H,j,L,5,o[20]),j=d(j,W,P,H,k,9,o[21]),H=d(H,j,W,P,O,14,o[22]),P=d(P,H,j,W,z,20,o[23]),W=d(W,P,H,j,C,5,o[24]),j=d(j,W,P,H,U,9,o[25]),H=d(H,j,W,P,B,14,o[26]),P=d(P,H,j,W,w,20,o[27]),W=d(W,P,H,j,N,5,o[28]),j=d(j,W,P,H,F,9,o[29]),H=d(H,j,W,P,R,14,o[30]),W=f(W,P=d(P,H,j,W,X,20,o[31]),H,j,L,4,o[32]),j=f(j,W,P,H,w,11,o[33]),H=f(H,j,W,P,_,16,o[34]),P=f(P,H,j,W,U,23,o[35]),W=f(W,P,H,j,V,4,o[36]),j=f(j,W,P,H,z,11,o[37]),H=f(H,j,W,P,R,16,o[38]),P=f(P,H,j,W,k,23,o[39]),W=f(W,P,H,j,N,4,o[40]),j=f(j,W,P,H,T,11,o[41]),H=f(H,j,W,P,B,16,o[42]),P=f(P,H,j,W,A,23,o[43]),W=f(W,P,H,j,C,4,o[44]),j=f(j,W,P,H,X,11,o[45]),H=f(H,j,W,P,O,16,o[46]),W=y(W,P=f(P,H,j,W,F,23,o[47]),H,j,T,6,o[48]),j=y(j,W,P,H,R,10,o[49]),H=y(H,j,W,P,U,15,o[50]),P=y(P,H,j,W,L,21,o[51]),W=y(W,P,H,j,X,6,o[52]),j=y(j,W,P,H,B,10,o[53]),H=y(H,j,W,P,k,15,o[54]),P=y(P,H,j,W,V,21,o[55]),W=y(W,P,H,j,w,6,o[56]),j=y(j,W,P,H,O,10,o[57]),H=y(H,j,W,P,A,15,o[58]),P=y(P,H,j,W,N,21,o[59]),W=y(W,P,H,j,z,6,o[60]),j=y(j,W,P,H,_,10,o[61]),H=y(H,j,W,P,F,15,o[62]),P=y(P,H,j,W,C,21,o[63]),E[0]=E[0]+W|0,E[1]=E[1]+P|0,E[2]=E[2]+H|0,E[3]=E[3]+j|0},CX:function(){var m=this.Jw,S=m.words,x=8*this.vX,v=8*m.sigBytes;S[v>>>5]|=128<<24-v%32;var b=t.floor(x/4294967296),E=x;S[15+(v+64>>>9<<4)]=16711935&(b<<8|b>>>24)|4278255360&(b<<24|b>>>8),S[14+(v+64>>>9<<4)]=16711935&(E<<8|E>>>24)|4278255360&(E<<24|E>>>8),m.sigBytes=4*(S.length+1),this.xX();for(var T=this.FX,V=T.words,F=0;F<4;F++){var B=V[F];V[F]=16711935&(B<<8|B>>>24)|4278255360&(B<<24|B>>>8)}return T},clone:function(){var m=n.clone.call(this);return m.FX=this.FX.clone(),m}});function u(m,S,x,v,b,E,T){var V=m+(S&x|~S&v)+b+T;return(V<<E|V>>>32-E)+S}function d(m,S,x,v,b,E,T){var V=m+(S&v|x&~v)+b+T;return(V<<E|V>>>32-E)+S}function f(m,S,x,v,b,E,T){var V=m+(S^x^v)+b+T;return(V<<E|V>>>32-E)+S}function y(m,S,x,v,b,E,T){var V=m+(x^(S|~v))+b+T;return(V<<E|V>>>32-E)+S}e.MD5=n.kX(l),e.HmacMD5=n.TX(l)})(Math),r.MD5})(nr.exports);(function(r){return e=(t=r).lib,i=e.WordArray,s=e.Hasher,n=t.algo,a=[],o=n.SHA1=s.extend({wX:function(){this.FX=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_X:function(l,u){for(var d=this.FX.words,f=d[0],y=d[1],m=d[2],S=d[3],x=d[4],v=0;v<80;v++){if(v<16)a[v]=0|l[u+v];else{var b=a[v-3]^a[v-8]^a[v-14]^a[v-16];a[v]=b<<1|b>>>31}var E=(f<<5|f>>>27)+x+a[v];E+=v<20?1518500249+(y&m|~y&S):v<40?1859775393+(y^m^S):v<60?(y&m|y&S|m&S)-1894007588:(y^m^S)-899497514,x=S,S=m,m=y<<30|y>>>2,y=f,f=E}d[0]=d[0]+f|0,d[1]=d[1]+y|0,d[2]=d[2]+m|0,d[3]=d[3]+S|0,d[4]=d[4]+x|0},CX:function(){var l=this.Jw,u=l.words,d=8*this.vX,f=8*l.sigBytes;return u[f>>>5]|=128<<24-f%32,u[14+(f+64>>>9<<4)]=Math.floor(d/4294967296),u[15+(f+64>>>9<<4)]=d,l.sigBytes=4*u.length,this.xX(),this.FX},clone:function(){var l=s.clone.call(this);return l.FX=this.FX.clone(),l}}),t.SHA1=s.kX(o),t.HmacSHA1=s.TX(o),r.SHA1;var t,e,i,s,n,a,o})(nr.exports);var mm,n2,a2;n2=(mm=nr.exports).lib.Base,a2=mm.enc.Utf8,mm.algo.HMAC=n2.extend({init:function(r,t){r=this.DX=new r.init,typeof t=="string"&&(t=a2.parse(t));var e=r.blockSize,i=4*e;t.sigBytes>i&&(t=r.finalize(t)),t.clamp();for(var s=this.BX=t.clone(),n=this.LX=t.clone(),a=s.words,o=n.words,l=0;l<e;l++)a[l]^=1549556828,o[l]^=909522486;s.sigBytes=n.sigBytes=i,this.reset()},reset:function(){var r=this.DX;r.reset(),r.update(this.LX)},update:function(r){return this.DX.update(r),this},finalize:function(r){var t=this.DX,e=t.finalize(r);return t.reset(),t.finalize(this.BX.clone().concat(e))}}),function(r){return i=(e=(t=r).lib).Base,s=e.WordArray,a=(n=t.algo).MD5,o=n.EvpKDF=i.extend({cfg:i.extend({keySize:4,hasher:a,iterations:1}),init:function(l){this.cfg=this.cfg.extend(l)},compute:function(l,u){for(var d,f=this.cfg,y=f.hasher.create(),m=s.create(),S=m.words,x=f.keySize,v=f.iterations;S.length<x;){d&&y.update(d),d=y.update(l).finalize(u),y.reset();for(var b=1;b<v;b++)d=y.finalize(d),y.reset();m.concat(d)}return m.sigBytes=4*x,m}}),t.EvpKDF=function(l,u,d){return o.create(d).compute(l,u)},r.EvpKDF;var t,e,i,s,n,a,o}(nr.exports);(function(r){r.lib.Cipher||function(t){var e=r,i=e.lib,s=i.Base,n=i.WordArray,a=i.BufferedBlockAlgorithm,o=e.enc;o.Utf8;var l=o.Base64,u=e.algo.EvpKDF,d=i.Cipher=a.extend({cfg:s.extend(),createEncryptor:function(V,F){return this.create(this.RX,V,F)},createDecryptor:function(V,F){return this.create(this.EX,V,F)},init:function(V,F,B){this.cfg=this.cfg.extend(B),this.zX=V,this.VX=F,this.reset()},reset:function(){a.reset.call(this),this.wX()},process:function(V){return this.bX(V),this.xX()},finalize:function(V){return V&&this.bX(V),this.CX()},keySize:4,ivSize:4,RX:1,EX:2,kX:function(){function V(F){return typeof F=="string"?T:b}return function(F){return{encrypt:function(B,z,L){return V(z).encrypt(F,B,z,L)},decrypt:function(B,z,L){return V(z).decrypt(F,B,z,L)}}}}()});i.StreamCipher=d.extend({CX:function(){return this.xX(!0)},blockSize:1});var f=e.mode={},y=i.BlockCipherMode=s.extend({createEncryptor:function(V,F){return this.Encryptor.create(V,F)},createDecryptor:function(V,F){return this.Decryptor.create(V,F)},init:function(V,F){this.OX=V,this.NX=F}}),m=f.CBC=function(){var V=y.extend();function F(B,z,L){var A,R=this.NX;R?(A=R,this.NX=void 0):A=this.GX;for(var w=0;w<L;w++)B[z+w]^=A[w]}return V.Encryptor=V.extend({processBlock:function(B,z){var L=this.OX,A=L.blockSize;F.call(this,B,z,A),L.encryptBlock(B,z),this.GX=B.slice(z,z+A)}}),V.Decryptor=V.extend({processBlock:function(B,z){var L=this.OX,A=L.blockSize,R=B.slice(z,z+A);L.decryptBlock(B,z),F.call(this,B,z,A),this.GX=R}}),V}(),S=(e.pad={}).Pkcs7={pad:function(V,F){for(var B=4*F,z=B-V.sigBytes%B,L=z<<24|z<<16|z<<8|z,A=[],R=0;R<z;R+=4)A.push(L);var w=n.create(A,z);V.concat(w)},unpad:function(V){var F=255&V.words[V.sigBytes-1>>>2];V.sigBytes-=F}};i.BlockCipher=d.extend({cfg:d.cfg.extend({mode:m,padding:S}),reset:function(){var V;d.reset.call(this);var F=this.cfg,B=F.iv,z=F.mode;this.zX==this.RX?V=z.createEncryptor:(V=z.createDecryptor,this.MX=1),this.WX&&this.WX.UX==V?this.WX.init(this,B&&B.words):(this.WX=V.call(z,this,B&&B.words),this.WX.UX=V)},_X:function(V,F){this.WX.processBlock(V,F)},CX:function(){var V,F=this.cfg.padding;return this.zX==this.RX?(F.pad(this.Jw,this.blockSize),V=this.xX(!0)):(V=this.xX(!0),F.unpad(V)),V},blockSize:4});var x=i.CipherParams=s.extend({init:function(V){this.mixIn(V)},toString:function(V){return(V||this.formatter).stringify(this)}}),v=(e.format={}).OpenSSL={stringify:function(V){var F=V.ciphertext,B=V.salt;return(B?n.create([1398893684,1701076831]).concat(B).concat(F):F).toString(l)},parse:function(V){var F,B=l.parse(V),z=B.words;return z[0]==1398893684&&z[1]==1701076831&&(F=n.create(z.slice(2,4)),z.splice(0,4),B.sigBytes-=16),x.create({ciphertext:B,salt:F})}},b=i.SerializableCipher=s.extend({cfg:s.extend({format:v}),encrypt:function(V,F,B,z){z=this.cfg.extend(z);var L=V.createEncryptor(B,z),A=L.finalize(F),R=L.cfg;return x.create({ciphertext:A,key:B,iv:R.iv,algorithm:V,mode:R.mode,padding:R.padding,blockSize:V.blockSize,formatter:z.format})},decrypt:function(V,F,B,z){return z=this.cfg.extend(z),F=this.YX(F,z.format),V.createDecryptor(B,z).finalize(F.ciphertext)},YX:function(V,F){return typeof V=="string"?F.parse(V,this):V}}),E=(e.kdf={}).OpenSSL={execute:function(V,F,B,z){z||(z=n.random(8));var L=u.create({keySize:F+B}).compute(V,z),A=n.create(L.words.slice(F),4*B);return L.sigBytes=4*F,x.create({key:L,iv:A,salt:z})}},T=i.PasswordBasedCipher=b.extend({cfg:b.cfg.extend({kdf:E}),encrypt:function(V,F,B,z){var L=(z=this.cfg.extend(z)).kdf.execute(B,V.keySize,V.ivSize);z.iv=L.iv;var A=b.encrypt.call(this,V,F,L.key,z);return A.mixIn(L),A},decrypt:function(V,F,B,z){z=this.cfg.extend(z),F=this.YX(F,z.format);var L=z.kdf.execute(B,V.keySize,V.ivSize,F.salt);return z.iv=L.iv,b.decrypt.call(this,V,F,L.key,z)}})}()})(nr.exports);var h2=function(r){return function(){var t=r,e=t.lib.BlockCipher,i=t.algo,s=[],n=[],a=[],o=[],l=[],u=[],d=[],f=[],y=[],m=[];(function(){for(var v=[],b=0;b<256;b++)v[b]=b<128?b<<1:b<<1^283;var E=0,T=0;for(b=0;b<256;b++){var V=T^T<<1^T<<2^T<<3^T<<4;V=V>>>8^255&V^99,s[E]=V,n[V]=E;var F=v[E],B=v[F],z=v[B],L=257*v[V]^16843008*V;a[E]=L<<24|L>>>8,o[E]=L<<16|L>>>16,l[E]=L<<8|L>>>24,u[E]=L,L=16843009*z^65537*B^257*F^16843008*E,d[V]=L<<24|L>>>8,f[V]=L<<16|L>>>16,y[V]=L<<8|L>>>24,m[V]=L,E?(E=F^v[v[v[z^F]]],T^=v[v[T]]):E=T=1}})();var S=[0,1,2,4,8,16,32,64,128,27,54],x=i.AES=e.extend({wX:function(){if(!this.HX||this.$X!==this.VX){for(var v=this.$X=this.VX,b=v.words,E=v.sigBytes/4,T=4*((this.HX=E+6)+1),V=this.XX=[],F=0;F<T;F++)F<E?V[F]=b[F]:(L=V[F-1],F%E?E>6&&F%E==4&&(L=s[L>>>24]<<24|s[L>>>16&255]<<16|s[L>>>8&255]<<8|s[255&L]):(L=s[(L=L<<8|L>>>24)>>>24]<<24|s[L>>>16&255]<<16|s[L>>>8&255]<<8|s[255&L],L^=S[F/E|0]<<24),V[F]=V[F-E]^L);for(var B=this.jX=[],z=0;z<T;z++){if(F=T-z,z%4)var L=V[F];else L=V[F-4];B[z]=z<4||F<=4?L:d[s[L>>>24]]^f[s[L>>>16&255]]^y[s[L>>>8&255]]^m[s[255&L]]}}},encryptBlock:function(v,b){this.ZX(v,b,this.XX,a,o,l,u,s)},decryptBlock:function(v,b){var E=v[b+1];v[b+1]=v[b+3],v[b+3]=E,this.ZX(v,b,this.jX,d,f,y,m,n),E=v[b+1],v[b+1]=v[b+3],v[b+3]=E},ZX:function(v,b,E,T,V,F,B,z){for(var L=this.HX,A=v[b]^E[0],R=v[b+1]^E[1],w=v[b+2]^E[2],C=v[b+3]^E[3],k=4,_=1;_<L;_++){var X=T[A>>>24]^V[R>>>16&255]^F[w>>>8&255]^B[255&C]^E[k++],N=T[R>>>24]^V[w>>>16&255]^F[C>>>8&255]^B[255&A]^E[k++],U=T[w>>>24]^V[C>>>16&255]^F[A>>>8&255]^B[255&R]^E[k++],O=T[C>>>24]^V[A>>>16&255]^F[R>>>8&255]^B[255&w]^E[k++];A=X,R=N,w=U,C=O}X=(z[A>>>24]<<24|z[R>>>16&255]<<16|z[w>>>8&255]<<8|z[255&C])^E[k++],N=(z[R>>>24]<<24|z[w>>>16&255]<<16|z[C>>>8&255]<<8|z[255&A])^E[k++],U=(z[w>>>24]<<24|z[C>>>16&255]<<16|z[A>>>8&255]<<8|z[255&R])^E[k++],O=(z[C>>>24]<<24|z[A>>>16&255]<<16|z[R>>>8&255]<<8|z[255&w])^E[k++],v[b]=X,v[b+1]=N,v[b+2]=U,v[b+3]=O},keySize:8});t.AES=e.kX(x)}(),r.AES}(nr.exports),o2=function(r){return r.mode.CTR=(e=(t=r.lib.BlockCipherMode.extend()).Encryptor=t.extend({processBlock:function(i,s){var n=this.OX,a=n.blockSize,o=this.NX,l=this.QX;o&&(l=this.QX=o.slice(0),this.NX=void 0);var u=l.slice(0);n.encryptBlock(u,0),l[a-1]=l[a-1]+1|0;for(var d=0;d<a;d++)i[s+d]^=u[d]}}),t.Decryptor=e,t),r.mode.CTR;var t,e}(nr.exports),l2=function(r){return function(){if(typeof ArrayBuffer=="function"){var t=r.lib.WordArray,e=t.init,i=t.init=function(s){if(s instanceof ArrayBuffer&&(s=new Uint8Array(s)),(s instanceof Int8Array||typeof Uint8ClampedArray<"u"&&s instanceof Uint8ClampedArray||s instanceof Int16Array||s instanceof Uint16Array||s instanceof Int32Array||s instanceof Uint32Array||s instanceof Float32Array||s instanceof Float64Array)&&(s=new Uint8Array(s.buffer,s.byteOffset,s.byteLength)),s instanceof Uint8Array){for(var n=s.byteLength,a=[],o=0;o<n;o++)a[o>>>2]|=s[o]<<24-o%4*8;e.call(this,a,n)}else e.apply(this,arguments)};i.prototype=t}}(),r.lib.WordArray}(nr.exports),u2=function(r){return r.pad.NoPadding={pad:function(){},unpad:function(){}},r.pad.NoPadding}(nr.exports);const gV={"-4":["MDQxMmQ1MWU5MjFhYTMzODUwMWE4ZGYzN2ViZTE4NTU3ZDViYmRlZDg1Yzk0OGI3YTJkMDBmZTNhZGVlMjdjY2VmNzBiMWVlOWI3MDZjMTIwYTAzZDZlZTNkNmYyOTc5Y2E2NGEzN2Y3YjY4N2E1ZjljZWY2ODYxN2I1NWU5ZmJjMA=="],"-3":["MjAxODAxMjA="],"-2":["aHR0cHM6Ly9qc2xpY2Vuc2luZy5saWdodG5pbmdjaGFydC5jb20vc2Vzc2lvbg==","aHR0cHM6Ly9saWdodG5pbmdjaGFydC5jb20vanMtY2hhcnRzL2RvY3MvdHJvdWJsZXNob290aW5nL3Jlc3RyaWN0ZWQtZmVhdHVyZXMv","aHR0cHM6Ly9saWdodG5pbmdjaGFydC5jb20vanMtY2hhcnRzLw=="],"-1":["WE1MSHR0cFJlcXVlc3Q=","ZG9jdW1lbnQ=","ZGVmYXVsdFZpZXc=","YQ==","Yg==","bGljZW5zZV9leHBpcmF0aW9uX2RhdGU=","bG9jYXRpb24=","aG9zdG5hbWU=","dGVzdF9kb21haW4=","ZG9tYWlucw==","Y3J5cHRv","U2lnbmF0dXJl","RUNEU0E=","U0hBMjI0d2l0aEVDRFNB","YWxn","Y3VydmU=","c2VjcDI1Nmsx","YWRkRXZlbnRMaXN0ZW5lcg==","cmVtb3ZlRXZlbnRMaXN0ZW5lcg==","bG9hZGVuZA==","ZXJyb3I=","YWJvcnQ=","dGltZW91dA==","cmVzcG9uc2VUZXh0","Q29udGVudC1UeXBl","YXBwbGljYXRpb24vanNvbg==","TWVzc2FnZURpZ2VzdA==","c2hhMjU2","Y3J5cHRvanM=","dXBkYXRlU3RyaW5n","ZGlnZXN0","Y29tcGFueQ==","YXBwVGl0bGU=","bGNqcy1zZXNzaW9u","bG9jYWxTdG9yYWdl","Z2V0SXRlbQ==","c2V0SXRlbQ==","ZA==","dA==","bGNqcy1zZXNzaW9uLTI="],0:["TGljZW5zZQ==","IA==","a2V5","aGFz","ZXhwaXJlZA==","Lg==","dmVyc2lvbg==","aXM=","dG9v","bmV3","b2xk","b3I=","aW52YWxpZA==","MDAwMQ==","SW52YWxpZA==","bnVtYmVy","b2Y=","ZG9tYWlucw==","ZGVwbG95bWVudA==","aW4=","ZG9tYWlu","RGVwbG95bWVudA==","ZG9tYWlu","dmFsaWRhdGlvbg==","ZmFpbGVk","Og==","UE9TVA==","c2VydmVy","cmVzcG9uZGVk","d2l0aA==","dW5leHBlY3RlZA==","dmFsdWU=","cmVxdWVzdA==","VEVTVA==","REVQTE9ZTUVOVA==","S2V5","VGFtcGVyaW5n","YmVlbg==","ZGV0ZWN0ZWQ=","TWlzc2luZw==","TGljZW5zZQ==","aW5mb3JtYXRpb24=","ZG9lcw==","bm90","aW5jbHVkZQ==","cGVybWlzc2lvbg==","dG8=","dXNl","Q2hhcnQ=","M0Q=","WFk=","RGF0YUdyaWQ=","TWFw","UG9sYXI=","RnVubmVs","R2F1Z2U=","UGll","UHlyYW1pZA==","U3BpZGVy","Zm9y","dGhpcw==","VHJhZGluZw==","ZmVhdHVyZXM=","Y2xpY2s=","aGVyZQ==","bW9yZQ==","c3VwcGxpZWQ=","Z2V0","bGljZW5zZQ==","VHJlZQ=="],1:["aHR0cHM6Ly9qc2xpY2Vuc2luZy5saWdodG5pbmdjaGFydC5jb20vc2FuZGJveA=="]},as=nt,ct=(...r)=>r.slice(1).reduce((t,e)=>t+as.atob(gV[r[0]][e].toString()),"");let Ki,Mt,c2,Ma=new Uint8Array([]);class yV{set e(t){Ki=t}get e(){Mt={qd:!1,tf:!1,if:!1,sf:!1,ef:!1,hf:!1,rf:!1,nf:!1,af:!1,lf:!1,uf:!1,cf:!1,df:!1,ff:!1,Af:!1,gf:!1,mf:!1,yf:!1,pf:!1,Sf:!1,vf:!1,bf:!1,xf:!1,Mf:!1};const t=Ma.length,e=t>=1?Ma[0]:void 0,i=t>=2?Ma[1]:void 0,s=t>=3?Ma[2]:void 0;return e!==void 0&&(Mt.qd=!!(1&e),Mt.tf=!!(2&e),Mt.if=!!(4&e),Mt.sf=!!(8&e),Mt.ef=!!(16&e),Mt.hf=!!(32&e),Mt.rf=!!(64&e),Mt.nf=!!(128&e)),i!==void 0&&(Mt.af=!!(1&i),Mt.lf=!!(2&i),Mt.uf=!!(4&i),Mt.cf=!!(8&i),Mt.df=!!(16&i),Mt.ff=!!(32&i),Mt.Af=!!(64&i),Mt.gf=!!(128&i)),s!==void 0&&(Mt.mf=!!(1&s),Mt.yf=!!(2&s),Mt.pf=!!(4&s),Mt.Sf=!!(8&s),Mt.vf=!!(16&s),Mt.bf=!!(32&s),Mt.xf=!!(64&s),Mt.Mf=!!(128&s)),Mt.hf}set l(t){c2=t}get l(){return c2}}let Hh=!1;const Xh=(r,t)=>{const e=new RegExp(`.{${t}}`,"g");return(r.match(e)||[]).map(i=>parseInt(i,16))},Wm=r=>{if(r.byteLength===4)return`${r[0].toString().padStart(2,"0")}${r[1].toString().padStart(2,"0")}${r[2].toString().padStart(2,"0")}${r[3].toString().padStart(2,"0")}`},t0=r=>r.getFullYear().toString()+(r.getMonth()+1).toString().padStart(2,"0")+r.getDate().toString().padStart(2,"0"),aS=r=>{const t={},e=r.split("-");if(e.length!==3)return{JX:ct(0,0,1,7,1,12,5)};let i=0;const s=Uint8Array.from(atob(e[1]),S=>S.charCodeAt(0));i+=1;const n=s.subarray(i,i+=20),a=new DataView(s.buffer).getUint16(i,!0);i+=2;const o=Uint8Array.from(Array(a));for(let S=0;S<a;S+=1)o[S]=s[S+i]^n[S%n.byteLength];const l=new DataView(o.buffer);t.KX=o,i=0;const u=Uint8Array.from(Array(l.getUint16(i,!0)));i+=2,u.set(o.subarray(i,i+=u.byteLength)),Ma=new Uint8Array(u);const d=Wm(o.subarray(i,i+=4)),f=ct(-3,0);if(!d)return{JX:ct(0,0,1,7,1,12,5)};if(d<f)return{JX:ct(0,40,1,2,1,7,1,8,1,10,1,59,1,60,1,6,5)};if(8&u[0]){const S=Wm(o.subarray(i,i+=4)),x=t0(new Date);if(!S)return{JX:ct(0,0,1,7,1,12,5)};if(S<x)return{JX:ct(0,0,1,2,1,3,1,4,5),qX:ct(-2,2)}}t.tj=i;const y=`${e[0]}-${e[1]}`,m=Array.prototype.reduce.call(atob(e[2]),(S,x)=>S+`0${x.charCodeAt(0).toString(16)}`.slice(-2),"");return Yn(y,m)?t:{JX:ct(0,0,1,7,1,12,5)}},d2=r=>{const t=r.slice(0,4);let e=r.slice(5);switch(t){case"0001":{e=e.replace(/-/g,"");const i=Uint8Array.from(Xh(e,2)),s=i.slice(36,40),n=new Uint8Array(4),a=(d=>{let f;const y=[];for(let S=0;S<256;S+=1){f=S;for(let x=0;x<8;x+=1)f=1&f?3988292384^f>>>1:f>>>1;y[S]=f}let m=-1;for(let S=0;S<d.length;S+=1)m=m>>>8^y[255&(m^d[S])];return(-1^m)>>>0})(i.slice(0,36));new DataView(n.buffer).setUint32(0,a,!0);const o=i.slice(28,34);let l=0;for(let d=o.length-1;d>0;d-=1)l+=o[d]*2**(8*d);const u=new Date(l);if(t0(u)<ct(-3,0))return{JX:ct(0,0,1,2,1,3,1,4,5),qX:ct(-2,2)};if(s.every((d,f)=>n[f]===d))return{};break}case"0002":return aS(r);default:return{JX:ct(0,0,1,2,1,6,1,7,1,8,1,9,1,11,1,10,5)}}return{JX:ct(0,0,1,2,1,7,1,12,5)}},f2=r=>{if(!r)return{JX:ct(0,14,1,15,1,16,1,17,1,19,1,18,1,2,5)};const t=(r[ct(-1,9)]||r[ct(-1,37)]).map(s=>(s||"").trim());if(t.indexOf(as[ct(-1,6)][ct(-1,7)])>-1)return{ij:!0};const e=t.filter(s=>s.indexOf("*")>-1);if(m2(as[ct(-1,6)][ct(-1,7)],e))return{ij:!0};const i=r[ct(-1,8)]||r[ct(-1,38)];if(i!==""&&i!=null){if(m2(as[ct(-1,6)][ct(-1,7)],[i]))return{ij:!1};if(i===as[ct(-1,6)][ct(-1,7)])return{ij:!1}}return{JX:ct(0,14,1,20,5)}},Yn=(r,t)=>{const e=new Kf("secp256k1").keyFromPublic(ct(-4,0),"hex"),i=fV(r).toString();return e.verify(i,t)},g2=r=>{switch(r.slice(0,4)){case"0001":return(t=>{let e,i="";try{const n=t.split("-"),a=n[1],o=n[2],l=n[3];if(!Yn(o,l))return{JX:ct(0,21,1,2,1,7,1,12,5)};const u=lh.parse(o);i=h2.decrypt({ciphertext:lh.parse(a)},u,{mode:o2,padding:u2,iv:lh.parse("00000000000000000000000000000001")}).toString(r2)}catch{return{JX:ct(0,21,1,2,1,7,1,12,5)}}try{e=JSON.parse(i)}catch{return{JX:ct(0,21,1,2,1,7,1,12,5)}}if(e[ct(-1,5)]===void 0||e[ct(-1,4)]===null||!e[ct(-1,9)])return{JX:ct(0,21,1,2,1,7,1,12,5)};const s=parseInt(ct(-3,0),10)||Number(parseInt(ct(-3,0),10));return e[ct(-1,5)]<s?{JX:ct(0,21,1,2,1,3,1,4,5)}:f2(e)})(r);case"0002":return(t=>{const e=aS(t),i=e.KX,s=e.tj;if(e.JX||i===void 0||s===void 0)return e;let n,a="";try{const o=i.slice(e.tj,s+16),l=new DataView(o.buffer),u=new Int32Array(4);for(let b=0;b<u.length;b+=1)u[b]=l.getInt32(4*b,!1);const d=l2.create(Array.from(u)),f=s+16,y=i.slice(f,i.length),m=new DataView(y.buffer),S=new Int32Array(Math.floor(y.byteLength/4));for(let b=0;b<S.length;b+=1)S[b]=m.getInt32(4*b,!1);const x=l2.create(Array.from(S)),v=h2.decrypt({ciphertext:x},d,{mode:o2,padding:u2,iv:lh.parse("00000000000000000000000000000001")});a=as.atob(v.toString(r2))}catch{return{JX:ct(0,21,1,2,1,7,1,12,5)}}try{n=JSON.parse(a)}catch{return{JX:ct(0,21,1,2,1,7,1,12,5)}}return n[ct(-1,37)]?f2(n):{JX:ct(0,21,1,2,1,7,1,12,5)}})(r);default:return{JX:ct(0,21,1,2,1,6,1,7,1,8,1,9,1,11,1,10,5)}}},y2=(r,t)=>{switch(r.slice(0,4)){case"0001":return((e,i)=>{if(!i)return{JX:ct(0,39,1,40,1,41,5)};const s=e.split("-"),n=s[1].slice(1),a=s[2],o=s[3];if(!Yn(`${n}-${a}`,o))return{JX:ct(0,21,1,2,1,7,1,12,5)};const l=Uint8Array.from(Xh(a,2));let u=0;for(let v=l.length-1;v>0;v-=1)u+=l[v]*2**(8*v);if(u<(parseInt(ct(-3,0),10)||Number(parseInt(ct(-3,0),10))))return{JX:ct(0,21,1,2,1,3,1,4,5)};const d=Int32Array.from(Xh(n,8)),f=Rf(i[ct(-1,31)]).toString(lh),y=Int32Array.from(Xh(f,8)),m=Rf(i[ct(-1,32)]).toString(lh),S=Int32Array.from(Xh(m,8)),x=new Int32Array(y.length);for(let v=0;v<x.length;v+=1)x[v]=y[v]^S[v];return d.every((v,b)=>x[b]===v)?{}:{JX:ct(0,21,1,2,1,7,1,12,5)}})(r,t);case"0002":return((e,i)=>{if(!i)return{JX:ct(0,39,1,40,1,41,5)};const s=aS(e),n=s.KX,a=s.tj;if(s.JX||n===void 0||a===void 0)return s;const o=n.slice(a,n.length),l=new DataView(o.buffer),u=new Int32Array(8);for(let x=0;x<u.length;x+=1)u[x]=l.getInt32(4*x,!1);const d=Rf(i[ct(-1,31)]).toString(lh),f=Int32Array.from(Xh(d,8)),y=Rf(i[ct(-1,32)]).toString(lh),m=Int32Array.from(Xh(y,8)),S=new Int32Array(f.length);for(let x=0;x<S.length;x+=1)S[x]=f[x]^m[x];return u.every((x,v)=>S[v]===x)?{}:{JX:ct(0,21,1,2,1,7,1,12,5)}})(r,t);default:return{JX:ct(0,21,1,2,1,6,1,7,1,8,1,9,1,11,1,10,5)}}},Pn=(r,t,e=!0,i)=>{Hh=!1,t.so();const s=t.Gr,n=!!s&&(s===nt.document.body||nt.document.body.contains(s)),a=s&&n?s:document.body;if(Array.from(a.children).find(o=>o.id==="lcjs-error")===void 0){const o=nt.document.createElement("div");o.id="lcjs-error",a.append(o),o.style.position="absolute",o.style.top="0px",o.style.left="0px",o.style.width="100%",o.style.height="100%",o.style.backgroundColor="black",o.style.boxSizing="border-box",o.style.padding="20px",o.style.font="Arial",o.style.fontSize="20px";let l,u=(r||"LICENSE_ERROR").toLowerCase().split("_").join(" ");if(u=(e?ct(0,0,1,2,1,23,1,24,25,1):"")+u.charAt(0).toUpperCase()+u.substr(1),i){const d=nt.document.createElement("a");d.href=i,l=d}else l=nt.document.createElement("p1");o.append(l),l.innerHTML=u,l.style.color="red"}},Un=(r,t,e)=>{t?(r[ct(-1,17)](ct(-1,19),e),r[ct(-1,17)](ct(-1,20),e),r[ct(-1,17)](ct(-1,21),e),r[ct(-1,17)](ct(-1,22),e)):(r[ct(-1,18)](ct(-1,19),e),r[ct(-1,18)](ct(-1,20),e),r[ct(-1,18)](ct(-1,21),e),r[ct(-1,18)](ct(-1,22),e))},m2=(r,t)=>{const e=r.split(".").reverse();return t.some(i=>{const s=i.split(".").reverse();let n=!1;const a=s.findIndex(l=>l==="*"),o=e.every((l,u)=>!(!n&&(!(u<s.length)||(n=s[u]==="*"&&u+1>2,!n&&l!==s[u]))));return!(a>e.length-1||!o)})},mV=new Map,pV=(r,t)=>{const e=typeof r=="object"?r.license:r,i=typeof r=="object"?r.licenseInformation:t,s=typeof r=="object"?r:void 0,n=new yV;n.e=e;let a=mV.get(e||"E");return a||(a=((o,l)=>{let u,d,f=!1,y=!1,m=!1,S=!1,x="",v=!1,b=!1;try{if(Ki){const B=(z=>{if(!Ki)return;const L=Ki.split("-");if(L.length>0)switch(L[0]){case"0001":return"0001";case"0002":return"0002";case"T001":return"T001";default:return}})();if(B==="0001"){Ma=new Uint8Array([2]);const z=(L=>{if(!Ki)return;const A=Ki.split("-");return A.length===4?A[1].startsWith("m")?2:1:0})();if(z===1){const L=g2(Ki);m=!L.ij,u=L,f=!0}else z===2?(u=y2(Ki,o),y=!0):(Hh=!0,u=d2(Ki),S=!0)}else if(B==="0002"){const z=(L=>{if(!Ki)return;const A=Ki.split("-");return A.length>=2?Uint8Array.from(atob(A[1]),R=>R.charCodeAt(0))[0]:void 0})();if(z===104)Hh=!0,u=d2(Ki),S=!0;else if(z===189){const L=g2(Ki);m=!L.ij,u=L,f=!0}else z===159?(u=y2(Ki,o),y=!0):u={JX:ct(0,0,1,7,1,12,5)}}else if(B==="T001"){const z=((A,R)=>{const w=Ki.split("-");if(w.length!==3)return{JX:ct(0,0,1,7,1,12,5)};const C=`${w[1]}`,k=Array.prototype.reduce.call(atob(w[2]),(dt,Et)=>dt+`0${Et.charCodeAt(0).toString(16)}`.slice(-2),"");if(!Yn(C,k))return{JX:ct(0,0,1,7,1,12,5)};let _=0;const X=Uint8Array.from(atob(w[1]),dt=>dt.charCodeAt(_)),N=X.subarray(_,_+=20),U=new DataView(X.buffer).getUint16(_,!0);_+=2;const O=Uint8Array.from(Array(U));for(let dt=0;dt<U;dt+=1)O[dt]=X[dt+_]^N[dt%N.byteLength];_=0;const W=new DataView(O.buffer),P=Wm(O.subarray(_,_+=4)),H=ct(-3,0);if(!P)return{JX:ct(0,0,1,7,1,12,5)};if(P<H)return{JX:ct(0,40,1,2,1,7,1,8,1,10,1,59,1,60,1,6,5)};const j=new Date,Q=new Date;j.setDate(j.getDate()+1),Q.setDate(Q.getDate()-1);const J=t0(Q),ht=t0(j);if(P<J||P>ht)return{JX:ct(0,0,1,2,1,3,1,4,5)};const ot=W.getUint16(_,!0),ut=O.subarray(_+=2,_+ot);if(Ma=new Uint8Array(ut),R&&"dHJhZGVy"in R&&R.dHJhZGVy==="dGVjaG5pY2FsIGFuYWx5c2lz")return{sj:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="};if(R&&"logoGraphic"in R&&R.logoGraphic){const dt=R.logoGraphic.split("-");return dt.length===3&&Yn(dt[0],dt[2])?{sj:dt[0]}:{JX:ct(0,0,1,7,1,12,5)}}return{JX:ct(0,0,1,7,1,12,5)}})(0,o);u=z;const L=z.sj;L&&l?(typeof L=="string"&&(l.l=L),f=!0):u={JX:ct(0,0,1,7,1,12,5)}}else u={JX:ct(0,0,1,7,1,12,5)}}else{const B=/^(10\.|172\.(1[6-9]|2[0-9]|3[0-1])|192\.168)\./;["localhost","127.0.0.1","::1"].includes(window.location.hostname)||B.test(window.location.hostname)?u={JX:ct(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68),qX:ct(-2,2)}:window.location.host===as.atob("c3RhY2tzbmlwcGV0cy5uZXQ=")?(b=!0,v=!1,Ma=new Uint8Array([38]),u={}):(b=!0,v=!0,Ma=new Uint8Array([38]),u={})}}catch{u={JX:ct(0,0,1,7,1,12,5)}}try{S&&(d=as[ct(-1,34)][ct(-1,35)](ct(-1,39))||void 0)}catch(B){as.console.error(B)}let E=!1;if(d){const B=d.split("-");if(B.length===2&&Yn(B[0],B[1])){const[z,L]=B[0].split(":").map(A=>Number(A));Date.now()-L<.95*z*1e3&&(E=!0)}}const T=!(b||v||u.JX||f||y||E),V=(()=>{const B=new as[ct(-1,0)];return B.open(ct(0,26),ct(-2,0)),B.setRequestHeader(ct(-1,24),ct(-1,25)),B.withCredentials=!0,B})(),F=new Li;if(T){let B;try{B=parseInt(Ki?Ki.split("-")[1]:Math.floor(1e6*Math.random()).toString(),16)}catch{B=Math.floor(1e6*Math.random())}const z=Math.floor(1e6*Math.random());x=(B^z).toString();const L={};let A="",R="",w="";Ki=Ki||"";const C=ct(-4,0);for(let _=0;_<Ki.length;_+=1){const X=Ki.charCodeAt(_)^C.charCodeAt(_);A+=String.fromCharCode(X)}const k=ct(-3,0);for(let _=0;_<k.length;_+=1)R+=String.fromCharCode(k.charCodeAt(_)^C.charCodeAt(_));for(let _=0;_<x.length;_+=1)w+=String.fromCharCode(x.charCodeAt(_)^C.charCodeAt(_));L[ct(-1,3)]=as.btoa(A),L[ct(-1,4)]=as.btoa(R),L.h=as.btoa(w),L.v=3,L.s=as[ct(-1,34)][ct(-1,35)](ct(-1,33))||void 0,V.send(JSON.stringify(L))}return(B,z)=>{const L=[],A={Nn:N=>{L.indexOf(N)>=0||(L.push(N),R())},Gn:N=>F.on("logoChange",N),Wn:N=>F.off(N)},R=()=>{L.forEach(N=>{const U=C(N);if(!U)return;const{ej:O,hj:W}=U,P=W?ct(-2,1):void 0,H=`${ct(0,40,1,42,1,43,1,44,1,45,1,46,1,47,1)}${O}${P?ct(0,1,63,1,64,1,59,1,65,1,41):""}`;Pn(H,k,!1,P)})},w=N=>N.toLowerCase().split("_").join(" "),C=N=>{var U;const O=(U=Object.entries(wt).find(W=>W[1]===N))===null||U===void 0?void 0:U[0];if(O){switch(N){case wt.if:return Mt.qd||Mt.if?void 0:{ej:w(O),hj:!0};case wt.rf:return Mt.qd||Mt.rf?void 0:{ej:w(O),hj:!0};case wt.nf:return Mt.qd||Mt.tf||Mt.nf?void 0:{ej:w(O)};case wt.tf:return Mt.qd||Mt.tf?void 0:{ej:w(O)};case wt.df:return Mt.qd||Mt.tf||Mt.df?void 0:{ej:w(O)};case wt.gf:return Mt.qd||Mt.tf||Mt.gf?void 0:{ej:w(O)};case wt.Sf:return Mt.qd||Mt.tf||Mt.Sf?void 0:{ej:w(O)};case wt.bf:return Mt.qd||Mt.tf||Mt.bf?void 0:{ej:w(O)};case wt.xf:return Mt.qd||Mt.tf||Mt.xf?void 0:{ej:w(O)};case wt.vf:return Mt.qd||Mt.tf||Mt.vf?void 0:{ej:w(O)};case wt.lf:return Mt.qd||Mt.tf||Mt.lf?void 0:{ej:w(O)};case wt.Af:return Mt.qd||Mt.tf||Mt.Af?void 0:{ej:w(O)};case wt.cf:return Mt.qd||Mt.tf||Mt.cf?void 0:{ej:w(O)};case wt.mf:return Mt.qd||Mt.tf||Mt.mf?void 0:{ej:w(O)};case wt.pf:return Mt.qd||Mt.tf||Mt.pf?void 0:{ej:w(O)};case wt.yf:return Mt.qd||Mt.tf||Mt.yf?void 0:{ej:w(O)};case wt.af:return Mt.qd||Mt.tf||Mt.af?void 0:{ej:w(O)};case wt.uf:return Mt.qd||Mt.tf||Mt.uf?void 0:{ej:w(O)};case wt.ff:return Mt.qd||Mt.tf||Mt.ff?void 0:{ej:w(O)};case wt.Mf:return Mt.qd||Mt.tf||Mt.Mf?void 0:{ej:w(O)};case wt.qd:case wt.sf:case wt.hf:case wt.ef:return}return Nl(0,"")}},k=new oV(z,B,A);u!=null&&u.JX&&Pn(u.JX,k,void 0,u.qX);const _=N=>{if((N==null?void 0:N.type)==="error"&&d){const U=d.split("-");if(U.length===2&&Yn(U[0],U[1])){const[,O]=U[0].split(":").map(W=>Number(W));if(O+9e5>Date.now())return Hh=!1,void Un(V,!1,X)}}if(V.readyState===as[ct(-1,0)].DONE)if(V.status===200){const U=JSON.parse(V[ct(-1,23)]);if(!Yn(x+ct(-3,0),U.h)){const O=ct(0,0,1,27,1,28,1,29,1,30,1,31,5);Pn(O,k)}as[ct(-1,34)][ct(-1,36)](ct(-1,39),U.t),as[ct(-1,34)][ct(-1,36)](ct(-1,33),U.s),Hh=!1}else{let U="";try{U=N&&N.type!=="loadend"?ct(0,0,1,23,1,32,1,24,5):JSON.parse(V[ct(-1,23)]).message,Un(V,!1,X)}catch(O){console.error(O)}Pn(ct(0,0,1,2,1,7,1,12,5)+U,k)}},X=N=>{_(N)};if(Un(V,!0,X),T?setTimeout(()=>{if(Hh){let N=!0;if(d){const U=d.split("-");if(U.length===2&&Yn(U[0],U[1])){const[,O]=U[0].split(":").map(W=>Number(W));O+9e5>Date.now()&&(N=!1)}}N&&Pn(ct(0,25,1,23,1,32,1,24,5),k)}},1e4):Un(V,!1,X),v){const N=(()=>{const P=new as[ct(-1,0)];return P.open(ct(0,26),ct(1,0)),P.setRequestHeader("Content-Type","text/plain"),P.withCredentials=!0,P})(),U=Array.from({length:10},()=>String.fromCharCode(Math.floor(256*Math.random()))).join(""),O=P=>{if((P==null?void 0:P.type)==="error"){const H=ct(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);Pn(H,k,!1,ct(-2,2)),Un(V,!1,W)}if(N.readyState===as.XMLHttpRequest.DONE){const H=N.getResponseHeader("X-LCJS-SANDBOX-V");if(N.status!==200||H&&H!=="1"){const j=ct(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);Pn(j,k,!1,ct(-2,2)),Un(V,!1,W)}else{const j=JSON.parse(N.responseText);if(!Yn(U,j.s)){const Q=ct(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);Pn(Q,k,!1,ct(-2,2)),Un(V,!1,W)}l!==void 0&&(l.l=j.l),F.emit("logoChange",j.l)}}else{const H=ct(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);Pn(H,k,!1,ct(-2,2)),Un(V,!1,W)}},W=P=>{O(P)};Un(N,!0,W),N.send(U),setTimeout(()=>{if(N.readyState<2){const P=ct(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);Pn(P,k,!1,ct(-2,2)),Un(V,!1,W)}},1e4)}return m?(N=>{let U;Hh=!1;const O=N.oi(),W=()=>{U&&(N.xn(U.bn()),U=void 0),U=N.FI("deployment test"),U.Pr(N.dt).Rh(ct(0,34,1,33)).Fe({x:O.x/2,y:O.y/2}).ba(50).Nh(13).Ce(new it({color:I(128,128,128,100)})).Sa("Arial").Ma(500).setMouseInteractions(!1),N.pn().Sn()};N.Co(()=>{W()}),setTimeout(W,0),setInterval(()=>{U&&U.bn()<N.do()-1?W():U||W()},1e3)})(k):V.readyState===as[ct(-1,0)].DONE&&_(),k}})(i,n)),((o,l,u,d)=>{var f,y,m,S,x,v,b,E,T,V;let F;if(u&&u.license){const R=u.license.split("-");F=R[R.length-1]}const B=((f=u==null?void 0:u.webgl)===null||f===void 0?void 0:f.version)||((m=(y=u==null?void 0:u.sharedContextOptions)===null||y===void 0?void 0:y.webgl)===null||m===void 0?void 0:m.version),z={WE:(S=u==null?void 0:u.sharedContextOptions)===null||S===void 0?void 0:S.canvas,Hn:u==null?void 0:u.warnings,qE:B==="webgl1"?1:B==="webgl2"?2:void 0,ZE:((x=u==null?void 0:u.sharedContextOptions)===null||x===void 0?void 0:x.antialias)!==!1,jE:((v=u==null?void 0:u.sharedContextOptions)===null||v===void 0?void 0:v.devicePixelRatio)||void 0,az:((b=u==null?void 0:u.sharedContextOptions)===null||b===void 0?void 0:b.noCanvasStyles)||void 0,dz:((E=u==null?void 0:u.sharedContextOptions)===null||E===void 0?void 0:E.noCanvasTransform)||void 0,JE:((T=u==null?void 0:u.sharedContextOptions)===null||T===void 0?void 0:T.useStackingOrder)!==!1,KE:((V=u==null?void 0:u.sharedContextOptions)===null||V===void 0?void 0:V.useIndividualCanvas)!==!1,lz:F||void 0},L=new XF(z),A=R=>o(R,L);return{Dashboard:WF(A,l,u,d),ChartXY:jF(A,l,u,d),Spider:$F(A,l,u,d),Polar:JF(A,l,u,d),Pie:ZF(A,l,u,d),UIPanel:qF(A,l,u,d),Gauge:QF(A,l,u,d),Funnel:KF(A,l,u,d),Pyramid:t4(A,l,u,d),Chart3D:i4(A,l,u,d),Map:e4(A,l,u,d),DataGrid:s4(A,l,u,d),BarChart:r4(A,l,u,d),ZoomBandChart:n4(A,l,u,d),TreeMapChart:a4(A,l,u,d),dispose:L.W.bind(L),layout:L.yz.bind(L)}})(a,n.e,s,n.l)},SV=()=>{const r=Ef.useRef(null),t=Ef.useRef(`chart-${Math.random().toString(36).substr(2,9)}`);return Ef.useEffect(()=>{const e=r.current;if(!e)return;const i=pV({license:"0002-n0i9AP8MN/ezP+gV3RZRzNiQvQvBKwBJvTnrFTHppybuCwWuickxBJV+q3qyoeEBGSE4hS0aeo3pySDywrb/iIsl-MEUCIAiJOU3BrUq71LqSlRAIFAI0dKK05qBRIJYHFmBoOoIHAiEA4Y55O1QpeuEkiuVktPGLauOHc1TzxNu85/vz/eNscz8=",licenseInformation:{appTitle:"LightningChart JS Trial",company:"LightningChart Ltd."}}),s=i.ChartXY({container:e,theme:eE.turquoiseHexagon}).setTitle("Sweeping ECG"),n=Date.now(),a=s.getDefaultAxisX().setScrollStrategy($r.progressive).setTickStrategy(Al.Time,x=>x.setTimeOrigin(n));s.getDefaultAxisY().setInterval(-200,200).setTickStrategy(Al.Numeric);const o=s.addLineSeries({dataPattern:{pattern:"ProgressiveX"},strokeStyle:At,fillStyle:new it({color:xs("#75FF32")})}),l=2e3,u=30,d=l*u,f=new Array(l).fill(0);let y=0;a.setInterval(0,d);const m=x=>100*Math.sin(2*Math.PI*x*1.5)+30*Math.sin(2*Math.PI*x*12)+(x%1<.02?150:0),S=setInterval(()=>{const x=y*u,v=m(x/1e3);f[y%l]=v;const b=[];for(let E=0;E<l;E++){const T=(y+E+1)%l,V=E*u;b.push({x:V,y:f[T]})}o.clear().add(b),y++},u);return()=>{clearInterval(S),s.dispose(),i.dispose()}},[]),sh.jsx("div",{ref:r,id:t.current,style:{width:"100%",height:"600px"}})};function xV(){return sh.jsx(sh.Fragment,{children:sh.jsxs("div",{className:"App",children:[sh.jsx("h1",{children:"Chart"}),sh.jsx(SV,{})]})})}zw.createRoot(document.getElementById("root")).render(sh.jsx(Ef.StrictMode,{children:sh.jsx(xV,{})}));
