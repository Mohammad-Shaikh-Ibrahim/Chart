(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function e(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(s){if(s.ep)return;s.ep=!0;const n=e(s);fetch(s.href,n)}})();function MC(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var sm={exports:{}},qu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yv;function RC(){if(yv)return qu;yv=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,s,n){var a=null;if(n!==void 0&&(a=""+n),s.key!==void 0&&(a=""+s.key),"key"in s){n={};for(var o in s)o!=="key"&&(n[o]=s[o])}else n=s;return s=n.ref,{$$typeof:r,type:i,key:a,ref:s!==void 0?s:null,props:n}}return qu.Fragment=t,qu.jsx=e,qu.jsxs=e,qu}var mv;function EC(){return mv||(mv=1,sm.exports=RC()),sm.exports}var sh=EC(),rm={exports:{}},le={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pv;function TC(){if(pv)return le;pv=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),n=Symbol.for("react.consumer"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;function y(I){return I===null||typeof I!="object"?null:(I=f&&I[f]||I["@@iterator"],typeof I=="function"?I:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,x={};function b(I,H,q){this.props=I,this.context=H,this.refs=x,this.updater=q||m}b.prototype.isReactComponent={},b.prototype.setState=function(I,H){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,H,"setState")},b.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function v(){}v.prototype=b.prototype;function R(I,H,q){this.props=I,this.context=H,this.refs=x,this.updater=q||m}var E=R.prototype=new v;E.constructor=R,p(E,b.prototype),E.isPureReactComponent=!0;var V=Array.isArray,F={H:null,A:null,T:null,S:null,V:null},L=Object.prototype.hasOwnProperty;function z(I,H,q,Q,J,ot){return q=ot.ref,{$$typeof:r,type:I,key:H,ref:q!==void 0?q:null,props:ot}}function B(I,H){return z(I.type,H,void 0,void 0,void 0,I.props)}function A(I){return typeof I=="object"&&I!==null&&I.$$typeof===r}function T(I){var H={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(q){return H[q]})}var w=/\/+/g;function C(I,H){return typeof I=="object"&&I!==null&&I.key!=null?T(""+I.key):H.toString(36)}function k(){}function _(I){switch(I.status){case"fulfilled":return I.value;case"rejected":throw I.reason;default:switch(typeof I.status=="string"?I.then(k,k):(I.status="pending",I.then(function(H){I.status==="pending"&&(I.status="fulfilled",I.value=H)},function(H){I.status==="pending"&&(I.status="rejected",I.reason=H)})),I.status){case"fulfilled":return I.value;case"rejected":throw I.reason}}throw I}function X(I,H,q,Q,J){var ot=typeof I;(ot==="undefined"||ot==="boolean")&&(I=null);var ht=!1;if(I===null)ht=!0;else switch(ot){case"bigint":case"string":case"number":ht=!0;break;case"object":switch(I.$$typeof){case r:case t:ht=!0;break;case d:return ht=I._init,X(ht(I._payload),H,q,Q,J)}}if(ht)return J=J(I),ht=Q===""?"."+C(I,0):Q,V(J)?(q="",ht!=null&&(q=ht.replace(w,"$&/")+"/"),X(J,H,q,"",function(Tt){return Tt})):J!=null&&(A(J)&&(J=B(J,q+(J.key==null||I&&I.key===J.key?"":(""+J.key).replace(w,"$&/")+"/")+ht)),H.push(J)),1;ht=0;var ut=Q===""?".":Q+":";if(V(I))for(var dt=0;dt<I.length;dt++)Q=I[dt],ot=ut+C(Q,dt),ht+=X(Q,H,q,ot,J);else if(dt=y(I),typeof dt=="function")for(I=dt.call(I),dt=0;!(Q=I.next()).done;)Q=Q.value,ot=ut+C(Q,dt++),ht+=X(Q,H,q,ot,J);else if(ot==="object"){if(typeof I.then=="function")return X(_(I),H,q,Q,J);throw H=String(I),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return ht}function N(I,H,q){if(I==null)return I;var Q=[],J=0;return X(I,Q,"","",function(ot){return H.call(q,ot,J++)}),Q}function U(I){if(I._status===-1){var H=I._result;H=H(),H.then(function(q){(I._status===0||I._status===-1)&&(I._status=1,I._result=q)},function(q){(I._status===0||I._status===-1)&&(I._status=2,I._result=q)}),I._status===-1&&(I._status=0,I._result=H)}if(I._status===1)return I._result.default;throw I._result}var O=typeof reportError=="function"?reportError:function(I){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof I=="object"&&I!==null&&typeof I.message=="string"?String(I.message):String(I),error:I});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",I);return}console.error(I)};function W(){}return le.Children={map:N,forEach:function(I,H,q){N(I,function(){H.apply(this,arguments)},q)},count:function(I){var H=0;return N(I,function(){H++}),H},toArray:function(I){return N(I,function(H){return H})||[]},only:function(I){if(!A(I))throw Error("React.Children.only expected to receive a single React element child.");return I}},le.Component=b,le.Fragment=e,le.Profiler=s,le.PureComponent=R,le.StrictMode=i,le.Suspense=l,le.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=F,le.__COMPILER_RUNTIME={__proto__:null,c:function(I){return F.H.useMemoCache(I)}},le.cache=function(I){return function(){return I.apply(null,arguments)}},le.cloneElement=function(I,H,q){if(I==null)throw Error("The argument must be a React element, but you passed "+I+".");var Q=p({},I.props),J=I.key,ot=void 0;if(H!=null)for(ht in H.ref!==void 0&&(ot=void 0),H.key!==void 0&&(J=""+H.key),H)!L.call(H,ht)||ht==="key"||ht==="__self"||ht==="__source"||ht==="ref"&&H.ref===void 0||(Q[ht]=H[ht]);var ht=arguments.length-2;if(ht===1)Q.children=q;else if(1<ht){for(var ut=Array(ht),dt=0;dt<ht;dt++)ut[dt]=arguments[dt+2];Q.children=ut}return z(I.type,J,void 0,void 0,ot,Q)},le.createContext=function(I){return I={$$typeof:a,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null},I.Provider=I,I.Consumer={$$typeof:n,_context:I},I},le.createElement=function(I,H,q){var Q,J={},ot=null;if(H!=null)for(Q in H.key!==void 0&&(ot=""+H.key),H)L.call(H,Q)&&Q!=="key"&&Q!=="__self"&&Q!=="__source"&&(J[Q]=H[Q]);var ht=arguments.length-2;if(ht===1)J.children=q;else if(1<ht){for(var ut=Array(ht),dt=0;dt<ht;dt++)ut[dt]=arguments[dt+2];J.children=ut}if(I&&I.defaultProps)for(Q in ht=I.defaultProps,ht)J[Q]===void 0&&(J[Q]=ht[Q]);return z(I,ot,void 0,void 0,null,J)},le.createRef=function(){return{current:null}},le.forwardRef=function(I){return{$$typeof:o,render:I}},le.isValidElement=A,le.lazy=function(I){return{$$typeof:d,_payload:{_status:-1,_result:I},_init:U}},le.memo=function(I,H){return{$$typeof:u,type:I,compare:H===void 0?null:H}},le.startTransition=function(I){var H=F.T,q={};F.T=q;try{var Q=I(),J=F.S;J!==null&&J(q,Q),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"&&Q.then(W,O)}catch(ot){O(ot)}finally{F.T=H}},le.unstable_useCacheRefresh=function(){return F.H.useCacheRefresh()},le.use=function(I){return F.H.use(I)},le.useActionState=function(I,H,q){return F.H.useActionState(I,H,q)},le.useCallback=function(I,H){return F.H.useCallback(I,H)},le.useContext=function(I){return F.H.useContext(I)},le.useDebugValue=function(){},le.useDeferredValue=function(I,H){return F.H.useDeferredValue(I,H)},le.useEffect=function(I,H,q){var Q=F.H;if(typeof q=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Q.useEffect(I,H)},le.useId=function(){return F.H.useId()},le.useImperativeHandle=function(I,H,q){return F.H.useImperativeHandle(I,H,q)},le.useInsertionEffect=function(I,H){return F.H.useInsertionEffect(I,H)},le.useLayoutEffect=function(I,H){return F.H.useLayoutEffect(I,H)},le.useMemo=function(I,H){return F.H.useMemo(I,H)},le.useOptimistic=function(I,H){return F.H.useOptimistic(I,H)},le.useReducer=function(I,H,q){return F.H.useReducer(I,H,q)},le.useRef=function(I){return F.H.useRef(I)},le.useState=function(I){return F.H.useState(I)},le.useSyncExternalStore=function(I,H,q){return F.H.useSyncExternalStore(I,H,q)},le.useTransition=function(){return F.H.useTransition()},le.version="19.1.0",le}var Sv;function Sp(){return Sv||(Sv=1,rm.exports=TC()),rm.exports}var St=Sp(),nm={exports:{}},ju={},am={exports:{}},om={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xv;function wC(){return xv||(xv=1,function(r){function t(N,U){var O=N.length;N.push(U);t:for(;0<O;){var W=O-1>>>1,I=N[W];if(0<s(I,U))N[W]=U,N[O]=I,O=W;else break t}}function e(N){return N.length===0?null:N[0]}function i(N){if(N.length===0)return null;var U=N[0],O=N.pop();if(O!==U){N[0]=O;t:for(var W=0,I=N.length,H=I>>>1;W<H;){var q=2*(W+1)-1,Q=N[q],J=q+1,ot=N[J];if(0>s(Q,O))J<I&&0>s(ot,Q)?(N[W]=ot,N[J]=O,W=J):(N[W]=Q,N[q]=O,W=q);else if(J<I&&0>s(ot,O))N[W]=ot,N[J]=O,W=J;else break t}}return U}function s(N,U){var O=N.sortIndex-U.sortIndex;return O!==0?O:N.id-U.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var n=performance;r.unstable_now=function(){return n.now()}}else{var a=Date,o=a.now();r.unstable_now=function(){return a.now()-o}}var l=[],u=[],d=1,f=null,y=3,m=!1,p=!1,x=!1,b=!1,v=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function V(N){for(var U=e(u);U!==null;){if(U.callback===null)i(u);else if(U.startTime<=N)i(u),U.sortIndex=U.expirationTime,t(l,U);else break;U=e(u)}}function F(N){if(x=!1,V(N),!p)if(e(l)!==null)p=!0,L||(L=!0,C());else{var U=e(u);U!==null&&X(F,U.startTime-N)}}var L=!1,z=-1,B=5,A=-1;function T(){return b?!0:!(r.unstable_now()-A<B)}function w(){if(b=!1,L){var N=r.unstable_now();A=N;var U=!0;try{t:{p=!1,x&&(x=!1,R(z),z=-1),m=!0;var O=y;try{e:{for(V(N),f=e(l);f!==null&&!(f.expirationTime>N&&T());){var W=f.callback;if(typeof W=="function"){f.callback=null,y=f.priorityLevel;var I=W(f.expirationTime<=N);if(N=r.unstable_now(),typeof I=="function"){f.callback=I,V(N),U=!0;break e}f===e(l)&&i(l),V(N)}else i(l);f=e(l)}if(f!==null)U=!0;else{var H=e(u);H!==null&&X(F,H.startTime-N),U=!1}}break t}finally{f=null,y=O,m=!1}U=void 0}}finally{U?C():L=!1}}}var C;if(typeof E=="function")C=function(){E(w)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,_=k.port2;k.port1.onmessage=w,C=function(){_.postMessage(null)}}else C=function(){v(w,0)};function X(N,U){z=v(function(){N(r.unstable_now())},U)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(N){N.callback=null},r.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<N?Math.floor(1e3/N):5},r.unstable_getCurrentPriorityLevel=function(){return y},r.unstable_next=function(N){switch(y){case 1:case 2:case 3:var U=3;break;default:U=y}var O=y;y=U;try{return N()}finally{y=O}},r.unstable_requestPaint=function(){b=!0},r.unstable_runWithPriority=function(N,U){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var O=y;y=N;try{return U()}finally{y=O}},r.unstable_scheduleCallback=function(N,U,O){var W=r.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?W+O:W):O=W,N){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=O+I,N={id:d++,callback:U,priorityLevel:N,startTime:O,expirationTime:I,sortIndex:-1},O>W?(N.sortIndex=O,t(u,N),e(l)===null&&N===e(u)&&(x?(R(z),z=-1):x=!0,X(F,O-W))):(N.sortIndex=I,t(l,N),p||m||(p=!0,L||(L=!0,C()))),N},r.unstable_shouldYield=T,r.unstable_wrapCallback=function(N){var U=y;return function(){var O=y;y=U;try{return N.apply(this,arguments)}finally{y=O}}}}(om)),om}var Av;function CC(){return Av||(Av=1,am.exports=wC()),am.exports}var hm={exports:{}},Gs={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vv;function kC(){if(vv)return Gs;vv=1;var r=Sp();function t(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},s=Symbol.for("react.portal");function n(l,u,d){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:f==null?null:""+f,children:l,containerInfo:u,implementation:d}}var a=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,u){if(l==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return Gs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Gs.createPortal=function(l,u){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(t(299));return n(l,u,null,d)},Gs.flushSync=function(l){var u=a.T,d=i.p;try{if(a.T=null,i.p=2,l)return l()}finally{a.T=u,i.p=d,i.d.f()}},Gs.preconnect=function(l,u){typeof l=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,i.d.C(l,u))},Gs.prefetchDNS=function(l){typeof l=="string"&&i.d.D(l)},Gs.preinit=function(l,u){if(typeof l=="string"&&u&&typeof u.as=="string"){var d=u.as,f=o(d,u.crossOrigin),y=typeof u.integrity=="string"?u.integrity:void 0,m=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;d==="style"?i.d.S(l,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:f,integrity:y,fetchPriority:m}):d==="script"&&i.d.X(l,{crossOrigin:f,integrity:y,fetchPriority:m,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},Gs.preinitModule=function(l,u){if(typeof l=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var d=o(u.as,u.crossOrigin);i.d.M(l,{crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&i.d.M(l)},Gs.preload=function(l,u){if(typeof l=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var d=u.as,f=o(d,u.crossOrigin);i.d.L(l,d,{crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},Gs.preloadModule=function(l,u){if(typeof l=="string")if(u){var d=o(u.as,u.crossOrigin);i.d.m(l,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else i.d.m(l)},Gs.requestFormReset=function(l){i.d.r(l)},Gs.unstable_batchedUpdates=function(l,u){return l(u)},Gs.useFormState=function(l,u,d){return a.H.useFormState(l,u,d)},Gs.useFormStatus=function(){return a.H.useHostTransitionStatus()},Gs.version="19.1.0",Gs}var bv;function DC(){if(bv)return hm.exports;bv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),hm.exports=kC(),hm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mv;function FC(){if(Mv)return ju;Mv=1;var r=CC(),t=Sp(),e=DC();function i(h){var c="https://react.dev/errors/"+h;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)c+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+h+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)}function n(h){var c=h,g=h;if(h.alternate)for(;c.return;)c=c.return;else{h=c;do c=h,(c.flags&4098)!==0&&(g=c.return),h=c.return;while(h)}return c.tag===3?g:null}function a(h){if(h.tag===13){var c=h.memoizedState;if(c===null&&(h=h.alternate,h!==null&&(c=h.memoizedState)),c!==null)return c.dehydrated}return null}function o(h){if(n(h)!==h)throw Error(i(188))}function l(h){var c=h.alternate;if(!c){if(c=n(h),c===null)throw Error(i(188));return c!==h?null:h}for(var g=h,S=c;;){var M=g.return;if(M===null)break;var D=M.alternate;if(D===null){if(S=M.return,S!==null){g=S;continue}break}if(M.child===D.child){for(D=M.child;D;){if(D===g)return o(M),h;if(D===S)return o(M),c;D=D.sibling}throw Error(i(188))}if(g.return!==S.return)g=M,S=D;else{for(var G=!1,$=M.child;$;){if($===g){G=!0,g=M,S=D;break}if($===S){G=!0,S=M,g=D;break}$=$.sibling}if(!G){for($=D.child;$;){if($===g){G=!0,g=D,S=M;break}if($===S){G=!0,S=D,g=M;break}$=$.sibling}if(!G)throw Error(i(189))}}if(g.alternate!==S)throw Error(i(190))}if(g.tag!==3)throw Error(i(188));return g.stateNode.current===g?h:c}function u(h){var c=h.tag;if(c===5||c===26||c===27||c===6)return h;for(h=h.child;h!==null;){if(c=u(h),c!==null)return c;h=h.sibling}return null}var d=Object.assign,f=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),R=Symbol.for("react.consumer"),E=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),T=Symbol.for("react.memo_cache_sentinel"),w=Symbol.iterator;function C(h){return h===null||typeof h!="object"?null:(h=w&&h[w]||h["@@iterator"],typeof h=="function"?h:null)}var k=Symbol.for("react.client.reference");function _(h){if(h==null)return null;if(typeof h=="function")return h.$$typeof===k?null:h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case p:return"Fragment";case b:return"Profiler";case x:return"StrictMode";case F:return"Suspense";case L:return"SuspenseList";case A:return"Activity"}if(typeof h=="object")switch(h.$$typeof){case m:return"Portal";case E:return(h.displayName||"Context")+".Provider";case R:return(h._context.displayName||"Context")+".Consumer";case V:var c=h.render;return h=h.displayName,h||(h=c.displayName||c.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case z:return c=h.displayName||null,c!==null?c:_(h.type)||"Memo";case B:c=h._payload,h=h._init;try{return _(h(c))}catch{}}return null}var X=Array.isArray,N=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O={pending:!1,data:null,method:null,action:null},W=[],I=-1;function H(h){return{current:h}}function q(h){0>I||(h.current=W[I],W[I]=null,I--)}function Q(h,c){I++,W[I]=h.current,h.current=c}var J=H(null),ot=H(null),ht=H(null),ut=H(null);function dt(h,c){switch(Q(ht,c),Q(ot,h),Q(J,null),c.nodeType){case 9:case 11:h=(h=c.documentElement)&&(h=h.namespaceURI)?Y1(h):0;break;default:if(h=c.tagName,c=c.namespaceURI)c=Y1(c),h=H1(c,h);else switch(h){case"svg":h=1;break;case"math":h=2;break;default:h=0}}q(J),Q(J,h)}function Tt(){q(J),q(ot),q(ht)}function xt(h){h.memoizedState!==null&&Q(ut,h);var c=J.current,g=H1(c,h.type);c!==g&&(Q(ot,h),Q(J,g))}function zt(h){ot.current===h&&(q(J),q(ot)),ut.current===h&&(q(ut),Yu._currentValue=O)}var Nt=Object.prototype.hasOwnProperty,jt=r.unstable_scheduleCallback,ie=r.unstable_cancelCallback,Ft=r.unstable_shouldYield,kt=r.unstable_requestPaint,Oi=r.unstable_now,Ye=r.unstable_getCurrentPriorityLevel,Ee=r.unstable_ImmediatePriority,Kr=r.unstable_UserBlockingPriority,Qe=r.unstable_NormalPriority,ai=r.unstable_LowPriority,dr=r.unstable_IdlePriority,de=r.log,Ke=r.unstable_setDisableYieldValue,vi=null,ge=null;function Pe(h){if(typeof de=="function"&&Ke(h),ge&&typeof ge.setStrictMode=="function")try{ge.setStrictMode(vi,h)}catch{}}var mi=Math.clz32?Math.clz32:Ia,He=Math.log,Ie=Math.LN2;function Ia(h){return h>>>=0,h===0?32:31-(He(h)/Ie|0)|0}var Ue=256,Xe=4194304;function Ot(h){var c=h&42;if(c!==0)return c;switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return h&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return h}}function ne(h,c,g){var S=h.pendingLanes;if(S===0)return 0;var M=0,D=h.suspendedLanes,G=h.pingedLanes;h=h.warmLanes;var $=S&134217727;return $!==0?(S=$&~D,S!==0?M=Ot(S):(G&=$,G!==0?M=Ot(G):g||(g=$&~h,g!==0&&(M=Ot(g))))):($=S&~D,$!==0?M=Ot($):G!==0?M=Ot(G):g||(g=S&~h,g!==0&&(M=Ot(g)))),M===0?0:c!==0&&c!==M&&(c&D)===0&&(D=M&-M,g=c&-c,D>=g||D===32&&(g&4194048)!==0)?c:M}function Et(h,c){return(h.pendingLanes&~(h.suspendedLanes&~h.pingedLanes)&c)===0}function oe(h,c){switch(h){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wt(){var h=Ue;return Ue<<=1,(Ue&4194048)===0&&(Ue=256),h}function Gt(){var h=Xe;return Xe<<=1,(Xe&62914560)===0&&(Xe=4194304),h}function he(h){for(var c=[],g=0;31>g;g++)c.push(h);return c}function fe(h,c){h.pendingLanes|=c,c!==268435456&&(h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0)}function Te(h,c,g,S,M,D){var G=h.pendingLanes;h.pendingLanes=g,h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0,h.expiredLanes&=g,h.entangledLanes&=g,h.errorRecoveryDisabledLanes&=g,h.shellSuspendCounter=0;var $=h.entanglements,Z=h.expirationTimes,rt=h.hiddenUpdates;for(g=G&~g;0<g;){var yt=31-mi(g),pt=1<<yt;$[yt]=0,Z[yt]=-1;var at=rt[yt];if(at!==null)for(rt[yt]=null,yt=0;yt<at.length;yt++){var lt=at[yt];lt!==null&&(lt.lane&=-536870913)}g&=~pt}S!==0&&_n(h,S,0),D!==0&&M===0&&h.tag!==0&&(h.suspendedLanes|=D&~(G&~c))}function _n(h,c,g){h.pendingLanes|=c,h.suspendedLanes&=~c;var S=31-mi(c);h.entangledLanes|=c,h.entanglements[S]=h.entanglements[S]|1073741824|g&4194090}function si(h,c){var g=h.entangledLanes|=c;for(h=h.entanglements;g;){var S=31-mi(g),M=1<<S;M&c|h[S]&c&&(h[S]|=c),g&=~M}}function we(h){switch(h){case 2:h=1;break;case 8:h=4;break;case 32:h=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:h=128;break;case 268435456:h=134217728;break;default:h=0}return h}function Nn(h){return h&=-h,2<h?8<h?(h&134217727)!==0?32:268435456:8:2}function pi(){var h=U.p;return h!==0?h:(h=window.event,h===void 0?32:lv(h.type))}function ri(h,c){var g=U.p;try{return U.p=h,c()}finally{U.p=g}}var Ut=Math.random().toString(36).slice(2),It="__reactFiber$"+Ut,Qt="__reactProps$"+Ut,Fs="__reactContainer$"+Ut,ni="__reactEvents$"+Ut,ye="__reactListeners$"+Ut,Zi="__reactHandles$"+Ut,Oe="__reactResources$"+Ut,Ve="__reactMarker$"+Ut;function Gi(h){delete h[It],delete h[Qt],delete h[ni],delete h[ye],delete h[Zi]}function zi(h){var c=h[It];if(c)return c;for(var g=h.parentNode;g;){if(c=g[Fs]||g[It]){if(g=c.alternate,c.child!==null||g!==null&&g.child!==null)for(h=q1(h);h!==null;){if(g=h[It])return g;h=q1(h)}return c}h=g,g=h.parentNode}return null}function ns(h){if(h=h[It]||h[Fs]){var c=h.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return h}return null}function Yi(h){var c=h.tag;if(c===5||c===26||c===27||c===6)return h.stateNode;throw Error(i(33))}function bt(h){var c=h[Oe];return c||(c=h[Oe]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function Xt(h){h[Ve]=!0}var Zs=new Set,_i={};function Ni(h,c){Li(h,c),Li(h+"Capture",c)}function Li(h,c){for(_i[h]=c,h=0;h<c.length;h++)Zs.add(c[h])}var Qi=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),zr={},_r={};function Ua(h){return Nt.call(_r,h)?!0:Nt.call(zr,h)?!1:Qi.test(h)?_r[h]=!0:(zr[h]=!0,!1)}function tn(h,c,g){if(Ua(c))if(g===null)h.removeAttribute(c);else{switch(typeof g){case"undefined":case"function":case"symbol":h.removeAttribute(c);return;case"boolean":var S=c.toLowerCase().slice(0,5);if(S!=="data-"&&S!=="aria-"){h.removeAttribute(c);return}}h.setAttribute(c,""+g)}}function en(h,c,g){if(g===null)h.removeAttribute(c);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":h.removeAttribute(c);return}h.setAttribute(c,""+g)}}function ve(h,c,g,S){if(S===null)h.removeAttribute(g);else{switch(typeof S){case"undefined":case"function":case"symbol":case"boolean":h.removeAttribute(g);return}h.setAttributeNS(c,g,""+S)}}var Vs,oa;function Mh(h){if(Vs===void 0)try{throw Error()}catch(g){var c=g.stack.trim().match(/\n( *(at )?)/);Vs=c&&c[1]||"",oa=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Vs+h+oa}var Q0=!1;function K0(h,c){if(!h||Q0)return"";Q0=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var S={DetermineComponentFrameRoot:function(){try{if(c){var pt=function(){throw Error()};if(Object.defineProperty(pt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pt,[])}catch(lt){var at=lt}Reflect.construct(h,[],pt)}else{try{pt.call()}catch(lt){at=lt}h.call(pt.prototype)}}else{try{throw Error()}catch(lt){at=lt}(pt=h())&&typeof pt.catch=="function"&&pt.catch(function(){})}}catch(lt){if(lt&&at&&typeof lt.stack=="string")return[lt.stack,at.stack]}return[null,null]}};S.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var M=Object.getOwnPropertyDescriptor(S.DetermineComponentFrameRoot,"name");M&&M.configurable&&Object.defineProperty(S.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var D=S.DetermineComponentFrameRoot(),G=D[0],$=D[1];if(G&&$){var Z=G.split(`
`),rt=$.split(`
`);for(M=S=0;S<Z.length&&!Z[S].includes("DetermineComponentFrameRoot");)S++;for(;M<rt.length&&!rt[M].includes("DetermineComponentFrameRoot");)M++;if(S===Z.length||M===rt.length)for(S=Z.length-1,M=rt.length-1;1<=S&&0<=M&&Z[S]!==rt[M];)M--;for(;1<=S&&0<=M;S--,M--)if(Z[S]!==rt[M]){if(S!==1||M!==1)do if(S--,M--,0>M||Z[S]!==rt[M]){var yt=`
`+Z[S].replace(" at new "," at ");return h.displayName&&yt.includes("<anonymous>")&&(yt=yt.replace("<anonymous>",h.displayName)),yt}while(1<=S&&0<=M);break}}}finally{Q0=!1,Error.prepareStackTrace=g}return(g=h?h.displayName||h.name:"")?Mh(g):""}function pT(h){switch(h.tag){case 26:case 27:case 5:return Mh(h.type);case 16:return Mh("Lazy");case 13:return Mh("Suspense");case 19:return Mh("SuspenseList");case 0:case 15:return K0(h.type,!1);case 11:return K0(h.type.render,!1);case 1:return K0(h.type,!0);case 31:return Mh("Activity");default:return""}}function BS(h){try{var c="";do c+=pT(h),h=h.return;while(h);return c}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}function sn(h){switch(typeof h){case"bigint":case"boolean":case"number":case"string":case"undefined":return h;case"object":return h;default:return""}}function PS(h){var c=h.type;return(h=h.nodeName)&&h.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function ST(h){var c=PS(h)?"checked":"value",g=Object.getOwnPropertyDescriptor(h.constructor.prototype,c),S=""+h[c];if(!h.hasOwnProperty(c)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var M=g.get,D=g.set;return Object.defineProperty(h,c,{configurable:!0,get:function(){return M.call(this)},set:function(G){S=""+G,D.call(this,G)}}),Object.defineProperty(h,c,{enumerable:g.enumerable}),{getValue:function(){return S},setValue:function(G){S=""+G},stopTracking:function(){h._valueTracker=null,delete h[c]}}}}function ad(h){h._valueTracker||(h._valueTracker=ST(h))}function IS(h){if(!h)return!1;var c=h._valueTracker;if(!c)return!0;var g=c.getValue(),S="";return h&&(S=PS(h)?h.checked?"true":"false":h.value),h=S,h!==g?(c.setValue(h),!0):!1}function od(h){if(h=h||(typeof document<"u"?document:void 0),typeof h>"u")return null;try{return h.activeElement||h.body}catch{return h.body}}var xT=/[\n"\\]/g;function rn(h){return h.replace(xT,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function tg(h,c,g,S,M,D,G,$){h.name="",G!=null&&typeof G!="function"&&typeof G!="symbol"&&typeof G!="boolean"?h.type=G:h.removeAttribute("type"),c!=null?G==="number"?(c===0&&h.value===""||h.value!=c)&&(h.value=""+sn(c)):h.value!==""+sn(c)&&(h.value=""+sn(c)):G!=="submit"&&G!=="reset"||h.removeAttribute("value"),c!=null?eg(h,G,sn(c)):g!=null?eg(h,G,sn(g)):S!=null&&h.removeAttribute("value"),M==null&&D!=null&&(h.defaultChecked=!!D),M!=null&&(h.checked=M&&typeof M!="function"&&typeof M!="symbol"),$!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"?h.name=""+sn($):h.removeAttribute("name")}function US(h,c,g,S,M,D,G,$){if(D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(h.type=D),c!=null||g!=null){if(!(D!=="submit"&&D!=="reset"||c!=null))return;g=g!=null?""+sn(g):"",c=c!=null?""+sn(c):g,$||c===h.value||(h.value=c),h.defaultValue=c}S=S??M,S=typeof S!="function"&&typeof S!="symbol"&&!!S,h.checked=$?h.checked:!!S,h.defaultChecked=!!S,G!=null&&typeof G!="function"&&typeof G!="symbol"&&typeof G!="boolean"&&(h.name=G)}function eg(h,c,g){c==="number"&&od(h.ownerDocument)===h||h.defaultValue===""+g||(h.defaultValue=""+g)}function Rh(h,c,g,S){if(h=h.options,c){c={};for(var M=0;M<g.length;M++)c["$"+g[M]]=!0;for(g=0;g<h.length;g++)M=c.hasOwnProperty("$"+h[g].value),h[g].selected!==M&&(h[g].selected=M),M&&S&&(h[g].defaultSelected=!0)}else{for(g=""+sn(g),c=null,M=0;M<h.length;M++){if(h[M].value===g){h[M].selected=!0,S&&(h[M].defaultSelected=!0);return}c!==null||h[M].disabled||(c=h[M])}c!==null&&(c.selected=!0)}}function OS(h,c,g){if(c!=null&&(c=""+sn(c),c!==h.value&&(h.value=c),g==null)){h.defaultValue!==c&&(h.defaultValue=c);return}h.defaultValue=g!=null?""+sn(g):""}function GS(h,c,g,S){if(c==null){if(S!=null){if(g!=null)throw Error(i(92));if(X(S)){if(1<S.length)throw Error(i(93));S=S[0]}g=S}g==null&&(g=""),c=g}g=sn(c),h.defaultValue=g,S=h.textContent,S===g&&S!==""&&S!==null&&(h.value=S)}function Eh(h,c){if(c){var g=h.firstChild;if(g&&g===h.lastChild&&g.nodeType===3){g.nodeValue=c;return}}h.textContent=c}var AT=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function YS(h,c,g){var S=c.indexOf("--")===0;g==null||typeof g=="boolean"||g===""?S?h.setProperty(c,""):c==="float"?h.cssFloat="":h[c]="":S?h.setProperty(c,g):typeof g!="number"||g===0||AT.has(c)?c==="float"?h.cssFloat=g:h[c]=(""+g).trim():h[c]=g+"px"}function HS(h,c,g){if(c!=null&&typeof c!="object")throw Error(i(62));if(h=h.style,g!=null){for(var S in g)!g.hasOwnProperty(S)||c!=null&&c.hasOwnProperty(S)||(S.indexOf("--")===0?h.setProperty(S,""):S==="float"?h.cssFloat="":h[S]="");for(var M in c)S=c[M],c.hasOwnProperty(M)&&g[M]!==S&&YS(h,M,S)}else for(var D in c)c.hasOwnProperty(D)&&YS(h,D,c[D])}function ig(h){if(h.indexOf("-")===-1)return!1;switch(h){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vT=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),bT=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function hd(h){return bT.test(""+h)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":h}var sg=null;function rg(h){return h=h.target||h.srcElement||window,h.correspondingUseElement&&(h=h.correspondingUseElement),h.nodeType===3?h.parentNode:h}var Th=null,wh=null;function XS(h){var c=ns(h);if(c&&(h=c.stateNode)){var g=h[Qt]||null;t:switch(h=c.stateNode,c.type){case"input":if(tg(h,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name),c=g.name,g.type==="radio"&&c!=null){for(g=h;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll('input[name="'+rn(""+c)+'"][type="radio"]'),c=0;c<g.length;c++){var S=g[c];if(S!==h&&S.form===h.form){var M=S[Qt]||null;if(!M)throw Error(i(90));tg(S,M.value,M.defaultValue,M.defaultValue,M.checked,M.defaultChecked,M.type,M.name)}}for(c=0;c<g.length;c++)S=g[c],S.form===h.form&&IS(S)}break t;case"textarea":OS(h,g.value,g.defaultValue);break t;case"select":c=g.value,c!=null&&Rh(h,!!g.multiple,c,!1)}}}var ng=!1;function WS(h,c,g){if(ng)return h(c,g);ng=!0;try{var S=h(c);return S}finally{if(ng=!1,(Th!==null||wh!==null)&&($d(),Th&&(c=Th,h=wh,wh=Th=null,XS(c),h)))for(c=0;c<h.length;c++)XS(h[c])}}function iu(h,c){var g=h.stateNode;if(g===null)return null;var S=g[Qt]||null;if(S===null)return null;g=S[c];t:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(S=!S.disabled)||(h=h.type,S=!(h==="button"||h==="input"||h==="select"||h==="textarea")),h=!S;break t;default:h=!1}if(h)return null;if(g&&typeof g!="function")throw Error(i(231,c,typeof g));return g}var ha=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ag=!1;if(ha)try{var su={};Object.defineProperty(su,"passive",{get:function(){ag=!0}}),window.addEventListener("test",su,su),window.removeEventListener("test",su,su)}catch{ag=!1}var Oa=null,og=null,ld=null;function $S(){if(ld)return ld;var h,c=og,g=c.length,S,M="value"in Oa?Oa.value:Oa.textContent,D=M.length;for(h=0;h<g&&c[h]===M[h];h++);var G=g-h;for(S=1;S<=G&&c[g-S]===M[D-S];S++);return ld=M.slice(h,1<S?1-S:void 0)}function ud(h){var c=h.keyCode;return"charCode"in h?(h=h.charCode,h===0&&c===13&&(h=13)):h=c,h===10&&(h=13),32<=h||h===13?h:0}function cd(){return!0}function qS(){return!1}function fr(h){function c(g,S,M,D,G){this._reactName=g,this._targetInst=M,this.type=S,this.nativeEvent=D,this.target=G,this.currentTarget=null;for(var $ in h)h.hasOwnProperty($)&&(g=h[$],this[$]=g?g(D):D[$]);return this.isDefaultPrevented=(D.defaultPrevented!=null?D.defaultPrevented:D.returnValue===!1)?cd:qS,this.isPropagationStopped=qS,this}return d(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=cd)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=cd)},persist:function(){},isPersistent:cd}),c}var Do={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(h){return h.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dd=fr(Do),ru=d({},Do,{view:0,detail:0}),MT=fr(ru),hg,lg,nu,fd=d({},ru,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cg,button:0,buttons:0,relatedTarget:function(h){return h.relatedTarget===void 0?h.fromElement===h.srcElement?h.toElement:h.fromElement:h.relatedTarget},movementX:function(h){return"movementX"in h?h.movementX:(h!==nu&&(nu&&h.type==="mousemove"?(hg=h.screenX-nu.screenX,lg=h.screenY-nu.screenY):lg=hg=0,nu=h),hg)},movementY:function(h){return"movementY"in h?h.movementY:lg}}),jS=fr(fd),RT=d({},fd,{dataTransfer:0}),ET=fr(RT),TT=d({},ru,{relatedTarget:0}),ug=fr(TT),wT=d({},Do,{animationName:0,elapsedTime:0,pseudoElement:0}),CT=fr(wT),kT=d({},Do,{clipboardData:function(h){return"clipboardData"in h?h.clipboardData:window.clipboardData}}),DT=fr(kT),FT=d({},Do,{data:0}),JS=fr(FT),VT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_T={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function NT(h){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(h):(h=_T[h])?!!c[h]:!1}function cg(){return NT}var LT=d({},ru,{key:function(h){if(h.key){var c=VT[h.key]||h.key;if(c!=="Unidentified")return c}return h.type==="keypress"?(h=ud(h),h===13?"Enter":String.fromCharCode(h)):h.type==="keydown"||h.type==="keyup"?zT[h.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cg,charCode:function(h){return h.type==="keypress"?ud(h):0},keyCode:function(h){return h.type==="keydown"||h.type==="keyup"?h.keyCode:0},which:function(h){return h.type==="keypress"?ud(h):h.type==="keydown"||h.type==="keyup"?h.keyCode:0}}),BT=fr(LT),PT=d({},fd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ZS=fr(PT),IT=d({},ru,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cg}),UT=fr(IT),OT=d({},Do,{propertyName:0,elapsedTime:0,pseudoElement:0}),GT=fr(OT),YT=d({},fd,{deltaX:function(h){return"deltaX"in h?h.deltaX:"wheelDeltaX"in h?-h.wheelDeltaX:0},deltaY:function(h){return"deltaY"in h?h.deltaY:"wheelDeltaY"in h?-h.wheelDeltaY:"wheelDelta"in h?-h.wheelDelta:0},deltaZ:0,deltaMode:0}),HT=fr(YT),XT=d({},Do,{newState:0,oldState:0}),WT=fr(XT),$T=[9,13,27,32],dg=ha&&"CompositionEvent"in window,au=null;ha&&"documentMode"in document&&(au=document.documentMode);var qT=ha&&"TextEvent"in window&&!au,QS=ha&&(!dg||au&&8<au&&11>=au),KS=" ",tx=!1;function ex(h,c){switch(h){case"keyup":return $T.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ix(h){return h=h.detail,typeof h=="object"&&"data"in h?h.data:null}var Ch=!1;function jT(h,c){switch(h){case"compositionend":return ix(c);case"keypress":return c.which!==32?null:(tx=!0,KS);case"textInput":return h=c.data,h===KS&&tx?null:h;default:return null}}function JT(h,c){if(Ch)return h==="compositionend"||!dg&&ex(h,c)?(h=$S(),ld=og=Oa=null,Ch=!1,h):null;switch(h){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return QS&&c.locale!=="ko"?null:c.data;default:return null}}var ZT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sx(h){var c=h&&h.nodeName&&h.nodeName.toLowerCase();return c==="input"?!!ZT[h.type]:c==="textarea"}function rx(h,c,g,S){Th?wh?wh.push(S):wh=[S]:Th=S,c=Kd(c,"onChange"),0<c.length&&(g=new dd("onChange","change",null,g,S),h.push({event:g,listeners:c}))}var ou=null,hu=null;function QT(h){P1(h,0)}function gd(h){var c=Yi(h);if(IS(c))return h}function nx(h,c){if(h==="change")return c}var ax=!1;if(ha){var fg;if(ha){var gg="oninput"in document;if(!gg){var ox=document.createElement("div");ox.setAttribute("oninput","return;"),gg=typeof ox.oninput=="function"}fg=gg}else fg=!1;ax=fg&&(!document.documentMode||9<document.documentMode)}function hx(){ou&&(ou.detachEvent("onpropertychange",lx),hu=ou=null)}function lx(h){if(h.propertyName==="value"&&gd(hu)){var c=[];rx(c,hu,h,rg(h)),WS(QT,c)}}function KT(h,c,g){h==="focusin"?(hx(),ou=c,hu=g,ou.attachEvent("onpropertychange",lx)):h==="focusout"&&hx()}function tw(h){if(h==="selectionchange"||h==="keyup"||h==="keydown")return gd(hu)}function ew(h,c){if(h==="click")return gd(c)}function iw(h,c){if(h==="input"||h==="change")return gd(c)}function sw(h,c){return h===c&&(h!==0||1/h===1/c)||h!==h&&c!==c}var Nr=typeof Object.is=="function"?Object.is:sw;function lu(h,c){if(Nr(h,c))return!0;if(typeof h!="object"||h===null||typeof c!="object"||c===null)return!1;var g=Object.keys(h),S=Object.keys(c);if(g.length!==S.length)return!1;for(S=0;S<g.length;S++){var M=g[S];if(!Nt.call(c,M)||!Nr(h[M],c[M]))return!1}return!0}function ux(h){for(;h&&h.firstChild;)h=h.firstChild;return h}function cx(h,c){var g=ux(h);h=0;for(var S;g;){if(g.nodeType===3){if(S=h+g.textContent.length,h<=c&&S>=c)return{node:g,offset:c-h};h=S}t:{for(;g;){if(g.nextSibling){g=g.nextSibling;break t}g=g.parentNode}g=void 0}g=ux(g)}}function dx(h,c){return h&&c?h===c?!0:h&&h.nodeType===3?!1:c&&c.nodeType===3?dx(h,c.parentNode):"contains"in h?h.contains(c):h.compareDocumentPosition?!!(h.compareDocumentPosition(c)&16):!1:!1}function fx(h){h=h!=null&&h.ownerDocument!=null&&h.ownerDocument.defaultView!=null?h.ownerDocument.defaultView:window;for(var c=od(h.document);c instanceof h.HTMLIFrameElement;){try{var g=typeof c.contentWindow.location.href=="string"}catch{g=!1}if(g)h=c.contentWindow;else break;c=od(h.document)}return c}function yg(h){var c=h&&h.nodeName&&h.nodeName.toLowerCase();return c&&(c==="input"&&(h.type==="text"||h.type==="search"||h.type==="tel"||h.type==="url"||h.type==="password")||c==="textarea"||h.contentEditable==="true")}var rw=ha&&"documentMode"in document&&11>=document.documentMode,kh=null,mg=null,uu=null,pg=!1;function gx(h,c,g){var S=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;pg||kh==null||kh!==od(S)||(S=kh,"selectionStart"in S&&yg(S)?S={start:S.selectionStart,end:S.selectionEnd}:(S=(S.ownerDocument&&S.ownerDocument.defaultView||window).getSelection(),S={anchorNode:S.anchorNode,anchorOffset:S.anchorOffset,focusNode:S.focusNode,focusOffset:S.focusOffset}),uu&&lu(uu,S)||(uu=S,S=Kd(mg,"onSelect"),0<S.length&&(c=new dd("onSelect","select",null,c,g),h.push({event:c,listeners:S}),c.target=kh)))}function Fo(h,c){var g={};return g[h.toLowerCase()]=c.toLowerCase(),g["Webkit"+h]="webkit"+c,g["Moz"+h]="moz"+c,g}var Dh={animationend:Fo("Animation","AnimationEnd"),animationiteration:Fo("Animation","AnimationIteration"),animationstart:Fo("Animation","AnimationStart"),transitionrun:Fo("Transition","TransitionRun"),transitionstart:Fo("Transition","TransitionStart"),transitioncancel:Fo("Transition","TransitionCancel"),transitionend:Fo("Transition","TransitionEnd")},Sg={},yx={};ha&&(yx=document.createElement("div").style,"AnimationEvent"in window||(delete Dh.animationend.animation,delete Dh.animationiteration.animation,delete Dh.animationstart.animation),"TransitionEvent"in window||delete Dh.transitionend.transition);function Vo(h){if(Sg[h])return Sg[h];if(!Dh[h])return h;var c=Dh[h],g;for(g in c)if(c.hasOwnProperty(g)&&g in yx)return Sg[h]=c[g];return h}var mx=Vo("animationend"),px=Vo("animationiteration"),Sx=Vo("animationstart"),nw=Vo("transitionrun"),aw=Vo("transitionstart"),ow=Vo("transitioncancel"),xx=Vo("transitionend"),Ax=new Map,xg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");xg.push("scrollEnd");function bn(h,c){Ax.set(h,c),Ni(c,[h])}var vx=new WeakMap;function nn(h,c){if(typeof h=="object"&&h!==null){var g=vx.get(h);return g!==void 0?g:(c={value:h,source:c,stack:BS(c)},vx.set(h,c),c)}return{value:h,source:c,stack:BS(c)}}var an=[],Fh=0,Ag=0;function yd(){for(var h=Fh,c=Ag=Fh=0;c<h;){var g=an[c];an[c++]=null;var S=an[c];an[c++]=null;var M=an[c];an[c++]=null;var D=an[c];if(an[c++]=null,S!==null&&M!==null){var G=S.pending;G===null?M.next=M:(M.next=G.next,G.next=M),S.pending=M}D!==0&&bx(g,M,D)}}function md(h,c,g,S){an[Fh++]=h,an[Fh++]=c,an[Fh++]=g,an[Fh++]=S,Ag|=S,h.lanes|=S,h=h.alternate,h!==null&&(h.lanes|=S)}function vg(h,c,g,S){return md(h,c,g,S),pd(h)}function Vh(h,c){return md(h,null,null,c),pd(h)}function bx(h,c,g){h.lanes|=g;var S=h.alternate;S!==null&&(S.lanes|=g);for(var M=!1,D=h.return;D!==null;)D.childLanes|=g,S=D.alternate,S!==null&&(S.childLanes|=g),D.tag===22&&(h=D.stateNode,h===null||h._visibility&1||(M=!0)),h=D,D=D.return;return h.tag===3?(D=h.stateNode,M&&c!==null&&(M=31-mi(g),h=D.hiddenUpdates,S=h[M],S===null?h[M]=[c]:S.push(c),c.lane=g|536870912),D):null}function pd(h){if(50<Nu)throw Nu=0,wy=null,Error(i(185));for(var c=h.return;c!==null;)h=c,c=h.return;return h.tag===3?h.stateNode:null}var zh={};function hw(h,c,g,S){this.tag=h,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lr(h,c,g,S){return new hw(h,c,g,S)}function bg(h){return h=h.prototype,!(!h||!h.isReactComponent)}function la(h,c){var g=h.alternate;return g===null?(g=Lr(h.tag,c,h.key,h.mode),g.elementType=h.elementType,g.type=h.type,g.stateNode=h.stateNode,g.alternate=h,h.alternate=g):(g.pendingProps=c,g.type=h.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=h.flags&65011712,g.childLanes=h.childLanes,g.lanes=h.lanes,g.child=h.child,g.memoizedProps=h.memoizedProps,g.memoizedState=h.memoizedState,g.updateQueue=h.updateQueue,c=h.dependencies,g.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},g.sibling=h.sibling,g.index=h.index,g.ref=h.ref,g.refCleanup=h.refCleanup,g}function Mx(h,c){h.flags&=65011714;var g=h.alternate;return g===null?(h.childLanes=0,h.lanes=c,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=g.childLanes,h.lanes=g.lanes,h.child=g.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=g.memoizedProps,h.memoizedState=g.memoizedState,h.updateQueue=g.updateQueue,h.type=g.type,c=g.dependencies,h.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),h}function Sd(h,c,g,S,M,D){var G=0;if(S=h,typeof h=="function")bg(h)&&(G=1);else if(typeof h=="string")G=uC(h,g,J.current)?26:h==="html"||h==="head"||h==="body"?27:5;else t:switch(h){case A:return h=Lr(31,g,c,M),h.elementType=A,h.lanes=D,h;case p:return zo(g.children,M,D,c);case x:G=8,M|=24;break;case b:return h=Lr(12,g,c,M|2),h.elementType=b,h.lanes=D,h;case F:return h=Lr(13,g,c,M),h.elementType=F,h.lanes=D,h;case L:return h=Lr(19,g,c,M),h.elementType=L,h.lanes=D,h;default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case v:case E:G=10;break t;case R:G=9;break t;case V:G=11;break t;case z:G=14;break t;case B:G=16,S=null;break t}G=29,g=Error(i(130,h===null?"null":typeof h,"")),S=null}return c=Lr(G,g,c,M),c.elementType=h,c.type=S,c.lanes=D,c}function zo(h,c,g,S){return h=Lr(7,h,S,c),h.lanes=g,h}function Mg(h,c,g){return h=Lr(6,h,null,c),h.lanes=g,h}function Rg(h,c,g){return c=Lr(4,h.children!==null?h.children:[],h.key,c),c.lanes=g,c.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},c}var _h=[],Nh=0,xd=null,Ad=0,on=[],hn=0,_o=null,ua=1,ca="";function No(h,c){_h[Nh++]=Ad,_h[Nh++]=xd,xd=h,Ad=c}function Rx(h,c,g){on[hn++]=ua,on[hn++]=ca,on[hn++]=_o,_o=h;var S=ua;h=ca;var M=32-mi(S)-1;S&=~(1<<M),g+=1;var D=32-mi(c)+M;if(30<D){var G=M-M%5;D=(S&(1<<G)-1).toString(32),S>>=G,M-=G,ua=1<<32-mi(c)+M|g<<M|S,ca=D+h}else ua=1<<D|g<<M|S,ca=h}function Eg(h){h.return!==null&&(No(h,1),Rx(h,1,0))}function Tg(h){for(;h===xd;)xd=_h[--Nh],_h[Nh]=null,Ad=_h[--Nh],_h[Nh]=null;for(;h===_o;)_o=on[--hn],on[hn]=null,ca=on[--hn],on[hn]=null,ua=on[--hn],on[hn]=null}var Qs=null,Hi=null,ti=!1,Lo=null,Ln=!1,wg=Error(i(519));function Bo(h){var c=Error(i(418,""));throw fu(nn(c,h)),wg}function Ex(h){var c=h.stateNode,g=h.type,S=h.memoizedProps;switch(c[It]=h,c[Qt]=S,g){case"dialog":ke("cancel",c),ke("close",c);break;case"iframe":case"object":case"embed":ke("load",c);break;case"video":case"audio":for(g=0;g<Bu.length;g++)ke(Bu[g],c);break;case"source":ke("error",c);break;case"img":case"image":case"link":ke("error",c),ke("load",c);break;case"details":ke("toggle",c);break;case"input":ke("invalid",c),US(c,S.value,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name,!0),ad(c);break;case"select":ke("invalid",c);break;case"textarea":ke("invalid",c),GS(c,S.value,S.defaultValue,S.children),ad(c)}g=S.children,typeof g!="string"&&typeof g!="number"&&typeof g!="bigint"||c.textContent===""+g||S.suppressHydrationWarning===!0||G1(c.textContent,g)?(S.popover!=null&&(ke("beforetoggle",c),ke("toggle",c)),S.onScroll!=null&&ke("scroll",c),S.onScrollEnd!=null&&ke("scrollend",c),S.onClick!=null&&(c.onclick=tf),c=!0):c=!1,c||Bo(h)}function Tx(h){for(Qs=h.return;Qs;)switch(Qs.tag){case 5:case 13:Ln=!1;return;case 27:case 3:Ln=!0;return;default:Qs=Qs.return}}function cu(h){if(h!==Qs)return!1;if(!ti)return Tx(h),ti=!0,!1;var c=h.tag,g;if((g=c!==3&&c!==27)&&((g=c===5)&&(g=h.type,g=!(g!=="form"&&g!=="button")||Yy(h.type,h.memoizedProps)),g=!g),g&&Hi&&Bo(h),Tx(h),c===13){if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(i(317));t:{for(h=h.nextSibling,c=0;h;){if(h.nodeType===8)if(g=h.data,g==="/$"){if(c===0){Hi=Rn(h.nextSibling);break t}c--}else g!=="$"&&g!=="$!"&&g!=="$?"||c++;h=h.nextSibling}Hi=null}}else c===27?(c=Hi,so(h.type)?(h=$y,$y=null,Hi=h):Hi=c):Hi=Qs?Rn(h.stateNode.nextSibling):null;return!0}function du(){Hi=Qs=null,ti=!1}function wx(){var h=Lo;return h!==null&&(mr===null?mr=h:mr.push.apply(mr,h),Lo=null),h}function fu(h){Lo===null?Lo=[h]:Lo.push(h)}var Cg=H(null),Po=null,da=null;function Ga(h,c,g){Q(Cg,c._currentValue),c._currentValue=g}function fa(h){h._currentValue=Cg.current,q(Cg)}function kg(h,c,g){for(;h!==null;){var S=h.alternate;if((h.childLanes&c)!==c?(h.childLanes|=c,S!==null&&(S.childLanes|=c)):S!==null&&(S.childLanes&c)!==c&&(S.childLanes|=c),h===g)break;h=h.return}}function Dg(h,c,g,S){var M=h.child;for(M!==null&&(M.return=h);M!==null;){var D=M.dependencies;if(D!==null){var G=M.child;D=D.firstContext;t:for(;D!==null;){var $=D;D=M;for(var Z=0;Z<c.length;Z++)if($.context===c[Z]){D.lanes|=g,$=D.alternate,$!==null&&($.lanes|=g),kg(D.return,g,h),S||(G=null);break t}D=$.next}}else if(M.tag===18){if(G=M.return,G===null)throw Error(i(341));G.lanes|=g,D=G.alternate,D!==null&&(D.lanes|=g),kg(G,g,h),G=null}else G=M.child;if(G!==null)G.return=M;else for(G=M;G!==null;){if(G===h){G=null;break}if(M=G.sibling,M!==null){M.return=G.return,G=M;break}G=G.return}M=G}}function gu(h,c,g,S){h=null;for(var M=c,D=!1;M!==null;){if(!D){if((M.flags&524288)!==0)D=!0;else if((M.flags&262144)!==0)break}if(M.tag===10){var G=M.alternate;if(G===null)throw Error(i(387));if(G=G.memoizedProps,G!==null){var $=M.type;Nr(M.pendingProps.value,G.value)||(h!==null?h.push($):h=[$])}}else if(M===ut.current){if(G=M.alternate,G===null)throw Error(i(387));G.memoizedState.memoizedState!==M.memoizedState.memoizedState&&(h!==null?h.push(Yu):h=[Yu])}M=M.return}h!==null&&Dg(c,h,g,S),c.flags|=262144}function vd(h){for(h=h.firstContext;h!==null;){if(!Nr(h.context._currentValue,h.memoizedValue))return!0;h=h.next}return!1}function Io(h){Po=h,da=null,h=h.dependencies,h!==null&&(h.firstContext=null)}function Os(h){return Cx(Po,h)}function bd(h,c){return Po===null&&Io(h),Cx(h,c)}function Cx(h,c){var g=c._currentValue;if(c={context:c,memoizedValue:g,next:null},da===null){if(h===null)throw Error(i(308));da=c,h.dependencies={lanes:0,firstContext:c},h.flags|=524288}else da=da.next=c;return g}var lw=typeof AbortController<"u"?AbortController:function(){var h=[],c=this.signal={aborted:!1,addEventListener:function(g,S){h.push(S)}};this.abort=function(){c.aborted=!0,h.forEach(function(g){return g()})}},uw=r.unstable_scheduleCallback,cw=r.unstable_NormalPriority,gs={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Fg(){return{controller:new lw,data:new Map,refCount:0}}function yu(h){h.refCount--,h.refCount===0&&uw(cw,function(){h.controller.abort()})}var mu=null,Vg=0,Lh=0,Bh=null;function dw(h,c){if(mu===null){var g=mu=[];Vg=0,Lh=_y(),Bh={status:"pending",value:void 0,then:function(S){g.push(S)}}}return Vg++,c.then(kx,kx),c}function kx(){if(--Vg===0&&mu!==null){Bh!==null&&(Bh.status="fulfilled");var h=mu;mu=null,Lh=0,Bh=null;for(var c=0;c<h.length;c++)(0,h[c])()}}function fw(h,c){var g=[],S={status:"pending",value:null,reason:null,then:function(M){g.push(M)}};return h.then(function(){S.status="fulfilled",S.value=c;for(var M=0;M<g.length;M++)(0,g[M])(c)},function(M){for(S.status="rejected",S.reason=M,M=0;M<g.length;M++)(0,g[M])(void 0)}),S}var Dx=N.S;N.S=function(h,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&dw(h,c),Dx!==null&&Dx(h,c)};var Uo=H(null);function zg(){var h=Uo.current;return h!==null?h:bi.pooledCache}function Md(h,c){c===null?Q(Uo,Uo.current):Q(Uo,c.pool)}function Fx(){var h=zg();return h===null?null:{parent:gs._currentValue,pool:h}}var pu=Error(i(460)),Vx=Error(i(474)),Rd=Error(i(542)),_g={then:function(){}};function zx(h){return h=h.status,h==="fulfilled"||h==="rejected"}function Ed(){}function _x(h,c,g){switch(g=h[g],g===void 0?h.push(c):g!==c&&(c.then(Ed,Ed),c=g),c.status){case"fulfilled":return c.value;case"rejected":throw h=c.reason,Lx(h),h;default:if(typeof c.status=="string")c.then(Ed,Ed);else{if(h=bi,h!==null&&100<h.shellSuspendCounter)throw Error(i(482));h=c,h.status="pending",h.then(function(S){if(c.status==="pending"){var M=c;M.status="fulfilled",M.value=S}},function(S){if(c.status==="pending"){var M=c;M.status="rejected",M.reason=S}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw h=c.reason,Lx(h),h}throw Su=c,pu}}var Su=null;function Nx(){if(Su===null)throw Error(i(459));var h=Su;return Su=null,h}function Lx(h){if(h===pu||h===Rd)throw Error(i(483))}var Ya=!1;function Ng(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Lg(h,c){h=h.updateQueue,c.updateQueue===h&&(c.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,callbacks:null})}function Ha(h){return{lane:h,tag:0,payload:null,callback:null,next:null}}function Xa(h,c,g){var S=h.updateQueue;if(S===null)return null;if(S=S.shared,(oi&2)!==0){var M=S.pending;return M===null?c.next=c:(c.next=M.next,M.next=c),S.pending=c,c=pd(h),bx(h,null,g),c}return md(h,S,c,g),pd(h)}function xu(h,c,g){if(c=c.updateQueue,c!==null&&(c=c.shared,(g&4194048)!==0)){var S=c.lanes;S&=h.pendingLanes,g|=S,c.lanes=g,si(h,g)}}function Bg(h,c){var g=h.updateQueue,S=h.alternate;if(S!==null&&(S=S.updateQueue,g===S)){var M=null,D=null;if(g=g.firstBaseUpdate,g!==null){do{var G={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};D===null?M=D=G:D=D.next=G,g=g.next}while(g!==null);D===null?M=D=c:D=D.next=c}else M=D=c;g={baseState:S.baseState,firstBaseUpdate:M,lastBaseUpdate:D,shared:S.shared,callbacks:S.callbacks},h.updateQueue=g;return}h=g.lastBaseUpdate,h===null?g.firstBaseUpdate=c:h.next=c,g.lastBaseUpdate=c}var Pg=!1;function Au(){if(Pg){var h=Bh;if(h!==null)throw h}}function vu(h,c,g,S){Pg=!1;var M=h.updateQueue;Ya=!1;var D=M.firstBaseUpdate,G=M.lastBaseUpdate,$=M.shared.pending;if($!==null){M.shared.pending=null;var Z=$,rt=Z.next;Z.next=null,G===null?D=rt:G.next=rt,G=Z;var yt=h.alternate;yt!==null&&(yt=yt.updateQueue,$=yt.lastBaseUpdate,$!==G&&($===null?yt.firstBaseUpdate=rt:$.next=rt,yt.lastBaseUpdate=Z))}if(D!==null){var pt=M.baseState;G=0,yt=rt=Z=null,$=D;do{var at=$.lane&-536870913,lt=at!==$.lane;if(lt?(Le&at)===at:(S&at)===at){at!==0&&at===Lh&&(Pg=!0),yt!==null&&(yt=yt.next={lane:0,tag:$.tag,payload:$.payload,callback:null,next:null});t:{var ee=h,$t=$;at=c;var fi=g;switch($t.tag){case 1:if(ee=$t.payload,typeof ee=="function"){pt=ee.call(fi,pt,at);break t}pt=ee;break t;case 3:ee.flags=ee.flags&-65537|128;case 0:if(ee=$t.payload,at=typeof ee=="function"?ee.call(fi,pt,at):ee,at==null)break t;pt=d({},pt,at);break t;case 2:Ya=!0}}at=$.callback,at!==null&&(h.flags|=64,lt&&(h.flags|=8192),lt=M.callbacks,lt===null?M.callbacks=[at]:lt.push(at))}else lt={lane:at,tag:$.tag,payload:$.payload,callback:$.callback,next:null},yt===null?(rt=yt=lt,Z=pt):yt=yt.next=lt,G|=at;if($=$.next,$===null){if($=M.shared.pending,$===null)break;lt=$,$=lt.next,lt.next=null,M.lastBaseUpdate=lt,M.shared.pending=null}}while(!0);yt===null&&(Z=pt),M.baseState=Z,M.firstBaseUpdate=rt,M.lastBaseUpdate=yt,D===null&&(M.shared.lanes=0),Ka|=G,h.lanes=G,h.memoizedState=pt}}function Bx(h,c){if(typeof h!="function")throw Error(i(191,h));h.call(c)}function Px(h,c){var g=h.callbacks;if(g!==null)for(h.callbacks=null,h=0;h<g.length;h++)Bx(g[h],c)}var Ph=H(null),Td=H(0);function Ix(h,c){h=Aa,Q(Td,h),Q(Ph,c),Aa=h|c.baseLanes}function Ig(){Q(Td,Aa),Q(Ph,Ph.current)}function Ug(){Aa=Td.current,q(Ph),q(Td)}var Wa=0,me=null,ci=null,as=null,wd=!1,Ih=!1,Oo=!1,Cd=0,bu=0,Uh=null,gw=0;function Ki(){throw Error(i(321))}function Og(h,c){if(c===null)return!1;for(var g=0;g<c.length&&g<h.length;g++)if(!Nr(h[g],c[g]))return!1;return!0}function Gg(h,c,g,S,M,D){return Wa=D,me=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,N.H=h===null||h.memoizedState===null?bA:MA,Oo=!1,D=g(S,M),Oo=!1,Ih&&(D=Ox(c,g,S,M)),Ux(h),D}function Ux(h){N.H=_d;var c=ci!==null&&ci.next!==null;if(Wa=0,as=ci=me=null,wd=!1,bu=0,Uh=null,c)throw Error(i(300));h===null||Ms||(h=h.dependencies,h!==null&&vd(h)&&(Ms=!0))}function Ox(h,c,g,S){me=h;var M=0;do{if(Ih&&(Uh=null),bu=0,Ih=!1,25<=M)throw Error(i(301));if(M+=1,as=ci=null,h.updateQueue!=null){var D=h.updateQueue;D.lastEffect=null,D.events=null,D.stores=null,D.memoCache!=null&&(D.memoCache.index=0)}N.H=vw,D=c(g,S)}while(Ih);return D}function yw(){var h=N.H,c=h.useState()[0];return c=typeof c.then=="function"?Mu(c):c,h=h.useState()[0],(ci!==null?ci.memoizedState:null)!==h&&(me.flags|=1024),c}function Yg(){var h=Cd!==0;return Cd=0,h}function Hg(h,c,g){c.updateQueue=h.updateQueue,c.flags&=-2053,h.lanes&=~g}function Xg(h){if(wd){for(h=h.memoizedState;h!==null;){var c=h.queue;c!==null&&(c.pending=null),h=h.next}wd=!1}Wa=0,as=ci=me=null,Ih=!1,bu=Cd=0,Uh=null}function gr(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return as===null?me.memoizedState=as=h:as=as.next=h,as}function os(){if(ci===null){var h=me.alternate;h=h!==null?h.memoizedState:null}else h=ci.next;var c=as===null?me.memoizedState:as.next;if(c!==null)as=c,ci=h;else{if(h===null)throw me.alternate===null?Error(i(467)):Error(i(310));ci=h,h={memoizedState:ci.memoizedState,baseState:ci.baseState,baseQueue:ci.baseQueue,queue:ci.queue,next:null},as===null?me.memoizedState=as=h:as=as.next=h}return as}function Wg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Mu(h){var c=bu;return bu+=1,Uh===null&&(Uh=[]),h=_x(Uh,h,c),c=me,(as===null?c.memoizedState:as.next)===null&&(c=c.alternate,N.H=c===null||c.memoizedState===null?bA:MA),h}function kd(h){if(h!==null&&typeof h=="object"){if(typeof h.then=="function")return Mu(h);if(h.$$typeof===E)return Os(h)}throw Error(i(438,String(h)))}function $g(h){var c=null,g=me.updateQueue;if(g!==null&&(c=g.memoCache),c==null){var S=me.alternate;S!==null&&(S=S.updateQueue,S!==null&&(S=S.memoCache,S!=null&&(c={data:S.data.map(function(M){return M.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),g===null&&(g=Wg(),me.updateQueue=g),g.memoCache=c,g=c.data[c.index],g===void 0)for(g=c.data[c.index]=Array(h),S=0;S<h;S++)g[S]=T;return c.index++,g}function ga(h,c){return typeof c=="function"?c(h):c}function Dd(h){var c=os();return qg(c,ci,h)}function qg(h,c,g){var S=h.queue;if(S===null)throw Error(i(311));S.lastRenderedReducer=g;var M=h.baseQueue,D=S.pending;if(D!==null){if(M!==null){var G=M.next;M.next=D.next,D.next=G}c.baseQueue=M=D,S.pending=null}if(D=h.baseState,M===null)h.memoizedState=D;else{c=M.next;var $=G=null,Z=null,rt=c,yt=!1;do{var pt=rt.lane&-536870913;if(pt!==rt.lane?(Le&pt)===pt:(Wa&pt)===pt){var at=rt.revertLane;if(at===0)Z!==null&&(Z=Z.next={lane:0,revertLane:0,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null}),pt===Lh&&(yt=!0);else if((Wa&at)===at){rt=rt.next,at===Lh&&(yt=!0);continue}else pt={lane:0,revertLane:rt.revertLane,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null},Z===null?($=Z=pt,G=D):Z=Z.next=pt,me.lanes|=at,Ka|=at;pt=rt.action,Oo&&g(D,pt),D=rt.hasEagerState?rt.eagerState:g(D,pt)}else at={lane:pt,revertLane:rt.revertLane,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null},Z===null?($=Z=at,G=D):Z=Z.next=at,me.lanes|=pt,Ka|=pt;rt=rt.next}while(rt!==null&&rt!==c);if(Z===null?G=D:Z.next=$,!Nr(D,h.memoizedState)&&(Ms=!0,yt&&(g=Bh,g!==null)))throw g;h.memoizedState=D,h.baseState=G,h.baseQueue=Z,S.lastRenderedState=D}return M===null&&(S.lanes=0),[h.memoizedState,S.dispatch]}function jg(h){var c=os(),g=c.queue;if(g===null)throw Error(i(311));g.lastRenderedReducer=h;var S=g.dispatch,M=g.pending,D=c.memoizedState;if(M!==null){g.pending=null;var G=M=M.next;do D=h(D,G.action),G=G.next;while(G!==M);Nr(D,c.memoizedState)||(Ms=!0),c.memoizedState=D,c.baseQueue===null&&(c.baseState=D),g.lastRenderedState=D}return[D,S]}function Gx(h,c,g){var S=me,M=os(),D=ti;if(D){if(g===void 0)throw Error(i(407));g=g()}else g=c();var G=!Nr((ci||M).memoizedState,g);G&&(M.memoizedState=g,Ms=!0),M=M.queue;var $=Xx.bind(null,S,M,h);if(Ru(2048,8,$,[h]),M.getSnapshot!==c||G||as!==null&&as.memoizedState.tag&1){if(S.flags|=2048,Oh(9,Fd(),Hx.bind(null,S,M,g,c),null),bi===null)throw Error(i(349));D||(Wa&124)!==0||Yx(S,c,g)}return g}function Yx(h,c,g){h.flags|=16384,h={getSnapshot:c,value:g},c=me.updateQueue,c===null?(c=Wg(),me.updateQueue=c,c.stores=[h]):(g=c.stores,g===null?c.stores=[h]:g.push(h))}function Hx(h,c,g,S){c.value=g,c.getSnapshot=S,Wx(c)&&$x(h)}function Xx(h,c,g){return g(function(){Wx(c)&&$x(h)})}function Wx(h){var c=h.getSnapshot;h=h.value;try{var g=c();return!Nr(h,g)}catch{return!0}}function $x(h){var c=Vh(h,2);c!==null&&Or(c,h,2)}function Jg(h){var c=gr();if(typeof h=="function"){var g=h;if(h=g(),Oo){Pe(!0);try{g()}finally{Pe(!1)}}}return c.memoizedState=c.baseState=h,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:h},c}function qx(h,c,g,S){return h.baseState=g,qg(h,ci,typeof S=="function"?S:ga)}function mw(h,c,g,S,M){if(zd(h))throw Error(i(485));if(h=c.action,h!==null){var D={payload:M,action:h,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(G){D.listeners.push(G)}};N.T!==null?g(!0):D.isTransition=!1,S(D),g=c.pending,g===null?(D.next=c.pending=D,jx(c,D)):(D.next=g.next,c.pending=g.next=D)}}function jx(h,c){var g=c.action,S=c.payload,M=h.state;if(c.isTransition){var D=N.T,G={};N.T=G;try{var $=g(M,S),Z=N.S;Z!==null&&Z(G,$),Jx(h,c,$)}catch(rt){Zg(h,c,rt)}finally{N.T=D}}else try{D=g(M,S),Jx(h,c,D)}catch(rt){Zg(h,c,rt)}}function Jx(h,c,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(S){Zx(h,c,S)},function(S){return Zg(h,c,S)}):Zx(h,c,g)}function Zx(h,c,g){c.status="fulfilled",c.value=g,Qx(c),h.state=g,c=h.pending,c!==null&&(g=c.next,g===c?h.pending=null:(g=g.next,c.next=g,jx(h,g)))}function Zg(h,c,g){var S=h.pending;if(h.pending=null,S!==null){S=S.next;do c.status="rejected",c.reason=g,Qx(c),c=c.next;while(c!==S)}h.action=null}function Qx(h){h=h.listeners;for(var c=0;c<h.length;c++)(0,h[c])()}function Kx(h,c){return c}function tA(h,c){if(ti){var g=bi.formState;if(g!==null){t:{var S=me;if(ti){if(Hi){e:{for(var M=Hi,D=Ln;M.nodeType!==8;){if(!D){M=null;break e}if(M=Rn(M.nextSibling),M===null){M=null;break e}}D=M.data,M=D==="F!"||D==="F"?M:null}if(M){Hi=Rn(M.nextSibling),S=M.data==="F!";break t}}Bo(S)}S=!1}S&&(c=g[0])}}return g=gr(),g.memoizedState=g.baseState=c,S={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kx,lastRenderedState:c},g.queue=S,g=xA.bind(null,me,S),S.dispatch=g,S=Jg(!1),D=iy.bind(null,me,!1,S.queue),S=gr(),M={state:c,dispatch:null,action:h,pending:null},S.queue=M,g=mw.bind(null,me,M,D,g),M.dispatch=g,S.memoizedState=h,[c,g,!1]}function eA(h){var c=os();return iA(c,ci,h)}function iA(h,c,g){if(c=qg(h,c,Kx)[0],h=Dd(ga)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var S=Mu(c)}catch(G){throw G===pu?Rd:G}else S=c;c=os();var M=c.queue,D=M.dispatch;return g!==c.memoizedState&&(me.flags|=2048,Oh(9,Fd(),pw.bind(null,M,g),null)),[S,D,h]}function pw(h,c){h.action=c}function sA(h){var c=os(),g=ci;if(g!==null)return iA(c,g,h);os(),c=c.memoizedState,g=os();var S=g.queue.dispatch;return g.memoizedState=h,[c,S,!1]}function Oh(h,c,g,S){return h={tag:h,create:g,deps:S,inst:c,next:null},c=me.updateQueue,c===null&&(c=Wg(),me.updateQueue=c),g=c.lastEffect,g===null?c.lastEffect=h.next=h:(S=g.next,g.next=h,h.next=S,c.lastEffect=h),h}function Fd(){return{destroy:void 0,resource:void 0}}function rA(){return os().memoizedState}function Vd(h,c,g,S){var M=gr();S=S===void 0?null:S,me.flags|=h,M.memoizedState=Oh(1|c,Fd(),g,S)}function Ru(h,c,g,S){var M=os();S=S===void 0?null:S;var D=M.memoizedState.inst;ci!==null&&S!==null&&Og(S,ci.memoizedState.deps)?M.memoizedState=Oh(c,D,g,S):(me.flags|=h,M.memoizedState=Oh(1|c,D,g,S))}function nA(h,c){Vd(8390656,8,h,c)}function aA(h,c){Ru(2048,8,h,c)}function oA(h,c){return Ru(4,2,h,c)}function hA(h,c){return Ru(4,4,h,c)}function lA(h,c){if(typeof c=="function"){h=h();var g=c(h);return function(){typeof g=="function"?g():c(null)}}if(c!=null)return h=h(),c.current=h,function(){c.current=null}}function uA(h,c,g){g=g!=null?g.concat([h]):null,Ru(4,4,lA.bind(null,c,h),g)}function Qg(){}function cA(h,c){var g=os();c=c===void 0?null:c;var S=g.memoizedState;return c!==null&&Og(c,S[1])?S[0]:(g.memoizedState=[h,c],h)}function dA(h,c){var g=os();c=c===void 0?null:c;var S=g.memoizedState;if(c!==null&&Og(c,S[1]))return S[0];if(S=h(),Oo){Pe(!0);try{h()}finally{Pe(!1)}}return g.memoizedState=[S,c],S}function Kg(h,c,g){return g===void 0||(Wa&1073741824)!==0?h.memoizedState=c:(h.memoizedState=g,h=y1(),me.lanes|=h,Ka|=h,g)}function fA(h,c,g,S){return Nr(g,c)?g:Ph.current!==null?(h=Kg(h,g,S),Nr(h,c)||(Ms=!0),h):(Wa&42)===0?(Ms=!0,h.memoizedState=g):(h=y1(),me.lanes|=h,Ka|=h,c)}function gA(h,c,g,S,M){var D=U.p;U.p=D!==0&&8>D?D:8;var G=N.T,$={};N.T=$,iy(h,!1,c,g);try{var Z=M(),rt=N.S;if(rt!==null&&rt($,Z),Z!==null&&typeof Z=="object"&&typeof Z.then=="function"){var yt=fw(Z,S);Eu(h,c,yt,Ur(h))}else Eu(h,c,S,Ur(h))}catch(pt){Eu(h,c,{then:function(){},status:"rejected",reason:pt},Ur())}finally{U.p=D,N.T=G}}function Sw(){}function ty(h,c,g,S){if(h.tag!==5)throw Error(i(476));var M=yA(h).queue;gA(h,M,c,O,g===null?Sw:function(){return mA(h),g(S)})}function yA(h){var c=h.memoizedState;if(c!==null)return c;c={memoizedState:O,baseState:O,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:O},next:null};var g={};return c.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:g},next:null},h.memoizedState=c,h=h.alternate,h!==null&&(h.memoizedState=c),c}function mA(h){var c=yA(h).next.queue;Eu(h,c,{},Ur())}function ey(){return Os(Yu)}function pA(){return os().memoizedState}function SA(){return os().memoizedState}function xw(h){for(var c=h.return;c!==null;){switch(c.tag){case 24:case 3:var g=Ur();h=Ha(g);var S=Xa(c,h,g);S!==null&&(Or(S,c,g),xu(S,c,g)),c={cache:Fg()},h.payload=c;return}c=c.return}}function Aw(h,c,g){var S=Ur();g={lane:S,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null},zd(h)?AA(c,g):(g=vg(h,c,g,S),g!==null&&(Or(g,h,S),vA(g,c,S)))}function xA(h,c,g){var S=Ur();Eu(h,c,g,S)}function Eu(h,c,g,S){var M={lane:S,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null};if(zd(h))AA(c,M);else{var D=h.alternate;if(h.lanes===0&&(D===null||D.lanes===0)&&(D=c.lastRenderedReducer,D!==null))try{var G=c.lastRenderedState,$=D(G,g);if(M.hasEagerState=!0,M.eagerState=$,Nr($,G))return md(h,c,M,0),bi===null&&yd(),!1}catch{}finally{}if(g=vg(h,c,M,S),g!==null)return Or(g,h,S),vA(g,c,S),!0}return!1}function iy(h,c,g,S){if(S={lane:2,revertLane:_y(),action:S,hasEagerState:!1,eagerState:null,next:null},zd(h)){if(c)throw Error(i(479))}else c=vg(h,g,S,2),c!==null&&Or(c,h,2)}function zd(h){var c=h.alternate;return h===me||c!==null&&c===me}function AA(h,c){Ih=wd=!0;var g=h.pending;g===null?c.next=c:(c.next=g.next,g.next=c),h.pending=c}function vA(h,c,g){if((g&4194048)!==0){var S=c.lanes;S&=h.pendingLanes,g|=S,c.lanes=g,si(h,g)}}var _d={readContext:Os,use:kd,useCallback:Ki,useContext:Ki,useEffect:Ki,useImperativeHandle:Ki,useLayoutEffect:Ki,useInsertionEffect:Ki,useMemo:Ki,useReducer:Ki,useRef:Ki,useState:Ki,useDebugValue:Ki,useDeferredValue:Ki,useTransition:Ki,useSyncExternalStore:Ki,useId:Ki,useHostTransitionStatus:Ki,useFormState:Ki,useActionState:Ki,useOptimistic:Ki,useMemoCache:Ki,useCacheRefresh:Ki},bA={readContext:Os,use:kd,useCallback:function(h,c){return gr().memoizedState=[h,c===void 0?null:c],h},useContext:Os,useEffect:nA,useImperativeHandle:function(h,c,g){g=g!=null?g.concat([h]):null,Vd(4194308,4,lA.bind(null,c,h),g)},useLayoutEffect:function(h,c){return Vd(4194308,4,h,c)},useInsertionEffect:function(h,c){Vd(4,2,h,c)},useMemo:function(h,c){var g=gr();c=c===void 0?null:c;var S=h();if(Oo){Pe(!0);try{h()}finally{Pe(!1)}}return g.memoizedState=[S,c],S},useReducer:function(h,c,g){var S=gr();if(g!==void 0){var M=g(c);if(Oo){Pe(!0);try{g(c)}finally{Pe(!1)}}}else M=c;return S.memoizedState=S.baseState=M,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:M},S.queue=h,h=h.dispatch=Aw.bind(null,me,h),[S.memoizedState,h]},useRef:function(h){var c=gr();return h={current:h},c.memoizedState=h},useState:function(h){h=Jg(h);var c=h.queue,g=xA.bind(null,me,c);return c.dispatch=g,[h.memoizedState,g]},useDebugValue:Qg,useDeferredValue:function(h,c){var g=gr();return Kg(g,h,c)},useTransition:function(){var h=Jg(!1);return h=gA.bind(null,me,h.queue,!0,!1),gr().memoizedState=h,[!1,h]},useSyncExternalStore:function(h,c,g){var S=me,M=gr();if(ti){if(g===void 0)throw Error(i(407));g=g()}else{if(g=c(),bi===null)throw Error(i(349));(Le&124)!==0||Yx(S,c,g)}M.memoizedState=g;var D={value:g,getSnapshot:c};return M.queue=D,nA(Xx.bind(null,S,D,h),[h]),S.flags|=2048,Oh(9,Fd(),Hx.bind(null,S,D,g,c),null),g},useId:function(){var h=gr(),c=bi.identifierPrefix;if(ti){var g=ca,S=ua;g=(S&~(1<<32-mi(S)-1)).toString(32)+g,c=""+c+"R"+g,g=Cd++,0<g&&(c+="H"+g.toString(32)),c+=""}else g=gw++,c=""+c+"r"+g.toString(32)+"";return h.memoizedState=c},useHostTransitionStatus:ey,useFormState:tA,useActionState:tA,useOptimistic:function(h){var c=gr();c.memoizedState=c.baseState=h;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=g,c=iy.bind(null,me,!0,g),g.dispatch=c,[h,c]},useMemoCache:$g,useCacheRefresh:function(){return gr().memoizedState=xw.bind(null,me)}},MA={readContext:Os,use:kd,useCallback:cA,useContext:Os,useEffect:aA,useImperativeHandle:uA,useInsertionEffect:oA,useLayoutEffect:hA,useMemo:dA,useReducer:Dd,useRef:rA,useState:function(){return Dd(ga)},useDebugValue:Qg,useDeferredValue:function(h,c){var g=os();return fA(g,ci.memoizedState,h,c)},useTransition:function(){var h=Dd(ga)[0],c=os().memoizedState;return[typeof h=="boolean"?h:Mu(h),c]},useSyncExternalStore:Gx,useId:pA,useHostTransitionStatus:ey,useFormState:eA,useActionState:eA,useOptimistic:function(h,c){var g=os();return qx(g,ci,h,c)},useMemoCache:$g,useCacheRefresh:SA},vw={readContext:Os,use:kd,useCallback:cA,useContext:Os,useEffect:aA,useImperativeHandle:uA,useInsertionEffect:oA,useLayoutEffect:hA,useMemo:dA,useReducer:jg,useRef:rA,useState:function(){return jg(ga)},useDebugValue:Qg,useDeferredValue:function(h,c){var g=os();return ci===null?Kg(g,h,c):fA(g,ci.memoizedState,h,c)},useTransition:function(){var h=jg(ga)[0],c=os().memoizedState;return[typeof h=="boolean"?h:Mu(h),c]},useSyncExternalStore:Gx,useId:pA,useHostTransitionStatus:ey,useFormState:sA,useActionState:sA,useOptimistic:function(h,c){var g=os();return ci!==null?qx(g,ci,h,c):(g.baseState=h,[h,g.queue.dispatch])},useMemoCache:$g,useCacheRefresh:SA},Gh=null,Tu=0;function Nd(h){var c=Tu;return Tu+=1,Gh===null&&(Gh=[]),_x(Gh,h,c)}function wu(h,c){c=c.props.ref,h.ref=c!==void 0?c:null}function Ld(h,c){throw c.$$typeof===f?Error(i(525)):(h=Object.prototype.toString.call(c),Error(i(31,h==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":h)))}function RA(h){var c=h._init;return c(h._payload)}function EA(h){function c(tt,K){if(h){var st=tt.deletions;st===null?(tt.deletions=[K],tt.flags|=16):st.push(K)}}function g(tt,K){if(!h)return null;for(;K!==null;)c(tt,K),K=K.sibling;return null}function S(tt){for(var K=new Map;tt!==null;)tt.key!==null?K.set(tt.key,tt):K.set(tt.index,tt),tt=tt.sibling;return K}function M(tt,K){return tt=la(tt,K),tt.index=0,tt.sibling=null,tt}function D(tt,K,st){return tt.index=st,h?(st=tt.alternate,st!==null?(st=st.index,st<K?(tt.flags|=67108866,K):st):(tt.flags|=67108866,K)):(tt.flags|=1048576,K)}function G(tt){return h&&tt.alternate===null&&(tt.flags|=67108866),tt}function $(tt,K,st,mt){return K===null||K.tag!==6?(K=Mg(st,tt.mode,mt),K.return=tt,K):(K=M(K,st),K.return=tt,K)}function Z(tt,K,st,mt){var Lt=st.type;return Lt===p?yt(tt,K,st.props.children,mt,st.key):K!==null&&(K.elementType===Lt||typeof Lt=="object"&&Lt!==null&&Lt.$$typeof===B&&RA(Lt)===K.type)?(K=M(K,st.props),wu(K,st),K.return=tt,K):(K=Sd(st.type,st.key,st.props,null,tt.mode,mt),wu(K,st),K.return=tt,K)}function rt(tt,K,st,mt){return K===null||K.tag!==4||K.stateNode.containerInfo!==st.containerInfo||K.stateNode.implementation!==st.implementation?(K=Rg(st,tt.mode,mt),K.return=tt,K):(K=M(K,st.children||[]),K.return=tt,K)}function yt(tt,K,st,mt,Lt){return K===null||K.tag!==7?(K=zo(st,tt.mode,mt,Lt),K.return=tt,K):(K=M(K,st),K.return=tt,K)}function pt(tt,K,st){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return K=Mg(""+K,tt.mode,st),K.return=tt,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case y:return st=Sd(K.type,K.key,K.props,null,tt.mode,st),wu(st,K),st.return=tt,st;case m:return K=Rg(K,tt.mode,st),K.return=tt,K;case B:var mt=K._init;return K=mt(K._payload),pt(tt,K,st)}if(X(K)||C(K))return K=zo(K,tt.mode,st,null),K.return=tt,K;if(typeof K.then=="function")return pt(tt,Nd(K),st);if(K.$$typeof===E)return pt(tt,bd(tt,K),st);Ld(tt,K)}return null}function at(tt,K,st,mt){var Lt=K!==null?K.key:null;if(typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint")return Lt!==null?null:$(tt,K,""+st,mt);if(typeof st=="object"&&st!==null){switch(st.$$typeof){case y:return st.key===Lt?Z(tt,K,st,mt):null;case m:return st.key===Lt?rt(tt,K,st,mt):null;case B:return Lt=st._init,st=Lt(st._payload),at(tt,K,st,mt)}if(X(st)||C(st))return Lt!==null?null:yt(tt,K,st,mt,null);if(typeof st.then=="function")return at(tt,K,Nd(st),mt);if(st.$$typeof===E)return at(tt,K,bd(tt,st),mt);Ld(tt,st)}return null}function lt(tt,K,st,mt,Lt){if(typeof mt=="string"&&mt!==""||typeof mt=="number"||typeof mt=="bigint")return tt=tt.get(st)||null,$(K,tt,""+mt,Lt);if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case y:return tt=tt.get(mt.key===null?st:mt.key)||null,Z(K,tt,mt,Lt);case m:return tt=tt.get(mt.key===null?st:mt.key)||null,rt(K,tt,mt,Lt);case B:var be=mt._init;return mt=be(mt._payload),lt(tt,K,st,mt,Lt)}if(X(mt)||C(mt))return tt=tt.get(st)||null,yt(K,tt,mt,Lt,null);if(typeof mt.then=="function")return lt(tt,K,st,Nd(mt),Lt);if(mt.$$typeof===E)return lt(tt,K,st,bd(K,mt),Lt);Ld(K,mt)}return null}function ee(tt,K,st,mt){for(var Lt=null,be=null,Yt=K,Jt=K=0,Es=null;Yt!==null&&Jt<st.length;Jt++){Yt.index>Jt?(Es=Yt,Yt=null):Es=Yt.sibling;var We=at(tt,Yt,st[Jt],mt);if(We===null){Yt===null&&(Yt=Es);break}h&&Yt&&We.alternate===null&&c(tt,Yt),K=D(We,K,Jt),be===null?Lt=We:be.sibling=We,be=We,Yt=Es}if(Jt===st.length)return g(tt,Yt),ti&&No(tt,Jt),Lt;if(Yt===null){for(;Jt<st.length;Jt++)Yt=pt(tt,st[Jt],mt),Yt!==null&&(K=D(Yt,K,Jt),be===null?Lt=Yt:be.sibling=Yt,be=Yt);return ti&&No(tt,Jt),Lt}for(Yt=S(Yt);Jt<st.length;Jt++)Es=lt(Yt,tt,Jt,st[Jt],mt),Es!==null&&(h&&Es.alternate!==null&&Yt.delete(Es.key===null?Jt:Es.key),K=D(Es,K,Jt),be===null?Lt=Es:be.sibling=Es,be=Es);return h&&Yt.forEach(function(ho){return c(tt,ho)}),ti&&No(tt,Jt),Lt}function $t(tt,K,st,mt){if(st==null)throw Error(i(151));for(var Lt=null,be=null,Yt=K,Jt=K=0,Es=null,We=st.next();Yt!==null&&!We.done;Jt++,We=st.next()){Yt.index>Jt?(Es=Yt,Yt=null):Es=Yt.sibling;var ho=at(tt,Yt,We.value,mt);if(ho===null){Yt===null&&(Yt=Es);break}h&&Yt&&ho.alternate===null&&c(tt,Yt),K=D(ho,K,Jt),be===null?Lt=ho:be.sibling=ho,be=ho,Yt=Es}if(We.done)return g(tt,Yt),ti&&No(tt,Jt),Lt;if(Yt===null){for(;!We.done;Jt++,We=st.next())We=pt(tt,We.value,mt),We!==null&&(K=D(We,K,Jt),be===null?Lt=We:be.sibling=We,be=We);return ti&&No(tt,Jt),Lt}for(Yt=S(Yt);!We.done;Jt++,We=st.next())We=lt(Yt,tt,Jt,We.value,mt),We!==null&&(h&&We.alternate!==null&&Yt.delete(We.key===null?Jt:We.key),K=D(We,K,Jt),be===null?Lt=We:be.sibling=We,be=We);return h&&Yt.forEach(function(bC){return c(tt,bC)}),ti&&No(tt,Jt),Lt}function fi(tt,K,st,mt){if(typeof st=="object"&&st!==null&&st.type===p&&st.key===null&&(st=st.props.children),typeof st=="object"&&st!==null){switch(st.$$typeof){case y:t:{for(var Lt=st.key;K!==null;){if(K.key===Lt){if(Lt=st.type,Lt===p){if(K.tag===7){g(tt,K.sibling),mt=M(K,st.props.children),mt.return=tt,tt=mt;break t}}else if(K.elementType===Lt||typeof Lt=="object"&&Lt!==null&&Lt.$$typeof===B&&RA(Lt)===K.type){g(tt,K.sibling),mt=M(K,st.props),wu(mt,st),mt.return=tt,tt=mt;break t}g(tt,K);break}else c(tt,K);K=K.sibling}st.type===p?(mt=zo(st.props.children,tt.mode,mt,st.key),mt.return=tt,tt=mt):(mt=Sd(st.type,st.key,st.props,null,tt.mode,mt),wu(mt,st),mt.return=tt,tt=mt)}return G(tt);case m:t:{for(Lt=st.key;K!==null;){if(K.key===Lt)if(K.tag===4&&K.stateNode.containerInfo===st.containerInfo&&K.stateNode.implementation===st.implementation){g(tt,K.sibling),mt=M(K,st.children||[]),mt.return=tt,tt=mt;break t}else{g(tt,K);break}else c(tt,K);K=K.sibling}mt=Rg(st,tt.mode,mt),mt.return=tt,tt=mt}return G(tt);case B:return Lt=st._init,st=Lt(st._payload),fi(tt,K,st,mt)}if(X(st))return ee(tt,K,st,mt);if(C(st)){if(Lt=C(st),typeof Lt!="function")throw Error(i(150));return st=Lt.call(st),$t(tt,K,st,mt)}if(typeof st.then=="function")return fi(tt,K,Nd(st),mt);if(st.$$typeof===E)return fi(tt,K,bd(tt,st),mt);Ld(tt,st)}return typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint"?(st=""+st,K!==null&&K.tag===6?(g(tt,K.sibling),mt=M(K,st),mt.return=tt,tt=mt):(g(tt,K),mt=Mg(st,tt.mode,mt),mt.return=tt,tt=mt),G(tt)):g(tt,K)}return function(tt,K,st,mt){try{Tu=0;var Lt=fi(tt,K,st,mt);return Gh=null,Lt}catch(Yt){if(Yt===pu||Yt===Rd)throw Yt;var be=Lr(29,Yt,null,tt.mode);return be.lanes=mt,be.return=tt,be}finally{}}}var Yh=EA(!0),TA=EA(!1),ln=H(null),Bn=null;function $a(h){var c=h.alternate;Q(ys,ys.current&1),Q(ln,h),Bn===null&&(c===null||Ph.current!==null||c.memoizedState!==null)&&(Bn=h)}function wA(h){if(h.tag===22){if(Q(ys,ys.current),Q(ln,h),Bn===null){var c=h.alternate;c!==null&&c.memoizedState!==null&&(Bn=h)}}else qa()}function qa(){Q(ys,ys.current),Q(ln,ln.current)}function ya(h){q(ln),Bn===h&&(Bn=null),q(ys)}var ys=H(0);function Bd(h){for(var c=h;c!==null;){if(c.tag===13){var g=c.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||Wy(g)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===h)break;for(;c.sibling===null;){if(c.return===null||c.return===h)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function sy(h,c,g,S){c=h.memoizedState,g=g(S,c),g=g==null?c:d({},c,g),h.memoizedState=g,h.lanes===0&&(h.updateQueue.baseState=g)}var ry={enqueueSetState:function(h,c,g){h=h._reactInternals;var S=Ur(),M=Ha(S);M.payload=c,g!=null&&(M.callback=g),c=Xa(h,M,S),c!==null&&(Or(c,h,S),xu(c,h,S))},enqueueReplaceState:function(h,c,g){h=h._reactInternals;var S=Ur(),M=Ha(S);M.tag=1,M.payload=c,g!=null&&(M.callback=g),c=Xa(h,M,S),c!==null&&(Or(c,h,S),xu(c,h,S))},enqueueForceUpdate:function(h,c){h=h._reactInternals;var g=Ur(),S=Ha(g);S.tag=2,c!=null&&(S.callback=c),c=Xa(h,S,g),c!==null&&(Or(c,h,g),xu(c,h,g))}};function CA(h,c,g,S,M,D,G){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(S,D,G):c.prototype&&c.prototype.isPureReactComponent?!lu(g,S)||!lu(M,D):!0}function kA(h,c,g,S){h=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(g,S),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(g,S),c.state!==h&&ry.enqueueReplaceState(c,c.state,null)}function Go(h,c){var g=c;if("ref"in c){g={};for(var S in c)S!=="ref"&&(g[S]=c[S])}if(h=h.defaultProps){g===c&&(g=d({},g));for(var M in h)g[M]===void 0&&(g[M]=h[M])}return g}var Pd=typeof reportError=="function"?reportError:function(h){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof h=="object"&&h!==null&&typeof h.message=="string"?String(h.message):String(h),error:h});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",h);return}console.error(h)};function DA(h){Pd(h)}function FA(h){console.error(h)}function VA(h){Pd(h)}function Id(h,c){try{var g=h.onUncaughtError;g(c.value,{componentStack:c.stack})}catch(S){setTimeout(function(){throw S})}}function zA(h,c,g){try{var S=h.onCaughtError;S(g.value,{componentStack:g.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(M){setTimeout(function(){throw M})}}function ny(h,c,g){return g=Ha(g),g.tag=3,g.payload={element:null},g.callback=function(){Id(h,c)},g}function _A(h){return h=Ha(h),h.tag=3,h}function NA(h,c,g,S){var M=g.type.getDerivedStateFromError;if(typeof M=="function"){var D=S.value;h.payload=function(){return M(D)},h.callback=function(){zA(c,g,S)}}var G=g.stateNode;G!==null&&typeof G.componentDidCatch=="function"&&(h.callback=function(){zA(c,g,S),typeof M!="function"&&(to===null?to=new Set([this]):to.add(this));var $=S.stack;this.componentDidCatch(S.value,{componentStack:$!==null?$:""})})}function bw(h,c,g,S,M){if(g.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){if(c=g.alternate,c!==null&&gu(c,g,M,!0),g=ln.current,g!==null){switch(g.tag){case 13:return Bn===null?ky():g.alternate===null&&Xi===0&&(Xi=3),g.flags&=-257,g.flags|=65536,g.lanes=M,S===_g?g.flags|=16384:(c=g.updateQueue,c===null?g.updateQueue=new Set([S]):c.add(S),Fy(h,S,M)),!1;case 22:return g.flags|=65536,S===_g?g.flags|=16384:(c=g.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([S])},g.updateQueue=c):(g=c.retryQueue,g===null?c.retryQueue=new Set([S]):g.add(S)),Fy(h,S,M)),!1}throw Error(i(435,g.tag))}return Fy(h,S,M),ky(),!1}if(ti)return c=ln.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=M,S!==wg&&(h=Error(i(422),{cause:S}),fu(nn(h,g)))):(S!==wg&&(c=Error(i(423),{cause:S}),fu(nn(c,g))),h=h.current.alternate,h.flags|=65536,M&=-M,h.lanes|=M,S=nn(S,g),M=ny(h.stateNode,S,M),Bg(h,M),Xi!==4&&(Xi=2)),!1;var D=Error(i(520),{cause:S});if(D=nn(D,g),_u===null?_u=[D]:_u.push(D),Xi!==4&&(Xi=2),c===null)return!0;S=nn(S,g),g=c;do{switch(g.tag){case 3:return g.flags|=65536,h=M&-M,g.lanes|=h,h=ny(g.stateNode,S,h),Bg(g,h),!1;case 1:if(c=g.type,D=g.stateNode,(g.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||D!==null&&typeof D.componentDidCatch=="function"&&(to===null||!to.has(D))))return g.flags|=65536,M&=-M,g.lanes|=M,M=_A(M),NA(M,h,g,S),Bg(g,M),!1}g=g.return}while(g!==null);return!1}var LA=Error(i(461)),Ms=!1;function zs(h,c,g,S){c.child=h===null?TA(c,null,g,S):Yh(c,h.child,g,S)}function BA(h,c,g,S,M){g=g.render;var D=c.ref;if("ref"in S){var G={};for(var $ in S)$!=="ref"&&(G[$]=S[$])}else G=S;return Io(c),S=Gg(h,c,g,G,D,M),$=Yg(),h!==null&&!Ms?(Hg(h,c,M),ma(h,c,M)):(ti&&$&&Eg(c),c.flags|=1,zs(h,c,S,M),c.child)}function PA(h,c,g,S,M){if(h===null){var D=g.type;return typeof D=="function"&&!bg(D)&&D.defaultProps===void 0&&g.compare===null?(c.tag=15,c.type=D,IA(h,c,D,S,M)):(h=Sd(g.type,null,S,c,c.mode,M),h.ref=c.ref,h.return=c,c.child=h)}if(D=h.child,!fy(h,M)){var G=D.memoizedProps;if(g=g.compare,g=g!==null?g:lu,g(G,S)&&h.ref===c.ref)return ma(h,c,M)}return c.flags|=1,h=la(D,S),h.ref=c.ref,h.return=c,c.child=h}function IA(h,c,g,S,M){if(h!==null){var D=h.memoizedProps;if(lu(D,S)&&h.ref===c.ref)if(Ms=!1,c.pendingProps=S=D,fy(h,M))(h.flags&131072)!==0&&(Ms=!0);else return c.lanes=h.lanes,ma(h,c,M)}return ay(h,c,g,S,M)}function UA(h,c,g){var S=c.pendingProps,M=S.children,D=h!==null?h.memoizedState:null;if(S.mode==="hidden"){if((c.flags&128)!==0){if(S=D!==null?D.baseLanes|g:g,h!==null){for(M=c.child=h.child,D=0;M!==null;)D=D|M.lanes|M.childLanes,M=M.sibling;c.childLanes=D&~S}else c.childLanes=0,c.child=null;return OA(h,c,S,g)}if((g&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},h!==null&&Md(c,D!==null?D.cachePool:null),D!==null?Ix(c,D):Ig(),wA(c);else return c.lanes=c.childLanes=536870912,OA(h,c,D!==null?D.baseLanes|g:g,g)}else D!==null?(Md(c,D.cachePool),Ix(c,D),qa(),c.memoizedState=null):(h!==null&&Md(c,null),Ig(),qa());return zs(h,c,M,g),c.child}function OA(h,c,g,S){var M=zg();return M=M===null?null:{parent:gs._currentValue,pool:M},c.memoizedState={baseLanes:g,cachePool:M},h!==null&&Md(c,null),Ig(),wA(c),h!==null&&gu(h,c,S,!0),null}function Ud(h,c){var g=c.ref;if(g===null)h!==null&&h.ref!==null&&(c.flags|=4194816);else{if(typeof g!="function"&&typeof g!="object")throw Error(i(284));(h===null||h.ref!==g)&&(c.flags|=4194816)}}function ay(h,c,g,S,M){return Io(c),g=Gg(h,c,g,S,void 0,M),S=Yg(),h!==null&&!Ms?(Hg(h,c,M),ma(h,c,M)):(ti&&S&&Eg(c),c.flags|=1,zs(h,c,g,M),c.child)}function GA(h,c,g,S,M,D){return Io(c),c.updateQueue=null,g=Ox(c,S,g,M),Ux(h),S=Yg(),h!==null&&!Ms?(Hg(h,c,D),ma(h,c,D)):(ti&&S&&Eg(c),c.flags|=1,zs(h,c,g,D),c.child)}function YA(h,c,g,S,M){if(Io(c),c.stateNode===null){var D=zh,G=g.contextType;typeof G=="object"&&G!==null&&(D=Os(G)),D=new g(S,D),c.memoizedState=D.state!==null&&D.state!==void 0?D.state:null,D.updater=ry,c.stateNode=D,D._reactInternals=c,D=c.stateNode,D.props=S,D.state=c.memoizedState,D.refs={},Ng(c),G=g.contextType,D.context=typeof G=="object"&&G!==null?Os(G):zh,D.state=c.memoizedState,G=g.getDerivedStateFromProps,typeof G=="function"&&(sy(c,g,G,S),D.state=c.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof D.getSnapshotBeforeUpdate=="function"||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(G=D.state,typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount(),G!==D.state&&ry.enqueueReplaceState(D,D.state,null),vu(c,S,D,M),Au(),D.state=c.memoizedState),typeof D.componentDidMount=="function"&&(c.flags|=4194308),S=!0}else if(h===null){D=c.stateNode;var $=c.memoizedProps,Z=Go(g,$);D.props=Z;var rt=D.context,yt=g.contextType;G=zh,typeof yt=="object"&&yt!==null&&(G=Os(yt));var pt=g.getDerivedStateFromProps;yt=typeof pt=="function"||typeof D.getSnapshotBeforeUpdate=="function",$=c.pendingProps!==$,yt||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||($||rt!==G)&&kA(c,D,S,G),Ya=!1;var at=c.memoizedState;D.state=at,vu(c,S,D,M),Au(),rt=c.memoizedState,$||at!==rt||Ya?(typeof pt=="function"&&(sy(c,g,pt,S),rt=c.memoizedState),(Z=Ya||CA(c,g,Z,S,at,rt,G))?(yt||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount()),typeof D.componentDidMount=="function"&&(c.flags|=4194308)):(typeof D.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=S,c.memoizedState=rt),D.props=S,D.state=rt,D.context=G,S=Z):(typeof D.componentDidMount=="function"&&(c.flags|=4194308),S=!1)}else{D=c.stateNode,Lg(h,c),G=c.memoizedProps,yt=Go(g,G),D.props=yt,pt=c.pendingProps,at=D.context,rt=g.contextType,Z=zh,typeof rt=="object"&&rt!==null&&(Z=Os(rt)),$=g.getDerivedStateFromProps,(rt=typeof $=="function"||typeof D.getSnapshotBeforeUpdate=="function")||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(G!==pt||at!==Z)&&kA(c,D,S,Z),Ya=!1,at=c.memoizedState,D.state=at,vu(c,S,D,M),Au();var lt=c.memoizedState;G!==pt||at!==lt||Ya||h!==null&&h.dependencies!==null&&vd(h.dependencies)?(typeof $=="function"&&(sy(c,g,$,S),lt=c.memoizedState),(yt=Ya||CA(c,g,yt,S,at,lt,Z)||h!==null&&h.dependencies!==null&&vd(h.dependencies))?(rt||typeof D.UNSAFE_componentWillUpdate!="function"&&typeof D.componentWillUpdate!="function"||(typeof D.componentWillUpdate=="function"&&D.componentWillUpdate(S,lt,Z),typeof D.UNSAFE_componentWillUpdate=="function"&&D.UNSAFE_componentWillUpdate(S,lt,Z)),typeof D.componentDidUpdate=="function"&&(c.flags|=4),typeof D.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof D.componentDidUpdate!="function"||G===h.memoizedProps&&at===h.memoizedState||(c.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||G===h.memoizedProps&&at===h.memoizedState||(c.flags|=1024),c.memoizedProps=S,c.memoizedState=lt),D.props=S,D.state=lt,D.context=Z,S=yt):(typeof D.componentDidUpdate!="function"||G===h.memoizedProps&&at===h.memoizedState||(c.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||G===h.memoizedProps&&at===h.memoizedState||(c.flags|=1024),S=!1)}return D=S,Ud(h,c),S=(c.flags&128)!==0,D||S?(D=c.stateNode,g=S&&typeof g.getDerivedStateFromError!="function"?null:D.render(),c.flags|=1,h!==null&&S?(c.child=Yh(c,h.child,null,M),c.child=Yh(c,null,g,M)):zs(h,c,g,M),c.memoizedState=D.state,h=c.child):h=ma(h,c,M),h}function HA(h,c,g,S){return du(),c.flags|=256,zs(h,c,g,S),c.child}var oy={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function hy(h){return{baseLanes:h,cachePool:Fx()}}function ly(h,c,g){return h=h!==null?h.childLanes&~g:0,c&&(h|=un),h}function XA(h,c,g){var S=c.pendingProps,M=!1,D=(c.flags&128)!==0,G;if((G=D)||(G=h!==null&&h.memoizedState===null?!1:(ys.current&2)!==0),G&&(M=!0,c.flags&=-129),G=(c.flags&32)!==0,c.flags&=-33,h===null){if(ti){if(M?$a(c):qa(),ti){var $=Hi,Z;if(Z=$){t:{for(Z=$,$=Ln;Z.nodeType!==8;){if(!$){$=null;break t}if(Z=Rn(Z.nextSibling),Z===null){$=null;break t}}$=Z}$!==null?(c.memoizedState={dehydrated:$,treeContext:_o!==null?{id:ua,overflow:ca}:null,retryLane:536870912,hydrationErrors:null},Z=Lr(18,null,null,0),Z.stateNode=$,Z.return=c,c.child=Z,Qs=c,Hi=null,Z=!0):Z=!1}Z||Bo(c)}if($=c.memoizedState,$!==null&&($=$.dehydrated,$!==null))return Wy($)?c.lanes=32:c.lanes=536870912,null;ya(c)}return $=S.children,S=S.fallback,M?(qa(),M=c.mode,$=Od({mode:"hidden",children:$},M),S=zo(S,M,g,null),$.return=c,S.return=c,$.sibling=S,c.child=$,M=c.child,M.memoizedState=hy(g),M.childLanes=ly(h,G,g),c.memoizedState=oy,S):($a(c),uy(c,$))}if(Z=h.memoizedState,Z!==null&&($=Z.dehydrated,$!==null)){if(D)c.flags&256?($a(c),c.flags&=-257,c=cy(h,c,g)):c.memoizedState!==null?(qa(),c.child=h.child,c.flags|=128,c=null):(qa(),M=S.fallback,$=c.mode,S=Od({mode:"visible",children:S.children},$),M=zo(M,$,g,null),M.flags|=2,S.return=c,M.return=c,S.sibling=M,c.child=S,Yh(c,h.child,null,g),S=c.child,S.memoizedState=hy(g),S.childLanes=ly(h,G,g),c.memoizedState=oy,c=M);else if($a(c),Wy($)){if(G=$.nextSibling&&$.nextSibling.dataset,G)var rt=G.dgst;G=rt,S=Error(i(419)),S.stack="",S.digest=G,fu({value:S,source:null,stack:null}),c=cy(h,c,g)}else if(Ms||gu(h,c,g,!1),G=(g&h.childLanes)!==0,Ms||G){if(G=bi,G!==null&&(S=g&-g,S=(S&42)!==0?1:we(S),S=(S&(G.suspendedLanes|g))!==0?0:S,S!==0&&S!==Z.retryLane))throw Z.retryLane=S,Vh(h,S),Or(G,h,S),LA;$.data==="$?"||ky(),c=cy(h,c,g)}else $.data==="$?"?(c.flags|=192,c.child=h.child,c=null):(h=Z.treeContext,Hi=Rn($.nextSibling),Qs=c,ti=!0,Lo=null,Ln=!1,h!==null&&(on[hn++]=ua,on[hn++]=ca,on[hn++]=_o,ua=h.id,ca=h.overflow,_o=c),c=uy(c,S.children),c.flags|=4096);return c}return M?(qa(),M=S.fallback,$=c.mode,Z=h.child,rt=Z.sibling,S=la(Z,{mode:"hidden",children:S.children}),S.subtreeFlags=Z.subtreeFlags&65011712,rt!==null?M=la(rt,M):(M=zo(M,$,g,null),M.flags|=2),M.return=c,S.return=c,S.sibling=M,c.child=S,S=M,M=c.child,$=h.child.memoizedState,$===null?$=hy(g):(Z=$.cachePool,Z!==null?(rt=gs._currentValue,Z=Z.parent!==rt?{parent:rt,pool:rt}:Z):Z=Fx(),$={baseLanes:$.baseLanes|g,cachePool:Z}),M.memoizedState=$,M.childLanes=ly(h,G,g),c.memoizedState=oy,S):($a(c),g=h.child,h=g.sibling,g=la(g,{mode:"visible",children:S.children}),g.return=c,g.sibling=null,h!==null&&(G=c.deletions,G===null?(c.deletions=[h],c.flags|=16):G.push(h)),c.child=g,c.memoizedState=null,g)}function uy(h,c){return c=Od({mode:"visible",children:c},h.mode),c.return=h,h.child=c}function Od(h,c){return h=Lr(22,h,null,c),h.lanes=0,h.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},h}function cy(h,c,g){return Yh(c,h.child,null,g),h=uy(c,c.pendingProps.children),h.flags|=2,c.memoizedState=null,h}function WA(h,c,g){h.lanes|=c;var S=h.alternate;S!==null&&(S.lanes|=c),kg(h.return,c,g)}function dy(h,c,g,S,M){var D=h.memoizedState;D===null?h.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:S,tail:g,tailMode:M}:(D.isBackwards=c,D.rendering=null,D.renderingStartTime=0,D.last=S,D.tail=g,D.tailMode=M)}function $A(h,c,g){var S=c.pendingProps,M=S.revealOrder,D=S.tail;if(zs(h,c,S.children,g),S=ys.current,(S&2)!==0)S=S&1|2,c.flags|=128;else{if(h!==null&&(h.flags&128)!==0)t:for(h=c.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&WA(h,g,c);else if(h.tag===19)WA(h,g,c);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break t;for(;h.sibling===null;){if(h.return===null||h.return===c)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}S&=1}switch(Q(ys,S),M){case"forwards":for(g=c.child,M=null;g!==null;)h=g.alternate,h!==null&&Bd(h)===null&&(M=g),g=g.sibling;g=M,g===null?(M=c.child,c.child=null):(M=g.sibling,g.sibling=null),dy(c,!1,M,g,D);break;case"backwards":for(g=null,M=c.child,c.child=null;M!==null;){if(h=M.alternate,h!==null&&Bd(h)===null){c.child=M;break}h=M.sibling,M.sibling=g,g=M,M=h}dy(c,!0,g,null,D);break;case"together":dy(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function ma(h,c,g){if(h!==null&&(c.dependencies=h.dependencies),Ka|=c.lanes,(g&c.childLanes)===0)if(h!==null){if(gu(h,c,g,!1),(g&c.childLanes)===0)return null}else return null;if(h!==null&&c.child!==h.child)throw Error(i(153));if(c.child!==null){for(h=c.child,g=la(h,h.pendingProps),c.child=g,g.return=c;h.sibling!==null;)h=h.sibling,g=g.sibling=la(h,h.pendingProps),g.return=c;g.sibling=null}return c.child}function fy(h,c){return(h.lanes&c)!==0?!0:(h=h.dependencies,!!(h!==null&&vd(h)))}function Mw(h,c,g){switch(c.tag){case 3:dt(c,c.stateNode.containerInfo),Ga(c,gs,h.memoizedState.cache),du();break;case 27:case 5:xt(c);break;case 4:dt(c,c.stateNode.containerInfo);break;case 10:Ga(c,c.type,c.memoizedProps.value);break;case 13:var S=c.memoizedState;if(S!==null)return S.dehydrated!==null?($a(c),c.flags|=128,null):(g&c.child.childLanes)!==0?XA(h,c,g):($a(c),h=ma(h,c,g),h!==null?h.sibling:null);$a(c);break;case 19:var M=(h.flags&128)!==0;if(S=(g&c.childLanes)!==0,S||(gu(h,c,g,!1),S=(g&c.childLanes)!==0),M){if(S)return $A(h,c,g);c.flags|=128}if(M=c.memoizedState,M!==null&&(M.rendering=null,M.tail=null,M.lastEffect=null),Q(ys,ys.current),S)break;return null;case 22:case 23:return c.lanes=0,UA(h,c,g);case 24:Ga(c,gs,h.memoizedState.cache)}return ma(h,c,g)}function qA(h,c,g){if(h!==null)if(h.memoizedProps!==c.pendingProps)Ms=!0;else{if(!fy(h,g)&&(c.flags&128)===0)return Ms=!1,Mw(h,c,g);Ms=(h.flags&131072)!==0}else Ms=!1,ti&&(c.flags&1048576)!==0&&Rx(c,Ad,c.index);switch(c.lanes=0,c.tag){case 16:t:{h=c.pendingProps;var S=c.elementType,M=S._init;if(S=M(S._payload),c.type=S,typeof S=="function")bg(S)?(h=Go(S,h),c.tag=1,c=YA(null,c,S,h,g)):(c.tag=0,c=ay(null,c,S,h,g));else{if(S!=null){if(M=S.$$typeof,M===V){c.tag=11,c=BA(null,c,S,h,g);break t}else if(M===z){c.tag=14,c=PA(null,c,S,h,g);break t}}throw c=_(S)||S,Error(i(306,c,""))}}return c;case 0:return ay(h,c,c.type,c.pendingProps,g);case 1:return S=c.type,M=Go(S,c.pendingProps),YA(h,c,S,M,g);case 3:t:{if(dt(c,c.stateNode.containerInfo),h===null)throw Error(i(387));S=c.pendingProps;var D=c.memoizedState;M=D.element,Lg(h,c),vu(c,S,null,g);var G=c.memoizedState;if(S=G.cache,Ga(c,gs,S),S!==D.cache&&Dg(c,[gs],g,!0),Au(),S=G.element,D.isDehydrated)if(D={element:S,isDehydrated:!1,cache:G.cache},c.updateQueue.baseState=D,c.memoizedState=D,c.flags&256){c=HA(h,c,S,g);break t}else if(S!==M){M=nn(Error(i(424)),c),fu(M),c=HA(h,c,S,g);break t}else{switch(h=c.stateNode.containerInfo,h.nodeType){case 9:h=h.body;break;default:h=h.nodeName==="HTML"?h.ownerDocument.body:h}for(Hi=Rn(h.firstChild),Qs=c,ti=!0,Lo=null,Ln=!0,g=TA(c,null,S,g),c.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling}else{if(du(),S===M){c=ma(h,c,g);break t}zs(h,c,S,g)}c=c.child}return c;case 26:return Ud(h,c),h===null?(g=Q1(c.type,null,c.pendingProps,null))?c.memoizedState=g:ti||(g=c.type,h=c.pendingProps,S=ef(ht.current).createElement(g),S[It]=c,S[Qt]=h,Ns(S,g,h),Xt(S),c.stateNode=S):c.memoizedState=Q1(c.type,h.memoizedProps,c.pendingProps,h.memoizedState),null;case 27:return xt(c),h===null&&ti&&(S=c.stateNode=j1(c.type,c.pendingProps,ht.current),Qs=c,Ln=!0,M=Hi,so(c.type)?($y=M,Hi=Rn(S.firstChild)):Hi=M),zs(h,c,c.pendingProps.children,g),Ud(h,c),h===null&&(c.flags|=4194304),c.child;case 5:return h===null&&ti&&((M=S=Hi)&&(S=Zw(S,c.type,c.pendingProps,Ln),S!==null?(c.stateNode=S,Qs=c,Hi=Rn(S.firstChild),Ln=!1,M=!0):M=!1),M||Bo(c)),xt(c),M=c.type,D=c.pendingProps,G=h!==null?h.memoizedProps:null,S=D.children,Yy(M,D)?S=null:G!==null&&Yy(M,G)&&(c.flags|=32),c.memoizedState!==null&&(M=Gg(h,c,yw,null,null,g),Yu._currentValue=M),Ud(h,c),zs(h,c,S,g),c.child;case 6:return h===null&&ti&&((h=g=Hi)&&(g=Qw(g,c.pendingProps,Ln),g!==null?(c.stateNode=g,Qs=c,Hi=null,h=!0):h=!1),h||Bo(c)),null;case 13:return XA(h,c,g);case 4:return dt(c,c.stateNode.containerInfo),S=c.pendingProps,h===null?c.child=Yh(c,null,S,g):zs(h,c,S,g),c.child;case 11:return BA(h,c,c.type,c.pendingProps,g);case 7:return zs(h,c,c.pendingProps,g),c.child;case 8:return zs(h,c,c.pendingProps.children,g),c.child;case 12:return zs(h,c,c.pendingProps.children,g),c.child;case 10:return S=c.pendingProps,Ga(c,c.type,S.value),zs(h,c,S.children,g),c.child;case 9:return M=c.type._context,S=c.pendingProps.children,Io(c),M=Os(M),S=S(M),c.flags|=1,zs(h,c,S,g),c.child;case 14:return PA(h,c,c.type,c.pendingProps,g);case 15:return IA(h,c,c.type,c.pendingProps,g);case 19:return $A(h,c,g);case 31:return S=c.pendingProps,g=c.mode,S={mode:S.mode,children:S.children},h===null?(g=Od(S,g),g.ref=c.ref,c.child=g,g.return=c,c=g):(g=la(h.child,S),g.ref=c.ref,c.child=g,g.return=c,c=g),c;case 22:return UA(h,c,g);case 24:return Io(c),S=Os(gs),h===null?(M=zg(),M===null&&(M=bi,D=Fg(),M.pooledCache=D,D.refCount++,D!==null&&(M.pooledCacheLanes|=g),M=D),c.memoizedState={parent:S,cache:M},Ng(c),Ga(c,gs,M)):((h.lanes&g)!==0&&(Lg(h,c),vu(c,null,null,g),Au()),M=h.memoizedState,D=c.memoizedState,M.parent!==S?(M={parent:S,cache:S},c.memoizedState=M,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=M),Ga(c,gs,S)):(S=D.cache,Ga(c,gs,S),S!==M.cache&&Dg(c,[gs],g,!0))),zs(h,c,c.pendingProps.children,g),c.child;case 29:throw c.pendingProps}throw Error(i(156,c.tag))}function pa(h){h.flags|=4}function jA(h,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)h.flags&=-16777217;else if(h.flags|=16777216,!sv(c)){if(c=ln.current,c!==null&&((Le&4194048)===Le?Bn!==null:(Le&62914560)!==Le&&(Le&536870912)===0||c!==Bn))throw Su=_g,Vx;h.flags|=8192}}function Gd(h,c){c!==null&&(h.flags|=4),h.flags&16384&&(c=h.tag!==22?Gt():536870912,h.lanes|=c,$h|=c)}function Cu(h,c){if(!ti)switch(h.tailMode){case"hidden":c=h.tail;for(var g=null;c!==null;)c.alternate!==null&&(g=c),c=c.sibling;g===null?h.tail=null:g.sibling=null;break;case"collapsed":g=h.tail;for(var S=null;g!==null;)g.alternate!==null&&(S=g),g=g.sibling;S===null?c||h.tail===null?h.tail=null:h.tail.sibling=null:S.sibling=null}}function Bi(h){var c=h.alternate!==null&&h.alternate.child===h.child,g=0,S=0;if(c)for(var M=h.child;M!==null;)g|=M.lanes|M.childLanes,S|=M.subtreeFlags&65011712,S|=M.flags&65011712,M.return=h,M=M.sibling;else for(M=h.child;M!==null;)g|=M.lanes|M.childLanes,S|=M.subtreeFlags,S|=M.flags,M.return=h,M=M.sibling;return h.subtreeFlags|=S,h.childLanes=g,c}function Rw(h,c,g){var S=c.pendingProps;switch(Tg(c),c.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bi(c),null;case 1:return Bi(c),null;case 3:return g=c.stateNode,S=null,h!==null&&(S=h.memoizedState.cache),c.memoizedState.cache!==S&&(c.flags|=2048),fa(gs),Tt(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(h===null||h.child===null)&&(cu(c)?pa(c):h===null||h.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,wx())),Bi(c),null;case 26:return g=c.memoizedState,h===null?(pa(c),g!==null?(Bi(c),jA(c,g)):(Bi(c),c.flags&=-16777217)):g?g!==h.memoizedState?(pa(c),Bi(c),jA(c,g)):(Bi(c),c.flags&=-16777217):(h.memoizedProps!==S&&pa(c),Bi(c),c.flags&=-16777217),null;case 27:zt(c),g=ht.current;var M=c.type;if(h!==null&&c.stateNode!=null)h.memoizedProps!==S&&pa(c);else{if(!S){if(c.stateNode===null)throw Error(i(166));return Bi(c),null}h=J.current,cu(c)?Ex(c):(h=j1(M,S,g),c.stateNode=h,pa(c))}return Bi(c),null;case 5:if(zt(c),g=c.type,h!==null&&c.stateNode!=null)h.memoizedProps!==S&&pa(c);else{if(!S){if(c.stateNode===null)throw Error(i(166));return Bi(c),null}if(h=J.current,cu(c))Ex(c);else{switch(M=ef(ht.current),h){case 1:h=M.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:h=M.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":h=M.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":h=M.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":h=M.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild);break;case"select":h=typeof S.is=="string"?M.createElement("select",{is:S.is}):M.createElement("select"),S.multiple?h.multiple=!0:S.size&&(h.size=S.size);break;default:h=typeof S.is=="string"?M.createElement(g,{is:S.is}):M.createElement(g)}}h[It]=c,h[Qt]=S;t:for(M=c.child;M!==null;){if(M.tag===5||M.tag===6)h.appendChild(M.stateNode);else if(M.tag!==4&&M.tag!==27&&M.child!==null){M.child.return=M,M=M.child;continue}if(M===c)break t;for(;M.sibling===null;){if(M.return===null||M.return===c)break t;M=M.return}M.sibling.return=M.return,M=M.sibling}c.stateNode=h;t:switch(Ns(h,g,S),g){case"button":case"input":case"select":case"textarea":h=!!S.autoFocus;break t;case"img":h=!0;break t;default:h=!1}h&&pa(c)}}return Bi(c),c.flags&=-16777217,null;case 6:if(h&&c.stateNode!=null)h.memoizedProps!==S&&pa(c);else{if(typeof S!="string"&&c.stateNode===null)throw Error(i(166));if(h=ht.current,cu(c)){if(h=c.stateNode,g=c.memoizedProps,S=null,M=Qs,M!==null)switch(M.tag){case 27:case 5:S=M.memoizedProps}h[It]=c,h=!!(h.nodeValue===g||S!==null&&S.suppressHydrationWarning===!0||G1(h.nodeValue,g)),h||Bo(c)}else h=ef(h).createTextNode(S),h[It]=c,c.stateNode=h}return Bi(c),null;case 13:if(S=c.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(M=cu(c),S!==null&&S.dehydrated!==null){if(h===null){if(!M)throw Error(i(318));if(M=c.memoizedState,M=M!==null?M.dehydrated:null,!M)throw Error(i(317));M[It]=c}else du(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Bi(c),M=!1}else M=wx(),h!==null&&h.memoizedState!==null&&(h.memoizedState.hydrationErrors=M),M=!0;if(!M)return c.flags&256?(ya(c),c):(ya(c),null)}if(ya(c),(c.flags&128)!==0)return c.lanes=g,c;if(g=S!==null,h=h!==null&&h.memoizedState!==null,g){S=c.child,M=null,S.alternate!==null&&S.alternate.memoizedState!==null&&S.alternate.memoizedState.cachePool!==null&&(M=S.alternate.memoizedState.cachePool.pool);var D=null;S.memoizedState!==null&&S.memoizedState.cachePool!==null&&(D=S.memoizedState.cachePool.pool),D!==M&&(S.flags|=2048)}return g!==h&&g&&(c.child.flags|=8192),Gd(c,c.updateQueue),Bi(c),null;case 4:return Tt(),h===null&&Py(c.stateNode.containerInfo),Bi(c),null;case 10:return fa(c.type),Bi(c),null;case 19:if(q(ys),M=c.memoizedState,M===null)return Bi(c),null;if(S=(c.flags&128)!==0,D=M.rendering,D===null)if(S)Cu(M,!1);else{if(Xi!==0||h!==null&&(h.flags&128)!==0)for(h=c.child;h!==null;){if(D=Bd(h),D!==null){for(c.flags|=128,Cu(M,!1),h=D.updateQueue,c.updateQueue=h,Gd(c,h),c.subtreeFlags=0,h=g,g=c.child;g!==null;)Mx(g,h),g=g.sibling;return Q(ys,ys.current&1|2),c.child}h=h.sibling}M.tail!==null&&Oi()>Xd&&(c.flags|=128,S=!0,Cu(M,!1),c.lanes=4194304)}else{if(!S)if(h=Bd(D),h!==null){if(c.flags|=128,S=!0,h=h.updateQueue,c.updateQueue=h,Gd(c,h),Cu(M,!0),M.tail===null&&M.tailMode==="hidden"&&!D.alternate&&!ti)return Bi(c),null}else 2*Oi()-M.renderingStartTime>Xd&&g!==536870912&&(c.flags|=128,S=!0,Cu(M,!1),c.lanes=4194304);M.isBackwards?(D.sibling=c.child,c.child=D):(h=M.last,h!==null?h.sibling=D:c.child=D,M.last=D)}return M.tail!==null?(c=M.tail,M.rendering=c,M.tail=c.sibling,M.renderingStartTime=Oi(),c.sibling=null,h=ys.current,Q(ys,S?h&1|2:h&1),c):(Bi(c),null);case 22:case 23:return ya(c),Ug(),S=c.memoizedState!==null,h!==null?h.memoizedState!==null!==S&&(c.flags|=8192):S&&(c.flags|=8192),S?(g&536870912)!==0&&(c.flags&128)===0&&(Bi(c),c.subtreeFlags&6&&(c.flags|=8192)):Bi(c),g=c.updateQueue,g!==null&&Gd(c,g.retryQueue),g=null,h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(g=h.memoizedState.cachePool.pool),S=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(S=c.memoizedState.cachePool.pool),S!==g&&(c.flags|=2048),h!==null&&q(Uo),null;case 24:return g=null,h!==null&&(g=h.memoizedState.cache),c.memoizedState.cache!==g&&(c.flags|=2048),fa(gs),Bi(c),null;case 25:return null;case 30:return null}throw Error(i(156,c.tag))}function Ew(h,c){switch(Tg(c),c.tag){case 1:return h=c.flags,h&65536?(c.flags=h&-65537|128,c):null;case 3:return fa(gs),Tt(),h=c.flags,(h&65536)!==0&&(h&128)===0?(c.flags=h&-65537|128,c):null;case 26:case 27:case 5:return zt(c),null;case 13:if(ya(c),h=c.memoizedState,h!==null&&h.dehydrated!==null){if(c.alternate===null)throw Error(i(340));du()}return h=c.flags,h&65536?(c.flags=h&-65537|128,c):null;case 19:return q(ys),null;case 4:return Tt(),null;case 10:return fa(c.type),null;case 22:case 23:return ya(c),Ug(),h!==null&&q(Uo),h=c.flags,h&65536?(c.flags=h&-65537|128,c):null;case 24:return fa(gs),null;case 25:return null;default:return null}}function JA(h,c){switch(Tg(c),c.tag){case 3:fa(gs),Tt();break;case 26:case 27:case 5:zt(c);break;case 4:Tt();break;case 13:ya(c);break;case 19:q(ys);break;case 10:fa(c.type);break;case 22:case 23:ya(c),Ug(),h!==null&&q(Uo);break;case 24:fa(gs)}}function ku(h,c){try{var g=c.updateQueue,S=g!==null?g.lastEffect:null;if(S!==null){var M=S.next;g=M;do{if((g.tag&h)===h){S=void 0;var D=g.create,G=g.inst;S=D(),G.destroy=S}g=g.next}while(g!==M)}}catch($){Si(c,c.return,$)}}function ja(h,c,g){try{var S=c.updateQueue,M=S!==null?S.lastEffect:null;if(M!==null){var D=M.next;S=D;do{if((S.tag&h)===h){var G=S.inst,$=G.destroy;if($!==void 0){G.destroy=void 0,M=c;var Z=g,rt=$;try{rt()}catch(yt){Si(M,Z,yt)}}}S=S.next}while(S!==D)}}catch(yt){Si(c,c.return,yt)}}function ZA(h){var c=h.updateQueue;if(c!==null){var g=h.stateNode;try{Px(c,g)}catch(S){Si(h,h.return,S)}}}function QA(h,c,g){g.props=Go(h.type,h.memoizedProps),g.state=h.memoizedState;try{g.componentWillUnmount()}catch(S){Si(h,c,S)}}function Du(h,c){try{var g=h.ref;if(g!==null){switch(h.tag){case 26:case 27:case 5:var S=h.stateNode;break;case 30:S=h.stateNode;break;default:S=h.stateNode}typeof g=="function"?h.refCleanup=g(S):g.current=S}}catch(M){Si(h,c,M)}}function Pn(h,c){var g=h.ref,S=h.refCleanup;if(g!==null)if(typeof S=="function")try{S()}catch(M){Si(h,c,M)}finally{h.refCleanup=null,h=h.alternate,h!=null&&(h.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(M){Si(h,c,M)}else g.current=null}function KA(h){var c=h.type,g=h.memoizedProps,S=h.stateNode;try{t:switch(c){case"button":case"input":case"select":case"textarea":g.autoFocus&&S.focus();break t;case"img":g.src?S.src=g.src:g.srcSet&&(S.srcset=g.srcSet)}}catch(M){Si(h,h.return,M)}}function gy(h,c,g){try{var S=h.stateNode;Ww(S,h.type,g,c),S[Qt]=c}catch(M){Si(h,h.return,M)}}function t1(h){return h.tag===5||h.tag===3||h.tag===26||h.tag===27&&so(h.type)||h.tag===4}function yy(h){t:for(;;){for(;h.sibling===null;){if(h.return===null||t1(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.tag===27&&so(h.type)||h.flags&2||h.child===null||h.tag===4)continue t;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function my(h,c,g){var S=h.tag;if(S===5||S===6)h=h.stateNode,c?(g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g).insertBefore(h,c):(c=g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g,c.appendChild(h),g=g._reactRootContainer,g!=null||c.onclick!==null||(c.onclick=tf));else if(S!==4&&(S===27&&so(h.type)&&(g=h.stateNode,c=null),h=h.child,h!==null))for(my(h,c,g),h=h.sibling;h!==null;)my(h,c,g),h=h.sibling}function Yd(h,c,g){var S=h.tag;if(S===5||S===6)h=h.stateNode,c?g.insertBefore(h,c):g.appendChild(h);else if(S!==4&&(S===27&&so(h.type)&&(g=h.stateNode),h=h.child,h!==null))for(Yd(h,c,g),h=h.sibling;h!==null;)Yd(h,c,g),h=h.sibling}function e1(h){var c=h.stateNode,g=h.memoizedProps;try{for(var S=h.type,M=c.attributes;M.length;)c.removeAttributeNode(M[0]);Ns(c,S,g),c[It]=h,c[Qt]=g}catch(D){Si(h,h.return,D)}}var Sa=!1,ts=!1,py=!1,i1=typeof WeakSet=="function"?WeakSet:Set,Rs=null;function Tw(h,c){if(h=h.containerInfo,Oy=hf,h=fx(h),yg(h)){if("selectionStart"in h)var g={start:h.selectionStart,end:h.selectionEnd};else t:{g=(g=h.ownerDocument)&&g.defaultView||window;var S=g.getSelection&&g.getSelection();if(S&&S.rangeCount!==0){g=S.anchorNode;var M=S.anchorOffset,D=S.focusNode;S=S.focusOffset;try{g.nodeType,D.nodeType}catch{g=null;break t}var G=0,$=-1,Z=-1,rt=0,yt=0,pt=h,at=null;e:for(;;){for(var lt;pt!==g||M!==0&&pt.nodeType!==3||($=G+M),pt!==D||S!==0&&pt.nodeType!==3||(Z=G+S),pt.nodeType===3&&(G+=pt.nodeValue.length),(lt=pt.firstChild)!==null;)at=pt,pt=lt;for(;;){if(pt===h)break e;if(at===g&&++rt===M&&($=G),at===D&&++yt===S&&(Z=G),(lt=pt.nextSibling)!==null)break;pt=at,at=pt.parentNode}pt=lt}g=$===-1||Z===-1?null:{start:$,end:Z}}else g=null}g=g||{start:0,end:0}}else g=null;for(Gy={focusedElem:h,selectionRange:g},hf=!1,Rs=c;Rs!==null;)if(c=Rs,h=c.child,(c.subtreeFlags&1024)!==0&&h!==null)h.return=c,Rs=h;else for(;Rs!==null;){switch(c=Rs,D=c.alternate,h=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((h&1024)!==0&&D!==null){h=void 0,g=c,M=D.memoizedProps,D=D.memoizedState,S=g.stateNode;try{var ee=Go(g.type,M,g.elementType===g.type);h=S.getSnapshotBeforeUpdate(ee,D),S.__reactInternalSnapshotBeforeUpdate=h}catch($t){Si(g,g.return,$t)}}break;case 3:if((h&1024)!==0){if(h=c.stateNode.containerInfo,g=h.nodeType,g===9)Xy(h);else if(g===1)switch(h.nodeName){case"HEAD":case"HTML":case"BODY":Xy(h);break;default:h.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((h&1024)!==0)throw Error(i(163))}if(h=c.sibling,h!==null){h.return=c.return,Rs=h;break}Rs=c.return}}function s1(h,c,g){var S=g.flags;switch(g.tag){case 0:case 11:case 15:Ja(h,g),S&4&&ku(5,g);break;case 1:if(Ja(h,g),S&4)if(h=g.stateNode,c===null)try{h.componentDidMount()}catch(G){Si(g,g.return,G)}else{var M=Go(g.type,c.memoizedProps);c=c.memoizedState;try{h.componentDidUpdate(M,c,h.__reactInternalSnapshotBeforeUpdate)}catch(G){Si(g,g.return,G)}}S&64&&ZA(g),S&512&&Du(g,g.return);break;case 3:if(Ja(h,g),S&64&&(h=g.updateQueue,h!==null)){if(c=null,g.child!==null)switch(g.child.tag){case 27:case 5:c=g.child.stateNode;break;case 1:c=g.child.stateNode}try{Px(h,c)}catch(G){Si(g,g.return,G)}}break;case 27:c===null&&S&4&&e1(g);case 26:case 5:Ja(h,g),c===null&&S&4&&KA(g),S&512&&Du(g,g.return);break;case 12:Ja(h,g);break;case 13:Ja(h,g),S&4&&a1(h,g),S&64&&(h=g.memoizedState,h!==null&&(h=h.dehydrated,h!==null&&(g=Nw.bind(null,g),Kw(h,g))));break;case 22:if(S=g.memoizedState!==null||Sa,!S){c=c!==null&&c.memoizedState!==null||ts,M=Sa;var D=ts;Sa=S,(ts=c)&&!D?Za(h,g,(g.subtreeFlags&8772)!==0):Ja(h,g),Sa=M,ts=D}break;case 30:break;default:Ja(h,g)}}function r1(h){var c=h.alternate;c!==null&&(h.alternate=null,r1(c)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(c=h.stateNode,c!==null&&Gi(c)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}var Di=null,yr=!1;function xa(h,c,g){for(g=g.child;g!==null;)n1(h,c,g),g=g.sibling}function n1(h,c,g){if(ge&&typeof ge.onCommitFiberUnmount=="function")try{ge.onCommitFiberUnmount(vi,g)}catch{}switch(g.tag){case 26:ts||Pn(g,c),xa(h,c,g),g.memoizedState?g.memoizedState.count--:g.stateNode&&(g=g.stateNode,g.parentNode.removeChild(g));break;case 27:ts||Pn(g,c);var S=Di,M=yr;so(g.type)&&(Di=g.stateNode,yr=!1),xa(h,c,g),Iu(g.stateNode),Di=S,yr=M;break;case 5:ts||Pn(g,c);case 6:if(S=Di,M=yr,Di=null,xa(h,c,g),Di=S,yr=M,Di!==null)if(yr)try{(Di.nodeType===9?Di.body:Di.nodeName==="HTML"?Di.ownerDocument.body:Di).removeChild(g.stateNode)}catch(D){Si(g,c,D)}else try{Di.removeChild(g.stateNode)}catch(D){Si(g,c,D)}break;case 18:Di!==null&&(yr?(h=Di,$1(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,g.stateNode),$u(h)):$1(Di,g.stateNode));break;case 4:S=Di,M=yr,Di=g.stateNode.containerInfo,yr=!0,xa(h,c,g),Di=S,yr=M;break;case 0:case 11:case 14:case 15:ts||ja(2,g,c),ts||ja(4,g,c),xa(h,c,g);break;case 1:ts||(Pn(g,c),S=g.stateNode,typeof S.componentWillUnmount=="function"&&QA(g,c,S)),xa(h,c,g);break;case 21:xa(h,c,g);break;case 22:ts=(S=ts)||g.memoizedState!==null,xa(h,c,g),ts=S;break;default:xa(h,c,g)}}function a1(h,c){if(c.memoizedState===null&&(h=c.alternate,h!==null&&(h=h.memoizedState,h!==null&&(h=h.dehydrated,h!==null))))try{$u(h)}catch(g){Si(c,c.return,g)}}function ww(h){switch(h.tag){case 13:case 19:var c=h.stateNode;return c===null&&(c=h.stateNode=new i1),c;case 22:return h=h.stateNode,c=h._retryCache,c===null&&(c=h._retryCache=new i1),c;default:throw Error(i(435,h.tag))}}function Sy(h,c){var g=ww(h);c.forEach(function(S){var M=Lw.bind(null,h,S);g.has(S)||(g.add(S),S.then(M,M))})}function Br(h,c){var g=c.deletions;if(g!==null)for(var S=0;S<g.length;S++){var M=g[S],D=h,G=c,$=G;t:for(;$!==null;){switch($.tag){case 27:if(so($.type)){Di=$.stateNode,yr=!1;break t}break;case 5:Di=$.stateNode,yr=!1;break t;case 3:case 4:Di=$.stateNode.containerInfo,yr=!0;break t}$=$.return}if(Di===null)throw Error(i(160));n1(D,G,M),Di=null,yr=!1,D=M.alternate,D!==null&&(D.return=null),M.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)o1(c,h),c=c.sibling}var Mn=null;function o1(h,c){var g=h.alternate,S=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:Br(c,h),Pr(h),S&4&&(ja(3,h,h.return),ku(3,h),ja(5,h,h.return));break;case 1:Br(c,h),Pr(h),S&512&&(ts||g===null||Pn(g,g.return)),S&64&&Sa&&(h=h.updateQueue,h!==null&&(S=h.callbacks,S!==null&&(g=h.shared.hiddenCallbacks,h.shared.hiddenCallbacks=g===null?S:g.concat(S))));break;case 26:var M=Mn;if(Br(c,h),Pr(h),S&512&&(ts||g===null||Pn(g,g.return)),S&4){var D=g!==null?g.memoizedState:null;if(S=h.memoizedState,g===null)if(S===null)if(h.stateNode===null){t:{S=h.type,g=h.memoizedProps,M=M.ownerDocument||M;e:switch(S){case"title":D=M.getElementsByTagName("title")[0],(!D||D[Ve]||D[It]||D.namespaceURI==="http://www.w3.org/2000/svg"||D.hasAttribute("itemprop"))&&(D=M.createElement(S),M.head.insertBefore(D,M.querySelector("head > title"))),Ns(D,S,g),D[It]=h,Xt(D),S=D;break t;case"link":var G=ev("link","href",M).get(S+(g.href||""));if(G){for(var $=0;$<G.length;$++)if(D=G[$],D.getAttribute("href")===(g.href==null||g.href===""?null:g.href)&&D.getAttribute("rel")===(g.rel==null?null:g.rel)&&D.getAttribute("title")===(g.title==null?null:g.title)&&D.getAttribute("crossorigin")===(g.crossOrigin==null?null:g.crossOrigin)){G.splice($,1);break e}}D=M.createElement(S),Ns(D,S,g),M.head.appendChild(D);break;case"meta":if(G=ev("meta","content",M).get(S+(g.content||""))){for($=0;$<G.length;$++)if(D=G[$],D.getAttribute("content")===(g.content==null?null:""+g.content)&&D.getAttribute("name")===(g.name==null?null:g.name)&&D.getAttribute("property")===(g.property==null?null:g.property)&&D.getAttribute("http-equiv")===(g.httpEquiv==null?null:g.httpEquiv)&&D.getAttribute("charset")===(g.charSet==null?null:g.charSet)){G.splice($,1);break e}}D=M.createElement(S),Ns(D,S,g),M.head.appendChild(D);break;default:throw Error(i(468,S))}D[It]=h,Xt(D),S=D}h.stateNode=S}else iv(M,h.type,h.stateNode);else h.stateNode=tv(M,S,h.memoizedProps);else D!==S?(D===null?g.stateNode!==null&&(g=g.stateNode,g.parentNode.removeChild(g)):D.count--,S===null?iv(M,h.type,h.stateNode):tv(M,S,h.memoizedProps)):S===null&&h.stateNode!==null&&gy(h,h.memoizedProps,g.memoizedProps)}break;case 27:Br(c,h),Pr(h),S&512&&(ts||g===null||Pn(g,g.return)),g!==null&&S&4&&gy(h,h.memoizedProps,g.memoizedProps);break;case 5:if(Br(c,h),Pr(h),S&512&&(ts||g===null||Pn(g,g.return)),h.flags&32){M=h.stateNode;try{Eh(M,"")}catch(lt){Si(h,h.return,lt)}}S&4&&h.stateNode!=null&&(M=h.memoizedProps,gy(h,M,g!==null?g.memoizedProps:M)),S&1024&&(py=!0);break;case 6:if(Br(c,h),Pr(h),S&4){if(h.stateNode===null)throw Error(i(162));S=h.memoizedProps,g=h.stateNode;try{g.nodeValue=S}catch(lt){Si(h,h.return,lt)}}break;case 3:if(nf=null,M=Mn,Mn=sf(c.containerInfo),Br(c,h),Mn=M,Pr(h),S&4&&g!==null&&g.memoizedState.isDehydrated)try{$u(c.containerInfo)}catch(lt){Si(h,h.return,lt)}py&&(py=!1,h1(h));break;case 4:S=Mn,Mn=sf(h.stateNode.containerInfo),Br(c,h),Pr(h),Mn=S;break;case 12:Br(c,h),Pr(h);break;case 13:Br(c,h),Pr(h),h.child.flags&8192&&h.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&(Ry=Oi()),S&4&&(S=h.updateQueue,S!==null&&(h.updateQueue=null,Sy(h,S)));break;case 22:M=h.memoizedState!==null;var Z=g!==null&&g.memoizedState!==null,rt=Sa,yt=ts;if(Sa=rt||M,ts=yt||Z,Br(c,h),ts=yt,Sa=rt,Pr(h),S&8192)t:for(c=h.stateNode,c._visibility=M?c._visibility&-2:c._visibility|1,M&&(g===null||Z||Sa||ts||Yo(h)),g=null,c=h;;){if(c.tag===5||c.tag===26){if(g===null){Z=g=c;try{if(D=Z.stateNode,M)G=D.style,typeof G.setProperty=="function"?G.setProperty("display","none","important"):G.display="none";else{$=Z.stateNode;var pt=Z.memoizedProps.style,at=pt!=null&&pt.hasOwnProperty("display")?pt.display:null;$.style.display=at==null||typeof at=="boolean"?"":(""+at).trim()}}catch(lt){Si(Z,Z.return,lt)}}}else if(c.tag===6){if(g===null){Z=c;try{Z.stateNode.nodeValue=M?"":Z.memoizedProps}catch(lt){Si(Z,Z.return,lt)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===h)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===h)break t;for(;c.sibling===null;){if(c.return===null||c.return===h)break t;g===c&&(g=null),c=c.return}g===c&&(g=null),c.sibling.return=c.return,c=c.sibling}S&4&&(S=h.updateQueue,S!==null&&(g=S.retryQueue,g!==null&&(S.retryQueue=null,Sy(h,g))));break;case 19:Br(c,h),Pr(h),S&4&&(S=h.updateQueue,S!==null&&(h.updateQueue=null,Sy(h,S)));break;case 30:break;case 21:break;default:Br(c,h),Pr(h)}}function Pr(h){var c=h.flags;if(c&2){try{for(var g,S=h.return;S!==null;){if(t1(S)){g=S;break}S=S.return}if(g==null)throw Error(i(160));switch(g.tag){case 27:var M=g.stateNode,D=yy(h);Yd(h,D,M);break;case 5:var G=g.stateNode;g.flags&32&&(Eh(G,""),g.flags&=-33);var $=yy(h);Yd(h,$,G);break;case 3:case 4:var Z=g.stateNode.containerInfo,rt=yy(h);my(h,rt,Z);break;default:throw Error(i(161))}}catch(yt){Si(h,h.return,yt)}h.flags&=-3}c&4096&&(h.flags&=-4097)}function h1(h){if(h.subtreeFlags&1024)for(h=h.child;h!==null;){var c=h;h1(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),h=h.sibling}}function Ja(h,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)s1(h,c.alternate,c),c=c.sibling}function Yo(h){for(h=h.child;h!==null;){var c=h;switch(c.tag){case 0:case 11:case 14:case 15:ja(4,c,c.return),Yo(c);break;case 1:Pn(c,c.return);var g=c.stateNode;typeof g.componentWillUnmount=="function"&&QA(c,c.return,g),Yo(c);break;case 27:Iu(c.stateNode);case 26:case 5:Pn(c,c.return),Yo(c);break;case 22:c.memoizedState===null&&Yo(c);break;case 30:Yo(c);break;default:Yo(c)}h=h.sibling}}function Za(h,c,g){for(g=g&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var S=c.alternate,M=h,D=c,G=D.flags;switch(D.tag){case 0:case 11:case 15:Za(M,D,g),ku(4,D);break;case 1:if(Za(M,D,g),S=D,M=S.stateNode,typeof M.componentDidMount=="function")try{M.componentDidMount()}catch(rt){Si(S,S.return,rt)}if(S=D,M=S.updateQueue,M!==null){var $=S.stateNode;try{var Z=M.shared.hiddenCallbacks;if(Z!==null)for(M.shared.hiddenCallbacks=null,M=0;M<Z.length;M++)Bx(Z[M],$)}catch(rt){Si(S,S.return,rt)}}g&&G&64&&ZA(D),Du(D,D.return);break;case 27:e1(D);case 26:case 5:Za(M,D,g),g&&S===null&&G&4&&KA(D),Du(D,D.return);break;case 12:Za(M,D,g);break;case 13:Za(M,D,g),g&&G&4&&a1(M,D);break;case 22:D.memoizedState===null&&Za(M,D,g),Du(D,D.return);break;case 30:break;default:Za(M,D,g)}c=c.sibling}}function xy(h,c){var g=null;h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(g=h.memoizedState.cachePool.pool),h=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(h=c.memoizedState.cachePool.pool),h!==g&&(h!=null&&h.refCount++,g!=null&&yu(g))}function Ay(h,c){h=null,c.alternate!==null&&(h=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==h&&(c.refCount++,h!=null&&yu(h))}function In(h,c,g,S){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)l1(h,c,g,S),c=c.sibling}function l1(h,c,g,S){var M=c.flags;switch(c.tag){case 0:case 11:case 15:In(h,c,g,S),M&2048&&ku(9,c);break;case 1:In(h,c,g,S);break;case 3:In(h,c,g,S),M&2048&&(h=null,c.alternate!==null&&(h=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==h&&(c.refCount++,h!=null&&yu(h)));break;case 12:if(M&2048){In(h,c,g,S),h=c.stateNode;try{var D=c.memoizedProps,G=D.id,$=D.onPostCommit;typeof $=="function"&&$(G,c.alternate===null?"mount":"update",h.passiveEffectDuration,-0)}catch(Z){Si(c,c.return,Z)}}else In(h,c,g,S);break;case 13:In(h,c,g,S);break;case 23:break;case 22:D=c.stateNode,G=c.alternate,c.memoizedState!==null?D._visibility&2?In(h,c,g,S):Fu(h,c):D._visibility&2?In(h,c,g,S):(D._visibility|=2,Hh(h,c,g,S,(c.subtreeFlags&10256)!==0)),M&2048&&xy(G,c);break;case 24:In(h,c,g,S),M&2048&&Ay(c.alternate,c);break;default:In(h,c,g,S)}}function Hh(h,c,g,S,M){for(M=M&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var D=h,G=c,$=g,Z=S,rt=G.flags;switch(G.tag){case 0:case 11:case 15:Hh(D,G,$,Z,M),ku(8,G);break;case 23:break;case 22:var yt=G.stateNode;G.memoizedState!==null?yt._visibility&2?Hh(D,G,$,Z,M):Fu(D,G):(yt._visibility|=2,Hh(D,G,$,Z,M)),M&&rt&2048&&xy(G.alternate,G);break;case 24:Hh(D,G,$,Z,M),M&&rt&2048&&Ay(G.alternate,G);break;default:Hh(D,G,$,Z,M)}c=c.sibling}}function Fu(h,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var g=h,S=c,M=S.flags;switch(S.tag){case 22:Fu(g,S),M&2048&&xy(S.alternate,S);break;case 24:Fu(g,S),M&2048&&Ay(S.alternate,S);break;default:Fu(g,S)}c=c.sibling}}var Vu=8192;function Xh(h){if(h.subtreeFlags&Vu)for(h=h.child;h!==null;)u1(h),h=h.sibling}function u1(h){switch(h.tag){case 26:Xh(h),h.flags&Vu&&h.memoizedState!==null&&dC(Mn,h.memoizedState,h.memoizedProps);break;case 5:Xh(h);break;case 3:case 4:var c=Mn;Mn=sf(h.stateNode.containerInfo),Xh(h),Mn=c;break;case 22:h.memoizedState===null&&(c=h.alternate,c!==null&&c.memoizedState!==null?(c=Vu,Vu=16777216,Xh(h),Vu=c):Xh(h));break;default:Xh(h)}}function c1(h){var c=h.alternate;if(c!==null&&(h=c.child,h!==null)){c.child=null;do c=h.sibling,h.sibling=null,h=c;while(h!==null)}}function zu(h){var c=h.deletions;if((h.flags&16)!==0){if(c!==null)for(var g=0;g<c.length;g++){var S=c[g];Rs=S,f1(S,h)}c1(h)}if(h.subtreeFlags&10256)for(h=h.child;h!==null;)d1(h),h=h.sibling}function d1(h){switch(h.tag){case 0:case 11:case 15:zu(h),h.flags&2048&&ja(9,h,h.return);break;case 3:zu(h);break;case 12:zu(h);break;case 22:var c=h.stateNode;h.memoizedState!==null&&c._visibility&2&&(h.return===null||h.return.tag!==13)?(c._visibility&=-3,Hd(h)):zu(h);break;default:zu(h)}}function Hd(h){var c=h.deletions;if((h.flags&16)!==0){if(c!==null)for(var g=0;g<c.length;g++){var S=c[g];Rs=S,f1(S,h)}c1(h)}for(h=h.child;h!==null;){switch(c=h,c.tag){case 0:case 11:case 15:ja(8,c,c.return),Hd(c);break;case 22:g=c.stateNode,g._visibility&2&&(g._visibility&=-3,Hd(c));break;default:Hd(c)}h=h.sibling}}function f1(h,c){for(;Rs!==null;){var g=Rs;switch(g.tag){case 0:case 11:case 15:ja(8,g,c);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var S=g.memoizedState.cachePool.pool;S!=null&&S.refCount++}break;case 24:yu(g.memoizedState.cache)}if(S=g.child,S!==null)S.return=g,Rs=S;else t:for(g=h;Rs!==null;){S=Rs;var M=S.sibling,D=S.return;if(r1(S),S===g){Rs=null;break t}if(M!==null){M.return=D,Rs=M;break t}Rs=D}}}var Cw={getCacheForType:function(h){var c=Os(gs),g=c.data.get(h);return g===void 0&&(g=h(),c.data.set(h,g)),g}},kw=typeof WeakMap=="function"?WeakMap:Map,oi=0,bi=null,Ce=null,Le=0,hi=0,Ir=null,Qa=!1,Wh=!1,vy=!1,Aa=0,Xi=0,Ka=0,Ho=0,by=0,un=0,$h=0,_u=null,mr=null,My=!1,Ry=0,Xd=1/0,Wd=null,to=null,_s=0,eo=null,qh=null,jh=0,Ey=0,Ty=null,g1=null,Nu=0,wy=null;function Ur(){if((oi&2)!==0&&Le!==0)return Le&-Le;if(N.T!==null){var h=Lh;return h!==0?h:_y()}return pi()}function y1(){un===0&&(un=(Le&536870912)===0||ti?wt():536870912);var h=ln.current;return h!==null&&(h.flags|=32),un}function Or(h,c,g){(h===bi&&(hi===2||hi===9)||h.cancelPendingCommit!==null)&&(Jh(h,0),io(h,Le,un,!1)),fe(h,g),((oi&2)===0||h!==bi)&&(h===bi&&((oi&2)===0&&(Ho|=g),Xi===4&&io(h,Le,un,!1)),Un(h))}function m1(h,c,g){if((oi&6)!==0)throw Error(i(327));var S=!g&&(c&124)===0&&(c&h.expiredLanes)===0||Et(h,c),M=S?Vw(h,c):Dy(h,c,!0),D=S;do{if(M===0){Wh&&!S&&io(h,c,0,!1);break}else{if(g=h.current.alternate,D&&!Dw(g)){M=Dy(h,c,!1),D=!1;continue}if(M===2){if(D=c,h.errorRecoveryDisabledLanes&D)var G=0;else G=h.pendingLanes&-536870913,G=G!==0?G:G&536870912?536870912:0;if(G!==0){c=G;t:{var $=h;M=_u;var Z=$.current.memoizedState.isDehydrated;if(Z&&(Jh($,G).flags|=256),G=Dy($,G,!1),G!==2){if(vy&&!Z){$.errorRecoveryDisabledLanes|=D,Ho|=D,M=4;break t}D=mr,mr=M,D!==null&&(mr===null?mr=D:mr.push.apply(mr,D))}M=G}if(D=!1,M!==2)continue}}if(M===1){Jh(h,0),io(h,c,0,!0);break}t:{switch(S=h,D=M,D){case 0:case 1:throw Error(i(345));case 4:if((c&4194048)!==c)break;case 6:io(S,c,un,!Qa);break t;case 2:mr=null;break;case 3:case 5:break;default:throw Error(i(329))}if((c&62914560)===c&&(M=Ry+300-Oi(),10<M)){if(io(S,c,un,!Qa),ne(S,0,!0)!==0)break t;S.timeoutHandle=X1(p1.bind(null,S,g,mr,Wd,My,c,un,Ho,$h,Qa,D,2,-0,0),M);break t}p1(S,g,mr,Wd,My,c,un,Ho,$h,Qa,D,0,-0,0)}}break}while(!0);Un(h)}function p1(h,c,g,S,M,D,G,$,Z,rt,yt,pt,at,lt){if(h.timeoutHandle=-1,pt=c.subtreeFlags,(pt&8192||(pt&16785408)===16785408)&&(Gu={stylesheets:null,count:0,unsuspend:cC},u1(c),pt=fC(),pt!==null)){h.cancelPendingCommit=pt(R1.bind(null,h,c,D,g,S,M,G,$,Z,yt,1,at,lt)),io(h,D,G,!rt);return}R1(h,c,D,g,S,M,G,$,Z)}function Dw(h){for(var c=h;;){var g=c.tag;if((g===0||g===11||g===15)&&c.flags&16384&&(g=c.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var S=0;S<g.length;S++){var M=g[S],D=M.getSnapshot;M=M.value;try{if(!Nr(D(),M))return!1}catch{return!1}}if(g=c.child,c.subtreeFlags&16384&&g!==null)g.return=c,c=g;else{if(c===h)break;for(;c.sibling===null;){if(c.return===null||c.return===h)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function io(h,c,g,S){c&=~by,c&=~Ho,h.suspendedLanes|=c,h.pingedLanes&=~c,S&&(h.warmLanes|=c),S=h.expirationTimes;for(var M=c;0<M;){var D=31-mi(M),G=1<<D;S[D]=-1,M&=~G}g!==0&&_n(h,g,c)}function $d(){return(oi&6)===0?(Lu(0),!1):!0}function Cy(){if(Ce!==null){if(hi===0)var h=Ce.return;else h=Ce,da=Po=null,Xg(h),Gh=null,Tu=0,h=Ce;for(;h!==null;)JA(h.alternate,h),h=h.return;Ce=null}}function Jh(h,c){var g=h.timeoutHandle;g!==-1&&(h.timeoutHandle=-1,qw(g)),g=h.cancelPendingCommit,g!==null&&(h.cancelPendingCommit=null,g()),Cy(),bi=h,Ce=g=la(h.current,null),Le=c,hi=0,Ir=null,Qa=!1,Wh=Et(h,c),vy=!1,$h=un=by=Ho=Ka=Xi=0,mr=_u=null,My=!1,(c&8)!==0&&(c|=c&32);var S=h.entangledLanes;if(S!==0)for(h=h.entanglements,S&=c;0<S;){var M=31-mi(S),D=1<<M;c|=h[M],S&=~D}return Aa=c,yd(),g}function S1(h,c){me=null,N.H=_d,c===pu||c===Rd?(c=Nx(),hi=3):c===Vx?(c=Nx(),hi=4):hi=c===LA?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,Ir=c,Ce===null&&(Xi=1,Id(h,nn(c,h.current)))}function x1(){var h=N.H;return N.H=_d,h===null?_d:h}function A1(){var h=N.A;return N.A=Cw,h}function ky(){Xi=4,Qa||(Le&4194048)!==Le&&ln.current!==null||(Wh=!0),(Ka&134217727)===0&&(Ho&134217727)===0||bi===null||io(bi,Le,un,!1)}function Dy(h,c,g){var S=oi;oi|=2;var M=x1(),D=A1();(bi!==h||Le!==c)&&(Wd=null,Jh(h,c)),c=!1;var G=Xi;t:do try{if(hi!==0&&Ce!==null){var $=Ce,Z=Ir;switch(hi){case 8:Cy(),G=6;break t;case 3:case 2:case 9:case 6:ln.current===null&&(c=!0);var rt=hi;if(hi=0,Ir=null,Zh(h,$,Z,rt),g&&Wh){G=0;break t}break;default:rt=hi,hi=0,Ir=null,Zh(h,$,Z,rt)}}Fw(),G=Xi;break}catch(yt){S1(h,yt)}while(!0);return c&&h.shellSuspendCounter++,da=Po=null,oi=S,N.H=M,N.A=D,Ce===null&&(bi=null,Le=0,yd()),G}function Fw(){for(;Ce!==null;)v1(Ce)}function Vw(h,c){var g=oi;oi|=2;var S=x1(),M=A1();bi!==h||Le!==c?(Wd=null,Xd=Oi()+500,Jh(h,c)):Wh=Et(h,c);t:do try{if(hi!==0&&Ce!==null){c=Ce;var D=Ir;e:switch(hi){case 1:hi=0,Ir=null,Zh(h,c,D,1);break;case 2:case 9:if(zx(D)){hi=0,Ir=null,b1(c);break}c=function(){hi!==2&&hi!==9||bi!==h||(hi=7),Un(h)},D.then(c,c);break t;case 3:hi=7;break t;case 4:hi=5;break t;case 7:zx(D)?(hi=0,Ir=null,b1(c)):(hi=0,Ir=null,Zh(h,c,D,7));break;case 5:var G=null;switch(Ce.tag){case 26:G=Ce.memoizedState;case 5:case 27:var $=Ce;if(!G||sv(G)){hi=0,Ir=null;var Z=$.sibling;if(Z!==null)Ce=Z;else{var rt=$.return;rt!==null?(Ce=rt,qd(rt)):Ce=null}break e}}hi=0,Ir=null,Zh(h,c,D,5);break;case 6:hi=0,Ir=null,Zh(h,c,D,6);break;case 8:Cy(),Xi=6;break t;default:throw Error(i(462))}}zw();break}catch(yt){S1(h,yt)}while(!0);return da=Po=null,N.H=S,N.A=M,oi=g,Ce!==null?0:(bi=null,Le=0,yd(),Xi)}function zw(){for(;Ce!==null&&!Ft();)v1(Ce)}function v1(h){var c=qA(h.alternate,h,Aa);h.memoizedProps=h.pendingProps,c===null?qd(h):Ce=c}function b1(h){var c=h,g=c.alternate;switch(c.tag){case 15:case 0:c=GA(g,c,c.pendingProps,c.type,void 0,Le);break;case 11:c=GA(g,c,c.pendingProps,c.type.render,c.ref,Le);break;case 5:Xg(c);default:JA(g,c),c=Ce=Mx(c,Aa),c=qA(g,c,Aa)}h.memoizedProps=h.pendingProps,c===null?qd(h):Ce=c}function Zh(h,c,g,S){da=Po=null,Xg(c),Gh=null,Tu=0;var M=c.return;try{if(bw(h,M,c,g,Le)){Xi=1,Id(h,nn(g,h.current)),Ce=null;return}}catch(D){if(M!==null)throw Ce=M,D;Xi=1,Id(h,nn(g,h.current)),Ce=null;return}c.flags&32768?(ti||S===1?h=!0:Wh||(Le&536870912)!==0?h=!1:(Qa=h=!0,(S===2||S===9||S===3||S===6)&&(S=ln.current,S!==null&&S.tag===13&&(S.flags|=16384))),M1(c,h)):qd(c)}function qd(h){var c=h;do{if((c.flags&32768)!==0){M1(c,Qa);return}h=c.return;var g=Rw(c.alternate,c,Aa);if(g!==null){Ce=g;return}if(c=c.sibling,c!==null){Ce=c;return}Ce=c=h}while(c!==null);Xi===0&&(Xi=5)}function M1(h,c){do{var g=Ew(h.alternate,h);if(g!==null){g.flags&=32767,Ce=g;return}if(g=h.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!c&&(h=h.sibling,h!==null)){Ce=h;return}Ce=h=g}while(h!==null);Xi=6,Ce=null}function R1(h,c,g,S,M,D,G,$,Z){h.cancelPendingCommit=null;do jd();while(_s!==0);if((oi&6)!==0)throw Error(i(327));if(c!==null){if(c===h.current)throw Error(i(177));if(D=c.lanes|c.childLanes,D|=Ag,Te(h,g,D,G,$,Z),h===bi&&(Ce=bi=null,Le=0),qh=c,eo=h,jh=g,Ey=D,Ty=M,g1=S,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(h.callbackNode=null,h.callbackPriority=0,Bw(Qe,function(){return k1(),null})):(h.callbackNode=null,h.callbackPriority=0),S=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||S){S=N.T,N.T=null,M=U.p,U.p=2,G=oi,oi|=4;try{Tw(h,c,g)}finally{oi=G,U.p=M,N.T=S}}_s=1,E1(),T1(),w1()}}function E1(){if(_s===1){_s=0;var h=eo,c=qh,g=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||g){g=N.T,N.T=null;var S=U.p;U.p=2;var M=oi;oi|=4;try{o1(c,h);var D=Gy,G=fx(h.containerInfo),$=D.focusedElem,Z=D.selectionRange;if(G!==$&&$&&$.ownerDocument&&dx($.ownerDocument.documentElement,$)){if(Z!==null&&yg($)){var rt=Z.start,yt=Z.end;if(yt===void 0&&(yt=rt),"selectionStart"in $)$.selectionStart=rt,$.selectionEnd=Math.min(yt,$.value.length);else{var pt=$.ownerDocument||document,at=pt&&pt.defaultView||window;if(at.getSelection){var lt=at.getSelection(),ee=$.textContent.length,$t=Math.min(Z.start,ee),fi=Z.end===void 0?$t:Math.min(Z.end,ee);!lt.extend&&$t>fi&&(G=fi,fi=$t,$t=G);var tt=cx($,$t),K=cx($,fi);if(tt&&K&&(lt.rangeCount!==1||lt.anchorNode!==tt.node||lt.anchorOffset!==tt.offset||lt.focusNode!==K.node||lt.focusOffset!==K.offset)){var st=pt.createRange();st.setStart(tt.node,tt.offset),lt.removeAllRanges(),$t>fi?(lt.addRange(st),lt.extend(K.node,K.offset)):(st.setEnd(K.node,K.offset),lt.addRange(st))}}}}for(pt=[],lt=$;lt=lt.parentNode;)lt.nodeType===1&&pt.push({element:lt,left:lt.scrollLeft,top:lt.scrollTop});for(typeof $.focus=="function"&&$.focus(),$=0;$<pt.length;$++){var mt=pt[$];mt.element.scrollLeft=mt.left,mt.element.scrollTop=mt.top}}hf=!!Oy,Gy=Oy=null}finally{oi=M,U.p=S,N.T=g}}h.current=c,_s=2}}function T1(){if(_s===2){_s=0;var h=eo,c=qh,g=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||g){g=N.T,N.T=null;var S=U.p;U.p=2;var M=oi;oi|=4;try{s1(h,c.alternate,c)}finally{oi=M,U.p=S,N.T=g}}_s=3}}function w1(){if(_s===4||_s===3){_s=0,kt();var h=eo,c=qh,g=jh,S=g1;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?_s=5:(_s=0,qh=eo=null,C1(h,h.pendingLanes));var M=h.pendingLanes;if(M===0&&(to=null),Nn(g),c=c.stateNode,ge&&typeof ge.onCommitFiberRoot=="function")try{ge.onCommitFiberRoot(vi,c,void 0,(c.current.flags&128)===128)}catch{}if(S!==null){c=N.T,M=U.p,U.p=2,N.T=null;try{for(var D=h.onRecoverableError,G=0;G<S.length;G++){var $=S[G];D($.value,{componentStack:$.stack})}}finally{N.T=c,U.p=M}}(jh&3)!==0&&jd(),Un(h),M=h.pendingLanes,(g&4194090)!==0&&(M&42)!==0?h===wy?Nu++:(Nu=0,wy=h):Nu=0,Lu(0)}}function C1(h,c){(h.pooledCacheLanes&=c)===0&&(c=h.pooledCache,c!=null&&(h.pooledCache=null,yu(c)))}function jd(h){return E1(),T1(),w1(),k1()}function k1(){if(_s!==5)return!1;var h=eo,c=Ey;Ey=0;var g=Nn(jh),S=N.T,M=U.p;try{U.p=32>g?32:g,N.T=null,g=Ty,Ty=null;var D=eo,G=jh;if(_s=0,qh=eo=null,jh=0,(oi&6)!==0)throw Error(i(331));var $=oi;if(oi|=4,d1(D.current),l1(D,D.current,G,g),oi=$,Lu(0,!1),ge&&typeof ge.onPostCommitFiberRoot=="function")try{ge.onPostCommitFiberRoot(vi,D)}catch{}return!0}finally{U.p=M,N.T=S,C1(h,c)}}function D1(h,c,g){c=nn(g,c),c=ny(h.stateNode,c,2),h=Xa(h,c,2),h!==null&&(fe(h,2),Un(h))}function Si(h,c,g){if(h.tag===3)D1(h,h,g);else for(;c!==null;){if(c.tag===3){D1(c,h,g);break}else if(c.tag===1){var S=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(to===null||!to.has(S))){h=nn(g,h),g=_A(2),S=Xa(c,g,2),S!==null&&(NA(g,S,c,h),fe(S,2),Un(S));break}}c=c.return}}function Fy(h,c,g){var S=h.pingCache;if(S===null){S=h.pingCache=new kw;var M=new Set;S.set(c,M)}else M=S.get(c),M===void 0&&(M=new Set,S.set(c,M));M.has(g)||(vy=!0,M.add(g),h=_w.bind(null,h,c,g),c.then(h,h))}function _w(h,c,g){var S=h.pingCache;S!==null&&S.delete(c),h.pingedLanes|=h.suspendedLanes&g,h.warmLanes&=~g,bi===h&&(Le&g)===g&&(Xi===4||Xi===3&&(Le&62914560)===Le&&300>Oi()-Ry?(oi&2)===0&&Jh(h,0):by|=g,$h===Le&&($h=0)),Un(h)}function F1(h,c){c===0&&(c=Gt()),h=Vh(h,c),h!==null&&(fe(h,c),Un(h))}function Nw(h){var c=h.memoizedState,g=0;c!==null&&(g=c.retryLane),F1(h,g)}function Lw(h,c){var g=0;switch(h.tag){case 13:var S=h.stateNode,M=h.memoizedState;M!==null&&(g=M.retryLane);break;case 19:S=h.stateNode;break;case 22:S=h.stateNode._retryCache;break;default:throw Error(i(314))}S!==null&&S.delete(c),F1(h,g)}function Bw(h,c){return jt(h,c)}var Jd=null,Qh=null,Vy=!1,Zd=!1,zy=!1,Xo=0;function Un(h){h!==Qh&&h.next===null&&(Qh===null?Jd=Qh=h:Qh=Qh.next=h),Zd=!0,Vy||(Vy=!0,Iw())}function Lu(h,c){if(!zy&&Zd){zy=!0;do for(var g=!1,S=Jd;S!==null;){if(h!==0){var M=S.pendingLanes;if(M===0)var D=0;else{var G=S.suspendedLanes,$=S.pingedLanes;D=(1<<31-mi(42|h)+1)-1,D&=M&~(G&~$),D=D&201326741?D&201326741|1:D?D|2:0}D!==0&&(g=!0,N1(S,D))}else D=Le,D=ne(S,S===bi?D:0,S.cancelPendingCommit!==null||S.timeoutHandle!==-1),(D&3)===0||Et(S,D)||(g=!0,N1(S,D));S=S.next}while(g);zy=!1}}function Pw(){V1()}function V1(){Zd=Vy=!1;var h=0;Xo!==0&&($w()&&(h=Xo),Xo=0);for(var c=Oi(),g=null,S=Jd;S!==null;){var M=S.next,D=z1(S,c);D===0?(S.next=null,g===null?Jd=M:g.next=M,M===null&&(Qh=g)):(g=S,(h!==0||(D&3)!==0)&&(Zd=!0)),S=M}Lu(h)}function z1(h,c){for(var g=h.suspendedLanes,S=h.pingedLanes,M=h.expirationTimes,D=h.pendingLanes&-62914561;0<D;){var G=31-mi(D),$=1<<G,Z=M[G];Z===-1?(($&g)===0||($&S)!==0)&&(M[G]=oe($,c)):Z<=c&&(h.expiredLanes|=$),D&=~$}if(c=bi,g=Le,g=ne(h,h===c?g:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),S=h.callbackNode,g===0||h===c&&(hi===2||hi===9)||h.cancelPendingCommit!==null)return S!==null&&S!==null&&ie(S),h.callbackNode=null,h.callbackPriority=0;if((g&3)===0||Et(h,g)){if(c=g&-g,c===h.callbackPriority)return c;switch(S!==null&&ie(S),Nn(g)){case 2:case 8:g=Kr;break;case 32:g=Qe;break;case 268435456:g=dr;break;default:g=Qe}return S=_1.bind(null,h),g=jt(g,S),h.callbackPriority=c,h.callbackNode=g,c}return S!==null&&S!==null&&ie(S),h.callbackPriority=2,h.callbackNode=null,2}function _1(h,c){if(_s!==0&&_s!==5)return h.callbackNode=null,h.callbackPriority=0,null;var g=h.callbackNode;if(jd()&&h.callbackNode!==g)return null;var S=Le;return S=ne(h,h===bi?S:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),S===0?null:(m1(h,S,c),z1(h,Oi()),h.callbackNode!=null&&h.callbackNode===g?_1.bind(null,h):null)}function N1(h,c){if(jd())return null;m1(h,c,!0)}function Iw(){jw(function(){(oi&6)!==0?jt(Ee,Pw):V1()})}function _y(){return Xo===0&&(Xo=wt()),Xo}function L1(h){return h==null||typeof h=="symbol"||typeof h=="boolean"?null:typeof h=="function"?h:hd(""+h)}function B1(h,c){var g=c.ownerDocument.createElement("input");return g.name=c.name,g.value=c.value,h.id&&g.setAttribute("form",h.id),c.parentNode.insertBefore(g,c),h=new FormData(h),g.parentNode.removeChild(g),h}function Uw(h,c,g,S,M){if(c==="submit"&&g&&g.stateNode===M){var D=L1((M[Qt]||null).action),G=S.submitter;G&&(c=(c=G[Qt]||null)?L1(c.formAction):G.getAttribute("formAction"),c!==null&&(D=c,G=null));var $=new dd("action","action",null,S,M);h.push({event:$,listeners:[{instance:null,listener:function(){if(S.defaultPrevented){if(Xo!==0){var Z=G?B1(M,G):new FormData(M);ty(g,{pending:!0,data:Z,method:M.method,action:D},null,Z)}}else typeof D=="function"&&($.preventDefault(),Z=G?B1(M,G):new FormData(M),ty(g,{pending:!0,data:Z,method:M.method,action:D},D,Z))},currentTarget:M}]})}}for(var Ny=0;Ny<xg.length;Ny++){var Ly=xg[Ny],Ow=Ly.toLowerCase(),Gw=Ly[0].toUpperCase()+Ly.slice(1);bn(Ow,"on"+Gw)}bn(mx,"onAnimationEnd"),bn(px,"onAnimationIteration"),bn(Sx,"onAnimationStart"),bn("dblclick","onDoubleClick"),bn("focusin","onFocus"),bn("focusout","onBlur"),bn(nw,"onTransitionRun"),bn(aw,"onTransitionStart"),bn(ow,"onTransitionCancel"),bn(xx,"onTransitionEnd"),Li("onMouseEnter",["mouseout","mouseover"]),Li("onMouseLeave",["mouseout","mouseover"]),Li("onPointerEnter",["pointerout","pointerover"]),Li("onPointerLeave",["pointerout","pointerover"]),Ni("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ni("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ni("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ni("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ni("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ni("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Bu));function P1(h,c){c=(c&4)!==0;for(var g=0;g<h.length;g++){var S=h[g],M=S.event;S=S.listeners;t:{var D=void 0;if(c)for(var G=S.length-1;0<=G;G--){var $=S[G],Z=$.instance,rt=$.currentTarget;if($=$.listener,Z!==D&&M.isPropagationStopped())break t;D=$,M.currentTarget=rt;try{D(M)}catch(yt){Pd(yt)}M.currentTarget=null,D=Z}else for(G=0;G<S.length;G++){if($=S[G],Z=$.instance,rt=$.currentTarget,$=$.listener,Z!==D&&M.isPropagationStopped())break t;D=$,M.currentTarget=rt;try{D(M)}catch(yt){Pd(yt)}M.currentTarget=null,D=Z}}}}function ke(h,c){var g=c[ni];g===void 0&&(g=c[ni]=new Set);var S=h+"__bubble";g.has(S)||(I1(c,h,2,!1),g.add(S))}function By(h,c,g){var S=0;c&&(S|=4),I1(g,h,S,c)}var Qd="_reactListening"+Math.random().toString(36).slice(2);function Py(h){if(!h[Qd]){h[Qd]=!0,Zs.forEach(function(g){g!=="selectionchange"&&(Yw.has(g)||By(g,!1,h),By(g,!0,h))});var c=h.nodeType===9?h:h.ownerDocument;c===null||c[Qd]||(c[Qd]=!0,By("selectionchange",!1,c))}}function I1(h,c,g,S){switch(lv(c)){case 2:var M=mC;break;case 8:M=pC;break;default:M=Qy}g=M.bind(null,c,g,h),M=void 0,!ag||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(M=!0),S?M!==void 0?h.addEventListener(c,g,{capture:!0,passive:M}):h.addEventListener(c,g,!0):M!==void 0?h.addEventListener(c,g,{passive:M}):h.addEventListener(c,g,!1)}function Iy(h,c,g,S,M){var D=S;if((c&1)===0&&(c&2)===0&&S!==null)t:for(;;){if(S===null)return;var G=S.tag;if(G===3||G===4){var $=S.stateNode.containerInfo;if($===M)break;if(G===4)for(G=S.return;G!==null;){var Z=G.tag;if((Z===3||Z===4)&&G.stateNode.containerInfo===M)return;G=G.return}for(;$!==null;){if(G=zi($),G===null)return;if(Z=G.tag,Z===5||Z===6||Z===26||Z===27){S=D=G;continue t}$=$.parentNode}}S=S.return}WS(function(){var rt=D,yt=rg(g),pt=[];t:{var at=Ax.get(h);if(at!==void 0){var lt=dd,ee=h;switch(h){case"keypress":if(ud(g)===0)break t;case"keydown":case"keyup":lt=BT;break;case"focusin":ee="focus",lt=ug;break;case"focusout":ee="blur",lt=ug;break;case"beforeblur":case"afterblur":lt=ug;break;case"click":if(g.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":lt=jS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":lt=ET;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":lt=UT;break;case mx:case px:case Sx:lt=CT;break;case xx:lt=GT;break;case"scroll":case"scrollend":lt=MT;break;case"wheel":lt=HT;break;case"copy":case"cut":case"paste":lt=DT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":lt=ZS;break;case"toggle":case"beforetoggle":lt=WT}var $t=(c&4)!==0,fi=!$t&&(h==="scroll"||h==="scrollend"),tt=$t?at!==null?at+"Capture":null:at;$t=[];for(var K=rt,st;K!==null;){var mt=K;if(st=mt.stateNode,mt=mt.tag,mt!==5&&mt!==26&&mt!==27||st===null||tt===null||(mt=iu(K,tt),mt!=null&&$t.push(Pu(K,mt,st))),fi)break;K=K.return}0<$t.length&&(at=new lt(at,ee,null,g,yt),pt.push({event:at,listeners:$t}))}}if((c&7)===0){t:{if(at=h==="mouseover"||h==="pointerover",lt=h==="mouseout"||h==="pointerout",at&&g!==sg&&(ee=g.relatedTarget||g.fromElement)&&(zi(ee)||ee[Fs]))break t;if((lt||at)&&(at=yt.window===yt?yt:(at=yt.ownerDocument)?at.defaultView||at.parentWindow:window,lt?(ee=g.relatedTarget||g.toElement,lt=rt,ee=ee?zi(ee):null,ee!==null&&(fi=n(ee),$t=ee.tag,ee!==fi||$t!==5&&$t!==27&&$t!==6)&&(ee=null)):(lt=null,ee=rt),lt!==ee)){if($t=jS,mt="onMouseLeave",tt="onMouseEnter",K="mouse",(h==="pointerout"||h==="pointerover")&&($t=ZS,mt="onPointerLeave",tt="onPointerEnter",K="pointer"),fi=lt==null?at:Yi(lt),st=ee==null?at:Yi(ee),at=new $t(mt,K+"leave",lt,g,yt),at.target=fi,at.relatedTarget=st,mt=null,zi(yt)===rt&&($t=new $t(tt,K+"enter",ee,g,yt),$t.target=st,$t.relatedTarget=fi,mt=$t),fi=mt,lt&&ee)e:{for($t=lt,tt=ee,K=0,st=$t;st;st=Kh(st))K++;for(st=0,mt=tt;mt;mt=Kh(mt))st++;for(;0<K-st;)$t=Kh($t),K--;for(;0<st-K;)tt=Kh(tt),st--;for(;K--;){if($t===tt||tt!==null&&$t===tt.alternate)break e;$t=Kh($t),tt=Kh(tt)}$t=null}else $t=null;lt!==null&&U1(pt,at,lt,$t,!1),ee!==null&&fi!==null&&U1(pt,fi,ee,$t,!0)}}t:{if(at=rt?Yi(rt):window,lt=at.nodeName&&at.nodeName.toLowerCase(),lt==="select"||lt==="input"&&at.type==="file")var Lt=nx;else if(sx(at))if(ax)Lt=iw;else{Lt=tw;var be=KT}else lt=at.nodeName,!lt||lt.toLowerCase()!=="input"||at.type!=="checkbox"&&at.type!=="radio"?rt&&ig(rt.elementType)&&(Lt=nx):Lt=ew;if(Lt&&(Lt=Lt(h,rt))){rx(pt,Lt,g,yt);break t}be&&be(h,at,rt),h==="focusout"&&rt&&at.type==="number"&&rt.memoizedProps.value!=null&&eg(at,"number",at.value)}switch(be=rt?Yi(rt):window,h){case"focusin":(sx(be)||be.contentEditable==="true")&&(kh=be,mg=rt,uu=null);break;case"focusout":uu=mg=kh=null;break;case"mousedown":pg=!0;break;case"contextmenu":case"mouseup":case"dragend":pg=!1,gx(pt,g,yt);break;case"selectionchange":if(rw)break;case"keydown":case"keyup":gx(pt,g,yt)}var Yt;if(dg)t:{switch(h){case"compositionstart":var Jt="onCompositionStart";break t;case"compositionend":Jt="onCompositionEnd";break t;case"compositionupdate":Jt="onCompositionUpdate";break t}Jt=void 0}else Ch?ex(h,g)&&(Jt="onCompositionEnd"):h==="keydown"&&g.keyCode===229&&(Jt="onCompositionStart");Jt&&(QS&&g.locale!=="ko"&&(Ch||Jt!=="onCompositionStart"?Jt==="onCompositionEnd"&&Ch&&(Yt=$S()):(Oa=yt,og="value"in Oa?Oa.value:Oa.textContent,Ch=!0)),be=Kd(rt,Jt),0<be.length&&(Jt=new JS(Jt,h,null,g,yt),pt.push({event:Jt,listeners:be}),Yt?Jt.data=Yt:(Yt=ix(g),Yt!==null&&(Jt.data=Yt)))),(Yt=qT?jT(h,g):JT(h,g))&&(Jt=Kd(rt,"onBeforeInput"),0<Jt.length&&(be=new JS("onBeforeInput","beforeinput",null,g,yt),pt.push({event:be,listeners:Jt}),be.data=Yt)),Uw(pt,h,rt,g,yt)}P1(pt,c)})}function Pu(h,c,g){return{instance:h,listener:c,currentTarget:g}}function Kd(h,c){for(var g=c+"Capture",S=[];h!==null;){var M=h,D=M.stateNode;if(M=M.tag,M!==5&&M!==26&&M!==27||D===null||(M=iu(h,g),M!=null&&S.unshift(Pu(h,M,D)),M=iu(h,c),M!=null&&S.push(Pu(h,M,D))),h.tag===3)return S;h=h.return}return[]}function Kh(h){if(h===null)return null;do h=h.return;while(h&&h.tag!==5&&h.tag!==27);return h||null}function U1(h,c,g,S,M){for(var D=c._reactName,G=[];g!==null&&g!==S;){var $=g,Z=$.alternate,rt=$.stateNode;if($=$.tag,Z!==null&&Z===S)break;$!==5&&$!==26&&$!==27||rt===null||(Z=rt,M?(rt=iu(g,D),rt!=null&&G.unshift(Pu(g,rt,Z))):M||(rt=iu(g,D),rt!=null&&G.push(Pu(g,rt,Z)))),g=g.return}G.length!==0&&h.push({event:c,listeners:G})}var Hw=/\r\n?/g,Xw=/\u0000|\uFFFD/g;function O1(h){return(typeof h=="string"?h:""+h).replace(Hw,`
`).replace(Xw,"")}function G1(h,c){return c=O1(c),O1(h)===c}function tf(){}function di(h,c,g,S,M,D){switch(g){case"children":typeof S=="string"?c==="body"||c==="textarea"&&S===""||Eh(h,S):(typeof S=="number"||typeof S=="bigint")&&c!=="body"&&Eh(h,""+S);break;case"className":en(h,"class",S);break;case"tabIndex":en(h,"tabindex",S);break;case"dir":case"role":case"viewBox":case"width":case"height":en(h,g,S);break;case"style":HS(h,S,D);break;case"data":if(c!=="object"){en(h,"data",S);break}case"src":case"href":if(S===""&&(c!=="a"||g!=="href")){h.removeAttribute(g);break}if(S==null||typeof S=="function"||typeof S=="symbol"||typeof S=="boolean"){h.removeAttribute(g);break}S=hd(""+S),h.setAttribute(g,S);break;case"action":case"formAction":if(typeof S=="function"){h.setAttribute(g,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof D=="function"&&(g==="formAction"?(c!=="input"&&di(h,c,"name",M.name,M,null),di(h,c,"formEncType",M.formEncType,M,null),di(h,c,"formMethod",M.formMethod,M,null),di(h,c,"formTarget",M.formTarget,M,null)):(di(h,c,"encType",M.encType,M,null),di(h,c,"method",M.method,M,null),di(h,c,"target",M.target,M,null)));if(S==null||typeof S=="symbol"||typeof S=="boolean"){h.removeAttribute(g);break}S=hd(""+S),h.setAttribute(g,S);break;case"onClick":S!=null&&(h.onclick=tf);break;case"onScroll":S!=null&&ke("scroll",h);break;case"onScrollEnd":S!=null&&ke("scrollend",h);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(i(61));if(g=S.__html,g!=null){if(M.children!=null)throw Error(i(60));h.innerHTML=g}}break;case"multiple":h.multiple=S&&typeof S!="function"&&typeof S!="symbol";break;case"muted":h.muted=S&&typeof S!="function"&&typeof S!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(S==null||typeof S=="function"||typeof S=="boolean"||typeof S=="symbol"){h.removeAttribute("xlink:href");break}g=hd(""+S),h.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",g);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":S!=null&&typeof S!="function"&&typeof S!="symbol"?h.setAttribute(g,""+S):h.removeAttribute(g);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":S&&typeof S!="function"&&typeof S!="symbol"?h.setAttribute(g,""):h.removeAttribute(g);break;case"capture":case"download":S===!0?h.setAttribute(g,""):S!==!1&&S!=null&&typeof S!="function"&&typeof S!="symbol"?h.setAttribute(g,S):h.removeAttribute(g);break;case"cols":case"rows":case"size":case"span":S!=null&&typeof S!="function"&&typeof S!="symbol"&&!isNaN(S)&&1<=S?h.setAttribute(g,S):h.removeAttribute(g);break;case"rowSpan":case"start":S==null||typeof S=="function"||typeof S=="symbol"||isNaN(S)?h.removeAttribute(g):h.setAttribute(g,S);break;case"popover":ke("beforetoggle",h),ke("toggle",h),tn(h,"popover",S);break;case"xlinkActuate":ve(h,"http://www.w3.org/1999/xlink","xlink:actuate",S);break;case"xlinkArcrole":ve(h,"http://www.w3.org/1999/xlink","xlink:arcrole",S);break;case"xlinkRole":ve(h,"http://www.w3.org/1999/xlink","xlink:role",S);break;case"xlinkShow":ve(h,"http://www.w3.org/1999/xlink","xlink:show",S);break;case"xlinkTitle":ve(h,"http://www.w3.org/1999/xlink","xlink:title",S);break;case"xlinkType":ve(h,"http://www.w3.org/1999/xlink","xlink:type",S);break;case"xmlBase":ve(h,"http://www.w3.org/XML/1998/namespace","xml:base",S);break;case"xmlLang":ve(h,"http://www.w3.org/XML/1998/namespace","xml:lang",S);break;case"xmlSpace":ve(h,"http://www.w3.org/XML/1998/namespace","xml:space",S);break;case"is":tn(h,"is",S);break;case"innerText":case"textContent":break;default:(!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(g=vT.get(g)||g,tn(h,g,S))}}function Uy(h,c,g,S,M,D){switch(g){case"style":HS(h,S,D);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(i(61));if(g=S.__html,g!=null){if(M.children!=null)throw Error(i(60));h.innerHTML=g}}break;case"children":typeof S=="string"?Eh(h,S):(typeof S=="number"||typeof S=="bigint")&&Eh(h,""+S);break;case"onScroll":S!=null&&ke("scroll",h);break;case"onScrollEnd":S!=null&&ke("scrollend",h);break;case"onClick":S!=null&&(h.onclick=tf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!_i.hasOwnProperty(g))t:{if(g[0]==="o"&&g[1]==="n"&&(M=g.endsWith("Capture"),c=g.slice(2,M?g.length-7:void 0),D=h[Qt]||null,D=D!=null?D[g]:null,typeof D=="function"&&h.removeEventListener(c,D,M),typeof S=="function")){typeof D!="function"&&D!==null&&(g in h?h[g]=null:h.hasAttribute(g)&&h.removeAttribute(g)),h.addEventListener(c,S,M);break t}g in h?h[g]=S:S===!0?h.setAttribute(g,""):tn(h,g,S)}}}function Ns(h,c,g){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ke("error",h),ke("load",h);var S=!1,M=!1,D;for(D in g)if(g.hasOwnProperty(D)){var G=g[D];if(G!=null)switch(D){case"src":S=!0;break;case"srcSet":M=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,c));default:di(h,c,D,G,g,null)}}M&&di(h,c,"srcSet",g.srcSet,g,null),S&&di(h,c,"src",g.src,g,null);return;case"input":ke("invalid",h);var $=D=G=M=null,Z=null,rt=null;for(S in g)if(g.hasOwnProperty(S)){var yt=g[S];if(yt!=null)switch(S){case"name":M=yt;break;case"type":G=yt;break;case"checked":Z=yt;break;case"defaultChecked":rt=yt;break;case"value":D=yt;break;case"defaultValue":$=yt;break;case"children":case"dangerouslySetInnerHTML":if(yt!=null)throw Error(i(137,c));break;default:di(h,c,S,yt,g,null)}}US(h,D,$,Z,rt,G,M,!1),ad(h);return;case"select":ke("invalid",h),S=G=D=null;for(M in g)if(g.hasOwnProperty(M)&&($=g[M],$!=null))switch(M){case"value":D=$;break;case"defaultValue":G=$;break;case"multiple":S=$;default:di(h,c,M,$,g,null)}c=D,g=G,h.multiple=!!S,c!=null?Rh(h,!!S,c,!1):g!=null&&Rh(h,!!S,g,!0);return;case"textarea":ke("invalid",h),D=M=S=null;for(G in g)if(g.hasOwnProperty(G)&&($=g[G],$!=null))switch(G){case"value":S=$;break;case"defaultValue":M=$;break;case"children":D=$;break;case"dangerouslySetInnerHTML":if($!=null)throw Error(i(91));break;default:di(h,c,G,$,g,null)}GS(h,S,M,D),ad(h);return;case"option":for(Z in g)if(g.hasOwnProperty(Z)&&(S=g[Z],S!=null))switch(Z){case"selected":h.selected=S&&typeof S!="function"&&typeof S!="symbol";break;default:di(h,c,Z,S,g,null)}return;case"dialog":ke("beforetoggle",h),ke("toggle",h),ke("cancel",h),ke("close",h);break;case"iframe":case"object":ke("load",h);break;case"video":case"audio":for(S=0;S<Bu.length;S++)ke(Bu[S],h);break;case"image":ke("error",h),ke("load",h);break;case"details":ke("toggle",h);break;case"embed":case"source":case"link":ke("error",h),ke("load",h);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(rt in g)if(g.hasOwnProperty(rt)&&(S=g[rt],S!=null))switch(rt){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,c));default:di(h,c,rt,S,g,null)}return;default:if(ig(c)){for(yt in g)g.hasOwnProperty(yt)&&(S=g[yt],S!==void 0&&Uy(h,c,yt,S,g,void 0));return}}for($ in g)g.hasOwnProperty($)&&(S=g[$],S!=null&&di(h,c,$,S,g,null))}function Ww(h,c,g,S){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var M=null,D=null,G=null,$=null,Z=null,rt=null,yt=null;for(lt in g){var pt=g[lt];if(g.hasOwnProperty(lt)&&pt!=null)switch(lt){case"checked":break;case"value":break;case"defaultValue":Z=pt;default:S.hasOwnProperty(lt)||di(h,c,lt,null,S,pt)}}for(var at in S){var lt=S[at];if(pt=g[at],S.hasOwnProperty(at)&&(lt!=null||pt!=null))switch(at){case"type":D=lt;break;case"name":M=lt;break;case"checked":rt=lt;break;case"defaultChecked":yt=lt;break;case"value":G=lt;break;case"defaultValue":$=lt;break;case"children":case"dangerouslySetInnerHTML":if(lt!=null)throw Error(i(137,c));break;default:lt!==pt&&di(h,c,at,lt,S,pt)}}tg(h,G,$,Z,rt,yt,D,M);return;case"select":lt=G=$=at=null;for(D in g)if(Z=g[D],g.hasOwnProperty(D)&&Z!=null)switch(D){case"value":break;case"multiple":lt=Z;default:S.hasOwnProperty(D)||di(h,c,D,null,S,Z)}for(M in S)if(D=S[M],Z=g[M],S.hasOwnProperty(M)&&(D!=null||Z!=null))switch(M){case"value":at=D;break;case"defaultValue":$=D;break;case"multiple":G=D;default:D!==Z&&di(h,c,M,D,S,Z)}c=$,g=G,S=lt,at!=null?Rh(h,!!g,at,!1):!!S!=!!g&&(c!=null?Rh(h,!!g,c,!0):Rh(h,!!g,g?[]:"",!1));return;case"textarea":lt=at=null;for($ in g)if(M=g[$],g.hasOwnProperty($)&&M!=null&&!S.hasOwnProperty($))switch($){case"value":break;case"children":break;default:di(h,c,$,null,S,M)}for(G in S)if(M=S[G],D=g[G],S.hasOwnProperty(G)&&(M!=null||D!=null))switch(G){case"value":at=M;break;case"defaultValue":lt=M;break;case"children":break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(i(91));break;default:M!==D&&di(h,c,G,M,S,D)}OS(h,at,lt);return;case"option":for(var ee in g)if(at=g[ee],g.hasOwnProperty(ee)&&at!=null&&!S.hasOwnProperty(ee))switch(ee){case"selected":h.selected=!1;break;default:di(h,c,ee,null,S,at)}for(Z in S)if(at=S[Z],lt=g[Z],S.hasOwnProperty(Z)&&at!==lt&&(at!=null||lt!=null))switch(Z){case"selected":h.selected=at&&typeof at!="function"&&typeof at!="symbol";break;default:di(h,c,Z,at,S,lt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var $t in g)at=g[$t],g.hasOwnProperty($t)&&at!=null&&!S.hasOwnProperty($t)&&di(h,c,$t,null,S,at);for(rt in S)if(at=S[rt],lt=g[rt],S.hasOwnProperty(rt)&&at!==lt&&(at!=null||lt!=null))switch(rt){case"children":case"dangerouslySetInnerHTML":if(at!=null)throw Error(i(137,c));break;default:di(h,c,rt,at,S,lt)}return;default:if(ig(c)){for(var fi in g)at=g[fi],g.hasOwnProperty(fi)&&at!==void 0&&!S.hasOwnProperty(fi)&&Uy(h,c,fi,void 0,S,at);for(yt in S)at=S[yt],lt=g[yt],!S.hasOwnProperty(yt)||at===lt||at===void 0&&lt===void 0||Uy(h,c,yt,at,S,lt);return}}for(var tt in g)at=g[tt],g.hasOwnProperty(tt)&&at!=null&&!S.hasOwnProperty(tt)&&di(h,c,tt,null,S,at);for(pt in S)at=S[pt],lt=g[pt],!S.hasOwnProperty(pt)||at===lt||at==null&&lt==null||di(h,c,pt,at,S,lt)}var Oy=null,Gy=null;function ef(h){return h.nodeType===9?h:h.ownerDocument}function Y1(h){switch(h){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function H1(h,c){if(h===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return h===1&&c==="foreignObject"?0:h}function Yy(h,c){return h==="textarea"||h==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Hy=null;function $w(){var h=window.event;return h&&h.type==="popstate"?h===Hy?!1:(Hy=h,!0):(Hy=null,!1)}var X1=typeof setTimeout=="function"?setTimeout:void 0,qw=typeof clearTimeout=="function"?clearTimeout:void 0,W1=typeof Promise=="function"?Promise:void 0,jw=typeof queueMicrotask=="function"?queueMicrotask:typeof W1<"u"?function(h){return W1.resolve(null).then(h).catch(Jw)}:X1;function Jw(h){setTimeout(function(){throw h})}function so(h){return h==="head"}function $1(h,c){var g=c,S=0,M=0;do{var D=g.nextSibling;if(h.removeChild(g),D&&D.nodeType===8)if(g=D.data,g==="/$"){if(0<S&&8>S){g=S;var G=h.ownerDocument;if(g&1&&Iu(G.documentElement),g&2&&Iu(G.body),g&4)for(g=G.head,Iu(g),G=g.firstChild;G;){var $=G.nextSibling,Z=G.nodeName;G[Ve]||Z==="SCRIPT"||Z==="STYLE"||Z==="LINK"&&G.rel.toLowerCase()==="stylesheet"||g.removeChild(G),G=$}}if(M===0){h.removeChild(D),$u(c);return}M--}else g==="$"||g==="$?"||g==="$!"?M++:S=g.charCodeAt(0)-48;else S=0;g=D}while(g);$u(c)}function Xy(h){var c=h.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var g=c;switch(c=c.nextSibling,g.nodeName){case"HTML":case"HEAD":case"BODY":Xy(g),Gi(g);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(g.rel.toLowerCase()==="stylesheet")continue}h.removeChild(g)}}function Zw(h,c,g,S){for(;h.nodeType===1;){var M=g;if(h.nodeName.toLowerCase()!==c.toLowerCase()){if(!S&&(h.nodeName!=="INPUT"||h.type!=="hidden"))break}else if(S){if(!h[Ve])switch(c){case"meta":if(!h.hasAttribute("itemprop"))break;return h;case"link":if(D=h.getAttribute("rel"),D==="stylesheet"&&h.hasAttribute("data-precedence"))break;if(D!==M.rel||h.getAttribute("href")!==(M.href==null||M.href===""?null:M.href)||h.getAttribute("crossorigin")!==(M.crossOrigin==null?null:M.crossOrigin)||h.getAttribute("title")!==(M.title==null?null:M.title))break;return h;case"style":if(h.hasAttribute("data-precedence"))break;return h;case"script":if(D=h.getAttribute("src"),(D!==(M.src==null?null:M.src)||h.getAttribute("type")!==(M.type==null?null:M.type)||h.getAttribute("crossorigin")!==(M.crossOrigin==null?null:M.crossOrigin))&&D&&h.hasAttribute("async")&&!h.hasAttribute("itemprop"))break;return h;default:return h}}else if(c==="input"&&h.type==="hidden"){var D=M.name==null?null:""+M.name;if(M.type==="hidden"&&h.getAttribute("name")===D)return h}else return h;if(h=Rn(h.nextSibling),h===null)break}return null}function Qw(h,c,g){if(c==="")return null;for(;h.nodeType!==3;)if((h.nodeType!==1||h.nodeName!=="INPUT"||h.type!=="hidden")&&!g||(h=Rn(h.nextSibling),h===null))return null;return h}function Wy(h){return h.data==="$!"||h.data==="$?"&&h.ownerDocument.readyState==="complete"}function Kw(h,c){var g=h.ownerDocument;if(h.data!=="$?"||g.readyState==="complete")c();else{var S=function(){c(),g.removeEventListener("DOMContentLoaded",S)};g.addEventListener("DOMContentLoaded",S),h._reactRetry=S}}function Rn(h){for(;h!=null;h=h.nextSibling){var c=h.nodeType;if(c===1||c===3)break;if(c===8){if(c=h.data,c==="$"||c==="$!"||c==="$?"||c==="F!"||c==="F")break;if(c==="/$")return null}}return h}var $y=null;function q1(h){h=h.previousSibling;for(var c=0;h;){if(h.nodeType===8){var g=h.data;if(g==="$"||g==="$!"||g==="$?"){if(c===0)return h;c--}else g==="/$"&&c++}h=h.previousSibling}return null}function j1(h,c,g){switch(c=ef(g),h){case"html":if(h=c.documentElement,!h)throw Error(i(452));return h;case"head":if(h=c.head,!h)throw Error(i(453));return h;case"body":if(h=c.body,!h)throw Error(i(454));return h;default:throw Error(i(451))}}function Iu(h){for(var c=h.attributes;c.length;)h.removeAttributeNode(c[0]);Gi(h)}var cn=new Map,J1=new Set;function sf(h){return typeof h.getRootNode=="function"?h.getRootNode():h.nodeType===9?h:h.ownerDocument}var va=U.d;U.d={f:tC,r:eC,D:iC,C:sC,L:rC,m:nC,X:oC,S:aC,M:hC};function tC(){var h=va.f(),c=$d();return h||c}function eC(h){var c=ns(h);c!==null&&c.tag===5&&c.type==="form"?mA(c):va.r(h)}var tl=typeof document>"u"?null:document;function Z1(h,c,g){var S=tl;if(S&&typeof c=="string"&&c){var M=rn(c);M='link[rel="'+h+'"][href="'+M+'"]',typeof g=="string"&&(M+='[crossorigin="'+g+'"]'),J1.has(M)||(J1.add(M),h={rel:h,crossOrigin:g,href:c},S.querySelector(M)===null&&(c=S.createElement("link"),Ns(c,"link",h),Xt(c),S.head.appendChild(c)))}}function iC(h){va.D(h),Z1("dns-prefetch",h,null)}function sC(h,c){va.C(h,c),Z1("preconnect",h,c)}function rC(h,c,g){va.L(h,c,g);var S=tl;if(S&&h&&c){var M='link[rel="preload"][as="'+rn(c)+'"]';c==="image"&&g&&g.imageSrcSet?(M+='[imagesrcset="'+rn(g.imageSrcSet)+'"]',typeof g.imageSizes=="string"&&(M+='[imagesizes="'+rn(g.imageSizes)+'"]')):M+='[href="'+rn(h)+'"]';var D=M;switch(c){case"style":D=el(h);break;case"script":D=il(h)}cn.has(D)||(h=d({rel:"preload",href:c==="image"&&g&&g.imageSrcSet?void 0:h,as:c},g),cn.set(D,h),S.querySelector(M)!==null||c==="style"&&S.querySelector(Uu(D))||c==="script"&&S.querySelector(Ou(D))||(c=S.createElement("link"),Ns(c,"link",h),Xt(c),S.head.appendChild(c)))}}function nC(h,c){va.m(h,c);var g=tl;if(g&&h){var S=c&&typeof c.as=="string"?c.as:"script",M='link[rel="modulepreload"][as="'+rn(S)+'"][href="'+rn(h)+'"]',D=M;switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":D=il(h)}if(!cn.has(D)&&(h=d({rel:"modulepreload",href:h},c),cn.set(D,h),g.querySelector(M)===null)){switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(g.querySelector(Ou(D)))return}S=g.createElement("link"),Ns(S,"link",h),Xt(S),g.head.appendChild(S)}}}function aC(h,c,g){va.S(h,c,g);var S=tl;if(S&&h){var M=bt(S).hoistableStyles,D=el(h);c=c||"default";var G=M.get(D);if(!G){var $={loading:0,preload:null};if(G=S.querySelector(Uu(D)))$.loading=5;else{h=d({rel:"stylesheet",href:h,"data-precedence":c},g),(g=cn.get(D))&&qy(h,g);var Z=G=S.createElement("link");Xt(Z),Ns(Z,"link",h),Z._p=new Promise(function(rt,yt){Z.onload=rt,Z.onerror=yt}),Z.addEventListener("load",function(){$.loading|=1}),Z.addEventListener("error",function(){$.loading|=2}),$.loading|=4,rf(G,c,S)}G={type:"stylesheet",instance:G,count:1,state:$},M.set(D,G)}}}function oC(h,c){va.X(h,c);var g=tl;if(g&&h){var S=bt(g).hoistableScripts,M=il(h),D=S.get(M);D||(D=g.querySelector(Ou(M)),D||(h=d({src:h,async:!0},c),(c=cn.get(M))&&jy(h,c),D=g.createElement("script"),Xt(D),Ns(D,"link",h),g.head.appendChild(D)),D={type:"script",instance:D,count:1,state:null},S.set(M,D))}}function hC(h,c){va.M(h,c);var g=tl;if(g&&h){var S=bt(g).hoistableScripts,M=il(h),D=S.get(M);D||(D=g.querySelector(Ou(M)),D||(h=d({src:h,async:!0,type:"module"},c),(c=cn.get(M))&&jy(h,c),D=g.createElement("script"),Xt(D),Ns(D,"link",h),g.head.appendChild(D)),D={type:"script",instance:D,count:1,state:null},S.set(M,D))}}function Q1(h,c,g,S){var M=(M=ht.current)?sf(M):null;if(!M)throw Error(i(446));switch(h){case"meta":case"title":return null;case"style":return typeof g.precedence=="string"&&typeof g.href=="string"?(c=el(g.href),g=bt(M).hoistableStyles,S=g.get(c),S||(S={type:"style",instance:null,count:0,state:null},g.set(c,S)),S):{type:"void",instance:null,count:0,state:null};case"link":if(g.rel==="stylesheet"&&typeof g.href=="string"&&typeof g.precedence=="string"){h=el(g.href);var D=bt(M).hoistableStyles,G=D.get(h);if(G||(M=M.ownerDocument||M,G={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},D.set(h,G),(D=M.querySelector(Uu(h)))&&!D._p&&(G.instance=D,G.state.loading=5),cn.has(h)||(g={rel:"preload",as:"style",href:g.href,crossOrigin:g.crossOrigin,integrity:g.integrity,media:g.media,hrefLang:g.hrefLang,referrerPolicy:g.referrerPolicy},cn.set(h,g),D||lC(M,h,g,G.state))),c&&S===null)throw Error(i(528,""));return G}if(c&&S!==null)throw Error(i(529,""));return null;case"script":return c=g.async,g=g.src,typeof g=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=il(g),g=bt(M).hoistableScripts,S=g.get(c),S||(S={type:"script",instance:null,count:0,state:null},g.set(c,S)),S):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,h))}}function el(h){return'href="'+rn(h)+'"'}function Uu(h){return'link[rel="stylesheet"]['+h+"]"}function K1(h){return d({},h,{"data-precedence":h.precedence,precedence:null})}function lC(h,c,g,S){h.querySelector('link[rel="preload"][as="style"]['+c+"]")?S.loading=1:(c=h.createElement("link"),S.preload=c,c.addEventListener("load",function(){return S.loading|=1}),c.addEventListener("error",function(){return S.loading|=2}),Ns(c,"link",g),Xt(c),h.head.appendChild(c))}function il(h){return'[src="'+rn(h)+'"]'}function Ou(h){return"script[async]"+h}function tv(h,c,g){if(c.count++,c.instance===null)switch(c.type){case"style":var S=h.querySelector('style[data-href~="'+rn(g.href)+'"]');if(S)return c.instance=S,Xt(S),S;var M=d({},g,{"data-href":g.href,"data-precedence":g.precedence,href:null,precedence:null});return S=(h.ownerDocument||h).createElement("style"),Xt(S),Ns(S,"style",M),rf(S,g.precedence,h),c.instance=S;case"stylesheet":M=el(g.href);var D=h.querySelector(Uu(M));if(D)return c.state.loading|=4,c.instance=D,Xt(D),D;S=K1(g),(M=cn.get(M))&&qy(S,M),D=(h.ownerDocument||h).createElement("link"),Xt(D);var G=D;return G._p=new Promise(function($,Z){G.onload=$,G.onerror=Z}),Ns(D,"link",S),c.state.loading|=4,rf(D,g.precedence,h),c.instance=D;case"script":return D=il(g.src),(M=h.querySelector(Ou(D)))?(c.instance=M,Xt(M),M):(S=g,(M=cn.get(D))&&(S=d({},g),jy(S,M)),h=h.ownerDocument||h,M=h.createElement("script"),Xt(M),Ns(M,"link",S),h.head.appendChild(M),c.instance=M);case"void":return null;default:throw Error(i(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(S=c.instance,c.state.loading|=4,rf(S,g.precedence,h));return c.instance}function rf(h,c,g){for(var S=g.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),M=S.length?S[S.length-1]:null,D=M,G=0;G<S.length;G++){var $=S[G];if($.dataset.precedence===c)D=$;else if(D!==M)break}D?D.parentNode.insertBefore(h,D.nextSibling):(c=g.nodeType===9?g.head:g,c.insertBefore(h,c.firstChild))}function qy(h,c){h.crossOrigin==null&&(h.crossOrigin=c.crossOrigin),h.referrerPolicy==null&&(h.referrerPolicy=c.referrerPolicy),h.title==null&&(h.title=c.title)}function jy(h,c){h.crossOrigin==null&&(h.crossOrigin=c.crossOrigin),h.referrerPolicy==null&&(h.referrerPolicy=c.referrerPolicy),h.integrity==null&&(h.integrity=c.integrity)}var nf=null;function ev(h,c,g){if(nf===null){var S=new Map,M=nf=new Map;M.set(g,S)}else M=nf,S=M.get(g),S||(S=new Map,M.set(g,S));if(S.has(h))return S;for(S.set(h,null),g=g.getElementsByTagName(h),M=0;M<g.length;M++){var D=g[M];if(!(D[Ve]||D[It]||h==="link"&&D.getAttribute("rel")==="stylesheet")&&D.namespaceURI!=="http://www.w3.org/2000/svg"){var G=D.getAttribute(c)||"";G=h+G;var $=S.get(G);$?$.push(D):S.set(G,[D])}}return S}function iv(h,c,g){h=h.ownerDocument||h,h.head.insertBefore(g,c==="title"?h.querySelector("head > title"):null)}function uC(h,c,g){if(g===1||c.itemProp!=null)return!1;switch(h){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return h=c.disabled,typeof c.precedence=="string"&&h==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function sv(h){return!(h.type==="stylesheet"&&(h.state.loading&3)===0)}var Gu=null;function cC(){}function dC(h,c,g){if(Gu===null)throw Error(i(475));var S=Gu;if(c.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var M=el(g.href),D=h.querySelector(Uu(M));if(D){h=D._p,h!==null&&typeof h=="object"&&typeof h.then=="function"&&(S.count++,S=af.bind(S),h.then(S,S)),c.state.loading|=4,c.instance=D,Xt(D);return}D=h.ownerDocument||h,g=K1(g),(M=cn.get(M))&&qy(g,M),D=D.createElement("link"),Xt(D);var G=D;G._p=new Promise(function($,Z){G.onload=$,G.onerror=Z}),Ns(D,"link",g),c.instance=D}S.stylesheets===null&&(S.stylesheets=new Map),S.stylesheets.set(c,h),(h=c.state.preload)&&(c.state.loading&3)===0&&(S.count++,c=af.bind(S),h.addEventListener("load",c),h.addEventListener("error",c))}}function fC(){if(Gu===null)throw Error(i(475));var h=Gu;return h.stylesheets&&h.count===0&&Jy(h,h.stylesheets),0<h.count?function(c){var g=setTimeout(function(){if(h.stylesheets&&Jy(h,h.stylesheets),h.unsuspend){var S=h.unsuspend;h.unsuspend=null,S()}},6e4);return h.unsuspend=c,function(){h.unsuspend=null,clearTimeout(g)}}:null}function af(){if(this.count--,this.count===0){if(this.stylesheets)Jy(this,this.stylesheets);else if(this.unsuspend){var h=this.unsuspend;this.unsuspend=null,h()}}}var of=null;function Jy(h,c){h.stylesheets=null,h.unsuspend!==null&&(h.count++,of=new Map,c.forEach(gC,h),of=null,af.call(h))}function gC(h,c){if(!(c.state.loading&4)){var g=of.get(h);if(g)var S=g.get(null);else{g=new Map,of.set(h,g);for(var M=h.querySelectorAll("link[data-precedence],style[data-precedence]"),D=0;D<M.length;D++){var G=M[D];(G.nodeName==="LINK"||G.getAttribute("media")!=="not all")&&(g.set(G.dataset.precedence,G),S=G)}S&&g.set(null,S)}M=c.instance,G=M.getAttribute("data-precedence"),D=g.get(G)||S,D===S&&g.set(null,M),g.set(G,M),this.count++,S=af.bind(this),M.addEventListener("load",S),M.addEventListener("error",S),D?D.parentNode.insertBefore(M,D.nextSibling):(h=h.nodeType===9?h.head:h,h.insertBefore(M,h.firstChild)),c.state.loading|=4}}var Yu={$$typeof:E,Provider:null,Consumer:null,_currentValue:O,_currentValue2:O,_threadCount:0};function yC(h,c,g,S,M,D,G,$){this.tag=1,this.containerInfo=h,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=he(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=he(0),this.hiddenUpdates=he(null),this.identifierPrefix=S,this.onUncaughtError=M,this.onCaughtError=D,this.onRecoverableError=G,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=$,this.incompleteTransitions=new Map}function rv(h,c,g,S,M,D,G,$,Z,rt,yt,pt){return h=new yC(h,c,g,G,$,Z,rt,pt),c=1,D===!0&&(c|=24),D=Lr(3,null,null,c),h.current=D,D.stateNode=h,c=Fg(),c.refCount++,h.pooledCache=c,c.refCount++,D.memoizedState={element:S,isDehydrated:g,cache:c},Ng(D),h}function nv(h){return h?(h=zh,h):zh}function av(h,c,g,S,M,D){M=nv(M),S.context===null?S.context=M:S.pendingContext=M,S=Ha(c),S.payload={element:g},D=D===void 0?null:D,D!==null&&(S.callback=D),g=Xa(h,S,c),g!==null&&(Or(g,h,c),xu(g,h,c))}function ov(h,c){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var g=h.retryLane;h.retryLane=g!==0&&g<c?g:c}}function Zy(h,c){ov(h,c),(h=h.alternate)&&ov(h,c)}function hv(h){if(h.tag===13){var c=Vh(h,67108864);c!==null&&Or(c,h,67108864),Zy(h,67108864)}}var hf=!0;function mC(h,c,g,S){var M=N.T;N.T=null;var D=U.p;try{U.p=2,Qy(h,c,g,S)}finally{U.p=D,N.T=M}}function pC(h,c,g,S){var M=N.T;N.T=null;var D=U.p;try{U.p=8,Qy(h,c,g,S)}finally{U.p=D,N.T=M}}function Qy(h,c,g,S){if(hf){var M=Ky(S);if(M===null)Iy(h,c,S,lf,g),uv(h,S);else if(xC(M,h,c,g,S))S.stopPropagation();else if(uv(h,S),c&4&&-1<SC.indexOf(h)){for(;M!==null;){var D=ns(M);if(D!==null)switch(D.tag){case 3:if(D=D.stateNode,D.current.memoizedState.isDehydrated){var G=Ot(D.pendingLanes);if(G!==0){var $=D;for($.pendingLanes|=2,$.entangledLanes|=2;G;){var Z=1<<31-mi(G);$.entanglements[1]|=Z,G&=~Z}Un(D),(oi&6)===0&&(Xd=Oi()+500,Lu(0))}}break;case 13:$=Vh(D,2),$!==null&&Or($,D,2),$d(),Zy(D,2)}if(D=Ky(S),D===null&&Iy(h,c,S,lf,g),D===M)break;M=D}M!==null&&S.stopPropagation()}else Iy(h,c,S,null,g)}}function Ky(h){return h=rg(h),tm(h)}var lf=null;function tm(h){if(lf=null,h=zi(h),h!==null){var c=n(h);if(c===null)h=null;else{var g=c.tag;if(g===13){if(h=a(c),h!==null)return h;h=null}else if(g===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;h=null}else c!==h&&(h=null)}}return lf=h,null}function lv(h){switch(h){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ye()){case Ee:return 2;case Kr:return 8;case Qe:case ai:return 32;case dr:return 268435456;default:return 32}default:return 32}}var em=!1,ro=null,no=null,ao=null,Hu=new Map,Xu=new Map,oo=[],SC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function uv(h,c){switch(h){case"focusin":case"focusout":ro=null;break;case"dragenter":case"dragleave":no=null;break;case"mouseover":case"mouseout":ao=null;break;case"pointerover":case"pointerout":Hu.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xu.delete(c.pointerId)}}function Wu(h,c,g,S,M,D){return h===null||h.nativeEvent!==D?(h={blockedOn:c,domEventName:g,eventSystemFlags:S,nativeEvent:D,targetContainers:[M]},c!==null&&(c=ns(c),c!==null&&hv(c)),h):(h.eventSystemFlags|=S,c=h.targetContainers,M!==null&&c.indexOf(M)===-1&&c.push(M),h)}function xC(h,c,g,S,M){switch(c){case"focusin":return ro=Wu(ro,h,c,g,S,M),!0;case"dragenter":return no=Wu(no,h,c,g,S,M),!0;case"mouseover":return ao=Wu(ao,h,c,g,S,M),!0;case"pointerover":var D=M.pointerId;return Hu.set(D,Wu(Hu.get(D)||null,h,c,g,S,M)),!0;case"gotpointercapture":return D=M.pointerId,Xu.set(D,Wu(Xu.get(D)||null,h,c,g,S,M)),!0}return!1}function cv(h){var c=zi(h.target);if(c!==null){var g=n(c);if(g!==null){if(c=g.tag,c===13){if(c=a(g),c!==null){h.blockedOn=c,ri(h.priority,function(){if(g.tag===13){var S=Ur();S=we(S);var M=Vh(g,S);M!==null&&Or(M,g,S),Zy(g,S)}});return}}else if(c===3&&g.stateNode.current.memoizedState.isDehydrated){h.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}h.blockedOn=null}function uf(h){if(h.blockedOn!==null)return!1;for(var c=h.targetContainers;0<c.length;){var g=Ky(h.nativeEvent);if(g===null){g=h.nativeEvent;var S=new g.constructor(g.type,g);sg=S,g.target.dispatchEvent(S),sg=null}else return c=ns(g),c!==null&&hv(c),h.blockedOn=g,!1;c.shift()}return!0}function dv(h,c,g){uf(h)&&g.delete(c)}function AC(){em=!1,ro!==null&&uf(ro)&&(ro=null),no!==null&&uf(no)&&(no=null),ao!==null&&uf(ao)&&(ao=null),Hu.forEach(dv),Xu.forEach(dv)}function cf(h,c){h.blockedOn===c&&(h.blockedOn=null,em||(em=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,AC)))}var df=null;function fv(h){df!==h&&(df=h,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){df===h&&(df=null);for(var c=0;c<h.length;c+=3){var g=h[c],S=h[c+1],M=h[c+2];if(typeof S!="function"){if(tm(S||g)===null)continue;break}var D=ns(g);D!==null&&(h.splice(c,3),c-=3,ty(D,{pending:!0,data:M,method:g.method,action:S},S,M))}}))}function $u(h){function c(Z){return cf(Z,h)}ro!==null&&cf(ro,h),no!==null&&cf(no,h),ao!==null&&cf(ao,h),Hu.forEach(c),Xu.forEach(c);for(var g=0;g<oo.length;g++){var S=oo[g];S.blockedOn===h&&(S.blockedOn=null)}for(;0<oo.length&&(g=oo[0],g.blockedOn===null);)cv(g),g.blockedOn===null&&oo.shift();if(g=(h.ownerDocument||h).$$reactFormReplay,g!=null)for(S=0;S<g.length;S+=3){var M=g[S],D=g[S+1],G=M[Qt]||null;if(typeof D=="function")G||fv(g);else if(G){var $=null;if(D&&D.hasAttribute("formAction")){if(M=D,G=D[Qt]||null)$=G.formAction;else if(tm(M)!==null)continue}else $=G.action;typeof $=="function"?g[S+1]=$:(g.splice(S,3),S-=3),fv(g)}}}function im(h){this._internalRoot=h}ff.prototype.render=im.prototype.render=function(h){var c=this._internalRoot;if(c===null)throw Error(i(409));var g=c.current,S=Ur();av(g,S,h,c,null,null)},ff.prototype.unmount=im.prototype.unmount=function(){var h=this._internalRoot;if(h!==null){this._internalRoot=null;var c=h.containerInfo;av(h.current,2,null,h,null,null),$d(),c[Fs]=null}};function ff(h){this._internalRoot=h}ff.prototype.unstable_scheduleHydration=function(h){if(h){var c=pi();h={blockedOn:null,target:h,priority:c};for(var g=0;g<oo.length&&c!==0&&c<oo[g].priority;g++);oo.splice(g,0,h),g===0&&cv(h)}};var gv=t.version;if(gv!=="19.1.0")throw Error(i(527,gv,"19.1.0"));U.findDOMNode=function(h){var c=h._reactInternals;if(c===void 0)throw typeof h.render=="function"?Error(i(188)):(h=Object.keys(h).join(","),Error(i(268,h)));return h=l(c),h=h!==null?u(h):null,h=h===null?null:h.stateNode,h};var vC={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:N,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gf.isDisabled&&gf.supportsFiber)try{vi=gf.inject(vC),ge=gf}catch{}}return ju.createRoot=function(h,c){if(!s(h))throw Error(i(299));var g=!1,S="",M=DA,D=FA,G=VA,$=null;return c!=null&&(c.unstable_strictMode===!0&&(g=!0),c.identifierPrefix!==void 0&&(S=c.identifierPrefix),c.onUncaughtError!==void 0&&(M=c.onUncaughtError),c.onCaughtError!==void 0&&(D=c.onCaughtError),c.onRecoverableError!==void 0&&(G=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&($=c.unstable_transitionCallbacks)),c=rv(h,1,!1,null,null,g,S,M,D,G,$,null),h[Fs]=c.current,Py(h),new im(c)},ju.hydrateRoot=function(h,c,g){if(!s(h))throw Error(i(299));var S=!1,M="",D=DA,G=FA,$=VA,Z=null,rt=null;return g!=null&&(g.unstable_strictMode===!0&&(S=!0),g.identifierPrefix!==void 0&&(M=g.identifierPrefix),g.onUncaughtError!==void 0&&(D=g.onUncaughtError),g.onCaughtError!==void 0&&(G=g.onCaughtError),g.onRecoverableError!==void 0&&($=g.onRecoverableError),g.unstable_transitionCallbacks!==void 0&&(Z=g.unstable_transitionCallbacks),g.formState!==void 0&&(rt=g.formState)),c=rv(h,1,!0,c,g??null,S,M,D,G,$,Z,rt),c.context=nv(null),g=c.current,S=Ur(),S=we(S),M=Ha(S),M.callback=null,Xa(g,M,S),g=S,c.current.lanes=g,fe(c,g),Un(c),h[Fs]=c.current,Py(h),new ff(c)},ju.version="19.1.0",ju}var Rv;function VC(){if(Rv)return nm.exports;Rv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),nm.exports=FC(),nm.exports}var zC=VC(),Ju={},Ev;function _C(){if(Ev)return Ju;Ev=1,Object.defineProperty(Ju,"__esModule",{value:!0}),Ju.parse=a,Ju.serialize=u;const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,e=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,n=(()=>{const y=function(){};return y.prototype=Object.create(null),y})();function a(y,m){const p=new n,x=y.length;if(x<2)return p;const b=(m==null?void 0:m.decode)||d;let v=0;do{const R=y.indexOf("=",v);if(R===-1)break;const E=y.indexOf(";",v),V=E===-1?x:E;if(R>V){v=y.lastIndexOf(";",R-1)+1;continue}const F=o(y,v,R),L=l(y,R,F),z=y.slice(F,L);if(p[z]===void 0){let B=o(y,R+1,V),A=l(y,V,B);const T=b(y.slice(B,A));p[z]=T}v=V+1}while(v<x);return p}function o(y,m,p){do{const x=y.charCodeAt(m);if(x!==32&&x!==9)return m}while(++m<p);return p}function l(y,m,p){for(;m>p;){const x=y.charCodeAt(--m);if(x!==32&&x!==9)return m+1}return p}function u(y,m,p){const x=(p==null?void 0:p.encode)||encodeURIComponent;if(!r.test(y))throw new TypeError(`argument name is invalid: ${y}`);const b=x(m);if(!t.test(b))throw new TypeError(`argument val is invalid: ${m}`);let v=y+"="+b;if(!p)return v;if(p.maxAge!==void 0){if(!Number.isInteger(p.maxAge))throw new TypeError(`option maxAge is invalid: ${p.maxAge}`);v+="; Max-Age="+p.maxAge}if(p.domain){if(!e.test(p.domain))throw new TypeError(`option domain is invalid: ${p.domain}`);v+="; Domain="+p.domain}if(p.path){if(!i.test(p.path))throw new TypeError(`option path is invalid: ${p.path}`);v+="; Path="+p.path}if(p.expires){if(!f(p.expires)||!Number.isFinite(p.expires.valueOf()))throw new TypeError(`option expires is invalid: ${p.expires}`);v+="; Expires="+p.expires.toUTCString()}if(p.httpOnly&&(v+="; HttpOnly"),p.secure&&(v+="; Secure"),p.partitioned&&(v+="; Partitioned"),p.priority)switch(typeof p.priority=="string"?p.priority.toLowerCase():void 0){case"low":v+="; Priority=Low";break;case"medium":v+="; Priority=Medium";break;case"high":v+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${p.priority}`)}if(p.sameSite)switch(typeof p.sameSite=="string"?p.sameSite.toLowerCase():p.sameSite){case!0:case"strict":v+="; SameSite=Strict";break;case"lax":v+="; SameSite=Lax";break;case"none":v+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${p.sameSite}`)}return v}function d(y){if(y.indexOf("%")===-1)return y;try{return decodeURIComponent(y)}catch{return y}}function f(y){return s.call(y)==="[object Date]"}return Ju}_C();var Tv="popstate";function NC(r={}){function t(i,s){let{pathname:n,search:a,hash:o}=i.location;return Um("",{pathname:n,search:a,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function e(i,s){return typeof s=="string"?s:mc(s)}return BC(t,e,null,r)}function Pi(r,t){if(r===!1||r===null||typeof r>"u")throw new Error(t)}function Qn(r,t){if(!r){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function LC(){return Math.random().toString(36).substring(2,10)}function wv(r,t){return{usr:r.state,key:r.key,idx:t}}function Um(r,t,e=null,i){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof t=="string"?Nl(t):t,state:e,key:t&&t.key||i||LC()}}function mc({pathname:r="/",search:t="",hash:e=""}){return t&&t!=="?"&&(r+=t.charAt(0)==="?"?t:"?"+t),e&&e!=="#"&&(r+=e.charAt(0)==="#"?e:"#"+e),r}function Nl(r){let t={};if(r){let e=r.indexOf("#");e>=0&&(t.hash=r.substring(e),r=r.substring(0,e));let i=r.indexOf("?");i>=0&&(t.search=r.substring(i),r=r.substring(0,i)),r&&(t.pathname=r)}return t}function BC(r,t,e,i={}){let{window:s=document.defaultView,v5Compat:n=!1}=i,a=s.history,o="POP",l=null,u=d();u==null&&(u=0,a.replaceState({...a.state,idx:u},""));function d(){return(a.state||{idx:null}).idx}function f(){o="POP";let b=d(),v=b==null?null:b-u;u=b,l&&l({action:o,location:x.location,delta:v})}function y(b,v){o="PUSH";let R=Um(x.location,b,v);u=d()+1;let E=wv(R,u),V=x.createHref(R);try{a.pushState(E,"",V)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;s.location.assign(V)}n&&l&&l({action:o,location:x.location,delta:1})}function m(b,v){o="REPLACE";let R=Um(x.location,b,v);u=d();let E=wv(R,u),V=x.createHref(R);a.replaceState(E,"",V),n&&l&&l({action:o,location:x.location,delta:0})}function p(b){return PC(b)}let x={get action(){return o},get location(){return r(s,a)},listen(b){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(Tv,f),l=b,()=>{s.removeEventListener(Tv,f),l=null}},createHref(b){return t(s,b)},createURL:p,encodeLocation(b){let v=p(b);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:y,replace:m,go(b){return a.go(b)}};return x}function PC(r,t=!1){let e="http://localhost";typeof window<"u"&&(e=window.location.origin!=="null"?window.location.origin:window.location.href),Pi(e,"No window.location.(origin|href) available to create URL");let i=typeof r=="string"?r:mc(r);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=e+i),new URL(i,e)}function K2(r,t,e="/"){return IC(r,t,e,!1)}function IC(r,t,e,i){let s=typeof t=="string"?Nl(t):t,n=Da(s.pathname||"/",e);if(n==null)return null;let a=tM(r);UC(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let u=ZC(n);o=jC(a[l],u,i)}return o}function tM(r,t=[],e=[],i=""){let s=(n,a,o)=>{let l={relativePath:o===void 0?n.path||"":o,caseSensitive:n.caseSensitive===!0,childrenIndex:a,route:n};l.relativePath.startsWith("/")&&(Pi(l.relativePath.startsWith(i),`Absolute route path "${l.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(i.length));let u=Ca([i,l.relativePath]),d=e.concat(l);n.children&&n.children.length>0&&(Pi(n.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),tM(n.children,t,d,u)),!(n.path==null&&!n.index)&&t.push({path:u,score:$C(u,n.index),routesMeta:d})};return r.forEach((n,a)=>{var o;if(n.path===""||!((o=n.path)!=null&&o.includes("?")))s(n,a);else for(let l of eM(n.path))s(n,a,l)}),t}function eM(r){let t=r.split("/");if(t.length===0)return[];let[e,...i]=t,s=e.endsWith("?"),n=e.replace(/\?$/,"");if(i.length===0)return s?[n,""]:[n];let a=eM(i.join("/")),o=[];return o.push(...a.map(l=>l===""?n:[n,l].join("/"))),s&&o.push(...a),o.map(l=>r.startsWith("/")&&l===""?"/":l)}function UC(r){r.sort((t,e)=>t.score!==e.score?e.score-t.score:qC(t.routesMeta.map(i=>i.childrenIndex),e.routesMeta.map(i=>i.childrenIndex)))}var OC=/^:[\w-]+$/,GC=3,YC=2,HC=1,XC=10,WC=-2,Cv=r=>r==="*";function $C(r,t){let e=r.split("/"),i=e.length;return e.some(Cv)&&(i+=WC),t&&(i+=YC),e.filter(s=>!Cv(s)).reduce((s,n)=>s+(OC.test(n)?GC:n===""?HC:XC),i)}function qC(r,t){return r.length===t.length&&r.slice(0,-1).every((i,s)=>i===t[s])?r[r.length-1]-t[t.length-1]:0}function jC(r,t,e=!1){let{routesMeta:i}=r,s={},n="/",a=[];for(let o=0;o<i.length;++o){let l=i[o],u=o===i.length-1,d=n==="/"?t:t.slice(n.length)||"/",f=$f({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d),y=l.route;if(!f&&u&&e&&!i[i.length-1].route.index&&(f=$f({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!f)return null;Object.assign(s,f.params),a.push({params:s,pathname:Ca([n,f.pathname]),pathnameBase:e5(Ca([n,f.pathnameBase])),route:y}),f.pathnameBase!=="/"&&(n=Ca([n,f.pathnameBase]))}return a}function $f(r,t){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[e,i]=JC(r.path,r.caseSensitive,r.end),s=t.match(e);if(!s)return null;let n=s[0],a=n.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:i.reduce((u,{paramName:d,isOptional:f},y)=>{if(d==="*"){let p=o[y]||"";a=n.slice(0,n.length-p.length).replace(/(.)\/+$/,"$1")}const m=o[y];return f&&!m?u[d]=void 0:u[d]=(m||"").replace(/%2F/g,"/"),u},{}),pathname:n,pathnameBase:a,pattern:r}}function JC(r,t=!1,e=!0){Qn(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let i=[],s="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(i.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(i.push({paramName:"*"}),s+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?s+="\\/*$":r!==""&&r!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),i]}function ZC(r){try{return r.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Qn(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),r}}function Da(r,t){if(t==="/")return r;if(!r.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,i=r.charAt(e);return i&&i!=="/"?null:r.slice(e)||"/"}function QC(r,t="/"){let{pathname:e,search:i="",hash:s=""}=typeof r=="string"?Nl(r):r;return{pathname:e?e.startsWith("/")?e:KC(e,t):t,search:i5(i),hash:s5(s)}}function KC(r,t){let e=t.replace(/\/+$/,"").split("/");return r.split("/").forEach(s=>{s===".."?e.length>1&&e.pop():s!=="."&&e.push(s)}),e.length>1?e.join("/"):"/"}function lm(r,t,e,i){return`Cannot include a '${r}' character in a manually specified \`to.${t}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function t5(r){return r.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function iM(r){let t=t5(r);return t.map((e,i)=>i===t.length-1?e.pathname:e.pathnameBase)}function sM(r,t,e,i=!1){let s;typeof r=="string"?s=Nl(r):(s={...r},Pi(!s.pathname||!s.pathname.includes("?"),lm("?","pathname","search",s)),Pi(!s.pathname||!s.pathname.includes("#"),lm("#","pathname","hash",s)),Pi(!s.search||!s.search.includes("#"),lm("#","search","hash",s)));let n=r===""||s.pathname==="",a=n?"/":s.pathname,o;if(a==null)o=e;else{let f=t.length-1;if(!i&&a.startsWith("..")){let y=a.split("/");for(;y[0]==="..";)y.shift(),f-=1;s.pathname=y.join("/")}o=f>=0?t[f]:"/"}let l=QC(s,o),u=a&&a!=="/"&&a.endsWith("/"),d=(n||a===".")&&e.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}var Ca=r=>r.join("/").replace(/\/\/+/g,"/"),e5=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),i5=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,s5=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function r5(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var rM=["POST","PUT","PATCH","DELETE"];new Set(rM);var n5=["GET",...rM];new Set(n5);var Ll=St.createContext(null);Ll.displayName="DataRouter";var A0=St.createContext(null);A0.displayName="DataRouterState";var nM=St.createContext({isTransitioning:!1});nM.displayName="ViewTransition";var a5=St.createContext(new Map);a5.displayName="Fetchers";var o5=St.createContext(null);o5.displayName="Await";var ra=St.createContext(null);ra.displayName="Navigation";var Fc=St.createContext(null);Fc.displayName="Location";var La=St.createContext({outlet:null,matches:[],isDataRoute:!1});La.displayName="Route";var xp=St.createContext(null);xp.displayName="RouteError";function h5(r,{relative:t}={}){Pi(Vc(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:i}=St.useContext(ra),{hash:s,pathname:n,search:a}=zc(r,{relative:t}),o=n;return e!=="/"&&(o=n==="/"?e:Ca([e,n])),i.createHref({pathname:o,search:a,hash:s})}function Vc(){return St.useContext(Fc)!=null}function mh(){return Pi(Vc(),"useLocation() may be used only in the context of a <Router> component."),St.useContext(Fc).location}var aM="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function oM(r){St.useContext(ra).static||St.useLayoutEffect(r)}function l5(){let{isDataRoute:r}=St.useContext(La);return r?b5():u5()}function u5(){Pi(Vc(),"useNavigate() may be used only in the context of a <Router> component.");let r=St.useContext(Ll),{basename:t,navigator:e}=St.useContext(ra),{matches:i}=St.useContext(La),{pathname:s}=mh(),n=JSON.stringify(iM(i)),a=St.useRef(!1);return oM(()=>{a.current=!0}),St.useCallback((l,u={})=>{if(Qn(a.current,aM),!a.current)return;if(typeof l=="number"){e.go(l);return}let d=sM(l,JSON.parse(n),s,u.relative==="path");r==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:Ca([t,d.pathname])),(u.replace?e.replace:e.push)(d,u.state,u)},[t,e,n,s,r])}St.createContext(null);function zc(r,{relative:t}={}){let{matches:e}=St.useContext(La),{pathname:i}=mh(),s=JSON.stringify(iM(e));return St.useMemo(()=>sM(r,JSON.parse(s),i,t==="path"),[r,s,i,t])}function c5(r,t){return hM(r,t)}function hM(r,t,e,i){var v;Pi(Vc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=St.useContext(ra),{matches:n}=St.useContext(La),a=n[n.length-1],o=a?a.params:{},l=a?a.pathname:"/",u=a?a.pathnameBase:"/",d=a&&a.route;{let R=d&&d.path||"";lM(l,!d||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let f=mh(),y;if(t){let R=typeof t=="string"?Nl(t):t;Pi(u==="/"||((v=R.pathname)==null?void 0:v.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${R.pathname}" was given in the \`location\` prop.`),y=R}else y=f;let m=y.pathname||"/",p=m;if(u!=="/"){let R=u.replace(/^\//,"").split("/");p="/"+m.replace(/^\//,"").split("/").slice(R.length).join("/")}let x=K2(r,{pathname:p});Qn(d||x!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),Qn(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=m5(x&&x.map(R=>Object.assign({},R,{params:Object.assign({},o,R.params),pathname:Ca([u,s.encodeLocation?s.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?u:Ca([u,s.encodeLocation?s.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),n,e,i);return t&&b?St.createElement(Fc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},b):b}function d5(){let r=v5(),t=r5(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),e=r instanceof Error?r.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},n={padding:"2px 4px",backgroundColor:i},a=null;return console.error("Error handled by React Router default ErrorBoundary:",r),a=St.createElement(St.Fragment,null,St.createElement("p",null," Hey developer "),St.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",St.createElement("code",{style:n},"ErrorBoundary")," or"," ",St.createElement("code",{style:n},"errorElement")," prop on your route.")),St.createElement(St.Fragment,null,St.createElement("h2",null,"Unexpected Application Error!"),St.createElement("h3",{style:{fontStyle:"italic"}},t),e?St.createElement("pre",{style:s},e):null,a)}var f5=St.createElement(d5,null),g5=class extends St.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,t){return t.location!==r.location||t.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:t.error,location:t.location,revalidation:r.revalidation||t.revalidation}}componentDidCatch(r,t){console.error("React Router caught the following error during render",r,t)}render(){return this.state.error!==void 0?St.createElement(La.Provider,{value:this.props.routeContext},St.createElement(xp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function y5({routeContext:r,match:t,children:e}){let i=St.useContext(Ll);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),St.createElement(La.Provider,{value:r},e)}function m5(r,t=[],e=null,i=null){if(r==null){if(!e)return null;if(e.errors)r=e.matches;else if(t.length===0&&!e.initialized&&e.matches.length>0)r=e.matches;else return null}let s=r,n=e==null?void 0:e.errors;if(n!=null){let l=s.findIndex(u=>u.route.id&&(n==null?void 0:n[u.route.id])!==void 0);Pi(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(n).join(",")}`),s=s.slice(0,Math.min(s.length,l+1))}let a=!1,o=-1;if(e)for(let l=0;l<s.length;l++){let u=s[l];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(o=l),u.route.id){let{loaderData:d,errors:f}=e,y=u.route.loader&&!d.hasOwnProperty(u.route.id)&&(!f||f[u.route.id]===void 0);if(u.route.lazy||y){a=!0,o>=0?s=s.slice(0,o+1):s=[s[0]];break}}}return s.reduceRight((l,u,d)=>{let f,y=!1,m=null,p=null;e&&(f=n&&u.route.id?n[u.route.id]:void 0,m=u.route.errorElement||f5,a&&(o<0&&d===0?(lM("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,p=null):o===d&&(y=!0,p=u.route.hydrateFallbackElement||null)));let x=t.concat(s.slice(0,d+1)),b=()=>{let v;return f?v=m:y?v=p:u.route.Component?v=St.createElement(u.route.Component,null):u.route.element?v=u.route.element:v=l,St.createElement(y5,{match:u,routeContext:{outlet:l,matches:x,isDataRoute:e!=null},children:v})};return e&&(u.route.ErrorBoundary||u.route.errorElement||d===0)?St.createElement(g5,{location:e.location,revalidation:e.revalidation,component:m,error:f,children:b(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):b()},null)}function Ap(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function p5(r){let t=St.useContext(Ll);return Pi(t,Ap(r)),t}function S5(r){let t=St.useContext(A0);return Pi(t,Ap(r)),t}function x5(r){let t=St.useContext(La);return Pi(t,Ap(r)),t}function vp(r){let t=x5(r),e=t.matches[t.matches.length-1];return Pi(e.route.id,`${r} can only be used on routes that contain a unique "id"`),e.route.id}function A5(){return vp("useRouteId")}function v5(){var i;let r=St.useContext(xp),t=S5("useRouteError"),e=vp("useRouteError");return r!==void 0?r:(i=t.errors)==null?void 0:i[e]}function b5(){let{router:r}=p5("useNavigate"),t=vp("useNavigate"),e=St.useRef(!1);return oM(()=>{e.current=!0}),St.useCallback(async(s,n={})=>{Qn(e.current,aM),e.current&&(typeof s=="number"?r.navigate(s):await r.navigate(s,{fromRouteId:t,...n}))},[r,t])}var kv={};function lM(r,t,e){!t&&!kv[r]&&(kv[r]=!0,Qn(!1,e))}St.memo(M5);function M5({routes:r,future:t,state:e}){return hM(r,void 0,e,t)}function uM(r){Pi(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function R5({basename:r="/",children:t=null,location:e,navigationType:i="POP",navigator:s,static:n=!1}){Pi(!Vc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=r.replace(/^\/*/,"/"),o=St.useMemo(()=>({basename:a,navigator:s,static:n,future:{}}),[a,s,n]);typeof e=="string"&&(e=Nl(e));let{pathname:l="/",search:u="",hash:d="",state:f=null,key:y="default"}=e,m=St.useMemo(()=>{let p=Da(l,a);return p==null?null:{location:{pathname:p,search:u,hash:d,state:f,key:y},navigationType:i}},[a,l,u,d,f,y,i]);return Qn(m!=null,`<Router basename="${a}"> is not able to match the URL "${l}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),m==null?null:St.createElement(ra.Provider,{value:o},St.createElement(Fc.Provider,{children:t,value:m}))}function E5({children:r,location:t}){return c5(Om(r),t)}function Om(r,t=[]){let e=[];return St.Children.forEach(r,(i,s)=>{if(!St.isValidElement(i))return;let n=[...t,s];if(i.type===St.Fragment){e.push.apply(e,Om(i.props.children,n));return}Pi(i.type===uM,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Pi(!i.props.index||!i.props.children,"An index route cannot have child routes.");let a={id:i.props.id||n.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=Om(i.props.children,n)),e.push(a)}),e}var Gf="get",Yf="application/x-www-form-urlencoded";function v0(r){return r!=null&&typeof r.tagName=="string"}function T5(r){return v0(r)&&r.tagName.toLowerCase()==="button"}function w5(r){return v0(r)&&r.tagName.toLowerCase()==="form"}function C5(r){return v0(r)&&r.tagName.toLowerCase()==="input"}function k5(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function D5(r,t){return r.button===0&&(!t||t==="_self")&&!k5(r)}var yf=null;function F5(){if(yf===null)try{new FormData(document.createElement("form"),0),yf=!1}catch{yf=!0}return yf}var V5=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function um(r){return r!=null&&!V5.has(r)?(Qn(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Yf}"`),null):r}function z5(r,t){let e,i,s,n,a;if(w5(r)){let o=r.getAttribute("action");i=o?Da(o,t):null,e=r.getAttribute("method")||Gf,s=um(r.getAttribute("enctype"))||Yf,n=new FormData(r)}else if(T5(r)||C5(r)&&(r.type==="submit"||r.type==="image")){let o=r.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=r.getAttribute("formaction")||o.getAttribute("action");if(i=l?Da(l,t):null,e=r.getAttribute("formmethod")||o.getAttribute("method")||Gf,s=um(r.getAttribute("formenctype"))||um(o.getAttribute("enctype"))||Yf,n=new FormData(o,r),!F5()){let{name:u,type:d,value:f}=r;if(d==="image"){let y=u?`${u}.`:"";n.append(`${y}x`,"0"),n.append(`${y}y`,"0")}else u&&n.append(u,f)}}else{if(v0(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=Gf,i=null,s=Yf,a=r}return n&&s==="text/plain"&&(a=n,n=void 0),{action:i,method:e.toLowerCase(),encType:s,formData:n,body:a}}function bp(r,t){if(r===!1||r===null||typeof r>"u")throw new Error(t)}async function _5(r,t){if(r.id in t)return t[r.id];try{let e=await import(r.module);return t[r.id]=e,e}catch(e){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function N5(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function L5(r,t,e){let i=await Promise.all(r.map(async s=>{let n=t.routes[s.route.id];if(n){let a=await _5(n,e);return a.links?a.links():[]}return[]}));return U5(i.flat(1).filter(N5).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Dv(r,t,e,i,s,n){let a=(l,u)=>e[u]?l.route.id!==e[u].route.id:!0,o=(l,u)=>{var d;return e[u].pathname!==l.pathname||((d=e[u].route.path)==null?void 0:d.endsWith("*"))&&e[u].params["*"]!==l.params["*"]};return n==="assets"?t.filter((l,u)=>a(l,u)||o(l,u)):n==="data"?t.filter((l,u)=>{var f;let d=i.routes[l.route.id];if(!d||!d.hasLoader)return!1;if(a(l,u)||o(l,u))return!0;if(l.route.shouldRevalidate){let y=l.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((f=e[0])==null?void 0:f.params)||{},nextUrl:new URL(r,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function B5(r,t,{includeHydrateFallback:e}={}){return P5(r.map(i=>{let s=t.routes[i.route.id];if(!s)return[];let n=[s.module];return s.clientActionModule&&(n=n.concat(s.clientActionModule)),s.clientLoaderModule&&(n=n.concat(s.clientLoaderModule)),e&&s.hydrateFallbackModule&&(n=n.concat(s.hydrateFallbackModule)),s.imports&&(n=n.concat(s.imports)),n}).flat(1))}function P5(r){return[...new Set(r)]}function I5(r){let t={},e=Object.keys(r).sort();for(let i of e)t[i]=r[i];return t}function U5(r,t){let e=new Set;return new Set(t),r.reduce((i,s)=>{let n=JSON.stringify(I5(s));return e.has(n)||(e.add(n),i.push({key:n,link:s})),i},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var O5=new Set([100,101,204,205]);function G5(r,t){let e=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return e.pathname==="/"?e.pathname="_root.data":t&&Da(e.pathname,t)==="/"?e.pathname=`${t.replace(/\/$/,"")}/_root.data`:e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function cM(){let r=St.useContext(Ll);return bp(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function Y5(){let r=St.useContext(A0);return bp(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var Mp=St.createContext(void 0);Mp.displayName="FrameworkContext";function dM(){let r=St.useContext(Mp);return bp(r,"You must render this element inside a <HydratedRouter> element"),r}function H5(r,t){let e=St.useContext(Mp),[i,s]=St.useState(!1),[n,a]=St.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:u,onMouseLeave:d,onTouchStart:f}=t,y=St.useRef(null);St.useEffect(()=>{if(r==="render"&&a(!0),r==="viewport"){let x=v=>{v.forEach(R=>{a(R.isIntersecting)})},b=new IntersectionObserver(x,{threshold:.5});return y.current&&b.observe(y.current),()=>{b.disconnect()}}},[r]),St.useEffect(()=>{if(i){let x=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(x)}}},[i]);let m=()=>{s(!0)},p=()=>{s(!1),a(!1)};return e?r!=="intent"?[n,y,{}]:[n,y,{onFocus:Zu(o,m),onBlur:Zu(l,p),onMouseEnter:Zu(u,m),onMouseLeave:Zu(d,p),onTouchStart:Zu(f,m)}]:[!1,y,{}]}function Zu(r,t){return e=>{r&&r(e),e.defaultPrevented||t(e)}}function X5({page:r,...t}){let{router:e}=cM(),i=St.useMemo(()=>K2(e.routes,r,e.basename),[e.routes,r,e.basename]);return i?St.createElement($5,{page:r,matches:i,...t}):null}function W5(r){let{manifest:t,routeModules:e}=dM(),[i,s]=St.useState([]);return St.useEffect(()=>{let n=!1;return L5(r,t,e).then(a=>{n||s(a)}),()=>{n=!0}},[r,t,e]),i}function $5({page:r,matches:t,...e}){let i=mh(),{manifest:s,routeModules:n}=dM(),{basename:a}=cM(),{loaderData:o,matches:l}=Y5(),u=St.useMemo(()=>Dv(r,t,l,s,i,"data"),[r,t,l,s,i]),d=St.useMemo(()=>Dv(r,t,l,s,i,"assets"),[r,t,l,s,i]),f=St.useMemo(()=>{if(r===i.pathname+i.search+i.hash)return[];let p=new Set,x=!1;if(t.forEach(v=>{var E;let R=s.routes[v.route.id];!R||!R.hasLoader||(!u.some(V=>V.route.id===v.route.id)&&v.route.id in o&&((E=n[v.route.id])!=null&&E.shouldRevalidate)||R.hasClientLoader?x=!0:p.add(v.route.id))}),p.size===0)return[];let b=G5(r,a);return x&&p.size>0&&b.searchParams.set("_routes",t.filter(v=>p.has(v.route.id)).map(v=>v.route.id).join(",")),[b.pathname+b.search]},[a,o,i,s,u,t,r,n]),y=St.useMemo(()=>B5(d,s),[d,s]),m=W5(d);return St.createElement(St.Fragment,null,f.map(p=>St.createElement("link",{key:p,rel:"prefetch",as:"fetch",href:p,...e})),y.map(p=>St.createElement("link",{key:p,rel:"modulepreload",href:p,...e})),m.map(({key:p,link:x})=>St.createElement("link",{key:p,...x})))}function q5(...r){return t=>{r.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})}}var fM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{fM&&(window.__reactRouterVersion="7.6.1")}catch{}function j5({basename:r,children:t,window:e}){let i=St.useRef();i.current==null&&(i.current=NC({window:e,v5Compat:!0}));let s=i.current,[n,a]=St.useState({action:s.action,location:s.location}),o=St.useCallback(l=>{St.startTransition(()=>a(l))},[a]);return St.useLayoutEffect(()=>s.listen(o),[s,o]),St.createElement(R5,{basename:r,children:t,location:n.location,navigationType:n.action,navigator:s})}var gM=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yM=St.forwardRef(function({onClick:t,discover:e="render",prefetch:i="none",relative:s,reloadDocument:n,replace:a,state:o,target:l,to:u,preventScrollReset:d,viewTransition:f,...y},m){let{basename:p}=St.useContext(ra),x=typeof u=="string"&&gM.test(u),b,v=!1;if(typeof u=="string"&&x&&(b=u,fM))try{let A=new URL(window.location.href),T=u.startsWith("//")?new URL(A.protocol+u):new URL(u),w=Da(T.pathname,p);T.origin===A.origin&&w!=null?u=w+T.search+T.hash:v=!0}catch{Qn(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let R=h5(u,{relative:s}),[E,V,F]=H5(i,y),L=K5(u,{replace:a,state:o,target:l,preventScrollReset:d,relative:s,viewTransition:f});function z(A){t&&t(A),A.defaultPrevented||L(A)}let B=St.createElement("a",{...y,...F,href:b||R,onClick:v||n?t:z,ref:q5(m,V),target:l,"data-discover":!x&&e==="render"?"true":void 0});return E&&!x?St.createElement(St.Fragment,null,B,St.createElement(X5,{page:R})):B});yM.displayName="Link";var J5=St.forwardRef(function({"aria-current":t="page",caseSensitive:e=!1,className:i="",end:s=!1,style:n,to:a,viewTransition:o,children:l,...u},d){let f=zc(a,{relative:u.relative}),y=mh(),m=St.useContext(A0),{navigator:p,basename:x}=St.useContext(ra),b=m!=null&&rk(f)&&o===!0,v=p.encodeLocation?p.encodeLocation(f).pathname:f.pathname,R=y.pathname,E=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;e||(R=R.toLowerCase(),E=E?E.toLowerCase():null,v=v.toLowerCase()),E&&x&&(E=Da(E,x)||E);const V=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let F=R===v||!s&&R.startsWith(v)&&R.charAt(V)==="/",L=E!=null&&(E===v||!s&&E.startsWith(v)&&E.charAt(v.length)==="/"),z={isActive:F,isPending:L,isTransitioning:b},B=F?t:void 0,A;typeof i=="function"?A=i(z):A=[i,F?"active":null,L?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let T=typeof n=="function"?n(z):n;return St.createElement(yM,{...u,"aria-current":B,className:A,ref:d,style:T,to:a,viewTransition:o},typeof l=="function"?l(z):l)});J5.displayName="NavLink";var Z5=St.forwardRef(({discover:r="render",fetcherKey:t,navigate:e,reloadDocument:i,replace:s,state:n,method:a=Gf,action:o,onSubmit:l,relative:u,preventScrollReset:d,viewTransition:f,...y},m)=>{let p=ik(),x=sk(o,{relative:u}),b=a.toLowerCase()==="get"?"get":"post",v=typeof o=="string"&&gM.test(o),R=E=>{if(l&&l(E),E.defaultPrevented)return;E.preventDefault();let V=E.nativeEvent.submitter,F=(V==null?void 0:V.getAttribute("formmethod"))||a;p(V||E.currentTarget,{fetcherKey:t,method:F,navigate:e,replace:s,state:n,relative:u,preventScrollReset:d,viewTransition:f})};return St.createElement("form",{ref:m,method:b,action:x,onSubmit:i?l:R,...y,"data-discover":!v&&r==="render"?"true":void 0})});Z5.displayName="Form";function Q5(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function mM(r){let t=St.useContext(Ll);return Pi(t,Q5(r)),t}function K5(r,{target:t,replace:e,state:i,preventScrollReset:s,relative:n,viewTransition:a}={}){let o=l5(),l=mh(),u=zc(r,{relative:n});return St.useCallback(d=>{if(D5(d,t)){d.preventDefault();let f=e!==void 0?e:mc(l)===mc(u);o(r,{replace:f,state:i,preventScrollReset:s,relative:n,viewTransition:a})}},[l,o,u,e,i,t,r,s,n,a])}var tk=0,ek=()=>`__${String(++tk)}__`;function ik(){let{router:r}=mM("useSubmit"),{basename:t}=St.useContext(ra),e=A5();return St.useCallback(async(i,s={})=>{let{action:n,method:a,encType:o,formData:l,body:u}=z5(i,t);if(s.navigate===!1){let d=s.fetcherKey||ek();await r.fetch(d,e,s.action||n,{preventScrollReset:s.preventScrollReset,formData:l,body:u,formMethod:s.method||a,formEncType:s.encType||o,flushSync:s.flushSync})}else await r.navigate(s.action||n,{preventScrollReset:s.preventScrollReset,formData:l,body:u,formMethod:s.method||a,formEncType:s.encType||o,replace:s.replace,state:s.state,fromRouteId:e,flushSync:s.flushSync,viewTransition:s.viewTransition})},[r,t,e])}function sk(r,{relative:t}={}){let{basename:e}=St.useContext(ra),i=St.useContext(La);Pi(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),n={...zc(r||".",{relative:t})},a=mh();if(r==null){n.search=a.search;let o=new URLSearchParams(n.search),l=o.getAll("index");if(l.some(d=>d==="")){o.delete("index"),l.filter(f=>f).forEach(f=>o.append("index",f));let d=o.toString();n.search=d?`?${d}`:""}}return(!r||r===".")&&s.route.index&&(n.search=n.search?n.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(n.pathname=n.pathname==="/"?e:Ca([e,n.pathname])),mc(n)}function rk(r,t={}){let e=St.useContext(nM);Pi(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=mM("useViewTransitionState"),s=zc(r,{relative:t.relative});if(!e.isTransitioning)return!1;let n=Da(e.currentLocation.pathname,i)||e.currentLocation.pathname,a=Da(e.nextLocation.pathname,i)||e.nextLocation.pathname;return $f(s.pathname,a)!=null||$f(s.pathname,n)!=null}[...O5];var _c="delete",Ti=5,yn=1<<Ti,tr=yn-1,_e={};function Gm(){return{value:!1}}function mn(r){r&&(r.value=!0)}function Rp(){}function Sl(r){return r.size===void 0&&(r.size=r.__iterate(pM)),r.size}function Mo(r,t){if(typeof t!="number"){var e=t>>>0;if(""+e!==t||e===4294967295)return NaN;t=e}return t<0?Sl(r)+t:t}function pM(){return!0}function b0(r,t,e){return(r===0&&!xM(r)||e!==void 0&&r<=-e)&&(t===void 0||e!==void 0&&t>=e)}function Nc(r,t){return SM(r,t,0)}function M0(r,t){return SM(r,t,t)}function SM(r,t,e){return r===void 0?e:xM(r)?t===1/0?t:Math.max(0,t+r)|0:t===void 0||t===r?r:Math.min(t,r)|0}function xM(r){return r<0||r===0&&1/r===-1/0}var AM="@@__IMMUTABLE_ITERABLE__@@";function Cr(r){return!!(r&&r[AM])}var vM="@@__IMMUTABLE_KEYED__@@";function Fi(r){return!!(r&&r[vM])}var bM="@@__IMMUTABLE_INDEXED__@@";function Rr(r){return!!(r&&r[bM])}function R0(r){return Fi(r)||Rr(r)}var is=function(t){return Cr(t)?t:Jr(t)},An=function(r){function t(e){return Fi(e)?e:Co(e)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t}(is),ph=function(r){function t(e){return Rr(e)?e:zn(e)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t}(is),Bl=function(r){function t(e){return Cr(e)&&!R0(e)?e:Ol(e)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t}(is);is.Keyed=An;is.Indexed=ph;is.Set=Bl;var MM="@@__IMMUTABLE_SEQ__@@";function Ep(r){return!!(r&&r[MM])}var RM="@@__IMMUTABLE_RECORD__@@";function Pl(r){return!!(r&&r[RM])}function na(r){return Cr(r)||Pl(r)}var Il="@@__IMMUTABLE_ORDERED__@@";function Cn(r){return!!(r&&r[Il])}var Lc=0,Vn=1,xn=2,Ym=typeof Symbol=="function"&&Symbol.iterator,EM="@@iterator",E0=Ym||EM,ei=function(t){this.next=t};ei.prototype.toString=function(){return"[Iterator]"};ei.KEYS=Lc;ei.VALUES=Vn;ei.ENTRIES=xn;ei.prototype.inspect=ei.prototype.toSource=function(){return this.toString()};ei.prototype[E0]=function(){return this};function Vi(r,t,e,i){var s=r===0?t:r===1?e:[t,e];return i?i.value=s:i={value:s,done:!1},i}function kr(){return{value:void 0,done:!0}}function TM(r){return Array.isArray(r)?!0:!!T0(r)}function Fv(r){return r&&typeof r.next=="function"}function Hm(r){var t=T0(r);return t&&t.call(r)}function T0(r){var t=r&&(Ym&&r[Ym]||r[EM]);if(typeof t=="function")return t}function nk(r){var t=T0(r);return t&&t===r.entries}function ak(r){var t=T0(r);return t&&t===r.keys}var Ul=Object.prototype.hasOwnProperty;function wM(r){return Array.isArray(r)||typeof r=="string"?!0:r&&typeof r=="object"&&Number.isInteger(r.length)&&r.length>=0&&(r.length===0?Object.keys(r).length===1:r.hasOwnProperty(r.length-1))}var Jr=function(r){function t(e){return e==null?wp():na(e)?e.toSeq():hk(e)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.toSeq=function(){return this},t.prototype.toString=function(){return this.__toString("Seq {","}")},t.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},t.prototype.__iterate=function(i,s){var n=this._cache;if(n){for(var a=n.length,o=0;o!==a;){var l=n[s?a-++o:o++];if(i(l[1],l[0],this)===!1)break}return o}return this.__iterateUncached(i,s)},t.prototype.__iterator=function(i,s){var n=this._cache;if(n){var a=n.length,o=0;return new ei(function(){if(o===a)return kr();var l=n[s?a-++o:o++];return Vi(i,l[0],l[1])})}return this.__iteratorUncached(i,s)},t}(is),Co=function(r){function t(e){return e==null?wp().toKeyedSeq():Cr(e)?Fi(e)?e.toSeq():e.fromEntrySeq():Pl(e)?e.toSeq():Cp(e)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.toKeyedSeq=function(){return this},t}(Jr),zn=function(r){function t(e){return e==null?wp():Cr(e)?Fi(e)?e.entrySeq():e.toIndexedSeq():Pl(e)?e.toSeq().entrySeq():CM(e)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.of=function(){return t(arguments)},t.prototype.toIndexedSeq=function(){return this},t.prototype.toString=function(){return this.__toString("Seq [","]")},t}(Jr),Ol=function(r){function t(e){return(Cr(e)&&!R0(e)?e:zn(e)).toSetSeq()}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.of=function(){return t(arguments)},t.prototype.toSetSeq=function(){return this},t}(Jr);Jr.isSeq=Ep;Jr.Keyed=Co;Jr.Set=Ol;Jr.Indexed=zn;Jr.prototype[MM]=!0;var oh=function(r){function t(e){this._array=e,this.size=e.length}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.get=function(i,s){return this.has(i)?this._array[Mo(this,i)]:s},t.prototype.__iterate=function(i,s){for(var n=this._array,a=n.length,o=0;o!==a;){var l=s?a-++o:o++;if(i(n[l],l,this)===!1)break}return o},t.prototype.__iterator=function(i,s){var n=this._array,a=n.length,o=0;return new ei(function(){if(o===a)return kr();var l=s?a-++o:o++;return Vi(i,l,n[l])})},t}(zn),Tp=function(r){function t(e){var i=Object.keys(e).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e):[]);this._object=e,this._keys=i,this.size=i.length}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.get=function(i,s){return s!==void 0&&!this.has(i)?s:this._object[i]},t.prototype.has=function(i){return Ul.call(this._object,i)},t.prototype.__iterate=function(i,s){for(var n=this._object,a=this._keys,o=a.length,l=0;l!==o;){var u=a[s?o-++l:l++];if(i(n[u],u,this)===!1)break}return l},t.prototype.__iterator=function(i,s){var n=this._object,a=this._keys,o=a.length,l=0;return new ei(function(){if(l===o)return kr();var u=a[s?o-++l:l++];return Vi(i,u,n[u])})},t}(Co);Tp.prototype[Il]=!0;var ok=function(r){function t(e){this._collection=e,this.size=e.length||e.size}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.__iterateUncached=function(i,s){if(s)return this.cacheResult().__iterate(i,s);var n=this._collection,a=Hm(n),o=0;if(Fv(a))for(var l;!(l=a.next()).done&&i(l.value,o++,this)!==!1;);return o},t.prototype.__iteratorUncached=function(i,s){if(s)return this.cacheResult().__iterator(i,s);var n=this._collection,a=Hm(n);if(!Fv(a))return new ei(kr);var o=0;return new ei(function(){var l=a.next();return l.done?l:Vi(i,o++,l.value)})},t}(zn),Vv;function wp(){return Vv||(Vv=new oh([]))}function Cp(r){var t=kp(r);if(t)return t.fromEntrySeq();if(typeof r=="object")return new Tp(r);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+r)}function CM(r){var t=kp(r);if(t)return t;throw new TypeError("Expected Array or collection object of values: "+r)}function hk(r){var t=kp(r);if(t)return nk(r)?t.fromEntrySeq():ak(r)?t.toSetSeq():t;if(typeof r=="object")return new Tp(r);throw new TypeError("Expected Array or collection object of values, or keyed object: "+r)}function kp(r){return wM(r)?new oh(r):TM(r)?new ok(r):void 0}var kM="@@__IMMUTABLE_MAP__@@";function Dp(r){return!!(r&&r[kM])}function DM(r){return Dp(r)&&Cn(r)}function zv(r){return!!(r&&typeof r.equals=="function"&&typeof r.hashCode=="function")}function qr(r,t){if(r===t||r!==r&&t!==t)return!0;if(!r||!t)return!1;if(typeof r.valueOf=="function"&&typeof t.valueOf=="function"){if(r=r.valueOf(),t=t.valueOf(),r===t||r!==r&&t!==t)return!0;if(!r||!t)return!1}return!!(zv(r)&&zv(t)&&r.equals(t))}var Qu=typeof Math.imul=="function"&&Math.imul(4294967295,2)===-2?Math.imul:function(t,e){t|=0,e|=0;var i=t&65535,s=e&65535;return i*s+((t>>>16)*s+i*(e>>>16)<<16>>>0)|0};function w0(r){return r>>>1&1073741824|r&3221225471}var lk=Object.prototype.valueOf;function Wr(r){if(r==null)return _v(r);if(typeof r.hashCode=="function")return w0(r.hashCode(r));var t=yk(r);if(t==null)return _v(t);switch(typeof t){case"boolean":return t?1108378657:1108378656;case"number":return uk(t);case"string":return t.length>mk?ck(t):Xm(t);case"object":case"function":return fk(t);case"symbol":return dk(t);default:if(typeof t.toString=="function")return Xm(t.toString());throw new Error("Value type "+typeof t+" cannot be hashed.")}}function _v(r){return r===null?1108378658:1108378659}function uk(r){if(r!==r||r===1/0)return 0;var t=r|0;for(t!==r&&(t^=r*4294967295);r>4294967295;)r/=4294967295,t^=r;return w0(t)}function ck(r){var t=fm[r];return t===void 0&&(t=Xm(r),dm===pk&&(dm=0,fm={}),dm++,fm[r]=t),t}function Xm(r){for(var t=0,e=0;e<r.length;e++)t=31*t+r.charCodeAt(e)|0;return w0(t)}function dk(r){var t=Bv[r];return t!==void 0||(t=FM(),Bv[r]=t),t}function fk(r){var t;if(Wm&&(t=$m.get(r),t!==void 0)||(t=r[Ko],t!==void 0)||!Lv&&(t=r.propertyIsEnumerable&&r.propertyIsEnumerable[Ko],t!==void 0||(t=gk(r),t!==void 0)))return t;if(t=FM(),Wm)$m.set(r,t);else{if(Nv!==void 0&&Nv(r)===!1)throw new Error("Non-extensible objects are not allowed as keys.");if(Lv)Object.defineProperty(r,Ko,{enumerable:!1,configurable:!1,writable:!1,value:t});else if(r.propertyIsEnumerable!==void 0&&r.propertyIsEnumerable===r.constructor.prototype.propertyIsEnumerable)r.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},r.propertyIsEnumerable[Ko]=t;else if(r.nodeType!==void 0)r[Ko]=t;else throw new Error("Unable to set a non-enumerable property on object.")}return t}var Nv=Object.isExtensible,Lv=function(){try{return Object.defineProperty({},"@",{}),!0}catch{return!1}}();function gk(r){if(r&&r.nodeType>0)switch(r.nodeType){case 1:return r.uniqueID;case 9:return r.documentElement&&r.documentElement.uniqueID}}function yk(r){return r.valueOf!==lk&&typeof r.valueOf=="function"?r.valueOf(r):r}function FM(){var r=++cm;return cm&1073741824&&(cm=0),r}var Wm=typeof WeakMap=="function",$m;Wm&&($m=new WeakMap);var Bv=Object.create(null),cm=0,Ko="__immutablehash__";typeof Symbol=="function"&&(Ko=Symbol(Ko));var mk=16,pk=255,dm=0,fm={},C0=function(r){function t(e,i){this._iter=e,this._useKeys=i,this.size=e.size}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.get=function(i,s){return this._iter.get(i,s)},t.prototype.has=function(i){return this._iter.has(i)},t.prototype.valueSeq=function(){return this._iter.valueSeq()},t.prototype.reverse=function(){var i=this,s=Fp(this,!0);return this._useKeys||(s.valueSeq=function(){return i._iter.toSeq().reverse()}),s},t.prototype.map=function(i,s){var n=this,a=LM(this,i,s);return this._useKeys||(a.valueSeq=function(){return n._iter.toSeq().map(i,s)}),a},t.prototype.__iterate=function(i,s){var n=this;return this._iter.__iterate(function(a,o){return i(a,o,n)},s)},t.prototype.__iterator=function(i,s){return this._iter.__iterator(i,s)},t}(Co);C0.prototype[Il]=!0;var VM=function(r){function t(e){this._iter=e,this.size=e.size}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.includes=function(i){return this._iter.includes(i)},t.prototype.__iterate=function(i,s){var n=this,a=0;return s&&Sl(this),this._iter.__iterate(function(o){return i(o,s?n.size-++a:a++,n)},s)},t.prototype.__iterator=function(i,s){var n=this,a=this._iter.__iterator(Vn,s),o=0;return s&&Sl(this),new ei(function(){var l=a.next();return l.done?l:Vi(i,s?n.size-++o:o++,l.value,l)})},t}(zn),zM=function(r){function t(e){this._iter=e,this.size=e.size}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.has=function(i){return this._iter.includes(i)},t.prototype.__iterate=function(i,s){var n=this;return this._iter.__iterate(function(a){return i(a,a,n)},s)},t.prototype.__iterator=function(i,s){var n=this._iter.__iterator(Vn,s);return new ei(function(){var a=n.next();return a.done?a:Vi(i,a.value,a.value,a)})},t}(Ol),_M=function(r){function t(e){this._iter=e,this.size=e.size}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.entrySeq=function(){return this._iter.toSeq()},t.prototype.__iterate=function(i,s){var n=this;return this._iter.__iterate(function(a){if(a){Iv(a);var o=Cr(a);return i(o?a.get(1):a[1],o?a.get(0):a[0],n)}},s)},t.prototype.__iterator=function(i,s){var n=this._iter.__iterator(Vn,s);return new ei(function(){for(;;){var a=n.next();if(a.done)return a;var o=a.value;if(o){Iv(o);var l=Cr(o);return Vi(i,l?o.get(0):o[0],l?o.get(1):o[1],a)}}})},t}(Co);VM.prototype.cacheResult=C0.prototype.cacheResult=zM.prototype.cacheResult=_M.prototype.cacheResult=_p;function NM(r){var t=aa(r);return t._iter=r,t.size=r.size,t.flip=function(){return r},t.reverse=function(){var e=r.reverse.apply(this);return e.flip=function(){return r.reverse()},e},t.has=function(e){return r.includes(e)},t.includes=function(e){return r.has(e)},t.cacheResult=_p,t.__iterateUncached=function(e,i){var s=this;return r.__iterate(function(n,a){return e(a,n,s)!==!1},i)},t.__iteratorUncached=function(e,i){if(e===xn){var s=r.__iterator(e,i);return new ei(function(){var n=s.next();if(!n.done){var a=n.value[0];n.value[0]=n.value[1],n.value[1]=a}return n})}return r.__iterator(e===Vn?Lc:Vn,i)},t}function LM(r,t,e){var i=aa(r);return i.size=r.size,i.has=function(s){return r.has(s)},i.get=function(s,n){var a=r.get(s,_e);return a===_e?n:t.call(e,a,s,r)},i.__iterateUncached=function(s,n){var a=this;return r.__iterate(function(o,l,u){return s(t.call(e,o,l,u),l,a)!==!1},n)},i.__iteratorUncached=function(s,n){var a=r.__iterator(xn,n);return new ei(function(){var o=a.next();if(o.done)return o;var l=o.value,u=l[0];return Vi(s,u,t.call(e,l[1],u,r),o)})},i}function Fp(r,t){var e=this,i=aa(r);return i._iter=r,i.size=r.size,i.reverse=function(){return r},r.flip&&(i.flip=function(){var s=NM(r);return s.reverse=function(){return r.flip()},s}),i.get=function(s,n){return r.get(t?s:-1-s,n)},i.has=function(s){return r.has(t?s:-1-s)},i.includes=function(s){return r.includes(s)},i.cacheResult=_p,i.__iterate=function(s,n){var a=this,o=0;return n&&Sl(r),r.__iterate(function(l,u){return s(l,t?u:n?a.size-++o:o++,a)},!n)},i.__iterator=function(s,n){var a=0;n&&Sl(r);var o=r.__iterator(xn,!n);return new ei(function(){var l=o.next();if(l.done)return l;var u=l.value;return Vi(s,t?u[0]:n?e.size-++a:a++,u[1],l)})},i}function BM(r,t,e,i){var s=aa(r);return i&&(s.has=function(n){var a=r.get(n,_e);return a!==_e&&!!t.call(e,a,n,r)},s.get=function(n,a){var o=r.get(n,_e);return o!==_e&&t.call(e,o,n,r)?o:a}),s.__iterateUncached=function(n,a){var o=this,l=0;return r.__iterate(function(u,d,f){if(t.call(e,u,d,f))return l++,n(u,i?d:l-1,o)},a),l},s.__iteratorUncached=function(n,a){var o=r.__iterator(xn,a),l=0;return new ei(function(){for(;;){var u=o.next();if(u.done)return u;var d=u.value,f=d[0],y=d[1];if(t.call(e,y,f,r))return Vi(n,i?f:l++,y,u)}})},s}function Sk(r,t,e){var i=Yl().asMutable();return r.__iterate(function(s,n){i.update(t.call(e,s,n,r),0,function(a){return a+1})}),i.asImmutable()}function xk(r,t,e){var i=Fi(r),s=(Cn(r)?Va():Yl()).asMutable();r.__iterate(function(a,o){s.update(t.call(e,a,o,r),function(l){return l=l||[],l.push(i?[o,a]:a),l})});var n=zp(r);return s.map(function(a){return xi(r,n(a))}).asImmutable()}function Ak(r,t,e){var i=Fi(r),s=[[],[]];r.__iterate(function(a,o){s[t.call(e,a,o,r)?1:0].push(i?[o,a]:a)});var n=zp(r);return s.map(function(a){return xi(r,n(a))})}function Vp(r,t,e,i){var s=r.size;if(b0(t,e,s))return r;if(typeof s>"u"&&(t<0||e<0))return Vp(r.toSeq().cacheResult(),t,e,i);var n=Nc(t,s),a=M0(e,s),o=a-n,l;o===o&&(l=o<0?0:o);var u=aa(r);return u.size=l===0?l:r.size&&l||void 0,!i&&Ep(r)&&l>=0&&(u.get=function(d,f){return d=Mo(this,d),d>=0&&d<l?r.get(d+n,f):f}),u.__iterateUncached=function(d,f){var y=this;if(l===0)return 0;if(f)return this.cacheResult().__iterate(d,f);var m=0,p=!0,x=0;return r.__iterate(function(b,v){if(!(p&&(p=m++<n)))return x++,d(b,i?v:x-1,y)!==!1&&x!==l}),x},u.__iteratorUncached=function(d,f){if(l!==0&&f)return this.cacheResult().__iterator(d,f);if(l===0)return new ei(kr);var y=r.__iterator(d,f),m=0,p=0;return new ei(function(){for(;m++<n;)y.next();if(++p>l)return kr();var x=y.next();return i||d===Vn||x.done?x:d===Lc?Vi(d,p-1,void 0,x):Vi(d,p-1,x.value[1],x)})},u}function vk(r,t,e){var i=aa(r);return i.__iterateUncached=function(s,n){var a=this;if(n)return this.cacheResult().__iterate(s,n);var o=0;return r.__iterate(function(l,u,d){return t.call(e,l,u,d)&&++o&&s(l,u,a)}),o},i.__iteratorUncached=function(s,n){var a=this;if(n)return this.cacheResult().__iterator(s,n);var o=r.__iterator(xn,n),l=!0;return new ei(function(){if(!l)return kr();var u=o.next();if(u.done)return u;var d=u.value,f=d[0],y=d[1];return t.call(e,y,f,a)?s===xn?u:Vi(s,f,y,u):(l=!1,kr())})},i}function PM(r,t,e,i){var s=aa(r);return s.__iterateUncached=function(n,a){var o=this;if(a)return this.cacheResult().__iterate(n,a);var l=!0,u=0;return r.__iterate(function(d,f,y){if(!(l&&(l=t.call(e,d,f,y))))return u++,n(d,i?f:u-1,o)}),u},s.__iteratorUncached=function(n,a){var o=this;if(a)return this.cacheResult().__iterator(n,a);var l=r.__iterator(xn,a),u=!0,d=0;return new ei(function(){var f,y,m;do{if(f=l.next(),f.done)return i||n===Vn?f:n===Lc?Vi(n,d++,void 0,f):Vi(n,d++,f.value[1],f);var p=f.value;y=p[0],m=p[1],u&&(u=t.call(e,m,y,o))}while(u);return n===xn?f:Vi(n,y,m,f)})},s}function bk(r,t){var e=Fi(r),i=[r].concat(t).map(function(a){return Cr(a)?e&&(a=An(a)):a=e?Cp(a):CM(Array.isArray(a)?a:[a]),a}).filter(function(a){return a.size!==0});if(i.length===0)return r;if(i.length===1){var s=i[0];if(s===r||e&&Fi(s)||Rr(r)&&Rr(s))return s}var n=new oh(i);return e?n=n.toKeyedSeq():Rr(r)||(n=n.toSetSeq()),n=n.flatten(!0),n.size=i.reduce(function(a,o){if(a!==void 0){var l=o.size;if(l!==void 0)return a+l}},0),n}function IM(r,t,e){var i=aa(r);return i.__iterateUncached=function(s,n){if(n)return this.cacheResult().__iterate(s,n);var a=0,o=!1;function l(u,d){u.__iterate(function(f,y){return(!t||d<t)&&Cr(f)?l(f,d+1):(a++,s(f,e?y:a-1,i)===!1&&(o=!0)),!o},n)}return l(r,0),a},i.__iteratorUncached=function(s,n){if(n)return this.cacheResult().__iterator(s,n);var a=r.__iterator(s,n),o=[],l=0;return new ei(function(){for(;a;){var u=a.next();if(u.done!==!1){a=o.pop();continue}var d=u.value;if(s===xn&&(d=d[1]),(!t||o.length<t)&&Cr(d))o.push(a),a=d.__iterator(s,n);else return e?u:Vi(s,l++,d,u)}return kr()})},i}function Mk(r,t,e){var i=zp(r);return r.toSeq().map(function(s,n){return i(t.call(e,s,n,r))}).flatten(!0)}function Rk(r,t){var e=aa(r);return e.size=r.size&&r.size*2-1,e.__iterateUncached=function(i,s){var n=this,a=0;return r.__iterate(function(o){return(!a||i(t,a++,n)!==!1)&&i(o,a++,n)!==!1},s),a},e.__iteratorUncached=function(i,s){var n=r.__iterator(Vn,s),a=0,o;return new ei(function(){return(!o||a%2)&&(o=n.next(),o.done)?o:a%2?Vi(i,a++,t):Vi(i,a++,o.value,o)})},e}function xl(r,t,e){t||(t=UM);var i=Fi(r),s=0,n=r.toSeq().map(function(a,o){return[o,a,s++,e?e(a,o,r):a]}).valueSeq().toArray();return n.sort(function(a,o){return t(a[3],o[3])||a[2]-o[2]}).forEach(i?function(a,o){n[o].length=2}:function(a,o){n[o]=a[1]}),i?Co(n):Rr(r)?zn(n):Ol(n)}function mf(r,t,e){if(t||(t=UM),e){var i=r.toSeq().map(function(s,n){return[s,e(s,n,r)]}).reduce(function(s,n){return Pv(t,s[1],n[1])?n:s});return i&&i[0]}return r.reduce(function(s,n){return Pv(t,s,n)?n:s})}function Pv(r,t,e){var i=r(e,t);return i===0&&e!==t&&(e==null||e!==e)||i>0}function pf(r,t,e,i){var s=aa(r),n=new oh(e).map(function(a){return a.size});return s.size=i?n.max():n.min(),s.__iterate=function(a,o){for(var l=this.__iterator(Vn,o),u,d=0;!(u=l.next()).done&&a(u.value,d++,this)!==!1;);return d},s.__iteratorUncached=function(a,o){var l=e.map(function(f){return f=is(f),Hm(o?f.reverse():f)}),u=0,d=!1;return new ei(function(){var f;return d||(f=l.map(function(y){return y.next()}),d=i?f.every(function(y){return y.done}):f.some(function(y){return y.done})),d?kr():Vi(a,u++,t.apply(null,f.map(function(y){return y.value})))})},s}function xi(r,t){return r===t?r:Ep(r)?t:r.constructor(t)}function Iv(r){if(r!==Object(r))throw new TypeError("Expected [K, V] tuple: "+r)}function zp(r){return Fi(r)?An:Rr(r)?ph:Bl}function aa(r){return Object.create((Fi(r)?Co:Rr(r)?zn:Ol).prototype)}function _p(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):Jr.prototype.cacheResult.call(this)}function UM(r,t){return r===void 0&&t===void 0?0:r===void 0?1:t===void 0?-1:r>t?1:r<t?-1:0}function Wn(r,t){t=t||0;for(var e=Math.max(0,r.length-t),i=new Array(e),s=0;s<e;s++)i[s]=r[s+t];return i}function Np(r,t){if(!r)throw new Error(t)}function $r(r){Np(r!==1/0,"Cannot perform this action with an infinite size.")}function OM(r){if(wM(r)&&typeof r!="string")return r;if(Cn(r))return r.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+r)}var Ek=Object.prototype.toString;function Tk(r){if(!r||typeof r!="object"||Ek.call(r)!=="[object Object]")return!1;var t=Object.getPrototypeOf(r);if(t===null)return!0;for(var e=t,i=Object.getPrototypeOf(t);i!==null;)e=i,i=Object.getPrototypeOf(e);return e===t}function Ro(r){return typeof r=="object"&&(na(r)||Array.isArray(r)||Tk(r))}function pc(r){try{return typeof r=="string"?JSON.stringify(r):String(r)}catch{return JSON.stringify(r)}}function wk(r,t){return na(r)?r.has(t):Ro(r)&&Ul.call(r,t)}function GM(r,t,e){return na(r)?r.get(t,e):wk(r,t)?typeof r.get=="function"?r.get(t):r[t]:e}function qf(r){if(Array.isArray(r))return Wn(r);var t={};for(var e in r)Ul.call(r,e)&&(t[e]=r[e]);return t}function Ck(r,t){if(!Ro(r))throw new TypeError("Cannot update non-data-structure value: "+r);if(na(r)){if(!r.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+r);return r.remove(t)}if(!Ul.call(r,t))return r;var e=qf(r);return Array.isArray(e)?e.splice(t,1):delete e[t],e}function kk(r,t,e){if(!Ro(r))throw new TypeError("Cannot update non-data-structure value: "+r);if(na(r)){if(!r.set)throw new TypeError("Cannot update immutable value without .set() method: "+r);return r.set(t,e)}if(Ul.call(r,t)&&e===r[t])return r;var i=qf(r);return i[t]=e,i}function Gl(r,t,e,i){i||(i=e,e=void 0);var s=YM(na(r),r,OM(t),0,e,i);return s===_e?e:s}function YM(r,t,e,i,s,n){var a=t===_e;if(i===e.length){var o=a?s:t,l=n(o);return l===o?t:l}if(!a&&!Ro(t))throw new TypeError("Cannot update within non-data-structure value in path ["+e.slice(0,i).map(pc)+"]: "+t);var u=e[i],d=a?_e:GM(t,u,_e),f=YM(d===_e?r:na(d),d,e,i+1,s,n);return f===d?t:f===_e?Ck(t,u):kk(a?r?wn():{}:t,u,f)}function Dk(r,t,e){return Gl(r,t,_e,function(){return e})}function Lp(r,t){return Dk(this,r,t)}function Fk(r,t){return Gl(r,t,function(){return _e})}function Bp(r){return Fk(this,r)}function HM(r,t,e,i){return Gl(r,[t],e,i)}function Pp(r,t,e){return arguments.length===1?r(this):HM(this,r,t,e)}function Ip(r,t,e){return Gl(this,r,t,e)}function XM(){for(var r=[],t=arguments.length;t--;)r[t]=arguments[t];return $M(this,r)}function WM(r){for(var t=[],e=arguments.length-1;e-- >0;)t[e]=arguments[e+1];if(typeof r!="function")throw new TypeError("Invalid merger function: "+r);return $M(this,t,r)}function $M(r,t,e){for(var i=[],s=0;s<t.length;s++){var n=An(t[s]);n.size!==0&&i.push(n)}return i.length===0?r:r.toSeq().size===0&&!r.__ownerID&&i.length===1?r.constructor(i[0]):r.withMutations(function(a){for(var o=e?function(u,d){HM(a,d,_e,function(f){return f===_e?u:e(f,u,d)})}:function(u,d){a.set(d,u)},l=0;l<i.length;l++)i[l].forEach(o)})}function Up(r,t,e){return Op(r,t,Vk(e))}function Op(r,t,e){if(!Ro(r))throw new TypeError("Cannot merge into non-data-structure value: "+r);if(na(r))return typeof e=="function"&&r.mergeWith?r.mergeWith.apply(r,[e].concat(t)):r.merge?r.merge.apply(r,t):r.concat.apply(r,t);for(var i=Array.isArray(r),s=r,n=i?ph:An,a=i?function(l){s===r&&(s=qf(s)),s.push(l)}:function(l,u){var d=Ul.call(s,u),f=d&&e?e(s[u],l,u):l;(!d||f!==s[u])&&(s===r&&(s=qf(s)),s[u]=f)},o=0;o<t.length;o++)n(t[o]).forEach(a);return s}function Vk(r){function t(e,i,s){return Ro(e)&&Ro(i)&&zk(e,i)?Op(e,[i],t):r?r(e,i,s):i}return t}function zk(r,t){var e=Jr(r),i=Jr(t);return Rr(e)===Rr(i)&&Fi(e)===Fi(i)}function qM(){for(var r=[],t=arguments.length;t--;)r[t]=arguments[t];return Up(this,r)}function jM(r){for(var t=[],e=arguments.length-1;e-- >0;)t[e]=arguments[e+1];return Up(this,t,r)}function Gp(r){for(var t=[],e=arguments.length-1;e-- >0;)t[e]=arguments[e+1];return Gl(this,r,wn(),function(i){return Op(i,t)})}function Yp(r){for(var t=[],e=arguments.length-1;e-- >0;)t[e]=arguments[e+1];return Gl(this,r,wn(),function(i){return Up(i,t)})}function Bc(r){var t=this.asMutable();return r(t),t.wasAltered()?t.__ensureOwner(this.__ownerID):this}function Pc(){return this.__ownerID?this:this.__ensureOwner(new Rp)}function Ic(){return this.__ensureOwner()}function Hp(){return this.__altered}var Yl=function(r){function t(e){return e==null?wn():Dp(e)&&!Cn(e)?e:wn().withMutations(function(i){var s=r(e);$r(s.size),s.forEach(function(n,a){return i.set(a,n)})})}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.of=function(){for(var i=[],s=arguments.length;s--;)i[s]=arguments[s];return wn().withMutations(function(n){for(var a=0;a<i.length;a+=2){if(a+1>=i.length)throw new Error("Missing value for key: "+i[a]);n.set(i[a],i[a+1])}})},t.prototype.toString=function(){return this.__toString("Map {","}")},t.prototype.get=function(i,s){return this._root?this._root.get(0,void 0,i,s):s},t.prototype.set=function(i,s){return Gv(this,i,s)},t.prototype.remove=function(i){return Gv(this,i,_e)},t.prototype.deleteAll=function(i){var s=is(i);return s.size===0?this:this.withMutations(function(n){s.forEach(function(a){return n.remove(a)})})},t.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):wn()},t.prototype.sort=function(i){return Va(xl(this,i))},t.prototype.sortBy=function(i,s){return Va(xl(this,s,i))},t.prototype.map=function(i,s){var n=this;return this.withMutations(function(a){a.forEach(function(o,l){a.set(l,i.call(s,o,l,n))})})},t.prototype.__iterator=function(i,s){return new _k(this,i,s)},t.prototype.__iterate=function(i,s){var n=this,a=0;return this._root&&this._root.iterate(function(o){return a++,i(o[1],o[0],n)},s),a},t.prototype.__ensureOwner=function(i){return i===this.__ownerID?this:i?Xp(this.size,this._root,i,this.__hash):this.size===0?wn():(this.__ownerID=i,this.__altered=!1,this)},t}(An);Yl.isMap=Dp;var ki=Yl.prototype;ki[kM]=!0;ki[_c]=ki.remove;ki.removeAll=ki.deleteAll;ki.setIn=Lp;ki.removeIn=ki.deleteIn=Bp;ki.update=Pp;ki.updateIn=Ip;ki.merge=ki.concat=XM;ki.mergeWith=WM;ki.mergeDeep=qM;ki.mergeDeepWith=jM;ki.mergeIn=Gp;ki.mergeDeepIn=Yp;ki.withMutations=Bc;ki.wasAltered=Hp;ki.asImmutable=Ic;ki["@@transducer/init"]=ki.asMutable=Pc;ki["@@transducer/step"]=function(r,t){return r.set(t[0],t[1])};ki["@@transducer/result"]=function(r){return r.asImmutable()};var Sc=function(t,e){this.ownerID=t,this.entries=e};Sc.prototype.get=function(t,e,i,s){for(var n=this.entries,a=0,o=n.length;a<o;a++)if(qr(i,n[a][0]))return n[a][1];return s};Sc.prototype.update=function(t,e,i,s,n,a,o){for(var l=n===_e,u=this.entries,d=0,f=u.length;d<f&&!qr(s,u[d][0]);d++);var y=d<f;if(y?u[d][1]===n:l)return this;if(mn(o),(l||!y)&&mn(a),!(l&&u.length===1)){if(!y&&!l&&u.length>=Uk)return Nk(t,u,s,n);var m=t&&t===this.ownerID,p=m?u:Wn(u);return y?l?d===f-1?p.pop():p[d]=p.pop():p[d]=[s,n]:p.push([s,n]),m?(this.entries=p,this):new Sc(t,p)}};var Al=function(t,e,i){this.ownerID=t,this.bitmap=e,this.nodes=i};Al.prototype.get=function(t,e,i,s){e===void 0&&(e=Wr(i));var n=1<<((t===0?e:e>>>t)&tr),a=this.bitmap;return(a&n)===0?s:this.nodes[JM(a&n-1)].get(t+Ti,e,i,s)};Al.prototype.update=function(t,e,i,s,n,a,o){i===void 0&&(i=Wr(s));var l=(e===0?i:i>>>e)&tr,u=1<<l,d=this.bitmap,f=(d&u)!==0;if(!f&&n===_e)return this;var y=JM(d&u-1),m=this.nodes,p=f?m[y]:void 0,x=Wp(p,t,e+Ti,i,s,n,a,o);if(x===p)return this;if(!f&&x&&m.length>=Ok)return Bk(t,m,d,l,x);if(f&&!x&&m.length===2&&Yv(m[y^1]))return m[y^1];if(f&&x&&m.length===1&&Yv(x))return x;var b=t&&t===this.ownerID,v=f?x?d:d^u:d|u,R=f?x?ZM(m,y,x,b):Ik(m,y,b):Pk(m,y,x,b);return b?(this.bitmap=v,this.nodes=R,this):new Al(t,v,R)};var xc=function(t,e,i){this.ownerID=t,this.count=e,this.nodes=i};xc.prototype.get=function(t,e,i,s){e===void 0&&(e=Wr(i));var n=(t===0?e:e>>>t)&tr,a=this.nodes[n];return a?a.get(t+Ti,e,i,s):s};xc.prototype.update=function(t,e,i,s,n,a,o){i===void 0&&(i=Wr(s));var l=(e===0?i:i>>>e)&tr,u=n===_e,d=this.nodes,f=d[l];if(u&&!f)return this;var y=Wp(f,t,e+Ti,i,s,n,a,o);if(y===f)return this;var m=this.count;if(!f)m++;else if(!y&&(m--,m<Gk))return Lk(t,d,m,l);var p=t&&t===this.ownerID,x=ZM(d,l,y,p);return p?(this.count=m,this.nodes=x,this):new xc(t,m,x)};var vl=function(t,e,i){this.ownerID=t,this.keyHash=e,this.entries=i};vl.prototype.get=function(t,e,i,s){for(var n=this.entries,a=0,o=n.length;a<o;a++)if(qr(i,n[a][0]))return n[a][1];return s};vl.prototype.update=function(t,e,i,s,n,a,o){i===void 0&&(i=Wr(s));var l=n===_e;if(i!==this.keyHash)return l?this:(mn(o),mn(a),$p(this,t,e,i,[s,n]));for(var u=this.entries,d=0,f=u.length;d<f&&!qr(s,u[d][0]);d++);var y=d<f;if(y?u[d][1]===n:l)return this;if(mn(o),(l||!y)&&mn(a),l&&f===2)return new Fa(t,this.keyHash,u[d^1]);var m=t&&t===this.ownerID,p=m?u:Wn(u);return y?l?d===f-1?p.pop():p[d]=p.pop():p[d]=[s,n]:p.push([s,n]),m?(this.entries=p,this):new vl(t,this.keyHash,p)};var Fa=function(t,e,i){this.ownerID=t,this.keyHash=e,this.entry=i};Fa.prototype.get=function(t,e,i,s){return qr(i,this.entry[0])?this.entry[1]:s};Fa.prototype.update=function(t,e,i,s,n,a,o){var l=n===_e,u=qr(s,this.entry[0]);if(u?n===this.entry[1]:l)return this;if(mn(o),l){mn(a);return}return u?t&&t===this.ownerID?(this.entry[1]=n,this):new Fa(t,this.keyHash,[s,n]):(mn(a),$p(this,t,e,Wr(s),[s,n]))};Sc.prototype.iterate=vl.prototype.iterate=function(r,t){for(var e=this.entries,i=0,s=e.length-1;i<=s;i++)if(r(e[t?s-i:i])===!1)return!1};Al.prototype.iterate=xc.prototype.iterate=function(r,t){for(var e=this.nodes,i=0,s=e.length-1;i<=s;i++){var n=e[t?s-i:i];if(n&&n.iterate(r,t)===!1)return!1}};Fa.prototype.iterate=function(r,t){return r(this.entry)};var _k=function(r){function t(e,i,s){this._type=i,this._reverse=s,this._stack=e._root&&Uv(e._root)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.next=function(){for(var i=this._type,s=this._stack;s;){var n=s.node,a=s.index++,o=void 0;if(n.entry){if(a===0)return gm(i,n.entry)}else if(n.entries){if(o=n.entries.length-1,a<=o)return gm(i,n.entries[this._reverse?o-a:a])}else if(o=n.nodes.length-1,a<=o){var l=n.nodes[this._reverse?o-a:a];if(l){if(l.entry)return gm(i,l.entry);s=this._stack=Uv(l,s)}continue}s=this._stack=this._stack.__prev}return kr()},t}(ei);function gm(r,t){return Vi(r,t[0],t[1])}function Uv(r,t){return{node:r,index:0,__prev:t}}function Xp(r,t,e,i){var s=Object.create(ki);return s.size=r,s._root=t,s.__ownerID=e,s.__hash=i,s.__altered=!1,s}var Ov;function wn(){return Ov||(Ov=Xp(0))}function Gv(r,t,e){var i,s;if(r._root){var n=Gm(),a=Gm();if(i=Wp(r._root,r.__ownerID,0,void 0,t,e,n,a),!a.value)return r;s=r.size+(n.value?e===_e?-1:1:0)}else{if(e===_e)return r;s=1,i=new Sc(r.__ownerID,[[t,e]])}return r.__ownerID?(r.size=s,r._root=i,r.__hash=void 0,r.__altered=!0,r):i?Xp(s,i):wn()}function Wp(r,t,e,i,s,n,a,o){return r?r.update(t,e,i,s,n,a,o):n===_e?r:(mn(o),mn(a),new Fa(t,i,[s,n]))}function Yv(r){return r.constructor===Fa||r.constructor===vl}function $p(r,t,e,i,s){if(r.keyHash===i)return new vl(t,i,[r.entry,s]);var n=(e===0?r.keyHash:r.keyHash>>>e)&tr,a=(e===0?i:i>>>e)&tr,o,l=n===a?[$p(r,t,e+Ti,i,s)]:(o=new Fa(t,i,s),n<a?[r,o]:[o,r]);return new Al(t,1<<n|1<<a,l)}function Nk(r,t,e,i){r||(r=new Rp);for(var s=new Fa(r,Wr(e),[e,i]),n=0;n<t.length;n++){var a=t[n];s=s.update(r,0,void 0,a[0],a[1])}return s}function Lk(r,t,e,i){for(var s=0,n=0,a=new Array(e),o=0,l=1,u=t.length;o<u;o++,l<<=1){var d=t[o];d!==void 0&&o!==i&&(s|=l,a[n++]=d)}return new Al(r,s,a)}function Bk(r,t,e,i,s){for(var n=0,a=new Array(yn),o=0;e!==0;o++,e>>>=1)a[o]=e&1?t[n++]:void 0;return a[i]=s,new xc(r,n+1,a)}function JM(r){return r-=r>>1&1431655765,r=(r&858993459)+(r>>2&858993459),r=r+(r>>4)&252645135,r+=r>>8,r+=r>>16,r&127}function ZM(r,t,e,i){var s=i?r:Wn(r);return s[t]=e,s}function Pk(r,t,e,i){var s=r.length+1;if(i&&t+1===s)return r[t]=e,r;for(var n=new Array(s),a=0,o=0;o<s;o++)o===t?(n[o]=e,a=-1):n[o]=r[o+a];return n}function Ik(r,t,e){var i=r.length-1;if(e&&t===i)return r.pop(),r;for(var s=new Array(i),n=0,a=0;a<i;a++)a===t&&(n=1),s[a]=r[a+n];return s}var Uk=yn/4,Ok=yn/2,Gk=yn/4,QM="@@__IMMUTABLE_LIST__@@";function KM(r){return!!(r&&r[QM])}var Uc=function(r){function t(e){var i=Hf();if(e==null)return i;if(KM(e))return e;var s=r(e),n=s.size;return n===0?i:($r(n),n>0&&n<yn?Ac(0,n,Ti,null,new po(s.toArray())):i.withMutations(function(a){a.setSize(n),s.forEach(function(o,l){return a.set(l,o)})}))}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("List [","]")},t.prototype.get=function(i,s){if(i=Mo(this,i),i>=0&&i<this.size){i+=this._origin;var n=tR(this,i);return n&&n.array[i&tr]}return s},t.prototype.set=function(i,s){return Yk(this,i,s)},t.prototype.remove=function(i){return this.has(i)?i===0?this.shift():i===this.size-1?this.pop():this.splice(i,1):this},t.prototype.insert=function(i,s){return this.splice(i,0,s)},t.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=Ti,this._root=this._tail=this.__hash=void 0,this.__altered=!0,this):Hf()},t.prototype.push=function(){var i=arguments,s=this.size;return this.withMutations(function(n){lo(n,0,s+i.length);for(var a=0;a<i.length;a++)n.set(s+a,i[a])})},t.prototype.pop=function(){return lo(this,0,-1)},t.prototype.unshift=function(){var i=arguments;return this.withMutations(function(s){lo(s,-i.length);for(var n=0;n<i.length;n++)s.set(n,i[n])})},t.prototype.shift=function(){return lo(this,1)},t.prototype.concat=function(){for(var i=arguments,s=[],n=0;n<arguments.length;n++){var a=i[n],o=r(typeof a!="string"&&TM(a)?a:[a]);o.size!==0&&s.push(o)}return s.length===0?this:this.size===0&&!this.__ownerID&&s.length===1?this.constructor(s[0]):this.withMutations(function(l){s.forEach(function(u){return u.forEach(function(d){return l.push(d)})})})},t.prototype.setSize=function(i){return lo(this,0,i)},t.prototype.map=function(i,s){var n=this;return this.withMutations(function(a){for(var o=0;o<n.size;o++)a.set(o,i.call(s,a.get(o),o,n))})},t.prototype.slice=function(i,s){var n=this.size;return b0(i,s,n)?this:lo(this,Nc(i,n),M0(s,n))},t.prototype.__iterator=function(i,s){var n=s?this.size:0,a=Hv(this,s);return new ei(function(){var o=a();return o===lc?kr():Vi(i,s?--n:n++,o)})},t.prototype.__iterate=function(i,s){for(var n=s?this.size:0,a=Hv(this,s),o;(o=a())!==lc&&i(o,s?--n:n++,this)!==!1;);return n},t.prototype.__ensureOwner=function(i){return i===this.__ownerID?this:i?Ac(this._origin,this._capacity,this._level,this._root,this._tail,i,this.__hash):this.size===0?Hf():(this.__ownerID=i,this.__altered=!1,this)},t}(ph);Uc.isList=KM;var ds=Uc.prototype;ds[QM]=!0;ds[_c]=ds.remove;ds.merge=ds.concat;ds.setIn=Lp;ds.deleteIn=ds.removeIn=Bp;ds.update=Pp;ds.updateIn=Ip;ds.mergeIn=Gp;ds.mergeDeepIn=Yp;ds.withMutations=Bc;ds.wasAltered=Hp;ds.asImmutable=Ic;ds["@@transducer/init"]=ds.asMutable=Pc;ds["@@transducer/step"]=function(r,t){return r.push(t)};ds["@@transducer/result"]=function(r){return r.asImmutable()};var po=function(t,e){this.array=t,this.ownerID=e};po.prototype.removeBefore=function(t,e,i){if(i===e?1<<e:this.array.length===0)return this;var s=i>>>e&tr;if(s>=this.array.length)return new po([],t);var n=s===0,a;if(e>0){var o=this.array[s];if(a=o&&o.removeBefore(t,e-Ti,i),a===o&&n)return this}if(n&&!a)return this;var l=bl(this,t);if(!n)for(var u=0;u<s;u++)l.array[u]=void 0;return a&&(l.array[s]=a),l};po.prototype.removeAfter=function(t,e,i){if(i===(e?1<<e:0)||this.array.length===0)return this;var s=i-1>>>e&tr;if(s>=this.array.length)return this;var n;if(e>0){var a=this.array[s];if(n=a&&a.removeAfter(t,e-Ti,i),n===a&&s===this.array.length-1)return this}var o=bl(this,t);return o.array.splice(s+1),n&&(o.array[s]=n),o};var lc={};function Hv(r,t){var e=r._origin,i=r._capacity,s=vc(i),n=r._tail;return a(r._root,r._level,0);function a(u,d,f){return d===0?o(u,f):l(u,d,f)}function o(u,d){var f=d===s?n&&n.array:u&&u.array,y=d>e?0:e-d,m=i-d;return m>yn&&(m=yn),function(){if(y===m)return lc;var p=t?--m:y++;return f&&f[p]}}function l(u,d,f){var y,m=u&&u.array,p=f>e?0:e-f>>d,x=(i-f>>d)+1;return x>yn&&(x=yn),function(){for(;;){if(y){var b=y();if(b!==lc)return b;y=null}if(p===x)return lc;var v=t?--x:p++;y=a(m&&m[v],d-Ti,f+(v<<d))}}}}function Ac(r,t,e,i,s,n,a){var o=Object.create(ds);return o.size=t-r,o._origin=r,o._capacity=t,o._level=e,o._root=i,o._tail=s,o.__ownerID=n,o.__hash=a,o.__altered=!1,o}var Xv;function Hf(){return Xv||(Xv=Ac(0,0,Ti))}function Yk(r,t,e){if(t=Mo(r,t),t!==t)return r;if(t>=r.size||t<0)return r.withMutations(function(a){t<0?lo(a,t).set(0,e):lo(a,0,t+1).set(t,e)});t+=r._origin;var i=r._tail,s=r._root,n=Gm();return t>=vc(r._capacity)?i=qm(i,r.__ownerID,0,t,e,n):s=qm(s,r.__ownerID,r._level,t,e,n),n.value?r.__ownerID?(r._root=s,r._tail=i,r.__hash=void 0,r.__altered=!0,r):Ac(r._origin,r._capacity,r._level,s,i):r}function qm(r,t,e,i,s,n){var a=i>>>e&tr,o=r&&a<r.array.length;if(!o&&s===void 0)return r;var l;if(e>0){var u=r&&r.array[a],d=qm(u,t,e-Ti,i,s,n);return d===u?r:(l=bl(r,t),l.array[a]=d,l)}return o&&r.array[a]===s?r:(n&&mn(n),l=bl(r,t),s===void 0&&a===l.array.length-1?l.array.pop():l.array[a]=s,l)}function bl(r,t){return t&&r&&t===r.ownerID?r:new po(r?r.array.slice():[],t)}function tR(r,t){if(t>=vc(r._capacity))return r._tail;if(t<1<<r._level+Ti){for(var e=r._root,i=r._level;e&&i>0;)e=e.array[t>>>i&tr],i-=Ti;return e}}function lo(r,t,e){t!==void 0&&(t|=0),e!==void 0&&(e|=0);var i=r.__ownerID||new Rp,s=r._origin,n=r._capacity,a=s+t,o=e===void 0?n:e<0?n+e:s+e;if(a===s&&o===n)return r;if(a>=o)return r.clear();for(var l=r._level,u=r._root,d=0;a+d<0;)u=new po(u&&u.array.length?[void 0,u]:[],i),l+=Ti,d+=1<<l;d&&(a+=d,s+=d,o+=d,n+=d);for(var f=vc(n),y=vc(o);y>=1<<l+Ti;)u=new po(u&&u.array.length?[u]:[],i),l+=Ti;var m=r._tail,p=y<f?tR(r,o-1):y>f?new po([],i):m;if(m&&y>f&&a<n&&m.array.length){u=bl(u,i);for(var x=u,b=l;b>Ti;b-=Ti){var v=f>>>b&tr;x=x.array[v]=bl(x.array[v],i)}x.array[f>>>Ti&tr]=m}if(o<n&&(p=p&&p.removeAfter(i,0,o)),a>=y)a-=y,o-=y,l=Ti,u=null,p=p&&p.removeBefore(i,0,a);else if(a>s||y<f){for(d=0;u;){var R=a>>>l&tr;if(R!==y>>>l&tr)break;R&&(d+=(1<<l)*R),l-=Ti,u=u.array[R]}u&&a>s&&(u=u.removeBefore(i,l,a-d)),u&&y<f&&(u=u.removeAfter(i,l,y-d)),d&&(a-=d,o-=d)}return r.__ownerID?(r.size=o-a,r._origin=a,r._capacity=o,r._level=l,r._root=u,r._tail=p,r.__hash=void 0,r.__altered=!0,r):Ac(a,o,l,u,p)}function vc(r){return r<yn?0:r-1>>>Ti<<Ti}var Va=function(r){function t(e){return e==null?nc():DM(e)?e:nc().withMutations(function(i){var s=An(e);$r(s.size),s.forEach(function(n,a){return i.set(a,n)})})}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("OrderedMap {","}")},t.prototype.get=function(i,s){var n=this._map.get(i);return n!==void 0?this._list.get(n)[1]:s},t.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this.__altered=!0,this):nc()},t.prototype.set=function(i,s){return $v(this,i,s)},t.prototype.remove=function(i){return $v(this,i,_e)},t.prototype.__iterate=function(i,s){var n=this;return this._list.__iterate(function(a){return a&&i(a[1],a[0],n)},s)},t.prototype.__iterator=function(i,s){return this._list.fromEntrySeq().__iterator(i,s)},t.prototype.__ensureOwner=function(i){if(i===this.__ownerID)return this;var s=this._map.__ensureOwner(i),n=this._list.__ensureOwner(i);return i?qp(s,n,i,this.__hash):this.size===0?nc():(this.__ownerID=i,this.__altered=!1,this._map=s,this._list=n,this)},t}(Yl);Va.isOrderedMap=DM;Va.prototype[Il]=!0;Va.prototype[_c]=Va.prototype.remove;function qp(r,t,e,i){var s=Object.create(Va.prototype);return s.size=r?r.size:0,s._map=r,s._list=t,s.__ownerID=e,s.__hash=i,s.__altered=!1,s}var Wv;function nc(){return Wv||(Wv=qp(wn(),Hf()))}function $v(r,t,e){var i=r._map,s=r._list,n=i.get(t),a=n!==void 0,o,l;if(e===_e){if(!a)return r;s.size>=yn&&s.size>=i.size*2?(l=s.filter(function(u,d){return u!==void 0&&n!==d}),o=l.toKeyedSeq().map(function(u){return u[0]}).flip().toMap(),r.__ownerID&&(o.__ownerID=l.__ownerID=r.__ownerID)):(o=i.remove(t),l=n===s.size-1?s.pop():s.set(n,void 0))}else if(a){if(e===s.get(n)[1])return r;o=i,l=s.set(n,[t,e])}else o=i.set(t,s.size),l=s.set(s.size,[t,e]);return r.__ownerID?(r.size=o.size,r._map=o,r._list=l,r.__hash=void 0,r.__altered=!0,r):qp(o,l)}var eR="@@__IMMUTABLE_STACK__@@";function jm(r){return!!(r&&r[eR])}var jp=function(r){function t(e){return e==null?Sf():jm(e)?e:Sf().pushAll(e)}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("Stack [","]")},t.prototype.get=function(i,s){var n=this._head;for(i=Mo(this,i);n&&i--;)n=n.next;return n?n.value:s},t.prototype.peek=function(){return this._head&&this._head.value},t.prototype.push=function(){var i=arguments;if(arguments.length===0)return this;for(var s=this.size+arguments.length,n=this._head,a=arguments.length-1;a>=0;a--)n={value:i[a],next:n};return this.__ownerID?(this.size=s,this._head=n,this.__hash=void 0,this.__altered=!0,this):ac(s,n)},t.prototype.pushAll=function(i){if(i=r(i),i.size===0)return this;if(this.size===0&&jm(i))return i;$r(i.size);var s=this.size,n=this._head;return i.__iterate(function(a){s++,n={value:a,next:n}},!0),this.__ownerID?(this.size=s,this._head=n,this.__hash=void 0,this.__altered=!0,this):ac(s,n)},t.prototype.pop=function(){return this.slice(1)},t.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Sf()},t.prototype.slice=function(i,s){if(b0(i,s,this.size))return this;var n=Nc(i,this.size),a=M0(s,this.size);if(a!==this.size)return r.prototype.slice.call(this,i,s);for(var o=this.size-n,l=this._head;n--;)l=l.next;return this.__ownerID?(this.size=o,this._head=l,this.__hash=void 0,this.__altered=!0,this):ac(o,l)},t.prototype.__ensureOwner=function(i){return i===this.__ownerID?this:i?ac(this.size,this._head,i,this.__hash):this.size===0?Sf():(this.__ownerID=i,this.__altered=!1,this)},t.prototype.__iterate=function(i,s){var n=this;if(s)return new oh(this.toArray()).__iterate(function(l,u){return i(l,u,n)},s);for(var a=0,o=this._head;o&&i(o.value,a++,this)!==!1;)o=o.next;return a},t.prototype.__iterator=function(i,s){if(s)return new oh(this.toArray()).__iterator(i,s);var n=0,a=this._head;return new ei(function(){if(a){var o=a.value;return a=a.next,Vi(i,n++,o)}return kr()})},t}(ph);jp.isStack=jm;var sr=jp.prototype;sr[eR]=!0;sr.shift=sr.pop;sr.unshift=sr.push;sr.unshiftAll=sr.pushAll;sr.withMutations=Bc;sr.wasAltered=Hp;sr.asImmutable=Ic;sr["@@transducer/init"]=sr.asMutable=Pc;sr["@@transducer/step"]=function(r,t){return r.unshift(t)};sr["@@transducer/result"]=function(r){return r.asImmutable()};function ac(r,t,e,i){var s=Object.create(sr);return s.size=r,s._head=t,s.__ownerID=e,s.__hash=i,s.__altered=!1,s}var qv;function Sf(){return qv||(qv=ac(0))}var iR="@@__IMMUTABLE_SET__@@";function Jp(r){return!!(r&&r[iR])}function sR(r){return Jp(r)&&Cn(r)}function rR(r,t){if(r===t)return!0;if(!Cr(t)||r.size!==void 0&&t.size!==void 0&&r.size!==t.size||r.__hash!==void 0&&t.__hash!==void 0&&r.__hash!==t.__hash||Fi(r)!==Fi(t)||Rr(r)!==Rr(t)||Cn(r)!==Cn(t))return!1;if(r.size===0&&t.size===0)return!0;var e=!R0(r);if(Cn(r)){var i=r.entries();return t.every(function(l,u){var d=i.next().value;return d&&qr(d[1],l)&&(e||qr(d[0],u))})&&i.next().done}var s=!1;if(r.size===void 0)if(t.size===void 0)typeof r.cacheResult=="function"&&r.cacheResult();else{s=!0;var n=r;r=t,t=n}var a=!0,o=t.__iterate(function(l,u){if(e?!r.has(l):s?!qr(l,r.get(u,_e)):!qr(r.get(u,_e),l))return a=!1,!1});return a&&r.size===o}function Sh(r,t){var e=function(i){r.prototype[i]=t[i]};return Object.keys(t).forEach(e),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach(e),r}function jf(r){if(!r||typeof r!="object")return r;if(!Cr(r)){if(!Ro(r))return r;r=Jr(r)}if(Fi(r)){var t={};return r.__iterate(function(i,s){t[s]=jf(i)}),t}var e=[];return r.__iterate(function(i){e.push(jf(i))}),e}var k0=function(r){function t(e){return e==null?oc():Jp(e)&&!Cn(e)?e:oc().withMutations(function(i){var s=r(e);$r(s.size),s.forEach(function(n){return i.add(n)})})}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.fromKeys=function(i){return this(An(i).keySeq())},t.intersect=function(i){return i=is(i).toArray(),i.length?Bs.intersect.apply(t(i.pop()),i):oc()},t.union=function(i){return i=is(i).toArray(),i.length?Bs.union.apply(t(i.pop()),i):oc()},t.prototype.toString=function(){return this.__toString("Set {","}")},t.prototype.has=function(i){return this._map.has(i)},t.prototype.add=function(i){return xf(this,this._map.set(i,i))},t.prototype.remove=function(i){return xf(this,this._map.remove(i))},t.prototype.clear=function(){return xf(this,this._map.clear())},t.prototype.map=function(i,s){var n=this,a=!1,o=xf(this,this._map.mapEntries(function(l){var u=l[1],d=i.call(s,u,u,n);return d!==u&&(a=!0),[d,d]},s));return a?o:this},t.prototype.union=function(){for(var i=[],s=arguments.length;s--;)i[s]=arguments[s];return i=i.filter(function(n){return n.size!==0}),i.length===0?this:this.size===0&&!this.__ownerID&&i.length===1?this.constructor(i[0]):this.withMutations(function(n){for(var a=0;a<i.length;a++)typeof i[a]=="string"?n.add(i[a]):r(i[a]).forEach(function(o){return n.add(o)})})},t.prototype.intersect=function(){for(var i=[],s=arguments.length;s--;)i[s]=arguments[s];if(i.length===0)return this;i=i.map(function(a){return r(a)});var n=[];return this.forEach(function(a){i.every(function(o){return o.includes(a)})||n.push(a)}),this.withMutations(function(a){n.forEach(function(o){a.remove(o)})})},t.prototype.subtract=function(){for(var i=[],s=arguments.length;s--;)i[s]=arguments[s];if(i.length===0)return this;i=i.map(function(a){return r(a)});var n=[];return this.forEach(function(a){i.some(function(o){return o.includes(a)})&&n.push(a)}),this.withMutations(function(a){n.forEach(function(o){a.remove(o)})})},t.prototype.sort=function(i){return bc(xl(this,i))},t.prototype.sortBy=function(i,s){return bc(xl(this,s,i))},t.prototype.wasAltered=function(){return this._map.wasAltered()},t.prototype.__iterate=function(i,s){var n=this;return this._map.__iterate(function(a){return i(a,a,n)},s)},t.prototype.__iterator=function(i,s){return this._map.__iterator(i,s)},t.prototype.__ensureOwner=function(i){if(i===this.__ownerID)return this;var s=this._map.__ensureOwner(i);return i?this.__make(s,i):this.size===0?this.__empty():(this.__ownerID=i,this._map=s,this)},t}(Bl);k0.isSet=Jp;var Bs=k0.prototype;Bs[iR]=!0;Bs[_c]=Bs.remove;Bs.merge=Bs.concat=Bs.union;Bs.withMutations=Bc;Bs.asImmutable=Ic;Bs["@@transducer/init"]=Bs.asMutable=Pc;Bs["@@transducer/step"]=function(r,t){return r.add(t)};Bs["@@transducer/result"]=function(r){return r.asImmutable()};Bs.__empty=oc;Bs.__make=nR;function xf(r,t){return r.__ownerID?(r.size=t.size,r._map=t,r):t===r._map?r:t.size===0?r.__empty():r.__make(t)}function nR(r,t){var e=Object.create(Bs);return e.size=r?r.size:0,e._map=r,e.__ownerID=t,e}var jv;function oc(){return jv||(jv=nR(wn()))}var Hk=function(r){function t(e,i,s){if(!(this instanceof t))return new t(e,i,s);if(Np(s!==0,"Cannot step a Range by 0"),e=e||0,i===void 0&&(i=1/0),s=s===void 0?1:Math.abs(s),i<e&&(s=-s),this._start=e,this._end=i,this._step=s,this.size=Math.max(0,Math.ceil((i-e)/s-1)+1),this.size===0){if(ym)return ym;ym=this}}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.prototype.toString=function(){return this.size===0?"Range []":"Range [ "+this._start+"..."+this._end+(this._step!==1?" by "+this._step:"")+" ]"},t.prototype.get=function(i,s){return this.has(i)?this._start+Mo(this,i)*this._step:s},t.prototype.includes=function(i){var s=(i-this._start)/this._step;return s>=0&&s<this.size&&s===Math.floor(s)},t.prototype.slice=function(i,s){return b0(i,s,this.size)?this:(i=Nc(i,this.size),s=M0(s,this.size),s<=i?new t(0,0):new t(this.get(i,this._end),this.get(s,this._end),this._step))},t.prototype.indexOf=function(i){var s=i-this._start;if(s%this._step===0){var n=s/this._step;if(n>=0&&n<this.size)return n}return-1},t.prototype.lastIndexOf=function(i){return this.indexOf(i)},t.prototype.__iterate=function(i,s){for(var n=this.size,a=this._step,o=s?this._start+(n-1)*a:this._start,l=0;l!==n&&i(o,s?n-++l:l++,this)!==!1;)o+=s?-a:a;return l},t.prototype.__iterator=function(i,s){var n=this.size,a=this._step,o=s?this._start+(n-1)*a:this._start,l=0;return new ei(function(){if(l===n)return kr();var u=o;return o+=s?-a:a,Vi(i,s?n-++l:l++,u)})},t.prototype.equals=function(i){return i instanceof t?this._start===i._start&&this._end===i._end&&this._step===i._step:rR(this,i)},t}(zn),ym;function aR(r,t,e){for(var i=OM(t),s=0;s!==i.length;)if(r=GM(r,i[s++],_e),r===_e)return e;return r}function oR(r,t){return aR(this,r,t)}function Xk(r,t){return aR(r,t,_e)!==_e}function Wk(r){return Xk(this,r)}function hR(){$r(this.size);var r={};return this.__iterate(function(t,e){r[e]=t}),r}is.isIterable=Cr;is.isKeyed=Fi;is.isIndexed=Rr;is.isAssociative=R0;is.isOrdered=Cn;is.Iterator=ei;Sh(is,{toArray:function(){$r(this.size);var t=new Array(this.size||0),e=Fi(this),i=0;return this.__iterate(function(s,n){t[i++]=e?[n,s]:s}),t},toIndexedSeq:function(){return new VM(this)},toJS:function(){return jf(this)},toKeyedSeq:function(){return new C0(this,!0)},toMap:function(){return Yl(this.toKeyedSeq())},toObject:hR,toOrderedMap:function(){return Va(this.toKeyedSeq())},toOrderedSet:function(){return bc(Fi(this)?this.valueSeq():this)},toSet:function(){return k0(Fi(this)?this.valueSeq():this)},toSetSeq:function(){return new zM(this)},toSeq:function(){return Rr(this)?this.toIndexedSeq():Fi(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return jp(Fi(this)?this.valueSeq():this)},toList:function(){return Uc(Fi(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(t,e){return this.size===0?t+e:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return xi(this,bk(this,t))},includes:function(t){return this.some(function(e){return qr(e,t)})},entries:function(){return this.__iterator(xn)},every:function(t,e){$r(this.size);var i=!0;return this.__iterate(function(s,n,a){if(!t.call(e,s,n,a))return i=!1,!1}),i},filter:function(t,e){return xi(this,BM(this,t,e,!0))},partition:function(t,e){return Ak(this,t,e)},find:function(t,e,i){var s=this.findEntry(t,e);return s?s[1]:i},forEach:function(t,e){return $r(this.size),this.__iterate(e?t.bind(e):t)},join:function(t){$r(this.size),t=t!==void 0?""+t:",";var e="",i=!0;return this.__iterate(function(s){i?i=!1:e+=t,e+=s!=null?s.toString():""}),e},keys:function(){return this.__iterator(Lc)},map:function(t,e){return xi(this,LM(this,t,e))},reduce:function(t,e,i){return Jv(this,t,e,i,arguments.length<2,!1)},reduceRight:function(t,e,i){return Jv(this,t,e,i,arguments.length<2,!0)},reverse:function(){return xi(this,Fp(this,!0))},slice:function(t,e){return xi(this,Vp(this,t,e,!0))},some:function(t,e){$r(this.size);var i=!1;return this.__iterate(function(s,n,a){if(t.call(e,s,n,a))return i=!0,!1}),i},sort:function(t){return xi(this,xl(this,t))},values:function(){return this.__iterator(Vn)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return this.size!==void 0?this.size===0:!this.some(function(){return!0})},count:function(t,e){return Sl(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return Sk(this,t,e)},equals:function(t){return rR(this,t)},entrySeq:function(){var t=this;if(t._cache)return new oh(t._cache);var e=t.toSeq().map(qk).toIndexedSeq();return e.fromEntrySeq=function(){return t.toSeq()},e},filterNot:function(t,e){return this.filter(mm(t),e)},findEntry:function(t,e,i){var s=i;return this.__iterate(function(n,a,o){if(t.call(e,n,a,o))return s=[a,n],!1}),s},findKey:function(t,e){var i=this.findEntry(t,e);return i&&i[0]},findLast:function(t,e,i){return this.toKeyedSeq().reverse().find(t,e,i)},findLastEntry:function(t,e,i){return this.toKeyedSeq().reverse().findEntry(t,e,i)},findLastKey:function(t,e){return this.toKeyedSeq().reverse().findKey(t,e)},first:function(t){return this.find(pM,null,t)},flatMap:function(t,e){return xi(this,Mk(this,t,e))},flatten:function(t){return xi(this,IM(this,t,!0))},fromEntrySeq:function(){return new _M(this)},get:function(t,e){return this.find(function(i,s){return qr(s,t)},void 0,e)},getIn:oR,groupBy:function(t,e){return xk(this,t,e)},has:function(t){return this.get(t,_e)!==_e},hasIn:Wk,isSubset:function(t){return t=typeof t.includes=="function"?t:is(t),this.every(function(e){return t.includes(e)})},isSuperset:function(t){return t=typeof t.isSubset=="function"?t:is(t),t.isSubset(this)},keyOf:function(t){return this.findKey(function(e){return qr(e,t)})},keySeq:function(){return this.toSeq().map($k).toIndexedSeq()},last:function(t){return this.toSeq().reverse().first(t)},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return mf(this,t)},maxBy:function(t,e){return mf(this,e,t)},min:function(t){return mf(this,t?Zv(t):Kv)},minBy:function(t,e){return mf(this,e?Zv(e):Kv,t)},rest:function(){return this.slice(1)},skip:function(t){return t===0?this:this.slice(Math.max(0,t))},skipLast:function(t){return t===0?this:this.slice(0,-Math.max(0,t))},skipWhile:function(t,e){return xi(this,PM(this,t,e,!0))},skipUntil:function(t,e){return this.skipWhile(mm(t),e)},sortBy:function(t,e){return xi(this,xl(this,e,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return this.slice(-Math.max(0,t))},takeWhile:function(t,e){return xi(this,vk(this,t,e))},takeUntil:function(t,e){return this.takeWhile(mm(t),e)},update:function(t){return t(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=jk(this))}});var js=is.prototype;js[AM]=!0;js[E0]=js.values;js.toJSON=js.toArray;js.__toStringMapper=pc;js.inspect=js.toSource=function(){return this.toString()};js.chain=js.flatMap;js.contains=js.includes;Sh(An,{flip:function(){return xi(this,NM(this))},mapEntries:function(t,e){var i=this,s=0;return xi(this,this.toSeq().map(function(n,a){return t.call(e,[a,n],s++,i)}).fromEntrySeq())},mapKeys:function(t,e){var i=this;return xi(this,this.toSeq().flip().map(function(s,n){return t.call(e,s,n,i)}).flip())}});var Oc=An.prototype;Oc[vM]=!0;Oc[E0]=js.entries;Oc.toJSON=hR;Oc.__toStringMapper=function(r,t){return pc(t)+": "+pc(r)};Sh(ph,{toKeyedSeq:function(){return new C0(this,!1)},filter:function(t,e){return xi(this,BM(this,t,e,!1))},findIndex:function(t,e){var i=this.findEntry(t,e);return i?i[0]:-1},indexOf:function(t){var e=this.keyOf(t);return e===void 0?-1:e},lastIndexOf:function(t){var e=this.lastKeyOf(t);return e===void 0?-1:e},reverse:function(){return xi(this,Fp(this,!1))},slice:function(t,e){return xi(this,Vp(this,t,e,!1))},splice:function(t,e){var i=arguments.length;if(e=Math.max(e||0,0),i===0||i===2&&!e)return this;t=Nc(t,t<0?this.count():this.size);var s=this.slice(0,t);return xi(this,i===1?s:s.concat(Wn(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){var i=this.findLastEntry(t,e);return i?i[0]:-1},first:function(t){return this.get(0,t)},flatten:function(t){return xi(this,IM(this,t,!1))},get:function(t,e){return t=Mo(this,t),t<0||this.size===1/0||this.size!==void 0&&t>this.size?e:this.find(function(i,s){return s===t},void 0,e)},has:function(t){return t=Mo(this,t),t>=0&&(this.size!==void 0?this.size===1/0||t<this.size:this.indexOf(t)!==-1)},interpose:function(t){return xi(this,Rk(this,t))},interleave:function(){var t=[this].concat(Wn(arguments)),e=pf(this.toSeq(),zn.of,t),i=e.flatten(!0);return e.size&&(i.size=e.size*t.length),xi(this,i)},keySeq:function(){return Hk(0,this.size)},last:function(t){return this.get(-1,t)},skipWhile:function(t,e){return xi(this,PM(this,t,e,!1))},zip:function(){var t=[this].concat(Wn(arguments));return xi(this,pf(this,Qv,t))},zipAll:function(){var t=[this].concat(Wn(arguments));return xi(this,pf(this,Qv,t,!0))},zipWith:function(t){var e=Wn(arguments);return e[0]=this,xi(this,pf(this,t,e))}});var Hl=ph.prototype;Hl[bM]=!0;Hl[Il]=!0;Sh(Bl,{get:function(t,e){return this.has(t)?t:e},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}});var Ml=Bl.prototype;Ml.has=js.includes;Ml.contains=Ml.includes;Ml.keys=Ml.values;Sh(Co,Oc);Sh(zn,Hl);Sh(Ol,Ml);function Jv(r,t,e,i,s,n){return $r(r.size),r.__iterate(function(a,o,l){s?(s=!1,e=a):e=t.call(i,e,a,o,l)},n),e}function $k(r,t){return t}function qk(r,t){return[t,r]}function mm(r){return function(){return!r.apply(this,arguments)}}function Zv(r){return function(){return-r.apply(this,arguments)}}function Qv(){return Wn(arguments)}function Kv(r,t){return r<t?1:r>t?-1:0}function jk(r){if(r.size===1/0)return 0;var t=Cn(r),e=Fi(r),i=t?1:0,s=r.__iterate(e?t?function(n,a){i=31*i+tb(Wr(n),Wr(a))|0}:function(n,a){i=i+tb(Wr(n),Wr(a))|0}:t?function(n){i=31*i+Wr(n)|0}:function(n){i=i+Wr(n)|0});return Jk(s,i)}function Jk(r,t){return t=Qu(t,3432918353),t=Qu(t<<15|t>>>-15,461845907),t=Qu(t<<13|t>>>-13,5),t=(t+3864292196|0)^r,t=Qu(t^t>>>16,2246822507),t=Qu(t^t>>>13,3266489909),t=w0(t^t>>>16),t}function tb(r,t){return r^t+2654435769+(r<<6)+(r>>2)|0}var bc=function(r){function t(e){return e==null?Jm():sR(e)?e:Jm().withMutations(function(i){var s=Bl(e);$r(s.size),s.forEach(function(n){return i.add(n)})})}return r&&(t.__proto__=r),t.prototype=Object.create(r&&r.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.fromKeys=function(i){return this(An(i).keySeq())},t.prototype.toString=function(){return this.__toString("OrderedSet {","}")},t}(k0);bc.isOrderedSet=sR;var xh=bc.prototype;xh[Il]=!0;xh.zip=Hl.zip;xh.zipWith=Hl.zipWith;xh.zipAll=Hl.zipAll;xh.__empty=Jm;xh.__make=lR;function lR(r,t){var e=Object.create(xh);return e.size=r?r.size:0,e._map=r,e.__ownerID=t,e}var eb;function Jm(){return eb||(eb=lR(nc()))}function Zk(r){if(Pl(r))throw new Error("Can not call `Record` with an immutable Record as default values. Use a plain javascript object instead.");if(na(r))throw new Error("Can not call `Record` with an immutable Collection as default values. Use a plain javascript object instead.");if(r===null||typeof r!="object")throw new Error("Can not call `Record` with a non-object as default values. Use a plain javascript object instead.")}var Ae=function(t,e){var i;Zk(t);var s=function(o){var l=this;if(o instanceof s)return o;if(!(this instanceof s))return new s(o);if(!i){i=!0;var u=Object.keys(t),d=n._indices={};n._name=e,n._keys=u,n._defaultValues=t;for(var f=0;f<u.length;f++){var y=u[f];d[y]=f,n[y]?typeof console=="object"&&console.warn&&console.warn("Cannot define "+Qp(this)+' with property "'+y+'" since that property name is part of the Record API.'):Qk(n,y)}}return this.__ownerID=void 0,this._values=Uc().withMutations(function(m){m.setSize(l._keys.length),An(o).forEach(function(p,x){m.set(l._indices[x],p===l._defaultValues[x]?void 0:p)})}),this},n=s.prototype=Object.create(Mi);return n.constructor=s,e&&(s.displayName=e),s};Ae.prototype.toString=function(){for(var t=Qp(this)+" { ",e=this._keys,i,s=0,n=e.length;s!==n;s++)i=e[s],t+=(s?", ":"")+i+": "+pc(this.get(i));return t+" }"};Ae.prototype.equals=function(t){return this===t||Pl(t)&&Rl(this).equals(Rl(t))};Ae.prototype.hashCode=function(){return Rl(this).hashCode()};Ae.prototype.has=function(t){return this._indices.hasOwnProperty(t)};Ae.prototype.get=function(t,e){if(!this.has(t))return e;var i=this._indices[t],s=this._values.get(i);return s===void 0?this._defaultValues[t]:s};Ae.prototype.set=function(t,e){if(this.has(t)){var i=this._values.set(this._indices[t],e===this._defaultValues[t]?void 0:e);if(i!==this._values&&!this.__ownerID)return Zp(this,i)}return this};Ae.prototype.remove=function(t){return this.set(t)};Ae.prototype.clear=function(){var t=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:Zp(this,t)};Ae.prototype.wasAltered=function(){return this._values.wasAltered()};Ae.prototype.toSeq=function(){return Rl(this)};Ae.prototype.toJS=function(){return jf(this)};Ae.prototype.entries=function(){return this.__iterator(xn)};Ae.prototype.__iterator=function(t,e){return Rl(this).__iterator(t,e)};Ae.prototype.__iterate=function(t,e){return Rl(this).__iterate(t,e)};Ae.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._values.__ensureOwner(t);return t?Zp(this,e,t):(this.__ownerID=t,this._values=e,this)};Ae.isRecord=Pl;Ae.getDescriptiveName=Qp;var Mi=Ae.prototype;Mi[RM]=!0;Mi[_c]=Mi.remove;Mi.deleteIn=Mi.removeIn=Bp;Mi.getIn=oR;Mi.hasIn=js.hasIn;Mi.merge=XM;Mi.mergeWith=WM;Mi.mergeIn=Gp;Mi.mergeDeep=qM;Mi.mergeDeepWith=jM;Mi.mergeDeepIn=Yp;Mi.setIn=Lp;Mi.update=Pp;Mi.updateIn=Ip;Mi.withMutations=Bc;Mi.asMutable=Pc;Mi.asImmutable=Ic;Mi[E0]=Mi.entries;Mi.toJSON=Mi.toObject=js.toObject;Mi.inspect=Mi.toSource=function(){return this.toString()};function Zp(r,t,e){var i=Object.create(Object.getPrototypeOf(r));return i._values=t,i.__ownerID=e,i}function Qp(r){return r.constructor.displayName||r.constructor.name||"Record"}function Rl(r){return Cp(r._keys.map(function(t){return[t,r.get(t)]}))}function Qk(r,t){try{Object.defineProperty(r,t,{get:function(){return this.get(t)},set:function(e){Np(this.__ownerID,"Cannot set on an immutable record."),this.set(t,e)}})}catch{}}var Zm=function(r,t){return Zm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])},Zm(r,t)};function Kk(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Zm(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function ib(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],i=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Qm(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var i=e.call(r),s,n=[],a;try{for(;(t===void 0||t-- >0)&&!(s=i.next()).done;)n.push(s.value)}catch(o){a={error:o}}finally{try{s&&!s.done&&(e=i.return)&&e.call(i)}finally{if(a)throw a.error}}return n}function t3(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(Qm(arguments[t]));return r}var uR=function(r){Kk(t,r);function t(e){var i=this,s="EventError: "+e+"}";return i=r.call(this,s)||this,Object.setPrototypeOf(i,t.prototype),i}return t}(Error),e3=function(r,t){return{token:r+"-"+t,ownerIndex:r,id:t}},i3=0,sb=function(r,t){return new uR("Event listener with "+r.token+" id does not exist at Eventer with "+t+" id.")},Ii=function(){function r(){this.id=++i3,this.lastEventIndex=0,this.topics=new Map}return r.prototype.on=function(t,e,i){var s=this.topics.get(t),n=i||e3(this.id,++this.lastEventIndex);return s?s.set(n,e):this.topics.set(t,new Map([[n,e]])),n},r.prototype.has=function(t,e){var i,s;if(e){var n=this.topics.get(e);if(n){var a=n.get(t);return a||sb(t,this.id)}else return new uR("Eventer with "+t.ownerIndex+" does not have "+e+".")}else{try{for(var o=ib(this.topics),l=o.next();!l.done;l=o.next()){var u=Qm(l.value,2),d=u[0],n=u[1],a=n.get(t);if(a)return a}}catch(f){i={error:f}}finally{try{l&&!l.done&&(s=o.return)&&s.call(o)}finally{if(i)throw i.error}}return sb(t,this.id)}},r.prototype.off=function(t,e){var i,s;if(e){var n=this.topics.get(e);return!!(n&&n.delete(t))}else{try{for(var a=ib(this.topics),o=a.next();!o.done;o=a.next()){var l=Qm(o.value,2),u=l[0],n=l[1];if(n.delete(t))return!0}}catch(d){i={error:d}}finally{try{o&&!o.done&&(s=a.return)&&s.call(a)}finally{if(i)throw i.error}}return!1}},r.prototype.allOff=function(){return this.topics.clear(),this},r.prototype.topicOff=function(t){return this.topics.delete(t)},r.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var s=this.topics.get(t),n=0;if(s){var a=new Map(s);a.forEach(function(o){o.apply(void 0,t3(e)),n++})}return n},r.prototype.listeners=function(t){var e=this.topics.get(t);return e||new Map},r}(),Af={exports:{}},rb;function s3(){if(rb)return Af.exports;rb=1,Af.exports=r,Af.exports.default=r;function r(N,U,O){O=O||2;var W=U&&U.length,I=W?U[0]*O:N.length,H=t(N,0,I,O,!0),q=[];if(!H||H.next===H.prev)return q;var Q,J,ot,ht,ut,dt,Tt;if(W&&(H=l(N,U,H,O)),N.length>80*O){Q=ot=N[0],J=ht=N[1];for(var xt=O;xt<I;xt+=O)ut=N[xt],dt=N[xt+1],ut<Q&&(Q=ut),dt<J&&(J=dt),ut>ot&&(ot=ut),dt>ht&&(ht=dt);Tt=Math.max(ot-Q,ht-J),Tt=Tt!==0?32767/Tt:0}return i(H,q,O,Q,J,Tt,0),q}function t(N,U,O,W,I){var H,q;if(I===X(N,U,O,W)>0)for(H=U;H<O;H+=W)q=C(H,N[H],N[H+1],q);else for(H=O-W;H>=U;H-=W)q=C(H,N[H],N[H+1],q);return q&&V(q,q.next)&&(k(q),q=q.next),q}function e(N,U){if(!N)return N;U||(U=N);var O=N,W;do if(W=!1,!O.steiner&&(V(O,O.next)||E(O.prev,O,O.next)===0)){if(k(O),O=U=O.prev,O===O.next)break;W=!0}else O=O.next;while(W||O!==U);return U}function i(N,U,O,W,I,H,q){if(N){!q&&H&&m(N,W,I,H);for(var Q=N,J,ot;N.prev!==N.next;){if(J=N.prev,ot=N.next,H?n(N,W,I,H):s(N)){U.push(J.i/O|0),U.push(N.i/O|0),U.push(ot.i/O|0),k(N),N=ot.next,Q=ot.next;continue}if(N=ot,N===Q){q?q===1?(N=a(e(N),U,O),i(N,U,O,W,I,H,2)):q===2&&o(N,U,O,W,I,H):i(e(N),U,O,W,I,H,1);break}}}}function s(N){var U=N.prev,O=N,W=N.next;if(E(U,O,W)>=0)return!1;for(var I=U.x,H=O.x,q=W.x,Q=U.y,J=O.y,ot=W.y,ht=I<H?I<q?I:q:H<q?H:q,ut=Q<J?Q<ot?Q:ot:J<ot?J:ot,dt=I>H?I>q?I:q:H>q?H:q,Tt=Q>J?Q>ot?Q:ot:J>ot?J:ot,xt=W.next;xt!==U;){if(xt.x>=ht&&xt.x<=dt&&xt.y>=ut&&xt.y<=Tt&&v(I,Q,H,J,q,ot,xt.x,xt.y)&&E(xt.prev,xt,xt.next)>=0)return!1;xt=xt.next}return!0}function n(N,U,O,W){var I=N.prev,H=N,q=N.next;if(E(I,H,q)>=0)return!1;for(var Q=I.x,J=H.x,ot=q.x,ht=I.y,ut=H.y,dt=q.y,Tt=Q<J?Q<ot?Q:ot:J<ot?J:ot,xt=ht<ut?ht<dt?ht:dt:ut<dt?ut:dt,zt=Q>J?Q>ot?Q:ot:J>ot?J:ot,Nt=ht>ut?ht>dt?ht:dt:ut>dt?ut:dt,jt=x(Tt,xt,U,O,W),ie=x(zt,Nt,U,O,W),Ft=N.prevZ,kt=N.nextZ;Ft&&Ft.z>=jt&&kt&&kt.z<=ie;){if(Ft.x>=Tt&&Ft.x<=zt&&Ft.y>=xt&&Ft.y<=Nt&&Ft!==I&&Ft!==q&&v(Q,ht,J,ut,ot,dt,Ft.x,Ft.y)&&E(Ft.prev,Ft,Ft.next)>=0||(Ft=Ft.prevZ,kt.x>=Tt&&kt.x<=zt&&kt.y>=xt&&kt.y<=Nt&&kt!==I&&kt!==q&&v(Q,ht,J,ut,ot,dt,kt.x,kt.y)&&E(kt.prev,kt,kt.next)>=0))return!1;kt=kt.nextZ}for(;Ft&&Ft.z>=jt;){if(Ft.x>=Tt&&Ft.x<=zt&&Ft.y>=xt&&Ft.y<=Nt&&Ft!==I&&Ft!==q&&v(Q,ht,J,ut,ot,dt,Ft.x,Ft.y)&&E(Ft.prev,Ft,Ft.next)>=0)return!1;Ft=Ft.prevZ}for(;kt&&kt.z<=ie;){if(kt.x>=Tt&&kt.x<=zt&&kt.y>=xt&&kt.y<=Nt&&kt!==I&&kt!==q&&v(Q,ht,J,ut,ot,dt,kt.x,kt.y)&&E(kt.prev,kt,kt.next)>=0)return!1;kt=kt.nextZ}return!0}function a(N,U,O){var W=N;do{var I=W.prev,H=W.next.next;!V(I,H)&&F(I,W,W.next,H)&&A(I,H)&&A(H,I)&&(U.push(I.i/O|0),U.push(W.i/O|0),U.push(H.i/O|0),k(W),k(W.next),W=N=H),W=W.next}while(W!==N);return e(W)}function o(N,U,O,W,I,H){var q=N;do{for(var Q=q.next.next;Q!==q.prev;){if(q.i!==Q.i&&R(q,Q)){var J=w(q,Q);q=e(q,q.next),J=e(J,J.next),i(q,U,O,W,I,H,0),i(J,U,O,W,I,H,0);return}Q=Q.next}q=q.next}while(q!==N)}function l(N,U,O,W){var I=[],H,q,Q,J,ot;for(H=0,q=U.length;H<q;H++)Q=U[H]*W,J=H<q-1?U[H+1]*W:N.length,ot=t(N,Q,J,W,!1),ot===ot.next&&(ot.steiner=!0),I.push(b(ot));for(I.sort(u),H=0;H<I.length;H++)O=d(I[H],O);return O}function u(N,U){return N.x-U.x}function d(N,U){var O=f(N,U);if(!O)return U;var W=w(O,N);return e(W,W.next),e(O,O.next)}function f(N,U){var O=U,W=N.x,I=N.y,H=-1/0,q;do{if(I<=O.y&&I>=O.next.y&&O.next.y!==O.y){var Q=O.x+(I-O.y)*(O.next.x-O.x)/(O.next.y-O.y);if(Q<=W&&Q>H&&(H=Q,q=O.x<O.next.x?O:O.next,Q===W))return q}O=O.next}while(O!==U);if(!q)return null;var J=q,ot=q.x,ht=q.y,ut=1/0,dt;O=q;do W>=O.x&&O.x>=ot&&W!==O.x&&v(I<ht?W:H,I,ot,ht,I<ht?H:W,I,O.x,O.y)&&(dt=Math.abs(I-O.y)/(W-O.x),A(O,N)&&(dt<ut||dt===ut&&(O.x>q.x||O.x===q.x&&y(q,O)))&&(q=O,ut=dt)),O=O.next;while(O!==J);return q}function y(N,U){return E(N.prev,N,U.prev)<0&&E(U.next,N,N.next)<0}function m(N,U,O,W){var I=N;do I.z===0&&(I.z=x(I.x,I.y,U,O,W)),I.prevZ=I.prev,I.nextZ=I.next,I=I.next;while(I!==N);I.prevZ.nextZ=null,I.prevZ=null,p(I)}function p(N){var U,O,W,I,H,q,Q,J,ot=1;do{for(O=N,N=null,H=null,q=0;O;){for(q++,W=O,Q=0,U=0;U<ot&&(Q++,W=W.nextZ,!!W);U++);for(J=ot;Q>0||J>0&&W;)Q!==0&&(J===0||!W||O.z<=W.z)?(I=O,O=O.nextZ,Q--):(I=W,W=W.nextZ,J--),H?H.nextZ=I:N=I,I.prevZ=H,H=I;O=W}H.nextZ=null,ot*=2}while(q>1);return N}function x(N,U,O,W,I){return N=(N-O)*I|0,U=(U-W)*I|0,N=(N|N<<8)&16711935,N=(N|N<<4)&252645135,N=(N|N<<2)&858993459,N=(N|N<<1)&1431655765,U=(U|U<<8)&16711935,U=(U|U<<4)&252645135,U=(U|U<<2)&858993459,U=(U|U<<1)&1431655765,N|U<<1}function b(N){var U=N,O=N;do(U.x<O.x||U.x===O.x&&U.y<O.y)&&(O=U),U=U.next;while(U!==N);return O}function v(N,U,O,W,I,H,q,Q){return(I-q)*(U-Q)>=(N-q)*(H-Q)&&(N-q)*(W-Q)>=(O-q)*(U-Q)&&(O-q)*(H-Q)>=(I-q)*(W-Q)}function R(N,U){return N.next.i!==U.i&&N.prev.i!==U.i&&!B(N,U)&&(A(N,U)&&A(U,N)&&T(N,U)&&(E(N.prev,N,U.prev)||E(N,U.prev,U))||V(N,U)&&E(N.prev,N,N.next)>0&&E(U.prev,U,U.next)>0)}function E(N,U,O){return(U.y-N.y)*(O.x-U.x)-(U.x-N.x)*(O.y-U.y)}function V(N,U){return N.x===U.x&&N.y===U.y}function F(N,U,O,W){var I=z(E(N,U,O)),H=z(E(N,U,W)),q=z(E(O,W,N)),Q=z(E(O,W,U));return!!(I!==H&&q!==Q||I===0&&L(N,O,U)||H===0&&L(N,W,U)||q===0&&L(O,N,W)||Q===0&&L(O,U,W))}function L(N,U,O){return U.x<=Math.max(N.x,O.x)&&U.x>=Math.min(N.x,O.x)&&U.y<=Math.max(N.y,O.y)&&U.y>=Math.min(N.y,O.y)}function z(N){return N>0?1:N<0?-1:0}function B(N,U){var O=N;do{if(O.i!==N.i&&O.next.i!==N.i&&O.i!==U.i&&O.next.i!==U.i&&F(O,O.next,N,U))return!0;O=O.next}while(O!==N);return!1}function A(N,U){return E(N.prev,N,N.next)<0?E(N,U,N.next)>=0&&E(N,N.prev,U)>=0:E(N,U,N.prev)<0||E(N,N.next,U)<0}function T(N,U){var O=N,W=!1,I=(N.x+U.x)/2,H=(N.y+U.y)/2;do O.y>H!=O.next.y>H&&O.next.y!==O.y&&I<(O.next.x-O.x)*(H-O.y)/(O.next.y-O.y)+O.x&&(W=!W),O=O.next;while(O!==N);return W}function w(N,U){var O=new _(N.i,N.x,N.y),W=new _(U.i,U.x,U.y),I=N.next,H=U.prev;return N.next=U,U.prev=N,O.next=I,I.prev=O,W.next=O,O.prev=W,H.next=W,W.prev=H,W}function C(N,U,O,W){var I=new _(N,U,O);return W?(I.next=W.next,I.prev=W,W.next.prev=I,W.next=I):(I.prev=I,I.next=I),I}function k(N){N.next.prev=N.prev,N.prev.next=N.next,N.prevZ&&(N.prevZ.nextZ=N.nextZ),N.nextZ&&(N.nextZ.prevZ=N.prevZ)}function _(N,U,O){this.i=N,this.x=U,this.y=O,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}r.deviation=function(N,U,O,W){var I=U&&U.length,H=I?U[0]*O:N.length,q=Math.abs(X(N,0,H,O));if(I)for(var Q=0,J=U.length;Q<J;Q++){var ot=U[Q]*O,ht=Q<J-1?U[Q+1]*O:N.length;q-=Math.abs(X(N,ot,ht,O))}var ut=0;for(Q=0;Q<W.length;Q+=3){var dt=W[Q]*O,Tt=W[Q+1]*O,xt=W[Q+2]*O;ut+=Math.abs((N[dt]-N[xt])*(N[Tt+1]-N[dt+1])-(N[dt]-N[Tt])*(N[xt+1]-N[dt+1]))}return q===0&&ut===0?0:Math.abs((ut-q)/q)};function X(N,U,O,W){for(var I=0,H=U,q=O-W;H<O;H+=W)I+=(N[q]-N[H])*(N[H+1]+N[q+1]),q=H;return I}return r.flatten=function(N){for(var U=N[0][0].length,O={vertices:[],holes:[],dimensions:U},W=0,I=0;I<N.length;I++){for(var H=0;H<N[I].length;H++)for(var q=0;q<U;q++)O.vertices.push(N[I][H][q]);I>0&&(W+=N[I-1].length,O.holes.push(W))}return O},Af.exports}var r3=s3();const cR=MC(r3);class dR{constructor(){this.i=!0}o(){return this.i}}class n3 extends dR{constructor(t,e){super(),this.u=t,this.i=e}S(t){return t!==this.u&&(this.u=t,this.i=!0),this}M(){return this.u}o(){return super.o()}}const Y=(r,t)=>({x:r,y:t}),Kn=(r,t)=>({x:r,y:t}),dn=(r,t,e)=>({position:r,high:t,low:e}),Bt=(r,t,e)=>({x:r,y:t,z:e}),fR=r=>{const t=Array(0),e=Array(0);return r.length>0&&r.forEach(i=>{t.push(Y(i.position,i.high)),e.push(Y(i.position,i.low))}),[t,e]},Kt=(r,t)=>({min:r,max:t}),gR=(r,t,e,i)=>({x:Math.ceil(r),y:Math.ceil(t),width:Math.ceil(e),height:Math.ceil(i)}),Wt=(r,t=!0)=>new n3(r,t),ka=(r=0,t=0,e=0,i=0)=>({left:r,top:t,right:e,bottom:i}),hc=ka,fl=(r,t)=>({left:t.left!==void 0?t.left:r.left,top:t.top!==void 0?t.top:r.top,right:t.right!==void 0?t.right:r.right,bottom:t.bottom!==void 0?t.bottom:r.bottom}),a3=Ae({type:"color",r:1,g:1,b:1,a:1});class jr extends a3{constructor(t){super(t)}toUint32(){return this._!==void 0||(this._=l3(this.getR(),this.getG(),this.getB(),this.getA())),this._}toString(){return`color:${this.r},${this.g},${this.b},${this.a}`}setA(t){return this.set("a",t/255)}setR(t){return this.set("r",t/255)}setG(t){return this.set("g",t/255)}setB(t){return this.set("b",t/255)}getA(){return 255*this.get("a")}getR(){return 255*this.get("r")}getG(){return 255*this.get("g")}getB(){return 255*this.get("b")}getHighlight(){return this.C||(this.C=new jr({r:this.r+.45*(1-this.r),g:this.g+.45*(1-this.g),b:this.b+.45*(1-this.b),a:this.a<1?this.a+.45*(1-this.a):1})),this.C}getLighter(){return this.T||(this.T=new jr({r:this.r+.4*(1-this.r),g:this.g+.4*(1-this.g),b:this.b+.4*(1-this.b),a:this.a})),this.T}getDarker(){return this.F||(this.F=new jr({r:this.r-.4*(1-this.r),g:this.g-.4*(1-this.g),b:this.b-.4*(1-this.b),a:this.a})),this.F}toRGBAString(){return`rgba( ${255*this.r}, ${255*this.g}, ${255*this.b}, ${255*this.a} )`}}const Mc=r=>!(!r||typeof r!="object"||!("type"in r)||r.type!=="color"),P=(r,t,e,i=255)=>new jr({r:r/255,g:t/255,b:e/255,a:i/255}),vs=r=>{const t=r.startsWith("#")?r.substring(1):r.startsWith("0x")?r.substr(2):r;switch(t.length){case 8:return new jr({r:+`0x${t.substring(0,2)}`/255,g:+`0x${t.substring(2,4)}`/255,b:+`0x${t.substring(4,6)}`/255,a:+`0x${t.substring(6,8)}`/255});case 6:return new jr({r:+`0x${t.substring(0,2)}`/255,g:+`0x${t.substring(2,4)}`/255,b:+`0x${t.substring(4,6)}`/255});case 4:return new jr({r:+`0x${t.charAt(0)}${t.charAt(0)}`/255,g:+`0x${t.charAt(1)}${t.charAt(1)}`/255,b:+`0x${t.charAt(2)}${t.charAt(2)}`/255,a:+`0x${t.charAt(3)}${t.charAt(3)}`/255});case 3:return new jr({r:+`0x${t.charAt(0)}${t.charAt(0)}`/255,g:+`0x${t.charAt(1)}${t.charAt(1)}`/255,b:+`0x${t.charAt(2)}${t.charAt(2)}`/255});default:throw new Error(`ColorHEX parsing error | input: ${r}`)}},o3=(r,t=1,e=1)=>{let i,s,n;r/=360;const a=Math.floor(6*r),o=6*r-a,l=e*(1-t),u=e*(1-o*t),d=e*(1-(1-o)*t);switch(a%6){case 0:i=e,s=d,n=l;break;case 1:i=u,s=e,n=l;break;case 2:i=l,s=e,n=d;break;case 3:i=l,s=u,n=e;break;case 4:i=d,s=l,n=e;break;default:i=e,s=l,n=u}return new jr({r:i,g:s,b:n})},h3=r=>P(255&r,255&(r>>=8),255&(r>>=8),255&(r>>=8)),hh=new jr({}),Je=P(0,0,0,0),l3=(r,t,e,i=255)=>(i<<24|e<<16|t<<8|r)>>>0,u3=(r,t)=>r.value-t.value,c3=Ae({type:"lut",steps:[],title:"",units:"",interpolate:!0,color:P(0,0,0,255),length:0,min:0,max:0,subranges:[],isValid:!1,percentageValues:!1}),nb=r=>{const{steps:t}=r,e=t.length;t.sort(u3);const[i,s]=e>0?[t[0].value,t[e-1].value]:[0,0],n=e>0?e-1:0,a=Array(n);for(let o=0;o<n;o+=1)a[o]={min:t[o],max:t[o+1]};return{min:i,max:s,length:e,steps:t,subranges:a,isValid:e>0&&i!==s}};class d3 extends c3{constructor(t){super(((e,i)=>({steps:e.steps,title:e.title,units:e.units,interpolate:e.interpolate,percentageValues:e.percentageValues,color:e.color,length:i.length,min:i.min,max:i.max,subranges:i.subranges,isValid:i.isValid}))(t,nb(t)))}toString(){return`LUT:interpolate=${this.interpolate},steps=${this.steps.length},percentage=${this.percentageValues}`}setSteps(t){return this.merge(nb({...this,steps:t}))}getSteps(){return this.get("steps")}setTitle(t){return this.set("title",t)}getTitle(){return this.get("title")}setUnits(t){return this.set("units",t)}getUnits(){return this.get("units")}setInterpolation(t){return this.set("interpolate",t)}getInterpolation(){return this.get("interpolate")}setFallbackColor(t){return this.set("color",t)}getFallbackColor(){return this.get("color")}setPercentageValues(t){return this.set("percentageValues",t)}getPercentageValues(){return this.get("percentageValues")}getColors(t){if(Array.isArray(t)){if(Array.isArray(t[0])){const n=t,a=n.length,o=n[0].length,l=[...Array(a)].map(()=>Array(o));for(let u=0;u<a;u+=1)for(let d=0;d<o;d+=1)l[u][d]=this.I(n[u][d]);return l}const e=t,i=e.length,s=Array(i);for(let n=0;n<i;n+=1)s[n]=this.I(e[n]);return s}return this.I(t)}I(t){const{steps:e}=this,i=e.length;if(i===0)return this.getFallbackColor();if(i===1)return e[0].color||this.color;if(this.interpolate){for(let o=0;o<i-1;o+=1){const l=e[o],u=e[o+1],d=Math.min(l.value,u.value),f=Math.max(l.value,u.value);if(t>=d&&t<=f){if(d===f)return l.color;const y=(t-l.value)/(u.value-l.value);return s=l.color,n=u.color,a=y,new jr({r:s.r+(n.r-s.r)*a,g:s.g+(n.g-s.g)*a,b:s.b+(n.b-s.b)*a,a:s.a+(n.a-s.a)*a})}}return t<e[0].value?e[0].color:e[i-1].color}var s,n,a;for(let o=i-1;o>=0;o-=1)if(t>=e[o].value)return e[o].color;return e[0].color}}const f3=Ae({type:"fillstyle",fillType:"empty"});class g3 extends f3{toString(){return"emptyFill"}}const Vt=new g3,yR=r=>!!(r&&typeof r=="object"&&"type"in r&&r.type==="fillstyle"&&"fillType"in r&&r.fillType==="empty"),y3=Ae({type:"fillstyle",fillType:"solid",color:P(255,255,255)});class mR extends y3{}class it extends mR{constructor(t){super({...t,fillType:"solid"})}toString(){return`solidFill:${this.color.toString()}`}setColor(t){return Mc(t)?this.set("color",t):this.set("color",t(this.get("color")))}getColor(){return this.get("color")}setA(t){return this.setColor(this.getColor().setA(t))}setR(t){return this.setColor(this.getColor().setR(t))}setG(t){return this.setColor(this.getColor().setG(t))}setB(t){return this.setColor(this.getColor().setB(t))}}const ce=r=>!!(r&&typeof r=="object"&&"type"in r&&r.type==="fillstyle"&&"fillType"in r&&r.fillType==="solid");class ab extends mR{constructor(t){super({...t,fillType:"individual"})}toString(){return`individualPointFill:${this.color.toString()}`}setFallbackColor(t){return Mc(t)?this.set("color",t):this.set("color",t(this.get("color")))}getFallbackColor(){return this.get("color")}}const ks=r=>!!(r&&typeof r=="object"&&"type"in r&&r.type==="fillstyle"&&"fillType"in r&&r.fillType==="individual");Ae({type:"fillstyle",fillType:"palette",lut:new d3({steps:[]}),lookUpProperty:"value"});const wi=r=>!!(r&&typeof r=="object"&&"type"in r&&r.type==="fillstyle"&&"fillType"in r&&r.fillType==="palette"),Er={linear:(r,t,e)=>{const i=t-r;return s=>s<e?r+i/e*s:t},easeIn:(r,t,e)=>i=>i<e?r+Math.abs(2*(Math.sqrt(.5)*i/e)**2)*(t-r):t,easeOut:(r,t,e)=>i=>i<e?r+Math.abs(1-2*(Math.sqrt(.5)*(1-i/e))**2)*(t-r):t,ease:(r,t,e)=>i=>i<e?r+(i<e/2?.5*(i/e*2)**2.5:.5+.5*(1-(1-2*(i/e-.5))**2.5))*(t-r):t,logarithmic:r=>{const t=iS(r);return(e,i,s)=>{const n=t(e),a=t(i);return o=>o<s?r**(n+Math.abs(1-2*(Math.sqrt(.5)*(1-o/s))**2)*(a-n)):i}}};class Kp{constructor(t,e,i,s=Er.linear,n){this.delta=0,this.nextAnimations=new Array,this.P=!1,this.easing=Er.linear,this.D=new Ii,this.isOver=()=>(this.delta===this.duration||this.P)&&this.nextAnimations.length===0,this.values=t,this.action=e,this.duration=i,this.easing=s,this.L=n,this.eases=t.map(([a,o])=>s(a,o,i))}R(){this.D.emit("start")}start(){return this.L.includes(this)||this.L.push(this),this}addNextAnimations(t){return t instanceof Array?t.forEach(e=>this.nextAnimations.push(e)):this.nextAnimations.push(t),this}NextAnimation(t,e,i=this.duration,s=this.easing){const n=new Kp(t,e,i,s,this.L);return this.nextAnimations.push(n),n}onAnimationStart(t,e){return this.D.on("start",t,e)}onAnimationEnd(t,e){return this.D.on("end",t,e)}onEveryAnimationEnd(t,e){return this.D.on("everyEnd",t,e)}onAllAnimationEnd(t,e){return this.D.on("allEnd",t,e)}allOffAnimationEnd(){return this.D.topicOff("end"),this}allOffEveryAnimationEnd(){return this.D.topicOff("everyEnd"),this}allOffAllAnimationEnd(){return this.D.topicOff("allEnd"),this}offAnimationEnd(t){return this.D.off(t,"end")}offEveryAnimationEnd(t){return this.D.off(t,"everyEnd")}offAllAnimationEnd(t){return this.D.off(t,"allEnd")}finish(t=!0){if(this.P=!0,this.L.splice(this.L.indexOf(this),1),this.nextAnimations.length>0){const e=this.nextAnimations[0];return t&&(this.D.listeners("allEnd").forEach((i,s)=>e.onAllAnimationEnd(i,s)),this.D.listeners("everyEnd").forEach((i,s)=>e.onEveryAnimationEnd(i,s))),e.addNextAnimations(this.nextAnimations.slice(1)),e.start(),t&&(this.D.emit("end",e),this.D.emit("everyEnd",e)),e}t&&(this.D.emit("end",void 0),this.D.emit("everyEnd",void 0),this.D.emit("allEnd"))}finishAll(t=!0){let e=this;for(;e;)e=e.finish(t)}getFinalValues(){return this.nextAnimations.length>0?this.nextAnimations[this.nextAnimations.length-1].values.map(lb):this.values.map(lb)}getTimeUntilFinish(){let t=this.duration-this.delta;for(let e=0;e<this.nextAnimations.length;e+=1)t+=this.nextAnimations[e].duration-this.nextAnimations[e].delta;return t}}const ta=(r,t=60)=>{t>60&&console.log("Note: Animator FPS is usually capped at 60 by the browser!");const e=[];let i,s,n=0;const a=()=>{i=void 0;const o=Date.now();s=s||o,n=o-s,n/1e3>=1/t&&(s=Date.now()-n%(1e3/t),e.forEach(l=>{l.delta===0&&l.R(),l.delta+=n-n%(1e3/t),l.delta>l.duration&&(l.delta=l.duration),l.action(l.eases.map(u=>u(l.delta))),l.delta===l.duration&&l.finish()}),r()),e.length>0?i=nt.requestAnimationFrame(a):(i=void 0,s=void 0)};return(o=1e3,l=Er.linear)=>(u,d,f=o)=>{const y=new Kp(u,d,f,l,e).start();return i||(i=nt.requestAnimationFrame(a)),y}};var ws,Cs;(function(r){r.circle="circle",r.ellipse="ellipse"})(ws||(ws={})),function(r){r.closestSide="closest-side",r.closestCorner="closest-corner",r.farthestSide="farthest-side",r.farthestCorner="farthest-corner"}(Cs||(Cs={}));const m3=Ae({type:"fillstyle",fillType:"radial-gradient",stops:[{color:vs("#f00"),offset:0},{color:vs("#0f0"),offset:1}],position:Y(.5,.5),shape:ws.ellipse,extent:Cs.farthestCorner});class us extends m3{constructor(t){if(super(t),t===null||t&&t.stops===null||t&&t.stops&&!Array.isArray(t.stops)||t&&t.stops&&Array.isArray(t.stops)&&t.stops.length<2)throw new Error("RadialGradientFill requires minimum two color stops to be defined.")}toString(){return`radialGradientFill:${this.shape},${this.extent},${this.position.x},${this.position.y},${this.stops.map(t=>`${t.offset},${t.color.toString()}`).join(",")}`}setColorStops(t){if(t.length<2)throw new Error("Minimum of two color stops required");return this.set("stops",t)}getColorStops(){return this.get("stops")}setPosition(t){return this.set("position",t)}getPosition(){return this.get("position")}setShape(t){return this.set("shape",t)}getShape(){return this.get("shape")}setExtent(t){return this.set("extent",t)}getExtent(){return this.get("extent")}}const li=r=>!!(r&&typeof r=="object"&&"type"in r&&r.type==="fillstyle"&&"fillType"in r&&r.fillType==="radial-gradient"),p3=Ae({type:"fillstyle",fillType:"linear-gradient",stops:[{color:vs("#f00"),offset:0},{color:vs("#0f0"),offset:1}],angle:0});class xs extends p3{constructor(t){if(super(t),t===null||t&&t.stops===null||t&&t.stops&&!Array.isArray(t.stops)||t&&t.stops&&Array.isArray(t.stops)&&t.stops.length<2)throw new Error("LinearGradientFill requires minimum two color stops to be defined.")}toString(){return`linearGradientFill:${this.angle},${this.stops.map(t=>`${t.offset},${t.color.toString()}`).join(",")}`}setColorStops(t){if(t.length<2)throw new Error("Minimum of two color stops required");const e=t.sort((i,s)=>i.offset-s.offset);return this.set("stops",e)}getColorStops(){return this.get("stops")}setAngle(t,e){return this.set("angle",e?BR(t):t)}getAngle(t){return t?br(this.get("angle")):this.get("angle")}}const ui=r=>!!(r&&typeof r=="object"&&"type"in r&&r.type==="fillstyle"&&"fillType"in r&&r.fillType==="linear-gradient"),S3=Ae({type:"linestyle",lineType:"empty"}),vt=new class extends S3{constructor(){super(...arguments),this.thickness=0}setThickness(r){return this}getThickness(){return 0}V(){return 0}setFillStyle(r){return this}getFillStyle(){return Vt}},ob=r=>!(!r||typeof r!="object"||!("lineType"in r)||r.lineType!=="empty");class pR{constructor(t,e,i,s){this.cellIndex=t,this.cellSpan=e,this.cellsAmount=i,this.observedAmount=s,this.x=new pm,this.y=new pm,this.z=new pm,this.D=new Ii;const n={...t},a={...e};if(s){const o=f=>{this.cellsAmount.x=f.reduce(Rc,0),this.cellIndex.x=f.reduce((y,m,p)=>p>=n.x?y:y+m,0),this.cellSpan.x=f.reduce((y,m,p)=>p>=n.x&&p<n.x+a.x?y+m:y,0),this.D.emit("cell-resize")},l=s.x.O(o);o(s.x.M());const u=f=>{this.cellsAmount.y=f.reduce(Rc,0),this.cellIndex.y=f.reduce((y,m,p)=>p>=n.y?y:y+m,0),this.cellSpan.y=f.reduce((y,m,p)=>p>=n.y&&p<n.y+a.y?y+m:y,0),this.D.emit("cell-resize")},d=s.y.O(u);u(s.y.M()),this.N=()=>{s.x.G(l),s.y.G(d)}}}W(){return this.N&&(this.N(),this.N=void 0),this}U(t){return this.D.on("cell-resize",t)}Y(t){return this.D.off(t,"cell-resize")}}class pm extends dR{constructor(){super(...arguments),this.H=0,this.$=10,this.X=1}j(){return this.i=!1,this}Z(){return this.i=!0,this}getInnerStart(){return this.H}getInnerEnd(){return this.$}getInnerInterval(){return Math.abs(this.getInnerEnd()-this.getInnerStart())}J(t,e){return this.H=t,this.$=e,this.K(),this}q(t){return this.X=t,this.K(),this}tt(t){return t/this.X}K(){const t=this.tt(this.$-this.H),e=this.X;this.it!==void 0&&Ai(t,this.it)!==!1||(this.i=!0,this.st=e,this.it=t)}et(){return this.it}ht(){return this.st}rt(){return this.$<this.H}nt(t,e){return!0}}const fs={d1:r=>new r.scale1DConstructor(0,1,1,void 0),d2:r=>new r.scaleXYConstructor().ot({x:0,y:0},{x:1,y:1},{x:1,y:1},void 0),d3:()=>new pR({x:0,y:0},{x:1,y:1},{x:1,y:1},void 0)},El=(r,t,e)=>t===e?r:e.ut(t.ct(r)),gt=(r,t,e)=>{if(t===e)return r;const i=t instanceof gn?t.x:t.x instanceof gn?t.x.x:t.x.dt,s=t instanceof gn?t.y:t.y instanceof gn?t.y.y:t.y.dt,n=e instanceof gn?e.x:e.x instanceof gn?e.x.x:e.x.dt,a=e instanceof gn?e.y:e.y instanceof gn?e.y.y:e.y.dt;return{...r,x:El(r.x,i,n),y:El(r.y,s,a)}},x3=(r,t,e)=>{if(t.id==="axes"&&e.id==="world")return t.chart.At.ft(r);if(t.id==="world"&&e.id==="axes")return t.chart.At.yt(r);if(t.id===e.id)return r;throw new Error("LC JS translatePoint3D misusage | originCoordinateSystem and targetCoordinateSystem arguments must be either Chart3D.coordsWorld or Chart3D.coordsAxis")},A3=(...r)=>{if(r.length===0)return{remove:re};let t=!1;const e=r.map(n=>n.onIntervalChange((a,o,l)=>((u,d,f)=>{t||(t=!0,r.filter(y=>y!==u).forEach(y=>y.St(d,f,!1,u.getStopped(),"synchronizedAxis")),t=!1)})(n,o,l)));let i=!1;const s=r.map(n=>n.onStoppedStateChanged((a,o)=>((l,u)=>{i||(i=!0,r.filter(d=>d!==l).forEach(d=>d.setStopped(u)),i=!1)})(n,o)));return{remove:()=>{r.forEach((n,a)=>{n.offIntervalChange(e[a]),n.offStoppedStateChanged(s[a])})}}};class uc extends Error{constructor(t,e){super(`ChartError: ${t} ${e?`in ${e.constructor.name}`:""}`),Object.setPrototypeOf(this,uc.prototype)}}class Ei extends Error{constructor(t,e,i=!1){const s=`EngineError: ${t} ${e?`in ${e.constructor.name}`:""}`;super(s),i&&nt.alert(s),Object.setPrototypeOf(this,Ei.prototype)}}class tS extends Ei{constructor(t){super(t),Object.setPrototypeOf(this,tS.prototype)}}var Re,Ar,De,qt;(function(r){r[r.Content=0]="Content",r[r.PaddedContent=1]="PaddedContent",r[r.PaddedBackground=2]="PaddedBackground",r[r.Everything=3]="Everything"})(Re||(Re={})),function(r){r[r.never=0]="never",r[r.always=1]="always",r[r.whenHovered=2]="whenHovered",r[r.whenDragged=3]="whenDragged",r[r.whenNotDragged=4]="whenNotDragged",r[r.whenHoveredOrDragged=5]="whenHoveredOrDragged"}(Ar||(Ar={})),function(r){r[r.notDraggable=0]="notDraggable",r[r.draggable=1]="draggable",r[r.onlyHorizontal=2]="onlyHorizontal",r[r.onlyVertical=3]="onlyVertical"}(De||(De={})),function(r){r[r.Up=0]="Up",r[r.Right=1]="Right",r[r.Down=2]="Down",r[r.Left=3]="Left"}(qt||(qt={}));const nt=typeof window<"u"?window:typeof global<"u"&&global._lcjs?global._lcjs:{},hb=(r,t)=>r.x===t.x&&r.y===t.y,vf=r=>r!==Mt&&r!==Dt&&!Number.isNaN(r)&&Number.isFinite(r)&&r!==1/0&&r!==-1/0,lb=r=>r[1],ah=r=>r.dispose(),re=()=>{},Ai=(r,t)=>r===t,Zt=(r,t,e)=>e>t?Math.min(Math.max(r,t),e):Math.min(Math.max(r,e),t),Jf=r=>Array.prototype.concat.apply([],r),Fe=(r,t)=>r!==void 0?r:t,SR=r=>r.vt(),xR=r=>r.bt(),AR=r=>r.xt(),vR=r=>r.Mt(),bR=r=>r.min.x,MR=r=>r.max.x,RR=r=>r.min.y,ER=r=>r.max.y,go=(r,t,e,i,s)=>{if(r.length>0){let n=s?i(s):void 0;for(let a=0;a<r.length;a+=1){const o=t(r[a]);o!==void 0&&(n=n!==void 0?e(n,o):o)}return n}if(s)return i(s)},ub=(r,t)=>r.position===t.position&&r.high===t.high&&r.low===t.low,v3=Y(0,1),b3=Y(1,0),M3=Y(0,-1),R3=Y(-1,0),E3=Y(0,0),TR=r=>{switch(r){case qt.Up:return v3;case qt.Right:return b3;case qt.Down:return M3;case qt.Left:return R3;default:return E3}},cb=r=>r===qt.Left||r===qt.Right,At=r=>{r.stopPropagation(),r.preventDefault()},Wo=(r,t)=>{if(!t)return r;const e=r.length,i=new Float32Array(2*e);let s=0;for(let n=0;n<e;n+=1){const a=r[n],o=Math.fround(a);i[s+0]=o,i[s+1]=a-o,s+=2}return i},Tr=(r,t)=>{if(!t){const n=r.length,a=new Float32Array(2*n);let o=0;for(let l=0;l<n;l+=1){const u=r[l];a[o+0]=u.x,a[o+1]=u.y,o+=2}return a}const e=r.length,i=new Float32Array(4*e);let s=0;for(let n=0;n<e;n+=1){const a=r[n],o=Math.fround(a.x),l=Math.fround(a.y);i[s+0]=o,i[s+1]=l,i[s+2]=a.x-o,i[s+3]=a.y-l,s+=4}return i},eS=r=>{const t=r.length,e=new Float32Array(3*t);let i=0;for(let s=0;s<t;s+=1){const n=r[s];e[i+0]=n.x,e[i+1]=n.y,e[i+2]=n.z,i+=3}return e},wR=r=>t=>{const e=r.indexOf(t);e>=0&&r.splice(e,1)},CR=r=>{let t=r.length;for(let e=0;e<t-1;e+=1)r[e].x===r[e+1].x&&r[e].y===r[e+1].y&&(r.splice(e,1),e-=1,t-=1);return r},iS=r=>{const t=Math.log(r);return e=>Math.log(e)/t},T3=iS(Math.E),kR=(r,t)=>{const e=t[r];return e?e():void 0},db=(r,t)=>{let e;if(t)e=t;else{const i={x:0,y:0};for(let s=0;s<r.length;s+=1)i.x+=r[s].x/r.length,i.y+=r[s].y/r.length;e=i}return r.sort((i,s)=>sp(Se(i,e))-sp(Se(s,e)))},cs=(r,t,e)=>{if(r.length===0)return e.canReturnB===!1?t.slice():t;const i=t.length;if(i<1e5)return r.push.apply(r,t),r;for(let s=0;s<i;s+=1)r.push(t[s]);return r},Ss=(r,t,e)=>e<0?r:e>1?t:P(r.getR()+e*(t.getR()-r.getR()),r.getG()+e*(t.getG()-r.getG()),r.getB()+e*(t.getB()-r.getB()),r.getA()+e*(t.getA()-r.getA())),Km=r=>r.getA()===255?r:r.setA(255),Zf=(()=>{const r=P(0,0,0);return t=>(t=Km(t),new us({shape:ws.circle,extent:Cs.farthestCorner,position:{x:.2,y:.8},stops:[{offset:0,color:t},{offset:1,color:Ss(t,r,.5)}]}))})(),ii=(()=>{const r=t=>{var e;if(t){if(ce(t))return t.getColor().getA()===0?void 0:t.getColor();if(li(t)||ui(t)){const i=t.getColorStops();return i.length===3?i[1].color:(e=i[0])===null||e===void 0?void 0:e.color}wi(t)}};return(t,e,i,s)=>{const n=[];if(s.fill&&n.push(s.fill),s.fill2&&n.push(s.fill2),s.stroke){const u=s.stroke.getFillStyle();u!==Vt&&n.push(u)}if(s.point3D){const u=s.point3D;n.push(u.getFillStyle())}let a;if(s.behavior&&s.behavior.colorStep===!0){const[u,d]=n.reduce((f,y)=>{if(f[0]&&f[1])return f;const m=r(y);return m&&(f[0]===void 0?f[0]=m:f[1]=m),f},[void 0,void 0]);a=u&&d?(o=u)===(l=d)||o.getR()===l.getR()&&o.getG()===l.getG()&&o.getB()===l.getB()?Zf(o):(o=Km(o),l=Km(l),new xs({angle:0,stops:[{offset:0,color:l},{offset:.5,color:l},{offset:.5,color:o},{offset:1,color:o}]})):e.uiButtonFillStyle}else{const u=n.reduce((d,f)=>d||r(f),void 0);a=u?i?new it({color:u}):Zf(u):e.uiButtonFillStyle}var o,l;t.setButtonOnFillStyle(a)}})(),Ji=r=>{const t=r;if(wi(t))return{lut:t.getPalette(),lookUpProperty:t.getLookUpProperty()}},sS=r=>{let t=0;return()=>(t+=1,`${r}-${t}`)},ps=(r,t)=>{let e=typeof r=="string"?r:String(r);const i=e.indexOf(".");let s=i>=0?i:e.length;for(;s<t;s+=1)e=`0${e}`;return e},te=(r,t)=>typeof r=="function"?r(t):r,So=r=>r.ctrlKey?Math.sign(r.deltaY)*Math.min(.05*Math.abs(r.deltaY),1):Math.sign(r.deltaY),kn=(r,t)=>t(),DR=()=>new Error(`LightningChart JS encountered an unexpected error.
Please report this issue to https://lightningchart.com/js-charts/docs/contact`);new it({color:P(255,255,255,1)});const tp=r=>r===Ne||r.min.x===Ne.min.x&&r.max.x===Ne.max.x&&r.min.y===Ne.min.y&&r.max.y===Ne.max.y,uo=r=>Array.from(new Set(r)),Sm=r=>r.filter(t=>t!==void 0),xo=r=>typeof r=="boolean"?r?1:0:r>1?1:r<0?0:r,FR=(r,t,e)=>{t.length<=0||(r.setText(e.label).setOn(t[0].getVisible()),e.style&&r.setButtonOnFillStyle(e.style),e.toggleVisibilityOnClick&&r.onSwitch((i,s)=>t.forEach(n=>n.setVisible(s))),r.onMouseEnter(()=>t.forEach(i=>i.setHighlight(!0))),r.onMouseLeave(()=>t.forEach(i=>i.setHighlight(!1))),t.forEach(i=>i.onMouseEnter(()=>r.setHighlight(!0))),t.forEach(i=>i.onMouseLeave(()=>r.setHighlight(!1))),t.forEach(i=>i.onTouchStart(()=>r.setHighlight(!0))),t.forEach(i=>i.onTouchEnd(()=>r.setHighlight(!1))))},Xl=(r,t)=>{throw new Error(t)},VR=()=>{const r=ta(()=>{});let t;return(e,i,s,n)=>{const a=n==null?void 0:n.onStart,o=n==null?void 0:n.onCompleted,l=(n==null?void 0:n.easing)||Er.ease,u=(n==null?void 0:n.durationMs)||1e3;let d;if(t)if(t.nextAnimations.length===0){const f=t.NextAnimation([[e,i]],([y])=>{t=f,s(y)},u,l);d=f}else{e=t.nextAnimations.pop().values[0][0];const f=t.NextAnimation([[e,i]],([y])=>{t=f,s(y)},u,l);d=f}else d=r(u,l)([[e,i]],([f])=>{s(f)}),t=d;d.onAnimationEnd(()=>{t=void 0}),a&&d.onAnimationStart(a),o&&d.onAnimationEnd(o)}},Gc=r=>{let t;return()=>t||(t=r(),t)},Ps=r=>{if(r===vt)return 0;const t=r.getThickness();return t<0?1:1*t},zR=(r,t,e,i)=>{const s=`LightningChart JS Resources not found.
resourcesBaseUrl: "${r}"
initiator: ${e}
resource url: ${t}
For more information, please see https://lightningchart.com/js-charts/docs/troubleshooting/error-resources-not-found/`;if(i.shouldCrash)throw nt.alert(s),new Error(s);nt.console.warn(s)},xm=(r,t,e,i=0)=>{if(r<e(i)||e(t)<r)return;const s=t;for(;i!==t;){const a=Math.ceil((i+t)/2);r<e(a)?t=a-1:i=a}const n=Math.abs(r-e(i));return i<s&&Math.abs(r-e(i+1))<n?i+1:i},Wl=()=>{const r=new Map;return{_t:t=>(t.setMouseEnterEventHandler((e,i,s)=>{const n=s&&r.get(s);n&&n.wt(e,i,s)}),t.setMouseLeaveEventHandler((e,i,s)=>{const n=s&&r.get(s);n&&n.Ct(e,i,s)}),t.setMouseClickEventHandler((e,i,s)=>{const n=s&&r.get(s);n&&n.kt(e,i,s)}),t.setMouseDoubleClickEventHandler((e,i,s)=>{const n=s&&r.get(s);n&&n.Tt(e,i,s)}),t.setMouseDownEventHandler((e,i,s)=>{const n=s&&r.get(s);n&&n.Ft(e,i,s)}),t.setMouseUpEventHandler((e,i,s)=>{const n=s&&r.get(s);n&&n.It(e,i,s)}),t.setMouseMoveEventHandler((e,i,s)=>{const n=s&&r.get(s);n&&n.Pt(e,i,s)}),t.setMouseDragEventHandler((e,i,s,n,a,o)=>{const l=o&&r.get(o);l&&l.Dt(e,i,s,n,a,o)}),t.setMouseDragStartEventHandler((e,i,s,n)=>{const a=n&&r.get(n);a&&a.Bt(e,i,s,n)}),t.setMouseDragStopEventHandler((e,i,s,n,a)=>{const o=a&&r.get(a);o&&o.Lt(e,i,s,n,a)}),t.setMouseWheelEventHandler((e,i,s)=>{const n=s&&r.get(s);n&&n.Rt(e,i,s)}),t.setTouchStartEventHandler((e,i,s)=>{const n=s&&r.get(s);n&&n.Et(e,i,s)}),t.setTouchMoveEventHandler((e,i,s)=>{const n=s&&r.get(s);n&&n.zt(e,i,s)}),t.setTouchEndEventHandler((e,i,s)=>{const n=s&&r.get(s);n&&n.Vt(e,i,s)}),t),Ot:(t,e)=>{r.set(t,e)},Nt:()=>{r.clear()}}},ea={left:0,right:0,top:0,bottom:0},_R=()=>Math.round(Math.random()*Number.MAX_SAFE_INTEGER),ep=(r,t,e)=>{t&&t.Gt();const i=e();return{Wt:r,Gt:()=>{i.forEach(s=>r.Ut(s))}}},ft={add:(r,t)=>Bt(r.x+t,r.y+t,r.z+t),addVec(r,...t){const e={x:r.x,y:r.y,z:r.z};for(const i of t)e.x+=i.x,e.y+=i.y,e.z+=i.z;return e},subtract:(r,t)=>Bt(r.x-t,r.y-t,r.z-t),subtractVec(r,...t){const e={x:r.x,y:r.y,z:r.z};for(const i of t)e.x-=i.x,e.y-=i.y,e.z-=i.z;return e},multiply:(r,t)=>Bt(r.x*t,r.y*t,r.z*t),divide:(r,t)=>Bt(r.x/t,r.y/t,r.z/t),multiplyVec(r,...t){const e={x:r.x,y:r.y,z:r.z};for(const i of t)e.x*=i.x,e.y*=i.y,e.z*=i.z;return e},divideVec(r,...t){const e={x:r.x,y:r.y,z:r.z};for(const i of t)e.x/=i.x,e.y/=i.y,e.z/=i.z;return e},length:r=>Math.sqrt(r.x*r.x+r.y*r.y+r.z*r.z),normalize:r=>ft.divide(r,ft.length(r)),dot:(r,t)=>r.x*t.x+r.y*t.y+r.z*t.z,cross:(r,t)=>Bt(r.y*t.z-r.z*t.y,r.z*t.x-r.x*t.z,r.x*t.y-r.y*t.x),angle:(r,t)=>Math.acos(ft.dot(r,t)/(ft.length(r)*ft.length(t))),rotateAroundAxis(r,t,e){const i=Math.cos(e),s=Math.sin(e),n=ft.dot(t,r),a=ft.cross(t,r);return ft.addVec(ft.multiply(r,i),ft.addVec(ft.multiply(t,(1-i)*n),ft.multiply(a,s)))},lerp:(r,t,e)=>(e=Zt(e,0,1),ft.addVec(ft.multiply(r,1-e),ft.multiply(t,e))),equals:(r,t)=>Ai(r.x,t.x)&&Ai(r.y,t.y)&&Ai(r.z,t.z),abs:r=>({x:Math.abs(r.x),y:Math.abs(r.y),z:Math.abs(r.z)}),sign:r=>({x:Math.sign(r.x),y:Math.sign(r.y),z:Math.sign(r.z)})},Mt=Number.MAX_SAFE_INTEGER,Dt=-Number.MAX_SAFE_INTEGER,Ne=Kt(Y(Mt,Mt),Y(Dt,Dt)),vr=Kt(Bt(Mt,Mt,Mt),Bt(Dt,Dt,Dt)),ip=(r,t)=>{const e=Math.log(r)/Math.log(t);return Math.floor((i=>(Math.ceil(i)-i<1e-4?i=Math.ceil(i):i-Math.floor(i)<1e-4&&(i=Math.floor(i)),i))(e))},Qf=(r,t)=>!(t.min.x>r.max.x||t.max.x<r.min.x||t.min.y>r.max.y||t.max.y<r.min.y),Kf=(r,t)=>!(r[1].x<t[0].x||r[0].x>t[1].x||r[3].y<t[0].y||r[0].y>t[3].y),NR=(r,t)=>Kt(Y(Math.max(Math.min(r[0].x,r[2].x),Math.min(t[0].x,t[2].x)),Math.max(Math.min(r[0].y,r[2].y),Math.min(t[0].y,t[2].y))),Y(Math.min(Math.max(r[0].x,r[2].x),Math.max(t[0].x,t[2].x)),Math.min(Math.max(r[0].y,r[2].y),Math.max(t[0].y,t[2].y)))),LR=r=>{const t=r.length;for(let e=0;e<t;e+=1)for(let i=e+1;i<t;i+=1)if(Qf(r[e],r[i]))return!0;return!1},Rc=(r,t)=>t+r,w3=(r,t,e)=>{const i=Se(t,r),s=i.x*i.x+i.y*i.y;if(s===0)return r;const n=Se(e,r),a=(n.x*i.x+n.y*i.y)/s;return a<=0?r:a>=1?t:Y(r.x+a*i.x,r.y+a*i.y)},$n=(r,t,e)=>e>t?r>=t&&r<=e:r>=e&&r<=t,ia=(r,t)=>{const e=r.x-t.x,i=r.y-t.y;return Math.sqrt(e*e+i*i)},fb=(r,t)=>{const e=r.x-t.x,i=r.y-t.y;return e*e+i*i},za=(r,t,e)=>_t(r,Ht(Se(t,r),e)),Am=(r,t,e)=>ft.addVec(r,ft.multiply(ft.subtractVec(t,r),e));function Ze(r){const t=r.length;if(t>0){let e=r[0].x,i=r[0].x,s=r[0].y,n=r[0].y;for(let a=0;a<t;a+=1){const o=r[a];o.x>e&&(e=o.x),o.x<i&&(i=o.x),o.y>s&&(s=o.y),o.y<n&&(n=o.y)}return Kt(Y(i,n),Y(e,s))}return Ne}function rS(r){const t=r.length;if(t>0){let e=r[0].x,i=r[0].x,s=r[0].y,n=r[0].y,a=r[0].z,o=r[0].z;for(let l=0;l<t;l+=1){const u=r[l];u.x>e&&(e=u.x),u.x<i&&(i=u.x),u.y>s&&(s=u.y),u.y<n&&(n=u.y),u.z>a&&(a=u.z),u.z<o&&(o=u.z)}return Kt(Bt(i,n,o),Bt(e,s,a))}return vr}const qs=(...r)=>{const t={min:{x:Mt,y:Mt},max:{x:Dt,y:Dt}};for(const e of r)t.min.x=t.min.x<e.min.x?t.min.x:e.min.x,t.max.x=t.max.x>e.max.x?t.max.x:e.max.x,t.min.y=t.min.y<e.min.y?t.min.y:e.min.y,t.max.y=t.max.y>e.max.y?t.max.y:e.max.y;return t},t0=(r,t)=>Kt(Bt(r.min.x<t.min.x?r.min.x:t.min.x,r.min.y<t.min.y?r.min.y:t.min.y,r.min.z<t.min.z?r.min.z:t.min.z),Bt(r.max.x>t.max.x?r.max.x:t.max.x,r.max.y>t.max.y?r.max.y:t.max.y,r.max.z>t.max.z?r.max.z:t.max.z));function C3(r,t,e,i){const s=r.x-i.x,n=r.y-i.y,a=i.x-e.x,o=e.y-i.y,l=o*s+a*n,u=(i.y-t.y)*s+(t.x-i.x)*n,d=o*(t.x-i.x)+a*(t.y-i.y);return d<0?l<=0&&u<=0&&l+u>=d:l>=0&&u>=0&&l+u<=d}function qn(r,t,e){return Y(Math.cos(e)*(r.x-t.x)+Math.sin(e)*(r.y-t.y)+t.x,-Math.sin(e)*(r.x-t.x)+Math.cos(e)*(r.y-t.y)+t.y)}function gb(r,t){return Y(r.x-t.x,r.y-t.y)}function Ws(r){const t=_a(r);return t===0?Y(0,0):Y(r.x/t,r.y/t)}function D0(r,t){let e={x:t.x-r.x,y:t.y-r.y};e=Ws(e);const i=Math.PI/2,s=e.x;return e.x=-Math.sin(i)*e.y,e.y=s*Math.sin(i),e}function _a(r){return Math.sqrt(r.x*r.x+r.y*r.y)}function Ht(r,t){return Y(r.x*t,r.y*t)}function _t(r,t){return Y(r.x+t.x,r.y+t.y)}function Se(r,t){return Y(r.x-t.x,r.y-t.y)}function $s(r,t){return Y(r.x*t.x,r.y*t.y)}function cc(r,t){return Y(r.x/t.x,r.y/t.y)}function yb(r){return Ht(r,-1)}function vm(r,t){return r.x*t.x+r.y*t.y}const hl=(r,t,e)=>{const i=(e.y-t.y)/(e.x-t.x),s=t.y+(r-t.x)*i;return Y(r,s)},nS=(r,t,e)=>{const i=(e.y-t.y)/(e.x-t.x),s=t.x+(r-t.y)/i;return Y(s,r)};function br(r){return r*Math.PI/180}function BR(r){return 180*r/Math.PI}function sp(r){return 180*Math.atan2(r.y,r.x)/Math.PI}function aS(r){return Y(Math.cos(r),Math.sin(r))}function mb(r){let t=-1;const e=Math.cos(r),i=Math.sin(r);return e>0&&e<1&&i>0&&i<1?t=1:e<0&&e>-1&&i>0&&i<1?t=2:e<0&&e>-1&&i<0&&i>-1?t=3:e>0&&e<1&&i<0&&i>-1&&(t=4),t}const rp=(r,t,e,i)=>{let s,n,a,o;if(t.x-r.x!=0||i.x-e.x!=0)return t.x-r.x==0?(a=t.x,n=(i.y-e.y)/(i.x-e.x),o=n*(a-e.x)+e.y):i.x-e.x==0?(a=i.x,s=(t.y-r.y)/(t.x-r.x),o=s*(a-r.x)+r.y):(s=(t.y-r.y)/(t.x-r.x),n=(i.y-e.y)/(i.x-e.x),a=(e.y-n*e.x+s*r.x-r.y)/(s-n),o=s*(a-r.x)+r.y),Y(a,o)},pb=(r,t)=>{const e=r.length,i=t.length,s=new Uint16Array(e+i);return s.set(r,0),s.set(t,e),s};class k3{constructor(){this.Yt=!0}getInnerStart(){return this.H}getInnerEnd(){return this.$}getInnerInterval(){return Math.abs(this.$-this.H)}J(t,e){return this.Yt=t!==this.H||e!==this.$,this.H=t,this.$=e,this}j(){return this.Yt=!1,this}Z(){return this.Yt=!0,this}}class PR extends k3{constructor(t,e,i,s){if(super(),this.Ht=!0,this.$t=!0,this.Xt=[0,0],this.jt=!0,this.Zt=t,this.Qt=e,this.Jt=i,this.Kt=t,this.qt=e,s){const n=s.O(this.ti.bind(this));this.ti(s.M()),this.ii=()=>s.G(n)}}q(t){return this.X=t,this.$t=!0,this}si(t){return this.Xt=t.map(Math.abs),this.jt=!0,this}ei(){return this.Zt/this.Jt*this.X+this.Xt[0]}hi(){return(this.Zt+this.Qt)/this.Jt*this.X-this.Xt[1]}ri(){return this.getCellSize()-this.ni()}oi(){return this.X}getCellSize(){return this.ai(this.X)}ni(){return this.Xt[0]+this.Xt[1]}li(){return this.Xt}ti(t){this.Jt=t.reduce(Rc,0),this.Zt=t.reduce((e,i,s)=>s>=this.Kt?e:e+i,0),this.Qt=t.reduce((e,i,s)=>s>=this.Kt&&s<this.Kt+this.qt?e+i:e,0),this.Ht=!0,this.ui()}ai(t){return t*this.Qt/this.Jt}j(){return super.j(),this.$t=!1,this.jt=!1,this.Ht=!1,this}Z(){return super.Z(),this.$t=!0,this.jt=!0,this.Ht=!0,this}}class Eo extends PR{constructor(t,e,i,s){super(t,e,i,s),this.ci={internal:10,function:rh(10),number:10},this.X=1e3,this.J(1,1e3),this.di=this.fi()}nt(t,e,i,s,n){if(t===e)return!1;const a=Math.min(t,e)<bf,o=Math.max(t,e)>bm;return!a&&!o||!!n&&(e>t?{start:a?bf:t,end:o?bm:e}:{start:o?bm:t,end:a?bf:e})}ct(t){const e=this.ei(),i=this.hi(),s=Math.max(t,bf);return e+(this.ci.function(s)-this.di.scaleStartLog)/this.di.scaleIntervalLog*(i-e)}ut(t){const e=this.ei(),i=(t-e)/(this.hi()-e),s=this.di.scaleStartLog+i*this.di.scaleIntervalLog;return this.ci.number**s}ui(){this.ci&&this.fi()}J(t,e){return super.J(t,e),this.ci&&this.fi(),this}si(t){return super.si(t),this.ci&&this.fi(),this}q(t){return super.q(t),this.ci&&this.fi(),this}Ai(t){return this.ci={internal:t,function:rh(t),number:Tl(t)},this}gi(){return this.ci.internal}mi(t,e){const i=this.ct(t)+e;return this.ut(i)}yi(){return this.$t||this.Yt||this.jt||this.Ht}fi(){const t=this.ci.function(this.H),e=this.ci.function(this.$)-t,i=2*this.ei()/this.X-1,s=2*this.hi()/this.X-1-i;return this.di={scaleStartLog:t,scaleIntervalLog:e,viewportStart:i,viewportSize:s},this.di}pi(){return this.di}}const rh=r=>r==="e"?T3:iS(r),Tl=r=>r==="e"?Math.E:r,bf=.9*10**-4,bm=1.1*10**25,D3=[{prefix:"T",unit:10**12},{prefix:"B",unit:10**9},{prefix:"M",unit:1e6},{prefix:"K",unit:1e3}],IR=(r,t,e)=>{const i=Math.abs(e-t),s=Math.max(2-ip(i,10),0);return r.toFixed(s)},Hn={Numeric:(r,t)=>IR(r,t.getInnerStart(),t.getInnerEnd()),NumericUnits:(r,t)=>{const e=Math.abs(t.getInnerEnd()-t.getInnerStart()),i=r<0;r=Math.abs(r);let s="",n="";if(e>=1e3&&r>1e3){let a="";for(const o of D3){const l=Math.round(1e3*r/o.unit)/1e3;if(l>=1){a=l.toString(),n=o.prefix;break}}s=(i?"-":"")+a}else{let a=String(Math.floor(r));const o=ip(r,1e3);for(let l=1;l<=o;l+=1){const u=a.length-(3*l+(l-1));a=`${a.substring(0,u)} ${a.substring(u,a.length)}`}s=(i?"-":"")+a+(e<=10?((l,u)=>{if(u===0)return"";let d=(Math.abs(l)-Math.abs(Math.floor(l))).toString().substring(1);return d.length>u&&(d=d.substring(0,u+1)),d})(r,2-ip(e,10)):"")}return s+=n,s},LogarithmicExponentsRounded:(r,t,e,i=10)=>{const s=rh(i)(r);return`${i}${Mm(s)}`},LogarithmicExponents:(r,t,e,i=10)=>{const s=rh(i),n=Math.floor(s(r)),a=r/Tl(i)**n;return`${Math.round(a)}${i}${Mm(n)}`},LogarithmicExtreme:(r,t,e,i=10)=>{const s=rh(i),n=Math.floor(s(r));return`${(r/Tl(i)**n).toFixed(2)}${i}${Mm(n)}`},LogarithmicNoExponents:(r,t,e,i=10)=>{const s=rh(i);if(i==="e")return`${Math.floor(s(r))}e`;const n=r.toString();if(r>1)return n;const a=Math.floor(s(r));return r.toFixed(Math.abs(a))}},Mm=r=>Math.round(r).toString().split("").map(t=>{switch(t){case"0":return"";case"1":return"";case"2":return"";case"3":return"";case"4":return"";case"5":return"";case"6":return"";case"7":return"";case"8":return"";case"9":return"";case"-":return"";default:return t}}).join("");class er extends PR{constructor(t,e,i,s){super(t,e,i,s),this.Si=!1,this.vi=!1,this.bi=0,this.X=1e3,this.J(0,10),this.K()}yi(){return this.vi}nt(t,e,i,s,n){if(t===e)return!1;const a=Math.abs(s-i),o=Math.abs(e-t);if(!this.Si){const f=((p,x,b)=>{const v=((R,E)=>{if(E<Mt&&E>Dt&&R<Mt&&R>Dt){const V=Math.abs(R/8388608),F=Math.abs(E/2**23),L=Math.min(V,F);return 10**Math.floor(Math.log10(L))}})(p,x);if(v!==void 0)return v*b})(t,e,this.getCellSize());if(f===void 0)return!1;if(o>f)return!0;const y=(e+t)/2,m=(n?f/2:a/2)*(t>e?-1:1);return{start:y-m,end:y+m}}const l=10**-(12-Math.log10(Math.max(Math.abs(t),1)));if(o>l)return!0;const u=(e+t)/2,d=(n?l/2:a/2)*(t>e?-1:1);return{start:u-d,end:u+d}}ui(){this.K()}ct(t){return this.ei()+(t-this.H)/(this.$-this.H)*(this.hi()-this.ei())}ut(t){return this.H+(t-this.ei())/(this.hi()-this.ei())*(this.$-this.H)}J(t,e){return super.J(t,e),this.K(),this}si(t){return super.si(t),this.K(),this}q(t){return super.q(t),this.xi=Rm(this.$-this.H,this.Xt,this.X,this.Qt,this.Jt),this.K(),this}Mi(){return this.Si=!0,this}_i(){return this.Si}wi(){return Math.abs(this.Ci)}ki(){return this.wi()/this.xi}Ti(){return this.Fi}Ii(){return this.Pi}getPixelSize(){return this.xi}pi(){return this.di}Z(){return super.Z(),this.vi=!0,this}j(){return super.j(),this.vi=!1,this}Di(t,e=Hn.Numeric){return e(t,this)}Bi(){const t=Math.abs(this.getInnerEnd()).toString().length,e=Math.abs(this.getInnerStart()).toString().length;return t>e?t:e}Li(t){return Rm(t,this.Xt,this.X,this.Qt,this.Jt)}K(){let t=this.H,e=this.$,i=0;this.Si&&(t=0,e=this.$-this.H,i=this.H);const s=e-t,n=Rm(s,this.Xt,this.X,this.Qt,this.Jt);this.Pi=t-this.Xt[0]*n,this.Fi=e+this.Xt[1]*n;const a=this.Fi-this.Pi,o=a-this.Ci,l=Math.abs(o/n),u=s-this.bi,d=Math.abs(u/n);(!this.di||l>=.4||d>=.4)&&(this.bi=s,this.Ci=a,this.xi=n,this.vi=!0);const f=this.Ci*this.Jt/(2*this.Qt),y=-(this.Pi-this.Ci*this.Zt/this.Qt)-f,m=2*this.ei()/this.X-1,p=2*this.hi()/this.X-1-m;this.di={displacement:y,scaling:f,highPrecisionOffset:i,viewportStart:m,viewportSize:p,scaleStartLog:0,scaleIntervalLog:0}}mi(t,e){return t+this.xi*e}}const Rm=(r,t,e,i=1,s=1)=>r/(e*i/s-(t[0]+t[1]));class gn{Ri(t,e){return"x"in t?(this.x=t.x,this.y=t.y):(this.x=t,this.y=e),this}j(){return this.x.j(),this.y.j(),this}Z(){return this.x.Z(),this.y.Z(),this}q(t,e){return typeof t=="object"?(this.x.q(t.x),this.y.q(t.y)):(this.x.q(t),this.y.q(e)),this}oi(){return Y(this.x.oi(),this.y.oi())}Ei(t){return this.x.si(t),this}zi(t){return this.y.si(t),this}ni(){return Y(this.x.ni(),this.y.ni())}Vi(t,e){return this.x.J(t,e),this}Oi(t,e){return this.y.J(t,e),this}getInnerIntervalPixels(){const t=this.x.getCellSize(),e=this.y.getCellSize();return{x:t-this.x.ni(),y:e-this.y.ni()}}Ni(){return this.x.yi()||this.y.yi()}}class xe extends gn{constructor(){super(...arguments),this.Gi="LinearScaleXY"}ot(t,e,i,s){return this.x=new er(t.x,e.x,i.x,s?s.x:void 0),this.y=new er(t.y,e.y,i.y,s?s.y:void 0),this}_i(){return this.x._i()||this.y._i()}Wi(){return Y(this.x.getPixelSize(),this.y.getPixelSize())}pi(){return{x:this.x.pi(),y:this.y.pi()}}mi(t,e){const i=this.Wi();return{x:t.x+e.x*i.x,y:t.y+e.y*i.y}}Ui(t,e,i,s){const n=this.Wi(),a=D0(t,e);return a.x*=s,a.y*=s,{x:t.x+i*n.x*a.x,y:t.y+i*n.y*a.y}}}class Ci extends gn{constructor(){super(...arguments),this.Gi="MixedScaleXY"}_i(){return!1}mi(t,e){const i=this.x.ct(t.x),s=this.y.ct(t.y),n={x:i+e.x,y:s+e.y};return{x:this.x.ut(n.x),y:this.y.ut(n.y)}}Ui(t,e,i,s){const n={x:this.x.ct(t.x),y:this.y.ct(t.y)},a={x:this.x.ct(e.x),y:this.y.ct(e.y)},o=Ws(Se(a,n)),l=D0(a,n),u={x:n.x+o.x*s+l.x*i,y:n.y+o.y*s+l.y*i};return{x:this.x.ut(u.x),y:this.y.ut(u.y)}}pi(){const t=this.x.pi(),e=this.y.pi();return{uScaleStart:[this.x.H,this.y.H],uScaleInterval:[this.x.getInnerInterval(),this.y.getInnerInterval()],uScaleStartLog:[t.scaleStartLog,e.scaleStartLog],uScaleIntervalLog:[t.scaleIntervalLog,e.scaleIntervalLog],uViewportStart:[t.viewportStart,e.viewportStart],uViewportSize:[t.viewportSize,e.viewportSize]}}}const F0=(r,t)=>r instanceof Eo||t instanceof Eo?new Ci().Ri(r,t):new xe().Ri(r,t),gl=r=>r==="client",oS=r=>!!(r&&typeof r=="object"&&"clientX"in r&&typeof r.clientX=="number"&&"clientY"in r&&typeof r.clientY=="number"),Dn=r=>r==="relative",Sb=r=>!!(r&&typeof r=="object"&&"x"in r&&typeof r.x=="number"&&"y"in r&&typeof r.y=="number");var Xr;(function(r){r[r.noHighlighting=0]="noHighlighting",r[r.onHover=1]="onHover"})(Xr||(Xr={}));class Yc{constructor(t,e,i,s){this.Yi=!0,this.Hi=Xr.onHover,this.$i=!1,this.Xi=!0,this.ji=!1,this.D=new Ii,this.Zi=[],this.Qi=[],this.onMouseEnter=n=>this.D.on("mouseEnter",n),this.onMouseLeave=n=>this.D.on("mouseLeave",n),this.onMouseClick=n=>this.D.on("mouseClick",n),this.onMouseDoubleClick=n=>this.D.on("mouseDoubleClick",n),this.onMouseDown=n=>this.D.on("mouseDown",n),this.onMouseUp=n=>this.D.on("mouseUp",n),this.onMouseMove=n=>this.D.on("mouseMove",n),this.offMouseEnter=n=>this.D.off(n,"mouseEnter"),this.offMouseLeave=n=>this.D.off(n,"mouseLeave"),this.offMouseClick=n=>this.D.off(n,"mouseClick"),this.offMouseDoubleClick=n=>this.D.off(n,"mouseDoubleClick"),this.offMouseDown=n=>this.D.off(n,"mouseDown"),this.offMouseUp=n=>this.D.off(n,"mouseUp"),this.offMouseMove=n=>this.D.off(n,"mouseMove"),this.offMouseDragStart=n=>this.D.off(n,"mouseDragStart"),this.offMouseDrag=n=>this.D.off(n,"mouseDrag"),this.offMouseDragStop=n=>this.D.off(n,"mouseDragStop"),this.offMouseWheel=n=>this.D.off(n,"mouseWheel"),this.wt=(n,a,o)=>{this.D.emit("mouseEnter",this,a),this.ji=!0,this.Hi===Xr.onHover&&this.setHighlight(!0)},this.Ct=(n,a,o)=>{this.D.emit("mouseLeave",this,a),this.ji=!1,this.Hi===Xr.onHover&&this.setHighlight(!1)},this.Pt=(n,a,o)=>{this.D.emit("mouseMove",this,a)},this.kt=(n,a,o)=>this.D.emit("mouseClick",this,a),this.Tt=(n,a,o)=>this.D.emit("mouseDoubleClick",this,a),this.Ft=(n,a,o)=>this.D.emit("mouseDown",this,a),this.It=(n,a,o)=>this.D.emit("mouseUp",this,a),this.Bt=(n,a,o,l)=>{this.D.emit("mouseDragStart",this,a,o)},this.Dt=(n,a,o,l,u,d)=>{this.D.emit("mouseDrag",this,a,o,l,u)},this.Lt=(n,a,o,l,u)=>{this.D.emit("mouseDragStop",this,a,o,l)},this.Rt=(n,a,o)=>{this.D.emit("mouseWheel",this,a)},this.Et=(n,a,o)=>{this.D.emit("touchStart",this,a),this.ji=!0,this.Hi===Xr.onHover&&this.setHighlight(!0)},this.zt=(n,a,o)=>{this.D.emit("touchMove",this,a)},this.Vt=(n,a,o)=>{this.D.emit("touchEnd",this,a),this.ji=!1,this.Hi===Xr.onHover&&this.setHighlight(!1)},this.Ji=t,this.Ki=e,this.qi=i,this.ts=new Map,this.ss=s,this.es=this.ss.hs(this,{rs:{themeEffectEnabled:this.qi.effectsText},ns:{}}),this.Ji.us.ls.os(this,n=>{this.ts.forEach((a,o)=>o.cs(n)),this.Qi.forEach(a=>a.setHighlight(n)),this.Zi.forEach(a=>a.cs(n))},{animationEnabled:this.Ji.getAnimationsEnabled()})}ds(t,e){const i=(e==null?void 0:e.setEventHandlers)===void 0||e.setEventHandlers,s=(e==null?void 0:e.isText)!==void 0&&e.isText;this.ts.set(t,{isText:s});const n=Array.from(this.ts);this.es.rs.fs(n.filter(o=>o[1].isText).map(o=>o[0])),this.es.ns.fs(n.filter(o=>!o[1].isText).map(o=>o[0])),t.setMouseInteractions(this.Yi).setVisible(this.Xi).cs(this.Ji.us.ls.As(this,!0)),i&&t.setMouseEnterEventHandler(this.wt).setMouseLeaveEventHandler(this.Ct).setMouseClickEventHandler(this.kt).setMouseDoubleClickEventHandler(this.Tt).setMouseDownEventHandler(this.Ft).setMouseUpEventHandler(this.It).setMouseMoveEventHandler(this.Pt).setMouseDragStartEventHandler(this.Bt).setMouseDragEventHandler(this.Dt).setMouseDragStopEventHandler(this.Lt).setMouseWheelEventHandler(this.Rt).setTouchStartEventHandler(this.Et).setTouchMoveEventHandler(this.zt).setTouchEndEventHandler(this.Vt);const a=t.onDispose(()=>{t.offDispose(a),this.ts.delete(t)})}gs(t){this.Zi=t;const e=this.Ji.us.ls.As(this,!0);t.forEach(i=>{i.cs(e).ys(this.Xi)})}setEffect(t){return this.es.rs.ps(t&&this.qi.effectsText),this.es.ns.ps(t),this.Ji.us.Ss(),this}getEffect(){return this.es.rs.vs()||this.es.ns.vs()}onHighlight(t){return this.D.on("highlight",t)}offHighlight(t){return this.D.off(t)}setIcon(t){return this.bs=t,this.Ji.us.Ss(),this}getIcon(){return this.bs}setName(t){return this.xs=t,this.Qi.forEach(e=>e.setText(this.xs)),this}getName(){return this.xs}dispose(){return this.$i||(this.$i=!0,this.ts.forEach((t,e)=>e.dispose()),this.Ki(this),this.Qi.forEach(t=>{t.dispose()}),this.Qi.length=0,this.D.emit("dispose",this),this.Ji.us.Ss()),this}setVisible(t){return t===this.Xi||(this.Xi=t,this.ts.forEach((e,i)=>i.setVisible(t)),this.Zi.forEach(e=>e.ys(t)),this.Qi.forEach(e=>e.setOn(t)),this.D.emit("visibleStateChanged",this,this.Xi),this.Ji.us.Ss()),this}getVisible(){return this.Xi}onVisibleStateChanged(t){return this.D.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.D.off(t,"visibleStateChanged")}setHighlight(t){return this.Ji.us.ls.Ms(this,t),this.D.emit("highlight",this,t),this}getHighlight(){return this.Ji.us.ls.As(this)}setAnimationHighlight(t){return this.Ji.us.ls._s(this,t),this}getAnimationHighlight(){return this.Ji.us.ls.ws(this)}setMouseInteractions(t){return this.Yi=t,this.ts.forEach((e,i)=>i.setMouseInteractions(t)),this.Ji.us.Ss(),this}getMouseInteractions(){return this.Yi}getIsUnderMouse(){return this.ji}setHighlightOnHover(t){return this.Hi=t?Xr.onHover:Xr.noHighlighting,t===!1&&this.getHighlight()>0&&this.setHighlight(!1),this}getHighlightOnHover(){return this.Hi!==Xr.noHighlighting}attach(t,e=!0,i=!1){return FR(t,[this],{toggleVisibilityOnClick:e,label:this.xs,style:void 0}),this.Qi.push(t),t.onDispose(()=>{const s=this.Qi.indexOf(t);s>=0&&this.Qi.splice(s,1)}),this}Cs(){return this.bs}onMouseDragStart(t){return this.D.on("mouseDragStart",t)}onMouseDrag(t){return this.D.on("mouseDrag",t)}onMouseDragStop(t){return this.D.on("mouseDragStop",t)}onMouseWheel(t){return this.D.on("mouseWheel",t)}onTouchStart(t){return this.D.on("touchStart",t)}onTouchMove(t){return this.D.on("touchMove",t)}onTouchEnd(t){return this.D.on("touchEnd",t)}isDisposed(){return this.$i}onDispose(t){return this.D.on("dispose",t)}offTouchStart(t){return this.D.off(t,"touchStart")}offTouchMove(t){return this.D.off(t,"touchMove")}offTouchEnd(t){return this.D.off(t,"touchEnd")}offDispose(t){return this.D.off(t,"dispose")}}class UR extends Yc{constructor(t,e,i,s,n,a,o,l){super(e,i,o,l),this.ks=t,this.axis=s,this.dt=n,this.Ts=a,this.Fs()}}const Em=r=>{const t=r.length;if(t>0){let e=0,i=0;for(let s=0;s<t;s+=1)e+=r[s].x,i+=r[s].y;return Y(e/t,i/t)}return Y(0,0)},Is=(...r)=>{const t=r.length,e=new Array(t).fill(!1),i=(s,n)=>{for(let a=0;a<t;a+=1){const o=r[a],l=o.Is(s,n);l?o.Ps(s,n,!0):e[a]&&e[a]&&o.Ps(s,n,!1),e[a]=l}return!1};return{onTouchStart:i,onTouchMove:i,onTouchEnd:i}},OR=class{constructor(r,t=300){this.Ds=!1,this.Bs=[],this.Ls=300,this.Rs=r,this.Ls=t}Is(r,t){const e=nt.performance.now();let i=!1;for(let s=0;s<this.Bs.length;s+=1)e-this.Bs[s].time>=this.Ls?(this.Bs.splice(s,1),s-=1):this.Bs[s].state&&(i=!0);return this.Ds?t.interactions.length===0&&(this.Bs.push({state:!1,time:e}),this.Ds=!1):t.interactions.length===1&&t.type==="pointerdown"&&(this.Bs.push({state:!0,time:e}),i=!0,this.Ds=!0),i}Ps(r,t,e){if(e){const i=this.Bs.reduce((s,n)=>(n.state?s.on+=1:s.off+=1,s),{on:0,off:0});i.on>=2&&i.off>=1&&(this.Rs(r,t),this.Bs.length=0)}}},wr=class{constructor(r,t,e,i=1,s=100){this.Es=r,this.zs=t,this.Vs=e,this.Os=i,this.Ns=s}Is(r,t){const e=t.interactions.length;if(e===this.Os){if(this.Gs!==void 0)return!0;if(t.type==="pointerdown"&&(e===1||(i=>{const s=i.length;if(s>0){const n=Em(i);let a=0;for(let o=0;o<s;o+=1)a=Math.max(a,ia(n,Y(i[o].x,i[o].y)));return a}return Mt})(t.interactions)<=this.Ns))return this.Gs=Em(t.interactions),!0}return!1}Ps(r,t,e){const i=this.Ws;if(!e||t.forceTouchEnd||t.type==="pointerup")this.Vs&&this.Vs(r,this.Gs,i,t),this.Gs=void 0,this.Ws=void 0;else{const s=Em(t.interactions);t.type==="pointerdown"?this.Es&&this.Es(r,this.Gs,t):t.type==="pointermove"&&this.zs&&this.zs(r,this.Gs,s,Y(s.x-i.x,i.y-s.y),t),this.Ws=s}}},hS=class{constructor(r,t,e){this.Us=!1,this.Es=r,this.zs=t,this.Vs=e}Is(r,t){return this.Us?t.interactions.length!==2&&(this.Us=!1):t.interactions.length===2&&t.type==="pointerdown"&&(this.Us=!0),this.Us}Ps(r,t,e){let i,s;if(e&&t.type!=="pointerup"){if(t.type==="pointerdown"){const n=t.interactions;i=n[0],s=n[1],this.Es(r,i,s,t)}else if(t.type==="pointermove"){i=t.interactions[0],s=t.interactions[1];const n=this.Ys,a=this.Hs,o=Y(i.x-n.x,n.y-i.y),l=Y(s.x-a.x,a.y-s.y);this.zs(r,i,s,o,l,t)}}else{const n=t.interactions;this.Vs(r,n[0],n[1],t)}this.Ys=i,this.Hs=s}},F3=Ae({type:"linestyle",lineType:"solid",fillStyle:new it({color:P(255,255,255)}),thickness:1});class se extends F3{constructor(t){super({...t,lineType:"solid"})}setFillStyle(t){return typeof t=="function"?this.set("fillStyle",t(this.getFillStyle())):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setThickness(t){return typeof t=="function"?this.set("thickness",t(this.getThickness())):this.set("thickness",t)}getThickness(){return this.get("thickness")}V(){const t=this.getThickness();return t<0?1:t}}const As=r=>!(!r||typeof r!="object"||!("lineType"in r)||r.lineType!=="solid");class V3{constructor(t,e){this.$s=t,this.Xs=e,this.js=e.rows*tD,this.Zs=e.columns*eD}}var En,yl;(function(r){r[r.ZoomIn=0]="ZoomIn",r[r.ZoomInX=1]="ZoomInX",r[r.ZoomInY=2]="ZoomInY",r[r.ZoomOut=3]="ZoomOut",r[r.ZoomOutX=4]="ZoomOutX",r[r.ZoomOutY=5]="ZoomOutY",r[r.ZoomToFit=6]="ZoomToFit",r[r.ToggleAnimations=7]="ToggleAnimations"})(En||(En={})),function(r){r[r.Circle=0]="Circle",r[r.Rectangle=1]="Rectangle",r[r.RoundedRectangle=2]="RoundedRectangle"}(yl||(yl={}));const z3={x:-43,y:0},_3={x:-65,y:0},N3={x:-86,y:0},L3={x:-107,y:-1},B3={x:-128,y:-3},P3={x:-150,y:0},I3={x:-171,y:0},U3={x:-276,y:0},O3={x:-298,y:0},G3={x:0,y:0},Y3={x:-21,y:0};class Ba extends V3{constructor(t,e,i,s){super(t,i),this.Qs=nt.document.createElement("button"),this.Js=nt.document.createElement("div"),this.Ks=nt.document.createElement("label"),this.Xs=i,this.qs=e,this.Ji=s}te(t,e,i,s){this.ie(t,s),this.se(),this.ee(e),this.he(),this.Ks.textContent=i||"";const n=nt.document.createElement("div");this.re(n),this.Qs.onclick=this.onClick.bind(this),n.appendChild(this.Js),n.appendChild(this.Ks),this.Qs.appendChild(n)}he(){this.Qs.style.cursor="pointer"}re(t){t.style.display="flex",t.style.justifyContent="center",t.style.alignContent="center",t.style.flexDirection="column"}ee(t){typeof t=="string"?(this.Js.style.backgroundImage=`url(${t})`,this.Js.style.backgroundSize="100%",this.Js.style.backgroundRepeat="no-repeat",this.Js.style.backgroundPosition="center",this.Js.style.width="20px",this.Js.style.height="20px"):this.applyStyleForSprite(t),this.Js.style.margin="auto"}se(){switch(this.qs){case yl.RoundedRectangle:this.Qs.style.borderRadius="10px";break;case yl.Rectangle:this.Qs.style.borderRadius="0px";break;case yl.Circle:default:this.Qs.style.borderRadius="31px"}}ie(t,e){this.Qs.style.width=`${this.Zs.toString()}px`,this.Qs.style.height=`${this.js.toString()}px`,this.Qs.style.backgroundColor=t,this.Qs.style.opacity=e||iD,this.Qs.style.alignItems="center",this.Qs.style.border="2px solid #707070",this.Qs.style.transition="background-color .8s ease"}applyStyleForSprite(t){this.Js.style.backgroundImage=`url(${this.$s}/${HR})`,this.Js.style.backgroundPositionX=`${t.x}px`,this.Js.style.backgroundPositionY=`${t.y}px`,this.Js.style.backgroundSize="1600%",this.Js.style.backgroundRepeat="no-repeat",this.Js.style.width="20px",this.Js.style.height="20px"}ne(t){return t.appendChild(this.Qs),t}oe(){return this.Qs}}class GR extends Ba{constructor(t,e,i,s){super(t,e,i,s),this.ae="",this.le="",this.ue=!1,this.Ji=s}ce(){this.de(),this.onToggledStateAction()}fe(){this.Ae(),this.onInitialStateAction()}Ae(){this.ge(this.ae)}de(){this.ge(this.le)}ge(t){typeof t=="string"?this.Js.style.background=t:(this.Js.style.backgroundImage=`url(${this.$s}/${HR})`,this.Js.style.backgroundPositionX=`${t.x}px`,this.Js.style.backgroundPositionY=`${t.y}px`)}onClick(){this.ue?this.fe():this.ce(),this.ue=!this.ue}}class H3 extends Ba{constructor(t,e,i){super(t,i,{rows:1,columns:1},e),this.Ji=e;const s=this.Ji.getTheme();this.te(s.onScreenMenuBackgroundColor.toRGBAString(),z3)}onClick(){const t=this.Ji.me();t&&this.Ji.zoom(t,{x:-1,y:-1})}}class X3 extends Ba{constructor(t,e,i){super(t,i,{rows:1,columns:1},e),this.Ji=e;const s=this.Ji.getTheme();this.te(s.onScreenMenuBackgroundColor.toRGBAString(),L3)}onClick(){const t=this.Ji.me();t&&this.Ji.zoom(t,{x:-1,y:0})}}class W3 extends Ba{constructor(t,e,i){super(t,i,{rows:1,columns:1},e),this.Ji=e;const s=this.Ji.getTheme();this.te(s.onScreenMenuBackgroundColor.toRGBAString(),P3)}onClick(){const t=this.Ji.me();t&&this.Ji.zoom(t,{x:0,y:-1})}}class $3 extends Ba{constructor(t,e,i){super(t,i,{rows:1,columns:1},e),this.Ji=e;const s=this.Ji.getTheme();this.te(s.onScreenMenuBackgroundColor.toRGBAString(),_3)}onClick(){const t=this.Ji.me();t&&this.Ji.zoom(t,{x:1,y:1})}}class q3 extends Ba{constructor(t,e,i){super(t,i,{rows:1,columns:1},e),this.Ji=e;const s=this.Ji.getTheme();this.te(s.onScreenMenuBackgroundColor.toRGBAString(),B3)}onClick(){const t=this.Ji.me();t&&this.Ji.zoom(t,{x:1,y:0})}}class j3 extends Ba{constructor(t,e,i){super(t,i,{rows:1,columns:1},e),this.Ji=e;const s=this.Ji.getTheme();this.te(s.onScreenMenuBackgroundColor.toRGBAString(),I3)}onClick(){const t=this.Ji.me();t&&this.Ji.zoom(t,{x:0,y:1})}}class J3 extends GR{constructor(t,e,i){super(t,i,{rows:1,columns:1},e),this.Ji=e;const s=this.Ji.getTheme();this.ae=U3,this.le=O3,this.te(s.onScreenMenuBackgroundColor.toRGBAString(),this.ae)}onToggledStateAction(){this.Ji.setAnimationsEnabled(!1)}onInitialStateAction(){this.Ji.setAnimationsEnabled(!0)}}class Z3 extends Ba{constructor(t,e,i){super(t,i,{rows:1,columns:1},e),this.Ji=e;const s=this.Ji.getTheme();this.te(s.onScreenMenuBackgroundColor.toRGBAString(),N3)}onClick(){this.Ji.forEachAxis(t=>{t.fit(!0)})}}class Q3 extends Ba{constructor(t,e,i){super(t,e.shape||XR,e.dimensions||{rows:1,columns:1},i);const s=i.getTheme(),n=e.color||s.onScreenMenuBackgroundColor.toRGBAString(),a=e.icon||"",o=e.label||"",l=e.opacity||"";this.te(n,a,o,l),this.ye=e.action}onClick(){this.ye(this.Ji)}}class K3 extends GR{constructor(t,e,i,s){super(t,e,{rows:1,columns:1},i),this.Ji=i,this.pe=s,this.ae=Y3,this.le=G3,this.te(xb,this.ae)}Ae(){this.ge(this.ae),this.Qs.style.backgroundColor=xb,this.Qs.style.border="2px solid #707070",this.Qs.style.margin="0px"}de(){this.ge(this.le),this.Qs.style.background="#FECC00 0% 0% no-repeat padding-box",this.Qs.style.border="10px solid #BCBCBC12",this.Qs.style.margin="1px"}onToggledStateAction(){var t;(t=this.pe)===null||t===void 0||t.style.setProperty("display","block")}onInitialStateAction(){var t;(t=this.pe)===null||t===void 0||t.style.setProperty("display","none")}}var ae;(function(r){r.Move="move",r.ResizeColumn="col-resize",r.ResizeRow="row-resize",r.Horizontal="ew-resize",r.Vertical="ns-resize",r.NorthWest="nw-resize",r.NorthEast="ne-resize",r.Copy="copy",r.CrossHair="crosshair",r.Default="default",r.Help="help",r.Restricted="not-allowed",r.None="none",r.Point="pointer",r.Text="text",r.Wait="wait",r.ZoomIn="zoom-in",r.ZoomOut="zoom-out"})(ae||(ae={}));const wl={LeftBottom:Y(-1,-1),CenterBottom:Y(0,-1),RightCenter:Y(1,0),LeftTop:Y(-1,1),RightTop:Y(1,1)},YR=new it({color:P(255,255,255,0)});new se({thickness:1,fillStyle:YR});const tD=60,eD=60,iD="1.0",HR="osm/osm-sprite-transparent.png",XR=yl.Circle,xb="#363636";var ll;(function(r){r[r.TopRight=0]="TopRight",r[r.TopLeft=1]="TopLeft",r[r.BottomLeft=2]="BottomLeft",r[r.BottomRight=3]="BottomRight"})(ll||(ll={}));class sD extends UR{constructor(t,e,i,s,n,a,o,l){super(t,e,i,s,n,a,o,l),this.xs="Band",this.Se=0,this.ve=0,this.be=this.qi.bandFillStyle,this.xe=this.qi.bandStrokeStyle,this.Me=!0,this._e=this.ks.ke(this.dt).Ce(this.be).we(this.xe).cs(this.getHighlight()),this.ds(this._e)}setValueStart(t){return this.Se=t,this.D.emit("valueChange",this,this.Se,this.ve),this.ks.Ss(),this}getValueStart(){return this.Se}setValueEnd(t){return this.ve=t,this.D.emit("valueChange",this,this.Se,this.ve),this.ks.Ss(),this}getValueEnd(){return this.ve}setFillStyle(t){this.be=typeof t=="function"?t(this.be):t;const e=this.be;return this._e.Ce(e),this.ks.Ss(),this}getFillStyle(){return this.be}setStrokeStyle(t){this.xe=typeof t=="function"?t(this.xe):t;const e=this.xe;return this._e.we(e),this.ks.Ss(),this}getStrokeStyle(){return this.xe}onValueChange(t){return this.D.on("valueChange",t)}offValueChange(t){return this.D.off(t,"valueChange")}Te(){return this._e.Fe(this.Ts.toVec2(this.Se,this.Ts.getHeight(this.dt).getInnerStart())).q(this.Ts.toVec2(this.ve-this.Se,this.Ts.getHeight(this.dt).getInnerInterval())),this}attach(t,e=!0,i=!1){return super.attach(t,e),ii(t,this.qi,i,{fill:this.be,stroke:this.xe}),this}Ie(t,e){t.cs(e),this.ks.Ss()}setDefaultMouseInteractions(t){return this.Me=t,this}Fs(){let t,e;const i=(a,o)=>{if(!this.Me)return;const l=gt(this.ks.us.Pe(o.x,o.y),this.ks.us.dt,this.dt),u=this.Ts.getWidth(l),d=this.axis.dt.ct(this.Se),f=this.axis.dt.ct(this.ve),y=(this.axis.dt.ct(u)-d)/(f-d);t=!(y<.1||y>.9),t===!1&&(e=y<.5)},s=(a,o,l,u,d)=>{if(!this.Me)return;const f=this.Ts.getWidth(u);t?(this.Se=this.axis.dt.mi(this.Se,f),this.ve=this.axis.dt.mi(this.ve,f)):e?this.Se=this.axis.dt.mi(this.Se,f):this.ve=this.axis.dt.mi(this.ve,f),At(d),this.D.emit("valueChange",this,this.Se,this.ve),this.ks.Ss()};this.onMouseMove((a,o)=>{if(!this.Me)return;i(0,Y(o.clientX,o.clientY));const l=t?ae.Point:this.Ts.getWidth({x:ae.Horizontal,y:ae.Vertical});this.De=this.Ji.engine.setMouseStyle(l,this.De)}),this.onMouseLeave(()=>{this.Me&&(this.Ji.engine.restoreMouseStyle(this.De),this.De=void 0)}),this.onMouseDrag((a,o,l,u,d)=>{this.Me&&l===0&&s(0,0,0,d,o)});const n=Is(new wr(i,s));this.onTouchStart(n.onTouchStart),this.onTouchMove(n.onTouchMove),this.onTouchEnd(n.onTouchEnd)}}class rD extends UR{constructor(t,e,i,s,n,a,o,l){super(t,e,i,s,n,a,o,l),this.xs="Constant Line",this.u=0,this.xe=this.qi.constantLineStrokeStyle,this.Be=!0,this.Me=!0,this.Le=this.ks.Ee(this.dt).Re(this.xe).cs(this.getHighlight()),this.ds(this.Le)}setValue(t){return this.u=t,this.D.emit("valueChange",this,this.u),this.ks.Ss(),this}getValue(){return this.u}setStrokeStyle(t){this.xe=typeof t=="function"?t(this.xe):t;const e=this.xe;return this.Le.Re(e),this.ks.Ss(),this}getStrokeStyle(){return this.xe}setInteractionMoveByDragging(t){return this.Be=t,this}getInteractionMoveByDragging(){return this.Be}onValueChange(t){return this.D.on("valueChange",t)}offValueChange(t){return this.D.off(t,"valueChange")}Te(){return this.Le.Ve(this.Ts.toVec2(this.u,this.Ts.getHeight(this.dt).getInnerStart())).ze(this.Ts.toVec2(this.u,this.Ts.getHeight(this.dt).getInnerEnd())),this}attach(t,e=!0,i=!1){return super.attach(t,e,i),ii(t,this.qi,i,{stroke:this.xe}),this}Ie(t,e){t.cs(e),this.ks.Ss()}setDefaultMouseInteractions(t){return this.Me=t,this}Fs(){const t=(i,s)=>{this.Me&&this.Be&&(this.u=this.axis.dt.mi(this.u,this.Ts.getWidth(s)),this.D.emit("valueChange",this,this.u),this.ks.Ss(),At(i))};this.onMouseMove(()=>{if(this.Me&&this.Be){const i=this.Ts.getWidth({x:ae.Horizontal,y:ae.Vertical});this.De=this.Ji.engine.setMouseStyle(i,this.De)}}),this.onMouseLeave(()=>{this.Me&&this.Be&&(this.Ji.engine.restoreMouseStyle(this.De),this.De=void 0)}),this.onMouseDrag((i,s,n,a,o)=>{this.Me&&this.Be&&n===0&&t(s,o)});const e=Is(new wr(void 0,(i,s,n,a,o)=>t(o,a)));this.onTouchStart(e.onTouchStart),this.onTouchMove(e.onTouchMove),this.onTouchEnd(e.onTouchEnd)}}const Zr={fitting:{start:(r,t,e,i)=>t>=r?e:i,end:(r,t,e,i)=>t>=r?i:e,allowIntervalLengthChange:!0},expansion:{start:(r,t,e,i)=>t>=r?e<r?e:r:i>r?i:r,end:(r,t,e,i)=>t>=r?i>t?i:t:e<t?e:t,allowIntervalLengthChange:!0},progressive:{start:(r,t,e,i)=>t>r?Zr.progressive.end(r,t,e,i)+(r-t):i>r?i:r,end:(r,t,e,i)=>t>r?i>t?i:t:Zr.progressive.start(r,t,e,i)+(t-r),allowIntervalLengthChange:!1},regressive:{}},Cl={Empty:"Empty",Numeric:"Numeric",Time:"Time"},Ab=r=>r.Oe!==void 0,nD=r=>r.Ne!==void 0,nh={Ge:Hn.Numeric},aD=(r,t)=>[r,t],Ks=(r,t,e,i)=>{const s=[],n=Math.round(Math.abs((r-t)/e));for(let a=1;a<n;a+=1){const o=Math.round((r+e*a)*i)/i;o<t&&s.push(o)}return s},Xs=(r,t,e,i,s)=>{Ai(r,0)&&(r=0),Ai(t,0)&&(t=0);const n=[];let a=i!==void 0?((o,l,u)=>o-(o-u)%l)(r,e,i):r;if(e<=0)throw new Error(`_getRegularGreatKeyValues unit less than or equal to 0, unit: ${e}`);for(;a<t&&Ai(a,t)===!1;)n.push(a),a+=e,a=Math.round(a*s)/s;return n.push(a),n},WR=(r,t,e,i)=>{const s=[];let n=e(r),a=0;for(;n<t&&Ai(n,t)===!1;)if(s.push(n),n=i(n),a+=1,a>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return s.push(n),s},ue=(r,...t)=>{const e=t.length>0?t.length:r?1:0;return(i,s,n,a,o,l)=>{if(s>=e)return;const u=t[s]||1;let d=!1,f=!1,y=1;return r&&(d="ignore"in r?r.ignore==="first"||r.ignore==="both":d,f="ignore"in r?r.ignore==="last"||r.ignore==="both":f,y="offset"in r&&r.offset!==void 0?r.offset:y),((m,p,x,b,v)=>(x&&(m=m.filter((R,E)=>E>0)),b&&(m=m.filter((R,E)=>E<m.length-1)),m.filter((R,E)=>(E+v)%p==0)))(i,u,d,f,y)}},Tm=(...r)=>{const t=r.length>0?r.length:0;return(e,i,s,n,a,o)=>{if(i>=t)return;const l=r[i]||1;return e.filter((u,d)=>d%l==0)}},Mf=(r,t)=>{if(t.has(r))return t.get(r);const e=Ze(r.Ue.We());if(tp(e))return e;const i=r.Ye.mi(e.min,{x:-5,y:-5}),s=r.Ye.mi(e.min,{x:5,y:5}),n=r.Ye.mi(e.max,{x:-5,y:-5}),a=r.Ye.mi(e.max,{x:5,y:5}),o={min:{x:Math.min(i.x,s.x,n.x,a.x),y:Math.min(i.y,s.y,n.y,a.y)},max:{x:Math.max(i.x,s.x,n.x,a.x),y:Math.max(i.y,s.y,n.y,a.y)}};return t.set(r,o),o},vb=r=>{const t=new Map;if(r!==nh){for(const e of r.He)t.set(e,new Map);for(const e of r.$e)t.set(e,new Map)}return t};class lh{constructor(t,e,i,s,n,a,o){this.D=new Ii,this.Xe=nh,this.je=Cl.Empty,this.Ze=new Map,this.Qe=new Map,this.Je=Zr.fitting,this.Ke=!0,this.qe=ta(()=>this.chart.us.Ss())(300,Er.linear),this.th=!0,this.Xi=!0,this.ih=!1,this.sh=Dt,this.eh=!1,this.hh=!1,this.rh=Dt,this.oh=Dt,this.ah=Dt,this.lh=!1,this.uh=()=>{this.ih||this.Je===void 0||this.chart.us.Ss(!0)},this.dh={},this.fh=(l,u,d,f,y,m)=>{const p=[],x=[];for(const b of l){if(b<d||b>f){p.push(b);continue}const v=this.Ze.get(u),R=(v?v.get(b):void 0)||this.Ah(b,u);R.gh=!1;const E=this.mh(R,y);m.set(R,E),p.push(b),x.push(R)}return{displayedKeyValues:p,createdTicks:x}},this.yh=(l,u,d,f,y,m,p,x,b,v,R)=>{const E=[];for(let V=0;V<l.length;V+=1){const F=l[V],L=u[V];let z,B,A;if(this.ph(F,d)){const T=Mf(F,b);B=[l[V-1],l[V+1]],A=B.concat(v).concat(R).filter(w=>w!==void 0).filter(w=>w.Sh!==d||!!l.find(C=>C===w)).map(w=>Qf(T,Mf(w,b))?w:void 0),z=A.some(w=>w!==void 0)}else z=!1;if(z){let T=!0;const w=A.filter(C=>C!==void 0);if(T&&w.every(C=>Ab(C.Sh))&&(T=!1),T&&d.bh&&d.bh.xh&&d.bh.xh(L,f,y,m,p,x)===!1&&(T=!1),T===!1)continue;return!0}E.push(F)}return E},this.formatValue=l=>this.Xe.Ge(l,this.dt),this.Mh=!0,this._h=!0,this.chart=t,this.wh=e,this.qi=s,this.Ch=a,this.dt=i,this.kh=o,o.type==="logarithmic"&&this.setAnimationZoom(Er.logarithmic(Tl(o.base))),this.Th=a.numeric,this.Fh("Numeric"),this.Ih=i.getInnerStart(),this.Ph=i.getInnerEnd(),this.setAnimationsEnabled(n)}setDefaultInterval(t,e){return this.Dh=t,(e==null?void 0:e.applyImmediately)!==!1&&(this.lh=!0,this.chart.us.Ss()),this}getDefaultInterval(){return this.Dh}getTitle(){return this.Lh.Bh()}setTitle(t){return this.Lh.Rh(t),this.chart.us.Ss(),this}getTitleFillStyle(){return this.Lh.Eh()}setIntervalRestrictions(t){return this.zh=t,this.chart.us.Ss(),this}getIntervalRestrictions(){return this.zh}setTitleFillStyle(t){return this.Lh.Ce(t),this.chart.us.Ss(),this}getTitleFont(){return this.Lh.Vh()}setTitleFont(t){return this.Lh.Oh(t),this.chart.us.Ss(),this}setTitleRotation(t){return this.Lh.Nh(t),this.chart.us.Ss(),this}getTitleRotation(){return this.Lh.Gh()}setTitleEffect(t){return this.Wh.ps(t),this.chart.us.Ss(),this}getTitleEffect(){return this.Wh.vs()}Fh(t,e){if(this.Ze.size>0&&this.Uh(),t==="Empty")this.Xe=nh,this.je=t;else if(t==="Numeric"){this.je!=="Numeric"&&(this.Th=this.Ch.numeric);const i=e||(s=>s);this.Th=i(this.Th),this.Xe=this.Th.Yh(this.kh),this.je=t}else if(t==="DateTime"){this.je!=="DateTime"&&(this.Th=this.Ch.datetime);const i=e||(s=>s);this.Th=i(this.Th),this.Xe=this.Th.Yh(this.kh),this.je=t}else if(t==="Time"){this.je!=="Time"&&(this.Th=this.Ch.time);const i=e||(s=>s);this.Th=i(this.Th),this.Xe=this.Th.Yh(this.kh),this.je=t}return this.Qe.forEach(i=>Array.from(i.values()).forEach(s=>s.dispose())),this.Qe=vb(this.Xe),this.chart.us.Ss(),this}Hh(){return this.Xe}$h(t){this.Xe=t,this.Qe.forEach(e=>Array.from(e.values()).forEach(i=>i.dispose())),this.Qe=vb(this.Xe),this.chart.us.Ss()}setInterval(t){const{start:e,end:i,animate:s,stopAxisAfter:n}=t;return this.St(e!==void 0?e:this.Ih,i!==void 0?i:this.Ph,s!==void 0&&s,n===void 0||n,"userSetInterval"),this}St(t,e,i=!1,s=!0,n){let a={start:t,end:e};const o=!0,l=Math.abs(e-t);if(Math.abs(this.Ph-this.Ih),this.Xe.Xh!==void 0&&this.Xe.Xh>l){const f=(e+t)/2,y=this.Xe.Xh/2*(t>e?-1:1);a={start:f-y,end:f+y}}if(this.Xe.jh!==void 0&&this.Xe.jh<l){const f=(e+t)/2,y=this.Xe.jh/2*(t>e?-1:1);a={start:f-y,end:f+y}}const u=this.dt.nt(a.start,a.end,this.Ih,this.Ph,o);if(u===!1)return this;if(u!==!0){if(a=u,n==="zoomBandChart")return this}let d;switch(n){case"userSetInterval":case"userFit":case"interactionSetInterval":case"interactionZoom":d=!0;break;case"zoomBandChart":case"synchronizedAxis":d=!1;break;default:return Xl(0,""),this}if(this.Zh&&this.Zh.finishAll(!1),this.qe&&(i===!0||i>0)){this.setStopped(!0);const f=i===!0?void 0:i,y=!this.Zh||this.Zh.isOver()?this.qe:this.Zh.NextAnimation.bind(this);this.Zh=y([[this.Ih,a.start],[this.Ph,a.end]],([m,p])=>{this.Qh(m,p,o)},f),this.Zh.onAnimationEnd(()=>{this.Zh=void 0,d&&(this.ah=nt.performance.now())}),this.Zh.onAnimationEnd(()=>this.setStopped(s))}else this.Qh(a.start,a.end,o),this.setStopped(s),d&&(this.ah=nt.performance.now());return this}getInterval(){return{start:this.Ih,end:this.Ph}}setStopped(t){return t===this.ih||(t&&(this.Zh&&this.Zh.finishAll(!1),this.Zh=void 0),this.ih=t,this.D.emit("stoppedStateChanged",this,this.ih),this.sh=nt.performance.now(),this.chart.us.Ss()),this}getStopped(){return this.ih}onStoppedStateChanged(t){return this.D.on("stoppedStateChanged",t)}offStoppedStateChanged(t){return this.D.off(t,"stoppedStateChanged")}fit(t,e){const i=this.Jh(),s=this.Dh||oD,n=typeof s=="function"?s({curStart:this.Ih,curEnd:this.Ph,dataMin:i==null?void 0:i.min,dataMax:i==null?void 0:i.max}):s;return this.St(n.start!==void 0?n.start:this.Ih,n.end!==void 0?n.end:this.Ph,n.animate!==void 0?n.animate:t===void 0||t,n.stopAxisAfter!==void 0?n.stopAxisAfter:e===void 0||e,"userFit"),this}setScrollStrategy(t){return this.Je=t,this.chart.us.Ss(),this}getScrollStrategy(){return this.Je}setAnimationScroll(t){return this.Ke=!!t,this.chart.us.Ss(),this}setAnimationZoom(t,e=300){return this.Zh&&(this.Zh.finishAll(!1),this.Zh=void 0),this.qe=t?ta(()=>this.chart.us.Ss())(e,t):void 0,this}setAnimationsEnabled(t){return this.th=t,t?(this.setAnimationScroll(!0),this.setAnimationZoom(Er.ease,void 0)):(this.setAnimationScroll(void 0),this.setAnimationZoom(void 0)),this}getAnimationsEnabled(){return this.th}setVisible(t){const e=this.Xi!==t;return this.Xi=t,this.Lh.setVisible(t),this.Kh(i=>{i.Ue.setVisible(t)}),e&&this.D.emit("visibleStateChanged",this,this.Xi),this}getVisible(){return this.Xi}onIntervalChange(t){return this.D.on("scaleChange",t)}offIntervalChange(t){return this.D.off(t,"scaleChange")}onVisibleStateChanged(t){return this.D.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.D.off(t,"visibleStateChanged")}qh(t,e){const i=new Map;if(this.Xe===nh||!this.Xi)return this.Uh(),i;e=e||new Map;const s=this.tr(),n=s.min,a=s.max,o=a-n,l=t.physicalAxisSize;this.dh.physicalAxisSize=l;const u=$R(this.Xe,n,a,this.Ih,this.Ph,l),d=[];if(this.ir(),d.push(...this.sr(this.Xe,n,a,u,e,t,i)),this.er(this.Xe,n,a,u,e,t,d,i),this.hr(),u)for(const[f,y]of this.Qe){const m=u.get(f);if(m!==void 0)for(const[p,x]of y)m.includes(p)||(x==null||x.dispose(),y.delete(p))}return this.dh.min=n,this.dh.max=a,this.dh.scaleInterval=o,this.dh.physicalAxisSize=l,i}rr(t){const e=t.Sh.nr;t.Ue.Rh(e(t.u,this.dt)).Ps()}ar(t,e){const i=e.lr;t.Ue.Ce(i.getLabelFillStyle()).Oh(i.getLabelFont()).Nh(i.getLabelRotation())}Ah(t,e){const i=this.Qe.get(e);let s=i.get(t);s?(i.delete(t),s.Sh=e,s.ys(!0)):s=this.ur(t,e);const n=this.Ze.get(e)||new Map;return n.set(t,s),this.Ze.set(e,n),this.ar(s,e),s}mh(t,e){const i=this.cr(t,e);return this.rr(t),i}sr(t,e,i,s,n,a,o){const l=[];for(const u of t.He){const d=s.get(u);for(const f of d){if(f<e||f>i)continue;const y=this.Ze.get(u),m=(y?y.get(f):void 0)||this.Ah(f,u),p=this.mh(m,a),x=Mf(m,n);l.find(b=>Qf(x,Mf(b,n)))&&m.Ue.setVisible(!1),m.gh=!1,o.set(m,p),l.push(m)}}return l}er(t,e,i,s,n,a,o,l){let u,d=[];for(const f of t.$e){const y=s.get(f);if(!y)break;let m;if(u===void 0)m=[{start:e,end:i,keyValues:y}];else{m=[];for(let V=0;V<u.length-1;V+=1){const F=u[V],L=u[V+1],z={start:F,end:L,keyValues:[]};for(const B of y)B>=F&&B<L&&z.keyValues.push(B);m.push(z)}}if(u=y,nD(f))continue;let p=0,x=-1,b=[],v=[];for(let V=0;V<m.length;V+=1){const F=this.fh(m[V].keyValues,f,e,i,a,l);b=b.concat(F.displayedKeyValues),v=v.concat(F.createdTicks)}let R=v,E=!0;if(f.lr.getLabelFillStyle()!==Vt){let V=[];for(;++x<m.length;){const F=m[x],L=F.start,z=F.end;let B=F.keyValues;if(p>0){if(f.bh===void 0){E=!1;break}const T=f.bh.dr;if(B=T(B,p-1,L,z,e,i),B===void 0)break}const A=this.yh(v.filter(T=>B.some(w=>Ai(T.u,w))),b,f,p,L,z,e,i,n,o,d);A!==!0?V=V.concat(A):(p+=1,x=-1,V=[])}R=V,v.forEach(F=>{V.find(L=>L===F)||this.Ar(F)})}if(d=R,!E)break}}Ar(t){const e=this.Ze.get(t.Sh);e==null||e.delete(t.u);const i=this.Qe.get(t.Sh);i&&i.has(t.u)?t.dispose():i&&(t.ys(!1),i.set(t.u,t))}Kh(t){for(const e of this.Ze.values())for(const i of e.values())t(i)}gr(t,e){for(const i of this.Ze.values())for(const s of i.values())e=t(e,s);return e}Uh(){this.Ze.forEach((t,e)=>{t.forEach(i=>this.Ar(i))}),this.Ze.clear()}ir(){for(const t of this.Ze.values())for(const e of t.values())e.gh=!0}hr(){for(const t of this.Ze.values())for(const[e,i]of t.entries())i.gh&&(i.dispose(),t.delete(e))}tr(){const t=this.dt.getInnerStart()<this.dt.getInnerEnd()?this.dt.getInnerStart():this.dt.getInnerEnd(),e=this.dt.getInnerEnd()>this.dt.getInnerStart()?this.dt.getInnerEnd():this.dt.getInnerStart();return Kt(t,e)}ph(t,e){return!(t.gh||t.Ue.Bh().length===0||Ab(e)&&e.mr!==!0)}yr(t,e){return this.Xe===nh||(this.Xe.He.forEach(i=>{e=t(e,i.lr)}),this.Xe.$e.forEach(i=>{(s=>s.nr!==void 0)(i)&&(e=t(e,i.lr))})),e}Jh(){let t=this.wh.pr();const e=this.wh.Sr();let i;if(t!==void 0&&vf(t)&&e!==void 0&&vf(e)&&(this.kh.type==="logarithmic"&&(t===0&&(t=Math.min(1,e)),Math.sign(t)!==Math.sign(e)&&(t=Math.min(1,e-.1))),i?(i.min=Math.min(i.min,t),i.max=Math.max(i.max,e)):i=Kt(t,e)),i&&vf(i.min)&&vf(i.max))return Ai(i.min,i.max)?{min:i.min-1,max:i.max+1}:i}vr(){if(!this.Mh)return 0;let t=0;const e=this.wh.br();return e&&(t=Math.max(t,e)),t}setAutoRegionsEnabled(t){return this.Mh=t,this.chart.us.Ss(),this}Mr(){var t;const e=this.eh;let i=!1;if(this.lh&&this.Dh){const s=this.Jh(),n=typeof this.Dh=="function"?this.Dh({curStart:this.Ih,curEnd:this.Ph,dataMin:s==null?void 0:s.min,dataMax:s==null?void 0:s.max}):this.Dh;this.setInterval(n),this.lh=!1}if(this.Je&&!this.ih){const s=this.Jh();if(s){const n=this.Ih,a=this.Ph;let o=this.Je.start(n,a,s.min,s.max),l=this.Je.end(n,a,s.min,s.max);const u=(t=this.Je.allowIntervalLengthChange)===null||t===void 0||t,d=Mb(this.zh,s,{start:o,end:l},{start:n,end:a},u);o=d.start,l=d.end;const f=Ai(n,o)===!1,y=Ai(a,l)===!1;if(o=f?o:n,l=y?l:a,f||y){let m=!1;if(this.Ke&&!this._h)if(this.Ke){m=!0;const p=f?this._r(n,o):n,x=y?this._r(a,l):a;if(this.Qh(p,x,u)===!0&&(f&&Ai(p,o)===!1||y&&Ai(x,l)===!1)){this.chart.us.Ss(!0),i=!0;let b=Math.abs(l-o)/Math.abs(p-x);b<1&&(b=1/b),this.hh=b>=1.4}}else m=!1;m||this.Qh(o,l,u),this._h=!1}}}return i?(this.eh!==i&&(this.eh=i,this.rh=nt.performance.now()),this.wr&&(clearTimeout(this.wr),this.wr=void 0)):e===!0&&this.wr===void 0&&(this.hh=!1,this.wr=setTimeout(()=>{this.eh!==!1&&(this.eh=!1,this.rh=nt.performance.now()),this.wr=void 0,this.chart.us.Ss()},200)),this}Qh(t,e,i){let s={start:t,end:e},n=!0;if(this.zh){const f=this.Jh();s=Mb(this.zh,f,s,{start:this.Ih,end:this.Ph},i)}const a=Math.abs(e-t),o=Math.abs(this.Ph-this.Ih);if(this.Xe.Xh!==void 0&&this.Xe.Xh>a){const f=(e+t)/2,y=(i?this.Xe.Xh/2:o/2)*(t>e?-1:1);s={start:f-y,end:f+y},n=!1}if(this.Xe.jh!==void 0&&this.Xe.jh<a){const f=(e+t)/2,y=(i?this.Xe.jh/2:o/2)*(t>e?-1:1);s={start:f-y,end:f+y},n=!1}let l=this.dt.nt(s.start,s.end,this.Ih,this.Ph,i);if(l===!1)return!1;l!==!0&&(s=l);const u=this.vr(),d=this.Cr(Math.min(s.start,s.end),Math.max(s.start,s.end),u);return l=this.dt.nt(s.end>s.start?d.min:d.max,s.end>s.start?d.max:d.min,this.Ih,this.Ph,!1),!!l&&(l===!0?this.dt.J(s.end>s.start?d.min:d.max,s.end>s.start?d.max:d.min):this.dt.J(s.start,s.end),this.Ih=s.start,this.Ph=s.end,this.D.emit("scaleChange",this,s.start,s.end),this.oh=nt.performance.now(),this.chart.us.Ss(),n)}kr(){return this.eh}Tr(){return this.Zh!==void 0}}class Hc{constructor(t,e,i,s,n=i.Pr(s).Ir(ea).Fr(ea).setMouseInteractions(!1)){this.gh=!1,this.$i=!1,this.ts=[],this.Sh=t,this.u=e,this.Dr=i,this.Ye=s,this.Ue=n,this.ts.push(n)}ys(t){this.ts.forEach(e=>e.setVisible(t))}dispose(){return this.$i||(this.$i=!0,this.ts.forEach(t=>t.dispose())),this}}const $R=(r,t,e,i,s,n)=>{const a=new Map;for(const l of r.He){let u=l.Br(t,e,i,s);u=bb(u),a.set(l,u)}let o;for(const l of r.$e){let u;if(o===void 0)u=l.Br(t,e,t,e);else{let d=[];const f=o.filter(y=>t<=y&&y<=e).length;if(f>0){const y=n/(f-1);if(l.Lr!==void 0&&l.Lr>y)break}for(let y=0;y<o.length-1;y+=1){const m=l.Br(o[y],o[y+1],t,e);d=d.concat(m)}u=d}u=bb(u),a.set(l,u),o=u}return a},bb=r=>(r=(t=>{const e={},i=[],s=t.length;let n=0;for(let a=0;a<s;a+=1){const o=t[a];e[o]!==1&&(e[o]=1,i[n]=o,n+=1)}return i})(r)).sort((t,e)=>t-e),Mb=(r,t,e,i,s)=>{const n=typeof r=="function"?r({curStart:i.start,curEnd:i.end,dataMin:t==null?void 0:t.min,dataMax:t==null?void 0:t.max}):r;if(!n)return e;const a={start:e.start,end:e.end};let o=Math.abs(e.end-e.start);if(n.intervalMin!==void 0&&o<n.intervalMin){const l=(a.start+a.end)/2;a.start=l+.5*Math.sign(e.start-l)*n.intervalMin,a.end=l+.5*Math.sign(e.end-l)*n.intervalMin}if(o=Math.abs(e.end-e.start),n.intervalMax!==void 0&&o>n.intervalMax){const l=(a.start+a.end)/2;a.start=l+.5*Math.sign(e.start-l)*n.intervalMax,a.end=l+.5*Math.sign(e.end-l)*n.intervalMax}return o=Math.abs(e.end-e.start),n.startMin!==void 0&&(a.start=Math.max(a.start,n.startMin),s||Ai(Math.abs(a.start-a.end),o)||(a.end=a.start+Math.sign(e.end-e.start)*o)),o=Math.abs(e.end-e.start),n.startMax!==void 0&&(a.start=Math.min(a.start,n.startMax),s||Ai(Math.abs(a.start-a.end),o)||(a.end=a.start+Math.sign(e.end-e.start)*o)),o=Math.abs(e.end-e.start),n.endMin!==void 0&&(a.end=Math.max(a.end,n.endMin),s||Ai(Math.abs(a.start-a.end),o)||(a.start=a.end+Math.sign(e.start-e.end)*o)),o=Math.abs(e.end-e.start),n.endMax!==void 0&&(a.end=Math.min(a.end,n.endMax),s||Ai(Math.abs(a.start-a.end),o)||(a.start=a.end+Math.sign(e.start-e.end)*o)),a},oD=r=>{if(r.dataMin===void 0||r.dataMax===void 0)return{stopAxisAfter:!1};const t=r.curEnd>=r.curStart;return{start:t?r.dataMin:r.dataMax,end:t?r.dataMax:r.dataMin,stopAxisAfter:!1}},hD=Ae({type:"font",size:14,family:"Arial",weight:"normal",style:"normal",variant:!1});class V0 extends hD{constructor(t){super(t)}setSize(t){return this.set("size",t)}setFamily(t){return this.set("family",t)}setWeight(t){return this.set("weight",t)}setStyle(t){return this.set("style",t)}setVariant(t){return this.set("variant",t)}getSize(){return this.get("size")}getFamily(){return this.get("family")}getWeight(){return this.get("weight")}getStyle(){return this.get("style")}getVariant(){return this.get("variant")}}const dc=r=>!(!r||typeof r!="object"||!("type"in r)||r.type!=="font"),qR=new V0,Rb=new class{getFillStyle(){return Vt}},lD=Ae({type:"triangulated-points-3d",shape:"sphere",size:10,fillStyle:new it,wireframeStyle:vt});class jR extends lD{constructor(t){super(t)}setSize(t){return this.set("size",t)}getSize(){return this.get("size")}setFillStyle(t){return typeof t=="function"?this.set("fillStyle",t(this.get("fillStyle"))):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setWireframeStyle(t){return typeof t=="function"?this.set("wireframeStyle",t(this.get("wireframeStyle"))):this.set("wireframeStyle",t)}getWireframeStyle(){return this.get("wireframeStyle")}setShape(t){return this.set("shape",t)}getShape(){return this.get("shape")}}const Ea=r=>!(!r||typeof r!="object"||!("type"in r)||r.type!=="triangulated-points-3d"),uD=Ae({type:"pixelated-points-3d",size:5,fillStyle:new it});class cD extends uD{constructor(t){super(t)}setSize(t){return this.set("size",t)}getSize(){return this.get("size")}setFillStyle(t){return typeof t=="function"?this.set("fillStyle",t(this.get("fillStyle"))):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}}const Eb=r=>!(!r||typeof r!="object"||!("type"in r)||r.type!=="pixelated-points-3d"),e0={Triangulated:jR,Pixelated:cD};class dD{constructor(t){this.Rr=new Map,this.us=t}os(t,e,i){const s=i.animationEnabled;this.Rr.set(t,{applyHighlight:e,curUnanimatedHighlightValue:0,curAnimationPositionMillis:0,animationEnabled:s,curAnimatedHighlightValue:0});const n=t.onDispose(()=>{this.Rr.delete(t),t.offDispose(n)})}Er(t,e){let i=e.animationEnabled;const s=[],n=t.onDispose(()=>{s.forEach(a=>{this.Rr.delete(a)}),t.offDispose(n)});return{zr:(a,o)=>{const l={applyHighlight:o,curUnanimatedHighlightValue:0,curAnimationPositionMillis:0,animationEnabled:i,curAnimatedHighlightValue:0};s.push(a),this.Rr.set(a,l)},Vr:()=>{s.forEach(a=>{this.Rr.delete(a)}),s.length=0},Or:a=>{i=a,s.forEach(o=>{this._s(o,i)})},Nr:()=>i}}Ms(t,e){const i=this.Rr.get(t);i&&(i.curUnanimatedHighlightValue=xo(e),this.us.Ss())}As(t,e=!1){const i=this.Rr.get(t);return i?e?i.curAnimatedHighlightValue:i.curUnanimatedHighlightValue:0}_s(t,e){const i=this.Rr.get(t);i&&(i.animationEnabled=e)}ws(t){const e=this.Rr.get(t);return!!e&&e.animationEnabled}Ps(t){let e=!1;this.Rr.forEach((i,s)=>{let n;if(i.animationEnabled)if(i.curUnanimatedHighlightValue>0){const o=i.curAnimationPositionMillis/1e3;n=i.curUnanimatedHighlightValue*Math.abs(Math.sin(o*Math.PI/2+.5));const l=i.curAnimatedHighlightValue===0?1:t;i.curAnimationPositionMillis+=l,e=!0}else i.curAnimatedHighlightValue>0&&i.curUnanimatedHighlightValue===0?(n=Math.max(i.curAnimatedHighlightValue-t/1e3,0),e=e||n>0):n=0,i.curAnimationPositionMillis=0;else n=i.curUnanimatedHighlightValue;n!==i.curAnimatedHighlightValue&&(i.applyHighlight(n),i.curAnimatedHighlightValue=n)}),e&&this.us.Ss(!0)}}const Tb=new Map,lS=(r,t)=>{const e=r.getSize(),i=r.getFamily(),s=r.getWeight(),n=r.getStyle(),a=r.getVariant(),o=`${n} ${a?"small-caps":"normal"} ${s} ${e}px ${i}`,l=`${o} ${t.toFixed(2)}`;let u=Tb.get(l);return u||(u=((d,f,y,m)=>({font:d,properties:f,dpr:y,id:m}))(o,{type:"font",size:e,family:i,style:n,variant:a,weight:s},t,l),Tb.set(l,u)),u};var Ys,fn;(function(r){r[r.click=0]="click",r[r.dbclick=1]="dbclick",r[r.mouseDown=2]="mouseDown",r[r.mouseUp=3]="mouseUp",r[r.contextmenu=4]="contextmenu",r[r.wheel=5]="wheel"})(Ys||(Ys={})),function(r){r[r.touchStart=0]="touchStart",r[r.touchMove=1]="touchMove",r[r.touchEnd=2]="touchEnd"}(fn||(fn={}));const fD=r=>({container:r.Gr,scale:r.dt,setMouseStyle:(t,e)=>r.Wr(t,e),restoreMouseStyle:t=>r.Ur(t),clientLocation2Engine:(t,e)=>r.Pe(t,e),engineLocation2Client:(t,e)=>r.Yr(t,e),captureFrame:(t,e,i)=>r.Hr(t,e,i),renderFrame:(t,e,i=!1)=>r.$r(t,e,i),layout:()=>{r.Xr(),r.jr(),r.Qr.Zr(),r.Ss()},setBackgroundFillStyle(t){return r.setBackgroundFillStyle(t),this},setBackgroundStrokeStyle(t){return r.setBackgroundStrokeStyle(t),this},getBackgroundFillStyle:()=>r.getBackgroundFillStyle(),getBackgroundStrokeStyle:()=>r.getBackgroundStrokeStyle(),addCustomIcon:(t,e)=>r.Jr(t,e),onRenderFrame:t=>r.Kr(t),offRenderFrame:t=>r.qr(t)}),th=[];let Yn;const wm=()=>{if(Yn!==void 0){const r=nt.getComputedStyle(nt.document.body),t=Number(r.getPropertyValue("margin-top").replace("px",""))+Number(r.getPropertyValue("margin-bottom").replace("px",""));Yn.style.height=nt.innerHeight-t+"px",(()=>{for(let e=0;e<th.length;e+=1)th[e]()})()}},wb=new it({color:P(255,255,255)}),bs={font:lS(qR,0),fillStyle:wb,lineStyle:new se({fillStyle:wb,thickness:1}),pointStyle3D:new e0.Triangulated};class gD{constructor(t,e,i){this.D=new Ii,this.dt=fs.d2({scaleXYConstructor:xe}),this.tn=new Map,this.sn=ta(()=>this.Ss(),60),this.en=Y(0,0),this.hn=!1,this.rn=re,this.nn=()=>{},this.an=[],this.ln=-1,this.un=[],this.cn=!0,this.$i=!1,this.dn=!1,this.jr=()=>{const{bottom:u,left:d}=this.Gr.getBoundingClientRect();return this.en=Y(Math.floor(d),Math.floor(u)),this},this.Xr=()=>{this.fn&&this.fn()},this.Wr=(u,d)=>{if(!d){this.Gr.style.cursor=u;const f=this.ln;return this.ln+=1,this.un.push([f,u]),f}return this.Ur(d),this.Wr(u)},this.Ur=u=>{const d=u?this.un.findIndex(f=>f[0]===u):-1;d>=0?(this.un.splice(d,1),this.un.length>0?this.Gr.style.cursor=this.un[this.un.length-1][1]:this.Gr.style.cursor="default"):(this.un.push([0,"default"]),this.Gr.style.cursor="default")},this.An=u=>(this.gn.S(u),this),this.mn=()=>this.gn.M(),this.yn=()=>{this.rn&&this.rn(1e3/60),this.pn(),this.Sn(),this.nn&&this.nn()},this.vn=u=>(this.tn.set(u.bn(),u),this.tn=new Map([...this.tn.entries()].sort((d,f)=>d[0]-f[0])),u),this.xn=u=>(this.tn.delete(u),this),this.j=()=>(this.gn.i=!1,this),this.Z=()=>(this.gn.i=!0,this),this.Mn=u=>{if(!this.cn)return;const d=this._n,f=d&&d.clientX===u.clientX&&d.clientY===u.clientY,y=this.Pe(u.clientX,u.clientY),m=this.wn(u,{x:u.clientX,y:u.clientY});if(this.Cn&&((m==null?void 0:m.entity)!==this.Cn.entity||m.collectionMember!==this.Cn.collectionMember)&&!this.kn){this.Cn.entity.ji=!1;const p=this.Cn.entity.Tn;p&&p(this.Cn.entity,u,this.Cn.collectionMember)}if(m&&m.entity.getMouseInteractions()&&!this.kn)if(m.entity.ji){if(!f){const p=m.entity.Fn;p&&p(m.entity,u,m.collectionMember)}}else{m.entity.ji=!0;const p=m.entity.In;p&&p(m.entity,u,m.collectionMember)}if(this.kn){const p=this.kn.entity.Pn,x=d?Y(u.clientX-d.clientX,d.clientY-u.clientY):{x:0,y:0};!p||x.x===0&&x.y===0||p(this.kn.entity,u,this.kn.button,this.kn.startLocation,x,this.kn.collectionMember)}this.Dn=u,this._n=u,this.Bn=y,this.Cn=m},this.Ln=u=>{if(this.cn=!1,this.Bn=void 0,this.Dn=u,this.Cn&&!this.Rn&&!this.kn){this.Cn.entity.ji=!1;const d=this.Cn.entity.Tn;d&&d(this.Cn.entity,u,this.Cn.collectionMember),this.Cn=void 0}},this.En=u=>{if(this.cn=!0,this.Dn=u,this.kn&&u.buttons<=0){const d=this.kn.entity.zn;d&&d(this.kn.entity,u,this.kn.button,this.kn.startLocation,this.kn.collectionMember),this.kn=void 0}if(this.Rn&&u.buttons<=0){const d=this.Rn.entity.Vn;d&&d(this.Rn.entity,u,this.Rn.collectionMember),this.Rn=void 0}},this.On=()=>this.Bn,this.Qr=t,this.qi=e.theme,this.Nn=i.Nn,this.Gn=i.Gn,this.Wn=i.Wn,this.Un={Yn:e&&e.overrideInteractionMouseButtons?e.overrideInteractionMouseButtons:void 0,$s:e&&e.resourcesBaseUrl!==void 0&&e.resourcesBaseUrl!==null?e.resourcesBaseUrl:`${nt.location.origin}/resources`,Hn:!e||!("warnings"in e)||typeof e.warnings!="boolean"||e.warnings,$n:(()=>{const u=e==null?void 0:e.pickingPrecision;if(typeof u=="string"){const d=u.toLowerCase();if(d==="best")return 1;if(d==="high")return .5;if(d==="low")return 1/8}return 1/4})(),Xn:(e==null?void 0:e.interactable)===void 0||e.interactable,jn:e.textPixelSnappingEnabled===void 0||e.textPixelSnappingEnabled};const s=e?e.container:void 0;if(s){if(typeof s=="string"){const u=nt.document.getElementById(s);if(!u)throw new Error(`Container "${s}" doesn't exist.`);this.Gr=u}else this.Gr=s;nt.addEventListener("resize",this.Xr),this.an.push(()=>{nt.removeEventListener("resize",this.Xr)})}else{if(Yn===void 0){const d=nt.document.createElement("div");d.id="lcjs-auto-flexbox",d.style.position="relative",d.style.width="100%",d.style.display="flex",d.style.flexDirection="column",nt.document.body.appendChild(d),Yn=d,nt.addEventListener("resize",wm)}let u=1;for(;nt.document.getElementById(`chart-${u}`)!==null;)u+=1;this.Gr=nt.document.createElement("div"),this.Gr.id=`chart-${u}`,this.Gr.style.flex="1",this.Gr.style.height="100%",Yn.appendChild(this.Gr),wm(),th.push(this.Xr),this.an.push(()=>{Yn&&Yn.removeChild(this.Gr),th.includes(this.Xr)&&th.splice(th.indexOf(this.Xr),1),th.length===0&&Yn&&(nt.document.body.removeChild(Yn),Yn=void 0,nt.removeEventListener("resize",wm))})}if(nt.ResizeObserver){const u=d=>{for(const f of d)f.target===this.Gr&&this.Xr()};this.Zn=new nt.ResizeObserver(u.bind(this)),this.Zn.observe(this.Gr)}this.Gr.style.position===""&&(this.Gr.style.position="relative"),this.Gr.style.boxSizing="content-box",this.Gr.addEventListener("fullscreenchange",this.Xr),this.Gr.addEventListener("webkitfullscreenchange",this.Xr);const n=e?e.maxFps:void 0;this.Qn=n?n===-1?-1:n!==0?1e3/n:0:0;const a=new Map;let o=!1;const l=(u,d)=>f=>{const y=function(m){return{x:m.clientX,y:m.clientY}}(f);switch(f.type){case"pointerover":case"pointerenter":case"pointermove":case"pointerdown":a.set(f.pointerId,y);break;default:a.delete(f.pointerId),o=!1}switch(f.interactions=Array.from(a.values()),f.pointerType){case"pen":case"mouse":default:u&&u(f);break;case"touch":d&&d(f)}f.defaultPrevented&&(o=!0)};this.Gr.onwheel=this.Jn(Ys.wheel),this.Gr.oncontextmenu=this.Jn(Ys.contextmenu),this.Gr.onclick=this.Jn(Ys.click),this.Gr.ondblclick=this.Jn(Ys.dbclick),this.Gr.onlostpointercapture=()=>{o=!1},this.Gr.ontouchmove=u=>{o&&u.preventDefault()},this.Gr.onpointerover=l(),this.Gr.onpointerenter=l(this.En),this.Gr.onpointerdown=l(this.Jn(Ys.mouseDown),this.Kn(fn.touchStart)),this.Gr.onpointermove=l(this.Mn,this.Kn(fn.touchMove)),this.Gr.onpointerup=l(this.Jn(Ys.mouseUp),this.Kn(fn.touchEnd)),this.Gr.onpointercancel=l(),this.Gr.onpointerout=l(),this.Gr.onpointerleave=l(this.Ln,this.Kn(fn.touchEnd)),nt.addEventListener("scroll",this.jr,{passive:!0}),this.gn=Wt(new jr({r:0,g:0,b:0,a:0})),this.ls=new dD(this)}qn(t,e){var i,s,n,a;((i=this.Cn)===null||i===void 0?void 0:i.entity)===t.entity&&this.Cn.collectionMember===t.collectionMember&&(this.Cn=e),((s=this.io)===null||s===void 0?void 0:s.entity)===t.entity&&this.io.collectionMember===t.collectionMember&&(this.io=e),((n=this.Rn)===null||n===void 0?void 0:n.entity)===t.entity&&this.Rn.collectionMember===t.collectionMember&&(this.Rn={...e,event:this.Rn.event}),((a=this.kn)===null||a===void 0?void 0:a.entity)===t.entity&&this.kn.collectionMember===t.collectionMember&&(this.kn={...e,button:this.kn.button,startLocation:this.kn.startLocation})}so(){this.dn=!0,this.rn=void 0,this.nn=void 0}Kr(t){return this.D.on("render",t)}qr(t){return this.D.off(t)}eo(){return this.ho}ro(){return this.no}setBackgroundFillStyle(t){return this.oo.Ce(t),this}getBackgroundFillStyle(){return this.oo.Eh()}setBackgroundStrokeStyle(t){return this.oo.we(t),this}getBackgroundStrokeStyle(){return this.oo.ao()}lo(t){return this.nn=t,this}uo(t){return this.rn=t,this}co(t){return this.tn.get(t)}do(){return Array.from(this.tn.keys()).reverse().reduce((t,e)=>e!==Number.MAX_SAFE_INTEGER&&e>t?e:t,0)+1}Jn(t){return e=>this.fo(t,e)}fo(t,e){if(!this.cn)return;t===Ys.contextmenu&&At(e);const i=this.Pe(e.clientX,e.clientY),s=this.wn(e,{x:e.clientX,y:e.clientY});if(t===Ys.mouseUp){if(this.kn){const n=this.kn.entity.zn;if(n&&n(this.kn.entity,e,this.kn.button,this.kn.startLocation,this.kn.collectionMember),(s==null?void 0:s.entity)!==this.kn.entity||s.collectionMember!==this.kn.collectionMember){this.kn.entity.ji=!1;const a=this.kn.entity.Tn;a&&a(this.kn.entity,e,this.kn.collectionMember)}this.kn=void 0}if(this.Rn){const n=this.Rn.entity.getMouseInteractions()&&this.Rn.entity.Vn;n&&n(this.Rn.entity,e,this.Rn.collectionMember),this.Rn=void 0}}else if(s&&s.entity.getMouseInteractions()){const n=t===Ys.click?s.entity.Ao:t===Ys.dbclick?s.entity.mo:t===Ys.mouseDown?s.entity.yo:t===Ys.wheel?s.entity.po:t===Ys.contextmenu?s.entity.So:void 0;if(n&&n(s.entity,e,s.collectionMember),t===Ys.mouseDown){this.Rn={entity:s.entity,collectionMember:s.collectionMember,event:e};const a=this.Rn.event.button,o=s.entity.vo;o&&o(s.entity,e,a,s.collectionMember),this.kn={entity:s.entity,collectionMember:s.collectionMember,button:a,startLocation:Y(e.clientX,e.clientY)}}}this.Dn=e,this.Bn=i,this.Cn=s}Kn(t){return e=>this.bo(t,e)}bo(t,e){const i=e.interactions.length;if(this.xo=e,this.io){const s=t===fn.touchMove?this.io.entity.Mo:t===fn.touchEnd?this.io.entity._o:t===fn.touchStart?this.io.entity.wo:void 0;s&&s(this.io.entity,e,this.io.collectionMember),t===fn.touchEnd&&i===0&&(this.io.entity.ji=!1,this.io=void 0)}else if(t===fn.touchStart){for(let s=0;s<i&&(this.io=this.wn(e,{x:e.interactions[s].x,y:e.interactions[s].y}),!this.io);s+=1);if(this.io){this.io.entity.ji=!0;const s=this.io.entity.wo;s&&s(this.io.entity,e,this.io.collectionMember)}}t===fn.touchEnd?this.Bn=void 0:this.Bn=this.Pe(e.clientX,e.clientY)}Co(t){return this.D.on("resize",t)}ko(t){return this.D.off(t,"resize")}To(){return this.D.topicOff("resize"),this}Fo(t){return this.D.on("inViewChange",t)}Io(t){return this.D.off(t)}W(){if(!this.$i){if(this.$i=!0,this.tn)for(const t of this.tn.values())t.W();this.rn=void 0,this.nn=void 0,nt.removeEventListener("scroll",this.jr),this.Gr.removeEventListener("fullscreenchange",this.Xr),this.Gr.removeEventListener("webkitfullscreenchange",this.Xr),this.Zn&&(this.Zn.disconnect(),this.Zn=void 0),this.an.forEach(t=>{t()}),this.an.length=0}}Pe(t,e){return Y(t-this.en.x,this.en.y-e)}Yr(t,e){return Y(t+this.en.x,this.en.y-e)}Po(t){const e=this.Pe(t.clientX,t.clientY);return{engineX:e.x,engineY:e.y}}Do(t){const e=this.Yr(t.engineX,t.engineY);return{clientX:e.x,clientY:e.y}}}const Cb=(r=1)=>({type:"horizontalProgressive",packager:(t,e,i)=>{if(t.length>1){const s=Ht(e,i*r),n=Math.abs(s.x),a=t.length,o=[];let l=0,u=0,d=t[0].x+n;for(;u<a;){const f=t[u];if(o[l]=f,l+=1,u+=1,f.x<d&&u<a){const y=u;let m=f.y,p=f.y;for(;u<a&&t[u].x<=d;)t[u].y>m&&(m=t[u].y),t[u].y<p&&(p=t[u].y),u+=1;if(y!==u){const x=(o[l-1].x+t[u-1].x)/2;o[l+0]=Y(x,p),o[l+1]=Y(x,m),o[l+2]=t[u-1],l+=3}}d+=n}return o}return t.slice()}}),kb=(r=1)=>({type:"horizontalRegressive",packager:(t,e,i)=>{if(t.length>1){const s=Ht(e,i*r),n=Math.abs(s.x),a=t.length,o=[];let l=0,u=0,d=t[0].x-n;for(;u<a;){const f=t[u];if(o[l]=f,l+=1,u+=1,f.x>d&&u<a){const y=u;let m=f.y,p=f.y;for(;u<a&&t[u].x>=d;)t[u].y>m&&(m=t[u].y),t[u].y<p&&(p=t[u].y),u+=1;if(y!==u){const x=(o[l-1].x+t[u-1].x)/2;o[l+0]=Y(x,p),o[l+1]=Y(x,m),o[l+2]=t[u-1],l+=3}}d-=n}return o}return t.slice()}}),Db=(r=1)=>({type:"verticalProgressive",packager:(t,e,i)=>{if(t.length>1){const s=Ht(e,i*r),n=Math.abs(s.y),a=t.length,o=[];let l=0,u=0,d=t[0].y+n;for(;u<a;){const f=t[u];if(o[l]=f,l+=1,u+=1,f.y<d&&u<a){const y=u;let m=f.x,p=f.x;for(;u<a&&t[u].y<=d;)t[u].x>m&&(m=t[u].x),t[u].x<p&&(p=t[u].x),u+=1;if(y!==u){const x=(o[l-1].y+t[u-1].y)/2;o[l+0]=Y(p,x),o[l+1]=Y(m,x),o[l+2]=t[u-1],l+=3}}d+=n}return o}return t.slice()}}),Fb=(r=1)=>({type:"verticalRegressive",packager:(t,e,i)=>{if(t.length>1){const s=Ht(e,i*r),n=Math.abs(s.y),a=t.length,o=[];let l=0,u=0,d=t[0].y-n;for(;u<a;){const f=t[u];if(o[l]=f,l+=1,u+=1,f.y>d&&u<a){const y=u;let m=f.x,p=f.x;for(;u<a&&t[u].y>=d;)t[u].x>m&&(m=t[u].x),t[u].x<p&&(p=t[u].x),u+=1;if(y!==u){const x=(o[l-1].y+t[u-1].y)/2;o[l+0]=Y(p,x),o[l+1]=Y(m,x),o[l+2]=t[u-1],l+=3}}d-=n}return o}return t.slice()}});var qe;(function(r){r[r.Square=0]="Square",r[r.Circle=1]="Circle",r[r.Triangle=2]="Triangle",r[r.Cross=3]="Cross",r[r.Diamond=4]="Diamond",r[r.Plus=5]="Plus",r[r.Minus=6]="Minus",r[r.Arrow=7]="Arrow",r[r.Star=8]="Star"})(qe||(qe={}));const Rf={ProgressiveX:"ProgressiveX",ProgressiveY:"ProgressiveY",RegressiveX:"RegressiveX",RegressiveY:"RegressiveY"};var qi;(function(r){r[r.Nearest=0]="Nearest",r[r.NearestX=1]="NearestX",r[r.NearestY=2]="NearestY"})(qi||(qi={}));const ul=r=>{const t=r==="nearest"?qi.Nearest:r==="nearest-x"?qi.NearestX:r==="nearest-y"?qi.NearestY:void 0;return t!==void 0?t:qi.NearestX},uS=(r,t,e,i,s,n,a,o,l,u)=>{const d=r.length;if(d===0)return;const f=i?1:0,y=d-(s?2:1);if(e===qi.Nearest)return yD(r,t,n,a,f,y);if(e===qi.NearestX||e===qi.NearestY){if(typeof u=="boolean"&&(l==="x"&&e===qi.NearestX||l==="y"&&e===qi.NearestY))return Ec(r,gt(t,a,n),l,u,f,y);if(e===qi.NearestX)return mD(r,gt(t,a,n),o,f,y);if(e===qi.NearestY)return pD(r,gt(t,a,n),o,f,y)}},yD=(r,t,e,i,s,n)=>{let a,o=Number.MAX_VALUE;for(let l=s;l<=n;l+=1){const u=r[l];if(!Number.isNaN(u.x)&&!Number.isNaN(u.y)){const d=gt(u,e,i),f=(d.x-t.x)**2+(d.y-t.y)**2;f<o&&(o=f,a=l)}}return a},mD=(r,t,e,i,s)=>{if(t.x<e.min.x||t.x>e.max.x)return;let n,a=Number.MAX_VALUE;for(let o=i;o<=s;o+=1){const l=r[o],u=l.x>t.x?l.x-t.x:t.x-l.x;u<a&&!Number.isNaN(l.x)&&!Number.isNaN(l.y)&&(a=u,n=o)}return n},pD=(r,t,e,i,s)=>{if(t.y<e.min.y||t.y>e.max.y)return;let n,a=Number.MAX_VALUE;for(let o=i;o<=s;o+=1){const l=r[o],u=l.y>t.y?l.y-t.y:t.y-l.y;u<a&&!Number.isNaN(l.x)&&!Number.isNaN(l.y)&&(a=u,n=o)}return n},Ec=(r,t,e,i,s,n)=>{const a=e==="x",o=a?t.x:t.y,l=r[s],u=r[n],d=l.x<u.x?l.x:u.x,f=l.y<u.y?l.y:u.y,y=l.x>u.x?l.x:u.x,m=l.y>u.y?l.y:u.y;if(a&&(o<d||o>y)||!a&&(o<f||o>m))return;let p=s,x=Math.floor((s+n)/2),b=n,v=-1;for(;;){const R=o-(a?r[x].x:r[x].y);if(R*(i?-1:1)>0)p=Math.min(x+1,b),v=Math.floor((p+b)/2);else{if(Math.abs(R)===0)return x;b=Math.max(x-1,p),v=Math.floor((p+b)/2)}if(v===x){const E=x>s?Math.abs(o-(a?r[x-1].x:r[x-1].y)):Mt,V=x<n?Math.abs(o-(a?r[x+1].x:r[x+1].y)):Mt,F=Math.abs(R);switch(Math.min(F,E,V)){case E:return x-1;case V:return x+1;default:return x}}else x=v}},JR=(r,t,e,i,s,n)=>{const a=e==="x",o=a?t.x:t.y,l=r[s],u=r[n],d=l.x<u.x?l.x:u.x,f=l.y<u.y?l.y:u.y,y=l.x>u.x?l.x:u.x,m=l.y>u.y?l.y:u.y;if(a&&(o<d||o>y)||!a&&(o<f||o>m))return;let p=s,x=Math.floor((s+n)/2),b=n,v=-1;for(;;){const R=o-(a?r[x].x:r[x].y);if(R*(i?-1:1)>0)p=Math.min(x+1,b),v=Math.floor((p+b)/2);else{if(Math.abs(R)===0)return{a:x,b:x,lerpAmount:0};b=Math.max(x-1,p),v=Math.floor((p+b)/2)}if(v===x){if(R*(i?-1:1)<0&&x>s){const E=r[x-1],V=r[x];return{a:x-1,b:x,lerpAmount:a?(t.x-E.x)/(V.x-E.x):(t.y-E.y)/(V.y-E.y)}}if(x<n){const E=r[x],V=r[x+1];return{a:x,b:x+1,lerpAmount:a?(t.x-E.x)/(V.x-E.x):(t.y-E.y)/(V.y-E.y)}}return{a:x,b:x,lerpAmount:0}}x=v}};let Vb=0;class ZR{constructor(t,e,i){this.Bo=Wt(!0),this.Lo=!1,this.ji=!1,this.Ro=!1,this.$i=!1,this.Xi=!0,this.Eo=void 0,this.zo=0,this.D=new Ii,this.Fn=void 0,this.In=void 0,this.Tn=void 0,this.Ao=void 0,this.po=void 0,this.So=void 0,this.mo=void 0,this.yo=void 0,this.Vn=void 0,this.vo=void 0,this.Pn=void 0,this.zn=void 0,this.wo=void 0,this.Mo=void 0,this._o=void 0,this.onDispose=s=>this.D.on("dispose",s),this.offDispose=s=>this.D.off(s,"dispose"),this.us=t,this.Vo=e,this.Oo=i,this.No=Vb,Vb+=1,this.Go=t.qi.highlightColorOffset}Wo(t){return this.Oo.find(e=>e.type===t)!==void 0}Uo(t,e){var i;return!!this.Wo(t)&&e((i=this.Oo.find(s=>s.type===t))===null||i===void 0?void 0:i.args)===!0}dispose(){return this.$i||(this.ji&&this.Tn&&this.Tn(this,void 0,void 0),this.$i=!0,this.Vo(this),this.D.emit("dispose",this)),this}isDisposed(){return this.$i}setVisible(t){const e=this.Xi;return this.Xi=t,!t&&e&&(this.ji&&this.Tn&&this.Tn(this,void 0,void 0),this.ji=!1),this}getVisible(){return this.Xi}setMouseInteractions(t){const e=this.Bo.M();return this.Bo.S(t),t||(e&&this.ji&&this.Tn&&this.Tn(this,void 0,void 0),this.ji=!1),this}getMouseInteractions(){return this.Bo.M()}getIsUnderMouse(){return this.ji}getIsGrabbed(){return this.Ro}setMouseMoveEventHandler(t){return this.Fn=t,this}setMouseEnterEventHandler(t){return this.In=t,this}setMouseLeaveEventHandler(t){return this.Tn=t,this}setMouseClickEventHandler(t){return this.Ao=t,this}setMouseDoubleClickEventHandler(t){return this.mo=t,this}setMouseDownEventHandler(t){return this.yo=t,this}setMouseUpEventHandler(t){return this.Vn=t,this}setMouseWheelEventHandler(t){return this.po=t,this}setMouseContextMenuEventHandler(t){return this.So=t,this}setMouseDragEventHandler(t){return this.Pn=t,this}setMouseDragStartEventHandler(t){return this.vo=t,this}setMouseDragStopEventHandler(t){return this.zn=t,this}setTouchStartEventHandler(t){return this.wo=t,this}setTouchMoveEventHandler(t){return this.Mo=t,this}setTouchEndEventHandler(t){return this._o=t,this}Yo(t){return this.Eo=t,this}Ho(){return this.Eo?this.Eo:SD}cs(t){return this.zo=t,this}$o(){return this.zo}Xo(t){return this.Go=t,this}jo(){return this.Go}}const SD=Kt(Y(0,0),Y(0,0));class i0 extends ZR{constructor(t,e,i,s){super(t,i,s),this.Zo=0,this.ks=e,this.ks.Qo=!0}Jo(t){return this.Zo===t||(this.Zo=t,this.ks.Qo=!0),this}Ko(){return this.Zo}}class z0 extends i0{constructor(t,e,i,s,n){super(t,e,s,n),this.qo=!0,this.dt=i}}const Ao=(r,t,e)=>{if(e instanceof xe){const i=e.Wi(),s=$s(t,{x:Math.abs(i.x),y:Math.abs(i.y)});return Kt(Y(r.min.x-s.x,r.min.y-s.y),Y(r.max.x+s.x,r.max.y+s.y))}return Kt(e.mi(Y(r.min.x,r.min.y),Ht(t,-1)),e.mi(Y(r.max.x,r.max.y),t))},kl=(r,t)=>typeof t=="function"?t(r):t,Dl=(r,t)=>!r||r!==t,xD=(r,t)=>r===Vt&&t!==Vt,QR=r=>r!==Vt;class Ah extends z0{constructor(t,e,i,s,n){super(t,e,i,s,n),this.be=bs.fillStyle,this.us=t}Ce(t){return this.be=kl(this.be,t),this}Eh(){return this.be}ta(){return Dl(this.ia,this.be)}sa(){return xD(this.ia,this.be)}ea(){return QR(this.be)}ha(t){this.ia=t}}class _0 extends Ah{constructor(t,e,i,s,n){super(t,e,i,s,n),this.xe=bs.lineStyle,this.us=t}we(t){return this.xe=typeof t=="function"?t(this.xe):t,this}ao(){return this.xe}ra(){return!this.na||this.na!==this.xe}oa(t){return!this.na||this.na.getThickness()!==t}ea(){return this.xe!==vt||super.ea()}sa(){return(this.xe!==vt||this.be!==Vt)&&this.na===vt&&this.ia===Vt}aa(t){this.na=t}}class AD extends Ah{constructor(t,e,i,s,n,a=Wt(5)){super(t,e,i,s,n),this.size=Wt(5),this.size=a}q(t){return this.size.S(t),this}}class vD extends Ah{constructor(t,e,i,s,n,a=Wt(bs.font)){super(t,e,i,s,n),this.la=Wt(""),this.ua=Wt(Y(0,0)),this.ca=Wt(0),this.da=Wt(0),this.fa=Wt(Y(0,0)),this.Aa=Wt(0),this.ga=Wt(qR),this.ma=Y(0,0),this.Xt=Wt(ka(1,1,1,1)),this.ya=Wt(hc(4,4,4,4)),this.font=Wt(bs.font),this.pa=!1,this.font=a}ea(){return QR(this.be)&&this.la.M().length>0}sa(){return this.pa===!1&&this.ea()}Rh(t){return this.la.S(t),this}Bh(){return this.la.M()}Oh(t){return dc(t)?this.ga.S(t):this.ga.S(t(this.ga.M())),this}Vh(){return this.ga.M()}Sa(t){return this.ga.S(this.ga.M().setFamily(t)),this}va(){return this.ga.M().getFamily()}ba(t){return this.ga.S(this.ga.M().setSize(t)),this}xa(){return this.ga.M().getSize()}Ma(t){return this.ga.S(this.ga.M().setWeight(t)),this}_a(){return this.ga.M().getWeight()}wa(t){return this.ga.S(this.ga.M().setStyle(t)),this}Ca(){return this.ga.M().getStyle()}ka(t){return this.ga.S(this.ga.M().setVariant(t)),this}Ta(){return this.ga.M().getVariant()}Fe(t){return this.ua.S(t),this}Fa(){return this.ua.M()}Nh(t){return this.Aa.S(t),this}Gh(){return this.Aa.M()}Ia(t,e){return this.fa.S(Y(t,e)),this}Pa(){return this.fa.M()}Da(t){return this.da.S(t),this}Ba(){return this.da.M()}La(t){return this.ca.S(t),this}Ra(){return this.ca.M()}Ea(t){return this.da.S(t.x),this.ca.S(t.y),this}Fr(t){return this.Xt.S(t),this}za(){return this.Xt.M()}Ir(t){return this.ya.S(t),this}Va(){return this.ya.M()}}class cS extends AD{constructor(t,e,i,s,n,a=5){super(t,e,i,s,n,Wt(a)),this.Oa=[],this.Na=Wt(qe.Square),this.Aa=Wt(0),this.Ga=Wt(!1),this.Wa=Wt(!1),this.Ua=Wt(!1),this.Ya=Ne,this.Ha=0,this.$a=[],this.Xa=0,this.ja=Ne,this.Za=qi.Nearest,this.Qa=!1,this.Ja=void 0}Ka(t){return this.Za=t,this}qa(){return this.$a}tl(){return this.Oa}il(t){return this.Na.S(t),this}sl(){return this.Na.M()}Nh(t){return this.Aa.S(t),this}Gh(){return this.Aa.M()}el(t){return this.Ga.S(t),this}hl(t){return this.Wa.S(t),this}rl(t){return this.Ua.S(t),this}nl(t,e){return Array.isArray(t)||(t=[t]),this.Xa+=t.length,this.$a=cs(this.$a,t,{canReturnB:!0}),this.ja&&(this.ja=e?qs(this.ja,e):void 0),this.Ja=void 0,this}Nt(){return this.Qa=!0,this.Oa.length=0,this.Ha=0,this.Ya=Ne,this.$a=[],this.Xa=0,this.Ja=void 0,this}ol(){return this.Ha}al(){return this.Xa}}class bD extends _0{constructor(t,e,i,s,n){super(t,e,i,s,n),this.ua=Wt(Y(0,0)),this.X=Wt(Y(100,100)),this.Aa=Wt(0),this.ma=Wt(Y(0,0)),this.ll=!1}Ps(){return this.ul(),this}Fe(t){const e=this.ua.M();return t.x===e.x&&t.y===e.y||(this.ua.S(t),this.ul()),this}Fa(){return this.ua.M()}cl(t){const e=this.ua.M();return t!==e.x&&(this.ua.S(Y(t,e.y)),this.ul()),this}dl(t){const e=this.ua.M();return t!==e.y&&(this.ua.S(Y(e.x,t)),this.ul()),this}q(t){const e=this.X.M();return t.x===e.x&&t.y===e.y||(this.X.S(Y(t.x,t.y)),this.ul()),this}oi(){return this.X.M()}fl(t){const e=this.X.M();return t!==e.x&&(this.X.S(Y(t,e.y)),this.ul()),this}Al(t){const e=this.X.M();return t!==e.x&&(this.X.S(Y(e.x,t)),this.ul()),this}Nh(t){return this.Aa.S(t),this}Gh(){return this.Aa.M()}ml(t){const e=this.ma.M();return t===e&&e.x===t.x&&e.y===t.y||(t===void 0?(this.ll=!1,this.ul()):(this.ll=!0,this.ma.S(t))),this}ul(){if(!this.ll){const t=this.ua.M(),e=this.X.M(),i=Y(t.x+e.x/2,t.y+e.y/2),s=this.ma.M();i.x===s.x&&i.y===s.y||this.ma.S(i)}}}class MD extends _0{constructor(){super(...arguments),this.Oa=[],this.ua=Wt(Y(0,0)),this.Ya=Ne,this.yl=!1}pl(t){return t=CR(t),this.Oa=t,this.yl=!0,this}Sl(){return this.Oa}bt(){return this.Ya.max.x}vt(){return this.Ya.min.x}Mt(){return this.Ya.max.y}xt(){return this.Ya.min.y}vl(){return 0}bl(){return 0}}class RD extends MD{}class ED extends Ah{constructor(t,e,i,s,n){super(t,e,i,s,n),this.xl=new Array,this.Ml=new Array,this._l=Wt({type:"disabled",packager:(a,o,l)=>a.slice()}),this.Ya=Ne,this.wl=0,this.Cl=!1,this.$a=[Array(),Array()],this.kl=!1,this.Tl=new it().setColor(P(42,171,240)),this.Qa=!1,this.Fl=!1,this.Il=!1}nl(t,e){const i=this.wl-1,s=i>0&&!this.kl;let[n,a]=s?[[this.xl[i]],[this.Ml[i]]]:[[],[]];if(t instanceof Array){const[o,l]=fR(t);n=cs(n,o,{canReturnB:!0}),a=cs(a,l,{canReturnB:!0})}else{const o=t.position;n.push(Y(o,t.high)),a.push(Y(o,t.low))}return this.kl?(this.$a[0]=cs(this.$a[0],n,{canReturnB:!0}),this.$a[1]=cs(this.$a[1],a,{canReturnB:!0})):(this.$a=[n,a],this.kl=!0),this.Ya=qs(this.Ya,e||qs(Ze(n),Ze(a))),this}Nt(){return this.Qa=!0,this.xl.length=0,this.Ml.length=0,this.wl=0,this.Ya=Ne,this}tl(){return[this.xl,this.Ml]}qa(){return[this.$a[0],this.$a[1]]}Pl(t){return this._l.S(t),this}Dl(){return this._l.M()}Bl(t){return this.Tl=typeof t=="function"?t(this.Tl):t,this}Ll(){return this.Tl}ol(){return this.wl-(Number(this.Fl)+Number(this.Il))}al(){return this.$a.length}Rl(t){return this.Fl=t,this}El(){return this.Fl}zl(t){return this.Il=t,this}Vl(){return this.Il}sa(){return this.ia===Vt&&this.Ol===Vt&&(this.be!==Vt||this.Tl!==Vt)}Nl(t){this.Ol=t}ea(){return this.Tl!==Vt||super.ea()}ta(){return super.ta()||!this.Ol||this.Ol!==this.Tl}}class TD extends _0{constructor(t,e,i,s,n){super(t,e,i,s,n),this.ua=Wt(Y(0,0)),this.Gl=Wt(0),this.Fi=Wt(360),this.Wl=Wt(100),this.Ul=Wt(100),this.Yl=Wt(0),this.Hl=Wt(void 0),this.$l=Y(0,0),this.Xl=Y(0,0),this.jl=Y(0,0)}Zl(){return this.Wl.M()}Ql(){return this.Ul.M()}Fa(){return this.ua.M()}Jl(){return this.Gl.M()}Ti(){return this.Fi.M()}Kl(){return this.Yl.M()}ql(){return this.Hl.M()}tu(){return this.$l}iu(){return this.Xl}su(){return this.jl}Fe(t){return this.ua.S(t),this}eu(t){return this.Gl.S(t),this}ze(t){return this.Fi.S(t),this}hu(t){return this.Ul.S(t),this.Wl.S(t),this}ru(t){return this.Wl.S(t),this}nu(t){return this.Ul.S(t),this}ou(t){return this.Yl.S(t<0?0:t),this}au(t){return this.Hl.S(t!==void 0&&t<=0?void 0:t),this}}var Dr;(function(r){r[r.Complex=0]="Complex",r[r.Simple=1]="Simple"})(Dr||(Dr={}));const wD=(r,t)=>typeof t=="function"?t(r):t,CD=(r,t)=>!r||r!==t,kD=(r,t)=>!r||r.getThickness()!==t,DD=(r,t)=>r===vt&&t!==vt,FD=r=>r!==vt&&r.getFillStyle()!==Vt;class N0 extends z0{constructor(t,e,i,s,n){super(t,e,i,s,n),this.lu=bs.lineStyle,this.engine=t}Re(t){return this.lu=wD(this.lu,t),this}uu(){return this.lu}ra(){return CD(this.cu,this.lu)}du(t){return kD(this.cu,t)}sa(){return DD(this.cu,this.lu)}ea(){return FD(this.lu)}fu(t){this.cu=t}}class VD extends N0{constructor(t,e,i,s,n){super(t,e,i,s,n),this.Pi=Y(0,0),this.Fi=Y(0,0),this.Au=!1}S({min:t,max:e}){return t.x===this.Pi.x&&t.y===this.Pi.y&&e.x===this.Fi.x&&e.y===this.Fi.y||(this.Au=!0,this.Pi=t,this.Fi=e),this}Ii(){return this.Pi}Ti(){return this.Fi}Ve(t){return t.x===this.Pi.x&&t.y===this.Pi.y||(this.Au=!0,this.Pi=t),this}ze(t){return t.x===this.Fi.x&&t.y===this.Fi.y||(this.Au=!0,this.Fi=t),this}}class zD extends N0{constructor(t,e,i,s,n){super(t,e,i,s,n),this.gu=void 0,this.mu=!1}}class np extends N0{constructor(t,e,i,s,n){super(t,e,i,s,n),this.yu=[],this.Ya=Ne,this.$a=new Array,this.Ha=0,this.Za=qi.NearestX,this.Qa=!1,this.pu=Wt(void 0),this.Fl=!1,this.Il=!1}Su(t){return this.pu.S(t),this}vu(){return this.pu.M()}qa(){return this.$a}tl(){return this.yu}Ka(t){return this.Za=t,this}Nt(){return this.Qa=!0,this.yu.length=0,this.Ha=0,this.$a=[],this.Ya=Ne,this}ol(){return this.Ha-(Number(this.Fl)+Number(this.Il))}al(){return this.$a.length}Rl(t){return this.Fl=t,this}El(){return this.Fl}zl(t){return this.Il=t,this}Vl(){return this.Il}}const _D=r=>{const t=r.getDraggingMode();return t!==void 0&&t!==De.notDraggable?t===De.draggable?ae.Move:t===De.onlyHorizontal?ae.Horizontal:ae.Vertical:void 0};class L0{constructor(){this.Xi=!0,this.D=new Ii,this.bu=0,this.wt=(t,e,i)=>{this.bu===0&&this.D.emit("mouseEnter",this,e),this.bu+=1},this.Ct=(t,e,i)=>{this.bu-=1,this.bu<1&&(this.D.emit("mouseLeave",this,e),this.bu=0)},this.kt=(t,e,i)=>{this.D.emit("mouseClick",this,e)},this.Tt=(t,e,i)=>{this.D.emit("mouseDoubleClick",this,e)},this.Ft=(t,e,i)=>{this.D.emit("mouseDown",this,e)},this.It=(t,e,i)=>{this.D.emit("mouseUp",this,e)},this.Pt=(t,e,i)=>{this.D.emit("mouseMove",this,e)},this.Bt=(t,e,i,s)=>{this.D.emit("mouseDragStart",this,e,i)},this.Dt=(t,e,i,s,n,a)=>{this.D.emit("mouseDrag",this,e,i,s,n)},this.Lt=(t,e,i,s,n)=>{this.D.emit("mouseDragStop",this,e,i,s)},this.Rt=(t,e,i)=>{this.D.emit("mouseWheel",this,e)},this.Et=(t,e)=>{this.bu+=1,this.D.emit("touchStart",this,e)},this.zt=(t,e)=>{this.D.emit("touchMove",this,e)},this.Vt=(t,e)=>{this.bu-=1,this.D.emit("touchEnd",this,e)},this.xu=t=>(t instanceof z0?t.setMouseEnterEventHandler(this.wt).setMouseLeaveEventHandler(this.Ct).setMouseClickEventHandler(this.kt).setMouseDoubleClickEventHandler(this.Tt).setMouseDownEventHandler(this.Ft).setMouseUpEventHandler(this.It).setMouseMoveEventHandler(this.Pt).setMouseDragEventHandler(this.Dt).setMouseDragStartEventHandler(this.Bt).setMouseDragStopEventHandler(this.Lt).setMouseWheelEventHandler(this.Rt).setTouchStartEventHandler(this.Et).setTouchMoveEventHandler(this.zt).setTouchEndEventHandler(this.Vt):(t.onMouseEnter(this.wt),t.onMouseLeave(this.Ct),t.onMouseClick(this.kt),t.onMouseDoubleClick(this.Tt),t.onMouseDown(this.Ft),t.onMouseUp(this.It),t.onMouseMove(this.Pt),t.onMouseDrag(this.Dt),t.onMouseDragStart(this.Bt),t.onMouseDragStop(this.Lt),t.onMouseWheel(this.Rt),t.onTouchStart(this.Et),t.onTouchMove(this.zt),t.onTouchEnd(this.Vt)),t)}onMouseEnter(t){return this.D.on("mouseEnter",t)}onMouseLeave(t){return this.D.on("mouseLeave",t)}onMouseClick(t){return this.D.on("mouseClick",t)}onMouseDoubleClick(t){return this.D.on("mouseDoubleClick",t)}onMouseDown(t){return this.D.on("mouseDown",t)}onMouseUp(t){return this.D.on("mouseUp",t)}onMouseMove(t){return this.D.on("mouseMove",t)}onMouseDragStart(t){return this.D.on("mouseDragStart",t)}onMouseDrag(t){return this.D.on("mouseDrag",t)}onMouseDragStop(t){return this.D.on("mouseDragStop",t)}onMouseWheel(t){return this.D.on("mouseWheel",t)}onTouchStart(t){return this.D.on("touchStart",t)}onTouchMove(t){return this.D.on("touchMove",t)}onTouchEnd(t){return this.D.on("touchEnd",t)}offMouseEnter(t){return this.D.off(t,"mouseEnter")}offMouseLeave(t){return this.D.off(t,"mouseLeave")}offMouseClick(t){return this.D.off(t,"mouseClick")}offMouseDoubleClick(t){return this.D.off(t,"mouseDoubleClick")}offMouseDown(t){return this.D.off(t,"mouseDown")}offMouseUp(t){return this.D.off(t,"mouseUp")}offMouseMove(t){return this.D.off(t,"mouseMove")}offMouseDragStart(t){return this.D.off(t,"mouseDragStart")}offMouseDrag(t){return this.D.off(t,"mouseDrag")}offMouseDragStop(t){return this.D.off(t,"mouseDragStop")}offMouseWheel(t){return this.D.off(t,"mouseWheel")}offTouchStart(t){return this.D.off(t,"touchStart")}offTouchMove(t){return this.D.off(t,"touchMove")}offTouchEnd(t){return this.D.off(t,"touchEnd")}getIsUnderMouse(){return this.bu>0}setVisible(t){const e=this.Xi!==t;return this.Xi=t,e&&this.D.emit("visibleStateChanged",this,this.Xi),this}getVisible(){return this.Xi}onVisibleStateChanged(t){return this.D.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.D.off(t,"visibleStateChanged")}}const KR=(r,t,e)=>{const i=r.getDraggingMode();if(i!==De.notDraggable){const s=r.scale.mi(r.getPosition(),{x:i!==De.onlyVertical?t.x:0,y:i!==De.onlyHorizontal?t.y:0}),n=r.scale,a=r.getSize(),o=r.getOrigin(),l=n.mi({x:n.x.getInnerStart(),y:n.y.getInnerStart()},$s({x:(1+o.x)/2,y:(1+o.y)/2},a)),u=n.mi({x:n.x.getInnerEnd(),y:n.y.getInnerEnd()},$s({x:(o.x-1)/2,y:(o.y-1)/2},a)),d={x:Math.min(Math.max(s.x,l.x),u.x),y:Math.min(Math.max(s.y,l.y),u.y)};r.setPosition(d),At(e)}},ND=(r,t,e,i,s)=>{KR(r,s,t)},LD=(r,t,e,i,s)=>{KR(r,i,s)};class $l extends L0{constructor(t,e,i,s,n){super(),this.position=Y(50,50),this.origin=Y(0,0),this.size=Y(0,0),this.$i=!1,this.Mu=void 0,this._u=void 0,this.wu=_D,this.Cu=void 0,this.Bo=!0,this.ku=()=>{const o=typeof this.wu=="function"?this.wu(this):this.wu;o&&(this._u=this.ks.us.Wr(o))},this.Tu=()=>{this.ks.us.Ur(this._u)},this.Xt=ka(0,0,0,0),this.ks=t,this.renderingScale=e,this.scale=i,this.Vo=s,this.qi=n,this.ks.Ss(),this.onMouseEnter(this.ku),this.onMouseLeave(this.Tu),this.onMouseDrag(ND);const a=Is(new wr(re,LD,re));this.onTouchStart(a.onTouchStart),this.onTouchMove(a.onTouchMove),this.onTouchEnd(a.onTouchEnd),this.qi=n}setMouseInteractions(t){return this.Fu().forEach(e=>e.setMouseInteractions(t)),this.Bo=t,this}getMouseInteractions(){return this.Bo}setEffect(t){return this.es=this.es||this.ks.us.es.hs(this,{Iu:{shapes:this.Fu()}}),this.es.Iu.ps(t),this}getEffect(){return!!this.es&&this.es.Iu.vs()}setAutoDispose(t){return this.Cu=t,this.ks.Ss(),this}getAutoDispose(){return this.Cu}getSize(t=Re.Everything){return t===Re.Everything?Y(this.size.x+(this.Xt.left+this.Xt.right),this.size.y+(this.Xt.bottom+this.Xt.top)):this.size}setContentSize(t){this.size=t}setMargin(t){return this.Xt=typeof t=="object"?fl(this.Xt,t):{left:t,top:t,right:t,bottom:t},this.ks.Ss(),this}getMargin(){return this.Xt}Te(){if(this.Cu){const t=this.size,e=this.renderingScale.oi(),i={x:t.x/e.x,y:t.y/e.y};(this.Cu.type==="max-width"&&i.x>=this.Cu.maxWidth||this.Cu.type==="max-height"&&i.y>=this.Cu.maxHeight)&&this.dispose()}return this}Ps(){return this}dispose(){return this.$i||(this.ks.Ss(),this.$i=!0,this.Vo(this),this.D.emit("dispose",this),this.Fu().forEach(t=>t.dispose())),this}setVisible(t){return super.setVisible(t),this.Fu().forEach(e=>e.setVisible(t)),this.ks.Ss(),this}isDisposed(){return this.$i}onDispose(t){return this.D.on("dispose",t)}offDispose(t){return this.D.off(t,"dispose")}setPosition(t){return this.position=t,this.ks.Ss(),this}getPosition(t=this.origin,e=Re.Everything){const i=this.getSize(Re.Everything),s=this.scale.mi(this.position,$s({x:-(this.origin.x+1)/2,y:-(this.origin.y+1)/2},i));if(e===Re.Everything)return this.scale.mi(s,$s({x:(t.x+1)/2,y:(t.y+1)/2},i));const n=this.scale.mi(s,{x:this.Xt.left,y:this.Xt.bottom}),a=this.getSize(Re.Content);return this.scale.mi(n,$s({x:(t.x+1)/2,y:(t.y+1)/2},a))}setOrigin(t){return this.origin=t,this.ks.Ss(),this}getOrigin(){return this.origin}setDraggingMode(t=De.notDraggable){return this.Mu=t,this.ks.Ss(),this}getDraggingMode(){return this.Mu!==void 0?this.Mu:De.notDraggable}setMouseStyle(t){return this.wu=t,this}getMouseStyle(){return this.wu}}class BD extends $l{constructor(t,e,i,s,n,a){super(t,e,i,n,a),this.ya=ka(),this.Pu=0,this.ks=t,this.Du=s,this.backgroundElement=new this.Du(this.ks,this.renderingScale,this.scale,re,a),this.xu(this.backgroundElement)}Fu(){return this.backgroundElement.Fu()}onHighlight(t){return this.D.on("highlight",t)}offHighlight(t){return this.D.off(t)}setBackground(t){return t(this.backgroundElement),this}getBackground(){return this.backgroundElement}Te(){return super.Te(),this.$i||this.backgroundElement.setOrigin(this.origin).setPosition(this.getPosition(this.origin,Re.PaddedBackground)).Te(),this}Ps(){const t=this.getSize(Re.PaddedContent);return this.backgroundElement.Bu(t).Ps(),super.Ps()}dispose(){return super.dispose(),this.backgroundElement.dispose(),this}setVisible(t){return super.setVisible(t),this.backgroundElement.setVisible(t),this}setPadding(t){return this.ya=typeof t=="object"?fl(this.ya,t):{left:t,top:t,right:t,bottom:t},this.ks.Ss(),this}getPadding(){return this.ya}getSize(t=Re.Everything){let e=super.getSize(t);return t>=Re.PaddedContent&&(e=Y(e.x+this.ya.left+this.ya.right,e.y+this.ya.bottom+this.ya.top)),t>=Re.PaddedBackground&&(e=Y(e.x+this.backgroundElement.Lu()+this.backgroundElement.Ru(),e.y+this.backgroundElement.Eu()+this.backgroundElement.zu())),e}getPosition(t=this.origin,e=Re.Everything){if(e===Re.Everything)return super.getPosition(t,e);const i=super.getPosition(Y(-1,-1),Re.Everything),s=this.getMargin(),n=this.scale.mi(i,{x:s.left,y:s.bottom});if(e===Re.PaddedBackground){const d=this.getSize(Re.PaddedBackground);return this.scale.mi(n,$s({x:(t.x+1)/2,y:(t.y+1)/2},d))}const a=this.scale.mi(n,{x:this.backgroundElement.Lu(),y:this.backgroundElement.Eu()});if(e===Re.PaddedContent){const d=this.getSize(Re.PaddedContent);return this.scale.mi(a,$s({x:(t.x+1)/2,y:(t.y+1)/2},d))}const o=this.getPadding(),l=this.scale.mi(a,{x:o.left,y:o.bottom}),u=this.getSize(Re.Content);return this.scale.mi(l,$s({x:(t.x+1)/2,y:(t.y+1)/2},u))}setMouseInteractions(t){return super.setMouseInteractions(t),this.backgroundElement.setMouseInteractions(t),this}getHighlight(){return this.Pu}setHighlight(t){return this.Pu=xo(t),this.backgroundElement.setHighlight(t),this.D.emit("highlight",this,t),this}}const uh=r=>"setBackground"in r;class PD extends L0{constructor(t,e,i,s,n,a,o,l,u,d,f){super(),this.u=0,this.Vu=1,this.Ou=!0,this.Nu=new V0,this.Gu=!0,this.$i=!1,this.axisScale=s,this.renderingScale=n,this.Wu=o,this.Uu=l,this.Yu=u,this.Vo=d,this.Hu=e,this.$u=i,this.Xu=this.xu(this.Hu.Ee(this.renderingScale)),this.qi=f,this.ju=this.xu(this.Yu.Zu(this.$u,this.renderingScale,a,re,this.qi,!1).setOrigin(TR(this.Uu)).setDirection(this.Uu)),this.axis=t,this.setMouseInteractions(!1),this.ju.Qu==="major"?this.Xu.Re(f.xAxisNumericTicks.majorTickStyle.gridStrokeStyle):this.ju.Qu==="minor"?this.Xu.Re(f.xAxisNumericTicks.minorTickStyle.gridStrokeStyle):this.ju.Qu==="other"&&this.Xu.Re(f.cursorGridStrokeStyleX)}setValue(t){return this.u=t,this.$u.Ss(),this.D.emit("valueChange",this,this.u),this}getValue(){return this.u}setTextFormatter(t){return this.Ju=t,this.$u.Ss(),this}setTickLength(t){return this.ju.setPointerLength(t),this.Hu.Ss(),this}getTickLength(){return this.ju.getPointerLength()}setTickLabelPadding(t){return this.ju.setTickLabelPadding(t),this.Hu.Ss(),this}setTickLabelRotation(t){return this.ju.setTextRotation(t),this.Hu.Ss(),this}getTickLabelRotation(){return this.ju.getTextRotation()}getTickLabelPadding(){return this.ju.getTickLabelPadding()}setGridStrokeLength(t){return this.Vu=t,this.Hu.Ss(),this}getGridStrokeLength(){return this.Vu}setGridStrokeStyle(t){return this.Xu.Re(t),this.Hu.Ss(),this}getGridStrokeStyle(){return this.Xu.uu()}dispose(){return this.$i||(this.$i=!0,this.Xu.dispose(),this.ju.dispose(),this.Vo(this),this.Hu.us.Ss(),this.D.emit("dispose",this)),this}onDispose(t){return this.D.on("dispose",t)}offDispose(t){return this.D.off(t,"dispose")}setMarkerVisible(t){return this.Ou=t,this.$u.Ss(),this}getMarkerVisible(){return this.Ou}setMarker(t){return t(this.ju),this.$u.Ss(),this}getMarker(){return this.ju}setMouseInteractions(t){return this.ju.setMouseInteractions(t),this.Xu.setMouseInteractions(t),this}getMouseInteractions(){return this.Xu.getMouseInteractions()}setAllocatesAxisSpace(t){return this.Gu=t,this.$u.Ss(),this}getAllocatesAxisSpace(){return this.Gu}isInScale(){return $n(this.u,this.axisScale.getInnerStart(),this.axisScale.getInnerEnd())}onValueChange(t){return this.D.on("valueChange",t)}offValueChange(t){return this.D.off(t,"valueChange")}}class ID extends PD{constructor(t,e,i,s,n,a,o,l,u,d,f){super(t,e,i,s,n,a,o,l,f,u,d),this.Ku=!1,this.Vo=u,this.Hu=e,this.$u=i}dispose(){return this.Ku=!1,super.dispose()}update(){return this}plot(t,e,i,s,n){if(this.isInScale()&&this.getVisible()&&t){this.Ku=!1;const a=El(this.u,this.axisScale,this.Wu.getWidth(this.renderingScale));this.Xu.setVisible(!0).Ve(this.Wu.toPoint(a,e)).ze(this.Wu.toPoint(a,e-(s+i*this.Vu))),this.Ou?(this.Ju&&this.ju.setText(this.Ju(this.u,this)),this.ju.setVisible(!0).setPosition(this.Wu.toPoint(a,n))):this.ju.setVisible(!1)}else this.Xu.setVisible(!1),this.ju.setVisible(!1);return this.ju.Ps().Te(),this}qu(){const t=this.ju.Ps().getSize();return this.Wu.getHeight(t)}}const Xc=(r,t)=>r.setTextFillStyle(t.uiTextFillStyle).setTextFont(t.uiTextFont),tE=(r,t)=>(ii(r.setButtonSize(t.uiButtonSize),t,!1,{fill:t.uiButtonFillStyle}),r),Pa=(r,t,e)=>{e&&uh(r)&&r.setBackground(i=>i.setFillStyle(t.uiBackgroundFillStyle).setStrokeStyle(t.uiBackgroundStrokeStyle)).setEffect(!0)},vn={uiElement:void 0,stylers:Uc(),addStyler(r){return{...this,stylers:this.stylers.push(r)}},applyStylers(r,t){return this.stylers.forEach(e=>e!==void 0?e(r,t):void 0),r}},vh={background:void 0,setBackground(r){return{...this,background:r}}},dS={Zu(r,t,e,i,s,n){const a=this.applyStylers(new this.uiElement(r,t,e,i,s),s);return Pa(a,s,n),a}},UD={Zu(r,t,e,i,s,n){const a=this.applyStylers(new this.uiElement(r,t,e,this.background,i,s),s);return Pa(a,s,n),a}};class OD extends $l{constructor(){super(...arguments),this.tc=!0}Te(){return super.Te(),this}setMouseInteractions(t){return this.tc=t,this}getMouseInteractions(){return this.tc}Fu(){return[]}}class fS extends $l{constructor(){super(...arguments),this.D=new Ii,this.Pu=0}onHighlight(t){return this.D.on("highlight",t)}offHighlight(t){return this.D.off(t)}getHighlight(){return this.Pu}setHighlight(t){return this.Pu=t,this.Fu().forEach(e=>e.cs(t)),this.D.emit("highlight",this,t),this.ks.Ss(),this}}class eE extends fS{}class GD extends eE{constructor(t,e,i,s,n,a){super(t,e,i,n,a),this.ks=t,this.Na=this.ks.ic(this.renderingScale,Dr.Simple).setVisible(!1).Ce(Vt).we(vt),this.xu(this.Na)}sc(){const t=this.hc();if(t.length>2){const e=Ze(t),i=Y(e.max.x-e.min.x,e.max.y-e.min.y);this.setContentSize(i);const s=t.map(n=>{const a=_t(n,Ht(e.min,-1));return this.scale.mi(this.position,_t(a,$s(Ht(_t(this.origin,Y(1,1)),-.5),i)))}).map(n=>gt(n,this.scale,this.renderingScale));this.Na.pl(s).setVisible(this.getVisible()).setVisible(this.getVisible())}else this.Na&&this.Na.setVisible(!1),this.setContentSize(Y(0,0))}Te(){return super.Te(),this.$i||this.sc(),this}Ps(){return this.sc(),super.Ps()}setVisible(t){return super.setVisible(t),this.Na.setVisible(t),this}}const vo=(r,t,e)=>r*(1-e)+t*e,iE=(r,t,e,i,s)=>{if(t.value===void 0||e.value===void 0||i.value===void 0||s.value===void 0)return;const n=(r.x-e.point.x)/(s.point.x-e.point.x),a=(s.point.y-e.point.y)*n+e.point.y,o=(r.x-t.point.x)/(i.point.x-t.point.x),l=(i.point.y-t.point.y)*o+t.point.y,u=(r.y-l)/(a-l),d=vo(e.value,s.value,n),f=vo(t.value,i.value,o);return vo(f,d,u)};class gS{constructor(){this.type="simple"}}const ql=new gS;class YD{constructor(t){this.type="phong",this.ambientReflection=1,this.specularReflection=.1,this.diffuseReflection=1,this.ambientColor=vs("#000"),this.specularColor=vs("#fff"),this.shininess=32,t&&(this.ambientReflection=Number.isNaN(Number(t.ambientReflection))?this.ambientReflection:Number(t.ambientReflection),this.specularReflection=Number.isNaN(Number(t.specularReflection))?this.specularReflection:Number(t.specularReflection),this.diffuseReflection=Number.isNaN(Number(t.diffuseReflection))?this.diffuseReflection:Number(t.diffuseReflection),this.ambientColor=t.ambientColor||this.ambientColor,this.specularColor=t.specularColor||this.specularColor,this.shininess=t.shininess||this.shininess)}}const jl=new YD,HD={Simple:gS};var ji;(function(r){r[r.Fill=0]="Fill",r[r.Fit=1]="Fit",r[r.Stretch=2]="Stretch",r[r.Center=3]="Center",r[r.Tile=4]="Tile"})(ji||(ji={}));const XD=Ae({type:"fillstyle",fillType:"image",source:void 0,surroundingColor:P(0,0,0,0),sourceMissingColor:P(0,0,0,0),fitMode:ji.Fill});class Fn extends XD{constructor(t){super(t)}setSource(t){return this.set("source",t)}getSource(){return this.get("source")}setSurroundingColor(t){return Mc(t)?this.set("surroundingColor",t):this.set("surroundingColor",t(this.get("surroundingColor")))}getSurroundingColor(){return this.get("surroundingColor")}setSourceMissingColor(t){return Mc(t)?this.set("sourceMissingColor",t):this.set("sourceMissingColor",t(this.get("sourceMissingColor")))}getSourceMissingColor(){return this.get("sourceMissingColor")}setFitMode(t){return this.set("fitMode",t)}getFitMode(){return this.get("fitMode")}toString(){return`imagefill:${this.fitMode}`}}const Jl=r=>!!(r&&typeof r=="object"&&"type"in r&&r.type==="fillstyle"&&"fillType"in r&&r.fillType==="image"),sE={DashedEqual:[2,2]},WD=Ae({type:"linestyle",lineType:"dashed",pattern:sE.DashedEqual,fillStyle:new it({color:P(255,255,255)}),thickness:1,patternScale:3});class $D extends WD{constructor(t){super({...t,lineType:"dashed"})}setFillStyle(t){return typeof t=="function"?this.set("fillStyle",t(this.getFillStyle())):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setThickness(t){return typeof t=="function"?this.set("thickness",t(this.getThickness())):this.set("thickness",t)}getThickness(){return this.get("thickness")}V(){const t=this.getThickness();return t<0?1:t}setPattern(t){return typeof t=="function"?this.set("pattern",t(this.getPattern())):this.set("pattern",t)}getPattern(){return this.get("pattern")}setPatternScale(t){return typeof t=="function"?this.set("patternScale",t(this.getPatternScale())):this.set("patternScale",t)}getPatternScale(){return this.get("patternScale")}}const B0=r=>!(!r||typeof r!="object"||!("lineType"in r)||r.lineType!=="dashed"),qD=Ae({type:"icon",width:void 0,height:void 0,rc:void 0,nc:re,oc:re});class jD extends qD{constructor(t,e,i,s){super({...s,rc:t,nc:e,oc:i})}dispose(){return this.oc(this),this}setWidth(t){const e=this.set("width",t);return this.nc(e),e}getWidth(){return this.get("width")}setHeight(t){const e=this.set("height",t);return this.nc(e),e}getHeight(){return this.get("height")}setSize(t,e){const i=this.withMutations(s=>{s.set("width",t).set("height",e)});return this.nc(i),i}oi(){if(!this.rc)return{x:0,y:0};const t=this.rc.width,e=this.rc.height;if(t===0||e===0)return{x:0,y:0};const i=this.width,s=this.height;return typeof i=="number"&&typeof s=="number"?{x:i,y:s}:typeof i=="number"?{x:i,y:e*i/t}:typeof s=="number"?{x:t*s/e,y:s}:{x:t,y:e}}}const ch=r=>!(!r||typeof r!="object"||!("type"in r)||r.type!=="icon"),JD=Ae({type:"glow",color:P(255,255,255,50),spread:1,blur:4,offset:{x:0,y:0}});class P0 extends JD{constructor(t){super(t)}setSpread(t){return this.set("spread",typeof t=="function"?t(this.get("spread")):t)}getSpread(){return this.get("spread")}setBlur(t){return this.set("blur",typeof t=="function"?t(this.get("blur")):t)}getBlur(){return this.get("blur")}setColor(t){return this.set("color",typeof t=="function"?t(this.get("color")):t)}getColor(){return this.get("color")}setOffset(t){return this.set("offset",typeof t=="function"?t(this.get("offset")):t)}getOffset(){return this.get("offset")}}class yS{constructor(t){this.ac=0,this.lc=0,this.uc=0,this.cc=!1,this.dc=!0,this.fc=!1,this.Ac={warningDisplayed:!1,expandEvents:[]},this.D=new Ii,this.dc=!t||t.autoSortingEnabled===void 0||t.autoSortingEnabled,(t==null?void 0:t.dataPattern)!==void 0&&(this.gc={userSpecified:t.dataPattern===null?void 0:t.dataPattern}),this.mc=(t==null?void 0:t.lookupValues)!==void 0&&t.lookupValues,this.yc=(t==null?void 0:t.colors)!==void 0&&t.colors,this.Sc=(t==null?void 0:t.ids)!==void 0&&t.ids,this.vc=(t==null?void 0:t.sizes)!==void 0&&t.sizes,this.bc=(t==null?void 0:t.rotations)!==void 0&&t.rotations,this.xc=t!=null&&t.dataStorage?t.dataStorage:Float64Array,this.Mc=(t==null?void 0:t.allowInputModification)!==!1}add(t){return Array.isArray(t)?this.appendJSON(t,{x:"x",y:"y"}):this.appendSample(t),this}addArraysXY(t,e){return this.appendSamples({xValues:t,yValues:e}),this}appendJSON(t,e={x:"x",y:"y"}){const i=t.length,s=e.x,n=e.y,a=e.lookupValue,o=e.size,l=e.rotation,u=e.color,d=e.id;let f,y,m,p,x,b,v;if(s){f=new this.xc(i);for(let R=0;R<i;R+=1){const E=t[R];f[R]=E[s]}}if(n){y=new this.xc(i);for(let R=0;R<i;R+=1){const E=t[R];y[R]=E[n]}}if(a){m=new Float32Array(i);for(let R=0;R<i;R+=1){const E=t[R];m[R]=E[a]}}if(u){p=[];for(let R=0;R<i;R+=1){const E=t[R];p[R]=E[u]}}if(d){x=new Uint32Array(i);for(let R=0;R<i;R+=1){const E=t[R];x[R]=E[d]}}if(o){b=new Float32Array(i);for(let R=0;R<i;R+=1){const E=t[R];b[R]=E[o]}}if(l){v=new Float32Array(i);for(let R=0;R<i;R+=1){const E=t[R];v[R]=E[l]}}return this.appendSamples({xValues:f,yValues:y,ids:x,colors:p,lookupValues:m,sizes:b,rotations:v,start:e.start,step:e.step}),this}appendSample(t){const{samplesCacheX:e,samplesCacheY:i,samplesCacheColors:s,samplesCacheIDs:n,samplesCacheLookup:a,samplesCacheSize:o,samplesCacheRotation:l,maxSampleCount:u,dataPattern:d}=this._c({appendCount:1}),f=this.wc(),y=t.step!==void 0?t.step:1,m=t.x!==void 0?t.x:f?f.x+y:0,p=t.y!==void 0?t.y:f?f.y+y:0;if(d&&this.dc&&this.Cc&&this.kc&&!this.Tc(d,m,p)&&!this.fc)return this.Fc(this.Cc,this.kc,new this.xc([m]),new this.xc([p]),t.lookupValue!==void 0?new Float32Array([t.lookupValue]):void 0,t.color!==void 0?this.Ic((t.color,[t.color])):void 0,t.id!==void 0?new Uint32Array([t.id]):void 0,t.size!==void 0?new Float32Array([t.size]):void 0,t.rotation!==void 0?new Float32Array([t.rotation]):void 0,d),this;if(e[this.ac]=m,i[this.ac]=p,t.lookupValue!==void 0&&a&&(a[this.ac]=t.lookupValue),t.color!==void 0&&s){const x=this.Ic((t.color,[t.color]));x!==void 0&&(s[this.ac]=x[0])}return t.id!==void 0&&n&&(n[this.ac]=t.id),t.size!==void 0&&o&&(o[this.ac]=t.size),t.rotation!==void 0&&l&&(l[this.ac]=t.rotation),this.Pc(this.ac,this.ac),this.ac+=1,this.ac>u-1&&(this.ac=0,this.cc=!0),this.lc=Math.min(this.lc+1,u),this.uc+=1,this}appendSamples(t){const{lookupValues:e,colors:i,ids:s,sizes:n,rotations:a,start:o,step:l}=t;let u=t.offset,d=t.count;const f=t.xValues||t.yValues;if(!f)return this;const y=f.length;if(u=u!==void 0?u:0,d=d!==void 0?d:y-u,d<=0)return this;const m=t.offsetLookupValues!==void 0?t.offsetLookupValues:u,p=t.offsetColors!==void 0?t.offsetColors:u,x=t.offsetIds!==void 0?t.offsetIds:u,b=t.offsetSizes!==void 0?t.offsetSizes:u,v=t.offsetRotations!==void 0?t.offsetRotations:u,[R,E]=this.Dc(d,t.xValues,"x",o,l,u),[V,F]=this.Dc(d,t.yValues,"y",o,l,u),L=this.Ic(i),{samplesCacheX:z,samplesCacheY:B,samplesCacheLookup:A,samplesCacheColors:T,samplesCacheIDs:w,samplesCacheSize:C,samplesCacheRotation:k,maxSampleCount:_,dataPattern:X,incomingDataReplacedCache:N}=this._c({appendCount:d,...E===0&&F===0&&u===0&&m===0&&p===0&&x===0&&b===0&&v===0?{incomingDataX:R,incomingDataY:V,incomingDataLookup:e,incomingDataIDs:s,incomingDataColors:L,incomingDataSize:n,incomingDataRotation:a}:{}});if(!N&&X&&this.dc&&this.Cc&&this.kc){const W=R[E],I=V[F];if(!this.Tc(X,W,I)&&!this.fc)return this.Fc(this.Cc,this.kc,Hs(R,E,E+d),Hs(V,F,F+d),Hs(e,m,m+d),Hs(L,p,p+d),Hs(s,x,x+d),Hs(n,b,b+d),Hs(a,v,v+d),X),this}const U=_-this.ac,O=Math.min(d,U);if(O>0&&(N||(gi(z,R,E,O,this.ac),gi(B,V,F,O,this.ac),e&&A&&gi(A,e,m,O,this.ac),s&&w&&gi(w,s,x,O,this.ac),L&&T&&gi(T,L,p,O,this.ac),n&&C&&gi(C,n,b,O,this.ac),a&&k&&gi(k,a,v,O,this.ac)),this.Pc(this.ac,this.ac+O-1),this.ac+=O,this.ac>_-1&&(this.ac=0,this.cc=!0)),this.lc=Math.min(this.lc+O,_),this.uc+=O,this.Bc(),d-O>0){const W={xValues:R?Hs(R,E+O,void 0):void 0,yValues:V?Hs(V,F+O,void 0):void 0,lookupValues:e?Hs(e,m+O,void 0):void 0,ids:s?Hs(s,x+O,void 0):void 0,colors:L?Hs(L,p+O,void 0):void 0,sizes:n?Hs(n,b+O,void 0):void 0,rotations:a?Hs(a,v+O,void 0):void 0};this.appendSamples(W)}return this}setSamples(t){return this.clear().appendSamples(t)}fill(t){const e=this.Cc||this.kc;if(!e)return this;const i=e.length;if(t.x!==void 0&&(this.Cc=this.Cc||new this.xc(i),this.Cc.fill(t.x)),t.y!==void 0&&(this.kc=this.kc||new this.xc(i),this.kc.fill(t.y)),t.lookupValue!==void 0&&(this.Lc=this.Lc||new Float32Array(i),this.Lc.fill(t.lookupValue)),t.color!==void 0){const s=this.Ic([t.color]);s&&(this.Rc=this.Rc||new Uint32Array(i),this.Rc.fill(s[0]))}return t.size!==void 0&&(this.Ec=this.Ec||new Float32Array(i),this.Ec.fill(t.size)),t.rotation!==void 0&&(this.zc=this.zc||new Float32Array(i),this.zc.fill(t.rotation)),this.D.emit("cleared"),this}alterSamples(t,e){const{xValues:i,yValues:s,lookupValues:n,colors:a,ids:o,sizes:l,rotations:u}=e;let d=e.offset,f=e.count;const y=i||s||n||a||o||l||u;if(!y)return this;const m=y.length;if(d=d!==void 0?d:0,f=f!==void 0?f:m-d,f<=0)return this;const p=e.offsetLookupValues!==void 0?e.offsetLookupValues:d,x=e.offsetColors!==void 0?e.offsetColors:d,b=e.offsetIds!==void 0?e.offsetIds:d,v=e.offsetSizes!==void 0?e.offsetSizes:d,R=e.offsetRotations!==void 0?e.offsetRotations:d,E=this.Ic(a),V=this.uc-1,F=this.Vc!==void 0?Math.max(this.uc-this.Vc,0):0,L=t+f-1,z=Math.max(t,F),B=Math.min(L,V),A=B-z+1;if(this.uc>0&&A>0){const{samplesCacheX:w,samplesCacheY:C,samplesCacheColors:k,samplesCacheIDs:_,samplesCacheLookup:X,samplesCacheSize:N,samplesCacheRotation:U}=this._c({appendCount:0}),O=w.length;if(this.Vc!==void 0&&this.cc&&this.uc%this.Vc!=0){const W=this.uc-this.uc%this.Vc,I=this.uc-1,H=this.uc-this.lc,q=W-1,Q=Math.max(z,H),J=Math.min(B,q)-Q+1;if(J>0){const ut=Q-t,dt=Ri(Q,this.uc,O,this.ac);i&&gi(w,i,d+ut,J,dt),s&&gi(C,s,d+ut,J,dt),n&&X&&gi(X,n,p+ut,J,dt),o&&_&&gi(_,o,b+ut,J,dt),E&&k&&gi(k,E,x+ut,J,dt),l&&N&&gi(N,l,v+ut,J,dt),u&&U&&gi(U,u,R+ut,J,dt)}const ot=Math.max(z,W),ht=Math.min(B,I)-ot+1;if(ht>0){const ut=ot-t,dt=Ri(ot,this.uc,O,this.ac);i&&gi(w,i,d+ut,ht,dt),s&&gi(C,s,d+ut,ht,dt),n&&X&&gi(X,n,p+ut,ht,dt),o&&_&&gi(_,o,b+ut,ht,dt),E&&k&&gi(k,E,x+ut,ht,dt),l&&N&&gi(N,l,v+ut,ht,dt),u&&U&&gi(U,u,R+ut,ht,dt)}}else{const W=z-F;i&&gi(w,i,d,A,W),s&&gi(C,s,d,A,W),n&&X&&gi(X,n,p,A,W),o&&_&&gi(_,o,b,A,W),E&&k&&gi(k,E,x,A,W),l&&N&&gi(N,l,v,A,W),u&&U&&gi(U,u,R,A,W)}this.D.emit("cleared")}const T=t+f-1-V;if(T>0){const w=B+1-t;this.appendSamples({xValues:i,yValues:s,lookupValues:n,colors:a,ids:o,sizes:l,rotations:u,offset:d+w,offsetLookupValues:p+w,offsetColors:x+w,offsetIds:b+w,offsetSizes:v+w,offsetRotations:R+w,count:T})}return this}alterSamplesByID(t,e){if(!this.Sc)throw new Error("LightningChart JS attempted to use alterSamplesByID on DataSetXY that doesn't have IDs enabled.");const i=t.length,s=this.Oc;if(i<=0||!s)return this;const n=((typeof e.color=="object"?this.Ic([e.color]):typeof e.color=="number"?[e.color]:[])||[])[0],a=Array.isArray(e.xValues)?new this.xc(e.xValues):e.xValues,o=Array.isArray(e.yValues)?new this.xc(e.yValues):e.yValues,l=Array.isArray(e.yValues)?new Float32Array(e.yValues):e.yValues,u=this.Ic(e.colors),d=Array.isArray(e.sizes)?new Float32Array(e.sizes):e.sizes,f=Array.isArray(e.rotations)?new Float32Array(e.rotations):e.rotations,y=s.length,m=this.lc,p=this.uc-1,x=Math.max(p-m+1,0);for(let b=0;b<i;b+=1){const v=t[b],R=bo(v,x,p,V=>s[Ri(V,this.uc,y,this.ac)]),E=Ri(R,this.uc,y,this.ac);s[E]===v&&(e.x!==void 0&&this.Cc&&(this.Cc[E]=e.x),e.y!==void 0&&this.kc&&(this.kc[E]=e.y),e.lookupValue!==void 0&&this.Lc&&(this.Lc[E]=e.lookupValue),e.size!==void 0&&this.Ec&&(this.Ec[E]=e.size),e.rotation!==void 0&&this.zc&&(this.zc[E]=e.rotation),n!==void 0&&this.Rc&&(this.Rc[E]=n),a&&this.Cc&&(this.Cc[E]=a[b]),o&&this.kc&&(this.kc[E]=o[b]),l&&this.Lc&&(this.Lc[E]=l[b]),u&&this.Rc&&(this.Rc[E]=u[b]),d&&this.Ec&&(this.Ec[E]=d[b]),f&&this.zc&&(this.zc[E]=f[b]))}return this.D.emit("cleared"),this}clear(){return this.ac=0,this.lc=0,this.uc=0,this.cc=!1,this.D.emit("cleared"),this}getSampleCount(){return this.lc}getNextSampleIndex(){return this.uc}setMaxSampleCount(t){if(typeof t=="object"){this.Nc&&this.offMaxSampleCountExceeded(this.Nc);const e=t.max;this.Nc=this.onMaxSampleCountExceeded((i,s,n,a)=>{if(e!==void 0&&n>=e)return;let o=2*n;e!==void 0&&(o=Math.min(o,e)),this.setMaxSampleCount(o)}),this.Vc===void 0&&this.setMaxSampleCount(1e5)}else if(typeof t=="number"){const e=t;if(this.Vc!==void 0&&this.Vc>e)throw new Error("LightningChart JS | DataSetXY.setMaxSampleCount attempted to shrink data set. This is currently not supported.");if(!this.Cc||!this.kc)return this.Vc=e,this;if(e===this.Vc)return this;if(this.cc&&this.ac!==0)throw new Error("LightningChart JS | DataSetXY.setMaxSampleCount attempted to expand data set that has exceeded its max sample count. This is currently not supported.");this.Vc=e,this.lc<e?(this.ac=this.lc,this.cc=!1):(this.ac=0,this.cc=!0);const i=new this.xc(this.Vc);i.set(this.Cc);const s=new this.xc(this.Vc);if(s.set(this.kc),this.Cc=i,this.kc=s,this.mc){const n=new Float32Array(this.Vc);this.Lc&&n.set(this.Lc),this.Lc=n}if(this.Sc){const n=new Uint32Array(this.Vc);this.Oc&&n.set(this.Oc),this.Oc=n}if(this.yc){const n=new Uint32Array(this.Vc);this.Rc&&n.set(this.Rc),this.Rc=n}if(this.vc){const n=new Float32Array(this.Vc);this.Ec&&n.set(this.Ec),this.Ec=n}if(this.bc){const n=new Float32Array(this.Vc);this.zc&&n.set(this.zc),this.zc=n}}return this}getMaxSampleCount(){return this.Vc}readBack(t){if(!this.Cc||!this.kc)return{xValues:new this.xc,yValues:new this.xc};const e=this.Cc.length;let i=[];if(t!=null&&t.onlyInRange){const m=this.Gc();if(!m)throw new Error("LightningChart JS - attempted to use `DataSetXY.readBack` with `visibleOnly: true` without a data pattern.\nThis operation is only supported for patterned data (e.g. 'ProgressiveX')");const p=Math.min(t.onlyInRange.start,t.onlyInRange.end),x=Math.max(t.onlyInRange.start,t.onlyInRange.end),b=mS(p,x,this.Cc,this.uc,this.lc,this.ac,m,0);if(!b)return{xValues:new this.xc,yValues:new this.xc};i=b.dataRanges}else if(this.Vc!==void 0&&this.cc&&this.uc%this.Vc!=0){const m=this.ac,p=e-m,x=this.ac-1;i.push({offset:m,count:p}),i.push({offset:0,count:x+1})}else i.push({offset:0,count:this.lc});const s=i.reduce((m,p)=>m+p.count,0),n=new this.xc(s),a=new this.xc(s),o=this.yc?new Uint32Array(s):void 0,l=this.mc?new Float32Array(s):void 0,u=this.Sc?new Uint32Array(s):void 0,d=this.vc?new Float32Array(s):void 0,f=this.bc?new Float32Array(s):void 0;let y=0;for(const m of i)n.set(this.Cc.subarray(m.offset,m.offset+m.count),y),a.set(this.kc.subarray(m.offset,m.offset+m.count),y),this.yc&&o&&this.Rc&&o.set(this.Rc.subarray(m.offset,m.offset+m.count),y),this.mc&&l&&this.Lc&&l.set(this.Lc.subarray(m.offset,m.offset+m.count),y),this.Sc&&u&&this.Oc&&u.set(this.Oc.subarray(m.offset,m.offset+m.count),y),this.vc&&d&&this.Ec&&d.set(this.Ec.subarray(m.offset,m.offset+m.count),y),this.bc&&f&&this.zc&&f.set(this.zc.subarray(m.offset,m.offset+m.count),y),y+=m.count;return{xValues:n,yValues:a,lookupValues:l,colors:o,ids:u,sizes:d,rotations:f}}onMaxSampleCountExceeded(t){return this.D.on("maxSampleCountExceeded",t)}offMaxSampleCountExceeded(t){return this.D.off(t)}Dc(t,e,i,s,n,a){if(e===void 0){const o=this.wc();n=n!==void 0?n:1,s=s!==void 0?s:o?o[i]+n:0;const l=new this.xc(t);for(let u=0;u<t;u+=1)l[u]=s+u*n;return[l,0]}return[e,a]}Ic(t){if(!t||t.length===0)return;const e=t[0];if(Mc(e)){const i=t.length,s=new Uint32Array(i);for(let n=0;n<i;n+=1){const a=t[n],o=255*a.a<<24|255*a.b<<16|255*a.g<<8|255*a.r;s[n]=o}return s}return t}Wc(){return{min:0,max:this.Vc!==void 0&&this.cc?this.Vc-1:this.lc-1}}Uc(t){t=Math.min(t,this.lc),this.uc-=t,this.lc-=t,this.ac-=t,this.ac<0&&this.Vc!==void 0&&(this.ac+=this.Vc)}Fc(t,e,i,s,n,a,o,l,u,d){var f;const y=i.length,m=i[0],p=i[y-1],x=s[y-1];if(this.Tc(d,p,x)){const b=((f=this.wc())===null||f===void 0?void 0:f.x)||0;let v=0;for(let E=0;E<y;E+=1)if(i[E]>b){v=E;break}const R={xValues:i,yValues:s,lookupValues:n,colors:a,ids:o,sizes:l,rotations:u,offset:v};this.fc=!0,this.appendSamples(R),this.fc=!1}else{const b=t.length,v=this.lc,R=this.uc-1,E=Math.max(R-v+1,0),V=bo(m,E,R,ht=>t[Ri(ht,this.uc,b,this.ac)]),F=V-1,L=V+1,z=t[Ri(V,this.uc,b,this.ac)],B=L<=this.uc-1?t[Ri(L,this.uc,b,this.ac)]:void 0,A=B!==void 0&&B<m?L+1:z<m?V+1:F+1,T=R-A+1,w=new this.xc(T),C=new this.xc(T),k=this.mc?new Float32Array(T):void 0,_=this.yc?new Uint32Array(T):void 0,X=this.Sc?new Uint32Array(T):void 0,N=this.vc?new Float32Array(T):void 0,U=this.bc?new Float32Array(T):void 0;let O=0;for(let ht=A;ht<=R;ht+=1){const ut=Ri(ht,this.uc,b,this.ac);w[O]=t[ut],C[O]=e[ut],k&&this.Lc&&(k[O]=this.Lc[ut]),_&&this.Rc&&(_[O]=this.Rc[ut]),X&&this.Oc&&(X[O]=this.Oc[ut]),N&&this.Ec&&(N[O]=this.Ec[ut]),U&&this.zc&&(U[O]=this.zc[ut]),O+=1}this.Uc(T);const W=new this.xc(y+T);W.set(i),W.set(w,y);const I=new this.xc(y+T);let H,q,Q,J,ot;I.set(s),I.set(C,y),n&&k&&(H=new Float32Array(y+T),H.set(n),H.set(k,y)),a&&_&&(q=new Uint32Array(y+T),q.set(a),q.set(_,y)),o&&X&&(Q=new Uint32Array(y+T),Q.set(o),Q.set(X,y)),l&&N&&(J=new Float32Array(y+T),J.set(l),J.set(N,y)),u&&U&&(ot=new Float32Array(y+T),ot.set(u),ot.set(U,y)),this.fc=!0,this.appendSamples({xValues:W,yValues:I,lookupValues:H,colors:q,ids:Q,sizes:J,rotations:ot}),this.fc=!1,this.D.emit("cleared")}}Gc(){return this.Bc()}Bc(){let t;if(this.gc&&"userSpecified"in this.gc)t=this.gc.userSpecified;else if(this.gc&&"autoDetectResult"in this.gc)t=this.gc.autoDetectResult;else if(this.Cc&&this.kc&&this.uc>0){const e=this.Vc!==void 0&&this.cc?this.ac:0,i=this.lc-1,s=this.Vc!==void 0&&this.cc?0:void 0,n=this.Vc!==void 0&&this.cc?this.ac-1:void 0,[a,o]=s!==void 0&&n!==void 0&&Math.abs(n-s)>Math.abs(i-e)?[s,n]:[e,i];if(1+o-a>=2){let l,u,d=this.Cc[a],f=this.kc[a];for(let y=a+1;y<=o;y+=1){if(l!==!1){const m=this.Cc[y],p=Math.sign(m-d);p!==0&&l&&l.direction!==p?l=!1:p===0||l||(l={direction:p}),d=m}if(u!==!1){const m=this.kc[y],p=Math.sign(m-f);p!==0&&u&&u.direction!==p?u=!1:p===0||u||(u={direction:p}),f=m}}t=l&&l.direction>0?Rf.ProgressiveX:l&&l.direction<0?Rf.RegressiveX:u&&u.direction>0?Rf.ProgressiveY:u&&u.direction<0?Rf.RegressiveY:void 0,this.gc={autoDetectResult:t},t&&nt.console.warn(`LightningChart JS DataSetXY warning | Data pattern was detected automatically (DataPatterns.${t}).
Automatic detection is only intended for kick-starting application development, not for production use.
Add { dataPattern: '${t}'} } to your application when creating series or DataSetXY to get clear this warning.`)}}if(t&&t!=="ProgressiveX")throw new Error("LightningChart JS New XY rework beta features do not yet support other data patterns than ProgressiveX. This will be introduced in near future.");return t}Tc(t,e,i){const s=this.wc();return!s||(t==="ProgressiveX"?e>s.x:t==="RegressiveX"?e<s.x:t==="ProgressiveY"?i>s.y:t!=="RegressiveY"||i<s.y)}_c(t){if(t.incomingDataX&&t.incomingDataY&&this.lc===0&&!this.Cc&&!this.kc&&(this.Vc===void 0||this.Vc===t.appendCount)&&this.Mc)return this.Cc=$o(t.incomingDataX,this.xc)||new this.xc,this.kc=$o(t.incomingDataY,this.xc)||new this.xc,this.Lc=this.mc?$o(t.incomingDataLookup,Float32Array):void 0,this.Oc=this.Sc?$o(t.incomingDataIDs,Uint32Array):void 0,this.Rc=this.yc?$o(t.incomingDataColors,Uint32Array):void 0,this.Ec=this.vc?$o(t.incomingDataSize,Float32Array):void 0,this.zc=this.bc?$o(t.incomingDataRotation,Float32Array):void 0,{dataPattern:this.Bc(),samplesCacheX:this.Cc,samplesCacheY:this.kc,samplesCacheLookup:this.Lc,samplesCacheIDs:this.Oc,samplesCacheColors:this.Rc,samplesCacheSize:this.Ec,samplesCacheRotation:this.zc,maxSampleCount:t.appendCount,incomingDataReplacedCache:!0};if(this.Vc===void 0){const e=this.lc+t.appendCount;if(!this.Cc||!this.kc)return this.Cc=new this.xc(e),this.kc=new this.xc(e),this.Lc=this.mc?new Float32Array(e):void 0,this.Oc=this.Sc?new Uint32Array(e):void 0,this.Rc=this.yc?new Uint32Array(e):void 0,this.Ec=this.vc?new Float32Array(e):void 0,this.zc=this.bc?new Float32Array(e):void 0,{dataPattern:this.Bc(),samplesCacheX:this.Cc,samplesCacheY:this.kc,samplesCacheLookup:this.Lc,samplesCacheIDs:this.Oc,samplesCacheColors:this.Rc,samplesCacheSize:this.Ec,samplesCacheRotation:this.zc,maxSampleCount:e};const i=this.Cc.length;if(i<e){if(!this.Ac.warningDisplayed){const a=nt.performance.now();if(this.Ac.expandEvents=this.Ac.expandEvents.filter(o=>a-o.timestamp<5e3),e>1e3&&this.Ac.expandEvents.push({timestamp:a}),this.Ac.expandEvents.length>5)return nt.console.warn(`LightningChart JS warning - DataSetXY append operation was performed more than 5 times in 5 seconds.
Automatic max sample count control was enabled.
For streaming applications, DataSetXY.setMaxSampleCount() or Series.setMaxSampleCount() should be configured explicitly to get rid of this warning.`),this.Ac.warningDisplayed=!0,this.setMaxSampleCount({mode:"auto"}),this._c(t)}const s=new this.xc(e);s.set(this.Cc),this.Cc=s;const n=new this.xc(e);if(n.set(this.kc),this.kc=n,this.mc){const a=new Float32Array(e);this.Lc&&a.set(this.Lc),this.Lc=a}if(this.Sc){const a=new Uint32Array(e);this.Oc&&a.set(this.Oc),this.Oc=a}if(this.yc){const a=new Uint32Array(e);this.Rc&&a.set(this.Rc),this.Rc=a}if(this.vc){const a=new Float32Array(e);this.Ec&&a.set(this.Ec),this.Ec=a}if(this.bc){const a=new Float32Array(e);this.zc&&a.set(this.zc),this.zc=a}return this.ac=this.lc,{dataPattern:this.Bc(),samplesCacheX:this.Cc,samplesCacheY:this.kc,samplesCacheLookup:this.Lc,samplesCacheIDs:this.Oc,samplesCacheColors:this.Rc,samplesCacheSize:this.Ec,samplesCacheRotation:this.zc,maxSampleCount:e}}if(i>4*e){const s=new this.xc(e);s.set(this.Cc.subarray(0,this.lc)),this.Cc=s;const n=new this.xc(e);if(n.set(this.kc.subarray(0,this.lc)),this.kc=n,this.mc){const a=new Float32Array(e);this.Lc&&a.set(this.Lc.subarray(0,this.lc)),this.Lc=a}if(this.Sc){const a=new Uint32Array(e);this.Oc&&a.set(this.Oc.subarray(0,this.lc)),this.Oc=a}if(this.yc){const a=new Uint32Array(e);this.Rc&&a.set(this.Rc.subarray(0,this.lc)),this.Rc=a}if(this.vc){const a=new Float32Array(e);this.Ec&&a.set(this.Ec.subarray(0,this.lc)),this.Ec=a}if(this.bc){const a=new Float32Array(e);this.zc&&a.set(this.zc.subarray(0,this.lc)),this.zc=a}return{dataPattern:this.Bc(),samplesCacheX:this.Cc,samplesCacheY:this.kc,samplesCacheLookup:this.Lc,samplesCacheIDs:this.Oc,samplesCacheColors:this.Rc,samplesCacheSize:this.Ec,samplesCacheRotation:this.zc,maxSampleCount:e}}return{dataPattern:this.Bc(),samplesCacheX:this.Cc,samplesCacheY:this.kc,samplesCacheLookup:this.Lc,samplesCacheIDs:this.Oc,samplesCacheColors:this.Rc,samplesCacheSize:this.Ec,samplesCacheRotation:this.zc,maxSampleCount:i}}return t.appendCount+this.lc>this.Vc&&this.D.emit("maxSampleCountExceeded",this,this.lc,this.Vc,this.lc+t.appendCount),this.Cc=this.Cc||new this.xc(this.Vc),this.kc=this.kc||new this.xc(this.Vc),this.Lc=this.Lc||(this.mc?new Float32Array(this.Vc):void 0),this.Oc=this.Oc||(this.Sc?new Uint32Array(this.Vc):void 0),this.Rc=this.Rc||(this.yc?new Uint32Array(this.Vc):void 0),this.Ec=this.Ec||(this.vc?new Float32Array(this.Vc):void 0),this.zc=this.zc||(this.bc?new Float32Array(this.Vc):void 0),{dataPattern:this.Bc(),samplesCacheX:this.Cc,samplesCacheY:this.kc,samplesCacheLookup:this.Lc,samplesCacheIDs:this.Oc,samplesCacheColors:this.Rc,samplesCacheSize:this.Ec,samplesCacheRotation:this.zc,maxSampleCount:this.Vc}}Yc(){if(!this.Cc||!this.kc||this.lc===0)return;if(this.Vc===void 0)return this.uc>0?{x:this.Cc[0],y:this.kc[0]}:void 0;if(!this.cc)return{x:this.Cc[0],y:this.kc[0]};let t=this.ac-this.lc;return t<0&&(t+=this.Vc),{x:this.Cc[t],y:this.kc[t]}}wc(){if(!this.Cc||!this.kc||this.lc===0)return;if(this.Vc===void 0){const e=this.lc-1;return e>=0?{x:this.Cc[e],y:this.kc[e]}:void 0}let t=this.ac-1;return t<0&&(t+=this.Vc),{x:this.Cc[t],y:this.kc[t]}}Hc(t,e,i,s){const n=this.Bc(),a=this.Cc,o=this.kc;if(!a||!o)return;const l=v=>({x:a[v],y:o[v],lookupValue:this.mc&&this.Lc?this.Lc[v]:void 0,id:this.Sc&&this.Oc?this.Oc[v]:void 0,color:this.yc&&this.Rc?this.Rc[v]:void 0,size:this.vc&&this.Ec?this.Ec[v]:void 0,rotation:this.bc&&this.zc?this.zc[v]:void 0}),u=a.length,d=this.lc,f=this.uc-1,y=Math.max(f-d+1,0);if(n){const v=this.Yc(),R=this.wc();if(!(v&&R&&this.Cc&&this.kc))return;const E=n==="ProgressiveX"||n==="RegressiveX"?"x":"y",V=E==="x"?"y":"x",F=E==="x"?this.Cc:this.kc,L=V==="x"?this.Cc:this.kc,z=t[E],B=Math.min(v[E],R[E]),A=Math.max(v[E],R[E]);if(z<B||z>A)return;const T=bo(z,y,f,Q=>F[Ri(Q,this.uc,u,this.ac)]),w=Ri(T,this.uc,u,this.ac);if(!e)return l(w);const C=T-1,k=T+1,_=z>=F[w]&&(n==="ProgressiveX"||n==="ProgressiveY")?k<=f?Ri(k,this.uc,u,this.ac):void 0:C>=y?Ri(C,this.uc,u,this.ac):void 0;if(_===void 0)return;const X=F[w],N=L[w],U=F[_],O=L[_],W=Math.min(X,U),I=W===X?N:O,H=Math.max(X,U),q=vo(I,H===X?N:O,(z-W)/(H-W));return n==="ProgressiveX"||n==="RegressiveX"?{x:z,y:q}:{x:q,y:z}}let m,p=Number.MAX_VALUE;const x=gt(t,i,s),b=this.lc-1;for(let v=0;v<=b;v+=1){const R=a[v],E=o[v];if(!Number.isNaN(R)&&!Number.isNaN(E)){const V=El(R,i.x,s.x),F=El(E,i.y,s.y),L=(V-x.x)**2+(F-x.y)**2;L<p&&(p=L,m=v)}}return m===void 0?void 0:l(m)}Pc(t,e){this.D.emit("changed",t,e)}Ut(t){return this.D.off(t)}$c(t){return this.D.on("changed",t)}Xc(t){return this.D.on("cleared",t)}}const Ri=(r,t,e,i)=>r%e,mS=(r,t,e,i,s,n,a,o)=>{if(i===0||s===0)return;const l=e.length,u=i-1,d=Math.max(u-s+1,0),f=bo(r,d,u,v=>e[Ri(v,i,l)]),y=bo(t,d,u,v=>e[Ri(v,i,l)]),m=Math.max(f-o,d),p=Math.min(y+o,u),x=Ri(m,i,l),b=Ri(p,i,l);return x>b?{iFirstSample:m,iLastSample:p,iFirstSampleDataArray:x,iLastSampleDataArray:b,dataRanges:[{offset:x,count:l-x},{offset:0,count:b+1}]}:{iFirstSample:m,iLastSample:p,iFirstSampleDataArray:x,iLastSampleDataArray:b,dataRanges:[{offset:x,count:b-x+1}]}},bo=(r,t,e,i)=>{const s=e;for(;t!==e;){const a=Math.ceil((t+e)/2);r<i(a)?e=a-1:t=a}const n=Math.abs(r-i(t));return t<s&&Math.abs(r-i(t+1))<n?t+1:t},gi=(r,t,e,i,s)=>{const n=t.length;if(Array.isArray(t))for(let a=0;a<i;a+=1)r[s+a]=t[e+a];else r.set(n===i?t:t.subarray(e,e+i),s)},$o=(r,t)=>r===void 0?void 0:Array.isArray(r)?new t(r):r instanceof t?r:new t(r),Hs=(r,t,e)=>{if(r!==void 0)return Array.isArray(r)?r.slice(t,e):r.subarray(t,e)};class ap extends fS{constructor(t,e,i,s,n){super(t,e,i,s,n),this.la="label",this.Na=this.ks.Pr(this.renderingScale).Rh(this.la).Ce(Vt).Fr(ea).Ir(ea),this.setMargin(5),this.xu(this.Na)}Fu(){return[this.Na]}setFillStyle(t){return this.Na.Ce(t),this.ks.Ss(),this}getFillStyle(){return this.Na.Eh()}Te(){const t=this.getPosition(Y(0,0),Re.Content),e=gt(t,this.scale,this.renderingScale);return this.Na.Fe(e),this}Ps(){this.Na.Ps();const t=this.la.length===0?Y(0,0):this.Na.jc();return this.setContentSize(t),super.Ps()}setText(t){return this.la=t,this.Na.Rh(this.la),this.ks.Ss(),this}getText(){return this.la}setFont(t){return this.Na.Oh(t),this.ks.Ss(),this}getFont(){return this.Na.Vh()}setTextRotation(t){return this.Na.Nh(t),this.ks.Ss(),this}getTextRotation(){return this.Na.Gh()}}const Wc={...vn,...dS,uiElement:ap};class rr extends eE{constructor(t,e,i,s,n){super(t,e,i,s,n),this.Zc=!1,this.fitTo=this.Bu.bind(this),this.setSize=this.fitTo,this.Na=this.ks.ic(e).Ce(Vt).we(vt),this.xu(this.Na)}Fu(){return[this.Na]}setFillStyle(t){return this.Na.Ce(t),this.ks.Ss(),this}getFillStyle(){return this.Na.Eh()}setStrokeStyle(t){return this.Na.we(t),this.ks.Ss(),this}getStrokeStyle(){return this.Na.ao()}Te(){const t=Ze([this.getPosition(Y(-1,-1),Re.Content),this.getPosition(Y(1,1),Re.Content)].map(e=>gt(e,this.scale,this.renderingScale)));return this.Zc?this.Na.pl([{x:(t.min.x+t.max.x)/2,y:t.min.y},{x:t.min.x,y:(t.min.y+t.max.y)/2},{x:(t.min.x+t.max.x)/2,y:t.max.y},{x:t.max.x,y:(t.min.y+t.max.y)/2}]):this.Na.pl([t.min,{x:t.min.x,y:t.max.y},t.max,{x:t.max.x,y:t.min.y}]),this}Bu(t){return this.setContentSize(t),this.ks.Ss(),this}Lu(){return 0}Ru(){return 0}zu(){return 0}Eu(){return 0}}class op extends GD{constructor(t,e,i,s,n){super(t,e,i,Dr.Simple,s,n),this.td=Wt(Y(0,0)),this.sd=Wt(10),this.ed=Wt(void 0),this.Uu=Wt(qt.Right),this.sc()}Fu(){return[this.Na]}setFillStyle(t){return this.Na.Ce(t),this.ks.Ss(),this}getFillStyle(){return this.Na.Eh()}setStrokeStyle(t){return this.Na.we(t),this.ks.Ss(),this}getStrokeStyle(){return this.Na.ao()}setDirection(t){return this.Uu.S(t),this.ks.Ss(),this}getDirection(){return this.Uu.M()}setPointerLength(t){return this.sd.S(t),this.ks.Ss(),this}getPointerLength(){return this.sd.M()}setPointerAngle(t){return this.ed.S(t),this.ks.Ss(),this}getPointerAngle(){let t=this.ed.M();if(t===void 0){const e=this.hd();if(e===0)return 0;t=e!==0?180*Math.atan(2*this.getPointerLength()/e)/Math.PI:0}return Math.min(Math.max(t,1),89)}Bu(t){return this.td.S(t),this.ks.Ss(),this}rd(){const t=this.getPointerAngle();return t===0?0:2*this.getPointerLength()/Math.tan(t*Math.PI/180)}nd(){return cb(this.Uu.M())?this.td.M().x:this.td.M().y}hd(){return cb(this.Uu.M())?this.td.M().y:this.td.M().x}Lu(){switch(this.Uu.M()){case qt.Right:return 0;case qt.Left:return this.getPointerLength();case qt.Up:case qt.Down:return Math.max(0,this.rd()-this.hd());default:return 0}}Ru(){switch(this.Uu.M()){case qt.Right:return this.getPointerLength();case qt.Left:return 0;case qt.Up:case qt.Down:return Math.max(0,this.rd()-this.hd());default:return 0}}zu(){switch(this.Uu.M()){case qt.Right:case qt.Left:return Math.max(0,this.rd()-this.hd());case qt.Up:return this.getPointerLength();case qt.Down:default:return 0}}Eu(){switch(this.Uu.M()){case qt.Right:case qt.Left:return Math.max(0,this.rd()-this.hd());case qt.Up:return 0;case qt.Down:return this.getPointerLength();default:return 0}}hc(){const t=TR(this.Uu.M()),e=D0(Y(0,0),t),i=this.getPointerLength(),s=this.rd(),n=this.nd(),a=this.hd();if(!(i!==0&&s!==0||n!==0&&a!==0))return[];const o=Y(0,0),l=_t(_t(o,Ht(t,-i)),Ht(e,s/2)),u=_t(l,Ht(e,(a-s)/2)),d=_t(u,Ht(t,-n)),f=_t(_t(o,Ht(t,-i)),Ht(e,-s/2)),y=_t(f,Ht(e,-(a-s)/2)),m=_t(y,Ht(t,-n));let p;return p=n===0||a===0?[o,l,f]:i===0||s===0?[u,d,m,y]:Ai(a,s)?[o,l,d,m,f]:[o,l,u,d,m,y,f],p}}class I0 extends fS{constructor(t,e,i,s,n){super(t,e,i,s,n),this.fitTo=this.Bu.bind(this),this.setSize=this.fitTo,this.od=new yS,this.Na=this.ks.dd(e).Re(vt).ud(Vt).ld(Vt).ad(this.od),this.xu(this.Na)}Fu(){return[this.Na]}setShape(t){return this.Na.fd(t),this}getShape(){return this.Na.Ad()}setRotation(t){return this.Na.gd(t),this}getRotation(){return this.Na.md()}setFillStyle(t){return this.Na.ld(t),this.ks.Ss(),this}getFillStyle(){return this.Na.yd()}Te(){const t=gt(this.getPosition({x:0,y:0},Re.Content),this.scale,this.renderingScale),e=Math.max(this.size.x,this.size.y);if(this.od.clear(),e>0){const i=this.Na.Ad(),s=this.Na.yd(),n=ch(i)&&i,a=Jl(s)&&s;if(n){const o=e/n.oi().y;this.Na.pd(o)}else if(a){const o=a.source;if(o instanceof Image){const l=e/o.height;this.Na.pd(l)}}else this.Na.pd(e);this.od.appendSample(t)}return this}Bu(t){return this.setContentSize(t),this.ks.Ss(),this}Lu(){return 0}Ru(){return 0}zu(){return 0}Eu(){return 0}}const ZD={...vn,...dS,uiElement:I0};class Fl extends OD{setSize(t){return this.setContentSize(t),this.ks.Ss(),this}}class rE extends BD{constructor(){super(...arguments),this.Sd=[],this.vd=0,this.bd=t=>{const e=this.Sd.indexOf(t);e>=0&&this.Sd.splice(e,1)}}getMembers(){return this.Sd}getMemberCount(){return this.Sd.length}setMinimumSize(t){return this.xd=t,this.ks.Ss(),this}getMinimumSize(){return this.xd}addElement(t,e=-1){const i=t.Zu(this.ks,this.renderingScale,this.scale,this.bd,this.qi,!1);return i.setMouseInteractions(this.getMouseInteractions()),e>=0?this.Sd.splice(e,0,i):this.Sd.push(i),i.setVisible(this.getVisible()),this.xu(i),this.$i&&(kn(0,()=>{}),i.dispose()),i}dispose(){return super.dispose(),this.Sd.slice().forEach(ah),this}setVisible(t){return super.setVisible(t),this.Sd.forEach(e=>e.setVisible(t)),this}setMouseInteractions(t){super.setMouseInteractions(t);for(let e=0;e<this.Sd.length;e+=1)this.Sd[e].setMouseInteractions(t);return this}getMouseInteractions(){if(super.getMouseInteractions())return!0;for(let t=0;t<this.Sd.length;t+=1)if(this.Sd[t].getMouseInteractions())return!0;return!1}setHighlight(t){super.setHighlight(t);for(let i=0;i<this.Sd.length;i+=1){const s=this.Sd[i];"getHighlight"in(e=s)&&"setHighlight"in e&&s.setHighlight(t)}var e;return this}}class Vl extends rE{Te(){super.Te();const t=this.getPosition(Y(-1,1),Re.Content),e=this.Sd.reduce((s,n)=>s+ +(n instanceof Fl),0),i=e>0?(this.size.x-this.vd)/e:0;return this.Sd.reduce((s,n)=>n instanceof Fl?this.scale.mi({x:s,y:t.y},{x:i+n.getSize().x,y:0}).x:n.setOrigin(Y(-1,1)).setPosition(Y(s,t.y)).Te().getPosition(Y(1,0)).x,t.x),this}Ps(){for(let i=0;i<this.Sd.length;i+=1){const s=this.Sd[i];s instanceof zl&&s.setMinimumSize(0),s.Ps()}const t=this.Sd.reduce(this.Md.bind(this),Kn(0,0));this.vd=t.x;const e=this.xd===void 0?t:Y(Math.max(t.x,this.xd),t.y);this.setContentSize(e);for(let i=0;i<this.Sd.length;i+=1){const s=this.Sd[i];s instanceof zl&&s.setMinimumSize(e.y).Ps()}return super.Ps()}Md(t,e){const i=e.getSize();return t.x+=i.x,t.y=Math.max(t.y,i.y),t}addGap(t=0,e=-1){return this.addElement(nE,e).setSize(Y(0,t))}}class zl extends rE{Te(){super.Te();const t=this.getPosition(Y(-1,1),Re.Content),e=this.Sd.reduce((s,n)=>s+ +(n instanceof Fl),0),i=e>0?(this.size.y-this.vd)/e:0;return this.Sd.reduce((s,n)=>n instanceof Fl?this.scale.mi({x:t.x,y:s},{x:0,y:-(i+n.getSize().y)}).y:n.setOrigin(Y(-1,1)).setPosition(Y(t.x,s)).Te().getPosition(Y(0,-1)).y,t.y),this}Ps(){for(let i=0;i<this.Sd.length;i+=1){const s=this.Sd[i];s instanceof Vl&&s.setMinimumSize(0),s.Ps()}const t=this.Sd.reduce(this.Md.bind(this),Kn(0,0));this.vd=t.y;const e=this.xd===void 0?t:Y(t.x,Math.max(t.y,this.xd));this.setContentSize(e);for(let i=0;i<this.Sd.length;i+=1){const s=this.Sd[i];s instanceof Vl&&s.setMinimumSize(e.x).Ps()}return super.Ps()}Md(t,e){const i=e.getSize();return t.y+=i.y,t.x=Math.max(t.x,i.x),t}addGap(t=0,e=-1){return this.addElement(nE,e).setSize(Y(0,t))}}const nE={...vn,...dS,uiElement:Fl};class QD extends zl{constructor(){super(...arguments),this.Sd=[]}addRow(){return this.addElement($c,void 0)}getRow(t,e=!1){return e&&this.Sd.length<=t?(this.addRow(),this.getRow(t,!0)):this.Sd[t]}}const aE={...vn,...vh,...UD},dh={...aE,uiElement:zl,background:rr},$c={...aE,uiElement:Vl,background:rr},U0={setTextLabel:null,setText(r){return this.setTextLabel.setText(r),this},getText(){return this.setTextLabel.getText()}},oE=(r,t)=>{const e={},i=`stylable${r}s`;return e[i]=t,e[`set${r}FillStyle`]=function(s){return this[i].forEach(n=>n.setFillStyle(s)),this},e[`get${r}FillStyle`]=function(){return this[i][0].getFillStyle()},e[`set${r}Font`]=function(s){return this[i].forEach(n=>n.setFont(s)),this},e[`get${r}Font`]=function(){return this[i][0].getFont()},e[`set${r}Rotation`]=function(s){return this[i].forEach(n=>n.setTextRotation(s)),this},e[`get${r}Rotation`]=function(){return this[i][0].getTextRotation()},e},qc=oE("Text",[]),hE={button:void 0,isLocked:!1,setOn(r){const t=this.button.getOn()!==r;return this.button.setOn(r),t&&this.D.emit("switch",r),this},getOn(){return this.button.getOn()},setLocked(r){return this.isLocked=r,this},getLocked(){return this.isLocked},onSwitch(r){return this.D.on("switch",t=>r(this,t))},offSwitch(r){return this.D.off(r,"switch")},setButtonOffFillStyle(r){return this.button.setOffFillStyle(r),this},getButtonOffFillStyle(){return this.button.getOffFillStyle()},setButtonOnFillStyle(r){return this.button.setOnFillStyle(r),this},getButtonOnFillStyle(){return this.button.getOnFillStyle()},setButtonSize(r){return this.button.setSize(r),this},getButtonSize(){return this.button.getSize()},setButtonShape(r){return this.button.setButtonShape(r),this},getButtonShape(){return this.button.getButtonShape()}},lE={textFillStyleHidden:void 0,setTextFillStyleHidden(r){return this.textFillStyleHidden=typeof r=="function"?r(this.textFillStyleHidden):r,this},getTextFillStyleHidden(){return this.textFillStyleHidden}},KD={pointable:void 0,setDirection(r){return this.pointable.setDirection(r),this},getDirection(){return this.pointable.getDirection()},setPointerLength(r){return this.pointable.setPointerLength(r),this},getPointerLength(){return this.pointable.getPointerLength()}},pS={...vn,...vh,background:rr,Zu(r,t,e,i,s,n){const a=new Vl(r,t,e,this.background,i,s),o=a.addElement(Wc,void 0),l=Object.assign(a,U0,{setTextLabel:o},qc,{stylableTexts:[o]});return Pa(l,s,n),this.applyStylers(l,s)}}.addStyler(Xc),tF={...vn,...vh,background:op,Zu(r,t,e,i,s,n){const a=new Vl(r,t,e,this.background,i,s),o=a.addElement(Wc,void 0),l=a.getBackground(),u=Object.assign(a,U0,{setTextLabel:o},qc,{stylableTexts:[o]},KD,{pointable:l},{setTickLabelPadding(d){return this.getDirection()===qt.Up?(this.setPadding({top:d}),o.setMargin({top:0})):this.getDirection()===qt.Down?(this.setPadding({bottom:d}),o.setMargin({bottom:0})):this.getDirection()===qt.Right?(this.setPadding({right:d}),o.setMargin({right:0})):this.getDirection()===qt.Left&&(this.setPadding({left:d}),o.setMargin({left:0})),this},getTickLabelPadding(){return this.getDirection()===qt.Up?this.getPadding().top:this.getDirection()===qt.Down?this.getPadding().bottom:this.getDirection()===qt.Right?this.getPadding().right:this.getPadding().left}});return u.Qu="other",u.setPointerLength(s.xAxisNumericTicks.majorTickStyle.getTickLength()).setTickLabelPadding(s.xAxisNumericTicks.majorTickStyle.getTickPadding()).setTextFont(s.uiTextFont).setTextFillStyle(s.uiTextFillStyle).setBackground(d=>d.setFillStyle(s.uiBackgroundFillStyle).setStrokeStyle(s.uiBackgroundStrokeStyle)),Pa(u,s,n),this.applyStylers(u,s)}};class eF extends $l{constructor(t,e,i,s,n,a){super(t,e,i,n,a),this.Ds=!1,this.D=new Ii,this._d=Vt,this.wd=Vt,this.getOn=()=>this.Ds,this.Cd=this.xu(new I0(this.ks,this.renderingScale,this.scale,re,a).setShape(s)),this.wd=a.uiButtonFillStyleHidden||a.uiButtonFillStyle}Fu(){return[...this.Cd.Fu()]}onHighlight(t){return this.D.on("highlight",t)}offHighlight(t){return this.D.off(t)}setOn(t){return this.Ds=t,this.Cd.setFillStyle(t?this._d:this.wd),this.ks.Ss(),this}setOffFillStyle(t){return this.wd=typeof t=="function"?t(this.wd):t,this.Ds||this.Cd.setFillStyle(this.wd),this}getOffFillStyle(){return this.wd}setSize(t){return this.Cd.fitTo(typeof t=="number"?Y(t,t):t),this}getSize(){return this.Cd.getSize()}setOnFillStyle(t){return this._d=typeof t=="function"?t(this._d):t,this.Ds&&this.Cd.setFillStyle(this._d),this}getOnFillStyle(){return this._d}setButtonShape(t){return this.Cd.setShape(t),this.ks.Ss(),this}getButtonShape(){return this.Cd.getShape()}Te(){return super.Te(),this.Cd.setVisible(this.getVisible()).setPosition(this.getPosition(Y(0,0),Re.Content)).Te(),this}Ps(){const t=this.Cd.Ps().getSize();return this.setContentSize(t),super.Ps()}dispose(){return super.dispose(),this.Cd.dispose(),this}setMouseInteractions(t){return this.Cd.setMouseInteractions(t),this}getMouseInteractions(){return this.Cd.getMouseInteractions()}setHighlight(t){const e=xo(t);return this.Cd.setHighlight(e),this.D.emit("highlight",this,t),this.ks.Ss(),this}getHighlight(){return this.Cd.getHighlight()}}const uE={...vn,uiElement:eF,buttonShape:qe.Circle,setButtonShape(r){return{...this,buttonShape:r}},Zu(r,t,e,i,s,n){const a=this.applyStylers(new this.uiElement(r,t,e,this.buttonShape,i,s),s);return Pa(a,s,n),a}},cE={...vn,...vh,background:rr,buttonBuilder:uE,setButtonShape(r){return{...this,buttonBuilder:this.buttonBuilder.setButtonShape(r)}},Zu(r,t,e,i,s,n){const a=new Vl(r,t,e,this.background,i,s),o=a.addElement(dh);o.addGap();const l=o.addElement(this.buttonBuilder);o.addGap();const u=a.addElement(dh);u.addGap();const d=u.addElement(Wc);u.addGap(),a.addGap();const f=Object.assign(a,U0,{setTextLabel:d},qc,{stylableTexts:[d]},hE,{button:l},lE);let y;return f.onMouseClick((m,p)=>{f.getLocked()||f.setOn(!f.getOn())}),f.onMouseEnter(()=>f.setHighlight(!0)),f.onMouseLeave(()=>f.setHighlight(!1)),f.setMouseStyle(ae.Point),f.setTextFillStyleHidden(s.uiTextFillStyleHidden||s.uiTextFillStyle),f.onSwitch((m,p)=>{p?y&&f.setTextFillStyle(y):(y=f.getTextFillStyle(),f.setTextFillStyle(f.getTextFillStyleHidden()))}),f.setPadding({left:5}),Pa(f,s,n),this.applyStylers(f,s)}}.addStyler(Xc).addStyler(tE);class dE extends $l{constructor(t,e,i,s,n,a){super(t,e,i,s,n),this.kd=[],this.Td=2,this.Fd="",this.Id=(o,l)=>o.label!==void 0?o.label:l.percentageValues?`${(100*o.value).toFixed(0)}%`:IR(o.value,l.min,l.max),this.Pd=0,this.Dd=0,this.Bd=!1,this.ks=t,this.Ld=a,this.Rd=this.xu(t.ke(e).we(vt)),this.Ed=this.xu(t.Pr(e).Ce(n.uiTextFillStyle).Oh(n.uiTextFont).setMouseInteractions(!1)),a==="vertical"?(this.zd=140,this.Vd=25):(this.zd=160,this.Vd=15)}Fu(){return[this.Rd,this.Ed]}Od(t){this.Nd=t;const e=zb(t,this.Ld==="vertical"?0:90,this.Bd);return this.Rd.Ce(e),this.ks.Ss(),this}Gd(){return this.Nd}Wd(t){return this.zd=t,this.ks.Ss(),this}Ud(){return this.zd}Yd(t){return this.Vd=t,this.ks.Ss(),this}Hd(){return this.Vd}$d(t){return this.Fd=t,this.ks.Ss(),this}Xd(){return this.Fd}jd(t){return this.Id=t,this.ks.Ss(),this}setLUTDisplayProportionalSteps(t){if(this.Bd=t,this.Nd){const e=zb(this.Nd,this.Ld==="vertical"?0:90,this.Bd);this.Rd.Ce(e)}return this.ks.Ss(),this}getLUTDisplayProportionalSteps(){return this.Bd}setFillStyle(t){return this.Ed.Ce(t),this.ks.Ss(),this}getFillStyle(){return this.Ed.Eh()}setFont(t){return this.Ed.Oh(t),this.ks.Ss(),this}getFont(){return this.Ed.Vh()}setTextRotation(t){return this.Dd=t,this.Ed.Nh(t),this.ks.Ss(),this}getTextRotation(){return this.Ed.Gh()}Te(){var t,e,i,s;if(super.Te(),this.$i||!this.getVisible())return this;const n=this.Nd;if(n){const a=this.renderingScale.Wi(),o=n.min,l=n.max;if(this.Ld==="vertical"){const u=this.getPosition({x:-1,y:-1},Re.Content),d=_t(u,{x:this.Rd.oi().x+this.Td*a.x,y:0}),f={x:d.x,y:d.y+(this.Fd.length>0?this.Pd*a.y+this.Ed.oi().y:0)+.5*(((t=this.kd[0])===null||t===void 0?void 0:t.oi().y)||0)},y={x:f.x,y:this.getPosition({x:-1,y:1},Re.Content).y-.5*(((e=this.kd[this.kd.length-1])===null||e===void 0?void 0:e.oi().y)||0)};this.Rd.Fe({x:u.x,y:f.y}),this.Ed.Ea({x:-1,y:-1}).Fe(d),n.getSteps().forEach((m,p)=>{const x=za(f,y,this.Bd?n.getInterpolation()===!0?(m.value-o)/(l-o):.9*(m.value-o)/(l-o):n.getInterpolation()===!0?p/(n.getSteps().length-1):p/n.getSteps().length);this.kd[p].Ea({x:-1,y:0}).Fe(x)})}else{const u=this.getPosition({x:-1,y:-1},Re.Content),d=this.getPosition({x:1,y:1},Re.Content),f=this.kd.reduce((b,v)=>Math.max(b,v.oi().y),0),y=_t(u,{x:.5*(((i=this.kd[0])===null||i===void 0?void 0:i.oi().x)||0),y:f}),m={x:d.x,y:y.y},p={x:m.x-(.5*(((s=this.kd[this.kd.length-1])===null||s===void 0?void 0:s.oi().x)||0)+(this.Fd.length>0?this.Pd*a.x+this.Ed.oi().x:0)),y:y.y},x={x:y.x,y:y.y+this.Td*a.y};this.Rd.Fe(x),this.Ed.Ea({x:1,y:1}).Fe(m),n.getSteps().forEach((b,v)=>{const R=za(y,p,this.Bd?n.getInterpolation()===!0?(b.value-o)/(l-o):.9*(b.value-o)/(l-o):n.getInterpolation()===!0?v/(n.getSteps().length-1):v/n.getSteps().length);this.kd[v].Ea({x:0,y:1}).Fe(R)})}}return this}Ps(){if(this.Nd&&this.getVisible()){const t=this.Nd.getSteps();for(let e=this.kd.length;e<t.length;e+=1)this.kd.push(this.xu(this.ks.Pr(this.renderingScale).setMouseInteractions(!1)));for(let e=0;e<t.length;e+=1)this.kd[e].Ce(this.Ed.Eh()).Oh(this.Ed.Vh()).Rh(this.Id(t[e],this.Nd)).Nh(this.Dd);for(let e=t.length;e<this.kd.length;e+=1)this.kd[e].dispose();if(this.kd.length=t.length,this.Ed.Rh(this.Fd),this.Ld==="vertical"){const e=this.Vd,i=this.zd;this.Rd.q({x:e*this.renderingScale.x.getPixelSize(),y:i*this.renderingScale.y.getPixelSize()});const s=e+Math.max(this.kd.reduce((a,o)=>Math.max(a,o.Ps().jc().x),0),this.Ed.Ps().jc().x),n=(this.Fd.length>0?this.Pd+this.Ed.Ps().jc().y:0)+i+.5*this.kd[0].Ps().jc().y+.5*this.kd[this.kd.length-1].Ps().jc().y;this.setContentSize({x:s,y:n})}else{const e=this.zd,i=this.Vd;this.Rd.q({x:e*this.renderingScale.x.getPixelSize(),y:i*this.renderingScale.y.getPixelSize()});const s=Math.max(this.Fd.length>0?this.Pd+this.Ed.Ps().jc().x:0,.5*this.kd[this.kd.length-1].Ps().jc().x),n=e+.5*this.kd[0].Ps().jc().x+s,a=i+this.Td+this.kd.reduce((o,l)=>Math.max(o,l.Ps().jc().y),0);this.setContentSize({x:n,y:a})}}else this.kd.forEach(t=>t.dispose()),this.kd.length=0,this.Ed.setVisible(!1),this.Rd.setVisible(!1),this.setContentSize({x:0,y:0});return super.Ps()}dispose(){return super.dispose(),this.Rd.dispose(),this.kd.forEach(ah),this.Ed.dispose(),this}setMouseInteractions(t){return this.Rd.setMouseInteractions(t),this}getMouseInteractions(){return this.Rd.getMouseInteractions()}}const fE={lutElement:{},setLUT(r){return this.lutElement.Od(r),this},getLUT(){return this.lutElement.Gd()},setLUTLength(r){return this.lutElement.Wd(r),this},getLUTLength(){return this.lutElement.Ud()},setLUTThickness(r){return this.lutElement.Yd(r),this},getLUTThickness(){return this.lutElement.Hd()},setLookUpUnit(r){return this.lutElement.$d(r),this},getLookUpUnit(){return this.lutElement.Xd()},setLUTStepValueFormatter(r){return this.lutElement.jd(r),this},setLUTDisplayProportionalSteps(r){return this.lutElement.setLUTDisplayProportionalSteps(r),this},getLUTDisplayProportionalSteps(){return this.lutElement.getLUTDisplayProportionalSteps()}};({...vn,...vh,background:rr,alignment:"horizontal",setAlignment(r){return{...this,alignment:r}},Zu(r,t,e,i,s,n){const a=new zl(r,t,e,this.background,i,s),o=a.addElement({Zu:()=>new dE(r,t,e,re,s,this.alignment)}),l=Object.assign(a,qc,{stylableTexts:[o]},fE,{lutElement:o});return Pa(l,s,n),this.applyStylers(l,s)}}).addStyler(Xc);const zb=(r,t,e)=>{const i=r.getSteps(),s=r.min,n=r.max-s;if(r.getInterpolation()===!0)return new xs({angle:t,stops:i.map((o,l)=>({offset:e?(o.value-s)/n:l/(i.length-1),color:o.color||r.color}))});const a=[];for(let o=0;o<i.length;o+=1){const l=i[o];a.push({offset:e?.9*(l.value-s)/n:o/i.length,color:l.color||r.color});const u=o<i.length-1?i[o+1]:void 0;a.push({offset:e?u?.9*(u.value-s)/n:1:u?(o+1)/i.length:1,color:l.color||r.color})}return new xs({angle:t,stops:a})},iF={...vn,...vh,background:rr,buttonBuilder:uE,setButtonShape(r){return{...this,buttonBuilder:this.buttonBuilder.setButtonShape(r)}},alignment:"horizontal",setAlignment(r){return{...this,alignment:r}},Zu(r,t,e,i,s){const n=new zl(r,t,e,this.background,i,s),a=n.addElement($c),o=a.addElement(dh);o.addGap();const l=o.addElement(this.buttonBuilder);o.addGap();const u=a.addElement(dh);u.addGap();const d=u.addElement(Wc);u.addGap();const f=n.addElement({Zu:()=>new dE(r,t,e,re,s,this.alignment)});this.alignment==="vertical"&&f.setMargin({left:s.uiButtonSize+6});const y=Object.assign(n,U0,{setTextLabel:d},qc,{stylableTexts:[d,f]},oE("LUTText",[f]),hE,{button:l},fE,{lutElement:f},lE);let m;return y.onMouseClick(()=>{y.getLocked()||y.setOn(!y.getOn())}),y.onMouseEnter(()=>y.setHighlight(!0)),y.onMouseLeave(()=>y.setHighlight(!1)),y.setMouseStyle(ae.Point),y.setTextFillStyleHidden(s.uiTextFillStyleHidden||s.uiTextFillStyle),y.onSwitch((p,x)=>{x?m&&y.setTextFillStyle(m):(m=y.getTextFillStyle(),y.setTextFillStyle(y.getTextFillStyleHidden()))}),y.setPadding({left:5}),this.applyStylers(y,s)}}.addStyler(Xc).addStyler(tE),sF={alignment:null,title:null,entryStylers:null,legendBoxDisposed:null,entries:[],add(r,t){const e=!t||typeof t!="object"||t.toggleVisibilityOnClick===void 0||t.toggleVisibilityOnClick,i=t==null?void 0:t.matchStyleExactly,s=t&&typeof t=="object"&&t.builder!==void 0?t.builder:void 0;return this.legendBoxDisposed()||(r instanceof Qr?this.addChart(r,e,s,i):"attach"in r?this.addAttachable(r,e,s,i):r&&this.addDashboard(r,e,s,i)),this},addAttachable(r,t,e,i){const s=r.Gd&&r.Gd(),n=r.Cs&&r.Cs(),a=i!==void 0&&i;let o=e;if(!o){let u=s?iF.setAlignment(this.alignment):cE;n!==void 0&&(u=u.setButtonShape(n)),o=u}const l=this.addElement(o);if(s&&"setLUT"in l){l.setLUT(s.lut);const u=s.lut.getUnits(),d=s.lookUpProperty,f=u.length>0?u:d==="x"?"x":d==="y"?"y":d==="z"?"z":"";l.setLookUpUnit(f)}return this.entryStylers.forEach(u=>u(l)),this.entries.push({entry:l,component:r}),r.attach(l,t,a),t||l.setLocked(!0),this},addChart(r,t,e,i){return r.Zd().forEach(s=>this.addAttachable(s,t,e,i)),this},addDashboard(r,t,e,i){return r.getCells().filter(s=>s.panel instanceof Qr).forEach(s=>this.addChart(s.panel,t,e,i)),this},setTitle(r){return this.title.setText(r),this},getTitle(){return this.title.getText()},setTitleFillStyle(r){return this.title.setTextFillStyle(r),this},getTitleFillStyle(){return this.title.getTextFillStyle()},setTitleFont(r){return this.title.setTextFont(r),this},getTitleFont(){return this.title.getTextFont()},setTitleRotation(r){return this.title.setTextRotation(r),this},getTitleRotation(){return this.title.getTextRotation()},setEntries(r){return this.entries.forEach(t=>r(t.entry,t.component)),this}},rF={alignment:"vertical",layoutBuilder:dh,setAlignment(r){return{...this,alignment:r,layoutBuilder:r==="horizontal"?$c:dh}},getAlignment(){return this.alignment},titleBuilder:pS,styleTitle(r){return{...this,titleBuilder:this.titleBuilder.addStyler(r)}},entryStylers:[],styleEntries(r){return{...this,entryStylers:[...this.entryStylers,r]}}},O0={...vn,...vh,...rF,background:rr,Zu(r,t,e,i,s,n){const a=this.layoutBuilder.setBackground(this.background).Zu(r,t,e,i,s,!1);let o=Object.assign(a,sF,{alignment:this.alignment,entryStylers:this.entryStylers,legendBoxDisposed:()=>a.$i});o.entries=[];const l=o.addElement(this.alignment==="horizontal"?dh:$c),u=l.addElement(this.titleBuilder).setText("Legend").setTextFillStyle(s.legendTitleFillStyle).setTextFont(s.legendTitleFont);return l.addGap(),o=Object.assign(o,{title:u}),this.alignment==="horizontal"&&u.setMargin({right:6}),Pa(o,s,n),this.applyStylers(o,s)}}.addStyler((r,t)=>r.setPadding(5));class nF extends $l{constructor(t,e,i,s,n){super(t,e,i,s,n),this.Qd=10,this.Jd=qt.Up,this.Kd=0,this.Qu="major",this.la=this.xu(t.Pr(this.renderingScale).Fr(ea).Ir(ea)),this.Le=this.xu(t.Ee(this.renderingScale))}Fu(){return[this.la]}Te(){if(super.Te(),this.$i)return this;const t=gt(this.getPosition(),this.scale,this.renderingScale),e=this.renderingScale.mi(t,{x:this.Jd===qt.Right?-this.Qd:this.Jd===qt.Left?this.Qd:0,y:this.Jd===qt.Up?-this.Qd:this.Jd===qt.Down?this.Qd:0}),i=this.renderingScale.mi(e,{x:this.Jd===qt.Right?-this.Kd:this.Jd===qt.Left?this.Kd:0,y:this.Jd===qt.Up?-this.Kd:this.Jd===qt.Down?this.Kd:0});return this.Le.Ve(t).ze(e),this.la.Fe(i).Ea(this.Jd===qt.Up?{x:0,y:1}:this.Jd===qt.Down?{x:0,y:-1}:this.Jd===qt.Right?{x:1,y:0}:{x:-1,y:0}),this}Ps(){const t=this.Le.uu().getThickness();return this.size=this.Jd===qt.Left||this.Jd===qt.Right?{x:this.Qd+this.Kd+this.la.Ps().jc().x,y:t}:{y:this.Qd+this.Kd+this.la.Ps().jc().y,x:t},super.Ps()}dispose(){return super.dispose(),this.la.dispose(),this.Le.dispose(),this}setVisible(t){return super.setVisible(t),this.la.setVisible(t),this.Le.setVisible(t),this}setMouseInteractions(t){return this.la.setMouseInteractions(t),this.Le.setMouseInteractions(t),this}getMouseInteractions(){return this.la.getMouseInteractions()}getText(){return this.la.Bh()}setTextFillStyle(t){return this.la.Ce(t),this.ks.Ss(),this}getTextFillStyle(){return this.la.Eh()}setTextFont(t){return this.la.Oh(t),this}setTextRotation(t){return this.la.Nh(t),this}getTextRotation(){return this.la.Gh()}getTextFont(){return this.la.Vh()}setText(t){return this.la.Rh(t),this.ks.Ss(),this}setDirection(t){return this.Jd=t,this.ks.Ss(),this}getDirection(){return this.Jd}setPointerLength(t){return this.Qd=t,this.ks.Ss(),this}getPointerLength(){return this.Qd}setTickLabelPadding(t){return this.Kd=t,this.ks.Ss(),this}getTickLabelPadding(){return this.Kd}setTickStyle(t){return this.Le.Re(t),this.ks.Ss(),this}getTickStyle(){return this.Le.uu()}}const gE={...vn,Zu(r,t,e,i,s,n){const a=new nF(r,t,e,i,s);return Pa(a,s,n),this.applyStylers(a,s)}}.addStyler(Xc),aF=gE.addStyler((r,t)=>(r.Qu="major",r.setPointerLength(t.xAxisNumericTicks.majorTickStyle.tickLength).setTickLabelPadding(t.xAxisNumericTicks.majorTickStyle.tickPadding).setTickStyle(t.xAxisNumericTicks.majorTickStyle.tickStyle).setTextFont(t.xAxisNumericTicks.majorTickStyle.labelFont).setTextFillStyle(t.xAxisNumericTicks.majorTickStyle.labelFillStyle)));gE.addStyler((r,t)=>(r.Qu="minor",r.setPointerLength(t.xAxisNumericTicks.minorTickStyle.tickLength).setTickLabelPadding(t.xAxisNumericTicks.minorTickStyle.tickPadding).setTickStyle(t.xAxisNumericTicks.minorTickStyle.tickStyle).setTextFont(t.xAxisNumericTicks.minorTickStyle.labelFont).setTextFillStyle(t.xAxisNumericTicks.minorTickStyle.labelFillStyle)));cE.addStyler(r=>r.onSwitch((t,e)=>e===!0?setTimeout(()=>r.setOn(!1),300):void 0));O0.setAlignment("horizontal");const oF=O0.setAlignment("vertical"),fh={PointableTextBox:tF,AxisTickMajor:aF},hF={VerticalLegendBox:oF},ss=(r,t)=>{if(oS(r)){const e=t.Po(r);return{x:e.engineX,y:e.engineY}}return r},hp=r=>{let t=!1,e={type:"linear"};if(r&&(r.opposite!==void 0&&(t=r.opposite),r.type&&r.type==="linear-highPrecision"&&(e={type:"linear-highPrecision"}),r.type&&r.type==="logarithmic")){let i=10;if(r.base){if(r.base==="E"||r.base==="e"||r.base==="natural")i="e";else if(typeof r.base=="number")i=r.base;else if(typeof r.base=="string")try{i=Number(r.base)}catch{console.warn(`Unidentified logarithmic base "${r.base}"`)}}e={base:i,type:"logarithmic"}}return{opposite:t,type:e}},Tc=(r,t,e,i=1)=>Zt(r+.1*i*(t-r)+.5*i*e.getPixelSize()*Math.sign(t-r),r,t),s0=(r,t,e,i=1)=>{const s=e.ct(r),n=e.ct(t);return Zt(e.ut(s+.1*i*(n-s)+.5*i*Math.sign(n-s)),r,t)},Ct={qd:0,tf:1,if:2,sf:3,ef:4,hf:5,rf:6,nf:7,af:8,lf:9,uf:10,cf:11,df:12,ff:13,Af:14,gf:15,mf:16,yf:17,pf:18,Sf:19,vf:20,bf:21,xf:22,Mf:23};class lF extends Hc{constructor(t,e,i,s,n,a){super(t,e,i,s,a),this._f=n}}class r0 extends lh{constructor(t,e,i,s,n,a,o,l,u,d,f,y,m,p,x,b){var v,R,E;super(d,u,o,p,x,{numeric:u.getWidth({x:p.xAxisNumericTicks,y:p.yAxisNumericTicks}),datetime:u.getWidth({x:p.xAxisDateTimeTicks,y:p.yAxisDateTimeTicks}),time:u.getWidth({x:p.xAxisTimeTicks,y:p.yAxisTimeTicks})},b),this.wf=new Map,this.Cf=void 0,this.kf=0,this.Tf=[],this.Ff=[],this.Je=Zr.fitting,this.If=!0,this.Pf=8,this.Df=void 0,this.Bf=void 0,this.Lf=20,this.Rf=1,this.Ef=!0,this.zf=!0,this.Vf=!0,this.Of=!0,this.Nf=!0,this.Gf=!0,this.Wf=!0,this.Uf=!0,this.Yf=!0,this.Hf=!0,this.$f=this.wh.defaultDragMouseStyle,this.Xf=this.wh.defaultDragMouseStyle,this.jf=this.wh.defaultDragMouseStyle,this.Zf=this.wh.defaultDragMouseStyle,this.Qf=this.wh.defaultDragMouseStyle,this.D=new Ii,this.Jf=[],this.Kf=z=>{const B=this.Ff.indexOf(z);B>=0&&this.Ff.splice(B,1)},this.qf=z=>(this.Ff.indexOf(z)<0&&this.Ff.push(z),this.Kf),this.Et=(z,B)=>this.D.emit("axisAreaTouch",this,B),this.tA=wR(this.Jf),this.onAxisInteractionAreaMouseClick=z=>this.D.on("axisAreaMouseClick",z),this.onAxisInteractionAreaMouseDoubleClick=z=>this.D.on("axisAreaDoubleClick",z),this.onAxisInteractionAreaMouseDown=z=>this.D.on("axisAreaMouseDown",z),this.onAxisInteractionAreaMouseUp=z=>this.D.on("axisAreaMouseUp",z),this.onAxisInteractionAreaMouseEnter=z=>this.D.on("axisAreaMouseEnter",z),this.onAxisInteractionAreaMouseLeave=z=>this.D.on("axisAreaMouseLeave",z),this.onAxisInteractionAreaMouseMove=z=>this.D.on("axisAreaMouseMove",z),this.onAxisInteractionAreaMouseWheel=z=>this.D.on("axisAreaMouseWheel",z),this.onAxisInteractionAreaMouseDragStart=z=>this.D.on("axisAreaMouseDragStart",z),this.onAxisInteractionAreaMouseDrag=z=>this.D.on("axisAreaMouseDrag",z),this.onAxisInteractionAreaMouseDragStop=z=>this.D.on("axisAreaMouseDragStop",z),this.onAxisInteractionAreaTouchStart=z=>this.D.on("axisAreaTouchStart",z),this.onAxisInteractionAreaTouch=z=>this.D.on("axisAreaTouch",z),this.onAxisInteractionAreaTouchStop=z=>this.D.on("axisAreaTouchEnd",z),this.offAxisInteractionAreaMouseClick=z=>this.D.off(z,"axisAreaMouseClick"),this.offAxisInteractionAreaMouseDoubleClick=z=>this.D.off(z,"axisAreaDoubleClick"),this.offAxisInteractionAreaMouseDown=z=>this.D.off(z,"axisAreaMouseDown"),this.offAxisInteractionAreaMouseUp=z=>this.D.off(z,"axisAreaMouseUp"),this.offAxisInteractionAreaMouseEnter=z=>this.D.off(z,"axisAreaMouseEnter"),this.offAxisInteractionAreaMouseLeave=z=>this.D.off(z,"axisAreaMouseLeave"),this.offAxisInteractionAreaMouseMove=z=>this.D.off(z,"axisAreaMouseMove"),this.offAxisInteractionAreaMouseWheel=z=>this.D.off(z,"axisAreaMouseWheel"),this.offAxisInteractionAreaMouseDragStart=z=>this.D.off(z,"axisAreaMouseDragStart"),this.offAxisInteractionAreaMouseDrag=z=>this.D.off(z,"axisAreaMouseDrag"),this.offAxisInteractionAreaMouseDragStop=z=>this.D.off(z,"axisAreaMouseDragStop"),this.offAxisInteractionAreaTouchStart=z=>this.D.off(z,"axisAreaTouchStart"),this.offAxisInteractionAreaTouch=z=>this.D.off(z,"axisAreaTouch"),this.offAxisInteractionAreaTouchStop=z=>this.D.off(z,"axisAreaTouchEnd"),this.zd={relative:1},this.iA=0,this.sA=0,this.eA=(z,B)=>B.getAllocatesAxisSpace()?Math.max(z,B.update().qu()):z,this.hA=z=>{const B=this.Tf.indexOf(z);B!==-1&&this.Tf.splice(B,1)},this.rA=(z,B)=>{this.D.emit("axisAreaDoubleClick",this,B),this.Of&&(this.setStopped(!1),At(B))},this.nA=z=>{this.D.emit("axisAreaMouseEnter",this),(this.zf||this.Ef||this.Vf||this.Of)&&this.oA(z)},this.aA=z=>{this.lA(z),this.D.emit("axisAreaMouseLeave",this)},this.uA=(z,B,A)=>{var T,w;this.D.emit("axisAreaMouseDragStart",this,B,A);const C=Fe((T=this.chart.cA.Yn)===null||T===void 0?void 0:T.axisXYZoomMouseButton,0),k=Fe((w=this.chart.cA.Yn)===null||w===void 0?void 0:w.axisXYPanMouseButton,2),_=Y(B.clientX,B.clientY);A===k&&this.zf?(this.dA(z),At(B)):A===C&&this.Ef&&(this.fA(z,_),At(B))},this.AA=(z,B,A,T,w)=>{var C,k;this.D.emit("axisAreaMouseDrag",this,B,A,T,w);const _=Fe((C=this.chart.cA.Yn)===null||C===void 0?void 0:C.axisXYZoomMouseButton,0),X=Fe((k=this.chart.cA.Yn)===null||k===void 0?void 0:k.axisXYPanMouseButton,2),N=Y(B.clientX,B.clientY);A===X&&this.zf?(this.gA(z,w),At(B)):A===_&&this.Ef&&(this.mA(z,T,N,w),At(B))},this.yA=(z,B,A,T)=>{var w,C;this.D.emit("axisAreaMouseDragStop",this,B,A,T);const k=Fe((w=this.chart.cA.Yn)===null||w===void 0?void 0:w.axisXYZoomMouseButton,0),_=Fe((C=this.chart.cA.Yn)===null||C===void 0?void 0:C.axisXYPanMouseButton,2),X=Y(B.clientX,B.clientY);A===_&&this.zf?(this.pA(z),At(B)):A===k&&this.Ef&&(this.SA(z,T,X),At(B)),z.getIsUnderMouse()&&(this.zf||this.Ef||this.Vf||this.Of)&&this.oA(z)},this.vA=(z,B)=>{if(this.D.emit("axisAreaMouseWheel",this,B),this.Vf){this.setStopped(!0);const A=this.wh.getWidth(this.bA.us.Pe(B.clientX,B.clientY)),T=this.dt.ut(A);this.zoom(T,So(B)),At(B)}},this.xA=(z,B)=>this.D.emit("axisAreaMouseClick",this,B),this.MA=(z,B)=>this.D.emit("axisAreaMouseDown",this,B),this._A=(z,B)=>this.D.emit("axisAreaMouseUp",this,B),this.wA=(z,B)=>this.D.emit("axisAreaMouseMove",this,B),this.CA=(z,B,A)=>{this.D.emit("axisAreaTouchStart",this,A),this.Ef&&(this.oA(z),this.fA(z,B),At(A))},this.kA=(z,B,A,T,w)=>{this.D.emit("axisAreaTouch",this,w),this.Ef&&(this.mA(z,B,A,T),At(w))},this.TA=(z,B,A,T)=>{this.D.emit("axisAreaTouchEnd",this,T),this.Ef&&(this.SA(z,B,A),this.lA(z),At(T))},this.FA=(z,B,A,T)=>{(this.zf||this.Vf)&&(this.oA(z),this.dA(z),At(T))},this.IA=(z,B,A,T,w,C)=>{if(this.zf){const k=Y((T.x+w.x)/2,(T.y+w.y)/2);this.gA(z,k),At(C)}if(this.Vf){const k=this.bA.us.Pe(B.x,B.y),_=this.bA.us.Pe(A.x,A.y),X=Math.abs(this.wh.getWidth(Se(k,T))-this.wh.getWidth(Se(_,w)))-Math.abs(this.wh.getWidth(k)-this.wh.getWidth(_)),N=this.dt.mi(this.Ih,-X),U=this.dt.mi(this.Ph,X);this.Qh(N,U,!0),At(C)}},this.PA=(z,B,A,T)=>{(this.zf||this.Vf)&&(this.pA(z),this.lA(z),At(T))},this.DA=(z,B)=>{(this.Nf||this.Gf)&&this.BA(z)},this.LA=(z,B)=>{this.RA(z)},this.EA=(z,B,A)=>{const T=Y(B.clientX,B.clientY);this.Nf&&this.zA(z,T)},this.VA=(z,B,A,T,w)=>{const C=Y(B.clientX,B.clientY);this.Nf&&this.OA(z,C,T,w)},this.NA=(z,B,A,T,w)=>{const C=Y(B.clientX,B.clientY);this.Nf&&this.GA(z,C,T,w)},this.WA=(z,B,A,T)=>{const w=Y(B.clientX,B.clientY);(this.Nf||this.Gf)&&this.UA(z,w,T),(this.Nf||this.Gf)&&this.BA(z)},this.YA=(z,B)=>{this.Gf&&(this.setStopped(!0),this.zoom(this.Ih,So(B)),At(B))},this.HA=(z,B)=>{this.Gf&&(this.setStopped(!0),this.zoom(this.Ph,So(B)),At(B))},this.$A=(z,B,A)=>{this.Nf&&(this.BA(z),this.zA(z,B),At(A))},this.XA=(z,B,A,T,w)=>{this.Nf&&(this.OA(z,B,A,T),At(w))},this.jA=(z,B,A,T,w)=>{this.Nf&&(this.GA(z,B,A,T),At(w))},this.ZA=(z,B,A,T)=>{this.Nf&&(this.UA(z,B,A),this.RA(z),At(T))},this.QA=t,this.bA=e,this.JA=s,this.KA=n,this.chart=d,this.qA=y,this.tg=i,this.ss=a,b.type==="logarithmic"&&this.chart.us.Nn(Ct.Sf),m(this,this.qf),o.ig=this,this.sg=f,this.eg=this.sg>50?1:-1,this.hg=(E=this.wh.toPoint(0,-this.eg),Math.abs(E.x)>=Math.abs(E.y)?E.x>=0?qt.Right:qt.Left:E.y>=0?qt.Up:qt.Down),this.rg=l,this.ng=this.dt instanceof er?new xe().Ri(this.wh.toVec2(this.dt,this.rg)):new Ci().Ri(this.wh.toVec2(this.dt,this.rg)),this.og=this.chart.pixelScale,this.ag=new xe().Ri(this.wh.toVec2(this.wh.getWidth(this.og),this.rg)),this.lg=this.bA.Ee(this.ng).setMouseInteractions(!1),this.ug=this.bA.Ee(this.ng).setMouseInteractions(!1),this.cg=this.bA.Ee(this.ng).setMouseInteractions(!1),this.dg=this.tg.ke(this.og).Ce(u.getWidth({x:p.xAxisOverlayStyle,y:p.yAxisOverlayStyle})).we(vt).Xo(p.highlightColorOffsetAxisOverlay||p.highlightColorOffset),this.Ag=this.tg.ke(this.og).Ce(u.getWidth({x:p.xAxisZoomingBandFillStyle,y:p.yAxisZoomingBandFillStyle})).we(u.getWidth({x:p.xAxisZoomingBandStrokeStyle,y:p.yAxisZoomingBandStrokeStyle})),this.gg=this.tg.ke(this.og).Ce(u.getWidth({x:p.xAxisOverlayStyle,y:p.yAxisOverlayStyle})).we(vt).Xo(p.highlightColorOffsetAxisOverlay||p.highlightColorOffset),this.mg=this.tg.ke(this.og).Ce(u.getWidth({x:p.xAxisOverlayStyle,y:p.yAxisOverlayStyle})).we(vt).Xo(p.highlightColorOffsetAxisOverlay||p.highlightColorOffset),this.Lh=this.tg.Pr(this.ng).setMouseInteractions(!1).Nh(this.wh.getTitleTextRotation(this.eg)).Ir(ea).Fr(ea),this.chart.us.ls.os(this.dg,z=>this.dg.cs(z),{animationEnabled:this.th}),this.chart.us.ls.os(this.gg,z=>this.gg.cs(z),{animationEnabled:this.th}),this.chart.us.ls.os(this.mg,z=>this.mg.cs(z),{animationEnabled:this.th});const V=Is(new wr(this.CA,this.kA,this.TA,1),new hS(this.FA,this.IA,this.PA),new OR(this.rA)),F=Is(new wr(this.$A,this.XA,this.ZA)),L=Is(new wr(this.$A,this.jA,this.ZA));this.dg.setMouseEnterEventHandler(this.nA).setMouseLeaveEventHandler(this.aA).setMouseDragStartEventHandler(this.uA).setMouseDragEventHandler(this.AA).setMouseDragStopEventHandler(this.yA).setMouseWheelEventHandler(this.vA).setMouseDoubleClickEventHandler(this.rA).setMouseClickEventHandler(this.xA).setMouseDownEventHandler(this.MA).setMouseUpEventHandler(this._A).setMouseMoveEventHandler(this.wA).setTouchStartEventHandler(V.onTouchStart).setTouchMoveEventHandler(V.onTouchMove).setTouchEndEventHandler(V.onTouchEnd),this.gg.setMouseEnterEventHandler(this.DA).setMouseLeaveEventHandler(this.LA).setMouseDragStartEventHandler(this.EA).setMouseDragEventHandler(this.VA).setMouseDragStopEventHandler(this.WA).setMouseWheelEventHandler(this.YA).setTouchStartEventHandler(F.onTouchStart).setTouchMoveEventHandler(F.onTouchMove).setTouchEndEventHandler(F.onTouchEnd),this.mg.setMouseEnterEventHandler(this.DA).setMouseLeaveEventHandler(this.LA).setMouseDragStartEventHandler(this.EA).setMouseDragEventHandler(this.NA).setMouseDragStopEventHandler(this.WA).setMouseWheelEventHandler(this.HA).setTouchStartEventHandler(L.onTouchStart).setTouchMoveEventHandler(L.onTouchMove).setTouchEndEventHandler(L.onTouchEnd),this.lg.Re(u.getWidth({x:p.xAxisStrokeStyle,y:p.yAxisStrokeStyle})),this.ug.Re(u.getWidth({x:p.xAxisNibStyle,y:p.yAxisNibStyle})),this.cg.Re(u.getWidth({x:p.xAxisNibStyle,y:p.yAxisNibStyle})),this.Lh.Ce(u.getWidth({x:p.xAxisTitleFillStyle,y:p.yAxisTitleFillStyle})).Oh(u.getWidth({x:p.xAxisTitleFont,y:p.yAxisTitleFont})),this.es=a.hs(this,{}),this.Wh=this.es.yg([this.Lh]).ps(p.effectsText),this.pg=(v=u.getWidth({x:p.xAxisMarginAfterTicks,y:p.yAxisMarginAfterTicks}))!==null&&v!==void 0?v:7,this.Sg=(R=u.getWidth({x:p.xAxisMarginAfterTitle,y:p.yAxisMarginAfterTitle}))!==null&&R!==void 0?R:7}kr(){return this.eh}Tr(){return this.Zh!==void 0}setTickStrategy(t,e){return super.Fh(t,e)}getTickStrategy(){return this.je}addBand(t=!0){const e=t?this.KA:this.JA,i=new sD(e,this.chart,this.tA,this,this.ng,this.wh,this.qi,this.ss);return this.Jf.push(i),i}addConstantLine(t=!0){const e=t?this.KA:this.JA,i=new rD(e,this.chart,this.tA,this,this.ng,this.wh,this.qi,this.ss);return this.Jf.push(i),i}vg(t){this.Jf.forEach(t)}bg(t){return this.Jf.map(t)}getHighlighters(){return this.Jf}setThickness(t){return typeof t=="number"?(this.xg=t,this.Mg=t):typeof t=="object"&&(this.xg=t.min,this.Mg=t.max),this.chart.us.Ss(),this}getThickness(){return{min:this.xg,max:this.Mg}}setMouseInteractions(t){return this.setAxisInteractionPanByDragging(t).setAxisInteractionReleaseByDoubleClicking(t).setAxisInteractionZoomByDragging(t).setAxisInteractionZoomByWheeling(t).setNibInteractionScaleByDragging(t).setNibInteractionScaleByWheeling(t)}_g(){return this.Ff}ur(t,e){return new lF(e,t,this.bA,this.ng,this.ng)}Uh(){if(this.wf){for(const t of this.wf)t[1].grid.dispose(),t[1].tick.dispose();this.wf.clear()}super.Uh()}cr(t,e){const{tickStart:i}=e,s=t.Sh.lr,n=i+s.getTickLength()*this.eg+s.getTickPadding()*this.eg;t.Ue.Fe(this.wh.toPoint(t.u,n)).Ea(this.wh.toPoint(s.getLabelAlignment(),-this.eg)).Nh(s.labelRotation).setVisible(this.getVisible())}wg(t,e){const{startPosition:i,gridStrokeLen:s,gridStrokeStart:n,tickStart:a}=e,o=t.Sh.lr,l=i-s*o.getGridStrokeLength(),u=a+o.getTickLength()*this.eg;return{gridStroke:{start:this.wh.toPoint(t.u,n),end:this.wh.toPoint(t.u,l)},tickStroke:{start:this.wh.toPoint(t.u,a),end:this.wh.toPoint(t.u,u)}}}_r(t,e){return this.kh.type==="linear"?Tc(t,e,this.dt):s0(t,e,this.dt)}Cg(t,e){return e instanceof er?Tc:s0}Cr(t,e,i){if(this.kh.type!=="logarithmic"){const n=this.dt.Li(e-t);return{min:t-i*n,max:e+i*n}}const s=this.dt;return{min:s.mi(t,-i),max:s.mi(e,i)}}Ps(){if(!this.Xi)return{kg:0,Tg:0,Vd:0};const t=!(this.Ze.size>0),e=this.Lh&&this.Lh.Bh().length>0&&this.getTitleFillStyle()!==Vt,i=this.wh.getHeight(e?this.chart.us.Ig.Fg(this.getTitle(),this.getTitleFont(),this.getTitleRotation()):{x:0,y:0})+(e?this.Sg:0),s=this.Xe===nh?new Map:$R(this.Xe,Math.min(this.Ih,this.Ph),Math.max(this.Ih,this.Ph),this.Ih,this.Ph,0),n=this.dt;let a=0;s.forEach((u,d)=>{if((f=>f.lr!==void 0&&f.nr!==void 0)(d)){const f=Math.max(...u.map(y=>{if(!$n(y,this.Ih,this.Ph))return 0;const m=this.chart.us.Ig.Fg(d.nr(y,n),d.lr.labelFont,d.lr.labelRotation);return t||!m.isEstimate?this.wh.getHeight(m):0}))+d.lr.tickLength+d.lr.tickPadding+d.lr.labelPadding;a=Math.max(a,f)}});const o=this.Tf.reduce(this.eA,0);a=Math.max(a,o),a+=this.pg;const l=Zt(i+a,this.xg!==void 0?this.xg:0,this.Mg!==void 0?this.Mg:Mt);return this.kf=l,{kg:a,Tg:i,Vd:l}}Te(t){const e=this.getVisible()&&t.Pg>0;this.Dg=t;const i=this.lg.uu(),s=this.dt.getInnerStart()<this.dt.getInnerEnd()?this.dt.getInnerStart():this.dt.getInnerEnd(),n=this.dt.getInnerEnd()>this.dt.getInnerStart()?this.dt.getInnerEnd():this.dt.getInnerStart(),a=i.getThickness()*this.eg/2,o=this.rg.getInnerInterval(),l=this.sg/100*o,u=l+t.Bg,d=o*this.eg,f=u+a;if(e||this.Uh(),this.Xe!==nh&&e){const F=this.dt.ri();this.qh({physicalAxisSize:F,startPosition:l,gridStrokeLen:d,gridStrokeStart:u,tickStart:f});for(const[L,z]of this.Ze){let B=this.wf.get(L);if(!B){if(L.Oe)B={grid:this.QA[0].Lg(this.ng).setMouseInteractions(!1),tick:this.QA[0].Lg(this.ng).setMouseInteractions(!1)};else if("Rg"in L){const A=Array.from(this.Ze.keys()).filter(w=>"Rg"in w).reverse().indexOf(L),T=this.QA[A];if(!T)throw new Error("Not enough tick layers. This is an internal LCJS error - if you see this, please contact Arction support.");B={grid:T.Lg(this.ng).setMouseInteractions(!1),tick:T.Lg(this.ng).setMouseInteractions(!1)}}}if(B){B.grid.Nt(),B.tick.Nt();for(const[A,T]of z){const w=this.wg(T,{physicalAxisSize:F,startPosition:l,gridStrokeLen:d,gridStrokeStart:u,tickStart:f});B.grid.zr().Eg(w.gridStroke.start,w.gridStroke.end),B.tick.zr().Eg(w.tickStroke.start,w.tickStroke.end)}B.grid.Re(L.lr.getGridStrokeStyle()),B.tick.Re(L.lr.getTickStyle()),this.wf.set(L,B)}}}const y=f,m=y+this.eg*t.zg,p=this.Nf||this.Gf?Math.min(this.Lf,.25*t.Pg):0,x={start:this.wh.toVec2(this.dt.mi(this.dt.getInnerStart(),p),y),end:this.wh.toVec2(this.dt.mi(this.dt.getInnerEnd(),-p),m)},b=gt(this.wh.toVec2(this.dt.getInnerStart(),m),this.ng,this.og),v=gt(x.start,this.ng,this.og),R=gt(x.end,this.ng,this.og),E=gt(this.wh.toVec2(this.dt.getInnerEnd(),y),this.ng,this.og);this.lg.Ve(this.wh.toPoint(s,u)).ze(this.wh.toPoint(n,u)).setVisible(e),this.ug.Ve(this.wh.toPoint(this.dt.mi(this.dt.getInnerStart(),this.Pf),u)).ze(this.wh.toPoint(this.dt.getInnerStart(),u)).setVisible(e),this.cg.Ve(this.wh.toPoint(this.dt.mi(this.dt.getInnerEnd(),-this.Pf),u)).ze(this.wh.toPoint(this.dt.getInnerEnd(),u)).setVisible(e);const V=u+t.kg*this.eg;if(this.Lh.Fe(this.wh.toPoint(this.wh.getWidth(gt(Ht(_t(b,E),.5),this.og,this.ng)),V)).Ea(this.wh.toPoint(0,-1*this.eg)).setVisible(e),this.Cf){const F=this.sg/100*o+t.Bg,L=-this.eg*o-t.Bg,z={start:this.wh.toVec2(this.Cf.min,f+this.eg*this.kf),end:this.wh.toVec2(this.Cf.max,F+L)},B=gt(z.start,this.ng,this.og),A=gt(z.end,this.ng,this.og);this.Ag.Fe(B).q(Se(A,B)).setVisible(!0)}else this.Ag.setVisible(!1);this.dg.Fe(v).q(Se(R,v)).setVisible(e),this.gg.Fe(b).q(Se(v,b)).setVisible(e),this.mg.Fe(R).q(Se(E,R)).setVisible(e);for(const F of this.Tf)F.update().plot(e,u,d,t.Bg,f);for(const F of this.Jf)F.Te()}setLength(t){return this.zd=t,this.chart.us.Ss(),this}getLength(){return this.zd}setMargins(t,e){return this.iA=t,this.sA=e,this.chart.us.Ss(),this}getMargins(){return{start:this.iA,end:this.sA}}getStackIndex(){var t,e;return(e=(t=[...this.chart.Vg,...this.chart.Og,...this.chart.Ng,...this.chart.Gg].find(i=>i.axis===this))===null||t===void 0?void 0:t.iStack)!==null&&e!==void 0?e:0}getParallelIndex(){var t,e;return(e=(t=[...this.chart.Vg,...this.chart.Og,...this.chart.Ng,...this.chart.Gg].find(i=>i.axis===this))===null||t===void 0?void 0:t.iParallel)!==null&&e!==void 0?e:0}Wg(){const t=this.Dg;if(!t)return;const e=this.getVisible()&&t.Pg>0,i=this.lg.uu().getThickness()*this.eg/2,s=this.rg.getInnerInterval(),n=this.sg/100*s+t.Bg,a=s*this.eg,o=n+i;for(const l of this.Tf)l.update().plot(e,n,a,t.Bg,o);for(const l of this.Jf)l.Te()}Ug(){return this.kf}Yg(t,e){e=e||fh.AxisTickMajor;const i=new ID(this,t?this.QA[0]:this.tg,this.tg,this.dt,this.ag,this.ag,this.wh,this.hg,this.hA,this.qi,e).setTextFormatter(this.formatValue);return this.Tf.push(i),i}oA(t){this.chart.us.ls.Ms(t,1),this.Df=t.us.Wr(this.$f,this.Df)}lA(t){this.chart.us.ls.Ms(t,0),t.us.Ur(this.Df)}dA(t){this.setStopped(!0),t.us.Ur(this.Df)}gA(t,e){const i=-this.wh.getWidth(e);this.pan(i),this.Df=t.us.Wr(this.Xf,this.Df)}pan(t){const e=this.Ih,i=this.Ph,s=this.dt.mi(e,t),n=this.dt.mi(i,t);this.Qh(s,n,!1)}zoom(t,e){const i=this.dt.ct(this.Ih),s=this.dt.ct(this.Ph),n=this.dt.ct(t),a=Zt((n-i)/(s-i),0,1),o=.2*this.dt.ri(),l=a*this.Rf*o*-e,u=(1-a)*this.Rf*o*e,d=this.dt.mi(this.Ih,l),f=this.dt.mi(this.Ph,u);this.Qh(d,f,!0)}pA(t){this.Cf=void 0,t.us.Ur(this.Df)}fA(t,e){this.setStopped(!0),t.us.Ur(this.Df),this.chart.us.ls.Ms(this.dg,0)}mA(t,e,i,s){const n=gt(this.bA.us.Pe(i.x,i.y),this.bA.us.dt,this.ng),a=Zt(this.wh.getWidth(n),this.Ih,this.Ph),o=this.wh.getWidth(gt(this.bA.us.Pe(e.x,e.y),this.bA.us.dt,this.ng));Math.abs(this.dt.ct(a)-this.dt.ct(o))>10?(this.Cf=Kt(Math.min(a,o),Math.max(a,o)),this.Df=t.us.Wr(this.jf,this.Df)):(this.Cf=void 0,this.Df=t.us.Wr(this.$f,this.Df)),this.bA.Ss()}SA(t,e,i){if(this.Cf){const s=this.Cf.min,n=this.Cf.max,a=this.Ph<this.Ih;this.St(a?n:s,a?s:n,!0,!0,"interactionSetInterval")}this.Cf=void 0,t.us.Ur(this.Df)}BA(t){this.chart.us.ls.Ms(t,1),this.Bf=t.us.Wr(this.Zf,this.Bf)}RA(t){this.chart.us.ls.Ms(t,0),t.us.Ur(this.Bf)}zA(t,e){this.setStopped(!0),this.Bf=t.us.Wr(this.Qf,this.Bf)}OA(t,e,i,s){const n=this.wh.getWidth(s);this.Qh(this.dt.mi(this.Ih,n),this.Ph,!0)}GA(t,e,i,s){const n=this.wh.getWidth(s);this.Qh(this.Ih,this.dt.mi(this.Ph,n),!0)}UA(t,e,i){t.us.Ur(this.Bf),t.getIsUnderMouse()&&(this.Bf=t.us.Wr(this.Zf)),this.bA.Ss()}addCustomTick(t){return this.Yg(!0,t)}getUiPosition(){return this.sg}setStrokeStyle(t){return this.lg.Re(t),this.bA.Ss(),this}getStrokeStyle(){return this.lg.uu()}getOverlayStyle(){return this.dg.Eh()}setOverlayStyle(t){return this.dg.Ce(t),this.bA.Ss(),this}setAxisInteractionZoomByDragging(t){return this.Ef=t,this}getAxisInteractionZoomByDragging(){return this.Ef}setAxisInteractionPanByDragging(t){return this.zf=t,this}getAxisInteractionPanByDragging(){return this.zf}setAxisInteractionZoomByWheeling(t){return this.Vf=t,this}getAxisInteractionZoomByWheeling(){return this.Vf}setAxisInteractionReleaseByDoubleClicking(t){return this.Of=t,this}getAxisInteractionReleaseByDoubleClicking(){return this.Of}setAxisMouseHoverStyle(t=this.wh.defaultDragMouseStyle){return this.$f=t,this}getAxisMouseHoverStyle(){return this.$f}setAxisMousePanStyle(t=this.wh.defaultDragMouseStyle){return this.Xf=t,this}getAxisMousePanStyle(){return this.Xf}setAxisMouseZoomStyle(t=this.wh.defaultDragMouseStyle){return this.jf=t,this}getAxisMouseZoomStyle(){return this.jf}setAnimationHighlight(t){return this.chart.us.ls._s(this.dg,t),this.chart.us.ls._s(this.gg,t),this.chart.us.ls._s(this.mg,t),this}getAnimationHighlight(){return this.chart.us.ls.ws(this.dg)}getTitleMargin(){return this.getMarginAfterTicks()}setTitleMargin(t){return this.setMarginAfterTicks(t)}getMarginAfterTicks(){return this.pg}setMarginAfterTicks(t){return this.pg=t,this.bA.Ss(),this}getMarginAfterTitle(){return this.Sg}setMarginAfterTitle(t){return this.Sg=t,this.bA.Ss(),this}getNibLength(){return this.Pf}setNibLength(t){return this.Pf=t,this.bA.Ss(),this}getNibStyle(){return this.ug.uu()}setNibStyle(t){return this.ug.Re(t),this.cg.Re(t),this.bA.Ss(),this}getNibOverlayStyle(){return this.gg.Eh()}setNibOverlayStyle(t){return this.gg.Ce(t),this.mg.Ce(t),this.bA.Ss(),this}setNibMousePickingAreaSize(t){return this.Lf=t,this.bA.Ss(),this}getNibMousePickingAreaSize(){return this.Lf}setNibInteractionScaleByDragging(t){return this.Nf=t,this}getNibInteractionScaleByDragging(){return this.Nf}setNibInteractionScaleByWheeling(t){return this.Gf=t,this}getNibInteractionScaleByWheeling(){return this.Gf}setNibMouseHoverStyle(t=this.wh.defaultDragMouseStyle){return this.Zf=t,this}getNibMouseHoverStyle(){return this.Zf}setNibMouseScaleStyle(t=this.wh.defaultDragMouseStyle){return this.Qf=t,this}getNibMouseScaleStyle(){return this.Qf}setChartInteractions(t){return this.setChartInteractionFitByDrag(t),this.setChartInteractionPanByDrag(t),this.setChartInteractionZoomByDrag(t),this.setChartInteractionZoomByWheel(t),this}setChartInteractionPanByDrag(t){return this.Wf=t,this}getChartInteractionPanByDrag(){return this.Wf}setChartInteractionZoomByWheel(t){return this.Uf=t,this}getChartInteractionZoomByWheel(){return this.Uf}setChartInteractionZoomByDrag(t){return this.Yf=t,this}getChartInteractionZoomByDrag(){return this.Yf}setChartInteractionFitByDrag(t){return this.Hf=t,this}getChartInteractionFitByDrag(){return this.Hf}j(){return this.dt.j(),this}Z(){return this.dt.Z(),this}dispose(){this.ug.dispose(),this.cg.dispose(),this.lg.dispose(),this.dg.dispose(),this.Ag.dispose(),this.gg.dispose(),this.mg.dispose(),this.Lh.dispose(),this.Kh(ah);for(const t of this.wf.values())t.grid.dispose(),t.tick.dispose();return this.Ff.slice().forEach(ah),this.Jf.slice().forEach(ah),this.qA(this),this.D.emit("dispose",this),this}onDispose(t){return this.D.on("dispose",t)}offDispose(t){return this.D.off(t,"dispose")}setVisible(t){this.ug.setVisible(t),this.cg.setVisible(t),this.lg.setVisible(t),this.Lh.setVisible(t),this.dg.setVisible(t),this.gg.setVisible(t),this.mg.setVisible(t),this.Kh(e=>{e.ys(t)});for(const e of this.wf.values())e.grid.setVisible(t),e.tick.setVisible(t);return super.setVisible(t),this.chart.us.Ss(),this}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationHighlight(this.th),this}}const n0={getWidth:r=>r.x,getHeight:r=>r.y,toVec2:(r,t)=>({x:r,y:t}),toPoint:(r,t)=>Y(r,t)},SS={getWidth:r=>r.y,getHeight:r=>r.x,toVec2:(r,t)=>({x:t,y:r}),toPoint:(r,t)=>Y(t,r)},ml=r=>!!(r&&typeof r=="object"&&"x"in r&&r.x instanceof r0&&"y"in r&&r.y instanceof r0),uF=Ae({type:"tick-style",gridStrokeLength:1,gridStrokeStyle:new se,tickLength:7,tickStyle:new se,tickPadding:0,labelFont:new V0,labelFillStyle:new it,labelPadding:0,labelAlignment:0,labelRotation:0});class pn extends uF{constructor(t){super(t)}setGridStrokeLength(t){return this.set("gridStrokeLength",t)}getGridStrokeLength(){return this.get("gridStrokeLength")}setGridStrokeStyle(t){return this.set("gridStrokeStyle",typeof t=="function"?t(this.get("gridStrokeStyle")):t)}getGridStrokeStyle(){return this.get("gridStrokeStyle")}setTickLength(t){return this.set("tickLength",t)}getTickLength(){return this.get("tickLength")}setTickStyle(t){return this.set("tickStyle",typeof t=="function"?t(this.get("tickStyle")):t)}getTickStyle(){return this.get("tickStyle")}setTickPadding(t){return this.set("tickPadding",t)}getTickPadding(){return this.get("tickPadding")}setLabelFillStyle(t){return this.set("labelFillStyle",typeof t=="function"?t(this.get("labelFillStyle")):t)}getLabelFillStyle(){return this.get("labelFillStyle")}setLabelFont(t){return this.set("labelFont",typeof t=="function"?t(this.get("labelFont")):t)}getLabelFont(){return this.get("labelFont")}setLabelPadding(t){return this.set("labelPadding",t)}getLabelPadding(){return this.get("labelPadding")}setLabelAlignment(t){return this.set("labelAlignment",t)}getLabelAlignment(){return this.get("labelAlignment")}setLabelRotation(t){return this.set("labelRotation",t)}getLabelRotation(){return this.get("labelRotation")}}const yE=r=>!(!r||typeof r!="object"||!("type"in r)||r.type!=="tick-style"),mE=new pn({labelFillStyle:Vt,gridStrokeStyle:vt,tickStyle:vt}),a0=r=>yE(r)&&yR(r.labelFillStyle)&&ob(r.gridStrokeStyle)&&ob(r.tickStyle),G0=(r,t,e,i,s)=>(n,a)=>o=>{const l=new Date(o+n),u={year:a?l.getUTCFullYear():l.getFullYear(),monthIndex:a?l.getUTCMonth():l.getMonth(),day:a?l.getUTCDate():l.getDate(),hours:a?l.getUTCHours():l.getHours(),minutes:a?l.getUTCMinutes():l.getMinutes(),seconds:a?l.getUTCSeconds():l.getSeconds(),millis:a?l.getUTCMilliseconds():l.getMilliseconds()},d=i?i(u):void 0;if(r===0&&d===!0)return o;const f=u[t];s.includes("year")&&(u.year=Math.floor(u.year/e)*e),s.includes("monthIndex")&&(u.monthIndex=0),s.includes("day")&&(u.day=1),s.includes("hours")&&(u.hours=0),s.includes("minutes")&&(u.minutes=0),s.includes("seconds")&&(u.seconds=0),s.includes("millis")&&(u.millis=0);let y=(r===0?1:r)*e;return r===-1&&d===!1&&(y=0),y!==0&&(u[t]=e*(y>0?Math.floor((f+y)/e):Math.ceil((f+y)/e))),a?Date.UTC(u.year,u.monthIndex,u.day,u.hours,u.minutes,u.seconds,u.millis)-n:new Date(u.year,u.monthIndex,u.day,u.hours,u.minutes,u.seconds,u.millis).getTime()-n},Ef=(r,t,e,...i)=>G0(-1,r,t,e,i),Ku=(r,t,e,...i)=>G0(-1,r,t,e,i),tc=(r,t,e,...i)=>G0(0,r,t,e,i),ec=(r,t,...e)=>G0(1,r,t,void 0,e),Cm=r=>(t,e)=>i=>{const s=new Date(i+t),n=e?s.getUTCDay():s.getDay(),a=n===1&&(e?s.getUTCHours():s.getHours())===0&&(e?s.getUTCMinutes():s.getMinutes())===0&&s.getSeconds()===0&&s.getMilliseconds()===0;if(r===0&&a===!0)return i;let o=e?s.getUTCDate():s.getDate();return r===-1&&n===1&&a===!1||(r===-1?o-=n>=2?n-1:n+6:o+=n>0?8-n:1),e?Date.UTC(s.getUTCFullYear(),s.getUTCMonth(),o,0,0,0,0)-t:new Date(s.getFullYear(),s.getMonth(),o,0,0,0,0).getTime()-t},Sr=[{label:"MilliSecond100",unit:100,irregular:!1,greatTicks:void 0,majorTicks:{fitFunction:ue({ignore:"first"},2,5)},minorTicks:{amount:4,fitFunction:ue(void 0,2)}},{label:"Second",unit:1e3,irregular:!1,greatTicks:{getReferenceKeyValue:Ef("seconds",1,r=>r.millis===0,"millis")},majorTicks:{fitFunction:Tm(5,10,15,30)},minorTicks:{amount:4,fitFunction:ue(void 0,2)}},{label:"Minute",unit:6e4,irregular:!1,greatTicks:{getReferenceKeyValue:Ef("minutes",1,r=>r.seconds===0&&r.millis===0,"seconds","millis")},majorTicks:{fitFunction:Tm(5,10,15,30)},minorTicks:{amount:12,fitFunction:ue(void 0,3,6)}},{label:"Hour",unit:36e5,irregular:!1,greatTicks:{getReferenceKeyValue:Ef("hours",1,r=>r.minutes===0&&r.seconds===0&&r.millis===0,"minutes","seconds","millis")},majorTicks:{fitFunction:Tm(3,6,12)},minorTicks:{amount:8,fitFunction:ue(void 0,2,4)}},{label:"Day",unit:864e5,irregular:!1,greatTicks:{getReferenceKeyValue:Ef("day",1,r=>r.hours===0&&r.minutes===0&&r.seconds===0&&r.millis===0,"hours","minutes","seconds","millis")},majorTicks:{fitFunction:ue({ignore:"last"},2,4)},minorTicks:{amount:7,fitFunction:ue({ignore:"last"},2,3)}},{label:"Week",unit:6048e5,irregular:!0,getPrevKeyValue:Cm(-1),getNextKeyValueIncludingRef:Cm(0),getNextKeyValue:Cm(1),greatTicks:!0,majorTicks:{fitFunction:ue(void 0,2)},minorTicks:{fitFunction:void 0}},{label:"Month",unit:2592e6,irregular:!0,getPrevKeyValue:Ku("monthIndex",1,r=>r.day===1&&r.hours===0&&r.minutes===0&&r.seconds===0&&r.millis===0,"day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:tc("monthIndex",1,r=>r.day===1&&r.hours===0&&r.minutes===0&&r.seconds===0&&r.millis===0,"day","hours","minutes","seconds","millis"),getNextKeyValue:ec("monthIndex",1,"day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:ue(void 0,2,3)},minorTicks:{fitFunction:ue(void 0,2,4,6)}},{label:"Year",unit:31536e6,irregular:!0,getPrevKeyValue:Ku("year",1,r=>r.day===1&&r.hours===0&&r.minutes===0&&r.seconds===0&&r.millis===0,"monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:tc("year",1,r=>r.day===1&&r.hours===0&&r.minutes===0&&r.seconds===0&&r.millis===0,"monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:ec("year",1,"monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:ue({ignore:"first"},2,5)},minorTicks:{fitFunction:ue(void 0,2,5)}},{label:"Decade",unit:31536e7,irregular:!0,getPrevKeyValue:Ku("year",10,r=>r.year%10==0&&r.day===1&&r.hours===0&&r.minutes===0&&r.seconds===0&&r.millis===0,"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:tc("year",10,r=>r.year%10==0&&r.day===1&&r.hours===0&&r.minutes===0&&r.seconds===0&&r.millis===0,"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:ec("year",10,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:ue(void 0,2,4)},minorTicks:{fitFunction:ue(void 0,2,5)}},{label:"Century",unit:316224e7,irregular:!0,getPrevKeyValue:Ku("year",100,r=>r.year%100==0&&r.day===1&&r.hours===0&&r.minutes===0&&r.seconds===0&&r.millis===0,"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:tc("year",100,r=>r.year%100==0&&r.day===1&&r.hours===0&&r.minutes===0&&r.seconds===0&&r.millis===0,"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:ec("year",100,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:void 0},minorTicks:void 0},{label:"Millennium",unit:316224e8,irregular:!0,getPrevKeyValue:Ku("year",1e3,r=>r.year%1e3==0&&r.day===1&&r.hours===0&&r.minutes===0&&r.seconds===0&&r.millis===0,"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:tc("year",1e3,r=>r.year%1e3==0&&r.day===1&&r.hours===0&&r.minutes===0&&r.seconds===0&&r.millis===0,"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:ec("year",1e3,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:void 0},minorTicks:void 0}],wc=(r,t,e)=>{let i=((a,o,l,u,d)=>{const f=o-a;let y;for(let m=0;m<Sr.length;m+=1)if(f/Sr[m].unit<=1){y=Sr[m];break}return y})(t,e);if(i!==void 0&&Sr.indexOf(i)===0&&(i=Sr[1]),i===void 0)return;if(r==="great")return i;const s=r==="major"?1:2,n=Sr[Sr.indexOf(i)-s];return n===void 0?Sr[0]:n},_b=(r,t,e)=>(i,s,n,a)=>{const o=wc("great",i,s);if(o===void 0)return[];if(o.label==="Decade"||o.label==="Century"||o.label==="Millennium")return[];const l=a>n?i:s,u=(i+s)/2,d=a>n?s:i;if(Sr.indexOf(o)<=Sr.findIndex(m=>m.label==="Hour"))return e==="left"?[l]:[];let f;if(o.irregular===!0)f=WR(i,s,o.getPrevKeyValue(r,t),o.getNextKeyValue(r,t));else{const m=o.greatTicks.getReferenceKeyValue(r,t)(i);f=Xs(i,s,o.unit,m,1)}const y=((m,p,x)=>{for(const b of x)if(b>=m&&b<=p)return b})(i,s,f);return e==="left"?y===void 0||$n(y,u,d)?[l]:[y]:y!==void 0&&$n(y,u,d)?[y]:[d]},km=(r,t,e)=>(i,s,n,a)=>{const o=wc(r,n,a);let l;if(o===void 0)return[];if(r==="great"&&o.greatTicks!==void 0)if(o.irregular===!0)l=WR(i,s,o.getPrevKeyValue(t,e),o.getNextKeyValue(t,e));else{const u=o.greatTicks.getReferenceKeyValue(t,e)(i);l=Xs(i,s,o.unit,u,1)}else if(r==="major"&&o.majorTicks!==void 0)l=o.irregular===!0?((u,d,f,y)=>{const m=[];let p=f(u),x=0;for(;p<d;)if(m.push(p),p=y(p),x+=1,x>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return m.push(p),m})(i,s,o.getPrevKeyValue(t,e),o.getNextKeyValue(t,e)):((u,d,f)=>{const y=[];let m=u,p=0;for(;m<d;)if(y.push(m),m+=f,p+=1,p>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return y.push(m),y})(i,s,o.unit);else{if(r!=="minor"||o.minorTicks===void 0)return[];if(o.irregular===!0)l=((u,d,f,y)=>{const m=[];let p=f(u),x=0;for(;p<d;)if(m.push(p),p=y(p),x+=1,x>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return m})(i,s,o.getNextKeyValueIncludingRef(t,e),o.getNextKeyValue(t,e));else{const u=(d=>{if(d!==void 0)return Sr[Sr.indexOf(d)+1]})(o);if(u===void 0)return[];l=Ks(i,s,u.unit/o.minorTicks.amount,1)}}return l},Nb=r=>(t,e,i,s,n,a)=>{const o=wc(r,n,a);if(o===void 0)return;let l;return r==="major"?l=o.majorTicks.fitFunction:o.minorTicks&&(l=o.minorTicks.fitFunction),l?l(t,e,i,s,n,a):void 0},cF=Ae({type:"date-time-ticks",utc:!1,locale:void 0,dateOrigin:void 0,cursorFormatter:void 0,greatTickStyle:new pn,majorTickStyle:new pn,minorTickStyle:new pn,formatOptionsMajorCentury:{year:"numeric"},formatOptionsMinorDecade:{year:"numeric"},formatOptionsMajorDecade:{year:"numeric"},formatOptionsMinorYear:{year:"numeric"},formatOptionsMajorYear:{year:"numeric"},formatOptionsMinorMonth:{month:"short"},formatOptionsGreatYear:{year:"numeric"},formatOptionsMajorMonth:{month:"long"},formatOptionsMinorWeek:{day:"numeric"},formatOptionsGreatMonth:{year:"numeric",month:"long"},formatOptionsMajorWeek:{day:"numeric",weekday:"short"},formatOptionsMinorDay:{day:"numeric",weekday:"short"},formatOptionsGreatWeek:(r,t,e)=>{const i=new Date(r),s=(n=>{const a=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate()));a.setUTCDate(a.getUTCDate()+4-(a.getUTCDay()||7));const o=new Date(Date.UTC(a.getUTCFullYear(),0,1));return Math.ceil(((a.getTime()-o.getTime())/864e5+1)/7)})(i);return`${new Intl.DateTimeFormat(e,{year:"numeric",month:"long"}).format(i)} Week ${s}`},formatOptionsMajorDay:{weekday:"long",day:"numeric"},formatOptionsMinorHour:{hour:"2-digit",minute:"2-digit"},formatOptionsGreatDay:{year:"numeric",month:"long",day:"numeric"},formatOptionsMajorHour:{hour:"2-digit",minute:"2-digit"},formatOptionsMinorMinute:{hour:"2-digit",minute:"2-digit"},formatOptionsGreatHour:{year:"numeric",month:"long",day:"numeric"},formatOptionsMajorMinute:{hour:"2-digit",minute:"2-digit"},formatOptionsMinorSecond:{hour:"2-digit",minute:"2-digit",second:"2-digit"},formatOptionsGreatMinute:{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"},formatOptionsMajorSecond:{second:"2-digit"},formatOptionsMinorMillisecond:r=>{const t=new Date(r);return`${(t.getSeconds()+t.getUTCMilliseconds()/1e3).toFixed(2)}`},formatOptionsGreatSecond:{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"},formatOptionsMajorMilliSecond:r=>{const t=new Date(r);return`${(t.getSeconds()+t.getUTCMilliseconds()/1e3).toFixed(1)}`}});class dF extends cF{Yh(t){const e=this.dateOrigin!==void 0?this.dateOrigin.getTime():0,i=d=>Sr.map(f=>{const y=((m,p,x)=>{switch(x.label){case"MilliSecond100":return p==="Great"?void 0:p==="Major"?m.formatOptionsMajorMilliSecond:m.formatOptionsMinorMillisecond;case"Second":return p==="Great"?m.formatOptionsGreatSecond:p==="Major"?m.formatOptionsMajorSecond:m.formatOptionsMinorSecond;case"Minute":return p==="Great"?m.formatOptionsGreatMinute:p==="Major"?m.formatOptionsMajorMinute:m.formatOptionsMinorMinute;default:case"Hour":return p==="Great"?m.formatOptionsGreatHour:p==="Major"?m.formatOptionsMajorHour:m.formatOptionsMinorHour;case"Day":return p==="Great"?m.formatOptionsGreatDay:p==="Major"?m.formatOptionsMajorDay:m.formatOptionsMinorDay;case"Week":return p==="Great"?m.formatOptionsGreatWeek:p==="Major"?m.formatOptionsMajorWeek:m.formatOptionsMinorWeek;case"Month":return p==="Great"?m.formatOptionsGreatMonth:p==="Major"?m.formatOptionsMajorMonth:m.formatOptionsMinorMonth;case"Year":return p==="Great"?m.formatOptionsGreatYear:p==="Major"?m.formatOptionsMajorYear:m.formatOptionsMinorYear;case"Decade":return p==="Great"?void 0:p==="Major"?m.formatOptionsMajorDecade:m.formatOptionsMinorDecade;case"Century":return p==="Great"?void 0:p==="Major"?m.formatOptionsMajorCentury:void 0;case"Millennium":return}})(this,d,f);if(typeof y!="object")return y;try{return new Intl.DateTimeFormat(this.locale,y)}catch{let p="";for(const x in y)p+=` ${x}: ${y[x]},`;nt.console.error(`Invalid Intl.DateTimeFormat ( locale: ${this.locale}, formatOptions {${p}} )`)}}),s=new Map;s.set("great",i("Great")),s.set("major",i("Major")),s.set("minor",i("Minor"));const n=d=>String(d),a=(d,f)=>(y,m)=>{let p=y+e;const x=m.getInnerStart(),b=m.getInnerEnd(),v=x>b,R=wc(d,v?b:x,v?x:b);if(R===void 0)return n(p);if(d==="great"){const F=Ai(y,f==="left"?x:b);let L;if(L=F===!1?y:R.irregular===!1?f==="left"&&v===!1||f==="right"&&v===!0?R.greatTicks.getReferenceKeyValue(e,this.utc)(y):R.greatTicks.getReferenceKeyValue(e,this.utc)(y+1*R.unit):f==="left"&&v===!1||f==="right"&&v===!0?R.getPrevKeyValue(e,this.utc)(y):R.getNextKeyValue(e,this.utc)(y),p=L+e,f==="right"&&F===!0)return""}const E=s.get(d);if(E===void 0)return n(p);const V=E[Sr.indexOf(R)];return V===void 0?"":typeof V=="function"?V(p,m,this.locale):V.format(p)},o=[],l=[{Ue:"Great ticks (directive)",Rg:0,Ne:!0,Br:km("great",e,this.utc),Lr:void 0},{Ue:"Major ticks",Rg:1,lr:this.majorTickStyle,nr:a("major"),Br:km("major",e,this.utc),bh:{dr:Nb("major")},Lr:void 0}];a0(this.greatTickStyle)||(o.push({Ue:"Great ticks (left)",lr:this.greatTickStyle.setLabelAlignment(-1),nr:a("great","left"),Br:_b(e,this.utc,"left"),Oe:!0,mr:!1}),o.push({Ue:"Great ticks (right)",lr:this.greatTickStyle.setLabelAlignment(1),nr:a("great","right"),Br:_b(e,this.utc,"right"),Oe:!0,mr:!1})),a0(this.minorTickStyle)||l.push({Ue:"Minor ticks",Rg:2,lr:this.minorTickStyle,nr:a("minor"),Br:km("minor",e,this.utc),bh:{dr:Nb("minor"),xh:(d,f,y,m,p,x)=>{const b=wc("minor",p,x);return!b||b.label!=="Week"}},Lr:void 0});const u=this.cursorFormatter;return{He:o,$e:l,Ge:u?(d,f,y)=>u(e+d,f,y):(d,f,y)=>{const m=new Date(e+d);return`${new Intl.DateTimeFormat(y,{year:"numeric",month:"numeric",day:"numeric",minute:"2-digit",hour:"2-digit"}).format(m)} `},Xh:1e3,jh:31536e9}}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setTickStyle(t){return this.setGreatTickStyle(t).setMajorTickStyle(t).setMinorTickStyle(t)}setGreatTickStyle(t){if(typeof t=="function"){const e=this.get("greatTickStyle");return this.set("greatTickStyle",t(e))}return this.set("greatTickStyle",t)}getGreatTickStyle(){return this.get("greatTickStyle")}setMajorTickStyle(t){return typeof t=="function"?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if(typeof t=="function"){const e=this.get("minorTickStyle");return this.set("minorTickStyle",t(e))}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setUTC(t){return this.set("utc",t)}getUTC(){return this.get("utc")}setLocale(t){return this.set("locale",t)}getLocale(){return this.get("locale")}setDateOrigin(t){return this.set("dateOrigin",t)}getDateOrigin(){return this.get("dateOrigin")}setFormatting(t,e,i){return this.withMutations(s=>s.set("formatOptionsGreatYear",t||this.formatOptionsGreatYear).set("formatOptionsGreatMonth",t||this.formatOptionsGreatMonth).set("formatOptionsGreatWeek",t||this.formatOptionsGreatWeek).set("formatOptionsGreatDay",t||this.formatOptionsGreatDay).set("formatOptionsGreatHour",t||this.formatOptionsGreatHour).set("formatOptionsGreatMinute",t||this.formatOptionsGreatMinute).set("formatOptionsGreatSecond",t||this.formatOptionsGreatSecond).set("formatOptionsMajorCentury",e||this.formatOptionsMajorCentury).set("formatOptionsMajorDecade",e||this.formatOptionsMajorDecade).set("formatOptionsMajorYear",e||this.formatOptionsMajorYear).set("formatOptionsMajorMonth",e||this.formatOptionsMajorMonth).set("formatOptionsMajorWeek",e||this.formatOptionsMajorWeek).set("formatOptionsMajorDay",e||this.formatOptionsMajorDay).set("formatOptionsMajorHour",e||this.formatOptionsMajorHour).set("formatOptionsMajorMinute",e||this.formatOptionsMajorMinute).set("formatOptionsMajorSecond",e||this.formatOptionsMajorSecond).set("formatOptionsMajorMilliSecond",e||this.formatOptionsMajorMilliSecond).set("formatOptionsMinorDecade",i||this.formatOptionsMinorDecade).set("formatOptionsMinorYear",i||this.formatOptionsMinorYear).set("formatOptionsMinorMonth",i||this.formatOptionsMinorMonth).set("formatOptionsMinorWeek",i||this.formatOptionsMinorWeek).set("formatOptionsMinorDay",i||this.formatOptionsMinorDay).set("formatOptionsMinorHour",i||this.formatOptionsMinorHour).set("formatOptionsMinorMinute",i||this.formatOptionsMinorMinute).set("formatOptionsMinorSecond",i||this.formatOptionsMinorSecond))}setFormattingDecade(t,e){return this.withMutations(i=>(t&&(i=i.set("formatOptionsMajorDecade",t)),e&&(i=i.set("formatOptionsMinorYear",e)),i))}setFormattingYear(t,e){return this.withMutations(i=>(t&&(i=i.set("formatOptionsMajorYear",t)),e&&(i=i.set("formatOptionsMinorMonth",e)),i))}setFormattingMonth(t,e,i){return this.withMutations(s=>(t&&(s=s.set("formatOptionsGreatYear",t)),e&&(s=s.set("formatOptionsMajorMonth",e)),i&&(s=s.set("formatOptionsMinorWeek",i)),s))}setFormattingWeek(t,e,i){return this.withMutations(s=>(t&&(s=s.set("formatOptionsGreatMonth",t)),e&&(s=s.set("formatOptionsMajorWeek",e)),i&&(s=s.set("formatOptionsMinorDay",i)),s))}setFormattingDay(t,e,i){return this.withMutations(s=>(t&&(s=s.set("formatOptionsGreatWeek",t)),e&&(s=s.set("formatOptionsMajorDay",e)),i&&(s=s.set("formatOptionsMinorHour",i)),s))}setFormattingHour(t,e,i){return this.withMutations(s=>(t&&(s=s.set("formatOptionsGreatDay",t)),e&&(s=s.set("formatOptionsMajorHour",e)),i&&(s=s.set("formatOptionsMinorMinute",i)),s))}setFormattingMinute(t,e,i){return this.withMutations(s=>(t&&(s=s.set("formatOptionsGreatHour",t)),e&&(s=s.set("formatOptionsMajorMinute",e)),i&&(s=s.set("formatOptionsMinorSecond",i)),s))}setFormattingSecond(t,e,i){return this.withMutations(s=>(t&&(s=s.set("formatOptionsGreatMinute",t)),e&&(s=s.set("formatOptionsMajorSecond",e)),i&&(s=s.set("formatOptionsMinorMillisecond",i)),s))}setFormattingMilliSecond(t,e){return this.withMutations(i=>(t&&(i=i.set("formatOptionsGreatSecond",t)),e&&(i=i.set("formatOptionsMajorMilliSecond",e)),i))}}const Lb=(r,t)=>(e,i)=>{const s=i-e;if(t){const l=Math.log10(s/2);let u=10**Math.floor(l-r);const d=1/u;u=Math.round(u*d)/d;const f=Math.round(Math.floor(e/(10*u))*u*10*d)/d;return Xs(f,i,u,void 0,d)}const n=Math.log10(s);let a=10**Math.round(n-r);const o=1/a;return a=Math.round(a*o)/o,Ks(e,i,a,o)},fF=(r,t,e,i,s,n)=>t===0?r.filter((a,o)=>o%2==0):t===1?r.filter((a,o)=>o%5==0):void 0,gF=(r,t,e,i,s,n)=>t===0?r.filter((a,o)=>o%2==0):t===1?r.filter((a,o)=>o%3==0):t===2?r.filter((a,o)=>o%4==0):t===3?r.filter((a,o)=>o%5==0):void 0,yF=ue(void 0,2,5),mF=(r,t,e,i,s,n)=>t===0?[r[1],r[3],r[5]]:t===1?[r[0],r[3]]:t===2?[r[1]]:void 0,Bb=(r,t)=>{const e=rh(r),i=Tl(r);if(t)return(n,a)=>{const o=[],l=Math.floor(e(n)),u=Math.ceil(e(a));for(let d=l-1;d<=u+1;d+=1){const f=i**d;o.push(f)}return o};const s=r===10?9:4;return(n,a)=>{const o=Math.round(e(n)),l=Math.round(e(a)),u=[],d=i**o,f=(i**l-d)/s;for(let y=1;y<=s;y+=1){const m=d+f*y;m>n&&m<a&&u.push(m)}return u}},pF=Ae({type:"numeric-ticks",cursorFormatter:void 0,extremeTickStyle:new pn,majorTickStyle:new pn,minorTickStyle:new pn,formattingOffset:void 0,extremeFormattingFunction:void 0,majorFormattingFunction:void 0,minorFormattingFunction:void 0});class SF extends pF{Yh(t){const e=this.formattingOffset,i=this.get("extremeFormattingFunction")||(t.type==="logarithmic"?(u,d)=>Hn.LogarithmicNoExponents(u,d,void 0,t.base):Hn.Numeric),s=this.get("majorFormattingFunction")||(t.type==="logarithmic"?(u,d)=>Hn.LogarithmicNoExponents(u,d,void 0,t.base):Hn.Numeric),n=this.get("minorFormattingFunction")||(t.type==="logarithmic"?(u,d)=>Hn.LogarithmicNoExponents(u,d,void 0,t.base):Hn.Numeric),a=[],o=[];a0(this.extremeTickStyle)||a.push({Ue:"Extreme ticks",lr:this.extremeTickStyle,nr:e===void 0?i:(u,d,f)=>i(e+u,d,f),Br:aD,Oe:!0,mr:!0}),o.push({Ue:"Major ticks",Rg:0,lr:this.majorTickStyle,nr:e===void 0?s:(u,d,f)=>s(e+u,d,f),Br:t.type==="logarithmic"?Bb(t.base,!0):Lb(0,!0),bh:t.type==="logarithmic"?{dr:gF}:{dr:fF},Lr:void 0}),a0(this.minorTickStyle)||o.push({Ue:"Minor ticks",Rg:1,lr:this.minorTickStyle,nr:e===void 0?n:(u,d,f)=>n(e+u,d,f),Br:t.type==="logarithmic"?Bb(t.base,!1):Lb(1,!1),bh:t.type==="logarithmic"?{dr:mF}:{dr:yF},Lr:50});const l=this.cursorFormatter?this.cursorFormatter:Hn.Numeric;return{He:a,$e:o,Ge:e===void 0?l:(u,d,f)=>l(e+u,d,f),Xh:1e-9,jh:void 0}}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setExtremeTickStyle(t){if(typeof t=="function"){const e=this.get("extremeTickStyle");return this.set("extremeTickStyle",t(e))}return this.set("extremeTickStyle",t)}getExtremeTickStyle(){return this.get("extremeTickStyle")}setFormattingOffset(t){return this.set("formattingOffset",t)}getFormattingOffset(){return this.get("formattingOffset")}setTickStyle(t){const e=this.setMajorTickStyle(t).setMinorTickStyle(t);return e.extremeTickStyle!==mE?e.setExtremeTickStyle(t):e}setMajorTickStyle(t){return typeof t=="function"?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if(typeof t=="function"){const e=this.get("minorTickStyle");return this.set("minorTickStyle",t(e))}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setFormattingFunction(t){return this.withMutations(e=>e.set("extremeFormattingFunction",t).set("majorFormattingFunction",t).set("minorFormattingFunction",t).set("cursorFormatter",t))}getExtremeFormattingFunction(){return this.get("extremeFormattingFunction")}setExtremeFormattingFunction(t){return this.set("extremeFormattingFunction",t)}getMajorFormattingFunction(){return this.get("majorFormattingFunction")}setMajorFormattingFunction(t){return this.set("majorFormattingFunction",t)}getMinorFormattingFunction(){return this.get("minorFormattingFunction")}setMinorFormattingFunction(t){return this.set("minorFormattingFunction",t)}}const xF=Ae({type:"time-ticks",cursorFormatter:void 0,timeOrigin:void 0,majorTickStyle:new pn,minorTickStyle:new pn,majorFormattingFunction:void 0,minorFormattingFunction:void 0}),qo=(r,t)=>{const e=t-r;return e>=864e5?"MajorHours12":e>=36e5?"MajorHours":e>=6e5?"MajorMinutes15":e>=9e4?"MajorMinutes":e>=10500?"MajorSeconds15":e>=1e3?"MajorSeconds":e>=100?"MajorMilliseconds100":e>=10?"MajorMilliseconds10":e>=1?"MajorMilliseconds":e>=.1?"MajorMicroseconds100":e>=.01?"MajorMicroseconds10":e>=.001?"MajorMicroseconds":e<=.001?"MajorNanoseconds100":"Unknown"},pe={hhmmss:r=>{let t=Math.abs(r);const e=r>=0?"":"-",i=Math.floor(t/36e5);t%=36e5;const s=Math.floor(t/6e4);t%=6e4;const n=Math.floor(t/1e3);return`${e}${ps(i,2)}:${ps(s,2)}:${ps(n,2)}`},hhmmssmmm:r=>{let t=Math.abs(r);const e=r>=0?"":"-",i=Math.floor(t/36e5);t%=36e5;const s=Math.floor(t/6e4);t%=6e4;const n=Math.floor(t/1e3);t%=1e3;const a=Math.floor(t/1);return`${e}${ps(i,2)}:${ps(s,2)}:${ps(n,2)}.${ps(a,3)}`},hhmmssmmmuuu:r=>{const t=Math.abs(r),e=r>=0?"":"-",i=Math.floor(t/36e5),s=Math.floor(t/6e4)%60,n=Math.floor(t/1e3)%60,a=Math.floor(t/1)%1e3,o=r.toLocaleString("en-US",{minimumFractionDigits:3,maximumFractionDigits:3}).split(".")[1];return`${e}${ps(i,2)}:${ps(s,2)}:${ps(n,2)}.${ps(a,3)}${o}`},hhmmssmmmuuunnn:r=>{const t=Math.abs(r),e=r>=0?"":"-",i=Math.floor(t/36e5),s=Math.floor(t/6e4)%60,n=Math.floor(t/1e3)%60,a=Math.floor(t/1)%1e3,o=r.toLocaleString("en-US",{minimumFractionDigits:6,maximumFractionDigits:6}).split(".")[1];return`${e}${ps(i,2)}:${ps(s,2)}:${ps(n,2)}.${ps(a,3)}${o}`}},jo={MajorHours12:{major:{format:pe.hhmmss,getKeyValues:(r,t,e,i)=>(r=Math.floor(r/(4*432e5))*432e5*4,Xs(r,t,432e5,void 0,1e6)),fitKeyValues:ue({ignore:"first"},2,4)},minor:{format:pe.hhmmss,getKeyValues:(r,t,e,i)=>Ks(r,t,36e5,1e6),fitKeyValues:ue({},2,3,4,6)},defaultValueFormatter:pe.hhmmss},MajorHours:{major:{format:pe.hhmmss,getKeyValues:(r,t,e,i)=>(r=Math.floor(r/(12*36e5))*36e5*12,Xs(r,t,36e5,void 0,1e6)),fitKeyValues:ue({ignore:"first"},2,6,12)},minor:{format:pe.hhmmss,getKeyValues:(r,t,e,i)=>Ks(r,t,3e5,1e6),fitKeyValues:ue({},2,4,6)},defaultValueFormatter:pe.hhmmss},MajorMinutes15:{major:{format:pe.hhmmss,getKeyValues:(r,t,e,i)=>(r=36e5*Math.floor(r/36e5),Xs(r,t,9e5,void 0,1e6)),fitKeyValues:ue({ignore:"first"},2)},minor:{format:pe.hhmmss,getKeyValues:(r,t,e,i)=>Ks(r,t,6e4,1e6),fitKeyValues:ue({},3,5)},defaultValueFormatter:pe.hhmmss},MajorMinutes:{major:{format:pe.hhmmss,getKeyValues:(r,t,e,i)=>(r=Math.floor(r/6e5)*6e4*10,Xs(r,t,6e4,void 0,1e6)),fitKeyValues:ue({ignore:"first"},2,5)},minor:{format:pe.hhmmss,getKeyValues:(r,t,e,i)=>Ks(r,t,5e3,1e6),fitKeyValues:ue({},2,3,4,6)},defaultValueFormatter:pe.hhmmss},MajorSeconds15:{major:{format:pe.hhmmss,getKeyValues:(r,t,e,i)=>(r=Math.floor(r/6e4)*15e3*4,Xs(r,t,15e3,void 0,1e6)),fitKeyValues:ue({ignore:"first"},2,4)},minor:{format:pe.hhmmss,getKeyValues:(r,t,e,i)=>Ks(r,t,1e3,1e6),fitKeyValues:ue({},3,5)},defaultValueFormatter:pe.hhmmss},MajorSeconds:{major:{format:pe.hhmmssmmm,getKeyValues:(r,t,e,i)=>(r=Math.floor(r/1e4)*1e3*10,Xs(r,t,1e3,void 0,1e6)),fitKeyValues:ue({ignore:"first"},2,5)},minor:{format:pe.hhmmssmmm,getKeyValues:(r,t,e,i)=>Ks(r,t,100,1e6),fitKeyValues:ue({},2,3,5)},defaultValueFormatter:pe.hhmmssmmm},MajorMilliseconds100:{major:{format:pe.hhmmssmmm,getKeyValues:(r,t,e,i)=>(r=100*Math.floor(r/1e3)*10,Xs(r,t,100,void 0,1e6)),fitKeyValues:ue({ignore:"first"},2,5)},minor:{format:pe.hhmmssmmm,getKeyValues:(r,t,e,i)=>Ks(r,t,10,1e6),fitKeyValues:ue({},2,3,5)},defaultValueFormatter:pe.hhmmssmmm},MajorMilliseconds10:{major:{format:pe.hhmmssmmm,getKeyValues:(r,t,e,i)=>(r=10*Math.floor(r/100)*10,Xs(r,t,10,void 0,1e6)),fitKeyValues:ue({ignore:"first"},2,5)},minor:{format:pe.hhmmssmmm,getKeyValues:(r,t,e,i)=>Ks(r,t,1,1e6),fitKeyValues:ue({},2,3,5)},defaultValueFormatter:pe.hhmmssmmm},MajorMilliseconds:{major:{format:pe.hhmmssmmmuuu,getKeyValues:(r,t,e,i)=>(r=1*Math.floor(r/10)*10,Xs(r,t,1,void 0,1e6)),fitKeyValues:ue({ignore:"first"},2,5)},minor:{format:pe.hhmmssmmmuuu,getKeyValues:(r,t,e,i)=>Ks(r,t,.1,1e6),fitKeyValues:ue({},2)},defaultValueFormatter:pe.hhmmssmmmuuu},MajorMicroseconds100:{major:{format:pe.hhmmssmmmuuu,getKeyValues:(r,t,e,i)=>(r=.1*Math.floor(r/1)*10,Xs(r,t,.1,void 0,1e6)),fitKeyValues:ue({ignore:"first"},2,5)},minor:{format:pe.hhmmssmmmuuu,getKeyValues:(r,t,e,i)=>Ks(r,t,.01,1e6),fitKeyValues:ue({},2,3,5)},defaultValueFormatter:pe.hhmmssmmmuuu},MajorMicroseconds10:{major:{format:pe.hhmmssmmmuuu,getKeyValues:(r,t,e,i)=>(r=Math.floor(r/.1)*.01*10,Xs(r,t,.01,void 0,1e6)),fitKeyValues:ue({ignore:"first"},2,5)},minor:{format:pe.hhmmssmmmuuu,getKeyValues:(r,t,e,i)=>Ks(r,t,.001,1e6),fitKeyValues:ue({},2,3,5)},defaultValueFormatter:pe.hhmmssmmmuuu},MajorMicroseconds:{major:{format:pe.hhmmssmmmuuunnn,getKeyValues:(r,t,e,i)=>(r=Math.floor(r/.01)*.001*10,Xs(r,t,.001,void 0,1e6)),fitKeyValues:ue({ignore:"first"},2,5)},minor:{format:pe.hhmmssmmmuuunnn,getKeyValues:(r,t,e,i)=>Ks(r,t,100*1e-6,1e6),fitKeyValues:ue({},2,3,5)},defaultValueFormatter:pe.hhmmssmmmuuunnn},MajorNanoseconds100:{major:{format:pe.hhmmssmmmuuunnn,getKeyValues:(r,t,e,i)=>{const s=9999999999999999e-20;return r=Math.floor(r/.001)*s*10,Xs(r,t,s,void 0,1e6)},fitKeyValues:ue({ignore:"first"},2,5)},minor:{format:pe.hhmmssmmmuuunnn,getKeyValues:(r,t,e,i)=>Ks(r,t,10*1e-6,1e6),fitKeyValues:ue({},2,3,5)},defaultValueFormatter:pe.hhmmssmmmuuunnn},Unknown:{major:{format:(r,t,e)=>"",getKeyValues:(r,t,e,i)=>[],fitKeyValues:void 0},minor:{format:(r,t,e)=>"",getKeyValues:(r,t,e,i)=>[],fitKeyValues:void 0},defaultValueFormatter:(r,t,e)=>""}};class AF extends xF{Yh(t){const e=this.timeOrigin||0,i=[{Ue:"Major ticks",Rg:0,lr:this.majorTickStyle,nr:this.majorFormattingFunction?this.majorFormattingFunction:(s,n,a)=>{const o=qo(Math.min(n.getInnerStart(),n.getInnerEnd()),Math.max(n.getInnerStart(),n.getInnerEnd()));return(0,jo[o].major.format)(s+e,n,a)},Br:(s,n,a,o)=>{const l=qo(a,o);return(0,jo[l].major.getKeyValues)(s,n,a,o)},bh:{dr:(s,n,a,o,l,u)=>{const d=qo(l,u),f=jo[d].major.fitKeyValues;if(f)return f(s,n,a,o,l,u)}},Lr:void 0}];return yE(this.minorTickStyle)&&i.push({Ue:"Minor ticks",Rg:1,lr:this.minorTickStyle,nr:this.minorFormattingFunction?this.minorFormattingFunction:(s,n,a)=>{const o=qo(Math.min(n.getInnerStart(),n.getInnerEnd()),Math.max(n.getInnerStart(),n.getInnerEnd()));return(0,jo[o].minor.format)(s+e,n,a)},Br:(s,n,a,o)=>{const l=qo(a,o);return(0,jo[l].minor.getKeyValues)(s,n,a,o)},bh:{dr:(s,n,a,o,l,u)=>{const d=qo(l,u),f=jo[d].minor.fitKeyValues;if(f)return f(s,n,a,o,l,u)}},Lr:void 0}),{He:[],$e:i,Ge:this.cursorFormatter||((s,n,a)=>{const o=qo(Math.min(n.getInnerStart(),n.getInnerEnd()),Math.max(n.getInnerStart(),n.getInnerEnd()));return jo[o].defaultValueFormatter(s+e,n,a)}),Xh:1e-4,jh:864e6}}setTickStyle(t){return this.setMajorTickStyle(t).setMinorTickStyle(t)}setMajorTickStyle(t){return typeof t=="function"?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if(typeof t=="function"){const e=this.get("minorTickStyle");return this.set("minorTickStyle",t(e))}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setTimeOrigin(t){return this.set("timeOrigin",t)}getTimeOrigin(){return this.get("timeOrigin")}setFormattingFunction(t){return this.withMutations(e=>e.set("majorFormattingFunction",t).set("minorFormattingFunction",t).set("cursorFormatter",t))}getMajorFormattingFunction(){return this.get("majorFormattingFunction")}setMajorFormattingFunction(t){return this.set("majorFormattingFunction",t)}getMinorFormattingFunction(){return this.get("minorFormattingFunction")}setMinorFormattingFunction(t){return this.set("minorFormattingFunction",t)}}const pE=(r,t,e="image/png",i)=>{t+=`.${e.slice(e.indexOf("image/")+6)}`;const s=r.captureFrame(e,i);if(e!=="image/png"&&s.type.includes("image/png"))throw new Error(`saveToFile | type not supported by browser: ${e}
Check support table for HTMLCanvasElement.toDataURL`);if(nt.navigator.msSaveBlob)nt.navigator.msSaveBlob(s,t);else{const n=nt.document.createElement("a");nt.document.body.appendChild(n);const a=nt.URL.createObjectURL(s);n.href=a,n.download=t,n.click(),setTimeout(()=>{nt.URL.revokeObjectURL(a),nt.document.body.removeChild(n)},0)}},o0=(r,t,e,i,s,n)=>{const a=r.Zu(t,e,i,s,n,!0);return a.setDraggingMode(De.draggable),a},h0=(r,t)=>{if(r==="relative")return t;if(r instanceof gn)return r;const e=r.x instanceof lh?r.x.dt:r.x.x,i=r.y instanceof lh?r.y.dt:r.y.y;return F0(e,i)},Y0=(r,t,e,i,s)=>{if(e){const n=r,a=t,o=ml(a)?a:Dn(a)?i:void 0;if(o&&gl(e)){const l=gt(n,o,s.dt);return s.Do({engineX:l.x,engineY:l.y})}if(o&&Dn(e))return gt(n,o,i);if(o&&ml(e))return gt(n,o,e)}else{const n=r;if(Dn(t)){const a=s.Po(n);return gt({x:a.engineX,y:a.engineY},s.dt,i)}if(ml(t)){const a=t,o=s.Po(n);return gt({x:o.engineX,y:o.engineY},s.dt,a)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")};class SE{constructor(t,e,i,s,n,a,o,l){this.coordsRelative="relative",this.coordsClient="client",this.Hg=[],this.$g=[],this.D=new Ii,this.Xg=void 0,this.jg=void 0,this.Zg=void 0,this.Xt=ka(0,0,0,0),this.Qg=!1,this.$i=!1,this.Jg=()=>{this.Kg=!0,this.qg.Ss()},this.tm=f=>y=>{const m=this.Hg.indexOf(y);m!==-1&&this.Hg.splice(m,1),this.us.Ss(),f.W()},this.im=f=>{const y=this.$g.indexOf(f);y!==-1&&this.$g.splice(y,1),this.us.Ss()},this.Kg=!0,this.onInViewChange=f=>this.D.on("inViewChange",f),this.offInViewChange=f=>this.D.off(f,"inViewChange"),this.cA=t,this.sm=i,this.qg=s,this.removePanel=n,this.qi=e.us.qi;const u=e.us.oi();if(this.uiScale=i.d2({scaleXYConstructor:xe}).Vi(0,100).Oi(0,100).q(u),this.pixelScale=i.d2({scaleXYConstructor:xe}).Vi(0,this.uiScale.x.getCellSize()).Oi(0,this.uiScale.y.getCellSize()).q(u),this.engine=e.us.hm,this.us=e.us.rm,this.es=this.us.es.hs(this,{}),this.nm=()=>e.om("unidentified ui"),this.am=e.lm(),this.um=this.qg.ke(this.uiScale).Fe(Y(0,0)).q(Y(100,100)).Ce(a).we(o).setMouseMoveEventHandler((f,y)=>this.D.emit("mouseMovePanelBackground",this,y)).setMouseEnterEventHandler((f,y)=>this.D.emit("mouseEnterPanelBackground",this,y)).setMouseLeaveEventHandler((f,y)=>this.D.emit("mouseLeavePanelBackground",this,y)).setMouseDownEventHandler((f,y)=>this.D.emit("mouseDownPanelBackground",this,y)).setMouseUpEventHandler((f,y)=>this.D.emit("mouseUpPanelBackground",this,y)).setMouseClickEventHandler((f,y)=>this.D.emit("mouseClickPanelBackground",this,y)).setMouseDoubleClickEventHandler((f,y)=>this.D.emit("mouseDoubleClickPanelBackground",this,y)).setMouseWheelEventHandler((f,y)=>this.D.emit("mouseWheelPanelBackground",this,y)).setMouseDragStartEventHandler((f,y,m)=>this.D.emit("mouseDragStartPanelBackground",this,y,m)).setMouseDragEventHandler((f,y,m,p,x)=>this.D.emit("mouseDragPanelBackground",this,y,m,p,x)).setMouseDragStopEventHandler((f,y,m,p)=>this.D.emit("mouseDragStopPanelBackground",this,y,m,p)).setTouchStartEventHandler((f,y)=>this.D.emit("touchStartPanelBackground",this,y)).setTouchMoveEventHandler((f,y)=>this.D.emit("touchMovePanelBackground",this,y)).setTouchEndEventHandler((f,y)=>this.D.emit("touchEndPanelBackground",this,y)),l){const f=l.on(this.Jg);this.dm=()=>l.off(f)}else{const f=e.us.Co(this.Jg);this.fm=e.us.ko.bind(e.us,f)}const d=e.us.Fo(f=>{this.Qg=f,this.D.emit("inViewChange",this,f)});this.Am=e.us.Io.bind(e.us,d),this.Xg=n}getTheme(){return this.qi}getSizePixels(){return this.pixelScale.getInnerIntervalPixels()}setBackgroundFillStyle(t){return this.um.Ce(t),this.qg.Ss(),this}getBackgroundFillStyle(){return this.um.Eh()}setBackgroundStrokeStyle(t){return this.um.we(t),this.qg.Ss(),this}getBackgroundStrokeStyle(){return this.um.ao()}translateCoordinate(t,e,i){return Y0(t,e,i,this.pixelScale,this.us)}gm(t){return this.Hg.push(t),this.us.Ss(),t}ym(t){return this.$g.push(t),this.us.Ss(),t}addUIElement(t=pS,e=this.uiScale){e=h0(e,this.pixelScale);const i=this.nm();return this.gm(o0(t,i,this.uiScale,e,this.tm(i),this.qi))}addLegendBox(t=O0,e=this.uiScale){e=h0(e,this.pixelScale);const i=this.ym(o0(t,this.am,this.uiScale,e,this.im,this.qi));return i.setDraggingMode(De.notDraggable),e!==void 0&&e!==this.uiScale||(t===void 0||t.getAlignment()==="vertical"?i.setOrigin(wl.RightCenter).setPosition({x:100,y:50}):i.setOrigin(wl.CenterBottom).setPosition(this.uiScale.mi({x:50,y:0},{x:0,y:3}))),i}getLegendBoxes(){return this.$g}dispose(){return this.$i||(this.$i=!0,this.fm&&this.fm(),this.dm&&this.dm(),_l(this.uiScale),_l(this.pixelScale),this.Am&&this.Am(),this.jg&&this.jg(),this.qg.W(),this.am.W(),this.Hg.slice().forEach(t=>{t.dispose()}),this.$g.slice().forEach(t=>{t.dispose()}),this.us.Ss(),this.Xg&&this.Xg(this),this.D.emit("dispose",this)),this}isDisposed(){return this.$i}onDispose(t){return this.D.on("dispose",t)}offDispose(t){return this.D.off(t,"dispose")}saveToFile(t,e,i){return pE(this.engine,t,e,i),this}Fr(t){this.Xt=t,this.Jg()}j(){return this.pixelScale.j(),this.uiScale.j(),this}Z(){return this.pixelScale.Z(),this.uiScale.Z(),this}Te(t){if(this.Kg){const e=this.qg.us.oi(),i=e.x,s=e.y;this.uiScale.q(i,s),this.pixelScale.q(i,s);const n=[this.Xt.left,this.Xt.right],a=[this.Xt.bottom,this.Xt.top];this.uiScale.Ei(n),this.uiScale.zi(a);const o=this.uiScale.getInnerIntervalPixels();this.pixelScale.Vi(0,o.x).Ei(n).Oi(0,o.y).zi(a),this.D.emit("resize",this,o.x,o.y,i,s)}this.Kg=!1}pm(){for(let t=0;t<this.Hg.length;t+=1)this.Hg[t].Ps().Te();for(let t=0;t<this.$g.length;t+=1)this.$g[t].Ps().Te();this.Zg&&this.Zg()}Sm(t,e){if(t){const i=t(e);this.onResize(i.Ps.bind(i)),this.jg=i.W.bind(i),this.Zg=i.Ps.bind(i)}}onBackgroundMouseEnter(t){return this.D.on("mouseEnterPanelBackground",t)}offBackgroundMouseEnter(t){return this.D.off(t,"mouseEnterPanelBackground")}onBackgroundMouseMove(t){return this.D.on("mouseMovePanelBackground",t)}offBackgroundMouseMove(t){return this.D.off(t,"mouseMovePanelBackground")}onBackgroundMouseLeave(t){return this.D.on("mouseLeavePanelBackground",t)}offBackgroundMouseLeave(t){return this.D.off(t,"mouseLeavePanelBackground")}onBackgroundMouseDown(t){return this.D.on("mouseDownPanelBackground",t)}offBackgroundMouseDown(t){return this.D.off(t,"mouseDownPanelBackground")}onBackgroundMouseUp(t){return this.D.on("mouseUpPanelBackground",t)}offBackgroundMouseUp(t){return this.D.off(t,"mouseUpPanelBackground")}onBackgroundMouseClick(t){return this.D.on("mouseClickPanelBackground",t)}offBackgroundMouseClick(t){return this.D.off(t,"mouseClickPanelBackground")}onBackgroundMouseDoubleClick(t){return this.D.on("mouseDoubleClickPanelBackground",t)}offBackgroundMouseDoubleClick(t){return this.D.off(t,"mouseDoubleClickPanelBackground")}onBackgroundMouseDragStart(t){return this.D.on("mouseDragStartPanelBackground",t)}offBackgroundMouseDragStart(t){return this.D.off(t,"mouseDragStartPanelBackground")}onBackgroundMouseDrag(t){return this.D.on("mouseDragPanelBackground",t)}offBackgroundMouseDrag(t){return this.D.off(t,"mouseDragPanelBackground")}onBackgroundMouseDragStop(t){return this.D.on("mouseDragStopPanelBackground",t)}offBackgroundMouseDragStop(t){return this.D.off(t,"mouseDragStopPanelBackground")}onBackgroundMouseWheel(t){return this.D.on("mouseWheelPanelBackground",t)}offBackgroundMouseWheel(t){return this.D.off(t,"mouseWheelPanelBackground")}onBackgroundTouchStart(t){return this.D.on("touchStartPanelBackground",t)}offBackgroundMouseTouchStart(t){return this.D.off(t,"touchStartPanelBackground")}onBackgroundTouchMove(t){return this.D.on("touchMovePanelBackground",t)}offBackgroundTouchMove(t){return this.D.off(t,"touchMovePanelBackground")}onBackgroundTouchEnd(t){return this.D.on("touchEndPanelBackground",t)}offBackgroundTouchEnd(t){return this.D.off(t,"touchEndPanelBackground")}onResize(t){return this.D.on("resize",t)}offResize(t){return this.D.off(t,"resize")}getIsInView(){return this.Qg}}const _l=r=>{r.ii&&r.ii()};class xS extends SE{constructor(t,e,i,s,n,a){super(t,e,i,e.vm("uipanel bg",0),s,e.us.qi.uiPanelBackgroundFillStyle,e.us.qi.uiPanelBackgroundStrokeStyle,a),this.Sm(n,this.pixelScale)}setMinimumSize(t){return this.xd=t,this.us.Ss(),this}getMinimumSize(){return this.xd}Te(t){super.Te(t),super.pm()}}const vF=ka(10,10,10,10);class Qr extends SE{constructor(t,e,i,s,n,a,o,l,u,d){super(t,e,i,s,n,a,o,d),this.bm={},this.ya=vF,this.th=!0,this.xm=e.Mm("chart internal ui",0),this._m=this.xm.Pr(this.uiScale).Rh("Chart").Fe(Y(50,100)).Ea(Y(0,1)).Oh(l).Ce(u).setMouseInteractions(!1),this.wm=this.es.yg([this._m]).ps(this.qi.effectsText)}setAnimationsEnabled(t){return this.th=t,this}getAnimationsEnabled(){return this.th}setTitle(t){return this._m.Rh(t),this.us.Ss(),this}getTitle(){return this._m.Bh()}getTitleSize(){return this._m.Ps().jc()}setTitleFillStyle(t){return this._m.Ce(t),this.Jg(),this}getTitleFillStyle(){return this._m.Eh()}setTitleFont(t){return this._m.Oh(t),this.Jg(),this}getTitleFont(){return this._m.Vh()}setTitleRotation(t){return this._m.Nh(t),this.us.Ss(),this}getTitleRotation(){return this._m.Gh()}setTitleEffect(t){return this.wm.ps(t),this.us.Ss(),this}getTitleEffect(){return this.wm.vs()}setTitleMargin(t){var e,i;return this.bm=typeof t=="object"?this.bm?(e=this.bm,{left:(i=t).left!==void 0?i.left:e.left,top:i.top!==void 0?i.top:e.top,right:i.right!==void 0?i.right:e.right,bottom:i.bottom!==void 0?i.bottom:e.bottom}):t:{left:t,top:t,right:t,bottom:t},this.Jg(),this}getTitleMargin(){return this.bm}setPadding(t){return this.ya=typeof t=="object"?fl(this.ya,t):{left:t,top:t,right:t,bottom:t},this.Jg(),this}getPadding(){return this.ya}Cm(t){const e=t.km(),i=e==null?void 0:e.height,s=e==null?void 0:e.width;if(i!==void 0&&s!==void 0)return{x:i/2,y:s/2}}dispose(){return super.dispose(),this.xm.W(),this}}const rs={Tm:(r,t)=>r.Eh()!==Vt&&r.Bh().length!==0&&r.getVisible()?r.Ps().jc().y:0,Fm(r,t){r.Fe(Y(50,100)).Fr({top:t.top!==void 0?t.top:10,right:t.right||0,left:t.left||0,bottom:t.bottom||0})}};var $e;(function(r){r[r.disabled=0]="disabled",r[r.snapToClosest=1]="snapToClosest",r[r.onHover=2]="onHover"})($e||($e={}));const ls={Im(r,t,e,i,s,n){let a;const o=r.getAutoCursorMode();if(!e&&o!==$e.disabled){const l=r.us.On(),u=i.find(d=>d.getIsUnderMouse());o===$e.snapToClosest&&s?(t||u!==void 0)&&(a=l&&s(l)):u===void 0||u.getCursorEnabled&&!u.getCursorEnabled()||(a=l&&n(u,l))}a?r.Pm.pointAt(a).setVisible(!0):r.Pm.setVisible(!1),r.Pm.Ps().Te()},Hc(r,t,e){if(t.x<r.uiScale.x.ei()||t.x>r.uiScale.x.hi()||t.y<r.uiScale.y.ei()||t.y>r.uiScale.y.hi())return;let i,s=Number.MAX_VALUE;for(const n of e)if(n.getCursorEnabled()&&n.getVisible()){const a=n.Hc(t);if(a){const o=gt(a.location,a.scale,r.engine.scale),l=ia(t,o);Number.isNaN(l)||i&&!(l<s)||(i=a,s=l)}}return i||void 0},Dm(r){r.onSeriesBackgroundMouseEnter(()=>{r.getAutoCursorMode()!==$e.disabled&&r.us.Ss()}),r.onSeriesBackgroundMouseMove(()=>{r.getAutoCursorMode()!==$e.disabled&&r.us.Ss()}),r.onSeriesBackgroundMouseLeave(()=>{r.getAutoCursorMode()!==$e.disabled&&r.us.Ss()}),r.onSeriesBackgroundTouchStart(()=>{r.getAutoCursorMode()!==$e.disabled&&r.us.Ss()}),r.onSeriesBackgroundTouchMove(()=>{r.getAutoCursorMode()!==$e.disabled&&r.us.Ss()}),r.onSeriesBackgroundTouchEnd(()=>{r.getAutoCursorMode()!==$e.disabled&&r.us.Ss()})},Bm(r,t){t.onMouseEnter((e,i)=>{r.getAutoCursorMode()!==$e.disabled&&r.us.Ss()}),t.onMouseMove((e,i)=>{r.getAutoCursorMode()!==$e.disabled&&r.us.Ss()}),t.onMouseLeave(()=>{r.getAutoCursorMode()!==$e.disabled&&r.us.Ss()})}};class xE{constructor(t,e){this.Lm=t,this.Rm=e}alter(t){this.Em=this.Em!==void 0?this.Em:this.Rm(),this.zm=t,this.Lm(t)}resetValue(){this.zm!==void 0&&(this.Em!==void 0&&this.isAltered()&&this.Lm(this.Em),this.Em=void 0,this.zm=void 0)}getNormalValue(){return this.Em!==void 0?this.Em:this.Rm()}isAltered(){return this.zm!==void 0&&this.Rm()===this.zm}}class AE{constructor(t,e){this.Vm=[],this.Om=t,this.dt=e}update(){return this.Om.getVisible()?!(this.Nm()&&(!this.Gm()||(this.resetTable(),this.Om.Ps(),this.Nm()))&&(this.Wm(),this.Om.Ps(),this.Nm()&&(this.resetTable(),this.Om.Ps(),1))):(this.Gm()&&this.resetTable(),!0)}Gm(){for(let t=0;t<this.Vm.length;t+=1)if(this.Vm[t].isAltered())return!0;return!1}resetTable(){for(let t=0;t<this.Vm.length;t+=1)this.Vm[t].resetValue();return this}Nm(){return((t,e)=>{const i=gt(t.getPosition(Y(-1,-1),Re.PaddedBackground),t.scale,e),s=gt(t.getPosition(Y(1,1),Re.PaddedBackground),t.scale,e);return i.x<e.x.getInnerStart()||s.x>e.x.getInnerEnd()||i.y<e.y.getInnerStart()||s.y>e.y.getInnerEnd()})(this.Om,this.dt)}Um(){return((t,e)=>{const i=gt(t.getPosition(Y(-1,-1),Re.PaddedBackground),t.scale,e),s=gt(t.getPosition(Y(1,1),Re.PaddedBackground),t.scale,e);return i.x<e.x.getInnerStart()||s.x>e.x.getInnerEnd()})(this.Om,this.dt)}Ym(){return((t,e)=>{const i=gt(t.getPosition(Y(-1,-1),Re.PaddedBackground),t.scale,e),s=gt(t.getPosition(Y(1,1),Re.PaddedBackground),t.scale,e);return i.y<e.y.getInnerStart()||s.y>e.y.getInnerEnd()})(this.Om,this.dt)}Hm(t){return this.Vm.push(t),t}}class bF extends AE{constructor(){super(...arguments),this.ma=this.Hm(new xE(t=>this.Om.setOrigin(t),()=>this.Om.getOrigin()))}Wm(){const t=this.ma.getNormalValue(),e=Y(this.Um()?-t.x:t.x,this.Ym()?-t.y:t.y);this.ma.alter(e)}}class MF extends AE{constructor(t,e,i,s){super(t,e),this.$m=this.Hm(new xE(n=>this.Om.setTextFont(a=>a.setSize(n)),()=>this.Om.getTextFont().getSize())),this.Xm=i,this.jm=s}Wm(){const t=this.$m.getNormalValue(),e=this.Xm;if(e<t)for(let i=1;i<=this.jm;i+=1){const s=t-(t-e)*(i/this.jm);if(this.$m.alter(s),this.Om.Ps(),!this.Nm())return}}}const RF={Flip:(r,t)=>new bF(r,t),FontSize:(r=5,t=5)=>(e,i)=>new MF(e,i,r,t)};class EF{constructor(){this.Zm=[]}addRow(...t){return this.Zm.push(t),this}}class Ui extends EF{Zu(){const t=this.Zm;return this.Zm=[],t}Qm(){return this.Zm.length=0,this}}class TF extends QD{constructor(){super(...arguments),this.Nu=this.qi.cursorResultTableTextFont,this.Dd=0,this.Jm=this.qi.cursorResultTableTextFillStyle}setContent(t){for(let s=0;s<t.length;s+=1){const n=t[s];let a=!1;for(let o=0;o<n.length;o+=1){const l=n[o],u=typeof l=="object"&&"text"in l?l.text:typeof l=="string"?l:void 0,d=typeof l=="object"&&"icon"in l?l.icon:ch(l)?l:void 0;if((u===void 0||u.length===0)&&!d){a=!0;break}}a||(n.unshift(""),n.push(""))}this.Km();const e=t.length;let i=this.getMembers().length;for(let s=0;s<Math.max(e,i);s+=1){const n=this.getRow(s,!0);if(s>=e)this.getMembers()[s].dispose(),s-=1,i-=1;else{const a=t[s].length;let o=n.getMembers().length;for(let l=0;l<Math.max(a,o);l+=1){const u=t[s][l],d=typeof u=="object"&&"font"in u?u.font:void 0,f=typeof u=="object"&&"fillStyle"in u?u.fillStyle:void 0,y=typeof u=="object"&&"text"in u?u.text:typeof u=="string"?u:void 0,m=typeof u=="object"&&"icon"in u?u.icon:ch(u)?u:void 0,p=n.getMembers();if(l>=a)n.getMembers()[l].dispose(),l-=1,o-=1;else if(y!==void 0&&y.length>0||m){for(let R=p.length;R<l;R+=1)n.addGap(void 0,void 0);const x=d?this.Nu.withMutations(R=>{for(const E of Object.keys(d)){const V=d[E];R.set(E,V)}return R}):this.Nu,b=f||this.Jm,v=p[l];if(y){let R;v&&v instanceof ap?R=v:(v&&v.dispose(),R=n.addElement(Wc,l)),R.setFont(x).setFillStyle(b).setText(y).setTextRotation(this.Dd)}else if(m){let R;v&&v instanceof I0?R=v:(v&&v.dispose(),R=n.addElement(ZD,l)),R.setFillStyle(b).setShape(m).setSize({y:x.size,x:x.size}),R.setMargin(5)}}else{for(let b=p.length;b<l;b+=1)n.addGap(void 0,void 0);const x=p[l];x&&x instanceof Fl||(x&&x.dispose(),n.addGap(void 0,l))}}}}return this.ks.Ss(),this}setTextFillStyle(t){this.Jm=typeof t=="function"?t(this.Jm):t;for(let e=0;e<this.getMemberCount();e+=1){const i=this.getRow(e);for(let s=0;s<i.getMembers().length;s+=1){const n=i.getMembers()[s];n instanceof ap&&n.setFillStyle(this.Jm)}}return this.ks.Ss(),this}getTextFillStyle(){return this.Jm}setTextFont(t){return dc(t)?this.Nu=t:this.Nu=t(this.Nu),this.ks.Ss(),this}getTextFont(){return this.Nu}setTextRotation(t){return this.Dd=t,this.ks.Ss(),this}getTextRotation(){return this.Dd}Km(){for(let t=0;t<this.Sd.length;t+=1)for(let e=0;e<this.Sd[t].getMembers().length;e+=1)this.Sd[t].getMembers()[e].dispose()}Ps(){for(let t=0;t<this.Sd.length;t+=1)this.Sd[t].setMinimumSize(void 0);super.Ps();for(let t=0;t<this.Sd.length;t+=1)this.Sd[t].setMinimumSize(this.size.x);return super.Ps(),this}}class vE{constructor(t,e,i,s,n){this.qm=!0,this.ty=!0,this.Qg=!1,this.ua=Y(0,0),this.Xi=!0,this.ks=t,this.renderingScale=e,this.scale=i,this.iy=s,this.sy=new I0(this.ks,this.renderingScale,this.scale,re,n).setMouseInteractions(!1).setFillStyle(n.cursorPointMarkerFillStyle).setSize(n.cursorPointMarkerSize).setShape(n.cursorPointMarkerShape),this.Om=new TF(this.ks,this.renderingScale,this.scale,this.iy,re,n).setMouseInteractions(!1).setBackground(a=>a.setFillStyle(n.cursorResultTableFillStyle).setStrokeStyle(n.cursorResultTableStrokeStyle)).setTextFillStyle(n.cursorResultTableTextFillStyle).setTextFont(n.cursorResultTableTextFont),this.ey=RF.Flip(this.Om,this.scale)}dispose(){return this.sy.dispose(),this.Om.dispose(),this}pointAt(t){return this.ua=t.scale===this.scale?t.location:gt(t.location,t.scale,this.scale),this.sy.setPosition(this.ua),this.Om.setPosition(this.ua).setContent(t.resultTableContent),this.ks.Ss(),this}getPosition(){return this.ua}setVisible(t){return this.Xi=t,this.ks.Ss(),this}getVisible(){return this.Xi}setPointMarkerVisible(t){return this.qm=t,this.ks.Ss(),this}getPointMarkerVisible(){return this.qm}setPointMarker(t){return t(this.sy),this.ks.Ss(),this}getPointMarker(){return this.sy}setResultTableVisible(t){return this.ty=t,this.ks.Ss(),this}getResultTableVisible(){return this.ty}setResultTable(t){return t(this.Om),this.ks.Ss(),this}getResultTable(){return this.Om}setAutoFitStrategy(t){return this.ey&&this.ey.resetTable(),this.ey=t?t(this.Om,this.ks.us.dt):void 0,this.ks.Ss(),this}getAutoFitStrategy(){return this.ey!==void 0}Te(){return this.ey&&this.ey.update(),this.Om.setVisible(this.Qg&&this.Xi&&this.ty),this.sy.setVisible(this.Qg&&this.Xi&&this.qm),this.sy.Te(),this.Om.Te(),this}Ps(){return this.sy.Ps(),this.Om.Ps(),this.Qg=((t,e,i=e)=>{const s=e!==i?gt(t,e,i):t;return s.x>=i.x.getInnerStart()&&s.x<=i.x.getInnerEnd()&&s.y>=i.y.getInnerStart()&&s.y<=i.y.getInnerEnd()})(this.ua,this.scale),this}}class bE extends vE{constructor(){super(...arguments),this.hy=!1}pointAt(t){return this.ny(t.fillStyle),super.pointAt(t)}ny(t){t&&this.hy&&this.Om.setTextFillStyle(t)}setResultTableAutoTextStyle(t){return this.hy=t,this.ks.Ss(),this}getResultTableAutoTextStyle(){return this.hy}}class ME extends vE{setPosition(t){return this.ua=t,this.sy.setPosition(t),this.Om.setPosition(t),this.ks.Ss(),this}}class AS{constructor(t,e=[]){this.oy=[],this.ly=(i,s)=>(this.oy.forEach(n=>n(i,s)),i),this.iy=t,this.oy=e}}class Cc extends AS{constructor(){super(...arguments),this.uy=(t,e,i,s)=>this.ly(new bE(t,e,i,this.iy,s),s),this.addStyler=t=>new Cc(this.iy,this.oy.map(e=>e).concat(t)),this.setResultTableBackground=t=>new Cc(t,this.oy.map(e=>e))}}class l0 extends AS{constructor(){super(...arguments),this.Ay=(t,e,i,s)=>this.ly(new ME(t,e,i,this.iy,s),s),this.addStyler=t=>new l0(this.iy,this.oy.map(e=>e).concat(t)),this.setResultTableBackground=t=>new l0(t,this.oy.map(e=>e))}}const vS=r=>r.setResultTable(t=>t.setEffect(!0).setOrigin(Y(-1,-1)).setMargin(5)),RE=(r,t)=>r.setPointMarker(e=>e.setFillStyle(t.chartMarkerPointMarkerFillStyle).setSize(t.chartMarkerPointMarkerSize).setShape(t.chartMarkerPointMarkerShape)).setResultTable(e=>e.setEffect(!0).setBackground(i=>i).setOrigin(Y(-1,-1)).setMargin(10)),EE=new Cc(rr,[vS]),TE=new Cc(op,[vS,r=>r.setPointMarkerVisible(!1).setResultTable(t=>t.setOrigin(Y(0,-1)).setMargin(0).setBackground(e=>{e instanceof op&&e.setDirection(qt.Down).setPointerLength(10).setPointerAngle(60)}))]),wF=EE,bS=EE,CF=TE,wE=new l0(rr,[RE,r=>r.setPointMarkerVisible(!1).setResultTable(t=>t.setOrigin(wl.LeftBottom))]),Us=(r,t,e,i,s)=>({location:r,scale:t,resultTableContent:e,owner:i,fillStyle:s});var u0;(function(r){r[r.LabelsInsideSlices=0]="LabelsInsideSlices",r[r.LabelsOnSides=1]="LabelsOnSides"})(u0||(u0={}));const MS={SortByName:(r,t)=>r.getName().localeCompare(t.getName(),void 0,{numeric:!0}),None:()=>0},RS={NamePlusValue:r=>`${r.getName()}: ${Math.round(r.getAnimatedValue())}`},ES=(r,t,e,i)=>r.addRow(e.getName()).addRow(e.getAnimatedValue().toString());class H0 extends Yc{constructor(){super(...arguments),this.xs="Slice",this.u=0}}const Pb=(r,t)=>{At(t),r.setExploded(!r.getExploded())};class kF extends H0{}class DF extends kF{constructor(t,e,i,s,n,a,o,l){super(s,a,o,l),this.gy=!1,this.my=Vt,this.yy=Vt,this.py=this.u,this.Sy=this.gy?1:0,this.vy=this.getVisible(),this.by=ta(()=>this.Ji.us.Ss()),this.xy=ta(()=>this.Ji.us.Ss()),this.My=()=>{this._y=void 0},this.wy=()=>{this.Cy=void 0},this.index=t,this.Ji=s,this.scale=n,this.Ki=a,this.ky=e.Jc(n).cs(this.getHighlight()),this.ds(this.ky),this.Ue=i.Pr(n).cs(this.getHighlight()),this.ds(this.Ue,{isText:!0}),this.onMouseClick(Pb),this.onTouchEnd(Pb)}setValue(t){return this.Ji.getAnimationsEnabled()?this.vy&&this.Ty(this.py,t):this.py=t,this.u=t,this.Ji.us.Ss(),this}getValue(){return this.u}setExploded(t){if(t&&this.Ji.getMultipleSliceExplosion()===!1){const e=this.Ji.getSlices();for(let i=0;i<e.length;i+=1)e[i]!==this&&e[i].getExploded()&&e[i].setExploded(!1)}return this.Ji.getAnimationsEnabled()?(this.Cy&&this.Cy.finish(),this.Cy=this.xy(300,Er.ease)([[this.Sy,t?1:0]],([e])=>{this.Sy=e,this.Ji.us.Ss()}),this.Cy.onEveryAnimationEnd(this.wy),this.gy=!this.gy):this.Ji.getMultipleSliceExplosion()!==!1||t?(this.Sy=this.gy?0:1,this.gy=!this.gy):(this.Sy=0,this.gy=!this.gy),this.Ji.us.Ss(),this}getExploded(){return this.gy}setVisible(t){return this.vy=t,t===!1?this.Ji.getAnimationsEnabled()&&this.py>0?(this._y&&(this._y.finish(!1),this._y=void 0),this.Ty(this.py,0,()=>super.setVisible(!1))):(this.py=0,super.setVisible(!1)):this.Ji.getAnimationsEnabled()?(this._y&&(this._y.finish(!1),this._y=void 0),super.setVisible(!0),this.Ty(this.py,this.u)):(this.py=this.u,super.setVisible(!0)),this}Ty(t,e,i){this._y=this.by(300,Er.ease)([[t,e]],([s])=>{this.py=s,this.Ji.us.Ss()}),this._y.onEveryAnimationEnd(this.My),i&&this._y.onAnimationEnd(i)}setStyle(t,e,i,s){this.my=t,this.yy=i,this.ky.Ce(this.my).we(e),this.Ue.Ce(this.yy).Oh(s);for(let n=0;n<this.Qi.length;n+=1)this.styleAttachedEntry(this.Qi[n])}getAnimatedValue(){return this.py}getAnimatedExplosion(){return this.Sy}attach(t,e=!0,i=!1){return super.attach(t,e,i),this.styleAttachedEntry(t,e,i),this}styleAttachedEntry(t,e=!0,i=!1){ii(t,this.qi,i,{fill:this.my,stroke:this.ky.ao()})}}const FF=(r,t,e)=>_t(t,Ht(aS(.5*(r.Jl()+r.Ti())*Math.PI/180),e)),VF=(r,t,e,i,s,n)=>{const a=r.length;let o=90;for(let l=0;l<a;l+=1){const u=r[l],d=o-360*t[l],f=u.getAnimatedExplosion();if(f===0||a===1)u.ky.Fe(e);else{const y=_t(e,Ht(aS(.5*(o+d)*Math.PI/180),n*f));u.ky.Fe(y)}u.ky.eu(o).ze(d).ru(i).nu(i).ou(s),o=d}},Ib=r=>{const t=r.getSlices();for(let e=0;e<t.length;e+=1)t[e].setExploded(!1)};class zF extends Qr{constructor(t,e,i,s,n,a,o){super(t,e,i,e.vm("pieChart bg",0),s,e.us.qi.pieChartBackgroundFillStyle,e.us.qi.pieChartBackgroundStrokeStyle,e.us.qi.pieChartTitleFont,e.us.qi.pieChartTitleFillStyle,a),this.Fy=[],this.Iy=MS.SortByName,this.Yl=0,this.Py=this.qi.pieChartSliceFillStylePalette,this.Dy=this.qi.pieChartSliceStrokeStyle,this.By=!0,this.Ly=this.qi.pieChartSliceLabelFont,this.Ry=this.qi.pieChartSliceLabelFillStyle,this.Ey=0,this.zy=!1,this.Vy=20,this.Oy=!0,this.Ny=!0,this.Gy=$e.onHover,this.Wy=ES,this.Uy=d=>{const f=this.Fy.indexOf(d);f>=0&&(this.Fy.splice(f,1),this.Yy())},this.us.Nn(Ct.af),this.Hy=e.$y("pieChart bottom",0),this.Xy=e.$y("pieChart top",1),this._m.Rh("Pie Chart"),this.Sm(n,this.pixelScale),this.onBackgroundMouseDoubleClick(Ib);const l=Is(new OR(Ib));this.onBackgroundTouchStart(l.onTouchStart),this.onBackgroundTouchMove(l.onTouchMove),this.onBackgroundTouchEnd(l.onTouchEnd),this.jy=e.Zy();const u=Fe(o?o.autoCursorBuilder:void 0,bS);this.Pm=u.uy(this.jy,this.uiScale,this.uiScale,this.qi),this.setAnimationsEnabled((o==null?void 0:o.disableAnimations)!==!0&&(o==null?void 0:o.animationsEnabled)!==!1)}setAutoCursor(t){return this.Pm&&t(this.Pm),this.us.Ss(),this}getAutoCursor(){return this.Pm}setAutoCursorMode(t){return this.Gy=t,this.us.Ss(),this}getAutoCursorMode(){return this.Gy}setCursorResultTableFormatter(t){return this.Wy=t,this.us.Ss(),this}addSlice(t,e){const i=new DF(this.Ey,this.Hy,this.Xy,this,this.pixelScale,this.Uy,this.qi,this.us.es);this.Ey+=1,i.setName(t);const s=this.th;return this.th=!1,i.setValue(e),this.th=s,i.setEffect(this.Oy),this.Qy(i),this.Fy.push(i),this.Yy(),i.setHighlightOnHover(this.By),i.onMouseMove(()=>{this.Gy&&this.us.Ss()}),i}addSlices(t){const e=[];for(let i=0;i<t.length;i+=1)e.push(this.addSlice(t[i].name,t[i].value));return e}getSlices(){return this.Fy}setMultipleSliceExplosion(t){return this.zy=t,this}getMultipleSliceExplosion(){return this.zy}setInnerRadius(t){return this.Yl=t,this.us.Ss(),this}getInnerRadius(){return this.Yl}setSliceExplosionOffset(t){return this.Vy=t,this.us.Ss(),this}getSliceExplosionOffset(){return this.Vy}setLUT(t){return this.Nd=t,this.us.Ss(),this}setSliceFillStyle(t){this.Py=t;for(let e=0;e<this.Fy.length;e+=1)this.Qy(this.Fy[e]);return this.us.Ss(),this}getSliceFillStyle(){return this.Py}setSliceStrokeStyle(t){this.Dy=typeof t=="function"?t(this.Dy):t;for(let e=0;e<this.Fy.length;e+=1)this.Qy(this.Fy[e]);return this.us.Ss(),this}getSliceStrokeStyle(){return this.Dy}setSliceEffect(t){return this.Oy=t,this.Fy.forEach(e=>e.es.ns.ps(t)),this.us.Ss(),this}getSliceEffect(){return this.Oy}setSliceSorter(t){return this.Iy=t,this.Fy=this.Fy.sort(this.Iy),this.us.Ss(),this}getSliceSorter(){return this.Iy}setLabelFillStyle(t){this.Ry=typeof t=="function"?t(this.Ry):t;for(let e=0;e<this.Fy.length;e+=1)this.Qy(this.Fy[e]);return this.us.Ss(),this}getLabelFillStyle(){return this.Ry}setLabelFont(t){this.Ly=typeof t=="function"?t(this.Ly):t;for(let e=0;e<this.Fy.length;e+=1)this.Qy(this.Fy[e]);return this.us.Ss(),this}getLabelFont(){return this.Ly}setLabelEffect(t){return this.Ny=t,this.Fy.forEach(e=>e.es.rs.ps(t)),this.us.Ss(),this}getLabelEffect(){return this.Ny}setLabelFormatter(t){return this.Jy=t,this.us.Ss(),this}getLabelFormatter(){return this.Jy}setSliceHighlightOnHover(t){return this.By=t,this.Fy.forEach(e=>e.setHighlightOnHover(t)),this}Te(t){super.Te(t),rs.Fm(this._m,this.bm),super.pm();const e=rs.Tm(this._m,this.bm),i=Y(this.pixelScale.x.getInnerInterval()-(this.ya.left+this.ya.right),this.pixelScale.y.getInnerInterval()-(this.ya.bottom+this.ya.top+e)),s=Y(this.ya.left+i.x/2,this.ya.bottom+i.y/2);if(this.Nd){const u=this.Nd;this.Fy.forEach(d=>{this.Qy(d,new it({color:u.getColors(d.getAnimatedValue())}))})}for(let u=0;u<this.Fy.length;u+=1){const d=this.Fy[u].getAnimatedValue()>0;this.Fy[u].ky.setVisible(d),this.Fy[u].Ue.setVisible(d)}this.Fy=this.Fy.sort(this.Iy);const n=this.Fy.filter(u=>u.getAnimatedValue()>0);let a=0;for(let u=0;u<n.length;u+=1)a+=n[u].getAnimatedValue();const o=[];for(let u=0;u<n.length;u+=1)o.push((l=n[u].getAnimatedValue())>0?l/a:0);var l;for(let u=0;u<n.length;u+=1){const d=n[u];d.Ue.Rh(this.Jy(d,o[u])).Ps()}ls.Im(this,!1,!1,this.Fy,void 0,(u,d)=>Us(d,this.engine.scale,this.Wy(new Ui,this,u,o[n.indexOf(u)]||0).Zu(),u,void 0)),this.Ky(n,o,s,i)}Qy(t,e=this.Py(t.index,t)){t.setStyle(e,this.Dy,this.Ry,this.Ly)}Yy(){this.Fy=this.Fy.sort(this.Iy),this.us.Ss()}Zd(){return this.Fy}dispose(){return super.dispose(),this.Fy.slice().forEach(t=>t.dispose()),this.Pm.dispose(),this.Xy.W(),this.Hy.W(),this.jy.W(),this}}const Fr={UserSeries:{type:"ApplicationType",args:{type:"UserSeries"}},InternalUI:{type:"ApplicationType",args:{type:"InternalUI"}}},Tf=(...r)=>{const t=[];return r.forEach(e=>{var i;e&&typeof(i=e)=="object"&&i&&"pattern"in i&&t.push({type:"DataPattern",args:e})}),t};class CE extends zF{constructor(t,e,i,s,n,a,o){super(t,e,i,s,n,a,o),this.Jy=RS.NamePlusValue,this.qy=[],this.tp=40,this.ip=5,this.sp=10,this.ep=this.qi.pieChartConnectorStrokeStyle,this.setPadding({bottom:50})}setLabelConnectorStyle(t){this.ep=t;for(let e=0;e<this.qy.length;e+=1)this.qy[e].Re(this.ep);return this.us.Ss(),this}getLabelConnectorStyle(){return this.ep}setLabelSliceOffset(t){return this.tp=t,this.us.Ss(),this}getLabelSliceOffset(){return this.tp}setLabelConnectorGapStart(t){return this.ip=t,this.us.Ss(),this}getLabelConnectorGapStart(){return this.ip}setLabelConnectorEndLength(t){return this.sp=t,this.us.Ss(),this}getLabelConnectorEndLength(){return this.sp}Ky(t,e,i,s){const n=this.Ly.getSize(),a=this.tp,o=this.sp,l=this.ip,u=Math.min(this.Vy,a-l);let d=0;if(t.length===1)d=t[0].Ue.jc().x;else for(let x=0;x<t.length;x+=1)d=Math.max(d,t[x].Ue.jc().x);const f=Math.max(.5*(Math.min(s.x-2*d-2*o,s.y-2*n)-2*a),0);VF(t,e,i,f,this.Yl,u);let y=90;const m=t.map((x,b)=>{const v=360*e[b],R=y-v,E=aS(br(.5*(y+R))),V=E.x>=0?-1:1,F=_t(_t(i,Ht(E,f+a)),{x:V*-o,y:0});y=R;const L={x:V,y:0};x.Ue.Fe(F).Ea(L),x.Ue.Ps();const z=Ze(x.Ue.We());return{position:F,alignment:L,shape:x.Ue,boundaries:z,sliceAngleVec:E,slice:x}}),p=[];for(let x=0;x<m.length;x+=1){const b=m[x],v=p[p.length-1];v&&LR([v.boundaries,b.boundaries])!==!1?b.shape.setVisible(!1):(p.push(b),b.shape.setVisible(!0))}for(let x=0;x<this.qy.length;x+=1)this.qy[x].setVisible(!1);p.forEach((x,b)=>{const v=x.slice.ky,R=FF(v,i,f+l+u*x.slice.getAnimatedExplosion()),E=nS(x.position.y,R,i),V=x.position;this.hp([R,E,V])})}getMinimumSize(){return Y(500,300)}hp(t){let e;for(let i=0;i<this.qy.length;i+=1)if(!this.qy[i].getVisible()){e=this.qy[i].setVisible(!0);break}e===void 0&&(e=this.Xy.rp(this.pixelScale,void 0,[Fr.InternalUI]).Re(this.ep).setMouseInteractions(!1),this.qy.push(e)),e.Nt().nl(t)}}const lp=r=>{if(As(r)){const t=r.getThickness(),e=r.getFillStyle();if(ce(e))return t===1?Rb:new jR({size:t,fillStyle:e,shape:"sphere"})}return Rb};class Na{constructor(t,e,i,s){this.op=[],this.ap=new Map,this.lp=t,this.up=e,this.cp=i,this.dp=s}fp(){this.cp&&this.cp();const t=[];return{add:(e,i)=>{t.push({instanceUniqueProperties:e,instanceSharedProperties:i})},finishPlot:()=>{const e=[];let i=[];t.forEach(a=>{const o=e.find(l=>((u,d)=>{const f=Object.keys(u);for(const y of f)if(u[y]!==d[y])return!1;return!0})(l.sharedProperties,a.instanceSharedProperties));o?o.instances.push(a.instanceUniqueProperties):e.push({sharedProperties:a.instanceSharedProperties,instances:[a.instanceUniqueProperties]})});const s=this.op.slice(),n=[];e.forEach(a=>{let o=s.pop();o||(o=this.lp(),this.op.push(o));const l=[],u=o.Ap().slice();a.instances.forEach((f,y)=>{const m=u.shift();l.push({...f,existingMember:m})});const d=this.up(o,l,a.sharedProperties);i=cs(i,d,{canReturnB:!0});for(let f=0;f<a.instances.length;f+=1)n.push({No:a.instances[f].No,collection:o,member:d[f]});u.forEach(f=>{o==null||o.bd(f)})}),s.forEach(a=>{a.dispose();const o=this.op.indexOf(a);o<0?kn(0,()=>{}):this.op.splice(o,1)}),n.forEach(a=>{const o=this.ap.get(a.No);o&&a.collection.us.qn({entity:o.collection,collectionMember:o.member},{entity:a.collection,collectionMember:a.member})}),this.ap.clear(),n.forEach(a=>{this.ap.set(a.No,a)}),this.dp&&this.dp(this.op,i)}}}gp(){this.op.forEach(t=>{t.dispose()}),this.op.length=0}}class Hr{constructor(t){this.mp=[],this.yp=t}fp(){return this.pp(),{add:()=>this.sl(),finishPlot:()=>{this.Sp()}}}sl(){let t=this.mp.find(e=>e.isFree);return t||(t={isFree:!1,shape:this.yp()},this.mp.push(t)),t.isFree=!1,t.shape}pp(){this.mp.forEach(t=>{t.isFree=!0})}Sp(){this.mp.filter(t=>t.isFree).forEach(t=>{t.shape.dispose(),this.mp.splice(this.mp.indexOf(t),1)})}gp(){this.mp.forEach(t=>t.shape.dispose()),this.mp.length=0}}class _F{constructor(t,e,i,s,n,a,o,l,u,d){this.D=new Ii,this.u=0,this.Xi=!0,this.$i=!1,this.Ss=t,this.vp=e,this.bp=i,this.xp=s,this.Mp=n,this._p=a,this.Dd=o,this.Jm=l,this.wp=u,this.Ju=d}setValue(t){return t===this.u||(this.u=t,this.Ss(),this.D.emit("valueChange",this,this.u)),this}getValue(){return this.u}setTickStyle(t){return this.bp=typeof t=="function"?t(this.bp):t,this.Ss(),this}getTickStyle(){return this.bp}setTickLength(t){return this.xp=t,this.Ss(),this}getTickLength(){return this.xp}setGridStrokeStyle(t){return this.Mp=typeof t=="function"?t(this.Mp):t,this.Ss(),this}getGridStrokeStyle(){return this.Mp}setTextPadding(t){return this._p=t,this.Ss(),this}getTextPadding(){return this._p}setTextRotation(t){return this.Dd=t,this.Ss(),this}getTextRotation(){return this.Dd}setTextFillStyle(t){return this.Jm=typeof t=="function"?t(this.Jm):t,this.Ss(),this}getTextFillStyle(){return this.Jm}setTextFont(t){return this.wp=typeof t=="function"?t(this.wp):t,this.Ss(),this}getTextFont(){return this.wp}setTextFormatter(t){return this.Ju=t,this.Ss(),this}onValueChange(t){return this.D.on("valueChange",t)}offValueChange(t){return this.D.off(t,"valueChange")}dispose(){return this.$i||(this.$i=!0,this.vp(),this.Ss(),this.D.emit("dispose",this)),this}isDisposed(){return this.$i}onDispose(t){return this.D.on("dispose",t)}offDispose(t){return this.D.off(t,"dispose")}setVisible(t){const e=this.Xi!==t;return this.Xi=t,e&&(this.D.emit("visibleStateChanged",this,this.Xi),this.Ss()),this}getVisible(){return this.Xi}onVisibleStateChanged(t){return this.D.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.D.off(t,"visibleStateChanged")}}class Dm extends lh{constructor(t,e,i,s,n,a,o,l,u){super(t,e,i,s,l,{numeric:e.Cp({x:t.us.qi.xAxis3DNumericTicks,y:t.us.qi.yAxis3DNumericTicks,z:t.us.qi.zAxis3DNumericTicks}),datetime:e.Cp({x:t.us.qi.xAxis3DDateTimeTicks,y:t.us.qi.yAxis3DDateTimeTicks,z:t.us.qi.zAxis3DDateTimeTicks}),time:e.Cp({x:t.us.qi.xAxis3DTimeTicks,y:t.us.qi.yAxis3DTimeTicks,z:t.us.qi.zAxis3DTimeTicks})},{type:"linear"}),this.Tf=[],this.kp=()=>{},this.Tp=()=>{},this.Fp=()=>{},this.Ip=()=>{},this.chart=t,this.At=n,this.Pp=a,this.Dp=o,this.Bp=this.At.dt;const d=this.wh.Cp({x:this.qi.xAxis3DStrokeStyle,y:this.qi.yAxis3DStrokeStyle,z:this.qi.zAxis3DStrokeStyle});this.Lp=this.At.rp([Fr.InternalUI]).Re(d).Rp(lp(d)).setMouseInteractions(!1),this.Lh=this.Pp.Pr(this.Dp).setMouseInteractions(!1).Ce(e.Cp({x:t.us.qi.xAxis3DTitleFillStyle,y:t.us.qi.yAxis3DTitleFillStyle,z:t.us.qi.zAxis3DTitleFillStyle})).Oh(e.Cp({x:t.us.qi.xAxis3DTitleFont,y:t.us.qi.yAxis3DTitleFont,z:t.us.qi.zAxis3DTitleFont})),this.Ep=new Hr(()=>this.Pp.Pr(this.Dp)),this.zp=new Na(()=>this.At.Lg().setMouseInteractions(!1),(f,y,m)=>(f.Nt().Re(m.lineStyle),y.map(({positions:p,existingMember:x})=>x||f.nl(p)))),this.es=u,this.Wh=this.es.yg([this.Lh]).ps(s.effectsText),this.Lp.setMouseEnterEventHandler(this.kp).setMouseLeaveEventHandler(this.Tp).setMouseDragEventHandler(this.Fp).setMouseDragStopEventHandler(this.Ip),i.ig=this}setTickStrategy(t,e){return super.Fh(t,e)}getTickStrategy(){return this.je}addCustomTick(){const t=new _F(()=>this.chart.us.Ss(),()=>{const e=this.Tf.indexOf(t);e>=0&&this.Tf.splice(e,1)},this.qi.xAxis3DNumericTicks.majorTickStyle.tickStyle,this.qi.xAxis3DNumericTicks.majorTickStyle.tickLength,this.qi.xAxis3DNumericTicks.majorTickStyle.gridStrokeStyle,this.qi.xAxis3DNumericTicks.majorTickStyle.tickPadding,this.qi.xAxis3DNumericTicks.majorTickStyle.labelRotation,this.qi.xAxis3DNumericTicks.majorTickStyle.labelFillStyle,this.qi.xAxis3DNumericTicks.majorTickStyle.labelFont,e=>this.formatValue(e));return this.Tf.push(t),this.chart.us.Ss(),t}setStrokeStyle(t){return this.Lp.Re(t).Rp(lp(this.Lp.uu())),this.chart.us.Ss(),this}getStrokeStyle(){return this.Lp.uu()}setMouseInteractions(t){return this}setVisible(t){return super.setVisible(t),this.Lp.setVisible(t),t===!1&&(this.zp.gp(),this.Ep.gp()),this.Pp.Ss(),this}_g(){return this.chart.getSeries()}Vp(t){return Math.abs(this.dt.tt(t)*this.At.Op(1))}Cr(t,e,i){const s=Math.abs(this.dt.tt(e-t)*this.At.Op(1));return{min:t-i*s,max:e+i*s}}ur(t,e){return new NF(e,t,this.Pp,this.Dp,this.At)}cr(t,e){const i=this.Np(e,t.u,t.Sh.lr.tickLength,t.Sh.lr.tickPadding);return t.Ue.Fe(i.labelPosition).Ea(i.labelAlignment),i}Np(t,e,i,s){const{wuSize:n,start:a,end:o,tickDirection3D:l,tickDirection2D:u}=t,d=(e-this.dt.getInnerStart())/(this.dt.getInnerEnd()-this.dt.getInnerStart()),f=ft.addVec(Am(a,o,d),ft.multiplyVec(ft.multiply(l,this.At.Op(.5*this.Lp.uu().getThickness())),n)),y=ft.addVec(f,ft.multiplyVec(ft.multiply(l,this.At.Op(i)),n)),m=this.At.Gp(y)||Y(0,0);return{labelPosition:_t(gt(m,this.chart.engine.scale,this.Dp),Ht(u,s)),labelAlignment:{x:-u.x,y:-u.y},posTickEnd3D:y,posTickStart3D:f,tickPositionRelative:d}}Wp(t,e,i){const{wuSize:s,start:n,end:a,tickDirection3D:o}=e,l=(t-this.dt.getInnerStart())/(this.dt.getInnerEnd()-this.dt.getInnerStart()),u=ft.addVec(Am(n,a,l),ft.multiplyVec(ft.multiply(o,this.At.Op(.5*this.Lp.uu().getThickness())),s)),d=ft.addVec(u,ft.multiplyVec(ft.multiply(o,this.At.Op(10)),s)),f=this.At.Gp(u)||Y(0,0),y=this.At.Gp(d)||Y(0,0);return this.Pp.Ee(this.Dp).Ve(f).ze(y).Re(new se({fillStyle:new it({color:o3(120*i)}),thickness:1}))}_r(t,e){return LF(t,e,this.dt)}Te(t){if(!this.Xi)return;const e=Math.min(this.Ih,this.Ph),i=Math.max(this.Ih,this.Ph),s=this.Bp,n=Bt(s.x.et(),s.y.et(),s.z.et());let a,o;this.Yp()?(a=Bt(s.x.getInnerEnd(),s.y.getInnerStart(),s.z.getInnerStart()),o=Bt(s.x.getInnerEnd(),s.y.getInnerStart(),s.z.getInnerEnd())):(a=Bt(s.x.getInnerStart(),s.y.getInnerStart(),s.z.getInnerStart()),o=this.wh.Hp(Bt(s.x.getInnerEnd(),s.y.getInnerEnd(),s.z.getInnerEnd()),a));const l=this.wh.Jd,u=this.At.Gp(a)||Y(0,0),d=this.At.Gp(o)||Y(0,0),f=Am(a,o,.5),y=ft.addVec(f,ft.multiplyVec(ft.multiply(l,-1),n)),m=this.At.Gp(f)||Y(0,0),p=this.At.Gp(y)||Y(0,0),x=Ws(Se(gt(m,this.chart.engine.scale,this.Dp),gt(p,this.chart.engine.scale,this.Dp)));this.Lp.Nt().nl([a,o]);const{gridlinePositionA:b,gridlinePositionB:v,gridlinePositionC:R}=this.wh.$p(t),E=U=>({x:U.x===-1?this.Bp.x.getInnerStart():U.x===1?this.Bp.x.getInnerEnd():0,y:U.y===-1?this.Bp.y.getInnerStart():U.y===1?this.Bp.y.getInnerEnd():0,z:U.z===-1?this.Bp.z.getInnerStart():U.z===1?this.Bp.z.getInnerEnd():0}),V=E(b),F=E(v),L=E(R),z={physicalAxisSize:_a(Se(u,d)),wuSize:n,start:a,end:o,tickDirection3D:l,tickDirection2D:x,gridlinePositionA:V,gridlinePositionB:F,gridlinePositionC:L},B=this.qh(z),A=this.zp.fp();for(const[U,O]of this.Ze)for(const[,W]of O){const I=B.get(W);if(!I)continue;const H=this.Xp(z,I);A.add({No:0,positions:[H.tickStroke.start,H.tickStroke.end]},{lineStyle:U.lr.tickStyle}),H.gridStroke&&A.add({No:0,positions:H.gridStroke},{lineStyle:U.lr.gridStrokeStyle})}const T=this.Ep.fp(),w={x:0,y:0};this.Tf.forEach(U=>{if(!U.Xi||U.u<e||U.u>i)return;const O=this.Np(z,U.u,U.xp,U._p),W=this.Xp(z,O),I=T.add().Fe(O.labelPosition).Ea(O.labelAlignment).Ce(U.Jm).Oh(U.wp).Rh(U.Ju(U.u)).Nh(U.Dd).Ps().oi();w.x=Math.max(w.x,I.x),w.y=Math.max(w.y,I.y),A.add({No:0,positions:[W.tickStroke.start,W.tickStroke.end]},{lineStyle:U.bp}),W.gridStroke&&A.add({No:0,positions:W.gridStroke},{lineStyle:U.Mp})}),T.finishPlot(),A.finishPlot();const C=this.gr((U,O)=>{const W=O.Ue.oi();return U.x=Math.max(U.x,W.x),U.y=Math.max(U.y,W.y),U},{x:w.x,y:w.y}),k=Math.atan((d.y-u.y)/(d.x-u.x));this.Lh.Ea({x:0,y:0}).Nh(180*-k/Math.PI);const _=ft.addVec(f,ft.multiplyVec(ft.multiply(l,this.At.Op(.5*this.Lp.uu().getThickness()+this.yr((U,O)=>Math.max(U,O.tickLength),0))),n)),X=this.At.Gp(_)||Y(0,0),N=_t(gt(X,this.chart.engine.scale,this.Dp),_t(_t($s(C,x),Ht(x,this.yr((U,O)=>Math.max(U,O.labelPadding),0))),$s(Ht(this.Lh.Ps().oi(),.5),x)));this.Lh.Fe(N),this.Lp.jp={overrideFollowing:!1,skipMousePicking:!1}}Xp(t,e){const{gridlinePositionA:i,gridlinePositionB:s,gridlinePositionC:n}=t,a=e.posTickStart3D,o=e.posTickEnd3D,l=e.tickPositionRelative;let u;return Ai(l,0)||Ai(l,1)||(u=[this.Zp()?{...i,x:a.x}:this.Qp()?{...i,y:a.y}:this.Yp()?{...i,z:a.z}:{x:0,y:0,z:0},this.Zp()?{...s,x:a.x}:this.Qp()?{...s,y:a.y}:this.Yp()?{...s,z:a.z}:{x:0,y:0,z:0},this.Zp()?{...n,x:a.x}:this.Qp()?{...n,y:a.y}:this.Yp()?{...n,z:a.z}:{x:0,y:0,z:0}]),{gridStroke:u,tickStroke:{start:a,end:o}}}Uh(){super.Uh(),this.zp.gp(),this.Ep.gp()}Zp(){return this.wh.Zp()}Qp(){return this.wh.Qp()}Yp(){return this.wh.Yp()}}class NF extends Hc{constructor(t,e,i,s,n,a){super(t,e,i,s,a),this.Jp=n}}const LF=(r,t,e)=>Zt(r+.1*(t-r)+Math.abs(e.et())/100*Math.sign(t-r),Math.min(r,t),Math.max(r,t)),Zl=(r,t,e,i)=>({pr:()=>{const s=r();let n;for(const a of s){if(!a.Kp())continue;const o=t(a);n=o===void 0?n:n!==void 0?Math.min(n,o):o}return n},Sr:()=>{const s=r();let n;for(const a of s){if(!a.Kp())continue;const o=e(a);n=o===void 0?n:n!==void 0?Math.max(n,o):o}return n},br:()=>{const s=r();let n;for(const a of s){if(!a.Kp())continue;const o=i(a);n=o===void 0?n:n!==void 0?Math.max(n,o):o}return n}}),BF=r=>({...Zl(r,t=>t.getYMin(),t=>t.getYMax(),t=>t.br().y),Cp:t=>t.y,Hp:(t,e)=>({x:e.x,y:t.y,z:e.z}),Jd:Bt(-1,0,0),$p:t=>{const e={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:Bt(e.x,0,e.z),gridlinePositionB:Bt(e.x,0,-e.z),gridlinePositionC:Bt(-e.x,0,-e.z)}},Zp:()=>!1,Qp:()=>!0,Yp:()=>!1}),PF=r=>({...Zl(r,t=>t.getZMin(),t=>t.getZMax(),t=>t.br().z),Cp:t=>t.z,Hp:(t,e)=>({x:e.x,y:e.y,z:t.z}),Jd:Bt(1,0,0),$p:t=>{const e={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:Bt(e.x,-e.y,0),gridlinePositionB:Bt(e.x,e.y,0),gridlinePositionC:Bt(-e.x,e.y,0)}},Zp:()=>!1,Qp:()=>!1,Yp:()=>!0});class Ql extends Yc{constructor(t,e,i,s,n){super(t,e,s,n),this.qp=jl,this.tS=!0,this.iS=!0,this.Ji=t,this.At=i,this.ts=new Map,this.onMouseWheel(this.Ji.sS),this.onMouseDrag(this.Ji.eS),this.onTouchStart(this.Ji.hS.onTouchStart),this.onTouchMove(this.Ji.hS.onTouchMove),this.onTouchEnd(this.Ji.hS.onTouchEnd)}setAutoScrollingEnabled(t){return this.tS=t,this.Ji.us.Ss(),this}getAutoScrollingEnabled(){return this.tS}setColorShadingStyle(t){return this.qp=t,this.ts.forEach((e,i)=>i.rS(t)),this.At.Ss(),this}getColorShadingStyle(){return this.qp}setDepthTestEnabled(t){return this.iS=t,this.ts.forEach((e,i)=>i.nS(t)),this.At.Ss(),this}getDepthTestEnabled(){return this.iS}oS(){}Te(){}dp(){}getXMax(){const t=this.Na;return t?t.bt():void 0}getXMin(){const t=this.Na;return t?t.vt():void 0}getYMax(){const t=this.Na;return t?t.Mt():void 0}getYMin(){const t=this.Na;return t?t.xt():void 0}getZMax(){const t=this.Na;return t?t.aS():void 0}getZMin(){const t=this.Na;return t?t.lS():void 0}br(){const t=this.Na;return t?Bt(t.vl(),t.bl(),t.uS()):Bt(0,0,0)}}class IF extends Ql{constructor(t,e,i,s,n,a){super(t,e,i,s,a),this.xs="Box Series 3D",this.cS=.25,this.dS=!1,this.Gd=()=>Ji(this.be),this.be=te(this.qi.boxSeries3DFillStyle,n),this.Na=this.At.AS().nS(this.iS).Ce(this.be).fS(this.cS).cs(this.getHighlight()),this.ds(this.Na)}invalidateData(t){const e=t.length;if(e===0)return this;this.dS&&this.Ji.us.Nn(Ct.vf);const i=t[0];if(!i)return this;let s;if("xMin"in i||"yMin"in i||"zMin"in i||"xMax"in i||"yMax"in i||"zMax"in i){s=[];for(let n=0;n<e;n+=1){const a=t[n],o="xMin"in a&&"xMax"in a,l="yMin"in a&&"yMax"in a,u="zMin"in a&&"zMax"in a;s[n]={color:a.color,value:a.value,id:a.id,xCenter:o?(a.xMin+a.xMax)/2:void 0,yCenter:l?(a.yMin+a.yMax)/2:void 0,zCenter:u?(a.zMin+a.zMax)/2:void 0,xSize:o?a.xMax-a.xMin:void 0,ySize:l?a.yMax-a.yMin:void 0,zSize:u?a.zMax-a.zMin:void 0}}}else s=t;return this.Na.gS(s.slice()),this.Ji.us.Ss(),this.dS=!0,this}setFillStyle(t){return this.be=typeof t=="function"?t(this.be):t,this.Na.Ce(t),this.Ji.us.Ss(),this}getFillStyle(){return this.be}setRoundedEdges(t){return t!==void 0&&isNaN(t)&&(console.error("'BoxSeries3D.setRoundedEdges | NaN was supplied.'"),t=void 0),this.cS=t!==void 0?Zt(t,0,1):void 0,this.Na.fS(this.cS),this.At.Ss(),this}getRoundedEdges(){return this.cS}Kp(){return this.tS&&this.getVisible()}Ie(t,e){t.cs(e),this.Ji.us.Ss()}Te(){super.Te(),this.Na.Ps(!1)}attach(t,e=!0,i=!1){return super.attach(t,e,i),ii(t,this.qi,i,{fill:this.be}),this}}class kE extends Ql{constructor(t,e,i,s,n){super(t,e,i,s,n),this.dS=!1,this.Gd=()=>Ji(this.lu.getFillStyle())}setStrokeStyle(t){this.lu=typeof t=="function"?t(this.lu):t;const e=this.lu;return this.Na.Re(e),this.At.Ss(),this}getStrokeStyle(){return this.lu}add(t){return this.dS&&this.Ji.us.Nn(Ct.vf),this.dS=!0,(t=Array.isArray(t)?t:[t])?(this.Na.nl(t.slice()),this.At.Ss(),this):this}clear(){return this.Na.Nt(),this}getPointAmount(){const t=this.Na;return t.ol()+t.al()}Kp(){return this.tS&&this.getPointAmount()>0&&this.getVisible()}Ie(t,e){t.cs(e),this.At.Ss()}attach(t,e=!0,i=!1){return super.attach(t,e,i),ii(t,this.qi,i,{stroke:this.lu}),this}}class UF extends kE{constructor(t,e,i,s,n,a){super(t,e,i,s,a),this.xs="Line Series 3D",this.lu=te(s.lineSeries3DStrokeStyle,n),this.mS=bs.pointStyle3D,this.yS(this.lu),this.Na=this.At.rp([Fr.UserSeries]).nS(this.iS).Re(this.lu).Rp(this.mS).cs(this.getHighlight()),this.ds(this.Na)}setStrokeStyle(t){super.setStrokeStyle(t),this.yS(this.lu);const e=this.mS;return this.Na.Rp(e),this}yS(t){const e=new e0.Triangulated({shape:"sphere",fillStyle:t.getFillStyle(),size:t.getThickness()});this.mS=e}}class OF extends kE{constructor(t,e,i,s,n,a){super(t,e,i,s,a),this.xs="Point Line Series 3D",this.Gd=()=>Ji(this.lu.getFillStyle())||Ji(this.mS.getFillStyle()),this.mS=te(s.pointLineSeries3DPointStyle,n),this.lu=te(s.lineSeries3DStrokeStyle,n),this.pS(),this.Na=this.At.rp([Fr.UserSeries]).nS(this.iS).Re(this.lu).Rp(this.mS).cs(this.getHighlight()),this.ds(this.Na)}setPointStyle(t){return this.mS=typeof t=="function"?t(this.mS):t,this.pS(),this.Na.Rp(this.mS),this.At.Ss(),this}getPointStyle(){return this.mS}setStrokeStyle(t){super.setStrokeStyle(t);const e=this.lu,i=Math.abs(e.getThickness()),s=this.mS,n=s.getSize();i>(typeof n=="object"?Math.max(n.x,n.y,n.z):n)&&(this.mS=s.setSize(i)),this.pS();const a=this.mS;return this.Na.Rp(a),this.At.Ss(),this}pS(){const t=this.mS,e=t.getSize();this.mS=t.setSize(e)}Ie(t,e){t.cs(e),this.At.Ss()}}class GF extends Ql{constructor(t,e,i,s,n,a){super(t,e,i,s,n),this.dS=!1,(a!=null&&a.individualPointSizeAxisEnabled||a!=null&&a.individualPointSizeEnabled)&&this.Ji.us.Nn(Ct.bf)}add(t){return this.dS&&this.Ji.us.Nn(Ct.vf),this.dS=!0,(t=Array.isArray(t)?t:[t])?(this.Na.nl(t.slice()),this.At.Ss(),this):this}clear(){return this.Na.Nt(),this}getPointAmount(){const t=this.Na;return t.ol()+t.al()}Kp(){return this.tS&&this.getPointAmount()>0&&this.getVisible()}Ie(t,e){t.cs(e),this.At.Ss()}attach(t,e=!0,i=!1){return super.attach(t,e,i),ii(t,this.qi,i,{point3D:this.SS}),this}}class YF extends GF{constructor(t,e,i,s,n,a){super(t,e,i,s,n,a),this.xs="Point Series 3D",this.Gd=()=>Ji(this.SS.getFillStyle());const o=(a==null?void 0:a.automaticColorIndex)!==void 0?a.automaticColorIndex:this.Ji.getSeries().length;this.SS=te(s.pointSeries3DPointStyle,o);const l={individualPointColorEnabled:!1,individualPointSizeEnabled:!1,individualLookupValuesEnabled:!1,individualPointSizeAxisEnabled:!1,...a};this.Na=this.At.bS(l).nS(this.iS).vS(this.SS).cs(this.getHighlight()),this.ds(this.Na)}setPointStyle(t){this.SS=typeof t=="function"?t(this.SS):t;const e=this.SS;return this.Na.vS(e),this.At.Ss(),this}getPointStyle(){return this.SS}}class jc extends Qr{constructor(t,e,i,s,n,a,o,l,u,d){super(t,e,i,s,n,a,o,l,u,d),this.xS=[],this.MS=0,this._S=f=>{const y=this.xS.indexOf(f);y>=0&&(this.xS.splice(y,1),this.D.emit("seriesDispose",this,f))},this.wS=()=>{this.MS+=1},this.CS=()=>{this.MS-=1},this.onSeriesBackgroundMouseEnter=f=>this.D.on("mouseEnterSeriesBackground",f),this.onSeriesBackgroundMouseLeave=f=>this.D.on("mouseLeaveSeriesBackground",f),this.onSeriesBackgroundMouseMove=f=>this.D.on("mouseMoveSeriesBackground",f),this.onSeriesBackgroundMouseDown=f=>this.D.on("mouseDownSeriesBackground",f),this.onSeriesBackgroundMouseUp=f=>this.D.on("mouseUpSeriesBackground",f),this.onSeriesBackgroundMouseClick=f=>this.D.on("mouseClickSeriesBackground",f),this.onSeriesBackgroundMouseDoubleClick=f=>this.D.on("mouseDoubleClickSeriesBackground",f),this.onSeriesBackgroundMouseDragStart=f=>this.D.on("mouseDragStartSeriesBackground",f),this.onSeriesBackgroundMouseDrag=f=>this.D.on("mouseDragSeriesBackground",f),this.onSeriesBackgroundMouseDragStop=f=>this.D.on("mouseDragStopSeriesBackground",f),this.onSeriesBackgroundMouseWheel=f=>this.D.on("mouseWheelSeriesBackground",f),this.onSeriesBackgroundTouchStart=f=>this.D.on("touchStartSeriesBackground",f),this.onSeriesBackgroundTouchMove=f=>this.D.on("touchMoveSeriesBackground",f),this.onSeriesBackgroundTouchEnd=f=>this.D.on("touchEndSeriesBackground",f),this.offSeriesBackgroundMouseEnter=f=>this.D.off(f,"mouseEnterSeriesBackground"),this.offSeriesBackgroundMouseLeave=f=>this.D.off(f,"mouseLeaveSeriesBackground"),this.offSeriesBackgroundMouseMove=f=>this.D.off(f,"mouseMoveSeriesBackground"),this.offSeriesBackgroundMouseDown=f=>this.D.off(f,"mouseDownSeriesBackground"),this.offSeriesBackgroundMouseUp=f=>this.D.off(f,"mouseUpSeriesBackground"),this.offSeriesBackgroundMouseClick=f=>this.D.off(f,"mouseClickSeriesBackground"),this.offSeriesBackgroundMouseDoubleClick=f=>this.D.off(f,"mouseDoubleClickSeriesBackground"),this.offSeriesBackgroundMouseDragStart=f=>this.D.off(f,"mouseDragStartSeriesBackground"),this.offSeriesBackgroundMouseDrag=f=>this.D.off(f,"mouseDragSeriesBackground"),this.offSeriesBackgroundMouseDragStop=f=>this.D.off(f,"mouseDragStopSeriesBackground"),this.offSeriesBackgroundMouseWheel=f=>this.D.off(f,"mouseWheelSeriesBackground"),this.offSeriesBackgroundTouchStart=f=>this.D.off(f,"touchStartSeriesBackground"),this.offSeriesBackgroundTouchMove=f=>this.D.off(f,"touchMoveSeriesBackground"),this.offSeriesBackgroundTouchEnd=f=>this.D.off(f,"touchEndSeriesBackground"),this.kS=this.es.yg()}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.xS.forEach(e=>e.setAnimationHighlight(t)),this}TS(t,e){this.kS.fs([e]),t.setMouseMoveEventHandler((i,s)=>{this.D.emit("mouseMoveSeriesBackground",this,s)}).setMouseEnterEventHandler((i,s)=>{this.D.emit("mouseEnterSeriesBackground",this,s)}).setMouseLeaveEventHandler((i,s)=>{this.D.emit("mouseLeaveSeriesBackground",this,s)}).setMouseDownEventHandler((i,s)=>this.D.emit("mouseDownSeriesBackground",this,s)).setMouseUpEventHandler((i,s)=>this.D.emit("mouseUpSeriesBackground",this,s)).setMouseClickEventHandler((i,s)=>this.D.emit("mouseClickSeriesBackground",this,s)).setMouseDoubleClickEventHandler((i,s)=>this.D.emit("mouseDoubleClickSeriesBackground",this,s)).setMouseWheelEventHandler((i,s)=>this.D.emit("mouseWheelSeriesBackground",this,s)).setMouseDragStartEventHandler((i,s,n)=>this.D.emit("mouseDragStartSeriesBackground",this,s,n)).setMouseDragEventHandler((i,s,n,a,o)=>this.D.emit("mouseDragSeriesBackground",this,s,n,a,o)).setMouseDragStopEventHandler((i,s,n,a)=>this.D.emit("mouseDragStopSeriesBackground",this,s,n,a)).setTouchStartEventHandler((i,s)=>{this.D.emit("touchStartSeriesBackground",this,s)}).setTouchMoveEventHandler((i,s)=>{this.D.emit("touchMoveSeriesBackground",this,s)}).setTouchEndEventHandler((i,s)=>{this.D.emit("touchEndSeriesBackground",this,s)})}setSeriesBackgroundFillStyle(t){return this.FS.Ce(t),this.us.Ss(),this}getSeriesBackgroundFillStyle(){return this.FS.Eh()}setSeriesBackgroundStrokeStyle(t){return this.IS.we(t),this.us.Ss(),this}getSeriesBackgroundStrokeStyle(){return this.IS.ao()}setSeriesBackgroundEffect(t){return this.kS.ps(t),this.us.Ss(),this}getSeriesBackgroundEffect(){return this.kS.vs()}PS(t){this.xS.push(t),t.onMouseEnter(this.wS),t.onMouseLeave(this.CS),this.DS!==void 0&&t.setHighlightOnHover(this.DS),this.D.emit("seriesAdded",this,t)}Zd(){return this.xS}BS(){return this.MS}setSeriesHighlightOnHover(t){return this.DS=t,this.xS.forEach(e=>e.setHighlightOnHover(t)),this}dispose(){return this.xS.slice().forEach(ah),super.dispose()}LS(t){return this.D.on("seriesAdded",t)}RS(t){return this.D.off(t)}ES(t){return this.D.on("seriesDispose",t)}zS(t){return this.D.off(t)}}const Ub=ft.normalize({x:-.5610788649579117,y:-.35242840511865414,z:-1.1349149375849081});class HF{constructor(t,e,i,s){this.VS=!0,this.OS=!0,this.NS=2*-Math.PI/2160,this.GS=2*Math.PI/2160,this.WS=.1,this.US=1*Math.PI/180,this.YS=t,this.HS=e,this.$S=i,this.Gp=s}getDefaultCameraConfiguration(t){const e={direction:Ub,location:ft.multiply(Ub,-1)};return this.cameraLocationChanged({boundingBox:t,cameraDirection:e.direction,cameraLocation:e.location})||e}applyCameraInteractions(t,e){let i={direction:t.cameraDirection,location:t.cameraLocation};return e.forEach(s=>{s.type==="rotate"?i=this.XS(i,s):s.type==="wheel-zoom"?i=this.jS(i,s):s.type==="rotate+zoom"?i=this.ZS(i,s):s.type==="fixed-rotate"?i=this.QS(i,s):s.type==="move"&&(i=this.JS(i,s))}),this.VS?i=this.KS(t.boundingBox,i):this.OS&&(i=this.qS(t.boundingBox,i)),i}XS(t,e){const{rotation:i}=e,s=t.location,n=ft.multiply(ft.normalize(t.location),-1),{Right:a,Up:o}=this.tv(n);let l=s;const u=this.sv(n),d=i.x*this.NS*u;l=ft.rotateAroundAxis(l,o,d);const f=(i.y>0?1:-1)*Math.min(Math.abs(i.y)*this.GS,u-this.US);return f!==0&&(l=ft.rotateAroundAxis(l,a,f)),{location:l,direction:ft.multiply(ft.normalize(l),-1)}}jS(t,e){const{deltaY:i}=e;this.VS&&this.ev(!1);const s=t.location,n=ft.multiply(ft.normalize(s),-1),a=i*this.WS,o=ft.length(s)*-a;return{direction:n,location:ft.addVec(s,ft.multiply(n,o))}}ZS(t,e){const{rotation:i,cameraDistance:s}=e;this.VS&&this.ev(!1);let n=this.XS(t,{type:"rotate",rotation:i});const a=n.location,o=ft.multiply(ft.normalize(a),-1),l=ft.multiply(o,-s);return n={direction:ft.multiply(ft.normalize(l),-1),location:l},n}QS(t,e){this.VS&&this.ev(!1);const{rotation:i}=e,s=t.location,n=t.direction,{Right:a,Up:o}=this.tv(n),l=i.x*this.NS;let u=ft.normalize(ft.rotateAroundAxis(n,o,l));const d=i.y*this.GS;return u=ft.normalize(ft.rotateAroundAxis(u,a,d)),{location:s,direction:u}}JS(t,e){this.VS&&this.ev(!1),this.OS=!1;const{amountRight:i,amountForward:s}=e,n=t.location,a=t.direction,{Right:o}=this.tv(a);return{location:ft.addVec(n,ft.multiply(a,.01*s),ft.multiply(o,.01*i)),direction:a}}boundingBoxChanged(t){const e={location:t.cameraLocation,direction:ft.multiply(ft.normalize(t.cameraLocation),-1)};return this.VS?this.KS(t.boundingBox,e):this.qS(t.boundingBox,e)}cameraLocationChanged(t){const e={location:t.cameraLocation,direction:ft.multiply(ft.normalize(t.cameraLocation),-1)};return this.VS?this.KS(t.boundingBox,e):this.qS(t.boundingBox,e)}viewportChanged(t){const e={location:t.cameraLocation,direction:ft.multiply(ft.normalize(t.cameraLocation),-1)};if(this.VS)return this.KS(t.boundingBox,e)}KS(t,e,i){let s=e;i=i!==void 0?i:0,s=this.hv(t,s,100,20,1,i,5);const n=this.sv(s.direction);return s=this.rv(s,this.nv(t,s,100,1),n),s}hv(t,e,i,s,n,a,o){return XF(a,o,l=>({direction:e.direction,location:ft.multiply(e.direction,-l)}),l=>this.ov(t,l),i,n,"linear",s)}nv(t,e,i,s){const{Right:n,Left:a,Up:o,Down:l}=this.tv(e.direction),u=this.av(t,!1,e);let d=e;const f=s,y=.1;return Math.abs(u.bottom-u.top)>f&&(d=u.bottom<u.top?wf(0,y,m=>({location:d.location,direction:ft.normalize(ft.lerp(d.direction,l,m))}),m=>this.lv(t,m),0,f,!0,i):wf(0,y,m=>({location:d.location,direction:ft.normalize(ft.lerp(d.direction,o,m))}),m=>this.lv(t,m),0,f,!0,i)),Math.abs(u.left-u.right)>f&&(d=u.left<u.right?wf(0,y,m=>({location:d.location,direction:ft.normalize(ft.lerp(d.direction,a,m))}),m=>this.uv(t,m),0,f,!0,i):wf(0,y,m=>({location:d.location,direction:ft.normalize(ft.lerp(d.direction,n,m))}),m=>this.uv(t,m),0,f,!0,i)),d}ov(t,e){const i=this.av(t,!0,e);return Math.min(i.left+i.right,i.top+i.bottom)}uv(t,e){const i=this.av(t,!1,e);return Math.abs(i.left-i.right)}lv(t,e){const i=this.av(t,!1,e);return Math.abs(i.top-i.bottom)}av(t,e,i){const s=Ze(this.cv(t,e,i).map(n=>gt(n,this.YS,this.HS)));return{left:s.min.x,right:this.HS.x.getInnerEnd()-s.max.x,top:this.HS.y.getInnerEnd()-s.max.y,bottom:s.min.y}}cv(t,e,i){const s=this.$S,n=Bt(s.x.getInnerStart(),s.y.getInnerStart(),s.z.getInnerStart()),a=Bt(s.x.getInnerEnd(),s.y.getInnerEnd(),s.z.getInnerEnd()),o=[],l=e?16:4,u=(n.x+a.x)/2,d=(n.z+a.z)/2,f=Math.sqrt(2)*(a.x-u),y=Math.sqrt(2)*(a.z-d);return[n.y,a.y].forEach(m=>{for(let p=0;p<l;p+=1){const x=Math.PI/4+2*Math.PI*p/l,b=u+Math.cos(x)*f,v=d+Math.sin(x)*y;o.push({x:b,y:m,z:v})}}),o.map(m=>this.Gp(m,i)).filter(m=>m!==void 0)}qS(t,e){const i=ft.length(e.location),s=this.dv(t);return i<s?{direction:e.direction,location:ft.multiply(e.direction,-s)}:e}dv(t){return .8*Math.sqrt(t.x**2+t.y**2+t.z**2)}tv(t){const e=Bt(0,1,0),i=ft.normalize(ft.cross(e,ft.multiply(t,-1)));let s=ft.cross(i,t);return s.y=Math.abs(s.y),s=ft.normalize(s),{Right:i,Up:s,Down:ft.multiply(s,-1),Left:ft.multiply(i,-1)}}sv(t){const e={x:0,y:1,z:0},i=ft.angle(t,e),s=ft.angle(t,ft.multiply(e,-1));return Math.min(i,s)}rv(t,e,i){return{location:ft.lerp(t.location,e.location,i),direction:ft.normalize(ft.lerp(t.direction,e.direction,i))}}ev(t){return this.VS=t,this}fv(){return this.VS}}const XF=(r,t,e,i,s,n,a,o)=>{let l,u=0,d=(t+r)/2;do{const f=e(d);if(l={value:d,result:f,score:i(f)},Math.abs(l.score-s)<=n)break;const y=l.score>s;y&&a==="linear"||!y&&a==="reversed"?(d=(l.value+r)/2,t=l.value):(d=(l.value+t)/2,r=l.value),u+=1}while(u<o);return l.result},wf=(r,t,e,i,s,n,a,o)=>{let l,u=0,d=r;do{const f=e(d),y=i(f);if(l===void 0||Math.abs(y-s)<Math.abs(l.score-s)){if(l={value:d,result:f,score:i(f)},Math.abs(l.score-s)<=n)break}else break;u+=1,d+=1/(o-1)*(t-r)}while(u<o);return l.result};class WF extends Ql{constructor(t,e,i,s,n,a){super(t,e,i,n,a),this.xs="Surface Grid Series 3D",this.Av={},this.dS=!1,this.Gd=()=>Ji(this.be),this.qp=ql;const o=(s==null?void 0:s.automaticColorIndex)!==void 0?s.automaticColorIndex:this.Ji.getSeries().length;this.be=te(this.qi.surfaceGridSeries3DFillStyle,o),this.gv=te(this.qi.surfaceGridSeries3DWireframeStyle,o);const l={heatmapDataType:"intensity",dataOrder:s.dataOrder||"columns",columns:s.columns,rows:s.rows};this.Un=l,this.Na=this.At.yv(l).Ce(this.be).mv(this.gv).rS(this.qp).cs(this.getHighlight()),this.ds(this.Na),s.start&&this.setStart(s.start),s.end&&this.setEnd(s.end),s.step&&this.setStep(s.step)}pv(){const t=this.Av.start||{x:0,z:0};let e;e=this.Av.end?{x:(this.Av.end.x-t.x)/this.Un.columns,z:(this.Av.end.z-t.z)/this.Un.rows}:this.Av.step?this.Av.step:{x:1,z:1},this.Na.Sv(t,e),this.Ji.us.Ss()}setStart(t){return this.Av.start=t,this.pv(),this}getStart(){return this.Na.vv().start}setStep(t){return this.Av.step=t,this.pv(),this}getStep(){return this.Na.vv().step}setEnd(t){return this.Av.end=t,this.pv(),this}getEnd(){return this.Na.vv().end}setFillStyle(t){return this.be=typeof t=="function"?t(this.be):t,this.Na.Ce(this.be),this.At.Ss(),this}getFillStyle(){return this.be}setWireframeStyle(t){return this.gv=typeof t=="function"?t(this.gv):t,this.Na.mv(this.gv),this.At.Ss(),this}getWireframeStyle(){return this.Na.bv()}setIntensityInterpolation(t){return t=t||"disabled",this.Na.xv(t),this.At.Ss(),this}getIntensityInterpolation(){return this.Na.Mv()}invalidateIntensityValues(t){if(this.dS&&this.Ji.us.Nn(Ct.vf),Array.isArray(t)){if(t.length===0||t[0].length===0)return this;const e={x:t.length,y:t[0].length,columns:this.Un.dataOrder==="columns"?t.length:t[0].length,rows:this.Un.dataOrder==="rows"?t.length:t[0].length},i=this.Un.dataOrder==="columns"?this.Un.columns:this.Un.rows,s=this.Un.dataOrder==="columns"?this.Un.rows:this.Un.columns;if(e.x>i||e.y>s){if(this.Ji.cA.Hn===!0){const a=`SurfaceGridSeries3D.invalidateIntensityValues intensity matrix overflow.
    Grid ${this.Un.columns}x${this.Un.rows}, input ${e.columns}x${e.rows}.
    Excess data will be automatically clipped. This can result in sub-optimal performance.`;nt.console.warn(a)}const n=[];for(let a=0;a<i;a+=1)n[a]=t[a].slice(0,s);t=n}this.Na._v({type:"intensity",lengthPrimary:t.length,lengthSecondary:t[0].length,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(t.values.length===0||t.values[0].length===0)return this;const e={primary:t.values.length,secondary:t.values[0].length,columns:this.Un.dataOrder==="columns"?t.values.length:t.values[0].length,rows:this.Un.dataOrder==="rows"?t.values.length:t.values[0].length};let i=this.Un.dataOrder==="columns"?t.iColumn:t.iRow;const s=i+e.primary-1;let n=this.Un.dataOrder==="columns"?t.iRow:t.iColumn;const a=n+e.secondary-1,o=(this.Un.dataOrder==="columns"?this.Un.columns:this.Un.rows)-1,l=(this.Un.dataOrder==="columns"?this.Un.rows:this.Un.columns)-1;if(i<0||n<0||s>o||a>l){if(this.Ji.cA.Hn===!0){const x=`SurfaceGridSeries3D.invalidateIntensityValues intensity matrix overflow.
    Grid ${this.Un.columns}x${this.Un.rows}, input ${e.columns}x${e.rows} starting at [${t.iColumn},${t.iRow}].
    Out of bounds data will be automatically clipped. This can result in sub-optimal performance.`;nt.console.warn(x)}const u=Math.max(-i,0),d=Math.max(-n,0),f=Math.max(s-o,0),y=Math.max(a-l,0),m=e.primary-(u+f),p=[];if(d===0&&y===0)for(let x=0;x<m;x+=1)p[x]=t.values[u+x];else for(let x=0;x<m;x+=1)p[x]=t.values[u+x].slice(d,y===0?void 0:-y);if(p.length===0||p[0].length===0)return this;t={iColumn:t.iColumn,iRow:t.iRow,values:p},i=Math.max(i,0),n=Math.max(n,0)}this.Na._v({type:"intensity",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:i,startSecondary:n,values:t.values})}return this.At.Ss(),this.dS=!0,this}invalidateHeightMap(t){if(this.dS&&this.Ji.us.Nn(Ct.vf),Array.isArray(t)){if(t.length===0||t[0].length===0)return this;const e={x:t.length,y:t[0].length,columns:this.Un.dataOrder==="columns"?t.length:t[0].length,rows:this.Un.dataOrder==="rows"?t.length:t[0].length},i=this.Un.dataOrder==="columns"?this.Un.columns:this.Un.rows,s=this.Un.dataOrder==="columns"?this.Un.rows:this.Un.columns;if(e.x>i||e.y>s){if(this.Ji.cA.Hn===!0){const a=`SurfaceGridSeries3D.invalidateHeightMap height matrix overflow.
    Grid ${this.Un.columns}x${this.Un.rows}, input ${e.columns}x${e.rows}.
    Excess data will be automatically clipped. This can result in sub-optimal performance.`;nt.console.warn(a)}const n=[];for(let a=0;a<i;a+=1)n[a]=t[a].slice(0,s);t=n}this.Na.wv({type:"y",lengthPrimary:t.length,lengthSecondary:t[0].length,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(t.values.length===0||t.values[0].length===0)return this;const e={primary:t.values.length,secondary:t.values[0].length,columns:this.Un.dataOrder==="columns"?t.values.length:t.values[0].length,rows:this.Un.dataOrder==="rows"?t.values.length:t.values[0].length};let i=this.Un.dataOrder==="columns"?t.iColumn:t.iRow;const s=i+e.primary-1;let n=this.Un.dataOrder==="columns"?t.iRow:t.iColumn;const a=n+e.secondary-1,o=(this.Un.dataOrder==="columns"?this.Un.columns:this.Un.rows)-1,l=(this.Un.dataOrder==="columns"?this.Un.rows:this.Un.columns)-1;if(i<0||n<0||s>o||a>l){if(this.Ji.cA.Hn===!0){const x=`SurfaceGridSeries3D.invalidateHeightMap height matrix overflow.
    Grid ${this.Un.columns}x${this.Un.rows}, input ${e.columns}x${e.rows} starting at [${t.iColumn},${t.iRow}].
    Out of bounds data will be automatically clipped. This can result in sub-optimal performance.`;nt.console.warn(x)}const u=Math.max(-i,0),d=Math.max(-n,0),f=Math.max(s-o,0),y=Math.max(a-l,0),m=e.primary-(u+f),p=[];if(d===0&&y===0)for(let x=0;x<m;x+=1)p[x]=t.values[u+x];else for(let x=0;x<m;x+=1)p[x]=t.values[u+x].slice(d,y===0?void 0:-y);if(p.length===0||p[0].length===0)return this;t={iColumn:t.iColumn,iRow:t.iRow,values:p},i=Math.max(i,0),n=Math.max(n,0)}this.Na.wv({type:"y",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:i,startSecondary:n,values:t.values})}return this.At.Ss(),this.dS=!0,this}setCullMode(t){return this.Na.Cv(typeof t=="boolean"?t?"cull-back":"disabled":t),this}getCullMode(){return this.Na.kv()}oS(){}Te(){}dp(){}Kp(){return this.tS&&this.getVisible()}Ie(t,e){t.cs(e),this.At.Ss()}}class $F extends Ql{constructor(t,e,i,s,n,a){super(t,e,i,n,a),this.xs="Surface Grid Series 3D",this.Av={},this.Gd=()=>Ji(this.be),this.Ji.us.Nn(Ct.vf),this.qp=ql;const o=(s==null?void 0:s.automaticColorIndex)!==void 0?s.automaticColorIndex:this.Ji.getSeries().length;this.be=te(this.qi.surfaceScrollingGridSeries3DFillStyle,o),this.gv=te(this.qi.surfaceScrollingGridSeries3DWireframeStyle,o);const l={heatmapDataType:"intensity",scrollDimension:s.scrollDimension||"columns",columns:s.columns,rows:s.rows};this.Un=l,this.Na=this.At.Tv(l).Ce(this.be).mv(this.gv).rS(this.qp).cs(this.getHighlight()),this.ds(this.Na),s.start&&this.setStart(s.start),s.step&&this.setStep(s.step)}pv(){const t=this.Av.start||{x:0,z:0};let e;e=this.Av.step?this.Av.step:{x:1,z:1},this.Na.Sv(t,e),this.Ji.us.Ss()}setStart(t){return this.Av.start=t,this.pv(),this}getStart(){return this.Na.vv().start}setStep(t){return this.Av.step=t,this.pv(),this}getStep(){return this.Na.vv().step}setFillStyle(t){return this.be=typeof t=="function"?t(this.be):t,this.Na.Ce(this.be),this.At.Ss(),this}getFillStyle(){return this.be}setWireframeStyle(t){return this.gv=typeof t=="function"?t(this.gv):t,this.Na.mv(this.gv),this.At.Ss(),this}getWireframeStyle(){return this.Na.bv()}setIntensityInterpolation(t){return t=t||"disabled",this.Na.xv(t),this.At.Ss(),this}getIntensityInterpolation(){return this.Na.Mv()}clear(){return this.Na.Nt(),this.At.Ss(),this}addValues(t){if(!t)return this;let e=t.yValues,i=t.intensityValues;if(!e&&!i)return this;if(e&&e.length===0&&(e=void 0),i&&i.length===0&&(i=void 0),e){const a=e[0].length,o=0+a-1,l=this.Un.scrollDimension==="columns"?this.Un.rows:this.Un.columns;if(o>l-1){if(this.Ji.cA.Hn===!0){const d=`SurfaceScrollingGridSeries3D.addValues input yValues overflow.
Grid was created with ${l} ${this.Un.scrollDimension==="columns"?"rows":"columns"}, input yValues have ${a}.
Excess data will be automatically clipped. This can result in sub-optimal performance.`;nt.console.warn(d)}const u=[];for(let d=0;d<e.length;d+=1)u[d]=e[d].slice(0,l+1);e=u}}if(i){const a=i[0].length,o=0+a-1,l=this.Un.scrollDimension==="columns"?this.Un.rows:this.Un.columns;if(o>l-1){if(this.Ji.cA.Hn===!0){const d=`SurfaceScrollingGridSeries3D.addValues intensityValues overflow.
Grid was created with ${l} ${this.Un.scrollDimension==="columns"?"rows":"columns"}, input intensityValues have ${a}.
Excess data will be automatically clipped. This can result in sub-optimal performance.`;nt.console.warn(d)}const u=[];for(let d=0;d<i.length;d+=1)u[d]=i[d].slice(0,l+1);i=u}}if(e&&i){const a=e.length,o=i.length;if(a!==o){if(this.Ji.cA.Hn===!0){const l=`SurfaceScrollingGridSeries3D.addValues input yValues and intensityValues size does not match.
yValues: ${a}
intensityValues: ${o}
Data will be automatically clipped according to the smaller supplied sample. This can result in sub-optimal performance.`;nt.console.warn(l)}a>o?e=e.slice(0,o):i=i.slice(0,a)}}const s=e?e.length:i==null?void 0:i.length,n=e?e[0].length:i==null?void 0:i[0].length;return this.Na.Fv({startPrimary:0,startSecondary:0,lengthPrimary:s,lengthSecondary:n,heightMapValues:e,intensityValues:i}),this.At.Ss(),this}setCullMode(t){return this.Na.Cv(typeof t=="boolean"?t?"cull-back":"disabled":t),this}getCullMode(){return this.Na.kv()}oS(){}Te(){}dp(){}Kp(){return this.tS&&this.getVisible()}Ie(t,e){t.cs(e),this.At.Ss()}}const Cf=r=>!!(r&&typeof r=="object"&&"id"in r&&"chart"in r&&r.chart instanceof TS),Ob=r=>!!(r&&typeof r=="object"&&"x"in r&&typeof r.x=="number"&&"y"in r&&typeof r.y=="number"&&"z"in r&&typeof r.z=="number"),ze={translation:(r,t,e)=>[1,0,0,0,0,1,0,0,0,0,1,0,r,t,e,1],xRotation(r){const t=Math.cos(r),e=Math.sin(r);return[1,0,0,0,0,t,e,0,0,-e,t,0,0,0,0,1]},yRotation(r){const t=Math.cos(r),e=Math.sin(r);return[t,0,-e,0,0,1,0,0,e,0,t,0,0,0,0,1]},zRotation(r){const t=Math.cos(r),e=Math.sin(r);return[t,e,0,0,-e,t,0,0,0,0,1,0,0,0,0,1]},scaling:(r,t,e)=>[r,0,0,0,0,t,0,0,0,0,e,0,0,0,0,1],translate:(r,t,e,i)=>ze.multiply(r,ze.translation(t,e,i)),xRotate:(r,t)=>ze.multiply(r,ze.xRotation(t)),yRotate:(r,t)=>ze.multiply(r,ze.yRotation(t)),zRotate:(r,t)=>ze.multiply(r,ze.zRotation(t)),rotateXYZ(r,t){let e=ze.xRotate(r,t.x);return e=ze.yRotate(e,t.y),e=ze.zRotate(e,t.z),e},scale:(r,t,e,i)=>ze.multiply(r,ze.scaling(t,e,i)),multiply(r,t){const e=t[0],i=t[1],s=t[2],n=t[3],a=t[4],o=t[5],l=t[6],u=t[7],d=t[8],f=t[9],y=t[10],m=t[11],p=t[12],x=t[13],b=t[14],v=t[15],R=r[0],E=r[1],V=r[2],F=r[3],L=r[4],z=r[5],B=r[6],A=r[7],T=r[8],w=r[9],C=r[10],k=r[11],_=r[12],X=r[13],N=r[14],U=r[15],O=[];return O[0]=e*R+i*L+s*T+n*_,O[1]=e*E+i*z+s*w+n*X,O[2]=e*V+i*B+s*C+n*N,O[3]=e*F+i*A+s*k+n*U,O[4]=a*R+o*L+l*T+u*_,O[5]=a*E+o*z+l*w+u*X,O[6]=a*V+o*B+l*C+u*N,O[7]=a*F+o*A+l*k+u*U,O[8]=d*R+f*L+y*T+m*_,O[9]=d*E+f*z+y*w+m*X,O[10]=d*V+f*B+y*C+m*N,O[11]=d*F+f*A+y*k+m*U,O[12]=p*R+x*L+b*T+v*_,O[13]=p*E+x*z+b*w+v*X,O[14]=p*V+x*B+b*C+v*N,O[15]=p*F+x*A+b*k+v*U,O},inverse(r){const t=[],e=r[0],i=r[1],s=r[2],n=r[3],a=r[4],o=r[5],l=r[6],u=r[7],d=r[8],f=r[9],y=r[10],m=r[11],p=r[12],x=r[13],b=r[14],v=r[15],R=y*v,E=b*m,V=l*v,F=b*u,L=l*m,z=y*u,B=s*v,A=b*n,T=s*m,w=y*n,C=s*u,k=l*n,_=d*x,X=p*f,N=a*x,U=p*o,O=a*f,W=d*o,I=e*x,H=p*i,q=e*f,Q=d*i,J=e*o,ot=a*i,ht=R*o+F*f+L*x-(E*o+V*f+z*x),ut=E*i+B*f+w*x-(R*i+A*f+T*x),dt=V*i+A*o+C*x-(F*i+B*o+k*x),Tt=z*i+T*o+k*f-(L*i+w*o+C*f),xt=1/(e*ht+a*ut+d*dt+p*Tt);return t[0]=xt*ht,t[1]=xt*ut,t[2]=xt*dt,t[3]=xt*Tt,t[4]=xt*(E*a+V*d+z*p-(R*a+F*d+L*p)),t[5]=xt*(R*e+A*d+T*p-(E*e+B*d+w*p)),t[6]=xt*(F*e+B*a+k*p-(V*e+A*a+C*p)),t[7]=xt*(L*e+w*a+C*d-(z*e+T*a+k*d)),t[8]=xt*(_*u+U*m+O*v-(X*u+N*m+W*v)),t[9]=xt*(X*n+I*m+Q*v-(_*n+H*m+q*v)),t[10]=xt*(N*n+H*u+J*v-(U*n+I*u+ot*v)),t[11]=xt*(W*n+q*u+ot*m-(O*n+Q*u+J*m)),t[12]=xt*(N*y+W*b+X*l-(O*b+_*l+U*y)),t[13]=xt*(q*b+_*s+H*y-(I*y+Q*b+X*s)),t[14]=xt*(I*l+ot*b+U*s-(J*b+N*s+H*l)),t[15]=xt*(J*y+O*s+Q*l-(q*l+ot*y+W*s)),t},projectionPerspective(r,t,e,i){const s=1/Math.tan(r*Math.PI/180/2),n=1/(e-i);return[s/t,0,0,0,0,s,0,0,0,0,(e+i)*n,-1,0,0,e*i*n*2,0]},projectionOrthographic:(r,t,e,i,s,n)=>[2/(t-r),0,0,-(t+r)/(t-r),0,2/(i-e),0,-(i+e)/(i-e),0,0,-2/(n-s),-(n+s)/(n-s),0,0,0,1]};class qF extends Ql{constructor(t,e,i,s,n,a){super(t,e,i,s,a),this.xs="Mesh Model 3D",this.Iv=new Float32Array,this.dt={x:1,y:1,z:1},this.Pv={x:0,y:0,z:0},this.Dv={x:0,y:0,z:0},this.Bv={x:0,y:0,z:0},this.Lv={x:0,y:0,z:0},this.Ya=vr,this.Gd=()=>Ji(this.getFillStyle());const o=(n==null?void 0:n.automaticColorIndex)!==void 0?n.automaticColorIndex:this.Ji.getSeries().length;this.Na=this.At.Rv().nS(this.iS).Ce(te(this.qi.meshModel3DFillStyle||this.qi.pointSeriesFillStyle,o)).cs(this.getHighlight()),this.ds(this.Na)}setModelGeometry(t){const{indices:e,vertices:i,normals:s}=t;let n=Dt,a=Mt,o=Dt,l=Mt,u=Dt,d=Mt;for(let f=0;f<i.length;f+=3){const y=i[f],m=i[f+1],p=i[f+2];n=Math.max(n,y),a=Math.min(a,y),o=Math.max(o,m),l=Math.min(l,m),u=Math.max(u,p),d=Math.min(d,p)}this.Ya={min:{x:a,y:l,z:d},max:{x:n,y:o,z:u}};for(let f=0;f<i.length;f+=3)i[f]-=this.Ya.min.x,i[f+1]-=this.Ya.min.y,i[f+2]-=this.Ya.min.z;return this.Lv={x:this.Ya.max.x-this.Ya.min.x,y:this.Ya.max.y-this.Ya.min.y,z:this.Ya.max.z-this.Ya.min.z},this.Iv=i instanceof Float32Array?i:new Float32Array(i),this.checkedNormals=s&&!Number.isNaN(s[0])?s instanceof Float32Array?s:new Float32Array(s):void 0,this.checkedNormals||this.setColorShadingStyle(ql),this.Na.Ev({vertices:this.Iv,normals:this.checkedNormals,indices:e instanceof Uint16Array?e:new Uint16Array(e),modelSize:this.Lv}),this.Ji.us.Ss(),this}setVertexValues(t){const e=this.Dv,i=this.Pv,s=this.dt,n=this.Lv,a=this.Bv,o=x3(e,this.Ji.axes,this.Ji.world);let l;if(this.zv)l=t(this.zv);else{const u=[],d=ze.projectionOrthographic(-1,1,-1,1,1,-1);let f=ze.translate(d,n.x/2,n.y/2,n.z/2);f=ze.rotateXYZ(f,a),f=ze.translate(f,-n.x/2,-n.y/2,-n.z/2);const y=(i.x+1)*(n.x/2),m=(i.y+1)*(n.y/2),p=(i.z+1)*(n.z/2);for(let x=0;x<this.Iv.length;x+=3){const b=ze.multiply(f,[this.Iv[x],this.Iv[x+1],this.Iv[x+2],1]),v={x:o.x+(b[0]-y)*s.x,y:o.y+(b[1]-m)*s.y,z:o.z+(b[2]-p)*s.z};u.push(v)}this.zv=u,l=t(u)}return l.length===0||(l.length!==this.zv.length&&this.Ji.us.Un.Hn===!0&&nt.console.warn(`LightningChart JS warning - MeshModel3D.setVertexValues returned array length is not equal to vertex locations array length.
This is most likely an application error.`),this.Na.Vv(l instanceof Float32Array?l:new Float32Array(l)),this.Ji.us.Ss()),this}setScale(t){const e={x:typeof t=="number"?t:(t==null?void 0:t.x)||1,y:typeof t=="number"?t:(t==null?void 0:t.y)||1,z:typeof t=="number"?t:(t==null?void 0:t.z)||1};return this.dt=e,this.zv=void 0,this.Na.Ov(e),this.Ji.us.Ss(),this}getScale(){return this.dt}setModelLocation(t){return this.Dv=t,this.zv=void 0,this.Na.Nv(t),this.Ji.us.Ss(),this}getModelLocation(){return this.Dv}setModelAlignment(t){return this.Pv=t,this.zv=void 0,this.Na.Gv(t),this.Ji.us.Ss(),this}getModelAlignment(){return this.Pv}setModelRotation(t){const e={x:br(t.x),y:br(t.y),z:br(t.z)};return this.Bv=e,this.zv=void 0,this.Na.Wv(this.Bv),this.Ji.us.Ss(),this}getModelRotation(){return this.Bv}setBackfaceCullingMode(t){return this.Na.Uv(t),this.Ji.us.Ss(),this}getBackfaceCullingMode(){return this.Na.Yv()}setFillStyle(t){return this.Na.Ce(t),this.Ji.us.Ss(),this}getFillStyle(){return this.Na.Eh()}setColorShadingStyle(t){return this.checkedNormals||t!==jl?super.setColorShadingStyle(t):(console.warn("Phong shading style is not supported without normals. Switching to Simple shading style."),super.setColorShadingStyle(new HD.Simple))}Kp(){return!1}Ie(t,e){t.cs(e),this.Ji.us.Ss()}attach(t,e=!0,i=!1){return super.attach(t,e),ii(t,this.qi,i,{fill:this.getFillStyle()}),this}}class TS extends jc{constructor(t,e,i,s,n,a,o){var l;let u;super(t,e,i,e.vm("chart3D bg",0),s,e.us.qi.chart3DBackgroundFillStyle,e.us.qi.chart3DBackgroundStrokeStyle,e.us.qi.chart3DTitleFont,e.us.qi.chart3DTitleFillStyle,a),this.Hv=1,this.$v=[],this.Xv=2,this.jv=!0,this.Zv=!0,this.Qv=!0,this.Jv=0,this.coordsAxis={id:"axes",chart:this},this.coordsWorld={id:"world",chart:this},this.axes={id:"axes",chart:this},this.world={id:"world",chart:this},this.an=[],this.fn=()=>{const d=this.At.Kv();this.tb.qv(d),this.ib.qv(d);const f=this.sb.viewportChanged(this.eb());f&&this.hb(f),this.us.Ss()},this.eS=(d,f,y,m,p)=>{if(this.Qv){const x=p;this.$v.push({type:"rotate",rotation:x}),this.us.Ss(),At(f)}},this.sS=(d,f)=>{if(this.Zv){if(this.jv)Math.sign(this.Jv)!==Math.sign(f.deltaY)?this.Jv=So(f):this.Jv+=So(f);else{const y=So(f);this.$v.push({type:"wheel-zoom",deltaY:y})}this.us.Ss(),At(f)}},this.us.Nn(Ct.df),this._m.Rh("Chart3D"),this.rb=i.d3(),this.rb.x.J(-1,1),this.rb.y.J(-1,1),this.rb.z.J(-1,1),this.At=e.nb("chart3D layer3D",0,this.rb),this.tb=e.ob("chart3D series bg",0),this.ib=e.$y("chart3D axis ui",1),this.ab={x:new Dm(this,(l=()=>this.xS,{...Zl(l,d=>d.getXMin(),d=>d.getXMax(),d=>d.br().x),Cp:d=>d.x,Hp:(d,f)=>({x:d.x,y:f.y,z:f.z}),Jd:Bt(0,-1,0),$p:d=>{const f={x:d.x>=0?1:-1,y:d.y>=0?1:-1,z:d.z>=0?1:-1};return{gridlinePositionA:Bt(0,f.y,f.z),gridlinePositionB:Bt(0,f.y,-f.z),gridlinePositionC:Bt(0,-f.y,-f.z)}},Zp:()=>!0,Qp:()=>!1,Yp:()=>!1}),this.rb.x,this.qi,this.At,this.ib,this.pixelScale,!1,this.es),y:new Dm(this,BF(()=>this.xS),this.rb.y,this.qi,this.At,this.ib,this.pixelScale,!1,this.es),z:new Dm(this,PF(()=>this.xS),this.rb.z,this.qi,this.At,this.ib,this.pixelScale,!1,this.es)},this.lb=this.At.rp([Fr.InternalUI]).setMouseInteractions(!1),this.setBoundingBoxStrokeStyle(this.qi.chart3DBoundingBoxStrokeStyle),this.FS=this.tb.ic(this.engine.scale,Dr.Simple).Ce(this.qi.chart3DSeriesBackgroundFillStyle).we(vt).setMouseInteractions(!0),this.IS=this.tb.ic(this.engine.scale,Dr.Simple).Ce(Vt).we(this.qi.chart3DSeriesBackgroundStrokeStyle).setMouseInteractions(!1),super.TS(this.FS,this.IS),this.ub({x:1,y:1,z:1},!0),this.sb=new HF(this.engine.scale,this.pixelScale,this.rb,(d,f)=>(f&&this.hb(f),this.At.Gp(d))),this.cb=this.sb.getDefaultCameraConfiguration(this.fb(this.Ab)),this.hb(this.cb),this.hS=Is(new hS((d,f,y)=>{u={locationOne:f,locationTwo:y,cameraLocation:this.At.getCameraLocation()}},(d,f,y,m,p,x)=>{if(!this.Qv&&!this.Zv)return;const b=(u.locationOne.x-u.locationTwo.x)**2+(u.locationOne.y-u.locationTwo.y)**2,v=(f.x-y.x)**2+(f.y-y.y)**2,R=ft.length(u.cameraLocation),E=b/v*R,V=Y((m.x+p.x)/2,(m.y+p.y)/2);this.$v.push({type:"rotate+zoom",rotation:this.Qv?V:{x:0,y:0},cameraDistance:this.Zv?E:R}),this.us.Ss(),At(x)},d=>{}),new wr(d=>{},(d,f,y,m,p)=>{if(this.Qv){const x=m;this.$v.push({type:"rotate",rotation:x}),this.us.Ss(),At(p)}},d=>{})),this.onBackgroundTouchStart(this.hS.onTouchStart),this.onBackgroundTouchMove(this.hS.onTouchMove),this.onBackgroundTouchEnd(this.hS.onTouchEnd),this.onSeriesBackgroundTouchStart(this.hS.onTouchStart),this.onSeriesBackgroundTouchMove(this.hS.onTouchMove),this.onSeriesBackgroundTouchEnd(this.hS.onTouchEnd),this.onBackgroundMouseDrag(this.eS),this.onBackgroundMouseWheel(this.sS),this.onBackgroundMouseDown((d,f)=>{At(f)}),this.onSeriesBackgroundMouseDrag(this.eS),this.onSeriesBackgroundMouseWheel(this.sS),this.onSeriesBackgroundMouseDown((d,f)=>{At(f)}),this.setAnimationsEnabled((o==null?void 0:o.disableAnimations)!==!0&&(o==null?void 0:o.animationsEnabled)!==!1),this.onResize(this.fn),this.fn(),this.Sm(n,this.pixelScale)}addPointSeries(t){const e=new(t&&t.type||YF)(this,this._S,this.At,this.qi,this.us.es,t);return this.PS(e),e}addLineSeries(t){const e=new UF(this,this._S,this.At,this.qi,(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length,this.us.es);return this.PS(e),e}addPointLineSeries(t){const e=new OF(this,this._S,this.At,this.qi,(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length,this.us.es);return this.PS(e),e}addSurfaceGridSeries(t){const e=new WF(this,this._S,this.At,t,this.qi,this.us.es);return this.PS(e),e}addSurfaceScrollingGridSeries(t){const e=new $F(this,this._S,this.At,t,this.qi,this.us.es);return this.PS(e),e}addBoxSeries(t){const e=new IF(this,this._S,this.At,this.qi,(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length,this.us.es);return this.PS(e),e}addMeshModel(t){const e=new qF(this,this._S,this.At,this.qi,t,this.us.es);return this.PS(e),e}translateCoordinate(t,e,i){if(Cf(e)||Cf(i)||Ob(t)){if(Cf(e)&&Cf(i)&&Ob(t)){if(e.id==="axes"&&i.id==="world")return this.At.ft(t);if(e.id==="world"&&i.id==="axes")return this.At.yt(t);if(e.id===i.id)return t}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}return Y0(t,e,i,this.pixelScale,this.us)}getDefaultAxisX(){return this.ab.x}getDefaultAxisY(){return this.ab.y}getDefaultAxisZ(){return this.ab.z}get axisX(){return this.getDefaultAxisX()}get xAxis(){return this.getDefaultAxisX()}get axisY(){return this.getDefaultAxisY()}get yAxis(){return this.getDefaultAxisY()}get axisZ(){return this.getDefaultAxisZ()}get zAxis(){return this.getDefaultAxisZ()}getDefaultAxes(){return[this.ab.x,this.ab.y,this.ab.z]}setCameraLocation(t){let e={location:t,direction:ft.normalize(ft.multiply(t,-1))};const i=this.sb.cameraLocationChanged(this.eb(e));return i&&(e=i),this.hb(e),this.us.Ss(),this}getCameraLocation(){return this.At.getCameraLocation()}getCameraDirection(){return this.At.getCameraDirection()}setCameraAutomaticFittingEnabled(t){this.sb.ev(t);const e=this.sb.cameraLocationChanged(this.eb());return e&&this.hb(e),this}getCameraAutomaticFittingEnabled(){return this.sb.fv()}onCameraChange(t){return this.D.on("cameraChange",t)}offCameraChange(t){return this.D.off(t,"cameraChange")}setBoundingBoxStrokeStyle(t){return this.lb.Re(t).Rp(lp(this.lb.uu())),this.At.Ss(),this}getBoundingBoxStrokeStyle(){return this.lb.uu()}setBoundingBox(t){return this.ub(t,!1),this}ub(t,e){this.Ab=t;const i=this.fb(t);if(this.rb.x.q(i.x),this.rb.y.q(i.y),this.rb.z.q(-i.z),!e){const s=this.sb.boundingBoxChanged(this.eb());s&&this.hb(s)}this.us.Ss()}getBoundingBox(){return this.Ab}Te(t){if(rs.Fm(this._m,this.bm),this.Jv!==0){const f=this.Jv*t*.006;this.$v.push({type:"wheel-zoom",deltaY:f}),this.Jv=Math.sign(this.Jv)*Math.max(Math.abs(this.Jv)-.01*t,0),this.Jv!==0&&this.us.Ss(!0)}const e=this.getCameraDirection();if(this.$v.length>0){const f=this.sb.applyCameraInteractions(this.eb(),this.$v);f&&this.hb(f),this.$v.length=0}this.gb&&ft.equals(this.gb.location,this.cb.location)&&ft.equals(this.gb.direction,this.cb.direction)||this.D.emit("cameraChange",this,this.getCameraLocation()),this.gb=this.cb,super.Te(t);for(let f=0;f<this.xS.length;f+=1)this.xS[f].oS();for(let f=0;f<this.xS.length;f+=1)this.xS[f].Te();this.ab.x.Mr(),this.ab.y.Mr(),this.ab.z.Mr(),this.ab.x.Te(e),this.ab.y.Te(e),this.ab.z.Te(e),super.pm();const i=this.rb,s=Bt(i.x.getInnerStart(),i.y.getInnerStart(),i.z.getInnerStart()),n=Bt(i.x.getInnerEnd(),i.y.getInnerEnd(),i.z.getInnerEnd());this.lb.Nt().nl([Bt(n.x,s.y,s.z),Bt(n.x,n.y,s.z),Bt(n.x,n.y,n.z),Bt(n.x,s.y,n.z),Bt(s.x,s.y,n.z),Bt(s.x,n.y,n.z),Bt(n.x,n.y,n.z),Bt(n.x,n.y,s.z),Bt(s.x,n.y,s.z),Bt(s.x,n.y,n.z),Bt(s.x,s.y,n.z),Bt(s.x,s.y,s.z)]);const a=[Bt(s.x,s.y,s.z),Bt(n.x,s.y,s.z),Bt(s.x,n.y,s.z),Bt(n.x,n.y,s.z),Bt(s.x,s.y,n.z),Bt(n.x,s.y,n.z),Bt(s.x,n.y,n.z),Bt(n.x,n.y,n.z)].map(f=>this.At.Gp(f)),o=this.At.Gp(Bt((s.x+n.x)/2,(s.y+n.y)/2,(s.z+n.z)/2)),l=db(a,o),u=[];for(let f=0;f<l.length;f+=1){const y=l[f];C3(y,o,l[f>0?f-1:l.length-1],l[f<l.length-1?f+1:0])||u.push(y)}const d=db(u,o);this.FS.pl(d),this.IS.pl(d);for(let f=0;f<this.xS.length;f+=1)this.xS[f].dp()}dispose(){return this.an.forEach(t=>{t()}),this.an.length=0,this.rb.W(),this.At.W(),this.ib.W(),this.tb.W(),super.dispose()}j(){return this.rb.x.j(),this.rb.y.j(),this.rb.z.j(),super.j()}Z(){return super.Z()}hb(t){this.At.setCameraLocation(t.location).setCameraDirection(t.direction).setLightLocation(ft.addVec(t.location,ft.multiply(t.direction,-this.Xv))),this.cb=t,this.us.Ss()}fb(t){return ft.divide(t,ft.length(t)/this.Hv)}eb(t=this.cb){return{boundingBox:this.fb(this.Ab),cameraLocation:t.location,cameraDirection:t.direction}}setMouseInteractions(t){return this.setMouseInteractionZoom(t).setMouseInteractionRotate(t)}setMouseInteractionZoom(t){return this.Zv=t,this}getMouseInteractionZoom(){return this.Zv}setMouseInteractionRotate(t){return this.Qv=t,this}getMouseInteractionRotate(){return this.Qv}forEachAxis(t){return t(this.ab.x),t(this.ab.y),t(this.ab.z),this}getSeries(){return this.xS}getMinimumSize(){}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationZoom(t),this.forEachAxis(e=>e.setAnimationsEnabled(t)),this}setAnimationZoom(t){return this.jv=!!t,this}getAnimationZoom(){return this.jv}}const jF={Row:$c};class JF extends xS{constructor(t,e,i,s,n,a){super(t,e,i,s,n,a),this.mb=new Map,this.yb=this.addUIElement(jF.Row).setPosition({x:0,y:100}).setOrigin(wl.LeftTop).setBackground(o=>o.setFillStyle(Vt).setStrokeStyle(vt))}add(t,e){return(t instanceof Qr?[t]:t instanceof tT?t.getCells().filter(i=>i.panel instanceof Qr).map(i=>i.panel):[]).forEach(i=>{const s=this.yb.addElement(hF.VerticalLegendBox).setBackground(n=>n.setFillStyle(Vt).setStrokeStyle(vt)).add(i,e).setTitle(i.getTitle());this.mb.set(i,s)}),this.us.Ss(),this}setLegendBoxes(t){return this.mb.forEach((e,i)=>t(e,i)),this}getMinimumSize(){return super.getMinimumSize()||this.yb.getSize()}}const Yr={World:"World",USA:"USA",NorthAmerica:"NorthAmerica",SouthAmerica:"SouthAmerica",Canada:"Canada",Europe:"Europe",Asia:"Asia",Africa:"Africa",Australia:"Australia"},ZF=(r,t)=>!(!t.name||r.name.toLowerCase()!==t.name.toLowerCase())||"ISO_A3"in r&&"ISO_A3"in t&&r.ISO_A3.toLowerCase()===t.ISO_A3.toLowerCase(),QF=(r,t)=>{let e=t.geometry;return e=KF(r,t,e),e=t4(r,t,e),e},KF=(r,t,e)=>{if(r===Yr.Asia){const i=[];for(let s=0;s<e.length;s+=1){i[s]=[];const n=e[s],a=i[s];for(let o=0;o<n.length;o+=1){const l=n[o];l.x<-100?a[o]={x:l.x+360,y:l.y}:a[o]=l}}return i}return e},t4=(r,t,e)=>{const i=t.name.toLowerCase();let s;if(r===Yr.USA&&(i==="alaska"?s={translate:{x:55,y:-25},scale:{x:.16,y:.16}}:i==="hawaii"&&(s={translate:{x:48,y:7},scale:{x:1,y:1}})),s){const{translate:n,scale:a}=s,o=Ze(Jf(e)),l=[];for(let u=0;u<e.length;u+=1){l[u]=[];const d=e[u],f=l[u];for(let y=0;y<d.length;y+=1){const m=d[y];let p=m.x;i==="alaska"&&Math.sign(p)===1&&(p=-180-(180-p)),f[y]={x:n.x+(p-o.min.x)*a.x+o.min.x,y:n.y+(m.y-o.min.y)*a.y+o.min.y}}}return t.outlier=!0,t.transform={...s,vertexBoundaries:o},l}return e},e4={World:{min:{x:-180,y:-90},max:{x:180.0000000000002,y:83.63410065300012}},Europe:{min:{x:-25,y:34},max:{x:40,y:70}},Africa:{min:{x:-17,y:-40},max:{x:52,y:37.37549753800012}},Asia:{min:{x:27,y:-10.922621351999808},max:{x:180.0000000000002,y:81.85871002800009}},NorthAmerica:{min:{x:-179.1435033839999,y:5.515082098000121},max:{x:-50,y:83.11652252800009}},SouthAmerica:{min:{x:-85,y:-55.9185042229998},max:{x:-35,y:15}},USA:{min:{x:-125,y:24},max:{x:-68,y:50}},Canada:{min:{x:-141.0181,y:41.7297},max:{x:-52.6194,y:75}},Australia:{min:{x:111,y:-43.6586},max:{x:155,y:-9.2199}}},i4={World:.6,Europe:1/1.4,Africa:1.3,Asia:.8,NorthAmerica:.9,SouthAmerica:1.5,USA:3/4,Canada:6/8,Australia:11/12};class DE extends Qr{constructor(t,e,i,s,n,a,o){super(t,e,i,e.vm("mapChart bg",0),s,e.us.qi.mapChartBackgroundFillStyle,e.us.qi.mapChartBackgroundStrokeStyle,e.us.qi.mapChartTitleFont,e.us.qi.mapChartTitleFillStyle,o),this.pb=[],this.dt=this.sm.d2({scaleXYConstructor:xe}),this.Yi=!0,this.Sb=this.qi.mapChartSeparateRegionFillStyle,this.vb=this.qi.mapChartSeparateRegionStrokeStyle,this.bb=$e.onHover,this.Wy=s4,this.th=!0,this.xb=0,this.Mb=!0,this._b=new Map,this.onMouseEnter=d=>this.D.on("mouseEnter",d),this.onMouseLeave=d=>this.D.on("mouseLeave",d),this.onMouseClick=d=>this.D.on("mouseClick",d),this.onMouseDoubleClick=d=>this.D.on("mouseDoubleClick",d),this.onMouseDown=d=>this.D.on("mouseDown",d),this.onMouseUp=d=>this.D.on("mouseUp",d),this.onMouseMove=d=>this.D.on("mouseMove",d),this.offMouseEnter=d=>this.D.off(d,"mouseEnter"),this.offMouseLeave=d=>this.D.off(d,"mouseLeave"),this.offMouseClick=d=>this.D.off(d,"mouseClick"),this.offMouseDoubleClick=d=>this.D.off(d,"mouseDoubleClick"),this.offMouseDown=d=>this.D.off(d,"mouseDown"),this.offMouseUp=d=>this.D.off(d,"mouseUp"),this.offMouseMove=d=>this.D.off(d,"mouseMove"),this.offMouseDragStart=d=>this.D.off(d,"mouseDragStart"),this.offMouseDrag=d=>this.D.off(d,"mouseDrag"),this.offMouseDragStop=d=>this.D.off(d,"mouseDragStop"),this.offMouseWheel=d=>this.D.off(d,"mouseWheel"),this.onMapDataReady=d=>{const f=this.D.on("mapDataReady",d);return this.wb&&nt.setTimeout(()=>d()),f},this.onViewChange=d=>this.D.on("viewChange",d),this.Cb=(d,f,y,m,p)=>{this.dt.x.q(m).si([this.Xt.left+this.ya.left,this.Xt.right+this.ya.right]),this.dt.y.q(p).si([this.Xt.bottom+this.ya.bottom,this.Xt.top+this.ya.top+rs.Tm(this._m,this.bm)]),this.kb&&this.Tb(this.Fb,this.dt,this.kb)},this.wt=(d,f)=>{const y=f;if(!y||!this.wb)return;const{iRegion:m,region:p}=this.Ib(this.wb,y);this.bb!==$e.disabled&&(this.Pb(p,m),At(d)),this.Mb&&this.us.ls.Ms(p,!0),this.Db=p,this.D.emit("mouseEnter",this,d)},this.Ct=(d,f)=>{const y=f;if(!y||!this.wb)return;const{iRegion:m,region:p}=this.Ib(this.wb,y);this.Bb(p,m),this.Mb&&this.us.ls.Ms(p,!1),this.Db=void 0,this.D.emit("mouseLeave",this,d),d&&At(d)},this.Pt=(d,f)=>{const y=f;if(!y||!this.wb)return;const{iRegion:m,region:p}=this.Ib(this.wb,y);this.bb!==$e.disabled&&(this.Pb(p,m),At(d)),this.Db=p,this.D.emit("mouseMove",this,d)},this.kt=(d,f)=>this.D.emit("mouseClick",this,d),this.Tt=(d,f)=>this.D.emit("mouseDoubleClick",this,d),this.Ft=(d,f)=>this.D.emit("mouseDown",this,d),this.It=(d,f)=>this.D.emit("mouseUp",this,d),this.Bt=(d,f,y)=>{this.D.emit("mouseDragStart",this,d,f)},this.Dt=(d,f,y,m,p)=>{this.D.emit("mouseDrag",this,d,f,y,m)},this.Lt=(d,f,y,m)=>{this.D.emit("mouseDragStop",this,d,f,y)},this.Rt=(d,f)=>{this.D.emit("mouseWheel",this,d)},this.Et=(d,f)=>{const y=f;if(!y||!this.wb)return;const{iRegion:m,region:p}=this.Ib(this.wb,y);this.Lb=this.engine.clientLocation2Engine(d.clientX,d.clientY),this.Pb(p,m),this.Mb&&this.us.ls.Ms(p,!0),this.Db=p,this.D.emit("touchStart",this,d),At(d)},this.zt=(d,f)=>{const y=f;if(!y||!this.wb)return;const{iRegion:m,region:p}=this.Ib(this.wb,y);this.Lb=this.engine.clientLocation2Engine(d.clientX,d.clientY),this.Pb(p,m),this.Db=p,this.D.emit("touchMove",this,d),At(d)},this.Vt=(d,f)=>{const y=f;if(!y||!this.wb)return;const{iRegion:m,region:p}=this.Ib(this.wb,y);this.Lb=void 0,this.Bb(p,m),this.Mb&&this.us.ls.Ms(p,!1),this.Db=void 0,this.D.emit("touchEnd",this,d),At(d)},this.us.Nn(Ct.Af),this.th=(a==null?void 0:a.disableAnimations)!==!0&&(a==null?void 0:a.animationsEnabled)!==!1,this.Rb=e.$y("mapChart plotting",0),this.onResize(this.Cb),this._m.Rh("Map Chart");const l=Fe(a?a.autoCursorBuilder:void 0,wE);this.Eb=l.Ay(e.Zy(),this.dt,this.dt,this.qi).setVisible(!1),this.zb=this.es.yg(),this.Sm(n,this.uiScale),this.Vb=this.Rb.Ob(this.dt).setMouseInteractions(this.Yi).setMouseEnterEventHandler((d,f,y)=>this.wt(f,y)).setMouseLeaveEventHandler((d,f,y)=>this.Ct(f,y)).setMouseClickEventHandler((d,f,y)=>this.kt(f,y)).setMouseDoubleClickEventHandler((d,f,y)=>this.Tt(f,y)).setMouseDownEventHandler((d,f,y)=>this.Ft(f,y)).setMouseUpEventHandler((d,f,y)=>this.It(f,y)).setMouseMoveEventHandler((d,f,y)=>this.Pt(f,y)).setMouseDragStartEventHandler((d,f,y,m)=>this.Bt(f,y,m)).setMouseDragEventHandler((d,f,y,m,p,x)=>this.Dt(f,y,m,p,x)).setMouseDragStopEventHandler((d,f,y,m,p)=>this.Lt(f,y,m,p)).setMouseWheelEventHandler((d,f,y)=>this.Rt(f,y)).setTouchStartEventHandler((d,f,y)=>this.Et(f,y)).setTouchMoveEventHandler((d,f,y)=>this.zt(f,y)).setTouchEndEventHandler((d,f,y)=>this.Vt(f,y)).Ce(this.qi.mapChartFillStyle).we(this.qi.mapChartStrokeStyle),this.Nb=this.Rb.Ob(this.dt).setMouseInteractions(this.Yi).Ce(this.qi.mapChartOutlierRegionFillStyle).we(this.qi.mapChartOutlierRegionStrokeStyle);const u=Fe(a&&a.type,Yr.World);this.Fb=u,this.Gb(u).then(()=>{this.D.emit("mapDataReady")})}getRegionUnderMouse(){return this.Db}setFillStyle(t){return this.Vb.Ce(t),this.us.Ss(),this}getFillStyle(){return this.Vb.Eh()}setStrokeStyle(t){return this.Vb.we(t),this.us.Ss(),this}getStrokeStyle(){return this.Vb.ao()}setEffect(t){return this.zb.ps(t),this.us.Ss(),this}getEffect(){return this.zb.vs()}setOutlierRegionFillStyle(t){return this.Nb.Ce(t),this.us.Ss(),this}getOutlierRegionFillStyle(){return this.Nb.Eh()}setOutlierRegionStrokeStyle(t){return this.Nb.we(t),this.us.Ss(),this}getOutlierRegionStrokeStyle(){return this.Nb.ao()}setSeparateRegionFillStyle(t){return this.Sb=typeof t=="function"?t(this.Sb):t,this.pb.forEach(e=>e.Ce(this.Sb)),this.us.Ss(),this}getSeparateRegionFillStyle(){return this.Sb}setSeparateRegionStrokeStyle(t){return this.vb=typeof t=="function"?t(this.vb):t,this.pb.forEach(e=>e.we(this.vb)),this.us.Ss(),this}getSeparateRegionStrokeStyle(){return this.vb}invalidateRegionValues(t){if(!this.wb||!this.Wb)return this.Ub=this.Ub||[],this.Ub.push(t),this;if(typeof t=="function")for(let e=0;e<this.wb.regions.length;e+=1){const i=this.wb.regions[e],s=this.Wb[e],n=t({...i,geometry:void 0},s);if(n!==void 0&&n!==s){this.Wb[e]=n;const a=this._b.get(i);a==null||a.forEach(o=>{o.Yb(n)})}}else for(const e of t)if(e)for(let i=0;i<this.wb.regions.length;i+=1){const s=this.wb.regions[i],n=this.Wb[i];if(e.value!==void 0&&e.value!==n&&ZF(s,e)){this.Wb[i]=e.value;const a=this._b.get(s);a==null||a.forEach(o=>{o.Yb(e.value)})}}return this.us.Ss(),this}setAutoCursor(t){return this.Eb&&t(this.Eb),this.us.Ss(),this}getAutoCursor(){return this.Eb}setAutoCursorMode(t){return this.bb=t,this.us.Ss(),this}getAutoCursorMode(){return this.bb}setCursorResultTableFormatter(t){return this.Wy=t,this.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}onMouseDragStart(t){return this.D.on("mouseDragStart",t)}onMouseDrag(t){return this.D.on("mouseDrag",t)}onMouseDragStop(t){return this.D.on("mouseDragStop",t)}onMouseWheel(t){return this.D.on("mouseWheel",t)}onTouchStart(t){return this.D.on("touchStart",t)}onTouchMove(t){return this.D.on("touchMove",t)}onTouchEnd(t){return this.D.on("touchEnd",t)}offTouchStart(t){return this.D.off(t,"touchStart")}offTouchMove(t){return this.D.off(t,"touchMove")}offTouchEnd(t){return this.D.off(t,"touchEnd")}setMouseInteractions(t){return this.Yi=t,this.Vb.setMouseInteractions(t),this}getMouseInteractions(){return this.Yi}setHighlight(t){var e;return t=xo(t),this.xb=t,(e=this.wb)===null||e===void 0||e.regions.forEach(i=>{this.us.ls.Ms(i,t)}),this.D.emit("highlight",this,t),this}getHighlight(){return this.xb}setAnimationHighlight(t){var e;return(e=this.wb)===null||e===void 0||e.regions.forEach(i=>{this.us.ls._s(i,t)}),this}getAnimationHighlight(){var t;return this.us.ls.ws((t=this.wb)===null||t===void 0?void 0:t.regions[0])}setHighlightOnHover(t){return this.Mb=t,t===!1&&this.getHighlight()>0&&this.setHighlight(!1),this}getHighlightOnHover(){return this.Mb}onHighlight(t){return this.D.on("highlight",t)}offHighlight(t){return this.D.off(t)}offMapDataReady(t){return this.D.off(t,"mapDataReady")}offViewChange(t){return this.D.off(t,"viewChange")}async Gb(t){const e=await((n,a)=>{let o;if(n===Yr.World)o="countries_world.json";else if(n===Yr.NorthAmerica)o="countries_northAmerica.json";else if(n===Yr.SouthAmerica)o="countries_southAmerica.json";else if(n===Yr.Africa)o="countries_africa.json";else if(n===Yr.Europe)o="countries_europe.json";else if(n===Yr.Asia)o="countries_asia.json";else if(n===Yr.USA)o="states_usa.json";else if(n===Yr.Canada)o="territoriesProvinces_canada.json";else{if(n!==Yr.Australia){const u=`LCJS MapChart unidentified \`type\`: ${n}`;throw nt.alert(u),new Error(u)}o="territories_australia.json"}const l=`${a}/maps/${o}`;return nt.fetch(l).then(u=>u.json()).catch(u=>{zR(a,l,"Map Chart",{shouldCrash:!0})})})(t,this.cA.$s);this.Wb=new Array(e.regions.length).map(n=>{}).fill(void 0);const i=e4[t];if(!i)throw new Error("Unidentified map type.");for(const n of e.outliers)for(const a of n.geometry)this.Nb.zr().pl(a);t===Yr.USA&&this.pb.push(this.Rb.ke(this.dt).setMouseInteractions(!1).Ce(this.Sb).we(this.vb).Fe({x:-126,y:25.8}).q({x:10,y:29.7-25.8}),this.Rb.ke(this.dt).setMouseInteractions(!1).Ce(this.Sb).we(this.vb).Fe({x:-113,y:25.8}).q({x:7,y:29.7-25.8}));const s=this.us.ls.Er(this.Vb,{animationEnabled:this.th});for(let n=0;n<e.regions.length;n+=1){const a=e.regions[n],o=QF(t,a),l=[];for(const u of o)u.length<3||l.push(this.Vb.zr().pl(u));this._b.set(a,l),s.zr(a,u=>{l.forEach(d=>d.cs(u))})}if(this.zb.fs([this.Vb]),this.kb=i,this.Tb(t,this.dt,i),this.wb=e,this.Ub){for(const n of this.Ub)this.invalidateRegionValues(n);this.Ub=void 0}this.us.Ss()}Tb(t,e,i){const s=i4[t],n=e.x.getCellSize(),a=e.y.getCellSize()/n,o={min:{x:i.min.x,y:i.min.y},max:{x:i.max.x,y:i.max.y}};if(a<s){const d=(o.max.x-o.min.x)*(s/a-1);o.min.x-=d/2,o.max.x+=d/2}else if(a>s){const d=(o.max.y-o.min.y)*(a/s-1);o.min.y-=d/2,o.max.y+=d/2}e.x.J(o.min.x,o.max.x),e.y.J(o.min.y,o.max.y);const l=this.dt.x.li(),u=this.dt.y.li();this.D.emit("viewChange",{latitudeRange:{start:o.min.y,end:o.max.y},longitudeRange:{start:o.min.x,end:o.max.x},margin:{top:u[1],bottom:u[0],left:l[0],right:l[1]}})}Pb(t,e){this.Hb={region:t,iRegion:e},this.us.Ss()}Bb(t,e){this.Hb&&t===this.Hb.region&&(this.Hb=void 0,this.us.Ss())}Ib(t,e){const i=Array.from(this._b.entries()).findIndex(([s,n])=>n.includes(e));return{iRegion:i,region:t==null?void 0:t.regions[i]}}setAnimationsEnabled(t){return this.th=!t,this}getAnimationsEnabled(){return this.th}getMinimumSize(){}Zd(){return[this]}Te(t){super.Te(t),super.pm(),rs.Fm(this._m,this.bm);const e=gR(this.dt.x.ei(),this.dt.y.ei(),this.dt.x.ri(),this.dt.y.ri());this.Rb.qv(e);const i=this.us.On()||this.Lb;if(this.Hb&&i){const s=this.Wb&&this.Wb[this.Hb.iRegion];let n=gt(i,this.engine.scale,this.dt);n={x:Zt(n.x,this.dt.x.getInnerStart(),this.dt.x.getInnerEnd()),y:Zt(n.y,this.dt.y.getInnerStart(),this.dt.y.getInnerEnd())};let a=n.x,o=n.y;const l=this.Hb.region.transform;this.Hb.region.outlier&&l&&(a=(a-l.translate.x-l.vertexBoundaries.min.x)/l.scale.x+l.vertexBoundaries.min.x,o=(o-l.translate.y-l.vertexBoundaries.min.y)/l.scale.y+l.vertexBoundaries.min.y),this.Eb.setPosition(n).setVisible(!0).getResultTable().setContent(this.Wy(new Ui,this.Hb.region,s,a,o,this).Zu())}else this.Eb.setVisible(!1);return this.Eb.Ps().Te(),this}dispose(){return this.Rb.W(),this.Eb.dispose(),_l(this.dt),super.dispose()}j(){return super.j(),this.dt.j(),this}Z(){return super.Z(),this.dt.Z(),this}Gd(){return Ji(this.getFillStyle())}attach(t,e=!0,i=!1){return t.setText(this.getTitle()),t.setOn(!0).setLocked(!0),t.onMouseEnter(()=>{this.setHighlight(!0)}),t.onMouseLeave(()=>{this.setHighlight(!1)}),this.onMouseEnter(()=>t.setHighlight(!0)),this.onMouseLeave(()=>t.setHighlight(!1)),this.onTouchStart(()=>t.setHighlight(!0)),this.onTouchEnd(()=>t.setHighlight(!1)),ii(t,this.qi,i,{fill:this.getFillStyle()}),this}}const s4=(r,t,e,i,s,n)=>(r.addRow(`${t.name}`).addRow(r4(i,s)),e!==void 0&&r.addRow(`Region value: ${e.toFixed(1)}`),r),r4=(r,t)=>{const e=r>0,i=t>0;return`${[ps(Math.abs(0|r),2)," ",ps(Math.abs(0|(r<0?r=-r:r)%1*60),2),"' "].join("")+(e?"E":"W")}, ${[ps(Math.abs(0|t),2)," ",ps(Math.abs(0|(t<0?t=-t:t)%1*60),2),"' "].join("")+(i?"N":"S")}`};class FE extends lh{constructor(t,e,i,s,n,a,o,l,u){super(t,e,e.$b(i),s,n,{numeric:e.Xb({amplitude:s.polarAmplitudeAxisNumericTicks,radial:s.polarAmplitudeAxisNumericTicks}),datetime:e.Xb({amplitude:s.polarAmplitudeAxisDateTimeTicks,radial:s.polarAmplitudeAxisDateTimeTicks}),time:e.Xb({amplitude:s.polarAmplitudeAxisTimeTicks,radial:s.polarAmplitudeAxisTimeTicks})},{type:"linear"}),this.jb=a,this.Zb=o,this.Qb=l,this.es=u,this.Jb=i,this.Kb=e.Xb({amplitude:s.polarAmplitudeAxisStrokeStyle,radial:s.polarRadialAxisStrokeStyle}),this.Lh=l.Pr(i).setMouseInteractions(!1).Oh(e.Xb({amplitude:s.polarAmplitudeAxisTitleFont,radial:s.polarRadialAxisTitleFont})).Ce(e.Xb({amplitude:s.polarAmplitudeAxisTitleFillStyle,radial:s.polarRadialAxisTitleFillStyle})),this.Wh=this.es.yg([this.Lh]).ps(s.effectsText)}setTickStrategy(t,e){return super.Fh(t,e)}setStrokeStyle(t){return this.Kb=typeof t=="function"?t(this.Kb):t,this.Zb.Ss(),this}getStrokeStyle(){return this.Kb}ur(t,e){return new n4(e,t,this.Jb,this.Qb,this.qb(this.jb,this.Jb),this.Qb.Ee(this.Jb).setMouseInteractions(!1))}cr(t,e){const i=this.tx(this.Jb,t);this.ix&&this.ix(t)===!1?t.Ue.setVisible(!1):t.Ue.setVisible(!0).Fe(_t(this.sx(this.Jb,t.u),i.padding)).Ea(i.alignment).Nh(i.rotation).Ia(i.offset.x,i.offset.y),this.hx(this.Jb,t.nx,t.ox,t)}setMouseInteractions(t){return this}Te(){this.qh({physicalAxisSize:0});const t=this.gr((e,i)=>{const s=i.Sh.lr,n=.5*this.Kb.getThickness()+s.tickLength+s.tickPadding+Math.abs(i.Ue.Ps().jc().y)+s.labelPadding;return Math.max(e,n)},0);return this.lx(this.Jb,this.Kb,t),this.ux(this.Jb,this.Lh,t),t}}class n4 extends Hc{constructor(t,e,i,s,n,a,o){super(t,e,s,i,o),this.nx=n,this.ox=a,n.setMouseInteractions(!1),this.ts.push(n,a)}}class a4 extends FE{constructor(t,e,i,s,n,a,o,l,u){super(t,o4(()=>this._g()),e,i,s,n,a,o,l),this.Lp=this.Zb.Ee(this.Jb).setMouseInteractions(!1),this.Ax=u,this.setScrollStrategy(Zr.expansion),this.setTickStrategy(Cl.Numeric),this.setTitle("Amplitude")}_g(){return this.Ax()}_r(t,e){return Tc(t,e,this.Jb.y)}Cr(t,e,i){const s=2*(e-t),n=this.Jb.x.Li(s);return{min:t-i*n,max:e+i*n}}sx(t,e){return{x:t.gx()?e-t.mx().start:t.mx().start-e,y:0}}qb(t,e){return t.Jc(e)}hx(t,e,i,s){const n=s.Sh.lr,a=t.gx()?s.u-t.mx().start:t.mx().start-s.u;Ai(s.u,t.mx().start)||Ai(s.u,t.mx().end)?e.setVisible(!1):e.setVisible(!0).eu(0).ze(360).au(void 0).ou(0).hu(a).au(60).Ce(Vt).we(n.gridStrokeStyle);const o=.5*this.Kb.getThickness();i.Ve({x:a,y:-o*t.Wi().y}).ze({x:a,y:-(o+n.tickLength)*t.Wi().y}).Re(n.tickStyle)}tx(t,e){const i=e.Sh.lr;return{alignment:{x:0,y:1},padding:{x:0,y:t.Wi().y*-(.5*this.Kb.getThickness()+i.tickLength+i.tickPadding)},rotation:0,offset:{x:0,y:0}}}lx(t,e,i){const s=t.gx()?t.mx().end-t.mx().start:t.mx().start-t.mx().end;this.Lp.Ve({x:0,y:0}).ze({x:s,y:0}).Re(e)}ux(t,e,i){const s=t.gx()?(t.mx().start+t.mx().end)/2-t.mx().start:t.mx().start-(t.mx().start+t.mx().end)/2;e.Ea({x:0,y:1}).Fe({x:s,y:-i*t.Wi().y})}}const o4=r=>({...Zl(r,t=>t.getAmplitudeMin(),t=>t.getAmplitudeMax(),t=>{}),$b:t=>({getInnerStart:()=>t.mx().start,getInnerEnd:()=>t.mx().end,J:(e,i)=>t.yx(e,i),nt:(e,i,s,n,a)=>t.y.nt(e,i,s,n,a)}),Xb:t=>t.amplitude});class h4 extends FE{constructor(t,e,i,s,n,a,o,l){super(t,l4,e,i,s,n,a,o,l),this.Sx=90,this.vx=12,this.bx=Gb,this.Lp=this.Zb.Jc(this.Jb).setMouseInteractions(!1),this.ix=u=>{let d=180*(u.u-this.Jb.xx())/Math.PI%360;for(;d<0;)d+=360;for(;d>360;)d-=360;if(d>=0&&d<=20||d>=340&&d<=360)return!1},this.Je=void 0,this.setTickStyle(i.polarRadialAxisTickStyle),this.setTitle("Degrees"),this.setNorth(this.Sx)}setTickStyle(t){return this.Mx=typeof t=="function"?t(this.Mx):t,this._x(),this.Zb.Ss(),this}getTickStyle(){return this.Mx}setTickFormattingFunction(t){return this.bx=t,this._x(),this.Zb.Ss(),this}getTickFormattingFunction(){return this.bx}setClockwise(t){this.Jb.wx(t);const e=this.Sx*Math.PI/180;return t?this.Jb.Cx(e+Math.PI/2):this.Jb.Cx(e-Math.PI/2),this.Zb.Ss(),this}getClockwise(){return!this.Jb.kx()}setNorth(t){for(;t<0;)t+=360;t%=360,this.Sx=t;const e=t*Math.PI/180;return this.getClockwise()?this.Jb.Cx(e+Math.PI/2):this.Jb.Cx(e-Math.PI/2),this.Zb.Ss(),this}getNorth(){return 180*this.Jb.xx()/Math.PI}setDivision(t){return this.vx=t,this._x(),this.Zb.Ss(),this}getDivision(){return this.vx}_g(){return[]}_r(t,e){return e}Cr(t,e,i){return{min:t,max:e}}sx(t,e){const i=t.kx()?1:-1,s=t.xx(),n=t.gx()?t.mx().end-t.mx().start:t.mx().start-t.mx().end;return{x:Math.cos((e-s)*i)*n,y:Math.sin((e-s)*i)*n}}qb(t,e){return t.Ee(e)}hx(t,e,i,s){const n=this.Mx,a=t.kx()?1:-1,o=t.xx(),l=(s.u-o)*a,u=Math.cos(l),d=Math.sin(l),f=t.gx()?t.mx().end-t.mx().start:t.mx().start-t.mx().end,y={x:u*f,y:d*f};e.Ve({x:0,y:0}).ze(y);const m={x:y.x+u*n.tickLength*t.Wi().x,y:y.y+d*n.tickLength*t.Wi().y};i.Ve(y).ze(m),e.Re(n.gridStrokeStyle),i.Re(n.tickStyle)}tx(t,e){const i=this.Mx,s=t.kx()?1:-1,n=t.xx();let a,o=(e.u-n)*s;for(;o<0;)o+=2*Math.PI;for(;o>=2*Math.PI;)o-=2*Math.PI;a=o>0&&o<=Math.PI?-o+Math.PI/2:-o-Math.PI/2;const l=i.tickLength+i.tickPadding,u=Math.cos(o)*l*t.Wi().x,d=Math.sin(o)*l*t.Wi().y;return{alignment:{x:0,y:0},padding:{x:u,y:d},rotation:180*a/Math.PI,offset:{x:u,y:d}}}lx(t,e,i){const s=t.gx()?t.mx().end-t.mx().start:t.mx().start-t.mx().end;this.Lp.eu(0).ze(360).ou(0).hu(s+.5*e.getThickness()*t.Wi().x).au(360).Ce(Vt).we(e)}ux(t,e,i){const s=t.xx(),n=this.tx(t,{u:0+s}),a=t.gx()?t.mx().end-t.mx().start:t.mx().start-t.mx().end;e.Ea(n.alignment).Nh(n.rotation).Ia(n.offset.x,n.offset.y).Fe(_t({x:a,y:0},n.padding))}_x(){this.$h({He:[],$e:[{Ue:"Radial ticks",Rg:0,lr:this.Mx,nr:this.bx,Br:(t,e,i,s)=>{const n=[],a=2*Math.PI/this.vx;for(let o=0;o<2*Math.PI;o+=a)n.push(o);return n},bh:{dr:()=>{},xh:()=>!1},Lr:void 0}],Ge:Gb,Xh:void 0,jh:void 0})}}const Gb=(r,t,e)=>(180*r/Math.PI).toFixed(0),l4={pr:()=>{},Sr:()=>{},br:()=>{},$b:r=>({getInnerStart:()=>0,getInnerEnd:()=>2*Math.PI,J:(t,e)=>{},nt:(t,e,i,s,n)=>r.x.nt(t,e,i,s,n)}),Xb:r=>r.radial},Fm=r=>!!(r&&typeof r=="object"&&"axisAmplitude"in r&&"axisRadial"in r),u4=r=>!!(r&&typeof r=="object"&&"angle"in r&&typeof r.angle=="number"&&"amplitude"in r&&typeof r.amplitude=="number");class c4 extends Yc{constructor(t,e,i,s,n,a){super(e,i,n,a),this.xs="Sector",this.Tx=0,this.Fx=1*Math.PI/2,this.Ix=void 0,this.Px=void 0,this.ks=t,this.Jb=s,this.ky=this.ks.Jc(this.Jb).cs(this.getHighlight()),this.ds(this.ky),this.be=n.polarSectorFillStyle,this.xe=n.polarSectorStrokeStyle,this.setMouseInteractions(!1)}setAngleStart(t){return this.Tx=Zt(t,0,360),this.ks.Ss(),this}getAngleStart(){return this.Tx}setAngleEnd(t){return this.Fx=Zt(t,0,360),this.ks.Ss(),this}getAngleEnd(){return this.Fx}setAmplitudeStart(t){return this.Ix=t,this.ks.Ss(),this}getAmplitudeStart(){return this.Ix}setAmplitudeEnd(t){return this.Px=t,this.ks.Ss(),this}getAmplitudeEnd(){return this.Px}setFillStyle(t){return this.be=typeof t=="function"?t(this.be):t,this.ks.Ss(),this}getFillStyle(){return this.be}setStrokeStyle(t){return this.xe=typeof t=="function"?t(this.xe):t,this.ks.Ss(),this}getStrokeStyle(){return this.xe}Te(){const t=this.Jb.mx(),e=180*this.Jb.xx()/Math.PI,i=this.Ix!==void 0?Zt(this.Ix,t.start,t.end):t.start,s=this.Px!==void 0?Zt(this.Px,t.start,t.end):t.end,n=this.Jb.gx()?i-t.start:t.start-i,a=this.Jb.gx()?s-t.start:t.start-s,o=Math.min(n,a),l=Math.max(n,a),u=this.Jb.kx()?1:-1,d=Math.abs(this.Fx-this.Tx);this.ky.eu((this.Tx-e)*u).ze((this.Fx-e)*u).ou(100*o/l).hu(l).Ce(this.be).we(this.xe).au(Math.ceil(d/2))}Ie(t,e){t.cs(e),this.ks.Ss()}attach(t,e=!0,i=!1){return super.attach(t,e,i),ii(t,this.qi,i,{fill:this.be,stroke:this.xe}),this}}class X0 extends Yc{constructor(){super(...arguments),this.tS=!0,this.Dx=!0}setAutoScrollingEnabled(t){return this.tS=t,this.Ji.us.Ss(),this}getAutoScrollingEnabled(){return this.tS}oS(){}Te(){}dp(){}setCursorEnabled(t){return this.Dx=t,this}getCursorEnabled(){return this.Dx}}class Kl extends X0{constructor(t,e,i,s,n,a){super(e,i,n,a),this.ks=t,this.Ji=e,this.scale=s}getAmplitudeMin(){return this.Bx?this.Bx.min:void 0}getAmplitudeMax(){return this.Bx?this.Bx.max:void 0}}const Jc=(r,t,e,i,s)=>{const n=t.getIcon();return n?r.addRow(n,t.getName()):r.addRow(t.getName()),r.addRow("Angle:","",Math.round(e).toString()).addRow("Amplitude","",s(i))},To=(r,t)=>{const e=[],i=t.mx().start,s=t.mx().end,n=t.gx(),a=t.kx()?1:-1,o=t.xx(),l=Math.abs(s-i),u=Math.min(i,s)+.001*l,d=Math.max(i,s)-.001*l;for(const f of r){const y=Zt(f.amplitude,u,d),m=f.angle*Math.PI/180-o,p=Math.cos(m*a)*(n?y-i:i-y),x=Math.sin(m*a)*(n?y-i:i-y),b=f.color;e.push({x:p,y:x,color:b})}return e},Zc=r=>{const t={min:Mt,max:Dt};for(const e of r)t.min=Math.min(t.min,e.amplitude),t.max=Math.max(t.max,e.amplitude);return t},W0=r=>r.slice().map(t=>t.angle>=0&&t.angle<=360?t:{...t,angle:t.angle%360}),wo=(r,t)=>{let e=sp(r);for(t.kx()||(e*=-1),e+=180*t.xx()/Math.PI;e<0;)e+=360;e%=360;const i=_a(r),s=t.mx(),n=Math.abs(s.end-s.start);return{angle:e,amplitude:vo(s.start,s.end,i/n)}};class d4 extends Kl{constructor(t,e,i,s,n,a,o){super(t,e,i,s,n,a),this.xs="Heatmap Series",this.Lx=!0,this.dS=!1,this.Wy=f4,this.Gd=()=>Ji(this.be);const l=this.Ji.getSeries().length;this.be=te(this.qi.polarHeatmapSeriesFillStyle||this.qi.heatmapGridSeriesFillStyle,l);const u=o.amplitudeStart||0,d=o.amplitudeEnd?(o.amplitudeEnd-u)/(o.annuli-1):o.amplitudeStep||1,f={sectors:o.sectors,annuli:o.annuli,amplitudeStart:u,amplitudeStep:d,heatmapDataType:"intensity",dataOrder:o.dataOrder||"annuli"};this.Un=f,this.Rx=t.Ex(s,[],f).Ce(this.be).cs(this.getHighlight()),this.ds(this.Rx);const y=Math.min(f.amplitudeStart,f.amplitudeStart+(f.annuli-1)*f.amplitudeStep),m=Math.max(f.amplitudeStart,f.amplitudeStart+(f.annuli-1)*f.amplitudeStep);this.Bx={min:y,max:m},this.setHighlightOnHover(!1)}invalidateIntensityValues(t){if(this.dS&&this.Ji.us.Nn(Ct.vf),Array.isArray(t)){if(t.length===0||t[0].length===0)return this;const e={x:t.length,y:t[0].length,sectors:this.Un.dataOrder==="annuli"?t[0].length:t.length,annuli:this.Un.dataOrder==="annuli"?t.length:t[0].length},i=this.Un.dataOrder==="annuli"?this.Un.annuli:this.Un.sectors,s=this.Un.dataOrder==="annuli"?this.Un.sectors:this.Un.annuli;if(e.x>i||e.y>s){if(this.Ji.cA.Hn===!0){const a=`PolarHeatmapSeries.invalidateIntensityValues intensity matrix overflow.
Heatmap ${i}x${s}, input ${e.x}x${e.y}.
Excess data will be automatically clipped. This can result in sub-optimal performance.`;nt.console.warn(a)}const n=[];for(let a=0;a<i;a+=1)n[a]=t[a].slice(0,s);if((t=n).length===0||t[0].length===0)return this}this.Rx._v({type:"intensity",lengthPrimary:e.x,lengthSecondary:e.y,startPrimary:0,startSecondary:0,values:t})}else if("iSector"in t&&"iAnnulus"in t&&"values"in t){if(t.values.length===0||t.values[0].length===0)return this;const e={primary:t.values.length,secondary:t.values[0].length,sectors:this.Un.dataOrder==="annuli"?t.values[0].length:t.values.length,annuli:this.Un.dataOrder==="annuli"?t.values.length:t.values[0].length},i=this.Un.dataOrder==="annuli"?t.iAnnulus:t.iSector,s=i+e.primary-1,n=this.Un.dataOrder==="annuli"?t.iSector:t.iAnnulus,a=n+e.secondary-1,o=this.Un.dataOrder==="annuli"?this.Un.annuli-1:this.Un.sectors-1,l=this.Un.dataOrder==="annuli"?this.Un.sectors-1:this.Un.annuli-1;if(i<0||n<0){if(this.Ji.cA.Hn===!0){const u=`PolarHeatmapSeries.invalidateIntensityValues invalidation start below 0 not permitted.
iSector: ${t.iSector}, iAnnuli: ${t.iAnnulus}.
No intensity values will be invalidated.`;nt.console.warn(u)}return this}if(s>o||a>l){if(this.Ji.cA.Hn===!0){const m=`PolarHeatmapSeries.invalidateIntensityValues intensity matrix overflow.
Max indexes ${o}x${l}, input ${e.primary}x${e.secondary} starting at [${i},${n}].
Out of bounds data will be automatically clipped. This can result in sub-optimal performance.`;nt.console.warn(m)}const u=Math.max(s-o,0),d=e.primary-u,f=Math.max(a-l,0),y=[];for(let m=0;m<d;m+=1)y[m]=t.values[m].slice(0,f>0?-f:void 0);if((t={iSector:t.iSector,iAnnulus:t.iAnnulus,values:y}).values.length===0||t.values[0].length===0)return this}this.Rx._v({type:"intensity",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:i,startSecondary:n,values:t.values})}return this.ks.Ss(),this.dS=!0,this}setFillStyle(t){return this.be=typeof t=="function"?t(this.be):t,this.Rx.Ce(this.be),this.ks.Ss(),this}getFillStyle(){return this.be}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}clear(){return this.Rx.Nt(),this.ks.Ss(),this}setCursorInterpolationEnabled(t){return this.Lx=t,this.ks.us.Ss(),this}getCursorInterpolationEnabled(){return this.Lx}setCursorEnabled(t){return super.setCursorEnabled(t)}setIntensityInterpolation(t){return t=t||"disabled",this.Rx.xv(t),this.ks.Ss(),this}getIntensityInterpolation(){return this.Rx.Mv()}Kp(){return this.tS&&this.getVisible()}Ie(t,e){t.cs(e),this.ks.Ss()}Hc(t,e){const i=gt(t,this.Ji.engine.scale,this.scale),s=wo(i,this.scale),n=this.Lx?this.Rx.zx(s):this.Rx.Hc(s);if(n)return Us(To([n],this.scale)[0],this.scale,this.Wy(new Ui,this,{angleDeg:n.angle,amplitude:n.amplitude,intensity:n.cellValue,iAnnulus:n.iAnnulus,iSector:n.iSector},this.Ji.getAmplitudeAxis().formatValue).Zu(),this,this.be)}solveNearestFromScreen(t){return this.Hc(ss(t,this.Ji.us),!1)}Te(){}attach(t,e=!0,i=!1){return super.attach(t,e),ii(t,this.qi,i,{fill:this.be}),this}}const f4=(r,t,e,i)=>{const s=t.getIcon();return s?r.addRow(s,t.getName()):r.addRow(t.getName()),r.addRow("Angle:","",Math.round(e.angleDeg).toString()).addRow("Amplitude","",i(e.amplitude)).addRow("Intensity","",e.intensity.toFixed(1))};class g4 extends Kl{constructor(t,e,i,s,n,a,o){super(t,e,i,s,n,o),this.xs="Line Series",this.Vx=[],this.Ox=!1,this.Nx=!1,this.Wy=Jc,this.lu=te(this.qi.polarLineSeriesStrokeStyle,a),this.Gx=t.rp(s,void 0,[Fr.UserSeries]).Re(this.lu).cs(this.getHighlight()).Ka(qi.Nearest),this.ds(this.Gx)}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}setData(t){return this.Vx.length!==0&&this.Ji.us.Nn(Ct.vf),this.Vx=W0(t),this.Ox=!0,this.Bx=Zc(this.Vx),this.ks.Ss(),this}setStrokeStyle(t){this.lu=typeof t=="function"?t(this.lu):t;const e=this.lu;return this.Gx.Re(e),this.ks.Ss(),this}getStrokeStyle(){return this.lu}setConnectDataAutomaticallyEnabled(t){return this.Nx=t,this.ks.Ss(),this}getConnectDataAutomaticallyEnabled(){return this.Nx}Kp(){return this.tS&&this.Vx.length>0&&this.getVisible()}Ie(t,e){t.cs(e),this.ks.Ss()}Hc(t,e){return this.Wx(t,this.Gx)}solveNearestFromScreen(t){return this.Wx(ss(t,this.Ji.us),this.Gx)}Wx(t,e){const i=e.Ux(t);if(!i)return;const{angle:s,amplitude:n}=wo(i,this.scale);return Us(i,this.scale,this.Wy(new Ui,this,s,n,this.Ji.getAmplitudeAxis().formatValue).Zu(),this,this.lu.getFillStyle())}Te(){if(this.Ox||this.scale.Yx()){const t=To(this.Vx,this.scale),e=Ze(t);this.Nx?(t.push({...t[0]}),this.Gx.zl(!0)):this.Gx.zl(!1),this.Gx.Nt().nl(t).Yo(e),this.Ox=!1,this.Gx.Ps()}}attach(t,e=!0,i=!1){return super.attach(t,e,i),ii(t,this.qi,i,{stroke:this.lu}),this}}class y4 extends Kl{constructor(t,e,i,s,n,a,o){super(t,e,i,s,n,o),this.xs="Point Line Series",this.Vx=[],this.Ox=!1,this.Nx=!1,this.Hx=3,this.Aa=0,this.$x=qe.Circle,this.Wy=Jc,this.be=te(this.qi.polarPointLineSeriesFillStyle,a),this.lu=te(this.qi.polarPointLineSeriesStrokeStyle,a),this.Gx=t.rp(s,void 0,[Fr.UserSeries]).Re(this.lu).cs(this.getHighlight()).Ka(qi.Nearest),this.ds(this.Gx),this.Xx=t.bS(s).Ce(this.be).il(this.$x).q(this.Hx).cs(this.getHighlight()).Ka(qi.Nearest),this.ds(this.Xx)}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}setData(t){return this.Vx.length!==0&&this.Ji.us.Nn(Ct.vf),this.Vx=W0(t),this.Ox=!0,this.Bx=Zc(this.Vx),this.ks.Ss(),this}setStrokeStyle(t){this.lu=typeof t=="function"?t(this.lu):t;const e=this.lu;return this.Gx.Re(e),this.ks.Ss(),this}getStrokeStyle(){return this.lu}setPointFillStyle(t){this.be=typeof t=="function"?t(this.be):t;const e=this.be;return this.Xx.Ce(e),this.ks.Ss(),this}getPointFillStyle(){return this.be}setPointSize(t){return this.Hx=t,this.Xx.q(t),this.ks.Ss(),this}getPointSize(){return this.Hx}setPointShape(t){return this.$x=t,this.Xx.il(this.$x),this}getPointShape(){return this.$x}setPointRotation(t){return this.Aa=t,this.Xx.Nh(t),this.ks.Ss(),this}getPointRotation(){return this.Aa}setConnectDataAutomaticallyEnabled(t){return this.Nx=t,this.ks.Ss(),this}getConnectDataAutomaticallyEnabled(){return this.Nx}Kp(){return this.tS&&this.Vx.length>0&&this.getVisible()}Ie(t,e){t.cs(e),this.ks.Ss()}Hc(t,e){return this.Wx(t,this.Gx)}solveNearestFromScreen(t){return this.Wx(ss(t,this.Ji.us),this.Gx)}Wx(t,e){const i=e instanceof cS?e.Hc(t):e.Ux(t);if(!i)return;const{angle:s,amplitude:n}=wo(i,this.scale);return Us(i,this.scale,this.Wy(new Ui,this,s,n,this.Ji.getAmplitudeAxis().formatValue).Zu(),this,"color"in i&&ks(this.be)?new it({color:i.color}):this.be)}Te(){if(this.Ox||this.scale.Yx()){const t=To(this.Vx,this.scale),e=Ze(t);this.Nx?(t.push({...t[0]}),this.Gx.zl(!0)):this.Gx.zl(!1),this.Gx.Nt().nl(t).Yo(e),this.Xx.Nt().nl(t).Yo(e),this.Ox=!1,this.Gx.Ps(),this.Xx.Ps()}}Cs(){return this.bs||this.$x}}class Qc extends L0{constructor(t,e,i,s,n,a,o,l,u){super(),this.No=_R(),this.D=new Ii,this.$i=!1,this.jx=s,this.Zx=n,this.Qx=a,this.Jx=o,this.Kx=l,this.ks=t,this.scale=e,this.qx=i,this.qi=u}onHighlight(t){return this.D.on("highlight",t)}offHighlight(t){return this.D.off(t)}dispose(){return this.qx&&this.qx(this),this.ks.us.Ss(),this.D.emit("dispose",this),this.$i=!0,this}setVisible(t){return super.setVisible(t),this.Qx(),this.ks.us.Ss(),this}isDisposed(){return this.$i}onDispose(t){return this.D.on("dispose",t)}offDispose(t){return this.D.off(t,"dispose")}setMouseInteractions(t){return this.Jx(this,t),this}getMouseInteractions(){return this.Kx(this)}}class Yb extends Qc{constructor(t,e,i,s,n,a,o,l,u,d,f,y,m,p,x,b,v){super(t,e,i,s,n,a,o,l,v),this.tM=1,this.iM=1,this.ks=t,this.scale=e,this.dimensionStrategy=u,this.start=d,this.end=f,this.lowerExtreme=y,this.lowerQuartile=m,this.median=p,this.upperQuartile=x,this.upperExtreme=b,this.boundaries=Kt(this.dimensionStrategy.toPoint(d,y),this.dimensionStrategy.toPoint(f,b)),this.sM=this.qi.boxSeriesBodyFillStyle,this.eM=this.qi.boxSeriesBodyStrokeStyle,this.lu=this.qi.boxSeriesStrokeStyle,this.hM=this.qi.boxSeriesMedianStrokeStyle,this.Ps()}getBoundaries(){return this.boundaries}setBodyWidth(t){return this.tM=t,this.Ps(),this}getBodyWidth(){return this.tM}setBodyFillStyle(t){return this.sM=typeof t=="function"?t(this.sM):t,this.Zx(),this}getBodyFillStyle(){return this.sM}setBodyStrokeStyle(t){return this.eM=typeof t=="function"?t(this.eM):t,this.Zx(),this}getBodyStrokeStyle(){return this.eM}setTailWidth(t){return this.iM=t,this.Ps(),this}getTailWidth(){return this.iM}setStrokeStyle(t){return this.lu=typeof t=="function"?t(this.lu):t,this.Zx(),this}getStrokeStyle(){return this.lu}setMedianStrokeStyle(t){return this.hM=typeof t=="function"?t(this.hM):t,this.Zx(),this}getMedianStrokeStyle(){return this.hM}Ps(){this.jx()}getDominantStyle(){return this.getBodyFillStyle()}}const up=(r,t,e)=>{const i=t.dt,s=e.dt;let n=(r.x-i.getInnerStart())/(i.getInnerEnd()-i.getInnerStart()),a=(r.y-s.getInnerStart())/(s.getInnerEnd()-s.getInnerStart());return e.eg===1&&(n=1-n),t.eg===1&&(a=1-a),Y(a,n)};class m4 extends ME{constructor(t,e,i,s,n,a,o,l){super(t,e,F0(i.dt,s.dt),n,l),this.rM=!1,this.nM=!1,this.oM=!0,this.aM=!0,this.lM=!1,this.uM=!1,this.setGridStrokeYStyle=u=>(this.cM.setGridStrokeStyle(u),this),this.getGridStrokeYStyle=()=>this.cM.getGridStrokeStyle(),this.axisX=i,this.axisY=s,this.dM=a,this.fM=o,this.AM=this.axisX.Yg(!1,this.dM).setMouseInteractions(!1).setAllocatesAxisSpace(!1),this.cM=this.axisY.Yg(!1,this.fM).setMouseInteractions(!1).setAllocatesAxisSpace(!1)}dispose(){return super.dispose(),this.AM.dispose(),this.cM.dispose(),this}pointAt(t){return super.pointAt(t),this.setPosition(gt(t.location,t.scale,this.scale)),this}setPosition(t){super.setPosition(t),this.AM.setValue(t.x),this.cM.setValue(t.y);const e=up(Y(this.AM.getValue(),this.cM.getValue()),this.axisX,this.axisY);return this.AM.setGridStrokeLength(this.lM?e.x:1),this.cM.setGridStrokeLength(this.uM?e.y:1),this}Te(){this.AM.setVisible(this.Xi&&this.Qg).setMarkerVisible(this.Xi&&this.Qg&&this.rM),this.cM.setVisible(this.Xi&&this.Qg).setMarkerVisible(this.Xi&&this.Qg&&this.nM);const t=up(Y(this.AM.getValue(),this.cM.getValue()),this.axisX,this.axisY);return this.AM.setGridStrokeLength(this.lM?t.x:1),this.cM.setGridStrokeLength(this.uM?t.y:1),super.Te()}setGridStrokeXCut(t){return this.lM=t,this.ks.Ss(),this}getGridStrokeXCut(){return this.lM}setGridStrokeYCut(t){return this.uM=t,this.ks.Ss(),this}getGridStrokeYCut(){return this.uM}setGridStrokeXStyle(t){return this.AM.setGridStrokeStyle(t),this}getGridStrokeXStyle(){return this.AM.getGridStrokeStyle()}setTickMarkerXVisible(t){return this.rM=t,this.ks.Ss(),this}getTickMarkerXVisible(){return this.rM}setTickMarkerYVisible(t){return this.nM=t,this.ks.Ss(),this}getTickMarkerYVisible(){return this.nM}setTickMarkerX(t){return this.AM.setMarker(t),this}setTickMarkerY(t){return this.cM.setMarker(t),this}getTickMarkerX(){return this.AM.getMarker()}getTickMarkerY(){return this.cM.getMarker()}}class p4 extends bE{constructor(t,e,i,s,n,a,o){super(t,e,i,s,o),this.lM=!1,this.uM=!1,this.gM=!1,this.mM=!1,this.yM=new Map,this.pM=new Map,this.rM=!0,this.nM=!0,this.iy=s,this.dM=n,this.fM=a,this.SM=o.cursorGridStrokeStyleX,this.vM=o.cursorGridStrokeStyleY}dispose(){return super.dispose(),this.yM.forEach(t=>t.dispose()),this.pM.forEach(t=>t.dispose()),this.bM=void 0,this.xM=void 0,this}Te(){return this.bM&&this.bM.setVisible(this.Xi&&this.Qg).setMarkerVisible(this.Xi&&this.Qg&&this.rM),this.xM&&this.xM.setVisible(this.Xi&&this.Qg).setMarkerVisible(this.Xi&&this.Qg&&this.nM),super.Te()}pointAt(t){const{location:e}=t,i=t.owner instanceof ko&&t.owner;if(!i)return this;const{axisX:s}=i,{axisY:n}=i,a=this.Ah(s,!0),o=this.Ah(n,!1);a!==this.bM&&this.bM&&this.bM.setVisible(!1),o!==this.xM&&this.xM&&this.xM.setVisible(!1),a.setValue(e.x),o.setValue(e.y);const l=up(Y(e.x,e.y),s,n);return a.setGridStrokeLength(this.lM?l.x:1),o.setGridStrokeLength(this.uM?l.y:1),this.bM=a,this.xM=o,super.pointAt(t)}ny(t){if(super.ny(t),t){const e=i=>i.setTextFillStyle(t);this.bM&&this.gM&&this.bM.setMarker(e),this.xM&&this.mM&&this.xM.setMarker(e)}}Ah(t,e){let i=(e?this.yM:this.pM).get(t);return i||(e?(i=t.Yg(!1,this.dM),this.yM.set(t,i)):(i=t.Yg(!1,this.fM),this.pM.set(t,i)),this.ar(i,e),i.setMouseInteractions(!1).setAllocatesAxisSpace(!1)),i}ar(t,e){const i=e?this.SM:this.vM;return t.setGridStrokeStyle(i),t.setMouseInteractions(!1),(e?this.rM:this.nM)?t.setMarkerVisible(!0):t.setMarkerVisible(!1),t}setGridStrokeXCut(t){return this.lM=t,this.ks.Ss(),this}getGridStrokeXCut(){return this.lM}setGridStrokeYCut(t){return this.uM=t,this.ks.Ss(),this}getGridStrokeYCut(){return this.uM}setGridStrokeXStyle(t){return this.SM=t instanceof Function?t(this.getGridStrokeXStyle()):t,this.yM.forEach(e=>e.setGridStrokeStyle(this.SM)),this}getGridStrokeXStyle(){return this.SM}setGridStrokeYStyle(t){return this.vM=t instanceof Function?t(this.getGridStrokeYStyle()):t,this.pM.forEach(e=>e.setGridStrokeStyle(this.vM)),this}getGridStrokeYStyle(){return this.vM}setTickMarkerXVisible(t){return this.rM=t,this.ks.Ss(),this}getTickMarkerXVisible(){return this.rM}setTickMarkerYVisible(t){return this.nM=t,this.ks.Ss(),this}getTickMarkerYVisible(){return this.nM}setTickMarkerX(t){return this.yM.forEach(e=>e.setMarker(t)),this.dM=this.dM.addStyler(t),this.ks.Ss(),this}setTickMarkerY(t){return this.pM.forEach(e=>e.setMarker(t)),this.fM=this.fM.addStyler(t),this.ks.Ss(),this}setTickMarkerXAutoTextStyle(t){return this.gM=t,this.ks.Ss(),this}getTickMarkerXAutoTextStyle(){return this.gM}setTickMarkerYAutoTextStyle(t){return this.mM=t,this.ks.Ss(),this}getTickMarkerYAutoTextStyle(){return this.mM}}class VE extends AS{constructor(t,e,i,s){super(t,s),this.iy=t,this.dM=e,this.fM=i,this.oy=s}}class c0 extends VE{constructor(){super(...arguments),this.uy=(t,e,i,s)=>this.ly(new p4(t,e,i,this.iy,this.dM,this.fM,s),s),this.addStyler=t=>new c0(this.iy,this.dM,this.fM,this.oy.map(e=>e).concat(t)),this.setResultTableBackground=t=>new c0(t,this.dM,this.fM,this.oy.map(e=>e))}}class kc extends VE{constructor(){super(...arguments),this.Ay=(t,e,i,s,n)=>this.ly(new m4(t,e,i,s,this.iy,this.dM,this.fM,n),n),this.addStyler=t=>new kc(this.iy,this.dM,this.fM,this.oy.map(e=>e).concat(t)),this.setResultTableBackground=t=>new kc(t,this.dM,this.fM,this.oy.map(e=>e))}}const S4=new c0(rr,fh.PointableTextBox,fh.PointableTextBox,[(r,t)=>{vS(r),r.setTickMarkerX(e=>{e.setEffect(!0).setTextFont(t.cursorTickMarkerXTextFont).setTextFillStyle(t.cursorTickMarkerXTextFillStyle),uh(e)&&e.setBackground(i=>i.setFillStyle(t.cursorTickMarkerXBackgroundFillStyle).setStrokeStyle(t.cursorTickMarkerXBackgroundStrokeStyle))}),r.setTickMarkerY(e=>{e.setEffect(!0).setTextFont(t.cursorTickMarkerYTextFont).setTextFillStyle(t.cursorTickMarkerYTextFillStyle),uh(e)&&e.setBackground(i=>i.setFillStyle(t.cursorTickMarkerYBackgroundFillStyle).setStrokeStyle(t.cursorTickMarkerYBackgroundStrokeStyle))})}]),x4=new kc(rr,fh.PointableTextBox,fh.PointableTextBox,[(r,t)=>{RE(r,t),r.setTickMarkerX(e=>{e.setEffect(!0).setTextFont(t.cursorTickMarkerXTextFont).setTextFillStyle(t.cursorTickMarkerXTextFillStyle),uh(e)&&e.setBackground(i=>i.setFillStyle(t.cursorTickMarkerXBackgroundFillStyle).setStrokeStyle(t.cursorTickMarkerXBackgroundStrokeStyle))}),r.setTickMarkerY(e=>{e.setEffect(!0).setTextFont(t.cursorTickMarkerYTextFont).setTextFillStyle(t.cursorTickMarkerYTextFillStyle),uh(e)&&e.setBackground(i=>i.setFillStyle(t.cursorTickMarkerYBackgroundFillStyle).setStrokeStyle(t.cursorTickMarkerYBackgroundStrokeStyle))})}]),A4=new kc(rr,fh.PointableTextBox,fh.PointableTextBox,[(r,t)=>{((e,i)=>{e.setPointMarker(s=>s.setFillStyle(i.seriesMarkerPointMarkerFillStyle).setSize(i.seriesMarkerPointMarkerSize).setShape(i.seriesMarkerPointMarkerShape)).setResultTable(s=>s.setEffect(!0).setBackground(n=>n).setOrigin(Y(-1,-1)).setMargin(10))})(r,t),r.setTickMarkerX(e=>{e.setEffect(!0).setTextFont(t.cursorTickMarkerXTextFont).setTextFillStyle(t.cursorTickMarkerXTextFillStyle),uh(e)&&e.setBackground(i=>i.setFillStyle(t.cursorTickMarkerXBackgroundFillStyle).setStrokeStyle(t.cursorTickMarkerXBackgroundStrokeStyle))}),r.setTickMarkerY(e=>{e.setEffect(!0).setTextFont(t.cursorTickMarkerYTextFont).setTextFillStyle(t.cursorTickMarkerYTextFillStyle),uh(e)&&e.setBackground(i=>i.setFillStyle(t.cursorTickMarkerYBackgroundFillStyle).setStrokeStyle(t.cursorTickMarkerYBackgroundStrokeStyle))})}]),cl=(r,t,e)=>{switch(r){case Ar.always:return!0;case Ar.never:return!1;case Ar.whenDragged:return e;case Ar.whenHovered:return t&&!e;case Ar.whenHoveredOrDragged:return e||t;case Ar.whenNotDragged:return!e;default:return!1}},Hb=(r,t)=>Math.min(Math.max(r,t.getInnerStart()),t.getInnerEnd());class v4{constructor(t,e,i,s,n,a){this.MM=Ar.always,this._M=Ar.always,this.Bo=!0,this.$i=!1,this.wM=!1,this.CM=!1,this.ua=Y(0,0),this.Mu=De.draggable,this._u=void 0,this.D=new Ii,this.Xi=!0,this.kM=(l,u,d)=>{this.wM=!0,this.ks.Ss();const f=this.Mu===De.notDraggable?this.Mu:d||this.Mu;this._u=this.ks.us.Wr(f===De.notDraggable?ae.Restricted:f===De.draggable?ae.Move:f===De.onlyHorizontal?ae.Horizontal:ae.Vertical)},this.TM=()=>{this.wM=!1,this.ks.Ss(),this.ks.us.Ur(this._u)},this.FM=(l,u)=>{this.CM=!0,At(u),this.ks.Ss()},this.IM=(l,u)=>{if(this.Mu!==De.notDraggable){const d=u||this.Mu,f=gt(this.ks.us.Pe(l.x,l.y),this.ks.us.dt,this.scale),y=Y(d!==De.onlyVertical?Hb(f.x,this.scale.x):this.ua.x,d!==De.onlyHorizontal?Hb(f.y,this.scale.y):this.ua.y);return this.setPosition(y),!0}return!1},this.PM=(l,u)=>{this.CM=!1,At(u),this.ks.Ss()},this.onDispose=l=>this.D.on("dispose",l),this.offDispose=l=>this.D.off(l,"dispose"),this.ks=t,this.renderingScale=e,this.scale=i,this.Eb=s,this.DM=n,this.qi=a;const o=s.getPointMarker().setMouseInteractions(!0);o.onMouseEnter((l,u)=>this.kM(l,u)),o.onMouseLeave(this.TM),o.onMouseDragStart(this.FM),o.onMouseDrag((l,u)=>this.IM(Y(u.clientX,u.clientY))&&At(u)),o.onMouseDragStop(this.PM),o.onTouchStart(this.FM),o.onTouchMove((l,u)=>this.IM(Y(u.clientX,u.clientY))&&At(u)),o.onTouchEnd(this.PM),s.getResultTable().setMouseInteractions(!0),this.setPosition(this.ua)}setPosition(t){return this.ua=t,this.Eb.setPosition(t),this.D.emit("positionChange",this,this.ua),this}getPosition(){return this.ua}onPositionChange(t){return this.D.on("positionChange",t)}offPositionChange(t){return this.D.off(t,"positionChange")}setPointMarkerVisibility(t){return this.MM=t,this.ks.Ss(),this}getPointMarkerVisibility(){return this.MM}setResultTableVisibility(t){return this._M=t,this.ks.Ss(),this}getResultTableVisibility(){return this._M}setMouseInteractions(t){return this.Bo=t,this.Eb.getPointMarker().setMouseInteractions(t),this.Eb.getResultTable().setMouseInteractions(t),this}getMouseInteractions(){return this.Bo}setAutoFitStrategy(t){return this.Eb.setAutoFitStrategy(t),this}getAutoFitStrategy(){return this.Eb.getAutoFitStrategy()}isAttached(){return!0}Te(){const t=this.isAttached();return cl(this.MM,this.wM,this.CM)?this.Eb.setPointMarkerVisible(!0):this.Eb.setPointMarkerVisible(!1),t&&cl(this._M,this.wM,this.CM)?this.Eb.setResultTableVisible(!0):this.Eb.setResultTableVisible(!1),this.Eb.Te(),this}Ps(){return this.Eb.Ps(),this}pointAt(t){return this.Eb.pointAt(t),this}dispose(){return this.$i||(this.$i=!0,this.DM(this),this.Eb.dispose(),this.D.emit("dispose")),this}isDisposed(){return this.$i}setVisible(t){const e=this.Xi!==t;return this.Xi=t,this.Eb.setVisible(t),e&&this.D.emit("visibleStateChanged",this,this.Xi),this}getVisible(){return this.Xi}onVisibleStateChanged(t){return this.D.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.D.off(t,"visibleStateChanged")}setPointMarker(t){return this.Eb.setPointMarker(t),this}getPointMarker(){return this.Eb.getPointMarker()}setResultTable(t){return this.Eb.setResultTable(t),this}getResultTable(){return this.Eb.getResultTable()}setDraggingMode(t=De.notDraggable){return this.Mu=t,this.ks.Ss(),this}getDraggingMode(){return this.Mu}}class b4 extends v4{constructor(t,e,i,s,n,a,o){super(t,e,F0(i.dt,s.dt),n.Ay(t,e,i,s,o),a,o),this.BM=Ar.always,this.LM=Ar.always,this.RM=Ar.always,this.EM=Ar.always,this.gridStrokeStyleX=this.Eb.getGridStrokeXStyle(),this.gridStrokeStyleY=this.Eb.getGridStrokeYStyle(),this.ks=t,this.axisX=i,this.axisY=s,this.DM=a;const l=this.Eb.getTickMarkerX().setMouseInteractions(!0);l.onMouseEnter((d,f)=>this.kM(d,f,De.onlyHorizontal)),l.onMouseLeave(this.TM),l.onMouseDragStart(this.FM),l.onMouseDrag((d,f)=>this.IM(Y(f.clientX,f.clientY),De.onlyHorizontal)&&At(f)),l.onMouseDragStop(this.PM),l.onTouchStart(this.FM),l.onTouchMove((d,f)=>this.IM(Y(f.clientX,f.clientY),De.onlyHorizontal)&&At(f));const u=this.Eb.getTickMarkerY().setMouseInteractions(!0);u.onMouseEnter((d,f)=>this.kM(d,f,De.onlyVertical)),u.onMouseLeave(this.TM),u.onMouseDragStart(this.FM),u.onMouseDrag((d,f)=>this.IM(Y(f.clientX,f.clientY),De.onlyVertical)&&At(f)),u.onMouseDragStop(this.PM),u.onTouchStart(this.FM),u.onTouchMove((d,f)=>this.IM(Y(f.clientX,f.clientY),De.onlyVertical)&&At(f))}Te(){const t=this.isAttached();return this.Xi&&t&&cl(this.RM,this.wM,this.CM)?this.Eb.setTickMarkerXVisible(!0):this.Eb.setTickMarkerXVisible(!1),this.Xi&&t&&cl(this.EM,this.wM,this.CM)?this.Eb.setTickMarkerYVisible(!0):this.Eb.setTickMarkerYVisible(!1),this.Eb.setGridStrokeXStyle(this.Xi&&t&&cl(this.BM,this.wM,this.CM)?this.gridStrokeStyleX:vt),this.Eb.setGridStrokeYStyle(this.Xi&&t&&cl(this.LM,this.wM,this.CM)?this.gridStrokeStyleY:vt),super.Te()}setGridStrokeXVisibility(t){return this.BM=t,this.ks.Ss(),this}getGridStrokeXVisibility(){return this.BM}setGridStrokeYVisibility(t){return this.LM=t,this.ks.Ss(),this}getGridStrokeYVisibility(){return this.LM}setTickMarkerXVisibility(t){return this.RM=t,this.ks.Ss(),this}getTickMarkerXVisibility(){return this.RM}setTickMarkerYVisibility(t){return this.EM=t,this.ks.Ss(),this}getTickMarkerYVisibility(){return this.EM}setGridStrokeXCut(t){return this.Eb.setGridStrokeXCut(t),this}getGridStrokeXCut(){return this.Eb.getGridStrokeXCut()}setGridStrokeYCut(t){return this.Eb.setGridStrokeYCut(t),this}getGridStrokeYCut(){return this.Eb.getGridStrokeYCut()}setGridStrokeXStyle(t){return this.gridStrokeStyleX=typeof t=="function"?t(this.gridStrokeStyleX):t,this}getGridStrokeXStyle(){return this.Eb.getGridStrokeXStyle()}setGridStrokeYStyle(t){return this.gridStrokeStyleY=typeof t=="function"?t(this.gridStrokeStyleY):t,this}getGridStrokeYStyle(){return this.Eb.getGridStrokeYStyle()}setTickMarkerX(t){return this.Eb.setTickMarkerX(t),this}getTickMarkerX(){return this.Eb.getTickMarkerX()}setTickMarkerY(t){return this.Eb.setTickMarkerY(t),this}getTickMarkerY(){return this.Eb.getTickMarkerY()}setMouseInteractions(t){return super.setMouseInteractions(t),this.Eb.getTickMarkerX().setMouseInteractions(t),this.Eb.getTickMarkerY().setMouseInteractions(t),this}}class zE extends b4{}class M4 extends zE{constructor(t,e,i,s,n,a){super(t,e,i.axisX,i.axisY,s,n,a),this.zM=!1,this.ks=t,this.owningSeries=i}setPosition(t){return super.setPosition(t),this.zM=!1,this.ks.Ss(),this}Ps(){if(!this.zM){const t=this.owningSeries.solveNearestFromScreen(gt(this.ua,this.scale,this.ks.us.dt));t?(this.ua=gt(t.location,this.owningSeries.scale,this.scale),this.Eb.pointAt(t),this.zM=!0):this.Eb.setPosition(this.ua)}return super.Ps()}isAttached(){return this.zM}}class ko extends X0{constructor(t,e,i,s,n,a,o,l,u,d){super(t,e,u,d),this.VM=[],this.addMarker=(f=A4)=>{const y=new M4(this.OM(),this.Ji.uiScale,this,f,this.removeMarker,this.qi);return this.VM.push(y),y},this.removeMarker=f=>{const y=this.VM.indexOf(f);y!==-1&&this.VM.splice(y,1)},this.ts=new Map,this.chart=t,this.ks=i,this.axisX=s,this.axisY=n,this.axisXAttachHandler=a,this.axisYAttachHandler=o,this.OM=l,this.scale=F0(s.dt,n.dt),this.NM=t.GM,t.GM+=1,this.WM(this.scale),this.attacheAxis(),this.onMouseEnter(this.chart.UM),this.onMouseLeave(this.chart.YM),this.onMouseWheel(this.chart.sS),this.onMouseDragStart(this.chart.HM),this.onMouseDrag(this.chart.eS),this.onMouseDragStop(this.chart.$M),this.onTouchStart(this.chart.hS.onTouchStart),this.onTouchMove(this.chart.hS.onTouchMove),this.onTouchEnd(this.chart.hS.onTouchEnd)}get xAxis(){return this.axisX}get yAxis(){return this.axisY}attacheAxis(){this.XM=this.axisXAttachHandler(this),this.jM=this.axisYAttachHandler(this)}Te(){super.Te();for(let t=0;t<this.VM.length;t+=1)this.VM[t].Ps().Te()}ds(t,e){super.ds(t,e),t.Jo(this.NM)}setDrawOrder(t){return this.NM=t.seriesDrawOrderIndex,this.ts.forEach((e,i)=>{i.Jo(this.NM)}),this.Ji.us.Ss(),this}dispose(){return super.dispose(),this.VM.slice().forEach(t=>t.dispose()),this.XM(this),this.jM(this),this}ZM(){for(let t=0;t<this.VM.length;t+=1)this.VM[t].setPosition(this.VM[t].getPosition());this.ks.Ss()}getBoundaries(){return Kt(Y(this.getXMin()||0,this.getYMin()||0),Y(this.getXMax()||0,this.getYMax()||0))}setCursorEnabled(t){return super.setCursorEnabled(t)}}const yo=(r,t,e,i)=>{const s=r.length;let n=0;if(t!==void 0){const a=e-t;if(a>0){const o=r.slice(n,a);n+=a,i(o,!0)}}for(;n<s;){const a=r.slice(n,n+e);n+=e,i(a,!1)}},$0=(r,t=e=>e)=>{const e=[];let i;for(let s=0;s<r.length;s+=1){i=r[s];const n=t(i.tl()),a=i.qa(),o=a?t(a):[];let l=!1,u=!1;"El"in i&&(l=i.El(),u=i.Vl()),e.push.apply(e,n.slice(l?1:0,n.length-(u&&o.length===0?1:0))),e.push.apply(e,o.slice(l&&n.length===0?1:0,o.length-(u?1:0)))}return e},_E=(r,t=1,e)=>{const i=e!==void 0?e:0,s=new Array(r.length);for(let n=0;n<r.length;n+=1)s[n]={x:i+t*n,y:r[n]};return s},R4=(r,t,e,i)=>{const s=t.getIcon();return s?r.addRow(s,t.getName()):r.addRow(t.getName()),r.addRow("X","",t.axisX.formatValue(e)).addRow("Y","",t.axisY.formatValue(i))};class wS extends ko{constructor(t,e,i,s,n,a,o,l,u,d,f){super(t,e,i,s,n,a,o,l,d,f),this.QM=[],this.yu=[],this.JM=0,this.ji=!1,this.Hi=Xr.onHover,this.Wy=R4,this.Ji.us.Nn(Ct.mf),this.KM=u}setDataCleaning(t){const e=t&&t.minDataPointCount;return this.JM=e!==void 0&&e>0?e:0,this.ks.Ss(),this}add(t){if(this.QM.length!==0&&this.Ji.us.Nn(Ct.vf),Array.isArray(t)?this.qM(t):this.qM([t]),this.yu.length>0){const e=this.yu[this.yu.length-1];this.t_={x:e.x,y:e.y}}return this}addArrayX(t,e=1,i){let s=i;return s||(s=this.t_?this.t_.y+e:0),this.add(((n,a=1,o)=>{const l=o!==void 0?o:0,u=new Array(n.length);for(let d=0;d<n.length;d+=1)u[d]={x:n[d],y:l+a*d};return u})(t,e,s)),this}addArrayY(t,e=1,i=0){let s=i;return s||(s=this.t_?this.t_.x+e:0),this.add(_E(t,e,s)),this}addArraysXY(t,e){if(t.length!==e.length)throw new Error("arrayX and arrayY lengths are not equal");return this.add(((i,s)=>{const n=new Array(i.length);for(let a=0;a<i.length;a+=1)n[a]={x:i[a],y:s[a]};return n})(t,e)),this}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}getPointAmount(){return this.QM.reduce((t,e)=>t+e.ol()+e.al(),this.yu.length)}clear(){this.i_=void 0;for(let t=0;t<this.QM.length;t+=1)this.QM[t].Nt();return this.yu.length=0,this.t_=void 0,this.ks.Ss(),this.D.emit("dataClear",this),this}getLastPoint(){return this.t_}Kp(){return this.tS&&this.getPointAmount()>0&&this.getVisible()}getXMax(){return this.KM.getXMax(this.QM,this.i_)||0}getXMin(){return this.KM.getXMin(this.QM,this.i_)||0}getYMax(){return this.KM.getYMax(this.QM,this.i_)||0}getYMin(){return this.KM.getYMin(this.QM,this.i_)||0}br(){const t=Y(0,0);for(const e of this.QM)t.x=Math.max(t.x,e.vl()),t.y=Math.max(t.y,e.bl());return t}s_(t,e,i,s){this.KM.s_(t,e,i,s,this.scale,n=>{})}oS(){super.oS();const t=this.QM.length;this.e_&&this.s_(this.QM,this.getPointAmount(),this.e_,this.JM),t!==this.QM.length&&this.ZM()}Te(){super.Te();const t=this.getBoundaries();this.yu.length>0&&(this.h_(this.yu),this.yu=[]);for(const e of this.QM)e.Yo(t);return super.Te()}dp(){super.dp(),this.i_=void 0,this.yu.length=0}qM(t){t.length!==0&&(this.i_?this.i_=qs(this.i_,Ze(t)):this.i_=Ze(t),this.D.emit("dataAdd",this,t,this.i_),this.yu=cs(this.yu,t,{canReturnB:!1}),this.ks.Ss())}r_(){return $0(this.QM)}n_(t){return this.D.on("dataAdd",t)}o_(t){return this.D.off(t)}a_(t){return this.D.on("dataClear",t)}l_(t){return this.D.off(t)}}const gh=(r,t,e,i)=>{let s,n,a=Number.MAX_VALUE;for(let o=0;o<t.length;o+=1){const l=t[o],u=e(l,r);if(u){const d=i(r,u);(s===void 0||d<a)&&(s=u,n=l,a=d)}}return s&&n?[s,n]:void 0};class Kc extends ko{constructor(){super(...arguments),this.u_=[],this.c_=void 0,this.d_=!1,this.qx=t=>{const e=this.u_.findIndex(i=>i===t);e>=0&&this.u_.splice(e,1),this.d_=!0,this.c_=void 0,this.ks.Ss()},this.jx=()=>{this.c_=void 0,this.d_=!0,this.Ji.us.Ss()},this.Zx=()=>{this.d_=!0,this.Ji.us.Ss()},this.Qx=()=>{this.c_=void 0,this.d_=!0,this.chart.us.Ss()},this.Jx=(t,e)=>{this.setMouseInteractions(e)},this.f_=t=>this.getMouseInteractions()}Te(){super.Te(),this.d_&&(this.A_(this.u_),this.d_=!1)}clear(){return this.u_.slice().forEach(ah),this.u_.length=0,this.d_=!0,this.c_=void 0,this.ks.Ss(),this}g_(t,e){e!==void 0?this.u_.splice(e,0,t):this.u_.push(t),this.d_=!0,this.m_&&this.m_(t),t.onMouseEnter((i,s)=>this.wt(i,s)),t.onMouseLeave((i,s)=>this.Ct(i,s)),t.onMouseClick((i,s)=>this.kt(i,s)),t.onMouseDoubleClick((i,s)=>this.Tt(i,s)),t.onMouseDown((i,s)=>this.Ft(i,s)),t.onMouseUp((i,s)=>this.It(i,s)),t.onMouseMove((i,s)=>this.Pt(i,s)),t.onMouseDragStart((i,s,n)=>this.Bt(i,s,n)),t.onMouseDrag((i,s,n,a,o)=>this.Dt(i,s,n,a,o)),t.onMouseDragStop((i,s,n,a)=>this.Lt(i,s,n,a)),t.onMouseWheel((i,s)=>this.Rt(i,s)),t.onTouchStart((i,s)=>this.Et(i,s)),t.onTouchMove((i,s)=>this.zt(i,s)),t.onTouchEnd((i,s)=>this.Vt(i,s)),this.ks.Ss()}Kp(){return this.tS&&this.u_.length>0&&this.getVisible()}setDefaultStyle(t){this.m_=t,this.u_.forEach(t),t(this.y_);for(let e=0;e<this.Qi.length;e+=1)this.p_(this.Qi[e]);return this.d_=!0,this.Ji.us.Ss(),this}Hc(t,e){const i=gh(t,e?this.u_.filter(s=>s.getVisible()&&s.getIsUnderMouse()):this.u_.filter(s=>s.getVisible()),this.S_,ia);if(i!==void 0)return{location:gt(i[0],this.ks.us.dt,this.scale),scale:this.scale,resultTableContent:this.Wy(new Ui,this,i[1]).Zu(),owner:this,fillStyle:i[1].getDominantStyle(),figure:i[1]}}solveNearestFromScreen(t){return this.Hc(ss(t,this.Ji.us),!1)}getXMax(){return this.c_||(this.c_=this.v_()),this.c_.max.x}getXMin(){return this.c_||(this.c_=this.v_()),this.c_.min.x}getYMax(){return this.c_||(this.c_=this.v_()),this.c_.max.y}getYMin(){return this.c_||(this.c_=this.v_()),this.c_.min.y}br(){return Y(0,0)}v_(){const t=Kt(Kn(Mt,Mt),Kn(Dt,Dt));for(let e=0;e<this.u_.length;e+=1)if(this.u_[e].getVisible()){const i=this.u_[e].getBoundaries();t.min.x=Math.min(t.min.x,i.min.x),t.min.y=Math.min(t.min.y,i.min.y),t.max.x=Math.max(t.max.x,i.max.x),t.max.y=Math.max(t.max.y,i.max.y)}return t}attach(t,e=!0,i=!1){return super.attach(t,e),this.p_(t,e,i),this}p_(t,e=!0,i=!1){ii(t,this.qi,i,{fill:this.u_.length>0?this.u_[0].getDominantStyle():this.y_.getDominantStyle()})}}const E4=(r,t,e)=>r.addRow(t.getName()).addRow("Lower extreme","",e.lowerExtreme.toFixed(2)).addRow("Lower quartile","",e.lowerQuartile.toFixed(2)).addRow("Median","",e.median.toFixed(2)).addRow("Upper quartile","",e.upperQuartile.toFixed(2)).addRow("Upper extreme","",e.upperExtreme.toFixed(2));class T4 extends Kc{constructor(t,e,i,s,n,a,o,l,u,d,f,y){super(t,e,i,s,n,a,o,l,d,f),this.xs="Box Series",this.Wy=E4,this.b_=Wl(),this.S_=m=>gt(this.Ts.toPoint((m.start+m.end)/2,m.median),this.scale,this.ks.us.dt),this.Ji.us.Nn(Ct.pf),this.Ts=u,this.y_=new Yb(this.ks,this.scale,this.qx,re,re,re,re,m=>!1,this.Ts,0,0,0,0,0,0,0,this.qi).dispose(),this.x_=new Na(()=>{const m=this.ks.Lg(this.scale);return this.ds(m,{setEventHandlers:!1}),m},(m,p,x)=>(m.Re(x.strokeStyle),p.map(b=>{const v=b.existingMember||m.zr();return v.Eg(b.start,b.end),v}))),this.M_=new Na(()=>{const m=this.b_._t(this.ks.Ob(this.scale));return this.ds(m,{setEventHandlers:!1}),m},(m,p,x)=>(m.Ce(x.fillStyle).we(x.strokeStyle),p.map(b=>{const v=b.existingMember||m.zr();return v.pl(b.vertices),this.b_.Ot(v,b.figure),v})),()=>{this.b_.Nt()},(m,p)=>{this.gs(p)})}WM(t){if(!(t instanceof xe||t instanceof Ci))throw new Error("BoxSeries only supports Linear Axes")}A_(t){const e=this.M_.fp(),i=this.x_.fp();t.forEach(s=>{if(!s.getVisible())return;const n=this.Ts.toPoint((s.start+s.end-s.tM*(s.end-s.start))/2,s.lowerQuartile),a=this.Ts.toPoint((s.end-s.start)*s.tM,s.upperQuartile-s.lowerQuartile),o=this.Ts.toPoint((s.start+s.end)/2,s.lowerQuartile),l=this.Ts.toPoint((s.start+s.end)/2,s.lowerExtreme),u=this.Ts.toPoint((s.start+s.end)/2,s.upperQuartile),d=this.Ts.toPoint((s.start+s.end)/2,s.upperExtreme),f=this.Ts.toPoint((s.start+s.end-s.iM*(s.end-s.start))/2,s.lowerExtreme),y=this.Ts.toPoint((s.start+s.end+s.iM*(s.end-s.start))/2,s.lowerExtreme),m=this.Ts.toPoint((s.start+s.end-s.iM*(s.end-s.start))/2,s.upperExtreme),p=this.Ts.toPoint((s.start+s.end+s.iM*(s.end-s.start))/2,s.upperExtreme),x=this.Ts.toPoint((s.start+s.end-s.tM*(s.end-s.start))/2,s.median),b=this.Ts.toPoint((s.start+s.end+s.tM*(s.end-s.start))/2,s.median);e.add({No:s.No,vertices:[{x:n.x,y:n.y},{x:n.x,y:n.y+a.y},{x:n.x+a.x,y:n.y+a.y},{x:n.x+a.x,y:n.y}],figure:s},{fillStyle:s.sM,strokeStyle:s.eM}),i.add({No:0,start:o,end:l,figure:s},{strokeStyle:s.lu}),i.add({No:0,start:u,end:d,figure:s},{strokeStyle:s.lu}),i.add({No:0,start:f,end:y,figure:s},{strokeStyle:s.lu}),i.add({No:0,start:m,end:p,figure:s},{strokeStyle:s.lu}),i.add({No:0,start:x,end:b,figure:s},{strokeStyle:s.hM})}),e.finishPlot(),i.finishPlot()}add(t){const e=new Yb(this.ks,this.scale,this.qx,this.jx,this.Zx,this.Qx,this.Jx,this.f_,this.Ts,t.start,t.end,t.lowerExtreme,t.lowerQuartile,t.median,t.upperQuartile,t.upperExtreme,this.qi);return this.g_(e),this.d_=!0,this.Ji.us.Ss(),e}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}}class Xb extends Qc{constructor(t,e,i,s,n,a,o,l,u,d){super(t,e,i,s,n,a,o,l,u),this.dimensions={x:0,y:0,radiusX:0,radiusY:0},this.Ya=Kt(Y(0,0),Y(0,0)),this.ks=t,this.scale=e,this.be=te(u.ellipseSeriesFillStyle,d),this.xe=te(u.ellipseSeriesStrokeStyle,d)}getBoundaries(){return this.Ya}setDimensions(t){return this.dimensions=t,this.Ya=Kt(Y(t.x-t.radiusX,t.y-t.radiusY),Y(t.x+t.radiusX,t.y+t.radiusY)),this.jx(),this.ks.Ss(),this}getDimensions(){return this.dimensions}setFillStyle(t){return this.be=typeof t=="function"?t(this.be):t,this.Zx(),this}getFillStyle(){return this.be}setStrokeStyle(t){return this.xe=typeof t=="function"?t(this.xe):t,this.Zx(),this}getStrokeStyle(){return this.xe}getDominantStyle(){return this.be}}class w4 extends Kc{constructor(t,e,i,s,n,a,o,l,u,d,f){super(t,e,i,s,n,a,o,l,u,d),this.xs="Ellipse Series",this.Wy=(y,m,p)=>y.addRow(m.xs).addRow("X","",m.axisX.formatValue(p.getDimensions().x)).addRow("Y","",m.axisY.formatValue(p.getDimensions().y)).addRow("Radius X","",m.axisX.formatValue(p.getDimensions().radiusX)).addRow("Radius Y","",m.axisY.formatValue(p.getDimensions().radiusY)),this.b_=Wl(),this.S_=y=>{const m=y.getDimensions(),p=Y(m.x,m.y);return gt(p,this.scale,this.ks.us.dt)},this.Ji.us.Nn(Ct.pf),this.__=f,this.y_=new Xb(this.ks,this.scale,re,re,re,re,re,y=>!1,this.qi,this.__).dispose(),this.M_=new Na(()=>{const y=this.b_._t(this.ks.Ob(this.scale));return this.ds(y,{setEventHandlers:!1}),y},(y,m,p)=>(y.Ce(p.fillStyle).we(p.strokeStyle),m.map(x=>{const b=x.existingMember||y.zr();return b.pl(x.vertices),this.b_.Ot(b,x.figure),b})),()=>{this.b_.Nt()},(y,m)=>{this.gs(m)})}WM(t){if(!(t instanceof xe||t instanceof Ci))throw new Error("EllipseSeries only supports Linear Axes")}A_(t){const e=this.M_.fp();t.forEach(i=>{if(!i.getVisible())return;const s=i.getDimensions(),n=[],a=s.drawSteps!==void 0?s.drawSteps:72;for(let u=0;u<=a;u+=1){const d=u/a*2*Math.PI,f=s.x+s.radiusX*Math.cos(d),y=s.y+s.radiusY*Math.sin(d);n.push({x:f,y})}const o=i.getFillStyle(),l=i.getStrokeStyle();e.add({No:i.No,vertices:n,figure:i},{fillStyle:o,strokeStyle:l})}),e.finishPlot()}add(t){const e=new Xb(this.ks,this.scale,this.qx,this.jx,this.Zx,this.Qx,this.Jx,this.f_,this.qi,this.__).setDimensions(t);return this.g_(e),this.d_=!0,this.Ji.us.Ss(),e}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}}class Wb extends Qc{constructor(t,e,i,s,n,a,o,l,u,d){super(t,e,i,s,n,a,o,l,u),this.w_=[],this.Ya=Ne,this.ks=t,this.scale=e,this.be=te(u.polygonSeriesFillStyle,d),this.xe=te(u.polygonSeriesStrokeStyle,d)}getBoundaries(){return this.Ya}setDimensions(t){return this.w_=t,this.Ya=Ze(this.w_),this.jx(),this.ks.Ss(),this}getDimensions(){return this.w_}setFillStyle(t){return this.be=typeof t=="function"?t(this.be):t,this.Zx(),this}getFillStyle(){return this.be}setStrokeStyle(t){return this.xe=typeof t=="function"?t(this.xe):t,this.Zx(),this}getStrokeStyle(){return this.xe}getDominantStyle(){return this.be}}class C4 extends Kc{constructor(t,e,i,s,n,a,o,l,u,d,f){super(t,e,i,s,n,a,o,l,u,d),this.xs="Polygon Series",this.Wy=(y,m,p)=>y.addRow(m.getName()),this.b_=Wl(),this.S_=y=>{const m=y.getBoundaries(),p=Y((m.min.x+m.max.x)/2,(m.min.y+m.max.y)/2);return gt(p,this.scale,this.ks.us.dt)},this.Ji.us.Nn(Ct.pf),this.__=f,this.y_=new Wb(this.ks,this.scale,re,re,re,re,re,y=>!1,this.qi,this.__).dispose(),this.M_=new Na(()=>{const y=this.b_._t(this.ks.Ob(this.scale));return this.ds(y,{setEventHandlers:!1}),y},(y,m,p)=>(y.Ce(p.fillStyle).we(p.strokeStyle),m.map(x=>{const b=x.existingMember||y.zr();return b.pl(x.vertices),this.b_.Ot(b,x.figure),b})),()=>{this.b_.Nt()},(y,m)=>{this.gs(m)})}WM(t){}A_(t){const e=this.M_.fp();t.forEach(i=>{if(!i.getVisible())return;const s=i.getDimensions(),n=i.getFillStyle(),a=i.getStrokeStyle();e.add({No:i.No,vertices:s,figure:i},{fillStyle:n,strokeStyle:a})}),e.finishPlot()}add(t){const e=new Wb(this.ks,this.scale,this.qx,this.jx,this.Zx,this.Qx,this.Jx,this.f_,this.qi,this.__).setDimensions(t);return this.g_(e),this.d_=!0,this.Ji.us.Ss(),e}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}}class $b extends Qc{constructor(t,e,i,s,n,a,o,l,u,d){super(t,e,i,s,n,a,o,l,u),this.C_={x:0,y:0,width:0,height:0},this.k_={x1:0,y1:0,x2:0,y2:0},this.Ya=Kt(Y(0,0),Y(0,0)),this.be=te(u.rectangleSeriesFillStyle,d),this.ks=t,this.scale=e,this.xe=te(u.rectangleSeriesStrokeStyle,d)}getBoundaries(){return this.Ya}setDimensions(t){return"x"in t?(this.C_=t,this.k_={x1:t.x,y1:t.y,x2:t.x+t.width,y2:t.y+t.height}):(this.k_=t,this.C_={x:t.x1,y:t.y1,width:t.x2-t.x1,height:t.y2-t.y1}),this.Ya=Ze([this.C_,Y(this.C_.x+this.C_.width,this.C_.y+this.C_.height)]),this.jx(),this.ks.Ss(),this}getDimensionsPositionAndSize(){return this.C_}getDimensionsTwoPoints(){return this.k_}setFillStyle(t){return this.be=typeof t=="function"?t(this.be):t,this.Zx(),this}getFillStyle(){return this.be}setStrokeStyle(t){return this.xe=typeof t=="function"?t(this.xe):t,this.Zx(),this}getStrokeStyle(){return this.xe}getDominantStyle(){return this.be}}class k4 extends Kc{constructor(t,e,i,s,n,a,o,l,u,d,f){super(t,e,i,s,n,a,o,l,u,d),this.xs="Rectangle Series",this.Wy=(y,m,p)=>{const x=p.getDimensionsPositionAndSize();return y.addRow(m.xs).addRow("X","",m.axisX.formatValue(x.x)).addRow("Y","",m.axisX.formatValue(x.y)).addRow("Width","",m.axisX.formatValue(x.width)).addRow("Height","",m.axisX.formatValue(x.height))},this.b_=Wl(),this.S_=y=>{const m=y.getDimensionsPositionAndSize(),p=Y(m.x+m.width/2,m.y+m.height/2);return gt(p,this.scale,this.ks.us.dt)},this.Ji.us.Nn(Ct.pf),this.__=f,this.y_=new $b(this.ks,this.scale,re,re,re,re,re,y=>!1,this.qi,this.__).dispose(),this.M_=new Na(()=>{const y=this.b_._t(this.ks.Ob(this.scale));return this.ds(y,{setEventHandlers:!1}),y},(y,m,p)=>(y.Ce(p.fillStyle).we(p.strokeStyle),m.map(x=>{const b=x.existingMember||y.zr();return b.pl(x.vertices),this.b_.Ot(b,x.figure),b})),()=>{this.b_.Nt()},(y,m)=>{this.gs(m)})}WM(t){}A_(t){const e=this.M_.fp();t.forEach(i=>{if(!i.getVisible())return;const s=i.getDimensionsTwoPoints(),n=[{x:s.x1,y:s.y1},{x:s.x1,y:s.y2},{x:s.x2,y:s.y2},{x:s.x2,y:s.y1}],a=i.getFillStyle(),o=i.getStrokeStyle();e.add({No:i.No,vertices:n,figure:i},{fillStyle:a,strokeStyle:o})}),e.finishPlot()}add(t){const e=new $b(this.ks,this.scale,this.qx,this.jx,this.Zx,this.Qx,this.Jx,this.f_,this.qi,this.__).setDimensions(t);return this.g_(e),this.d_=!0,this.Ji.us.Ss(),e}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}}class qb extends Qc{constructor(t,e,i,s,n,a,o,l,u,d){super(t,e,i,s,n,a,o,l,u),this.dimensions={startX:0,startY:0,endX:0,endY:0},this.Ya=Kt(Y(0,0),Y(0,0)),this.qi=u,this.ks=t,this.scale=e,this.xe=te(u.segmentSeriesStrokeStyle,d)}getBoundaries(){return this.Ya}setDimensions(t){return this.dimensions=t,this.Ya=Kt(Y(Math.min(t.startX,t.endX),Math.min(t.startY,t.endY)),Y(Math.max(t.startX,t.endX),Math.max(t.startY,t.endY))),this.jx(),this.ks.Ss(),this}getDimensions(){return this.dimensions}setStrokeStyle(t){return this.xe=typeof t=="function"?t(this.xe):t,this.Zx(),this}getStrokeStyle(){return this.xe}getDominantStyle(){const t=this.xe;return t!==vt?t.getFillStyle():Vt}}class D4 extends Kc{constructor(t,e,i,s,n,a,o,l,u,d,f){super(t,e,i,s,n,a,o,l,u,d),this.xs="Segment Series",this.Wy=(y,m,p)=>y.addRow(m.xs).addRow("Start",m.axisX.formatValue(p.getDimensions().startX),",",m.axisY.formatValue(p.getDimensions().startY)).addRow("End",m.axisX.formatValue(p.getDimensions().endX),",",m.axisY.formatValue(p.getDimensions().endY)),this.T_=Wl(),this.S_=y=>{const m=y.getDimensions(),p=Y((m.startX+m.endX)/2,(m.startY+m.endY)/2);return gt(p,this.scale,this.ks.us.dt)},this.Ji.us.Nn(Ct.pf),this.__=f,this.y_=new qb(this.ks,this.scale,re,re,re,re,re,y=>!1,this.qi,this.__).dispose(),this.x_=new Na(()=>{const y=this.T_._t(this.ks.Lg(this.scale));return this.ds(y,{setEventHandlers:!1}),y},(y,m,p)=>(y.Re(p.strokeStyle),m.map(x=>{const b=x.existingMember||y.zr();return b.Eg(x.start,x.end),this.T_.Ot(b,x.figure),b})),()=>{this.T_.Nt()},(y,m)=>{this.gs(m)})}WM(t){}A_(t){const e=this.x_.fp();t.forEach(i=>{if(!i.getVisible())return;const s=i.getDimensions(),n={x:s.startX,y:s.startY},a={x:s.endX,y:s.endY},o=i.getStrokeStyle();e.add({No:i.No,start:n,end:a,figure:i},{strokeStyle:o})}),e.finishPlot()}add(t){const e=new qb(this.ks,this.scale,this.qx,this.jx,this.Zx,this.Qx,this.Jx,this.f_,this.qi,this.__).setDimensions(t);return this.g_(e),this.d_=!0,this.Ji.us.Ss(),e}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}}const q0=(r,t,e)=>{const i=t.getIcon();return i?r.addRow(i,t.getName()):r.addRow(t.getName()),r.addRow("X:","",t.axisX.formatValue(e.x)).addRow("Y:","",t.axisY.formatValue(e.y)).addRow("Intensity:","",e.intensity.toFixed(1))};class NE extends ko{constructor(t,e,i,s,n,a,o,l,u,d,f,y){super(t,e,i,s,n,a,o,l,d,f),this.xs="Heatmap Grid Series",this.Wy=q0,this.Lx=!1,this.Av={},this.Ji.us.Nn(Ct.yf),this.F_=u,this.qi=d;const m=y;this.be=te(d.heatmapGridSeriesFillStyle,m),this.gv=te(this.qi.heatmapGridSeriesWireframeStyle,m);const p={heatmapDataType:"intensity",dataOrder:u.dataOrder||"columns",columns:u.columns,rows:u.rows};this.Un=p,this.I_=this.ks.P_(this.scale,[],p).Ce(this.be).mv(this.gv).cs(this.getHighlight()),this.ds(this.I_),u.start&&this.setStart(u.start),u.end&&this.setEnd(u.end),u.step&&this.setStep(u.step),this.setHighlightOnHover(!1)}pv(){const t=this.Av.start||{x:0,y:0};let e;e=this.Av.end?{x:(this.Av.end.x-t.x)/this.Un.columns,y:(this.Av.end.y-t.y)/this.Un.rows}:this.Av.step?this.Av.step:{x:1,y:1},this.I_.Sv(t,e),this.Ji.us.Ss()}setStart(t){return this.Av.start=t,this.pv(),this}getStart(){return this.I_.vv().start}setStep(t){return this.Av.step=t,this.pv(),this}getStep(){return this.I_.vv().step}setEnd(t){return this.Av.end=t,this.pv(),this}getEnd(){return this.I_.vv().end}clear(){return this.I_.Nt(),this.ks.Ss(),this.D.emit("dataClear",this),this}setWireframeStyle(t){return this.gv=typeof t=="function"?t(this.gv):t,this.I_.mv(this.gv),this.ks.Ss(),this.D.emit("styleChange",this),this}getWireframeStyle(){return this.gv}setCursorInterpolationEnabled(t){return this.Lx=t,this.ks.us.Ss(),this}getCursorInterpolationEnabled(){return this.Lx}setCursorEnabled(t){return super.setCursorEnabled(t)}setIntensityInterpolation(t){return t=t||"disabled",this.I_.xv(t),this.ks.Ss(),this.D.emit("styleChange",this),this}getIntensityInterpolation(){return this.I_.Mv()}Kp(){return this.tS&&this.getVisible()}Gd(){return Ji(this.be)}attach(t,e=!0,i=!1){return super.attach(t,e,i),ii(t,this.qi,i,{fill:this.be}),this}D_(t){this.I_.D_().forEach(e=>{t.I_._v(e)})}l_(t){return this.D.off(t)}a_(t){return this.D.on("dataClear",t)}B_(t){return this.D.on("styleChange",t)}L_(t){return this.D.off(t)}Hc(t,e,i=this.Lx){const s=gt(t,this.ks.us.dt,this.scale),n=e?this.I_.getIsUnderMouse()?this.I_:void 0:this.I_;if(!n)return;const a=i?n.zx(s):n.Hc(s);if(a){const o={x:a.x,y:a.y,column:a.column,row:a.column,intensity:a.cellValue};return{location:o,scale:this.scale,resultTableContent:this.Wy(new Ui,this,o).Zu(),owner:this}}}solveNearestFromScreen(t,e=this.Lx){return this.Hc(ss(t,this.Ji.us),!1,e)}getXMax(){const t=this.I_;return t?t.bt():void 0}getXMin(){const t=this.I_;return t?t.vt():void 0}getYMax(){const t=this.I_;return t?t.Mt():void 0}getYMin(){const t=this.I_;return t?t.xt():void 0}br(){const t=Y(0,0);return t.x=Math.max(t.x,this.I_.vl()),t.y=Math.max(t.y,this.I_.bl()),t}WM(t){if(!(t instanceof xe))throw new Error("HeatmapGridSeries can only be attached to a pair of Linear Axes.");if(t instanceof xe&&t._i())throw new Error("HeatmapGridSeries can not be attached to a high precision Axis.")}Ie(t,e){t.cs(e),this.ks.Ss()}Te(){return super.Te(),this.I_.Yo(this.getBoundaries()),this}}class F4 extends NE{constructor(t,e,i,s,n,a,o,l,u,d,f,y){super(t,e,i,s,n,a,o,l,u,d,f,y),this.dS=!1,this.Wy=q0}invalidateIntensityValues(t){if(this.dS&&this.Ji.us.Nn(Ct.vf),Array.isArray(t)){if(t.length===0)return this;const e={x:t.length,y:t[0].length,columns:this.Un.dataOrder==="columns"?t.length:t[0].length,rows:this.Un.dataOrder==="rows"?t.length:t[0].length},i=this.Un.dataOrder==="columns"?this.Un.columns:this.Un.rows,s=this.Un.dataOrder==="columns"?this.Un.rows:this.Un.columns;if(e.x>i||e.y>s){if(this.chart.cA.Hn===!0){const a=`HeatmapGridSeries.invalidateIntensityValues intensity matrix overflow.
Grid ${this.Un.columns}x${this.Un.rows}, input ${e.columns}x${e.rows}.
Excess data will be automatically clipped. This can result in sub-optimal performance.`;nt.console.warn(a)}const n=[];for(let a=0;a<i;a+=1)n[a]=t[a].slice(0,s);t=n}this.I_._v({type:"intensity",lengthPrimary:e.x,lengthSecondary:e.y,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(t.values.length===0)return this;const e={primary:t.values.length,secondary:t.values[0].length,columns:this.Un.dataOrder==="columns"?t.values.length:t.values[0].length,rows:this.Un.dataOrder==="rows"?t.values.length:t.values[0].length},i=this.Un.dataOrder==="columns"?t.iColumn:t.iRow,s=i+e.primary-1,n=this.Un.dataOrder==="columns"?t.iRow:t.iColumn,a=n+e.secondary-1,o=(this.Un.dataOrder==="columns"?this.Un.columns:this.Un.rows)-1,l=(this.Un.dataOrder==="columns"?this.Un.rows:this.Un.columns)-1;if(i<0||n<0){if(this.chart.cA.Hn===!0){const u=`HeatmapGridSeries.invalidateIntensityValues invalidation start below 0 not permitted.
iColumn: ${t.iColumn}, iRow: ${t.iRow}.
No intensity values will be invalidated.`;nt.console.warn(u)}return this}if(s>o||a>l){if(this.chart.cA.Hn===!0){const m=`HeatmapGridSeries.invalidateIntensityValues intensity matrix overflow.
Grid ${this.Un.columns}x${this.Un.rows}, input ${e.columns}x${e.rows} starting at [${t.iColumn},${t.iRow}].
Out of bounds data will be automatically clipped. This can result in sub-optimal performance.`;nt.console.warn(m)}const u=Math.max(s-o,0),d=e.primary-u,f=Math.max(a-l,0),y=[];for(let m=0;m<d;m+=1)y[m]=t.values[m].slice(0,f>0?-f:void 0);t={iColumn:t.iColumn,iRow:t.iRow,values:y}}this.I_._v({type:"intensity",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:i,startSecondary:n,values:t.values})}return this.D.emit("invalidateIntensity",this,t),this.ks.Ss(),this.dS=!0,this}setFillStyle(t){return this.be=typeof t=="function"?t(this.be):t,this.I_.Ce(this.be),this.D.emit("styleChange",this),this.ks.Ss(),this}getFillStyle(){return this.be}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}R_(t){return this.D.on("invalidateIntensity",t)}E_(t){return this.D.off(t)}}class V4 extends ko{constructor(t,e,i,s,n,a,o,l,u,d,f,y){super(t,e,i,s,n,a,o,l,d,f),this.xs="Scrolling Heatmap Grid Series",this.Wy=q0,this.Lx=!1,this.Av={},this.Ji.us.Nn(Ct.yf),this.Ji.us.Nn(Ct.vf);const m=y;this.be=te(d.heatmapScrollingGridSeriesFillStyle,m),this.gv=te(this.qi.heatmapScrollingGridSeriesWireframeStyle,m);const p={scrollDimension:"columns",heatmapDataType:"intensity",...u};this.Un=p,this.z_=this.ks.V_(this.scale,[],p).Ce(this.be).mv(this.gv).cs(this.getHighlight()),this.ds(this.z_),u.start&&this.setStart(u.start),u.step&&this.setStep(u.step),this.setHighlightOnHover(!1)}pv(){const t=this.Av.start||{x:0,y:0};let e;e=this.Av.step?this.Av.step:{x:1,y:1},this.z_.Sv(t,e),this.Ji.us.Ss()}setStart(t){return this.Av.start=t,this.pv(),this}getStart(){return this.z_.vv().start}setStep(t){return this.Av.step=t,this.pv(),this}getStep(){return this.z_.vv().step}clear(){return this.z_.Nt(),this.ks.Ss(),this}setWireframeStyle(t){return this.gv=typeof t=="function"?t(this.gv):t,this.z_.mv(this.gv),this.ks.Ss(),this}getWireframeStyle(){return this.gv}setPixelInterpolationMode(t){return t=t||"disabled",this.z_.xv(t),this.ks.Ss(),this}getPixelInterpolationMode(){return this.z_.Mv()}setCursorInterpolationEnabled(t){return this.Lx=t,this.ks.us.Ss(),this}getCursorInterpolationEnabled(){return this.Lx}setCursorEnabled(t){return super.setCursorEnabled(t)}setDataCleaning(t){return this.z_.Su(t),this.ks.Ss(),this}Kp(){return this.tS&&this.getVisible()}Gd(){return Ji(this.be)}attach(t,e=!0,i=!1){return super.attach(t,e,i),ii(t,this.qi,i,{fill:this.be}),this}Ce(t){return this.be=typeof t=="function"?t(this.be):t,this.z_.Ce(this.be),this.ks.Ss(),this}Hc(t,e,i=this.Lx){const s=gt(t,this.ks.us.dt,this.scale),n=e?this.z_.getIsUnderMouse()?this.z_:void 0:this.z_;if(!n)return;const a=i?n.zx(s):n.Hc(s);return a?Us(a,this.scale,this.Wy(new Ui,this,{x:a.x,y:a.y,column:a.column,row:a.column,intensity:a.cellValue}).Zu(),this):void 0}solveNearestFromScreen(t,e=this.Lx){return this.Hc(ss(t,this.Ji.us),!1,e)}WM(t){if(!(t instanceof xe))throw new Error("HeatmapScrollingGridSeries can only be attached to a pair of Linear Axes.");if(t instanceof xe&&t._i())throw new Error("HeatmapScrollingGridSeries can not be attached to a high precision Axis.")}getXMax(){return this.z_.bt()||0}getXMin(){return this.z_.vt()||0}getYMax(){return this.z_.Mt()||0}getYMin(){return this.z_.xt()||0}br(){const t=Y(0,0);return t.x=Math.max(t.x,this.z_.vl()),t.y=Math.max(t.y,this.z_.bl()),t}Ie(t,e){t.cs(e),this.ks.Ss()}}class z4 extends V4{constructor(t,e,i,s,n,a,o,l,u,d,f,y){super(t,e,i,s,n,a,o,l,u,d,f,y),this.Wy=q0}addIntensityValues(t){if(t.length===0||t[0].length===0)return this;const e=t.length,i=t[0].length,s=(this.Un.scrollDimension==="columns"?t.length:t[0].length,this.Un.scrollDimension==="rows"?t.length:t[0].length,0+i-1),n=this.Un.resolution-1;if(s>n){if(this.chart.cA.Hn===!0){const o=`HeatmapScrollingGridSeries.addIntensityValues intensity matrix overflow.
Grid resolution: ${this.Un.resolution}, input ${e}x${i}.
Excess data will be automatically clipped. This can result in sub-optimal performance.`;nt.console.warn(o)}const a=[];for(let o=0;o<e;o+=1)a[o]=t[o].slice(0,n+1);t=a}return this.z_.Fv(t),this.ks.Ss(),this}invalidateIntensityValues(t){return this.z_._v(t.iSample,t.values),this.ks.Ss(),this}getSampleCount(){return this.z_.O_()}setFillStyle(t){return this.Ce(t),this}getFillStyle(){return this.be}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}}class LE extends ko{constructor(){super(...arguments),this.QM=[],this.yu=[],this.N_=[],this.G_=[],this.e_=1e3,this.JM=0,this.Hi=Xr.onHover,this._l={type:"disabled",packager:(t,e,i)=>t.slice()},this.Lx=!0,this.W_=[],this.U_=[],this.Y_=!1,this.Gd=()=>Ji(this.H_)||Ji(this.X_),this.j_=t=>{const e=t.length;if(this.QM.length>0){const i=this.QM.length-1,s=this.QM[i];if(e>0){const[n,a]=s.tl(),[o,l]=s.qa();if((o?n.length+o.length:n.length)>=this.e_){const u=o&&o.length>0?o[o.length-1]:n[n.length-1],d=l&&l.length>0?l[l.length-1]:a[n.length-1],f=(u.x+t[0].position)/2,y=hl(f,u,Y(t[0].position,t[0].high)).y,m=hl(f,d,Y(t[0].position,t[0].low)).y,p=dn(f,y,m);s.nl(p,Kt(Y(f,m),Y(f,y))).zl(!0),this.Z_([p].concat(t)).Rl(!0)}else s.nl(t)}}else e>0&&this.Z_(t)},this.Q_=t=>{const e=this.W_,i=t.length;if(this.W_.length>0){if(i>0){const s=e[e.length-1],n=s.tl(),a=s.qa();if(n.length+a.length>=this.e_){const o=a.length>0?a[a.length-1]:n[n.length-1],l=(o.x+t[0].x)/2,u=hl(l,o,Y(t[0].x,t[0].y)).y,d=Y(l,u);s.nl(d,Kt(Y(l,u),Y(l,u))).zl(!0),e.push(this.J_([d].concat(t),this.i_).Rl(!0))}else s.nl(t)}}else i>0&&e.push(this.J_(t))},this.K_=t=>{const e=this.U_,i=t.length;if(this.U_.length>0){if(i>0){const s=e[e.length-1],n=s.tl(),a=s.qa();if(n.length+a.length>=this.e_){const o=a.length>0?a[a.length-1]:n[n.length-1],l=(o.x+t[0].x)/2,u=hl(l,o,Y(t[0].x,t[0].y)).y,d=Y(l,u);s.nl(d,Kt(Y(l,u),Y(l,u))).zl(!0),e.push(this.q_([d].concat(t)).Rl(!0))}else s.nl(t)}}else i>0&&e.push(this.q_(t))},this.tw=(t,e)=>{const i=t.Ux(e);if(i)return[gt(i[0],this.scale,this.ks.us.dt),gt(i[1],this.scale,this.ks.us.dt)]},this.iw=(t,e)=>{const i=t.sw(e);if(i)return[gt(i[0],this.scale,this.ks.us.dt),gt(i[1],this.scale,this.ks.us.dt)]}}setDataCleaning(t){const e=t&&t.minDataPointCount;return this.JM=e!==void 0&&e>0?e:0,this.ks.Ss(),this}clear(){for(let t=0;t<this.QM.length;t+=1)this.QM[t].dispose();for(let t=0;t<this.W_.length;t+=1)this.W_[t].dispose();for(let t=0;t<this.U_.length;t+=1)this.U_[t].dispose();return this.yu.length=0,this.N_.length=0,this.G_.length=0,this.i_=void 0,this.QM.length=0,this.W_.length=0,this.U_.length=0,this.ks.Ss(),this.D.emit("dataClear",this),this}getPointAmount(){return this.QM.reduce((t,e)=>t+e.ol()+e.al(),this.yu.length)}setCursorInterpolationEnabled(t){return this.Lx=t,this.ks.us.Ss(),this}getCursorInterpolationEnabled(){return this.Lx}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}setCursorEnabled(t){return super.setCursorEnabled(t)}getCursorResultTableFormatter(){return this.Wy}getXMax(){return go(this.QM,xR,Math.max,MR,this.i_)||0}getXMin(){return go(this.QM,SR,Math.min,bR,this.i_)||0}getYMax(){return go(this.QM,vR,Math.max,ER,this.i_)||0}getYMin(){return go(this.QM,AR,Math.min,RR,this.i_)||0}br(){const t=Y(0,0);for(const e of this.QM)t.x=Math.max(t.x,e.vl()),t.y=Math.max(t.y,e.bl());return t}Kp(){return this.tS&&this.getPointAmount()>0&&this.getVisible()}WM(t){}qM(t,e,i){this.yu=cs(this.yu,t,{canReturnB:!1}),this.N_=cs(this.N_,e,{canReturnB:!1}),this.G_=cs(this.G_,i,{canReturnB:!1}),this.ks.Ss()}ew(t,e,i,s){this.hw(e,i,s),this.qM(Array.isArray(t)?t:[t],e,i)}hw(t,e,i){const s=qs(Ze(t),Ze(e));this.i_?this.i_=qs(this.i_,s):this.i_=s,i&&(this.i_=qs(this.i_,i))}rw(){const t=this.QM.length,e=Math.min(this.scale.x.getInnerStart(),this.scale.x.getInnerEnd());let i=0;if(t>1)for(let s=0;s<t-1;s+=1)this.scale.x.mi(this.QM[s].bt(),this.QM[s].vl())<e&&(i+=1);return i}s_(t,e,i,s){if(i>0){const n=Math.ceil(i/e),a=t.length-n;if(a>0&&s>0){const o=a-s>0?s:a;if(o>0){for(let l=0;l<o;l+=1)t[l].dispose();t.splice(0,o)}}}}nw(t){const e=this.QM.length>0?this.QM[this.QM.length-1]:void 0,i=e?e.tl()[0].length+(e.qa()[0]?e.qa()[0].length:0):void 0;yo(t,i,this.e_,this.j_)}ow(t){const e=this.W_.length>0?this.W_[this.W_.length-1].tl().length+this.W_[this.W_.length-1].qa().length:void 0;yo(t,e,this.e_,this.Q_)}aw(t,e){const i=this.W_.length>0?this.W_[this.W_.length-1].tl().length+this.W_[this.W_.length-1].qa().length:void 0;yo(t,i,this.e_,this.Q_),yo(e,i,this.e_,this.K_)}Z_(t,e){const i=this.ks.lw(this.scale).nl(t,e).Ce(this.H_).Bl(this.X_).Pl(this._l).cs(this.getHighlight());return this.QM.push(i),this.ds(i),i}uw(t,e,i){const s=this.ks.rp(this.scale,void 0,[Fr.UserSeries]).nl(t,i).setMouseInteractions(!1).Re(e).cs(this.getHighlight());return this.ds(s),s}J_(t,e){return this.uw(t,this.cw,e)}q_(t,e){return this.uw(t,this.dw,e)}fw(t){this.H_=typeof t=="function"?t(this.H_):t;const e=this.H_;for(let i=0;i<this.QM.length;i+=1)this.QM[i].Ce(e);this.ks.Ss()}Aw(t){this.X_=typeof t=="function"?t(this.X_):t;const e=this.X_;for(let i=0;i<this.QM.length;i+=1)this.QM[i].Bl(e);this.ks.Ss()}gw(){return this.H_}Ll(){return this.X_}mw(t){this.cw=typeof t=="function"?t(this.cw):t;const e=this.cw;for(let i=0;i<this.W_.length;i+=1)this.W_[i].Re(e);this.ks.Ss()}yw(t){this.dw=typeof t=="function"?t(this.dw):t;const e=this.dw;for(let i=0;i<this.U_.length;i+=1)this.U_[i].Re(e);this.ks.Ss()}pw(){return this.cw}Sw(){return this.dw}Ie(t,e){t.cs(e),this.bw(e),this.ks.Ss()}bw(t){for(let e=0;e<this.W_.length;e+=1)this.W_[e].cs(t);for(let e=0;e<this.U_.length;e+=1)this.U_[e].cs(t)}oS(){if(super.oS(),this.Y_=!1,this.JM>0){const t=this.QM.length,e=this.rw();this.s_(this.QM,this.e_,this.JM,e);const i=this.QM.length;this.W_.length>0&&this.s_(this.W_,this.e_,this.JM,e),this.U_.length>0&&this.s_(this.U_,this.e_,this.JM,e),t!==i&&this.ZM(),this.Y_=!0}}Te(){if(super.Te(),this.yu.length>0&&(this.nw(this.yu),this.xw(this.N_,this.G_),this.Y_=!0),this.Y_){const t=this.getBoundaries();for(const e of this.QM)e.Yo(t);for(const e of this.W_)e.Yo(t);for(const e of this.U_)e.Yo(t)}}dp(){this.i_=void 0,this.yu.length=0,this.N_.length=0,this.G_.length=0}Hc(t,e,i=this.Lx){const s=((n,a,o)=>{let l,u,d=Number.MAX_VALUE;for(let f=0;f<a.length;f+=1){const y=a[f],m=o(y,n);if(m){const p=ia(n,m[0]),x=ia(n,m[1]);(l===void 0||p<d||x<d)&&(l=m,u=y,p<d?d=p:x<d&&(d=x))}}return l&&u?[l,u]:void 0})(t,e?this.QM.filter(n=>n.getIsUnderMouse()):this.QM,i?this.iw:this.tw);if(s!==void 0&&s[0]!==void 0){const n=gt(s[0][0],this.ks.us.dt,this.scale),a=gt(s[0][1],this.ks.us.dt,this.scale);return Us(n,this.scale,this.Wy(new Ui,this,n.x,n.y,a.y).Zu(),this,s[1].Eh())}}solveNearestFromScreen(t,e=this.Lx){return this.Hc(ss(t,this.Ji.us),!1,e)}}const _4=(r,t,e,i,s)=>{const n=t.getIcon();return n?r.addRow(n,t.getName()):r.addRow(t.getName()),r.addRow("Position","",t.axisX.formatValue(e)).addRow("Value","",t.axisY.formatValue(i)).addRow("Base","",t.axisY.formatValue(s))};class N4 extends LE{constructor(t,e,i,s,n,a,o,l,u=0,d,f){super(t,e,i,s,n,a,o,l,d,f),this.xs="Area Series",this.Wy=_4,this.Ji.us.Nn(Ct.mf),this.Mw=u}add(t){this.QM.length!==0&&this.Ji.us.Nn(Ct.vf);const e=Array.isArray(t)?t:[t];if(e.length>0){const i=this._w(e),[s,n]=this.ww(i);this.ew(i,s,n,Kt(Y(Mt,this.Mw),Y(Dt,this.Mw)));const a=this.yu[this.yu.length-1];this.t_=a?{position:a.position,high:a.high,low:a.low}:void 0,this.D.emit("dataAdd",this,e,this.i_)}return this}addArrayY(t,e=1,i=0){let s=i;return s||(s=this.t_?this.t_.position+e:0),this.add(_E(t,e,s)),this}n_(t){return this.D.on("dataAdd",t)}o_(t){return this.D.off(t)}a_(t){return this.D.on("dataClear",t)}l_(t){return this.D.off(t)}}class CS extends N4{constructor(){super(...arguments),this.dw=vt}xw(t){return this.ow(t)}ww(t){const e=t.length,i=Array(e);for(let s=0;s<e;s+=1){const n=t[s];i[s]=Y(n.position,n.high)}return[i,[]]}setStrokeStyle(t){return this.mw(t),this}getStrokeStyle(){return this.pw()}}class L4 extends CS{constructor(t,e,i,s,n,a,o,l,u,d,f,y){super(t,e,i,s,n,a,o,l,u,d,f);const m=y;this.H_=te(this.qi.areaSeriesPositiveFillStyle,m),this.X_=Vt,this.cw=te(this.qi.areaSeriesPositiveStrokeStyle,m)}_w(t){return this.Pw(t)}Pw(t){const e=[];return t.length===1?this.Tw(t[0],e):this.Fw(t,e),e}Tw(t,e,i=0){const s=this.Mw;return e[i]=t.y<s?dn(t.x,s,s):dn(t.x,t.y,s),i+1}Fw(t,e,i=0){let s=0;const n=t.length-1,a=this.Mw;for(;s<n;){const o=t[s],l=t[s+=1];if(o.y>=a){const u=dn(o.x,o.y,a);if(i!==0&&ub(e[i-1],u)||(e[i]=u,i+=1),l.y<a){const d=rp(Y(Dt,a),Y(Mt,a),o,l);d&&(e[i]=dn(d.x,d.y,a),i+=1),e[i]=dn(l.x,a,a),i+=1}else e[i]=dn(l.x,l.y,a),i+=1}else{const u=dn(o.x,a,a);if(i!==0&&ub(e[i-1],u)||(e[i]=u,i+=1),l.y>=a){const d=rp(Y(Dt,a),Y(Mt,a),o,l);d&&(e[i]=dn(d.x,d.y,a),i+=1),e[i]=dn(l.x,l.y,a),i+=1}else e[i]=dn(l.x,a,a),i+=1}}return i}r_(){return $0(this.QM,t=>t[0]||[])}setFillStyle(t){return this.fw(t),this}getFillStyle(){return this.gw()}attach(t,e=!0,i=!1){return ii(t,this.qi,i,{fill:this.H_,stroke:this.cw}),super.attach(t,e,i)}}const B4={Positive:L4},P4=(r,t,e,i,s)=>r.addRow(t.getName()).addRow("Position","",t.axisX.formatValue(e)).addRow("High","",t.axisY.formatValue(i)).addRow("Low","",t.axisY.formatValue(s));class BE extends LE{constructor(t,e,i,s,n,a,o,l,u,d,f){super(t,e,i,s,n,a,o,l,u,d),this.xs="Area Range Series",this.Wy=P4,this.Ji.us.Nn(Ct.mf);const y=f;this.H_=te(this.qi.areaRangeSeriesFillStyle,y),this.cw=te(this.qi.areaRangeSeriesStrokeStyle,y),this.X_=te(this.qi.areaRangeSeriesFillStyleInverted,y),this.dw=te(this.qi.areaRangeSeriesStrokeStyleInverted,y)}add(t){const e=Array.isArray(t)?t:[t],[i,s]=fR(e);this.ew(t,i,s);const n=this.yu[this.yu.length-1];return this.t_=n?{position:n.position,high:n.high,low:n.low}:void 0,this.D.emit("dataAdd",this,e,this.i_),this}addArraysHighLow(t,e,i=1,s=0){if(t.length!==e.length)throw new Error("arrayHigh and arrayLow lengths are not equal");{let n=s;n||(n=this.t_?this.t_.position+i:0),this.add(((a,o,l=1,u)=>{const d=u!==void 0?u:0,f=new Array(a.length);for(let y=0;y<a.length;y+=1)f[y]={position:d+l*y,high:a[y],low:o[y]};return f})(t,e,i,n))}return this}xw(t,e){this.aw(t,e)}setHighFillStyle(t){return this.fw(t),this}setLowFillStyle(t){return this.Aw(t),this}setHighStrokeStyle(t){return this.mw(t),this}setLowStrokeStyle(t){return this.yw(t),this}getHighFillStyle(){return this.gw()}getLowFillStyle(){return this.Ll()}getHighStrokeStyle(){return this.pw()}getLowStrokeStyle(){return this.Sw()}r_(){return $0(this.QM,t=>{const e=t[0],i=t[1];if(!e||!i)return[];const s=[],n=e.length;for(let a=0;a<n;a+=1)s[a]={position:e[a].x,high:e[a].y,low:i[a].y};return s})}n_(t){return this.D.on("dataAdd",t)}o_(t){return this.D.off(t)}a_(t){return this.D.on("dataClear",t)}l_(t){return this.D.off(t)}attach(t,e=!0,i=!1){return ii(t,this.qi,i,{fill:this.H_,fill2:this.X_,behavior:{colorStep:!0}}),super.attach(t,e,i)}}var ba;(function(r){r[r.before=0]="before",r[r.middle=.5]="middle",r[r.after=1]="after"})(ba||(ba={}));const jb=(r,t)=>{const e=[],i=r.length,s=t;if(i>0){let n=0,a=r[0];e[n]=a,n+=1;for(let o=1;o<i;o+=1){const l=r[o];if(s<=0)e[n]=Y(a.x,l.y),n+=1;else{const u=a.x*(1-s)+l.x*s;e[n]=Y(u,a.y),n+=1,e[n]=Y(u,l.y),n+=1}e[n]=l,n+=1,a=l}}return e},I4=(r,t)=>{const e=r*r,i=e*r,s=1-r,n=s*s,a=n*s;return Y(a*t[0].x+3*r*n*t[1].x+3*e*s*t[2].x+i*t[3].x,a*t[0].y+3*r*n*t[1].y+3*e*s*t[2].y+i*t[3].y)},sl=(r,t=32)=>{if(r.length===2)return[r[0],r[1]];const e=(a=>{const l=a.length-1,u=Array(l);if(l>1){let d=Y(0,0),f=Y(0,0),y=Y(0,0),m=Ws(Se(a[1],a[0]));const p=3;let x=0,b=0;for(let v=0;v<l;v+=1){const R=Array(4);if(R[0]=a[v],R[1]=a[v],R[3]=a[v+1],R[2]=a[v+1],y=m,d=f,v+1<l?(m=a[v+2]===a[v+1]?Y(0,0):Ws(Se(a[v+2],a[v+1])),f=Ws(_t(y,m))):f=Y(0,0),a[v+1].y===a[v].y)x=0,b=0;else{const E=a[v+1].x-a[v].x;x=Math.abs(d.x)>1e-5?Math.abs(E/(p*d.x)):1,b=Math.abs(f.x)>1e-5?Math.abs(E/(p*f.x)):1}R[1]=_t(Ht(d,x),R[1]),R[2]=Se(R[2],Ht(f,b)),u[v]=R}}return u.length>0?u:[]})(r),i=e.length,s=Array(i*t);let n=0;for(let a=0;a<i;a+=1)for(let o=0;o<=t;o+=1)s[n]=I4(o/t,e[a]),n+=1;return s};class td extends wS{constructor(t,e,i,s,n,a,o,l,u,d,f,y,m,p,x){super(t,e,i,s,n,a,o,l,u,f,y),this.QM=[],this.xs="Point Line series",this.e_=1e5,this.Hx=5,this.Aa=0,this.Ga=!1,this.Wa=!1,this.Ua=!1,this.Lx=!0,this.Dw="nearest-x",this.Bw=1,this.Lw=[],this.Rw=b=>{if(this.QM.length>0){const v=this.QM[this.QM.length-1];if(b.length>0){const R=v.tl(),E=v.qa(),V=R.length+E.length-+v.El();if(V>=this.e_){const F=E.length>0?E[E.length-1]:R[v.El()?V:V-1],L=Y((F.x+b[0].x)/2,(F.y+b[0].y)/2);v.nl(L,Kt(Y(L.x,L.y),Y(L.x,L.y))).zl(!0),this.Ew([L].concat(b)).Rl(!0)}else v.nl(b,this.i_)}}else b.length>0&&this.Ew(b)},this.zw=b=>{if(this.Lw.length>0){const v=this.Lw[this.Lw.length-1];b.length>0&&((v.tl().length+v.qa().length)*this.Bw>=this.e_?this.Vw(b):v.nl(b))}else b.length>0&&this.Vw(b)},this.Ow=(b,v)=>{const R=b.Hc(v);if(R)return gt(R,this.scale,this.ks.us.dt)},this.Nw=(b,v)=>{const R=b.sw(v);if(R)return gt(R,this.scale,this.ks.us.dt)},this.Un=x,this.$x=d,this.Gw=m,this.Ww=te(f.pointLineSeriesFillStyle,p),this.lu=te(this.qi.pointLineSeriesStrokeStyle,p)}add(t){return super.add(t),this}r_(){return $0(this.Lw)}setStrokeStyle(t){this.lu=typeof t=="function"?t(this.lu):t;const e=this.lu;for(let i=0;i<this.QM.length;i+=1)this.QM[i].Re(e);return this.ks.Ss(),this}getStrokeStyle(){return this.lu}setPointFillStyle(t){this.Ww=typeof t=="function"?t(this.Ww):t;const e=this.Ww;for(let i=0;i<this.Lw.length;i+=1)this.Lw[i].Ce(e);return this.ks.Ss(),this}getPointFillStyle(){return this.Ww}setPointSize(t){this.Hx=t;for(let e=0;e<this.Lw.length;e+=1)this.Lw[e].q(t);return this.ks.Ss(),this}getPointSize(){return this.Hx}getPointShape(){return this.$x}setPointRotation(t){this.Aa=t;for(let e=0;e<this.Lw.length;e+=1)this.Lw[e].Nh(t);return this.ks.Ss(),this}getPointRotation(){return this.Aa}setIndividualPointSizeEnabled(t){this.Ga=t,t&&this.Ji.us.Nn(Ct.bf);for(let e=0;e<this.Lw.length;e+=1)this.Lw[e].el(t);return this.ks.Ss(),this}getIndividualPointSizeEnabled(){return this.Ga}setIndividualPointRotationEnabled(t){this.Wa=t;for(let e=0;e<this.Lw.length;e+=1)this.Lw[e].hl(t);return this.ks.Ss(),this}getIndividualPointRotationEnabled(){return this.Wa}setIndividualPointValueEnabled(t){this.Ua=t;for(let e=0;e<this.Lw.length;e+=1)this.Lw[e].rl(t);return this.ks.Ss(),this}getIndividualPointValueEnabled(){return this.Ua}setVisible(t){return super.setVisible(t),this.Lw.forEach(e=>e.setVisible(t)),this}setCursorInterpolationEnabled(t){return this.Lx=t,this.ks.us.Ss(),this}getCursorInterpolationEnabled(){return this.Lx}setCursorSolveBasis(t){return this.Dw=t,this.QM.forEach(e=>e.Ka(ul(t))),this.Lw.forEach(e=>e.Ka(ul(t))),this.ks.Ss(),this}getCursorSolveBasis(){return this.Dw}Gd(){return Ji(this.Ww)||Ji(this.lu.getFillStyle())}Cs(){return this.bs||this.$x}WM(t){}Ie(t,e){t.cs(e),this.ks.Ss()}h_(t){const e=this.QM.length>0?this.QM[this.QM.length-1].tl().length+this.QM[this.QM.length-1].qa().length-+this.QM[this.QM.length-1].El():void 0;yo(t,e,this.e_,this.Rw),yo(t,e,this.e_,this.zw)}Vw(t,e){const i=this.ks.bS(this.scale).nl(t,e).setMouseInteractions(this.Yi).Ce(this.Ww).il(this.$x).q(this.Hx).Nh(this.Aa).el(this.Ga).hl(this.Wa).rl(this.Ua).Ka(ul(this.Dw)).cs(this.getHighlight());return this.ds(i),this.Lw.push(i),i}Ew(t,e){const i=this.ks.rp(this.scale,void 0,[Fr.UserSeries,...this.Gw]).nl(t,e).setMouseInteractions(this.Yi).Re(this.lu).Ka(ul(this.Dw)).cs(this.getHighlight());return this.ds(i),this.QM.push(i),i}attach(t,e=!0,i=!1){return ii(t,this.qi,i,{stroke:this.lu,fill:this.Ww}),super.attach(t,e,i)}getPointAmount(){return this.Lw.reduce((t,e)=>t+e.ol()+e.al(),this.yu.length)}clear(){super.clear();for(let t=0;t<this.QM.length;t+=1)this.QM[t].dispose();this.QM.length=0;for(let t=0;t<this.Lw.length;t+=1)this.Lw[t].dispose();return this.Lw.length=0,this}s_(t,e,i,s){super.s_(t,e,i,s),this.KM.s_(this.Lw,e,i,s,this.scale,n=>{})}Hc(t,e,i=this.Lx){const s=i?gh(t,e?this.QM.filter(n=>n.getIsUnderMouse()):this.QM,this.Nw,this.Dw==="nearest-x"?(n,a)=>Math.abs(n.x-a.x):this.Dw==="nearest-y"?(n,a)=>Math.abs(n.y-a.y):(n,a)=>(n.x-a.x)**2+(n.y-a.y)**2):gh(t,e?this.Lw.filter(n=>n.getIsUnderMouse()):this.Lw,this.Ow,this.Dw==="nearest-x"?(n,a)=>Math.abs(n.x-a.x):this.Dw==="nearest-y"?(n,a)=>Math.abs(n.y-a.y):(n,a)=>(n.x-a.x)**2+(n.y-a.y)**2);if(s!==void 0){const n=gt(s[0],this.ks.us.dt,this.scale),a=s[1]instanceof np?s[1].uu():s[1].Eh(),o=s[1]instanceof cS?s[1].Eh():void 0,l=s[1]instanceof np?s[1].uu().getFillStyle():void 0,u=ks(a)?s[0].color?new it({color:s[0].color}):new it({color:a.getFallbackColor()}):void 0;return Us(n,this.scale,this.Wy(new Ui,this,n.x,n.y,n).Zu(),this,l||u||o)}}solveNearestFromScreen(t,e=this.Lx){return this.Hc(ss(t,this.Ji.us),!1,e)}}const kf=(r,t)=>r.qa().length>=t?r.qa().slice(-t):Array.prototype.concat(r.tl(),r.qa()).slice(-t),Jb=(r,t,e)=>{const i=Array.prototype.concat(r.tl(),r.qa()).slice(0,-33).concat(t.slice(e+1,2*e+2));r.Nt().nl(i).Ps()};class PE extends td{constructor(t,e,i,s,n,a,o,l,u,d,f,y,m,p,x){super(t,e,i,s,n,a,o,l,u,d,f,y,m,p,x),this.xs="Spline Series",this.Bw=32,this.e_=8e3,this.Uw=b=>{if(b.length===0)return;const v=this.Lw.length;if(v>0){const R=v>1,E=this.Lw[v-1];if(R){const V=Array.prototype.concat(E.tl(),E.qa()),F=V.length;if(32*F>=this.e_){const L=kf(E,3),z=Array.prototype.concat(L,b),B=sl(z,32);Jb(this.QM[v-1],B,32),this.Ew(B.slice(66))}else if(F<5){const L=this.Lw[v-2],z=kf(L,3),B=Array.prototype.concat(z,V,b),A=sl(B,32),T=this.QM[v-1],w=A.slice(66);T.Nt().nl(w).Ps()}else{const L=this.QM[v-1],z=Array.prototype.concat(L.tl(),L.qa()),B=kf(E,4),A=Array.prototype.concat(B,b),T=sl(A,32),w=z.slice(0,-66).concat(T.slice(33));L.Nt().nl(w).Ps()}}else{const V=Array.prototype.concat(E.tl(),E.qa()),F=V.length,L=this.QM[v-1];if(32*F>=this.e_){const z=kf(E,3),B=Array.prototype.concat(z,b),A=sl(B,32);Jb(this.QM[0],A,32),this.Ew(A.slice(66))}else if(F+b.length>1){const z=Array.prototype.concat(V,b),B=sl(z,32);L.Nt().nl(B).Ps()}else L.nl(b)}}else{const R=b.length>0?sl(b,32):b,E=Ze(R);this.Ew(R,E)}this.zw(b)}}setCursorInterpolationEnabled(t){return super.setCursorInterpolationEnabled(t)}h_(t){const e=this.Lw.length,i=this.Lw.length>0?this.Lw[e-1].tl().length+this.Lw[e-1].qa().length:void 0;yo(t,i,Math.ceil(this.e_/this.Bw),this.Uw)}solveNearestFromScreen(t,e=this.Lx){if(e)return super.solveNearestFromScreen(ss(t,this.Ji.us),e);const i=gh(ss(t,this.Ji.us),this.Lw,this.Ow,this.Dw==="nearest-x"?(s,n)=>Math.abs(s.x-n.x):this.Dw==="nearest-y"?(s,n)=>Math.abs(s.y-n.y):(s,n)=>(s.x-n.x)**2+(s.y-n.y)**2);if(i!==void 0){const s=gt(i[0],this.ks.us.dt,this.scale);return Us(s,this.scale,this.Wy(new Ui,this,s.x,s.y,s).Zu(),this,i[1].Eh())}}}class IE{constructor(){this.Gi="FreeformPattern",this._l={type:"disabled",packager:(t,e,i)=>t.slice()}}s_(t,e,i,s,n,a){if(s>0){const o=Math.trunc((e-s)/i);if(o>0&&t.length>1){const l=t.splice(0,o);for(let u=0;u<l.length;u+=1)a(l[u]),l[u].dispose()}}}Yw(t,e){const i=t.x-e.x,s=t.y-e.y;return Math.sqrt(i*i+s*s)}getXMax(t=[],e){return go(t,xR,Math.max,MR,e)}getXMin(t=[],e){return go(t,SR,Math.min,bR,e)}getYMax(t=[],e){return go(t,vR,Math.max,ER,e)}getYMin(t=[],e){return go(t,AR,Math.min,RR,e)}}const Df=r=>{switch(r){case"normal":default:return 1;case"high":return .25}},U4=Ae({_l:{type:"disabled",packager:(r,t,e)=>r.slice()}});class UE extends U4{s_(t,e,i,s,n,a){if(s>0){const o=Math.ceil(s/i),l=t.length-o;if(l>0){const u=this.rw(t,n);if(u>0){const d=l-u>0?u:l;if(d>0){for(let f=0;f<d;f+=1)a(t[f]),t[f].dispose();t.splice(0,d)}}}}}}const O4=(r,t)=>{const e=t.xt();return r?Math.min(e,r):e},G4=(r,t)=>{const e=t.Mt();return r?Math.max(e,r):e};class Zb extends UE{Yw(t,e){return Math.abs(t.x-e.x)}getYMax(t=[],e){return t.reduce(G4,e?e.max.y:void 0)}getYMin(t=[],e){return t.reduce(O4,e?e.min.y:void 0)}}const Y4=(r,t)=>{const e=t.vt();return r?Math.min(e,r):e},H4=(r,t)=>{const e=t.bt();return r?Math.max(e,r):e};class Qb extends UE{Yw(t,e){return Math.abs(t.y-e.y)}getXMax(t=[],e){return t.reduce(H4,e?e.max.x:void 0)}getXMin(t=[],e){return t.reduce(Y4,e?e.min.x:void 0)}}const Ls={horizontalProgressive:new class extends Zb{constructor(){super({_l:Cb()}),this.Gi="HorizontalProgressivePattern"}rw(r,t){const e=r.length,i=Math.min(t.x.getInnerStart(),t.x.getInnerEnd());let s=0;if(e>1)for(let n=0;n<e-1;n+=1)t.x.mi(r[n].bt(),r[n].vl())<i&&(s+=1);return s}getXMax(r=[],t){return t!==void 0?t?t.max.x:void 0:r.length>0?r[r.length-1].bt():void 0}getXMin(r=[],t){return r.length>0&&r[0].ol()>0?r[0].vt():t?t.min.x:void 0}setPrecision(r){return this.set("_columnPackaging",Cb(Df(r)))}},horizontalRegressive:new class extends Zb{constructor(){super({_l:kb()}),this.Gi="HorizontalRegressivePattern"}rw(r,t){const e=r.length,i=Math.max(t.x.getInnerStart(),t.x.getInnerEnd());let s=0;if(e>1)for(let n=0;n<e-1;n+=1)i<t.x.mi(r[n].vt(),-r[n].vl())&&(s+=1);return s}getXMax(r=[],t){return r.length>0&&r[0].ol()>0?r[0].bt():t?t.max.x:void 0}getXMin(r=[],t){return t!==void 0?t?t.min.x:void 0:r.length>0?r[r.length-1].vt():void 0}setPrecision(r){return this.set("_columnPackaging",kb(Df(r)))}},verticalProgressive:new class extends Qb{constructor(){super({_l:Db()}),this.Gi="VerticalProgressivePattern"}rw(r,t){const e=r.length,i=Math.min(t.y.getInnerStart(),t.y.getInnerEnd());let s=0;if(e>1)for(let n=0;n<e-1;n+=1)t.y.mi(r[n].Mt(),r[n].bl())<i&&(s+=1);return s}getYMax(r=[],t){return t!==void 0?t?t.max.y:void 0:r.length>0?r[r.length-1].Mt():void 0}getYMin(r=[],t){return r.length>0&&r[0].ol()>0?r[0].xt():t?t.min.y:void 0}setPrecision(r){return this.set("_columnPackaging",Db(Df(r)))}},verticalRegressive:new class extends Qb{constructor(){super({_l:Fb()}),this.Gi="VerticalRegressivePattern"}rw(r,t){const e=r.length,i=Math.max(t.y.getInnerStart(),t.y.getInnerEnd());let s=0;if(e>1)for(let n=0;n<e-1;n+=1)i<t.y.mi(r[n].xt(),-r[n].bl())&&(s+=1);return s}getYMax(r=[],t){return r.length>0&&r[0].ol()>0?r[0].Mt():t?t.max.y:void 0}getYMin(r=[],t){return t!==void 0?t?t.min.y:void 0:r.length>0?r[r.length-1].xt():void 0}setPrecision(r){return this.set("_columnPackaging",Fb(Df(r)))}},freeform:new IE};class OE extends td{constructor(t,e,i,s,n,a,o,l,u,d,f,y,m,p,x){super(t,e,i,s,n,a,o,l,Ls.horizontalProgressive,u,f,y,m,p,x),this.xs="Step Series",this.Rw=b=>{const v=this.QM.length>0?this.QM[this.QM.length-1].tl().length+this.QM[this.QM.length-1].qa().length:void 0;yo(b,v,this.e_,this.Hw)},this.Hw=b=>{const v=b.length;if(this.QM.length>0){const R=this.QM[this.QM.length-1];if(v>0){const E=R.tl(),V=R.qa(),F=V.length>0?V[V.length-1]:E[E.length-1],L=jb([F].concat(b),this.$w);L.shift();const z=Y((F.x+L[0].x)/2,(F.y+L[0].y)/2),B=Array.prototype.concat(z,L);(V.length>0?E.length+V.length:E.length)>=this.e_?(R.nl(z,Kt(Y(z.x,z.y),Y(z.x,z.y))).zl(!0),this.Ew(B).Rl(!0),this.Vw(b)):R.nl(B)}}else v>0&&this.Ew(jb(b,this.$w));this.zw(b)},this.$w=d,this.Gw.find(b=>b.type==="DataPattern")===void 0&&this.Gw.push({type:"DataPattern",args:{pattern:"ProgressiveX"}})}}class GE extends ko{constructor(t,e,i,s,n,a,o,l,u,d){super(t,e,i,s,n,a,o,l,u,d),this.xs="OHLC Series",this.Xw=f=>f[4]>=f[1],this.c_=Kt(Kn(Mt,Mt),Kn(Dt,Dt)),this.jw=[],this.Zw=!1,this.Qw=-1,this.Jw=[],this.Kw=!0,this.qw=!1,this.tC=4,this.Wy=(f,y,m)=>(f.addRow(y.getName()).addRow("Time","",y.axisX.formatValue(m.position)).addRow("Open","",m.open.toFixed(3)).addRow("High","",m.high.toFixed(3)).addRow("Low","",m.low.toFixed(3)).addRow("Close","",m.close.toFixed(3)),f),this.iC=[1e-7,1e-6,1e-5,1e-4,.001,.01,.1,1,5,10,30,60,300,600,1800,3600,7200,14400,28800,36e3,43200,50400,57600,64800,72e3,86400,172800,259200,345600,432e3,604800,1209600,2592e3,7776e3,10368e3,15552e3,31536e3,15768e4,31536e4,63072e4,7884e5,15768e5,31536e5,3942e6,47304e5,63072e5,7884e6,15768e6,31536e6,3942e7,47304e6,63072e6,7884e7,15768e7,31536e7,63072e7,7884e8,15768e8,31536e8,47304e8,63072e8],this.Ji.us.Nn(Ct.rf)}r_(){return this.Jw}n_(t){return this.D.on("dataAdd",t)}o_(t){return this.D.off(t)}a_(t){return this.D.on("dataClear",t)}l_(t){return this.D.off(t)}Kp(){return this.tS&&this.Jw.length>0&&this.getVisible()}sC(t){if(!(this.Jw.length<1))return[this.Jw[t][0],this.Jw[t][1],this.Jw[t][2],this.Jw[t][3],this.Jw[t][4]]}Hc(t){if(this.Jw.length===0)return;const e=gt(t,this.ks.us.dt,this.scale).x,i=this.getPackDataState()!==void 0;let s,n,a,o,l;if(i){const d=this.eC;if(!d)return;const f=xm(e,d.length-1,m=>d[m][0]),y=f!==void 0&&d[f];if(!y)return;o=y[3],a=y[2],n=y[1],l=y[4],s=y[0]}else{const d=xm(e,this.Jw.length-1,y=>this.Jw[y][0]),f=d!==void 0&&this.Jw[d];if(!f)return;s=f[0],n=f[1],a=f[2],o=f[3],l=f[4]}const u={position:s,open:n,high:a,low:o,close:l,isPacked:i};return{location:Y(u.position,u.close),scale:this.scale,resultTableContent:this.Wy(new Ui,this,u).Zu(),owner:this,isPacked:i,position:s,open:n,high:a,low:o,close:l}}WM(t){if(!(t.x instanceof er))throw new Error("OHLCSeries must be attached to a Linear X Axis.");this.hC=t.x}br(){return Y(5,5)}Y_(t){const e=t.length-1;if(e<0)return this;for(let i=0;i<=e;i+=1)t[i][3]<this.c_.min.y&&(this.c_.min.y=t[i][3]),this.c_.max.y<t[i][2]&&(this.c_.max.y=t[i][2]);return this.c_.min.x=Math.min(this.c_.min.x,t[0][0]),this.c_.max.x=Math.max(this.c_.max.x,t[e][0]),this}getXMax(){return this.c_.max.x}getXMin(){return this.c_.min.x}getYMax(){return this.c_.max.y}getYMin(){return this.c_.min.y}add(t){this.Jw.length>0&&this.Ji.us.Nn(Ct.vf);const e=Array.isArray(t[0])?t:[t[0]];if(e.length>0){this.Zw=!0;const i=this.Jw.length,s=this.jw.length,n=e.length;this.Jw.length=i+n,this.jw.length=s+n;for(let a=0;a<n;a+=1)this.Jw[i+a]=e[a],this.jw[s+a]=this.Jw[i+a];this.Y_(e),this.D.emit("dataAdd",this,e,void 0),this.ks.Ss()}return this}setPackData(t){return t!==this.Kw&&(this.qw=!0,this.Kw=t,this.Ji.us.Ss()),this}getPackData(){return this.Kw}getPackDataState(){const t=this.Qw;if(!(t<0||this.eC===void 0||this.eC.length===this.Jw.length))return{figureAxisInterval:t}}setFigureWidth(t){return this.rC=t,this.Ji.us.Ss(),this}getFigureWidth(){return this.rC}setFigureMinimumGap(t){return this.tC=t,this.Ji.us.Ss(),this}getFigureMinimumGap(){return this.tC}solveNearestFromScreen(t){return this.Hc(ss(t,this.Ji.us))}clear(){return this.Jw=[],this.jw=[],this.eC=void 0,this.nC(),this.c_.min.x=Mt,this.c_.min.y=Mt,this.c_.max.x=Dt,this.c_.max.y=Dt,this.D.emit("dataClear",this),this}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}oC(t){return this.hC.getPixelSize()*t/1e3}aC(){const t=this.iC.length-1,e=this.oC(this.rC+this.tC);let i=xm(e,t,s=>this.iC[s]);return i===void 0?i=e<this.iC[0]?0:this.iC[t]<e?t:this.iC.length/2:this.iC[i]<e&&(i+=1),this.iC.length<=i&&(i=t),1e3*this.iC[i]}Te(){if(super.Te(),!this.Kw){this.eC=void 0;let t=null;if(this.qw?(this.qw=!1,t=this.Jw,this.nC()):t=this.jw,t.length>=1){for(let e=0;e<t.length;e+=1){const i=t[e],s=i[0];this.Xw(i)?this.lC(s,i):this.uC(s,i)}this.jw.length=0,this.Zw=!1,this.Qw=-1}}}dp(){super.dp();const t=this.aC();if(this.Kw&&this.Jw.length>=1&&(t!==this.Qw||this.Zw||this.qw)){this.qw=!1,this.Qw=t,this.Zw=!1,this.nC(),this.eC=[];const e=this.Jw.length;let i=this.Jw[0][0]-this.Jw[0][0]%(t/2)+t,s=0;for(;s<e;){let n=this.sC(s);if(n===void 0)break;let a=n[3],o=n[2];const l=s;for(s+=1;s<e&&this.Jw[s][0]<i;)n=this.Jw[s],this.Jw[s][3]<a&&(a=this.Jw[s][3]),o<this.Jw[s][2]&&(o=this.Jw[s][2]),s+=1;const u=s-1;let d=n[0];l<u&&(d=this.Jw[u][0],n=[d,this.Jw[l][1],o,a,this.Jw[u][4]]),n[1]<n[4]?this.lC(d,n):this.uC(d,n),this.eC.push(n),i+=t}}}}class X4 extends GE{constructor(t,e,i,s,n,a,o,l,u,d){super(t,e,i,s,n,a,o,l,u,d),this.cC=1175494351e-14,this.rC=this.qi.ohlcCandleThicknessPixels||5,this.dC=this.qi.ohlcCandleTailStrokeStylePositive,this.fC=this.qi.ohlcCandleTailStrokeStyleNegative,this.AC=this.qi.ohlcCandleBodyFillStylePositive,this.gC=this.qi.ohlcCandleBodyFillStyleNegative,this.mC=i.Lg(this.scale).Re(new se({thickness:this.rC,fillStyle:this.AC})),this.mC.mu=!0,this.mC.gu={x:0,y:1},this.yC=i.Lg(this.scale).Re(new se({thickness:this.rC,fillStyle:this.gC})),this.yC.mu=!0,this.yC.gu={x:0,y:-1},this.pC=i.Lg(this.scale).Re(this.dC),this.pC.mu=!0,this.SC=i.Lg(this.scale).Re(this.fC),this.SC.mu=!0,this.ds(this.mC),this.ds(this.yC),this.ds(this.pC),this.ds(this.SC)}setBodyThickness(t){return this.rC=t,this.mC.Re(new se({thickness:this.rC,fillStyle:this.AC})),this.yC.Re(new se({thickness:this.rC,fillStyle:this.gC})),this.Ji.us.Ss(),this}getBodyThickness(){return this.rC}setBodyFillStylePositive(t){return this.AC=typeof t=="function"?t(this.AC):t,this.mC.Re(new se({thickness:this.rC,fillStyle:this.AC})),this.Ji.us.Ss(),this}getBodyFillStylePositive(){return this.AC}setBodyFillStyleNegative(t){return this.gC=typeof t=="function"?t(this.gC):t,this.yC.Re(new se({thickness:this.rC,fillStyle:this.gC})),this.Ji.us.Ss(),this}getBodyFillStyleNegative(){return this.gC}setTailStrokeStylePositive(t){return this.dC=typeof t=="function"?t(this.dC):t,this.pC.Re(this.dC),this.Ji.us.Ss(),this}getTailStrokeStylePositive(){return this.dC}setTailStrokeStyleNegative(t){return this.fC=typeof t=="function"?t(this.fC):t,this.SC.Re(this.fC),this.Ji.us.Ss(),this}getTailStrokeStyleNegative(){return this.fC}attach(t,e=!0,i=!1){return super.attach(t,e,i),ii(t,this.qi,i,{fill:this.AC,fill2:this.gC,behavior:{colorStep:!0}}),this}nC(){return this.pC.Nt(),this.SC.Nt(),this.mC.Nt(),this.yC.Nt(),this}lC(t,e){return Math.abs(e[1]-e[4])<this.cC?this.mC.zr().Eg({x:t,y:e[1]-this.cC},{x:t,y:e[1]+this.cC}):this.mC.zr().Eg({x:t,y:e[1]},{x:t,y:e[4]}),e[4]<e[2]&&this.pC.zr().Eg({x:t,y:e[4]},{x:t,y:e[2]}),e[3]<e[1]&&this.pC.zr().Eg({x:t,y:e[3]},{x:t,y:e[1]}),this}uC(t,e){return Math.abs(e[1]-e[4])<this.cC?this.yC.zr().Eg({x:t,y:e[1]-this.cC},{x:t,y:e[1]+this.cC}):this.yC.zr().Eg({x:t,y:e[1]},{x:t,y:e[4]}),e[3]<e[4]&&this.SC.zr().Eg({x:t,y:e[3]},{x:t,y:e[4]}),e[1]<e[2]&&this.SC.zr().Eg({x:t,y:e[1]},{x:t,y:e[2]}),this}}const W4={Candlesticks:X4},$4=r=>({defaultDragMouseStyle:ae.Horizontal,getTitleTextRotation:()=>0,...Zl(r,t=>t.getXMin(),t=>t.getXMax(),t=>t.br().x)}),q4=r=>({defaultDragMouseStyle:ae.Vertical,getTitleTextRotation:t=>90*t,...Zl(r,t=>t.getYMin(),t=>t.getYMax(),t=>t.br().y)});class fc extends wS{constructor(t,e,i,s,n,a,o,l,u,d,f,y,m,p){super(t,e,i,s,n,a,o,l,u,d,f),this.QM=[],this.xs="Line Series",this.Lx=!0,this.e_=void 0,this.Dw="nearest-x",this.pu=void 0,this.Gd=()=>Ji(this.lu.getFillStyle()),this.TC=(x,b)=>{const v=x.Ux(b);if(v)return gt(v,this.scale,this.ks.us.dt)},this.Nw=(x,b)=>{const v=x.sw(b);if(v)return gt(v,this.scale,this.ks.us.dt)},this.Gw=y,this.Un=p,this.lu=te(this.qi.lineSeriesStrokeStyle,m),this.FC={individualLookupValuesEnabled:(p==null?void 0:p.individualLookupValuesEnabled)!==void 0&&p.individualLookupValuesEnabled}}add(t){return super.add(t),this}setMouseInteractions(t){return super.setMouseInteractions(t)}setStrokeStyle(t){this.lu=typeof t=="function"?t(this.lu):t;const e=this.lu;for(let i=0;i<this.QM.length;i+=1)this.QM[i].Re(e);return this.ks.Ss(),this}getStrokeStyle(){return this.lu}setDataCleaning(t){return this.pu=t,this.QM.forEach(e=>e.Su(this.pu)),this.ks.Ss(),this}setCursorInterpolationEnabled(t){return this.Lx=t,this.ks.us.Ss(),this}getCursorInterpolationEnabled(){return this.Lx}setCursorSolveBasis(t){return this.Dw=t,this.QM.forEach(e=>e.Ka(ul(t))),this.ks.Ss(),this}getCursorSolveBasis(){return this.Dw}WM(t){}h_(t){let e=this.QM[0];e||(e=this.Ew(),this.QM.push(e),this.ds(e)),e.nl(t,this.i_)}Ew(){return this.ks.rp(this.scale,this.FC,[Fr.UserSeries,...this.Gw]).Re(this.lu).Su(this.pu).Ka(ul(this.Dw)).cs(this.getHighlight())}attach(t,e=!0,i=!1){return ii(t,this.qi,i,{stroke:this.lu}),super.attach(t,e,i)}Ie(t,e){t.cs(e),this.ks.Ss()}s_(t,e,i,s){}Hc(t,e,i=this.Lx){const s=gh(t,e?this.QM.filter(n=>n.getIsUnderMouse()):this.QM,i?this.Nw:this.TC,this.Dw==="nearest-x"?(n,a)=>Math.abs(n.x-a.x):this.Dw==="nearest-y"?(n,a)=>Math.abs(n.y-a.y):(n,a)=>(n.x-a.x)**2+(n.y-a.y)**2);if(s!==void 0){const n=gt(s[0],this.ks.us.dt,this.scale),a=s[1].uu();return Us(n,this.scale,this.Wy(new Ui,this,n.x,n.y,n).Zu(),this,a.getFillStyle())}}solveNearestFromScreen(t,e=this.Lx){return this.Hc(ss(t,this.Ji.us),!1,e)}}class kS extends wS{constructor(t,e,i,s,n,a,o,l,u,d,f,y,m){super(t,e,i,s,n,a,o,l,new IE,d,f),this.QM=[],this.xs="Point series",this.Hx=5,this.Aa=0,this.Ga=!1,this.Wa=!1,this.Ua=!1,this.e_=void 0,this.Ow=(p,x)=>{const b=p.Hc(x);if(b)return gt(b,this.scale,this.ks.us.dt)},this.Un=m,this.$x=u,this.be=te(d.pointSeriesFillStyle,y)}add(t){return super.add(t),this}Gd(){return Ji(this.be)}Cs(){return this.bs||this.$x}WM(t){}attach(t,e=!0,i=!1){return ii(t,this.qi,i,{fill:this.be}),super.attach(t,e)}Ie(t,e){t.cs(e),this.ks.Ss()}setPointFillStyle(t){this.be=typeof t=="function"?t(this.be):t;const e=this.be;for(let i=0;i<this.QM.length;i+=1)this.QM[i].Ce(e);return this.ks.Ss(),this}getPointFillStyle(){return this.be}setPointSize(t){this.Hx=t;for(let e=0;e<this.QM.length;e+=1)this.QM[e].q(t);return this.ks.Ss(),this}getPointSize(){return this.Hx}getPointShape(){return this.$x}setPointRotation(t){this.Aa=t;for(let e=0;e<this.QM.length;e+=1)this.QM[e].Nh(t);return this.ks.Ss(),this}getPointRotation(){return this.Aa}setIndividualPointSizeEnabled(t){this.Ga=t,t&&this.Ji.us.Nn(Ct.bf);for(let e=0;e<this.QM.length;e+=1)this.QM[e].el(t);return this.ks.Ss(),this}getIndividualPointSizeEnabled(){return this.Ga}setIndividualPointRotationEnabled(t){this.Wa=t;for(let e=0;e<this.QM.length;e+=1)this.QM[e].hl(t);return this.ks.Ss(),this}getIndividualPointRotationEnabled(){return this.Wa}setIndividualPointValueEnabled(t){this.Ua=t;for(let e=0;e<this.QM.length;e+=1)this.QM[e].rl(t);return this.ks.Ss(),this}getIndividualPointValueEnabled(){return this.Ua}h_(t){let e=this.QM[0];e||(e=this.Ew()),e.nl(t,this.i_)}Ew(){const t=this.ks.bS(this.scale).il(this.$x).q(this.Hx).Nh(this.Aa).el(this.Ga).hl(this.Wa).rl(this.Ua).Ce(this.be).cs(this.getHighlight());return this.QM.push(t),this.ds(t),t}Hc(t,e){const i=gh(t,e?this.QM.filter(s=>s.getIsUnderMouse()):this.QM,this.Ow,ia);if(i!==void 0){const s=gt(i[0],this.ks.us.dt,this.scale),n=i[1].Eh(),a=ks(n)?i[0].color?new it({color:i[0].color}):new it({color:n.getFallbackColor()}):n;return Us(s,this.scale,this.Wy(new Ui,this,s.x,s.y,s).Zu(),this,a)}}solveNearestFromScreen(t){return this.Hc(ss(t,this.Ji.us),!1)}setCursorResultTableFormatter(t){return super.setCursorResultTableFormatter(t)}}class j4{constructor(t,e,i,s){this.IC=!1,this.D=new Ii,this.chart=i,this.PC=s,this.$s=t.$s,this.qs=s||XR,this.DC=nt.document.createElement("div"),this.DC.style.position="absolute",this.DC.style.pointerEvents="none",nt.document.body.append(this.DC);const n=()=>{const a=i.engine.container.getBoundingClientRect();this.DC.style.left=`${a.left}px`,this.DC.style.top=`${a.top}px`,this.DC.style.width=`${a.width}px`,this.DC.style.height=`${a.height}px`};n(),i.onResize(n),this.BC(this.DC),this.LC(),this.RC(),this.EC(),this.zC(e),this.chart.VC().push(this)}BC(t){this.OC=nt.document.createElement("div"),this.OC.style.pointerEvents="all",t.append(this.OC),this.NC=nt.document.createElement("div"),this.GC=new K3(this.$s,this.qs,this.chart,this.NC),this.WC=nt.document.createElement("table"),this.WC.style.borderSpacing="0",this.OC.appendChild(this.GC.oe()),this.OC.appendChild(this.NC),this.NC.appendChild(this.WC)}RC(){let t=0,e=0,i=0,s=0,n=!1;this.IC=!1,this.OC.onmousedown=a=>{a=a||nt.event,i=a.clientX,s=a.clientY,n=!0,nt.document.onmouseup=o=>{this.IC?this.OC.addEventListener("click",At,!0):this.OC.removeEventListener("click",At,!0),n=!1,this.IC=!1,nt.document.onmouseup=null,nt.document.onmousemove=null},nt.document.onmousemove=o=>{o=o||nt.event,n&&(t=i-o.clientX,e=s-o.clientY,i=o.clientX,s=o.clientY,this.IC=!0,this.OC.style.top=this.OC.offsetTop-e+"px",this.OC.style.left=this.OC.offsetLeft-t+"px",this.OC.style.removeProperty("right"),this.OC.style.removeProperty("bottom"))}}}EC(){let t=0,e=0,i=0,s=0,n=!1;this.OC.ontouchstart=a=>{a=a||nt.event,i=a.touches[0].clientX,s=a.touches[0].clientY,n=!0,this.OC.ontouchend=()=>{n=!1,nt.document.ontouchend=null,nt.document.ontouchmove=null},this.OC.ontouchmove=o=>{n&&(At(o),o=o||nt.event,t=i-o.touches[0].clientX,e=s-o.touches[0].clientY,i=o.touches[0].clientX,s=o.touches[0].clientY,this.OC.style.top=this.OC.offsetTop-e+"px",this.OC.style.left=this.OC.offsetLeft-t+"px",this.OC.style.removeProperty("right"),this.OC.style.removeProperty("bottom"))}}}LC(){this.OC.style.setProperty("top","10px"),this.OC.style.setProperty("left","10px"),this.OC.style.position="absolute",this.OC.style.display="flex",this.OC.style.alignItems="flex-start",this.NC.style.setProperty("display","none")}removePositionProperty(){this.OC.style.removeProperty("top"),this.OC.style.removeProperty("left"),this.OC.style.removeProperty("bottom"),this.OC.style.removeProperty("right")}setPositionProperty(t){switch(this.removePositionProperty(),t){case ll.BottomLeft:this.OC.style.setProperty("bottom","10px"),this.OC.style.setProperty("left","10px");break;case ll.TopLeft:this.OC.style.setProperty("top","10px"),this.OC.style.setProperty("left","10px");break;case ll.BottomRight:this.OC.style.setProperty("bottom","10px"),this.OC.style.setProperty("right","10px");break;case ll.TopRight:default:this.OC.style.setProperty("top","10px"),this.OC.style.setProperty("right","10px")}}zC(t){for(let e=0;e<t.length;e+=1){const i=this.WC.insertRow();for(let s=0;s<t[e].length;s+=1){const n=i.insertCell(),a=t[e][s];typeof a!="object"?this.UC(a,n):this.addCustomButton(a,n)}}}UC(t,e){switch(t){case En.ZoomIn:this.YC(new H3(this.$s,this.chart,this.qs),e);break;case En.ZoomInX:this.YC(new X3(this.$s,this.chart,this.qs),e);break;case En.ZoomInY:this.YC(new W3(this.$s,this.chart,this.qs),e);break;case En.ZoomOut:this.YC(new $3(this.$s,this.chart,this.qs),e);break;case En.ZoomOutX:this.YC(new q3(this.$s,this.chart,this.qs),e);break;case En.ZoomOutY:this.YC(new j3(this.$s,this.chart,this.qs),e);break;case En.ZoomToFit:this.YC(new Z3(this.$s,this.chart,this.qs),e);break;case En.ToggleAnimations:this.YC(new J3(this.$s,this.chart,this.qs),e);break;default:console.error(`No predefined button like "${En[t]}" exists.`)}}YC(t,e){e.rowSpan=t.Xs.rows,e.colSpan=t.Xs.columns,t.ne(e)}addCustomButton(t,e){const i=new Q3(this.$s,t,this.chart);return this.YC(i,e),this}dispose(){this.DC.remove(),this.D.emit("dispose",this)}onDispose(t){return this.D.on("dispose",t)}offDispose(t){return this.D.off(t,"dispose")}}class YE extends ko{constructor(t,e,i,s,n,a,o,l,u,d,f,y){var m;super(t,e,i,s,n,a,o,l,u,d),this.xs="Point Line Area Series",this.Wy=J4,this.Lx=!1,this.HC=0,this.Un=y,this.Na=this.ks.dd(this.scale).Re(te(this.qi.lineSeriesStrokeStyle,f)).ld(te(this.qi.pointSeriesFillStyle,f)).ud(te(this.qi.areaSeriesPositiveFillStyle,f)).$C(void 0).pd(7),this.Na.XC=((m=this.Un)===null||m===void 0?void 0:m.allowDataGrouping)!==!1,this.ds(this.Na)}setDataSet(t){var e;return t===((e=this.od)===null||e===void 0?void 0:e.Wt)||(t.yc&&this.Ji.us.Nn(Ct.xf),t.vc&&this.Ji.us.Nn(Ct.bf),this.od=ep(t,this.od,()=>[t.$c(()=>{this.HC+=1,this.HC>1&&this.Ji.us.Nn(Ct.vf),this.Ji.us.Ss()}),t.Xc(()=>this.Ji.us.Ss())]),this.Na.ad(t),this.chart.us.Ss()),this}getDataSet(){return this.jC()}setStrokeStyle(t){return this.Na.Re(t),this.ks.Ss(),this}getStrokeStyle(){return this.Na.uu()}setAreaFillStyle(t){return this.Na.ud(t),this.ks.Ss(),this}getAreaFillStyle(){return this.Na.ZC()}setPointFillStyle(t){return this.Na.ld(t),this.ks.Ss(),this}getPointFillStyle(){return this.Na.yd()}setPointSize(t){return this.Na.pd(t),this.ks.Ss(),this}getPointSize(){return this.Na.QC()}setPointShape(t){return this.Na.fd(t),this.ks.Ss(),this}getPointShape(){return this.Na.Ad()}setPointRotation(t){return this.Na.gd(t),this.ks.Ss(),this}getPointRotation(){return this.Na.md()}setPointAlignment(t){return this.Na.JC(t),this.Ji.us.Ss(),this}getPointAlignment(){return this.Na.KC()}setCurvePreprocessing(t){return this.Na.$C(t),this.ks.Ss(),this}getCurvePreprocessing(){return this.Na.qC()}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}setCursorInterpolationEnabled(t){return this.Lx=t,this.ks.us.Ss(),this}getCursorInterpolationEnabled(){return this.Lx}add(t){return this.jC().add(t),this.ks.Ss(),this}addArraysXY(t,e){return this.jC().addArraysXY(t,e),this.ks.Ss(),this}appendJSON(t,e){return this.jC().appendJSON(t,e),this.ks.Ss(),this}appendSample(t){return this.jC().appendSample(t),this.ks.Ss(),this}appendSamples(t){return this.jC().appendSamples(t),this.ks.Ss(),this}fill(t){return this.jC().fill(t),this.ks.Ss(),this}setSamples(t){return this.jC().setSamples(t),this.ks.Ss(),this}alterSamples(t,e){return this.jC().alterSamples(t,e),this.ks.Ss(),this}alterSamplesByID(t,e){return this.jC().alterSamplesByID(t,e),this.ks.Ss(),this}getSampleCount(){return this.jC().getSampleCount()}getNextSampleIndex(){return this.jC().getNextSampleIndex()}clear(){return this.jC().clear(),this.ks.Ss(),this}setMaxSampleCount(t){return this.jC().setMaxSampleCount(t),this.ks.Ss(),this}getMaxSampleCount(){return this.jC().getMaxSampleCount()}readBack(t){return this.jC().readBack(t)}onMaxSampleCountExceeded(t){return this.jC().onMaxSampleCountExceeded(t)}offMaxSampleCountExceeded(t){return this.jC().offMaxSampleCountExceeded(t)}tk(){return this.jC()}Gd(){return Ji(this.getPointFillStyle())||Ji(this.getStrokeStyle().getFillStyle())||Ji(this.getAreaFillStyle())}Kp(){var t;const e=(t=this.od)===null||t===void 0?void 0:t.Wt;return this.getAutoScrollingEnabled()&&e!==void 0&&e.uc>0}WM(t){}getXMax(){return this.Na.bt()}getXMin(){return this.Na.vt()}getYMax(){return this.Na.Mt()}getYMin(){return this.Na.xt()}br(){return{x:this.Na.vl(),y:this.Na.bl()}}jC(){if(!this.od){const t=new yS(this.Un);t.yc&&this.Ji.us.Nn(Ct.xf),t.vc&&this.Ji.us.Nn(Ct.bf),this.od=ep(t,this.od,()=>[t.$c(()=>{this.HC+=1,this.HC>1&&this.Ji.us.Nn(Ct.vf),this.Ji.us.Ss()}),t.Xc(()=>{this.Ji.us.Ss()})]),this.Na.ad(t)}return this.od.Wt}attach(t,e=!0,i=!1){super.attach(t,e,i);const s=this.getPointFillStyle(),n=this.getAreaFillStyle();return ii(t,this.qi,i,{stroke:this.getStrokeStyle(),fill:s!==Vt?s:n}),super.attach(t,e)}Cs(){return this.bs||this.getPointShape()}Ie(t,e){t.cs(e),this.ks.Ss()}Hc(t,e,i=this.Lx){this.getCurvePreprocessing()!==void 0&&(i=!1);const s=this.tk(),n=gt(t,this.Ji.us.dt,this.scale),a=!e||this.Na.getIsUnderMouse()?s.Hc(n,i,this.scale,this.Ji.pixelScale):void 0;if(a!==void 0){const o=[this.getStrokeStyle().getFillStyle(),this.getPointFillStyle(),this.getAreaFillStyle()];return Us(a,this.scale,this.Wy(new Ui,this,a).Zu(),this,o.filter(l=>!yR(l))[0])}}solveNearestFromScreen(t,e=!1){return this.Hc(ss(t,this.Ji.us),!1,e)}}const J4=(r,t,e)=>{const i=t.getIcon();return i?r.addRow(i,t.getName()):r.addRow(t.getName()),r.addRow("X","",t.axisX.formatValue(e.x)).addRow("Y","",t.axisY.formatValue(e.y)),e.lookupValue!==void 0&&r.addRow("Value","",e.lookupValue.toFixed(1)),r},Kb=(...r)=>(t,e)=>r.forEach(i=>i.forEach(s=>{s.axis.dt.q(t),s.axis.rg.q(e)})),t2=Y(10,10);var jn;(function(r){r[r.Top=0]="Top",r[r.Bottom=1]="Bottom",r[r.Left=2]="Left",r[r.Right=3]="Right"})(jn||(jn={}));const Z4=new Set([jn.Top,jn.Bottom,jn.Left,jn.Right]),Ff=r=>r.setStopped(!0),Q4=r=>r.getChartInteractionFitByDrag()?r.fit(!0):void 0,Gr=(r,t)=>{const e=r.kh.type==="linear-highPrecision"||t.kh.type==="linear-highPrecision",i=r.kh.type==="logarithmic"||t.kh.type==="logarithmic";if(e&&i){const s=`Invalid Axis combination | 'logarithmic' can't be combined with 'linear-highPrecision' (x: ${r.kh.type}, y: ${t.kh.type})`;throw new Error(s)}};var eh,gc,cp;(function(r){r[r.seriesBackground=0]="seriesBackground",r[r.gridLine0=1]="gridLine0",r[r.gridLine1=2]="gridLine1",r[r.gridLine2=3]="gridLine2",r[r.highlightersBelow=4]="highlightersBelow"})(eh||(eh={})),function(r){r[r.plotting=0]="plotting",r[r.highlightersAbove=1]="highlightersAbove",r[r.fg=2]="fg"}(gc||(gc={}));class DS extends jc{constructor(t,e,i,s,n,a,o){super(t,e,i,e.vm("chartXY bg",0),s,e.us.qi.chartXYBackgroundFillStyle,e.us.qi.chartXYBackgroundStrokeStyle,e.us.qi.chartXYTitleFont,e.us.qi.chartXYTitleFillStyle,o),this.ik=this.sm.d2({scaleXYConstructor:xe}),this.Vg=[],this.Og=[],this.Gg=[],this.Ng=[],this.sk=new Map,this.ek=!0,this.hk=!0,this.rk=!0,this.Rf=2,this.nk=!0,this.ak=!0,this.lk=[],this.uk=this.xm.ke(this.ik).Ce(Vt).we(vt).setMouseInteractions(!1),this.ck=this.xm.Ee(this.ik).Re(vt).setMouseInteractions(!1),this.dk=this.xm.Ee(this.ik).Re(vt).setMouseInteractions(!1),this.fk=this.qi.chartXYZoomingRectangleFillStyle,this.Ak=this.qi.chartXYZoomingRectangleStrokeStyle,this.gk=this.qi.chartXYFittingRectangleFillStyle,this.mk=this.qi.chartXYFittingRectangleStrokeStyle,this.yk=ae.Default,this.pk=ae.Move,this.Sk=ae.ZoomIn,this.vk=ae.Default,this.bk=void 0,this.xk=Vf,this.GM=0,this.Gy=$e.snapToClosest,this.Mk=Kb(this.Og,this.Vg),this._k=Kb(this.Gg,this.Ng),this.wk=(u,d,f,y,m)=>{this.Mk(y,m),this._k(m,y),this.ik.q(y,m),this.us.Ss()},this.Ck=(u,d)=>{this.sk.set(u,d)},this.qA=u=>{const d=this.Og.findIndex(p=>p.axis===u),f=this.Vg.findIndex(p=>p.axis===u),y=this.Gg.findIndex(p=>p.axis===u),m=this.Ng.findIndex(p=>p.axis===u);d>=0&&this.Og.splice(d,1),f>=0&&this.Vg.splice(f,1),y>=0&&this.Gg.splice(y,1),m>=0&&this.Ng.splice(m,1),this.sk.delete(u),this.us.Ss()},this.addAreaSeries=u=>{const d=(u==null?void 0:u.axisX)||(u==null?void 0:u.xAxis)||this.getDefaultAxisX(),f=(u==null?void 0:u.axisY)||(u==null?void 0:u.yAxis)||this.getDefaultAxisY();Gr(d,f);const y=u&&u.baseline?u.baseline:0,m=new(u&&u.type?u.type:B4.Positive)(this,this._S,this.Rb,d,f,this.kk(d),this.kk(f),this.nm,y,this.qi,this.us.es,(u==null?void 0:u.automaticColorIndex)!==void 0?u.automaticColorIndex:this.xS.length);return this.PS(m),m},this.addAreaRangeSeries=u=>{const d=(u==null?void 0:u.axisX)||(u==null?void 0:u.xAxis)||this.getDefaultAxisX(),f=(u==null?void 0:u.axisY)||(u==null?void 0:u.yAxis)||this.getDefaultAxisY();Gr(d,f);const y=new BE(this,this._S,this.Rb,d,f,this.kk(d),this.kk(f),this.nm,this.qi,this.us.es,(u==null?void 0:u.automaticColorIndex)!==void 0?u.automaticColorIndex:this.xS.length);return this.PS(y),y},this.Tk=!1,this.Fk=!1,this.UM=()=>{(this.ek||this.hk)&&(this.bk=this.engine.setMouseStyle(this.yk))},this.YM=()=>{this.Tk=!1,this.engine.restoreMouseStyle(this.bk)},this.HM=(u,d,f)=>{var y,m;const p=Fe((y=this.cA.Yn)===null||y===void 0?void 0:y.chartXYRectangleZoomFitMouseButton,0),x=Fe((m=this.cA.Yn)===null||m===void 0?void 0:m.chartXYPanMouseButton,2);this.engine.restoreMouseStyle(this.bk);const b=this.xm.us.Pe(d.clientX,d.clientY);f===p&&(this.ek||this.hk)?(this.Ik(u,b),At(d)):f===x&&this.nk&&(this.bk=this.engine.setMouseStyle(this.pk),this.Fk=!0,At(d))},this.eS=(u,d,f,y,m)=>{var p,x;const b=Y(d.clientX,d.clientY),v=Fe((p=this.cA.Yn)===null||p===void 0?void 0:p.chartXYRectangleZoomFitMouseButton,0),R=Fe((x=this.cA.Yn)===null||x===void 0?void 0:x.chartXYPanMouseButton,2);f===v&&(this.ek||this.hk)?(this.Pk(u,y,b),At(d)):f===R&&this.nk&&(this.Dk(Ht(m,-1)),At(d)),this.us.Ss()},this.$M=(u,d,f,y)=>{var m,p;const x=Fe((m=this.cA.Yn)===null||m===void 0?void 0:m.chartXYRectangleZoomFitMouseButton,0),b=Fe((p=this.cA.Yn)===null||p===void 0?void 0:p.chartXYPanMouseButton,2);if(f===x&&(this.ek||this.hk)){const v=Y(d.clientX,d.clientY);this.Bk(u,y,v),At(d)}else f===b&&this.nk&&At(d);this.engine.restoreMouseStyle(this.bk),this.FS.getIsUnderMouse()&&(this.bk=this.engine.setMouseStyle(this.yk)),this.Tk=!1,this.Fk=!1},this.sS=(u,d)=>{if(this.rk){const f=this.xm.us.Pe(d.clientX,d.clientY);this.Lk(f,Y(So(d),So(d))),At(d)}},this.Rk=(u,d,f,y)=>{},this.Ek=(u,d,f,y,m,p)=>{if(this.nk){const x=Y(-(y.x+m.x)/2,-(y.y+m.y)/2);this.Dk(x),At(p),this.Fk=!0}if(this.rk){const x=this.engine.clientLocation2Engine(d.x,d.y),b=this.engine.clientLocation2Engine(f.x,f.y),v=Se(Y(Math.abs(x.x-y.x-(b.x-m.x)),Math.abs(x.y-y.y-(b.y-m.y))),Y(Math.abs(x.x-b.x),Math.abs(x.y-b.y)));this.forEachAxisX(R=>{R.getChartInteractionZoomByWheel()&&R.St(R.dt.mi(R.getInterval().start,-v.x),R.dt.mi(R.getInterval().end,v.x),!1,!0,"interactionZoom")}),this.forEachAxisY(R=>{R.getChartInteractionZoomByWheel()&&R.St(R.dt.mi(R.getInterval().start,-v.y),R.dt.mi(R.getInterval().end,v.y),!1,!0,"interactionZoom")}),At(p),this.Tk=!0}},this.zk=(u,d,f,y)=>{this.Fk=!1,this.Tk=!1},this.Vk=(u,d,f)=>{(this.hk||this.ek)&&(this.Ik(u,d),At(f))},this.Ok=(u,d,f,y,m)=>{(this.hk||this.ek)&&(this.Pk(u,d,f),At(m))},this.Nk=(u,d,f,y)=>{(this.hk||this.ek)&&(this.Bk(u,d,f),At(y))},this.us.Nn(Ct.gf),this.setPadding({right:24}),this.Gk=e.ob("chartXY series bg",eh.seriesBackground),this.Wk=[eh.gridLine0,eh.gridLine1,eh.gridLine2].map(u=>e.Uk(`chartXY gridline #${u}`,u)),this.JA=e.Uk("chartXY highlighters below",eh.highlightersBelow),this.Rb=e.$y("chartXY plotting",gc.plotting),this.KA=e.$y("chartXY highlighters above",gc.highlightersAbove),this.bA=e.$y("chartXY fg",gc.fg),this.ik.x.J(0,this.uiScale.x.getCellSize()-(this.Xt.left+this.Xt.right+this.ya.left+this.ya.right)),this.ik.y.J(0,this.uiScale.y.getCellSize()-(this.Xt.bottom+this.Xt.top+this.ya.bottom+this.ya.top)),this.ik.q(this.uiScale.oi().x,this.uiScale.oi().y),this.FS=this.Gk.ke(this.ik).Ce(this.qi.chartXYSeriesBackgroundFillStyle).we(vt),this.IS=this.bA.ke(this.ik).Ce(Vt).we(this.qi.chartXYSeriesBackgroundStrokeStyle).setMouseInteractions(!1),super.TS(this.FS,this.IS),this.setSeriesBackgroundEffect(!1),this.jy=e.Zy();const l=Fe(a?a.autoCursorBuilder:void 0,S4);this.Pm=l.uy(this.jy,this.ik,this.ik,this.qi),ls.Dm(this),this.LS((u,d)=>{ls.Bm(this,d)}),this.addAxisX(a&&a.defaultAxisX),this.addAxisY(a&&a.defaultAxisY),this.onResize(this.wk),this._m.Rh("ChartXY"),this.hS=Is(new wr(this.Vk,this.Ok,this.Nk,1),new hS(this.Rk,this.Ek,this.zk)),this.onSeriesBackgroundMouseEnter(this.UM),this.onSeriesBackgroundMouseLeave(this.YM),this.onSeriesBackgroundMouseWheel(this.sS),this.onSeriesBackgroundMouseDragStart(this.HM),this.onSeriesBackgroundMouseDrag(this.eS),this.onSeriesBackgroundMouseDragStop(this.$M),this.onSeriesBackgroundTouchStart(this.hS.onTouchStart),this.onSeriesBackgroundTouchMove(this.hS.onTouchMove),this.onSeriesBackgroundTouchEnd(this.hS.onTouchEnd),this.setAnimationsEnabled((a==null?void 0:a.disableAnimations)!==!0&&(a==null?void 0:a.animationsEnabled)!==!1),this.Sm(n,this.ik)}get coordsAxis(){return{x:this.getDefaultAxisX(),y:this.getDefaultAxisY()}}getSeries(){return this.xS}setAutoCursor(t){return this.Pm&&t(this.Pm),this.us.Ss(),this}getAutoCursor(){return this.Pm}setAutoCursorMode(t){return this.Gy=t,this.us.Ss(),this}getAutoCursorMode(){return this.Gy}solveNearest(t){const e=t||this.us.On();if(e)return ls.Hc(this,ss(e,this.us),this.xS)}getMinimumSize(){const t={x:0,y:0};t.x+=this.Xt.left+this.Xt.right+this.ya.left+this.ya.right,t.y+=this.Xt.top+this.Xt.bottom+this.ya.top+this.ya.bottom;const e=this._m.Ps().jc(),i=fl(Vm(this.xk||Vf),this.bm);return t.x+=e.x+i.left+i.right,t.y+=e.y+i.top+i.bottom,this.Yk&&(t.x+=this.Yk.left,t.x+=this.Yk.right,t.y+=this.Yk.top,t.y+=this.Yk.bottom),t.x+=t2.x,t.y+=t2.y,t}addChartMarkerXY(t=x4,e,i){const s=this.nm(),n=new zE(s,this.uiScale,e||this.getDefaultAxisX(),i||this.getDefaultAxisY(),t,this.tm(s),this.qi);return this.gm(n),n}addAxisX(t){var e,i;const{opposite:s,type:n}=hp(t);let a;a=n.type==="linear"?this.sm.d1({dimension:"x",scale1DConstructor:er}):n.type==="linear-highPrecision"?this.sm.d1({dimension:"x",scale1DConstructor:er}).Mi():this.sm.d1({dimension:"x",scale1DConstructor:Eo}).Ai(n.base),a.q(this.ik.x.oi());const o=s?this.Vg:this.Og,l=new r0(this.Wk,this.bA,this.xm,this.JA,this.KA,this.us.es,a,this.ik.y,(u=()=>l._g(),{...n0,...$4(u)}),this,s?100:0,this.qA,this.Ck,this.qi,this.th,n);var u;let d,f;return(t==null?void 0:t.iParallel)===void 0&&(t==null?void 0:t.iStack)===void 0?(d=o.reduce((y,m)=>Math.max(y,m.iParallel+1),0),f=0):(d=(e=t.iParallel)!==null&&e!==void 0?e:0,f=(i=t.iStack)!==null&&i!==void 0?i:0),o.push({axis:l,iStack:f,iParallel:d}),this.us.Ss(),l}addAxisY(t){var e,i;const{opposite:s,type:n}=hp(t);let a;a=n.type==="linear"?this.sm.d1({dimension:"y",scale1DConstructor:er}):n.type==="linear-highPrecision"?this.sm.d1({dimension:"y",scale1DConstructor:er}).Mi():this.sm.d1({dimension:"y",scale1DConstructor:Eo}).Ai(n.base),a.q(this.ik.y.oi());const o=s?this.Ng:this.Gg,l=new r0(this.Wk,this.bA,this.xm,this.JA,this.KA,this.us.es,a,this.ik.x,(u=()=>l._g(),{...SS,...q4(u)}),this,s?100:0,this.qA,this.Ck,this.qi,this.th,n);var u;let d,f;return(t==null?void 0:t.iParallel)===void 0&&(t==null?void 0:t.iStack)===void 0?(d=o.reduce((y,m)=>Math.max(y,m.iParallel+1),0),f=0):(d=(e=t.iParallel)!==null&&e!==void 0?e:0,f=(i=t.iStack)!==null&&i!==void 0?i:0),o.push({axis:l,iParallel:d,iStack:f}),this.us.Ss(),l}swapAxes(t,e){const i=[this.Og,this.Gg,this.Ng,this.Vg],s=i.find(d=>d.find(f=>f.axis===t)!==void 0),n=i.find(d=>d.find(f=>f.axis===e)!==void 0);if(!s||!n)return this;if(s!==n)throw new Error("LightningChart JS ChartXY.swapAxes does not support swapping Axes that are on different sides.");const a=s.find(d=>d.axis===t),o=s.find(d=>d.axis===e);if(!a||!o)return this;const l=a.iParallel,u=a.iStack;return a.iParallel=o.iParallel,a.iStack=o.iStack,o.iParallel=l,o.iStack=u,this.us.Ss(),this}dispose(){return this.Pm.dispose(),this.Gk.W(),this.Rb.W(),this.bA.W(),this.Wk.forEach(t=>t.W()),this.KA.W(),this.JA.W(),this.jy.W(),this.VC().forEach(t=>t.dispose()),_l(this.ik),this.Og.slice().forEach(t=>t.axis.dispose()),this.Gg.slice().forEach(t=>t.axis.dispose()),this.Ng.slice().forEach(t=>t.axis.dispose()),this.Vg.slice().forEach(t=>t.axis.dispose()),this.xS.slice().forEach(t=>{t.dispose()}),super.dispose()}getDefaultAxisX(){var t;return(t=[...this.Og,...this.Vg].find(e=>e.axis.getVisible()))===null||t===void 0?void 0:t.axis}get axisX(){return this.getDefaultAxisX()}get xAxis(){return this.getDefaultAxisX()}getDefaultAxisY(){var t;return(t=[...this.Gg,...this.Ng].find(e=>e.axis.getVisible()))===null||t===void 0?void 0:t.axis}get axisY(){return this.getDefaultAxisY()}get yAxis(){return this.getDefaultAxisY()}getDefaultAxes(){return[this.getDefaultAxisX(),this.getDefaultAxisY()]}getAxes(...t){const e=t&&t.length>0?new Set(t):Z4;return Jf(Array.from(e).map(i=>{switch(i){default:case jn.Top:return this.Vg.map(s=>s.axis);case jn.Bottom:return this.Og.map(s=>s.axis);case jn.Left:return this.Gg.map(s=>s.axis);case jn.Right:return this.Ng.map(s=>s.axis)}}))}Hk(t){let e;return this.forEachAxisX(i=>{e=t===i?"x":e}),this.forEachAxisY(i=>{e=t===i?"y":e}),e}forEachAxisX(t){this.Og.forEach((e,i,s)=>t(e.axis,i,s.map(n=>n.axis))),this.Vg.forEach((e,i,s)=>t(e.axis,i,s.map(n=>n.axis)))}forEachAxisY(t){this.Gg.forEach((e,i,s)=>t(e.axis,i,s.map(n=>n.axis))),this.Ng.forEach((e,i,s)=>t(e.axis,i,s.map(n=>n.axis)))}setTitlePosition(t){return this.xk=t,this.us.Ss(),this}getTitlePosition(){return this.xk}$k(t,e,i,s){const n=this.xk||Vf;let a,o=fl(Vm(n),this.bm);this.getTitleFillStyle()===Vt||this.getTitle().length===0?(a={x:0,y:0},o={left:0,top:0,right:0,bottom:0}):a=this._m.Ps().jc();const l=Math.abs(s)+this.ya.bottom+this.Xt.bottom,u=Math.abs(i)+this.ya.top+this.Xt.top,d={left:Math.abs(t)+this.ya.left+this.Xt.left,right:Math.abs(e)+this.ya.right+this.Xt.right,top:u,bottom:l},f=this.uiScale.Wi(),{horizontalAlignment:y,verticalAlignment:m,position:p,marginsWithTitle:x}=e2(n,f,d,a,o,this.ya);return this._m.Fe(p).Da(y).La(m),x}Te(t){super.Te(t);for(const E of this.xS)E.oS();for(const E of this.xS)E.Te();const e=this.Gg.map(E=>E.axis.Mr().Ps()),i=this.Og.map(E=>E.axis.Mr().Ps()),s=this.Vg.map(E=>E.axis.Mr().Ps()),n=this.Ng.map(E=>E.axis.Mr().Ps());let a=!1;this.forEachAxis(E=>{(E.kr()||E.Tr())&&(a=!0)});const o=this.Tk||this.Fk||!this.ak&&a;ls.Im(this,this.FS.getIsUnderMouse(),o,this.xS,E=>ls.Hc(this,E,this.xS),(E,V)=>E.Hc(V,!0));const l=zf(this.Gg,e),u=zf(this.Og,i),d=zf(this.Vg,s),f=zf(this.Ng,n),y=this.$k(l.thicknessTotal,f.thicknessTotal,d.thicknessTotal,u.thicknessTotal),m=this.ik.x.getCellSize()-(y.left+y.right),p=this.ik.y.getCellSize()-(y.bottom+y.top),x=[y.left,y.right],b=[y.bottom,y.top];this.ik.x.J(0,m),this.ik.y.J(0,p),this.ik.x.si(x),this.ik.y.si(b);const v=(E,V,F,L)=>{let z=0;E.groups.forEach(B=>{let A=0;const T=B.stacks.reduce((_,X)=>Math.max(_,X.kg),0),w=B.stacks.reduce((_,X)=>_+(X.axis.getVisible()?X.axis.iA+X.axis.sA:0),0),C=B.stacks.reduce((_,X)=>_+(X.axis.getVisible()&&"pixels"in X.axis.zd?X.axis.zd.pixels:0),0),k=V-w-C;B.stacks.forEach(_=>{const X=_.axis,N=X.getVisible(),U=Math.max(V-A,0),O=Math.min(N?"pixels"in X.zd?X.zd.pixels:X.zd.relative/B.sumRelativeSize*k:0,U),W=N?F[0]+A+X.iA:0,I=N?F[1]+(V-A)-O-X.iA:0;X.dt.si([W,I]),X.Te({kg:T,Tg:_.Tg,Pg:O,Xk:A,zg:T+_.Tg,Bg:z}),N&&(A+=O+X.iA+X.sA)}),z+=L*B.thicknessMax})};v(l,p,b,-1),v(f,p,b,1),v(u,m,x,-1),v(d,m,x,1),this.Yk={left:l.thicknessTotal,top:d.thicknessTotal,right:f.thicknessTotal,bottom:u.thicknessTotal},this.FS.Fe(Y(0,0)).q(Y(m,p)),this.IS.Fe(Y(0,0)).q(Y(m,p));const R=gR(this.ik.x.ei(),this.ik.y.ei(),this.ik.x.ri(),this.ik.y.ri());this.Rb.qv(R),this.JA.qv(R),this.KA.qv(R),this.Zg&&this.Zg(),this.Og.forEach(E=>E.axis.Wg()),this.Vg.forEach(E=>E.axis.Wg()),this.Gg.forEach(E=>E.axis.Wg()),this.Ng.forEach(E=>E.axis.Wg()),super.pm();for(const E of this.xS)E.dp()}j(){for(let t=0;t<this.Og.length;t+=1)this.Og[t].axis.j();for(let t=0;t<this.Vg.length;t+=1)this.Vg[t].axis.j();for(let t=0;t<this.Gg.length;t+=1)this.Gg[t].axis.j();for(let t=0;t<this.Ng.length;t+=1)this.Ng[t].axis.j();return super.j()}kk(t){if(this.sk.has(t))return this.sk.get(t);throw new Error("No attach handler for axis Make sure that passed axes definitely belong to this chart and that they haven't been disposed of.")}addLineSeries(t){const e=(t==null?void 0:t.axisX)||(t==null?void 0:t.xAxis)||this.getDefaultAxisX(),i=(t==null?void 0:t.axisY)||(t==null?void 0:t.yAxis)||this.getDefaultAxisY();Gr(e,i);let s=Ls.freeform;t&&t.dataPattern&&(s=t.dataPattern.pattern==="ProgressiveX"?Ls.horizontalProgressive:t.dataPattern.pattern==="ProgressiveY"?Ls.verticalProgressive:t.dataPattern.pattern==="RegressiveX"?Ls.horizontalRegressive:t.dataPattern.pattern==="RegressiveY"?Ls.verticalRegressive:Ls.freeform);const n=new fc(this,this._S,this.Rb,e,i,this.kk(e),this.kk(i),this.nm,s,this.qi,this.us.es,Tf(t&&t.dataPattern),(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length,t);return this.PS(n),n}addPointLineAreaSeries(t){const e=(t==null?void 0:t.axisX)||(t==null?void 0:t.xAxis)||this.getDefaultAxisX(),i=(t==null?void 0:t.axisY)||(t==null?void 0:t.yAxis)||this.getDefaultAxisY();Gr(e,i);const s=new YE(this,this._S,this.Rb,e,i,this.kk(e),this.kk(i),this.nm,this.qi,this.us.es,(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length,t);return this.PS(s),s}addPointSeries(t){const e=(t==null?void 0:t.axisX)||(t==null?void 0:t.xAxis)||this.getDefaultAxisX(),i=(t==null?void 0:t.axisY)||(t==null?void 0:t.yAxis)||this.getDefaultAxisY();Gr(e,i);const s=t&&t.pointShape&&Object.values(qe).includes(t.pointShape)?typeof t.pointShape=="string"?qe[t.pointShape]:t.pointShape:qe.Square,n=new kS(this,this._S,this.Rb,e,i,this.kk(e),this.kk(i),this.nm,s,this.qi,this.us.es,(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length,t);return this.PS(n),n}addPointLineSeries(t){const e=(t==null?void 0:t.axisX)||(t==null?void 0:t.xAxis)||this.getDefaultAxisX(),i=(t==null?void 0:t.axisY)||(t==null?void 0:t.yAxis)||this.getDefaultAxisY();Gr(e,i);const s=t&&t.pointShape&&Object.values(qe).includes(t.pointShape)?typeof t.pointShape=="string"?qe[t.pointShape]:t.pointShape:qe.Square;let n=Ls.freeform;t&&t.dataPattern&&(n=t.dataPattern.pattern==="ProgressiveX"?Ls.horizontalProgressive:t.dataPattern.pattern==="ProgressiveY"?Ls.verticalProgressive:t.dataPattern.pattern==="RegressiveX"?Ls.horizontalRegressive:t.dataPattern.pattern==="RegressiveY"?Ls.verticalRegressive:Ls.freeform);const a=new td(this,this._S,this.Rb,e,i,this.kk(e),this.kk(i),this.nm,n,s,this.qi,this.us.es,Tf(t&&t.dataPattern),(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length,t);return this.PS(a),a}addStepSeries(t){const e=(t==null?void 0:t.axisX)||(t==null?void 0:t.xAxis)||this.getDefaultAxisX(),i=(t==null?void 0:t.axisY)||(t==null?void 0:t.yAxis)||this.getDefaultAxisY();Gr(e,i);const s=t&&t.pointShape?t.pointShape:qe.Square,n=t&&t.mode?t.mode:ba.before,a=new OE(this,this._S,this.Rb,e,i,this.kk(e),this.kk(i),this.nm,s,n,this.qi,this.us.es,Tf(t&&t.dataPattern),(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length,t);return this.PS(a),a}addSplineSeries(t){const e=(t==null?void 0:t.axisX)||(t==null?void 0:t.xAxis)||this.getDefaultAxisX(),i=(t==null?void 0:t.axisY)||(t==null?void 0:t.yAxis)||this.getDefaultAxisY();Gr(e,i);const s=t&&t.pointShape?t.pointShape:qe.Square;let n=Ls.freeform;t&&t.dataPattern&&(n=t.dataPattern.pattern==="ProgressiveX"?Ls.horizontalProgressive:t.dataPattern.pattern==="RegressiveX"?Ls.horizontalRegressive:Ls.freeform);const a=new PE(this,this._S,this.Rb,e,i,this.kk(e),this.kk(i),this.nm,n,s,this.qi,this.us.es,Tf(t&&t.dataPattern),(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length,t);return this.PS(a),a}addRectangleSeries(t){const e=(t==null?void 0:t.axisX)||(t==null?void 0:t.xAxis)||this.getDefaultAxisX(),i=(t==null?void 0:t.axisY)||(t==null?void 0:t.yAxis)||this.getDefaultAxisY();Gr(e,i);const s=new k4(this,this._S,this.Rb,e,i,this.kk(e),this.kk(i),this.nm,this.qi,this.us.es,(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length);return this.PS(s),s}addPolygonSeries(t){const e=(t==null?void 0:t.axisX)||(t==null?void 0:t.xAxis)||this.getDefaultAxisX(),i=(t==null?void 0:t.axisY)||(t==null?void 0:t.yAxis)||this.getDefaultAxisY(),s=new C4(this,this._S,this.Rb,e,i,this.kk(e),this.kk(i),this.nm,this.qi,this.us.es,(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length);return this.PS(s),s}addSegmentSeries(t){const e=(t==null?void 0:t.axisX)||(t==null?void 0:t.xAxis)||this.getDefaultAxisX(),i=(t==null?void 0:t.axisY)||(t==null?void 0:t.yAxis)||this.getDefaultAxisY();Gr(e,i);const s=new D4(this,this._S,this.Rb,e,i,this.kk(e),this.kk(i),this.nm,this.qi,this.us.es,(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length);return this.PS(s),s}addEllipseSeries(t){const e=(t==null?void 0:t.axisX)||(t==null?void 0:t.xAxis)||this.getDefaultAxisX(),i=(t==null?void 0:t.axisY)||(t==null?void 0:t.yAxis)||this.getDefaultAxisY();Gr(e,i);const s=new w4(this,this._S,this.Rb,e,i,this.kk(e),this.kk(i),this.nm,this.qi,this.us.es,(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length);return this.PS(s),s}addBoxSeries(t){const e=(t==null?void 0:t.axisX)||(t==null?void 0:t.xAxis)||this.getDefaultAxisX(),i=(t==null?void 0:t.axisY)||(t==null?void 0:t.yAxis)||this.getDefaultAxisY();Gr(e,i);const s=t&&t.dimensionStrategy?t.dimensionStrategy:n0,n=new T4(this,this._S,this.Rb,e,i,this.kk(e),this.kk(i),this.nm,s,this.qi,this.us.es,(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length);return this.PS(n),n}addHeatmapGridSeries(t){const e=t.xAxis?t.xAxis:this.getDefaultAxisX(),i=t.yAxis?t.yAxis:this.getDefaultAxisY();let s;if(t.heatmapDataType!==void 0&&t.heatmapDataType!=="intensity")throw new Error(`Unsupported Heatmap Grid heatmapDataType: '${t.heatmapDataType}'`);return s=new F4(this,this._S,this.Rb,e,i,this.kk(e),this.kk(i),this.nm,t,this.qi,this.us.es,(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length),this.PS(s),s}addHeatmapScrollingGridSeries(t){const e=t.xAxis?t.xAxis:this.getDefaultAxisX(),i=t.yAxis?t.yAxis:this.getDefaultAxisY();let s;if(t.heatmapDataType!==void 0&&t.heatmapDataType!=="intensity")throw new Error(`Unsupported Heatmap Grid heatmapDataType: '${t.heatmapDataType}'`);return s=new z4(this,this._S,this.Rb,e,i,this.kk(e),this.kk(i),this.nm,t,this.qi,this.us.es,(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length),this.PS(s),s}addOHLCSeries(t){const e=(t==null?void 0:t.axisX)||(t==null?void 0:t.xAxis)||this.getDefaultAxisX(),i=(t==null?void 0:t.axisY)||(t==null?void 0:t.yAxis)||this.getDefaultAxisY();Gr(e,i);const s=new(t&&t.type?t.type:W4.Candlesticks)(this,this._S,this.Rb,e,i,this.kk(e),this.kk(i),this.nm,this.qi,this.us.es);return this.PS(s),s}addOnScreenMenu(t,e){return new j4(this.cA,t,this,e)}setMouseBackgroundStyle(t=ae.Default){return this.yk=t,this}setMouseZoomStyle(t=ae.ZoomIn){return this.Sk=t,this}setMouseFitStyle(t=ae.Default){return this.vk=t,this}setMousePanStyle(t=ae.Move){return this.pk=t,this}setMouseInteractions(t){return this.setMouseInteractionRectangleZoom(t).setMouseInteractionRectangleFit(t).setMouseInteractionWheelZoom(t).setMouseInteractionPan(t)}setMouseInteractionRectangleZoom(t){return this.ek=t,this}getMouseInteractionRectangleZoom(){return this.ek}setMouseInteractionRectangleFit(t){return this.hk=t,this}getMouseInteractionRectangleFit(){return this.hk}setMouseInteractionPan(t){return this.nk=t,this}getMouseInteractionPan(){return this.nk}setMouseInteractionWheelZoom(t){return this.rk=t,this}getMouseInteractionWheelZoom(){return this.rk}setZoomingRectangleFillStyle(t){return this.fk=typeof t=="function"?t(this.fk):t,this.us.Ss(),this}getZoomingRectangleFillStyle(){return this.fk}setZoomingRectangleStrokeStyle(t){return this.Ak=typeof t=="function"?t(this.Ak):t,this.us.Ss(),this}getZoomingRectangleStrokeStyle(){return this.Ak}setFittingRectangleFillStyle(t){return this.gk=typeof t=="function"?t(this.gk):t,this.us.Ss(),this}getFittingRectangleFillStyle(){return this.gk}setFittingRectangleStrokeStyle(t){return this.mk=typeof t=="function"?t(this.mk):t,this.us.Ss(),this}getFittingRectangleStrokeStyle(){return this.mk}addLegendBox(t,e){const i=super.addLegendBox(t,e);if(e===void 0||e===this.uiScale)if(t===void 0||t.getAlignment()==="vertical")i.setOrigin(wl.RightCenter).setPosition({x:this.uiScale.x.ut(this.uiScale.x.hi()-this.ya.right),y:El(this.ik.y.ut(this.ik.y.ei()+this.ik.y.ri()/2),this.ik.y,this.uiScale.y)});else{const s=this.xk||Vf,n=e2(s,this.uiScale.Wi(),this.ya,this.getTitleFillStyle()===Vt||this.getTitle().length===0?{x:0,y:0}:this._m.Ps().jc(),fl(Vm(s),this.bm),this.ya).marginsWithTitle.top;i.setOrigin(wl.RightTop).setPosition(gt({x:this.pixelScale.x.getInnerEnd()-this.ya.right,y:this.pixelScale.y.getInnerEnd()-n},this.pixelScale,this.uiScale))}return i}Ik(t,e){this.forEachAxis(Ff);const i=gt(this.engine.clientLocation2Engine(e.x,e.y),this.xm.us.dt,this.ik);this.uk.Fe(i).q(Y(0,0))}Pk(t,e,i){const s=gt(this.engine.clientLocation2Engine(e.x,e.y),this.xm.us.dt,this.ik),n=gt(this.engine.clientLocation2Engine(i.x,i.y),this.xm.us.dt,this.ik),a=$n(n.x,this.ik.x.getInnerStart(),this.ik.x.getInnerEnd())&&$n(n.y,this.ik.y.getInnerStart(),this.ik.y.getInnerEnd()),o=Y(Math.min(s.x,n.x),Math.min(s.y,n.y)),l=Y(Math.max(s.x,n.x),Math.max(s.y,n.y));this.uk.Fe(o).q(Se(l,o));const u=Math.min(l.x-o.x,l.y-o.y)>=10;a&&u&&l.x===s.x&&this.hk?(this.Tk=!0,this.uk.Ce(this.gk).we(this.mk),this.ck.Re(this.mk).Ve(s).ze(n),this.dk.Re(this.mk).Ve(Y(s.x,n.y)).ze(Y(n.x,s.y)),this.bk=this.engine.setMouseStyle(this.vk,this.bk)):a&&u&&(this.ek||this.hk)?(this.Tk=!0,this.uk.Ce(this.fk).we(this.Ak),this.ck.Re(vt),this.dk.Re(vt),this.bk=this.engine.setMouseStyle(this.Sk,this.bk)):(this.Tk=!1,this.uk.we(vt).Ce(Vt),this.ck.Re(vt),this.dk.Re(vt),this.engine.restoreMouseStyle(this.bk)),this.us.Ss()}Bk(t,e,i){if(this.Tk){const s=gt(this.engine.clientLocation2Engine(i.x,i.y),this.xm.us.dt,this.ik),n=$n(s.x,this.ik.x.getInnerStart(),this.ik.x.getInnerEnd())&&$n(s.y,this.ik.y.getInnerStart(),this.ik.y.getInnerEnd()),a=i.x>=e.x||!this.hk?"zoom":"fit",o=this.uk.Fa(),l=_t(o,this.uk.oi()),u=Math.min(this.uk.oi().x,this.uk.oi().y)>=10;n&&u&&a==="zoom"&&this.ek?(this.forEachAxisX(d=>{if(d.getChartInteractionZoomByDrag()){const f=gt(o,this.ik,d.ng).x,y=gt(l,this.ik,d.ng).x;d.St(f,y,!0,!0,"interactionSetInterval")}}),this.forEachAxisY(d=>{if(d.getChartInteractionZoomByDrag()){const f=gt(o,this.ik,d.ng).y,y=gt(l,this.ik,d.ng).y;d.St(f,y,!0,!0,"interactionSetInterval")}})):n&&u&&a==="fit"&&this.hk&&this.forEachAxis(Q4)}this.uk.we(vt).Ce(Vt),this.ck.Re(vt),this.dk.Re(vt),this.us.Ss()}pan(t){this.forEachAxisX(e=>{e.setStopped(!0).pan(t.x)}),this.forEachAxisY(e=>{e.setStopped(!0).pan(t.y)})}Dk(t){this.forEachAxisX(e=>{e.getChartInteractionPanByDrag()&&e.setStopped(!0).pan(t.x)}),this.forEachAxisY(e=>{e.getChartInteractionPanByDrag()&&e.setStopped(!0).pan(t.y)})}zoom(t,e){this.forEachAxis(Ff),this.forEachAxisX(i=>{i.zoom(i.dt.ut(t.x),e.x)}),this.forEachAxisY(i=>{i.zoom(i.dt.ut(t.y),e.y)})}Lk(t,e){this.forEachAxisX(i=>{i.getChartInteractionZoomByWheel()&&(Ff(i),i.zoom(i.dt.ut(t.x),e.x))}),this.forEachAxisY(i=>{i.getChartInteractionZoomByWheel()&&(Ff(i),i.zoom(i.dt.ut(t.y),e.y))})}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.forEachAxis(e=>e.setAnimationsEnabled(t)),this}Zd(){const t=[];return this.forEachAxis(e=>e.vg(i=>t.push(i))),super.Zd().concat(t)}VC(){return this.lk}me(){return this.Cm(this.Rb)}setAutoCursorEnabledDuringAxisAnimation(t){return this.ak=t,this}getAutoCursorEnabledDuringAxisAnimation(){return this.ak}forEachAxis(t){return this.forEachAxisX(t),this.forEachAxisY(t),this}translateCoordinate(t,e,i){if(i){const s=t,n=e,a=ml(n)?n:Dn(n)?this.pixelScale:void 0;if(a&&gl(i)){const o=gt(s,a,this.engine.scale);return this.us.Do({engineX:o.x,engineY:o.y})}if(a&&Dn(i))return gt(s,a,this.pixelScale);if(a&&ml(i))return gt(s,a,i)}else{const s=t;if(Dn(e)){const n=this.us.Po(s);return gt({x:n.engineX,y:n.engineY},this.engine.scale,this.pixelScale)}if(ml(e)){const n=e,a=this.us.Po(s);return gt({x:a.engineX,y:a.engineY},this.engine.scale,n)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}}(function(r){r.CenterTop="center-top",r.RightTop="right-top",r.LeftTop="left-top",r.CenterBottom="center-bottom",r.RightBottom="right-bottom",r.LeftBottom="left-bottom",r.SeriesCenterTop="series-center-top",r.SeriesRightTop="series-right-top",r.SeriesLeftTop="series-left-top",r.SeriesCenterBottom="series-center-bottom",r.SeriesRightBottom="series-right-bottom",r.SeriesLeftBottom="series-left-bottom"})(cp||(cp={}));const Vf=cp.CenterTop,Vm=r=>{switch(r){case"center-top":case"series-center-bottom":return{left:0,right:0,top:0,bottom:5};case"left-top":return{left:20,right:0,top:0,bottom:5};case"right-top":return{left:0,right:20,top:0,bottom:5};case"center-bottom":return{left:0,right:0,top:0,bottom:0};case"left-bottom":return{left:20,right:0,top:0,bottom:0};case"right-bottom":return{left:0,right:20,top:0,bottom:0};case"series-center-top":return{left:0,right:0,top:5,bottom:0};case"series-left-top":return{left:5,right:0,top:5,bottom:0};case"series-right-top":return{left:0,right:5,top:5,bottom:0};case"series-left-bottom":return{left:5,right:0,top:0,bottom:5};case"series-right-bottom":return{left:0,right:5,top:0,bottom:5}}return Xl(0,`Unexpected ChartXY title position selection ${r}`)},e2=(r,t,e,i,s,n)=>{i.x,s.left,s.right;const a=i.y+s.bottom+s.top,o=(s.left-s.right)*t.x,l=(s.bottom-s.top)*t.y;switch(r){case"center-top":return{horizontalAlignment:0,verticalAlignment:1,position:{x:50+o,y:100-(n.top+s.top)*t.y},marginsWithTitle:{...e,top:e.top+a}};case"left-top":return{horizontalAlignment:-1,verticalAlignment:1,position:{x:o,y:100-(n.top-s.top)*t.y},marginsWithTitle:{...e,top:e.top+a}};case"right-top":return{horizontalAlignment:1,verticalAlignment:1,position:{x:100+o,y:100-(n.top-s.top)*t.y},marginsWithTitle:{...e,top:e.top+a}};case"center-bottom":return{horizontalAlignment:0,verticalAlignment:-1,position:{x:50+o,y:(n.bottom+s.bottom)*t.y},marginsWithTitle:{...e,bottom:e.bottom+a}};case"left-bottom":return{horizontalAlignment:-1,verticalAlignment:-1,position:{x:o,y:(n.bottom+s.bottom)*t.y},marginsWithTitle:{...e,bottom:e.bottom+a}};case"right-bottom":return{horizontalAlignment:1,verticalAlignment:-1,position:{x:100+o,y:(n.bottom+s.bottom)*t.y},marginsWithTitle:{...e,bottom:e.bottom+a}};case"series-center-top":return{horizontalAlignment:0,verticalAlignment:1,position:{x:50+o,y:100-e.top*t.y+l},marginsWithTitle:e};case"series-left-top":return{horizontalAlignment:-1,verticalAlignment:1,position:{x:e.left*t.x+o,y:100-e.top*t.y+l},marginsWithTitle:e};case"series-right-top":return{horizontalAlignment:1,verticalAlignment:1,position:{x:100-e.right*t.x+o,y:100-e.top*t.y+l},marginsWithTitle:e};case"series-center-bottom":return{horizontalAlignment:0,verticalAlignment:-1,position:{x:50,y:e.bottom*t.y+l},marginsWithTitle:e};case"series-left-bottom":return{horizontalAlignment:-1,verticalAlignment:-1,position:{x:e.left*t.x+o,y:e.bottom*t.y+l},marginsWithTitle:e};case"series-right-bottom":return{horizontalAlignment:1,verticalAlignment:-1,position:{x:100-e.right*t.x+o,y:e.bottom*t.y+l},marginsWithTitle:e}}return Xl(0,`Unexpected ChartXY title position selection ${r}`)},zf=(r,t)=>{const e=[];r.forEach((s,n)=>{const a=t[n],o=e.find(l=>l.iParallel===s.iParallel);o?(o.stacks.push({...s,...a}),o.stacks.sort((l,u)=>l.iStack-u.iStack)):e.push({iParallel:s.iParallel,stacks:[{...s,...a}]})});const i=e.map(s=>{const n=s.stacks.reduce((u,d)=>Math.max(u,d.kg),0),a=s.stacks.reduce((u,d)=>Math.max(u,d.Tg),0),o=s.stacks.reduce((u,d)=>Math.max(u,d.Vd),0),l=s.stacks.reduce((u,d)=>u+(d.axis.getVisible()&&"relative"in d.axis.zd?d.axis.zd.relative:0),0);return{...s,ticksSizeMax:n,titleSizeMax:a,sumRelativeSize:l,thicknessMax:o}});return i.sort((s,n)=>s.iParallel-n.iParallel),{groups:i,thicknessTotal:i.reduce((s,n)=>s+n.thicknessMax,0)}};class HE{constructor(t,e,i,s,n,a,o){this.coordsRelative="relative",this.coordsClient="client",this.D=new Ii,this.jk=[],this.Zk=new Map,this.xS=new Map,this.Qk=(x,b,v)=>{this.xS.size!==0&&[...this.xS.values()].find(({series:R})=>R.getVisible()===!0)!==void 0||this.Jk.St(b,v,!1,!1,"zoomBandChart"),this.Kk.us.Ss()},e.us.Nn(Ct.ff),this.cA=t,this.qk=(a==null?void 0:a.orientation)||"x",this.tT=(a==null?void 0:a.useSharedValueAxis)!==void 0&&a.useSharedValueAxis,this.iT=s,this.Wu=this.qk==="x"?n0:SS;const l={...a,defaultAxisX:this.Wu.getWidth({x:a==null?void 0:a.defaultAxis,y:void 0}),defaultAxisY:this.Wu.getHeight({x:a==null?void 0:a.defaultAxis,y:void 0})};this.Kk=new DS(t,e,i,re,n,l,o).setTitle("Zoom Band Chart").setMouseInteractions(!1).setAutoCursorMode($e.disabled),this.engine=this.Kk.engine;const u=this.Kk.getDefaultAxisX().setMouseInteractions(!1),d=this.Kk.getDefaultAxisY().setMouseInteractions(!1);this.Jk=this.Wu.getWidth({x:u,y:d}).setScrollStrategy(Zr.fitting).setAnimationScroll(!1).setStrokeStyle(vt).setTickStrategy(Cl.Empty),a!=null&&a.useSharedValueAxis?this.sT=this.Wu.getHeight({x:u,y:d}):this.Wu.getHeight({x:u,y:d}).dispose();const f=this.getTheme().zoomBandChartDefocusOverlayFillStyle||new it({color:this.getTheme().isDark?P(0,0,0,180):P(255,255,255,180)});this.eT=[this.Kk.bA.ke(this.Jk.ng).Ce(f).we(vt),this.Kk.bA.ke(this.Jk.ng).Ce(f).we(vt)];const y=this.Kk.bA.Lg(this.Jk.ng).Re(this.getTheme().zoomBandChartSplitterStrokeStyle||this.getTheme().chartXYSeriesBackgroundStrokeStyle);this.hT={collection:y,members:new Array(5).fill(0).map(x=>y.zr())};const m=this.getTheme(),p=typeof m.zoomBandChartKnobFillStyle=="function"?m.zoomBandChartKnobFillStyle(this.cA.$s):m.zoomBandChartKnobFillStyle||Vt;this.rT=[this.Kk.bA.ke(this.Kk.pixelScale).Ce(p).we(vt),this.Kk.bA.ke(this.Kk.pixelScale).Ce(p).we(vt)],this.nT=this.getTheme().zoomBandChartKnobSize||{x:0,y:0},this.oT()}add(t){var e,i,s,n,a;const o=this.jk.map(E=>E.axis),l=this.qk==="x"?t.axisX:t.axisY;if(!o.includes(l)){const E=l.onIntervalChange(this.Qk);this.jk.push({axis:l,deattach:()=>{l.offIntervalChange(E)}}),this.Jk.$h(l.Hh()),this.aT&&this.aT.remove(),this.aT=A3(...this.jk.map(V=>V.axis))}const u=this.Wu.getHeight({x:t.axisX,y:t.axisY});let d;if(this.tT)d=this.sT;else{const E=this.Zk.get(u);E?d=E:(d=this.Wu.getHeight({x:this.Kk.addAxisX.bind(this.Kk),y:this.Kk.addAxisY.bind(this.Kk)})(),this.lT(d)),this.Zk.set(u,d)}const f=this.Wu.getWidth({x:this.Jk,y:d}),y=this.Wu.getHeight({x:this.Jk,y:d});let m;const p=[],x=(E,V)=>{const F=A=>{if(A.length!==0)if("x"in A[0]){const T=A;V.add(T)}else{const T=A,w=[];for(let C=0;C<T.length;C+=1){const k=T[C];w.push({x:k[0],y:k[4]})}V.add(w)}},L=E.r_();F(L);const z=E.n_((A,T)=>F(T));p.push(()=>E.o_(z));const B=E.a_(()=>V.clear());p.push(()=>{E.l_(B)})};if(t instanceof YE)m=this.Kk.addPointLineAreaSeries({...t.Un,xAxis:f,yAxis:y}).setStrokeStyle(t.getStrokeStyle()).setAreaFillStyle(t.getAreaFillStyle()).setPointFillStyle(t.getPointFillStyle()).setCurvePreprocessing(t.getCurvePreprocessing()),m.setDataSet(t.tk());else if(t instanceof fc||t instanceof GE){const E=this.Kk.addLineSeries({xAxis:f,yAxis:y,dataPattern:t instanceof fc?(e=t.Un)===null||e===void 0?void 0:e.dataPattern:void 0});if(t instanceof fc)E.setStrokeStyle(t.getStrokeStyle());else{const V=K4(t);V&&E.setStrokeStyle(V)}x(t,E),m=E}else if(t instanceof CS){const E=this.Kk.addAreaSeries({xAxis:f,yAxis:y,baseline:t.Mw}).setFillStyle(t.getFillStyle()).setStrokeStyle(t.getStrokeStyle());x(t,E),m=E}else if(t instanceof kS){const E=this.Kk.addPointSeries({xAxis:f,yAxis:y,pointShape:(i=t.Un)===null||i===void 0?void 0:i.pointShape}).setPointFillStyle(t.getPointFillStyle()).setPointSize(t.getPointSize()).setPointRotation(t.getPointRotation());x(t,E),m=E}else if(t instanceof OE){const E=this.Kk.addStepSeries({xAxis:f,yAxis:y,pointShape:(s=t.Un)===null||s===void 0?void 0:s.pointShape,mode:t.$w}).setStrokeStyle(t.getStrokeStyle()).setPointFillStyle(t.getPointFillStyle()).setPointSize(t.getPointSize()).setPointRotation(t.getPointRotation());x(t,E),m=E}else if(t instanceof PE){const E=this.Kk.addSplineSeries({xAxis:f,yAxis:y,pointShape:(n=t.Un)===null||n===void 0?void 0:n.pointShape}).setStrokeStyle(t.getStrokeStyle()).setPointFillStyle(t.getPointFillStyle()).setPointSize(t.getPointSize()).setPointRotation(t.getPointRotation());x(t,E),m=E}else if(t instanceof td){const E=this.Kk.addSplineSeries({xAxis:f,yAxis:y,pointShape:(a=t.Un)===null||a===void 0?void 0:a.pointShape}).setStrokeStyle(t.getStrokeStyle()).setPointFillStyle(t.getPointFillStyle()).setPointSize(t.getPointSize()).setPointRotation(t.getPointRotation());x(t,E),m=E}else if(t instanceof BE){const E=this.Kk.addAreaRangeSeries({xAxis:f,yAxis:y}).setLowFillStyle(t.getLowFillStyle()).setHighFillStyle(t.getHighFillStyle()).setLowStrokeStyle(t.getLowStrokeStyle()).setHighStrokeStyle(t.getHighStrokeStyle()).add(t.r_()),V=t.n_((L,z)=>E.add(z));p.push(()=>t.o_(V)),m=E;const F=t.a_(()=>E.clear());p.push(()=>{t.l_(F)})}else{if(!(t instanceof NE))throw new Error("LightningChart JS Zoom Band Chart unsupported series type");{const E=this.Kk.addHeatmapGridSeries({xAxis:f,yAxis:y,...t.F_}),V=()=>{E.setWireframeStyle(t.getWireframeStyle()).setIntensityInterpolation(t.getIntensityInterpolation()).setFillStyle(t.getFillStyle())};V(),m=E,t.D_(m);const F=t.R_((B,A)=>E.invalidateIntensityValues(A)),L=t.B_(V);p.push(()=>{t.E_(F),t.L_(L)});const z=t.a_(()=>E.clear());p.push(()=>{t.l_(z)})}}m.setMouseInteractions(!1);const b=t.onVisibleStateChanged((E,V)=>{m.setVisible(V)});p.push(()=>{t.offVisibleStateChanged(b)});const v=t.onHighlight((E,V)=>m.setHighlight(V));p.push(()=>{t.offHighlight(v)});const R=t.onDispose(()=>{this.disposeSeries(t)});return p.push(()=>{t.offDispose(R)}),this.xS.set(t,{series:m,clearReferences:()=>p.forEach(E=>E())}),m}disposeSeries(t){const e=this.xS.get(t);if(e){const{clearReferences:s}=e;s(),this.xS.delete(t),e.series.dispose();const n=this.Wu.getHeight({x:t.axisX,y:t.axisY}),a=this.Zk.get(n);a&&a._g().length===0&&(this.Zk.delete(n),a.dispose())}const i=this.qk==="x"?t.axisX:t.axisY;if(!Array.from(this.xS.keys()).find(s=>i===(this.qk==="x"?s.axisX:s.axisY))){const s=this.jk.findIndex(n=>n.axis===i);this.jk[s].deattach(),this.jk.splice(s,1)}return this}setDefocusOverlayFillStyle(t){return this.eT.forEach(e=>e.Ce(t)),this.Kk.us.Ss(),this}getDefocusOverlayFillStyle(){return this.eT[0].Eh()}setSplitterStrokeStyle(t){return this.hT.collection.Re(t),this.Kk.us.Ss(),this}getSplitterStrokeStyle(){return this.hT.collection.uu()}setKnobFillStyle(t){return this.rT.forEach(e=>e.Ce(t)),this.Kk.us.Ss(),this}getKnobFillStyle(){return this.rT[0].Eh()}setKnobStrokeStyle(t){return this.rT.forEach(e=>e.we(t)),this.Kk.us.Ss(),this}getKnobStrokeStyle(){return this.rT[0].ao()}setKnobSize(t){return this.nT=t,this.Kk.us.Ss(),this}getKnobSize(){return this.nT}getDefaultAxisX(){return this.Kk.getDefaultAxisX()}getDefaultAxisY(){return this.Kk.getDefaultAxisY()}get axisX(){return this.getDefaultAxisX()}get xAxis(){return this.getDefaultAxisX()}get axisY(){return this.getDefaultAxisY()}get yAxis(){return this.getDefaultAxisY()}lT(t){t.setTickStrategy(Cl.Empty).setMouseInteractions(!1).setNibStyle(vt).setStrokeStyle(vt)}oT(){let t;const e=(n,a,o)=>{var l,u;const d=this.qk==="x"?(l=Array.from(this.xS.keys())[0])===null||l===void 0?void 0:l.axisX:(u=Array.from(this.xS.keys())[0])===null||u===void 0?void 0:u.axisY;if(!d)return;const f=d.getInterval(),y=this.Jk.getInterval();Math.abs(this.Jk.dt.ct(n)-this.Jk.dt.ct(a))<10||Math.sign(a-n)!==Math.sign(f.end-f.start)||Math.min(n,a)<Math.min(y.start,y.end)||Math.max(n,a)>Math.max(y.start,y.end)&&Math.max(f.start,f.end)<Math.max(n,a)||d.St(n,a,o,!0,"zoomBandChart")};this.rT.forEach((n,a)=>{n.setMouseEnterEventHandler(()=>{t=this.engine.setMouseStyle(this.Wu.getWidth({x:ae.Horizontal,y:ae.Vertical}),t)}),n.setMouseLeaveEventHandler(()=>{this.engine.restoreMouseStyle(t)});const o=u=>{var d,f;const y=this.qk==="x"?(d=Array.from(this.xS.keys())[0])===null||d===void 0?void 0:d.axisX:(f=Array.from(this.xS.keys())[0])===null||f===void 0?void 0:f.axisY;if(!y)return;const m=this.Wu.getWidth(this.Kk.translateCoordinate(u,this.Kk.coordsAxis)),p=y.getInterval(),x=a===0?m:p.start,b=a===1?m:p.end;e(x,b,!1),At(u)};n.setMouseDragEventHandler((u,d,f,y,m)=>o(d));const l=Is(new wr(void 0,(u,d,f,y,m)=>o(m)));n.setTouchStartEventHandler(l.onTouchStart),n.setTouchMoveEventHandler(l.onTouchMove),n.setTouchEndEventHandler(l.onTouchEnd)}),this.Kk.onSeriesBackgroundMouseEnter(()=>{t=this.engine.setMouseStyle(ae.Move,t)}),this.Kk.onSeriesBackgroundMouseLeave(()=>{this.engine.restoreMouseStyle(t)});const i=(n,a)=>{var o,l;const u=this.qk==="x"?(o=Array.from(this.xS.keys())[0])===null||o===void 0?void 0:o.axisX:(l=Array.from(this.xS.keys())[0])===null||l===void 0?void 0:l.axisY;if(!u)return;const d=u.getInterval(),f=this.Jk.dt.mi(d.start,this.Wu.getWidth(n)),y=this.Jk.dt.mi(d.end,this.Wu.getWidth(n));e(f,y,!1),At(a)};this.Kk.onSeriesBackgroundMouseDrag((n,a,o,l,u)=>i(u,a));const s=Is(new wr(void 0,(n,a,o,l,u)=>i(l,u)));this.Kk.onSeriesBackgroundMouseWheel((n,a)=>{var o,l;const u=this.qk==="x"?(o=Array.from(this.xS.keys())[0])===null||o===void 0?void 0:o.axisX:(l=Array.from(this.xS.keys())[0])===null||l===void 0?void 0:l.axisY;if(!u)return;const d=u.getInterval(),f=this.Jk.getInterval(),y=this.Wu.getWidth(this.Kk.translateCoordinate(a,this.Kk.coordsAxis)),m=this.Jk.dt.ct(d.start),p=this.Jk.dt.ct(d.end),x=this.Jk.dt.ct(y),b=Zt((x-m)/(p-m),0,1),v=.2*Math.abs(p-m)*u.Rf,R=b*v*-Math.sign(a.deltaY),E=(1-b)*v*Math.sign(a.deltaY),V=Zt(this.Jk.dt.mi(d.start,R),f.start,f.end),F=Zt(this.Jk.dt.mi(d.end,E),f.start,f.end);e(V,F,!1),At(a)}),this.Kk.onSeriesBackgroundTouchStart(s.onTouchStart),this.Kk.onSeriesBackgroundTouchMove(s.onTouchMove),this.Kk.onSeriesBackgroundTouchEnd(s.onTouchEnd),this.eT.forEach((n,a)=>{n.setMouseEnterEventHandler(()=>{t=this.engine.setMouseStyle(ae.Point,t)}),n.setMouseLeaveEventHandler(()=>{this.engine.restoreMouseStyle(t)});const o=u=>{var d,f;const y=this.qk==="x"?(d=Array.from(this.xS.keys())[0])===null||d===void 0?void 0:d.axisX:(f=Array.from(this.xS.keys())[0])===null||f===void 0?void 0:f.axisY;if(!y)return;const m=this.Wu.getWidth(this.Kk.translateCoordinate(u,this.Kk.coordsAxis)),p=y.getInterval(),x=this.Jk.getInterval(),b=Zt(m-(p.end-p.start)/2,Math.min(x.start,x.end),Math.max(x.start,x.end)-Math.abs(p.end-p.start)),v=b+(p.end-p.start);e(b,v,!0),At(u)};n.setMouseClickEventHandler((u,d)=>o(d));const l=Is(new class{constructor(u,d=300){this.Ds=!1,this.Bs=[],this.Ls=300,this.Rs=u,this.Ls=d}Is(u,d){const f=nt.performance.now();let y=!1;for(let m=0;m<this.Bs.length;m+=1)f-this.Bs[m].time>=this.Ls?(this.Bs.splice(m,1),m-=1):this.Bs[m].state&&(y=!0);return this.Ds?d.interactions.length===0&&(this.Bs.push({state:!1,time:f}),this.Ds=!1):d.interactions.length===1&&d.type==="pointerdown"&&(this.Bs.push({state:!0,time:f}),y=!0,this.Ds=!0),y}Ps(u,d,f){if(f&&!this.Ds){const y=this.Bs.reduce((m,p)=>(p.state?m.on+=1:m.off+=1,m),{on:0,off:0});y.on>=1&&y.off>=1&&(this.Rs(u,d),this.Bs.length=0)}}}((u,d)=>o(d)));n.setTouchStartEventHandler(l.onTouchStart),n.setTouchMoveEventHandler(l.onTouchMove),n.setTouchEndEventHandler(l.onTouchEnd)})}getSizePixels(){return this.Kk.getSizePixels()}onResize(t){return this.Kk.onResize((e,i,s,n,a)=>t(this,i,s,n,a))}offResize(t){return this.Kk.offResize(t)}Fr(t){this.Kk.Fr(t)}getMinimumSize(){return this.Kk.getMinimumSize()}j(){return this.Kk.j()}Z(){return this.Kk.Z()}Te(t){var e,i,s,n;const a=uo(Array.from(this.xS.keys()).map(b=>b.chart)),o=this.qk==="x"?(e=Array.from(this.xS.keys())[0])===null||e===void 0?void 0:e.axisX:(i=Array.from(this.xS.keys())[0])===null||i===void 0?void 0:i.axisY;if(this.qk==="x"){const b=a.reduce((V,F)=>{let L=0;return F.forEachAxisY(z=>{L+=z.sg===0?z.Ug():0}),Math.max(V,L)},0),v=a.reduce((V,F)=>{let L=0;return F.forEachAxisY(z=>{L+=z.sg===100?z.Ug():0}),Math.max(V,L)},0),R=a.reduce((V,F)=>Math.max(V,F.getPadding().left),0),E=a.reduce((V,F)=>Math.max(V,F.getPadding().right),0);(s=this.getDefaultAxisY())===null||s===void 0||s.setThickness(b),this.Kk.setPadding({left:R+(a.length===0?10:0),right:E+v+(a.length===0?10:0)})}else{const b=a.reduce((V,F)=>{let L=0;return F.forEachAxisX(z=>{L+=z.sg===0?z.Ug():0}),Math.max(V,L)},0),v=a.reduce((V,F)=>{let L=0;return F.forEachAxisX(z=>{L+=z.sg===100?z.Ug():0}),Math.max(V,L)},0),R=a.reduce((V,F)=>Math.max(V,F.getPadding().bottom),0),E=a.reduce((V,F)=>Math.max(V,F.getPadding().top),0);(n=this.getDefaultAxisX())===null||n===void 0||n.setThickness(b),this.Kk.setPadding({bottom:R+(a.length===0?10:0),top:E+v+(a.length===0?10:0)})}this.Kk.Te(t);const l=this.Jk.getInterval().start,u=this.Jk.getInterval().end,d=Zt(o?o.getInterval().start:l,l,u),f=Zt(o?o.getInterval().end:u,l,u),y=this.Wu.getHeight(this.Kk.ik.getInnerIntervalPixels());this.eT[0].Fe(this.Wu.toPoint(l,0)).q(this.Wu.toPoint(d-l,y)),this.eT[1].Fe(this.Wu.toPoint(f,0)).q(this.Wu.toPoint(u-f,y)),this.hT.members[0].Eg(this.Wu.toPoint(l,y),this.Wu.toPoint(d,y)),this.hT.members[1].Eg(this.Wu.toPoint(d,y),this.Wu.toPoint(d,0)),this.hT.members[2].Eg(this.Wu.toPoint(d,0),this.Wu.toPoint(f,0)),this.hT.members[3].Eg(this.Wu.toPoint(f,0),this.Wu.toPoint(f,y)),this.hT.members[4].Eg(this.Wu.toPoint(f,y),this.Wu.toPoint(u,y));const m=gt(this.Wu.toPoint(d,y/2),this.Jk.ng,this.Kk.pixelScale),p=gt(this.Wu.toPoint(f,y/2),this.Jk.ng,this.Kk.pixelScale),x=this.nT;this.rT[0].Fe({x:m.x-x.x/2,y:m.y-x.y/2}).q({x:x.x,y:x.y}).Nh(this.Wu.getWidth({x:0,y:90})),this.rT[1].Fe({x:p.x-x.x/2,y:p.y-x.y/2}).q({x:x.x,y:x.y}).Nh(this.Wu.getWidth({x:0,y:90}))}setSeriesBackgroundFillStyle(t){return this.Kk.setSeriesBackgroundFillStyle(t),this.Kk.us.Ss(),this}getSeriesBackgroundFillStyle(){return this.Kk.getSeriesBackgroundFillStyle()}setSeriesBackgroundStrokeStyle(t){return this.Kk.setSeriesBackgroundStrokeStyle(t),this.Kk.us.Ss(),this}getSeriesBackgroundStrokeStyle(){return this.Kk.getSeriesBackgroundStrokeStyle()}setSeriesBackgroundEffect(t){return this.Kk.setSeriesBackgroundEffect(t),this.Kk.us.Ss(),this}getSeriesBackgroundEffect(){return this.Kk.getSeriesBackgroundEffect()}getTheme(){return this.Kk.getTheme()}setTitle(t){return this.Kk.setTitle(t),this}getTitle(){return this.Kk.getTitle()}setTitleFillStyle(t){return this.Kk.setTitleFillStyle(t),this}getTitleFillStyle(){return this.Kk.getTitleFillStyle()}setTitleFont(t){return this.Kk.setTitleFont(t),this}getTitleFont(){return this.Kk.getTitleFont()}setTitleMargin(t){return this.Kk.setTitleMargin(t),this}getTitleMargin(){return this.Kk.getTitleMargin()}setPadding(t){return this.Kk.setPadding(t),this}getPadding(){return this.Kk.getPadding()}setBackgroundFillStyle(t){return this.Kk.setBackgroundFillStyle(t),this}getBackgroundFillStyle(){return this.Kk.getBackgroundFillStyle()}setBackgroundStrokeStyle(t){return this.Kk.setBackgroundStrokeStyle(t),this}getBackgroundStrokeStyle(){return this.Kk.getBackgroundStrokeStyle()}translateCoordinate(t,e,i){return Y0(t,e,i,this.Kk.pixelScale,this.Kk.us)}addUIElement(t,e){return this.Kk.addUIElement(t,e)}addLegendBox(t,e){return this.Kk.addLegendBox(t,e)}getLegendBoxes(){return this.Kk.getLegendBoxes()}saveToFile(t,e,i){return this.Kk.saveToFile(t,e,i),this}dispose(){return this.Kk.dispose(),this.Zk.clear(),this.xS.clear(),this.iT(this),this}isDisposed(){return this.Kk.isDisposed()}onDispose(t){return this.Kk.onDispose(()=>t(this))}offDispose(t){return this.Kk.offDispose(t)}}const K4=r=>{if("getStrokeStyle"in r)return r.getStrokeStyle();const t=(e=>e instanceof fc||e instanceof CS?e.getStrokeStyle().getFillStyle():e instanceof kS||e instanceof td?e.getPointFillStyle():void 0)(r);return t?new se({thickness:2,fillStyle:t}):void 0};class tV extends Kl{constructor(t,e,i,s,n,a,o){super(t,e,i,s,n,o),this.xs="Point Series",this.Vx=[],this.Ox=!1,this.Hx=3,this.Aa=0,this.Wy=Jc,this.be=te(this.qi.polarPointSeriesFillStyle,a),this.od=new yS({dataPattern:null}),this.Na=t.dd(s).Re(vt).ud(Vt).ld(this.be).fd(qe.Circle).pd(this.Hx).cs(this.getHighlight()).ad(this.od),this.ds(this.Na)}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}setData(t){return this.Vx.length!==0&&this.Ji.us.Nn(Ct.vf),this.Vx=W0(t),this.Ox=!0,this.Bx=Zc(this.Vx),this.ks.Ss(),this}setPointAlignment(t){return this.Na.JC(t),this.Ji.us.Ss(),this}getPointAlignment(){return this.Na.KC()}setPointFillStyle(t){this.be=typeof t=="function"?t(this.be):t;const e=this.be;return this.Na.ld(e),this.ks.Ss(),this}getPointFillStyle(){return this.be}setPointSize(t){return this.Hx=t,this.Na.pd(t),this.ks.Ss(),this}getPointSize(){return this.Hx}setPointShape(t){return this.Na.fd(t),this.Ji.us.Ss(),this}getPointShape(){return this.Na.Ad()}setPointRotation(t){return this.Aa=t,this.Na.gd(t),this.ks.Ss(),this}getPointRotation(){return this.Aa}Kp(){return this.tS&&this.Vx.length>0&&this.getVisible()}Ie(t,e){t.cs(e),this.ks.Ss()}Hc(t,e){const i=gt(t,this.Ji.us.dt,this.scale),s=this.od.Hc(i,!1,this.scale,this.Ji.pixelScale);if(!s)return;const{angle:n,amplitude:a}=wo(s,this.scale);return Us(s,this.scale,this.Wy(new Ui,this,n,a,this.Ji.getAmplitudeAxis().formatValue).Zu(),this,"color"in s&&s.color!==void 0&&ks(this.be)?new it({color:h3(s.color)}):this.be)}solveNearestFromScreen(t){return this.Hc(ss(t,this.Ji.us),!1)}Te(){if(this.Ox||this.scale.Yx()){const t=To(this.Vx,this.scale),e=Ze(t);this.od.clear().add(t),this.Na.Yo(e),this.Ox=!1,this.Na.Ps()}}attach(t,e=!0,i=!1){return super.attach(t,e,i),ii(t,this.qi,i,{fill:this.be}),this}Cs(){return this.bs||this.getPointShape()}}class eV{constructor(t,e,i,s){this.D=new Ii,this.uT=!1,this.Ji=t,this.cT=e,this.xS=i,this.Na=s}setGeometry(t){return this.dT=t,this.uT=!0,this.Ji.us.Ss(),this}getGeometry(){return this.dT}setMouseInteractions(t){return this.Na.setMouseInteractions(t),this}dispose(){return this.Na.dispose(),this.cT(this),this.D.emit("dispose",this),this}onDispose(t){return this.D.on("dispose",t)}offDispose(t){return this.D.off(t,"dispose")}setVisible(t){const e=this.Na.getVisible()!==t;return this.Na.setVisible(t),e&&this.D.emit("visibleStateChanged",this,t),this.Ji.us.Ss(),this}getVisible(){return this.Na.getVisible()}onVisibleStateChanged(t){return this.D.on("visibleStateChanged",t)}offVisibleStateChanged(t){return this.D.off(t,"visibleStateChanged")}}class iV extends Kl{constructor(t,e,i,s,n,a,o){super(t,e,i,s,n,o),this.xs="Polygon Series",this.fT=[],this.AT=[],this.Wy=Jc,this.gT=l=>{const u=this.AT.indexOf(l);u>=0&&this.AT.splice(u,1);const d=this.fT.findIndex(f=>f===l.Na);d>=0&&this.fT.splice(d,1),this.ks.Ss()},this.be=te(this.qi.polarPolygonSeriesFillStyle,a),this.xe=te(this.qi.polarPolygonSeriesStrokeStyle,a)}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}addPolygon(){const t=new eV(this.Ji,this.gT,this,this.mT());return this.AT.push(t),t}setFillStyle(t){this.be=typeof t=="function"?t(this.be):t;const e=this.be;for(const i of this.fT)i.Ce(e);return this.ks.Ss(),this}getFillStyle(){return this.be}setStrokeStyle(t){this.xe=typeof t=="function"?t(this.xe):t;const e=this.xe;for(const i of this.fT)i.we(e);return this.ks.Ss(),this}getStrokeStyle(){return this.xe}Kp(){return this.tS&&this.AT.find(t=>t.yT!==void 0)!==void 0&&this.getVisible()}Te(){this.AT.forEach(t=>{(t.uT||this.scale.Yx())&&t.pT&&(t.Na.pl(To(t.pT,this.scale)),t.uT=!1,t.Na.Ps())})}oS(){super.oS();const t=Kt(Mt,Dt);this.AT.forEach(e=>{if(!e.dT)return;const i=!e.uT&&e.pT?e.pT:W0(e.dT);e.pT=i;const s=!e.uT&&e.yT?e.yT:Zc(i);e.yT=s,t.min=Math.min(t.min,s.min),t.max=Math.max(t.max,s.max)}),this.Bx=t}Ie(t,e){t.cs(e),this.ks.Ss()}Hc(t,e){const i=gh(t,this.fT,(l,u)=>{const d=l.Hc(u);if(d)return gt(d,this.scale,l.us.dt)},ia);if(!i)return;const s=gt(i[0],i[1].us.dt,this.scale),n=this.ST(i[1]);if(!n)return;const{angle:a,amplitude:o}=wo(s,this.scale);return{location:s,scale:this.scale,resultTableContent:this.Wy(new Ui,this,a,o,this.Ji.getAmplitudeAxis().formatValue).Zu(),owner:this,fillStyle:this.be,polarPolygon:n}}solveNearestFromScreen(t){return this.Hc(ss(t,this.Ji.us),!1)}attach(t,e=!0,i=!1){return super.attach(t,e,i),ii(t,this.qi,i,{fill:this.be,stroke:this.xe}),this}mT(){const t=this.ks.ic(this.scale,Dr.Simple).Ce(this.be).we(this.xe).cs(this.getHighlight());return this.fT.push(t),this.ds(t),t}ST(t){return this.AT.find(e=>e.Na===t)}}class sV extends Kl{constructor(t,e,i,s,n,a,o){super(t,e,i,s,n,o),this.xs="Area Series",this.Vx=[],this.Ox=!1,this.Nx=!1,this.vT=!1,this.Wy=Jc,this.be=te(this.qi.polarAreaSeriesFillStyle,a),this.xe=te(this.qi.polarAreaSeriesStrokeStyle,a)}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}setData(t){this.Vx.length!==0&&this.Ji.us.Nn(Ct.vf);const e=(i=>{const s=[];let n,a,o=!1;for(let l=0;l<i.length;l+=1){const u=i[l];let d=!0;if(n){d=!1;const f=u.angle-n.angle;if(Ai(f,0))d=!0;else{const y=Math.sign(f);a===void 0?(a=y,d=!0):a===y&&(d=!0)}}d?s.push(u):o=!0,n=u}return{progressivePoints:s,userDataModified:o}})(t);return e.userDataModified&&this.vT===!1&&(console.warn(`${this.xs} setData data format is faulty. Consecutive 'angle' values should progress in the same direction! Invalid data points have been removed.`),this.vT=!0),this.Vx=e.progressivePoints,this.Ox=!0,this.Bx=Zc(this.Vx),this.ks.Ss(),this}setFillStyle(t){return this.be=typeof t=="function"?t(this.be):t,this.ks.Ss(),this}getFillStyle(){return this.be}setStrokeStyle(t){return this.xe=typeof t=="function"?t(this.xe):t,this.ks.Ss(),this}getStrokeStyle(){return this.xe}setConnectDataAutomaticallyEnabled(t){return this.Nx=t,this.ks.Ss(),this}getConnectDataAutomaticallyEnabled(){return this.Nx}Kp(){return this.tS&&this.Vx.length>0&&this.getVisible()}attach(t,e=!0,i=!1){return super.attach(t,e,i),ii(t,this.qi,i,{fill:this.be,stroke:this.xe}),this}}class rV extends sV{constructor(t,e,i,s,n,a,o){super(t,e,i,s,n,a,o),this.bT=this.ks.ic(this.scale,Dr.Simple).cs(this.getHighlight()),this.ds(this.bT)}Te(){if(this.Ox||this.scale.Yx()){const t=this.Vx,e=this.Nx===!0?To(t.concat((i=>{if(i.length===0)return i;const s=i[0],n=i[i.length-1];if(Ai(s.angle,n.angle))return i;const a=1*Math.sign(n.angle-s.angle);let o=0;const l=[];for(let u=n.angle+a;!Ai(u%360,s.angle%360);u+=a)if(l.push({angle:u,amplitude:0}),o+=1,o>360)return[];for(let u=0;u<l.length;u+=1)l[u].amplitude=vo(n.amplitude,s.amplitude,(u+1)/(l.length+1));return l})(t)),this.scale):[...To(t,this.scale),{x:0,y:0}];this.bT.pl(e).Ce(this.be).we(this.xe),this.Ox=!1,this.bT.Ps()}}Ie(t,e){t.cs(e),this.ks.Ss()}Hc(t,e){const i=this.bT.Hc(t);if(!i)return;const{angle:s,amplitude:n}=wo(i,this.scale);return Us(i,this.scale,this.Wy(new Ui,this,s,n,this.Ji.getAmplitudeAxis().formatValue).Zu(),this,this.be)}solveNearestFromScreen(t){return this.Hc(ss(t,this.Ji.us),!1)}}class Js extends gn{constructor(){super(...arguments),this.Gi="RadialScale",this.xT={start:0,end:1},this.MT=!1,this._T=0,this.X=Y(0,0),this.wT=[0,0],this.CT=[0,0],this.i=!0,this.vi=!0,this.kT=!0,this.TT=!0,this.FT={x:0,y:0},this.di={x:{displacement:0,scaling:0,highPrecisionOffset:0},y:{displacement:0,scaling:0,highPrecisionOffset:0}}}yx(t,e){return t===this.xT.start&&e===this.xT.end||(this.xT={start:t,end:e},this.kT=!0,this.IT()),this}mx(){return this.xT}gx(){return this.xT.end>=this.xT.start}wx(t){this.MT=t,this.TT=!0}kx(){return this.MT===!1}Cx(t){this._T=t,this.TT=!0}xx(){return this._T}yi(){return this.vi}_i(){return!1}ot(t,e,i,s){return this.x=new er(t.x,e.x,i.x,s?s.x:void 0),this.y=new er(t.y,e.y,i.y,s?s.y:void 0),this}pi(){return this.di}Yx(){return this.kT}PT(){return this.TT}Wi(){return this.FT}j(){return this.i=!1,this.vi=!1,this.kT=!1,this.TT=!1,this}Z(){return this.i=!0,this.vi=!0,this.kT=!0,this.TT=!0,this}q(t,e){return typeof t=="object"?(this.X.x=t.x,this.X.y=t.y):(this.X.x=t,this.X.y=e),this.IT(),this}Ei(t){return this.wT=t,this.IT(),this}zi(t){return this.CT=t,this.IT(),this}ni(){return Y(this.wT[0]+this.wT[1],this.CT[0]+this.CT[1])}oi(){return this.X}IT(){const t=this.xT,e=Y(this.x.ai(this.X.x),this.y.ai(this.X.y)),i=this.wT[0]+this.wT[1],s=this.CT[0]+this.CT[1],n=Math.max(e.x-i,0),a=Math.max(e.y-s,0),o=.5*(n>a?a:n),l=[this.wT[0]+Math.max((n-2*o)/2,0),this.wT[1]+Math.max((n-2*o)/2,0)],u=[this.CT[0]+Math.max((a-2*o)/2,0),this.CT[1]+Math.max((a-2*o)/2,0)],d=Math.abs(t.end-t.start);this.x.q(this.X.x).si(l).J(-d,d),this.y.q(this.X.y).si(u).J(-d,d),this.FT={x:this.x.getPixelSize(),y:this.y.getPixelSize()},this.di={x:this.x.pi(),y:this.y.pi()},this.Z()}mi(t,e){const i=this.Wi();return{x:t.x+e.x*i.x,y:t.y+e.y*i.y}}Ui(t,e,i,s){const n=this.Wi(),a=D0(t,e);return a.x*=s,a.y*=s,{x:t.x+i*n.x*a.x,y:t.y+i*n.y*a.y}}}class XE extends jc{constructor(t,e,i,s,n,a,o){super(t,e,i,e.vm("polarChart bg",0),s,e.us.qi.polarChartBackgroundFillStyle,e.us.qi.polarChartBackgroundStrokeStyle,e.us.qi.polarChartTitleFont,e.us.qi.polarChartTitleFillStyle,o),this.coordsClient="client",this.Jf=[],this.Bo=!0,this.Gy=$e.onHover,this.DT=(u,d,f,y,m)=>{this.Jb.q(y,m)},this.tA=wR(this.Jf),this.BT=u=>{this.Jf.push(u)},this.LT=()=>this.xS,this.us.Nn(Ct.cf),this.Gk=e.ob("polarChart series bg",0),this.RT=e.$y("polarChart axis gridlines",0),this.ET=e.$y("polarChart series",1),this.zT=e.$y("polarChart axis lines",2),this.VT=e.$y("polarChart axis ticks",3),this.Jb=i.d2({scaleXYConstructor:Js}),this.onResize(this.DT),this._m.Rh("Polar Chart"),this.FS=this.Gk.Jc(this.Jb).Ce(this.qi.polarChartSeriesBackgroundFillStyle).we(vt).eu(0).ze(360).ou(0),this.IS=this.Gk.Jc(this.Jb).Ce(Vt).we(this.qi.polarChartSeriesBackgroundStrokeStyle).eu(0).ze(360).ou(0),super.TS(this.FS,this.IS),this.Sm(n,this.pixelScale),this.OT=new a4(this,this.Jb,this.qi,(a==null?void 0:a.disableAnimations)!==!0&&(a==null?void 0:a.animationsEnabled)!==!1,this.RT,this.zT,this.VT,this.es,this.LT),this.NT=new h4(this,this.Jb,this.qi,(a==null?void 0:a.disableAnimations)!==!0&&(a==null?void 0:a.animationsEnabled)!==!1,this.RT,this.zT,this.VT,this.es),this.coordsAxis={axisAmplitude:this.OT,axisRadial:this.NT},this.jy=e.Zy();const l=Fe(a?a.autoCursorBuilder:void 0,CF);this.Pm=l.uy(this.jy,this.uiScale,this.uiScale,this.qi),ls.Dm(this),this.LS((u,d)=>{ls.Bm(this,d)}),this.setAnimationsEnabled((a==null?void 0:a.disableAnimations)!==!0&&(a==null?void 0:a.animationsEnabled)!==!1)}getSeries(){return this.xS}setAutoCursor(t){return this.Pm&&t(this.Pm),this.us.Ss(),this}getAutoCursor(){return this.Pm}setAutoCursorMode(t){return this.Gy=t,this.us.Ss(),this}getAutoCursorMode(){return this.Gy}solveNearest(t){const e=t||this.us.On();if(e)return ls.Hc(this,ss(e,this.us),this.xS)}translateCoordinate(t,e,i){if(i){const s=t,n=this.pixelScale,a=i;if(gl(a)){const o=gt(s,n,this.engine.scale);return this.us.Do({engineX:o.x,engineY:o.y})}if(Dn(a))return s;if(Fm(a)){const o=gt(s,n,this.Jb);return wo(o,this.Jb)}}else{const s=t,n=e;if(oS(s)){if(Fm(n)){const a=this.us.Po(s),o=gt({x:a.engineX,y:a.engineY},this.engine.scale,this.Jb);return wo(o,this.Jb)}if(gl(n))return s;if(Dn(n)){const a=this.us.Po(s);return gt({x:a.engineX,y:a.engineY},this.us.dt,this.pixelScale)}}else if(u4(s)){if(Fm(n))return s;const a=To([s],this.Jb)[0];if(gl(n)){const o=gt(a,this.Jb,this.engine.scale),l={engineX:o.x,engineY:o.y};return this.us.Do(l)}if(Dn(n))return gt(a,this.Jb,this.pixelScale)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}addLineSeries(t){const e=new g4(this.ET,this,this._S,this.Jb,this.qi,(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length,this.us.es);return this.PS(e),e}addPointSeries(t){const e=new tV(this.ET,this,this._S,this.Jb,this.qi,(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length,this.us.es);return this.PS(e),e}addPointLineSeries(t){const e=new y4(this.ET,this,this._S,this.Jb,this.qi,(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length,this.us.es);return this.PS(e),e}addAreaSeries(t){const e=new rV(this.ET,this,this._S,this.Jb,this.qi,(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length,this.us.es);return this.PS(e),e}addPolygonSeries(t){const e=new iV(this.ET,this,this._S,this.Jb,this.qi,(t==null?void 0:t.automaticColorIndex)!==void 0?t.automaticColorIndex:this.xS.length,this.us.es);return this.PS(e),e}addHeatmapSeries(t){const e=new d4(this.ET,this,this._S,this.Jb,this.qi,this.us.es,t);return this.PS(e),e}addSector(){const t=new c4(this.ET,this,this.tA,this.Jb,this.qi,this.us.es);return this.BT(t),t}getAmplitudeAxis(){return this.OT}get amplitudeAxis(){return this.OT}get axisAmplitude(){return this.OT}getRadialAxis(){return this.NT}get radialAxis(){return this.radialAxis}get axisRadial(){return this.radialAxis}Te(t){var e,i;super.Te(t),rs.Fm(this._m,this.bm);for(const o of this.xS)o.oS();this.OT.Mr(),this.NT.Mr();for(const o of this.xS)o.Te();for(let o=1;o<=2;o+=1){const l=this.OT.Te(),u=this.NT.Te(),d=rs.Tm(this._m,this.bm),f=[this.ya.left+u,this.ya.right+u],y=[this.ya.bottom+u,this.ya.top+u+d];this.Jb.Ei(f).zi(y);const m=4;if(!(!this.GT||Math.abs(this.GT.amplitude-l)>=m||Math.abs(this.GT.radial-u)>=m)||o!==1){this.GT={amplitude:l,radial:u};break}}const s=this.Jb.mx().start,n=this.Jb.mx().end,a=this.Jb.gx()?(((e=this.GT)===null||e===void 0?void 0:e.radial)||0)*this.Jb.x.getPixelSize()+n-s:(((i=this.GT)===null||i===void 0?void 0:i.radial)||0)*this.Jb.x.getPixelSize()+s-n;this.FS.hu(a).au(360),this.IS.hu(a).au(360);for(const o of this.Jf)o.Te();ls.Im(this,this.FS.getIsUnderMouse(),!1,this.xS,o=>ls.Hc(this,o,this.xS),(o,l)=>o.Hc(l,!0));for(const o of this.xS)o.dp();return super.pm(),this.WT(),this}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.OT.setAnimationsEnabled(t),this.NT.setAnimationsEnabled(t),this}setMouseInteractions(t){return this.Bo=t,this}getMouseInteractions(){return this.Bo}getMinimumSize(){return Y(i2,i2)}WT(){}forEachAxis(t){return t(this.OT),t(this.NT),this}dispose(){return this.Jf.slice().forEach(t=>t.dispose()),this.Pm.dispose(),this.Gk.W(),this.RT.W(),this.ET.W(),this.zT.W(),this.VT.W(),this.jy.W(),super.dispose()}Zd(){return[...this.xS,...this.Jf]}}const i2=300;class nV extends H0{}class aV extends nV{constructor(t,e,i,s,n,a,o,l){super(s,a,o,l),this.xs="Slice",this.u=0,this.gy=!1,this.UT=Vt,this.yy=Vt,this.py=this.u,this.by=ta(()=>this.Ji.us.Ss()),this.My=()=>{this._y=void 0},this.index=t,this.Ji=s,this.scale=n,this.Ki=a,this.bT=e.ic(n,Dr.Simple).cs(this.getHighlight()),this.ds(this.bT),this.Ue=i.Pr(n).cs(this.getHighlight()),this.ds(this.Ue,{isText:!0})}setValue(t){return this.Ji.getAnimationsEnabled()?this.getVisible()&&this.Ty(this.py,t):this.py=t,this.u=t,this.Ji.us.Ss(),this}getValue(){return this.u}setVisible(t){return t===!1?this.Ji.getAnimationsEnabled()&&this.py>0?(this._y&&(this._y.finish(!1),this._y=void 0),this.Ty(this.py,0,()=>super.setVisible(!1))):(this.py=0,super.setVisible(!1)):this.Ji.getAnimationsEnabled()?(this._y&&(this._y.finish(!1),this._y=void 0),super.setVisible(!0),this.Ty(this.py,this.u)):(this.py=this.u,super.setVisible(!0)),this}Ty(t,e,i){this._y=this.by(300,Er.ease)([[t,e]],([s])=>{this.py=s,this.Ji.us.Ss()}),this._y.onEveryAnimationEnd(this.My),i&&this._y.onAnimationEnd(i)}setStyle(t,e,i,s){this.UT=t,this.yy=i,this.bT.Ce(this.UT).we(e),this.Ue.Ce(this.yy).Oh(s);for(let n=0;n<this.Qi.length;n+=1)this.styleAttachedEntry(this.Qi[n])}getAnimatedValue(){return this.py}Ie(t,e){return t.cs(e),this.Ji.us.Ss(),this}attach(t,e=!0,i=!1){return super.attach(t,e,i),this.styleAttachedEntry(t,e,i),this}styleAttachedEntry(t,e=!0,i=!1){ii(t,this.qi,i,{fill:this.UT,stroke:this.bT.ao()})}}var Ma;(function(r){r[r.VariableHeight=0]="VariableHeight",r[r.VariableWidth=1]="VariableWidth"})(Ma||(Ma={}));const s2=(r,t)=>{let e=100;return r<=0?r=0:(e=r>=100?100:r,r=t*(e/100)),r},oV=(r,t,e,i,s,n=0,a=Ma.VariableHeight,o)=>{t=s2(t,i.x),e=s2(e,i.x);const l=r.length;let u=0,d=0;u=r.reduce((R,E)=>R+E.getAnimatedValue(),0);let f={x:o-t/2,y:i.y+s.bottom},y={x:o+t/2,y:i.y+s.bottom},m={x:0,y:s.bottom},p={x:0,y:s.bottom},x=0,b=0;if(n)for(let R=0;R<r.length;R+=1){b+=r[R].getAnimatedValue();const V=a===Ma.VariableWidth?(i.y-n*l)/l:i.y+s.bottom-b/u*i.y;if(a===Ma.VariableWidth){n=V-n<10?Math.max(20,V-10):n;break}x!==0&&x-V-n<10&&(n=Math.max(0,x-V-10)),x=V}const v=(t-e)/2/i.y;for(let R=0;R<l;R+=1){const E=r[R];d+=E.getAnimatedValue();const V=a===Ma.VariableWidth?(i.y-n*l)/l:i.y+s.bottom-d/u*i.y;let F=0;R>0&&(f={x:m.x+v*n,y:m.y-n},y={x:p.x-v*n,y:p.y-n}),F=(t+d/u*(e-t))/2,m={x:o-F,y:parseInt(`${a===Ma.VariableWidth?f.y-V:V}`,10)},p={x:o+F,y:parseInt(`${a===Ma.VariableWidth?y.y-V:V}`,10)},y.x>=f.x&&p.x>m.x&&E.bT.pl([m,f,y,p])}};class hV extends Qr{constructor(t,e,i,s,n,a,o){super(t,e,i,e.vm("funnelChart bg",0),s,e.us.qi.funnelChartBackgroundFillStyle,e.us.qi.funnelChartBackgroundStrokeStyle,e.us.qi.funnelChartTitleFont,e.us.qi.funnelChartTitleFillStyle,a),this.Fy=[],this.Iy=MS.None,this.By=!0,this.Ey=0,this.YT=80,this.HT=20,this.$T=0,this.XT=Ma.VariableHeight,this.Oy=!0,this.Gy=$e.onHover,this.Wy=ES,this.Uy=u=>{const d=this.Fy.indexOf(u);d>=0&&(this.Fy.splice(d,1),this.Yy())},this.us.Nn(Ct.af),this.Ny=this.qi.effectsText,this.Hy=e.$y("funnelChart bottom",0),this.Xy=e.$y("funnelChart top",1),this._m.Rh("Funnel Chart"),this.Py=this.qi.funnelChartSliceFillStylePalette,this.Dy=this.qi.funnelChartSliceStrokeStyle,this.Ly=this.qi.funnelChartSliceLabelFont,this.Ry=this.qi.funnelChartSliceLabelFillStyle,this.jy=e.Zy();const l=Fe(o?o.autoCursorBuilder:void 0,bS);this.Pm=l.uy(this.jy,this.uiScale,this.uiScale,this.qi),this.setAnimationsEnabled((o==null?void 0:o.disableAnimations)!==!0&&(o==null?void 0:o.animationsEnabled)!==!1),this.Sm(n,this.pixelScale)}setAutoCursor(t){return this.Pm&&t(this.Pm),this.us.Ss(),this}getAutoCursor(){return this.Pm}setAutoCursorMode(t){return this.Gy=t,this.us.Ss(),this}getAutoCursorMode(){return this.Gy}setCursorResultTableFormatter(t){return this.Wy=t,this.us.Ss(),this}addSlice(t,e){const i=new aV(this.Ey,this.Hy,this.Xy,this,this.pixelScale,this.Uy,this.qi,this.us.es);return this.Ey+=1,i.setName(t),i.setValue(e),i.es.rs.ps(this.Ny),i.es.ns.ps(this.Oy),this.Fy.push(i),this.us.Ss(),i.setHighlightOnHover(this.By),i.onMouseMove(()=>{this.Gy&&this.us.Ss()}),i}addSlices(t){const e=[];for(let i=0;i<t.length;i+=1)e.push(this.addSlice(t[i].name,t[i].value));return e}getSlices(){return this.Fy}setHeadWidth(t){return this.YT=t,this.us.Ss(),this}getHeadWidth(){return this.YT}setNeckWidth(t){return this.HT=t,this.us.Ss(),this}getNeckWidth(){return this.HT}setSliceGap(t){return this.$T=Math.min(Math.max(t,0),20),this.us.Ss(),this}setSliceMode(t){return this.XT=t,this.us.Ss(),this}getFunnelSliceMode(){return this.XT}setLUT(t){return this.Nd=t,this.us.Ss(),this}setSliceFillStyle(t){return this.Py=t,this.us.Ss(),this}getSliceFillStyle(){return this.Py}setSliceStrokeStyle(t){return this.Dy=typeof t=="function"?t(this.Dy):t,this.us.Ss(),this}getSliceStrokeStyle(){return this.Dy}setSliceEffect(t){return this.Oy=t,this.Fy.forEach(e=>e.es.ns.ps(t)),this.us.Ss(),this}getSliceEffect(){return this.Oy}setSliceSorter(t){return this.Iy=t,this.Fy=this.Fy.sort(this.Iy),this.us.Ss(),this}getSliceSorter(){return this.Iy}setLabelFillStyle(t){return this.Ry=typeof t=="function"?t(this.Ry):t,this.us.Ss(),this}getLabelFillStyle(){return this.Ry}setLabelFont(t){return this.Ly=typeof t=="function"?t(this.Ly):t,this.us.Ss(),this}getLabelFont(){return this.Ly}setLabelEffect(t){return this.Ny=t,this.Fy.forEach(e=>e.es.rs.ps(t)),this.us.Ss(),this}getLabelEffect(){return this.Ny}setLabelFormatter(t){return this.Jy=t,this.us.Ss(),this}getLabelFormatter(){return this.Jy}setSliceHighlightOnHover(t){return this.By=t,this.Fy.forEach(e=>e.setHighlightOnHover(t)),this}Te(t){super.Te(t),rs.Fm(this._m,this.bm),super.pm();const e=rs.Tm(this._m,this.bm),i=Y(this.pixelScale.x.getInnerInterval()-(this.ya.left+this.ya.right),this.pixelScale.y.getInnerInterval()-(this.ya.bottom+this.ya.top+e)),s=Y(this.ya.left+i.x/2,this.ya.bottom+i.y/2);this.Fy=this.Fy.sort(this.Iy);for(let u=0,{length:d}=this.Fy;u<d;u+=1)this.Qy(this.Fy[u],u);const n=this.Fy.filter(u=>u.getAnimatedValue()>0);let a=0;for(let u=0;u<n.length;u+=1)a+=n[u].getAnimatedValue();const o=[];for(let u=0;u<n.length;u+=1)o.push((l=n[u].getAnimatedValue())>0?l/a:0);var l;for(let u=0;u<n.length;u+=1){const d=n[u];d.Ue.Rh(this.Jy(d,o[u])).Ps()}o.push(a),ls.Im(this,!1,!1,this.Fy,void 0,(u,d)=>Us(d,this.engine.scale,this.Wy(new Ui,this,u,o[n.indexOf(u)]||0).Zu(),u,void 0)),this.Ky(n,o,s,i)}Qy(t,e){t.setStyle(this.Nd?new it({color:this.Nd.getColors(t.getAnimatedValue())}):this.Py(e,t),this.Dy,this.Ry,this.Ly)}Yy(){this.Fy=this.Fy.sort(this.Iy),this.us.Ss()}Zd(){return this.Fy}dispose(){return this.Fy.slice().forEach(t=>t.dispose()),this.Pm.dispose(),this.Hy.W(),this.Xy.W(),this.jy.W(),super.dispose()}}const r2=(r,t,e)=>{const i=r.Sl();if(i.length>0){let s;const n=(i[1].y-i[0].y)/2+i[0].y;return s=t===co.Left?(i[0].x-i[1].x)/2+i[1].x-e:(i[2].x-(i.length===4?i[3].x:i[1].x))/2+(i.length===4?i[3].x:i[1].x)+e,{x:s,y:n}}};class WE extends hV{constructor(){super(...arguments),this.Jy=RS.NamePlusValue,this.jT=10,this.ZT=co.Left,this.QT=u0.LabelsOnSides,this.qy=[],this.ep=this.qi.funnelChartConnectorStrokeStyle}setLabelConnectorStyle(t){this.ep=t;for(let e=0;e<this.qy.length;e+=1)this.qy[e].Re(this.ep);return this.us.Ss(),this}getLabelConnectorStyle(){return this.ep}setLabelConnectorGap(t){return this.jT=t,this.us.Ss(),this}getLabelConnectorGap(){return this.jT}setLabelSide(t){return this.ZT=t,this.us.Ss(),this}getLabelSide(){return this.ZT}Ky(t,e,i,s){const n=this.jT;let a=0;for(let f=0;f<t.length;f+=1)a=Math.max(a,t[f].Ue.oi().x);const o=s.x+this.ya.left+this.ya.right,l=this.ZT===co.Right?(this.ya.left+(o-(this.ya.right+a)))/2:(this.ya.left+a+(o-this.ya.right))/2,u=s.x-a,d=Y(u,s.y);oV(t,this.YT,this.HT,d,this.ya,this.$T,this.XT,l),this.JT(t,this.ZT===co.Left?-1:1,-1,i,s);for(let f=0;f<this.qy.length;f+=1)this.qy[f].setVisible(!1);for(let f=0;f<t.length;f+=1)t[f].getVisible()&&this.hp(this.KT(t[f],-1,i,n))}getMinimumSize(){return Y(500,300)}JT(t,e,i,s,n){if(t.length===0)return;const a=s.x+e*n.x*.5,o=i===1?Math.max:Math.min;let l;for(let u=0;u<t.length;u+=1){const d=t[u];if(d.bT.Sl().length===0)d.Ue.setVisible(!1);else{let f;d.Ue.setVisible(!0),l&&(f=l.Ue.Fa().y+i*(l.Ue.oi().y+10));const y=(r2(d.bT,this.ZT,0)||Y(0,0)).y,m=f===void 0?y:o(y,f);d.Ue.Fe(Y(a,m)).Da(e).La(0),l=d}}}KT(t,e,i,s){const n=t.bT,a=t.Ue,o=r2(n,this.ZT,s);if(o){const l={x:hl(this.ZT===co.Left?a.Fa().x-e*(s+a.oi().x):a.Fa().x+e*(s+a.oi().x),o,i).x,y:nS(a.Fa().y,o,i).y};return[o,l,Y(this.ZT===co.Left?a.Fa().x-e*(s+a.oi().x):a.Fa().x+e*(s+a.oi().x),l.y)]}}hp(t){if(t){let e;for(let i=0;i<this.qy.length;i+=1)if(!this.qy[i].getVisible()){e=this.qy[i].setVisible(!0);break}e===void 0&&(e=this.Xy.rp(this.pixelScale,void 0,[Fr.InternalUI]).Re(this.ep),this.qy.push(e)),e.Nt().nl(t)}}}var co,Ra;(function(r){r[r.Right=0]="Right",r[r.Left=1]="Left"})(co||(co={}));class lV extends Qr{constructor(t,e,i,s,n,a,o){super(t,e,i,e.vm("gaugeChart bg",0),s,e.us.qi.gaugeChartBackgroundFillStyle,e.us.qi.gaugeChartBackgroundStrokeStyle,e.us.qi.gaugeChartTitleFont,e.us.qi.gaugeChartTitleFillStyle,a),this.Fy=[],this.Uy=u=>{const d=this.Fy.indexOf(u);d>=0&&this.Fy.splice(d,1)},this.us.Nn(Ct.lf),this.ks=e.$y("gaugeChart layer",0),this.Xy=e.$y("gaugeChart top layer",1),this._m.Rh("Gauge Chart"),this.Sm(n,this.pixelScale);const l=Is();this.onBackgroundTouchStart(l.onTouchStart),this.onBackgroundTouchMove(l.onTouchMove),this.onBackgroundTouchEnd(l.onTouchEnd),this.setAnimationsEnabled(o===void 0||o)}dispose(){return this.ks.W(),this.Xy.W(),this.Fy.slice().forEach(t=>t.dispose()),super.dispose()}}class uV extends lV{constructor(t,e,i,s,n,a,o){super(t,e,i,s,n,a,o),this.Xl=90,this.jl=-270,this.qT={min:this.Xl,max:this.jl},this.tF=ta(()=>this.ks.Ss()),this.iF=()=>{this.sF=void 0},this.eF=e.$y("radialGaugeChart bg arc",2),this.hF=this.ks.Jc(this.pixelScale).Ce(this.qi.gaugeChartEmptyGaugeFillStyle).we(this.qi.gaugeChartEmptyGaugeStrokeStyle)}setAngleInterval(t,e){t===e?e-=360:Math.abs(e-t)>360&&(e-=(e-t)%360);const i=this.Xl,s=this.jl,n=this.qT;return this.getAnimationsEnabled()?this.rF(n,{min:t,max:e}):(n.min=t,n.max=e,this.Xl=t,this.jl=e),this.D.emit("angleIntervalChange",this,{min:i,max:s},{min:t,max:e}),this.us.Ss(),this}getAngleInterval(){return{min:this.Xl,max:this.jl}}setGaugeFillStyle(t){return this.hF.Ce(t),this.us.Ss(),this}setGaugeStrokeStyle(t){return this.hF.we(t),this.us.Ss(),this}rF(t,e,i){this.sF=this.tF(1e3,Er.ease)([[t.min,e.min],[t.max,e.max]],([s,n])=>{this.qT={min:s,max:n},this.Xl=s,this.jl=n,this.ks.Ss()}),this.sF.onEveryAnimationEnd(this.iF),i&&this.sF.onAnimationEnd(i)}onAngleIntervalChange(t){return this.D.on("angleIntervalChange",t)}offAngleIntervalChange(t){return this.D.off(t,"angleIntervalChange")}dispose(){return super.dispose(),this.eF.W(),this}}class cV extends H0{nF(t){return this.D.on("valueChange",t)}oF(t){return this.D.on("valueIntervalChange",t)}offValueChange(t){return this.D.off(t,"valueChange")}offIntervalChange(t){return this.D.off(t,"valueIntervalChange")}attach(t,e=!0,i=!1){return super.attach(t,e,i),this.styleAttachedEntry(t,e,i),this}styleAttachedEntry(t,e=!0,i=!1){ii(t,this.qi,i,{fill:this.aF})}}class dV extends cV{onValueChange(t){return this.nF(t)}onIntervalChange(t){return this.oF(t)}}class fV extends dV{constructor(t,e,i,s,n,a,o){super(i,n,a,o),this.Xl=0,this.jl=0,this.lF=0,this.uF=0,this.cF=0,this.dF=100,this.fF=!0,this.py=this.u,this.vy=this.getVisible(),this.by=VR(),this.AF=l=>{this.py=l,this.Ji.us.Ss()},this.gF=t,this.Dr=e,this.Ji=i,this.scale=s,this.aF=this.qi.gaugeChartGaugeFillStyle,this.ky=t.Jc(s).Ce(this.aF).we(vt).cs(this.getHighlight()),this.ds(this.ky),this.mF=e.Pr(s).cs(this.getHighlight()),this.ds(this.mF,{isText:!0}),this.yF=e.Pr(s).cs(this.getHighlight()),this.ds(this.yF,{isText:!0}),this.Ue=e.Pr(s).cs(this.getHighlight()),this.ds(this.Ue,{isText:!0}),this.mF.Ce(a.gaugeChartIntervalLabelsFillStyle).Oh(a.gaugeChartIntervalLabelsFont),this.yF.Ce(a.gaugeChartIntervalLabelsFillStyle).Oh(a.gaugeChartIntervalLabelsFont),this.Ue.Ce(a.gaugeChartValueLabelFillStyle).Oh(a.gaugeChartValueLabelFont),this.setName("Gauge Slice")}Te(){const t=this.Ji.getDataLabelFormatter(),e=this.Xl/90<this.jl/90?1:-1;let i=this.Ji.getAnimationsEnabled()?this.py:this.u;const[s,n]=this.cF<this.dF?[this.cF,this.dF]:[this.dF,this.cF];i<s?i=s:i>n&&(i=n);const a=this.jl-e*this.uF,o=this.Xl+e*this.lF,l=this.dF-this.cF,u=(l!==0?(a-o)/l:1/0)*(i-this.cF);this.ky.eu(o).ze(o+u);const d=typeof t=="function"?t(i,{getInnerStart:()=>s,getInnerEnd:()=>n}):t.format(i);this.Ue.Rh(d)}pF(){const t=this.Ji.getIntervalLabelFormatter(),e=typeof t=="function"?t(this.cF,{getInnerStart:()=>this.cF,getInnerEnd:()=>this.dF}):t.format(this.cF);return this.mF.Rh(e).Ps(),this.mF.oi()}SF(){const t=this.Ji.getIntervalLabelFormatter(),e=typeof t=="function"?t(this.dF,{getInnerStart:()=>this.cF,getInnerEnd:()=>this.dF}):t.format(this.dF);return this.yF.Rh(e).Ps(),this.yF.oi()}setName(t){return super.setName(t),this.Ji.us.Ss(),this}setValue(t){const e=this.u;return this.Ji.getAnimationsEnabled()?this.vy&&this.by(e,t,this.AF):this.py=t,this.u=t,this.D.emit("valueChange",this,e,t),this.Ji.us.Ss(),this}getValue(){return this.u}setVisible(t){return this.vy=t,t===!1?this.Ji.getAnimationsEnabled()&&this.py>0?this.by(this.py,0,this.AF,{onCompleted:()=>super.setVisible(!1)}):(this.py=0,super.setVisible(!1)):this.Ji.getAnimationsEnabled()?(super.setVisible(!0),this.by(this.py,this.u,this.AF)):(this.py=this.u,super.setVisible(!0)),this}setInterval(t,e){const i=this.cF,s=this.dF;return this.D.emit("valueIntervalChange",this,{min:i,max:s},{min:t,max:e}),this.cF=t,this.dF=e,this.Ji.us.Ss(),this}setIntervalLabelsFont(t){return this.mF.Oh(t),this.yF.Oh(t),this.Ji.us.Ss(),this}getIntervalLabelsFont(){return this.mF.Vh()}setIntervalLabelsFillStyle(t){return this.mF.Ce(t),this.yF.Ce(t),this.Ji.us.Ss(),this}getIntervalLabelsFillStyle(){return this.mF.Eh()}setIntervalLabelsVisible(t){return t?(this.mF.setVisible(!0),this.yF.setVisible(!0)):(this.mF.setVisible(!1),this.yF.setVisible(!1)),this.fF=t,this}getIntervalLabelsVisible(){return this.fF}setAngleInterval(t,e){return this.Xl=t,this.jl=e,this.Ji.us.Ss(),this}setMinAngle(t){return this.Xl=t,this.Ji.us.Ss(),this}setMaxAngle(t){return this.jl=t,this.Ji.us.Ss(),this}setMarginInDegrees(t=this.lF,e=this.uF){return t!==this.lF&&(this.lF=t),e!==this.uF&&(this.uF=e),this.Ji.us.Ss(),this}setFillStyle(t){this.aF=typeof t=="function"?t(this.aF):t;const e=this.aF;this.ky.Ce(e);for(let i=0;i<this.Qi.length;i+=1)this.styleAttachedEntry(this.Qi[i]);return this.Ji.us.Ss(),this}vF(t){return this.Ue.Ce(t),this.Dr.Ss(),this}bF(){return this.Ue.Eh()}getAnimatedValue(){return this.py}}function d0(r,t,e,i,s,n=Math.floor(Math.sqrt(i>s?25*i:25*s))){const a=Array(n+2),o=Math.PI;let l=0,u=0;const d=t*o/180,f=(e*o/180-d)/n;for(a[l]=Y(r.x,r.y),l+=1;l<=n+1;)a[l]=Y(r.x+i*Math.cos(d+u*f),r.y+s*Math.sin(d+u*f)),l+=1,u+=1;return[a,n]}class $E extends uV{constructor(t,e,i,s,n,a,o){super(t,e,i,s,n,a,o),this.Vd=20,this.xF=new Intl.NumberFormat,this.MF=new Intl.NumberFormat,this._F=!1,this.wF=5;const l=new fV(this.ks,this.Xy,this,this.pixelScale,this.Uy,this.qi,this.us.es);this.CF=l,this.Fy.push(l),this.setPadding(10)}Te(t){super.Te(t),rs.Fm(this._m,this.bm),super.pm();const e=rs.Tm(this._m,this.bm),i=Ze([this.CF.pF(),this.CF.SF()]),s=Y(this.pixelScale.x.getInnerInterval()-(this.ya.left+this.ya.right+2*i.max.x),this.pixelScale.y.getInnerInterval()-(this.ya.bottom+this.ya.top+1*i.max.y+e)),n=Math.max(.5*Math.min(s.x,s.y),0),a=Y(this.ya.left+i.max.x+.5*s.x,this.ya.bottom+i.max.y+.5*s.y),o=this._F?this.kF(a,n):a,l=this.hF.xe.getThickness(),u=n-.5*l,d=n-this.Vd;let f=d/n*100;f=f>100||f<0?99:f;const y=100*(1-(this.Vd-l)/n);this.TF(o,d)&&(this.hF.hu(n).ou(f),this.CF.ky.hu(u).ou(y));const m=.5*(p=n,(x=this.jl-this.Xl)/(2*Math.PI*p*(x/360))*l);var p,x;this.hF.eu(this.Xl).ze(this.jl).Fe(o),this.CF.ky.Fe(o),this.CF.Ue.Fe(o),this.Nd&&this.CF.setFillStyle(new it({color:this.Nd.getColors(this.CF.getAnimatedValue())})),this.CF.setMinAngle(this.Xl).setMaxAngle(this.jl).setMarginInDegrees(m,m).Te();const b=this.hF.Zl();if(this.CF.getIntervalLabelsVisible()){this.FF(this.Xl,this.jl,o,b+this.wF);const v=this.CF.mF.Ps().We(),R=this.CF.yF.Ps().We();Kf(v,R)&&this.IF(v,R,o,b+this.wF)}}TF(t,e){const i=Ht(this.CF.Ue.Ps().oi(),.5),s=t.x+e,n=t.x-e,a=t.y+e,o=t.y-e;return!(t.x+i.x>s||t.x-i.x<n||t.y+i.y>a||t.y-i.y<o)}IF(t,e,i,s){const n=NR(t,e),[a,o]=[mb(br(this.Xl)),mb(br(this.jl))],[l,u]=a!==o||a!==1&&a!==3?[Se(n.min,i),Se(n.max,i)]:[Se(Y(n.min.x,n.max.y),i),Se(Y(n.max.x,n.min.y),i)],d=l.x*u.x+l.y*u.y,f=_a(l)*_a(u),y=.7*BR(Math.acos(d/f)),[m,p]=this.PF();this.FF(this.Xl-m*y,this.jl-p*y,i,s)}PF(){const t=this.jl-this.Xl,e=Math.sign(t);let i=Math.sign(this.Xl),s=Math.sign(this.jl);return i===s&&(e>=0?i=-s:s=-i),[i,s]}kF(t,e){const[i]=d0(t,this.Xl,this.jl,e,e),s=Ze(i),n=.5*(s.max.x-s.min.x),a=.5*(s.max.y-s.min.y);return _t(Se(t,Y(s.min.x+n,s.min.y+a)),t)}FF(t,e,i,s){const n=br(t),a=br(e);this.CF.mF.Fe(qn(Y(i.x+s,i.y),i,-n)),this.CF.yF.Fe(qn(Y(i.x+s,i.y),i,-a)),this.CF.mF.Ea(Y(-Math.cos(n),-Math.sin(n))),this.CF.yF.Ea(Y(-Math.cos(a),-Math.sin(a)))}getDefaultSlice(){return this.CF}setAutoScaling(t){return this._F=t,this.us.Ss(),this}getAutoScaling(){return this._F}setDataLabelFormatter(t){return this.MF=t,this.us.Ss(),this}getDataLabelFormatter(){return this.MF}setIntervalLabelFormatter(t){return this.xF=t,this.us.Ss(),this}getIntervalLabelFormatter(){return this.xF}setIntervalLabelPadding(t){return this.wF=t,this.us.Ss(),this}getIntervalLabelPadding(){return this.wF}setThickness(t){return this.Vd=t,this}setLUT(t){return this.Nd=t,this.us.Ss(),this}setDataLabelFont(t){return this.CF.Ue.Oh(t),this.us.Ss(),this}getDataLabelFont(){return this.CF.Ue.Vh()}getMinimumSize(){return Y(500,300)}setDataLabelFillStyle(t){return this.CF.vF(t),this.us.Ss(),this}getDataLabelFillStyle(){return this.CF.bF()}Zd(){return this.Fy}dispose(){return this.CF.dispose(),super.dispose()}}class gV extends H0{}class yV extends gV{constructor(t,e,i,s,n,a,o,l){super(s,a,o,l),this.xs="Slice",this.u=0,this.gy=!1,this.UT=Vt,this.yy=Vt,this.py=this.u,this.by=ta(()=>this.Ji.us.Ss()),this.My=()=>{this._y=void 0},this.index=t,this.Ji=s,this.scale=n,this.Ki=a,this.bT=e.ic(n,Dr.Simple).cs(this.getHighlight()),this.ds(this.bT),this.Ue=i.Pr(n).cs(this.getHighlight()),this.ds(this.Ue,{isText:!0})}setValue(t){return this.Ji.getAnimationsEnabled()?this.getVisible()&&this.Ty(this.py,t):this.py=t,this.u=t,this.Ji.us.Ss(),this}getValue(){return this.u}setVisible(t){return t===!1?this.Ji.getAnimationsEnabled()&&this.py>0?(this._y&&(this._y.finish(!1),this._y=void 0),this.Ty(this.py,0,()=>super.setVisible(!1))):(this.py=0,super.setVisible(!1)):this.Ji.getAnimationsEnabled()?(this._y&&(this._y.finish(!1),this._y=void 0),super.setVisible(!0),this.Ty(this.py,this.u)):(this.py=this.u,super.setVisible(!0)),this}Ty(t,e,i){this._y=this.by(300,Er.ease)([[t,e]],([s])=>{this.py=s,this.Ji.us.Ss()}),this._y.onEveryAnimationEnd(this.My),i&&this._y.onAnimationEnd(i)}setStyle(t,e,i,s){this.UT=t,this.yy=i,this.bT.Ce(this.UT).we(e),this.Ue.Ce(this.yy).Oh(s);for(let n=0;n<this.Qi.length;n+=1)this.styleAttachedEntry(this.Qi[n])}getAnimatedValue(){return this.py}attach(t,e=!0,i=!1){return super.attach(t,e,i),this.styleAttachedEntry(t,e,i),this}styleAttachedEntry(t,e=!0,i=!1){ii(t,this.qi,i,{fill:this.UT,stroke:this.bT.ao()})}}(function(r){r[r.VariableHeight=0]="VariableHeight",r[r.VariableWidth=1]="VariableWidth"})(Ra||(Ra={}));const n2=(r,t)=>{let e=100;return r<=0?r=0:(e=r>=100?100:r,r=t*(e/100)),r},mV=(r,t,e,i,s,n=0,a=Ra.VariableHeight,o)=>{t=n2(t,i.x),e=n2(e,i.x);const l=r.length;let u=0,d=0;u=r.reduce((R,E)=>R+E.getAnimatedValue(),0);let f={x:o-t/2,y:i.y+s.bottom},y={x:o+t/2,y:i.y+s.bottom},m={x:0,y:s.bottom},p={x:0,y:s.bottom},x=0,b=0;if(n)for(let R=0;R<r.length;R+=1){b+=r[R].getAnimatedValue();const V=a===Ra.VariableWidth?(i.y-n*l)/l:i.y+s.bottom-b/u*i.y;if(a===Ra.VariableWidth){n=V-n<10?Math.max(20,V-10):n;break}x!==0&&x-V-n<10&&(n=Math.max(0,x-V-10)),x=V}const v=(t-e)/2/i.y;for(let R=0;R<l;R+=1){const E=r[R];d+=E.getAnimatedValue();const V=a===Ra.VariableWidth?(i.y-n*l)/l:i.y+s.bottom-d/u*i.y;let F=0;R>0&&(f={x:m.x+v*n,y:m.y-n},y={x:p.x-v*n,y:p.y-n}),F=(t+d/u*(e-t))/2,m={x:o-F,y:parseInt(`${a===Ra.VariableWidth?f.y-V:V}`,10)},p={x:o+F,y:parseInt(`${a===Ra.VariableWidth?y.y-V:V}`,10)},y.x>=f.x&&p.x>=m.x&&E.bT.pl([m,f,y,p])}};class pV extends Qr{constructor(t,e,i,s,n,a,o){super(t,e,i,e.vm("pyramidChart bg",0),s,e.us.qi.pyramidChartBackgroundFillStyle,e.us.qi.pyramidChartBackgroundStrokeStyle,e.us.qi.pyramidChartTitleFont,e.us.qi.pyramidChartTitleFillStyle,a),this.Fy=[],this.Iy=MS.None,this.Py=this.qi.pyramidChartSliceFillStylePalette,this.Dy=this.qi.pyramidChartSliceStrokeStyle,this.By=!0,this.Ly=this.qi.pyramidChartSliceLabelFont,this.Ry=this.qi.pyramidChartSliceLabelFillStyle,this.Ey=0,this.YT=0,this.HT=80,this.$T=0,this.XT=Ra.VariableHeight,this.Oy=!0,this.Gy=$e.onHover,this.Wy=ES,this.Uy=u=>{const d=this.Fy.indexOf(u);d>=0&&(this.Fy.splice(d,1),this.Yy())},this.us.Nn(Ct.af),this.Ny=this.qi.effectsText,this.Hy=e.$y("pyramidChart bottom",0),this.Xy=e.$y("pyramidChart top",1),this._m.Rh("Pyramid Chart"),this.jy=e.Zy();const l=Fe(o?o.autoCursorBuilder:void 0,bS);this.Pm=l.uy(this.jy,this.uiScale,this.uiScale,this.qi),this.Sm(n,this.pixelScale),this.setAnimationsEnabled((o==null?void 0:o.disableAnimations)!==!0&&(o==null?void 0:o.animationsEnabled)!==!1)}setAutoCursor(t){return this.Pm&&t(this.Pm),this.us.Ss(),this}getAutoCursor(){return this.Pm}setAutoCursorMode(t){return this.Gy=t,this.us.Ss(),this}getAutoCursorMode(){return this.Gy}setCursorResultTableFormatter(t){return this.Wy=t,this.us.Ss(),this}addSlice(t,e){const i=new yV(this.Ey,this.Hy,this.Xy,this,this.pixelScale,this.Uy,this.qi,this.us.es);return this.Ey+=1,i.setName(t),i.setValue(e),i.es.rs.ps(this.Ny),i.es.ns.ps(this.Oy),this.Fy.push(i),this.us.Ss(),i.onMouseMove(()=>{this.Gy&&this.us.Ss()}),i}addSlices(t){const e=[];for(let i=0;i<t.length;i+=1)e.push(this.addSlice(t[i].name,t[i].value));return e}getSlices(){return this.Fy}setNeckWidth(t){return this.HT=t,this.us.Ss(),this}getNeckWidth(){return this.HT}setSliceGap(t){return this.$T=Math.min(Math.max(t,0),20),this.us.Ss(),this}setSliceMode(t){return this.XT=t,this.us.Ss(),this}getPyramidSliceMode(){return this.XT}setLUT(t){return this.Nd=t,this.us.Ss(),this}setSliceFillStyle(t){return this.Py=t,this.us.Ss(),this}getSliceFillStyle(){return this.Py}setSliceStrokeStyle(t){return this.Dy=typeof t=="function"?t(this.Dy):t,this.us.Ss(),this}getSliceStrokeStyle(){return this.Dy}setSliceEffect(t){return this.Oy=t,this.Fy.forEach(e=>e.es.ns.ps(t)),this.us.Ss(),this}getSliceEffect(){return this.Oy}setSliceSorter(t){return this.Iy=t,this.Fy=this.Fy.sort(this.Iy),this.us.Ss(),this}getSliceSorter(){return this.Iy}setLabelFillStyle(t){return this.Ry=typeof t=="function"?t(this.Ry):t,this.us.Ss(),this}getLabelFillStyle(){return this.Ry}setLabelFont(t){return this.Ly=typeof t=="function"?t(this.Ly):t,this.us.Ss(),this}getLabelFont(){return this.Ly}setLabelEffect(t){return this.Ny=t,this.Fy.forEach(e=>e.es.rs.ps(t)),this.us.Ss(),this}getLabelEffect(){return this.Ny}setLabelFormatter(t){return this.Jy=t,this.us.Ss(),this}getLabelFormatter(){return this.Jy}setSliceHighlightOnHover(t){return this.By=t,this.Fy.forEach(e=>e.setHighlightOnHover(t)),this}Te(t){super.Te(t),rs.Fm(this._m,this.bm),super.pm();const e=rs.Tm(this._m,this.bm),i=Y(this.pixelScale.x.getInnerInterval()-(this.ya.left+this.ya.right),this.pixelScale.y.getInnerInterval()-(this.ya.bottom+this.ya.top+e)),s=Y(this.ya.left+i.x/2,this.ya.bottom+i.y/2);this.Fy=this.Fy.sort(this.Iy);for(let u=0,{length:d}=this.Fy;u<d;u+=1)this.Qy(this.Fy[u],u);const n=this.Fy.filter(u=>u.getAnimatedValue()>0);let a=0;for(let u=0;u<n.length;u+=1)a+=n[u].getAnimatedValue();const o=[];for(let u=0;u<n.length;u+=1)o.push((l=n[u].getAnimatedValue())>0?l/a:0);var l;for(let u=0;u<n.length;u+=1){const d=n[u];d.Ue.Rh(this.Jy(d,o[u])).Ps()}o.push(a),ls.Im(this,!1,!1,this.Fy,void 0,(u,d)=>Us(d,this.engine.scale,this.Wy(new Ui,this,u,o[n.indexOf(u)]||0).Zu(),u,void 0)),this.Ky(n,o,s,i)}Qy(t,e){t.setStyle(this.Nd?new it({color:this.Nd.getColors(t.getAnimatedValue())}):this.Py(e,t),this.Dy,this.Ry,this.Ly)}Yy(){this.Fy=this.Fy.sort(this.Iy),this.us.Ss()}Zd(){return this.Fy}dispose(){return this.Fy.slice().forEach(t=>t.dispose()),this.Pm.dispose(),this.Hy.W(),this.Xy.W(),this.jy.W(),super.dispose()}}const a2=(r,t,e)=>{const i=r.Sl();if(i.length>0){let s;const n=(i[1].y-i[0].y)/2+i[0].y;return s=t===fo.Left?(i[0].x-i[1].x)/2+i[1].x-e:(i[2].x-(i.length===4?i[3].x:i[1].x))/2+(i.length===4?i[3].x:i[1].x)+e,{x:s,y:n}}};class qE extends pV{constructor(){super(...arguments),this.Jy=RS.NamePlusValue,this.jT=10,this.ZT=fo.Left,this.QT=u0.LabelsOnSides,this.qy=[],this.ep=this.qi.pyramidChartConnectorStrokeStyle}setLabelConnectorStyle(t){this.ep=t;for(let e=0;e<this.qy.length;e+=1)this.qy[e].Re(this.ep);return this.us.Ss(),this}getLabelConnectorStyle(){return this.ep}setLabelConnectorGap(t){return this.jT=t,this.us.Ss(),this}getLabelConnectorGap(){return this.jT}setLabelSide(t){return this.ZT=t,this.us.Ss(),this}getLabelSide(){return this.ZT}Ky(t,e,i,s){const n=this.jT;let a=0;for(let f=0;f<t.length;f+=1)a=Math.max(a,t[f].Ue.oi().x);const o=s.x+this.ya.left+this.ya.right,l=this.ZT===fo.Right?(this.ya.left+(o-(this.ya.right+a)))/2:(this.ya.left+a+(o-this.ya.right))/2,u=s.x-a,d=Y(u,s.y);mV(t,this.YT,this.HT,d,this.ya,this.$T,this.XT,l),this.JT(t,this.ZT===fo.Left?-1:1,-1,i,s);for(let f=0;f<this.qy.length;f+=1)this.qy[f].setVisible(!1);for(let f=0;f<t.length;f+=1)if(t[f].getVisible()){const y=this.KT(t[f],-1,i,n);y&&this.hp(y)}}getMinimumSize(){return Y(500,300)}JT(t,e,i,s,n){if(t.length===0)return;const a=s.x+e*n.x*.5,o=i===1?Math.max:Math.min;let l;for(let u=0;u<t.length;u+=1){const d=t[u];let f;d.bT.Sl().length===0?d.Ue.setVisible(!1):d.Ue.setVisible(!0),l&&(f=l.Ue.Fa().y+i*(l.Ue.oi().y+10));const y=a2(d.bT,this.ZT,0);if(y){const m=y.y,p=f===void 0?m:o(m,f);d.Ue.Fe(Y(a,p)).Da(e).La(0)}l=d}}KT(t,e,i,s){const n=t.bT,a=t.Ue,o=a2(n,this.ZT,s);if(o){const l={x:hl(this.ZT===fo.Left?a.Fa().x-e*(s+a.oi().x):a.Fa().x+e*(s+a.oi().x),o,i).x,y:nS(a.Fa().y,o,i).y};return[o,l,Y(this.ZT===fo.Left?a.Fa().x-e*(s+a.oi().x):a.Fa().x+e*(s+a.oi().x),l.y)]}}hp(t){let e;for(let i=0;i<this.qy.length;i+=1)if(!this.qy[i].getVisible()){e=this.qy[i].setVisible(!0);break}e===void 0&&(e=this.Xy.rp(this.pixelScale,void 0,[Fr.InternalUI]).Re(this.ep),this.qy.push(e)),e.Nt().nl(t)}}var fo;(function(r){r[r.Right=0]="Right",r[r.Left=1]="Left"})(fo||(fo={}));const SV=(r,t,e,i,s,n)=>(r.alignmentX=(s+Math.PI/2)%(2*Math.PI)<=Math.PI?-1:1,r.alignmentY=s%(2*Math.PI)<=Math.PI?-1:1,r.paddingX=Math.cos(s)*n,r.paddingY=Math.sin(s)*n,r),xV=(r,t,e,i,s,n,a,o)=>{if(t===0)return r.paddingX=o,r.alignmentX=-1,r};var Dc;(function(r){r[r.Normal=0]="Normal",r[r.Circle=1]="Circle"})(Dc||(Dc={}));class AV{constructor(t,e,i,s,n,a,o,l){this.D=new Ii,this.DF=t,this.Dr=e,this.scale=i,this.chart=s,this.tag=n,this.axisScale=a,this.BF=o,this.LF=l,this.RF=this.DF.Ee(this.scale).setMouseInteractions(!1),this.EF=this.Dr.Pr(this.scale).Rh(this.tag).setMouseInteractions(!1),this.zF=this.BF(this,this.DF.rp(this.scale,void 0,[Fr.InternalUI])).Re(this.chart.getNibStyle()),this.LF.fs([this.EF])}Ky(t,e,i,s,n,a,o){const l=e.length,u=e[i>0?i-1:l-1],d=e[i],f=e[i<l-1?i+1:0],y=this.chart.getNibLength();this.RF.Ve(t).ze(d).Re(this.chart.getAxisStyle()),this.zF.Nt().nl(a===Dc.Normal?[za(d,u,Zt(.5*y/_a(Se(u,d)),0,1)),d,za(d,f,Zt(.5*y/_a(Se(f,d)),0,1))]:((m,p,x,b,v=2)=>{const R=b/x,E=[];for(let V=-b/2;V<=b/2;V+=v){const F=R*(V/b)+p,L=Y(m.x+Math.cos(F)*x,m.y+Math.sin(F)*x);E.push(L)}return E})(t,s,n,y)),o?this.EF.setVisible(!0).Fe(_t(d,Y(o.paddingX,o.paddingY))).Da(o.alignmentX).La(o.alignmentY):this.EF.setVisible(!1)}getLabelSize(){return this.EF.Oh(this.chart.getAxisLabelFont()).Ce(this.chart.getAxisLabelStyle()).Ps().oi()}dispose(){this.RF&&this.RF.dispose(),this.EF&&this.EF.dispose(),this.zF&&this.zF.dispose()}}const vV=(r,t,e,i,s)=>{const n=t.getIcon();return n?r.addRow(n,t.getName()):r.addRow(t.getName()),r.addRow("Axis:","",i).addRow("Value:","",s(e))};class bV extends X0{constructor(t,e,i,s,n,a,o,l,u,d,f,y){super(t,u,d,y),this.xs="Spider Series",this.yu=new Map,this.Hi=Xr.onHover,this.Wy=vV,this.Hx=8,this.Aa=0,this.VF=VR(),this.OF={},this.NF={},this.vy=this.getVisible(),this.GF=1,this.WF=((m,p)=>{const x=ta(()=>{});let b,v,R=1;return(E,V,F)=>{if(E===v)return;v=E;const L=(F==null?void 0:F.easing)||Er.ease,z=(F==null?void 0:F.durationMs)||1e3;b&&(b.finish(!1),b=void 0),E===!1?V&&R?(b=x(z,L)([[R,0]],([B])=>{R=B,m(R)}),b.onAnimationEnd(()=>{b=void 0,p(!1)})):(R=0,p(!1)):V?(p(!0),b=x(z,L)([[R,1]],([B])=>{R=B,m(R)}),b.onAnimationEnd(()=>{b=void 0})):(R=1,p(!0))}})(m=>{this.GF=m,this.ks.us.Ss()},m=>{super.setVisible(m)}),this.Ji=t,this.ks=e,this.$x=s,this.UF=n,this.ab=a,this.YF=o,this.HF=l,this.scale=i,this.$F=te(d.spiderSeriesFillStyle,f),this.XF=te(d.spiderSeriesStrokeStyle,f),this.jF=te(d.spiderSeriesPointFillStyle,f)}Kp(){return this.tS&&this.yu.size>0&&this.getVisible()}addPoints(...t){this.yu.size>0&&this.Ji.us.Nn(Ct.vf),t=t.filter(e=>e.axis!==void 0);for(let e=0;e<t.length;e+=1)this.UF(t[e].axis);if(this.Ji.getAnimationsEnabled()&&this.OF!==void 0){const e=new Map;let i;t.forEach(s=>e.set(s.axis,s.value)),this.VF(0,1,s=>{e.forEach((n,a)=>{const o=(i==null?void 0:i.get(a))||0;this.yu.set(a,o+s*(n-o)),this.ks.us.Ss()})},{easing:this.OF.easing,durationMs:this.OF.durationMs,onStart:()=>{i=new Map(this.yu)}})}else for(let e=0;e<t.length;e+=1){const i=t[e].axis;this.yu.set(i,t[e].value)}return this.ks.Ss(),this}getValue(t,e=!1){const i=this.yu.get(t),s=this.Ji.getOriginValue();if(i!==void 0)return e?s+this.GF*(i-s):i}setAnimationAddPoints(t,e){return this.OF=t?{easing:t,durationMs:e}:void 0,this.ks.Ss(),this}setVisibleStateChangedAnimation(t,e){return this.NF=t?{easing:t,durationMs:e}:void 0,this.ks.Ss(),this}setCursorResultTableFormatter(t){return this.Wy=t,this.Ji.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}setCursorEnabled(t){return super.setCursorEnabled(t)}setFillStyle(t){return this.$F=typeof t=="function"?t(this.$F):t,this.bT&&(this.bT.Ce(this.$F),this.ks.Ss()),this}getFillStyle(){return this.$F}setStrokeStyle(t){return this.XF=typeof t=="function"?t(this.XF):t,this.bT&&(this.bT.we(this.XF),this.ks.Ss()),this}getStrokeStyle(){return this.XF}setPointFillStyle(t){return this.jF=typeof t=="function"?t(this.jF):t,this.Xx&&(this.Xx.Ce(this.jF),this.ks.Ss()),this}getPointFillStyle(){return this.jF}setPointSize(t){return this.Hx=t,this.Xx&&this.Xx.q(t),this}getPointSize(){return this.Hx}getPointShape(){return this.$x}setPointRotation(t){return this.Aa=t,this.Xx&&this.Xx.Nh(t),this.ks.Ss(),this}getPointRotation(){return this.Aa}Te(){if(super.Te(),!this.$i){const t=new Array(this.ab.length),e=this.Ji.getOriginValue();for(let i=0;i<this.ab.length;i+=1){const s=this.yu.get(this.ab[i].tag);t[i]=s!==void 0?this.YF(this.ab[i].tag,e+this.GF*(s-e)):this.YF(this.ab[i].tag,e)}CR(t),t.length>=3&&(this.bT||(this.bT=this.ks.ic(this.scale,Dr.Simple).we(this.XF).Ce(this.$F).cs(this.getHighlight()),this.ds(this.bT)),this.bT.pl(t),this.Xx||(this.Xx=this.ks.bS(this.scale).q(this.Hx).il(this.$x).Nh(this.Aa).Ce(this.jF).cs(this.getHighlight()),this.ds(this.Xx)),this.Xx.Nt().nl(t))}}attach(t,e=!0,i=!1){return super.attach(t,e,i),ii(t,this.qi,i,{fill:this.$F,stroke:this.XF}),this}Cs(){return this.bs||this.$x}ZF(){for(let t=0;t<this.Qi.length;t+=1)ii(this.Qi[t],this.qi,!1,{fill:this.$F,stroke:this.XF})}Hc(t,e){if(this.bT){const i=this.HF(t);if(i!==void 0&&this.yu.has(i.tag)){const s=this.yu.get(i.tag),n=this.YF(i.tag,s);return Us(n,this.scale,this.Wy(new Ui,this,s,i.tag,this.Ji.formatValue).Zu(),this,this.$F)}}}solveNearestFromScreen(t){return this.Hc(ss(t,this.Ji.us),!1)}Ie(t,e){return t.cs(e),this.ks.Ss(),this}setVisible(t){var e,i;return this.vy=t,this.WF(t,this.Ji.getAnimationsEnabled()&&this.NF!==void 0,{easing:(e=this.NF)===null||e===void 0?void 0:e.easing,durationMs:(i=this.NF)===null||i===void 0?void 0:i.durationMs}),this}}const ic=(r,t)=>{const e=Math.PI/2-2*r*Math.PI/t;return e>=0?e:e+2*Math.PI},MV=r=>Ze(r.EF.We()),RV=r=>Ze(r.We()),zm=(r,t,e,i)=>r.ou(0).Fe(e).eu(90).ze(-270).au(t===Dc.Circle?void 0:i.length),sc={alignmentX:0,alignmentY:0,paddingX:0,paddingY:0},dl={alignmentX:0,alignmentY:0,paddingX:0,paddingY:0},o2=()=>{dl.alignmentX=0,dl.alignmentY=0,dl.paddingX=0,dl.paddingY=0};class jE extends jc{constructor(t,e,i,s,n,a,o){super(t,e,i,e.vm("spiderChart bg",0),s,e.us.qi.spiderChartBackgroundFillStyle,e.us.qi.spiderChartBackgroundStrokeStyle,e.us.qi.spiderChartTitleFont,e.us.qi.spiderChartTitleFillStyle,o),this.ya=ka(20,20,20,20),this.axisScale=fs.d1({scale1DConstructor:er,dimension:"x"}).J(0,1),this.ab=[],this.QF=[],this.JF=[],this.KF=Zr.expansion,this.qF=!0,this.tI=xV,this.iI=SV,this.Bo=!0,this.sI=Dc.Normal,this.eI=4,this.hI=this.qi.spiderChartWebStyle,this.rI=this.qi.spiderChartScaleLabelFillStyle,this.nI=this.qi.spiderChartScaleLabelFont,this.oI=5,this.aI=this.qi.spiderChartAxisLabelFillStyle,this.lI=this.qi.spiderChartAxisLabelFont,this.uI=5,this.cI=this.qi.spiderChartAxisStrokeStyle,this.dI=this.qi.spiderChartAxisNibStrokeStyle,this.Pf=10,this.fI=ka(),this.Gy=$e.onHover,this.hasAxis=u=>this.ab.reduce((d,f)=>d||f.tag===u,!1),this.formatValue=u=>this.axisScale.Di(u,Hn.Numeric),this.AI=()=>{const u=this.ab.map(MV).concat(this.JF.map(RV));return LR(u)},this.gI=()=>this.mI.Jc(this.pixelScale).setMouseInteractions(!1),this.yI=u=>u.dispose(),this.pI=()=>this.bA.Pr(this.pixelScale).setMouseInteractions(!1),this.SI=u=>u.dispose(),this.vI=u=>this.formatValue(this.axisScale.getInnerStart()+u*(this.axisScale.getInnerEnd()-this.axisScale.getInnerStart())),this.bI=(u,d)=>{let f,y;const m=()=>{this.xI!==void 0&&this.xI.finish(),f=Kt(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd()),y=this.KF,this.KF=void 0},p=(v,R,E,V,F)=>{const L=Y(E.x-R.x,R.y-E.y),z=this.ab.findIndex(B=>B===u);if(z>=0&&f!==void 0){const B=ic(z,this.ab.length),A=Y(Math.cos(B),Math.sin(B)),T=L.x*A.x+L.y*A.y,w=_a(Se(u.RF.Ii(),u.RF.Ti())),C=f.min+(f.max-f.min)*Math.max(1+T/w,.01);this.axisScale.J(f.min,C),At(F),this.us.Ss()}},x=()=>{if(f=void 0,y!==void 0)if(this.th){const v=Kt(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd()),R=this.MI(),E=y;if(R!==void 0){const V=E.start(v.min,v.max,R.min,R.max),F=E.end(v.min,v.max,R.min,R.max);this.xI=this.qg.us.sn(300,Er.ease)([[0,1]],([L])=>{this.axisScale.J(v.min+L*(V-v.min),v.max+L*(F-v.max))}),this.xI.onAnimationEnd(()=>{this.xI=void 0,this.KF=E})}else this.KF=y}else this.KF=y;y=void 0};d.setMouseEnterEventHandler(this._I).setMouseLeaveEventHandler(this.wI).setMouseDragStartEventHandler(m).setMouseDragEventHandler((v,R,E,V,F)=>p(0,Y(R.clientX,R.clientY),V,0,R)).setMouseDragStopEventHandler(x);const b=Is(new wr((v,R,E)=>{this._I(v),m(),At(E)},p,(v,R,E,V)=>{this.wI(v),x(),At(V)}));return d.setTouchStartEventHandler(b.onTouchStart).setTouchMoveEventHandler(b.onTouchMove).setTouchEndEventHandler(b.onTouchEnd)},this.CI=u=>{this.qF&&!this.hasAxis(u)&&this.addAxis(u)},this.YF=(u,d)=>{for(const f of this.ab)if(f.tag===u){const y=Math.max(Math.min((d-this.axisScale.getInnerStart())/(this.axisScale.getInnerEnd()-this.axisScale.getInnerStart()),1),0);return za(f.RF.Ii(),f.RF.Ti(),y)}},this.HF=u=>{if(this.ab.length===0)return;const d=Se(gt(u,this.engine.scale,this.pixelScale),this.ab[0].RF.Ii()),f=Math.atan2(d.y,d.x);let y,m=Mt;for(const p of this.ab){const x=Se(p.RF.Ti(),p.RF.Ii()),b=Math.atan2(x.y,x.x),v=Math.abs(f-b);v<m&&(y=p,m=v)}return y},this._I=u=>{this.Bo&&(u.Re(this.dI),this.us.Ss())},this.wI=u=>{u.Re(this.dI),this.us.Ss()},this.us.Nn(Ct.uf),this.Gk=e.ob("spiderChart series bg",0),this.mI=e.$y("spiderChart web shapes",0),this.kI=e.$y("spiderChart axis bg",1),this.Rb=e.$y("spiderChart plotting",2),this.bA=e.$y("spiderChart fg",3),this.LF=this.es.yg().ps(this.qi.effectsText),this._m.Rh("Spider Chart"),this.FS=this.Gk.Jc(this.pixelScale).Ce(this.qi.spiderChartSeriesBackgroundFillStyle).we(vt).eu(90).ze(-270).ou(0),this.IS=this.Gk.Jc(this.pixelScale).Ce(Vt).we(this.qi.spiderChartSeriesBackgroundStrokeStyle).eu(90).ze(-270).ou(0),super.TS(this.FS,this.IS),this.jy=e.Zy();const l=Fe(a?a.autoCursorBuilder:void 0,TE);this.Pm=l.uy(this.jy,this.uiScale,this.uiScale,this.qi),ls.Dm(this),this.LS((u,d)=>{ls.Bm(this,d)}),this.setAnimationsEnabled((a==null?void 0:a.disableAnimations)!==!0&&(a==null?void 0:a.animationsEnabled)!==!1),this.Sm(n,this.pixelScale)}getSeries(){return this.xS}setAutoCursor(t){return this.Pm&&t(this.Pm),this.us.Ss(),this}getAutoCursor(){return this.Pm}setAutoCursorMode(t){return this.Gy=t,this.us.Ss(),this}getAutoCursorMode(){return this.Gy}solveNearest(t){const e=t||this.us.On();if(e)return ls.Hc(this,ss(e,this.us),this.xS)}addAxis(t){if(typeof t=="string"){if(!this.hasAxis(t)){const e=new AV(this.kI,this.bA,this.pixelScale,this,t,this.axisScale,this.bI,this.LF);this.ab.push(e)}}else t&&this.ab.push(t);return this.LF.fs(this.ab.map(e=>e.EF)),this.us.Ss(),this}addSeries(t){const e=typeof t=="object"?t.pointShape?t.pointShape:qe.Circle:t||qe.Circle,i=typeof t=="object"&&t.automaticColorIndex?t.automaticColorIndex:this.xS.length,s=new bV(this,this.Rb,this.pixelScale,e,this.CI,this.ab,this.YF,this.HF,this._S,this.qi,i,this.us.es);return this.PS(s),s}getSeriesCount(){return this.xS.length}setWebMode(t){return this.sI=t,this.us.Ss(),this}getWebMode(){return this.sI}setWebCount(t){return this.eI=t,this.us.Ss(),this}getWebCount(){return this.eI}setWebStyle(t){return this.hI=typeof t=="function"?t(this.hI):t,this.us.Ss(),this}getWebStyle(){return this.hI}setScaleLabelStyle(t){return this.rI=typeof t=="function"?t(this.rI):t,this.us.Ss(),this}getScaleLabelStyle(){return this.rI}setScaleLabelFont(t){return this.nI=typeof t=="function"?t(this.nI):t,this.us.Ss(),this}getScaleLabelFont(){return this.nI}setScaleLabelPadding(t){return this.oI=t,this.us.Ss(),this}getScaleLabelPadding(){return this.oI}setScaleLabelStrategy(t){return this.tI=t,this.us.Ss(),this}setScaleLabelFormatter(t){return this.formatValue=t,this.us.Ss(),this}setAxisLabelStyle(t){return this.aI=typeof t=="function"?t(this.aI):t,this.us.Ss(),this}getAxisLabelStyle(){return this.aI}setAxisLabelFont(t){return this.lI=typeof t=="function"?t(this.lI):t,this.us.Ss(),this}getAxisLabelFont(){return this.lI}setAxisLabelEffect(t){return this.LF.ps(t),this.us.Ss(),this}getAxisLabelEffect(){return this.LF.vs()}setAxisLabelPadding(t){return this.uI=t,this.us.Ss(),this}getAxisLabelPadding(){return this.uI}setAxisLabelStrategy(t){return this.iI=t,this.us.Ss(),this}setAxisStyle(t){return this.cI=typeof t=="function"?t(this.cI):t,this.us.Ss(),this}getAxisStyle(){return this.cI}setNibStyle(t){return this.dI=typeof t=="function"?t(this.dI):t,this.us.Ss(),this}getNibStyle(){return this.dI}setNibLength(t){return this.Pf=t,this.us.Ss(),this}getNibLength(){return this.Pf}setAutoAxis(t){return this.qF=t,this}getAutoAxis(){return this.qF}setMouseInteractions(t){return this.Bo=t,this}getMouseInteractions(){return this.Bo}setAxisScrollStrategy(t){return this.KF=t,this.us.Ss(),this}getAxisScrollStrategy(){return this.KF}setAxisInterval(t,e=0){return this.axisScale.J(e,t),this.us.Ss(),this}getOriginValue(){return this.axisScale.getInnerStart()}getEdgeValue(){return this.axisScale.getInnerEnd()}Te(t){super.Te(t),rs.Fm(this._m,this.bm);const e=this.ab.length,i=rs.Tm(this._m,this.bm),s=Y(this.pixelScale.x.getInnerInterval()-(this.ya.left+this.ya.right),this.pixelScale.y.getInnerInterval()-(this.ya.bottom+this.ya.top+i)),n=((l=0,u=0,d=0,f=0)=>({left:l,top:u,right:d,bottom:f}))(0,0,0,0);if(this.iI!==void 0){const l=Math.min(s.x,s.y)/2;for(let u=0;u<e;u+=1){const d=ic(u,e),f=Math.cos(d),y=Math.sin(d),m=this.ab[u].getLabelSize();o2();const p=this.iI(dl,u,e,this.ab[u].tag,d,this.uI),x=Y(f*l+p.paddingX,y*l+p.paddingY);f>0?n.right=Math.max(n.right,x.x+.5*(1-p.alignmentX)*m.x-l):n.left=Math.max(n.left,-x.x+.5*(p.alignmentX+1)*m.x-l),y>0?n.top=Math.max(n.top,x.y+.5*(1-p.alignmentY)*m.y-l):n.bottom=Math.max(n.bottom,-x.y+.5*(p.alignmentY+1)*m.y-l)}}if(this.KF){const l=this.MI();if(l!==void 0){const u=this.KF.start(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd(),l.min,l.max),d=this.KF.end(this.axisScale.getInnerStart(),this.axisScale.getInnerEnd(),l.min,l.max);this.axisScale.J(u,d)}}const a=Y(this.pixelScale.x.getInnerStart()+(n.left+this.pixelScale.x.getInnerInterval()-n.right)/2,this.pixelScale.y.getInnerStart()+(n.bottom+this.pixelScale.y.getInnerInterval()-n.top)/2),o=Math.min(s.x/2-(n.left+n.right)/2,s.y/2-(n.bottom+n.top)/2);this.fI=ka(this.Xt.left+this.ya.left+n.left,this.Xt.top+this.ya.top+i+n.top,this.Xt.right+this.ya.right+n.right,this.Xt.bottom+this.ya.bottom+n.bottom),this.Ky(a,o);for(const l of this.xS)l.oS();for(const l of this.xS)l.Te();super.pm(),ls.Im(this,this.FS.getIsUnderMouse(),!1,this.xS,l=>ls.Hc(this,l,this.xS),(l,u)=>l.Hc(u,!0));for(const l of this.xS)l.dp()}dispose(){return this.Gk.W(),this.mI.W(),this.kI.W(),this.Rb.W(),this.bA.W(),this.Pm.dispose(),this.jy.W(),super.dispose()}getMinimumSize(){return Y(this.fI.left+this.fI.right+100,this.fI.bottom+this.fI.top+100)}Ky(t,e){const i=this.ab.length,s=[];for(let n=0;n<i;n+=1){const a=ic(n,i),o=Y(t.x+Math.cos(a)*e,t.y+Math.sin(a)*e);s.push(o)}zm(this.FS,this.sI,t,s),zm(this.IS,this.sI,t,s),this.FS.hu(e),this.IS.hu(e),((n,a,o,l,u,d,f,y)=>{const m=n.length,p=d.length,x=a>0&&p>1;for(let b=0;b<Math.max(a,m);b+=1)if(x&&b<a){b>=m&&n.push(f());const v=n[b];zm(v,o,l,d);const R=u*((b+1)/a);v.hu(R)}else b<n.length&&y(n[b]);n.length=x?a:0})(this.QF,this.eI,this.sI,t,e,s,this.gI,this.yI);for(const n of this.QF)n.Ce(Vt).we(this.hI);for(let n=0;n<i;n+=1){const a=this.ab[n],o=ic(n,i);o2();const l=this.iI!==void 0?this.iI(dl,n,i,this.ab[n].tag,o,this.uI):void 0;a.Ky(t,s,n,o,e,this.sI,l)}((n,a,o,l,u,d,f,y,m,p)=>{const x=u.length,b=n.length;let v=0;if(a!==void 0)for(let R=0;R<x;R+=1){const E=u[R].tag,V=ic(R,x);for(let F=0;F<o+ +(R===0);F+=1){sc.alignmentX=0,sc.alignmentY=0,sc.paddingX=0,sc.paddingY=0;const L=a(sc,R,x,E,V,F,o,l);if(L!==void 0){v>=b&&n.push(y());const z=n[v];v+=1;const B=(o-F)/o,A=za(d,f[R],B);z.Fe(_t(A,Y(L.paddingX,L.paddingY))).Da(L.alignmentX).La(L.alignmentY).Rh(p(B))}}}for(let R=v;R<b;R+=1)m(n[R]);n.length=v})(this.JF,this.tI,this.eI,this.oI,this.ab,t,s,this.pI,this.SI,this.vI);for(const n of this.JF)n.Ce(this.rI).Oh(this.nI)}MI(){let t,e;const i=this.getSeriesCount()>1;for(const s of this.ab)for(const n of this.xS){const a=n.getValue(s.tag,i);a!==void 0&&(t=t===void 0?a:Math.min(t,a),e=e===void 0?a:Math.max(e,a))}if(t!==void 0&&e!==void 0)return Kt(t,e)}}const hr=(r,t)=>{const e=Math.floor(99999/t),i=Math.floor(99999/t),s=Math.floor(99998/t),n=Math.floor(99998/t),a=Math.floor(99999/(t+1)),o=Math.floor(89999/(t+1)),l=510001+t*o;let u=0;return{TI:()=>{const d=r.FI("dashboard ui",l+u);return u+=1,d},II:()=>r.FI("dashboard legend",51e4),DI:d=>{const f=1+d*e,y=100001+d*i,m=200002+d*s,p=300002+d*n,x=400001+d*a,b=510001+d*o;let v=0;return{us:r,vm:(R,E)=>{const V=f+E;return r.FI(R,V)},ob:(R,E)=>{const V=y+E;return r.FI(R,V)},Uk:(R,E)=>{const V=m+E;return r.FI(R,V)},$y:(R,E)=>{const V=p+E;return r.FI(R,V)},nb:(R,E,V)=>{const F=p+E;return r.BI(R,F,V)},Mm:(R,E)=>{const V=x+E;return r.FI(R,V)},om:R=>{const E=b+v,V=r.FI(R,E);return v+=1,V},lm:()=>r.FI("panel legend",500002+d),Zy:()=>r.FI("panel cursor",600001+d)}}}};class h2{constructor(t){this.D=new Ii,this.u=t}S(t){return this.u=t,this.D.emit("set",t),this}M(){return this.u}O(t){return this.D.on("set",t)}G(t){return this.D.off(t,"set")}}const EV={uh:()=>{},ih:!1,sh:0,eh:!1,rh:0,hh:!1,oh:0,ah:0,Je:Zr.fitting},TV=r=>{if(!r||typeof r!="object"||r===null)return!1;const t=r.type;return!(!t||!["spark-line","spark-bar","spark-win-loss","spark-area","spark-pie"].includes(t))},wV=(r,t,e,i,s,n,a,o)=>{const{type:l,data:u}=r;if(u.length===0)return;const d=[i,s];l==="spark-line"&&VV(r,t,d,n,a,o),l==="spark-bar"&&l2({...r,winLoss:!1},t,d,n,a,o),l==="spark-win-loss"&&l2({...r,winLoss:!0},t,d,n,a,o),l==="spark-area"&&zV(r,t,d,n,a,o),l==="spark-pie"&&_V(r,t,d,n,a,o)},Mr=(r,t,e,i)=>({x:JE(r.x,t.x,e.x,i),y:dp(r.y,t.y,e.y,i)}),CV=(r,t,e,i)=>({position:JE(r.position,t.x,e.x,i),high:dp(r.high,t.y,e.y,i),low:dp(r.low,t.y,e.y,i)}),JE=(r,t,e,i)=>{const s=Zt(r,t,t+e);return i[0].x+i[1].x*(s-t)/e},dp=(r,t,e,i)=>{const s=Zt(r,t,t+e);return i[0].y+i[1].y*(s-t)/e},ZE=(r,t,e,i,s,n,a,o)=>{for(const l of r)l.type==="point"&&kV(l,t,e,s,n,a,o),l.type==="axis-band"&&DV(l,e,s,n,a,o),l.type==="constant-line"&&FV(l,e,i,s,n,a,o)},kV=(r,t,e,i,s,n,a)=>{const{value:o,fillStyle:l,shape:u,size:d,rotation:f}=r;let y={x:NaN,y:NaN};if(o==="start"&&(y=t[0]),o==="end"&&(y=t[t.length-1]),o==="min"){y=t[0];for(const m of t)y=y.y<m.y?y:m}if(o==="max"){y=t[0];for(const m of t)y=y.y>m.y?y:m}(typeof o!="object"||(y=Mr(o,e,i,s),((m,p)=>{const x=p[0],b=p[1],v=m.x,R=m.y;return x.x<=v&&v<=x.x+b.x&&x.y<=R&&R<=x.y+b.y})(y,s)))&&n.pointSet.add().Nt().il(u!==void 0?u:qe.Circle).Nh(f||0).q(d||5).Ce(l||a.sparkPointChartFillStyle).nl(y)},DV=(r,t,e,i,s,n)=>{const{axis:a,start:o,end:l,fillStyle:u,strokeStyle:d}=r;let f=Y(Dt,Mt),y=Y(Dt,Mt);a==="x"&&(f=Mr({x:o,y:Dt},t,e,i),y=Mr({x:l,y:Mt},t,e,i)),a==="y"&&(f=Mr({x:Dt,y:o},t,e,i),y=Mr({x:Mt,y:l},t,e,i));const m=i[0],p=i[1],x=Zt(f.x,m.x,m.x+p.x),b=Zt(f.y,m.y,m.y+p.y),v=Zt(y.x,m.x,m.x+p.x),R=Zt(y.y,m.y,m.y+p.y);s.rect.add().cl(x).dl(b).q(Y(v-x,R-b)).Ce(u||n.sparkChartBandFillStyle).we(d||n.sparkChartBandStrokeStyle).we(vt)},FV=(r,t,e,i,s,n,a)=>{const{axis:o,value:l,strokeStyle:u}=r,d=l||0,f=t.y,y=e.y,m=t.x,p=e.x,x=[];if(o==="y"&&f<=d&&d<=y){const b=Mr(Y(m,d),{x:m,y:f},i,s),v=Mr(Y(p,d),{x:m,y:f},i,s);x.push([b,v])}if(o==="x"&&m<=d&&d<=p){const b=Mr(Y(d,f),{x:m,y:f},i,s),v=Mr(Y(d,y),{x:m,y:f},i,s);x.push([b,v])}x.length>0&&n.line.add().Re(u||a.sparkChartConstantLineStrokeStyle).Ve(x[0][0]).ze(x[0][1])},VV=(r,t,e,i,s,n)=>{const{strokeStyle:a,data:o,markers:l}=r,u=o.length;u>1e4&&s.Hn&&nt.console.warn("LightningChart JS warning: SparkLineChart has over 10000 data points. This feature is not designed for large data sets which might show as performance drop. If you want to request improvements to this, contact https://lightningchart.com/js-charts/docs/contact. To disable this warning, use LightningChartOptions.warning property (refer to API documentation for more detail).");let d=Mt,f=Dt,y=Mt,m=Dt;for(let b=0;b<u;b+=1){const v=o[b];d=Math.min(d,v.x),f=Math.max(f,v.x),y=Math.min(y,v.y),m=Math.max(m,v.y)}const p={x:f-d,y:m-y},x=o.map(b=>Mr(b,{x:d,y},p,e));t.lineSet.add().cs(n).Re(a||i.sparkLineChartStrokeStyle).Nt().nl(x),l&&ZE(l,x,{x:d,y},{x:f,y:m},p,e,t,i)},l2=(r,t,e,i,s,n)=>{const{data:a,fillStyle:o,strokeStyle:l,threshold:u,winFillStyle:d,lossFillStyle:f}=r,y=r.barSize||1,m=r.gap||1,p=r.winLoss,x=u||0,b=m/y*1;let v=Mt,R=Dt;if(p)v=-1,R=1;else for(const F of a)v=Math.min(v,F),R=Math.max(R,F);const E={x:0,y:p?-1:Math.min(0,v)},V={x:1*a.length+(a.length-1)*b,y:p?2:Math.max(R,1e-5)};a.map((F,L)=>{const z={x:1*(L+1)+L*b,y:p?F>=x?1:0:F},B=Mr({x:1*L+L*b,y:p?F>=x?0:-1:0},E,V,e),A=Mr(z,E,V,e);return{value:F,position:B,width:A.x-B.x,height:A.y-B.y}}).forEach(F=>{var L;t.rect.add().cs(n).Fe(F.position).Al(F.height).fl(F.width).Ce((L=F.value,p?(L>=x?d:f)||i.sparkBarChartFillStyle:o||i.sparkBarChartFillStyle)).we(l||i.sparkBarChartStrokeStyle)})},zV=(r,t,e,i,s,n)=>{const{data:a,fillStyle:o,strokeStyle:l,markers:u}=r,d=a.length;d>1e4&&s.Hn&&nt.console.warn("LightningChart JS warning: SparkAreaChart has over 10000 data points. This feature is not designed for large data sets which might show as performance drop. If you want to request improvements to this, contact https://lightningchart.com/js-charts/docs/contact. To disable this warning, use LightningChartOptions.warning property (refer to API documentation for more detail).");let f=Mt,y=Dt,m=Mt,p=Dt;for(let R=0;R<d;R+=1){const E=a[R];f=Math.min(f,E.x),y=Math.max(y,E.x),m=Math.min(m,E.y),p=Math.max(p,E.y)}const x={x:y-f,y:p-m},b=[],v=[];for(const R of a){const E=dn(R.x,R.y,m);b.push(CV(E,{x:f,y:m},x,e)),v.push(Mr(R,{x:f,y:m},x,e))}t.junction.add().cs(n).Nt().nl(b).Ce(o||i.sparkAreaChartFillStyle),t.lineSet.add().cs(n).Nt().nl(v).Re(l||i.sparkAreaChartStrokeStyle),u&&ZE(u,v,{x:f,y:m},{x:y,y:p},x,e,t,i)},_V=(r,t,e,i,s,n)=>{const{data:a,strokeStyle:o}=r,l=a.map(x=>typeof x=="number"?x:x.value),u=a.map(x=>typeof x=="object"?x.fillStyle:void 0),d=l.reduce((x,b)=>x+b,0),f=Mr(Y(50,50),{x:0,y:0},{x:100,y:100},e),y=e[1],m=y.x<=y.y?y.x/2:y.y/2;let p=90;l.forEach((x,b)=>{const v=x/d*360;t.arc.add().cs(n).Fe(f).hu(m).ou(0).eu(p).ze(p+v).Ce(u[b]||te(i.sparkPieChartFillStyle,b)).we(o||i.sparkPieChartStrokeStyle),p+=v})};var Me,Zn,Jn;(function(r){r[r.UpToDown=0]="UpToDown",r[r.LeftToRight=1]="LeftToRight"})(Me||(Me={})),function(r){r[r.Vertical=0]="Vertical",r[r.Horizontal=1]="Horizontal",r[r.Both=2]="Both"}(Zn||(Zn={})),function(r){r[r.Up=0]="Up",r[r.Down=1]="Down",r[r.Left=2]="Left",r[r.Right=3]="Right"}(Jn||(Jn={}));class u2 extends L0{constructor(t,e,i,s,n){super(),this.Ds=!1,this.C_={x:0,y:0,height:20,width:20},this.LI={x:10,y:10},this.ks=t,this.RI=n,this.EI=new rr(t,e,i,re,s).setMouseInteractions(!0),this.zI=t.ic(e,Dr.Simple).Ce(s.dataGridScrollBarButtonArrowFillStyle).we(s.dataGridScrollBarButtonArrowStrokeStyle).setMouseInteractions(!1),this.xu(this),this.EI.onMouseEnter(a=>a.setHighlight(1)),this.EI.onMouseLeave(a=>a.setHighlight(0))}VI(){switch(this.RI){case Jn.Up:this.zI.pl([{x:this.C_.x,y:this.C_.y+this.LI.y/2},{x:this.C_.x+this.LI.x/2,y:this.C_.y-this.LI.y/2},{x:this.C_.x-this.LI.x/2,y:this.C_.y-this.LI.y/2}]);break;case Jn.Down:this.zI.pl([{x:this.C_.x-this.LI.x/2,y:this.C_.y+this.LI.y/2},{x:this.C_.x+this.LI.x/2,y:this.C_.y+this.LI.y/2},{x:this.C_.x,y:this.C_.y-this.LI.y/2}]);break;case Jn.Left:this.zI.pl([{x:this.C_.x-this.LI.x/2,y:this.C_.y},{x:this.C_.x+this.LI.x/2,y:this.C_.y+this.LI.y/2},{x:this.C_.x+this.LI.x/2,y:this.C_.y-this.LI.y/2}]);break;case Jn.Right:this.zI.pl([{x:this.C_.x-this.LI.x/2,y:this.C_.y+this.LI.y/2},{x:this.C_.x+this.LI.x/2,y:this.C_.y},{x:this.C_.x-this.LI.x/2,y:this.C_.y-this.LI.y/2}])}}Fe(t){return this.C_.x=t.x,this.C_.y=t.y,this}Fa(){return Y(this.C_.x,this.C_.y)}q(t){return this.C_.height=t.x,this.C_.width=t.y,this}oi(){return{x:this.C_.height,y:this.C_.width}}onMouseDown(t){return this.EI.onMouseDown(t)}onMouseUp(t){return this.EI.onMouseUp(t)}setFillStyle(t){return this.EI.setFillStyle(t),this}getFillStyle(){return this.EI.getFillStyle()}setStrokeStyle(t){return this.EI.setStrokeStyle(t),this}getStrokeStyle(){return this.EI.getStrokeStyle()}Te(){return this.EI.Te(),this.VI(),this}Ps(){return this.EI.setSize(Y(this.C_.height,this.C_.width)).setPosition(Y(this.C_.x,this.C_.y)),this}setVisible(t){return this.EI.setVisible(t),this.zI.setVisible(t),this}dispose(){return this.EI.dispose(),this.zI.dispose(),this}setMouseInteractions(t){return this.EI.setMouseInteractions(t),this}getMouseInteractions(){return this.EI.getMouseInteractions()}onHighlight(t){return this.D.on("highlight",t)}offHighlight(t){return this.D.off(t)}getHighlight(){return this.EI.getHighlight()}setHighlight(t){return this.EI.setHighlight(xo(t)),this.D.emit("highlight",this,!!t),this.ks.Ss(),this}}const c2=(r,t)=>Math.min(Math.max(r,t.getInnerStart()),t.getInnerEnd());class NV{constructor(t,e,i,s,n,a,o){this.Kc={x:0,y:0},this.C_={x:0,y:0,height:0,width:0},this.D=new Ii,this.OI={min:Y(0,0),max:Y(0,0)},this.wM=!1,this.CM=!1,this.NI={x:0,y:0},this._u=void 0,this.GI=Y(0,0),this.WI={x:0,y:0},this.UI=0,this.YI=15,this.kM=(l,u)=>{this.wM=!0,this.bA.Ss();const d=this.HI.getDraggingMode();this._u=this.bA.us.Wr(d===De.notDraggable?ae.Restricted:d===De.draggable?ae.Move:d===De.onlyHorizontal?ae.Horizontal:ae.Vertical),this.$I&&clearInterval(this.$I)},this.TM=()=>{this.wM=!1,this.bA.Ss(),this.bA.us.Ur(this._u)},this.FM=l=>(this.CM=!0,this.NI=gt(this.bA.us.Pe(l.x,l.y),this.bA.us.dt,this.scale),!0),this.XI=(l,u)=>(this.jI(u),this.$I=setInterval(()=>this.jI(u),300),!0),this.ZI=()=>(clearInterval(this.$I),!0),this.IM=(l,u)=>{const d=this.HI.getDraggingMode();if(d!==De.notDraggable){const f=u||d,y=gt(this.bA.us.Pe(l.x,l.y),this.bA.us.dt,this.scale),m=Y(f!==De.onlyVertical?c2(y.x,this.scale.x):this.C_.x,f!==De.onlyHorizontal?c2(y.y,this.scale.y):this.C_.y),p=Y(m.x-this.NI.x,m.y-this.NI.y),x=Y(this.HI.getPosition().x+p.x,this.HI.getPosition().y+p.y),b=this.QI(x),v={x:Math.abs(this.GI.x-b.x),y:Math.abs(this.GI.y-b.y)};return this.JI(v),this.WI.y>p.y&&(this.NI=y),this.Te(),!0}return!1},this.PM=(l,u)=>{this.CM=!1,At(u),this.bA.Ss()},this.bA=t,this.qg=e,this.scale=s,this.contentScale=n,this.KI=o,this.qI=new u2(t,i,s,a,o===Me.UpToDown?Jn.Up:Jn.Left).setStrokeStyle(a.dataGridScrollBarButtonStrokeStyle).setFillStyle(a.dataGridScrollBarButtonFillStyle),this.tP=new u2(t,i,s,a,o===Me.UpToDown?Jn.Down:Jn.Right).setStrokeStyle(a.dataGridScrollBarButtonStrokeStyle).setFillStyle(a.dataGridScrollBarButtonFillStyle),this.HI=new rr(t,i,s,re,a).setFillStyle(a.dataGridScrollBarFillStyle).setStrokeStyle(a.dataGridScrollBarStrokeStyle).setMouseInteractions(!0).setDraggingMode(o===Me.UpToDown?De.onlyVertical:o===Me.LeftToRight?De.onlyHorizontal:De.notDraggable),this.iP=new rr(e,i,s,re,a).setFillStyle(a.dataGridScrollBarBackgroundFillStyle).setStrokeStyle(a.dataGridScrollBarBackgroundStrokeStyle).setMouseInteractions(!0),this.HI.onMouseEnter(this.kM),this.HI.onMouseLeave(this.TM),this.HI.onMouseDragStart((l,u)=>this.FM(Y(u.clientX,u.clientY))&&At(u)),this.HI.onMouseDrag((l,u)=>this.IM(Y(u.clientX,u.clientY))&&At(u)),this.HI.onMouseDragStop(this.PM),this.HI.onTouchStart((l,u)=>this.FM(Y(u.clientX,u.clientY))&&At(u)),this.HI.onTouchMove((l,u)=>this.IM(Y(u.clientX,u.clientY))&&At(u)),this.HI.onTouchEnd(this.PM),this.qI.onMouseDown((l,u)=>this.XI(l,u)&&At(u)),this.tP.onMouseDown((l,u)=>this.XI(l,u)&&At(u)),this.qI.onMouseUp((l,u)=>this.ZI()&&At(u)),this.tP.onMouseUp((l,u)=>this.ZI()&&At(u)),this.iP.onMouseWheel((l,u)=>this.sP(u)),this.HI.onMouseWheel((l,u)=>this.sP(u)),this.iP.onMouseDown((l,u)=>this.XI(l,u)&&At(u)),this.iP.onMouseUp((l,u)=>this.ZI()&&At(u))}eP(t){return this.C_=t,this}fl(t){return this.C_.width=t,this}hP(){return this.C_.width}rP(t){return this.GI=t,this}nP(t){return this.Kc=t,this}oP(){return this.Kc}aP(t){return this.YI=t,this}lP(){return this.KI}uP(t){let e;switch(this.KI){case Me.UpToDown:return e=t>0?Math.min(this.GI.y-this.OI.max.y,this.WI.y+t):Math.max(0,this.WI.y+t),e!==this.WI.y&&(this.JI({x:0,y:e}),this.Te(),!0);case Me.LeftToRight:return e=Math.min(this.OI.max.x-this.GI.x,this.WI.x+t),e!==this.WI.x&&(this.JI({y:0,x:e}),this.Te(),!0);default:return!1}}cP(t){let e;switch(this.KI){case Me.UpToDown:return e=Math.max(0,this.WI.y-t),e!==this.WI.y&&(this.JI({x:0,y:e}),this.Te(),!0);case Me.LeftToRight:return e=t>0?Math.max(0,this.WI.x-t):Math.min(this.OI.max.x-this.GI.x,this.WI.x-t),e!==this.WI.x&&(this.JI({x:e,y:0}),this.Te(),!0);default:return!0}}dP(t){switch(this.KI){case Me.UpToDown:return this.D.on("scrollY",t);case Me.LeftToRight:return this.D.on("scrollX",t)}return this.D.on("scrollY",t)}QI(t){switch(this.KI){case Me.UpToDown:if(t.y>this.OI.min.y)return Y(t.x,this.OI.min.y);if(t.y<this.OI.max.y)return Y(t.x,this.OI.max.y);break;case Me.LeftToRight:if(t.x<this.OI.min.x)return Y(this.OI.min.x,t.y);if(t.x>this.OI.max.x)return Y(this.OI.max.x,t.y)}return t}sP(t){t.deltaY>0&&this.fP()&&At(t),t.deltaY<0&&this.AP()&&At(t)}jI(t){const e=gt(this.bA.us.Pe(t.clientX,t.clientY),this.bA.us.dt,this.scale);let i;const s=this.HI.getPosition(),n=this.HI.getSize();this.gP(e,s,n)?clearInterval(this.$I):(i=this.KI===Me.UpToDown?Y(0,e.y-s.y>0?this.YI:-this.YI):Y(s.x-e.x>0?this.YI:-this.YI,0),(i.x>0||i.y>0)&&this.mP(i.x!==0?Math.abs(i.x):Math.abs(i.y)),(i.x<0||i.y<0)&&this.yP(i.x!==0?Math.abs(i.x):Math.abs(i.y)))}gP(t,e,i){return this.KI===Me.UpToDown?t.y<e.y+i.y/2&&t.y>e.y-i.y/2:t.x>e.x-i.x/2&&t.x<e.x+i.x/2}pP(t){this.OI=t}mP(t){switch(this.KI){case Me.UpToDown:{const e=Math.max(0,this.WI.y-t);return e!==this.WI.y&&(this.JI({x:0,y:e}),this.Te(),!0)}case Me.LeftToRight:{const e=Math.max(0,this.WI.x-t);return e!==this.WI.x&&(this.JI({x:e,y:0}),this.Te(),!0)}default:return!1}}yP(t){switch(this.KI){case Me.UpToDown:{let e;return e=this.Kc.x>this.C_.height?Math.min(this.GI.y-this.OI.max.y,this.WI.y+t):0,e!==this.WI.y&&(this.JI({x:0,y:e}),this.Te(),!0)}case Me.LeftToRight:{const e=Math.min(this.OI.max.x-this.GI.x,this.WI.x+t);return e!==this.WI.x&&(this.JI({y:0,x:e}),this.Te(),!0)}default:return!1}}AP(){return this.mP(this.YI)}fP(){return this.yP(this.YI)}JI(t){if(t.x===this.WI.x&&t.y===this.WI.y)return;let e;switch(this.WI=t,this.KI){case Me.UpToDown:e=this.WI.y*this.UI*this.contentScale.Wi().y,this.D.emit("scrollY",Zn.Vertical,e),this.bA.us.Ss();break;case Me.LeftToRight:e=this.WI.x*this.UI*this.contentScale.Wi().x,this.D.emit("scrollX",Zn.Horizontal,e)}}setVisible(t){return this.qI.setVisible(t),this.tP.setVisible(t),this.iP.setVisible(t),this.HI.setVisible(t),this}dispose(){return this.qI.dispose(),this.tP.dispose(),this.iP.dispose(),this.HI.dispose(),this.$I&&clearInterval(this.$I),this}Ps(){switch(this.SP(),this.vP(),this.KI){case Me.UpToDown:this.qI.Fe({x:this.C_.x,y:this.C_.y+this.C_.height-this.qI.oi().x/2}).q(Y(this.C_.width,this.C_.width)).Ps(),this.tP.Fe({x:this.C_.x,y:this.C_.y+10}).q(Y(this.C_.width,this.C_.width)).Ps(),this.iP.setSize({x:this.C_.width,y:this.C_.height-2*this.qI.oi().x}).setPosition({x:this.C_.x,y:this.C_.y+this.tP.oi().y+this.iP.getSize().y/2}),this.HI.setSize(Y(this.C_.width,this.bP())),this.GI={x:this.C_.x,y:this.qI.Fa().y-this.qI.oi().y/2-this.HI.getSize().y/2},this.pP({min:{x:this.C_.x,y:this.qI.Fa().y-this.qI.oi().y/2-this.HI.getSize().y/2},max:{x:this.C_.x,y:this.tP.Fa().y+this.tP.oi().x/2+this.HI.getSize().y/2}});break;case Me.LeftToRight:this.qI.Fe({x:this.C_.x,y:this.C_.y}).q(Y(this.C_.height,this.C_.height)).Ps(),this.tP.Fe({x:this.C_.x+this.C_.width-this.tP.oi().x,y:this.C_.y}).q(Y(this.C_.height,this.C_.height)).Ps(),this.iP.setSize({y:this.C_.height,x:this.C_.width-2*this.qI.oi().y}).setPosition({x:this.C_.x+this.qI.oi().x/2+this.iP.getSize().x/2,y:this.C_.y}),this.HI.setSize(Y(this.bP(),this.C_.height)),this.GI={x:this.qI.Fa().x+this.qI.oi().x/2+this.HI.getSize().x/2,y:this.C_.y},this.pP({min:{x:this.qI.Fa().x+this.qI.oi().x/2+this.HI.getSize().x/2,y:this.C_.y},max:{x:this.tP.Fa().x-this.tP.oi().x/2-this.HI.getSize().x/2,y:this.C_.y}})}return this.xP(),this}SP(){switch(this.KI){case Me.UpToDown:this.MP()||this.setVisible(!1),this.MP()&&this.setVisible(!0);break;case Me.LeftToRight:this._P()||this.setVisible(!1),this._P()&&this.setVisible(!0)}}vP(){switch(this.KI){case Me.UpToDown:this.MP()||this.JI({x:0,y:0});break;case Me.LeftToRight:this._P()||this.JI({x:0,y:0})}}MP(){return this.Kc.x>this.C_.height}_P(){return this.Kc.y>this.C_.width}bP(){switch(this.KI){case Me.UpToDown:return this.C_.height*(this.C_.height-2*this.qI.oi().x)/this.Kc.x;case Me.LeftToRight:return this.C_.width*(this.C_.width-2*this.qI.oi().y)/this.Kc.y;default:return 0}}xP(){switch(this.KI){case Me.UpToDown:this.UI=(this.Kc.x-this.C_.height)/(this.OI.min.y-this.OI.max.y);break;case Me.LeftToRight:this.UI=(this.Kc.y-this.C_.width)/(this.OI.max.x-this.OI.min.x)}}Te(){switch(this.qI.Te(),this.tP.Te(),this.iP.Te(),this.KI){case Me.UpToDown:this.HI.setPosition({x:this.C_.x,y:this.qI.Fa().y-this.qI.oi().y/2-this.HI.getSize().y/2-this.WI.y}).Te();break;case Me.LeftToRight:this.HI.setPosition({y:this.C_.y,x:this.qI.Fa().x+this.qI.oi().x/2+this.HI.getSize().x/2+this.WI.x}).Te()}return this}}class LV{constructor(t,e,i,s,n,a,o){switch(this.bA=t,this.qg=e,this.scale=s,this.contentScale=n,o){case Zn.Vertical:this.wP=this.CP(i,a,Me.UpToDown);break;case Zn.Horizontal:this.kP=this.CP(i,a,Me.LeftToRight);break;case Zn.Both:this.wP=this.CP(i,a,Me.UpToDown),this.kP=this.CP(i,a,Me.LeftToRight)}this.TP=Is(new wr(void 0,(l,u,d,f,y)=>{var m,p;f.x!==0&&(!((m=this.kP)===null||m===void 0)&&m.cP(f.x))&&At(y),f.y!==0&&(!((p=this.wP)===null||p===void 0)&&p.uP(f.y))&&At(y)}))}CP(t,e,i){return new NV(this.bA,this.qg,t,this.scale,this.contentScale,e,i)}hP(){return 20}nP(t){var e,i;return(e=this.wP)===null||e===void 0||e.nP(t),(i=this.kP)===null||i===void 0||i.nP(t),this}FP(t){var e;return(e=this.kP)===null||e===void 0||e.aP(t),this}IP(t){var e;return(e=this.wP)===null||e===void 0||e.aP(t),this}PP(t){const e=this.wP;return e&&e.sP(t),this}DP(t){return this.TP.onTouchStart(this,t),this}BP(t){return this.TP.onTouchMove(this,t),this}LP(t){return this.TP.onTouchEnd(this,t),this}onScroll(t){var e,i;return(e=this.kP)===null||e===void 0||e.dP(t),(i=this.wP)===null||i===void 0||i.dP(t),this}dispose(){var t,e;return(t=this.wP)===null||t===void 0||t.dispose(),(e=this.kP)===null||e===void 0||e.dispose(),this}Te(){var t,e;return(t=this.wP)===null||t===void 0||t.Te(),(e=this.kP)===null||e===void 0||e.Te(),this}Ps(){var t,e,i,s;const n=this.scale.x,a=this.scale.y;return(t=this.wP)===null||t===void 0||t.eP({x:n.getInnerEnd()-10,y:a.getInnerStart()+20,height:a.getInnerEnd()-20,width:20}),(e=this.kP)===null||e===void 0||e.eP({x:n.getInnerStart()+10,y:a.getInnerStart()+10,height:20,width:n.getInnerEnd()-20}),(i=this.wP)===null||i===void 0||i.Ps(),(s=this.kP)===null||s===void 0||s.Ps(),this}}class QE extends Qr{constructor(t,e,i,s,n,a){super(t,e,i,e.vm("dataGrid bg",0),s,e.us.qi.dataGridBackgroundFillStyle,e.us.qi.dataGridBackgroundStrokeStyle,e.us.qi.dataGridTitleFont,e.us.qi.dataGridTitleFillStyle,a),this.RP=[],this.EP=[],this.zP=[],this.VP=new Map,this.OP=!0,this.NP=!0,this.GP=!0,this.WP=!0,this.UP=!0,this.YP=!0,this.HP=!0,this.$P=!0,this.XP=!0,this.jP=!0,this.ZP=!0,this.QP=!0,this.JP=!0,this.KP=!0,this.qP=!0,this.tD=!0,this.iD=new Set,this.sD=new Set,this.eD=!0,this.hD=!0,this.rD=(o,l)=>{o.borders=l===void 0?g2:{...o.borders,...l},this.nD(o),this.QP=!0,this.us.Ss()},this.nD=o=>{o.borders&&(o.borders.top===!1&&this.oD(o.column,o.row-1,l=>{l.borders=l.borders?{...l==null?void 0:l.borders,bottom:!1}:{...this.aD,bottom:!1}}),o.borders.bottom===!1&&this.oD(o.column,o.row+1,l=>{l.borders=l.borders?{...l.borders,top:!1}:{...this.aD,top:!1}}),o.borders.left===!1&&this.oD(o.column-1,o.row,l=>{l.borders=l.borders?{...l.borders,right:!1}:{...this.aD,right:!1}}),o.borders.right===!1&&this.oD(o.column+1,o.row,l=>{l.borders=l.borders?{...l.borders,left:!1}:{...this.aD,left:!1}}),o.borders.top===!0&&this.oD(o.column,o.row-1,l=>{l.borders=l.borders?{...l==null?void 0:l.borders,bottom:!0}:{...this.aD,bottom:!0}}),o.borders.bottom===!0&&this.oD(o.column,o.row+1,l=>{l.borders=l.borders?{...l.borders,top:!0}:{...this.aD,top:!0}}),o.borders.left===!0&&this.oD(o.column-1,o.row,l=>{l.borders=l.borders?{...l.borders,right:!0}:{...this.aD,right:!0}}),o.borders.right===!0&&this.oD(o.column+1,o.row,l=>{l.borders=l.borders?{...l.borders,left:!0}:{...this.aD,left:!0}}))},this.lD=(o,l)=>{const u=this.VP.get(o);u&&this.D.emit(yi.cellMouseEnter,u,l)},this.uD=(o,l)=>{const u=this.VP.get(o);u&&this.D.emit(yi.cellMouseLeave,u,l)},this.cD=(o,l)=>{const u=this.VP.get(o);u&&this.D.emit(yi.cellMouseClick,u,l)},this.dD=(o,l)=>{const u=this.VP.get(o);u&&this.D.emit(yi.cellMouseDoubleClick,u,l)},this.fD=(o,l)=>{const u=this.VP.get(o);u&&this.D.emit(yi.cellMouseDown,u,l)},this.AD=(o,l)=>{const u=this.VP.get(o);u&&this.D.emit(yi.cellMouseUp,u,l)},this.gD=(o,l)=>{const u=this.VP.get(o);u&&this.D.emit(yi.cellMouseMove,u,l)},this.mD=(o,l)=>{const u=this.VP.get(o);u&&this.D.emit(yi.cellMouseDrag,u,l)},this.yD=(o,l)=>{const u=this.VP.get(o);u&&this.D.emit(yi.cellMouseDragStart,u,l)},this.pD=(o,l)=>{const u=this.VP.get(o);u&&this.D.emit(yi.cellMouseDragStop,u,l)},this.SD=(o,l)=>{const u=this.VP.get(o);u&&(this.D.emit(yi.cellMouseWheel,u,l),!l.defaultPrevented&&this.eD&&this.vD.PP(l))},this.bD=(o,l)=>{const u=this.VP.get(o);u&&(this.D.emit(yi.cellTouchStart,u,l),!l.defaultPrevented&&this.hD&&this.vD.DP(l))},this.xD=(o,l)=>{const u=this.VP.get(o);u&&(this.D.emit(yi.cellTouchMove,u,l),!l.defaultPrevented&&this.hD&&this.vD.BP(l))},this.MD=(o,l)=>{const u=this.VP.get(o);u&&(this.D.emit(yi.cellTouchEnd,u,l),!l.defaultPrevented&&this.hD&&this.vD.LP(l))},this.us.Nn(Ct.if),this._m.Rh("Data Grid"),this._D=i.d2({scaleXYConstructor:xe}),this._D.x.ig=EV,this.wD=i.d2({scaleXYConstructor:xe}),this.CD={x:0,y:0},this.kD=this.qi.dataGridTextFont,this.TD=this.qi.dataGridTextFillStyle,this.aD={top:!0,bottom:!0,left:!0,right:!0},this.FD=this.qi.dataGridCellBackgroundFillStyle,this.ID=this.qi.dataGridBorderStrokeStyle,this.PD="left-center",this.DD={left:5,right:5,bottom:5,top:5},this.BD=e.ob("dataGrid grid bg",0),this.LD=e.ob("dataGrid cell bg",1),this.RD=e.$y("dataGrid cell content",0),this.ED=e.$y("dataGrid scrollbar bg",1),this.zD=e.$y("dataGrid scrollbar fg",2),this.vD=this.VD(),this.onBackgroundMouseWheel((o,l)=>{this.eD&&this.vD.PP(l)}),this.onBackgroundTouchStart((o,l)=>{this.hD&&this.vD.DP(l)}),this.onBackgroundTouchMove((o,l)=>{this.hD&&this.vD.BP(l)}),this.onBackgroundTouchEnd((o,l)=>{this.hD&&this.vD.LP(l)}),this.OD=this.BD.ke(this._D).Ce(this.qi.dataGridBackgroundFillStyle).we(vt).setMouseInteractions(!1),this.ND=this.RD.Lg(this._D).setMouseInteractions(!1),this.GD=new Hr(()=>this.LD.ke(this._D).setMouseInteractions(!0).setMouseEnterEventHandler(this.lD).setMouseLeaveEventHandler(this.uD).setMouseClickEventHandler(this.cD).setMouseDoubleClickEventHandler(this.dD).setMouseDownEventHandler(this.fD).setMouseUpEventHandler(this.AD).setMouseMoveEventHandler(this.gD).setMouseDragEventHandler(this.mD).setMouseDragStartEventHandler(this.yD).setMouseDragStopEventHandler(this.pD).setMouseWheelEventHandler(this.SD).setTouchStartEventHandler(this.bD).setTouchMoveEventHandler(this.xD).setTouchEndEventHandler(this.MD)),this.WD=new Hr(()=>this.RD.ke(this._D).setMouseInteractions(!1)),this.UD=new Hr(()=>this.RD.Pr(this._D).setMouseInteractions(!1)),this.YD=new Hr(()=>this.RD.rp(this._D,{},[Fr.InternalUI,{type:"DataPattern",args:{pattern:"ProgressiveX"}}]).setMouseInteractions(!1)),this.HD=new Hr(()=>this.RD.Ee(this._D).setMouseInteractions(!1)),this.$D=new Hr(()=>this.RD.bS(this._D).setMouseInteractions(!1)),this.XD=new Hr(()=>this.RD.ke(this._D).setMouseInteractions(!1)),this.jD=new Hr(()=>this.RD.lw(this._D).setMouseInteractions(!1)),this.ZD=new Hr(()=>this.RD.Jc(this._D).setMouseInteractions(!1)),this.Sm(n,this.uiScale),this.onResize(()=>{this.OP=!0,this.us.Ss(),this._D.q(this.pixelScale.oi()),this.wD.q(this.pixelScale.oi())}),this.QD=this.es.yg([this.OD])}getMinimumSize(){return{x:200,y:200}}setAnimationsEnabled(t){return this}Zd(){return[]}dispose(){return super.dispose(),this.BD.W(),this.LD.W(),this.RD.W(),this.ED.W(),this.zD.W(),_l(this._D),_l(this.wD),this.vD.dispose(),this.UD.gp(),this.GD.gp(),this.WD.gp(),this.YD.gp(),this.HD.gp(),this.$D.gp(),this.XD.gp(),this.jD.gp(),this.ZD.gp(),this}j(){return super.j(),this._D.j(),this.wD.j(),this}Z(){return super.Z(),this._D.Z(),this.wD.Z(),this}setBackgroundEffect(t){return this.QD.ps(t),this.us.Ss(),this}getBackgroundEffect(){return this.QD.vs()}setInteractionScrollOnWheel(t){return this.eD=t,this}getInteractionScrollOnWheel(){return this.eD}setInteractionPanOnTouch(t){return this.hD=t,this}getInteractionPanOnTouch(){return this.hD}onCellMouseEnter(t){return this.D.on(yi.cellMouseEnter,t)}offCellMouseEnter(t){return this.D.off(t)}onCellMouseLeave(t){return this.D.on(yi.cellMouseLeave,t)}offCellMouseLeave(t){return this.D.off(t)}onCellMouseClick(t){return this.D.on(yi.cellMouseClick,t)}offCellMouseClick(t){return this.D.off(t)}onCellMouseDoubleClick(t){return this.D.on(yi.cellMouseDoubleClick,t)}offCellMouseDoubleClick(t){return this.D.off(t)}onCellMouseDown(t){return this.D.on(yi.cellMouseDown,t)}offCellMouseDown(t){return this.D.off(t)}onCellMouseUp(t){return this.D.on(yi.cellMouseUp,t)}offCellMouseUp(t){return this.D.off(t)}onCellMouseMove(t){return this.D.on(yi.cellMouseMove,t)}offCellMouseMove(t){return this.D.off(t)}onCellMouseDrag(t){return this.D.on(yi.cellMouseDrag,t)}offCellMouseDrag(t){return this.D.off(t)}onCellMouseDragStart(t){return this.D.on(yi.cellMouseDragStart,t)}offCellMouseDragStart(t){return this.D.off(t)}onCellMouseDragStop(t){return this.D.on(yi.cellMouseDragStop,t)}offCellMouseDragStop(t){return this.D.off(t)}onCellMouseWheel(t){return this.D.on(yi.cellMouseWheel,t)}offCellMouseWheel(t){return this.D.off(t)}onCellTouchStart(t){return this.D.on(yi.cellTouchStart,t)}offCellTouchStart(t){return this.D.off(t)}onCellTouchMove(t){return this.D.on(yi.cellTouchMove,t)}offCellTouchMove(t){return this.D.off(t)}onCellTouchEnd(t){return this.D.on(yi.cellTouchEnd,t)}offCellTouchEnd(t){return this.D.off(t)}setGridBackgroundFillStyle(t){return this.OD.Ce(t),this.us.Ss(),this}getGridBackgroundFillStyle(){return this.OD.Eh()}setCellContent(t,e,i,s,n){if(typeof i=="number"&&s!==void 0&&n!==void 0){const a=i,o=s,l=n;let u=[];for(let y=t;y<t+a;y+=1)for(let m=e;m<e+o;m+=1){const p=this.oD(y,m);p&&u.push(p)}u=uo(u);let d={highlight:0};for(const y of u){const m=this.RP.indexOf(y);m<0||(d={...d,highlight:y.highlight,textFont:y.textFont,textFillStyle:y.textFillStyle,contentAlignment:y.contentAlignment,borders:y.borders,padding:y.padding,backgroundFillStyle:y.backgroundFillStyle},this.RP.splice(m,1))}const f={...d,column:t,row:e,columnSpan:a,rowSpan:o,content:l};this.RP.push(f),this.WP=!0,typeof f.content=="string"||typeof f.content=="number"?this.NP=!0:this.GP=!0,this.us.Ss()}else this.JD(t,e,i);return this}setColumnContent(t,e){const i=e.length;if(i===0)return this;for(let s=0;s<i;s+=1){const n=e[s];this.JD(t,s,n)}return this}setRowContent(t,e){const i=e.length;if(i===0)return this;for(let s=0;s<i;s+=1){const n=e[s];this.JD(s,t,n)}return this}setTableContent(t){const e=t.length;if(e===0)return this;const i=t[0].length;if(i===0)return this;for(let s=0;s<i;s+=1)for(let n=0;n<e;n+=1){const a=t[n][s];this.JD(s,n,a)}return this}setColumnWidth(t,e){let i=this.EP.find(s=>s.column===t);return i||(i={column:t,min:void 0,max:void 0},this.EP.push(i)),typeof e=="object"?(i.min=e.min,i.max=e.max):e===void 0?this.EP.splice(this.EP.indexOf(i),1):(i.min=e,i.max=e),this.YP=!0,this.us.Ss(),this}setRowHeight(t,e){let i=this.zP.find(s=>s.row===t);return i||(i={row:t,min:void 0,max:void 0},this.zP.push(i)),typeof e=="object"?(i.min=e.min,i.max=e.max):e===void 0?this.zP.splice(this.zP.indexOf(i),1):(i.min=e,i.max=e),this.YP=!0,this.us.Ss(),this}setColumnPaddings(t,e){return typeof e=="number"&&(e=hc(e,e,e,e)),this.KD(t,i=>this.qD(i,e)),this}setRowPaddings(t,e){return typeof e=="number"&&(e=hc(e,e,e,e)),this.tB(t,i=>this.qD(i,e)),this}setCellPadding(t,e,i){return typeof i=="number"&&(i=hc(i,i,i,i)),this.oD(t,e,s=>this.qD(s,i)),this}setCellsPaddings(t){return typeof t=="number"&&(t=hc(t,t,t,t)),this.DD={...this.DD,...t},this.iB(e=>this.qD(e,this.DD)),this}setCellBorders(t,e,i){return this.oD(t,e,s=>this.rD(s,i)),this}setRowBorders(t,e){return this.tB(t,i=>this.rD(i,e)),this}setColumnBorders(t,e){return this.KD(t,i=>this.rD(i,e)),this}setCellsBorders(t){return this.aD=t===void 0?g2:t,this.iB(e=>this.rD(e,this.aD)),this}setCellsBorderStrokeStyle(t){return this.ID=typeof t=="function"?t(this.ID):t,this.KP=!0,this.us.Ss(),this}setColumnTextFillStyle(t,e){return this.KD(t,i=>this.sB(i,e)),this}setRowTextFillStyle(t,e){return this.tB(t,i=>this.sB(i,e)),this}setCellTextFillStyle(t,e,i){return this.oD(t,e,s=>this.sB(s,i)),this}setCellsTextFillStyle(t){return this.TD=typeof t=="function"?t(this.TD):t,this.iB(e=>this.sB(e,this.TD)),this}setColumnTextFont(t,e){return this.KD(t,i=>this.eB(i,e)),this}setRowTextFont(t,e){return this.tB(t,i=>this.eB(i,e)),this}setCellTextFont(t,e,i){return this.oD(t,e,s=>this.eB(s,i)),this}setCellsTextFont(t){return this.kD=typeof t=="function"?t(this.kD):t,this.iB(e=>this.eB(e,this.kD)),this}setColumnContentAlignment(t,e){return this.KD(t,i=>this.hB(i,e)),this}setRowContentAlignment(t,e){return this.tB(t,i=>this.hB(i,e)),this}setCellContentAlignment(t,e,i){return this.oD(t,e,s=>this.hB(s,i)),this}setCellsContentAlignment(t){return this.PD=t,this.iB(e=>this.hB(e,this.PD)),this}setCellBackgroundFillStyle(t,e,i){return this.oD(t,e,s=>this.rB(s,i)),this}setColumnBackgroundFillStyle(t,e){return this.KD(t,i=>this.rB(i,e)),this}setRowBackgroundFillStyle(t,e){return this.tB(t,i=>this.rB(i,e)),this}setCellsBackgroundFillStyle(t){return this.FD=typeof t=="function"?t(this.FD):t,this.iB(e=>this.rB(e,this.FD)),this}setCellHighlight(t,e,i){return this.oD(t,e,s=>{s.highlight=xo(i)}),this.JP=!0,this.us.Ss(),this}setColumnHighlight(t,e){const i=xo(e);return this.KD(t,s=>{s.highlight=i}),this.JP=!0,this.us.Ss(),this}setRowHighlight(t,e){const i=xo(e);return this.tB(t,s=>{s.highlight=i}),this.JP=!0,this.us.Ss(),this}removeCell(t,e){return this.oD(t,e,i=>this.RP.splice(this.RP.indexOf(i),1)),this.UP=!0,this.us.Ss(),this}removeRow(t){return this.tB(t,e=>this.RP.splice(this.RP.indexOf(e),1)),this.RP.filter(e=>e.row>t).forEach(e=>{e.row-=1}),this.UP=!0,this.us.Ss(),this}removeColumn(t){return this.KD(t,e=>this.RP.splice(this.RP.indexOf(e),1)),this.RP.filter(e=>e.column>t).forEach(e=>{e.column-=1}),this.UP=!0,this.us.Ss(),this}removeCells(){return this.RP.splice(0),this.UP=!0,this.us.Ss(),this}getColumnMax(){return this.RP.length===0?0:this.RP.reduce((t,e)=>Math.max(t,e.column+e.columnSpan-1),0)}getRowMax(){return this.RP.length===0?0:this.RP.reduce((t,e)=>Math.max(t,e.row+e.rowSpan-1),0)}Te(t){super.Te(t),rs.Fm(this._m,this.bm),super.pm();const e=Math.round(this.ID.V()),i=e/2;let s=this.NP||this.GP||this.WP||this.UP||this.YP||this.HP||this.ZP||this.QP||this.KP||this.tD;if(s){this.RP.forEach(p=>{this.sD.add(p.column)}),this.RP.forEach(p=>{this.iD.add(p.row)});const a=this.UD.fp(),o=this.nB(i,a);a.finishPlot();const l=this.oB(this.sD.size,o),u=this.aB(this.iD.size,o),d=l.reduce(Rc,0)+e,f=u.reduce(Rc,0)+e,y=new Array(l.length+1).fill(0).map((p,x)=>l.reduce((b,v,R)=>b+(R<x?v:0),0)),m=new Array(u.length+1).fill(0).map((p,x)=>u.reduce((b,v,R)=>b+(R<x?v:0),0));if(this.lB){const p=this.lB.columnWidths.every((b,v)=>b===l[v]),x=this.lB.rowHeights.every((b,v)=>b===u[v]);p&&x&&(s=!1)}this.lB={columnWidths:l,rowHeights:u,dataGridWidth:d,dataGridHeight:f,columnWidthsCumulative:y,rowHeightsCumulative:m,cellsContentSizes:o}}const n=s||this.GP||this.WP||this.UP||this.$P||this.XP||this.jP||this.QP||this.JP||this.KP||this.OP||this.tD;if((n||this.qP)&&this.lB){const a=this.pixelScale.getInnerIntervalPixels(),o=rs.Tm(this._m,this.bm),l=[this.ya.left+i,this.ya.right+i],u=[this.ya.bottom+i,this.ya.top+o+i],d={x:a.x-l[0]-l[1],y:a.y-u[0]-u[1]},f=[this.ya.left,this.ya.right],y=[this.ya.bottom,this.ya.top+o],m={x:Math.round(a.x-f[0]-f[1]),y:Math.round(a.y-y[0]-y[1])},p={x:Math.ceil(i),y:Math.floor(m.y-i)};this.wD.Ei(l).zi(u).Vi(0,d.x).Oi(0,d.y),this.vD.nP({x:this.lB.dataGridHeight,y:this.lB.dataGridWidth}).Ps().Te();const x={x:Math.round(this.CD.x),y:Math.round(Math.min(0,this.CD.y))};this._D.Ei(f).zi(y).Vi(x.x,m.x+x.x).Oi(x.y,m.y+x.y),this.OD.Fe({x:p.x,y:p.y});const b={x:this._D.x.ei(),y:this._D.y.ei()+this.vD.hP(),width:this._D.x.ri()+e-this.vD.hP(),height:this._D.y.ri()+e};this.RD.qv(b),this.LD.qv(b),this.BD.qv(b);const v=this.lB,R=[{x:this._D.x.getInnerStart(),y:this._D.y.getInnerStart()},{x:this._D.x.getInnerEnd(),y:this._D.y.getInnerStart()},{x:this._D.x.getInnerEnd(),y:this._D.y.getInnerEnd()},{x:this._D.x.getInnerStart(),y:this._D.y.getInnerEnd()}];v.cellsContentSizes.forEach(E=>{var V;const F={x:p.x+v.columnWidthsCumulative[E.cell.column],y:p.y-v.rowHeightsCumulative[E.cell.row+E.cell.rowSpan]},L={x:F.x+v.columnWidths[E.cell.column],y:F.y+v.rowHeights[E.cell.row]},z=Kf([F,{x:L.x,y:F.y},L,{x:F.x,y:L.y}],R);(V=E.text)===null||V===void 0||V.setVisible(z)}),n&&this.uB(p,this.lB,e)}this.OP=!1,this.NP=!1,this.GP=!1,this.WP=!1,this.UP=!1,this.YP=!1,this.HP=!1,this.$P=!1,this.XP=!1,this.jP=!1,this.ZP=!1,this.QP=!1,this.JP=!1,this.KP=!1,this.qP=!1,this.tD=!1}nB(t,e){const i=[],s={left:Math.ceil(t),right:Math.ceil(t),top:Math.ceil(t),bottom:Math.ceil(t)};for(const n of this.RP){const{content:a}=n,o={...this.DD,...n.padding};let l,u,d,f={x:0,y:0};if(typeof a=="string"||typeof a=="number"){const y=String(a);l=e.add(),f=l.Rh(y).Oh(n.textFont||this.kD).Ps().jc()}if(TV(a)&&(u=a,f={x:200,y:50}),ch(a)){const y=this.us.cB(a);y.dB()?(d=a,f=d.oi()):y.fB(()=>{this.tD=!0,this.us.Ss()})}if(l||u||d){o.top=Math.round(o.top),o.left=Math.round(o.left),o.right=Math.round(o.right),o.bottom=Math.round(o.bottom);const y={x:Math.round(f.x+o.left+o.right+s.left+s.right),y:Math.round(f.y+o.top+o.bottom+s.top+s.bottom)};i.push({cell:n,contentSize:y,text:l,sparkChart:u,icon:d,cellPadding:o,cellMargin:s})}}return i}uB(t,e,i){const{dataGridWidth:s,dataGridHeight:n,cellsContentSizes:a,columnWidths:o,columnWidthsCumulative:l,rowHeights:u,rowHeightsCumulative:d}=e,f={x:s-i,y:-n+i};this.OD.q(f),this.ND.Re(this.ID),this.VP.clear();const y={cellBackground:this.GD.fp(),cellIconRect:this.WD.fp(),lineSet:this.YD.fp(),line:this.HD.fp(),pointSet:this.$D.fp(),rect:this.XD.fp(),junction:this.jD.fp(),arc:this.ZD.fp()},m=[];for(const p of a){const{cell:x,text:b,sparkChart:v,icon:R,cellPadding:E,cellMargin:V}=p,F={column:x.column,row:x.row},L={x:t.x+l[x.column],y:t.y-d[x.row+x.rowSpan]},z={x:L.x+V.left,y:L.y+V.bottom},B={x:z.x+E.left,y:z.y+E.bottom},A={x:new Array(x.columnSpan).fill(0).reduce((_,X,N)=>_+o[x.column+N],0),y:new Array(x.rowSpan).fill(0).reduce((_,X,N)=>_+u[x.row+N],0)},T={x:A.x-V.left-V.right,y:A.y-V.top-V.bottom},w={x:T.x-E.left-E.right,y:T.y-E.top-E.bottom};if(b){const _=f2(B,w,x.contentAlignment||this.PD);b.Fe(_[0]).Ea({x:_[1],y:_[2]}).Ce(this.AB(x.textFillStyle||this.TD,x.content,this.TD)).cs(x.highlight)}const C=this.AB(x.backgroundFillStyle||this.FD,x.content);if(C!==Vt){const _=y.cellBackground.add();_.Fe(L).q(A).Ce(C).we(vt).cs(x.highlight),this.VP.set(_,F)}const k=x.borders||this.aD;if(k&&BV(L,A,k,i,m),v){const _=B,X=w;wV(v,y,this._D,_,X,this.qi,this.cA,x.highlight)}if(R){const _=R.oi(),X=f2(B,w,x.contentAlignment||this.PD);y.cellIconRect.add().Fe({x:X[0].x+_.x*(-.5-X[1]/2),y:X[0].y+_.y*(-.5-X[2]/2)}).q(_).Ce(new Fn({source:R.rc,fitMode:ji.Stretch})).we(vt).cs(x.highlight)}}this.ND.Nt();for(const p of m)this.ND.zr().Eg(p[0],p[1]);y.cellBackground.finishPlot(),y.cellIconRect.finishPlot(),y.lineSet.finishPlot(),y.line.finishPlot(),y.pointSet.finishPlot(),y.rect.finishPlot(),y.junction.finishPlot(),y.arc.finishPlot()}oB(t,e){const i=new Array(t).fill(0);for(const s of this.sD.values()){const n=e.filter(l=>s>=l.cell.column&&s+1<=l.cell.column+l.cell.columnSpan).reduce((l,u)=>{const d=u.contentSize.x/u.cell.columnSpan;return Math.max(l,d)},0),a=this.EP.find(l=>l.column===s),o=a?Zt(n,a.min!==void 0?a.min:Dt,a.max!==void 0?a.max:Mt):n;i[s]=o}return i}aB(t,e){const i=new Array(t).fill(0);for(const s of this.iD.values()){const n=e.filter(l=>s>=l.cell.row&&s+1<=l.cell.row+l.cell.rowSpan).reduce((l,u)=>{const d=u.contentSize.y/u.cell.rowSpan;return Math.max(l,d)},0),a=this.zP.find(l=>l.row===s),o=a?Zt(n,a.min!==void 0?a.min:Dt,a.max!==void 0?a.max:Mt):n;i[s]=o}return i}AB(t,e,i){if(wi(t)){try{const s=Number(e);return new it({color:t.getPalette().getColors(s)})}catch{}return i||Vt}return t}sB(t,e){t.textFillStyle=typeof e=="function"?e(t.textFillStyle||this.TD):e,this.jP=!0,this.us.Ss()}eB(t,e){t.textFont=typeof e=="function"?e(t.textFont||this.kD):e,this.ZP=!0,this.us.Ss()}rB(t,e){t.backgroundFillStyle=typeof e=="function"?e(t.backgroundFillStyle||this.FD):e,this.XP=!0,this.us.Ss()}hB(t,e){t.contentAlignment=e,this.$P=!0,this.us.Ss()}qD(t,e){t.padding={...t.padding,...e},this.HP=!0,this.us.Ss()}JD(t,e,i){let s=this.oD(t,e);s?s.content=i:(s={column:t,row:e,columnSpan:1,rowSpan:1,content:i,highlight:0},this.RP.push(s),this.WP=!0),typeof s.content=="string"||typeof s.content=="number"?this.NP=!0:this.GP=!0,this.us.Ss()}iB(t){this.RP.forEach(e=>t(e))}oD(t,e,i){const s=this.RP.find(n=>t>=n.column&&t+1<=n.column+n.columnSpan&&e>=n.row&&e+1<=n.row+n.rowSpan);return s&&i&&i(s),s}KD(t,e){const i=this.RP.filter(s=>t>=s.column&&t+1<=s.column+s.columnSpan);for(const s of i)s&&e(s)}tB(t,e){const i=this.RP.filter(s=>t>=s.row&&t+1<=s.row+s.rowSpan);for(const s of i)s&&e(s)}VD(){return new LV(this.zD,this.ED,this.wD,this.wD,this._D,this.qi,Zn.Both).onScroll((t,e)=>{this.lB&&(t===Zn.Vertical&&(this.CD.y=-e),t===Zn.Horizontal&&(this.CD.x=e),this.qP=!0,this.us.Ss())}).FP(50).IP(12)}}const yi={cellMouseEnter:"cellMouseEnter",cellMouseLeave:"cellMouseLeave",cellMouseClick:"cellMouseClick",cellMouseDoubleClick:"cellMouseDoubleClick",cellMouseDown:"cellMouseDown",cellMouseUp:"cellMouseUp",cellMouseMove:"cellMouseMove",cellMouseDrag:"cellMouseDrag",cellMouseDragStart:"cellMouseDragStart",cellMouseDragStop:"cellMouseDragStop",cellMouseWheel:"cellMouseWheel",cellTouchStart:"cellTouchStart",cellTouchMove:"cellTouchMove",cellTouchEnd:"cellTouchEnd"};var d2;(function(r){r.Center="center",r.RightCenter="right-center",r.LeftCenter="left-center",r.RightTop="right-top",r.LeftTop="left-top",r.RightBottom="right-bottom",r.LeftBottom="left-bottom",r.CenterTop="center-top",r.CenterBottom="center-bottom"})(d2||(d2={}));const BV=(r,t,e,i,s)=>{const n={x:r.x,y:r.y},a={x:r.x,y:r.y+t.y},o={x:r.x+t.x,y:r.y},l={x:r.x+t.x,y:r.y+t.y};e.top&&s.push([a,l]),e.bottom&&s.push([n,o]),e.left&&s.push([n,a]),e.right&&s.push([o,l])},f2=(r,t,e)=>{const i=r.x,s=r.x+t.x,n=r.x+t.x/2,a=r.y+t.y,o=r.y,l=r.y+t.y/2;switch(e){case"left-center":return[Y(i,l),-1,0];case"right-center":return[Y(s,l),1,0];case"center":return[Y(n,l),0,0];case"left-bottom":return[Y(i,o),-1,-1];case"right-bottom":return[Y(s,o),1,-1];case"center-bottom":return[Y(n,o),0,-1];case"left-top":return[Y(i,a),-1,1];case"right-top":return[Y(s,a),1,1];case"center-top":return[Y(n,a),0,1]}return Xl(0,`Unidentified DataGrid cell content alignment option: ${e}`)},g2={top:!1,bottom:!1,left:!1,right:!1};class PV extends lh{constructor(t,e,i,s,n,a){super(t,{Sr(){},pr(){},br(){}},s,e,i,{numeric:e.xAxisNumericTicks,datetime:e.xAxisDateTimeTicks,time:e.xAxisTimeTicks},{type:"linear"}),this.chart=t,this.es=a,this.ks=n,this.Lh=n.Pr(t.gB).Oh(this.qi.barChartCategoryAxisTitleFont||this.qi.xAxisTitleFont).Ce(this.qi.barChartCategoryAxisTitleFillStyle||this.qi.xAxisTitleFillStyle),this.setTitleRotation(this.chart.Ts.getWidth({x:0,y:-90})),this.Wh=this.es.yg([this.Lh]).ps(e.effectsText),this.mB=n.Ee(t.gB).Re(e.barChartCategoryAxisStrokeStyle||e.xAxisStrokeStyle)}setThickness(t){return typeof t=="number"?(this.xg=t,this.Mg=t):typeof t=="object"&&(this.xg=t.min,this.Mg=t.max),this.chart.us.Ss(),this}getThickness(){return{min:this.xg,max:this.Mg}}setStrokeStyle(t){return this.mB.Re(t),this.chart.us.Ss(),this}getStrokeStyle(){return this.mB.uu()}Ps(){if(!this.Xi)return{kg:0,Tg:0,Vd:Zt(0,this.xg!==void 0?this.xg:0,this.Mg!==void 0?this.Mg:Mt)};const t=this.mB.uu().V()/2,e=this.chart.Ts.getHeight(this.Lh.Ps().jc());return{kg:t,Tg:e,Vd:t+e}}Te(t,e,i,s){const n=this.getInterval(),a=this.chart.valueAxis.getInterval();this.mB.Ve(this.chart.Ts.toPoint(n.start,a.start)).ze(this.chart.Ts.toPoint(n.end,a.start)).setVisible(this.Xi),this.Lh.Fe(this.chart.Ts.toPoint(.5*(n.start+n.end),this.chart.valueAxis.dt.mi(a.start,-(t.kg+s.labelMarginBeforeCategoryAxisPixels)))).Ea(this.chart.Ts.toPoint(0,1)).setVisible(this.Xi)}setMouseInteractions(t){return this}ur(t,e){return new Hc(e,t,this.ks,this.chart.gB)}cr(t,e){return{}}_r(t,e){return e}Cr(t,e,i){return{min:t,max:e}}}class IV extends lh{constructor(t,e,i,s,n,a,o){super(t,{Sr:()=>{var l;if(t.yB){if(t.pB==="positive"||t.pB==="bipolar"){if(((l=t.SB)===null||l===void 0?void 0:l.position)==="after-bar"){const u=this.dt.ri();return this.dt.mi(t.yB.max,Math.min(this.chart.Ts.getHeight(this.chart.vB())+t.SB.labelMargin,.3*u))}return t.yB.max}return t.bB?Zt(-1,-1e-6,t.yB.max):0}},pr:()=>{var l;if(t.yB){if(t.pB==="negative"||t.pB==="bipolar"){if(((l=t.SB)===null||l===void 0?void 0:l.position)==="after-bar"){const u=this.dt.ri();return this.dt.mi(t.yB.min,-Math.min(this.chart.Ts.getHeight(this.chart.vB())+t.SB.labelMargin,.3*u))}return t.yB.min}return t.bB?Zt(1,1e-6,t.yB.min):0}},br:()=>{}},s,e,i,{numeric:e.barChartValueAxisTicks||e.yAxisNumericTicks,datetime:e.yAxisDateTimeTicks,time:e.yAxisTimeTicks},o),this.chart=t,this.es=a,this.ks=n,this.Lh=n.Pr(t.gB).Oh(this.qi.barChartValueAxisTitleFont||this.qi.yAxisTitleFont).Ce(this.qi.barChartValueAxisTitleFillStyle||this.qi.yAxisTitleFillStyle),this.setTitleRotation(this.chart.Ts.getHeight({x:0,y:-90})),this.Wh=this.es.yg([this.Lh]).ps(e.effectsText),this.mB=n.Ee(t.gB).Re(e.barChartValueAxisStrokeStyle||this.qi.yAxisStrokeStyle)}setThickness(t){return typeof t=="number"?(this.xg=t,this.Mg=t):typeof t=="object"&&(this.xg=t.min,this.Mg=t.max),this.chart.us.Ss(),this}getThickness(){return{min:this.xg,max:this.Mg}}setStrokeStyle(t){return this.mB.Re(t),this.chart.us.Ss(),this}getStrokeStyle(){return this.mB.uu()}setTickStrategy(t,e){return super.Fh(t,e)}Ps(t){if(!this.Xi)return this.Uh(),{kg:0,Tg:0,Vd:Zt(0,this.xg!==void 0?this.xg:0,this.Mg!==void 0?this.Mg:Mt)};const e=this.chart.Ts.getWidth(this.chart.gB).ri(),i=this.dt.ri();this.qh({physicalAxisSize:i,oppositeAxisSize:e,plotLines:t});let s=0;for(const o of this.Ze.values())for(const l of o.values()){const u=l.Sh.lr,d=this.chart.Ts.getWidth(l.Ue.jc()),f=u.getTickLength()+u.getTickPadding()+d+u.getLabelPadding();s=Math.max(s,f)}const n=s+this.mB.uu().V()/2,a=this.chart.Ts.getWidth(this.Lh.Ps().jc());return{kg:n,Tg:a,Vd:Zt(n+a,this.xg!==void 0?this.xg:0,this.Mg!==void 0?this.Mg:Mt)}}Te(t){const e=this.getInterval();this.mB.Ve(this.chart.Ts.toPoint(-.5,this.Ih)).ze(this.chart.Ts.toPoint(-.5,this.Ph)).setVisible(this.Xi);const i=this.kh.type==="logarithmic"?Math.sqrt(e.start+e.end):.5*(e.start+e.end),s=this.chart.Ts.toPoint(this.chart.categoryAxis.dt.mi(-.5,t.kg*this.chart.Ts.xB),i),n=this.chart.Ts.toPoint(this.chart.Ts.MB,0);this.Lh.Fe(s).Ea(n).setVisible(this.Xi)}setMouseInteractions(t){return this}ur(t,e){return new Hc(e,t,this.ks,this.chart.gB)}cr(t,e){const i=t.Sh.lr,s=this.chart.Ts.toPoint(-.5,t.u),n=this.chart.gB.mi(s,this.chart.Ts.toPoint(i.getTickLength()*this.chart.Ts.xB,0)),a=this.chart.gB.mi(s,this.chart.Ts.toPoint(i.gridStrokeLength*e.oppositeAxisSize*-this.chart.Ts.xB,0)),o=this.chart.gB.mi(n,this.chart.Ts.toPoint(i.getTickPadding()*this.chart.Ts.xB,0));t.Ue.Fe(o).Ea(this.chart.Ts.toPoint(this.chart.Ts.MB,i.getLabelAlignment())).Nh(i.getLabelRotation()),i.tickStyle!==vt&&i.tickLength!==0&&e.plotLines.add({positions:[s,n]},{lineStyle:i.tickStyle}),i.gridStrokeStyle!==vt&&i.gridStrokeLength>0&&e.plotLines.add({positions:[s,a]},{lineStyle:i.gridStrokeStyle})}_r(t,e){return this.kh.type==="linear"?Tc(t,e,this.dt):s0(t,e,this.dt)}Cr(t,e,i){return{min:t,max:e}}}class UV extends X0{constructor(t,e,i,s,n,a,o){super(t,e,i,s),this.No=_R(),this.u=0,this._B=!1,this.chart=t,this.Ji=t,this.category=n,this.subCategory=a,this.xs=n,this.be=te(i.barChartBarFillStyle||i.rectangleSeriesFillStyle,o),this.xe=te(i.barChartBarStrokeStyle||i.rectangleSeriesStrokeStyle,o),this.onVisibleStateChanged(()=>{this.Ji.wB()}),this.onDispose(()=>{this.Ji.wB(),this.Ji.CB.delete(this)})}setValue(t){return this._B=!0,this.u=t,this.Ji.wB(),this.Ji.us.Ss(),this.Ji.CB.delete(this),this}getValue(){return this.u}get value(){return this.u}setFillStyle(t){return this.be=typeof t=="function"?t(this.be):t,this.Ji.wB(),this}getFillStyle(){return this.be}setStrokeStyle(t){return this.xe=typeof t=="function"?t(this.xe):t,this.Ji.wB(),this}getStrokeStyle(){return this.xe}Kp(){return this.tS}Hc(t,e){return Us(t,this.Ji.engine.scale,this.Ji.Wy(new Ui,this.category,this.u,this).Zu(),this,void 0)}solveNearestFromScreen(t){}setEffect(t){return this.Ji.setBarsEffect(t),this}}const OV=r=>!!(r&&typeof r=="object"&&"iCategory"in r&&typeof r.iCategory=="number"&&"value"in r&&typeof r.value=="number"),y2=(r,t,e)=>{const i=r.kd.filter(a=>a!==void 0),s=i.map(a=>e(a.sizePixels)).reduce((a,o)=>Math.max(a,o),1),n=Math.ceil(s/(t/i.length));return n<=1?i:i.filter((a,o)=>o%n==0)};class KE extends jc{constructor(t,e,i,s,n,a,o){var l;let u;super(t,e,i,e.vm("barChart bg",0),s,e.us.qi.barChartBackgroundFillStyle||e.us.qi.chartXYBackgroundFillStyle,e.us.qi.barChartBackgroundStrokeStyle||e.us.qi.chartXYBackgroundStrokeStyle,e.us.qi.barChartTitleFont||e.us.qi.chartXYTitleFont,e.us.qi.barChartTitleFillStyle||e.us.qi.chartXYTitleFillStyle,a),this.coordsBars="barChart",this.kB=GV.Descending,this.TB=this.qi.barChartCategoryLabels,this.SB=this.qi.barChartValueLabelsAfterBars,this.FB=!1,this.b_=Wl(),this.IB=new Map,this.CB=new Map,this.pB="positive",this.PB="columns",this.DB=!0,this.BB=new Map,this.LB={speed:1},this._y={speed:1},this.RB=.08,this.Gy=$e.snapToClosest,this.Wy=(y,m,p,x)=>{this.categoryAxis.getTitle().length>0&&y.addRow(this.categoryAxis.getTitle()),y.addRow({text:m,font:{weight:"bold"}}),this.valueAxis.getTitle().length>0&&y.addRow(this.valueAxis.getTitle());const b=[];return x.subCategory&&x.subCategory.length>0&&b.push(x.subCategory),b.push(this.valueAxis.formatValue(p)),y.addRow(...b),y},this.fn=(y,m,p,x,b)=>{this.gB.q(x,b)},this.us.Nn(Ct.nf),this.Ts=(o==null?void 0:o.type)==="horizontal"?HV:YV,this._m.Rh("Bar Chart"),this.EB=e.$y("barChart plotting 1",0),this.zB=e.$y("barChart plotting 2",1),this.bB=((l=o==null?void 0:o.valueAxis)===null||l===void 0?void 0:l.type)==="logarithmic",this.bB?this.Ts.VB==="horizontal"?(u=i.d1({scale1DConstructor:er,dimension:"y"}),this.gB=new Ci().Ri(i.d1({scale1DConstructor:Eo,dimension:"x"}),u)):(u=i.d1({scale1DConstructor:er,dimension:"x"}),this.gB=new Ci().Ri(u,i.d1({scale1DConstructor:Eo,dimension:"y"}))):(this.gB=i.d2({scaleXYConstructor:xe}),u=this.Ts.getWidth(this.gB)),this.OB=this.es.yg(),this.M_=new Na(()=>this.b_._t(this.EB.Ob(this.gB).Jo(0)),(y,m,p)=>(y.Ce(p.fillStyle).we(p.strokeStyle),m.map(x=>{const b=x.existingMember||y.zr();return b.pl(x.vertices),this.b_.Ot(b,x.bar),x.bar.gs([b]),b})),()=>{this.b_.Nt()},y=>{this.OB.fs(y)}),this.FS=this.qg.ke(this.gB).Ce(this.qi.barChartSeriesBackgroundFillStyle||Vt).we(vt),this.IS=this.qg.ke(this.gB).Ce(Vt).we(this.qi.barChartSeriesBackgroundStrokeStyle||vt).setMouseInteractions(!1),super.TS(this.FS,this.IS),this.categoryAxis=new PV(this,this.qi,(o==null?void 0:o.disableAnimations)!==!0&&(o==null?void 0:o.animationsEnabled)!==!1,u,this.zB,this.es);const d=hp(o==null?void 0:o.valueAxis);this.valueAxis=new IV(this,this.qi,(o==null?void 0:o.disableAnimations)!==!0&&(o==null?void 0:o.animationsEnabled)!==!1,this.Ts.getHeight(this.gB),this.zB,this.es,d.type),this.NB=new Hr(()=>this.zB.Pr(this.gB).Ir(ea).Fr(ea).Jo(1)),this.GB=new Na(()=>this.qg.Lg(this.gB).setMouseInteractions(!1),(y,m,p)=>(y.Re(p.lineStyle),m.map(({positions:x,existingMember:b})=>(b||y.zr()).Eg(x[0],x[1])))),this.jy=e.Zy();const f=Fe(o?o.autoCursorBuilder:void 0,wF);this.Pm=f.uy(this.jy,this.uiScale,this.uiScale,this.qi),this.onResize(this.fn),this.Sm(n,this.gB),this.setAutoCursorMode($e.onHover),this.setAnimationsEnabled((o==null?void 0:o.disableAnimations)!==!0&&(o==null?void 0:o.animationsEnabled)!==!1),this.LS((y,m)=>{ls.Bm(this,m)})}getSeries(){return this.xS}setAutoCursor(t){return this.Pm&&t(this.Pm),this.us.Ss(),this}getAutoCursor(){return this.Pm}setAutoCursorMode(t){return this.Gy=t,this.us.Ss(),this}getAutoCursorMode(){return this.Gy}setCursorResultTableFormatter(t){return this.Wy=t,this.us.Ss(),this}setBarsMargin(t){return this.RB=Zt(t,0,.49),this.FB=!0,this.us.Ss(),this}getBarsMargin(){return this.RB}setBarsEffect(t){return this.OB.ps(t),this.us.Ss(),this}getBarsEffect(){return this.OB.vs()}setData(t){let e;if(Array.isArray(t))e=[],t.forEach((i,s)=>{typeof i=="string"?e.push({category:i}):typeof i=="number"?e.push({category:`Category ${s+1}`,value:i}):typeof i=="object"&&e.push(i)});else{e=[];const i=Object.keys(t);for(const s of i){const n=t[s];e.push({category:s,value:typeof n=="number"?n:void 0})}}return this.WB("columns",e),this}setDataStacked(t,e){const i=[];return e.forEach(s=>{const{subCategory:n,values:a}=s;a.forEach((o,l)=>{const u=t[l];i.push({category:u,subCategory:n,value:o})})}),this.WB("stacks",i),this}setDataGrouped(t,e){const i=[];return e.forEach(s=>{const{subCategory:n,values:a}=s;a.forEach((o,l)=>{const u=t[l];i.push({category:u,subCategory:n,value:o})})}),this.WB("groups",i),this}WB(t,e){this.xS.length>0&&this.us.Nn(Ct.vf),this.PB=t,this.UB(e);const i=uo(e.map(a=>a.category)),s=i.length,n=uo(e.map(a=>a.subCategory)).filter(a=>a!==void 0);if(e.forEach(a=>{let o=this.xS.find(l=>l.category===a.category&&l.subCategory===a.subCategory);if(!o){const l=i.indexOf(a.category),u=n.includes(a.subCategory)?n.indexOf(a.subCategory):void 0;o=new UV(this,this._S,this.qi,this.us.es,a.category,a.subCategory,Fe(u,l)),this.PS(o),this.BB.set(o,{category:l,valueStart:this.bB?1e-6:0,valueEnd:a.value!==void 0?a.value:0})}a.value!==void 0&&o.setValue(a.value)}),this.xS.slice().forEach(a=>{e.find(o=>o.category===a.category&&o.subCategory===a.subCategory)===void 0&&(a.dispose(),this.BB.delete(a))}),this.categoryAxis.setInterval(this.Ts.getWidth({x:{start:-.5,end:s-.5},y:{start:s-.5,end:-.5}})),this.yB=this.xS.length===0?void 0:t!=="stacks"?this.xS.reduce((a,o)=>({min:Math.min(a.min,o.getValue()),max:Math.max(a.max,o.getValue())}),{min:Mt,max:Dt}):{min:0,max:i.reduce((a,o)=>Math.max(a,e.reduce((l,u)=>u.category!==o?l:u.value!==void 0?l+u.value:l,0)),0)},this.yB&&(this.pB=this.yB.min>=0?"positive":this.yB.max<=0?"negative":"bipolar",(this.pB==="bipolar"||this.pB==="negative")&&this.bB))throw new Error("LightningChart JS BarChart bipolar/negative data + logarithmic value axis combination not supported.");this.UB(this.xS),this.IB.clear(),this.CB.clear(),this.FB=!0,this.us.Ss()}setCategoryLabels(t){const e=typeof t=="function"?this.TB?t(this.TB):this.TB:t;return this.TB=e?{...this.qi.barChartCategoryLabels,...e}:void 0,this.IB.clear(),this.us.Ss(),this}getCategoryLabels(){return this.TB}setValueLabels(t){var e;const i=typeof t=="function"?this.SB?t(this.SB):this.SB:t,s=(i==null?void 0:i.position)||((e=this.SB)===null||e===void 0?void 0:e.position);return i&&s?s==="after-bar"?this.SB={...this.qi.barChartValueLabelsAfterBars,...i}:s!=="inside-bar"&&s!=="inside-bar-start"&&s!=="inside-bar-centered"&&s!=="inside-bar-end"||(this.SB={...this.qi.barChartValueLabelsInsideBars,...i}):this.SB=void 0,this.CB.clear(),this.us.Ss(),this}getValueLabels(){return this.SB}setLabelFittingEnabled(t){return this.DB=t,this.us.Ss(),this}getLabelFittingEnabled(){return this.DB}getBar(t,e){if((this.PB==="groups"||this.PB==="stacks")&&e===void 0)throw new Error("LightningChart JS BarChart.getBar() | `subCategory` parameter is required for grouped and stacked bar charts!");const i=this.xS.find(s=>s.category===t&&(e===void 0||e===s.subCategory));if(!i)throw new Error(`BarChart.getBar() no such bar: "${t}" ${e?`"${e}"`:""}`);return i}getBars(){return this.xS}setSorting(t){return this.kB=t,this.UB(this.xS),this.us.Ss(),this}getSorting(){return this.kB}setAnimationCategoryPosition(t,e=1){return this.LB=t?{speed:e}:void 0,this.us.Ss(),this}setAnimationValues(t,e=1){return this._y=t?{speed:e}:void 0,this.us.Ss(),this}translateCoordinate(t,e,i){if(i&&Sb(t)&&Dn(e))return super.translateCoordinate(t,e,i);const s=e;let n;if(oS(t))n=this.us.Po(t);else if(Sb(t)){const a=gt(t,this.pixelScale,this.us.dt);n={engineX:a.x,engineY:a.y}}else{if(!OV(t))throw new Error("LightningChart JS BarChart.translateCoordinate unexpected error. Input coordinate system not recognized.");{const a=gt(this.Ts.toPoint(t.iCategory,t.value),this.gB,this.us.dt);n={engineX:a.x,engineY:a.y}}}if(gl(s))return this.us.Do(n);if(s==="barChart"){const a=gt({x:n.engineX,y:n.engineY},this.us.dt,this.gB);return{iCategory:this.Ts.getWidth(a),value:this.Ts.getHeight(a)}}if(Dn(s))return gt({x:n.engineX,y:n.engineY},this.us.dt,this.pixelScale);throw new Error("LightningChart JS BarChart.translateCoordinate unexpected error. Target coordinate system not recognized.")}Zd(){if(this.PB==="columns")return this.xS;const t=uo(Sm(this.xS.map(e=>e.subCategory)));return Sm(t.map(e=>{const i=this.xS.filter(n=>n.subCategory===e),s=i[0];if(s)return(n=>{let a=!1;n.forEach(o=>o.onHighlight((l,u)=>{a||(a=!0,n.forEach(d=>o!==d?d.setHighlight(u):void 0),a=!1)})),n.forEach(o=>o.onDispose(()=>{const l=n.indexOf(o);l>=0&&n.splice(l,1)}))})(i),{attach(n,a){return FR(n,i,{toggleVisibilityOnClick:!0,label:e,style:s.getFillStyle()}),this}}}))}Te(t){var e,i;super.Te(t);const s=this.NB.fp(),n=this.GB.fp(),a=this.xS.filter(A=>A.getVisible()&&A._B),o=uo(a.map(A=>A.category)),l=uo(Sm(a.map(A=>A.subCategory))),u=5e-4*t*(((e=this.LB)===null||e===void 0?void 0:e.speed)||0),d=.003*t*(((i=this.LB)===null||i===void 0?void 0:i.speed)||0),f=this.valueAxis.dt,y=f instanceof er?(A,T)=>{var w;return Tc(A,T,f,((w=this._y)===null||w===void 0?void 0:w.speed)||0)}:(A,T)=>{var w;return s0(A,T,f,((w=this._y)===null||w===void 0?void 0:w.speed)||0)};let m;this.PB==="columns"?m=a.map(A=>({bar:A,position:{category:o.indexOf(A.category),valueStart:this.bB?1e-6:0,valueEnd:A.value}})):this.PB==="groups"?m=a.map(A=>{const T=o.indexOf(A.category),w=l.indexOf(A.subCategory),C=1/(l.length+2*(l.length+1)*this.RB),k=this.RB*C;return{bar:A,position:{category:T+(w-(l.length-1)/2)*(C+k),valueStart:this.bB?1e-6:0,valueEnd:A.value}}}):(m=[],o.forEach((A,T)=>{const w=a.filter(k=>k.category===A);let C=this.bB?1e-6:0;w.forEach((k,_)=>{m.push({bar:k,position:{category:o.indexOf(A),valueStart:C,valueEnd:C+k.value}}),C+=k.value})})),m.forEach(A=>{const{bar:T,position:w}=A;let C,k,_=this.BB.get(T);_===void 0&&(_=w);const X=w.valueStart;if(this.LB&&_.category!==w.category){const N=Math.sign(w.category-_.category);C=_.category+u*N+d*(w.category-_.category),N!==Math.sign(w.category-C)&&(C=w.category)}else C=w.category;if(this._y&&_.valueEnd!==w.valueEnd){const N=Math.sign(w.valueEnd-_.valueEnd);k=y(_.valueEnd,w.valueEnd),N!==Math.sign(w.valueEnd-k)&&(k=w.valueEnd)}else k=w.valueEnd;this.BB.set(T,{category:C,valueStart:X,valueEnd:k}),C===w.category&&k===w.valueEnd||this.us.Ss(!0),C===_.category&&k===_.valueEnd||(this.FB=!0)}),rs.Fm(this._m,this.bm);const p=a.length>0;this.categoryAxis.Mr(),this.valueAxis.Mr();const x=this.categoryAxis.setVisible(p).Ps(),b=this.valueAxis.setVisible(p).Ps(n),{labelMarginBeforeCategoryAxisPixels:v}=p?this.YB(o,a,s,n):{labelMarginBeforeCategoryAxisPixels:0};this.categoryAxis.Te(x,s,n,{labelMarginBeforeCategoryAxisPixels:v}),this.valueAxis.Te(b);const R=this.categoryAxis.getThickness(),E=Zt(x.Vd+v,R.min!==void 0?R.min:0,R.max!==void 0?R.max:Mt),V={x:Math.min(this.gB.x.getInnerStart(),this.gB.x.getInnerEnd()),y:Math.min(this.gB.y.getInnerStart(),this.gB.y.getInnerEnd())},F=Math.max(this.gB.x.getInnerStart(),this.gB.x.getInnerEnd()),L=Math.max(this.gB.y.getInnerStart(),this.gB.y.getInnerEnd()),z={x:F-V.x,y:L-V.y};this.FS.Fe(V),this.FS.q(z),this.IS.Fe(V),this.IS.q(z),super.pm(),ls.Im(this,this.FS.getIsUnderMouse(),!1,this.xS,void 0,(A,T)=>A.Hc(T,!0));const B=rs.Tm(this._m,this.bm);if(this.gB.zi([this.Xt.bottom+this.ya.bottom+(this.Ts.VB==="vertical"?E:0),this.Xt.top+this.ya.top+B+(this.Ts.VB==="horizontal"?b.Vd:0)]),this.gB.Ei([this.Xt.left+this.ya.left+this.Ts.getHeight({x:E,y:b.Vd}),this.Xt.right+this.ya.right]),this.EB.qv({x:this.gB.x.ei(),y:this.gB.y.ei(),width:this.gB.x.ri(),height:this.gB.y.ri()}),this.Zg&&this.Zg(),this.FB){const A=this.M_.fp(),T=this.PB==="groups"?1/(l.length+2*(l.length+1)*this.RB):1-2*this.RB;a.forEach(w=>{const C=this.BB.get(w);if(C===void 0)return;const k=C.category-.5*T,_=C.category+.5*T,X=[this.Ts.toPoint(k,C.valueStart),this.Ts.toPoint(k,C.valueEnd),this.Ts.toPoint(_,C.valueEnd),this.Ts.toPoint(_,C.valueStart)];A.add({No:w.No,vertices:X,bar:w},{fillStyle:w.be,strokeStyle:w.xe})}),A.finishPlot()}s.finishPlot(),n.finishPlot(),this.FB=!1}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationCategoryPosition(t),this.setAnimationValues(t),this.valueAxis.setAnimationsEnabled(t),this.categoryAxis.setAnimationsEnabled(t),this}solveNearest(t){}dispose(){return this.zB.W(),this.EB.W(),this.Pm.dispose(),this.jy.W(),super.dispose()}UB(t){const e=this.kB;e&&t.sort((i,s)=>e({category:i.category,value:t.reduce((n,a)=>n+(a.category===i.category&&a.value||0),0)},{category:s.category,value:t.reduce((n,a)=>n+(a.category===s.category&&a.value||0),0)}))}YB(t,e,i,s){let n=0;const a=this.TB,o=this.SB,l=this.valueAxis.getInterval(),u=this.Ts.getWidth({x:this.gB.x.ri(),y:this.gB.y.ri()});if(a&&a.labelFillStyle!==Vt){const d=a.tickLength+a.labelMargin,f=this.Ts.toPoint(0,1),y={kd:t.map((p,x)=>{const b=e.reduce((E,V)=>V.category!==p?E:E+V.value,0),v=a.formatter(p,b);if(!v)return;const R=x;return R!==void 0?{text:v,position:this.Ts.toPoint(R,this.valueAxis.dt.mi(l.start,-d)),alignment:f,rotation:a.labelRotation,sizePixels:this.HB(p,b)}:void 0}),Nu:a.labelFont,dt:this.gB},m=y?this.DB?y2(y,u,this.Ts.getWidth):y.kd:[];m.forEach(p=>{p&&i.add().Rh(p.text).Fe(p.position).Ea(p.alignment).Nh(p.rotation).Ce(a.labelFillStyle).Oh(a.labelFont)}),a.tickStyle!==vt&&a.tickLength!==0&&m.forEach(p=>{if(!p)return;const x=this.Ts.getWidth(p.position);s.add({positions:[this.Ts.toPoint(x,this.valueAxis.dt.getInnerStart()),this.Ts.toPoint(x,this.valueAxis.dt.mi(l.start,-a.tickLength))]},{lineStyle:a.tickStyle})}),n=m.reduce((p,x)=>x?Math.max(p,this.Ts.getHeight(x.sizePixels)):p,0)+a.tickLength+a.labelMargin}if(o&&o.labelFillStyle!==Vt){let d;o.position==="after-bar"?d={kd:e.map((f,y)=>{const m=o.formatter(f,f.category,f.value);if(!m)return;const p=this.BB.get(f);return p!==void 0?{text:m,position:this.Ts.toPoint(p.category,this.valueAxis.dt.mi(p.valueEnd,o.labelMargin*Math.sign(p.valueEnd))),alignment:this.Ts.toPoint(0,-1*Math.sign(p.valueEnd)),rotation:o.labelRotation,sizePixels:this.$B(f)}:void 0}),Nu:o.labelFont,dt:this.gB}:o.position!=="inside-bar"&&o.position!=="inside-bar-start"&&o.position!=="inside-bar-centered"&&o.position!=="inside-bar-end"||(d={kd:e.map((f,y)=>{const m=o.formatter(f,f.category,f.value);if(!m)return;const p=this.BB.get(f);if(p===void 0)return;const x=this.pB==="bipolar"?Math.sign(p.valueEnd):this.pB==="negative"?-1:1,b=this.Ts.toPoint(0,o.position==="inside-bar"||o.position==="inside-bar-end"?1*x:o.position==="inside-bar-centered"?0:-1*x);return{text:m,position:this.Ts.toPoint(p.category,o.position==="inside-bar"||o.position==="inside-bar-end"?this.valueAxis.dt.mi(p.valueEnd,-o.labelMargin*x):o.position==="inside-bar-centered"?(p.valueStart+p.valueEnd)/2:this.valueAxis.dt.mi(p.valueStart,o.labelMargin*x)),alignment:b,rotation:o.labelRotation,sizePixels:this.$B(f)}}),Nu:o.labelFont,dt:this.gB}),d&&(d?this.DB?y2(d,u,this.Ts.getWidth):d.kd:[]).forEach(f=>{f&&i.add().Rh(f.text).Fe(f.position).Ea(f.alignment).Nh(f.rotation).Ce(o.labelFillStyle).Oh(o.labelFont).setMouseInteractions(!1)})}return{labelMarginBeforeCategoryAxisPixels:n}}HB(t,e){if(!this.TB||this.TB.labelFillStyle===Vt)return{x:0,y:0};const i=this.IB.get(t);if(i)return i;const s=this.TB.formatter(t,e),n=this.us.Ig.Fg(s,this.TB.labelFont,this.TB.labelRotation);return n.isEstimate?this.us.Ss(!0):this.IB.set(t,n),n}$B(t){if(!this.SB||this.SB.labelFillStyle===Vt)return{x:0,y:0};const e=this.CB.get(t);if(e)return e;const i=this.us.Ig.Fg(this.SB.formatter(t,t.category,t.value),this.SB.labelFont,this.SB.labelRotation);return i.isEstimate?this.us.Ss(!0):this.CB.set(t,i),i}vB(){return this.xS.reduce((t,e)=>{const i=this.$B(e);return{x:Math.max(t.x,i.x),y:Math.max(t.y,i.y)}},{x:0,y:0})}wB(){this.FB=!0,this.us.Ss()}getMinimumSize(){return{x:200,y:200}}}const GV={Descending:(r,t)=>t.value-r.value},YV={...n0,VB:"vertical",xB:-1,MB:1},HV={...SS,VB:"horizontal",xB:1,MB:-1},_f=(r,t)=>t?r.x:r.y,XV=(r,t,e,i)=>t===1&&i===(e?r.columnIndex:r.rowIndex)||t===-1&&i===(e?r.columnIndex+r.columnSpan:r.rowIndex+r.rowSpan),m2=(r,t,e,i,s,n)=>{const a=t.length,o=Math.sign(i),l=[],u=t.reduce((p,x)=>p+x);for(let p=1;p<=a-1;p+=1)l.push(_f(s,n)*t.slice(0,p).reduce((x,b)=>x+b,0)/u);const d=l.map(p=>0);let f=l[e-1]+i;for(let p=e;p>0&&p<a;p+=o){const x=r.filter(v=>XV(v,o,n,p)).reduce((v,R)=>Math.max(v,_f(R.panel.getMinimumSize()||{x:0,y:0},n)),20),b=l[p-1];if(o===1&&f>_f(s,n)-x||o===-1&&f<0+x){d.fill(0);break}if(p!==e&&(o===1?b>f:b<f))break;d[p-1]=f-b,f+=x*o}const y=d.map((p,x)=>l[x]+p),m=y.map((p,x)=>(p-(x>0?y[x-1]:0))/_f(s,n));return m.push(1-m.reduce((p,x)=>p+x,0)),m};class tT{constructor(t,e,i,s,n){this.coordsRelative="relative",this.coordsClient="client",this.$i=!1,this.RP=new Array,this.D=new Ii,this.XB=[],this.$g=[],this.jB=void 0,this.ZB=!0,this.QB=!0,this.JB=!0,this.Qg=!1,this.KB=!0,this.qB=()=>{this.KB=!0,this.us.Ss()},this.tL=[],this.onInViewChange=f=>this.D.on("inViewChange",f),this.offInViewChange=f=>this.D.off(f,"inViewChange"),this.iL=f=>{for(let y=0;y<this.RP.length;y+=1)if(this.RP[y].panel===f){this.RP.splice(y,1),this.ZB=!0,this.us.Ss();break}},this.sL=f=>{const y=this.XB.indexOf(f);y>=0&&this.XB.splice(y,1)},this.im=f=>{const y=this.$g.indexOf(f);y>=0&&this.$g.splice(y,1)},this.eL=(f,y,m,p,x)=>{if(this.hL(y,m,p,x)){const b={panel:f,columnIndex:y,rowIndex:m,columnSpan:p,rowSpan:x};return this.RP.push(b),this.rL(b),this.ZB=!0,f}throw new uc("Out of dashboard range.")},this.nL=e.numberOfRows,this.oL=e.numberOfColumns,this.cA=t,this.aL=e,this.lL=s;const a=this.oL*this.nL;this.uL={x:new h2(new Array(this.oL).fill(1)),y:new h2(new Array(this.nL).fill(1))},this.qi=i.qi,this.cL=this.qi.dashboardSplitterStyle,this.th=(e==null?void 0:e.disableAnimations)!==!0&&(e==null?void 0:e.animationsEnabled)!==!1,this.dL=hr(i,a),this.fL=i.FI("dashboard splitters",500001),this.OM=()=>this.dL.TI(),this.am=this.dL.II(),this.es=i.es.hs(this,{AL:{}}),this.es.AL.ps(this.qi.effectsDashboardSplitters);const o=i.oi();this.uiScale=fs.d2({scaleXYConstructor:xe}).Vi(0,100).Oi(0,100).q(o),this.pixelScale=fs.d2({scaleXYConstructor:xe}).Vi(0,this.uiScale.x.getCellSize()).Oi(0,this.uiScale.y.getCellSize()).q(o),this.gL=i.mL.bind(i),this.yL=i.pL.bind(i),this.SL=i.vL.bind(i),this.bL=i.xL.bind(i),this.eo=i.eo.bind(i),this.ro=i.ro.bind(i),this.engine=i.hm,this.us=i.rm,i.Co(()=>this.qB()),i.Ss();const l=i.Fo(f=>{this.Qg=f,this.D.emit("inViewChange",this,f)});this.Am=i.Io.bind(i,l),this.ML(),this.setAnimationsEnabled(this.th);const u={on:(d=this.D).on.bind(d,"resize"),off:d.off.bind(d)};var d;this.createChartXY=f=>{const y=pr(f,this.aL,this.th);return this.eL(new DS(this.cA,this.dL.DI(this._L(f.columnIndex,f.rowIndex)),this.wL(y,this.uL),this.iL,n,y,u),y.columnIndex,y.rowIndex,y.columnSpan,y.rowSpan)},this.createSpiderChart=f=>{const y=pr(f,this.aL,this.th);return this.eL(new jE(this.cA,this.dL.DI(this._L(f.columnIndex,f.rowIndex)),this.wL(y,this.uL),this.iL,n,y,u),y.columnIndex,y.rowIndex,y.columnSpan,y.rowSpan)},this.createPolarChart=f=>{const y=pr(f,this.aL,this.th);return this.eL(new XE(this.cA,this.dL.DI(this._L(f.columnIndex,f.rowIndex)),this.wL(y,this.uL),this.iL,n,y,u),y.columnIndex,y.rowIndex,y.columnSpan,y.rowSpan)},this.createPieChart=f=>{const y=pr(f,this.aL,this.th),m=y&&y.type?y.type:CE;return this.eL(new m(this.cA,this.dL.DI(this._L(f.columnIndex,f.rowIndex)),this.wL(y,this.uL),this.iL,n,u,y),y.columnIndex,y.rowIndex,y.columnSpan,y.rowSpan)},this.createGaugeChart=f=>{const y=pr(f,this.aL,this.th),m=y&&y.type?y.type:$E;return this.eL(new m(this.cA,this.dL.DI(this._L(f.columnIndex,f.rowIndex)),this.wL(y,this.uL),this.iL,n,u,y.disableAnimations),y.columnIndex,y.rowIndex,y.columnSpan,y.rowSpan)},this.createFunnelChart=f=>{const y=pr(f,this.aL,this.th),m=y&&y.type?y.type:WE;return this.eL(new m(this.cA,this.dL.DI(this._L(f.columnIndex,f.rowIndex)),this.wL(y,this.uL),this.iL,n,u,y),y.columnIndex,y.rowIndex,y.columnSpan,y.rowSpan)},this.createPyramidChart=f=>{const y=pr(f,this.aL,this.th),m=f&&f.type?f.type:qE;return this.eL(new m(this.cA,this.dL.DI(this._L(f.columnIndex,f.rowIndex)),this.wL(y,this.uL),this.iL,n,u,y),y.columnIndex,y.rowIndex,y.columnSpan,y.rowSpan)},this.createUIPanel=f=>{const y=pr(f,this.aL,this.th);return this.eL(new xS(this.cA,this.dL.DI(this._L(f.columnIndex,f.rowIndex)),this.wL(y,this.uL),this.iL,n,u),y.columnIndex,y.rowIndex,y.columnSpan,y.rowSpan)},this.createLegendBoxPanel=f=>{const y=pr(f,this.aL,this.th);return this.eL(new JF(this.cA,this.dL.DI(this._L(f.columnIndex,f.rowIndex)),this.wL(y,this.uL),this.iL,n,u),y.columnIndex,y.rowIndex,y.columnSpan,y.rowSpan)},this.createZoomBandChart=f=>{const y=pr(f,this.aL,this.th);return this.eL(new HE(this.cA,this.dL.DI(this._L(f.columnIndex,f.rowIndex)),this.wL(y,this.uL),this.iL,n,y,u),y.columnIndex,y.rowIndex,y.columnSpan,y.rowSpan)},this.createMapChart=f=>{const y=pr(f,this.aL,this.th);return this.eL(new DE(this.cA,this.dL.DI(this._L(f.columnIndex,f.rowIndex)),this.wL(y,this.uL),this.iL,n,y,u),y.columnIndex,y.rowIndex,y.columnSpan,y.rowSpan)},this.createChart3D=f=>{const y=pr(f,this.aL,this.th),m=new TS(this.cA,this.dL.DI(this._L(f.columnIndex,f.rowIndex)),this.wL(y,this.uL),this.iL,n,u,y);return this.eL(m,y.columnIndex,y.rowIndex,y.columnSpan,y.rowSpan)},this.createDataGrid=f=>{const y=pr(f,this.aL,this.th),m=new QE(this.cA,this.dL.DI(this._L(f.columnIndex,f.rowIndex)),this.wL(y,this.uL),this.iL,n,u);return this.eL(m,y.columnIndex,y.rowIndex,y.columnSpan,y.rowSpan)},this.createBarChart=f=>{const y=pr(f,this.aL,this.th),m=new KE(this.cA,this.dL.DI(this._L(f.columnIndex,f.rowIndex)),this.wL(y,this.uL),this.iL,n,u,y);return this.eL(m,y.columnIndex,y.rowIndex,y.columnSpan,y.rowSpan)}}_L(t,e){return t+e*this.oL}wL(t,e){return{d1:i=>new i.scale1DConstructor(i.dimension==="x"?t.columnIndex:t.rowIndex,i.dimension==="x"?t.columnSpan:t.rowSpan,i.dimension==="x"?this.oL:this.nL,i.dimension==="x"?e.x:e.y),d2:i=>new i.scaleXYConstructor().ot({x:t.columnIndex,y:t.rowIndex},{x:t.columnSpan,y:t.rowSpan},{x:this.oL,y:this.nL},e),d3:()=>new pR({x:t.columnIndex,y:t.rowIndex},{x:t.columnSpan,y:t.rowSpan},{x:this.oL,y:this.nL},e)}}setWidth(t){return t instanceof Array||(t=[t,t]),this.gL(t[0]),this.yL(t[1]),this}setHeight(t){return t instanceof Array||(t=[t,t]),this.SL(t[0]),this.bL(t[1]),this}getWidth(){return this.eo()}getHeight(){return this.ro()}setBackgroundFillStyle(t){return this.engine.setBackgroundFillStyle(t),this.fL.Ss(),this}getBackgroundFillStyle(){return this.engine.getBackgroundFillStyle()}setBackgroundStrokeStyle(t){return this.engine.setBackgroundStrokeStyle(t),this.fL.Ss(),this}getBackgroundStrokeStyle(){return this.engine.getBackgroundStrokeStyle()}getTheme(){return this.qi}setSplitterStyle(t){const e=this.cL;return this.cL=typeof t=="function"?t(this.cL):t,this.CL(e),this}getSplitterStyle(){return this.cL}setSplitterEffect(t){return this.es.AL.ps(t),this.us.Ss(),this}getSplitterEffect(){return this.es.AL.vs()}setAnimationHighlight(t){return this.JB=t,this.tL.forEach(e=>this.us.ls._s(e.line,t)),this}getAnimationHighlight(){return this.JB}CL(t){for(const e of this.tL)e.line.Re(this.cL);this.ML()}setColumnWidth(t,e){const i=this.uL.x.M();return t>=0&&t<i.length&&(i[t]=e,this.uL.x.S(i)),this.qB(),this}getColumnWidth(t){const e=this.uL.x.M();if(t>=e.length)throw new uc("Column index is out of dashboard range.");return e[t]}setRowHeight(t,e){const i=this.uL.y.M();return t>=0&&t<i.length&&(i[Math.abs(i.length-1-t)]=e,this.uL.y.S(i)),this.qB(),this}getRowHeight(t){const e=this.uL.y.M();if(t>=e.length)throw new uc("Row index is out of dashboard range.");return e[Math.abs(e.length-1-t)]}getSizePixels(){return this.pixelScale.getInnerIntervalPixels()}onResize(t){return this.D.on("resize",t)}offResize(t){return this.D.off(t,"resize")}kL(t,e,i){if(i&&Math.abs(t.x)>0)this.TL(e,t.x);else{if(i||!(Math.abs(t.y)>0))return;this.FL(e,t.y)}for(const s of this.RP)s.panel.Z();this.qB()}FL(t,e){const i=m2(this.RP,this.uL.y.M(),t,e,this.pixelScale.oi(),!1);this.uL.y.S(i),this.qB()}TL(t,e){const i=m2(this.RP,this.uL.x.M(),t,e,this.pixelScale.oi(),!0);this.uL.x.S(i),this.qB()}IL(){this.tL.forEach(t=>t.line.dispose()),this.tL.length=0;for(let t=1;t<=this.oL-1;t+=1)for(let e=0;e<=this.nL-1;e+=1)if(this.RP.find(i=>$n(e,i.rowIndex,i.rowIndex+i.rowSpan-1)&&(t===i.columnIndex||t===i.columnIndex+i.columnSpan))!==void 0){const i=Is(new wr(()=>{this.PL(t)},(n,a,o,l,u)=>{this.kL(l,t,!0),At(u)},()=>{this.DL(t)})),s=this.fL.Ee(this.pixelScale).Re(this.cL).setMouseEnterEventHandler(()=>{this.PL(t)}).setMouseLeaveEventHandler(()=>{this.DL(t)}).setMouseDragEventHandler((n,a,o,l,u)=>{this.kL(u,t,!0),At(a)}).setTouchStartEventHandler(i.onTouchStart).setTouchMoveEventHandler(i.onTouchMove).setTouchEndEventHandler(i.onTouchEnd);this.us.ls.os(s,n=>s.cs(n),{animationEnabled:this.JB}),this.tL.push({row:e,column:t,line:s,alignment:"vertical"})}for(let t=1;t<=this.nL-1;t+=1)for(let e=0;e<=this.oL-1;e+=1)if(this.RP.find(i=>$n(e,i.columnIndex,i.columnIndex+i.columnSpan-1)&&(t===i.rowIndex||t===i.rowIndex+i.rowSpan))!==void 0){const i=Is(new wr(()=>{this.BL(t)},(n,a,o,l,u)=>{this.kL(l,t,!1),At(u)},()=>{this.LL(t)})),s=this.fL.Ee(this.pixelScale).Re(this.cL).setMouseEnterEventHandler(()=>{this.BL(t)}).setMouseLeaveEventHandler(()=>{this.LL(t)}).setMouseDragEventHandler((n,a,o,l,u)=>{this.kL(u,t,!1),At(a)}).setTouchStartEventHandler(i.onTouchStart).setTouchMoveEventHandler(i.onTouchMove).setTouchEndEventHandler(i.onTouchEnd);this.us.ls.os(s,n=>s.cs(n),{animationEnabled:this.JB}),this.tL.push({row:t,column:e,line:s,alignment:"horizontal"})}this.es.AL.fs(this.tL.map(t=>t.line))}RL(){const t=this.pixelScale.oi(),e=this.uL.x.M(),i=e.reduce((a,o)=>a+o),s=this.uL.y.M(),n=s.reduce((a,o)=>a+o);this.tL.forEach(a=>{if(a.alignment==="vertical"){const o=Y(t.x*e.slice(0,a.column).reduce((u,d)=>u+d,0)/i,t.y*s.slice(0,a.row).reduce((u,d)=>u+d,0)/n),l=Y(o.x,t.y*s.slice(0,a.row+1).reduce((u,d)=>u+d,0)/n);a.line.Ve(o).ze(l)}else{const o=Y(t.x*e.slice(0,a.column).reduce((u,d)=>u+d,0)/i,t.y*s.slice(0,a.row).reduce((u,d)=>u+d,0)/n),l=Y(t.x*e.slice(0,a.column+1).reduce((u,d)=>u+d,0)/i,o.y);a.line.Ve(o).ze(l)}})}PL(t){this.tL.forEach(e=>{e.alignment==="vertical"&&e.column===t&&(this.us.ls.Ms(e.line,1),this.fL.EL(e.line))}),this.jB=this.engine.setMouseStyle(ae.ResizeColumn),this.us.Ss()}BL(t){this.tL.forEach(e=>{e.alignment==="horizontal"&&e.row===t&&(this.us.ls.Ms(e.line,1),this.fL.EL(e.line))}),this.jB=this.engine.setMouseStyle(ae.ResizeRow),this.us.Ss()}DL(t){this.tL.forEach(e=>{e.alignment==="vertical"&&e.column===t&&this.us.ls.Ms(e.line,0)}),this.engine.restoreMouseStyle(this.jB),this.us.Ss()}LL(t){this.tL.forEach(e=>{e.alignment==="horizontal"&&e.row===t&&this.us.ls.Ms(e.line,0)}),this.engine.restoreMouseStyle(this.jB),this.us.Ss()}setAnimationsEnabled(t){return this.th=t,this.getCells().filter(e=>e.panel instanceof Qr).forEach(e=>e.panel.setAnimationsEnabled(t)),this.setAnimationHighlight(this.th),this}getAnimationsEnabled(){return this.th}getCells(){return this.RP.slice()}dispose(){return this.$i||(this.Am&&this.Am(),this.RP.slice().forEach(t=>t.panel.dispose()),this.XB.slice().forEach(t=>t.dispose()),this.$g.slice().forEach(t=>t.dispose()),this.$i=!0,this.lL(),this.D.emit("dispose",this)),this}isDisposed(){return this.$i}onDispose(t){return this.D.on("dispose",t)}offDispose(t){return this.D.off(t,"dispose")}getIsInView(){return this.Qg}saveToFile(t,e,i){return pE(this.engine,t,e,i),this}zL(t){if(this.KB){const e=this.us.dt.oi(),i=e.x,s=e.y;this.uiScale.q(i,s),this.pixelScale.q(i,s);const n=this.uiScale.getInnerIntervalPixels();this.pixelScale.Vi(0,n.x).Oi(0,n.y),this.D.emit("resize",this,n.x,n.y,i,s),this.QB=!0}this.ZB&&(this.IL(),this.ZB=!1,this.QB=!0),this.QB&&(this.RL(),this.QB=!1);for(const e of this.RP)e.panel.Te(t);return this.XB.forEach(e=>e.Ps()),this.XB.forEach(e=>e.Te()),this.$g.forEach(e=>e.Ps()),this.$g.forEach(e=>e.Te()),this.KB=!1,this}j(){for(const t of this.RP)t.panel.j();return this.pixelScale.x.j(),this.pixelScale.y.j(),this.uiScale.x.j(),this.uiScale.y.j(),this}Z(){for(const t of this.RP)t.panel.Z();return this.pixelScale.x.Z(),this.pixelScale.y.Z(),this.uiScale.x.Z(),this.uiScale.y.Z(),this}translateCoordinate(t,e,i){return Y0(t,e,i,this.pixelScale,this.us)}addUIElement(t=pS,e=this.uiScale){e=h0(e,this.pixelScale);const i=o0(t,this.OM(),this.uiScale,e,this.sL,this.qi);return this.XB.push(i),i}addLegendBox(t=O0,e=this.uiScale){e=h0(e,this.pixelScale);const i=o0(t,this.am,this.uiScale,e,this.im,this.qi);return i.setDraggingMode(De.notDraggable),this.$g.push(i),i}getLegendBoxes(){return this.$g}hL(t,e,i,s){return e>=0&&t>=0&&e+s<=this.nL&&t+i<=this.oL}rL(t){const e=this.cL,i=e===vt?0:e.getThickness()/2,s={left:t.columnIndex>0?i:0,top:t.rowIndex<this.nL-1?i:0,right:t.columnIndex<this.oL-1?i:0,bottom:t.rowIndex>0?i:0};t.panel.Fr(s)}ML(){this.uiScale.x.si([0,0]),this.uiScale.y.si([0,0]),this.pixelScale.x.si([0,0]),this.pixelScale.y.si([0,0]);for(const t of this.RP)this.rL(t);this.us.Ss()}}const pr=(r,t,e)=>{const i={...r,columnSpan:r.columnSpan||1,rowSpan:r.rowSpan||1,animationsEnabled:r.disableAnimations!==void 0?!r.disableAnimations:r.animationsEnabled!==void 0?r.animationsEnabled:e};var s,n;return i.rowIndex=(s=i.rowIndex,n=i.rowSpan,t.numberOfRows-(s+n)),i},f0=(r,t)=>Math.abs(r)+Math.abs(t);function p2(r,t){const e=r.reduce(f0,0),i=(s=r,Math.max(...s.map(a=>a)));var s;const n=(a=>Math.min(...a.map(o=>o)))(r);return Math.max(t**2*i/e**2,e**2/(t**2*n))}const Xf=({height:r,width:t})=>r>t?{value:t,vertical:!1}:{value:r,vertical:!0},S2=({data:r,dimensions:t})=>{const{x:e,y:i,width:s,height:n}=t;r.map(y=>y.value).reduce(f0,0);const a=r.map(y=>y.animatedValue).reduce(f0,0),o=r.map(y=>y.animatedValue*n*s/a),l=o.reduce((y,m)=>y+m,0),u=o.map(y=>y/l*100),d=o.filter((y,m)=>u[m]),f={children:[],x:e,y:i,width:s,height:n};if(r.length===1){const y={...r[0],x:t.x,y:t.y,width:t.width,height:t.height};f.children.push(y)}else WV(d,Xf(f).value,r,f);return f.children},x2=(r,t,e,i,s)=>{const n=r.reduce(f0,0)/t;r.forEach((a,o)=>{const l=Math.abs(a)/n,{x:u,y:d,children:f}=s,y={...i[f.length],x:u,y:d,width:e?n:l,height:e?l:n};e?s.y+=l:s.x+=l,f.push(y)}),e?(s.x+=n,s.y-=t,s.width-=n):(s.x-=t,s.y+=n,s.height-=n)},WV=(r,t,e,i)=>{const s=[{children:r,width:t,row:[]}];for(;s.length>0;){const n=s.pop();if(!n)continue;const{children:a,width:o,row:l}=n;let u=0;const d=[...l];for(;u<a.length;){const f=[...d,a[u]],y=p2(d,o),m=p2(f,o);if(!(d.length===0||y>m)){x2(d,o,Xf(i).vertical,e,i),s.push({children:a.slice(u),width:Xf(i).value,row:[]});break}d.push(a[u]),u+=1}u===a.length&&x2(d,o,Xf(i).vertical,e,i)}};class $V extends Qr{constructor(t,e,i,s,n,a,o){if(super(t,e,i,e.vm("treeMapChart bg",0),s,e.us.qi.treeMapChartBackgroundFillStyle||e.us.qi.chartXYSeriesBackgroundFillStyle,e.us.qi.treeMapChartBackgroundStrokeStyle||e.us.qi.chartXYBackgroundStrokeStyle,e.us.qi.treeMapChartTitleFont||e.us.qi.chartXYTitleFont,e.us.qi.treeMapChartTitleFillStyle||e.us.qi.chartXYTitleFillStyle,o),this.VL=new Map,this.OL=[],this.NL={},this.GL=Wt([]),this._y={speed:1},this.WL=Mt,this.UL=!0,this.YL="Go Back",this.HL=[],this.$L=this.qi.treeMapChartPathLabelFillStyle||this.qi.uiTextFillStyle,this.XL=this.qi.treeMapChartPathLabelFont||this.qi.uiTextFont,this.jL=this.qi.treeMapChartLabelHeaderFillStyle||this.qi.uiTextFillStyle,this.ZL=this.qi.treeMapChartLabelHeaderFont||this.qi.uiTextFont,this.QL=this.qi.treeMapChartLabelFillStyle||this.qi.uiTextFillStyle,this.JL=this.qi.treeMapChartLabelFont||this.qi.uiTextFont,this.Yi=!0,this.bb=$e.onHover,this.Wy=qV,this.Mb=!0,this.KL=!1,this.qL=this.qi.treeMapChartParentColor||Je,this.tR=this.qi.treeMapChartNodeStrokeStyle||this.qi.uiBackgroundStrokeStyle,this.onNodeMouseEnter=u=>this.D.on("mouseEnter",u),this.onNodeMouseLeave=u=>this.D.on("mouseLeave",u),this.onNodeMouseClick=u=>this.D.on("mouseClick",u),this.onNodeMouseDoubleClick=u=>this.D.on("mouseDoubleClick",u),this.onNodeMouseDown=u=>this.D.on("mouseDown",u),this.onNodeMouseUp=u=>this.D.on("mouseUp",u),this.onNodeMouseMove=u=>this.D.on("mouseMove",u),this.offNodeMouseEnter=u=>this.D.off(u,"mouseEnter"),this.offNodeMouseLeave=u=>this.D.off(u,"mouseLeave"),this.offNodeMouseClick=u=>this.D.off(u,"mouseClick"),this.offNodeMouseDoubleClick=u=>this.D.off(u,"mouseDoubleClick"),this.offNodeMouseDown=u=>this.D.off(u,"mouseDown"),this.offNodeMouseUp=u=>this.D.off(u,"mouseUp"),this.offNodeMouseMove=u=>this.D.off(u,"mouseMove"),this.offNodeMouseDragStart=u=>this.D.off(u,"mouseDragStart"),this.offNodeMouseDrag=u=>this.D.off(u,"mouseDrag"),this.offNodeMouseDragStop=u=>this.D.off(u,"mouseDragStop"),this.offNodeMouseWheel=u=>this.D.off(u,"mouseWheel"),this.Cb=(u,d,f,y,m)=>{this.us.Ss(),this.KL=!0},this.wt=(u,d)=>{const f=this.iR(d);f&&(this.bb!==$e.disabled&&(this.Hb=f,At(u)),this.Mb&&this.us.ls.Ms(d,!0),this.UL&&this.engine.setMouseStyle(ae.Point),this.D.emit("mouseEnter",this,u,f.userNode),this.us.Ss())},this.Ct=(u,d)=>{const f=this.iR(d);f&&(this.bb!==$e.disabled&&(this.Hb=void 0,u&&At(u)),this.Mb&&this.us.ls.Ms(d,!1),this.engine.setMouseStyle(ae.Default),this.D.emit("mouseLeave",this,u,f.userNode),this.us.Ss())},this.Pt=(u,d)=>{const f=this.iR(d);f&&(this.bb!==$e.disabled&&(this.Hb=f,At(u)),this.Mb&&this.us.ls.Ms(d,!0),this.UL&&this.engine.setMouseStyle(ae.Point),this.D.emit("mouseEnter",this,u,f.userNode),this.us.Ss())},this.kt=(u,d)=>{const f=this.iR(d);if(f){if(this.UL){const y=f!=null&&f.children.length?f:f.parentID?this.NL[f.parentID]:void 0;y&&(this.GL.S([y]),this.Hb=void 0,this.D.emit("viewChange",this.GL.M()),this.KL=!0),u&&At(u)}this.D.emit("mouseClick",this,u,f.userNode),this.us.Ss()}},this.Tt=(u,d)=>{var f;const y=(f=this.VL.get(d))===null||f===void 0?void 0:f.userNode;this.D.emit("mouseDoubleClick",this,u,y)},this.Ft=(u,d)=>{var f;const y=(f=this.VL.get(d))===null||f===void 0?void 0:f.userNode;this.D.emit("mouseDown",this,u,y)},this.It=(u,d)=>{var f;const y=(f=this.VL.get(d))===null||f===void 0?void 0:f.userNode;this.D.emit("mouseUp",this,u,y)},this.Bt=(u,d,f)=>{var y;const m=(y=this.VL.get(f))===null||y===void 0?void 0:y.userNode;this.D.emit("mouseDragStart",this,u,d,m)},this.Dt=(u,d,f,y,m)=>{var p;const x=(p=this.VL.get(m))===null||p===void 0?void 0:p.userNode;this.D.emit("mouseDrag",this,u,d,f,y,x)},this.Lt=(u,d,f,y)=>{var m;const p=(m=this.VL.get(y))===null||m===void 0?void 0:m.userNode;this.D.emit("mouseDragStop",this,u,d,f,p)},this.Rt=(u,d)=>{var f;const y=(f=this.VL.get(d))===null||f===void 0?void 0:f.userNode;this.D.emit("mouseWheel",this,u,y)},this.Et=(u,d)=>{const f=this.iR(d);f&&(this.bb!==$e.disabled&&(this.Hb=f),this.Mb&&this.us.ls.Ms(d,!0),this.D.emit("touchStart",this,u,f.userNode),this.us.Ss(),At(u))},this.zt=(u,d)=>{const f=this.iR(d);f&&(this.bb!==$e.disabled&&(this.Hb=f),this.Mb&&this.us.ls.Ms(d,!0),this.D.emit("touchMove",this,u,f.userNode),this.us.Ss(),At(u))},this.Vt=(u,d)=>{const f=this.iR(d);if(f){if(this.bb!==$e.disabled&&(this.Hb=void 0),this.UL){const y=f!=null&&f.children.length?f:f.parentID?this.NL[f.parentID]:void 0;y&&(this.GL.S([y]),this.D.emit("viewChange",this.GL.M()),this.KL=!0),u&&At(u)}this.Mb&&this.us.ls.Ms(d,!1),this.D.emit("touchEnd",this,u,f.userNode),this.us.Ss(),At(u)}},this.sR=u=>{const d=this.NL[this.HL[u].id]?[this.NL[this.HL[u].id]]:this.OL;this.GL.S(d),this.D.emit("viewChange",d),this.KL=!0,this.us.Ss()},this.qi.treeMapChartNodeColors)this.eR=this.qi.treeMapChartNodeColors;else{const u=this.qi.pointSeriesFillStyle,d=f=>ce(f)?f.getColor():Je;this.eR=typeof u=="function"?new Array(5).fill(0).map((f,y)=>d(u(y))):[d(u)]}this.us.Nn(Ct.Mf),this.Hy=e.ob("TreeMapChart plotting",0),this.Xy=e.ob("TreeMap UI plotting",1),this.onResize(this.Cb),this._m.Rh("TreeMap Chart");const l=Fe(void 0,wE);this.Eb=l.Ay(e.Zy(),this.pixelScale,this.pixelScale,this.qi).setVisible(!1),this.hR=this.es.yg(),this.Sm(n,this.uiScale),this.Vb=this.Hy.Ob(this.pixelScale).Ce(new ab).we(this.tR),this.rR=this.us.ls.Er(this,{animationEnabled:(a==null?void 0:a.disableAnimations)!==!0&&(a==null?void 0:a.animationsEnabled)!==!1}),this.nR=new Hr(()=>this.Xy.Pr(this.pixelScale).setMouseInteractions(!1)),this.oR=new Hr(()=>this.Xy.Pr(this.uiScale)),this.Vb.setMouseInteractions(this.Yi).setMouseEnterEventHandler((u,d,f)=>this.wt(d,f)).setMouseLeaveEventHandler((u,d,f)=>this.Ct(d,f)).setMouseClickEventHandler((u,d,f)=>this.kt(d,f)).setMouseDoubleClickEventHandler((u,d,f)=>this.Tt(d,f)).setMouseDownEventHandler((u,d,f)=>this.Ft(d,f)).setMouseUpEventHandler((u,d,f)=>this.It(d,f)).setMouseMoveEventHandler((u,d,f)=>this.Pt(d,f)).setMouseDragStartEventHandler((u,d,f,y)=>this.Bt(d,f,y)).setMouseDragEventHandler((u,d,f,y,m,p)=>this.Dt(d,f,y,m,p)).setMouseDragStopEventHandler((u,d,f,y,m)=>this.Lt(d,f,y,m)).setMouseWheelEventHandler((u,d,f)=>this.Rt(d,f)).setTouchStartEventHandler((u,d,f)=>this.Et(d,f)).setTouchMoveEventHandler((u,d,f)=>this.zt(d,f)).setTouchEndEventHandler((u,d,f)=>this.Vt(d,f)),this.setAnimationsEnabled((a==null?void 0:a.disableAnimations)!==!0&&(a==null?void 0:a.animationsEnabled)!==!1)}setData(t){t=Array.isArray(t)?t.slice():[t];const{aR:e}=(()=>{let s=0;return{aR:n=>{var a;const o=n.map((f,y)=>({node:f,parent:null})),l=[];for(;o.length>0;){const f=o.pop();if(!f)continue;const{node:y,parent:m}=f;s+=1;const p={id:s,parentID:m==null?void 0:m.id,name:y.name,value:y.value||0,animatedValue:y.value||0,children:[],nodeIndex:m?m.nodeIndex:-1,userNode:y};m?m.children.push(p):l.push(p),(a=y.children)===null||a===void 0||a.forEach(x=>{o.push({node:x,parent:p})})}const u=f=>{f.children.forEach(u),f.children.length>0&&(f.value+=f.children.reduce((y,m)=>y+m.value,0),f.animatedValue+=f.children.reduce((y,m)=>y+m.animatedValue,0),f.children.sort((y,m)=>m.animatedValue-y.animatedValue))};l.forEach(u);const d=n.length===1?l[0].children:l;return d.sort((f,y)=>y.animatedValue-f.animatedValue),d.forEach((f,y)=>{f.nodeIndex=y;const m=p=>{p.children.forEach(x=>{x.nodeIndex=f.nodeIndex,m(x)})};m(f)}),l}}})(),i=e(t);return i.forEach(s=>{const n=this.NL[s.id];n&&this.lR(s,n)}),this.Hb=void 0,this.GL.S(i),this.OL=i,this.NL=this.uR(i),this.KL=!0,this.us.Ss(),this}setAnimationValues(t,e=1){return this._y=t?{speed:e}:void 0,this.us.Ss(),this}setInitPathButtonText(t){return this.YL=t,this.KL=!0,this.us.Ss(),this}setDisplayedLevelsCount(t){return this.WL=t,this.KL=!0,this.us.Ss(),this}setDrillDownEnabled(t){return this.UL=t,this.KL=!0,this.us.Ss(),this}setDrillDownNode(t){var e,i;if(this.Hb=void 0,t===void 0)this.GL.S(this.OL);else{const s=[...this.OL];for(;s.length>0;){const n=s.pop();if(n){if(n.value!==void 0&&n.userNode===t||n.parentID&&Array.isArray(t)&&((i=(e=this.NL[n.parentID])===null||e===void 0?void 0:e.userNode)===null||i===void 0?void 0:i.children)===t){const a=n.children.length?n:n.parentID?this.NL[n.parentID]:this.OL[0];this.GL.S([a]);break}if(n.children)for(let a=n.children.length-1;a>=0;a-=1)s.push(n.children[a])}}}return this.D.emit("viewChange",this.GL.M()),this.KL=!0,this.us.Ss(),this}setNodeColoring(t){return t instanceof Array?(this.Vb.Ce(new ab),this.eR=t):this.Vb.Ce(t),this.KL=!0,this.us.Ss(),this}setParentNodeColor(t){return this.qL=t,this.KL=!0,this.us.Ss(),this}setPathLabelFillStyle(t){return this.$L=typeof t=="function"?t(this.$L):t,this.KL=!0,this.us.Ss(),this}getPathLabelFillStyle(){return this.$L}setPathLabelFont(t){return dc(t)?this.XL=t:this.XL=t(this.XL),this.KL=!0,this.us.Ss(),this}getPathLabelFont(){return this.XL}setHeaderFont(t){return dc(t)?this.ZL=t:this.ZL=t(this.ZL),this.KL=!0,this.us.Ss(),this}getHeaderFont(){return this.ZL}setHeaderFillStyle(t){return this.jL=typeof t=="function"?t(this.jL):t,this.KL=!0,this.us.Ss(),this}getHeaderFillStyle(){return this.jL}setLabelFont(t){return dc(t)?this.JL=t:this.JL=t(this.JL),this.KL=!0,this.us.Ss(),this}getLabelFont(){return this.JL}setLabelFillStyle(t){return this.QL=typeof t=="function"?t(this.QL):t,this.KL=!0,this.us.Ss(),this}getLabelFillStyle(){return this.QL}setNodeBorderStyle(t){return this.Vb.we(t),this.KL=!0,this.us.Ss(),this}getNodeBorderStyle(){return this.Vb.ao()}setNodeEffect(t){return this.hR.ps(t),this.us.Ss(),this}getNodeEffect(){return this.hR.vs()}setAutoCursor(t){return this.Eb&&t(this.Eb),this.us.Ss(),this}getAutoCursor(){return this.Eb}setAutoCursorMode(t){return this.bb=t,this.us.Ss(),this}getAutoCursorMode(){return this.bb}setCursorResultTableFormatter(t){return this.Wy=t,this.us.Ss(),this}getCursorResultTableFormatter(){return this.Wy}onNodeMouseDragStart(t){return this.D.on("mouseDragStart",t)}onNodeMouseDrag(t){return this.D.on("mouseDrag",t)}onNodeMouseDragStop(t){return this.D.on("mouseDragStop",t)}onNodeMouseWheel(t){return this.D.on("mouseWheel",t)}onNodeTouchStart(t){return this.D.on("touchStart",t)}onNodeTouchMove(t){return this.D.on("touchMove",t)}onNodeTouchEnd(t){return this.D.on("touchEnd",t)}onViewChange(t){return this.D.on("viewChange",t)}offNodeTouchStart(t){return this.D.off(t,"touchStart")}offNodeTouchMove(t){return this.D.off(t,"touchMove")}offNodeTouchEnd(t){return this.D.off(t,"touchEnd")}offViewChange(t){return this.D.off(t,"viewChange")}setMouseInteractions(t){return this.Yi=t,this.Vb.setMouseInteractions(t),this}getMouseInteractions(){return this.Yi}setAnimationHighlight(t){return this.rR.Or(t),this}getAnimationHighlight(){return this.rR.Nr()}setHighlightOnHover(t){return this.Mb=t,this}getHighlightOnHover(){return this.Mb}getMinimumSize(){}Zd(){return[this]}Te(t){super.Te(t),super.pm(),rs.Fm(this._m,this.bm);const e=rs.Tm(this._m,this.bm);if(this.KL&&this.GL.M().length){this.Vb.Nt(),this.VL.clear(),this.rR.Vr(),this.th&&this.cR(t);const s=S2({data:this.GL.M(),dimensions:{x:0+this.ya.left,y:0+this.ya.bottom,width:this.pixelScale.x.getInnerEnd()-this.ya.right-this.ya.left,height:this.pixelScale.y.getInnerEnd()-e-this.ya.top-this.ya.bottom}}),n=this.nR.fp();this.dR(s,n),n.finishPlot(),this.fR(),this.OL!==this.GL.M()&&this.OL.length>1&&this.HL.unshift({name:this.YL,id:0});let a=0;const o=this.oR.fp(),l=this.XL;this.HL.forEach((u,d)=>{const f=o.add(),y=this.us.Ig.Fg(u.name,l,0);f.Rh(` ${u.name}`).Oh(l).Fe({x:0,y:100}).Ea({x:-1,y:1}).Fr({left:this.ya.left+a,top:this.ya.top,right:0,bottom:0}).Ce(this.$L).setMouseClickEventHandler(m=>this.sR(d)).setMouseEnterEventHandler(()=>this.engine.setMouseStyle(ae.Point)).setMouseLeaveEventHandler(()=>this.engine.setMouseStyle(ae.Default)),a+=y.x+25}),o.finishPlot(),this.GL.M().every(u=>u.value===u.animatedValue)?this.KL=!1:this.us.Ss(!0)}const i=this.us.On();if(this.Hb&&i){const s=i;this.Eb.setPosition(s).setVisible(!0).getResultTable().setContent(this.Wy(new Ui,this.Hb).Zu())}else this.Eb.setVisible(!1);return this.Eb.Ps().Te(),this}dispose(){return this.Xy.W(),this.Hy.W(),this.Eb.dispose(),this.Vb.dispose(),this.VL.clear(),this.nR.gp(),this.oR.gp(),super.dispose()}j(){return super.j(),this}Z(){return super.Z(),this}Gd(){return Ji(this.Vb.Eh())}attach(t,e=!0,i=!1){return t.setText(this.getTitle()),t.setOn(!0).setLocked(!0),ii(t,this.qi,i,{}),this}dR(t,e,i=!1,s=0){const n=t.map((a,o)=>({node:a,isChild:i,depth:s}));for(;n.length>0;){const a=n.pop();if(!a)continue;const{node:o,depth:l,opacity:u}=a,{x:d,y:f,height:y,width:m,children:p,animatedValue:x,name:b,nodeIndex:v}=o,R=this.eR,E=l===0&&this.GL.M().length===1?this.qL:R[v%R.length],V=[{x:d,y:f},{x:d,y:y+f},{x:m+d,y:y+f},{x:m+d,y:f}],F=this.Vb.zr().pl(V).AR(E.setA(u||250)).Yb(x);this.VL.set(F,o),this.rR.zr(F,X=>F.cs(X));const L=d+5,z=f+5,B=Math.max(y-25-5,0),A=Math.max(m-5-5,0);if(p&&p.length&&l<this.WL&&A>15&&B>15){const X=S2({data:p,dimensions:{x:A>0?L:d,y:B>0?z:f,width:A,height:B}});for(let N=0;N<X.length;N+=1){const U=(250-(p.length>7?50:150))/(p.length-1),O=o.id===1&&this.OL.length===1||this.OL===this.GL.M()?250:u?u/(l+1):250-N*U;n.push({node:X[N],isChild:!0,depth:l+1,opacity:O})}}const T=l===0&&this.GL.M().length===1?this.jL:this.QL,w=l===0?this.ZL:this.JL,C=this.gR(b,m-25,w),k=this.us.Ig.Fg(C,w,0),_=e.add();m-25>k.x&&y>25?_.Rh(C).Fe({x:d+5,y:y+f-2.5}).Ea({x:-1,y:1}).Ce(T).Oh(w):_.Rh("")}}uR(t){const e={},i=[...t];for(;i.length>0;){const s=i.pop();s&&(e[s.id]=s,s.children&&i.push(...s.children))}return e}iR(t){if(!this.KL&&t)return this.VL.get(t)}fR(){this.HL=[];const t=this.GL.M()[0].id;let e=this.NL[t].parentID;for(;e;)this.HL.push({name:this.NL[e].name,id:e}),e=this.NL[e].parentID;return this.HL.reverse()}gR(t,e,i){let s=this.us.Ig.Fg(t,i,0).x;if(s<=e)return t;const n=t.split(" ");let a=t;for(;n.length>1&&s>e;)n.pop(),a=`${n.join(" ")}...`,s=this.us.Ig.Fg(a,i,0).x;if(s>e)for(a=`${n[0]}...`,s=this.us.Ig.Fg(a,i,0).x;a.length>3&&s>e;)a=`${a.substring(0,a.length-4)}...`,s=this.us.Ig.Fg(a,i,0).x;return a.length<=3&&s>e?"":a}cR(t){var e;const i=[...this.OL];for(;i.length>0;){const s=i.pop();if(!s)continue;const n=s.value-s.animatedValue;if(Math.abs(n)<.0015*s.value||this._y===void 0)s.animatedValue=s.value;else{const a=n/250*(((e=this._y)===null||e===void 0?void 0:e.speed)||1)*t;s.animatedValue+=a,(n>0&&s.animatedValue>s.value||n<0&&s.animatedValue<s.value)&&(s.animatedValue=s.value)}s.children&&s.children.length>0&&i.push(...s.children)}}lR(t,e){const i=[{current:t,previous:e}];for(;i.length>0;){const s=i.pop();if(!s)continue;const{current:n,previous:a}=s;n.animatedValue=this.th?a.animatedValue:n.value,a.nodeIndex<0?n.nodeIndex=0:n.nodeIndex=a.nodeIndex;const o=new Map(a.children.map(l=>[l.id,l]));n.children.forEach((l,u)=>{const d=o.get(l.id);i.push({current:l,previous:d||a})})}}}const qV=(r,t)=>{const{name:e,value:i}=t;return r.addRow(`${e}`).addRow(`${i}`),r},ed=(r,t)=>{const e=(s=>{const n=new it({color:s.uiStrokeColorContrastHigh}),a=new it({color:s.uiStrokeColorContrastMedium}),o=new it({color:s.uiStrokeColorContrastLow}),l=new V0({family:s.fontFamily,weight:"normal",style:"normal"}),u=l.setSize(18*s.fontScaler),d=l.setSize(16*s.fontScaler),f=l.setSize(14*s.fontScaler),y=l.setSize(10*s.fontScaler),m=l.withMutations(Ot=>Ot.set("size",14*s.fontScaler).set("weight","bold")),p=l.setSize(13*s.fontScaler),x=new se({thickness:2,fillStyle:o}),b=new it({color:s.dataHighlightOverlayColor}),v=new se({thickness:2,fillStyle:s.legendBackgroundBorderFillStyle}),R=s.dataColorPalette.map(Ot=>new it({color:Ot.stroke})),E=Ot=>R[Ot%R.length],V=R.map(Ot=>new se({thickness:2,fillStyle:Ot})),F=Ot=>V[Ot%V.length],L=s.dataColorPalette.map(Ot=>new it({color:Ot.border})).map(Ot=>new se({thickness:2,fillStyle:Ot})),z=Ot=>L[Ot%L.length],B=s.dataColorPalette.map(Ot=>{const ne=Ot.area;return new xs({angle:180,stops:[{color:Ss(ne,P(255,255,255,ne.getA()),.3),offset:0},{color:ne,offset:.5},{color:Ss(ne,P(0,0,0,ne.getA()),.3),offset:1}]})}),A=Ot=>B[Ot%B.length],T=s.dataColorPaletteInverted.map(Ot=>{const ne=Ot.area;return new xs({angle:180,stops:[{color:Ss(ne,P(255,255,255,ne.getA()),.3),offset:0},{color:ne,offset:.5},{color:Ss(ne,P(0,0,0,ne.getA()),.3),offset:1}]})}),w=Ot=>T[Ot%T.length],C=s.dataColorPaletteInverted.map(Ot=>new it({color:Ot.border})).map(Ot=>new se({thickness:2,fillStyle:Ot})),k=Ot=>C[Ot%C.length],_=new it({color:s.dataColorPositive}),X=new it({color:s.dataColorNegative}),N=new se({thickness:1,fillStyle:new it({color:s.dataStrokeColorContrastHigh.setA(50)})}),U=new se({thickness:2,fillStyle:s.axisLineFillStyle}),O=vt,W=new it({color:P(0,0,0,1)}),I=new se({thickness:1,fillStyle:s.axisGridMajorFillStyle}),H=new se({thickness:1,fillStyle:s.axisTickMajorFillStyle}),q=f,Q=s.axisLabelMajorFillStyle,J=new se({thickness:1,fillStyle:s.axisGridMajorFillStyle}),ot=new se({thickness:1,fillStyle:s.axisTickMajorFillStyle}),ht=f,ut=s.axisLabelMajorFillStyle,dt=new se({thickness:1,fillStyle:s.axisGridMinorFillStyle}),Tt=new se({thickness:1,fillStyle:s.axisTickMinorFillStyle}),xt=y,zt=s.axisLabelMinorFillStyle,Nt=mE,jt=new pn({gridStrokeStyle:I,tickStyle:H,tickLength:50,tickPadding:-14,labelFont:q,labelPadding:0,labelFillStyle:Q}),ie=new pn({gridStrokeStyle:J,tickStyle:ot,tickLength:7,tickPadding:5,labelFont:ht,labelPadding:0,labelFillStyle:ut}),Ft=new pn({gridStrokeStyle:dt,tickStyle:Tt,tickLength:4,tickPadding:10,labelFont:xt,labelPadding:0,labelFillStyle:zt}),kt=new SF({extremeTickStyle:Nt,majorTickStyle:ie,minorTickStyle:Ft}),Oi=new dF({greatTickStyle:jt,majorTickStyle:ie,minorTickStyle:Ft}),Ye=new AF({majorTickStyle:ie,minorTickStyle:Ft}),Ee=new it({color:s.dataHighlightOverlayColor}),Kr=new se({thickness:1,fillStyle:a}),Qe=new se({thickness:2,fillStyle:a}),ai=Ot=>new e0.Triangulated({shape:"sphere",size:10,fillStyle:R[Ot%R.length]}),dr=R[0],de=s.uiTextFillStyle,Ke=s.legendBackgroundFillStyle,vi=new se({thickness:1,fillStyle:s.legendBackgroundBorderFillStyle}),ge=Zf(s.legendButtonDefaultColor),Pe=Zf(s.isDark?P(70,70,70,255):P(170,170,170,255)),mi=new it({color:s.isDark?P(70,70,70,255):P(170,170,170,255)}),He=new se({thickness:1,fillStyle:n}),Ie=new $D({thickness:1,fillStyle:s.cursorGridFillStyle,pattern:sE.DashedEqual,patternScale:3}),Ia=s.zoomBandChartDefocusOverlayFillStyle,Ue=new se({thickness:2,fillStyle:new it({color:s.zoomBandChartSplitterColor})});let Xe={isDark:s.isDark,effect:s.effect,effectsText:s.effectsText,effectsDashboardSplitters:s.effectsDashboardSplitters,lcjsBackgroundFillStyle:s.lcjsBackgroundFillStyle,lcjsBackgroundStrokeStyle:vt,highlightColorOffset:s.highlightColorOffset,highlightColorOffsetAxisOverlay:s.highlightColorOffsetAxisOverlay,dashboardSplitterStyle:new se({thickness:4,fillStyle:s.dashboardSplitterFillStyle}),chartXYBackgroundFillStyle:s.panelBackgroundFillStyle,chartXYBackgroundStrokeStyle:vt,chartXYTitleFont:u,chartXYTitleFillStyle:s.titleFillStyle,chartXYSeriesBackgroundFillStyle:s.seriesBackgroundFillStyle,chartXYSeriesBackgroundStrokeStyle:x,chartXYZoomingRectangleFillStyle:b,chartXYZoomingRectangleStrokeStyle:v,chartXYFittingRectangleFillStyle:b,chartXYFittingRectangleStrokeStyle:v,lineSeriesStrokeStyle:F,pointLineSeriesStrokeStyle:F,pointLineSeriesFillStyle:E,pointSeriesFillStyle:E,ellipseSeriesFillStyle:E,ellipseSeriesStrokeStyle:F,polygonSeriesFillStyle:E,polygonSeriesStrokeStyle:F,rectangleSeriesFillStyle:E,rectangleSeriesStrokeStyle:vt,segmentSeriesStrokeStyle:F,boxSeriesBodyFillStyle:E(0),boxSeriesBodyStrokeStyle:vt,boxSeriesStrokeStyle:new se({thickness:1,fillStyle:R[0]}),boxSeriesMedianStrokeStyle:new se({thickness:1,fillStyle:new it({color:P(0,0,0)})}),ohlcCandleThicknessPixels:5,ohlcCandleBodyFillStylePositive:_,ohlcCandleBodyFillStyleNegative:X,ohlcCandleTailStrokeStylePositive:new se({thickness:1,fillStyle:new it({color:s.uiStrokeColorContrastHigh})}),ohlcCandleTailStrokeStyleNegative:new se({thickness:1,fillStyle:new it({color:s.uiStrokeColorContrastHigh})}),ohlcBarThicknessPixels:10,ohlcBarStrokeStylePositive:new se({thickness:2,fillStyle:_}),ohlcBarStrokeStyleNegative:new se({thickness:2,fillStyle:X}),heatmapGridSeriesFillStyle:E,heatmapGridSeriesWireframeStyle:N,heatmapScrollingGridSeriesFillStyle:E,heatmapScrollingGridSeriesWireframeStyle:N,areaRangeSeriesFillStyle:A,areaRangeSeriesStrokeStyle:z,areaRangeSeriesFillStyleInverted:w,areaRangeSeriesStrokeStyleInverted:k,areaSeriesBipolarHighFillStyle:A,areaSeriesBipolarHighStrokeStyle:z,areaSeriesBipolarLowFillStyle:w,areaSeriesBipolarLowStrokeStyle:k,areaSeriesPositiveFillStyle:A,areaSeriesPositiveStrokeStyle:z,areaSeriesNegativeFillStyle:w,areaSeriesNegativeStrokeStyle:k,xAxisTitleFont:d,xAxisTitleFillStyle:s.axisTitleFillStyle,xAxisStrokeStyle:U,xAxisNibStyle:O,xAxisOverlayStyle:W,xAxisZoomingBandFillStyle:b,xAxisZoomingBandStrokeStyle:vt,xAxisNumericTicks:kt,xAxisDateTimeTicks:Oi,xAxisTimeTicks:Ye,yAxisTitleFont:d,yAxisTitleFillStyle:s.axisTitleFillStyle,yAxisStrokeStyle:U,yAxisNibStyle:O,yAxisOverlayStyle:W,yAxisZoomingBandFillStyle:b,yAxisZoomingBandStrokeStyle:vt,yAxisNumericTicks:kt,yAxisDateTimeTicks:Oi,yAxisTimeTicks:Ye,bandFillStyle:Ee,bandStrokeStyle:Kr,constantLineStrokeStyle:Qe,barChartBackgroundFillStyle:s.panelBackgroundFillStyle,barChartBackgroundStrokeStyle:vt,barChartTitleFont:u,barChartTitleFillStyle:s.titleFillStyle,barChartSeriesBackgroundFillStyle:Vt,barChartSeriesBackgroundStrokeStyle:vt,barChartBarFillStyle:E,barChartBarStrokeStyle:new se({thickness:1,fillStyle:o}),barChartValueAxisTitleFont:d,barChartValueAxisTitleFillStyle:s.axisTitleFillStyle,barChartValueAxisStrokeStyle:U,barChartValueAxisTicks:kt.setMajorTickStyle(Ot=>Ot.setGridStrokeStyle(vt)).setMinorTickStyle(Ot=>Ot.setGridStrokeStyle(vt)),barChartCategoryAxisTitleFont:d,barChartCategoryAxisTitleFillStyle:s.axisTitleFillStyle,barChartCategoryAxisStrokeStyle:U,barChartCategoryLabels:{formatter:(Ot,ne)=>Ot,labelFillStyle:kt.majorTickStyle.labelFillStyle,labelFont:kt.majorTickStyle.labelFont,labelMargin:8,labelRotation:0,tickStyle:kt.majorTickStyle.tickStyle,tickLength:0},barChartValueLabelsAfterBars:{position:"after-bar",formatter:(Ot,ne,Et)=>Ot.chart.valueAxis.formatValue(Et),labelFillStyle:kt.majorTickStyle.labelFillStyle,labelFont:kt.majorTickStyle.labelFont,labelMargin:8,labelRotation:0},barChartValueLabelsInsideBars:{position:"inside-bar",formatter:(Ot,ne,Et)=>Ot.chart.valueAxis.formatValue(Et),labelFillStyle:kt.majorTickStyle.labelFillStyle,labelFont:kt.majorTickStyle.labelFont,labelMargin:8,labelRotation:0},chart3DBackgroundFillStyle:s.panelBackgroundFillStyle,chart3DBackgroundStrokeStyle:vt,chart3DTitleFont:u,chart3DTitleFillStyle:s.titleFillStyle,chart3DSeriesBackgroundFillStyle:s.seriesBackgroundFillStyle,chart3DSeriesBackgroundStrokeStyle:x,chart3DBoundingBoxStrokeStyle:vt,xAxis3DTitleFont:d,xAxis3DTitleFillStyle:s.axisTitleFillStyle,xAxis3DStrokeStyle:U,xAxis3DNumericTicks:kt,xAxis3DDateTimeTicks:Oi,xAxis3DTimeTicks:Ye,yAxis3DTitleFont:d,yAxis3DTitleFillStyle:s.axisTitleFillStyle,yAxis3DStrokeStyle:U,yAxis3DNumericTicks:kt,yAxis3DDateTimeTicks:Oi,yAxis3DTimeTicks:Ye,zAxis3DTitleFont:d,zAxis3DTitleFillStyle:s.axisTitleFillStyle,zAxis3DStrokeStyle:U,zAxis3DNumericTicks:kt,zAxis3DDateTimeTicks:Oi,zAxis3DTimeTicks:Ye,lineSeries3DStrokeStyle:F,pointLineSeries3DStrokeStyle:F,pointLineSeries3DPointStyle:ai,pointSeries3DPointStyle:ai,pointCloudSeries3DPointStyle:Ot=>new e0.Pixelated({size:5,fillStyle:R[Ot%R.length]}),surfaceGridSeries3DFillStyle:E,surfaceGridSeries3DWireframeStyle:N,surfaceScrollingGridSeries3DFillStyle:E,surfaceScrollingGridSeries3DWireframeStyle:N,boxSeries3DFillStyle:E,meshModel3DFillStyle:E(0),polarChartBackgroundFillStyle:s.panelBackgroundFillStyle,polarChartBackgroundStrokeStyle:vt,polarChartTitleFont:u,polarChartTitleFillStyle:s.titleFillStyle,polarChartSeriesBackgroundFillStyle:s.seriesBackgroundFillStyle,polarChartSeriesBackgroundStrokeStyle:x,polarSectorFillStyle:Ee,polarSectorStrokeStyle:Kr,polarAmplitudeAxisTitleFont:d,polarAmplitudeAxisTitleFillStyle:s.axisTitleFillStyle,polarAmplitudeAxisStrokeStyle:U,polarAmplitudeAxisNumericTicks:kt,polarAmplitudeAxisDateTimeTicks:Oi,polarAmplitudeAxisTimeTicks:Ye,polarRadialAxisTitleFont:d,polarRadialAxisTitleFillStyle:s.axisTitleFillStyle,polarRadialAxisStrokeStyle:U,polarRadialAxisTickStyle:ie,polarLineSeriesStrokeStyle:F,polarPointLineSeriesFillStyle:E,polarPointLineSeriesStrokeStyle:F,polarPointSeriesFillStyle:E,polarPolygonSeriesFillStyle:A,polarPolygonSeriesStrokeStyle:z,polarAreaSeriesFillStyle:A,polarAreaSeriesStrokeStyle:z,polarHeatmapSeriesFillStyle:E,mapChartBackgroundFillStyle:s.panelBackgroundFillStyle,mapChartBackgroundStrokeStyle:vt,mapChartTitleFont:u,mapChartTitleFillStyle:s.titleFillStyle,mapChartFillStyle:dr,mapChartStrokeStyle:new se({thickness:1,fillStyle:new it({color:s.dataStrokeColorContrastMedium})}),mapChartOutlierRegionFillStyle:Vt,mapChartOutlierRegionStrokeStyle:new se({thickness:1,fillStyle:o}),mapChartSeparateRegionFillStyle:Ke,mapChartSeparateRegionStrokeStyle:vi,dataGridBackgroundFillStyle:s.panelBackgroundFillStyle,dataGridBackgroundStrokeStyle:vt,dataGridTitleFont:u,dataGridTitleFillStyle:s.titleFillStyle,dataGridTextFont:f,dataGridTextFillStyle:dr,dataGridCellBackgroundFillStyle:new it({color:s.uiBackgroundColor}),dataGridBorderStrokeStyle:new se({thickness:.4,fillStyle:new it({color:s.uiBackgroundBorderColor})}),dataGridScrollBarBackgroundFillStyle:s.seriesBackgroundFillStyle,dataGridScrollBarBackgroundStrokeStyle:vt,dataGridScrollBarFillStyle:s.seriesBackgroundFillStyle,dataGridScrollBarStrokeStyle:vi,dataGridScrollBarButtonFillStyle:s.seriesBackgroundFillStyle,dataGridScrollBarButtonStrokeStyle:vi,dataGridScrollBarButtonArrowFillStyle:ge,dataGridScrollBarButtonArrowStrokeStyle:vi,sparkLineChartStrokeStyle:F(0),sparkPointChartFillStyle:E(0),sparkBarChartFillStyle:E(0),sparkBarChartStrokeStyle:z(0),sparkAreaChartFillStyle:A(0),sparkAreaChartStrokeStyle:z(0),sparkPieChartFillStyle:E,sparkPieChartStrokeStyle:vi,sparkChartBandFillStyle:Ee,sparkChartBandStrokeStyle:Kr,sparkChartConstantLineStrokeStyle:Qe,spiderChartBackgroundFillStyle:s.panelBackgroundFillStyle,spiderChartBackgroundStrokeStyle:vt,spiderChartTitleFont:u,spiderChartTitleFillStyle:s.titleFillStyle,spiderChartSeriesBackgroundFillStyle:s.seriesBackgroundFillStyle,spiderChartSeriesBackgroundStrokeStyle:x,spiderChartWebStyle:new se({thickness:2,fillStyle:o}),spiderChartScaleLabelFillStyle:s.axisLabelMajorFillStyle,spiderChartScaleLabelFont:f,spiderChartAxisLabelFillStyle:s.axisTitleFillStyle,spiderChartAxisLabelFont:d,spiderChartAxisStrokeStyle:new se({thickness:2,fillStyle:a}),spiderChartAxisNibStrokeStyle:new se({thickness:2,fillStyle:n}),spiderSeriesFillStyle:A,spiderSeriesStrokeStyle:z,spiderSeriesPointFillStyle:E,pieChartBackgroundFillStyle:s.panelBackgroundFillStyle,pieChartBackgroundStrokeStyle:vt,pieChartTitleFont:u,pieChartTitleFillStyle:s.titleFillStyle,pieChartSliceFillStylePalette:E,pieChartSliceStrokeStyle:vi,pieChartSliceLabelFont:p,pieChartSliceLabelFillStyle:s.uiTextFillStyle,pieChartConnectorStrokeStyle:He,funnelChartBackgroundFillStyle:s.panelBackgroundFillStyle,funnelChartBackgroundStrokeStyle:vt,funnelChartTitleFont:u,funnelChartTitleFillStyle:s.titleFillStyle,funnelChartSliceFillStylePalette:E,funnelChartSliceStrokeStyle:vi,funnelChartSliceLabelFont:p,funnelChartSliceLabelFillStyle:s.uiTextFillStyle,funnelChartConnectorStrokeStyle:He,pyramidChartBackgroundFillStyle:s.panelBackgroundFillStyle,pyramidChartBackgroundStrokeStyle:vt,pyramidChartTitleFont:u,pyramidChartTitleFillStyle:s.titleFillStyle,pyramidChartSliceFillStylePalette:E,pyramidChartSliceStrokeStyle:vi,pyramidChartSliceLabelFont:p,pyramidChartSliceLabelFillStyle:s.uiTextFillStyle,pyramidChartConnectorStrokeStyle:He,gaugeChartBackgroundFillStyle:s.panelBackgroundFillStyle,gaugeChartBackgroundStrokeStyle:vt,gaugeChartTitleFont:u,gaugeChartTitleFillStyle:s.titleFillStyle,gaugeChartEmptyGaugeFillStyle:new it({color:s.uiBackgroundColor}),gaugeChartEmptyGaugeStrokeStyle:vi,gaugeChartGaugeFillStyle:dr,gaugeChartIntervalLabelsFillStyle:de,gaugeChartIntervalLabelsFont:p,gaugeChartValueLabelFillStyle:de,gaugeChartValueLabelFont:p,treeMapChartBackgroundFillStyle:s.panelBackgroundFillStyle,treeMapChartBackgroundStrokeStyle:vt,treeMapChartParentColor:s.treeMapChartParentColor,treeMapChartNodeColors:s.treeMapChartNodeColors,treeMapChartNodeStrokeStyle:new se({thickness:1,fillStyle:new it({color:vs("000")})}),treeMapChartTitleFillStyle:s.titleFillStyle,treeMapChartTitleFont:u,treeMapChartPathLabelFillStyle:de,treeMapChartPathLabelFont:p,treeMapChartLabelHeaderFillStyle:s.treeMapChartLabelHeaderFillStyle,treeMapChartLabelHeaderFont:u,treeMapChartLabelFillStyle:s.treeMapChartLabelFillStyle,treeMapChartLabelFont:p,uiPanelBackgroundFillStyle:s.panelBackgroundFillStyle,uiPanelBackgroundStrokeStyle:vt,zoomBandChartDefocusOverlayFillStyle:Ia,zoomBandChartSplitterStrokeStyle:Ue,zoomBandChartKnobFillStyle:s.zoomBandChartKnobFillStyle,zoomBandChartKnobSize:s.zoomBandChartKnobSize,onScreenMenuBackgroundColor:P(254,204,0,.7),uiButtonFillStyle:ge,uiButtonFillStyleHidden:Pe,uiButtonStrokeStyle:vi,uiButtonSize:10,uiBackgroundFillStyle:Ke,uiBackgroundStrokeStyle:vi,uiTextFillStyle:de,uiTextFillStyleHidden:mi,uiTextFont:p,legendTitleFillStyle:de,legendTitleFont:m,cursorTickMarkerXBackgroundFillStyle:Ke,cursorTickMarkerXBackgroundStrokeStyle:vi,cursorTickMarkerXTextFillStyle:de,cursorTickMarkerXTextFont:p,cursorTickMarkerYBackgroundFillStyle:Ke,cursorTickMarkerYBackgroundStrokeStyle:vi,cursorTickMarkerYTextFillStyle:de,cursorTickMarkerYTextFont:p,cursorPointMarkerFillStyle:Ie.getFillStyle(),cursorPointMarkerSize:{x:9,y:9},cursorPointMarkerShape:qe.Cross,cursorResultTableFillStyle:Ke,cursorResultTableStrokeStyle:vi,cursorResultTableTextFillStyle:de,cursorResultTableTextFont:p,cursorGridStrokeStyleX:Ie,cursorGridStrokeStyleY:Ie,chartMarkerPointMarkerFillStyle:Ie.getFillStyle(),chartMarkerPointMarkerSize:{x:20,y:20},chartMarkerPointMarkerShape:qe.Star,seriesMarkerPointMarkerFillStyle:Ie.getFillStyle(),seriesMarkerPointMarkerSize:{x:9,y:9},seriesMarkerPointMarkerShape:qe.Cross};return s.overrideThemeProperties&&(Xe={...Xe,...s.overrideThemeProperties}),Xe})(r),i={...t,header1Font:e.xAxisTitleFont,header2Font:e.xAxisNumericTicks.getMajorTickStyle().labelFont,header3Font:e.uiTextFont,mainDataColor:r.dataColorPalette[0].stroke};return{...e,examples:i}},yh=(r,t)=>{const e=new Image;e.crossOrigin="*";const i=`${r}/${t}`;return e.addEventListener("error",s=>{zR(r,i,"Theme resource",{shouldCrash:!1})}),e.src=i,e},id=(r,t,e)=>i=>{const s=r===!0?t[i%t.length].stroke:Ss(t[i%t.length].stroke,P(255,255,255),.5);return new us({stops:[{color:Ss(s,P(255,255,255),.5*e).setA(100),offset:0},{color:s.setA(100),offset:.5},{color:Ss(s,P(30,30,30),.5*e).setA(100),offset:1}]})},sd=(r,t,e)=>i=>{const s=r===!0?t[i%t.length].stroke:Ss(t[i%t.length].stroke,P(255,255,255),.2);return new us({stops:[{color:Ss(s,P(255,255,255),.2*e),offset:0},{color:s,offset:.5},{color:Ss(s,P(0,0,0),.2*e),offset:1}]})},sa=(r,t,e)=>i=>{const s=r===!0?t[i%t.length].stroke:Ss(t[i%t.length].stroke,P(255,255,255),.2);return new xs({angle:90,stops:[{color:Ss(s,P(255,255,255),.5*e),offset:0},{color:s,offset:.35},{color:Ss(s,P(30,30,30),.5*e),offset:1}]})},rd=(r,t,e)=>(i=>{const s=new Map;return n=>{const a=s.get(n);if(a)return a;const o=(l=>{const u=r===!0?t[l%t.length].stroke:Ss(t[l%t.length].stroke,P(255,255,255),.3);return new xs({angle:90,stops:[{color:Ss(u,P(255,255,255),.5),offset:0},{color:u,offset:.35},{color:Ss(u,P(30,30,30),.5),offset:1}]})})(n);return s.set(n,o),o}})(),nd=(r,t,e)=>{const i=t[0].stroke;return new us({shape:ws.ellipse,extent:Cs.farthestCorner,position:{x:.5,y:.5},stops:[{color:r===!0?i:Ss(i,P(255,255,255),.5*e),offset:0},{color:i,offset:.5},{color:r===!0?i:Ss(i,P(0,0,0),.5*e),offset:1}]})},jV=Gc(()=>{const r=P(255,255,255),t=new it({color:r}),e=!0,i=new P0({spread:1,blur:9,offset:{x:0,y:0},color:P(0,0,0,150)}),s=new us({position:{x:.8,y:.8},extent:Cs.farthestCorner,shape:ws.ellipse,stops:[{offset:0,color:P(50,51,52)},{offset:.5,color:P(14,15,16)},{offset:1,color:P(0,0,0)}]}),n=new it({color:P(45,45,45)}),a=new us({position:{x:.5,y:.5},extent:Cs.farthestCorner,shape:ws.circle,stops:[{offset:0,color:P(120,120,120,100)},{offset:1,color:P(0,0,0,50)}]}),o=new us({position:{x:.5,y:.5},extent:Cs.farthestCorner,shape:ws.circle,stops:[{offset:0,color:P(30,30,30,200)},{offset:1,color:P(0,0,0,255)}]}),l=new it({color:P(255,255,220)}),u=new it({color:P(255,255,166)}),d=new it({color:P(255,255,220)}),f=new it({color:P(255,255,220,130)}),y=new it({color:P(255,255,200)}),m=y,p=new xs({angle:45,stops:[{offset:0,color:P(230,230,230)},{offset:1,color:P(150,150,150)}]}),x=new it({color:P(220,220,220)}),b=new it({color:P(200,200,200,50)}),v=new it({color:P(200,200,200,150)}),R=new it({color:P(200,200,200,20)}),E=new it({color:P(150,150,150)}),V=new xs({angle:0,stops:[{offset:0,color:P(10,10,10,220)},{offset:1,color:P(30,30,30,220)}]}),F=t,L=P(255,255,200),z=P(20,20,20),B=P(0,0,0),A=r,T=P(150,150,150),w=P(50,50,50),C=P(50,50,50),k=P(100,100,100);P(200,200,200);const _=[P(255,255,91,255),P(255,205,91,255),P(255,155,91,255),P(255,196,188,255),P(255,148,184,255),P(219,148,198,255),P(235,196,224,255),P(169,148,198,255),P(148,226,198,255),P(148,255,176,255),P(180,255,165,255)].map(kt=>({stroke:kt,border:kt,area:kt.setA(100)})),X=r.setA(20),N=P(176,255,157,255),U=P(255,112,76,255),O={mapChartFillStyle:new xs({angle:135,stops:[{color:P(255,255,91,255),offset:0},{color:P(255,155,91,255),offset:1}]}),spiderSeriesFillStyle:id(e,_,.5),pieChartSliceFillStylePalette:sd(e,_,1),funnelChartSliceFillStylePalette:sa(e,_,1),pyramidChartSliceFillStylePalette:sa(e,_,1),rectangleSeriesFillStyle:rd(e,_),gaugeChartGaugeFillStyle:nd(e,_,1)},W=new it({color:P(176,255,157,255)}),I=new it({color:P(255,146,146,255)}),H=new it({color:P(176,255,157,255)}),q=new it({color:P(230,63,63,255)}),Q=new it({color:P(176,255,157,120)}),J=new it({color:P(229,63,63,180)}),ot=new it({color:P(27,37,36,255)}),ht=new it({color:P(62,27,27,255)}),ut=[P(255,0,0),P(255,255,0),P(0,255,0)],dt=[P(10,10,255),P(10,190,255),P(251,255,0),P(255,38,0)],Tt=[P(255,255,0),P(255,204,0),P(255,128,0),P(255,0,0)],xt=[P(0,0,0),P(167,4,69,255),P(255,0,0),P(252,252,168,255)],zt=new us({stops:[{color:P(61,61,80,100),offset:0},{color:P(44,44,55,30),offset:1}]}),Nt=new it({color:P(148,148,198,255)}),jt=Q.getColor().setA(255),ie=P(100,100,100),Ft=[P(255,241,149,200),P(255,230,65,200),P(238,211,32,200),P(238,176,32,200),P(255,159,13,200),P(254,120,37,200),P(253,91,56,200),P(253,75,84,200),P(254,95,124,200),P(227,56,160,200),P(226,53,134,200),P(216,90,166,200),P(254,151,206,200),P(237,151,254,200),P(243,177,255,200),P(233,133,252,200),P(210,101,230,200),P(178,61,200,200),P(193,81,156,200),P(217,95,145,200)];return ed({isDark:e,highlightColorOffset:P(60,60,60,60),highlightColorOffsetAxisOverlay:P(255,255,255,40),effect:i,effectsText:!0,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:s,dashboardSplitterFillStyle:n,panelBackgroundFillStyle:a,seriesBackgroundFillStyle:o,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:l,axisTitleFillStyle:u,axisLabelMajorFillStyle:d,axisLabelMinorFillStyle:f,uiTextFillStyle:m,axisLineFillStyle:p,axisTickMajorFillStyle:x,axisGridMajorFillStyle:b,axisTickMinorFillStyle:v,axisGridMinorFillStyle:R,cursorGridFillStyle:E,legendBackgroundFillStyle:V,legendBackgroundBorderFillStyle:F,legendButtonDefaultColor:L,uiBackgroundColor:z,uiBackgroundBorderColor:B,uiStrokeColorContrastHigh:A,uiStrokeColorContrastMedium:T,uiStrokeColorContrastLow:w,dataStrokeColorContrastHigh:C,dataStrokeColorContrastMedium:k,dataColorPalette:_,dataColorPaletteInverted:[{area:P(190,50,50,100),border:P(210,80,80)}],dataHighlightOverlayColor:X,dataColorPositive:N,dataColorNegative:U,zoomBandChartDefocusOverlayFillStyle:new it({color:P(0,0,0,180)}),zoomBandChartSplitterColor:vs("#FBFB5A"),zoomBandChartKnobFillStyle:kt=>new Fn({source:yh(kt,"zoomBandChart/darkgold-selector.png"),fitMode:ji.Fill}),zoomBandChartKnobSize:{x:14,y:30},overrideThemeProperties:O,treeMapChartParentColor:vs("#181E21"),treeMapChartNodeColors:Ft,treeMapChartLabelFillStyle:new it({color:P(33,33,33)}),treeMapChartLabelHeaderFillStyle:new it({color:P(250,250,250)})},{positiveTextFillStyle:W,negativeTextFillStyle:I,positiveFillStyle:H,negativeFillStyle:q,positiveAreaFillStyle:Q,negativeAreaFillStyle:J,positiveBackgroundFillStyle:ot,negativeBackgroundFillStyle:ht,badGoodColorPalette:ut,coldHotColorPalette:dt,intensityColorPalette:Tt,spectrogramColorPalette:xt,bollingerFillStyle:zt,bollingerBorderFillStyle:Nt,highlightPointColor:r,highlightDataGridColor:jt,unfocusedDataColor:ie})}),JV=Gc(()=>{const r=P(255,255,255),t=new it({color:r}),e=!0,i=new P0({spread:0,blur:9,offset:{x:0,y:0},color:P(105,255,236,40)}),s=new it({color:P(2,21,30)}),n=new us({stops:[{color:P(19,40,66,150),offset:0},{color:P(0,0,0,150),offset:1}]}),a=new it({color:P(0,5,8,150)}),o=t,l=t,u=t,d=new it({color:P(255,255,220,130)}),f=t,y=new it({color:P(20,224,250,255)}),m=t,p=new it({color:P(61,94,110,100)}),x=new it({color:P(61,94,110,255)}),b=new it({color:P(61,94,110,40)}),v=t,R=new it({color:P(0,18,23,255)}),E=t,V=r;new it({color:P(0,17,22,240)});const F=P(0,38,48,220),L=P(0,0,0),z=r,B=P(150,150,150),A=P(19,78,93),T=P(50,50,50),w=P(0,36,48);P(200,200,200);const C=[P(45,253,253,255),P(44,172,247,255),P(46,100,248,255),P(96,84,199,255),P(184,104,245,255),P(98,160,218,255),P(43,238,245,255),P(38,140,206,255),P(112,96,224,255),P(206,157,255,255)].map(ie=>({stroke:ie,border:ie,area:ie.setA(100)})),k=r.setA(50),_=P(3,217,194,255),X=P(230,63,63,255),N={mapChartFillStyle:new xs({angle:135,stops:[{color:P(118,248,231,255),offset:0},{color:P(45,177,255,255),offset:1}]}),spiderSeriesFillStyle:id(e,C,1),pieChartSliceFillStylePalette:sd(e,C,1),funnelChartSliceFillStylePalette:sa(e,C,1),pyramidChartSliceFillStylePalette:sa(e,C,1),rectangleSeriesFillStyle:rd(e,C),gaugeChartGaugeFillStyle:nd(e,C,1)},U=new it({color:P(45,253,253,255)}),O=new it({color:P(255,146,146,255)}),W=new it({color:P(45,253,253,255)}),I=new it({color:P(230,63,63,255)}),H=new it({color:P(1,190,164,120)}),q=new it({color:P(229,63,63,180)}),Q=new it({color:P(1,53,57,255)}),J=new it({color:P(62,27,27,255)}),ot=[P(1,104,119,255),P(0,165,144,255),P(0,246,214,255)],ht=[P(0,87,95,255),P(0,125,124,255),P(1,209,182,255),P(0,255,221,255),P(218,112,112,255),P(172,47,47,255)],ut=[P(126,255,253,255),P(50,233,230,255),P(0,196,193,255),P(62,138,178,255),P(139,88,191,255),P(162,55,143,255)],dt=[P(13,31,52,255),P(101,50,118,255),P(1,142,172,255),P(2,196,170,255),P(0,255,221,255)],Tt=new us({stops:[{color:P(122,103,254,70),offset:0},{color:P(178,168,255,10),offset:1}]}),xt=new it({color:P(122,103,254,255)}),zt=H.getColor().setA(255),Nt=P(15,83,83),jt=[P(139,252,252,150),P(60,239,239,150),P(2,201,201,150),P(26,159,159,150),P(15,146,187,150),P(65,168,200,150),P(67,146,207,150),P(64,108,209,150),P(189,64,233,150),P(219,84,238,150),P(192,55,212,150),P(212,98,229,150),P(248,110,211,150),P(251,154,225,150),P(251,154,184,150),P(233,105,144,150),P(255,133,170,150),P(249,110,135,150),P(245,72,101,150),P(210,57,84,150)];return ed({isDark:e,highlightColorOffset:P(60,60,60,60),highlightColorOffsetAxisOverlay:P(255,255,255,40),effect:i,effectsText:!1,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:ie=>new Fn({source:yh(ie,"themes/turquoiseHexagon.jpg"),fitMode:ji.Fill}),dashboardSplitterFillStyle:s,panelBackgroundFillStyle:n,seriesBackgroundFillStyle:a,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:o,axisTitleFillStyle:l,axisLabelMajorFillStyle:u,axisLabelMinorFillStyle:d,uiTextFillStyle:f,axisLineFillStyle:y,axisTickMajorFillStyle:m,axisGridMajorFillStyle:p,axisTickMinorFillStyle:x,axisGridMinorFillStyle:b,cursorGridFillStyle:v,legendBackgroundFillStyle:R,legendBackgroundBorderFillStyle:E,legendButtonDefaultColor:V,uiBackgroundColor:F,uiBackgroundBorderColor:L,uiStrokeColorContrastHigh:z,uiStrokeColorContrastMedium:B,uiStrokeColorContrastLow:A,dataStrokeColorContrastHigh:T,dataStrokeColorContrastMedium:w,dataColorPalette:C,dataColorPaletteInverted:[{area:P(170,60,210,100),border:P(210,100,250)}],dataHighlightOverlayColor:k,dataColorPositive:_,dataColorNegative:X,zoomBandChartDefocusOverlayFillStyle:new it({color:P(0,0,0,180)}),zoomBandChartSplitterColor:vs("#2BF4F4"),zoomBandChartKnobFillStyle:ie=>new Fn({source:yh(ie,"zoomBandChart/turquoise-selector.png"),fitMode:ji.Fill}),zoomBandChartKnobSize:{x:14,y:30},overrideThemeProperties:N,treeMapChartParentColor:vs("#002329"),treeMapChartNodeColors:jt,treeMapChartLabelFillStyle:new it({color:P(33,33,33)}),treeMapChartLabelHeaderFillStyle:new it({color:P(250,250,250)})},{positiveTextFillStyle:U,negativeTextFillStyle:O,positiveFillStyle:W,negativeFillStyle:I,positiveAreaFillStyle:H,negativeAreaFillStyle:q,positiveBackgroundFillStyle:Q,negativeBackgroundFillStyle:J,badGoodColorPalette:ot,coldHotColorPalette:ht,intensityColorPalette:ut,spectrogramColorPalette:dt,bollingerFillStyle:Tt,bollingerBorderFillStyle:xt,highlightPointColor:r,highlightDataGridColor:zt,unfocusedDataColor:Nt})}),ZV=Gc(()=>{const t=new P0({spread:0,blur:6,offset:{x:2,y:-2},color:P(0,0,0,30)}),e=new us({position:{x:.8,y:.8},extent:Cs.farthestCorner,shape:ws.ellipse,stops:[{offset:0,color:P(255,255,255)},{offset:1,color:P(255,255,255)}]}),i=new it({color:P(219,227,233,255)}),s=new us({position:{x:.5,y:.5},extent:Cs.farthestCorner,shape:ws.circle,stops:[{offset:0,color:P(255,255,255,200)},{offset:1,color:P(240,244,246,200)}]}),n=new us({position:{x:.5,y:.5},extent:Cs.farthestCorner,shape:ws.circle,stops:[{offset:0,color:P(255,255,255,255)},{offset:1,color:P(255,255,255,255)}]}),a=new it({color:P(33,43,49)}),o=new it({color:P(33,43,49)}),l=new it({color:P(33,43,49)}),u=new it({color:P(33,43,49,150)}),d=new it({color:P(33,43,49)}),f=d,y=new xs({angle:45,stops:[{offset:0,color:P(225,225,225)},{offset:1,color:P(225,225,225)}]}),m=new it({color:P(150,150,150,255)}),p=new it({color:P(150,150,150,170)}),x=new it({color:P(150,150,150,150)}),b=new it({color:P(150,150,150,100)}),v=new it({color:P(128,146,159)}),R=new xs({angle:0,stops:[{offset:0,color:P(255,255,255,240)},{offset:1,color:P(255,255,255,240)}]}),E=new it({color:P(168,186,199)}),V=P(255,255,200);new it({color:P(255,255,255,240)}),new it({color:P(128,146,159,255)});const F=P(255,255,255,255),L=P(168,168,199,255),z=P(168,186,199,255),B=P(168,186,199,255),A=P(168,186,199,255),T=P(168,186,199,255),w=P(100,100,100);P(200,200,200);const C=[P(28,181,140,255),P(255,132,0,255),P(240,39,39,255),P(86,121,251,255),P(2,181,213,255),P(13,212,158,255),P(22,167,3,255),P(234,103,232,255),P(62,183,179,255),P(140,93,3,255),P(155,158,186,255)].map(Ft=>({stroke:Ft,border:Ft,area:Ft.setA(100)})),k=P(150,150,150,80),_=P(46,182,120,255),X=P(255,66,66,255),N=new se({thickness:2,fillStyle:new it({color:P(168,186,199,255)})}),U={mapChartFillStyle:new xs({angle:-45,stops:[{color:P(2,181,213,255),offset:0},{color:P(175,243,255,255),offset:1}]}),spiderSeriesFillStyle:id(!1,C,.8),pieChartSliceFillStylePalette:sd(!1,C,.8),funnelChartSliceFillStylePalette:sa(!1,C,.5),pyramidChartSliceFillStylePalette:sa(!1,C,.5),rectangleSeriesFillStyle:rd(!1,C),gaugeChartGaugeFillStyle:nd(!1,C,.8),chartXYSeriesBackgroundStrokeStyle:N,chart3DSeriesBackgroundStrokeStyle:N,polarChartSeriesBackgroundStrokeStyle:N,spiderChartSeriesBackgroundStrokeStyle:N,dataGridTextFillStyle:new it({color:P(0,88,64,255)})},O=new it({color:P(4,146,108,255)}),W=new it({color:P(240,39,39,255)}),I=new it({color:P(28,181,140,255)}),H=new it({color:P(230,88,88,255)}),q=new it({color:P(28,181,140,180)}),Q=new it({color:P(230,88,88,180)}),J=new it({color:P(229,243,228)}),ot=new it({color:P(232,225,216)}),ht=[P(193,48,48,255),P(240,234,60,255),P(45,191,55,255)],ut=[P(10,19,255,255),P(15,191,250,255),P(249,255,2,255),P(253,133,0,255),P(255,24,0,255)],dt=[P(50,99,213),P(8,179,77),P(255,246,0),P(255,126,0),P(189,36,30)],Tt=[P(16,64,176),P(8,179,77),P(255,246,0),P(255,126,0),P(168,6,0)],xt=new it({color:P(185,198,207,255)}),zt=new us({stops:[{color:P(151,190,220,10),offset:0},{color:P(151,190,220,50),offset:1}]}),Nt=q.getColor().setA(255),jt=P(150,150,150),ie=[P(255,243,136,125),P(254,237,99,125),P(255,216,109,125),P(255,172,100,125),P(255,133,101,125),P(255,113,142,125),P(230,103,129,125),P(242,126,219,125),P(255,155,235,125),P(255,181,240,125),P(203,143,255,125),P(208,154,255,125),P(171,188,255,125),P(197,209,255,125),P(171,187,255,125),P(84,167,239,125),P(38,196,214,125),P(38,214,196,125),P(69,225,141,125),P(36,191,88,125)];return ed({isDark:!1,highlightColorOffset:P(-60,-60,-60,60),highlightColorOffsetAxisOverlay:P(0,0,0,40),effect:t,effectsText:!1,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:e,dashboardSplitterFillStyle:i,panelBackgroundFillStyle:s,seriesBackgroundFillStyle:n,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:a,axisTitleFillStyle:o,axisLabelMajorFillStyle:l,axisLabelMinorFillStyle:u,uiTextFillStyle:f,axisLineFillStyle:y,axisTickMajorFillStyle:m,axisGridMajorFillStyle:p,axisTickMinorFillStyle:x,axisGridMinorFillStyle:b,cursorGridFillStyle:v,legendBackgroundFillStyle:R,legendBackgroundBorderFillStyle:E,legendButtonDefaultColor:V,uiBackgroundColor:F,uiBackgroundBorderColor:L,uiStrokeColorContrastHigh:z,uiStrokeColorContrastMedium:B,uiStrokeColorContrastLow:A,dataStrokeColorContrastHigh:T,dataStrokeColorContrastMedium:w,dataColorPalette:C,dataColorPaletteInverted:[{area:P(190,50,50,100),border:P(210,80,80)}],dataHighlightOverlayColor:k,dataColorPositive:_,dataColorNegative:X,zoomBandChartDefocusOverlayFillStyle:new it({color:P(255,255,255,180)}),zoomBandChartSplitterColor:vs("#505D65"),zoomBandChartKnobFillStyle:Ft=>new Fn({source:yh(Ft,"zoomBandChart/light-selector.png"),fitMode:ji.Fill}),zoomBandChartKnobSize:{x:14,y:30},overrideThemeProperties:U,treeMapChartParentColor:vs("#D9D9D9"),treeMapChartNodeColors:ie,treeMapChartLabelFillStyle:new it({color:P(0,0,0)}),treeMapChartLabelHeaderFillStyle:new it({color:P(33,33,33)})},{positiveTextFillStyle:O,negativeTextFillStyle:W,positiveFillStyle:I,negativeFillStyle:H,positiveAreaFillStyle:q,negativeAreaFillStyle:Q,positiveBackgroundFillStyle:J,negativeBackgroundFillStyle:ot,badGoodColorPalette:ht,coldHotColorPalette:ut,intensityColorPalette:dt,spectrogramColorPalette:Tt,bollingerFillStyle:zt,bollingerBorderFillStyle:xt,highlightPointColor:P(0,0,0),highlightDataGridColor:Nt,unfocusedDataColor:jt})}),QV=Gc(()=>{const t=new us({position:{x:.8,y:.8},extent:Cs.farthestCorner,shape:ws.ellipse,stops:[{offset:0,color:P(255,255,255)},{offset:1,color:P(255,255,255)}]}),e=new it({color:P(214,236,216,255)}),i=new us({position:{x:.5,y:.5},extent:Cs.farthestCorner,shape:ws.circle,stops:[{offset:0,color:P(233,244,231,70)},{offset:1,color:P(233,244,231,200)}]}),s=new us({position:{x:.5,y:.5},extent:Cs.farthestCorner,shape:ws.circle,stops:[{offset:0,color:P(255,255,255,255)},{offset:1,color:P(255,255,255,255)}]}),n=new it({color:P(1,61,53)}),a=new it({color:P(1,61,53)}),o=new it({color:P(1,61,53)}),l=new it({color:P(1,61,53,150)}),u=new it({color:P(1,61,53)}),d=u,f=new xs({angle:45,stops:[{offset:0,color:P(225,225,225)},{offset:1,color:P(225,225,225)}]}),y=new it({color:P(188,211,186,255)}),m=new it({color:P(188,211,186,150)}),p=new it({color:P(188,211,186,50)}),x=new it({color:P(188,211,186,50)}),b=new it({color:P(104,148,111,255)}),v=new xs({angle:0,stops:[{offset:0,color:P(255,255,255,240)},{offset:1,color:P(255,255,255,240)}]}),R=new it({color:P(104,148,111)}),E=P(255,255,200);new it({color:P(255,255,255,240)}),new it({color:P(104,148,111,255)});const V=P(255,255,255,255),F=P(179,201,183,255),L=P(188,211,186,255),z=P(188,211,186,255),B=P(188,211,186,255),A=P(188,211,186,255),T=P(100,100,100);P(200,200,200);const w=[P(138,195,142,255),P(193,161,114,255),P(178,99,99,255),P(142,156,210,255),P(154,209,219,255),P(164,212,199,255),P(104,156,97,255),P(196,147,195,255),P(92,190,187,255),P(126,100,51,255),P(136,138,157,255)].map(ie=>({stroke:ie,border:ie,area:ie.setA(100)})),C=P(150,150,150,80),k=P(46,182,84,255),_=P(232,96,96,255),X=new se({thickness:2,fillStyle:new it({color:P(188,211,186,255)})}),N={mapChartFillStyle:new xs({angle:-45,stops:[{color:P(118,160,121,255),offset:0},{color:P(174,227,178,255),offset:1}]}),spiderSeriesFillStyle:id(!1,w,.8),pieChartSliceFillStylePalette:sd(!1,w,.8),pyramidChartSliceFillStylePalette:sa(!1,w,.5),funnelChartSliceFillStylePalette:sa(!1,w,.5),rectangleSeriesFillStyle:rd(!1,w),gaugeChartGaugeFillStyle:nd(!1,w,.8),chartXYSeriesBackgroundStrokeStyle:X,chart3DSeriesBackgroundStrokeStyle:X,polarChartSeriesBackgroundStrokeStyle:X,spiderChartSeriesBackgroundStrokeStyle:X,dataGridTextFillStyle:new it({color:P(77,66,21,255)})},U=new it({color:P(93,151,97,255)}),O=new it({color:P(178,99,99,255)}),W=new it({color:P(138,195,142,255)}),I=new it({color:P(178,99,99,255)}),H=new it({color:P(138,195,142,180)}),q=new it({color:P(178,99,99,180)}),Q=new it({color:P(224,240,237)}),J=new it({color:P(251,227,227)}),ot=[P(178,99,99,255),P(215,224,111,255),P(80,186,88,255)],ht=[P(62,64,142,255),P(66,131,77,255),P(250,250,135,255),P(202,161,78,255),P(179,53,53,255)],ut=[P(64,86,138),P(123,192,205),P(255,252,149),P(220,155,92),P(184,78,74)],dt=[P(64,86,138),P(123,192,205),P(255,252,149),P(220,155,92),P(132,60,57)],Tt=new it({color:P(185,198,207,255)}),xt=new us({stops:[{color:P(151,190,220,10),offset:0},{color:P(151,190,220,50),offset:1}]}),zt=H.getColor().setA(255),Nt=P(150,150,150),jt=[P(242,239,210,150),P(243,238,183,150),P(210,222,136,150),P(204,217,148,150),P(157,190,124,150),P(143,178,72,150),P(198,147,88,150),P(216,148,71,150),P(229,142,103,150),P(225,174,152,150),P(219,149,203,150),P(216,188,209,150),P(109,198,189,150),P(172,206,202,150),P(164,223,217,150),P(174,215,233,150),P(203,225,235,150),P(220,227,243,150),P(207,213,227,150),P(171,182,209,150)];return ed({isDark:!1,highlightColorOffset:P(-60,-60,-60,60),highlightColorOffsetAxisOverlay:P(0,0,0,40),effect:void 0,effectsText:!1,effectsDashboardSplitters:!1,lcjsBackgroundFillStyle:t,dashboardSplitterFillStyle:e,panelBackgroundFillStyle:i,seriesBackgroundFillStyle:s,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:n,axisTitleFillStyle:a,axisLabelMajorFillStyle:o,axisLabelMinorFillStyle:l,uiTextFillStyle:d,axisLineFillStyle:f,axisTickMajorFillStyle:y,axisGridMajorFillStyle:m,axisTickMinorFillStyle:p,axisGridMinorFillStyle:x,cursorGridFillStyle:b,legendBackgroundFillStyle:v,legendBackgroundBorderFillStyle:R,legendButtonDefaultColor:E,uiBackgroundColor:V,uiBackgroundBorderColor:F,uiStrokeColorContrastHigh:L,uiStrokeColorContrastMedium:z,uiStrokeColorContrastLow:B,dataStrokeColorContrastHigh:A,dataStrokeColorContrastMedium:T,dataColorPalette:w,dataColorPaletteInverted:[{area:P(210,70,70,100),border:P(200,110,110)}],dataHighlightOverlayColor:C,dataColorPositive:k,dataColorNegative:_,zoomBandChartDefocusOverlayFillStyle:new it({color:P(255,255,255,180)}),zoomBandChartSplitterColor:vs("#446A40"),zoomBandChartKnobFillStyle:ie=>new Fn({source:yh(ie,"zoomBandChart/lightnature-selector.png"),fitMode:ji.Fill}),zoomBandChartKnobSize:{x:14,y:30},overrideThemeProperties:N,treeMapChartParentColor:vs("#EFF7EE"),treeMapChartNodeColors:jt,treeMapChartLabelFillStyle:new it({color:P(0,0,0)}),treeMapChartLabelHeaderFillStyle:new it({color:P(33,33,33)})},{positiveTextFillStyle:U,negativeTextFillStyle:O,positiveFillStyle:W,negativeFillStyle:I,positiveAreaFillStyle:H,negativeAreaFillStyle:q,positiveBackgroundFillStyle:Q,negativeBackgroundFillStyle:J,badGoodColorPalette:ot,coldHotColorPalette:ht,intensityColorPalette:ut,spectrogramColorPalette:dt,bollingerFillStyle:xt,bollingerBorderFillStyle:Tt,highlightPointColor:P(0,0,0),highlightDataGridColor:zt,unfocusedDataColor:Nt})}),KV=Gc(()=>{const r=P(255,255,255),t=new it({color:r}),e=!0,i=new P0({spread:1,blur:9,offset:{x:0,y:0},color:P(255,255,255,30)}),s=new it({color:P(6,15,36)}),n=new us({stops:[{color:P(46,13,87,50),offset:0},{color:P(0,0,0,150),offset:1}]}),a=new it({color:P(0,5,8,150)}),o=t,l=t,u=t,d=new it({color:P(255,255,220,130)}),f=t,y=new xs({angle:45,stops:[{offset:0,color:P(241,133,255,255)},{offset:1,color:P(115,207,238,255)}]}),m=t,p=new it({color:P(61,94,110,100)}),x=new it({color:P(61,94,110,255)}),b=new it({color:P(61,94,110,40)}),v=t,R=new it({color:P(0,18,23,255)}),E=t,V=P(115,207,238,255);new it({color:P(0,17,22,240)});const F=P(0,38,48,255),L=P(0,0,0),z=r,B=P(150,150,150),A=P(19,57,93),T=P(50,50,50),w=P(0,17,48);P(200,200,200);const C=[P(20,211,237,255),P(98,147,252,255),P(164,73,250,255),P(129,117,253,255),P(95,134,252,255),P(22,133,212,255),P(35,200,242,255),P(104,121,233,255),P(137,69,232,255),P(70,72,241,255)].map(ie=>({stroke:ie,border:ie,area:ie.setA(100)})),k=r.setA(50),_=P(3,217,194,255),X=P(243,21,110,255),N={mapChartFillStyle:new xs({angle:135,stops:[{color:P(118,248,231,255),offset:0},{color:P(45,177,255,255),offset:1}]}),spiderSeriesFillStyle:id(e,C,.5),pieChartSliceFillStylePalette:sd(e,C,2),funnelChartSliceFillStylePalette:sa(e,C,1),pyramidChartSliceFillStylePalette:sa(e,C,1),rectangleSeriesFillStyle:rd(e,C),gaugeChartGaugeFillStyle:nd(e,C,1)},U=new it({color:P(20,211,237,255)}),O=new it({color:P(253,145,178,255)}),W=new it({color:P(20,211,237,255)}),I=new it({color:P(239,68,121,255)}),H=new it({color:P(20,211,237,120)}),q=new it({color:P(239,68,121,180)}),Q=new it({color:P(1,53,57,255)}),J=new it({color:P(94,19,42,255)}),ot=[P(174,51,132,255),P(204,107,218,255),P(189,215,253,255)],ht=[P(0,63,95,255),P(0,149,255,255),P(0,225,255,255),P(255,154,254,255),P(204,98,170,255),P(139,39,84,255)],ut=[P(197,241,255,255),P(70,210,255,255),P(0,164,217,255),P(90,99,222,255),P(138,75,192,255),P(151,27,162,255)],dt=[P(13,31,52,255),P(129,54,130,255),P(131,108,176,255),P(7,162,213,255),P(26,247,255,255)],Tt=new us({stops:[{color:P(219,42,235,60),offset:0},{color:P(237,73,252,10),offset:1}]}),xt=new it({color:P(237,73,252,255)}),zt=H.getColor().setA(255),Nt=P(8,70,100),jt=[P(149,230,255,150),P(93,213,243,150),P(20,189,223,150),P(5,151,181,150),P(2,138,198,150),P(2,113,198,150),P(97,148,236,150),P(93,111,230,150),P(151,120,223,150),P(128,87,227,150),P(153,52,230,150),P(179,92,245,150),P(248,110,211,150),P(255,155,228,150),P(251,88,207,150),P(255,0,162,150),P(214,73,177,150),P(209,71,159,150),P(238,101,169,150),P(210,57,134,150)];return ed({isDark:e,highlightColorOffset:P(60,60,60,60),highlightColorOffsetAxisOverlay:P(255,255,255,40),effect:i,effectsText:!0,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:ie=>new Fn({source:yh(ie,"themes/cyberSpace.jpg"),fitMode:ji.Fill}),dashboardSplitterFillStyle:s,panelBackgroundFillStyle:n,seriesBackgroundFillStyle:a,fontFamily:"Segoe UI, -apple-system, Verdana, Helvetica",fontScaler:1,titleFillStyle:o,axisTitleFillStyle:l,axisLabelMajorFillStyle:u,axisLabelMinorFillStyle:d,uiTextFillStyle:f,axisLineFillStyle:y,axisTickMajorFillStyle:m,axisGridMajorFillStyle:p,axisTickMinorFillStyle:x,axisGridMinorFillStyle:b,cursorGridFillStyle:v,legendBackgroundFillStyle:R,legendBackgroundBorderFillStyle:E,legendButtonDefaultColor:V,uiBackgroundColor:F,uiBackgroundBorderColor:L,uiStrokeColorContrastHigh:z,uiStrokeColorContrastMedium:B,uiStrokeColorContrastLow:A,dataStrokeColorContrastHigh:T,dataStrokeColorContrastMedium:w,dataColorPalette:C,dataColorPaletteInverted:[{area:P(41,130,255,100),border:P(45,110,240)}],dataHighlightOverlayColor:k,dataColorPositive:_,dataColorNegative:X,zoomBandChartDefocusOverlayFillStyle:new it({color:P(0,0,0,180)}),zoomBandChartSplitterColor:vs("#DB77FF"),zoomBandChartKnobFillStyle:ie=>new Fn({source:yh(ie,"zoomBandChart/cyberspace-selector.png"),fitMode:ji.Fill}),zoomBandChartKnobSize:{x:14,y:30},overrideThemeProperties:N,treeMapChartParentColor:vs("#1E1E3B"),treeMapChartNodeColors:jt,treeMapChartLabelFillStyle:new it({color:P(33,33,33)}),treeMapChartLabelHeaderFillStyle:new it({color:P(250,250,250)})},{positiveTextFillStyle:U,negativeTextFillStyle:O,positiveFillStyle:W,negativeFillStyle:I,positiveAreaFillStyle:H,negativeAreaFillStyle:q,positiveBackgroundFillStyle:Q,negativeBackgroundFillStyle:J,badGoodColorPalette:ot,coldHotColorPalette:ht,intensityColorPalette:ut,spectrogramColorPalette:dt,bollingerFillStyle:Tt,bollingerBorderFillStyle:xt,highlightPointColor:r,highlightDataGridColor:zt,unfocusedDataColor:Nt})}),ol={};Object.defineProperty(ol,"darkGold",{get:jV,enumerable:!0}),Object.defineProperty(ol,"turquoiseHexagon",{get:JV,enumerable:!0}),Object.defineProperty(ol,"light",{get:ZV,enumerable:!0}),Object.defineProperty(ol,"lightNature",{get:QV,enumerable:!0}),Object.defineProperty(ol,"cyberSpace",{get:KV,enumerable:!0});const eT=ol,lr=eT.darkGold,ur=(r,t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAgCAYAAADwkoGKAAAsa2NhQlgAACxranVtYgAAAB5qdW1kYzJwYQARABCAAACqADibcQNjMnBhAAAALEVqdW1iAAAAR2p1bWRjMm1hABEAEIAAAKoAOJtxA3Vybjp1dWlkOjlmZDBkZjkzLTVmMDMtNDczYi1hZThhLTFhNDM4NmMzNmJhYQAAAAGzanVtYgAAAClqdW1kYzJhcwARABCAAACqADibcQNjMnBhLmFzc2VydGlvbnMAAAAA12p1bWIAAAAmanVtZGNib3IAEQAQgAAAqgA4m3EDYzJwYS5hY3Rpb25zAAAAAKljYm9yoWdhY3Rpb25zgaNmYWN0aW9ua2MycGEuZWRpdGVkbXNvZnR3YXJlQWdlbnRtQWRvYmUgRmlyZWZseXFkaWdpdGFsU291cmNlVHlwZXhTaHR0cDovL2N2LmlwdGMub3JnL25ld3Njb2Rlcy9kaWdpdGFsc291cmNldHlwZS9jb21wb3NpdGVXaXRoVHJhaW5lZEFsZ29yaXRobWljTWVkaWEAAACranVtYgAAAChqdW1kY2JvcgARABCAAACqADibcQNjMnBhLmhhc2guZGF0YQAAAAB7Y2JvcqVqZXhjbHVzaW9uc4GiZXN0YXJ0GCFmbGVuZ3RoGSx3ZG5hbWVuanVtYmYgbWFuaWZlc3RjYWxnZnNoYTI1NmRoYXNoWCBvErgv+J0u7bVCYViyMUgw5yMb8idAv1erA3/DALx9NWNwYWRIAAAAAAAAAAAAAAIDanVtYgAAACRqdW1kYzJjbAARABCAAACqADibcQNjMnBhLmNsYWltAAAAAddjYm9yqGhkYzp0aXRsZW9HZW5lcmF0ZWQgaW1hZ2VpZGM6Zm9ybWF0aWltYWdlL3BuZ2ppbnN0YW5jZUlEeCh4bXAuaWlkOjI3NEMxQjdDN0E0MDExRUVBQkZFQUNFQjJDOTA0NzVCb2NsYWltX2dlbmVyYXRvcng2QWRvYmVfUGhvdG9zaG9wLzI1LjIuMCBhZG9iZV9jMnBhLzAuNy42IGMycGEtcnMvMC4yNS4ydGNsYWltX2dlbmVyYXRvcl9pbmZvgb9kbmFtZW9BZG9iZSBQaG90b3Nob3BndmVyc2lvbmYyNS4yLjD/aXNpZ25hdHVyZXgZc2VsZiNqdW1iZj1jMnBhLnNpZ25hdHVyZWphc3NlcnRpb25zgqJjdXJseCdzZWxmI2p1bWJmPWMycGEuYXNzZXJ0aW9ucy9jMnBhLmFjdGlvbnNkaGFzaFggSmnBvf+o3kEweL4k7cz4MTrB0WSVNFZxoA1rBrM31K+iY3VybHgpc2VsZiNqdW1iZj1jMnBhLmFzc2VydGlvbnMvYzJwYS5oYXNoLmRhdGFkaGFzaFggL2g6Dghd536quyA5vPlS/9NGA5WvLRkkKJmqn0VxCoFjYWxnZnNoYTI1NgAAKEBqdW1iAAAAKGp1bWRjMmNzABEAEIAAAKoAOJtxA2MycGEuc2lnbmF0dXJlAAAAKBBjYm9y0oREoQE4JKNmc2lnVHN0oWl0c3RUb2tlbnOBoWN2YWxZDjYwgg4yMAMCAQAwgg4pBgkqhkiG9w0BBwKggg4aMIIOFgIBAzEPMA0GCWCGSAFlAwQCAQUAMIGCBgsqhkiG9w0BCRABBKBzBHEwbwIBAQYJYIZIAYb9bAcBMDEwDQYJYIZIAWUDBAIBBQAEIHj4VpJDPzaO0x4hOPnj/w1GTHuwXU0IpBf4VVocIQzoAhB3SsxvHza2JR1fKj3Mjr0yGA8yMDIzMTEwMzExNTcyNloCCQCyOL6wAOGCbaCCC70wggUHMIIC76ADAgECAhAFHp6R1x6RCrvkPVzt0N3ZMA0GCSqGSIb3DQEBCwUAMGMxCzAJBgNVBAYTAlVTMRcwFQYDVQQKEw5EaWdpQ2VydCwgSW5jLjE7MDkGA1UEAxMyRGlnaUNlcnQgVHJ1c3RlZCBHNCBSU0E0MDk2IFNIQTI1NiBUaW1lU3RhbXBpbmcgQ0EwHhcNMjMwOTA4MDAwMDAwWhcNMzQxMjA3MjM1OTU5WjBYMQswCQYDVQQGEwJVUzEXMBUGA1UEChMORGlnaUNlcnQsIEluYy4xMDAuBgNVBAMTJ0RpZ2lDZXJ0IEFkb2JlIEFBVEwgVGltZXN0YW1wIFJlc3BvbmRlcjBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IABE0srlH5A/+15/MFl1asNh8Q8TubOsEVfu0qlJrF0smjtwL1IeHZ/AB7J59u1Trpho1BDN85lfTY30rNBsfT+myjggGLMIIBhzAOBgNVHQ8BAf8EBAMCB4AwDAYDVR0TAQH/BAIwADAWBgNVHSUBAf8EDDAKBggrBgEFBQcDCDAgBgNVHSAEGTAXMAgGBmeBDAEEAjALBglghkgBhv1sBwEwHwYDVR0jBBgwFoAUuhbZbU2FL3MpdpovdYxqII+eyG8wHQYDVR0OBBYEFLA1qlbDIamLztO4vIsWJVed7zThMFoGA1UdHwRTMFEwT6BNoEuGSWh0dHA6Ly9jcmwzLmRpZ2ljZXJ0LmNvbS9EaWdpQ2VydFRydXN0ZWRHNFJTQTQwOTZTSEEyNTZUaW1lU3RhbXBpbmdDQS5jcmwwgZAGCCsGAQUFBwEBBIGDMIGAMCQGCCsGAQUFBzABhhhodHRwOi8vb2NzcC5kaWdpY2VydC5jb20wWAYIKwYBBQUHMAKGTGh0dHA6Ly9jYWNlcnRzLmRpZ2ljZXJ0LmNvbS9EaWdpQ2VydFRydXN0ZWRHNFJTQTQwOTZTSEEyNTZUaW1lU3RhbXBpbmdDQS5jcnQwDQYJKoZIhvcNAQELBQADggIBAHgrjELHhBCEWJSCyRX7lsL0C9LJgbX1ryVYySNRxHkMR2LqC7PQZRJgDNR+kJop8P5v2Bzp/jMrzw4U4pY6rYv3I8HpFlJa4uBwUTIUgHWpi8Xxd1JEEX94POODi7HySekX60A055BozFb7GGVaxb0LreQTRXnkr6ggPNUPX9Gh+2ScOxlTdQQLgZbkdYvxo3Ap6cy9riZijRxOZqiOyWSxMUhgKxeKzwrFW6Xbe0awNhOUXZzIxc4ixpKzWSItpPJ30ZiBQn49U3ADYTnshbN9ZkTA1pHf/Nov2ZUvvddkZ8UYvwo9vBvLTDvnmABnRMBKaXYAs3ZCvw9CkDPOWTeUJMFRAtmUx52ohaA3nD8bCJ6UfpQ2pFfOdShwpb6GKv0g+BgcdIG2LHPJ0Ufmr+XmpgZgq/HIge0hjcCADpjDgq2z4B0L4xtAA1M8MrUx02hxb7104nFKqMuv5zJTQl3sgwqXUyP+9zHQP9y/Z5Fx/AQWrOXCW56dV7P4cFBJl8zHqinlhkOStZ1m22+9Hlq+eC0hJ2lkF1LuzRdJJb/51LXoPKRnopFDng6XpoD7eG6w4YpAx9+P00JuUoBsYSrdsuFiyWyQQGBAnjI69ggbSLcW+hJytuinaxawVlItJkS2eV5Z4XsxPg7f82uRkdtN0hTHeI93CN3OWeRebnK7MIIGrjCCBJagAwIBAgIQBzY3tyRUfNhHrP0oZipeWzANBgkqhkiG9w0BAQsFADBiMQswCQYDVQQGEwJVUzEVMBMGA1UEChMMRGlnaUNlcnQgSW5jMRkwFwYDVQQLExB3d3cuZGlnaWNlcnQuY29tMSEwHwYDVQQDExhEaWdpQ2VydCBUcnVzdGVkIFJvb3QgRzQwHhcNMjIwMzIzMDAwMDAwWhcNMzcwMzIyMjM1OTU5WjBjMQswCQYDVQQGEwJVUzEXMBUGA1UEChMORGlnaUNlcnQsIEluYy4xOzA5BgNVBAMTMkRpZ2lDZXJ0IFRydXN0ZWQgRzQgUlNBNDA5NiBTSEEyNTYgVGltZVN0YW1waW5nIENBMIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAxoY1BkmzwT1ySVFVxyUDxPKRN6mXUaHW0oPRnkyibaCwzIP5WvYRoUQVQl+kiPNo+n3znIkLf50fng8zH1ATCyZzlm34V6gCff1DtITaEfFzsbPuK4CEiiIY3+vaPcQXf6sZKz5C3GeO6lE98NZW1OcoLevTsbV15x8GZY2UKdPZ7Gnf2ZCHRgB720RBidx8ald68Dd5n12sy+iEZLRS8nZH92GDGd1ftFQLIWhuNyG7QKxfst5Kfc71ORJn7w6lY2zkpsUdzTYNXNXmG6jBZHRAp8ByxbpOH7G1WE15/tePc5OsLDnipUjW8LAxE6lXKZYnLvWHpo9OdhVVJnCYJn+gGkcgQ+NDY4B7dW4nJZCYOjgRs/b2nuY7W+yB3iIU2YIqx5K/oN7jPqJz+ucfWmyU8lKVEStYdEAoq3NDzt9KoRxrOMUp88qqlnNCaJ+2RrOdOqPVA+C/8KI8ykLcGEh/FDTP0kyr75s9/g64ZCr6dSgkQe1CvwWcZklSUPRR8zZJTYsg0ixXNXkrqPNFYLwjjVj33GHek/45wPmyMKVM1+mYSlg+0wOI/rOP015LdhJRk8mMDDtbiiKowSYI+RQQEgN9XyO7ZONj4KbhPvbCdLI/Hgl27KtdRnXiYKNYCQEoAA6EVO7O6V3IXjASvUaetdN2udIOa5kM0jO0zbECAwEAAaOCAV0wggFZMBIGA1UdEwEB/wQIMAYBAf8CAQAwHQYDVR0OBBYEFLoW2W1NhS9zKXaaL3WMaiCPnshvMB8GA1UdIwQYMBaAFOzX44LScV1kTN8uZz/nupiuHA9PMA4GA1UdDwEB/wQEAwIBhjATBgNVHSUEDDAKBggrBgEFBQcDCDB3BggrBgEFBQcBAQRrMGkwJAYIKwYBBQUHMAGGGGh0dHA6Ly9vY3NwLmRpZ2ljZXJ0LmNvbTBBBggrBgEFBQcwAoY1aHR0cDovL2NhY2VydHMuZGlnaWNlcnQuY29tL0RpZ2lDZXJ0VHJ1c3RlZFJvb3RHNC5jcnQwQwYDVR0fBDwwOjA4oDagNIYyaHR0cDovL2NybDMuZGlnaWNlcnQuY29tL0RpZ2lDZXJ0VHJ1c3RlZFJvb3RHNC5jcmwwIAYDVR0gBBkwFzAIBgZngQwBBAIwCwYJYIZIAYb9bAcBMA0GCSqGSIb3DQEBCwUAA4ICAQB9WY7Ak7ZvmKlEIgF+ZtbYIULhsBguEE0TzzBTzr8Y+8dQXeJLKftwig2qKWn8acHPHQfpPmDI2AvlXFvXbYf6hCAlNDFnzbYSlm/EUExiHQwIgqgWvalWzxVzjQEiJc6VaT9Hd/tydBTX/6tPiix6q4XNQ1/tYLaqT5Fmniye4Iqs5f2MvGQmh2ySvZ180HAKfO+ovHVPulr3qRCyXen/KFSJ8NWKcXZl2szwcqMj+sAngkSumScbqyQeJsG33irr9p6xeZmBo1aGqwpFyd/EjaDnmPv7pp1yr8THwcFqcdnGE4AJxLafzYeHJLtPo0m5d2aR8XKc6UsCUqc3fpNTrDsdCEkPlM05et3/JWOZJyw9P2un8WbDQc1PtkCbISFA0LcTJM3cHXg65J6t5TRxktcma+Q4c6umAU+9Pzt4rUyt+8SVe+0KXzM5h0F4ejjpnOHdI/0dKNPH+ejxmF/7K9h+8kaddSweJywm228Vex4Ziza4k9Tm8heZWcpw8De/mADfIBZPJ/tgZxahZrrdVcA6KYawmKAr7ZVBtzrVFZgxtGIJDwq9gdkT/r+k0fNX2bwE+oLeMt8EifAAzV3C+dAjfwAL5HYCJtnwZXZCpimHCUcr5n8apIUP/JiW9lVUKx+A+sDyDivl1vupL0QVSucTDh3bNzgaoSv27dZ8/DGCAbgwggG0AgEBMHcwYzELMAkGA1UEBhMCVVMxFzAVBgNVBAoTDkRpZ2lDZXJ0LCBJbmMuMTswOQYDVQQDEzJEaWdpQ2VydCBUcnVzdGVkIEc0IFJTQTQwOTYgU0hBMjU2IFRpbWVTdGFtcGluZyBDQQIQBR6ekdcekQq75D1c7dDd2TANBglghkgBZQMEAgEFAKCB0TAaBgkqhkiG9w0BCQMxDQYLKoZIhvcNAQkQAQQwHAYJKoZIhvcNAQkFMQ8XDTIzMTEwMzExNTcyNlowKwYLKoZIhvcNAQkQAgwxHDAaMBgwFgQU2Rq5M/4XremCHqYT9aQ6cU4+fn0wLwYJKoZIhvcNAQkEMSIEIGmY+GsCefCDmP0PFcYjdxBUfi0EgKYuEZb9pUMyLNuVMDcGCyqGSIb3DQEJEAIvMSgwJjAkMCIEIILa8ZSVezaEAkWP1ScAaf5ixxRW+p4Lhqv4J+hTICfZMAoGCCqGSM49BAMCBEcwRQIgcxxuf7QHV9Fkpj1VhPrFqhNFh8dZzl8qUU/2N3Sr4eoCIQDKu0KGYL++CSsDAXjJciMDbr5ImTy3jw0yQU5GYYeLimd4NWNoYWluglkGMzCCBi8wggQXoAMCAQICEBtbCzvasORd8vMNnlTR2tIwDQYJKoZIhvcNAQELBQAwdTELMAkGA1UEBhMCVVMxIzAhBgNVBAoTGkFkb2JlIFN5c3RlbXMgSW5jb3Jwb3JhdGVkMR0wGwYDVQQLExRBZG9iZSBUcnVzdCBTZXJ2aWNlczEiMCAGA1UEAxMZQWRvYmUgUHJvZHVjdCBTZXJ2aWNlcyBHMzAeFw0yMzAyMDEwMDAwMDBaFw0yNDAyMDEyMzU5NTlaMIGhMREwDwYDVQQDDAhjYWktcHJvZDEcMBoGA1UECwwTQ29udGVudCBDcmVkZW50aWFsczETMBEGA1UECgwKQWRvYmUgSW5jLjERMA8GA1UEBwwIU2FuIEpvc2UxEzARBgNVBAgMCkNhbGlmb3JuaWExCzAJBgNVBAYTAlVTMSQwIgYJKoZIhvcNAQkBFhVncnAtY2FpLW9wc0BhZG9iZS5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDv0wCnfYY9lkHDsykrTG7FYlnYHBcyualuD5u9ULjzv+FsTWOLg8Nhrz9RTxI9EeBbu3Wm7f4vqPsQYfxkEp0wIa6DVmEOZhbAeRfbhybWQ/D4Wvvck4mEZR+QZmTpIn7HX61gbtMFHlJUxkYBctIoAt9TBAFbz9d5Ig2WG0bsH39b6/8USXnIIk4FB6dtBRT1xeEwSDtwOd1YBpXXNBJmRWHXNJZZ85of2tBTesg/kMvTrOJJxYDZ97U416wcvbVomlees+NXUY3/ZB4xH+NsZils7m1bL2v2hSnHiLoqZeUKklbHUmT4ZpjrZCdtuIsWm5j2PPXKr7HKUuCbZSXBAgMBAAWjggGMMIIBiDAMBgNVHRMBAf8EAjAAMA4GA1UdDwEB/wQEAwIHgDAeBgNVHSUEFzAVBgkqhkiG9y8BAQwGCCsGAQUFBwMEMIGOBgNVHSAEgYYwgYMwgYAGCSqGSIb3LwECAzBzMHEGCCsGAQUFBwICMGUMY1lvdSBhcmUgbm90IHBlcm1pdHRlZCB0byB1c2UgdGhpcyBMaWNlbnNlIENlcnRpZmljYXRlIGV4Y2VwdCBhcyBwZXJtaXR0ZWQgYnkgdGhlIGxpY2Vuc2UgYWdyZWVtZW50LjBdBgNVHR8EVjBUMFKgUKBOhkxodHRwOi8vcGtpLWNybC5zeW1hdXRoLmNvbS9jYV83YTVjM2EwYzczMTE3NDA2YWRkMTkzMTJiYzFiYzIzZi9MYXRlc3RDUkwuY3JsMDcGCCsGAQUFBwEBBCswKTAnBggrBgEFBQcwAYYbaHR0cDovL3BraS1vY3NwLnN5bWF1dGguY29tMB8GA1UdIwQYMBaAFFcpejJNzP7kNU7AHyRzznNTq99qMA0GCSqGSIb3DQEBCwUAA4ICAQBXjlGa3yAK/Gijn6n/JNU9FZm72MP6vc5czrWe9y0T+EawuRvhpD5Edi1TnXkrpe8sMkgSjTGdbY+yGhq8zlCWQeXN1/aWo3L9Xr1uNxY/oVpLn0uWWfnfJ7yR9gKl/yoMfhjydT4t1fXHi/MhfhrWSVRHqX2U31UFGz/e298P2kv+vqhzpIUo1bj+jibtoPLMMQcCOTtKiJOTh4o3VSZpwQDERCzo91NkF+LnZjwYl6fE5USIkg/oCoomXxSPpowybDrcRJ9ilbtJcER48/LGgwzv/c7OYdron4PnEXm1FkOaVj+QRf7OwiNTizonhIzLR5Vfp0QHOWv/bPzvCjPQd+Xr0Q4032WlSxQwostNTAPtoVAU4OCwVH3Ech38emJ00/6fkDCdr7MN8/4n2LSNrMUvaBEZdmLqDCBnO02dbFrmpg3pTc0FqRQ4GL/88pjRNSMy5tU9SoQnSCGYqIsjfL8AzgPEGiXXRgABYc1uXecf4/eayb3K2MPs7hnWTbUKpHHJIwxpdN3vTGdZNWpz9Oxfuo3eELQlkTvACHgqkaXi/FAanHe5PChn6fr1/4cNF8goD0buPApgS3zzwqjRhxrH8ISwPfJn8JqzurMaLDMnnc18tHzUiMtX73jf6oXh7voCxX/T4D3nFPlxU3om2cpcLQ1Wd4026x18rlSGR1kGpTCCBqEwggSJoAMCAQICEAyotlR7iebSBol1zYubieIwDQYJKoZIhvcNAQELBQAwbDELMAkGA1UEBhMCVVMxIzAhBgNVBAoTGkFkb2JlIFN5c3RlbXMgSW5jb3Jwb3JhdGVkMR0wGwYDVQQLExRBZG9iZSBUcnVzdCBTZXJ2aWNlczEZMBcGA1UEAxMQQWRvYmUgUm9vdCBDQSBHMjAeFw0xNjExMjkwMDAwMDBaFw00MTExMjgyMzU5NTlaMHUxCzAJBgNVBAYTAlVTMSMwIQYDVQQKExpBZG9iZSBTeXN0ZW1zIEluY29ycG9yYXRlZDEdMBsGA1UECxMUQWRvYmUgVHJ1c3QgU2VydmljZXMxIjAgBgNVBAMTGUFkb2JlIFByb2R1Y3QgU2VydmljZXMgRzMwggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQC3Hy69vQmzXEhs/gyDrmwB6lF4JaSAPomnsbKIZNr2iXaB+fkd85X8eJiNmI7P5O4cVT4Nc1p3zrESqBV4ZUyW8gcZ78QdwoHG8QNd2VNcHnMgSR+XT9Iafsnq9Nfww3Jt9KL3l5ANQ5n1+MJqr48EWNLll942bOL/JH4ywDSMoqhZqtJEIUUUGlQVBZ8CAvJc7LE6ddA5C52PE2Ppa7RfQgHXf4gfXVZwpxYRZcziPiOHqEvLb0J3cShUbejFxV6cwX8QyAPa1ePHg1RtM0HX+D34xHo3DkyGnmT+Ddq00TEDGG26AL5PdINKFIQl+zaq6KJFQe1fdGE5wrWzU4mBPmzaz3EbLn+7FWlwAhorYqIMldbfHE3ydc+aTU1JW7+bG19qmvhO9IluGtTtQDeqFBj2fg6faxsfVfVPD7stN6TwoIDlkOCE4RE+Iin8m3z3eqi/VsTmsmRqBxWDRaqOHz02EJoEDxXJG3ei+UbIIp01XZQvdufm90WxOTuqqan2ZqTPX9K5VdjEh/ovr7xFc5q1dZo+Sa5y4sTVM854/tLU3klOgUKzzSXYPYS3GhBcYJHjwr9xNRHnNX99D6F0g7OijScWfvtjxh13aTv/H0ETvymah4yfDpVdh9cK5YSCPqnuOlsujFAyhYwJXOWDvZZU2EkWVLDhoPx9zp7N4QIDAQABo4IBNDCCATAwEgYDVR0TAQH/BAgwBgEB/wIBADA1BgNVHR8ELjAsMCqgKKAmhiRodHRwOi8vY3JsLmFkb2JlLmNvbS9hZG9iZXJvb3RnMi5jcmwwDgYDVR0PAQH/BAQDAgEGMBQGA1UdJQQNMAsGCSqGSIb3LwEBBzBXBgNVHSAEUDBOMEwGCSqGSIb3LwECAzA/MD0GCCsGAQUFBwIBFjFodHRwczovL3d3dy5hZG9iZS5jb20vbWlzYy9wa2kvcHJvZF9zdmNlX2Nwcy5odG1sMCQGA1UdEQQdMBukGTAXMRUwEwYDVQQDEwxTWU1DLTQwOTYtMzMwHQYDVR0OBBYEFFcpejJNzP7kNU7AHyRzznNTq99qMB8GA1UdIwQYMBaAFKYc4W1UJEyoj0hyv26pjNXk7DHUMA0GCSqGSIb3DQEBCwUAA4ICAQBxzuUHjKbcLdzI4DtlXgCSgZXrlSAkr59pOF3JfPG42qVNAGU7JcEYXJ6+WbfcGwY7WYMl+jO7IvJPb7shXFYW9bnJgxX7lLU14KExchmcLNY1ee6IhBJ2Y8PzZMRUKSd5CkURPg0PBLGjz/KR/DofHx+G4rPTCOGORYxeYrd01lci5hVxvKccvIk7MD69ZTewfZPSM+0WnsU3f0Zmd7hgbRpUyWceG0eHFpdUKK/ZFWhHjDVC28odCnN885tHncKXviItK0ZUUo/AIthFKlhEXsnq9VL9fFbgvO83ZvpUQo5y8mY3cuGnEVGXdhjNb53CfC1u4dbpYmWaN99subUzEsUaUb3loLPfVfzDOpg2y9v37kBdy/wuXr20teY7U62xj/fAgs1QSnhUtlMTfCqbefyEycKVmKIrJkJLsvgTSYKVvH4FFIwfd5WjqOC97jX98rcVAzhAI0iSkazsWOMvL6m0L4nLJapx+85GsVX8Y6AHmEP4bmCElwil6KAP+UewJFiw5rmwV2pESHAhYuZJa03B8tl0nd2QJzvJGmbeBqXqpF9ORinFM3HErK8puRokOjFH2+1asLeI2tB31W/ELdNe27Ogduq6Z6qBwCp59YX27qydDhD0WRfN64kCs25K88iGAGNW2CAfTDS+b+WYJBiIL9jXYZ4LF+BiUvfdu2NwYWRZC70AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPZZAQBKX2Q2ihN2fLDLReHISpfOF0xIqNpOZXbBwZ0XanWG98erbIBdawl7r9nVma/uZjYH457wp00TVpKYUTJHMnzJMKskvM2Df4K6t5pUKGtJqEvMXLUy3g9kJq53aYDwikcUE+8wv+CYtu/+vii4XYSXQIxT4NN+JKoTDXmrNH1G46Nmpfq6SKk0g9GQ2brbkW3fzGR0xDxY3BXRy71guSBxN9TAbQGqUjMnkIyBcwV9wUQ2oCW9oIMNKASjW0CRkcFEzzmrQ+y+zHYpNvUaG7QehHcyhvOec3plzlyP6DZeQWp3PHA5bmonI8t5j6Qj15X1KnQiXuJ0rW+xoMA89aIVmpx4VgAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAOSaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA5LjEtYzAwMSA3OS4xNDYyODk5Nzc3LCAyMDIzLzA2LzI1LTIzOjU3OjE0ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjYyYTdmYWExLWJmZTMtMjE0Ny04MjAwLWMxM2NlMGU4ZTc1NCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoyNzRDMUI3RDdBNDAxMUVFQUJGRUFDRUIyQzkwNDc1QiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoyNzRDMUI3QzdBNDAxMUVFQUJGRUFDRUIyQzkwNDc1QiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjUuMiAoMjAyMzEwMjQubS4yMzc0IDRhYjk0MzkpICAoV2luZG93cykiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDphYjQzZjNjYy1hNTY4LTRkNGQtOTdiZC1iYjk0YjBlZjhjYmQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NjJhN2ZhYTEtYmZlMy0yMTQ3LTgyMDAtYzEzY2UwZThlNzU0Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+HNvo5wAADZFJREFUeNrsXFtPVUkW3gc4yP0qDigKON517FFbHRGn1TamjaOJvvhsjIkvPplgfEKe1AefNDE+GP+AmWTszPTYcbpn2piJzc1GWwlOekRBEBFQ7jeZ9ZVrnVkUtfc5CGp3h5VU9qUuu3bVV9+67DonND4+7omEQiHPJaWlpYlxcXGLKX8epTCdB5aXNnHU6c2bN5POcaREp+O9dHxSX1/f5s3KL1ImYCkasMrKyvIISJspD+AyZSTpOrodDSaIBpQCkwtgSM8oVd2/f39M2quoqAijmcrKyjG/l7L77vde+v6sfCRgbdu2LY3AtJNSgg0qDa5oTOViKQtM9nXTgQMHaqmpPEoLKXUQqJpcYIqPj/cSEhLMUZgUbYyNjZkjRPpu50n+VEUvKtditMEb7Xom5OrVqzvpkOXIukFps5XXTunO4cOHR7heKp1/ye1gEX9BCcdv6H4330cbCyh9iXrRgJUQ1FmarFWUIqDS4ApiCT9AobxMpj24uI/209LSvMLCwiLKz6fyQModAlW73TeAac6cOV5SUpIBlasv9qKRvgBYIyMj3tDQkDmPdaLRPzwrHA6bhGsNWr9xsMfEZnC7XDSg+tzv4lRCCRPfjJtHjhzpu3LlCkDVx4BKZICsx9gy4PT4rmFQQbIpdfM5ynX7gWrS/Phl7NixI0SDWCCD52Is14vqAXIByoluAkl+fr43f/58Lyvr7cIaHh4OJSYmfkug6rXZApOamprqUb6vned3X4CBujj29/cbkEl/7EUj74o+og4S2gh6xkypk6mUPXnyZN25c+fCDKzm8vLyOuQzqCAtJ06cuH/+/PkwAytMLCR57VjQFy5cmKeAiXJZGOeLFy/iPBVt4Nqeb60dogKLBm9O/FvxXIwVxBAaUBpgixYt8np7e7329vYJZUtKSkwSefHihVdTU9N2586dXrtfmNj09HQz0dMRvAsYD0dhLryrvG8s7/w+ZCrPcJSdx8duAb+6l0WgWqeu/8uMZMoDWCTr+BpMVoZ8jLUq18XXgdohEFg0cXF6kF2s5Uf9NqBwxL0FCxaYSXz58qWZSNzr6+vzioqKIm01NTV5ZLgbT9HuExgGAzBdUOmJEeb6EKD5AJKt1KJ9TwAFNrpz6tSpljNnzgiQuuh8DbNSNx9HlF0mx26/cbTHLy6AsSKGcVCyjWepJwnS2trqbdiwwZyDJaDyUBbslZmZGTG6Hz9+7D18+NDdUSqTkpIyY6B6V5b4mYsBAIGm27rXR/f+DFXGKm5Ega6P7a5lqvw6sbMIcFkKlCUAI6esQI0QBCwBjxirNqCkDACSkZFhQKLVCSassbHR27Jli6kvsnDhQnN8/vy5t3Hjxsj95ubmSQ6CVoEA5a8IBO+LsSKgoskPKxaC1DKo1mmDXF1/AwAyCO+rNoX1FrANVqLA6V6sfuGGgwcPphBovrCBIuwCgRp7+vSpAUd2dra5bmtrM6pvdHTUu3fvnrGdNHhEbt265XV1dXn79+9/y8V0XltbGwkDkKpsqqqqqhG2AmgBrFn5+Qo0Uyw21gRm0kwCLwqAAgC2b99u2AQCVYWyACtUGkRUoC2bNm0yYBIBe/l5ncKaWmg1hrj/47TCRu32ebUam4LyAweEymK1QG+PUdk3PmXCrGZicrej9e99CD0znvs4NsPtRh2fmMMNLmBBYHgDmTC4ly1bNslWAbhu375tyh06dGgCw2kB+yDEAIEh39HR4RsjE+/NkgJKf0DwlNJ3jkndi2Yo/QXOZ5RxWElpOaUqSk99QLWPErzUr2OcD+j7T+GPUKqZocldyu2mWWbMv1mt4T3q2OObSVnNz46MD49xMfelE85ArOGGiA2FSR0cHDRggVe3fv16Lzc317cXCBeUlZUZu8sVBLUF7YrnaDMWygsjWpLJx1eOvCS8LKX+GFeYdPS1T356wLOC7NcOK/g4HSbaSmku2zZtlo0D6l8U5R2mIxmO91/F79iP8aY+lmhAR2Us09PXr439hAles2ZNoK2Tl5dnwgorV66clHfz5k1v165dk8CFuJYfWwm4/Twgn4FMZqO0U00OPg/lsgck0k3Ae6JACq8HamsAJgPl9fOAzef8VLpey1HtVGXUQoZ45b7QawzgojqpauJNZIYnpEXUFpWZw8ZxMqsdEdgUixlUqPMt1RlygE8mv4jO5/M7tFHZXs4HI+uJG4YFQvldnF+sAPRGjd8SSjl8fzGVG6I6Dxk76GcKl8uOlbESh4eHDVOBpWCcQ/1F88qQv2fPnknlnjx5YsIJOBYXF/9/NqhtANcV8ZbYlc8zswJYJJ8H5Eem7A3WxEYmjdVcigycyltBeV/RsVANbDKDrJnL5jom+Dsa+A5e0WDOn7g/Kx3PR/06qpPDjBS28gG6e6pfDT6gimeV5LF6iqh4focxHo84Ne8hzv8ng2sJA6tfjUedROkZbPkqRhbie8JauTEBi7y6ePncAQaaO3fulKLaWgDQgYEBoxrh+WlgiW3l9znFNtp5IBN5kv0YS6vJYgYVVlU120mfUPot58sqbeaBxJh8zqs7TIN+i573R2aMfykGQD2w21dcfx2DMI3yXjOosLqH6Fr6U8VqDHGhzVw2ns8T2BaTWNMefrc09a7PA1R1iNuuYibZwfXmUB8Qq/qrZa9tZjs1i65fcRswHf5O1zuYgZ7yeG1jdq3SbM9gauFF8yimOBYABaN66dKlUwKVS0TVQT2+evVqgjcIYAWxXxQ12O/jcWUq0MlqvwtQsIeo8zOUWoQHOcCTNMbqQsqPcTARE5PCk/+a64woB6HPYf/JMzq57KgqW8AAaKa8Jn4fbfOlKe92wGeoMq13GFQqdwD95aDmZ5Q+Z9AJwwwoYL5Wn3vqHH2JCOU9pkMjg7jWMgH8GYtspVx8cIwW6QYDrV271rccgATGAkhgm8GTfPDggbd161YTWIUqdLGVnPt4lQKsQQebJTCVj7CNlO4YmAwFlCUaBAo0XVR/nK6T+RqTNh5g7GuwLrTyMxlMfY760r/eKI4J+hJSffA1rlm9o989DK5SLtOmnpOm+pCr6zNoojpJVK6HnxFbuKGiomI5u5hRQVVdXW0+0UjowGa97u6Jn5ewewExMIAN3mA0lepjX8nLgsYXMy2P8SAmWJM6zGoJhnkrr7BEBRwbJLYHJJ/zQ5gwZhx7IkMMkEFWfZF8BcxOFU9zAes33L9+yzERMKLP66nMM8V4HjNFpgPI0r9kft4AmwLjzE4wD0Z58S0OMCvk/RMDgB1zHGtZtIoIgopKe/TokRNYnZ2dzroAIsAFo93Vrq0OAxgLdPZ7TZBsLOtBAl2vZbvqE1VWT4JWM/YkDfJk4P4+GtxqR5l07otrYjMdk6Ydj24ebxjwO23CZ6A+YGegiJOn+vY3xcC9jncY5TwA7E92+zGEW/r5+CnbUjdijbXYbJXs8E6ck11aWmp2G+B7oC1Qc2AsP+AAVHqT3RR3Vd5nQ9dO93hw6ik95hX9H7jonF/PIQBjj7ARC9f5rhUTQrlWrt/L9e/y/XbOq1ce0ihfy0A85useZop6K2gJ8P8A0FACo/7De7tV5Qd4sgIa8QDp2IBoDTNOvU7Mlo1sQ44rwNSzwS3t19l14WWq/tb4qLW76rn3Yp2gSd8KCVjwWMqC1JP6nmei8Ddu3DBRdgmI4jshDHbkByVpQ5+rY9P3339fk5OT46m9RVMNLGLQf2cxdCGff62M3I8m1EcY73nqVg4nhBYe/FK+EwJH+E4cpAozgxoQlhEQwGNctWqVUW2rV6+OGOx++96jbcm193bJBrx3lBQV3NRu8o+xgCrWvervsoddWD8pKamQ40Py9QEM00htNrzrnvxY3yeW/kUTIRlbO7kYa4OlxyMsZG87loQ8Yhdv9+7dJkIPYGk28mOrFStWGOMeux+wdx0foq9fvx7Z3QDGgmeK9D63y8j74D2QpI+unZHTAZdsgJzKxE33vfQzowEuluC3q57eyx/EWBn2DQQ3MdDa9bd/xrV8+fLIpx8beH4/HigoKHgbKi4u9s6ePeuVl5cbYOkOIxwB0M30Bj+0DRDhy4LE7KSfszJ9SbAMd0+5vxEjG6EB+SWMRq3eepycnGwMdq0mfX7aNWHbsrAhovvXrl2bpCKRB2DDSZjuKpd2AVa0qX9EMSszK3GOmEWCjopLgBMJE4GEyZajVh8OA9zJXBpUOL98+bJ37Ngxr6WlRbPbuIABrILPS+8KAtRD/3t6ekzsTBbLLKg+HLC0GrxLkzCmAaWTDSptm0QDGf92cMKvdy5duuQdPXpU6+sB7TAAWFCzOI8VTCiLOoinIeaGNqbyO8JZmXlg3a2srPyJANQqQHIBTIPLBlYQc8GTxM5SAdHevXvNr3NgSylGe2Z7owAG2AZHcSbshHJgOJQDoCSeNgumj2hjMbAMqHBBE/IAv0imiU6AjSUGvN9Pv1z2lAtc2AiILTg4r6mpMfGP48ePew0NDdJGU21t7SuXaysAt3e26l85z7LSx5cJ4YbTp0/PJVBN2G6wb9++PJrAzdif5fpBhTaK/f70I1qygPeMrqvq6upi0nmuPyWZlY8XJPWNY7mEVJX5GyNK8yiFg34J7fM3RYEgIyCN09H8jVF1dfXs3xj9CoD1PwEGAKorJqR4atjIAAAAAElFTkSuQmCC")=>{let e,i=0,s=0;const n=[],a=d=>{const f=new nt.Image;f.src=d,f.onload=()=>{n.forEach(y=>{var m;const p=new Fn({source:f,fitMode:ji.Stretch});(m=y.Rd)===null||m===void 0||m.Ce(p),i=f.width,s=f.height,u(y)})}};a(t);const o=r.Gn(d=>a(d));let l;if(new nt.Image instanceof nt.HTMLImageElement){const d=new nt.Image;d.src=t,l=new Fn({source:d,fitMode:ji.Stretch})}else if(nt.lcjs_setup){const d=new nt.Image;d.src=t;const f=nt.lcjs_setup(d.naturalWidth,d.naturalHeight);f.getContext("2d").drawImage(d,0,0),l=new Fn({source:f,fitMode:ji.Stretch})}else l=new it({color:vs("#f00")});const u=d=>{if(d.Rd){const f=d.dt.mi({x:d.dt.x.getInnerEnd(),y:d.dt.y.getInnerStart()},{x:-(3+i),y:3}),y=d.dt.mi({x:d.dt.x.getInnerEnd(),y:d.dt.y.getInnerStart()},{x:-3,y:3+s}),m={x:y.x-f.x,y:y.y-f.y};d.Rd.Fe(f).q(m)}e&&e.Ss()};return e=r.FI("logo",Number.MAX_SAFE_INTEGER),d=>{const f={dt:d};return(y=>{y.Rd&&y.Rd.dispose(),e&&(y.Rd=e.ke(y.dt).Ce(l).setMouseInteractions(!0).we(vt).setMouseEnterEventHandler(()=>{r.Wr(ae.Point)}).setMouseLeaveEventHandler(()=>{r.Wr(ae.None)}).setMouseClickEventHandler(A2).setTouchEndEventHandler(A2),u(y))})(f),n.push(f),{Ps:()=>u(f),W:()=>(y=>{y.Rd&&(y.Rd.dispose(),y.Rd=void 0);const m=n.indexOf(y);m>=0&&n.splice(m,1),n.length<=0&&r.Wn(o)})(f)}}},A2=()=>nt.open("https://lightningchart.com/lightningchart-js/");class tz{constructor(){this.mR=this.dP.bind(this),nt.addEventListener("scroll",this.mR,{passive:!0})}W(){this.mR&&nt.removeEventListener("scroll",this.mR),this.mR=void 0}}class Nf{constructor(t,e){this.ma=t,this.X=e,this.yR=!0,this.pR=null,this.SR=null}}class _m{constructor(t){this.vR=!1,this.bR=1,this.xR=t,this.MR={ma:Y(0,0),X:Y(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),yR:!0,pR:null,SR:null},this._R=Y(64,64),this.wR=new Uint8ClampedArray(this._R.x*this._R.y*this.bR)}CR(t,e){if(!t.yR)return null;if(t.pR&&t.SR){const u=this.CR(t.pR,e);return u!==null?u:this.CR(t.SR,e)}const i=Kn(t.X.x,t.X.y);if(t.ma.x+t.X.x>=Number.MAX_SAFE_INTEGER&&(i.x=this._R.x-t.ma.x-1),t.ma.y+t.X.y>=Number.MAX_SAFE_INTEGER&&(i.y=this._R.y-t.ma.y-1),t.X.x===e.x&&t.X.y===e.y)return t.yR=!1,t;if(i.x<e.x||i.y<e.y)return null;let s,n;const a=i.x-e.x,o=i.y-e.y;let l=a<o;return a===0&&o===0&&(l=!(t.X.x>t.X.y)),l?(s=new Nf(_t(t.ma,{x:0,y:1}),Y(t.X.x,e.y)),n=new Nf(_t(t.ma,{x:0,y:e.y+1}),Y(t.X.x,t.X.y-1-e.y))):(s=new Nf(_t(t.ma,{x:1,y:0}),Y(e.x,t.X.y)),n=new Nf(_t(t.ma,{x:e.x+1,y:0}),Y(t.X.x-1-e.x,t.X.y))),t.pR=s,t.SR=n,this.CR(t.pR,e)}kR(t,e){const i={TR:!1,ma:null};let s=this.CR(this.MR,e);if(s===null)for(;s===null&&this._R.x<this.xR&&this._R.y<this.xR;){if(!this.FR(Y(2*this._R.x,2*this._R.y)))return this.vR=!0,null;i.TR=!0,s=this.CR(this.MR,e)}if(s===null)return this.vR=!0,null;for(let n=0;n<e.y;n+=1)for(let a=0;a<e.x;a+=1){const o=s.ma.y+n,l=s.ma.x+a;this.wR[o*this.bR*this._R.x+l*this.bR+0]=t[n*this.bR*e.x+a*this.bR+0]}return i.ma=s.ma,i}FR(t){if(t.x>this.xR||t.y>this.xR)return!1;const e=new Uint8ClampedArray(t.x*t.y*this.bR);for(let i=0;i<this._R.y;i+=1)for(let s=0;s<this._R.x;s+=1)e[i*t.x*this.bR+s*this.bR+0]=this.wR[i*this._R.x*this.bR+s*this.bR+0];return this._R=t,this.wR=e,!0}}class ez{constructor(t){this.IR=new Map,this.xR=t,this.IR.set(this.IR.size,new _m(this.xR))}PR(t){return this.IR.get(t)}kR(t,e){let i=-1;const s=Array.from(this.IR.values());for(let o=0;o<s.length;o+=1){const l=s[o];if(!l)break;if(!l.vR){i=o;break}}i===-1&&(i=this.IR.size,this.IR.set(this.IR.size,new _m(this.xR)));const n=this.IR.get(i);if(!n)return null;let a=n.kR(t,e);if(!a&&n.vR){const o=this.IR.size,l=new _m(this.xR);this.IR.set(o,l),i=o,a=l.kR(t,e)}return a?{DR:i,...a}:null}}var Ta;(function(r){r[r.Fail=0]="Fail",r[r.Success=1]="Success",r[r.Resize=2]="Resize"})(Ta||(Ta={}));const iz=sS("font-texture");class sz{constructor(t){this.BR=new Map,this.LR=new Map,this.No=iz(),this.RR=t,this.ER=new ez(this.RR.zR||4096)}VR(){return this.LR.forEach(t=>{this.RR.OR(t)}),this.LR.clear(),this}NR(t,e){const i=this.BR.get(e);if(i)return i.get(t)}GR(t,e,i){let s=this.BR.get(e);if(s||(s=new Map,this.BR.set(e,s)),s.has(t.glyph))return Ta.Success;const n=this.ER.kR(i,t.size);if(!n||!n.ma)return Ta.Fail;n.TR&&this.WR();const a=this.ER.PR(n.DR);if(!a)return Ta.Fail;let o=this.LR.get(n.DR);if(!o){const z=this.RR.gl.createTexture();if(!z)throw new Ei("Failed to create texture for font!");o=z,this.LR.set(n.DR,z)}const l=n.ma,u=a._R.x,d=a._R.y,f=-t.offsetX,y=t.baseline-t.size.y,m=-t.offsetX+t.size.x,p=t.baseline,x=l.x/u,b=(l.y+t.size.y)/d,v=(l.x+t.size.x)/u,R=l.y/d,E=[x,b,v,b,x,R,x,R,v,b,v,R],V=[f,y,m,y,f,p,f,p,m,y,m,p],F={origin:l,size:t.size,advanceX:t.advance,baseline:t.baseline,vertices:V,texCoords:E,packerId:n.DR,texture:o};s.set(t.glyph,F);const L=this.RR.gl;return L.pixelStorei(L.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),L.bindTexture(L.TEXTURE_2D,o),L.texImage2D(L.TEXTURE_2D,0,L.LUMINANCE,a._R.x,a._R.y,0,L.LUMINANCE,L.UNSIGNED_BYTE,this.RR.UR?a.wR:new Uint8Array(a.wR)),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_MIN_FILTER,L.LINEAR),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_MAG_FILTER,L.LINEAR),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_WRAP_S,L.CLAMP_TO_EDGE),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_WRAP_T,L.CLAMP_TO_EDGE),L.bindTexture(L.TEXTURE_2D,null),n.TR?Ta.Resize:Ta.Success}WR(){this.BR.forEach(t=>{t.forEach((e,i)=>{const s=this.ER.PR(e.packerId);if(!s)return;const n=e.origin,a=s._R.x,o=s._R.y,l=n.x/a,u=(n.y+e.size.y)/o,d=(n.x+e.size.x)/a,f=n.y/o,y=[l,u,d,u,l,f,l,f,d,u,d,f];e.texCoords=y,t.set(i,e)})})}}const Pt=r=>{if(r instanceof xe||r instanceof Js)return r._i()?"linear-highPrecision":"linear";if(r instanceof Ci){const t={};return r.x instanceof Eo&&(t.x={base:r.x.gi()}),r.y instanceof Eo&&(t.y={base:r.y.gi()}),["logarithmic",t]}return"linear"},Ds=r=>{const t=Object.keys(r),e={};return t.forEach(i=>{const s=r[i];let n=!1;e[i]=a=>{if(!a)return n;const o=s();return n=o,o}}),e},ir=(r,t,e)=>r.getLookUpProperty()==="value"?e:r.getLookUpProperty()==="x"?{min:t.vt(),max:t.bt()}:r.getLookUpProperty()==="y"?{min:t.xt(),max:t.Mt()}:r.getLookUpProperty()==="z"?{min:t.lS(),max:t.aS()}:void 0,Nm=r=>!(!r||r.lookUpProperty!=="value"||!r.lut.percentageValues),rz=r=>(t,e)=>e%2?t:t+r;class nz{constructor(t){this.YR=new Map,this.HR=sS("font"),this.$R=new Map,this.XR=new Set,this.RR=t}VR(t=!1){return(t||this.XR.size===0)&&(this.YR.forEach((e,i)=>{e.VR(),this.YR.delete(i)}),this.XR.clear()),this}jR(t){this.XR.add(t)}ZR(t){this.XR.delete(t)}QR(t,e,i,s){const n=nt.devicePixelRatio,a=`${s?"dark":"light"} - ${lS(e,n).id}`,o=this.$R.get(a),l=this.YR.get(o);let u=0,d=0,f=0;const y=t.split(""),m=e.size,p=.45*e.size*n,x=Math.round(1*e.size);let b=!1;for(let R=0;R<y.length;R+=1){const E=y[R],V=l&&l.NR(E,m);V?(E.trim()!==""&&(d=Math.max(d,V.baseline),u=Math.min(u,V.baseline-(V.size.y-1))),f+=V.advanceX):(E.trim()!==""&&(d=Math.max(d,0),u=Math.min(u,0-(x-1))),f+=p,b=!0)}const v=((R,E,V)=>{if(V===0||V===360||V===180||V%180==0)return{x:R,y:E};if(V===90||V===-90||(V+90)%180==0)return{x:E,y:R};const F=V*Math.PI/180,L=Math.cos(F),z=Math.sin(F);return{x:Math.abs(R*L)+Math.abs(E*z),y:Math.abs(R*z)+Math.abs(E*L)}})(f/n,(d-u+1)/n,i);return{x:v.x,y:v.y,isEstimate:b}}JR(t,e,i){const s=`${i?"dark":"light"} - ${e.id}`;let n=this.$R.get(s);n||(n=this.HR(),this.YR.set(n,new sz(this.RR)),this.$R.set(s,n));const a=this.YR.get(n);if(!a)throw new Ei("Failed to get font texture!");let o=0,l=0,u=0;const d=t.split(""),f=new Map;let y=0;const m=e.properties.size;for(let b=0;b<d.length;b+=1){const v=d[b],R=Math.ceil(y);let E=a.NR(v,m);if(!E){const V=this.RR.KR(v,e.properties,e.dpr,i);if(!V)continue;const F=a.GR(V[1],m,V[0]);if(F===Ta.Resize){this.XR.forEach(L=>{L.la.i=!0}),b=-1,y=0,l=0,o=0,f.clear();continue}if(F===Ta.Fail)throw new Ei("Failed to create glyph");if(E=a.NR(v,m),!E)throw new Ei("Failed to get glyph after creation")}if(v.trim()!==""){let V=f.get(E.texture);V||(V={vertices:[],texCoords:[]},f.set(E.texture,V)),V.vertices.push(...E.vertices.map(rz(R))),V.texCoords.push(...E.texCoords),l=Math.max(l,E.baseline),o=Math.min(o,E.baseline-(E.size.y-1))}y+=E.advanceX}u=y;const p=Kt(Y(0,o),Y(u,l)),x=[];return f.forEach((b,v)=>{x.push({texCoords:new Float32Array(b.texCoords),vertices:new Float32Array(b.vertices),texture:v})}),[x,p]}}class v2{constructor(t){this.modifiers=[],this.modifiers=t}build(t){const e=this.modifiers.filter(i=>az(i));for(const i of e)t=i(t);return`${uo(this.modifiers.filter(i=>oz(i))).map(i=>i.qR).join(`
`)}
${t}`}}const az=r=>typeof r=="function",oz=r=>r&&typeof r=="object"&&"tE"in r,et=(...r)=>t=>{r=r.reverse();for(let e of r)typeof e=="string"&&(e=e.includes("{")||e.endsWith(";")?e:`${e};`,e=e.trim(),t=t.replace("void main(void)",`${e}
void main(void)`));return t},g0=r=>t=>(r=r.endsWith(";")?r:`${r};`,t.replace(r,"")),Ge=(...r)=>t=>{const e=r.filter(s=>s!==!1);for(let s=0;s<e.length;s+=1)e[s]=e[s].endsWith(";")?e[s]:`${e[s]};`,e[s]=e[s].startsWith("	")?e[s]:`	${e[s]}`;const i=e.join(`
`);return t.replace(`void main(void) {
`,`void main(void) {
${i}
`)},y0=(r,...t)=>e=>{for(let a=0;a<t.length;a+=1)t[a]=t[a].endsWith(";")?t[a]:`${t[a]};`,t[a]=t[a].startsWith("	")?t[a]:`	${t[a]}`;const i=t.join(`
`),s=new RegExp(`(.*${r}.*)`),n=e.replace(s,`${i}
$1`);return t.forEach(a=>{if(!n.includes(a))throw new Error(`ShaderBefore misusage (not found: 
${a}
match: 
${r}
result: 
${n}
)`)}),n},$i=(r,...t)=>e=>{const i=t.filter(d=>typeof d=="string");for(let d=0;d<i.length;d+=1)i[d]=i[d].endsWith(";")?i[d]:`${i[d]};`,i[d]=i[d].startsWith("	")?i[d]:`	${i[d]}`;const s=i.join(`
`),n=e.lastIndexOf(r),a=e.substring(n),o=a.indexOf(`
`),l=a.substring(o),u=`${e.substring(0,n+o)}
${s}${l}`;return i.forEach(d=>{if(!u.includes(d))throw new Error(`ShaderAfter misusage (not found: "${d}", match: "${r}", result: "${u}")`)}),u},Tn=(...r)=>t=>{for(let e of r)if(typeof e=="string"){e=e.endsWith(";")?e:`${e};`,e=e.trim(),e=e.startsWith("	")?e:`	${e}`;const i=t.lastIndexOf("}");t=`${t.substring(0,i-1)}
${e}
}`}return t},ms=(r,t)=>e=>{let i,s;if(r.includes("uniform")||r.includes("attribute")){const n=r.endsWith(";")?r:`${r};`;e=et(n)(e),i=r.split(" ")[2].replace(";","")}else i=r;if(t.includes(" ")){const n=t.endsWith(";")?t:`${t};`;e=et(n)(e),s=t.split(" ")[2].replace(";","")}else s=t;return Tn(`	${s} = ${i};`)(e)},hz=(...r)=>t=>{r=r.reverse();for(const e of r)t=e+t;return t},Wi={roundUnsigned:{tE:"roundUnsigned",qR:`float roundUnsigned(float number) {
  return floor(number + 0.5);
}`},linearStep:{tE:"linearStep",qR:`float linearStep(float step0, float step1, float step) {
  return clamp((step - step0) / (step1 - step0), 0.0, 1.0);
}`},decodeUbyteRGBAEncodedFloat:{tE:"decodeUbyteRGBAEncodedFloat",qR:`
      // Denormalize 8-bit color channels to integers in the range 0 to 255.
      ivec4 floatsToBytes(vec4 inputFloats, bool littleEndian) {
        ivec4 bytes = ivec4(inputFloats * 255.0);
        return (
          littleEndian
          ? bytes.abgr
          : bytes
        );
      }
      
      // Break the four bytes down into an array of 32 bits.
      void bytesToBits(const in ivec4 bytes, out bool bits[32]) {
        for (int channelIndex = 0; channelIndex < 4; ++channelIndex) {
          float acc = float(bytes[channelIndex]);
          for (int indexInByte = 7; indexInByte >= 0; --indexInByte) {
            float powerOfTwo = exp2(float(indexInByte));
            bool bit = acc >= powerOfTwo;
            bits[channelIndex * 8 + (7 - indexInByte)] = bit;
            acc = mod(acc, powerOfTwo);
          }
        }
      }
      
      // Compute the exponent of the 32-bit float.
      float getExponent(bool bits[32]) {
        const int startIndex = 1;
        const int bitStringLength = 8;
        const int endBeforeIndex = startIndex + bitStringLength;
        float acc = 0.0;
        int pow2 = bitStringLength - 1;
        for (int bitIndex = startIndex; bitIndex < endBeforeIndex; ++bitIndex) {
          acc += float(bits[bitIndex]) * exp2(float(pow2--));
        }
        return acc;
      }
      
      // Compute the mantissa of the 32-bit float.
      float getMantissa(bool bits[32], bool subnormal) {
        const int startIndex = 9;
        const int bitStringLength = 23;
        const int endBeforeIndex = startIndex + bitStringLength;
        // Leading/implicit/hidden bit convention:
        // If the number is not subnormal (with exponent 0), we add a leading 1 digit.
        float acc = float(!subnormal) * exp2(float(bitStringLength));
        int pow2 = bitStringLength - 1;
        for (int bitIndex = startIndex; bitIndex < endBeforeIndex; ++bitIndex) {
          acc += float(bits[bitIndex]) * exp2(float(pow2--));
        }
        return acc;
      }
      
      // Parse the float from its 32 bits.
      float bitsToFloat(bool bits[32]) {
        float signBit = float(bits[0]) * -2.0 + 1.0;
        float exponent = getExponent(bits);
        bool subnormal = abs(exponent - 0.0) < 0.01;
        float mantissa = getMantissa(bits, subnormal);
        float exponentBias = 127.0;
        return signBit * mantissa * exp2(exponent - exponentBias - 23.0);
      }
      
      // Decode a 32-bit float from the RGBA color channels of a texel.
      float decodeUbyteRGBAEncodedFloat(vec4 rgba, bool littleEndian) {
        ivec4 rgbaBytes = floatsToBytes(rgba, littleEndian);
        bool bits[32];
        bytesToBits(rgbaBytes, bits);
        return bitsToFloat(bits);
      }
      `},texelFetchWithFallback:{webgl2:{tE:"texelFetchWithFallback",qR:`vec4 texelFetchWithFallback(sampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {
  return texelFetch(textureSampler, iTexel, 0);
}`},webgl1:{tE:"texelFetchWithFallback",qR:`vec4 texelFetchWithFallback(sampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {
  vec2 halfTexel = 0.5 / textureSize;
  return texture2D(textureSampler, (vec2(iTexel) * 2.0 + 1.0) * halfTexel);
}`}},texelFetchUnsignedWithFallback:{webgl2:{tE:"texelFetchUnsignedWithFallback",qR:`uvec4 texelFetchUnsignedWithFallback(usampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {
  return texelFetch(textureSampler, iTexel, 0);
}`},webgl1:{tE:"texelFetchUnsignedWithFallback",qR:`uvec4 texelFetchUnsignedWithFallback(usampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {
  vec2 halfTexel = 0.5 / textureSize;
  return texture2D(textureSampler, (vec2(iTexel) * 2.0 + 1.0) * halfTexel);
}`}},modulus:{tE:"modulus",qR:`int modulus(int a, int b) {
  return (a)-((a)/(b))*(b);
}`},computeScreenSpaceWireframe:{tE:"computeScreenSpaceWireframe",qR:`#extension GL_OES_standard_derivatives : enable
float computeScreenSpaceWireframe (vec3 barycentric, float lineWidth) {
  vec3 dist = fwidth(barycentric);
  vec3 smoothed = smoothstep(dist * ((lineWidth * 0.5) - 0.5), dist * ((lineWidth * 0.5) + 0.5), barycentric);
  return 1.0 - min(min(smoothed.x, smoothed.y), smoothed.z);
}`}},rl=(r,t)=>{const e=t.steps,i=e.length-1,s=[et("uniform vec4 uFallbackColor")],n=[],a=[];for(let o=0;o<t.steps.length;o+=1)n.push(`uniform float uLUTValue${o}`),a.push(`uniform vec4 uLUTColor${o}`);return s.push(et(...n,...a),t.percentageValues&&et("uniform float uMinValue","uniform float uMaxValue")),t.interpolate?s.push(y0("colorFragment","vec4 colorLookup = vec4(0.0)",`if (${r} <= -340282346638528859811704183484516925440.0) {
                    colorLookup = uFallbackColor;
                }`,"float value = "+(t.percentageValues?`clamp((${r} - uMinValue) / (uMaxValue  - uMinValue), 0.0, 1.0);`:`${r}`),`if (value <= uLUTValue0) {
                    colorLookup = uLUTColor0;
                }`,`if (value >= uLUTValue${i}) {
                    colorLookup = uLUTColor${i};
                }`,...e.slice(0,-1).map((o,l)=>`if (value >= uLUTValue${l} && value <= uLUTValue${l+1}) { colorLookup = uLUTColor${l} + vec4(
                        uLUTColor${l+1}[0] -  uLUTColor${l}[0],
                        uLUTColor${l+1}[1] -  uLUTColor${l}[1],
                        uLUTColor${l+1}[2] -  uLUTColor${l}[2],
                        uLUTColor${l+1}[3] -  uLUTColor${l}[3]
                    ) * (value - uLUTValue${l})/(uLUTValue${l+1} - uLUTValue${l});}`),"vec4 colorFragment = colorLookup")):s.push(y0("colorFragment","vec4 colorLookup = vec4(uLUTValue0)",`if (${r} <= -340282346638528859811704183484516925440.0) {
                    colorLookup = uFallbackColor;
                }`,"float value = "+(t.percentageValues?`clamp((${r} - uMinValue) / (uMaxValue  - uMinValue), 0.0, 1.0);`:`${r}`),`if (${r} >= uLUTValue${i}) { colorLookup = uLUTColor${i};}`,...e.slice(1).reverse().map(o=>{const l=e[e.indexOf(o)-1];return`if (value < uLUTValue${e.indexOf(o)}) { colorLookup = uLUTColor${e.indexOf(l)};}`}),"vec4 colorFragment = colorLookup")),s},nl=[et("uniform sampler2D uMaskTexture"),et("varying vec2 vMaskTextureCoord"),$i("antiAliasFactor =","vec4 maskTextureSample = texture2D(uMaskTexture, vMaskTextureCoord)","antiAliasFactor = maskTextureSample.r")],al=[et("uniform sampler2D uMaskTexture"),et("varying vec2 vMaskTextureCoord"),$i("antiAliasFactor =","vec4 maskTextureSample = texture2D(uMaskTexture, vMaskTextureCoord)","antiAliasFactor = maskTextureSample.a")],b2=[et("varying vec3 vPosWorld;","varying vec3 vNormal;","uniform vec3 uCameraLoc;","uniform vec3 uLightLoc;","uniform vec4 uLightColor;","uniform vec4 uAmbientColor;","uniform float uShininess;","uniform float uAmbientReflection;","uniform float uDiffuseReflection;","uniform float uSpecularReflection;"),$i("colorFragment =","float ambientReflection = uAmbientReflection","float diffuseReflection = uDiffuseReflection","float specularReflection = uSpecularReflection","vec3 ambientColor = uAmbientColor.rgb","vec3 diffuseColor = colorFragment.rgb","vec3 specularColor = uLightColor.rgb","vec3 vNormalNormalized = normalize(vNormal)","vNormalNormalized = (float(gl_FrontFacing) * 2.0 - 1.0) * vNormalNormalized","vec3 lightDir = normalize( uLightLoc - vPosWorld )","float lambertian = abs(dot(vNormalNormalized, lightDir))","float specular = 0.0","vec3 R =  reflect(-lightDir, vNormalNormalized)","vec3 V = normalize(uCameraLoc - vPosWorld)","float specAngle = max(dot(R,V),0.0)","specular = pow(specAngle, uShininess)","colorFragment = vec4(ambientReflection * ambientColor + diffuseReflection * lambertian * diffuseColor + specularReflection * specular * specularColor, colorFragment.a)")];class Lf extends Error{constructor(t,e,i){super(`Dynamic shader generation error
(id: ${e})
 ${i?`when applying feature: ${i.idVertex?`vert: ${i.idVertex}`:""} ${i.idFragment?`frag: ${i.idFragment}`:""}`:""} | ${t}`)}}const Ts=(...r)=>{let t="";for(const e of r){if(typeof e!="object"){t+=`${String(e)},`;continue}const i=[{prefix:"",obj:e}];for(;i.length>0;){const{prefix:s,obj:n}=i.shift();t+=`${s}:`;const a=Object.keys(n).sort();for(const o of a){const l=n[o];typeof l=="object"&&l.__proto__===Object.prototype||Array.isArray(l)?i.push({prefix:o,obj:l}):t+=`${o}=${String(l)},`}}}return t},M2=r=>r.find(t=>{var e;return(e=t.iE)===null||e===void 0?void 0:e.sE})!==void 0,Bf=r=>r.find(t=>{var e;return(e=t.iE)===null||e===void 0?void 0:e.eE})!==void 0,Jo=(r,t,...e)=>{const i=[],s=t?"vec3":"vec2",{axisWorldTranslation:n,scaling:a,translation:o,offset:l,flipXY:u,flipXZ:d,splitPosAttribute:f,normalSource:y}=r,m=[];if(y==="attribute"&&i.push(et("attribute vec3 aNormal"),Ge("vec3 normal = aNormal")),n!=="linear-highPrecision"?e.forEach(p=>{p.attributeNameAxisCoord!==void 0&&p.variableNameAxisCoord!==void 0&&(f!==!0?i.push(Ge(`${s} ${p.variableNameAxisCoord} = ${p.attributeNameAxisCoord}`)):i.push(Ge(`${s} ${p.variableNameAxisCoord} = ${t?`vec3(${p.attributeNameAxisCoord}X, ${p.attributeNameAxisCoord}Y, ${p.attributeNameAxisCoord}Z)`:`vec2(${p.attributeNameAxisCoord}X, ${p.attributeNameAxisCoord}Y)`}`)))}):e.forEach(p=>{r.splitPosAttribute!==!0?i.push(Ge(`${s} ${p.variableNameAxisCoord}_highpart = ${p.attributeNameAxisCoord}_highpart`),Ge(`${s} ${p.variableNameAxisCoord}_lowpart = ${p.attributeNameAxisCoord}_lowpart`)):i.push(Ge(`${s} ${p.variableNameAxisCoord}_highpart = vec2(${p.attributeNameAxisCoord}_highpartX, ${p.attributeNameAxisCoord}_highpartY)`),Ge(`${s} ${p.variableNameAxisCoord}_lowpart = vec2(${p.attributeNameAxisCoord}_lowpartX, ${p.attributeNameAxisCoord}_lowpartY)`))}),l&&l.rotation){const p=l.rotation.dataType,x=p==="uniform"?"u":"a";if(p==="attribute-deg"){i.push(et("attribute float aRotDeg"),et("uniform float uBaseRotDeg"));const b="cRot",v="aInstanceGeo";i.push(Ge(`vec2 ${b} = vec2(sin((aRotDeg + uBaseRotDeg) * 0.01745329252), cos((aRotDeg + uBaseRotDeg) * 0.01745329252))`,`vec2 rotatedGeo = vec2(${v}.x * ${b}.y + ${v}.y * ${b}.x, ${v}.y * ${b}.y - ${v}.x * ${b}.x)`))}else{const b=`${x}Rot`;i.push(et(`${p} vec2 ${b}`));const v="aInstanceGeo";i.push(Ge(`vec2 rotatedGeo = vec2(${v}.x * ${b}.y + ${v}.y * ${b}.x, ${v}.y * ${b}.y - ${v}.x * ${b}.x)`))}}if(l&&i.push(et(`attribute ${s} aInstanceGeo`)),u===!0){if(n==="linear-highPrecision")throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + flipXY");e.forEach(p=>{m.push(`${p.variableNameAxisCoord} = ${t?`vec3(${p.variableNameAxisCoord}.y, ${p.variableNameAxisCoord}.x, ${p.variableNameAxisCoord}.z)`:`vec2(${p.variableNameAxisCoord}.y, ${p.variableNameAxisCoord}.x)`}`)})}if(d===!0){if(n==="linear-highPrecision")throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + flipXZ");e.forEach(p=>{m.push(`${p.variableNameAxisCoord} = vec3(${p.variableNameAxisCoord}.z, ${p.variableNameAxisCoord}.y, ${p.variableNameAxisCoord}.x)`)})}if(a){if(n==="linear-highPrecision")throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + scaling");const p=(a.dataType==="attribute"?"a":"u")+"Scaling",x=t?"vec3":"vec2";i.push(et(`${a.dataType} ${x} ${p}`)),e.forEach(b=>{m.push(`${b.variableNameAxisCoord} = ${b.variableNameAxisCoord} * ${p}`)})}if(o&&o.sizeUnit==="axis"){if(n==="linear-highPrecision")throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + translation (axis)");const p=(o.dataType==="attribute"?"a":"u")+"TranslationAxis",x=t?"vec3":"vec2";i.push(et(`${o.dataType} ${x} ${p}`)),e.forEach(b=>{m.push(`${b.variableNameAxisCoord} = ${b.variableNameAxisCoord} + ${p}`)})}if(l&&l.sizeUnit==="axis"){if(n==="linear-highPrecision")throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + offset (axis)");const p=(l.dataType==="attribute"?"a":"u")+"OffsetAxis",x=l.symmetric===!0?"float":s;i.push(et(`${l.dataType} ${x} ${p}`));const b=l.halved?" * 0.5":"",v=l.rotation?"rotatedGeo":"aInstanceGeo",R="offsetGeometry";m.push(`${s} ${R} = ${p} * ${v}${b} * sign(uScale)`),t&&y==="gpu-calculate"&&m.push(`${s} normal = ${v}`),e.forEach(E=>{m.push(`${E.variableNameAxisCoord} = ${E.variableNameAxisCoord} + ${R}`)})}if(n===void 0||n==="linear")i.push(et(`uniform ${s} uDisp`,`uniform ${s} uScale`)),e.forEach(p=>{m.push(`${s} ${p.variableNameWorldCoord} = (${p.variableNameAxisCoord} - uDisp) / uScale`)});else if(n==="linear-highPrecision")i.push(et(`uniform ${s} uDisp`,`uniform ${s} uScale`,`uniform ${s} uScaleStart_highpart`,`uniform ${s} uScaleStart_lowpart`)),e.forEach(p=>{m.push(`${s} ${p.variableNameAxisCoord}_hprecision = (${p.variableNameAxisCoord}_highpart - uScaleStart_highpart) + (${p.variableNameAxisCoord}_lowpart - uScaleStart_lowpart)`,`${s} ${p.variableNameWorldCoord} = (${p.variableNameAxisCoord}_hprecision - uDisp) / uScale`,`${s} ${p.variableNameAxisCoord} = ${p.variableNameAxisCoord}_highpart + ${p.variableNameAxisCoord}_lowpart`)});else if(n==="matrix")i.push(et("uniform mat3 uMatrix")),e.forEach(p=>{m.push(`vec2 ${p.variableNameWorldCoord} = (uMatrix * vec3(${p.variableNameAxisCoord}, 1.0)).xy`)});else if(n==="matrix4")i.push(et("uniform mat4 uMatrix")),e.forEach(p=>{m.push(`vec4 ${p.variableNameWorldCoord} = uMatrix * ${p.attributeNameAxisCoord}`)});else if(n[0]==="logarithmic"){i.push(et(`uniform ${s} uScaleStart`,`uniform ${s} uScaleStartLog`,`uniform ${s} uScaleInterval`,`uniform ${s} uScaleIntervalLog`,`uniform ${s} uViewportStart`,`uniform ${s} uViewportSize`));const p=t?["x","y","z"]:["x","y"],x=[];p.forEach(b=>{const v=n[1][b];if(v!==void 0){const R=v.base;if(R==="e")return;const E=`float cLog${R} = 1.0 / log(${Tl(R).toFixed(1)})`;x.includes(E)||x.push(E)}}),i.push(et(...x)),e.forEach((b,v)=>{const R=`${v}`,E=[];p.forEach(V=>{const F=V.toUpperCase(),L=n[1][V];if(L===void 0)m.push(`float posPercent${F}${R} = (${b.variableNameAxisCoord}.${V} - uScaleStart.${V}) / uScaleInterval.${V}`);else{const z=L.base,B=z==="e";m.push(`float posLog${F}${R} = log(${b.variableNameAxisCoord}.${V})${B?"":` * cLog${z}`}`,`float posPercent${F}${R} = (posLog${F}${R} - uScaleStartLog.${V}) / uScaleIntervalLog.${V}`)}E.push(`posPercent${F}${R}`)}),m.push(`${s} ${b.variableNameWorldCoord} = uViewportStart + ${s}(${E.join(", ")}) * uViewportSize`)})}if(l&&l.sizeUnit==="px"){i.push(et("uniform vec2 uRatioPxClip"));let p="vec2(0.0, 0.0)";l.useAlignment&&(i.push(et("uniform vec2 uOffsetAlignment")),p="uOffsetAlignment");const x=(l.dataType==="attribute"?"a":"u")+"OffsetPixels",b=l.symmetric===!0?"float":s;i.push(et(`${l.dataType} ${b} ${x}`));const v=l.halved?" * 0.5":"",R=`(${l.rotation?"rotatedGeo":"aInstanceGeo"} + ${p}) * ${x}${v} * uRatioPxClip`;e.forEach(E=>{m.push(`${E.variableNameWorldCoord} = ${E.variableNameWorldCoord} + ${R}`)})}if(l&&l.sizeUnit==="scale"){i.push(et("uniform vec2 uRatioPxClip")),i.push(et("uniform vec2 uSizePixels"));let p="vec2(0.0, 0.0)";l.useAlignment&&(i.push(et("uniform vec2 uOffsetAlignment")),p="uOffsetAlignment");const x=(l.dataType==="uniform"?"u":"a")+"OffsetScale";i.push(et(`${l.dataType} float ${x}`));const b=`(${l.rotation?"rotatedGeo":"aInstanceGeo"} + ${p}) * ${x} * uSizePixels * uRatioPxClip`;e.forEach(v=>{m.push(`${v.variableNameWorldCoord} = ${v.variableNameWorldCoord} + ${b}`)})}if(l&&l.sizeUnit==="wu"){const p=(l.dataType==="attribute"?"a":"u")+"OffsetWU",x=l.symmetric===!0?"float":s;i.push(et(`${l.dataType} ${x} ${p}`));const b=l.halved?" * 0.5":"",v=l.rotation?"rotatedGeo":"aInstanceGeo",R="offsetGeometry";m.push(`${s} ${R} = ${p} * ${v}${b}`),t&&y==="gpu-calculate"&&m.push(`${s} normal = normalize(${R})`),e.forEach(E=>{m.push(`${E.variableNameWorldCoord} = ${E.variableNameWorldCoord} + ${R}`)})}if(l&&l.sizeUnit==="nwu"){i.push(et("uniform float uRatioNwuWu"));const p=(l.dataType==="attribute"?"a":"u")+"OffsetNWU",x=l.symmetric===!0?"float":s;i.push(et(`${l.dataType} ${x} ${p}`));const b=l.halved?" * 0.5":"",v=l.rotation?"rotatedGeo":"aInstanceGeo",R="offsetGeometry";m.push(`${s} ${R} = ${p} * ${v}${b}`),t&&y==="gpu-calculate"&&m.push(`${s} normal = normalize(${R})`),e.forEach(E=>{m.push(`${E.variableNameWorldCoord} = ${E.variableNameWorldCoord} + ${R} * uRatioNwuWu`)})}return r.snapToNearestPixel&&(i.push(et("uniform vec2 uViewportSizePx")),e.forEach(p=>{m.push(`${p.variableNameWorldCoord} = 2.0 * floor(((${p.variableNameWorldCoord} + 1.0) * 0.5) * uViewportSizePx + 0.5) / uViewportSizePx - 1.0`)})),i.push(y0("gl_Position =",...m)),i},Pf=(r,t,e,i)=>{const s=[],n=r.axisWorldTranslation,a=t?"vec3":"vec2";if(n==="linear")s.push($i(e,`${a} ${i} = ${e} * uScale + uDisp`));else if(n==="linear-highPrecision")s.push($i(e,`${a} ${i} = ${e} * uScale + uDisp + uScaleStart_highpart + uScaleStart_lowpart`));else{if(n==="matrix")throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");if(n==="matrix4")throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");if(n[0]!=="logarithmic")throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");{const o=[`${a} ${e}_percent = (${e} - uViewportStart) / uViewportSize`];(t?["x","y","z"]:["x","y"]).forEach(l=>{const u=l.toUpperCase(),d=n[1][l];if(d===void 0)o.push(`float pos${u}Back = ${e}_percent.${l} * uScaleInterval.${l} + uScaleStart.${l}`);else{const f=d.base,y=f==="e"?"1.0":`cLog${f}`;o.push(`float pos${u}Back = pow(2.71828, (${e}_percent.${l} * uScaleIntervalLog.${l} + uScaleStartLog.${l}) / ${y})`)}}),o.push(`${a} ${i} = ${a}(posXBack, posYBack${t?", posZBack":""})`),s.push($i(e,...o))}}return s},R2=r=>(t=>t.find(e=>{var i;return(i=e.iE)===null||i===void 0?void 0:i.hE})!==void 0)(r)?[g0("attribute vec4 aColor"),g0("vColor = aColor"),et("attribute vec4 aColorA"),et("attribute vec4 aColorB"),Tn("vColor = mix(aColorA, aColorB, aSegmentSide)")]:[],E2=r=>(t=>t.find(e=>{var i;return(i=e.iE)===null||i===void 0?void 0:i.rE})!==void 0)(r)?[g0("attribute float aLookupValue"),g0("vLookupValue = aLookupValue"),et("attribute float aLookupValueA"),et("attribute float aLookupValueB"),Tn("vLookupValue = mix(aLookupValueA, aLookupValueB, aSegmentSide)")]:[],j={"2D":{idFeature:"2D",apply:r=>({idVertex:"2D",idFragment:"2D",defaultVertexShader:"2D",defaultFragmentShader:"FragmentShader"})},"2DCompose":{idFeature:"2DCompose",apply:r=>({idVertex:"2DCompose",idFragment:"2DCompose",defaultVertexShader:"2DMatrix",defaultFragmentShader:"Empty"})},"3D":{idFeature:"3D",iE:{sE:!0},apply:r=>({idVertex:"3D",idFragment:"3D",defaultVertexShader:"3D",defaultFragmentShader:"FragmentShader"})},PointSize:r=>({idFeature:"PointSize",apply:t=>{const e=r==="uniform"?"u":"a";return{idVertex:`SizePrimitive:${Ts(r)}`,idFragment:void 0,vertexShaderModifiers:[et(`${r} float ${e}PointSize`,"uniform float uDevicePixelRatio"),Tn(`gl_PointSize = ${e}PointSize * uDevicePixelRatio`)]}}}),Color:r=>{const t=r&&r.dataType,e=r&&r.maskTextureText,i=r&&r.maskTexture,s=r&&r.overrideOpacity;return{idFeature:"Color",iE:{eE:!(!Array.isArray(r.dataType)||r.dataType[1]==="value")||void 0,rE:!(!Array.isArray(r.dataType)||r.dataType[1]!=="value")||void 0,hE:r.dataType==="attribute"||void 0},apply:(n,a)=>{let o,l=`Color:${Ts(r)}`;const u=[];let d="FragmentShader";const f=[];if(t==="uniform")f.push(et("uniform vec4 uColor"),Ge("vec4 colorFragment = uColor"),...e?nl:[],...i?al:[]);else if(t==="attribute")o="colorAttribute",u.push(ms("attribute vec4 aColor","varying vec4 vColor")),f.push(et("varying vec4 vColor"),Ge("vec4 colorFragment = vColor"),...e?nl:[],...i?al:[]);else if(t==="texture")o="colorTexCoord",u.push(ms("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")),f.push(et("varying vec2 vTextureCoord"),et("uniform sampler2D uColorTexture"),et("uniform vec4 uColor"),Ge("vec4 colorFragment = texture2D(uColorTexture, vTextureCoord)",`if(vTextureCoord.x < 0. || vTextureCoord.x > 1. || vTextureCoord.y < 0. || vTextureCoord.y > 1.) {
                        colorFragment = uColor;
                    }`),...e?nl:[],...i?al:[]);else if(t==="texture-coord-calc-gpu")o="colorTexCoord",d="Empty",u.push(et("attribute vec2 aTextureCoord"),et("varying vec2 vTextureCoord"),Tn("vTextureCoord = gl_Position.xy * 0.5 + 0.5")),f.push(et("varying vec2 vTextureCoord"),et("uniform sampler2D uColorTexture"),Ge("vec4 colorFragment = texture2D(uColorTexture, vTextureCoord)","gl_FragColor = colorFragment;"));else if(Array.isArray(t)&&t[0]==="image")o="colorTexCoord",u.push(ms("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")),t[1].fitMode===ji.Tile?f.push(et("uniform sampler2D uColorTexture"),et("varying vec2 vTextureCoord"),Ge("vec4 colorFragment = texture2D(uColorTexture, vTextureCoord);")):f.push(et("uniform sampler2D uColorTexture"),et("varying vec2 vTextureCoord"),et("uniform vec4 uColor"),Ge("vec4 colorFragment = texture2D(uColorTexture, vTextureCoord);",`if(vTextureCoord.x < 0. || vTextureCoord.x > 1. || vTextureCoord.y < 0. || vTextureCoord.y > 1.){
                                colorFragment = uColor;
                            }`));else if(Array.isArray(t)&&t[0]==="lookup"){const y=t[1];if(y==="value")o="lookup:value",u.push(ms("attribute float aLookupValue","varying float vLookupValue"));else{const m=`posAxis.${y}`;o=`lookup:${y}`,u.push(ms(m,"varying float vLookupValue"))}f.push(et("varying float vLookupValue"),...rl("vLookupValue",t[2]),...e?nl:[],...i?al:[])}else if(Array.isArray(t)&&t[0]==="gradient"){const y=t[1],m=y.getColorStops();li(y)?(l=`rgradient${m.length},${i},${e}`,f.push(et("uniform vec4 uBounds","uniform vec2 uCenter","uniform vec2 uDistance","uniform float uAspect"),et(...Jf(m.map((p,x)=>[`uniform vec4 color_${x}`,`uniform float stop_${x}`]))),Wi.linearStep,Ge("vec2 uv = vec2((((gl_FragCoord.x)-uBounds.x)/(uBounds.z))*uAspect,((gl_FragCoord.y)-uBounds.y)/(uBounds.w))","float mixVal = distance(uv/uDistance, uCenter/uDistance)","vec4 color = mix(color_0, color_1, linearStep(stop_0, stop_1, mixVal))",...m.map((p,x)=>x<2?"":`color = mix(color, color_${x}, linearStep(stop_${x-1}, stop_${x}, mixVal));`),"vec4 colorFragment = color"),...e?nl:[],...i?al:[])):ui(y)&&(l=`lgradient${m.length},${i},${e}`,f.push(et("uniform vec4 uBounds","uniform vec2 uStartPoint","uniform vec2 uEndPoint"),et(...Jf(m.map((p,x)=>[`uniform vec4 color_${x}`,`uniform float stop_${x}`]))),Wi.linearStep,Ge("vec2 uv = gl_FragCoord.xy - uBounds.xy","float magnitude = ((uv.x-uStartPoint.x) * (uEndPoint.x-uStartPoint.x) + (uv.y-uStartPoint.y) * (uEndPoint.y-uStartPoint.y)) / (pow(uEndPoint.x - uStartPoint.x, 2.0) + pow(uEndPoint.y-uStartPoint.y,2.0))","vec4 color = mix(color_0, color_1, linearStep(stop_0, stop_1, magnitude))",...m.map((p,x)=>x<2?"":`color = mix(color, color_${x}, linearStep(stop_${x-1}, stop_${x}, magnitude))`),"vec4 colorFragment = color"),...e?nl:[],...i?al:[]))}if(e||i){const y="maskTexture";o=o?`${o} ${y}`:`Color:${y}`,u.push(ms("attribute vec2 aMaskTextureCoord","varying vec2 vMaskTextureCoord"))}return s&&f.push(et("uniform float uOpacity"),$i("colorFragment =","colorFragment.a *= uOpacity")),{vertexShaderModifiers:u,fragmentShader:d,fragmentShaderModifiers:f,idVertex:o,idFragment:l}}}},ColorShaded3D:r=>{const{dataType:t,shadingStyle:e,wireframe:i}=r;let s;const n=`ColorShaded3D:${Ts(r)}`;return{idFeature:"ColorShaded3D",iE:{eE:!(!Array.isArray(r.dataType)||r.dataType[1]==="value")||void 0,rE:!(!Array.isArray(r.dataType)||r.dataType[1]!=="value")||void 0},apply:(a,o)=>{const l=[],u=[];if(l.push(e==="phong"&&ms("normal","varying vec3 vNormal"),ms("posWorld","varying vec3 vPosWorld")),t==="uniform")u.push(et("uniform vec4 uColorDiffuse"),Ge("vec4 colorFragment = uColorDiffuse"));else if(t==="attribute")s="per-vertex-color",l.push(ms("attribute vec4 aColor","varying vec4 vColor")),u.push(et("varying vec4 vColor"),Ge("vec4 colorFragment = vColor"));else if(Array.isArray(t)){const d=t[1];if(d==="value")s="lookup:value",l.push(ms("attribute float aLookupValue","varying float vLookupValue"));else{const f=`posAxis.${d}`;s=`lookup:${d}`,l.push(ms(f,"varying float vLookupValue"))}u.push(et("varying float vLookupValue"),...rl("vLookupValue",t[2]))}if(i){const d="wireframe";s=s?`${s},${d}`:d,l.push(ms("attribute vec3 aTriangleBary","varying vec3 vTriangleBary")),u.push(et("varying vec3 vTriangleBary"),et("uniform vec4 uWireframeColor","uniform float uWireframeThickness"),Wi.computeScreenSpaceWireframe,$i("colorFragment =","float edge = computeScreenSpaceWireframe(vTriangleBary, uWireframeThickness)","colorFragment = mix(colorFragment, uWireframeColor, edge)"))}return e==="phong"&&u.push(...b2),{idVertex:s,idFragment:n,vertexShaderModifiers:l,fragmentShader:"FragmentShader",fragmentShaderModifiers:u}}}},VertexLocation:r=>({idFeature:"VertexLocation",apply:t=>{const e=[],i=M2(t),s=r.coordType?r.coordType:i?"vec3":"vec2";return r.axisWorldTranslation!=="linear-highPrecision"?r.splitPosAttribute!==!0?e.push(et(`attribute ${s} aPos`)):e.push(et("attribute float aPosX"),et("attribute float aPosY"),i&&et("attribute float aPosZ")):r.splitPosAttribute===!0?e.push(et("attribute float aPos_highpartX"),et("attribute float aPos_lowpartX"),et("attribute float aPos_highpartY"),et("attribute float aPos_lowpartY")):e.push(et(`attribute ${s} aPos_highpart`),et(`attribute ${s} aPos_lowpart`)),e.push(...Jo(r,i,{attributeNameAxisCoord:"aPos",variableNameAxisCoord:r.coordType==="vec4"?void 0:"posAxis",variableNameWorldCoord:"posWorld"})),{idVertex:`VertexLocation:${Ts(r)}`,idFragment:void 0,vertexShaderModifiers:e}}}),Model3D:r=>({idFeature:"Model3D",apply:t=>{const e=[];return e.push(et("attribute vec3 aGeoPos"),et("uniform mat4 uModelRotation"),et("uniform mat4 uModelRotationNormals"),et("uniform vec3 uLocationAxis"),et("uniform vec3 uModelAlignment"),et("uniform vec3 uModelScale"),et("uniform vec3 uModelSize"),...Jo({axisWorldTranslation:"linear",normalSource:r.normalSource},!0,{attributeNameAxisCoord:"uLocationAxis",variableNameAxisCoord:"locationAxis",variableNameWorldCoord:"locationWorld"}),y0("gl_Position =","vec3 posWorld = locationWorld + ((uModelRotation * vec4(aGeoPos, 1.0)).xyz  - (uModelAlignment + 1.0) * uModelSize/2.0) * uModelScale;"),r.normalSource==="attribute"&&$i("vec3 normal ="," normal = (uModelRotationNormals * vec4(normal, 1.0)).xyz;"),...Bf(t)?Pf({axisWorldTranslation:"linear",normalSource:r.normalSource},!0,"posWorld","posAxis"):[]),{vertexShaderModifiers:e,idVertex:`Model3D:${Ts(r)}`,idFragment:void 0}}}),LineInstanced2D:r=>({idFeature:"LineInstanced2D",apply:t=>({idVertex:`LineInstanced2D:${Ts(r)}`,idFragment:void 0,vertexShaderModifiers:[et("uniform float uThicknessPixels"),et("uniform vec2 uRatioPxClip"),...r.axisWorldTranslation!=="linear-highPrecision"&&r.splitPosAttribute!==!0?[et("attribute vec2 aLocationA"),et("attribute vec2 aLocationB")]:r.axisWorldTranslation==="linear-highPrecision"&&r.splitPosAttribute!==!0?[et("attribute vec2 aLocationA_highpart"),et("attribute vec2 aLocationB_highpart"),et("attribute vec2 aLocationA_lowpart"),et("attribute vec2 aLocationB_lowpart")]:r.axisWorldTranslation!=="linear-highPrecision"&&r.splitPosAttribute===!0?[et("attribute float aLocationAX"),et("attribute float aLocationAY"),et("attribute float aLocationBX"),et("attribute float aLocationBY")]:r.axisWorldTranslation==="linear-highPrecision"&&r.splitPosAttribute===!0?[et("attribute float aLocationA_highpartX"),et("attribute float aLocationA_highpartY"),et("attribute float aLocationB_highpartX"),et("attribute float aLocationB_highpartY"),et("attribute float aLocationA_lowpartX"),et("attribute float aLocationA_lowpartY"),et("attribute float aLocationB_lowpartX"),et("attribute float aLocationB_lowpartY")]:[],et("attribute vec2 aSegmentPosition"),et("attribute float aSegmentSide"),...Jo(r,!1,{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA"},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB"}),r.ensureMinimumSegmentLength&&et("uniform vec2 uMinSegmentPixelVector"),$i("worldB = ",r.ensureMinimumSegmentLength&&"float segmentLengthPixels = sqrt(pow(worldB.x - worldA.x, 2.0) + pow(worldB.y - worldA.y, 2.0)) / length(uRatioPxClip)",r.ensureMinimumSegmentLength&&`if (segmentLengthPixels == 0.0 || segmentLengthPixels < length(uMinSegmentPixelVector)) {
                        worldB = worldA + uMinSegmentPixelVector * uRatioPxClip;
                    }`,"vec2 directionBasis = worldB - worldA","vec2 directionBasisNorm = normalize(directionBasis)","vec2 perpendBasisNorm = vec2(-directionBasisNorm.y, directionBasisNorm.x)","vec2 offset = mix(worldA, worldB, aSegmentSide)","vec2 thicknessDirection = aSegmentPosition.x * directionBasisNorm + aSegmentPosition.y * perpendBasisNorm","vec2 posWorld = offset + thicknessDirection * uThicknessPixels * uRatioPxClip"),...E2(t),...R2(t),...Bf(t)?Pf(r,!1,"posWorld","posAxis"):[]]})}),Area2D:r=>({idFeature:"Area2D",apply:t=>({idVertex:`Area2D:${Ts(r)}`,idFragment:void 0,vertexShaderModifiers:[...r.axisWorldTranslation!=="linear-highPrecision"&&r.splitPosAttribute!==!0?[et("attribute vec2 aLocationA"),et("attribute vec2 aLocationB")]:r.axisWorldTranslation==="linear-highPrecision"&&r.splitPosAttribute!==!0?[et("attribute vec2 aLocationA_highpart"),et("attribute vec2 aLocationB_highpart"),et("attribute vec2 aLocationA_lowpart"),et("attribute vec2 aLocationB_lowpart")]:r.axisWorldTranslation!=="linear-highPrecision"&&r.splitPosAttribute===!0?[et("attribute float aLocationAX"),et("attribute float aLocationAY"),et("attribute float aLocationBX"),et("attribute float aLocationBY")]:r.axisWorldTranslation==="linear-highPrecision"&&r.splitPosAttribute===!0?[et("attribute float aLocationA_highpartX"),et("attribute float aLocationA_highpartY"),et("attribute float aLocationB_highpartX"),et("attribute float aLocationB_highpartY"),et("attribute float aLocationA_lowpartX"),et("attribute float aLocationA_lowpartY"),et("attribute float aLocationB_lowpartX"),et("attribute float aLocationB_lowpartY")]:[],et("attribute float aCurveOrBaseline"),et("attribute float aSegmentSide"),...Jo(r,!1,{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA"},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB"}),$i("worldB = ","vec2 posCoord = mix(worldA, worldB, aSegmentSide)","float baseline = min(posCoord.y, -1.0)","vec2 posWorld = vec2(posCoord.x, mix(posCoord.y, baseline, aCurveOrBaseline))"),...E2(t),...R2(t),...Bf(t)?Pf(r,!1,"posWorld","posAxis"):[]]})}),LineInstanced3D:r=>({idFeature:"LineInstanced3D",apply:t=>({idVertex:`LineInstanced3D:${Ts(r)}`,idFragment:void 0,defaultFragmentShader:"FragmentShader",vertexShaderModifiers:[et("uniform float uOffsetWU"),et("attribute vec3 aLocationA"),et("attribute vec3 aLocationB"),et("attribute float aSegmentPosition"),et("attribute float aPerpendHorizontal"),et("attribute float aPerpendVertical"),...Jo({axisWorldTranslation:r.axisWorldTranslation,normalSource:"custom"},M2(t),{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA"},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB"}),$i("worldB = ","vec3 directionBasis = worldB - worldA","vec3 directionBasisNorm = normalize(directionBasis)","vec3 notParallel = normalize(mix( vec3( 0.0, 1.0, 0.0 ), vec3( 0.2, 0.8, 0.0 ), step( abs(directionBasis.y), 0.9 ) ))","vec3 horizontalBasis = normalize( cross( notParallel, directionBasisNorm ) )","vec3 verticalBasis = normalize( cross( horizontalBasis, directionBasisNorm ) )","vec3 normal = aPerpendHorizontal * horizontalBasis + aPerpendVertical * verticalBasis","vec3 posWorld = worldA + aSegmentPosition * directionBasis + normal * uOffsetWU * 0.5"),...Bf(t)?Pf({axisWorldTranslation:r.axisWorldTranslation},!0,"posWorld","posAxis"):[]]})}),RoundedEdges3D:{idFeature:"RoundedEdges3D",apply:r=>({idVertex:"RoundedEdges3D",idFragment:void 0,vertexShaderModifiers:[et("attribute vec3 aEdge"),et("uniform float uEdgeRoundness"),$i("posWorld =","vec3 boxSizeWorld = abs( aOffsetAxis / uScale )","float boxMinDimensionWorldXZ = min( boxSizeWorld.x, boxSizeWorld.z )","vec3 edgeRoundAmount = uEdgeRoundness * vec3( boxMinDimensionWorldXZ, min( boxMinDimensionWorldXZ, boxSizeWorld.y ), boxMinDimensionWorldXZ )","posWorld = posWorld + aEdge * edgeRoundAmount")]})},ColorGrid2D:r=>{const t=r.flipXY,e=r.intensityTextureType,i=r.littleEndian;return{idFeature:"ColorGrid2D",apply:(s,n)=>({idVertex:void 0,idFragment:`ColorGrid2D:${Ts(r)}`,fragmentShader:"FragmentShader",fragmentShaderModifiers:[et("uniform vec4 uTileBounds","uniform vec2 uTileDimensions","uniform sampler2D uTileIntensityValues"),e==="ubyte"&&Wi.decodeUbyteRGBAEncodedFloat,r.interpolation==="bilinear"?Ge("vec2 cellSizePx = uTileBounds.zw / (uTileDimensions - 1.0)","vec2 cellIndex = (gl_FragCoord.xy - uTileBounds.xy) / cellSizePx","vec2 cellStart = floor(cellIndex)","vec2 cellEnd = ceil(cellIndex)","vec2 cellStartNormalized = cellStart / (uTileDimensions - 1.0)","vec2 cellEndNormalized = cellEnd / (uTileDimensions - 1.0)",`vec4 sample00 = texture2D(uTileIntensityValues, ${t?"cellStartNormalized":"vec2(cellStartNormalized.y, cellStartNormalized.x)"})`,`vec4 sample01 = texture2D(uTileIntensityValues, ${t?"vec2(cellStartNormalized.x, cellEndNormalized.y)":"vec2(cellStartNormalized.y, cellEndNormalized.x)"})`,`vec4 sample10 = texture2D(uTileIntensityValues, ${t?"vec2(cellEndNormalized.x, cellStartNormalized.y)":"vec2(cellEndNormalized.y, cellStartNormalized.x)"})`,`vec4 sample11 = texture2D(uTileIntensityValues, ${t?"cellEndNormalized":"vec2(cellEndNormalized.y, cellEndNormalized.x)"})`,"float intensity00 = "+(e==="float"?"sample00.x":`decodeUbyteRGBAEncodedFloat(sample00, ${i})`),"float intensity01 = "+(e==="float"?"sample01.x":`decodeUbyteRGBAEncodedFloat(sample01, ${i})`),"float intensity10 = "+(e==="float"?"sample10.x":`decodeUbyteRGBAEncodedFloat(sample10, ${i})`),"float intensity11 = "+(e==="float"?"sample11.x":`decodeUbyteRGBAEncodedFloat(sample11, ${i})`),"vec2 lerpFactors = cellIndex - cellStart",`float intensityR1 = mix(intensity00, intensity10, ${t?"lerpFactors.x":"lerpFactors.y"})`,`float intensityR2 = mix(intensity01, intensity11, ${t?"lerpFactors.x":"lerpFactors.y"})`,`float intensityP = mix(intensityR1, intensityR2,  ${t?"lerpFactors.y":"lerpFactors.x"})`):Ge("vec2 cellSizePx = uTileBounds.zw / (uTileDimensions)","vec2 cellIndex = (gl_FragCoord.xy - uTileBounds.xy) / cellSizePx","vec2 cellIndexNormalized = cellIndex / uTileDimensions",`vec4 sample0 = texture2D(uTileIntensityValues, ${t?"cellIndexNormalized":"vec2(cellIndexNormalized.y, cellIndexNormalized.x)"})`,"float intensityP = "+(e==="float"?"sample0.x":`decodeUbyteRGBAEncodedFloat(sample0, ${i})`)),...rl("intensityP",r.lut)]})}},DrawToNormalTexture:r=>{const t=r.flipXZ,e=r.vertexIdSource,i=r.normalTextureType,s=r.heightmapTextureType,n=r.littleEndian;return{idFeature:"DrawToNormalTexture",apply:(a,o)=>{const l=[],u=[];return l.push(et("uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture",i==="uint"?"flat varying uvec3 vNormalRGB":"varying vec3 vNormalRGB",e==="attribute"&&"attribute float aVertexID"),e!==void 0&&Wi.roundUnsigned,Wi.modulus,Wi.texelFetchWithFallback[o],s==="ubyte"&&Wi.decodeUbyteRGBAEncodedFloat,Ge(e===void 0?"int iVertex = gl_VertexID":"int iVertex = int(roundUnsigned(aVertexID))","int iSecondary = modulus(iVertex, (uTileDimensions.y - 1))","int iPrimary = iVertex / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 uTileDimensionsMinus1 = vec2(uTileDimensions) - 1.0","vec2 halfTexelWorld = 2.0 / (uTileDimensionsMinus1 * 2.0)","vec2 posWorld = vec2(-1.0 + halfTexelWorld.y + iCell.y * 2.0 * halfTexelWorld.y, -1.0 + halfTexelWorld.x + iCell.x * 2.0 * halfTexelWorld.x)","vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)",`vec3 posAxis0 = vec3(
                            uTileStartLocationAxisXZ.x + iCell.${t?"y":"x"} * cellSizeAxis.x,
                            ${s==="float"?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${n})`} ,
                            uTileStartLocationAxisXZ.y + iCell.${t?"x":"y"} * cellSizeAxis.y
                        )`,"vec2 iCell1 = iCell + vec2(1.0, 0.0)",`vec3 posAxis1 = vec3(
                            uTileStartLocationAxisXZ.x + iCell1.${t?"y":"x"} * cellSizeAxis.x,
                            ${s==="float"?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell1.y, iCell1.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell1.y, iCell1.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${n})`},
                            uTileStartLocationAxisXZ.y + iCell1.${t?"x":"y"} * cellSizeAxis.y
                        )`,"vec2 iCell2 = iCell + vec2(0.0, 1.0)",`vec3 posAxis2 = vec3(
                            uTileStartLocationAxisXZ.x + iCell2.${t?"y":"x"} * cellSizeAxis.x,
                            ${s==="float"?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell2.y, iCell2.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell2.y, iCell2.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${n})`},
                            uTileStartLocationAxisXZ.y + iCell2.${t?"x":"y"} * cellSizeAxis.y
                        )`,"vec2 iCell3 = iCell + vec2(1.0, 1.0)",`vec3 posAxis3 = vec3(
                            uTileStartLocationAxisXZ.x + iCell3.${t?"y":"x"} * cellSizeAxis.x,
                            ${s==="float"?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell3.y, iCell3.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell3.y, iCell3.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${n})`},
                            uTileStartLocationAxisXZ.y + iCell3.${t?"x":"y"} * cellSizeAxis.y
                        )`,"vec3 normal = normalize(cross(posAxis2 - posAxis0, posAxis1 - posAxis0) + cross(posAxis1 - posAxis3, posAxis2 - posAxis3))",i==="uint"?"vNormalRGB = uvec3(((normal / 2.0) + 0.5) * float(-1u))":"vNormalRGB = (normal / 2.0) + 0.5","gl_PointSize = 1.0")),u.push(et(i==="uint"?"flat varying uvec3 vNormalRGB":"varying vec3 vNormalRGB"),Ge(i==="uint"?"gl_FragColor = uvec4(vNormalRGB, -1u)":"gl_FragColor = vec4(vNormalRGB, 1.0)")),{idVertex:`DrawToNormalTexture:${Ts(r)}`,idFragment:`DrawToNormalTexture:${Ts(r)}`,vertexShaderModifiers:l,fragmentShaderModifiers:u,fragmentShader:"Empty",hints:[i==="uint"&&{type:"fragOutput",fragOutput:"uvec4"}]}}}},SurfaceGrid:r=>{const t=r.fillColor,e=r.interpolation,i=r.flipXZ,s=r.shadingStyle,n=r.wireframe,a=r.instanceIdSource,o=r.normalTextureType,l=r.heightmapTextureType,u=r.intensityTextureType,d=r.littleEndian;return{idFeature:"SurfaceGrid",apply:(f,y)=>{const m=[],p=[];return m.push(et("attribute vec2 aGeoCellOffset","uniform int uBaseInstance","uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture",a==="attribute"&&"attribute float aInstanceID"),a!==void 0&&Wi.roundUnsigned,Wi.modulus,Wi.texelFetchWithFallback[y],l==="ubyte"&&Wi.decodeUbyteRGBAEncodedFloat,Ge(a===void 0?"int iInstance = gl_InstanceID":"int iInstance = int(roundUnsigned(aInstanceID))","iInstance = iInstance + uBaseInstance","int iSecondary = modulus(iInstance, (uTileDimensions.y - 1))","int iPrimary = iInstance / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 iCellVertex = iCell + aGeoCellOffset","vec2 uTileDimensionsMinus1 = vec2(float(uTileDimensions.x), float(uTileDimensions.y)) - 1.0","vec2 ySampleCoordinate = vec2(iCellVertex.y, iCellVertex.x) / vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x)","float y = "+(l==="float"?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCellVertex.y, iCellVertex.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCellVertex.y, iCellVertex.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${d})`),"vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)","vec2 posAxisXZ = uTileStartLocationAxisXZ + cellSizeAxis * "+(i?"vec2(iCellVertex.y, iCellVertex.x)":"iCellVertex"),"vec3 posAxis = vec3(posAxisXZ.x, y, posAxisXZ.y)")),m.push(...Jo({axisWorldTranslation:r.axisWorldTranslation,normalSource:"custom"},!0,{attributeNameAxisCoord:void 0,variableNameAxisCoord:"posAxis",variableNameWorldCoord:"posWorld"})),s==="phong"&&m.push(ms("posWorld","varying vec3 vPosWorld"),...o==="uint"?[Wi.texelFetchUnsignedWithFallback[y],Tn("vec4 normalAxisRGB = vec4(texelFetchUnsignedWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))) / float(-1u)")]:[Tn("vec4 normalAxisRGB = texelFetchWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))")],Tn("vec3 normalAxis = (normalAxisRGB.rgb * 2.0) - 1.0","vNormal = normalize(normalAxis * uScale)"),et("varying vec3 vNormal",...o==="uint"?["uniform usampler2D uNormalmapTexture"]:["uniform sampler2D uNormalmapTexture"])),p.push(et("varying vec3 vTriangleBary")),t==="uniform"?p.push(et("uniform vec4 uColorDiffuse"),Ge("vec4 colorFragment = uColorDiffuse")):Array.isArray(t)&&t[0]==="lookup"?t[1]==="value"?(m.push(ms("posAxis.xz","varying vec2 vVertexLocationAxisXZ")),p.push(et("uniform vec4 uTileBoundsAxisXZ","uniform vec2 uTileDimensionsXZ","varying vec2 vVertexLocationAxisXZ","uniform sampler2D uTileIntensityValues","uniform mat4 uViewProjectionMatrix","uniform vec3 uScale","uniform vec3 uDisp"),u==="ubyte"&&Wi.decodeUbyteRGBAEncodedFloat,e==="bilinear"?Ge("vec2 cellSizeAxisXZ = uTileBoundsAxisXZ.zw / (uTileDimensionsXZ - 1.0)","vec2 cellIndex = (vVertexLocationAxisXZ - uTileBoundsAxisXZ.xy) / cellSizeAxisXZ","vec2 cellStart = floor(cellIndex)","vec2 cellEnd = ceil(cellIndex)","vec2 cellStartNormalized = cellStart / (uTileDimensionsXZ - 1.0)","vec2 cellEndNormalized = cellEnd / (uTileDimensionsXZ - 1.0)",`vec4 sample00 = texture2D(uTileIntensityValues, ${i?"cellStartNormalized":"vec2(cellStartNormalized.y, cellStartNormalized.x)"})`,`vec4 sample01 = texture2D(uTileIntensityValues, ${i?"vec2(cellStartNormalized.x, cellEndNormalized.y)":"vec2(cellStartNormalized.y, cellEndNormalized.x)"})`,`vec4 sample10 = texture2D(uTileIntensityValues, ${i?"vec2(cellEndNormalized.x, cellStartNormalized.y)":"vec2(cellEndNormalized.y, cellStartNormalized.x)"})`,`vec4 sample11 = texture2D(uTileIntensityValues, ${i?"cellEndNormalized":"vec2(cellEndNormalized.y, cellEndNormalized.x)"})`,"float intensity00 = "+(u==="float"?"sample00.x":`decodeUbyteRGBAEncodedFloat(sample00, ${d})`),"float intensity01 = "+(u==="float"?"sample01.x":`decodeUbyteRGBAEncodedFloat(sample01, ${d})`),"float intensity10 = "+(u==="float"?"sample10.x":`decodeUbyteRGBAEncodedFloat(sample10, ${d})`),"float intensity11 = "+(u==="float"?"sample11.x":`decodeUbyteRGBAEncodedFloat(sample11, ${d})`),"vec2 lerpFactors = cellIndex - cellStart",`float intensityR1 = mix(intensity00, intensity10, ${i?"lerpFactors.x":"lerpFactors.y"})`,`float intensityR2 = mix(intensity01, intensity11, ${i?"lerpFactors.x":"lerpFactors.y"})`,`float intensityP = mix(intensityR1, intensityR2,  ${i?"lerpFactors.y":"lerpFactors.x"})`):Ge("vec2 cellSizeAxisXZ = uTileBoundsAxisXZ.zw / (uTileDimensionsXZ - 1.0)","vec2 cellIndex = floor((vVertexLocationAxisXZ - uTileBoundsAxisXZ.xy) / cellSizeAxisXZ)","vec2 cellIndexNormalized = cellIndex / (uTileDimensionsXZ - 1.0)",`vec4 sample0 = texture2D(uTileIntensityValues, ${i?"cellIndexNormalized":"vec2(cellIndexNormalized.y, cellIndexNormalized.x)"})`,"float intensityP = sample0.x"),...rl("intensityP",t[2]))):(m.push(ms(`posAxis.${t[1]}`,"varying float vLookupValue")),p.push(et("varying float vLookupValue"),...rl("vLookupValue",t[2]))):t===void 0&&p.push(Ge("vec4 colorFragment = vec4(0.0, 0.0, 0.0, 0.0)")),s==="phong"&&p.push(...b2),n&&(m.push(et("attribute vec3 aTriangleBary"),ms("aTriangleBary","varying vec3 vTriangleBary")),p.push(et("uniform vec4 uWireframeColor","uniform float uWireframeThickness"),Wi.computeScreenSpaceWireframe,$i("colorFragment =","float edge = computeScreenSpaceWireframe(vTriangleBary, uWireframeThickness)",t?`if (edge > 0.0) {
                                    colorFragment = vec4(mix(colorFragment.rgb, uWireframeColor.rgb, edge * uWireframeColor.a), max(colorFragment.a, uWireframeColor.a));
                                }`:`if (edge > 0.0) {
                                    colorFragment = uWireframeColor;
                                  } else {
                                      discard;
                                  }`))),{idVertex:`SurfaceGrid:${Ts(r)}`,idFragment:`SurfaceGrid:${Ts(r)}`,vertexShaderModifiers:m,fragmentShader:"FragmentShader",fragmentShaderModifiers:p}}}},DebugSurfaceGridNormals:r=>({idFeature:"DebugSurfaceGridNormals",apply:(t,e)=>({idVertex:`DebugSurfaceGridNormals:${Ts(r)}`,idFragment:`DebugSurfaceGridNormals:${Ts(r)}`,vertexShaderModifiers:[et("attribute float aNormalArrow","uniform int uBaseInstance","uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture",r.instanceIdSource==="attribute"&&"attribute float aInstanceID",...r.normalTextureType==="uint"?["uniform usampler2D uNormalmapTexture"]:["uniform sampler2D uNormalmapTexture"]),Wi.roundUnsigned,Wi.modulus,Wi.texelFetchWithFallback[e],r.heightmapTextureType==="ubyte"&&Wi.decodeUbyteRGBAEncodedFloat,Ge(r.instanceIdSource===void 0?"int iInstance = gl_InstanceID":"int iInstance = int(roundUnsigned(aInstanceID))","iInstance = iInstance + uBaseInstance","int iSecondary = modulus(iInstance, (uTileDimensions.y - 1))","int iPrimary = iInstance / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 uTileDimensionsMinus1 = vec2(float(uTileDimensions.x), float(uTileDimensions.y)) - 1.0","float y00 = "+(r.heightmapTextureType==="float"?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${r.littleEndian})`),"float y01 = "+(r.heightmapTextureType==="float"?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${r.littleEndian})`),"float y10 = "+(r.heightmapTextureType==="float"?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)), ${r.littleEndian})`),"float y11 = "+(r.heightmapTextureType==="float"?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)), ${r.littleEndian})`),"float y = (y00 + y01 + y10 + y11) / 4.0","vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)",`vec2 posAxisXZ = uTileStartLocationAxisXZ + cellSizeAxis * (0.5 + ${r.flipXZ?"vec2(iCell.y, iCell.x)":"iCell"})`,"vec3 posAxis = vec3(posAxisXZ.x, y, posAxisXZ.y)",...r.normalTextureType==="uint"?["vec4 normalAxisRGB = vec4(texelFetchUnsignedWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))) / float(-1u)"]:["vec4 normalAxisRGB = texelFetchWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))"],"vec3 normalAxis = (normalAxisRGB.rgb * 2.0) - 1.0","vec3 normalWorld = normalize(normalAxis * uScale)"),...r.normalTextureType==="uint"?[Wi.texelFetchUnsignedWithFallback[e]]:[],...Jo({axisWorldTranslation:r.axisWorldTranslation,normalSource:"custom"},!0,{attributeNameAxisCoord:void 0,variableNameAxisCoord:"posAxis",variableNameWorldCoord:"posWorld"}),$i("posWorld =","vec3 dirArrow = normalWorld","vec3 posArrowStart = posWorld","vec3 posArrowEnd = posWorld + dirArrow * 0.010","vec3 notParallel = normalize(mix( vec3( 0.0, 1.0, 0.0 ), vec3( 0.2, 0.8, 0.0 ), step( abs(dirArrow.y), 0.9 ) ))","vec3 dirArrowLeft = normalize(-dirArrow + 0.50 * normalize(cross(dirArrow, notParallel)))","vec3 dirArrowRight = normalize(-dirArrow + 0.50 * normalize(cross(notParallel, dirArrow)))","vec3 posArrowLeft = posArrowEnd + dirArrowLeft * 0.0025","vec3 posArrowRight = posArrowEnd + dirArrowRight * 0.0025",`if (aNormalArrow == 0.0) {
                        posWorld = posArrowStart;
                    } else if (aNormalArrow == 1.0) {
                        posWorld = posArrowEnd;
                    } else if (aNormalArrow == 2.0) {
                        posWorld = posArrowLeft;
                    } else if (aNormalArrow == 3.0) {
                        posWorld = posArrowRight;
                    }`)],fragmentShader:"FragmentShader",fragmentShaderModifiers:[Tn("gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0)")]})}),OffsetTowardsCamera:()=>({idFeature:"OffsetTowardsCamera",apply:r=>({idVertex:"OffsetTowardsCamera",idFragment:void 0,vertexShaderModifiers:[et("uniform vec3 uCameraLoc"),$i("posWorld =","posWorld = posWorld + normalize(uCameraLoc) * 0.0025")]})}),AliasedEdge:{idFeature:"AliasedEdge",apply:r=>({idVertex:"AliasedEdge",idFragment:"AliasedEdge",vertexShaderModifiers:[et("attribute float aSegmentInside"),et("varying float vSegmentInside"),et("varying float vSegmentSide"),$i("gl_Position = ",`
                vSegmentInside = aSegmentInside;
                vSegmentSide = aSegmentSide;
                `)],fragmentShaderModifiers:[hz("#extension GL_OES_standard_derivatives : enable"),et("uniform float uAALimit"),et("varying float vSegmentInside"),et("varying float vSegmentSide"),$i("antiAliasFactor = ",`
                float dist = (uAALimit - vSegmentInside);
                vec2 ddist = vec2(dFdx(dist), dFdy(dist));
                float pixelDist = dist / length(ddist);
                // additional blurring
                pixelDist *= 0.5;

                float aa = clamp(0.5 - pixelDist, 0.0, 1.0);
                if((vSegmentSide <= 0.0 || vSegmentSide >= 1.0) && aa <=0.99){
                    aa *= 0.5;
                }
                antiAliasFactor = aa;
                `)]})},Glow1D:r=>({idFeature:"Glow1D",apply:()=>{const t=Math.round(r.spreadPx),e=Math.round(r.blurPx),i=t+e,s=r.firstPass,n=[];for(let a=-i;a<=i;a+=1){const o=Math.abs(a);n.push(s?{x:a.toFixed(1),y:"0.0",distPx:o.toFixed(1)}:{x:"0.0",y:a.toFixed(1),distPx:o.toFixed(1)})}return{idVertex:`Glow1D:${Ts(r)}`,idFragment:`Glow1D:${Ts(r)}`,vertexShaderModifiers:[ms("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")],fragmentShader:"FragmentShader",fragmentShaderModifiers:[et("uniform sampler2D uTexture"),et("varying vec2 vTextureCoord"),et("uniform vec2 uTextureSize"),s&&et("uniform vec2 uOffsetPx"),!s&&et("uniform sampler2D uTextureFirstGlowPass"),!s&&et("uniform vec4 uGlowColor"),$i("antiAliasFactor =","vec2 oneTexel = vec2(1.0, 1.0) / uTextureSize",...s?[]:[`float inverseIntensity =
                        0.25 * texture2D(uTexture, vTextureCoord).a +
                        0.125 * texture2D(uTexture, vTextureCoord + vec2(-oneTexel.x, 0.0)).a +
                        0.125 * texture2D(uTexture, vTextureCoord + vec2(oneTexel.x, 0.0)).a +
                        0.125 * texture2D(uTexture, vTextureCoord + vec2(0.0, -oneTexel.y)).a +
                        0.125 * texture2D(uTexture, vTextureCoord + vec2(0.0, oneTexel.y)).a +
                        0.0625 * texture2D(uTexture, vTextureCoord + vec2(-oneTexel.x, -oneTexel.y)).a +
                        0.0625 * texture2D(uTexture, vTextureCoord + vec2(oneTexel.x, -oneTexel.y)).a +
                        0.0625 * texture2D(uTexture, vTextureCoord + vec2(-oneTexel.x, oneTexel.y)).a +
                        0.0625 * texture2D(uTexture, vTextureCoord + vec2(oneTexel.x, oneTexel.y)).a`,"antiAliasFactor *= 1.0 - (inverseIntensity * inverseIntensity)","if (antiAliasFactor <= 0.0) { discard; }"],"float distancePx = 255.0","vec2 sample_tx = vec2(0.0)",...s?["vec2 texCoordOffset = vTextureCoord - uOffsetPx * oneTexel",...n.map((a,o)=>[`sample_tx = texCoordOffset + oneTexel * vec2(${a.x}, ${a.y})`,`if (distancePx > ${a.distPx} && sample_tx.x <= 1.0 && sample_tx.y <= 1.0 && sample_tx.x >= 0.0 && sample_tx.y >= 0.0 && texture2D(uTexture, sample_tx).a > 0.0) { distancePx = ${a.distPx}; }`]).flat(),"vec4 colorFragment = vec4(distancePx / 255.0, 0.0, 0.0, 1.0)"]:["vec4 sample_horizontal = vec4(0.0)","float horizontal_dist = 255.0","float min_horizontal_dist = 255.0",...n.map((a,o)=>[`sample_tx = vTextureCoord + oneTexel * vec2(${a.x}, ${a.y})`,`if (sample_tx.x <= 1.0 && sample_tx.y <= 1.0 && sample_tx.x >= 0.0 && sample_tx.y >= 0.0) {
                                            sample_horizontal = texture2D(uTextureFirstGlowPass, sample_tx);
                                            horizontal_dist = sample_horizontal.r * 255.0;
                                          }`,"if (sample_horizontal.a < 0.9) { horizontal_dist = 255.0; }","min_horizontal_dist = min(min_horizontal_dist, horizontal_dist)",`distancePx = min(distancePx, pow(horizontal_dist * horizontal_dist + ${a.y} * ${a.y}, 0.5))`]).flat(),`if (distancePx > ${i.toFixed(1)}) { discard; }`,"vec4 pixelGlowColor = vec4(0.0, 0.0, 0.0, 0.0)",`if (distancePx > ${t.toFixed(1)}) {
                                        float lerpAmount = (distancePx - ${t.toFixed(1)}) / ${(e+1).toFixed(1)};
                                        pixelGlowColor = mix(uGlowColor, vec4(uGlowColor.rgb, 0.0), 1.0 - (1.0 - lerpAmount) * (1.0 - lerpAmount));
                                    } else {
                                        pixelGlowColor = uGlowColor;
                                    }`,"vec4 colorFragment = pixelGlowColor"])]}}}),MousePicking:{idFeature:"MousePicking",apply:r=>({idVertex:void 0,idFragment:"MousePicking",fragmentShaderModifiers:[et("uniform vec4 uColor"),Ge("vec4 colorFragment = uColor"),t=>t.replace("gl_FragColor = vec4(fragColorEnd.rgb, fragColorEnd.a * antiAliasFactor)",`if (antiAliasFactor <= 0.0) { discard; }
gl_FragColor = fragColorEnd`)]})},MousePickingAttribute:{idFeature:"MousePickingAttribute",apply:r=>({idVertex:"MousePickingAttribute",idFragment:"MousePickingAttribute",vertexShaderModifiers:[ms("attribute vec4 aColor","varying vec4 vColor")],fragmentShaderModifiers:[et("varying vec4 vColor"),Ge("vec4 colorFragment = vColor"),t=>t.replace("gl_FragColor = vec4(fragColorEnd.rgb, fragColorEnd.a * antiAliasFactor)",`if (antiAliasFactor <= 0.0) { discard; }
gl_FragColor = fragColorEnd`)]})},AttributeHighlight:{idFeature:"AttributeHighlight",apply:r=>({idVertex:"AttributeHighlight",idFragment:"AttributeHighlight",vertexShaderModifiers:[ms("attribute float aIsHighlighted","varying float vIsHighlighted")],fragmentShaderModifiers:[t=>t.replace("uniform float uIsHighlighted","varying float vIsHighlighted").replace("uIsHighlighted","vIsHighlighted")]})},StippleTexture:{idFeature:"StippleTexture",apply:(r,t)=>({idVertex:"StippleTexture",idFragment:"StippleTexture",vertexShaderModifiers:[et("attribute vec2 aLengthSoFar"),et("varying float vLengthSoFar"),et("uniform vec2 uStippleCount"),Tn(`
                vec2 len = (((aLengthSoFar) / uScale) / 2.0) * uStippleCount;
                vLengthSoFar = len.x + len.y;
                `)],fragmentShaderModifiers:[et("uniform sampler2D uStippleTexture"),et("uniform float uStippleScale"),et("varying float vLengthSoFar"),t==="webgl1"&&et("uniform float uStippleTextureWidthLimiter"),$i("antiAliasFactor = ",`
                    float stippleSampleY = texture2D(
                        uStippleTexture, 
                        ${t==="webgl1"?"vec2(mod((vLengthSoFar / uStippleScale) , uStippleTextureWidthLimiter), 0)":"vec2((vLengthSoFar / uStippleScale), 0)"}
                    ).r;
                    float stippleAA = (stippleSampleY - 0.5) * 2.0;
                    antiAliasFactor *= stippleAA;
                    if (antiAliasFactor <= 0.0) { discard; }`)]})},StippleTextureInstanced:{idFeature:"StippleTextureInstanced",apply:(r,t)=>({idVertex:"StippleTextureInstanced",idFragment:"StippleTextureInstanced",vertexShaderModifiers:[et("attribute vec2 aLengthSoFarA"),et("attribute vec2 aLengthSoFarB"),et("varying float vLengthSoFar"),et("uniform vec2 uStippleCount"),Tn(`
                vec2 aLengthSoFar = mix(aLengthSoFarA, aLengthSoFarB, aSegmentSide);
                vec2 len = (((aLengthSoFar) / uScale) / 2.0) * uStippleCount;
                vLengthSoFar = len.x + len.y;
                `)],fragmentShaderModifiers:[et("uniform sampler2D uStippleTexture"),et("uniform float uStippleScale"),et("varying float vLengthSoFar"),t==="webgl1"&&et("uniform float uStippleTextureWidthLimiter"),$i("antiAliasFactor = ",`
                    float stippleSampleY = texture2D(
                        uStippleTexture, 
                        ${t==="webgl1"?"vec2(mod((vLengthSoFar / uStippleScale) , uStippleTextureWidthLimiter), 0)":"vec2((vLengthSoFar / uStippleScale), 0)"}
                    ).r;
                    float stippleAA = (stippleSampleY - 0.5) * 2.0;
                    antiAliasFactor *= stippleAA;
                    if (antiAliasFactor <= 0.0) { discard; }`)]})},PolarHeatmap:r=>({idFeature:"PolarHeatmap",apply:(t,e)=>{const i="dataType"in r,s="interpolation"in r?r:void 0,n=(s==null?void 0:s.interpolation)==="bilinear",a=s==null?void 0:s.intensityTextureType,o=s==null?void 0:s.littleEndian;return{idVertex:void 0,idFragment:`PolarHeatmap:${Ts(r)}`,vertexShaderModifiers:[],fragmentShaderModifiers:[et("uniform vec2 uViewportSize","uniform vec2 uScale","uniform vec2 uDisp","uniform float uSectors","uniform float uAnnuli","uniform float uAmplitudeStart","uniform float uAmplitudeStep","uniform float uAmplitudeAxisStart","uniform float uAmplitudeAxisEnd","uniform float uAngleOffset","uniform float uAngleDirection",s&&"uniform sampler2D uTileIntensityValues",i&&"uniform vec4 uColor"),Wi.texelFetchWithFallback[e],a==="ubyte"&&Wi.decodeUbyteRGBAEncodedFloat,Ge("vec2 posWorld = (2.0 * gl_FragCoord.xy / uViewportSize) - 1.0","vec2 posAxis = posWorld * uScale + uDisp","float amplitudeAxisInterval = uAmplitudeAxisEnd - uAmplitudeAxisStart","float amplitude = uAmplitudeAxisStart + sign(amplitudeAxisInterval) * sqrt(posAxis.x * posAxis.x + posAxis.y * posAxis.y)","float iAnnulus = (amplitude - uAmplitudeStart) / uAmplitudeStep","if (iAnnulus < 0.0 || iAnnulus > uAnnuli) { discard; }"),i&&Ge("vec4 colorFragment = uColor"),s&&$i("if (iAnnulus","float angRad = atan(posAxis.y, posAxis.x) * uAngleDirection + uAngleOffset","if (angRad < 0.0) { angRad = angRad + 2.0 * 3.1415926538; }","if (angRad > 2.0 * 3.1415926538) { angRad = angRad - 2.0 * 3.1415926538; }","float iSector = uSectors * angRad / (2.0 * 3.1415926538)","vec2 cellIndex = vec2(iSector, iAnnulus)","ivec2 cellStart = ivec2(floor(cellIndex))","ivec2 cellEnd = cellStart + ivec2(1)","if (cellEnd.x >= int(uSectors)) { cellEnd = ivec2(0, cellEnd.y); }",s.flipXY&&"cellIndex = vec2(cellIndex.y, cellIndex.x)",s.flipXY&&"cellStart = ivec2(cellStart.y, cellStart.x)",s.flipXY&&"cellEnd = ivec2(cellEnd.y, cellEnd.x)","vec2 tileDimensions = "+(s.flipXY?"vec2(uAnnuli, uSectors)":"vec2(uSectors, uAnnuli)"),n&&"vec4 sample00 = texelFetchWithFallback(uTileIntensityValues, cellStart, tileDimensions)",n&&"vec4 sample01 = texelFetchWithFallback(uTileIntensityValues, ivec2(cellStart.x, cellEnd.y), tileDimensions)",n&&"vec4 sample10 = texelFetchWithFallback(uTileIntensityValues, ivec2(cellEnd.x, cellStart.y), tileDimensions)",n&&"vec4 sample11 = texelFetchWithFallback(uTileIntensityValues, cellEnd, tileDimensions)",n&&"float intensity00 = "+(a==="float"?"sample00.x":`decodeUbyteRGBAEncodedFloat(sample00, ${o})`),n&&"float intensity01 = "+(a==="float"?"sample01.x":`decodeUbyteRGBAEncodedFloat(sample01, ${o})`),n&&"float intensity10 = "+(a==="float"?"sample10.x":`decodeUbyteRGBAEncodedFloat(sample10, ${o})`),n&&"float intensity11 = "+(a==="float"?"sample11.x":`decodeUbyteRGBAEncodedFloat(sample11, ${o})`),n&&"vec2 lerpFactors = cellIndex - vec2(cellStart)",n&&"float intensityR1 = mix(intensity00, intensity10, lerpFactors.x)",n&&"float intensityR2 = mix(intensity01, intensity11, lerpFactors.x)",n&&"float intensityP = mix(intensityR1, intensityR2,  lerpFactors.y)",!n&&"vec4 sample0 = texelFetchWithFallback(uTileIntensityValues, cellStart, tileDimensions)",!n&&"float intensityP = "+(a==="float"?"sample0.x":`decodeUbyteRGBAEncodedFloat(sample0, ${o})`)),...s?rl("intensityP",s.lut):[]]}}})},lz={"2D":`
void main(void) {
    gl_Position = vec4(posWorld, 0.0, 1.0 );
}
`,"2DMatrix":`
void main(void) {
    gl_Position = posWorld;
}
`,"3D":`
uniform mat4 uViewProjectionMatrix;
void main(void) {
    gl_Position = uViewProjectionMatrix * vec4(posWorld, 1.0);
}
`},uz={FragmentShader:`
uniform float uIsHighlighted;
uniform vec4 uHighlightColorOffset;
uniform float uRenderEffectMask;
void main(void) {
    float antiAliasFactor = 1.0;
    vec4 fragColorEnd = colorFragment;
    if (fragColorEnd.a <= 0.0) { discard; }
    fragColorEnd = clamp(fragColorEnd + uIsHighlighted * uHighlightColorOffset, vec4(0.0), vec4(1.0));
    fragColorEnd = mix(fragColorEnd, vec4(1.0), uRenderEffectMask * fragColorEnd.a * 1000.0);
    gl_FragColor = vec4(fragColorEnd.rgb, fragColorEnd.a * antiAliasFactor);
}
`,Empty:`
void main(void) {
}
`};class iT{constructor(t,e,i,s,n){if(this.id=t,this.shader=i,this.gl=s,this.info=n,!e||!i)throw new tS(`Could not find ${this.nE()} ${this.oE()} shader source code.`);this.gl.shaderSource(i,e),this.gl.compileShader(i)}get src(){return""}nE(){return this.id.toString()}oE(){return this.gl.getShaderParameter(this.shader,this.gl.SHADER_TYPE)===this.gl.FRAGMENT_SHADER?"fragment":"vertex"}}class cz extends iT{constructor(t,e,i,s){super(t,e,i.createShader(i.VERTEX_SHADER),i,s)}}class dz extends iT{constructor(t,e,i,s){super(t,e,i.createShader(i.FRAGMENT_SHADER),i,s)}}class fz{constructor(t,e,i,s){this.aE=new Map,this.lE=new Map,this.uE=i,this.cE=i.createProgram(),this.dE=`${t.nE()} vertex`,this.fE=`${e.nE()} fragment`,i.attachShader(this.cE,t.shader),i.attachShader(this.cE,e.shader),i.bindAttribLocation(this.cE,0,"aPos"),i.linkProgram(this.cE),i.deleteShader(t.shader),i.deleteShader(e.shader),this.allAttributeNames=t.info.allAttributeNames,this.allUniformNames=Array.from(new Set(t.info.allUniformNames.concat(e.info.allUniformNames)).values()),this.vertexSharedRemovedVariables=t.info.removedVariableNames,this.fragmentSharedRemovedVariables=e.info.removedVariableNames}get vertexShaderSrc(){return""}get fragmentShaderSrc(){return""}AE(t){return kn(0,()=>DR())}gE(t){const e=this.mE(t);if(e===void 0)throw this.AE(`Could not get ${t} uniform from ${this.dE} and ${this.fE} shaders.`);return e}mE(t){const e=this.aE.get(t);if(e)return e;const i=this.uE.getUniformLocation(this.cE,t);return i?(this.aE.set(t,i),i):void 0}yE(t){const e=this.pE(t);if(e===void 0)throw this.AE(`Could not get ${t} attribute from ${this.dE} and ${this.fE} shaders.`);return e}pE(t){const e=this.lE.get(t);if(e||e===0)return e;const i=this.uE.getAttribLocation(this.cE,t);return i>=0?(this.lE.set(t,i),i):void 0}W(){this.uE.deleteProgram(this.cE)}}const gz=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/,fp=r=>{let t;try{t=nt.getComputedStyle(r)}catch{return null}return t};/**
 * stacking-order by Rich Harris
 * https://github.com/Rich-Harris/stacking-order
 *
 * @license MIT
 *
 * Converted to TypeScript and edited to match LCJS requirements.
 */function yz(r){const t=fp(r);return!!t&&(t.position==="fixed"||!!(t.zIndex!=="auto"&&t.position!=="static"||function(e){const i=fp(sT(e)),s=i?i.display:"auto";return s==="flex"||s==="inline-flex"}(r))||+t.opacity<1||"transform"in t&&t.transform!=="none"||"webkitTransform"in t&&t.webkitTransform!=="none"||"mixBlendMode"in t&&t.mixBlendMode!=="normal"||"filter"in t&&t.filter!=="none"||"webkitFilter"in t&&t.webkitFilter!=="none"||"isolation"in t&&t.isolation==="isolate"||!!gz.test(t.willChange)||t.webkitOverflowScrolling==="touch")}function T2(r){let t=r.length;for(;t--;)if(yz(r[t]))return r[t];return null}function w2(r){var t;return r&&Number(((t=fp(r))===null||t===void 0?void 0:t.zIndex)||0)||0}function C2(r){const t=[];for(;r;)t.push(r),r=sT(r);return t}function sT(r){var t;return((t=r.parentNode)===null||t===void 0?void 0:t.host)||r.parentNode}class mz extends tz{constructor(t){if(super(),this.SE=new Map,this.vE=new Map,this.bE=new Map,this.xE=!0,this.ME=null,this._E=null,this.wE=null,this.CE=null,this.kE=0,this.TE=0,this.FE=0,this.IE=!1,this.PE=!0,this.$i=!1,this.DE=sS(`chart-engine-${new Date().getTime()}${Math.trunc(1e6*Math.random()).toString()}`),this.X={x:100,y:100},this.BE=()=>{this.LE&&clearTimeout(this.LE),this.LE=setTimeout(()=>this.Zr(),12)},this.RE=o=>{const l=o.intersectionRatio>0,u=o.target.getAttribute("data-lcjs-engine-id");if(u){const d=this.SE.get(u);if(d){const f=d.EE();d.zE(l),l?this.vE.set(u,d):this.vE.delete(u),f!==l&&d.Ss()}}},this.VE=(o,l,u,d,f)=>{const y=f[0],m=this.gl;if(m.bindFramebuffer(m==null?void 0:m.FRAMEBUFFER,null),m.useProgram(this._E.cE),m.clear(m.COLOR_BUFFER_BIT),y.Gr.getBoundingClientRect()){const p=y.OE();m.viewport(0,0,p.x,p.y),m.activeTexture(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,y.NE),m.uniform1i(this.kE,0),m.uniformMatrix4fv(this.TE,!1,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),m.bindBuffer(m.ARRAY_BUFFER,this.wE),m.enableVertexAttribArray(0),m.vertexAttribPointer(this.FE,2,m.FLOAT,!1,0,0),m.drawArrays(m.TRIANGLES,0,6),m.bindFramebuffer(m.FRAMEBUFFER,null),y.GE&&(y.GE.clearRect(0,0,y.GE.canvas.width,y.GE.canvas.height),y.GE.drawImage(this.WE,0,this.WE.height-p.y,p.x,p.y,0,0,y.GE.canvas.width,y.GE.canvas.height))}},this.UE=(o,l,u,d,f)=>{const y=this.gl;y.bindFramebuffer(y==null?void 0:y.FRAMEBUFFER,null),y.useProgram(this._E.cE),y.clear(y.COLOR_BUFFER_BIT),f.forEach(m=>{const p=m.Gr.getBoundingClientRect();if(p){const x=p.right-p.left,b=p.bottom-p.top,v=p.left,R=d-p.bottom;y.viewport(v*this.YE-o*this.YE,R*this.YE+l*this.YE,x*this.YE,b*this.YE)}y.activeTexture(y.TEXTURE0),y.bindTexture(y.TEXTURE_2D,m.NE),y.uniform1i(this.kE,0),y.uniformMatrix4fv(this.TE,!1,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),y.bindBuffer(y.ARRAY_BUFFER,this.wE),y.enableVertexAttribArray(0),y.vertexAttribPointer(this.FE,2,y.FLOAT,!1,0,0),y.drawArrays(y.TRIANGLES,0,6)}),y.bindFramebuffer(y.FRAMEBUFFER,null)},this.HE=(o,l,u,d,f)=>{const y=f[0],m=this.gl2.ctx;m.bindFramebuffer(m.DRAW_FRAMEBUFFER,null),m.clear(m.COLOR_BUFFER_BIT);const p=y.OE();m.bindFramebuffer(m.READ_FRAMEBUFFER,y.$E[1]),m.blitFramebuffer(0,0,p.x,p.y,0,this.WE.height-p.y,p.x,this.WE.height,m.COLOR_BUFFER_BIT,m.LINEAR),y.GE&&(y.GE.clearRect(0,0,y.GE.canvas.width,y.GE.canvas.height),y.GE.drawImage(this.WE,0,0)),m.bindFramebuffer(m.FRAMEBUFFER,null)},this.XE=(o,l,u,d,f)=>{const y=this.gl2.ctx;y.bindFramebuffer(y.DRAW_FRAMEBUFFER,null),y.clear(y.COLOR_BUFFER_BIT),f.forEach(m=>{const p=m.Gr.getBoundingClientRect();if(p){const x=p.right-p.left,b=p.bottom-p.top,v=p.left,R=d-p.bottom,E=m.OE();y.bindFramebuffer(y.READ_FRAMEBUFFER,m.$E[1]),y.blitFramebuffer(0,0,E.x,E.y,v*this.YE-o*this.YE,R*this.YE+l*this.YE,(v-o+x)*this.YE,(R+l+b)*this.YE,y.COLOR_BUFFER_BIT,y.LINEAR)}}),y.bindFramebuffer(y.FRAMEBUFFER,null)},this.LE=void 0,this.Un=t,!nt.requestAnimationFrame||!nt.cancelAnimationFrame)throw new Error("LightningChart JS depends on requestAnimationFrame. Make sure to load a polyfill in older browsers.");let e=1;if(t&&t.jE)e=t.jE===!0?nt.devicePixelRatio||1:t.jE||1;else{const o=nt.document.head.querySelector('meta[name="viewport"]');o&&o.content.includes("width=device-width")&&(e=nt.devicePixelRatio||1)}this.YE=e,t.Hn=t.Hn===!0,this.PE=t.ZE!==!1,this.QE=t.JE!==!1,this.KE=t.KE||!1;let i=!1;if(t.WE)if(typeof t.WE=="string"){const o=nt.document.getElementById(t.WE);if(!o)throw new Error(`Canvas "${t.WE}" doesn't exist.`);this.WE=o,i=!0}else this.WE=t.WE,i=!0;else this.WE=nt.document.createElement("canvas");const s={preserveDrawingBuffer:!0,alpha:!0,antialias:!1};if(t.qE!==2&&t.qE){const o=this.WE.getContext("webgl",{...s,antialias:!!t.ZE})||this.WE.getContext("experimental-webgl",{...s,antialias:!!t.ZE});this.gl=o,this.tz=!1}else{const o=this.WE.getContext("webgl2",s);this.gl2={ctx:o},this.gl=o,this.tz=!0}if(!this.gl)throw new Ei("No WebGL context available."+(t!=null&&t.qE?`
Selected explicit target: WebGL ${t.qE}`:""));const n=[];if(this.iz={WEBGL_lose_context:this.gl.getExtension("WEBGL_lose_context")},Object.keys(this.iz).forEach(o=>{this.iz[o]===null&&n.push(o)}),this.tz)this.sz=!0;else{const o={ANGLE_instanced_arrays:this.gl.getExtension("ANGLE_instanced_arrays"),EXT_blend_minmax:this.gl.getExtension("EXT_blend_minmax"),OES_element_index_uint:this.gl.getExtension("OES_element_index_uint"),OES_standard_derivatives:this.gl.getExtension("OES_standard_derivatives"),OES_vertex_array_object:this.gl.getExtension("OES_vertex_array_object")};o.OES_standard_derivatives||(this.xE=!1),Object.keys(o).forEach(u=>{o[u]===null&&n.push(u)});const l={OES_texture_float:this.gl.getExtension("OES_texture_float")};this.sz=!!l.OES_texture_float,this.gl1={ctx:this.gl,iz:o,optional:l}}const a=n;if(a.length>0&&t.Hn!==!1){const o=nt.document.createElement("div");o.innerText="LightningChart JS: Some features might not work properly, due to missing WebGL features.",o.style.cssText="position:absolute;top:0;background:red;width:100%;padding:10px;text-align:center;color:white;z-index:1;";const l=nt.document.createElement("button");l.innerText="X",l.addEventListener("click",()=>{o.parentElement&&o.parentElement.removeChild(o)}),nt.document.body.appendChild(o),o.appendChild(l),nt.console.warn("LightningChart JS - Following WebGL extensions could not be loaded:",a.join(", "))}if(this.ez=this.KE?this.hz(this.tz?this.HE.bind(this):this.VE.bind(this)).bind(this):this.rz(this.tz?this.XE.bind(this):this.UE.bind(this)).bind(this),nt.ResizeObserver){const o=l=>{for(const u of l)u.target===this.WE&&this.nz()};this.Zn=new nt.ResizeObserver(o.bind(this)),this.Zn.observe(this.WE)}if(this.oz=((o,l)=>{const u=o,d=new Map,f=new Map,y=new Map,m={totalMs:0,vertexShaders:0,fragmentShaders:0,programs:0},p=(x,b,v=[])=>{const R=[],E=[],V={allAttributeNames:Array.from(x.matchAll(/attribute\s[^\s]*\s(.*);/g)).map(F=>F[1]),allUniformNames:Array.from(x.matchAll(/uniform\s[^\s]*\s(.*);/g)).map(F=>F[1]),allVaryingNames:Array.from(x.matchAll(/varying\s[^\s]*\s(.*);/g)).map(F=>F[1]),removedVariableNames:[]};if(l){const F=x.match(/#extension.*/g);F&&E.push(...F),x=x.replace(/#extension.*/g,"")}else if(R.push("#version 300 es"),(x=(x=(x=x.replace(/#extension.*/g,"")).replace(/attribute/g,"in")).replace(/texture2D/g,"texture")).includes("usampler2D")&&R.push("precision highp usampler2D;"),b==="vertex")x=x.replace(/varying/g,"out");else{x=x.replace(/varying/g,"in");const F=v.find(L=>L.type==="fragOutput");x=(x=F?`out ${F.fragOutput} fragOutput;
${x}`:`out vec4 fragOutput;
${x}`).replace(/gl_FragColor/g,"fragOutput")}return E&&R.push(...E),R.push("precision highp float;"),R.push("precision highp int;"),{source:x=`${R.join(`
`)}
${x}`,info:V}};return(...x)=>{const b=l?"webgl1":"webgl2";let v,R,E,V,F,L,z,B,A;try{const T=nt.performance.now();v=x.filter(O=>O!==!1&&O!==void 0),R=((O,W)=>{const I=O.map(zt=>zt.apply(O,W)),H=I.map(zt=>zt.idVertex).filter(zt=>zt!==void 0).sort().join(" "),q=I.map(zt=>zt.idFragment).filter(zt=>zt!==void 0).sort().join(" "),Q=`vert: ${H} frag: ${q}`;let J,ot=!1,ht=!1;const ut=[];let dt;const Tt=[],xt=[];if(I.forEach(zt=>{if(zt.defaultVertexShader&&(ot||(J=zt.defaultVertexShader)),zt.vertexShader){if(J&&ot&&J!==zt.vertexShader)throw new Lf(`Conflicting vertex shader templates ${J} vs ${zt.vertexShader}`,Q,zt);J=zt.vertexShader,ot=!0}if(zt.vertexShaderModifiers)for(const Nt of zt.vertexShaderModifiers)Nt!==void 0&&Nt!==!1&&ut.push(Nt);if(zt.defaultFragmentShader&&(ht||(dt=zt.defaultFragmentShader)),zt.fragmentShader){if(dt&&ht&&dt!==zt.fragmentShader)throw new Lf(`Conflicting fragment shader templates ${dt} vs ${zt.fragmentShader}`,Q,zt);dt=zt.fragmentShader,ht=!0}if(zt.fragmentShaderModifiers)for(const Nt of zt.fragmentShaderModifiers)Nt!==void 0&&Nt!==!1&&Tt.push(Nt);zt.hints&&zt.hints.forEach(Nt=>{Nt&&xt.push(Nt)})}),!J)throw new Lf("No vertex shader template defined",Q);if(!dt)throw new Lf("Fragment shader not defined",Q);return{id:Q,vertexShader:{id:H,template:J,modifiers:ut},fragmentShader:{id:q,template:dt,modifiers:Tt},hints:xt}})(v,b);const w=y.get(R.id);if(E="new",w)return E="existing",L=w.vertexShaderSrc,z=w.fragmentShaderSrc,w;const C=R.vertexShader.id;let k=d.get(C);if(k)L=k.src,V="existing";else{V="new";const O=new v2(R.vertexShader.modifiers).build(lz[R.vertexShader.template]),{source:W,info:I}=p(O,"vertex");L=W,B=I,k=new cz(C,W,u,I),d.set(C,k),m.vertexShaders+=1}const _=R.fragmentShader;let X;const N=_.id;if(X=f.get(N),X)z=X.src,F="existing";else{F="new";const O=uz[_.template],W=new v2([..._.modifiers]).build(O),{source:I,info:H}=p(W,"fragment",R.hints);z=I,A=H,X=new dz(N,I,u,H),f.set(N,X),m.fragmentShaders+=1}const U=new fz(k,X,u,R);return y.set(R.id,U),m.programs+=1,m.totalMs+=nt.performance.now()-T,U}catch{throw kn(0,()=>{const w=`Unexpected LightningChart JS rendering error.
This can mean a bug in the library, or that it is simply used in unsupported manner (passing wrong type to method, using disposed component, etc).`;return nt.alert(w),new Error(w)})}}})(this.gl,!this.tz),this.KR=(()=>{const o=nt.document.createElement("canvas"),l=o.getContext("2d",{willReadFrequently:!0});if(!l)throw new Ei("Failed to get Text canvas rendering context");return l.fillStyle="#fff",(u,d,f,y)=>{const m=`${d.style} ${d.weight} ${d.size*f}px ${d.family}`;l.font=m,l.textBaseline="alphabetic",l.textAlign="left";const p=l.measureText(u);if(p.width===0)return;const x=p.actualBoundingBoxLeft!==void 0&&p.actualBoundingBoxRight!==void 0?Math.ceil(p.actualBoundingBoxLeft+p.actualBoundingBoxRight):Math.ceil(p.width),b=p.width,v=Math.round(d.size*f),R=p.actualBoundingBoxLeft!==void 0?p.actualBoundingBoxLeft:0;o.width=x>0?x:b,o.height=2*v,l.font=m,l.textBaseline="alphabetic",l.textAlign="left",y?(l.clearRect(0,0,o.width,o.height),l.fillStyle="#fff"):(l.fillStyle="rgba(255,255,255,0)",l.fillRect(0,0,o.width,o.height),l.fillStyle="#000"),l.fillText(u,R,v);const E=l.getImageData(0,0,o.width,o.height);let V=0,F=0;const L=E.width;for(let w=0;w<E.height;w+=1){for(let C=0;C<L;C+=1)if(E.data[w*L*4+4*C+3]!==0){V=w;break}if(V!==0)break}for(let w=E.height-1;w>=0;w-=1){for(let C=0;C<L;C+=1)if(E.data[w*L*4+4*C+3]!==0){F=w;break}if(F!==0)break}const z=l.canvas.height/2-V,B=F-V+1,A=L,T=new Uint8ClampedArray(A*B*1);for(let w=0;w<B;w+=1)for(let C=0;C<A;C+=1)T[1*w*A+1*C+0]=E.data[(w+V)*A*4+4*C+3];return[T,{advance:b,offsetX:R,baseline:z,glyph:u,size:Y(A,B)}]}})(),t.az||(this.KE?this.WE.style.display="none":(this.WE.style.position="absolute",this.WE.style.top="0",this.WE.style.left="0",this.WE.style.right="0",this.WE.style.bottom="0",this.WE.style.width="100%",this.WE.style.height="100%",this.WE.style.boxSizing="content-box",this.WE.style.display="block",this.WE.style.pointerEvents="none")),this.WE.classList.add("lcjs-canvas"),t.lz&&this.WE.setAttribute("data-lcjs-id",t.lz),i||nt.document.body.appendChild(this.WE),nt.IntersectionObserver&&(this.uz=new nt.IntersectionObserver(o=>{for(let l=0;l<o.length;l+=1){const u=o[l];this.RE(u)}},{threshold:Array.from(Array(100)).map((o,l)=>l/100)})),nt.addEventListener("resize",this.BE,{passive:!0}),!this.tz){if(this._E=this.oz(j["2DCompose"],j.Color({dataType:"texture-coord-calc-gpu"}),j.VertexLocation({axisWorldTranslation:"matrix4",normalSource:void 0,coordType:"vec4"})),!this._E.cE)throw new Ei("Unable to setup composition shader!");const o=this.gl,l=o.getUniformLocation(this._E.cE,"uColorTexture");if(!l)throw new Ei("Unable to setup composition shader! Failed to find uColorTexture");const u=o.getUniformLocation(this._E.cE,"uMatrix");if(!u)throw new Ei("Unable to setup composition shader! Failed to find uMatrix");this.kE=l,this.TE=u,this.FE=o.getAttribLocation(this._E.cE,"aPos"),this.wE=o.createBuffer(),o.bindBuffer(o.ARRAY_BUFFER,this.wE),o.bufferData(o.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),o.STATIC_DRAW),o.bindBuffer(o.ARRAY_BUFFER,null),this.CE=o.createBuffer(),o.bindBuffer(o.ARRAY_BUFFER,this.CE),o.bufferData(o.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,1,0,0,1,1,1]),o.STATIC_DRAW),o.bindBuffer(o.ARRAY_BUFFER,null)}}hz(t){return e=>{this.ME=null;const i=this.gl.canvas,s=Array.from(this.vE.values());this.IE=!1,s.forEach(n=>{const a=n.OE();(this.X.x<a.x||this.X.y<a.y)&&(this.X.x=Math.max(this.X.x,a.x),this.X.y=Math.max(this.X.y,a.y),i instanceof HTMLCanvasElement&&(i.width=this.X.x,i.height=this.X.y)),n.hn&&n.cz(e),t(0,0,0,0,[n])}),this.IE&&this.nz()}}rz(t){return e=>{this.ME=null,"style"in this.gl.canvas&&!this.Un.dz&&(this.gl.canvas.style.transform=`translateX(${window.scrollX}px) translateY(${window.scrollY}px)`);const i=this.gl.canvas,s=this.WE.clientHeight,n=this.WE.clientWidth;let a=0,o=0;if(i instanceof HTMLCanvasElement){i.width===n*this.YE&&i.height===s*this.YE||(i.width=n*this.YE,i.height=s*this.YE);const u=i.getBoundingClientRect();a=u.x,o=u.y}const l=Array.from(this.vE.values());this.IE=!1,l.sort((u,d)=>u.fz()-d.fz()).forEach(u=>{u.hn&&u.cz(e)}),t(a,o,n,s,l),this.IE&&this.nz()}}nz(t){return!this.IE&&t&&(this.IE=!0),this.ME||this.$i||(this.ME=nt.requestAnimationFrame(this.ez)),this}Az(t){const e=this.DE();return t.Gr.setAttribute("data-lcjs-engine-id",e),this.SE.set(e,t),t.gz(this.SE.size-1),t.zE(!0),this.vE.set(e,t),this.uz&&this.uz.observe(t.Gr),this.LE&&clearTimeout(this.LE),this.LE=setTimeout(()=>this.Zr(),0),this}mz(t){const e=t.Gr.getAttribute("data-lcjs-engine-id");return e?(this.SE.delete(e),this.vE.delete(e),this.uz&&this.uz.unobserve(t.Gr),t.Gr.removeAttribute("data-lcjs-engine-id"),this):this}Zr(){if(this.uz){const t=this.uz.takeRecords();for(let e=0;e<t.length;e+=1){const i=t[e];this.RE(i)}}return!this.KE&&this.QE&&Array.from(this.SE.values()).sort((t,e)=>function(i,s){if(i===s)throw new Error("Cannot compare node with itself");const n={a:C2(i),b:C2(s)};let a;for(;n.a[n.a.length-1]===n.b[n.b.length-1];)i=n.a.pop(),s=n.b.pop(),a=i;const o=w2(T2(n.a)),l=w2(T2(n.b));if(o===l&&a){const u=a.childNodes,d={a:n.a[n.a.length-1],b:n.b[n.b.length-1]};let f=u.length;for(;f--;){const y=u[f];if(y===d.a)return 1;if(y===d.b)return-1}}return Math.sign(o-l)}(t.Gr,e.Gr)).forEach((t,e)=>t.gz(e)),this.nz(!0),this}dP(){return this.nz(),this}yz(){this.$i||this.SE.forEach(t=>t.hm.layout())}W(){var t;if(this.$i)return;this.$i=!0,super.W(),this.ME&&(nt.cancelAnimationFrame(this.ME),this.ME=null),this.IE=!1,this.Zn&&(this.Zn.disconnect(),this.Zn=void 0),this.uz&&(this.uz.disconnect(),this.uz=void 0),nt.removeEventListener("resize",this.BE),this.BE=void 0,this.SE.forEach(i=>{i.W()}),this.SE.clear(),Array.from(this.bE.values()).forEach(i=>{i.VR(!0)}),this.bE.clear();const e=this.gl;e.deleteBuffer(this.wE),e.deleteBuffer(this.CE),this.WE&&!this.Un.WE?(this.WE.width=1,this.WE.height=1,(t=this.WE.parentElement)===null||t===void 0||t.removeChild(this.WE),this.WE=void 0):this.WE=void 0,this.oz=void 0,this.KR=void 0,this.ez=()=>{},this.iz.WEBGL_lose_context&&this.iz.WEBGL_lose_context.loseContext()}}const pz=(r,t,e,i)=>s=>{const n={theme:lr,...e,...s},a=r(n),o=t||i?ur(a,i):void 0,l=new tT(a.Un,s,a,a.W.bind(a),o);return a.uo(u=>l.zL(u)).lo(()=>l.j()).Ss(),l},Vr=(r,t)=>{r.uo(e=>{t.Te(e)}).lo(()=>t.j()).Ss()},Sz=(r,t,e,i)=>s=>{const n={...e,...s,theme:(s==null?void 0:s.theme)||lr},a=r(n),o=t||i?ur(a,i):void 0,l=new xS(a.Un,hr(a,1).DI(0),fs,a.W.bind(a),o);return Vr(a,l),l},xz=(r,t,e,i)=>s=>{const n={...e,...s,theme:(s==null?void 0:s.theme)||lr},a=r(n),o=t||i?ur(a,i):void 0,l=new DS(a.Un,hr(a,1).DI(0),fs,a.W.bind(a),o,s);return Vr(a,l),l},Az=(r,t,e,i)=>s=>{const n={...e,...s,theme:(s==null?void 0:s.theme)||lr},a=r(n),o=t||i?ur(a,i):void 0,l=new jE(a.Un,hr(a,1).DI(0),fs,a.W.bind(a),o,s);return Vr(a,l),l},vz=(r,t,e,i)=>s=>{const n={...e,...s,theme:(s==null?void 0:s.theme)||lr},a=r(n),o=t||i?ur(a,i):void 0,l=new XE(a.Un,hr(a,1).DI(0),fs,a.W.bind(a),o,s);return Vr(a,l),l},bz=(r,t,e,i)=>s=>{const n={...e,...s,theme:(s==null?void 0:s.theme)||lr},a=r(n),o=t||i?ur(a,i):void 0,l=new(s&&s.type?s.type:CE)(a.Un,hr(a,1).DI(0),fs,a.W.bind(a),o,void 0,s);return Vr(a,l),l},Mz=(r,t,e,i)=>s=>{const n={...e,...s,theme:(s==null?void 0:s.theme)||lr},a=r(n),o=t||i?ur(a,i):void 0,l=new(s&&s.type?s.type:$E)(a.Un,hr(a,1).DI(0),fs,a.W.bind(a),o,void 0,(s==null?void 0:s.disableAnimations)!==!0&&(s==null?void 0:s.animationsEnabled)!==!1);return Vr(a,l),l},Rz=(r,t,e,i)=>s=>{const n={...e,...s,theme:(s==null?void 0:s.theme)||lr},a=r(n),o=t||i?ur(a,i):void 0,l=new(s&&s.type?s.type:WE)(a.Un,hr(a,1).DI(0),fs,a.W.bind(a),o,void 0,s);return Vr(a,l),l},Ez=(r,t,e,i)=>s=>{const n={...e,...s,theme:(s==null?void 0:s.theme)||lr},a=r(n),o=t||i?ur(a,i):void 0,l=new(s&&s.type?s.type:qE)(a.Un,hr(a,1).DI(0),fs,a.W.bind(a),o,void 0,s);return Vr(a,l),l},Tz=(r,t,e,i)=>s=>{const n={...e,...s,theme:(s==null?void 0:s.theme)||lr},a=r(n),o=t||i?ur(a,i):void 0,l=new DE(a.Un,hr(a,1).DI(0),fs,a.W.bind(a),o,s,void 0);return Vr(a,l),l},wz=(r,t,e,i)=>s=>{const n={...e,...s,theme:(s==null?void 0:s.theme)||lr},a=r(n),o=t||i?ur(a,i):void 0,l=new TS(a.Un,hr(a,1).DI(0),fs,a.W.bind(a),o,void 0,s);return Vr(a,l),l},Cz=(r,t,e,i)=>s=>{const n={...e,...s,theme:(s==null?void 0:s.theme)||lr},a=r(n),o=t||i?ur(a,i):void 0,l=new QE(a.Un,hr(a,1).DI(0),fs,a.W.bind(a),o,void 0);return Vr(a,l),l},kz=(r,t,e,i)=>s=>{const n={...e,...s,theme:(s==null?void 0:s.theme)||lr},a=r(n),o=t||i?ur(a,i):void 0,l=new KE(a.Un,hr(a,1).DI(0),fs,a.W.bind(a),o,void 0,s);return Vr(a,l),l},Dz=(r,t,e,i)=>s=>{const n={...e,...s,theme:(s==null?void 0:s.theme)||lr},a=r(n),o=t||i?ur(a,i):void 0,l=new HE(a.Un,hr(a,1).DI(0),fs,a.W.bind(a),o,s);return Vr(a,l),l},Fz=(r,t,e,i)=>s=>{const n={...e,...s,theme:(s==null?void 0:s.theme)||lr},a=r(n),o=t||i?ur(a,i):void 0,l=new $V(a.Un,hr(a,1).DI(0),fs,a.W.bind(a),o,s);return Vr(a,l),l};function nr(r,t,e,i,s,n){let a=t.x.ct(r.max.x),o=t.x.ct(r.min.x),l=t.y.ct(r.max.y),u=t.y.ct(r.min.y),d=a-o,f=l-u;if(d<1){const z=(o+a)/2;o=z-.5,a=z+.5,d=1}if(f<1){const z=(u+l)/2;u=z-.5,l=z+.5,f=1}const y=d/f,m=d*e.x,p=f*e.y,x=d-m,b=f-p,v=m>x?[x,m]:[m,x],R=p>b?[b,p]:[p,b];let E,V,F=1,L=1;switch(i){default:case Cs.closestSide:if(E=v[0]/d,V=R[0]/f,s===ws.circle){const z=Math.min(E*y,V);F=z,L=z}else F=E*y,L=V;break;case Cs.farthestSide:if(E=v[1]/d,V=R[1]/f,s===ws.circle){const z=Math.max(E*y,V);F=z,L=z}else F=E*y,L=V;break;case Cs.closestCorner:if(V=R[0]/f,s===ws.circle){E=v[0]/d*y;const z=Math.sqrt(E*E+V*V);F=z,L=z}else{E=v[0]/d;const z=Math.sqrt(E*E+V*V);F=z*y,L=z}break;case Cs.farthestCorner:if(V=R[1]/f,s===ws.circle){E=v[1]/d*y;const z=Math.sqrt(E*E+V*V);F=z,L=z}else{E=v[1]/d;const z=Math.sqrt(E*E+V*V);F=z*y,L=z}}return{bounds:[o*n,u*n,d*n,f*n],center:[e.x*y,e.y],distance:[Math.max(F,1e-4),Math.max(L,1e-4)],aspectRatio:y}}function ar(r,t,e,i){const s=t.x.ct(r.max.x),n=t.x.ct(r.min.x),a=t.y.ct(r.max.y),o=t.y.ct(r.min.y),l=s-n,u=a-o,d=Math.abs(l*Math.sin(e))+Math.abs(u*Math.cos(e)),f=Y(l/2-Math.sin(e)*(d/2),u/2-Math.cos(e)*(d/2)),y=Y(l/2+Math.sin(e)*(d/2),u/2+Math.cos(e)*(d/2));return{bounds:[n*i,o*i,l*i,u*i],startPoint:[f.x*i,f.y*i],endPoint:[y.x*i,y.y*i]}}class tu{constructor(t){this.RR=t}}class Vz{constructor(){this.pz=new Array,this.Sz=t=>(this.pz.push(t),t),this.vz=this.Sz(new Map),this.bz=this.Sz(new Map),this.xz=this.Sz(new Map),this.Mz=this.Sz(new Map),this._z=this.Sz(new Map),this.wz=this.Sz(new Map),this.Cz=this.Sz(new Map)}kz(){this.pz.forEach(t=>{t.forEach(e=>e.kz()),t.clear()})}}const If=(r,t,e)=>()=>{r.Tz=t,e&&e()},j0=(r,t,e,i,s)=>{const n=Math.min(e/r,i/t),a=r*n,o=t*n,l=e/a,u=i/o,d=a/e,f=o/i;let y=0,m=1,p=0,x=1;switch(s){case ji.Fill:u<l?(y=0,m=1,p=.5+-d/2,x=.5+d/2):(p=0,x=1,y=.5+-f/2,m=.5+f/2);break;case ji.Fit:u<l?(p=0,x=1,y=.5+-l/2,m=.5+l/2):(y=0,m=1,p=.5+-u/2,x=.5+u/2);break;case ji.Center:{const b=e/r,v=i/t;y=.5+-b/2,m=.5+b/2,p=.5+-v/2,x=.5+v/2}break;case ji.Tile:y=0,m=e/r,p=0,x=i/t;break;case ji.Stretch:default:y=0,m=1,p=0,x=1}return new Float32Array([y,x,m,x,m,p,y,p])};class zz{constructor(t,e){if(this.Fz=0,this.Iz=0,this.Pz=!1,this.Tz=!1,this.Dz=!1,this.Bz=!1,this.Lz=!1,this.Rz=new Set,this.Ez=new Set,this.rc=e,this.uE=t,this.zz=null,this.Pz=e instanceof nt.HTMLVideoElement,this.rc instanceof nt.HTMLImageElement)this.rc.addEventListener("load",()=>{this.Bz=!0,this.Vz()}),this.rc.addEventListener("error",()=>{this.Lz=!0}),this.rc.complete&&(this.Bz=!0,this.Vz());else if(this.rc instanceof nt.HTMLVideoElement){const i=this;this.rc.addEventListener("canplay",function(){i.Iz=this.videoHeight,i.Fz=this.videoWidth,i.Bz=!0,i.Vz()},!0),this.rc.addEventListener("play",If(this,!0,()=>this.Vz())),this.rc.addEventListener("playing",If(this,!0,()=>this.Vz())),this.rc.addEventListener("pause",If(this,!1)),this.rc.addEventListener("ended",If(this,!1)),this.rc.readyState>=1&&(this.Fz=this.rc.videoWidth,this.Iz=this.rc.videoHeight,this.Tz=!this.rc.paused,this.Bz=!0,this.Vz())}else this.Bz=!0,this.Vz()}jR(t){this.Ez.size===0&&this.Bz&&this.Vz(),this.Ez.add(t)}ZR(t){this.Ez.delete(t),this.Ez.size===0&&this.unbindResources()}Oz(t){this.Rz.add(t),this.Dz&&(t(),this.Nz(t))}Nz(t){this.Rz.delete(t)}Vz(){if(this.Lz||this.Dz||!this.Bz)return;const t=this.uE.gl;if(!this.zz&&this.rc&&t){this.zz=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.zz),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);const e=0,i=t.RGBA,s=t.RGBA,n=t.UNSIGNED_BYTE,a=this.rc,o=this.Fz>0?this.Fz:a.width,l=this.Iz>0?this.Iz:a.height;t.texImage2D(t.TEXTURE_2D,e,i,s,n,a),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),this.Fz=o,this.Iz=l,t.bindTexture(t.TEXTURE_2D,null)}this.Dz=!0,this.Rz&&this.Rz.forEach(e=>{e(),this.Nz(e)})}Ps(){const t=this.uE.gl;if(!this.Lz&&this.Dz&&this.zz){const i=t.RGBA,s=t.RGBA,n=t.UNSIGNED_BYTE,a=this.rc;a&&(t.bindTexture(t.TEXTURE_2D,this.zz),t.texImage2D(t.TEXTURE_2D,0,i,s,n,a))}}Gz(){return this.zz}unbindResources(){return this.Dz&&(this.zz&&(this.uE.OR(this.zz),this.zz=null),this.Dz=!1),this}}class gp extends ZR{constructor(t,e,i){super(t.us,e,i),this.iS=!0,this.jp={},this.qp=Wt(ql),this.ks=t,this.dt=t.dt}Wz(){var t;return this.qp.i&&this.qp.M().type!==((t=this.Uz)===null||t===void 0?void 0:t.type)}nS(t){return this.iS=t,this}Yz(t){return this.jp=t,this}}const _z=(r,t,e,i)=>{const s=r.$z(),n=Math.round(Math.min(e.spread,10)*s),a=Math.round(Math.min(e.blur,10)*s),o={x:Math.round(e.offset.x*s),y:Math.round(e.offset.y*s)},l=r.Xz(),u=r.jz(),d=r.Zz(),f=r.Qz(),y=r.Jz();r.Kz("disabled"),r.nS(!1),r.qz(!1);const m=t.tV(),p=n+a/2;((F,L,z,B)=>{const A=F.gl,T=F.$z(),w=F.iV();F.sV(A.FRAMEBUFFER,B.frameBuffer),A.bindRenderbuffer(A.RENDERBUFFER,B.depthBuffer),A.bindTexture(A.TEXTURE_2D,B.texture),A.clearDepth(1),A.clearColor(0,0,0,0),A.clear(A.COLOR_BUFFER_BIT|A.DEPTH_BUFFER_BIT);const C=B.sizeDpr;F.eV(0,0,C.x,C.y),L.forEach(k=>{let _;if(k instanceof i0?_=k.ks.km():k instanceof gp&&(_=k.ks.Kv()),_){const X=_.x+z.left,N=_.y+z.bottom,U=Math.max(_.width-(z.left+z.right),0),O=Math.max(_.height-(z.bottom+z.top),0);F.hV(X*T,N*T,U*T,O*T)}else F.qz(!1);k.zL(2)}),F.sV(A.FRAMEBUFFER,w),A.bindRenderbuffer(A.RENDERBUFFER,null),A.bindTexture(A.TEXTURE_2D,null),F.qz(!1)})(r,i,{left:p+(o.x<0?-o.x:0),top:p+(o.y>0?o.y:0),right:p+(o.x>0?o.x:0),bottom:p+(o.y<0?-o.y:0)},m);let x=m;const b=n+a+5,v=((F,L,z,B)=>{const A=(k=>{const _=[];for(let X=0;X<k.length;X+=1){let N,U=k[X];do{const O=_.findIndex(W=>Qf(U,W));N=O>=0?_[O]:void 0,N&&(_.splice(O,1),U=qs(U,N))}while(N);_.push(U)}return _})(L.map(k=>{const _=k instanceof i0||k instanceof gp?k.ks.rV(k):Ne;if(tp(_))return Ne;const X={min:{x:Math.max(_.min.x-z.left,0),y:Math.max(_.min.y-z.bottom,0)},max:{x:Math.min(_.max.x+z.right,B.x),y:Math.min(_.max.y+z.top,B.y)}};return X.max.x<=X.min.x||X.max.y<=X.min.y?Ne:X}).filter(k=>!tp(k))),T=6*A.length,w=new Float32Array(4*T);let C=0;return A.forEach(k=>{const _=cc(k.min,B),X=cc(k.max,B),N=_,U=X;w[C+0]=_.x,w[C+1]=_.y,w[C+2]=N.x,w[C+3]=N.y,w[C+4]=X.x,w[C+5]=_.y,w[C+6]=U.x,w[C+7]=N.y,w[C+8]=X.x,w[C+9]=X.y,w[C+10]=U.x,w[C+11]=U.y,w[C+12]=X.x,w[C+13]=X.y,w[C+14]=U.x,w[C+15]=U.y,w[C+16]=_.x,w[C+17]=X.y,w[C+18]=N.x,w[C+19]=U.y,w[C+20]=_.x,w[C+21]=_.y,w[C+22]=N.x,w[C+23]=N.y,C+=24}),{vertexBuffer:F.nV(w),vertexCount:T}})(r,i,{left:b+(o.x<0?-o.x:0),top:b+(o.y>0?o.y:0),right:b+(o.x>0?o.x:0),bottom:b+(o.y<0?-o.y:0)},t.oV()),R=t.tV(m,x),E=r.oz(j["2D"],j.Glow1D({spreadPx:n,blurPx:a,firstPass:!0}),j.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:"linear",normalSource:void 0}));((F,L,z,B,A,T)=>{const w=F.gl,C=F.iV();F.sV(w.FRAMEBUFFER,z.frameBuffer),w.bindRenderbuffer(w.RENDERBUFFER,z.depthBuffer),w.bindTexture(w.TEXTURE_2D,z.texture),w.clearDepth(1),w.clearColor(0,0,0,0),w.clear(w.COLOR_BUFFER_BIT|w.DEPTH_BUFFER_BIT),F.eV(0,0,z.sizeDpr.x,z.sizeDpr.y),F.aV(B,(k,_,X,N)=>(F.jR(B),T&&T(k),F.dV(k("uIsHighlighted"),0).AR(k("uHighlightColorOffset"),hh).dV(k("uRenderEffectMask"),0).cV(k("uTexture"),L.texture,0).uV(N("uTextureSize"),[L.sizeDpr.x,L.sizeDpr.y]).uV(k("uScale"),z.uniforms.fV()).uV(k("uDisp"),z.uniforms.AV()).uV(k("uScaling"),[z.size.x,z.size.y]).uV(k("uTranslationAxis"),[0,0]).lV(A.vertexBuffer,void 0,{location:_("aPos"),size:2},{location:_("aTextureCoord"),size:2}).Ky(w.TRIANGLES,A.vertexCount,0),!0)),F.sV(w.FRAMEBUFFER,C),w.bindRenderbuffer(w.RENDERBUFFER,null),w.bindTexture(w.TEXTURE_2D,null)})(r,x,R,E,v,(F,L,z,B)=>(r.uV(F("uOffsetPx"),[o.x,o.y]),!0)),x=R,r.qz(u),r.gV(y);const V=r.oz(j["2D"],j.Glow1D({spreadPx:n,blurPx:a,firstPass:!1}),j.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:"linear",normalSource:void 0}));((F,L,z,B,A)=>{const T=F.gl,w={x:F.us.oi().x,y:F.us.oi().y};F.eV(0,0,w.x*F.$z(),w.y*F.$z());const C=fs.d2({scaleXYConstructor:xe}).q(w).Vi(0,w.x).Oi(0,w.y),k=new cr;k.mV(C),F.aV(z,(_,X,N,U)=>(F.jR(z),A&&A(_),F.dV(_("uIsHighlighted"),0).AR(_("uHighlightColorOffset"),hh).dV(_("uRenderEffectMask"),0).cV(_("uTexture"),L.texture,0).uV(U("uTextureSize"),[L.sizeDpr.x,L.sizeDpr.y]).uV(_("uScale"),k.fV()).uV(_("uDisp"),k.AV()).uV(_("uScaling"),[w.x,w.y]).uV(_("uTranslationAxis"),[0,0]).lV(B.vertexBuffer,void 0,{location:X("aPos"),size:2},{location:X("aTextureCoord"),size:2}).Ky(T.TRIANGLES,B.vertexCount,0),!0))})(r,m,V,v,(F,L,z,B)=>(r.cV(F("uTextureFirstGlowPass"),R.texture,1).AR(F("uGlowColor"),e.color),!0)),r.eV(l.x,l.y,l.width,l.height),r.Kz(d),r.nS(f),r.yV(v.vertexBuffer)};class Nz{constructor(t){this.pV=[],this.RR=t}SV(t,e){_z(this.RR,this,e,t)}oV(){const t=this.RR.us.oi();return{x:Math.ceil(t.x),y:Math.ceil(t.y)}}tV(...t){const e=this.pV,i=this.oV(),s={x:Math.ceil(i.x*this.RR.$z()),y:Math.ceil(i.y*this.RR.$z())},n=this.RR.gl,a=e.find(p=>!t.includes(p));if(a)return a.sizeDpr.x===s.x&&a.sizeDpr.y===s.y||(a.size=i,a.sizeDpr=s,n.bindTexture(n.TEXTURE_2D,a.texture),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,s.x,s.y,0,n.RGBA,n.UNSIGNED_BYTE,null),n.bindRenderbuffer(n.RENDERBUFFER,a.depthBuffer),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,s.x,s.y),n.bindTexture(n.TEXTURE_2D,null),n.bindRenderbuffer(n.RENDERBUFFER,null),a.scale.q(i).Vi(0,i.x).Oi(0,i.y),a.uniforms.mV(a.scale)),a;const o=n.createTexture(),l=this.RR.vV(),u=this.RR.bV();n.bindTexture(n.TEXTURE_2D,o),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,s.x,s.y,0,n.RGBA,n.UNSIGNED_BYTE,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);const d=this.RR.iV();this.RR.sV(n.FRAMEBUFFER,l),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,o,0),n.bindRenderbuffer(n.RENDERBUFFER,u),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,s.x,s.y),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,u),n.bindTexture(n.TEXTURE_2D,null),this.RR.sV(n.FRAMEBUFFER,d),n.bindRenderbuffer(n.RENDERBUFFER,null);const f=fs.d2({scaleXYConstructor:xe}).q(i).Vi(0,i.x).Oi(0,i.y),y=new cr;y.mV(f);const m={size:i,sizeDpr:s,texture:o,frameBuffer:l,depthBuffer:u,scale:f,uniforms:y};return e.push(m),m}W(){[this.pV].forEach(t=>{t.forEach(e=>{this.RR.xV(e.depthBuffer),this.RR.MV(e.frameBuffer),this.RR.OR(e.texture)}),t.length=0})}}class Lz{constructor(t,e,i,s,n=!0){this._V=new Vz,this.wV=new Map,this.CV=new Map,this.kV=[],this.jE=1,this.IS_MACHINE_LITTLE_ENDIAN=(()=>{const a=new Uint32Array([287454020]),o=new Uint8Array(a.buffer);return o[0]===68||o[0]!==17&&(nt.console.error("Unidentified machine endianness. Some features might behave unexpectedly."),!0)})(),this.iS=!1,this.uV=(a,[o,l])=>(a===void 0||this.gl.uniform2f(a,o,l),this),this.TV=(a,[o,l])=>(a===void 0||this.gl.uniform2i(a,o,l),this),this.FV=(a,[o,l,u,d])=>(a===void 0||this.gl.uniform4f(a,o,l,u,d),this),this.IV=(a,[o,l,u])=>(a===void 0||this.gl.uniform3f(a,o,l,u),this),this.PV=(a,o)=>(a===void 0||this.gl.uniformMatrix3fv(a,!1,o),this),this.DV=(a,o)=>(a===void 0||this.gl.uniformMatrix4fv(a,!1,o),this),this.AR=(a,o)=>(a===void 0||this.gl.uniform4f(a,o.r,o.g,o.b,o.a),this),this.dV=(a,o)=>(a===void 0||this.gl.uniform1f(a,o),this),this.BV=(a,o)=>(this.gl.uniform1i(a,o),this),this.cV=(a,o,l)=>{if(a===void 0)return this;if(o){const u=this.gl.TEXTURE0+l;return this.gl.activeTexture(u),this.gl.bindTexture(this.gl.TEXTURE_2D,o),this.gl.uniform1i(a,l),this}throw new Ei("Could not bind a texture.")},this.LV=a=>(((o,l)=>{l===ji.Tile?(o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.REPEAT),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.REPEAT)):(o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE))})(this.gl,a),this),this.nV=(a,o=!1,l,u=Float32Array)=>{const d=a.length,f=this.RV(d,l);if(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,f),this.gl.bufferData(this.gl.ARRAY_BUFFER,a instanceof u?a:new u(a),o?this.gl.DYNAMIC_DRAW:this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),f)return f;throw new Ei("Could not create vertex buffer")},this.EV=(a,o,l,u=Float32Array)=>{const d=l||this.gl.createBuffer();if(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,d),o&&o.length===a?this.gl.bufferData(this.gl.ARRAY_BUFFER,o instanceof u?o:new u(o),this.gl.STATIC_DRAW):(this.gl.bufferData(this.gl.ARRAY_BUFFER,new u(a),this.gl.STATIC_DRAW),o&&this.gl.bufferSubData(this.gl.ARRAY_BUFFER,0,o instanceof u?o:new u(o))),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),d)return d;throw new Ei("Could not create vertex buffer")},this.zV=(a,o,l,u=Float32Array)=>{this.gl.bindBuffer(this.gl.ARRAY_BUFFER,a),this.gl.bufferSubData(this.gl.ARRAY_BUFFER,o*u.BYTES_PER_ELEMENT,l instanceof u?l:new u(l)),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null)},this.VV=(a,o,l=!1)=>{this.gl.bindBuffer(this.gl.ARRAY_BUFFER,a),this.gl.bufferData(this.gl.ARRAY_BUFFER,o,l?this.gl.DYNAMIC_DRAW:this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null)},this.OV=(a,o)=>{const l=a.length,u=this.RV(l,o);if(this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,u),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,a,this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),u)return u;throw new Ei("Could not create index buffer")},this.NV=a=>{const o=this.gl.createBuffer();if(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,o),this.gl.bufferData(this.gl.ARRAY_BUFFER,a instanceof Float32Array?a:new Float32Array(a),this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),o)return o;throw new Ei("Could not create float buffer")},this.GV=(a,o)=>(a===void 0||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,o),this.gl.enableVertexAttribArray(a),this.gl.vertexAttribPointer(a,2,this.gl.FLOAT,!1,0,0)),this),this.WV=(a,o)=>(a===void 0||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,o),this.gl.vertexAttribPointer(a,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(a)),this),this.lV=(a,o,...l)=>{this.gl.bindBuffer(this.gl.ARRAY_BUFFER,a);const u=l.length;let d=0;for(let y=0;y<u;y+=1)d+=l[y].size;for(let y=0;y<u;y+=1){const m=l[y].location;m!==void 0&&m>-1&&this.gl.enableVertexAttribArray(m)}let f=0;for(let y=0;y<u;y+=1){const m=l[y];m.location!==void 0&&m.location>-1&&this.gl.vertexAttribPointer(m.location,m.size,this.gl.FLOAT,!1,d*Float32Array.BYTES_PER_ELEMENT,f*Float32Array.BYTES_PER_ELEMENT),f+=m.size}if(o!==void 0)for(let y=0;y<u;y+=1){const m=l[y].location;m!==void 0&&m>-1&&this.UV(m,o)}return this},this.YV=(...a)=>{const o=a.length;for(let l=0;l<o;l+=1){const u=a[l];u!==0&&u>-1&&this.gl.disableVertexAttribArray(u)}return this},this.HV=(a,o)=>(a===void 0||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,o),this.gl.enableVertexAttribArray(a),this.gl.vertexAttribPointer(a,4,this.gl.FLOAT,!1,0,0)),this),this.$V=(a,o,l)=>(a===void 0||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,o),this.gl.vertexAttribPointer(a,1,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(a),l!==void 0&&this.UV(a,l)),this),this.XV=a=>(this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,a),this),this.jV=null,this.Ky=(a,o,l=0)=>(o>0&&this.gl.drawArrays(a,l,o),this),this.ZV=(a,o=this.gl.TRIANGLES,l=0,u=this.gl.UNSIGNED_SHORT)=>(a>0&&this.gl.drawElements(o,a,u,l),this),this.QV=(a,o,l,u)=>{if(u>0&&(this.gl2&&this.gl2.ctx.drawArraysInstanced(a,o,l,u),this.gl1)){if(!this.gl1.iz.ANGLE_instanced_arrays)return nt.console.warn(`The browser does not support REQUIRED WebGL 1 extension: ANGLE_instanced_arrays.
This application will NOT work properly!`),this;this.gl1.iz.ANGLE_instanced_arrays.drawArraysInstancedANGLE(a,o,l,u)}return this},this.JV=(a,o,l,u,d=this.gl.UNSIGNED_SHORT)=>{if(u>0&&(this.gl2&&this.gl2.ctx.drawElementsInstanced(a,o,d,l,u),this.gl1)){if(!this.gl1.iz.ANGLE_instanced_arrays)return nt.console.warn(`The browser does not support REQUIRED WebGL 1 extension: ANGLE_instanced_arrays.
This application will NOT work properly!`),this;this.gl1.iz.ANGLE_instanced_arrays.drawElementsInstancedANGLE(a,o,d,l,u)}return this},this.UV=(a,o)=>{if(a>-1&&(this.gl2&&this.gl2.ctx.vertexAttribDivisor(a,o),this.gl1)){if(!this.gl1.iz.ANGLE_instanced_arrays)return nt.console.warn(`The browser does not support REQUIRED WebGL 1 extension: ANGLE_instanced_arrays.
This application will NOT work properly!`),this;this.gl1.iz.ANGLE_instanced_arrays.vertexAttribDivisorANGLE(a,o)}return this},this.KV=(a,o,l,u=0)=>{const d=this.gl.TEXTURE0+u;this.gl.activeTexture(d);const f=this.iV();this.sV(this.gl.FRAMEBUFFER,o),this.gl.bindTexture(this.gl.TEXTURE_2D,l),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,l,0);const y=this.jz();y&&this.qz(!1),a(),y&&this.qz(!0),this.gl.bindTexture(this.gl.TEXTURE_2D,null),this.sV(this.gl.FRAMEBUFFER,f)},this.Nt=()=>(this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this),this.qV=a=>(this.gl.clearColor(a.r,a.g,a.b,a.a),this),this.jR=a=>(this.gl.useProgram(a.cE),this),this.tO=!1,this.iO=[],this.us=t,this.cA=e,this.us=t,this.gl=i.ctx,this.sO=i.antialias,this.eO=!!this.us.Qr.xE&&i.lineAntialias,this.sz=this.us.Qr.sz,this.hO=new Map,this.gl1=this.us.Qr.gl1,this.gl2=this.us.Qr.gl2,n&&(this.gV(!0),this.rO()),this.iz=this.us.Qr.iz,this.zR=this.gl.getParameter(this.gl.MAX_TEXTURE_SIZE),this.UR=this.nO(),this.oz=this.us.Qr.oz,this.oO=new Iz(this),this.KR=this.us.Qr.KR,this.aO=new Nz(this),this.bE=this.us.Qr.bE,this.lO=this.nV([0,0,1,0,1,1,0,1]),this.uO=this.nV([0,0,1,0,0,1,0,1,1,0,1,1])}Kz(t){return t!==this.cO&&(this.cO=t,t==="disabled"?this.gl.disable(this.gl.CULL_FACE):t==="cull-back"?(this.gl.enable(this.gl.CULL_FACE),this.gl.cullFace(this.gl.BACK)):t==="cull-front"&&(this.gl.enable(this.gl.CULL_FACE),this.gl.cullFace(this.gl.FRONT))),this}Zz(){return this.cO||"disabled"}nS(t){return t!==this.iS&&(this.iS=t,t?this.gl.enable(this.gl.DEPTH_TEST):this.gl.disable(this.gl.DEPTH_TEST)),this}Qz(){return this.iS}dO(t){return this.jE=t,this}$z(){return this.jE}RV(t,e){let i;if(e){const s=this.hO.get(e);s&&s.size>=t&&s.size-t<1e6?i=e:this.yV(e)}return i||(i=this.gl.createBuffer(),this.hO.set(i,{size:t})),i}fO(t,e=this.gl.RGBA,i=!1,s,n,a=!1,o=this.gl.UNSIGNED_BYTE,l=e){const u=this.gl.createTexture();if(!u)throw new Ei("Couldn't reserve Texture.");return this.gl.bindTexture(this.gl.TEXTURE_2D,u),this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a),t&&n===null?this.gl.texImage2D(this.gl.TEXTURE_2D,0,l,e,o,t):n&&this.gl.texImage2D(this.gl.TEXTURE_2D,0,l,n.x,n.y,0,e,o,t),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,s?this.gl.NEAREST:this.gl.LINEAR),i?(this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR_MIPMAP_LINEAR),this.gl.generateMipmap(this.gl.TEXTURE_2D)):this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,s?this.gl.NEAREST:this.gl.LINEAR),this.gl.bindTexture(this.gl.TEXTURE_2D,null),u}OR(t){this.gl.deleteTexture(t)}vV(){const t=this.gl.createFramebuffer();if(!t)throw new Ei("Couldn't reserve Framebuffer.");return t}sV(t,e){this.jV=e,this.gl.bindFramebuffer(t,e)}iV(){return this.jV}MV(t){this.gl.deleteFramebuffer(t)}bV(){const t=this.gl.createRenderbuffer();if(!t)throw new Ei("Couldn't reserve Render buffer.");return t}xV(t){this.gl.deleteRenderbuffer(t)}eV(t,e,i,s){return this.gl.viewport(t,e,i,s),this.AO&&t===this.AO.x&&e===this.AO.y&&i===this.AO.width&&s===this.AO.height||(this.AO={x:t,y:e,width:i,height:s}),this}Xz(){return this.AO||{x:0,y:0,width:0,height:0}}hV(t,e,i,s){return this.qz(!0),this.gl.scissor(Math.max(t,0),Math.max(e,0),Math.max(i,0),Math.max(s,0)),this}qz(t){return t===this.gO||(t?this.gl.enable(this.gl.SCISSOR_TEST):this.gl.disable(this.gl.SCISSOR_TEST),this.gO=t),this}gV(t){return t!==this.tO&&(this.tO=t,t&&this.gl.enable(this.gl.BLEND),t||this.gl.disable(this.gl.BLEND)),this}Jz(){return this.tO}rO(t,e,i,s){return t?(t!==void 0&&e!==void 0&&(i!==void 0&&s!==void 0?this.gl.blendFuncSeparate(t,e,i,s):this.gl.blendFunc(t,e)),this):(this.gl.blendFuncSeparate(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA),this)}jz(){return this.gO!==void 0&&this.gO}aV(t,e){const i=new Uz(this,t),s=e(i.uniform,i.attribute,i,i.uniformOptional);i.finish(s)}yV(t){t&&(this.gl.deleteBuffer(t),this.hO.delete(t))}mO(t,e,i){this.uV(t.uniform("uCenter"),e.center).uV(t.uniform("uDistance"),e.distance).FV(t.uniform("uBounds"),e.bounds).dV(t.uniform("uAspect"),e.aspectRatio);const s=i.getColorStops();if(s.length<2)throw new Error("Minimum two color stops required");for(let n=0;n<s.length;n+=1)this.AR(t.uniform(`color_${n}`),s[n].color).dV(t.uniform(`stop_${n}`),s[n].offset);return this}yO(t,e,i){this.uV(t.uniform("uStartPoint"),e.startPoint).uV(t.uniform("uEndPoint"),e.endPoint).FV(t.uniform("uBounds"),e.bounds);const s=i.getColorStops();if(s.length<2)throw new Error("Minimum two color stops required");for(let n=0;n<s.length;n+=1)this.AR(t.uniform(`color_${n}`),s[n].color).dV(t.uniform(`stop_${n}`),s[n].offset);return this}Vh(t){const e=this.bE.get(t);if(!e){const i=new nz(this);return this.bE.set(t,i),i}return e}pO(t){const e=this.wV.get(t);if(!e){const i=new zz(this,t);return this.SO(t,i),i}return e}SO(t,e){this.wV.set(t,e)}nO(){const t=this.gl,e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,1,1,0,t.ALPHA,t.UNSIGNED_BYTE,new Uint8ClampedArray([0]));const i=t.getError()===0;return i||this.cA.Hn!==!1&&nt.console.info("LightningChart JS - Uint8ClampedArray is not supported as texture data. The above WebGL error/warning is from the feature detection. There is nothing to worry about."),t.deleteTexture(e),i}vO(t,e,i,s){if(i)this.lV(e,s,{location:t.attribute("aPos_highpart"),size:2},{location:t.attribute("aPos_lowpart"),size:2});else{const n=t.attribute("aPos");this.GV(n,e),s!==void 0&&this.UV(n,s)}return this}bO(){this.iz.WEBGL_lose_context&&this.iz.WEBGL_lose_context.loseContext()}xO(t){if(this.MO&&this.MO.bufferIdsCount>=t)return this.MO.buffer;this.MO&&(this.yV(this.MO.buffer),this.MO=void 0);const e=t,i=new Float32Array(e);for(let n=0;n<e;n+=1)i[n]=n;const s=this.nV(i);return this.MO={buffer:s,bufferIdsCount:e},s}_O(){return this.gl2?void 0:"attribute"}wO(t,e){if(this._O()==="attribute"){const i=this.xO(e);this.lV(i,void 0,{location:t.attribute("aVertexID"),size:1})}return this}CO(){return this.gl2?void 0:"attribute"}kO(t,e){if(this.CO()==="attribute"){const i=this.xO(e);this.lV(i,1,{location:t.attribute("aInstanceID"),size:1})}return this}TO(t,e,i,s,n,a,o,l,u){const d=t.createBuffer();return this.iO.push(d),t.bindFramebuffer(t.FRAMEBUFFER,e),t.bindBuffer(t.PIXEL_PACK_BUFFER,d),t.bufferData(t.PIXEL_PACK_BUFFER,u.byteLength,t.STREAM_READ),t.readPixels(i,s,n,a,o,l,0),t.bindBuffer(t.PIXEL_PACK_BUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null),Bz(t,t.PIXEL_PACK_BUFFER,d,0,u).then(()=>u).catch(f=>{throw f}).finally(()=>{t.deleteBuffer(d),this.iO.splice(this.iO.indexOf(d),1)})}FO(t,e,i,s,n,a,o,l){const u=this.gl,d=this.iV();this.sV(u.FRAMEBUFFER,t),u.readPixels(e,i,s,n,a,o,l),this.sV(this.gl.FRAMEBUFFER,d)}IO(t){const e=this.CV.get(t);if(!e){const s=this.gl.createTexture();if(!s)throw new Ei("Couldn't reserve Texture.");this.gl.bindTexture(this.gl.TEXTURE_2D,s);const n=[];let a=255;for(let u=0;u<t.length;u+=1){for(let d=0;d<t[u];d+=1)n.push(a);a=a===255?0:255}const o=n.length;if(!this.gl2&&((i=n.length)&i-1)!=0){const u=(d=>{d-=1;for(let f=1;f<32;f<<=1)d|=d>>1;return d+1})(n.length);for(let d=n.length;d<u;d+=1)n[d]=0}this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),this.gl.pixelStorei(this.gl.PACK_ALIGNMENT,1),this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,1),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.REPEAT),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.REPEAT),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,n.length,1,0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,new Uint8Array(n)),this.gl.bindTexture(this.gl.TEXTURE_2D,null);const l={PO:s,DO:o,BO:n.length};return this.CV.set(t,l),l}var i;return e}LO(t,e,i){const{uniform:s}=t;this.AR(s("uFallbackColor"),e.getFallbackColor());for(let n=0;n<e.steps.length;n+=1)this.dV(s(`uLUTValue${n}`),e.steps[n].value),this.AR(s(`uLUTColor${n}`),e.steps[n].color);if(e.percentageValues){if(!i)return kn(0,()=>{}),this;this.dV(s("uMinValue"),i.min),this.dV(s("uMaxValue"),i.max)}return this}RO(t,e,i,s,n,a){const o=i&&i.getSource()||s&&s.rc,l=i?i.getFitMode():ji.Stretch,u=d=>{d.texCoordsBuffer=this.nV(a(d.texture.Fz,d.texture.Iz,l),!1,d.texCoordsBuffer)};if(o){let d=e;if((!e||o!==e.source)&&o){e&&(e.texture.ZR(t),this.yV(e.texCoordsBuffer));const f=this.pO(o);f.jR(t);const y=i?i.getSourceMissingColor():YR.color;d={texture:f,source:o,texCoordsBuffer:this.nV([]),sourceMissingTexture:this.fO(new Uint8Array([y.getR(),y.getG(),y.getB(),y.getA()]),this.gl.RGBA,!1,!0,{x:1,y:1},!1),textureReadyCallback:()=>{d&&o&&(u(d),this.us.Ss())}},f.Oz(d.textureReadyCallback),u(d)}return d&&d.texture.Dz&&d.texture.Pz&&d.texture.Tz&&(d.texture.Ps(),this.us.Ss()),n&&d&&d.texture.Dz&&u(d),d}e&&this.EO(t,e)}EO(t,e){e&&(e.texture.ZR(t),e.texture.Nz(e.textureReadyCallback),this.OR(e.sourceMissingTexture),this.yV(e.texCoordsBuffer))}zO(t,e,i,s){const{uniform:n,uniformOptional:a,attribute:o}=t,l=i.dt,u=this.$z();this.dV(n("uIsHighlighted"),e===1||e===2?0:i.zo).AR(n("uHighlightColorOffset"),e===1||e===2?Je:i.Go).dV(n("uRenderEffectMask"),e===2?1:0).uV(a("uRatioPxClip"),[2/this.us.oi().x,2/this.us.oi().y]).dV(a("uDevicePixelRatio"),u),l instanceof xe||l instanceof Js?this.uV(n("uScale"),s.uniforms.fV()).uV(n("uDisp"),s.uniforms.AV()).uV(a("uScaleStart_highpart"),s.uniforms.VO()).uV(a("uScaleStart_lowpart"),s.uniforms.OO()):l instanceof Ci&&this.uV(a("uScaleStart"),s.uniforms.MixedScaleXY.uScaleStart).uV(a("uScaleStartLog"),s.uniforms.MixedScaleXY.uScaleStartLog).uV(a("uScaleInterval"),s.uniforms.MixedScaleXY.uScaleInterval).uV(a("uScaleIntervalLog"),s.uniforms.MixedScaleXY.uScaleIntervalLog).uV(n("uViewportStart"),s.uniforms.MixedScaleXY.uViewportStart).uV(n("uViewportSize"),s.uniforms.MixedScaleXY.uViewportSize);const d=s.coordsHighPrecision===!0;if(s.coordsX)if(d){const f=o("aPos_highpartX"),y=o("aPos_lowpartX");this.gl.bindBuffer(this.gl.ARRAY_BUFFER,s.coordsX),this.gl.vertexAttribPointer(f,1,this.gl.FLOAT,!1,2*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),this.gl.enableVertexAttribArray(f),this.gl.vertexAttribPointer(y,1,this.gl.FLOAT,!1,2*Float32Array.BYTES_PER_ELEMENT,1*Float32Array.BYTES_PER_ELEMENT),this.gl.enableVertexAttribArray(y)}else this.$V(o("aPosX"),s.coordsX);if(s.coordsY)if(d){const f=o("aPos_highpartY"),y=o("aPos_lowpartY");this.gl.bindBuffer(this.gl.ARRAY_BUFFER,s.coordsY),this.gl.vertexAttribPointer(f,1,this.gl.FLOAT,!1,2*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),this.gl.enableVertexAttribArray(f),this.gl.vertexAttribPointer(y,1,this.gl.FLOAT,!1,2*Float32Array.BYTES_PER_ELEMENT,1*Float32Array.BYTES_PER_ELEMENT),this.gl.enableVertexAttribArray(y)}else this.$V(o("aPosY"),s.coordsY);if(e===1)this.AR(n("uColor"),s.mousePickingColor);else{if(s.fillStyleSolid&&this.AR(n("uColor"),s.fillStyleSolid.getColor()),s.fillStylePaletted){if(s.fillStylePaletted.getLookUpProperty()==="value"&&s.lookupValueBuffer!==null){if(!s.lookupValueBuffer)return!1;const f=o("aLookupValue");this.$V(f,s.lookupValueBuffer),s.lookupValueAttribDivisor!==void 0&&this.UV(f,s.lookupValueAttribDivisor)}this.LO(t,s.fillStylePaletted.lut,s.lookupValueRange)}if(s.fillStyleLinearGradient){if(!s.linearGradientInfo)return!1;this.yO(t,s.linearGradientInfo,s.fillStyleLinearGradient)}if(s.fillStyleRadialGradient){if(!s.radialGradientInfo)return!1;this.mO(t,s.radialGradientInfo,s.fillStyleRadialGradient)}if(s.fillStyleIndividual&&s.colorBuffer!==null){if(!s.colorBuffer)return!1;const f=o("aColor");this.gl.bindBuffer(this.gl.ARRAY_BUFFER,s.colorBuffer),this.gl.vertexAttribPointer(f,4,this.gl.UNSIGNED_BYTE,!0,0,0),this.gl.enableVertexAttribArray(f),s.colorAttribDivisor!==void 0&&this.UV(f,s.colorAttribDivisor)}if(s.fillStyleImage){if(!s.texturedFillGLInfo)return!1;const f=s.texturedFillGLInfo&&s.texturedFillGLInfo.texture.Gz();this.AR(a("uColor"),s.fillStyleImage.getSurroundingColor()).cV(n("uColorTexture"),f||s.texturedFillGLInfo.sourceMissingTexture,0).lV(s.texturedFillGLInfo.texCoordsBuffer,s.texCoordAttribDivisor,{location:o("aTextureCoord"),size:2}).LV(s.fillStyleImage.fitMode)}if(s.maskTexture){const f=s.maskTexture&&s.maskTexture.texture.Gz();this.cV(n("uMaskTexture"),f||s.maskTexture.sourceMissingTexture,0).lV(s.maskTexture.texCoordsBuffer,s.maskTextureCoordsAttribDivisor,{location:o("aMaskTextureCoord"),size:2})}}return!0}NO(t,e,i){if(t)return ar(i||e.Ho(),e.dt,t.getAngle(!0),this.$z())}GO(t,e,i){if(t)return nr(i||e.Ho(),e.dt,t.getPosition(),t.getExtent(),t.getShape(),this.$z())}}const Bz=async(r,t,e,i,s,n,a)=>{const o=r.fenceSync(r.SYNC_GPU_COMMANDS_COMPLETE,0);return r.flush(),((l,u,d)=>{const f=d.flags!==void 0?d.flags:0,y=d.retryTimeout!==void 0?d.retryTimeout:10;return new Promise((m,p)=>{const x=()=>{const b=l.clientWaitSync(u,f,0);return b===l.WAIT_FAILED?p(new Error(`WebGL Sync WAIT_FAILED ${l.getError()}`)):b!==l.TIMEOUT_EXPIRED?m(void 0):void nt.setTimeout(x,y)};nt.setTimeout(x,0)})})(r,o,{retryTimeout:10}).then(()=>(r.deleteSync(o),r.bindBuffer(t,e),r.getBufferSubData(t,i,s,n,a),r.bindBuffer(t,null),s)).catch(l=>{throw l})};class cr{mV(t){if(t instanceof xe||t instanceof Js){const e=t.pi();this.WO=e.x.scaling,this.UO=-e.x.displacement,this.YO=e.y.scaling,this.HO=-e.y.displacement,this.$O=e.x.highPrecisionOffset,this.XO=e.x.highPrecisionOffset-Math.fround(e.x.highPrecisionOffset),this.jO=e.y.highPrecisionOffset,this.ZO=e.y.highPrecisionOffset-Math.fround(e.y.highPrecisionOffset)}else t instanceof Ci&&(this.MixedScaleXY=t.pi());return this}AV(){return[this.UO,this.HO]}fV(){return[this.WO,this.YO]}VO(){return[this.$O,this.jO]}OO(){return[this.XO,this.ZO]}}class Pz{constructor(){this.WO=0,this.YO=0,this.QO=0,this.UO=0,this.HO=0,this.JO=0}KO(t){return this.WO=t.et(),this.UO=t.getInnerStart()+.5*this.WO*t.ht(),this}qO(t){return this.YO=t.et(),this.HO=t.getInnerStart()+.5*this.YO*t.ht(),this}tN(t){return this.QO=t.et(),this.JO=t.getInnerStart()+.5*this.QO*t.ht(),this}fV(){return[this.WO,this.YO,this.QO]}AV(){return[this.UO,this.HO,this.JO]}iN(t,e,i,s,n){const a=Y(2*(t-i.x)/(i.width-i.x)-1,2*(e-i.y)/(i.height-i.y)-1),o=ze.multiply(s,[a.x,a.y,n,1]);return Bt(o[0],o[1],o[2])}}class Iz{constructor(t){this.RR=t}zL(t,e,i,s,n,a=0){const o=this.RR,l=s===void 0;if(!(s=s||o.vV()))throw new Ei("Could not bind a framebuffer.");const u=o.Xz(),d=o.Jz();o.gV(!1),o.KV(()=>{o.eV(0,0,i.x,i.y),t()},s,e,a),l&&o.MV(s),this.RR.qV(n),this.RR.eV(u.x,u.y,u.width,u.height),o.gV(d)}}class Uz{constructor(t,e){this.sN=[],this.eN=[],this.uniform=i=>{const s=this.shader.gE(i);return this.eN.push({name:i,optional:!1}),s},this.uniformOptional=i=>{const s=this.shader.mE(i);return this.eN.push({name:i,optional:!0}),s},this.attribute=i=>{const s=this.shader.yE(i);return this.sN.push({name:i,location:s}),s},this.glUtils=t,this.shader=e}finish(t){for(const e of this.sN)this.glUtils.YV(e.location),this.glUtils.UV(e.location,0)}}class Oz extends i0{constructor(t,e,i,s,n){super(t,e,i,s),this.hN=new Map,this.rN=t,this.nN=e,this.RR=t.oN(),this.aN=n,this.nN=e}lN(t){return!1}VR(){return this}zL(t){if(!this.aN||t!==0||this.hN.size===0)return this;const e=Array.from(this.hN.values()).map(s=>s.uN.filter(n=>n.cN).map(n=>n.ts).flat().filter(n=>n!==void 0).filter(n=>n.getVisible())).flat();if(e.length===0)return this;const i=this.aN;return this.RR.aO.SV(e,i),this}Ps(){return this}bt(){return 0}vt(){return 0}Mt(){return 0}xt(){return 0}vl(){return 0}bl(){return 0}hs(t,e){const i={uN:[]},s=(l,u)=>{const d={ts:l||[],cN:u===void 0||u};i.uN.push(d);const f={fs:y=>(d.ts=y,f),ps:y=>(d.cN=y,f),vs:()=>d.cN};return f},n={};Object.keys(e).forEach(l=>{const u=e[l],d=u.shapes||[],f=u.themeEffectEnabled===void 0||u.themeEffectEnabled,y=s(d,f);n[l]=y});const a={yg:s,...n};this.hN.set(t,i);const o=t.onDispose(()=>{this.hN.delete(t),t.offDispose(o)});return a}}const rT=(r,t,e)=>((i,s,n,a)=>{const o=[];let l=0;const u=Ht(s,n/2);let d,f,y,m,p=i[i.length-1],x=0;for(let b=0;b<i.length;b+=1){d=i[b],f=b===i.length-1?i[0]:i[b+1],b>0&&(p=i[b-1]),hb(d,p)&&(p=_t(d,Ws(Ht(Se(f,d),-1)))),hb(d,f)&&(f=_t(d,Ws(Ht(Se(p,d),-1))));const v=cc(p,s),R=cc(d,s),E=cc(f,s),V=Ws(Se(R,v)),F=Ws(Se(E,R)),L=_t(V,F),z=Y(-L.y,L.x),B=Y(-V.y,V.x),A=1/vm(z,B),T=_a(z),w=Ws(Se(V,F)),C=Math.sign(vm(z,w))||1,k=$s(z,Ht(u,A)),_=$s(z,Ht(u,-A));if(T<1||A===1/0){let X={x:0,y:0},N={x:0,y:0},U={x:0,y:0},O={x:0,y:0};const W=Y(-F.y,F.x),I=Math.sign(vm(V,z))||C,H=$s(B,Ht(u,I)),q=$s(W,Ht(u,I));C===1?(X=H,N=_,U=q,O=_):(X=k,N=H,U=k,O=q);const Q=4*ia(p,d),J=4*ia(d,f);(A>Q||A>J)&&(C===1?(X=H,N=q,U=q,O=H):(X=q,N=H,U=H,O=q));const ot=_t(d,X),ht=_t(d,N),ut=_t(d,U),dt=_t(d,O);o[l]=ot,l+=1,o[l]=ht,l+=1,o[l]=ut,l+=1,o[l]=dt,l+=1,x=4}else{const X=_t(d,k),N=_t(d,_);o[l]=X,l+=1,o[l]=N,l+=1,x=2}m=y,y=i[b]}return o[l]=o[0],l+=1,o[l]=o[1],l+=1,[o,x,[m,y]]})(r,t,e)[0];class Gz extends TD{constructor(t,e,i,s,n,a,o){super(t,e,i,s,n),this.aE=new cr,this.dN=Ne,this.fN=Ne,this.AN=Ds({arcStyleSolid:()=>ce(this.be)&&this.be,arcStyleRadialGradient:()=>li(this.be)&&this.be,arcStyleLinearGradient:()=>ui(this.be)&&this.be}),this.rN=t,this.nN=e,this.gN=a,this.mN=o,this.RR=t.oN()}yN(t,e){let i=0,s=Array(0),n=0;if(e!==void 0){const o=t.length,l=Array(o+e.length);let u=0,d=0;for(;u<o;)l[d]=t[u],l[d+1]=e[u],d+=2,u+=1;s=l,i=this.RR.gl.TRIANGLE_STRIP}else s=t,i=this.RR.gl.TRIANGLE_FAN;const a=Tr(s,this.dt._i());return n=s.length,[s,this.RR.nV(a),n,i]}pN(t,e,i,s){let n=Array(0);if(e===void 0)n=t;else{let o=0,l=0;const u=t.length;for(o=0,l=u,n=Array(u+e.length-2),e.reverse();o<u;)n[o]=t[o],n[l]=e[o],l+=1,o+=1}if(i===1||i===-1)return[Tr(n,this.dt._i()),n.length];const a=rT(n,s,i);return[Tr(a,this.dt._i()),a.length]}Ps(){const t=this.sa(),e=this.Bo.M();if(this.ea()){const i=Math.abs(this.Fi.M()-this.Gl.M());this.aE.mV(this.dt);const s=this.dt.Ni()||t,n=this.dt.Wi(),a=this.Wl.M(),o=this.Ul.M(),[l,u]=d0(this.ua.M(),this.Gl.M(),this.Fi.M(),this.Wl.M(),this.Ul.M(),this.Hl.M()),d=this.Yl.M(),f=d>0?d0(this.ua.M(),this.Gl.M(),this.Fi.M(),this.Wl.M()*d/100,this.Ul.M()*d/100,u)[0]:[this.ua.M()],y=l.length-1;if(y===2){const F=(l[y-1].x+l[1].x)/2,L=(l[y-1].y+l[1].y)/2;this.$l=Y(F,L)}else{const F=Math.floor(y/2);this.$l=Y(l[F].x,l[F].y)}this.Xl=l[1];const m=l.length-1;this.jl=l[m],this.Yl.M()&&(l.shift(),f.shift());let p=!1;(this.ua.i||this.Gl.i||this.Fi.i||this.Wl.i||this.Ul.i||this.Yl.i||this.Hl.i||s)&&(this.fN=Kt(Y(this.Fa().x-a,this.Fa().y-o),Y(this.Fa().x+a,this.Fa().y+o)),p=!0,this.ua.i=!1,this.Gl.i=!1,this.Fi.i=!1,this.Wl.i=!1,this.Ul.i=!1,this.Yl.i=!1,this.Hl.i=!1);const x=this.ta();(p||x)&&this.be!==Vt&&(this.Yl.M()?(this.SN&&this.RR.yV(this.SN),[this.vN,this.SN,this.bN,this.xN]=this.yN(l,f)):(this.SN&&this.RR.yV(this.SN),[this.vN,this.SN,this.bN,this.xN]=this.yN(l,void 0)),li(this.be)?this.MN=nr(this.fN,this.dt,this.be.getPosition(),this.be.getExtent(),this.be.getShape(),this.RR.$z()):ui(this.be)?this._N=ar(this.fN,this.dt,this.be.getAngle(!0),this.RR.$z()):(this.MN=void 0,this._N=void 0));const b=this.AN.arcStyleSolid(x),v=this.AN.arcStyleLinearGradient(x),R=this.AN.arcStyleRadialGradient(x),E=b||v||R;x&&(this.wN=E?this.RR.oz(j["2D"],j.Color({dataType:li(this.be)||ui(this.be)?["gradient",this.be]:"uniform"}),j.VertexLocation({axisWorldTranslation:Pt(this.dt),normalSource:void 0})):void 0,this.ha(this.be));const V=this.xe;if(As(V)&&(p||this.oa(V.getThickness())||s)){this.Yl.M()?i===360?(l.pop(),f.pop(),[this.CN,this.kN]=this.pN(l,void 0,V.getThickness(),n),this.TN&&this.CN?this.RR.VV(this.TN,this.CN,!0):!this.TN&&this.CN?this.TN=this.RR.nV(this.CN,!0):this.TN&&!this.CN&&(this.RR.yV(this.TN),this.TN=void 0),[this.FN,this.IN]=this.pN(f,void 0,V.getThickness(),n),this.PN&&this.FN?this.RR.VV(this.PN,this.FN,!0):!this.PN&&this.FN?this.PN=this.RR.nV(this.FN,!0):this.PN&&!this.FN&&(this.RR.yV(this.PN),this.PN=void 0)):([this.CN,this.kN]=this.pN(l,f,V.getThickness(),n),this.TN&&this.CN?this.RR.VV(this.TN,this.CN,!0):!this.TN&&this.CN?this.TN=this.RR.nV(this.CN,!0):this.TN&&!this.CN&&(this.RR.yV(this.TN),this.TN=void 0),this.FN&&(this.PN&&this.RR.yV(this.PN),this.PN=void 0,this.IN=0)):(i===360&&(l.shift(),l.pop()),[this.CN,this.kN]=this.pN(l,void 0,V.getThickness(),n),this.TN&&this.CN?this.RR.VV(this.TN,this.CN,!0):!this.TN&&this.CN?this.TN=this.RR.nV(this.CN,!0):this.TN&&!this.CN&&(this.RR.yV(this.TN),this.TN=void 0));const F=V.getFillStyle();li(F)?this.DN=nr(this.fN,this.dt,F.getPosition(),F.getExtent(),F.getShape(),this.RR.$z()):ui(F)?this.LN=ar(this.fN,this.dt,F.getAngle(!0),this.RR.$z()):(this.DN=void 0,this.LN=void 0),this.RN=F===Vt?void 0:this.RR.oz(j["2D"],j.Color({dataType:li(F)||ui(F)?["gradient",F]:"uniform"}),j.VertexLocation({axisWorldTranslation:Pt(this.dt),normalSource:void 0})),this.aa(V)}if(p){let F=1,L=1;As(V)&&(F=V.getThickness()*n.x,L=V.getThickness()*n.y),this.dN=Kt(Y(this.fN.min.x-F,this.fN.min.y-L),Y(this.fN.max.x+F,this.fN.max.y+L))}this.EN=e&&E?this.EN||this.RR.oz(j["2D"],j.MousePicking,j.VertexLocation({axisWorldTranslation:Pt(this.dt),normalSource:void 0})):void 0,this.zN=e&&this.xe!==vt?this.zN||this.RR.oz(j["2D"],j.MousePicking,j.VertexLocation({axisWorldTranslation:Pt(this.dt),normalSource:void 0})):void 0}return this}zL(t){if(this.ea()){const e=t===1?this.EN:this.wN,i=this.be,s=this.SN;e&&s&&this.RR.jR(e).aV(e,(a,o,l,u)=>{if(this.RR.uV(a("uScale"),this.aE.fV()).uV(a("uDisp"),this.aE.AV()).uV(u("uScaleStart_highpart"),this.aE.VO()).uV(u("uScaleStart_lowpart"),this.aE.OO()).vO(l,s,this.dt._i(),void 0).dV(a("uIsHighlighted"),t===1||t===2?0:this.zo).AR(a("uHighlightColorOffset"),t===1||t===2?Je:this.Go).dV(a("uRenderEffectMask"),t===2?1:0),t===1)this.RR.AR(a("uColor"),this.mN);else if(ce(i))this.RR.AR(a("uColor"),i.getColor());else if(li(i)){if(!this.MN)return!1;this.RR.mO(l,this.MN,i)}else if(ui(i)){if(!this._N)return!1;this.RR.yO(l,this._N,i)}return this.RR.Ky(this.xN,this.bN),!0});const n=this.xe;As(n)&&(this.TN!==void 0&&this.VN(t,this.TN,this.kN,n),this.PN!==void 0&&this.VN(t,this.PN,this.IN,n))}return this}VN(t,e,i,s){const n=t===1?this.zN:this.RN,a=s.getFillStyle();n&&this.RR.jR(n).aV(n,(o,l,u,d)=>{if(this.RR.uV(o("uScale"),this.aE.fV()).uV(o("uDisp"),this.aE.AV()).vO(u,e,this.dt._i(),void 0).dV(o("uIsHighlighted"),t===1||t===2?0:this.zo).AR(o("uHighlightColorOffset"),t===1||t===2?Je:this.Go).dV(o("uRenderEffectMask"),t===2?1:0),t===1)this.RR.AR(o("uColor"),this.mN);else if(ce(a))this.RR.AR(o("uColor"),a.getColor());else if(li(a)){if(!this.DN)return!1;this.RR.mO(u,this.DN,a)}else if(ui(a)){if(!this.LN)return!1;this.RR.yO(u,this.LN,a)}const f=s.getThickness(),y=f===-1||f===1;return this.RR.Ky(y?this.RR.gl.LINE_LOOP:this.RR.gl.TRIANGLE_STRIP,i),!0})}lN(t){return this.gN===t&&{}}VR(){return this.ON&&(this.RR.yV(this.ON),this.ON=void 0),this.NN&&(this.RR.yV(this.NN),this.NN=void 0),this.SN&&(this.RR.yV(this.SN),this.SN=void 0),this.TN&&(this.RR.yV(this.TN),this.TN=void 0),this.PN&&(this.RR.yV(this.PN),this.PN=void 0),this.wN=void 0,this.RN=void 0,this.EN=void 0,this.zN=void 0,this}bt(){return this.fN.max.x}vt(){return this.fN.min.x}Mt(){return this.fN.max.y}xt(){return this.fN.min.y}vl(){return Ps(this.xe)}bl(){return Ps(this.xe)}}class Yz{constructor(){this.first=0,this.second=1,this.third=2,this.fourth=3,this.fifth=4,this.sixth=5}GN(t){return this.first=t,this.second=t+1,this.third=t+2,this.fourth=t+3,this.fifth=t+4,this.sixth=t+5,t+=6,this}WN(){return this.first=this.second,this.second=this.third,this.third=this.fourth,this.fourth=this.fifth,this.fifth=this.sixth,this.sixth+=1,this}UN(){return this.first=this.third,this.second=this.fourth,this.third=this.fifth,this.fourth=this.sixth,this.fifth=this.fourth+1,this.sixth=this.fifth+1,this}YN(t){const e=t.buffer;let{position:i}=t;return e[i]=this.first,e[i+1]=this.second,e[i+2]=this.third,i+=3,t.position=i,t.next&&this.WN(),this}HN(t){const e=t.buffer;let{position:i}=t;return e[i]=this.first,e[i+1]=this.third,e[i+2]=this.second,e[i+3]=this.third,e[i+4]=this.fourth,e[i+5]=this.second,i+=6,t.position=i,t.next&&this.UN(),this}$N(t,e){e.next=!0,6*t>=e.buffer.length&&(e.buffer=Array(6*t));for(let i=0;i<t;i+=1)this.HN(e);return this}XN(){return[this.first,this.second,this.third,this.fourth,this.fifth,this.sixth]}}const je=((r=0)=>new Yz().GN(r))(),k2=(r,t,e,i,s,n,a,o,l,u)=>(o===void 0&&a===void 0||je.WN(),n.push(r,t),s.push(je.first,je.second,je.third),o=void 0,a=void 0,s.push(je.third,je.fourth,je.second),l=je.third,je.UN(),u&&n.push(e,i),[a,o,l]),D2=(r,t,e,i,s,n,a,o,l,u,d)=>{l===void 0&&o===void 0||je.WN(),a.push(r,t),s.push(je.first,je.second,je.third);const f=rp(r,e,t,i);return l=void 0,f!==void 0&&(l===void 0&&(l=f),a.push(l),n.push(je.third,je.fourth,je.fifth),u=je.fourth),je.UN(),d&&a.push(e,i),[o,l,u]},F2=(r,t,e,i,s,n,a,o,l,u)=>(a===void 0&&n===void 0||je.WN(),s.push(r,t),i.push(je.first,je.second,je.third),n=e,a=void 0,o=je.third,u?s.push(e):l=!0,[n,a,o,l]),V2=(r,t,e,i,s,n,a,o,l,u,d)=>(n.length!==0?(o===void 0&&a===void 0||je.WN(),je.WN()):l>0&&(je.WN(),d>0&&(d-=1)),n.push(r),s.push(je.first,je.second,je.third),l=je.second,a=r,o=void 0,u&&n.push(e,i),[a,o,l,d]),z2=(r,t=0)=>{je.GN(t);const[e,i]=r,s=e.length,n=[],a=[],o=[];let l,u,d=t,f=0,y=e[f],m=i[f],p=e[f],x=i[f],b=!1,v=d>0?p.y!==x.y?2:1:0;if(s>1)for(;f<s-1;){p=y,x=m,f+=1,y=e[f],m=i[f];const R=f===s-1;p.y>x.y?y.y>m.y?[l,u,d]=k2(p,x,y,m,n,o,l,u,d,R):y.y<m.y?[l,u,d]=D2(p,x,y,m,n,a,o,l,u,d,R):[l,u,d,b]=F2(p,x,y,n,o,l,u,d,b,R):p.y<x.y?y.y<m.y?[l,u,d]=k2(p,x,y,m,a,o,l,u,d,R):y.y>m.y?[l,u,d]=D2(p,x,y,m,a,n,o,l,u,d,R):[l,u,d,b]=F2(p,x,y,a,o,l,u,d,b,R):y.y===m.y?(l=p,b&&(o.push(p),b=!1,je.WN()),o.length===0&&d>0&&v>0&&(v-=1)):y.y>m.y?[l,u,d,v]=V2(p,0,y,m,n,o,l,u,d,R,v):[l,u,d,v]=V2(p,0,y,m,a,o,l,u,d,R,v)}return[o,new Uint16Array(n),new Uint16Array(a),d,v]};class Hz extends ED{constructor(t,e,i,s,n,a,o){super(t,e,i,s,n),this.aE=new cr,this.jN=0,this.Oa=Array(),this.ZN=0,this.QN=new Uint16Array(0),this.JN=new Uint16Array(0),this.AN=Ds({hightFillSolid:()=>ce(this.be)&&this.be,hightFillRadialGradient:()=>li(this.be)&&this.be,hightFillLinearGradient:()=>ui(this.be)&&this.be,hightFillPaletted:()=>wi(this.be)&&this.be,lowFillSolid:()=>ce(this.Tl)&&this.Tl,lowFillRadialGradient:()=>li(this.Tl)&&this.Tl,lowFillLinearGradient:()=>ui(this.Tl)&&this.Tl,lowFillPaletted:()=>wi(this.Tl)&&this.Tl}),this.rN=t,this.nN=e,this.gN=a,this.mN=o,this.RR=t.oN()}Ps(){const t=this.sa(),e=this.Bo.M(),i=this.Qa;if(this.ea()){this.aE.mV(this.dt);const s=this.dt instanceof Ci==0,n=s?this.dt.Wi():void 0,a=this.Dl(),o=this.dt.Ni()||t,l=i||this._l.i||o&&a.type!=="disabled";if(l){if(this.jN=0,this.QN=new Uint16Array(0),this.JN=new Uint16Array(0),this.Oa.length=0,this.ZN=0,this.wl>1){const[z,B,A,T]=z2([s?a.packager(this.xl,n,.5):this.xl,s?a.packager(this.Ml,n,.5):this.Ml]);this.jN=T,this.QN=B,this.JN=A,this.Oa=z,this.ZN=z.length}this._l.i=!1}if(this.kl&&this.$a[0].length>1){const[z,B]=this.$a,A=z.length,[T,w,C,k,_]=z2([s?a.packager(z,n,.5):z,s?a.packager(B,n,.5):B],this.jN);this.jN=k;const X=T.length;for(let N=_;N<X;N+=1)this.Oa[this.ZN]=T[N],this.ZN+=1;this.QN=pb(this.QN,w),this.JN=pb(this.JN,C);for(let N=_>0||this.wl>0?1:_;N<A;N+=1)this.xl[this.wl]=z[N],this.Ml[this.wl]=B[N],this.wl+=1;this.Cl=!0,this.kl=!1,this.$a=[]}const u=this.be,d=this.ia!==u,f=this.AN.hightFillSolid(d),y=this.AN.hightFillRadialGradient(d),m=this.AN.hightFillLinearGradient(d),p=this.AN.hightFillPaletted(d),x=f||y||m||p&&["x","y"].includes(p.getLookUpProperty())&&p,b=this.Tl,v=this.Ol!==b,R=this.AN.lowFillSolid(v),E=this.AN.lowFillRadialGradient(v),V=this.AN.lowFillLinearGradient(v),F=this.AN.lowFillPaletted(v),L=R||E||V||F&&["x","y"].includes(F.getLookUpProperty())&&F;if((d||t)&&(this.KN=x?this.RR.oz(j["2D"],j.Color({dataType:m?["gradient",m]:y?["gradient",y]:p?["lookup",p.getLookUpProperty(),p.lut]:"uniform"}),j.VertexLocation({axisWorldTranslation:Pt(this.dt),normalSource:void 0})):void 0),y?this.MN=nr(this.Eo||this.Ya,this.dt,y.getPosition(),y.getExtent(),y.getShape(),this.RR.$z()):m?this._N=ar(this.Eo||this.Ya,this.dt,m.getAngle(!0),this.RR.$z()):(this.MN=void 0,this._N=void 0),(v||t)&&(this.qN=L?this.RR.oz(j["2D"],j.Color({dataType:V?["gradient",V]:E?["gradient",E]:F?["lookup",F.getLookUpProperty(),F.lut]:"uniform"}),j.VertexLocation({axisWorldTranslation:Pt(this.dt),normalSource:void 0})):void 0),E?this.tG=nr(this.Eo||this.Ya,this.dt,E.getPosition(),E.getExtent(),E.getShape(),this.RR.$z()):V?this.iG=ar(this.Eo||this.Ya,this.dt,V.getAngle(!0),this.RR.$z()):(this.tG=void 0,this.iG=void 0),(t||this.Cl||l)&&this.Cl||l){const z=this.Oa,B=Tr(z,this.dt._i());this.sG=this.RR.nV(B,!1,this.sG),x&&(this.eG=this.RR.OV(this.QN,this.eG),this.hG=this.QN.length),L&&(this.rG=this.RR.OV(this.JN,this.rG),this.nG=this.JN.length),this.Cl=!1}this.EN=e&&(L||x)?this.EN||this.RR.oz(j["2D"],j.MousePicking,j.VertexLocation({axisWorldTranslation:Pt(this.dt),normalSource:void 0})):void 0,this.ha(this.be),this.Nl(this.Tl),this.Qa=!1}return this}zL(t){const e=this.be,i=this.Tl,s=t===1?this.EN:this.qN;if(s&&this.sG&&this.rG){const a=this.sG,o=this.rG;this.RR.jR(s).aV(s,(l,u,d,f)=>{if(this.RR.vO(d,a,this.dt._i(),void 0).XV(o).dV(l("uIsHighlighted"),t===1||t===2?0:this.zo).AR(l("uHighlightColorOffset"),t===1||t===2?Je:this.Go).dV(l("uRenderEffectMask"),t===2?1:0),this.dt instanceof xe||this.dt instanceof Js?this.RR.uV(l("uScale"),this.aE.fV()).uV(l("uDisp"),this.aE.AV()).uV(f("uScaleStart_highpart"),this.aE.VO()).uV(f("uScaleStart_lowpart"),this.aE.OO()):this.dt instanceof Ci&&this.RR.uV(f("uScaleStart"),this.aE.MixedScaleXY.uScaleStart).uV(f("uScaleStartLog"),this.aE.MixedScaleXY.uScaleStartLog).uV(f("uScaleInterval"),this.aE.MixedScaleXY.uScaleInterval).uV(f("uScaleIntervalLog"),this.aE.MixedScaleXY.uScaleIntervalLog).uV(l("uViewportStart"),this.aE.MixedScaleXY.uViewportStart).uV(l("uViewportSize"),this.aE.MixedScaleXY.uViewportSize),t===1)this.RR.AR(l("uColor"),this.mN);else if(ce(i))this.RR.AR(l("uColor"),i.getColor());else if(li(i)){if(!this.tG)return!1;this.RR.mO(d,this.tG,i)}else if(ui(i)){if(!this.iG)return!1;this.RR.yO(d,this.iG,i)}else if(wi(i)){const y=ir(i,this,void 0);if(!y&&i.lut.percentageValues)return!1;this.RR.LO(d,i.lut,y)}return this.RR.ZV(this.nG),!0})}const n=t===1?this.EN:this.KN;if(n&&this.sG&&this.eG){const a=this.sG,o=this.eG;this.RR.jR(n).aV(n,(l,u,d,f)=>{if(this.RR.vO(d,a,this.dt._i(),void 0).XV(o).dV(l("uIsHighlighted"),t===1||t===2?0:this.zo).AR(l("uHighlightColorOffset"),t===1||t===2?Je:this.Go).dV(l("uRenderEffectMask"),t===2?1:0),this.dt instanceof xe||this.dt instanceof Js?this.RR.uV(l("uScale"),this.aE.fV()).uV(l("uDisp"),this.aE.AV()).uV(f("uScaleStart_highpart"),this.aE.VO()).uV(f("uScaleStart_lowpart"),this.aE.OO()):this.dt instanceof Ci&&this.RR.uV(f("uScaleStart"),this.aE.MixedScaleXY.uScaleStart).uV(f("uScaleStartLog"),this.aE.MixedScaleXY.uScaleStartLog).uV(f("uScaleInterval"),this.aE.MixedScaleXY.uScaleInterval).uV(f("uScaleIntervalLog"),this.aE.MixedScaleXY.uScaleIntervalLog).uV(l("uViewportStart"),this.aE.MixedScaleXY.uViewportStart).uV(l("uViewportSize"),this.aE.MixedScaleXY.uViewportSize),t===1)this.RR.AR(l("uColor"),this.mN);else if(ce(e))this.RR.AR(l("uColor"),e.getColor());else if(li(e)){if(!this.MN)return!1;this.RR.mO(d,this.MN,e)}else if(ui(e)){if(!this._N)return!1;this.RR.yO(d,this._N,e)}else if(wi(e)){const y=ir(e,this,void 0);if(!y&&e.lut.percentageValues)return!1;this.RR.LO(d,e.lut,y)}return this.RR.ZV(this.hG),!0})}return this}lN(t){return this.gN===t&&{}}bt(){return this.Ya.max.x}vt(){return this.Ya.min.x}Mt(){return this.Ya.max.y}xt(){return this.Ya.min.y}vl(){return 0}bl(){return 0}Ux(t){this.al()>0&&this.Ps();const[e,i]=this.tl(),s=e.length>2&&e[1].x<e[0].x,n=uS(e,t,qi.NearestX,this.Fl,this.Il,this.dt,this.us.dt,this.Ya,"x",s);if(n===void 0)return;const a=[e[n],i[n]];return Number.isNaN(a[0].y)||Number.isNaN(a[1].y)?void 0:a}sw(t){this.al()>0&&this.Ps();const[e,i]=this.tl(),s=e.length;if(s===0)return;const n=this.Fl?1:0,a=s-(this.Il?2:1),o=e.length>2&&e[1].x<e[0].x,l=JR(e,gt(t,this.us.dt,this.dt),"x",o,n,a);if(!l)return;const u=[za(e[l.a],e[l.b],l.lerpAmount),za(i[l.a],i[l.b],l.lerpAmount)];return Number.isNaN(u[0].y)||Number.isNaN(u[1].y)?void 0:u}dispose(){return super.dispose(),this.rG&&(this.RR.yV(this.rG),this.rG=void 0),this.eG&&(this.RR.yV(this.eG),this.eG=void 0),this.sG&&(this.RR.yV(this.sG),this.sG=void 0),this}VR(){return this.dispose(),this}}class Xz extends tu{constructor(t,e){super(t),this.oG=e;const{vertices:i,indices:s,indicesCount:n,drawMode:a}=this.aG();this.lG=t.nV(i),this.uG=t.OV(s),this.cG=n,this.dG=a}jR(t,e){return this.RR.lV(this.lG,0,{location:t.attribute("aSegmentPosition"),size:2},{location:t.attribute("aSegmentSide"),size:1},{location:e?t.attribute("aSegmentInside"):void 0,size:1}),this.RR.XV(this.uG),this}Ky(t,e,i){return this.RR.JV(e!==void 0?e:this.dG,this.cG,i||0,t,this.RR.gl.UNSIGNED_BYTE),this}aG(){const t=[];[1,0].forEach(s=>{const n=s===1?.5*Math.PI:1.5*Math.PI;for(let a=0;a<=this.oG;a+=1){const o=n-a*Math.PI/this.oG;t.push(.5*Math.cos(o),.5*Math.sin(o),s,0)}}),t.push(0,0,1,1),t.push(0,0,0,1);const e=t.length/4,i=[];for(let s=0;s<this.oG;s+=1)i.push(s,s+1,e-2),i.push(s+e/2-1,s+e/2,e-1);return i.push(0,e-2,e-1),i.push(e-1,e-2,e/2-1),i.push(0,e-3,e-1),i.push(e/2-2,e-2,e/2-1),{vertices:new Float32Array(t),indices:new Uint8Array(i),indicesCount:i.length,verticesCount:e,drawMode:this.RR.gl.TRIANGLES}}kz(){this.RR.yV(this.lG),this.RR.yV(this.uG)}}const eu=(r,t,e=!0)=>((i,s)=>{let n=i._V.xz.get(s);return n||(n=new Xz(i,s),i._V.xz.set(s,n),n)})(r,e?t>=50?8:t>=20?6:t>=7?4:t>=4?3:t===1?1:2:1),Sn={fG:(r,t,e,i,s,n)=>{const{attribute:a}=i,o=t.gl;if(o.bindBuffer(o.ARRAY_BUFFER,e),r){const l=a("aLocationA_highpart"),u=a("aLocationA_lowpart"),d=a("aLocationB_highpart"),f=a("aLocationB_lowpart");o.vertexAttribPointer(l,2,o.FLOAT,!1,s*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),t.UV(l,1),o.enableVertexAttribArray(l),o.vertexAttribPointer(u,2,o.FLOAT,!1,s*Float32Array.BYTES_PER_ELEMENT,(n+2)*Float32Array.BYTES_PER_ELEMENT),t.UV(u,1),o.enableVertexAttribArray(u),o.vertexAttribPointer(d,2,o.FLOAT,!1,s*Float32Array.BYTES_PER_ELEMENT,(n+s)*Float32Array.BYTES_PER_ELEMENT),t.UV(d,1),o.enableVertexAttribArray(d),o.vertexAttribPointer(f,2,o.FLOAT,!1,s*Float32Array.BYTES_PER_ELEMENT,(n+s+2)*Float32Array.BYTES_PER_ELEMENT),t.UV(f,1),o.enableVertexAttribArray(f)}else{const l=a("aLocationA"),u=a("aLocationB");o.vertexAttribPointer(l,2,o.FLOAT,!1,s*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),t.UV(l,1),o.enableVertexAttribArray(l),o.vertexAttribPointer(u,2,o.FLOAT,!1,s*Float32Array.BYTES_PER_ELEMENT,(n+s)*Float32Array.BYTES_PER_ELEMENT),t.UV(u,1),o.enableVertexAttribArray(u)}},AG:(r,t,e,i,s,n,a)=>{const o=r.gl;o.bindBuffer(o.ARRAY_BUFFER,e),o.vertexAttribPointer(i,n,o.FLOAT,!1,n*Float32Array.BYTES_PER_ELEMENT,a*Float32Array.BYTES_PER_ELEMENT),r.UV(i,1),o.enableVertexAttribArray(i),o.vertexAttribPointer(s,n,o.FLOAT,!1,n*Float32Array.BYTES_PER_ELEMENT,(a+n)*Float32Array.BYTES_PER_ELEMENT),r.UV(s,1),o.enableVertexAttribArray(s)},gG:(r,t,e,i,s,n)=>{const{attribute:a}=i,o=t.gl;if(o.bindBuffer(o.ARRAY_BUFFER,e),r){const l=a("aLocationA_highpart"),u=a("aLocationA_lowpart"),d=a("aLocationB_highpart"),f=a("aLocationB_lowpart");o.vertexAttribPointer(l,2,o.FLOAT,!1,2*s*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),t.UV(l,1),o.enableVertexAttribArray(l),o.vertexAttribPointer(u,2,o.FLOAT,!1,2*s*Float32Array.BYTES_PER_ELEMENT,(n+2)*Float32Array.BYTES_PER_ELEMENT),t.UV(u,1),o.enableVertexAttribArray(u),o.vertexAttribPointer(d,2,o.FLOAT,!1,2*s*Float32Array.BYTES_PER_ELEMENT,(n+s)*Float32Array.BYTES_PER_ELEMENT),t.UV(d,1),o.enableVertexAttribArray(d),o.vertexAttribPointer(f,2,o.FLOAT,!1,2*s*Float32Array.BYTES_PER_ELEMENT,(n+s+2)*Float32Array.BYTES_PER_ELEMENT),t.UV(f,1),o.enableVertexAttribArray(f)}else{const l=a("aLocationA"),u=a("aLocationB");o.vertexAttribPointer(l,2,o.FLOAT,!1,2*s*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),t.UV(l,1),o.enableVertexAttribArray(l),o.vertexAttribPointer(u,2,o.FLOAT,!1,2*s*Float32Array.BYTES_PER_ELEMENT,(n+s)*Float32Array.BYTES_PER_ELEMENT),t.UV(u,1),o.enableVertexAttribArray(u)}},mG:(r,t,e,i,s,n,a)=>{const o=r.gl;o.bindBuffer(o.ARRAY_BUFFER,e),o.vertexAttribPointer(i,n,o.FLOAT,!1,2*n*Float32Array.BYTES_PER_ELEMENT,a*Float32Array.BYTES_PER_ELEMENT),r.UV(i,1),o.enableVertexAttribArray(i),o.vertexAttribPointer(s,n,o.FLOAT,!1,2*n*Float32Array.BYTES_PER_ELEMENT,(a+n)*Float32Array.BYTES_PER_ELEMENT),r.UV(s,1),o.enableVertexAttribArray(s)},zL:(r,t,e,i,s,n,a)=>{const o=r.oN(),{uniform:l,uniformOptional:u}=e,d=1/r.Un.$n,f=(s?Math.max(n,d):Math.max(n,0))+1;o.dV(l("uThicknessPixels"),f).dV(u("uAALimit"),1-(f-1)/f).uV(l("uRatioPxClip"),[2/r.oi().x,2/r.oi().y]),t.jR(e,i).Ky(a)}},pl={fG:(r,t,e,i,s,n)=>{const{attribute:a}=i,o=t.gl;if(o.bindBuffer(o.ARRAY_BUFFER,e),r){const l=a("aPos_highpart");o.vertexAttribPointer(l,2,o.FLOAT,!1,s*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),o.enableVertexAttribArray(l);const u=a("aPos_lowpart");o.vertexAttribPointer(u,2,o.FLOAT,!1,s*Float32Array.BYTES_PER_ELEMENT,(n+2)*Float32Array.BYTES_PER_ELEMENT),o.enableVertexAttribArray(u)}else{const l=a("aPos");o.vertexAttribPointer(l,2,o.FLOAT,!1,s*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),o.enableVertexAttribArray(l)}},AG:(r,t,e,i,s,n)=>{const a=r.gl;a.bindBuffer(a.ARRAY_BUFFER,e),a.vertexAttribPointer(i,s,a.FLOAT,!1,s*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),a.enableVertexAttribArray(i)},gG:(r,t,e,i,s,n)=>{const{attribute:a}=i,o=t.gl;if(o.bindBuffer(o.ARRAY_BUFFER,e),!r){const l=a("aPos");o.vertexAttribPointer(l,2,o.FLOAT,!1,s*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),o.enableVertexAttribArray(l)}},yG:(r,t)=>{const e=r.oN();e.Ky(e.gl.LINE_STRIP,t,0)},pG:(r,t)=>{const e=r.oN();e.Ky(e.gl.LINES,2*t,0)}};class Wz extends VD{constructor(t,e,i,s,n,a,o){super(t,e,i,s,n),this.aE=new cr,this.Ya=Ne,this.AN=Ds({lineStyleSolid:()=>As(this.lu)&&this.lu,lineStyleDashed:()=>B0(this.lu)&&this.lu,strokeFillSolid:()=>{const l=this.lu.getFillStyle();return ce(l)&&l},strokeFillLinearGradient:()=>{const l=this.lu.getFillStyle();return ui(l)&&l},strokeFillRadialGradient:()=>{const l=this.lu.getFillStyle();return li(l)&&l},strokeFillPaletted:()=>{const l=this.lu.getFillStyle();return wi(l)&&l}}),this.rN=t,this.nN=e,this.gN=a,this.mN=o,this.RR=t.oN(),this.SG=this.RR.eO}Ps(){const t=this.ra(),e=this.lu,i=this.AN.lineStyleSolid(t),s=this.AN.lineStyleDashed(t),n=i||s,a=this.AN.strokeFillSolid(t),o=this.AN.strokeFillLinearGradient(t),l=this.AN.strokeFillRadialGradient(t),u=this.AN.strokeFillPaletted(t),d=a||o||l||u&&["x","y"].includes(u.getLookUpProperty())&&u,f=this.Ii(),y=this.Ti(),m=this.Bo.M(),p=this.Bo.i,x=e.V();if(s&&this.dt instanceof Ci)return nt.console.error("LightningChart JS DashedLine is not supported on logarithmic axis"),this;if(this.aE.mV(this.dt),this.Au&&(this.vG=this.RR.nV(Tr([f,y],this.dt._i()),!1,this.vG),this.Ya=Kt(Y(f.x,f.y),Y(y.x,y.y))),t||p){const b=this.ea()&&n&&d&&x>0,v=o?["gradient",o]:l?["gradient",l]:u?["lookup",u.getLookUpProperty(),u.lut]:"uniform";this.bG=b?{type:"triangulated",shader:this.RR.oz(j["2D"],j.Color({dataType:v}),j.LineInstanced2D({axisWorldTranslation:Pt(this.dt),normalSource:void 0}),this.SG?j.AliasedEdge:void 0,s&&j.StippleTextureInstanced),mousePickingShader:m?this.RR.oz(j["2D"],j.MousePicking,j.LineInstanced2D({axisWorldTranslation:Pt(this.dt),normalSource:void 0}),s&&j.StippleTextureInstanced):void 0,geometry:eu(this.RR,x),thickness:x,lineStyleSolid:i,lineStyleDashed:s,fillStyleSolid:a,fillStyleLinearGradient:o,fillStyleRadialGradient:l,fillStylePaletted:u}:void 0}if(l?this.DN=nr(Ao(this.Ya,{x:this.vl(),y:this.bl()},this.dt),this.dt,l.getPosition(),l.getExtent(),l.getShape(),this.RR.$z()):o?this.LN=ar(Ao(this.Ya,{x:this.vl(),y:this.bl()},this.dt),this.dt,o.getAngle(!0),this.RR.$z()):(this.DN=void 0,this.LN=void 0),s){if(t||this.Au){const b=[0,0,Math.abs(y.x-f.x),Math.abs(y.y-f.y)];this.xG=this.RR.nV(b,!1,this.xG)}this.MG=this.RR.IO(s.getPattern())}else this.xG&&(this.RR.yV(this.xG),this.xG=void 0),this.MG=void 0;return this.fu(e),this.Au=!1,this.Bo.i=!1,this}zL(t){var e,i;const s=this.vG;if(!s)return this;const n=this.bG;if(!n)return this;const{fillStyleSolid:a,fillStyleLinearGradient:o,fillStyleRadialGradient:l,fillStylePaletted:u,lineStyleDashed:d,thickness:f}=n,y=t===1?(e=this.bG)===null||e===void 0?void 0:e.mousePickingShader:(i=this.bG)===null||i===void 0?void 0:i.shader;return y?(this.RR.jR(y).aV(y,(m,p,x,b)=>{if(this.RR.dV(m("uIsHighlighted"),t===1||t===2?0:this.zo).AR(m("uHighlightColorOffset"),t===1||t===2?Je:this.Go).dV(m("uRenderEffectMask"),t===2?1:0),this.dt instanceof xe||this.dt instanceof Js?this.RR.uV(m("uScale"),this.aE.fV()).uV(m("uDisp"),this.aE.AV()).uV(b("uScaleStart_highpart"),this.aE.VO()).uV(b("uScaleStart_lowpart"),this.aE.OO()):this.dt instanceof Ci&&this.RR.uV(b("uScaleStart"),this.aE.MixedScaleXY.uScaleStart).uV(b("uScaleStartLog"),this.aE.MixedScaleXY.uScaleStartLog).uV(b("uScaleInterval"),this.aE.MixedScaleXY.uScaleInterval).uV(b("uScaleIntervalLog"),this.aE.MixedScaleXY.uScaleIntervalLog).uV(m("uViewportStart"),this.aE.MixedScaleXY.uViewportStart).uV(m("uViewportSize"),this.aE.MixedScaleXY.uViewportSize),t===1)this.RR.AR(m("uColor"),this.mN);else if(a)this.RR.AR(m("uColor"),a.getColor());else if(l){if(!this.DN)return!1;this.RR.mO(x,this.DN,l)}else if(o){if(!this.LN)return!1;this.RR.yO(x,this.LN,o)}else if(u){const v=ir(u,this,void 0);if(!v&&u.lut.percentageValues)return!1;this.RR.LO(x,u.lut,v)}if(d){if(!this.xG||!this.MG)return!1;Sn.AG(this.RR,x,this.xG,p("aLengthSoFarA"),p("aLengthSoFarB"),2,0),this.RR.uV(m("uStippleCount"),[this.us.oi().x/this.MG.BO,this.us.oi().y/this.MG.BO]).dV(b("uStippleTextureWidthLimiter"),this.MG.DO/this.MG.BO).dV(m("uStippleScale"),d.getPatternScale()).cV(m("uStippleTexture"),this.MG.PO,1)}return Sn.fG(this.dt._i(),this.RR,s,x,this.dt._i()?4:2,0),Sn.zL(this.rN,n.geometry,x,this.SG&&t!==1,t===1,f,1),!0}),this):this}lN(t){return this.gN===t&&{}}dispose(){return super.dispose(),this.bG=void 0,this.vG&&(this.RR.yV(this.vG),this.vG=void 0),this.xG&&(this.RR.yV(this.xG),this.xG=void 0),this.MG=void 0,this}VR(){return this}bt(){return this.Ya.max.x}vt(){return this.Ya.min.x}Mt(){return this.Ya.max.y}xt(){return this.Ya.min.y}vl(){return Ps(this.lu)}bl(){return Ps(this.lu)}}class $z extends zD{constructor(t,e,i,s,n,a){super(t,e,i,s,n),this._G=[],this.wG=!1,this.CG=!1,this.kG=!1,this.TG=!1,this.aE=new cr,this.Ya=Ne,this.AN=Ds({lineStyleSolid:()=>As(this.lu)&&this.lu,lineStyleDashed:()=>B0(this.lu)&&this.lu,lineFillSolid:()=>{const u=this.lu.getFillStyle();return ce(u)&&u},lineFillRadialGradient:()=>{const u=this.lu.getFillStyle();return li(u)&&u},lineFillLinearGradient:()=>{const u=this.lu.getFillStyle();return ui(u)&&u},lineIndividualPointFill:()=>{const u=this.lu.getFillStyle();return ks(u)&&u}}),this.rN=t,this.nN=e,this.FG=a,this.RR=t.oN(),this.SG=this.RR.eO,this.IG=t.Un.jn;const{color:o,id:l}=this.FG();this.mN=o,this.gN=l}zr(){const t=this.mu?void 0:this.FG(),e={ys:i=>this.PG(e,i),cs:i=>this.DG(e,i),Eg:(i,s)=>this.BG(e,i,s),AR:i=>this.LG(e,i),Pi:{x:0,y:0},Fi:{x:0,y:0},zo:0,EG:void 0,gN:t==null?void 0:t.id,mN:t==null?void 0:t.color};return this._G.push(e),e}Nt(){var t;return this._G.length=0,this.wG=!0,this.ji&&this.Tn&&((t=this.us.Cn)===null||t===void 0?void 0:t.entity)===this&&this.Tn(this,void 0,this.us.Cn.collectionMember),this}zG(){return this._G.length}M(t){const e=this._G[t];return[e.Pi,e.Fi]}Ap(){return this._G}bd(t){var e;const i=this._G.indexOf(t);i>=0&&(this._G.splice(i,1),this.wG=!0,this.ji&&this.Tn&&((e=this.us.Cn)===null||e===void 0?void 0:e.entity)===this&&this.Tn(this,void 0,this.us.Cn.collectionMember))}PG(t,e){if(e&&!this._G.includes(t))this._G.push(t);else if(!e){const i=this._G.indexOf(t);this._G.splice(i,1)}return this.kG=!0,t}DG(t,e){return t.zo=e,this.CG=!0,t}BG(t,e,i){return t.Pi=e,t.Fi=i,this.wG=!0,t}LG(t,e){return t.EG=e,this.TG=!0,t}Ps(){const t=this.Bo.M(),e=this.Bo.i,i=this.ra(),s=this.lu,n=this._G,a=this.CG,o=this.wG,l=this.kG,u=this.TG,d=this.AN.lineStyleSolid(i),f=this.AN.lineStyleDashed(i),y=d||f,m=this.AN.lineFillSolid(i),p=this.AN.lineIndividualPointFill(i),x=this.AN.lineFillRadialGradient(i),b=this.AN.lineFillLinearGradient(i),v=m||p||b||x,R=s.V(),E=f?"triangulated":s.getThickness()<0?"primitive":"triangulated";if(f&&this.dt instanceof Ci)return nt.console.error("LightningChart JS DashedLine is not supported on logarithmic axis"),this;this.aE.mV(this.dt);const V=o||l;if(V){const F=[];for(let L=0;L<n.length;L+=1){const z=n[L];F.push(z.Pi),F.push(z.Fi)}this.vG=this.RR.nV(Tr(F,this.dt._i()),!1,this.vG),this.Ya=Ze(F)}if(i||e){const F=m?"uniform":p?"attribute":b?["gradient",b]:x?["gradient",x]:void 0,L=y&&v&&R>0&&F;this.bG=L?E==="triangulated"?{type:"triangulated",shader:this.RR.oz(j["2D"],j.Color({dataType:F}),j.LineInstanced2D({axisWorldTranslation:Pt(this.dt),normalSource:void 0,snapToNearestPixel:this.IG,ensureMinimumSegmentLength:this.gu!==void 0}),this.SG?j.AliasedEdge:void 0,f&&j.StippleTextureInstanced,j.AttributeHighlight),mousePicking:t?{shader:this.RR.oz(j["2D"],this.mu?j.MousePicking:j.MousePickingAttribute,j.LineInstanced2D({axisWorldTranslation:Pt(this.dt),normalSource:void 0,snapToNearestPixel:this.IG,ensureMinimumSegmentLength:this.gu!==void 0}),f&&j.StippleTextureInstanced,j.AttributeHighlight)}:void 0,geometry:eu(this.RR,R,!1),thickness:R,lineStyleSolid:d,lineStyleDashed:f,fillStyleSolid:m,fillStyleIndividual:p,fillStyleLinearGradient:b,fillStyleRadialGradient:x}:{type:"primitive",shader:this.RR.oz(j["2D"],j.Color({dataType:F}),j.VertexLocation({axisWorldTranslation:Pt(this.dt),normalSource:void 0,snapToNearestPixel:this.IG}),j.AttributeHighlight),mousePicking:t?{shader:this.RR.oz(j["2D"],this.mu?j.MousePicking:j.MousePickingAttribute,j.VertexLocation({axisWorldTranslation:Pt(this.dt),normalSource:void 0,snapToNearestPixel:this.IG}),j.AttributeHighlight)}:void 0,lineStyleSolid:d,lineStyleDashed:f,fillStyleSolid:m,fillStyleIndividual:p,fillStyleLinearGradient:b,fillStyleRadialGradient:x}:void 0}if(f){if(i||V){const F=new Float32Array(4*n.length);let L=0;for(let z=0;z<n.length;z+=1){const B=n[z].Pi,A=n[z].Fi;F[L]=0,F[L+1]=0,F[L+2]=Math.abs(A.x-B.x),F[L+3]=Math.abs(A.y-B.y),L+=4}this.xG=this.RR.nV(F,!1,this.xG)}this.MG=this.RR.IO(f.getPattern())}else this.xG&&(this.RR.yV(this.xG),this.xG=void 0),this.MG=void 0;if(V||a)if(E==="triangulated"){const F=new Float32Array(n.length);let L=0;n.forEach(z=>{F[L]=z.zo,L+=1}),this.VG=this.RR.nV(F,!0,this.VG)}else{const F=new Float32Array(2*n.length);let L=0;n.forEach(z=>{for(let B=L;B<L+2;B+=2)F[B]=z.zo,F[B+1]=z.zo;L+=2}),this.VG=this.RR.nV(F,!1,this.VG)}if(p)if(u||V||i)if(E==="triangulated"){const F=new Float32Array(4*n.length);let L=0;n.forEach(z=>{const B=z.EG||p.color;F[L]=B.r,F[L+1]=B.g,F[L+2]=B.b,F[L+3]=B.a,L+=4}),this.OG=this.RR.nV(F,!1,this.OG)}else{const F=new Float32Array(8*n.length);let L=0;n.forEach(z=>{const B=z.EG||p.color;for(let A=L;A<L+8;A+=4)F[A]=B.r,F[A+1]=B.g,F[A+2]=B.b,F[A+3]=B.a;L+=8}),this.OG=this.RR.nV(F,!1,this.OG)}else this.OG&&(this.RR.yV(this.OG),this.OG=void 0);if(t&&!this.mu){if(V)if(E==="triangulated"){const F=new Float32Array(4*n.length);let L=0;n.forEach(z=>{var B,A,T,w;F[L+0]=((B=z.mN)===null||B===void 0?void 0:B.r)||0,F[L+1]=((A=z.mN)===null||A===void 0?void 0:A.g)||0,F[L+2]=((T=z.mN)===null||T===void 0?void 0:T.b)||0,F[L+3]=((w=z.mN)===null||w===void 0?void 0:w.a)||0,L+=4}),this.NG=this.RR.nV(F,!0,this.NG)}else{const F=new Float32Array(8*n.length);let L=0;n.forEach(z=>{var B,A,T,w;for(let C=L;C<L+4;C+=4)F[L+0]=((B=z.mN)===null||B===void 0?void 0:B.r)||0,F[L+1]=((A=z.mN)===null||A===void 0?void 0:A.g)||0,F[L+2]=((T=z.mN)===null||T===void 0?void 0:T.b)||0,F[L+3]=((w=z.mN)===null||w===void 0?void 0:w.a)||0;L+=8}),this.NG=this.RR.nV(F,!1,this.NG)}}else this.NG&&(this.RR.yV(this.NG),this.NG=void 0);return x?this.MN=nr(this.Eo||this.Ya,this.dt,x.getPosition(),x.getExtent(),x.getShape(),this.RR.$z()):b?this._N=ar(this.Eo||this.Ya,this.dt,b.getAngle(!0),this.RR.$z()):(this.MN=void 0,this._N=void 0),this.fu(s),this.CG=!1,this.kG=!1,this.wG=!1,this.TG=!1,this.Bo.i=!1,this}zL(t){var e;const i=this.vG,s=this.VG,n=this.NG;if(!i||!s)return this;const a=this.bG;if(!a)return this;const{type:o,fillStyleSolid:l,fillStyleIndividual:u,fillStyleLinearGradient:d,fillStyleRadialGradient:f,lineStyleDashed:y}=a,m=t===1?(e=a.mousePicking)===null||e===void 0?void 0:e.shader:a.shader;return m?(this.RR.jR(m).aV(m,(p,x,b,v)=>{if(this.dt instanceof xe||this.dt instanceof Js?this.RR.uV(p("uScale"),this.aE.fV()).uV(p("uDisp"),this.aE.AV()).uV(v("uScaleStart_highpart"),this.aE.VO()).uV(v("uScaleStart_lowpart"),this.aE.OO()):this.dt instanceof Ci&&this.RR.uV(v("uScaleStart"),this.aE.MixedScaleXY.uScaleStart).uV(v("uScaleStartLog"),this.aE.MixedScaleXY.uScaleStartLog).uV(v("uScaleInterval"),this.aE.MixedScaleXY.uScaleInterval).uV(v("uScaleIntervalLog"),this.aE.MixedScaleXY.uScaleIntervalLog).uV(p("uViewportStart"),this.aE.MixedScaleXY.uViewportStart).uV(p("uViewportSize"),this.aE.MixedScaleXY.uViewportSize),this.IG&&this.RR.uV(v("uViewportSizePx"),[this.us.oi().x*this.RR.$z(),this.us.oi().y*this.RR.$z()]),this.gu!==void 0&&this.RR.uV(p("uMinSegmentPixelVector"),[this.gu.x,this.gu.y]),this.RR.AR(p("uHighlightColorOffset"),t===1||t===2?Je:this.Go).dV(p("uRenderEffectMask"),t===2?1:0),t===1)if(this.mu)this.RR.AR(p("uColor"),this.mN);else{if(!n)return!1;o==="triangulated"?this.RR.lV(n,1,{location:x("aColor"),size:4}):this.RR.HV(x("aColor"),n)}else if(l)this.RR.AR(p("uColor"),l.getColor());else if(u){if(!this.OG)return!1;this.RR.lV(this.OG,o==="triangulated"?1:void 0,{location:x("aColor"),size:4})}else if(f){if(!this.MN)return!1;this.RR.mO(b,this.MN,f)}else if(d){if(!this._N)return!1;this.RR.yO(b,this._N,d)}if(y){if(!this.xG||!this.MG)return!1;Sn.mG(this.RR,b,this.xG,x("aLengthSoFarA"),x("aLengthSoFarB"),2,0),this.RR.uV(p("uStippleCount"),[this.us.oi().x/this.MG.BO,this.us.oi().y/this.MG.BO]).dV(v("uStippleTextureWidthLimiter"),this.MG.DO/this.MG.BO).dV(p("uStippleScale"),y.getPatternScale()).cV(p("uStippleTexture"),this.MG.PO,0)}if(o==="triangulated"){const{geometry:R,thickness:E}=a;Sn.gG(this.dt._i(),this.RR,i,b,this.dt._i()?4:2,0),this.RR.lV(s,1,{location:x("aIsHighlighted"),size:1}),Sn.zL(this.rN,R,b,this.SG&&t!==1,t===1,E,this._G.length)}else pl.gG(this.dt._i(),this.RR,i,b,this.dt._i()?4:2,0),this.RR.$V(x("aIsHighlighted"),s),pl.pG(this.rN,this._G.length);return!0}),this):this}lN(t){if(t===this.gN)return{};const e=this._G.find(i=>i.gN===t);return!!e&&{collectionMember:e}}dispose(){return super.dispose(),this.bG=void 0,this.vG&&(this.RR.yV(this.vG),this.vG=void 0),this.xG&&(this.RR.yV(this.xG),this.xG=void 0),this.VG&&(this.RR.yV(this.VG),this.VG=void 0),this.NG&&(this.RR.yV(this.NG),this.NG=void 0),this.OG&&(this.RR.yV(this.OG),this.OG=void 0),this.MG=void 0,this}VR(){return this}cs(t){super.cs(t);for(const e of this._G)e.cs(t);return this}bt(){return this.Ya.max.x}vt(){return this.Ya.min.x}Mt(){return this.Ya.max.y}xt(){return this.Ya.min.y}vl(){return Ps(this.lu)}bl(){return Ps(this.lu)}}class J0{constructor(t,e){this.GG=!1,this.WG=!1,this.UG=!1,this.dt=t,this.YG=e,this.YG.Uo("DataPattern",i=>{i.pattern!=="ProgressiveX"&&i.pattern!=="RegressiveX"||(this.GG="x"),i.pattern!=="ProgressiveY"&&i.pattern!=="RegressiveY"||(this.GG="y"),i.pattern!=="RegressiveX"&&i.pattern!=="RegressiveY"||(this.WG=!0),i.regularProgressiveStep===!0&&(this.UG=!0)})}calculateUserDataPointsProgressiveRange(t){if(t.length===0)throw new Error("calculateUserDataPointsProgressiveRange called with 0 data points");return{start:this.GG==="x"?t[0].x:t[0].y,end:this.GG==="x"?t[t.length-1].x:t[t.length-1].y}}calculateUserDataPointsBoundaries(t){return this.GG?this.GG==="x"?function(e){const i=e.length;if(i>0){const s=Math.max(e[i-1].x,e[0].x),n=Math.min(e[i-1].x,e[0].x);let a=e[0].y,o=e[0].y;for(let l=0;l<i;l+=1){const u=e[l];u.y>a&&(a=u.y),u.y<o&&(o=u.y)}return Kt(Y(n,o),Y(s,a))}return Ne}(t):function(e){const i=e.length;if(i>0){const s=Math.max(e[i-1].y,e[0].y),n=Math.min(e[i-1].y,e[0].y);let a=e[0].x,o=e[0].x;for(let l=0;l<i;l+=1){const u=e[l];u.x>a&&(a=u.x),u.x<o&&(o=u.x)}return Kt(Y(o,n),Y(a,s))}return Ne}(t):Ze(t)}calculateAvgStepBetweenDataPoints(t,e,i){return Math.abs(t-e)/(i-1)}}const qz=Math.min(1,1.5);class jz extends J0{constructor(t,e,i){super(t,e),this.HG=!1,this.$G={enabled:!1,totalDataPointsAtTime:0},this.XG=[],this.Ss=i,this.jG=t instanceof xe?{type:"linear",scale:t}:t instanceof Ci?{type:"mixed",scale:t}:{type:"unknown"},this.YG.Uo("DataPattern",s=>{s.allowDataGrouping===!1&&(this.HG=!0)})}ZG(t,e=!1){if(this.HG||!this.GG||this.jG.type!=="linear")return!1;e===!1&&this.QG&&(clearTimeout(this.QG),this.QG=void 0);const i=this.GG==="x"?this.jG.scale.x.ig:this.jG.scale.y.ig;if(!i)throw new Error("CP helper has no information about Axis state.");const s=t.length;if(s<2)return!1;const n=t[0],a=t[s-1],o=this.calculateAvgStepBetweenDataPoints(this.GG==="x"?n.x:n.y,this.GG==="x"?a.x:a.y,s),l=this.jG.scale,u=Math.abs(this.GG==="x"?l.Wi().x:l.Wi().y),d=u/o,f=Math.floor(d*qz),y=f*o,m=nt.performance.now(),p=!(m-i.ah<500)&&(i.ih?m-i.oh<1e3:m-i.sh<2e3||i.hh),x=s>2*this.$G.totalDataPointsAtTime;if(p&&!x)return this.QG=setTimeout(()=>this.JG(t),1e3),!1;const b=f>=10,v=this.$G.enabled?this.$G.columnWidthAxis/u<1.5:void 0,R=this.$G.enabled&&f>this.$G.dataPointsPerColumn?f/this.$G.dataPointsPerColumn>=2:void 0;let E;this.$G.enabled===!0?v?R&&(E={enabled:!0,columnWidthAxis:y,dataPointsPerColumn:f,totalDataPointsAtTime:s}):E=b?{enabled:!0,columnWidthAxis:y,dataPointsPerColumn:f,totalDataPointsAtTime:s}:{enabled:!1,totalDataPointsAtTime:s}:b&&(E={enabled:!0,columnWidthAxis:y,dataPointsPerColumn:f,totalDataPointsAtTime:s});const V=e===!1;return E?(V&&(this.$G=E),!0):(V&&(this.$G={...this.$G,totalDataPointsAtTime:s}),!1)}Qm(){this.KG=void 0,this.XG.length=0,this.QG&&(clearTimeout(this.QG),this.QG=void 0)}qG(t){if(t.length===0||this.HG||!this.GG||this.jG.type!=="linear"||!this.$G.enabled)return t;let e;e=this.XG.length>0?cs(this.XG,t,{canReturnB:!0}):t;const i=e.length,s=[];let n,a,o=this.KG===void 0,l=-1,u=-1,d=0,f=0;if(this.GG!=="x"||this.WG)if(this.GG==="x"&&this.WG){const m=this.$G.columnWidthAxis;let p=this.KG?this.KG.x:e[0].x,x=p-m;for(let b=0;b<i;b+=1){const v=e[b];v.x>=x?((!n||v.y>n.y)&&(n=v,l=b),(!a||v.y<a.y)&&(a=v,u=b),f=b):(n&&a&&(o&&s.push(e[0]),l<u?s.push(n,a):s.push(a,n)),o=!1,p=v.x,x=p-m,n=v,l=b,a=v,u=b,d=b,f=b)}}else if(this.GG!=="y"||this.WG){if(this.GG==="y"&&this.WG){const m=this.$G.columnWidthAxis;let p=this.KG?this.KG.y:e[0].y,x=p-m;for(let b=0;b<i;b+=1){const v=e[b];v.y>=x?((!n||v.x>n.x)&&(n=v,l=b),(!a||v.x<a.x)&&(a=v,u=b),f=b):(a&&n&&(o&&s.push(e[0]),l<u?s.push(n,a):s.push(a,n)),o=!1,p=v.y,x=p-m,n=v,l=b,a=v,u=b,d=b,f=b)}}}else{const m=this.$G.columnWidthAxis;let p=this.KG?this.KG.y:e[0].y,x=p+m;for(let b=0;b<i;b+=1){const v=e[b];v.y<=x?((!n||v.x>n.x)&&(n=v,l=b),(!a||v.x<a.x)&&(a=v,u=b),f=b):(a&&n&&(o&&s.push(e[0]),l<u?s.push(n,a):s.push(a,n)),o=!1,p=v.y,x=p+m,n=v,l=b,a=v,u=b,d=b,f=b)}}else{const m=this.$G.columnWidthAxis;let p=this.KG?this.KG.x:e[0].x,x=p+m;for(let b=0;b<i;b+=1){const v=e[b];v.x<=x?((!n||v.y>n.y)&&(n=v,l=b),(!a||v.y<a.y)&&(a=v,u=b),f=b):(n&&a&&(o&&s.push(e[0]),l<u?s.push(n,a):s.push(a,n)),o=!1,p=v.x,x=p+m,n=v,l=b,a=v,u=b,d=b,f=b)}}if(n||a){const m=e.slice(d,f+1);this.XG=m}else this.XG.length=0;const y=s.length;return y>0&&(this.KG=s[y-1]),s}tW(t){if(this.GG&&this.jG.type==="linear"){const e=this.GG==="x"?this.jG.scale.x.ig:this.jG.scale.y.ig;if(!e)throw new Error("CP helper has no information about Axis state.");if(e.Je===Zr.progressive||e.Je===Zr.regressive){const i=Math.abs(this.GG==="x"?this.jG.scale.x.getInnerInterval():this.jG.scale.y.getInnerInterval());if(this.$G.enabled)return 2*i/this.$G.columnWidthAxis;const s=t.length,n=t[0],a=t[s-1];return i/this.calculateAvgStepBetweenDataPoints(this.GG==="x"?n.x:n.y,this.GG==="x"?a.x:a.y,s)}}}iW(t,e,i){if(!this.GG)return e;const s=i.length;let n=Ec(i,t.min,this.GG,this.WG,0,s-1);n===void 0&&(n=this.WG?s-1:0);let a=Ec(i,t.max,this.GG,this.WG,0,s-1);return a===void 0&&(a=this.WG?0:s-1),1+Math.abs(a-n)}sW(){this.QG&&(clearTimeout(this.QG),this.QG=void 0)}JG(t){this.ZG(t,!0)&&this.Ss()}}class Jz extends J0{renderVisibleOnly(t,e){const i=this.dt.x.getInnerStart(),s=this.dt.x.getInnerEnd(),n=Math.min(i,s),a=Math.max(i,s),o=this.dt.y.getInnerStart(),l=this.dt.y.getInnerEnd(),u=Math.min(o,l),d=Math.max(o,l);t.forEach((f,y)=>{f.existingCoordinatesCount<=1||f.boundaries.max.x<n||f.boundaries.min.x>a||f.boundaries.max.y<u||f.boundaries.min.y>d||e(f)})}}class FS{constructor(t,e,i){this.eW=e,this.hW=i,this.rW=t,this.nW=[]}oW(t,e,i,s){const n=t.length;if(n===0)return;let a=t,o=n,l=this.rW[this.rW.length-1];do{const u=this.rW.length;let d;l||(l=this.aW(e,o)),l&&l.allocatedCoordinatesCount-l.existingCoordinatesCount==0&&(l=void 0);let f=0;if(this.hW&&u>0&&(l===void 0||l.existingCoordinatesCount===0)){const y=this.rW[u-1].lastDataPoint;y?(a.splice(0,0,y),f=1,o+=1):console.error("SegmentationHelper _connectSegments = true, but segment has no lastDataPoint information!")}if(l)d=Math.min(o,l.allocatedCoordinatesCount-l.existingCoordinatesCount),s(l,a.slice(0,d),d,f);else{const y=Math.ceil(e)+f;d=Math.min(y,o);const m={...i(y,a.slice(0,d),d,f),isDropped:!1};this.rW.push(m)}d>0&&(o>d?(a=a.slice(d),o=a.length):(a=[],o=0))}while(o>0);this.lW()}uW(t){const e=t,i=this.rW.indexOf(e);i>=0&&this.rW.splice(i,1),e.droppedTimestamp=nt.performance.now(),this.nW.push(e)}cW(){this.rW.slice().forEach(t=>this.uW(t))}dW(){this.rW.forEach(t=>this.eW(t)),this.nW.forEach(t=>this.eW(t)),this.rW.length=0,this.nW.length=0}aW(t,e){const i=2*t/3,s=4*t/3,n=this.nW.findIndex(a=>a.allocatedCoordinatesCount>=i&&a.allocatedCoordinatesCount<=s);if(n>=0){const a=this.nW[n];return this.nW.splice(n,1),this.rW.push(a),a}}lW(){if(this.nW.length>5){const t=nt.performance.now();for(let e=0;e<this.nW.length-5;e+=1){const i=this.nW[e];(i.droppedTimestamp===void 0||t-i.droppedTimestamp>=1e4)&&(this.eW(i),this.nW.splice(e,1),e-=1)}}}}class nT extends J0{fW(t,e){if(!e||typeof e!="object")return 0;const i=this.dt.x.getInnerStart(),s=this.dt.x.getInnerEnd(),n=Math.min(i,s),a=Math.max(i,s),o=this.dt.y.getInnerStart(),l=this.dt.y.getInnerEnd(),u=Math.min(o,l),d=Math.max(o,l);if("maxDataPointCount"in e)return this.AW(t,e.maxDataPointCount,n,a,u,d);if("minDataPointCount"in e)return this.gW(t,e.minDataPointCount,n,a,u,d);if("progressiveDataCleaningThreshold"in e)return this.mW(t,e.progressiveDataCleaningThreshold,n,a,u,d);throw new Error(`Unimplemented data cleaning configuration: ${JSON.stringify(e)}`)}AW(t,e,i,s,n,a){if(e===void 0||e<=0)return 0;const o=t.reduce((d,f)=>d+f.existingDataPointsCount,0);if(o<=e)return 0;let l=0,u=o;for(let d=0;d<t.length;d+=1){const f=t[d];u>e&&(l+=1,u-=f.existingDataPointsCount)}return l}mW(t,e,i,s,n,a){if(e===void 0||!this.GG)return 0;let o=0;for(let l=0;l<t.length;l+=1){const u=t[l],d=this.WG?this.GG==="x"?u.boundaries.min.x>s:u.boundaries.min.y>a:this.GG==="x"?u.boundaries.max.x<i:u.boundaries.max.y<n;if(!((this.WG?this.GG==="x"?u.boundaries.min.x>e:u.boundaries.min.y>e:this.GG==="x"?u.boundaries.max.x<e:u.boundaries.max.y<e)&&d&&u.existingCoordinatesCount>2))break;o+=1}return o}gW(t,e,i,s,n,a){if(e===void 0||e===0)return 0;let o=0,l=0;for(let u=t.length-1;u>=0;u-=1){const d=t[u];if(l>e)if(this.GG){if(this.WG?this.GG==="x"?d.boundaries.min.x>s:d.boundaries.min.y>a:this.GG==="x"?d.boundaries.max.x<i:d.boundaries.max.y<n){o=1+u;break}}else d.boundaries.max.x<i||d.boundaries.min.x>s||d.boundaries.max.y<n||d.boundaries.min.y>a?o+=1:o=0;l+=d.existingDataPointsCount}return o}yW(t,e){const i=t.reduce((s,n)=>qs(s,n.boundaries),Ne);if(e&&"progressiveDataCleaningThreshold"in e&&e.progressiveDataCleaningThreshold){const s=e.progressiveDataCleaningThreshold;this.GG!=="x"||this.WG?this.GG==="x"&&this.WG?i.max.x=Math.min(i.max.x,s):this.GG!=="y"||this.WG?this.GG==="y"&&this.WG&&(i.max.y=Math.min(i.max.y,s)):i.min.y=Math.max(i.min.y,s):i.min.x=Math.max(i.min.x,s)}return i}}class Zz extends np{constructor(t,e,i,s,n,a,o,l){super(t,e,i,s,n),this.aE=new cr,this.QM=[],this.pW=new Jz(this.dt,this),this.SW=new jz(this.dt,this,()=>this.us.Ss()),this.vW=new FS(this.QM,b=>{b.coordsBuffer&&this.RR.yV(b.coordsBuffer),b.xG&&this.RR.yV(b.xG)},!0),this.bW=new nT(this.dt,this),this.xW=0,this.MW=0,this._W=!1,this.AN=Ds({lineStyleSolid:()=>As(this.lu)&&this.lu,lineStyleDashed:()=>B0(this.lu)&&this.lu,strokeFillSolid:()=>{const b=this.lu.getFillStyle();return ce(b)&&b},strokeFillLinearGradient:()=>{const b=this.lu.getFillStyle();return ui(b)&&b},strokeFillRadialGradient:()=>{const b=this.lu.getFillStyle();return li(b)&&b},strokeFillPaletted:()=>{const b=this.lu.getFillStyle();return wi(b)&&b}}),this.nN=e,this.gN=a,this.mN=o,this.Un=l,this.bG={type:"none"},this.RR=t.oN(),this.rN=t,this.SG=this.RR.eO;const u=this.dt._i(),d=(l==null?void 0:l.individualLookupValuesEnabled)===!0;let f,y,m,p=0;u||(f=p,p+=2),u&&(y=p,p+=4),d&&(m=p,p+=1);const x=((b,v)=>v?(R,E)=>((V,F)=>{if(!F){const A=V.length,T=new Float32Array(3*A);for(let w=0,C=0;w<A;w+=1){const k=V[w];T[C+0]=k.x,T[C+1]=k.y,T[C+2]=k.value!==void 0?k.value:0,C+=3}return T}const L=V.length,z=new Float32Array(5*L);let B=0;for(let A=0;A<L;A+=1){const T=V[A],w=Math.fround(T.x),C=Math.fround(T.y);z[B+0]=w,z[B+1]=C,z[B+2]=T.x-w,z[B+3]=T.y-C,z[B+4]=T.value!==void 0?T.value:0,B+=5}return z})(R,b):(R,E)=>Tr(R,b))(u,d);this.wW={individualLookupValuesEnabled:d,attributesPerVertex:p,attributeOffsetCoordinateLowPrecision:f,attributeOffsetCoordinateHighPrecision:y,attributeOffsetLookUpValue:m,prepareRenderData:(b,v)=>x(b,this.lu.getFillStyle())}}kW(t,e,i){const s=new Float32Array(2*e);let n=0,a=i||t[0];for(let o=0;o<e;o+=1){const l=t[o];this.xW+=Math.abs(a.x-l.x),this.MW+=Math.abs(a.y-l.y),s[n]=this.xW,s[n+1]=this.MW,n+=2,a=l}return s}Ps(){const t=this.Qa,e=this.lu,i=this.ra(),s=this.$a,n=s.length,a=n>0,o=this.Bo.M(),l=this.Bo.i,u=this.AN.lineStyleSolid(i),d=this.AN.lineStyleDashed(i),f=u||d,y=f&&f.getThickness(),m=this.AN.strokeFillSolid(i),p=this.AN.strokeFillLinearGradient(i),x=this.AN.strokeFillRadialGradient(i),b=this.AN.strokeFillPaletted(i),v=m||p||x||b,R=this.wW.individualLookupValuesEnabled;if(d&&this.dt instanceof Ci)return nt.console.error("LightningChart JS DashedLine is not supported on logarithmic axis"),this;a&&(this.yu=cs(this.yu,s,{canReturnB:!0}),this.Ha+=n);let E=this.pu.i;const V=this.bW.fW(this.QM,this.pu.M());if(V>0){let A=0;for(let T=0;T<V;T+=1){const w=this.QM[0];A+=w.existingDataPointsCount,w.existingDataPointsCount=0,w.existingCoordinatesCount=0,w.jointPointsCount=0,w.boundaries=Ne,w.lastDataPoint=void 0,this.vW.uW(w)}this.yu=this.yu.slice(A),this.Ha=this.yu.length,E=!0}let F=s,L=!1;(this.SW.ZG(this.yu)||t)&&(L=!0),d&&!this._W?(L=!0,this._W=!0,this.vW.dW()):!d&&this._W&&(this.QM.forEach(A=>{A.xG&&(this.RR.yV(A.xG),A.xG=void 0)}),this._W=!1),L&&(this.SW.Qm(),this.QM.forEach(A=>{A.existingDataPointsCount=0,A.existingCoordinatesCount=0,A.jointPointsCount=0,A.boundaries=Ne,A.lastDataPoint=void 0}),this.vW.cW(),F=this.yu,this.xW=0,this.MW=0);const z=this.SW.qG(F),B=z.length;if(B>0){let A=this.SW.tW(this.yu)||(this.Uo("ApplicationType",T=>T.type==="InternalUI")?this.Ha:1e5);B/A>10&&(A=B/10),this.vW.oW(z,A,(T,w,C,k)=>{const _=this.pW.calculateUserDataPointsBoundaries(w),X=this.SW.iW(_,C,this.yu)-k;return this.TW=w[C-1],{allocatedCoordinatesCount:T,existingDataPointsCount:X,existingCoordinatesCount:C,jointPointsCount:k,boundaries:_,coordsBuffer:this.RR.EV(T*this.wW.attributesPerVertex,this.wW.prepareRenderData(w,C)),lastDataPoint:w[C-1],xG:this._W?this.RR.EV(2*T,this.kW(w,C,this.TW)):void 0}},(T,w,C,k)=>{const _=qs(T.boundaries,this.pW.calculateUserDataPointsBoundaries(w)),X=this.SW.iW(_,T.existingCoordinatesCount+C,this.yu)-(T.jointPointsCount+k);this.RR.zV(T.coordsBuffer,T.existingCoordinatesCount*this.wW.attributesPerVertex,this.wW.prepareRenderData(w,C)),this._W&&T.xG&&this.RR.zV(T.xG,2*T.existingCoordinatesCount,this.kW(w,C,this.TW)),this.TW=w[C-1],T.jointPointsCount+=k,T.lastDataPoint=w[C-1],T.existingDataPointsCount=X,T.existingCoordinatesCount+=C,T.boundaries=_})}if(E&&(this.Ya=this.bW.yW(this.QM,this.pu.M())),this.aE.mV(this.dt),x?this.DN=nr(this.Eo||this.Ya,this.dt,x.getPosition(),x.getExtent(),x.getShape(),this.RR.$z()):p?this.LN=ar(this.Eo||this.Ya,this.dt,p.getAngle(!0),this.RR.$z()):(this.DN=void 0,this.LN=void 0),i||l){if(b&&b.getLookUpProperty()==="value"&&!R){const A='LCJS misusage error: Series individualLookupValuesEnabled flag must be set if using PalettedFill with lookUpProperty="value" !';throw nt.alert(A),new Error(A)}if(v&&f&&y!==!1){const A=y===-1?"primitive":"triangulated",T=p?["gradient",p]:x?["gradient",x]:b?["lookup",b.getLookUpProperty(),b.lut]:"uniform";this.bG=A==="primitive"?{type:A,shader:this.RR.oz(j["2D"],j.Color({dataType:T}),j.VertexLocation({axisWorldTranslation:Pt(this.dt),normalSource:void 0}),d&&j.StippleTexture),mousePickingShader:o?this.RR.oz(j["2D"],j.MousePicking,j.VertexLocation({axisWorldTranslation:Pt(this.dt),normalSource:void 0}),d&&j.StippleTexture):void 0,lineStyleSolid:u,lineStyleDashed:d,fillStyleSolid:m,fillStyleLinearGradient:p,fillStyleRadialGradient:x,fillStylePaletted:b}:A==="triangulated"?{type:A,shader:this.RR.oz(j["2D"],j.Color({dataType:T}),j.LineInstanced2D({axisWorldTranslation:Pt(this.dt),normalSource:void 0}),this.SG?j.AliasedEdge:void 0,d&&j.StippleTextureInstanced),mousePickingShader:o?this.RR.oz(j["2D"],j.MousePicking,j.LineInstanced2D({axisWorldTranslation:Pt(this.dt),normalSource:void 0}),d&&j.StippleTextureInstanced):void 0,geometry:eu(this.RR,y),thickness:y,lineStyleSolid:u,lineStyleDashed:d,fillStyleSolid:m,fillStyleLinearGradient:p,fillStyleRadialGradient:x,fillStylePaletted:b}:{type:"none"}}else this.bG={type:"none"}}return this.MG=d?this.RR.IO(d.getPattern()):void 0,this.fu(e),this.Qa=!1,this.$a=[],this.Bo.i=!1,this.pu.i=!1,this}zL(t){const e=this.RR.gl,i=this.bG;if(!i||i.type==="none")return this;const s=t===1?i.mousePickingShader:i.shader;if(!s)return this;const{lineStyleDashed:n,fillStyleSolid:a,fillStyleLinearGradient:o,fillStyleRadialGradient:l,fillStylePaletted:u}=i;return this.RR.jR(s).aV(s,(d,f,y,m)=>{let p=!1;if(this.RR.dV(d("uIsHighlighted"),t===1||t===2?0:this.zo).AR(d("uHighlightColorOffset"),t===1||t===2?Je:this.Go).dV(d("uRenderEffectMask"),t===2?1:0),this.dt instanceof xe||this.dt instanceof Js?this.RR.uV(d("uScale"),this.aE.fV()).uV(d("uDisp"),this.aE.AV()).uV(m("uScaleStart_highpart"),this.aE.VO()).uV(m("uScaleStart_lowpart"),this.aE.OO()):this.dt instanceof Ci&&this.RR.uV(m("uScaleStart"),this.aE.MixedScaleXY.uScaleStart).uV(m("uScaleStartLog"),this.aE.MixedScaleXY.uScaleStartLog).uV(m("uScaleInterval"),this.aE.MixedScaleXY.uScaleInterval).uV(m("uScaleIntervalLog"),this.aE.MixedScaleXY.uScaleIntervalLog).uV(d("uViewportStart"),this.aE.MixedScaleXY.uViewportStart).uV(d("uViewportSize"),this.aE.MixedScaleXY.uViewportSize),t===1)this.RR.AR(d("uColor"),this.mN);else if(a)this.RR.AR(d("uColor"),a.getColor());else if(l){if(!this.DN)return!1;this.RR.mO(y,this.DN,l)}else if(o){if(!this.LN)return!1;this.RR.yO(y,this.LN,o)}else if(u){const x=ir(u,this,void 0);if(!x&&u.lut.percentageValues)return!1;this.RR.LO(y,u.lut,x)}return this.pW.renderVisibleOnly(this.QM,x=>{const{coordsBuffer:b}=x;if(!b)return;e.bindBuffer(e.ARRAY_BUFFER,b);const v=i.type==="triangulated"?Sn.fG:pl.fG;if(this.dt._i()||this.wW.attributeOffsetCoordinateLowPrecision===void 0?this.dt._i()&&this.wW.attributeOffsetCoordinateHighPrecision!==void 0&&v(!0,this.RR,b,y,this.wW.attributesPerVertex,this.wW.attributeOffsetCoordinateHighPrecision):v(!1,this.RR,b,y,this.wW.attributesPerVertex,this.wW.attributeOffsetCoordinateLowPrecision),n){if(!x.xG||!this.MG)return;i.type==="triangulated"?Sn.AG(this.RR,y,x.xG,f("aLengthSoFarA"),f("aLengthSoFarB"),2,0):pl.AG(this.RR,y,x.xG,f("aLengthSoFar"),2,0),this.RR.uV(d("uStippleCount"),[this.us.oi().x/this.MG.BO,this.us.oi().y/this.MG.BO]).dV(m("uStippleTextureWidthLimiter"),this.MG.DO/this.MG.BO).dV(d("uStippleScale"),n.getPatternScale()).cV(d("uStippleTexture"),this.MG.PO,1)}if(u&&u.lookUpProperty==="value"&&this.wW.attributeOffsetLookUpValue!==void 0&&t!==1)if(i.type==="triangulated"){const R=f("aLookupValueA");e.vertexAttribPointer(R,1,e.FLOAT,!1,this.wW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.wW.attributeOffsetLookUpValue*Float32Array.BYTES_PER_ELEMENT),this.RR.UV(R,1),e.enableVertexAttribArray(R);const E=f("aLookupValueB");e.vertexAttribPointer(E,1,e.FLOAT,!1,this.wW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,(this.wW.attributeOffsetLookUpValue+this.wW.attributesPerVertex)*Float32Array.BYTES_PER_ELEMENT),this.RR.UV(E,1),e.enableVertexAttribArray(E)}else{const R=f("aLookupValue");e.vertexAttribPointer(R,1,e.FLOAT,!1,this.wW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.wW.attributeOffsetLookUpValue*Float32Array.BYTES_PER_ELEMENT),e.enableVertexAttribArray(R)}if(i.type==="triangulated"){const{thickness:R}=i;Sn.zL(this.rN,i.geometry,y,this.SG&&t!==1,t===1,R,x.existingCoordinatesCount-1)}else pl.yG(this.rN,x.existingCoordinatesCount);p=!0}),e.bindBuffer(e.ARRAY_BUFFER,null),p}),this}lN(t){return this.gN===t&&{}}nl(t,e){return Array.isArray(t)||(t=[t]),this.$a=cs(this.$a,t,{canReturnB:!0}),this.Ya=qs(this.Ya,e||e||this.pW.calculateUserDataPointsBoundaries(t)),this}Nt(){return super.Nt(),this.xW=0,this.MW=0,this.TW=void 0,this}dispose(){return super.dispose(),this.vW.dW(),this.SW.sW(),this.bG={type:"none"},this.MG=void 0,this}VR(){return this}Ux(t){this.al()>0&&this.Ps();const e=this.tl(),i=uS(e,t,this.Za,this.Fl,this.Il,this.dt,this.engine.dt,this.Ya,this.pW.GG,this.pW.WG);return i!==void 0?e[i]:void 0}sw(t){this.al()>0&&this.Ps();const e=this.tl(),i=e.length;if(i===0)return;const s=this.Fl?1:0,n=i-(this.Il?2:1);if(this.Za===qi.Nearest){let a,o,l=Mt;for(let u=0;u<i;u+=1){const d=gt(e[u],this.dt,this.us.dt);if(o!==void 0){const f=w3(o,d,t),y=(f.x-t.x)**2+(f.y-t.y)**2;y<l&&(l=y,a=f)}o=d}return a!==void 0?gt(a,this.us.dt,this.dt):void 0}if(this.pW.GG==="x"&&this.Za===qi.NearestX||this.pW.GG==="y"&&this.Za===qi.NearestY){const a=JR(e,gt(t,this.us.dt,this.dt),this.pW.GG,this.pW.WG,s,n);return a?za(e[a.a],e[a.b],a.lerpAmount):void 0}return this.Ux(t)}bt(){return this.Ya.max.x}vt(){return this.Ya.min.x}Mt(){return this.Ya.max.y}xt(){return this.Ya.min.y}vl(){return Ps(this.lu)}bl(){return Ps(this.lu)}}class ih extends tu{constructor(t,e,i,s){super(t),this.dG=i,this.FW=e,this.IW=Tr(e,!1),this.PW=e.length,this.wR=t.nV(this.IW);const n=Ze(this.FW);this.X=Y(n.max.x-n.min.x,n.max.y-n.min.y),this.DW=s}BW(t){return t>1}Ky(t,e,i,s,n){return typeof s=="object"?e?this.RR.$V(t.attribute("aOffsetScale"),e,1).uV(t.uniform("uSizePixels"),[s.width,s.height]):this.RR.dV(t.uniform("uOffsetScale"),s.scale).uV(t.uniform("uSizePixels"),[s.width,s.height]):n?e?this.RR.$V(t.attribute("aOffsetPixels"),e,1):this.RR.dV(t.uniform("uOffsetPixels"),s):this.RR.dV(t.uniform("uPointSize"),s),n?this.RR.lV(this.wR,0,{location:t.attribute("aInstanceGeo"),size:2}).QV(this.dG,0,this.PW,i):this.RR.Ky(this.RR.gl.POINTS,i),this}kz(){this.RR.yV(this.wR)}}const _2=(r,t=0)=>{const e=[Y(-.5,-.5),Y(.5,-.5),Y(.5,.5),Y(-.5,.5)];return new ih(r,e,r.gl.TRIANGLE_FAN,t)},N2=(r,t=0)=>{const i=[Y(-.5,-.05),Y(.5,-.05),Y(.5,.05),Y(.5,.05),Y(-.5,.05),Y(-.5,-.05),Y(-.05,-.5),Y(.05,-.5),Y(.05,.5),Y(.05,.5),Y(-.05,.5),Y(-.05,-.5)];return new ih(r,i,r.gl.TRIANGLES,t)},VS=(r,t,e)=>{if(ch(r))return VS(qe.Square,t,e);let i=t._V.vz.get(r);if(r===qe.Circle){const s=e<=3?4:e<=5?8:e<=10?16:24;return i=t._V.bz.get(s)||((n,a,o=0)=>{const l=function(u=25){return d0(Y(0,0),0,360,.5,.5,u)[0]}(a);return new ih(n,l,n.gl.TRIANGLE_FAN,o)})(t,s),t._V.bz.set(s,i),i}if(!i){switch(r){case qe.Triangle:i=((s,n=0)=>{const a=function(){const o=[];return o.push(Y(-.5773502691892515,.3333333333333333)),o.push(Y(0,-.6666666666666666)),o.push(Y(1.154700538378503/2,.3333333333333333)),o}();return new ih(s,a,s.gl.TRIANGLES,n)})(t);break;case qe.Square:i=_2(t);break;case qe.Plus:i=N2(t);break;case qe.Cross:i=N2(t,45);break;case qe.Diamond:i=_2(t,45);break;case qe.Arrow:i=((s,n=0)=>{const o=[Y(-.05,-.5),Y(.05,-.5),Y(.05,.45),Y(.05,.45),Y(-.05,.45),Y(-.05,-.5),Y(-.5,0),Y(-.4,0),Y(0,.4),Y(0,.4),Y(0,.5),Y(-.5,0),Y(.5,0),Y(.4,0),Y(0,.4),Y(0,.4),Y(0,.5),Y(.5,0)];return new ih(s,o,s.gl.TRIANGLES,n)})(t);break;case qe.Star:i=((s,n=0)=>new ih(s,[{x:0,y:0},{x:0,y:.5},{x:.1,y:.1},{x:.5,y:.1},{x:.2,y:-.1},{x:.3,y:-.5},{x:0,y:-.25},{x:-.3,y:-.5},{x:-.2,y:-.1},{x:-.5,y:.1},{x:-.1,y:.1},{x:0,y:.5}],s.gl.TRIANGLE_FAN,n))(t);break;case qe.Minus:i=((s,n=0)=>{const o=[Y(-.5,-.05),Y(.5,-.05),Y(.5,.05),Y(.5,.05),Y(-.5,.05),Y(-.5,-.05)];return new ih(s,o,s.gl.TRIANGLES,n)})(t);break;default:return Xl(0,"LightningChart JS unidentified point shape")}t._V.vz.set(r,i)}return i};class Qz extends cS{constructor(t,e,i,s,n,a,o){super(t,e,i,s,n),this.aE=new cr,this.dN=Kt(Kn(Dt,Dt),Kn(Mt,Mt)),this.AN=Ds({pointStyleSolid:()=>ce(this.be)&&this.be,pointStyleRadialGradient:()=>li(this.be)&&this.be,pointStyleLinearGradient:()=>ui(this.be)&&this.be,pointStylePaletted:()=>wi(this.be)&&this.be,pointStyleIndividual:()=>ks(this.be)&&this.be}),this.rN=t,this.nN=e,this.gN=a,this.mN=o,this.RR=t.oN()}Ps(){var t;const e=this.Bo.M(),i=this.Bo.i,s=this.$a,n=s.length,a=n>0,o=this.Na.M(),l=this.be,u=this.size.M(),d=this.Na.i||this.Aa.i,f=this.dt.Ni(),y=this.size.i||this.Na.i,m=this.Qa||s&&s.length>0,p=f||y,x=this.ta(),b=this.AN.pointStyleSolid(x),v=this.AN.pointStyleRadialGradient(x),R=this.AN.pointStyleLinearGradient(x),E=this.AN.pointStylePaletted(x),V=this.AN.pointStyleIndividual(x),F=b||v||R||E||V;if(a&&(this.Oa=cs(this.Oa,s,{canReturnB:!0}),this.Ha+=n),a||this.Qa){this.Ya=this.ja?qs(this.Ya,this.ja):qs(this.Ya,Ze(this.Oa));const B=Tr(this.Oa,this.dt._i());this.LW=this.Ha,this.RW=this.RR.nV(B,!1,this.RW)}this.aE.mV(this.dt),l!==Vt?p&&(this.EW&&(this.EW=void 0),u>1||this.Ga.M()?u<=1&&!this.Ga.M()?this.dG=this.RR.gl.POINTS:(this.EW=VS(o,this.RR,this.Ga.M()?25:u),this.dG=this.EW.dG):this.dG=this.RR.gl.POINTS):this.EW&&(this.EW=void 0);const L=((t=this.EW)===null||t===void 0?void 0:t.DW)||0,z=this.Aa.M()+L;if(y||x||i||d){const B=this.Ga.M()?"attribute":"uniform",A=u<=1&&j.PointSize(B),T=j.VertexLocation({offset:u>1?{dataType:B,sizeUnit:"px",symmetric:!0,rotation:(this.Wa.M()||z%360!=0)&&{dataType:this.Wa.M()?"attribute":"uniform"}}:void 0,axisWorldTranslation:Pt(this.dt),normalSource:void 0});this.cE=F?this.RR.oz(j["2D"],A,T,b?j.Color({dataType:"uniform"}):V?j.Color({dataType:"attribute"}):E?j.Color({dataType:["lookup",E.getLookUpProperty(),E.lut]}):v?j.Color({dataType:["gradient",v]}):R?j.Color({dataType:["gradient",R]}):void 0):void 0,this.EN=e&&F?this.RR.oz(j["2D"],A,T,j.MousePicking):void 0}if(m||x){const B=this.Oa.length;if(ks(l)&&this.LW&&this.LW>0){const A=l.getFallbackColor(),T=new Float32Array(4*B);for(let w=0;w<B;w+=1){const C=this.Oa[w];C.color?(T[4*w+0]=C.color.r,T[4*w+1]=C.color.g,T[4*w+2]=C.color.b,T[4*w+3]=C.color.a):(T[4*w+0]=A.r,T[4*w+1]=A.g,T[4*w+2]=A.b,T[4*w+3]=A.a)}this.zW=this.RR.nV(T,!0,this.zW)}else this.zW&&this.RR.yV(this.zW),this.zW=void 0;if(this.Ga.M()&&this.LW&&this.LW>0&&u>1){const A=new Float32Array(B);for(let T=0;T<B;T+=1){const w=this.Oa[T];w.size?A[T]=w.size:A[T]=u}this.VW=this.RR.nV(A,!0,this.VW)}else this.VW&&(this.RR.yV(this.VW),this.VW=void 0);if(this.Wa.M()&&this.LW&&this.LW>0&&u>1){const A=new Float32Array(2*B),T=br(z),w=Math.sin(T),C=Math.cos(T);for(let k=0;k<B;k+=1){const _=this.Oa[k];if(_.rotation){const X=br(_.rotation+L);A[2*k+0]=Math.sin(X),A[2*k+1]=Math.cos(X)}else A[2*k+0]=w,A[2*k+1]=C}this.OW=this.RR.nV(A,!0,this.OW)}else this.OW&&(this.RR.yV(this.OW),this.OW=void 0);if(this.Ua.M()&&this.LW&&this.LW>0){const A=new Float32Array(B);for(let T=0;T<B;T+=1){const w=this.Oa[T];"value"in w&&w.value!==void 0&&w.value!==null?A[T]=w.value:A[T]=-34028234663852886e22}this.NW=this.RR.nV(A,!0,this.NW)}else this.NW&&(this.RR.yV(this.NW),this.NW=void 0);this.ha(this.be)}if(li(l)?this.MN=nr(Ao(this.Eo||this.Ya,{x:this.vl(),y:this.bl()},this.dt),this.dt,l.getPosition(),l.getExtent(),l.getShape(),this.RR.$z()):ui(l)?this._N=ar(Ao(this.Eo||this.Ya,{x:this.vl(),y:this.bl()},this.dt),this.dt,l.getAngle(!0),this.RR.$z()):(this.MN=void 0,this._N=void 0),m&&(this.Ya&&m&&(this.dN=Ao(this.Ya,{x:u,y:u},this.dt)),this.$a=[],this.Xa=0,this.ja=Ne),this.Ja===void 0&&E&&E.lookUpProperty==="value"&&E.lut.percentageValues){let B=Dt,A=Mt;for(let T=0;T<this.Oa.length;T+=1){const w=this.Oa[T];w.value!==void 0&&w.value<A&&(A=w.value),w.value!==void 0&&w.value>B&&(B=w.value)}this.Ja={min:A,max:B}}return this.ia=l,this.Na.i=!1,this.size.i=!1,this.Aa.i=!1,this.Bo.i=!1,this.Qa=!1,this}zL(t){const e=t===1?this.EN:this.cE,i=this.RW,s=this.LW;return e&&i&&s&&(this.RR.jR(e),this.RR.aV(e,(n,a,o,l)=>{var u;if(this.dt instanceof xe||this.dt instanceof Js?this.RR.uV(n("uScale"),this.aE.fV()).uV(n("uDisp"),this.aE.AV()).uV(l("uScaleStart_highpart"),this.aE.VO()).uV(l("uScaleStart_lowpart"),this.aE.OO()):this.dt instanceof Ci&&this.RR.uV(l("uScaleStart"),this.aE.MixedScaleXY.uScaleStart).uV(l("uScaleStartLog"),this.aE.MixedScaleXY.uScaleStartLog).uV(l("uScaleInterval"),this.aE.MixedScaleXY.uScaleInterval).uV(l("uScaleIntervalLog"),this.aE.MixedScaleXY.uScaleIntervalLog).uV(n("uViewportStart"),this.aE.MixedScaleXY.uViewportStart).uV(n("uViewportSize"),this.aE.MixedScaleXY.uViewportSize),this.RR.vO(o,i,this.dt._i(),this.EW?1:void 0).dV(n("uIsHighlighted"),t===1||t===2?0:this.zo).AR(n("uHighlightColorOffset"),t===1||t===2?Je:this.Go).dV(n("uRenderEffectMask"),t===2?1:0).dV(l("uDevicePixelRatio"),this.RR.$z()),this.EW){const y=a("aInstanceGeo");this.RR.GV(y,this.EW.wR).UV(y,0)}if(t===1)this.RR.AR(n("uColor"),this.mN);else if(ce(this.be))this.RR.AR(n("uColor"),this.be.getColor());else if(ks(this.be)&&this.zW){const y=a("aColor");this.RR.HV(y,this.zW),this.dG!==this.RR.gl.POINTS&&this.RR.UV(y,1)}else if(wi(this.be)){if(this.be.getLookUpProperty()==="value"&&this.NW){const m=a("aLookupValue");this.RR.$V(m,this.NW),this.dG!==this.RR.gl.POINTS&&this.RR.UV(m,1)}const y=ir(this.be,this,this.Ja);if(!y&&this.be.lut.percentageValues)return!1;this.RR.LO(o,this.be.lut,y)}else if(li(this.be)){if(!this.MN)return!1;this.RR.mO(o,this.MN,this.be)}else if(ui(this.be)){if(!this._N)return!1;this.RR.yO(o,this._N,this.be)}if(this.VW&&this.dG!==this.RR.gl.POINTS){const y=a("aOffsetPixels");this.RR.$V(y,this.VW),this.dG!==this.RR.gl.POINTS&&this.RR.UV(y,1)}else if(this.dG!==this.RR.gl.POINTS){const y=n("uOffsetPixels");this.RR.dV(y,this.size.M())}const d=(((u=this.EW)===null||u===void 0?void 0:u.DW)||0)+this.Aa.M();if(this.OW&&this.dG!==this.RR.gl.POINTS){const y=a("aRot");this.RR.GV(y,this.OW),this.dG!==this.RR.gl.POINTS&&this.RR.UV(y,1)}else if(this.dG!==this.RR.gl.POINTS&&d%360!=0){const y=br(d),m=Math.sin(y),p=Math.cos(y);this.RR.uV(n("uRot"),[m,p])}if(this.dG===this.RR.gl.POINTS)this.RR.dV(n("uPointSize"),this.size.M());else{const y={x:2/this.us.oi().x,y:2/this.us.oi().y};this.RR.uV(n("uRatioPxClip"),[y.x,y.y])}let f=!1;return this.dG===this.RR.gl.POINTS?(this.RR.Ky(this.dG,s),f=!0):this.EW&&(this.RR.QV(this.dG,0,this.EW.PW,s),f=!0),f})),this}lN(t){return this.gN===t&&{}}Hc(t){this.al()>0&&this.Ps();const e=this.tl(),i=uS(e,t,this.Za,!1,!1,this.dt,this.us.dt,this.Ya,void 0,void 0);return i!==void 0?e[i]:void 0}Ce(t){return super.Ce(t)}bt(){return this.Ya.max.x}vt(){return this.Ya.min.x}Mt(){return this.Ya.max.y}xt(){return this.Ya.min.y}vl(){return this.Ga.M()?25:this.size.M()}bl(){return this.Ga.M()?25:this.size.M()}VR(){return this.RW&&(this.RR.yV(this.RW),this.RW=void 0),this.EW&&(this.EW=void 0),this.zW&&(this.RR.yV(this.zW),this.zW=void 0),this.OW&&(this.RR.yV(this.OW),this.OW=void 0),this.NW&&(this.RR.yV(this.NW),this.NW=void 0),this}}class Kz extends _0{constructor(t,e,i,s,n,a){super(t,e,i,s,n),this.bG={fill:void 0,border:void 0},this.aE=new cr,this.Ya=Ne,this.GW=!1,this.WW=!1,this.UW=!1,this.YW=!1,this.HW=!1,this.Sd=[],this.AN=Ds({polygonStyleSolid:()=>ce(this.be)&&this.be,polygonStyleImage:()=>Jl(this.be)&&this.be,polygonStyleRadialGradient:()=>li(this.be)&&this.be,polygonStyleLinearGradient:()=>ui(this.be)&&this.be,polygonStylePaletted:()=>wi(this.be)&&this.be,polygonStyleIndividual:()=>ks(this.be)&&this.be,lineStyleSolid:()=>As(this.xe)&&this.xe,lineStyleFilled:()=>{const o=this.xe&&this.xe.getFillStyle();return ce(o)&&o}}),this.rN=t,this.nN=e,this.FG=a,this.RR=t.oN(),this.SG=this.RR.eO}zr(){const t=this.FG(),e={ys:i=>this.PG(e,i),cs:i=>this.DG(e,i),pl:i=>this.$W(e,i),Yb:i=>this.XW(e,i),AR:i=>this.LG(e,i),Oa:[],u:void 0,jW:void 0,zo:0,ZW:!0,gN:t.id,mN:t.color};return this.Sd.push(e),e}Nt(){var t;return this.Sd.length=0,this.GW=!0,this.ji&&this.Tn&&((t=this.us.Cn)===null||t===void 0?void 0:t.entity)===this&&this.Tn(this,void 0,this.us.Cn.collectionMember),this}Ap(){return this.Sd}bd(t){var e;const i=this.Sd.indexOf(t);i>=0&&(this.Sd.splice(i,1),this.HW=!0,this.ji&&this.Tn&&((e=this.us.Cn)===null||e===void 0?void 0:e.entity)===this&&this.us.Cn.collectionMember===t&&this.Tn(this,void 0,this.us.Cn.collectionMember))}PG(t,e){var i;return t.ZW=e,this.HW=!0,this.ji&&this.Tn&&((i=this.us.Cn)===null||i===void 0?void 0:i.entity)===this&&this.us.Cn.collectionMember===t&&this.Tn(this,void 0,this.us.Cn.collectionMember),t}DG(t,e){return t.zo=e,this.YW=!0,t}$W(t,e){return t.Oa=e,this.GW=!0,t}XW(t,e){return t.u=e,this.WW=!0,t}LG(t,e){return t.jW=e==null?void 0:e.toUint32(),this.UW=!0,t}Ps(){const t=this.Bo.M(),e=this.Bo.i,i=this.ta(),s=this.YW,n=this.GW,a=this.WW,o=this.UW,l=this.HW,u=this.xe,d=this.ra(),f=this.Sd.filter(z=>z.ZW&&z.Oa.length>0);if(this.aE.mV(this.dt),(n||l)&&(this.Ya=qs(...f.map(z=>Ze(z.Oa)))),n||l){const z=Tr(f.map(w=>[...w.Oa,w.Oa[0],{x:Number.NaN,y:Number.NaN}]).flat(),this.dt._i()),B=this.dt._i()?4:2;this.vG=this.RR.nV(z,!1,this.vG);let A=[];f.reduce((w,C)=>{const k=w,_=(C.Oa.length+1)*B,X=new Float32Array(z.buffer,k,_),N=cR(X,void 0,B),U=w/(Float32Array.BYTES_PER_ELEMENT*B);for(let O=0;O<N.length;O+=1)N[O]+=U;return A=cs(A,N,{canReturnB:!0}),k+(_+1*B)*Float32Array.BYTES_PER_ELEMENT},0);const T=new Uint32Array(A);this.QW=this.RR.OV(T,this.QW),this.JW=T.length,this.KW=z.length/B-1}const y=this.AN.polygonStyleSolid(i),m=this.AN.polygonStylePaletted(i),p=this.AN.polygonStyleIndividual(i),x=this.AN.polygonStyleRadialGradient(i),b=this.AN.polygonStyleLinearGradient(i),v=this.AN.polygonStyleImage(i),R=y||m||b||x||v||p,E=this.AN.lineStyleSolid(d),V=this.AN.lineStyleFilled(d),F=V,L=E&&Math.max(E.getThickness(),0);if((i||d||e)&&(this.bG.fill=R?{shader:this.RR.oz(j["2D"],y&&j.Color({dataType:"uniform"}),b&&j.Color({dataType:["gradient",b]}),x&&j.Color({dataType:["gradient",x]}),m&&j.Color({dataType:["lookup",m.getLookUpProperty(),m.lut]}),p&&j.Color({dataType:"attribute"}),v&&j.Color({dataType:["image",v]}),j.VertexLocation({axisWorldTranslation:Pt(this.dt),normalSource:void 0}),j.AttributeHighlight),mousePicking:t?{shader:this.RR.oz(j["2D"],j.MousePickingAttribute,j.VertexLocation({axisWorldTranslation:Pt(this.dt),normalSource:void 0}),j.AttributeHighlight)}:void 0,fillStyleSolid:y,fillStyleLinearGradient:b,fillStyleRadialGradient:x,fillStylePaletted:m,fillStyleImage:v,fillStyleIndividual:p}:void 0,this.bG.border=E&&F&&typeof L=="number"&&L!==0?{shader:this.RR.oz(j["2D"],j.Color({dataType:"uniform"}),j.LineInstanced2D({axisWorldTranslation:Pt(this.dt),normalSource:void 0}),this.SG?j.AliasedEdge:void 0,j.AttributeHighlight),geometry:eu(this.RR,L),mousePicking:t?{shader:this.RR.oz(j["2D"],j.MousePickingAttribute,j.LineInstanced2D({axisWorldTranslation:Pt(this.dt),normalSource:void 0}),j.AttributeHighlight)}:void 0,fillStyleSolid:V,thickness:L}:void 0),s||n){const z=f.reduce((T,w)=>T+w.Oa.length+2,0),B=new Float32Array(z);let A=0;f.forEach(T=>{const w=T.Oa.length+2;for(let C=A;C<A+w;C+=1)B[C]=T.zo;A+=w}),this.qW=this.RR.nV(B,!0,this.qW)}if(t){if(n){const z=f.reduce((T,w)=>T+w.Oa.length+2,0),B=new Float32Array(4*z);let A=0;f.forEach(T=>{const w=T.Oa.length+2;for(let C=A;C<A+4*w;C+=4)B[C]=T.mN.r,B[C+1]=T.mN.g,B[C+2]=T.mN.b,B[C+3]=T.mN.a;A+=4*w}),this.tU=this.RR.nV(B,!1,this.tU)}}else this.tU&&(this.RR.yV(this.tU),this.tU=void 0);if(a||n&&m&&m.getLookUpProperty()==="value"){const z=f.reduce((w,C)=>w+C.Oa.length+2,0),B=new Float32Array(z);let A=0;const T={min:Mt,max:Dt};f.forEach(w=>{const C=w.u!==void 0?w.u:-34028234663852886e22,k=w.Oa.length+2;for(let _=A;_<A+k;_+=1)B[_]=C;A+=k,T.min=Math.min(T.min,C),T.max=Math.max(T.max,C)}),this.iU=T,this.sU=this.RR.nV(B,!1,this.sU)}if(o||n&&p){const z=f.reduce((w,C)=>w+C.Oa.length+2,0),B=new Uint32Array(z);let A=0;const T=p?p.getFallbackColor().toUint32():hh.toUint32();f.forEach(w=>{const C=w.jW!==void 0?w.jW:T,k=w.Oa.length+2;for(let _=A;_<A+k;_+=1)B[_]=C;A+=k}),this.eU=this.RR.nV(B,!1,this.eU,Uint32Array)}return x?this.MN=nr(this.Eo||this.Ya,this.dt,x.getPosition(),x.getExtent(),x.getShape(),this.RR.$z()):b?this._N=ar(this.Eo||this.Ya,this.dt,b.getAngle(!0),this.RR.$z()):(this.MN=void 0,this._N=void 0),this.hU=this.RR.RO(this,this.hU,v,void 0,n||l||this.dt.Ni(),(z,B,A)=>this.rU(z,B,A,f)),this.YW=!1,this.HW=!1,this.GW=!1,this.WW=!1,this.UW=!1,this.Bo.i=!1,this.ha(this.be),this.aa(u),this}zL(t){var e,i;const{fill:s,border:n}=this.bG,a=this.vG,o=this.qW,l=this.tU;if(!a||!o)return this;if(s){const{fillStyleSolid:u,fillStyleLinearGradient:d,fillStyleRadialGradient:f,fillStylePaletted:y,fillStyleImage:m,fillStyleIndividual:p}=s,x=this.QW,b=this.JW,v=t===1?(e=s.mousePicking)===null||e===void 0?void 0:e.shader:s.shader;if(!v||!a||!x||b===void 0)return this;this.RR.jR(v).aV(v,(R,E,V,F)=>{if(this.dt instanceof xe||this.dt instanceof Js?this.RR.uV(R("uScale"),this.aE.fV()).uV(R("uDisp"),this.aE.AV()).uV(F("uScaleStart_highpart"),this.aE.VO()).uV(F("uScaleStart_lowpart"),this.aE.OO()):this.dt instanceof Ci&&this.RR.uV(F("uScaleStart"),this.aE.MixedScaleXY.uScaleStart).uV(F("uScaleStartLog"),this.aE.MixedScaleXY.uScaleStartLog).uV(F("uScaleInterval"),this.aE.MixedScaleXY.uScaleInterval).uV(F("uScaleIntervalLog"),this.aE.MixedScaleXY.uScaleIntervalLog).uV(R("uViewportStart"),this.aE.MixedScaleXY.uViewportStart).uV(R("uViewportSize"),this.aE.MixedScaleXY.uViewportSize),this.RR.vO(V,a,this.dt._i(),void 0).XV(x).$V(E("aIsHighlighted"),o).AR(R("uHighlightColorOffset"),t===1||t===2?Je:this.Go).dV(R("uRenderEffectMask"),t===2?1:0),t===1){if(!l)return!1;this.RR.HV(E("aColor"),l)}else if(u)this.RR.AR(R("uColor"),u.getColor());else if(f){if(!this.MN)return!1;this.RR.mO(V,this.MN,f)}else if(d){if(!this._N)return!1;this.RR.yO(V,this._N,d)}else if(y){const L=ir(y,this,this.iU);if(!L&&y.lut.percentageValues)return!1;if(this.RR.LO(V,y.lut,L),y.getLookUpProperty()==="value"){if(!this.sU)return!1;this.RR.$V(E("aLookupValue"),this.sU)}}else if(m){if(!this.hU)return!1;this.RR.AR(F("uColor"),m.getSurroundingColor()).cV(R("uColorTexture"),this.hU.texture.Gz()||this.hU.sourceMissingTexture,0).lV(this.hU.texCoordsBuffer,void 0,{location:E("aTextureCoord"),size:2}).LV(m.fitMode)}else if(p){if(!this.eU)return!1;const L=E("aColor");this.RR.gl.bindBuffer(this.RR.gl.ARRAY_BUFFER,this.eU),this.RR.gl.vertexAttribPointer(L,4,this.RR.gl.UNSIGNED_BYTE,!0,0,0),this.RR.gl.enableVertexAttribArray(L)}return this.RR.ZV(b,void 0,void 0,this.RR.gl.UNSIGNED_INT),!0})}if(n){const{geometry:u,fillStyleSolid:d,thickness:f}=n,y=this.KW,m=t===1?(i=n.mousePicking)===null||i===void 0?void 0:i.shader:n.shader;if(!m||!a||!y)return this;this.RR.jR(m).aV(m,(p,x,b,v)=>{if(this.dt instanceof xe||this.dt instanceof Js?this.RR.uV(p("uScale"),this.aE.fV()).uV(p("uDisp"),this.aE.AV()).uV(v("uScaleStart_highpart"),this.aE.VO()).uV(v("uScaleStart_lowpart"),this.aE.OO()):this.dt instanceof Ci&&this.RR.uV(v("uScaleStart"),this.aE.MixedScaleXY.uScaleStart).uV(v("uScaleStartLog"),this.aE.MixedScaleXY.uScaleStartLog).uV(v("uScaleInterval"),this.aE.MixedScaleXY.uScaleInterval).uV(v("uScaleIntervalLog"),this.aE.MixedScaleXY.uScaleIntervalLog).uV(p("uViewportStart"),this.aE.MixedScaleXY.uViewportStart).uV(p("uViewportSize"),this.aE.MixedScaleXY.uViewportSize),this.RR.lV(o,1,{location:x("aIsHighlighted"),size:1}).AR(p("uHighlightColorOffset"),t===1||t===2?Je:this.Go).dV(p("uRenderEffectMask"),t===2?1:0),t===1){if(!l)return!1;this.RR.lV(l,1,{location:x("aColor"),size:4})}else d&&this.RR.AR(p("uColor"),d.getColor());return Sn.fG(this.dt._i(),this.RR,a,b,this.dt._i()?4:2,0),Sn.zL(this.rN,u,b,this.SG&&t!==1,t===1,f,y),!0})}return this}rU(t,e,i,s){const n=gt({x:this.Ya.min.x,y:this.Ya.min.y},this.dt,this.us.dt),a=gt({x:this.Ya.max.x,y:this.Ya.max.y},this.dt,this.us.dt),o={x:Math.abs(n.x-a.x),y:Math.abs(n.y-a.y)},l=j0(t,e,o.x,o.y,i),u=l[1],d=l[4],f=l[6],y=l[7],m=s.reduce((V,F)=>V+F.Oa.length+2,0),p=new Float32Array(2*m),x=this.Ya.max.x-this.Ya.min.x,b=this.Ya.max.y-this.Ya.min.y,v=d-f,R=y-u;let E=0;for(const V of s){for(const z of V.Oa){const B=f+v*((z.x-this.Ya.min.x)/x),A=u+R*((z.y-this.Ya.min.y)/b);p[E]=B,p[E+1]=A,E+=2}const F=f+v*((V.Oa[0].x-this.Ya.min.x)/x),L=u+R*((V.Oa[0].y-this.Ya.min.y)/b);p[E]=F,p[E+1]=L,E+=2,p[E]=Number.NaN,p[E+1]=Number.NaN,E+=2}return p}lN(t){const e=this.Sd.find(i=>i.gN===t);return!!e&&{collectionMember:e}}VR(){return this.QW&&(this.RR.yV(this.QW),this.QW=void 0),this.vG&&(this.RR.yV(this.vG),this.vG=void 0),this.qW&&(this.RR.yV(this.qW),this.qW=void 0),this.tU&&(this.RR.yV(this.tU),this.tU=void 0),this.sU&&(this.RR.yV(this.sU),this.sU=void 0),this.eU&&(this.RR.yV(this.eU),this.eU=void 0),this.bG={fill:void 0,border:void 0},this.hU=this.RR.EO(this,this.hU),this}bt(){return this.Ya.max.x}vt(){return this.Ya.min.x}Mt(){return this.Ya.max.y}xt(){return this.Ya.min.y}vl(){return Ps(this.xe)}bl(){return Ps(this.xe)}}class t6 extends bD{constructor(t,e,i,s,n,a,o){super(t,e,i,s,n),this.aE=new cr,this.nU=Ne,this.AN=Ds({fillStyleSolid:()=>ce(this.be)&&this.be,fillStyleRadialGradient:()=>li(this.be)&&this.be,fillStyleLinearGradient:()=>ui(this.be)&&this.be,fillStyleImage:()=>Jl(this.be)&&this.be,strokeStyleSolid:()=>As(this.xe)&&this.xe,strokeFillSolid:()=>{const l=this.xe.getFillStyle();return ce(l)&&l},strokeFillLinearGradient:()=>{const l=this.xe.getFillStyle();return ui(l)&&l},strokeFillRadialGradient:()=>{const l=this.xe.getFillStyle();return li(l)&&l}}),this.rU=(l,u,d)=>{const f=gt(this.Fa(),this.dt,this.us.dt),y=Se(gt(_t(this.Fa(),this.oi()),this.dt,this.us.dt),f);return j0(l,u,y.x,y.y,d)},this.rN=t,this.nN=e,this.gN=a,this.mN=o,this.RR=t.oN(),this.nN=e}Ps(){super.Ps();const t=this.Bo.M(),e=this.ta(),i=this.ua.i||this.X.i||this.Aa.i||this.ma.i,s=this.xe,n=this.ra(),a=s.getThickness(),o=this.Aa.M();this.aE.mV(this.dt);const l=this.dt.Ni();if(i){const V=this.X.M();this.Oa=function(L,z,B,A,T){const w=((C,k,_)=>[C,Y(C.x+k,C.y),Y(C.x+k,C.y+_),Y(C.x,C.y+_)])(L,z,B);if(A!==0||A%360!=0){const C=A*Math.PI/180;w[0]=qn(w[0],T,C),w[1]=qn(w[1],T,C),w[2]=qn(w[2],T,C),w[3]=qn(w[3],T,C)}return w}(this.ua.M(),V.x,V.y,o,this.ma.M());const F=Tr(this.Oa,this.dt._i());this.SN=this.RR.nV(F,!1,this.SN),this.bN=this.Oa.length,this.nU=Ze(this.Oa)}const u=this.AN.fillStyleSolid(e),d=this.AN.fillStyleRadialGradient(e),f=this.AN.fillStyleLinearGradient(e),y=this.AN.fillStyleImage(e),m=u||d||f||y;e&&(this.wN=m?this.RR.oz(j["2D"],u&&j.Color({dataType:"uniform"}),f&&j.Color({dataType:["gradient",f]}),d&&j.Color({dataType:["gradient",d]}),y&&j.Color({dataType:["image",y]}),j.VertexLocation({axisWorldTranslation:Pt(this.dt),normalSource:void 0})):void 0),d?this.MN=nr(this.Eo||this.nU,this.dt,d.getPosition(),d.getExtent(),d.getShape(),this.RR.$z()):f?this._N=ar(this.Eo||this.nU,this.dt,f.getAngle(!0),this.RR.$z()):(this.MN=void 0,this._N=void 0),this.hU=this.RR.RO(this,this.hU,y,void 0,l||i,this.rU);const p=this.AN.strokeStyleSolid(n),x=this.AN.strokeFillSolid(n),b=this.AN.strokeFillLinearGradient(n),v=this.AN.strokeFillRadialGradient(n),R=p,E=x||b||v;if(R&&(i||n||l&&a!==1)){if(a===1||a===-1)[this.CN,this.oU]=[this.Oa,void 0];else{const V=this.dt;[this.CN,this.oU]=V instanceof Ci?((F,L,z)=>{const B=F[0],A=F[1],T=F[2],w=F[3],C=L/2;return[[z.Ui(B,A,C,-C),z.Ui(A,B,-C,-C),z.Ui(w,T,-C,-C),z.Ui(T,w,C,-C),z.Ui(B,A,-C,C),z.Ui(A,B,C,C),z.Ui(w,T,C,C),z.Ui(T,w,-C,C)],[0,4,5,0,5,1,1,5,7,1,3,7,3,7,6,3,2,6,2,4,0,2,6,4]]})(this.Oa,a,V):((F,L,z)=>{const B=F[0],A=F[1],T=F[2],w=F[3],C=Y(L.x*z*.5,L.y*z*.5),k=Ws(gb(A,B)),_=Ws(gb(w,B)),X=yb(k),N=yb(_);return[[_t(B,_t(Ht(X,C.x),Ht(N,C.y))),_t(A,_t(Ht(k,C.x),Ht(N,C.y))),_t(w,_t(Ht(X,C.x),Ht(_,C.y))),_t(T,_t(Ht(k,C.x),Ht(_,C.y))),_t(B,_t(Ht(k,C.x),Ht(_,C.y))),_t(A,_t(Ht(X,C.x),Ht(_,C.y))),_t(w,_t(Ht(k,C.x),Ht(N,C.y))),_t(T,_t(Ht(X,C.x),Ht(N,C.y)))],[0,4,5,0,5,1,1,5,7,1,3,7,3,7,6,3,2,6,2,4,0,2,6,4]]})(this.Oa,V.Wi(),a)}this.TN=this.RR.nV(Tr(this.CN,this.dt._i()),!1,this.TN),this.oU?(this.uG=this.RR.OV(new Uint16Array(this.oU),this.uG),this.kN=this.oU.length):(this.uG&&this.RR.yV(this.uG),this.uG=void 0,this.kN=this.CN.length)}return n&&(this.RN=R&&E?this.RR.oz(j["2D"],j.Color({dataType:v?["gradient",v]:b?["gradient",b]:"uniform"}),j.VertexLocation({axisWorldTranslation:Pt(this.dt),normalSource:void 0})):void 0),v?this.DN=nr(this.nU,this.dt,v.getPosition(),v.getExtent(),v.getShape(),this.RR.$z()):b?this.LN=ar(this.nU,this.dt,b.getAngle(!0),this.RR.$z()):(this.DN=void 0,this.LN=void 0),this.EN=t&&m?this.EN||this.RR.oz(j["2D"],j.Color({dataType:"uniform"}),j.VertexLocation({axisWorldTranslation:Pt(this.dt),normalSource:void 0})):void 0,this.zN=t&&this.xe!==vt?this.zN||this.RR.oz(j["2D"],j.Color({dataType:"uniform"}),j.VertexLocation({axisWorldTranslation:Pt(this.dt),normalSource:void 0})):void 0,this.ha(this.be),this.aa(s),this.ua.i=!1,this.Aa.i=!1,this.X.i=!1,this.ma.i=!1,this}lN(t){return this.gN===t&&{}}zL(t){const e=t===1?this.EN:this.wN,i=this.SN,s=this.bN,n=this.AN.fillStyleSolid(!1),a=this.AN.fillStyleRadialGradient(!1),o=this.AN.fillStyleLinearGradient(!1),l=this.AN.fillStyleImage(!1);e&&i&&s&&this.be!==Vt&&(this.RR.jR(e),this.RR.aV(e,(x,b,v,R)=>{if(this.dt instanceof xe||this.dt instanceof Js?this.RR.uV(x("uScale"),this.aE.fV()).uV(x("uDisp"),this.aE.AV()).uV(R("uScaleStart_highpart"),this.aE.VO()).uV(R("uScaleStart_lowpart"),this.aE.OO()):this.dt instanceof Ci&&this.RR.uV(R("uScaleStart"),this.aE.MixedScaleXY.uScaleStart).uV(R("uScaleStartLog"),this.aE.MixedScaleXY.uScaleStartLog).uV(R("uScaleInterval"),this.aE.MixedScaleXY.uScaleInterval).uV(R("uScaleIntervalLog"),this.aE.MixedScaleXY.uScaleIntervalLog).uV(x("uViewportStart"),this.aE.MixedScaleXY.uViewportStart).uV(x("uViewportSize"),this.aE.MixedScaleXY.uViewportSize),t===1)this.RR.AR(x("uColor"),this.mN);else if(n)this.RR.AR(x("uColor"),n.getColor());else if(a){if(!this.MN)return!1;this.RR.mO(v,this.MN,a)}else if(o){if(!this._N)return!1;this.RR.yO(v,this._N,o)}else if(l){if(!this.hU)return!1;const E=this.hU&&this.hU.texture.Gz();this.RR.AR(R("uColor"),l.getSurroundingColor()).cV(x("uColorTexture"),E||this.hU.sourceMissingTexture,0).lV(this.hU.texCoordsBuffer,void 0,{location:b("aTextureCoord"),size:2}).LV(l.fitMode)}return this.RR.dV(x("uIsHighlighted"),t===1||t===2?0:this.zo).AR(x("uHighlightColorOffset"),t===1||t===2?Je:this.Go).dV(x("uRenderEffectMask"),t===2?1:0).vO(v,i,this.dt._i(),void 0).Ky(this.RR.gl.TRIANGLE_FAN,s),!0}));const u=t===1?this.zN:this.RN,d=this.AN.strokeStyleSolid(!1),f=this.AN.strokeFillSolid(!1),y=this.AN.strokeFillLinearGradient(!1),m=this.AN.strokeFillRadialGradient(!1),p=this.TN;return u&&p&&d&&(this.RR.jR(u),this.RR.aV(u,(x,b,v,R)=>{if(this.dt instanceof xe||this.dt instanceof Js?this.RR.uV(x("uScale"),this.aE.fV()).uV(x("uDisp"),this.aE.AV()).uV(R("uScaleStart_highpart"),this.aE.VO()).uV(R("uScaleStart_lowpart"),this.aE.OO()):this.dt instanceof Ci&&this.RR.uV(R("uScaleStart"),this.aE.MixedScaleXY.uScaleStart).uV(R("uScaleStartLog"),this.aE.MixedScaleXY.uScaleStartLog).uV(R("uScaleInterval"),this.aE.MixedScaleXY.uScaleInterval).uV(R("uScaleIntervalLog"),this.aE.MixedScaleXY.uScaleIntervalLog).uV(x("uViewportStart"),this.aE.MixedScaleXY.uViewportStart).uV(x("uViewportSize"),this.aE.MixedScaleXY.uViewportSize),t===1)this.RR.AR(x("uColor"),this.mN);else if(f)this.RR.AR(x("uColor"),f.getColor());else if(m){if(!this.DN)return!1;this.RR.mO(v,this.DN,m)}else if(y){if(!this.LN)return!1;this.RR.yO(v,this.LN,y)}return this.RR.dV(x("uIsHighlighted"),t===1||t===2?0:this.zo).AR(x("uHighlightColorOffset"),t===1||t===2?Je:this.Go).dV(x("uRenderEffectMask"),t===2?1:0).vO(v,p,this.dt._i(),void 0),this.uG?this.RR.XV(this.uG).ZV(this.kN):this.RR.Ky(this.RR.gl.LINE_LOOP,this.kN),!0})),this}VR(){return this.uG&&(this.RR.yV(this.uG),this.uG=void 0),this.SN&&(this.RR.yV(this.SN),this.SN=void 0),this.TN&&(this.RR.yV(this.TN),this.TN=void 0),this.hU=this.RR.EO(this,this.hU),this.wN=void 0,this.RN=void 0,this.EN=void 0,this.zN=void 0,this}bt(){return Math.max(this.ua.M().x,this.ua.M().x+this.X.M().x)}vt(){return Math.min(this.ua.M().x,this.ua.M().x+this.X.M().x)}Mt(){return Math.max(this.ua.M().y,this.ua.M().y+this.X.M().y)}xt(){return Math.min(this.ua.M().y,this.ua.M().y+this.X.M().y)}vl(){return Ps(this.xe)}bl(){return Ps(this.xe)}}class e6 extends RD{constructor(t,e,i,s,n,a,o){super(t,e,i,s,n),this.aE=new cr,this.AN=Ds({fillStyleSolid:()=>ce(this.be)&&this.be,fillStylePaletted:()=>wi(this.be)&&this.be,fillStyleRadialGradient:()=>li(this.be)&&this.be,fillStyleLinearGradient:()=>ui(this.be)&&this.be,fillStyleImage:()=>Jl(this.be)&&this.be,strokeLineStyleSolid:()=>As(this.xe)&&this.xe,strokeLineSolidFill:()=>{const l=this.xe.getFillStyle();return ce(l)&&l},strokeLinearGradientFill:()=>{const l=this.xe.getFillStyle();return ui(l)&&l},strokeRadialGradientFill:()=>{const l=this.xe.getFillStyle();return li(l)&&l}}),this.rU=(l,u,d)=>{const f=gt({x:this.Ya.min.x,y:this.Ya.min.y},this.dt,this.us.dt),y=gt({x:this.Ya.max.x,y:this.Ya.max.y},this.dt,this.us.dt),m={x:Math.abs(f.x-y.x),y:Math.abs(f.y-y.y)},p=j0(l,u,m.x,m.y,d),x=p[1],b=p[4],v=p[6],R=p[7],E=new Float32Array(2*this.Oa.length),V=this.Ya.max.x-this.Ya.min.x,F=this.Ya.max.y-this.Ya.min.y,L=b-v,z=R-x;let B=0;for(const A of this.Oa){const T=v+L*((A.x-this.Ya.min.x)/V),w=x+z*((A.y-this.Ya.min.y)/F);E[B]=T,E[B+1]=w,B+=2}return E},this.rN=t,this.nN=e,this.gN=a,this.mN=o,this.RR=t.oN(),this.nN=e}Hc(t){let e,i=Number.MAX_VALUE;for(const s of this.Oa){const n=ia(gt(s,this.dt,this.us.dt),t);n<i&&(i=n,e=s)}return e}Ps(){const t=this.Bo.M(),e=this.ta(),i=this.yl,s=this.Oa.length>=3,n=this.xe,a=this.ra(),o=n.getThickness(),l=this.oa(o);this.aE.mV(this.dt),this.FT=this.dt.Wi();const u=this.dt.Ni();if(i&&(this.Ya=Ze(this.Oa)),i&&s){const L=Tr(this.Oa,this.dt._i());this.SN=this.RR.nV(L,!1,this.SN),this.aU=new Uint16Array(cR(L)),this.lU=this.RR.OV(this.aU,this.lU),this.bN=this.aU.length}const d=this.AN.fillStyleSolid(e),f=this.AN.fillStylePaletted(e),y=this.AN.fillStyleRadialGradient(e),m=this.AN.fillStyleLinearGradient(e),p=this.AN.fillStyleImage(e),x=d||f&&f.getLookUpProperty()!=="value"&&f||m||y||p;if(e&&(this.wN=x?this.RR.oz(j["2D"],d&&j.Color({dataType:"uniform"}),m&&j.Color({dataType:["gradient",m]}),y&&j.Color({dataType:["gradient",y]}),f&&j.Color({dataType:["lookup",f.getLookUpProperty(),f.lut]}),p&&j.Color({dataType:["image",p]}),j.VertexLocation({axisWorldTranslation:Pt(this.dt),normalSource:void 0})):void 0),y?this.MN=nr(this.Eo||this.Ya,this.dt,y.getPosition(),y.getExtent(),y.getShape(),this.RR.$z()):m?this._N=ar(this.Eo||this.Ya,this.dt,m.getAngle(!0),this.RR.$z()):(this.MN=void 0,this._N=void 0),this.hU=this.RR.RO(this,this.hU,p,void 0,u||i,this.rU),(i||l||u&&o!==1)&&s){const L=o===1||o===-1?this.Oa:rT(this.Oa,this.FT,o);this.CN=Tr(L,this.dt._i()),this.TN=this.RR.nV(this.CN,!0,this.TN),this.kN=L.length}const b=this.AN.strokeLineStyleSolid(a),v=this.AN.strokeLineSolidFill(a),R=this.AN.strokeLinearGradientFill(a),E=this.AN.strokeRadialGradientFill(a),V=b,F=v||R||E;return a&&(this.RN=V&&F?this.RR.oz(j["2D"],j.Color({dataType:E?["gradient",E]:R?["gradient",R]:"uniform"}),j.VertexLocation({axisWorldTranslation:Pt(this.dt),normalSource:void 0})):void 0),E?this.DN=nr(this.Eo||this.Ya,this.dt,E.getPosition(),E.getExtent(),E.getShape(),this.RR.$z()):R?this.LN=ar(this.Eo||this.Ya,this.dt,R.getAngle(!0),this.RR.$z()):(this.DN=void 0,this.LN=void 0),this.EN=t&&x?this.EN||this.RR.oz(j["2D"],j.MousePicking,j.VertexLocation({axisWorldTranslation:Pt(this.dt),normalSource:void 0})):void 0,this.zN=t&&this.xe!==vt?this.EN||this.RR.oz(j["2D"],j.MousePicking,j.VertexLocation({axisWorldTranslation:Pt(this.dt),normalSource:void 0})):void 0,this.yl=!1,this.ha(this.be),this.aa(n),this}zL(t){const e=t===1?this.EN:this.wN,i=this.SN,s=this.bN,n=this.AN.fillStyleSolid(!1),a=this.AN.fillStyleRadialGradient(!1),o=this.AN.fillStyleLinearGradient(!1),l=this.AN.fillStylePaletted(!1),u=this.AN.fillStyleImage(!1);e&&i&&s&&this.RR.jR(e).aV(e,(p,x,b,v)=>{if(this.RR.uV(p("uScale"),this.aE.fV()).uV(p("uDisp"),this.aE.AV()).uV(v("uScaleStart_highpart"),this.aE.VO()).uV(v("uScaleStart_lowpart"),this.aE.OO()).vO(b,i,this.dt._i(),void 0).XV(this.lU).dV(p("uIsHighlighted"),t===1||t===2?0:this.zo).AR(p("uHighlightColorOffset"),t===1||t===2?Je:this.Go).dV(p("uRenderEffectMask"),t===2?1:0),t===1)this.RR.AR(p("uColor"),this.mN);else if(n)this.RR.AR(p("uColor"),n.getColor());else if(a){if(!this.MN)return!1;this.RR.mO(b,this.MN,a)}else if(o){if(!this._N)return!1;this.RR.yO(b,this._N,o)}else if(l){const R=ir(l,this,void 0);if(!R&&l.lut.percentageValues)return!1;this.RR.LO(b,l.lut,R)}else if(u){if(!this.hU)return!1;this.RR.AR(v("uColor"),u.getSurroundingColor()).cV(p("uColorTexture"),this.hU.texture.Gz()||this.hU.sourceMissingTexture,0).lV(this.hU.texCoordsBuffer,void 0,{location:x("aTextureCoord"),size:2}).LV(u.fitMode)}return this.RR.ZV(this.bN),!0});const d=t===1?this.zN:this.RN,f=this.xe,y=this.TN,m=this.kN;return d&&y&&m&&this.RR.jR(d).aV(d,(p,x,b,v)=>{this.RR.dV(p("uIsHighlighted"),t===1||t===2?0:this.zo).AR(p("uHighlightColorOffset"),t===1||t===2?Je:this.Go).dV(p("uRenderEffectMask"),t===2?1:0).uV(p("uScale"),this.aE.fV()).uV(p("uDisp"),this.aE.AV()).vO(b,y,this.dt._i(),void 0);const R=f.getFillStyle();if(t===1)this.RR.AR(p("uColor"),this.mN);else if(ce(R))this.RR.AR(p("uColor"),R.getColor());else if(li(R)){if(!this.DN)return!1;this.RR.mO(b,this.DN,R)}else if(ui(R)){if(!this.LN)return!1;this.RR.yO(b,this.LN,R)}const E=f.getThickness(),V=E===-1||E===1;return this.RR.Ky(V?this.RR.gl.LINE_LOOP:this.RR.gl.TRIANGLE_STRIP,this.kN),!0}),this}lN(t){return this.gN===t&&{}}VR(){return this.lU&&(this.RR.yV(this.lU),this.lU=void 0),this.SN&&(this.RR.yV(this.SN),this.SN=void 0),this.TN&&(this.RR.yV(this.TN),this.TN=void 0),this.wN=void 0,this.RN=void 0,this.EN=void 0,this.zN=void 0,this.hU=this.RR.EO(this,this.hU),this}}const i6=(r,t)=>{let e=0;const i=[];for(;e<r;){const s=e;let n=t;const a=e>0;n-=a?1:0,n-=e+n<r?1:0;const o=Math.min(n,r-s),l=e-(a?1:0),u={start:l,startUnique:s,sizeData:Math.min(t,r-l),sizeUniqueData:o};i.push(u),e+=o}return i},s6=(r,t)=>{let e=0;const i=[];for(;e<r;){const s=e;let n=t;const a=e>0;n-=a?1:0,n-=0;const o=Math.min(n,r-s),l=e-(a?1:0),u={start:l,startUnique:s,sizeData:Math.min(t,r-l),sizeUniqueData:o};i.push(u),e+=o}return i},aT=(r,t,e,i)=>{if(e){const n=new Map;return t.gridTiles.forEach(a=>{n.set(a,{type:e,dataInvalidationRanges:[{tileInvalidationOffset:{primary:0,secondary:0},tileInvalidationLength:a.sizeHeatmapDataVectors}]})}),n}const s=new Map;for(let n=0;n<r.length;n+=1){const a=r[n],o={x:a.startPrimary,y:a.startSecondary},l={x:o.x+a.lengthPrimary-1,y:o.y+a.lengthSecondary-1},u=[o,{x:l.x,y:o.y},l,{x:o.x,y:l.y}];t.gridTiles.forEach(d=>{const f=d.iFirstVector,y=i(d),m={x:f.primary+y.primary-1,y:f.secondary+y.secondary-1},p=[{x:f.primary,y:f.secondary},{x:m.x,y:f.secondary},m,{x:f.primary,y:m.y}];if(!Kf(u,p))return;let x=s.get(d);x||(x={type:a.type,dataInvalidationRanges:[]},s.set(d,x));const b=NR(u,p),v={primary:b.min.x-f.primary,secondary:b.min.y-f.secondary},R={primary:1+b.max.x-b.min.x,secondary:1+b.max.y-b.min.y};let E=!1;const V=[{x:v.primary,y:v.secondary},{x:v.primary+R.primary,y:v.secondary},{x:v.primary+R.primary,y:v.secondary+R.secondary},{x:v.primary,y:v.secondary+R.secondary}];for(let z=0;z<x.dataInvalidationRanges.length;z+=1)if(!E){const B=x.dataInvalidationRanges[z],A=[{x:B.tileInvalidationOffset.primary,y:B.tileInvalidationOffset.secondary},{x:B.tileInvalidationOffset.primary+B.tileInvalidationLength.primary,y:B.tileInvalidationOffset.secondary},{x:B.tileInvalidationOffset.primary+B.tileInvalidationLength.primary,y:B.tileInvalidationOffset.secondary+B.tileInvalidationLength.secondary},{x:B.tileInvalidationOffset.primary,y:B.tileInvalidationOffset.secondary+B.tileInvalidationLength.secondary}];if(Kf(V,A)){const T=(F=V,L=A,{min:{x:Math.min(F[0].x,L[0].x),y:Math.min(F[0].y,L[0].y)},max:{x:Math.max(F[2].x,L[2].x),y:Math.max(F[2].y,L[2].y)}});B.tileInvalidationOffset.primary=T.min.x,B.tileInvalidationOffset.secondary=T.min.y,B.tileInvalidationLength.primary=T.max.x-T.min.x,B.tileInvalidationLength.secondary=T.max.y-T.min.y,E=!0}}var F,L;E||x.dataInvalidationRanges.push({tileInvalidationLength:R,tileInvalidationOffset:v})})}return s},oT=(r,t,e)=>{if(r.length!==1||t.startPrimary!==0||t.startSecondary!==0||t.lengthPrimary!==r[0].sizeHeatmapDataVectors.primary||t.lengthSecondary!==r[0].sizeHeatmapDataVectors.secondary)r.forEach(i=>{const s=e(i),n=Math.max(t.startPrimary,i.iFirstVector.primary),a=Math.min(t.startPrimary+t.lengthPrimary-1,i.iFirstVector.primary+i.sizeHeatmapDataVectors.primary-1),o=Math.max(t.startSecondary,i.iFirstVector.secondary),l=Math.min(t.startSecondary+t.lengthSecondary-1,i.iFirstVector.secondary+i.sizeHeatmapDataVectors.secondary-1);for(let u=n;u<=a;u+=1){const d=u-t.startPrimary,f=t.values[d],y=(u-i.iFirstVector.primary)*i.sizeHeatmapDataVectors.secondary;for(let m=o;m<=l;m+=1){const p=m-t.startSecondary,x=m-i.iFirstVector.secondary,b=f[p];s[y+x]=b}}});else{const i=r[0],s=e(i);for(let n=0;n<t.lengthPrimary;n+=1){const a=n*i.sizeHeatmapDataVectors.secondary;s.set(t.values[n],a)}}},hT=(r,t,e)=>{var i,s;const n=(i=r.gl2)===null||i===void 0?void 0:i.ctx;if(n)return r.fO(null,n.RED,!1,!0,{x:t,y:e},!1,n.FLOAT,n.R32F);const a=r.gl;return!((s=r.gl1)===null||s===void 0)&&s.optional.OES_texture_float?r.fO(null,a.LUMINANCE,!1,!0,{x:t,y:e},!1,a.FLOAT):r.fO(null,a.RGBA,!1,!0,{x:t,y:e},!1,a.UNSIGNED_BYTE)},lT=(r,t,e,i)=>{t.forEach((s,n)=>{var a,o;const l=e(n),u=i(n),d=r.gl;d.bindTexture(d.TEXTURE_2D,u),d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);const f=(a=r.gl2)===null||a===void 0?void 0:a.ctx,y=s.dataInvalidationRanges.length,m=s.dataInvalidationRanges.reduce((p,x)=>p+x.tileInvalidationLength.primary,0)/n.sizeHeatmapDataVectors.primary;y===1&&m<1||m<.5&&y<10?s.dataInvalidationRanges.forEach(p=>{var x;const b=p.tileInvalidationOffset.primary*n.sizeHeatmapDataVectors.secondary,v=b+p.tileInvalidationLength.primary*n.sizeHeatmapDataVectors.secondary;if(f)f.texSubImage2D(d.TEXTURE_2D,0,0,p.tileInvalidationOffset.primary,n.sizeHeatmapDataVectors.secondary,p.tileInvalidationLength.primary,f.RED,f.FLOAT,l.subarray(b,v));else if(!((x=r.gl1)===null||x===void 0)&&x.optional.OES_texture_float)d.texSubImage2D(d.TEXTURE_2D,0,0,p.tileInvalidationOffset.primary,n.sizeHeatmapDataVectors.secondary,p.tileInvalidationLength.primary,d.LUMINANCE,d.FLOAT,l.subarray(b,v));else{const R=new Uint8Array(l.buffer).subarray(4*b,4*v);d.texSubImage2D(d.TEXTURE_2D,0,0,p.tileInvalidationOffset.primary,n.sizeHeatmapDataVectors.secondary,p.tileInvalidationLength.primary,d.RGBA,d.UNSIGNED_BYTE,R)}}):f?f.texImage2D(d.TEXTURE_2D,0,f.R32F,n.sizeHeatmapDataVectors.secondary,n.sizeHeatmapDataVectors.primary,0,f.RED,f.FLOAT,l):!((o=r.gl1)===null||o===void 0)&&o.optional.OES_texture_float?d.texImage2D(d.TEXTURE_2D,0,d.LUMINANCE,n.sizeHeatmapDataVectors.secondary,n.sizeHeatmapDataVectors.primary,0,d.LUMINANCE,d.FLOAT,l):d.texImage2D(d.TEXTURE_2D,0,d.RGBA,n.sizeHeatmapDataVectors.secondary,n.sizeHeatmapDataVectors.primary,0,d.RGBA,d.UNSIGNED_BYTE,new Uint8Array(l.buffer)),d.bindTexture(d.TEXTURE_2D,null)})};class r6 extends Ah{constructor(t,e,i,s,n,a){super(t,e,i,s,n),this.uU=Wt("bilinear"),this.Pi={x:0,y:0},this.$w={x:1,y:1},this.gv=bs.lineStyle,this.engine=t;const o=a.dataOrder==="columns"?a.columns:a.rows,l=a.dataOrder==="columns"?a.rows:a.columns;this.Un={...a,primaryDimensionVectorsCount:o,secondaryDimensionVectorsCount:l}}xv(t){return this.uU.S(t),this}Mv(){return this.uU.M()}Sv(t,e){return this.Pi=t,this.$w=e,this}vv(){return{start:this.Pi,step:this.$w,end:{x:this.Pi.x+this.$w.x*this.Un.columns,y:this.Pi.y+this.$w.y*this.Un.rows}}}mv(t){return this.gv=typeof t=="function"?t(this.gv):t,this}bv(){return this.gv}}class Z0 extends r6{constructor(t,e,i,s,n,a,o,l){super(t,e,i,s,n,a),this.aE=new cr,this.bG={},this.cU=[],this.dU=!1,this.Qa=!1,this.AN=Ds({fillStyleSolid:()=>ce(this.be)&&this.be,fillStylePaletted:()=>wi(this.be)&&this.be,wireframeStyleLine:()=>As(this.gv)&&this.gv,wireframeStyleFill:()=>{const p=this.gv&&this.gv.getFillStyle();return ce(p)&&p}}),this.fU=i6,this.rN=t,this.nN=e,this.gN=o,this.mN=l,this.RR=t.oN(),this.nN=e;const u=Math.min(this.RR.zR,a.AU!==void 0?a.AU:2048),d={x:Math.min(u,this.Un.primaryDimensionVectorsCount),y:Math.min(u,this.Un.secondaryDimensionVectorsCount)},f=((p,x,b,v)=>{const R=[],E=b(p.primaryDimensionVectorsCount,x.x),V=b(p.secondaryDimensionVectorsCount,x.y);let F;return E.forEach(L=>V.forEach(z=>{const B={iFirstVector:{primary:L.start,secondary:z.start},iFirstUniqueVector:{primary:L.startUnique,secondary:z.startUnique},sizeHeatmapDataVectors:{primary:L.sizeData,secondary:z.sizeData},sizeUniqueHeatmapDataVectors:{primary:L.sizeUniqueData,secondary:z.sizeUniqueData}};R.push(B)})),F=[],R.forEach(L=>{let z=F.find(B=>B.sizeHeatmapData.primary===L.sizeHeatmapDataVectors.primary&&B.sizeHeatmapData.secondary===L.sizeHeatmapDataVectors.secondary);z||(z={sizeHeatmapData:L.sizeHeatmapDataVectors,tiles:[]},F.push(z)),z.tiles.push(L)}),{gridTiles:R,gridTileSizes:F}})(this.Un,d,this.fU),y=f.gridTiles.map(p=>{const x=new Float32Array(p.sizeHeatmapDataVectors.primary*p.sizeHeatmapDataVectors.secondary);return{...p,intensityData:x,hasIntensityData:!1}}),m=f.gridTileSizes.map(p=>({...p,tiles:y.filter(x=>x.sizeHeatmapDataVectors.primary===p.sizeHeatmapData.primary&&x.sizeHeatmapDataVectors.secondary===p.sizeHeatmapData.secondary)}));this.gU={gridTiles:y,gridTileSizes:m},this.Sv(this.Pi,this.$w)}Ps(){const t=this.cU,e=this.be,i=this.ta(),s=this.gv,n=s!==this.mU,a=this.AN.fillStylePaletted(i),o=this.AN.fillStyleSolid(i),l=this.uU.i,u=this.uU.M(),d=this.Qa,f=this.Bo.M();this.yU=this.yU||this.pU();const y=this.yU,m=aT(t,y,d?"intensity":void 0,x=>x.sizeHeatmapDataVectors);m.size>0&&(lT(this.RR,m,x=>x.intensityData,x=>x.intensityDataTexture),this.dU=!0),this.aE.mV(this.dt);const p=this.bG;if((i||l)&&(p.tile=a?{renderMode:"paletted",fillStylePaletted:a,shader:this.RR.oz(j["2D"],j.ColorGrid2D({heatmapType:"intensity",interpolation:u==="bilinear"&&"bilinear",flipXY:this.Un.dataOrder==="rows",intensityTextureType:this.RR.sz?"float":"ubyte",littleEndian:this.RR.IS_MACHINE_LITTLE_ENDIAN,lut:a.lut}),j.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:Pt(this.dt),flipXY:this.Un.dataOrder==="rows",normalSource:void 0}))}:o?{renderMode:"solid",fillStyleSolid:o,shader:this.RR.oz(j["2D"],j.Color({dataType:"uniform"}),j.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:Pt(this.dt),flipXY:this.Un.dataOrder==="rows",normalSource:void 0}))}:void 0),n){const x=this.AN.wireframeStyleLine(n),b=this.AN.wireframeStyleFill(n);p.wireframe=x&&b?x.getThickness()===-1?{renderMode:"primitive",shader:this.RR.oz(j["2D"],j.Color({dataType:"uniform"}),j.VertexLocation({translation:{dataType:"uniform",sizeUnit:"axis"},scaling:{dataType:"uniform"},flipXY:this.Un.dataOrder==="rows",axisWorldTranslation:Pt(this.dt),normalSource:void 0})),fillStyleSolid:b}:{renderMode:"triangulated",shader:this.RR.oz(j["2D"],j.Color({dataType:"uniform"}),j.LineInstanced2D({translation:{dataType:"uniform",sizeUnit:"axis"},scaling:{dataType:"uniform"},flipXY:this.Un.dataOrder==="rows",axisWorldTranslation:Pt(this.dt),normalSource:void 0})),geometry:eu(this.RR,1),solidLine:x,fillStyleSolid:b}:void 0,p.wireframe?this.SU=this.SU||this.vU():this.SU&&(this.RR.yV(this.SU.wireframeCoordinatesBuffer),this.SU=void 0)}if(p.mousePicking=f?this.bG.mousePicking||{shader:this.RR.oz(j["2D"],j.MousePicking,j.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:Pt(this.dt),flipXY:this.Un.dataOrder==="rows",normalSource:void 0}))}:void 0,this.bG=p,this.Ja===void 0&&a&&a.lookUpProperty==="value"&&a.lut.percentageValues){let x=Mt,b=Dt;this.yU.gridTiles.forEach(v=>{for(let R=0;R<v.intensityData.length;R+=1){const E=v.intensityData[R];E<x&&(x=E),E>b&&(b=E)}}),this.Ja={min:x,max:b}}return this.Qa=!1,this.cU.length=0,this.ha(e),this.mU=s,this.uU.i=!1,this}pU(){const t=this.gU.gridTiles.map(n=>{const a=hT(this.RR,n.sizeHeatmapDataVectors.secondary,n.sizeHeatmapDataVectors.primary);return{...n,intensityDataTexture:a,tileData:n}}),e=this.gU.gridTileSizes.map(n=>({...n,tiles:t.filter(a=>a.sizeHeatmapDataVectors.primary===n.sizeHeatmapData.primary&&a.sizeHeatmapDataVectors.secondary===n.sizeHeatmapData.secondary)})),i=this.RR.nV([0,0,1,0,0,1,1,1]),s=this.RR.gl.TRIANGLE_STRIP;return{gridTiles:t,gridTileSizes:e,rectangleLocationsBuffer:i,rectangleLocationsDrawMode:s,rectangleLocationsDrawLength:4}}vU(){const t=this.Un.primaryDimensionVectorsCount+1+this.Un.secondaryDimensionVectorsCount+1,e=new Float32Array(4*t);let i=0;for(let s=0;s<this.Un.primaryDimensionVectorsCount+1;s+=1)e[i+0]=s,e[i+1]=0,e[i+2]=s,e[i+3]=this.Un.secondaryDimensionVectorsCount,i+=4;for(let s=0;s<this.Un.secondaryDimensionVectorsCount+1;s+=1)e[i+0]=0,e[i+1]=s,e[i+2]=this.Un.primaryDimensionVectorsCount,e[i+3]=s,i+=4;return{wireframeCoordinatesBuffer:this.RR.nV(e),wireframeSegmentsLength:t}}Sv(t,e){super.Sv(t,e);const i=this.Un,s=Kt({x:Math.min(this.Pi.x,this.Pi.x+i.columns*this.$w.x),y:Math.min(this.Pi.y,this.Pi.y+i.rows*this.$w.y)},{x:Math.max(this.Pi.x,this.Pi.x+i.columns*this.$w.x),y:Math.max(this.Pi.y,this.Pi.y+i.rows*this.$w.y)}),n=new Map;return this.gU.gridTiles.forEach(a=>{const o=this.Un.dataOrder==="columns"?{x:this.Pi.x+this.$w.x*a.iFirstVector.primary,y:this.Pi.y+this.$w.y*a.iFirstVector.secondary}:{x:this.Pi.x+this.$w.x*a.iFirstVector.secondary,y:this.Pi.y+this.$w.y*a.iFirstVector.primary},l=this.Un.dataOrder==="columns"?{x:this.$w.x*a.sizeHeatmapDataVectors.primary,y:this.$w.y*a.sizeHeatmapDataVectors.secondary}:{x:this.$w.x*a.sizeHeatmapDataVectors.secondary,y:this.$w.y*a.sizeHeatmapDataVectors.primary},u=this.Un.dataOrder==="columns"?{x:this.Pi.x+this.$w.x*a.iFirstUniqueVector.primary,y:this.Pi.y+this.$w.y*a.iFirstUniqueVector.secondary}:{x:this.Pi.x+this.$w.x*a.iFirstUniqueVector.secondary,y:this.Pi.y+this.$w.y*a.iFirstUniqueVector.primary},d=this.Un.dataOrder==="columns"?{x:this.$w.x*a.sizeUniqueHeatmapDataVectors.primary,y:this.$w.y*a.sizeUniqueHeatmapDataVectors.secondary}:{x:this.$w.x*a.sizeUniqueHeatmapDataVectors.secondary,y:this.$w.y*a.sizeUniqueHeatmapDataVectors.primary};n.set(a,{startLocationAxis:o,sizeAxis:l,startRenderLocationAxis:u,renderSizeAxis:d})}),this.bU={boundaries:s,tilesInfo:n},this}zL(t){var e,i;const s=this.yU,n=this.bU,a=t===1?(e=this.bG.mousePicking)===null||e===void 0?void 0:e.shader:(i=this.bG.tile)===null||i===void 0?void 0:i.shader;if(this.bG.tile&&a&&s&&n){const d=a,f=this.bG.tile,y={x:(n.boundaries.max.x-n.boundaries.min.x)*Math.sign(this.$w.x),y:(n.boundaries.max.y-n.boundaries.min.y)*Math.sign(this.$w.y)},m={x:y.x/this.Un.columns,y:y.y/this.Un.rows},p=this.dt.Wi(),x={x:m.x/p.x,y:m.y/p.y};if(f.renderMode==="solid"||t===1)this.RR.jR(d).aV(d,(b,v,R)=>{if(t===1)this.RR.AR(b("uColor"),this.mN);else if(f.renderMode==="solid"){const{fillStyleSolid:E}=f;this.RR.AR(b("uColor"),E.getColor())}return this.RR.dV(b("uIsHighlighted"),t===1||t===2?0:this.zo).AR(b("uHighlightColorOffset"),t===1||t===2?Je:this.Go).dV(b("uRenderEffectMask"),t===2?1:0).uV(b("uScale"),this.aE.fV()).uV(b("uDisp"),this.aE.AV()).lV(s.rectangleLocationsBuffer,void 0,{location:v("aPos"),size:2}).uV(b("uScaling"),[this.$w.x*this.Un.columns,this.$w.y*this.Un.rows]).uV(b("uTranslationAxis"),[this.Pi.x,this.Pi.y]).Ky(s.rectangleLocationsDrawMode,s.rectangleLocationsDrawLength),!0});else if(f.renderMode==="paletted"){const{fillStylePaletted:b}=f,v=this.Ja;this.RR.aV(d,(R,E,V)=>{let F=!1;var L,z;return this.RR.jR(d).uV(R("uScale"),this.aE.fV()).uV(R("uDisp"),this.aE.AV()).LO(V,b.lut,v).lV(s.rectangleLocationsBuffer,void 0,{location:E("aPos"),size:2}).dV(R("uIsHighlighted"),this.zo).AR(R("uHighlightColorOffset"),t===2?Je:this.Go).dV(R("uRenderEffectMask"),t===2?1:0),L=B=>{this.RR.uV(R("uTileDimensions"),[this.Un.dataOrder==="columns"?B.sizeHeatmapData.primary:B.sizeHeatmapData.secondary,this.Un.dataOrder==="columns"?B.sizeHeatmapData.secondary:B.sizeHeatmapData.primary])},z=(B,A)=>{const T=n.tilesInfo.get(B.tileData);if(!T)return;let w;const C=this.RR.$z();if(this.uU.M()==="bilinear"){const k=(this.dt.x.ct(T.startLocationAxis.x)+x.x/2)*C,_=(this.dt.y.ct(T.startLocationAxis.y)+x.y/2)*C;w=[k,_,(this.dt.x.ct(T.startLocationAxis.x+T.sizeAxis.x)-x.x/2)*C-k,(this.dt.y.ct(T.startLocationAxis.y+T.sizeAxis.y)-x.y/2)*C-_]}else{const k=this.dt.x.ct(T.startLocationAxis.x)*C,_=this.dt.y.ct(T.startLocationAxis.y)*C;w=[k,_,this.dt.x.ct(T.startLocationAxis.x+T.sizeAxis.x)*C-k,this.dt.y.ct(T.startLocationAxis.y+T.sizeAxis.y)*C-_]}this.RR.FV(R("uTileBounds"),w).uV(R("uScaling"),[T.renderSizeAxis.x,T.renderSizeAxis.y]).uV(R("uTranslationAxis"),[T.startRenderLocationAxis.x,T.startRenderLocationAxis.y]).cV(R("uTileIntensityValues"),B.intensityDataTexture,1).Ky(s.rectangleLocationsDrawMode,s.rectangleLocationsDrawLength),F=!0},s.gridTileSizes.forEach(B=>{L(B),B.tiles.forEach(A=>{z(A)})}),F})}}const o=this.SU,l=this.bG.wireframe,u=t===1||l==null?void 0:l.shader;if(o&&l&&u&&l.renderMode==="primitive"){const{fillStyleSolid:d}=l;this.RR.jR(u).aV(u,(f,y,m)=>((this.dt instanceof xe||this.dt instanceof Js)&&this.RR.uV(f("uScale"),this.aE.fV()).uV(f("uDisp"),this.aE.AV()),this.RR.dV(f("uIsHighlighted"),t===1||t===2?0:this.zo).AR(f("uHighlightColorOffset"),t===1||t===2?Je:this.Go).dV(f("uRenderEffectMask"),t===2?1:0).AR(f("uColor"),d.getColor()).lV(o.wireframeCoordinatesBuffer,void 0,{location:y("aPos"),size:2}).uV(f("uScaling"),[this.$w.x,this.$w.y]).uV(f("uTranslationAxis"),[this.Pi.x,this.Pi.y]).Ky(this.RR.gl.LINES,2*o.wireframeSegmentsLength),!0))}else if(o&&l&&u&&l.renderMode==="triangulated"){const{geometry:d,solidLine:f,fillStyleSolid:y}=l;this.RR.jR(u).aV(u,(m,p,x)=>((this.dt instanceof xe||this.dt instanceof Js)&&this.RR.uV(m("uScale"),this.aE.fV()).uV(m("uDisp"),this.aE.AV()),this.RR.dV(m("uIsHighlighted"),t===1||t===2?0:this.zo).AR(m("uHighlightColorOffset"),t===1||t===2?Je:this.Go).dV(m("uRenderEffectMask"),t===2?1:0).AR(m("uColor"),y.getColor()).dV(m("uThicknessPixels"),f.getThickness()).uV(m("uRatioPxClip"),[2/this.us.oi().x,2/this.us.oi().y]).lV(o.wireframeCoordinatesBuffer,1,{location:p("aLocationA"),size:2},{location:p("aLocationB"),size:2}).uV(m("uScaling"),[this.$w.x,this.$w.y]).uV(m("uTranslationAxis"),[this.Pi.x,this.Pi.y]),d.jR(x,!1).Ky(o.wireframeSegmentsLength),!0))}return this}_v(t){return this.cU.push(t),oT(this.gU.gridTiles,t,e=>(e.hasIntensityData=!0,e.intensityData)),this.Ja=void 0,this}Nt(){return this.dU&&(this.gU.gridTiles.forEach(t=>{t.intensityData.fill(0),t.hasIntensityData=!1}),this.Qa=!0,this.dU=!1,this.Ja=void 0),this}dispose(){super.dispose();const t=this.yU;t&&(t.gridTiles.forEach(i=>{this.RR.OR(i.intensityDataTexture)}),t.gridTiles.length=0,t.gridTileSizes.forEach(i=>{}),t.gridTileSizes.length=0,this.RR.yV(t.rectangleLocationsBuffer)),this.yU=void 0;const e=this.SU;return e&&this.RR.yV(e.wireframeCoordinatesBuffer),this.SU=void 0,this.bG={},this}VR(){return this.dispose(),this}lN(t){return this.gN===t&&{}}Hc(t){const e=t,i=this.Un.dataOrder==="columns"?e.x:e.y,s=this.Un.dataOrder==="columns"?e.y:e.x,n=this.Un.dataOrder==="columns"?this.Pi.x:this.Pi.y,a=this.Un.dataOrder==="columns"?this.Pi.y:this.Pi.x;let o=(i-n)/(this.Un.dataOrder==="columns"?this.$w.x:this.$w.y),l=(s-a)/(this.Un.dataOrder==="columns"?this.$w.y:this.$w.x);o=Math.floor(Zt(o,0,this.Un.primaryDimensionVectorsCount-1)),l=Math.floor(Zt(l,0,this.Un.secondaryDimensionVectorsCount-1));const u=this.xU(o,l),d=this.Un.dataOrder==="columns"?{x:this.Pi.x+(o+.5)*this.$w.x,y:this.Pi.y+(l+.5)*this.$w.y}:{x:this.Pi.x+(l+.5)*this.$w.x,y:this.Pi.y+(o+.5)*this.$w.y},f=this.Un.dataOrder==="columns"?o:l,y=this.Un.dataOrder==="columns"?l:o;return{x:d.x,y:d.y,column:f,row:y,cellValue:u}}zx(t){const e=this.bU;if(!e||t.x<e.boundaries.min.x||t.x>e.boundaries.max.x||t.y<e.boundaries.min.y||t.y>e.boundaries.max.y)return;const i=t,s=this.Un.dataOrder==="columns"?i.x:i.y,n=this.Un.dataOrder==="columns"?i.y:i.x,a=this.Un.dataOrder==="columns"?this.Pi.x:this.Pi.y,o=this.Un.dataOrder==="columns"?this.Pi.y:this.Pi.x,l=this.Un.dataOrder==="columns"?this.$w.x:this.$w.y,u=this.Un.dataOrder==="columns"?this.$w.y:this.$w.x,d=Zt((s-a)/l-.5,0,this.Un.primaryDimensionVectorsCount-1),f=Zt((n-o)/u-.5,0,this.Un.secondaryDimensionVectorsCount-1),y=Zt(Math.ceil(d)-1,0,this.Un.primaryDimensionVectorsCount-1),m=Zt(Math.ceil(f)-1,0,this.Un.secondaryDimensionVectorsCount-1),p={point:{x:y,y:m},value:this.xU(y,m)},x={point:{x:y,y:m+1},value:this.xU(y,m+1)},b={point:{x:y+1,y:m},value:this.xU(y+1,m)},v={point:{x:y+1,y:m+1},value:this.xU(y+1,m+1)},R=iE({x:d,y:f},p,x,b,v);if(R===void 0)return;const E=Zt(Math.floor(d+.5),0,this.Un.primaryDimensionVectorsCount-1),V=Zt(Math.floor(f+.5),0,this.Un.secondaryDimensionVectorsCount-1),F=this.Un.dataOrder==="columns"?E:V,L=this.Un.dataOrder==="columns"?V:E,z=t;return{x:z.x,y:z.y,column:F,row:L,cellValue:R}}xU(t,e){for(let i=0;i<this.gU.gridTiles.length;i+=1){const s=this.gU.gridTiles[i];if(t>=s.iFirstVector.primary&&t<=s.iFirstVector.primary+s.sizeHeatmapDataVectors.primary-1&&e>=s.iFirstVector.secondary&&e<=s.iFirstVector.secondary+s.sizeHeatmapDataVectors.secondary-1){const n=t-s.iFirstVector.primary,a=e-s.iFirstVector.secondary,o=n*s.sizeHeatmapDataVectors.secondary+a;return s.intensityData[o]}}return 0}bt(){var t;return((t=this.bU)===null||t===void 0?void 0:t.boundaries.max.x)||0}vt(){var t;return((t=this.bU)===null||t===void 0?void 0:t.boundaries.min.x)||0}Mt(){var t;return((t=this.bU)===null||t===void 0?void 0:t.boundaries.max.y)||0}xt(){var t;return((t=this.bU)===null||t===void 0?void 0:t.boundaries.min.y)||0}vl(){return 0}bl(){return 0}D_(){const t=[];return this.gU.gridTiles.forEach(e=>{if(!e.hasIntensityData)return;const i=new Array(e.sizeUniqueHeatmapDataVectors.primary).fill(0).map(s=>new Array(e.sizeUniqueHeatmapDataVectors.secondary).fill(0));for(let s=0;s<e.sizeUniqueHeatmapDataVectors.primary;s+=1){const n=s*e.sizeHeatmapDataVectors.secondary,a=i[s];for(let o=0;o<e.sizeUniqueHeatmapDataVectors.secondary;o+=1){const l=e.intensityData[n+o];a[o]=l}}t.push({type:"intensity",startPrimary:e.iFirstUniqueVector.primary,startSecondary:e.iFirstUniqueVector.secondary,lengthPrimary:e.sizeUniqueHeatmapDataVectors.primary,lengthSecondary:e.sizeUniqueHeatmapDataVectors.secondary,values:i})}),t}}class n6 extends Ah{constructor(t,e,i,s,n,a){super(t,e,i,s,n),this.Pi={x:0,y:0},this.$w={x:1,y:1},this.gv=bs.lineStyle,this.pu=Wt(void 0),this.uU=Wt("bilinear"),this.engine=t,this.Un=a}Sv(t,e){return this.Pi=t,this.$w=e,this}vv(){return{start:this.Pi,step:this.$w}}mv(t){return this.gv=typeof t=="function"?t(this.gv):t,this}bv(){return this.gv}Su(t){return this.pu.S(t),this}vu(){return this.pu.M()}xv(t){return this.uU.S(t),this}Mv(){return this.uU.M()}}class a6 extends n6{constructor(t,e,i,s,n,a,o,l){super(t,e,i,s,n,l),this.MU=0,this.QM=[],this.rN=t,this.nN=e,this.gN=a,this.mN=o,this.RR=t.oN(),this.nN=e,this.Ya=l.scrollDimension==="columns"?Kt({x:this.Pi.x,y:this.Pi.y},{x:this.Pi.x,y:this.Pi.y+l.resolution*this.$w.y}):Kt({x:this.Pi.x,y:this.Pi.y},{x:this.Pi.x+l.resolution*this.$w.x,y:this.Pi.y}),this._U={dataPerSegment:2048}}Ps(){this.bW||(this.Oo.push({type:"DataPattern",args:{pattern:this.Un.scrollDimension==="columns"?this.$w.x>0?"ProgressiveX":"RegressiveX":this.$w.y>0?"ProgressiveY":"RegressiveY",regularProgressiveStep:!0}}),this.bW=new nT(this.dt,this));const t=this.bW.fW(this.QM,this.pu.M());if(t>0){for(let i=0;i<t;i+=1)this.QM[0].shape.dispose().VR(),this.QM.shift();this.Un.scrollDimension==="columns"?this.Ya.min.x=this.QM.length>0?this.QM[0].boundaries.min.x:Mt:this.Ya.min.y=this.QM.length>0?this.QM[0].boundaries.min.y:Mt}this.QM.forEach(i=>i.shape.Ps());const e=this.QM.reduce((i,s)=>{var n,a;return i.min=Math.min(i.min,Fe((n=s.shape.Ja)===null||n===void 0?void 0:n.min,Mt)),i.max=Math.max(i.max,Fe((a=s.shape.Ja)===null||a===void 0?void 0:a.max,Dt)),i},{min:Mt,max:Dt});return this.QM.forEach(i=>{i.shape.Ja=e}),this.pu.i=!1,this}zL(t){return this.QM.forEach(e=>e.shape.zL(t)),this}Fv(t){if(t.length===0)return this;let e=0;const i=this._U.dataPerSegment,s=t.length;do{let n=this.QM[this.QM.length-1],a=n?i-(n.existingDataPointsCount+(n.hasJoint?1:0)):0,o=!1;if(!n||a===0){const y={columns:this.Un.scrollDimension==="columns"?i:this.Un.resolution,rows:this.Un.scrollDimension==="rows"?i:this.Un.resolution,heatmapDataType:this.Un.heatmapDataType,dataOrder:this.Un.scrollDimension};let m=this.Un.scrollDimension==="columns"?{x:this.Pi.x+this.$w.x*this.MU,y:this.Pi.y}:{x:this.Pi.x,y:this.Pi.y+this.$w.y*this.MU};this.QM.length>0&&(m=this.Un.scrollDimension==="columns"?{x:m.x-1*this.$w.x,y:m.y}:{x:m.x,y:m.y-1*this.$w.y},o=!0);const p=new Z0(this.rN,this.nN,this.dt,re,[],y,this.gN,this.mN).xv(this.uU.M()).Ce(this.be).mv(this.gv).Sv(m,this.$w);n={shape:p,existingDataPointsCount:0,existingCoordinatesCount:0,allocatedCoordinatesCount:i,dataStartIndex:this.MU,hasJoint:!1,boundaries:{min:{x:p.vt(),y:p.xt()},max:{x:p.bt(),y:p.Mt()}}},this.QM.push(n),a=i-(o?1:0)}const l=s-e,u=Math.min(a,l),d=t.slice(e,e+u),f={type:"intensity",values:d,startPrimary:n.existingDataPointsCount+(n.hasJoint?1:0),startSecondary:0,lengthPrimary:u,lengthSecondary:this.Un.resolution};o&&(f.values.unshift(this.wU),f.lengthPrimary+=1,n.hasJoint=!0),n.shape._v(f),n.existingDataPointsCount+=u,n.existingCoordinatesCount+=u+(o?1:0),this.wU=d[d.length-1],this.MU+=u,e+=u}while(e<s);return this.Ya.max=this.Un.scrollDimension==="columns"?{...this.Ya.max,x:this.Pi.x+this.MU*this.$w.x}:{...this.Ya.max,y:this.Pi.y+this.MU*this.$w.y},this}_v(t,e){const i=t,s=t+e.length-1,n=e[0].length;this.QM.forEach(o=>{const l=o.dataStartIndex,u=o.dataStartIndex+o.existingDataPointsCount-1;if(s<l||i>u)return;const d=i-l,f=Math.min(s,u),y=f-d+1,m=e.slice(d-i,f-i+1),p={type:"intensity",startSecondary:0,lengthSecondary:n,startPrimary:d,lengthPrimary:y,values:m};o.shape._v(p)});const a=this.MU-1;if(s>a){const o=s-a,l=e.slice(-o);if(l.length<o){const u=this.wU||new Array(n).fill(0);for(let d=l.length;d<o;d+=1)l.unshift(u)}this.Fv(l)}return this}O_(){return this.MU}Nt(){return this.QM.forEach(t=>{t.shape.dispose().VR()}),this.QM.length=0,this.Ya=this.Un.scrollDimension==="columns"?Kt({x:this.Pi.x,y:this.Pi.y},{x:this.Pi.x,y:this.Pi.y+this.Un.resolution*this.$w.y}):Kt({x:this.Pi.x,y:this.Pi.y},{x:this.Pi.x+this.Un.resolution*this.$w.x,y:this.Pi.y}),this.MU=0,this.wU=void 0,this}Sv(t,e){return super.Sv(t,e),this.QM.forEach((i,s)=>{const n={x:t.x+i.dataStartIndex*e.x,y:t.y+i.dataStartIndex*e.y};i.shape.Sv(n,e),i.boundaries={min:{x:i.shape.vt(),y:i.shape.xt()},max:{x:i.shape.bt(),y:i.shape.Mt()}}}),this.QM.length>0?this.Ya=qs(...this.QM.map(i=>i.boundaries)):this.Ya=this.Un.scrollDimension==="columns"?Kt({x:this.Pi.x,y:this.Pi.y},{x:this.Pi.x,y:this.Pi.y+this.Un.resolution*this.$w.y}):Kt({x:this.Pi.x,y:this.Pi.y},{x:this.Pi.x+this.Un.resolution*this.$w.x,y:this.Pi.y}),this}Ce(t){return super.Ce(t),this.QM.forEach(e=>e.shape.Ce(this.be)),this}mv(t){return super.mv(t),this.QM.forEach(e=>e.shape.mv(this.gv)),this}xv(t){return super.xv(t),this.QM.forEach(e=>e.shape.xv(t)),this}dispose(){return super.dispose(),this.QM.forEach(t=>t.shape.dispose()),this}setVisible(t){return super.setVisible(t),this.QM.forEach(e=>e.shape.setVisible(t)),this}VR(){return this.QM.forEach(t=>t.shape.VR()),this}lN(t){return this.gN===t&&{}}Hc(t){const e=gt(t,this.dt,this.engine.dt),i=this.QM.reduce((s,n)=>{const a=n.shape.Hc(t);if(a){const o=fb(gt(a,this.dt,this.engine.dt),e);if(s===void 0||o<s.distance)return{result:a,distance:o,segment:n}}return s},void 0);if(i&&i.result){const s=this.Un.scrollDimension==="columns"?i.result.column+i.segment.dataStartIndex:i.result.column,n=this.Un.scrollDimension==="rows"?i.result.row+i.segment.dataStartIndex:i.result.row;return this.Un.scrollDimension==="columns"&&s>=this.MU||this.Un.scrollDimension==="rows"&&n>=this.MU?void 0:{x:i.result.x,y:i.result.y,column:s,row:n,cellValue:i.result.cellValue}}}zx(t){const e=gt(t,this.dt,this.engine.dt),i=this.QM.reduce((s,n)=>{const a=n.shape.zx(t);if(a){const o=fb(gt(a,this.dt,this.engine.dt),e);if(s===void 0||o<s.distance)return{result:a,distance:o,segment:n}}return s},void 0);if(i&&i.result){const s=this.Un.scrollDimension==="columns"?i.result.column+i.segment.dataStartIndex:i.result.column,n=this.Un.scrollDimension==="rows"?i.result.row+i.segment.dataStartIndex:i.result.row;return this.Un.scrollDimension==="columns"&&s>=this.MU||this.Un.scrollDimension==="rows"&&n>=this.MU?void 0:{x:i.result.x,y:i.result.y,column:s,row:n,cellValue:i.result.cellValue}}}bt(){return this.Ya.max.x}vt(){return this.Ya.min.x}Mt(){return this.Ya.max.y}xt(){return this.Ya.min.y}vl(){return 0}bl(){return 0}cs(t){return super.cs(t),this.QM.forEach(e=>e.shape.cs(t)),this}}class o6 extends Ah{constructor(t,e,i,s,n,a){super(t,e,i,s,n),this.uU=Wt("bilinear"),this.gv=bs.lineStyle,this.Un=a}xv(t){return this.uU.S(t),this}Mv(){return this.uU.M()}mv(t){return this.gv=typeof t=="function"?t(this.gv):t,this}bv(){return this.gv}}class h6 extends o6{constructor(t,e,i,s,n,a,o,l){super(t,e,i,s,n,a),this.aE=new cr,this.bG={},this.AN=Ds({fillStyleSolid:()=>ce(this.be)&&this.be,fillStylePaletted:()=>wi(this.be)&&this.be}),this.rN=t,this.nN=e,this.gN=o,this.mN=l,this.RR=t.oN(),this.nN=e,this.I_=new Z0(this.rN,t.CU,t.dt,re,[],{columns:a.sectors,rows:a.annuli,heatmapDataType:"intensity",dataOrder:a.dataOrder==="annuli"?"rows":"columns",AU:this.RR.zR},-1,hh).mv(vt);const u=2*Math.PI/360,d=new Float32Array(724);let f=0;d[f+0]=0,d[f+1]=0,f+=2;for(let y=0;y<=360;y+=1){const m=y*u,p=Math.cos(m),x=Math.sin(m);d[f+0]=p,d[f+1]=x,f+=2}this.kU={vertexBuffer:this.RR.nV(d),drawMode:this.RR.gl.TRIANGLE_FAN,drawLength:362}}Ps(){const t=this.ta(),e=this.be,i=this.AN.fillStyleSolid(t),s=this.AN.fillStylePaletted(t),n=i||s,a=this.uU.M(),o=this.uU.i,l=this.Bo.M(),u=this.Bo.i;return this.aE.mV(this.dt),this.I_.Ps(),this.I_.yU?((t||o)&&(this.bG.fill=n?{shader:this.RR.oz(j["2D"],j.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:Pt(this.dt),normalSource:void 0}),s&&j.PolarHeatmap({interpolation:a==="bilinear"&&"bilinear",intensityTextureType:this.RR.sz?"float":"ubyte",littleEndian:this.RR.IS_MACHINE_LITTLE_ENDIAN,flipXY:this.Un.dataOrder==="sectors",lut:s.lut}),i&&j.PolarHeatmap({dataType:"uniform"})),fillStylePaletted:s,fillStyleSolid:i}:void 0),u&&(this.bG.mousePicking=l?{shader:this.RR.oz(j["2D"],j.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:Pt(this.dt),normalSource:void 0}),j.Color({dataType:"uniform"}))}:void 0),this.ha(e),this.uU.i=!1,this.Bo.i=!1,this):this}zL(t){var e;const{vertexBuffer:i,drawLength:s,drawMode:n}=this.kU,a=this.I_.yU;if(!this.bG.fill||!a)return this;const{fillStylePaletted:o,fillStyleSolid:l}=this.bG.fill,u=t===1?(e=this.bG.mousePicking)===null||e===void 0?void 0:e.shader:this.bG.fill.shader;if(!u)return this;const d=this.dt.mx(),f=Math.min(d.start,d.end),y=Math.max(d.start,d.end),m=Math.min(this.Un.amplitudeStart,this.Un.amplitudeStart+(this.Un.annuli-1)*this.Un.amplitudeStep),p=Math.max(this.Un.amplitudeStart,this.Un.amplitudeStart+(this.Un.annuli-1)*this.Un.amplitudeStep);let x;return x=d.end>d.start?Math.min(p,y)-d.start:Math.max(m,f)-d.start,this.RR.jR(u).aV(u,(b,v,R,E)=>{if(this.RR.uV(b("uScale"),this.aE.fV()).uV(b("uDisp"),this.aE.AV()).dV(b("uIsHighlighted"),t===1||t===2?0:this.zo).AR(b("uHighlightColorOffset"),t===1||t===2?Je:this.Go).dV(b("uRenderEffectMask"),t===2?1:0).uV(E("uViewportSize"),[this.rN.oi().x*this.RR.$z(),this.rN.oi().y*this.RR.$z()]).uV(b("uScaling"),[x,x]).uV(b("uTranslationAxis"),[0,0]).lV(i,void 0,{location:v("aPos"),size:2}).dV(E("uAngleOffset"),this.dt.xx()%(2*Math.PI)).dV(E("uAngleDirection"),this.dt.kx()?1:-1).dV(E("uSectors"),this.Un.sectors).dV(E("uAnnuli"),this.Un.annuli),t===1)this.RR.AR(b("uColor"),this.mN);else{if(this.RR.dV(b("uAmplitudeStart"),this.Un.amplitudeStart).dV(b("uAmplitudeStep"),this.Un.amplitudeStep).dV(b("uAmplitudeAxisStart"),this.dt.mx().start).dV(b("uAmplitudeAxisEnd"),this.dt.mx().end),o){const V=this.I_.Ja;this.RR.LO(R,o.lut,V).cV(b("uTileIntensityValues"),a.gridTiles[0].intensityDataTexture,0)}l&&this.RR.AR(b("uColor"),l.getColor())}return this.RR.Ky(n,s),!0}),this}_v(t){return this.I_._v(t),this}Nt(){return this.I_.Nt(),this}dispose(){return super.dispose(),this.I_.dispose(),this.bG={},this.RR.yV(this.kU.vertexBuffer),this}VR(){return this.dispose(),this}Ce(t){return super.Ce(t),this.I_.Ce(this.be),this}lN(t){return this.gN===t&&{}}Hc(t){const e=this.Un.amplitudeStart,i=this.Un.amplitudeStart+(this.Un.annuli-1)*this.Un.amplitudeStep,s=Math.min(e,i),n=Math.max(e,i);if(t.angle<0||t.angle>360||t.amplitude<s||t.amplitude>n)return;let a=Math.round((t.angle-0)/360*this.Un.sectors);a>=this.Un.sectors&&(a=0);const o=Math.round((t.amplitude-e)/(i-e)*(this.Un.annuli-1));return{iAnnulus:o,iSector:a,cellValue:this.xU(o,a),angle:a*(360/this.Un.sectors),amplitude:e+o*(i-e)/(this.Un.annuli-1)}}zx(t){const e=this.Un.amplitudeStart,i=this.Un.amplitudeStart+(this.Un.annuli-1)*this.Un.amplitudeStep,s=Math.min(e,i),n=Math.max(e,i);if(t.angle<0||t.angle>360||t.amplitude<s||t.amplitude>n)return;const a=(t.angle-0)/360*this.Un.sectors,o=(t.amplitude-e)/(i-e)*(this.Un.annuli-1),l=Math.floor(a),u=Math.floor(o),d={point:{x:u,y:l},value:this.xU(u,l)},f={point:{x:u,y:l+1},value:this.xU(u,l+1)},y={point:{x:u+1,y:l},value:this.xU(u+1,l)},m={point:{x:u+1,y:l+1},value:this.xU(u+1,l+1)},p=iE({x:o,y:a},d,f,y,m);return p!==void 0?{iAnnulus:u,iSector:l,cellValue:p,angle:t.angle,amplitude:t.amplitude}:void 0}xU(t,e){const i=this.Un.dataOrder==="annuli"?t:e,s=this.Un.dataOrder==="annuli"?e:t;for(let n=0;n<this.I_.gU.gridTiles.length;n+=1){const a=this.I_.gU.gridTiles[n];if(i>=a.iFirstVector.primary&&i<=a.iFirstVector.primary+a.sizeHeatmapDataVectors.primary-1&&s>=a.iFirstVector.secondary&&s<=a.iFirstVector.secondary+a.sizeHeatmapDataVectors.secondary-1){const o=i-a.iFirstVector.primary,l=s-a.iFirstVector.secondary,u=o*a.sizeHeatmapDataVectors.secondary+l;return a.intensityData[u]}}return 0}bt(){return 0}vt(){return 0}Mt(){return 0}xt(){return 0}vl(){return 0}bl(){return 0}}class l6 extends tu{constructor(t){super(t);const{vertices:e,drawMode:i,drawSize:s}=this.aG();this.lG=t.nV(e),this.cG=s,this.dG=i}jR(t){return this.RR.lV(this.lG,0,{location:t.attribute("aCurveOrBaseline"),size:1},{location:t.attribute("aSegmentSide"),size:1}),this}Ky(t,e,i){return this.RR.QV(e!==void 0?e:this.dG,i||0,this.cG,t),this}aG(){return{vertices:new Float32Array([1,0,0,0,0,1,0,1,1,1,1,0]),drawMode:this.RR.gl.TRIANGLES,drawSize:6}}kz(){this.RR.yV(this.lG)}}const u6=r=>{let t=r._V.Mz.get(void 0);return t||(t=new l6(r),r._V.Mz.set(void 0,t),t)};class c6 extends N0{constructor(t,e,i,s){super(t,e,i,s,[{type:"DataPattern",args:{pattern:"ProgressiveX"}}]),this.TU=bs.fillStyle,this.FU=bs.fillStyle,this.IU=Wt(qe.Circle),this.PU=Wt(5),this.DU=Wt(0),this.BU=Wt(void 0),this.XC=!0,this.LU={x:0,y:0}}ud(t){return this.TU=kl(this.TU,t),this}ZC(){return this.TU}RU(){return Dl(this.EU,this.TU)}zU(){return Dl(this.VU,this.FU)}ld(t){return this.FU=kl(this.FU,t),Jl(this.FU)&&(this.fd(qe.Square),this.pd(1)),this}yd(){return this.FU}fd(t){return this.IU.S(t),ch(this.IU.M())&&this.pd(1),this}Ad(){return this.IU.M()}pd(t){return this.PU.S(t),this}QC(){return this.PU.M()}gd(t){return this.DU.S(t),this}md(){return this.DU.M()}JC(t){return this.LU=t,this}KC(){return this.LU}$C(t){return this.BU.S(t),this}qC(){return this.BU.M()}}class d6 extends J0{constructor(t,e){super(t,e),this.HG=!1,this.$G={enabled:!1,totalDataPointsAtTime:0},this.jG=t instanceof xe?{type:"linear",scale:t}:{type:"unknown"},this.YG.Uo("DataPattern",i=>{i.allowDataGrouping===!1&&(this.HG=!0)})}OU(t,e){var i,s;const n=t==null?void 0:t.Cc,a=t==null?void 0:t.kc,o=t==null?void 0:t.lc,l=t==null?void 0:t.ac;if(!t||this.HG||!this.GG||this.jG.type!=="linear"||!n||!a||o===void 0||l===void 0||!e)return{cpStateChanged:!1,cpActive:!1};const u=(i=t.wc())===null||i===void 0?void 0:i.x,d=(s=t.Yc())===null||s===void 0?void 0:s.x;if(o<2||u===void 0||d===void 0)return{cpStateChanged:!1,cpActive:!1};const f=this.calculateAvgStepBetweenDataPoints(d,u,o),y=this.jG.scale,m=Math.abs(this.GG==="x"?y.Wi().x:y.Wi().y),p=m/f,x=Math.floor(.8*p),b=x*f,v=x>=4,R=this.$G.enabled?this.$G.columnWidthAxis/m<1.5:void 0,E=this.$G.enabled&&x>this.$G.dataPointsPerColumn?x/this.$G.dataPointsPerColumn>=2:void 0;let V;return this.$G.enabled===!0?R?E&&(V={enabled:!0,columnWidthAxis:b,dataPointsPerColumn:x,totalDataPointsAtTime:o}):V=v?{enabled:!0,columnWidthAxis:b,dataPointsPerColumn:x,totalDataPointsAtTime:o}:{enabled:!1,totalDataPointsAtTime:o}:v&&(V={enabled:!0,columnWidthAxis:b,dataPointsPerColumn:x,totalDataPointsAtTime:o}),this.$G=V||{...this.$G,totalDataPointsAtTime:o},V&&this.Qm(),{cpStateChanged:!!V,cpActive:this.$G.enabled}}NU(t,e){var i,s,n;const a=t.Cc,o=t.kc,l=t.uc,u=t.lc,d=t.ac;if(this.HG||!this.$G.enabled||!a||!o||e===void 0)return;const f=a.length,y=this.$G.columnWidthAxis,m=this.dt.x.getInnerStart(),p=this.dt.x.getInnerEnd(),x=mS(m,p,a,l,u,d,e,1);if(!x)return;const b=a[x.iFirstSampleDataArray];if(this.GU){if(this.GU.iFirstPackedSample<x.iFirstSample){const A=Math.min(Math.floor((b-this.GU.origin)/y),this.GU.packedColumnsCount);if(A>0)if(this.GU.packedColumnsCount-=A,this.GU.packedColumnsCount>0){this.GU.packedDataX.splice(0,2*A),this.GU.packedDataY.splice(0,2*A),this.GU.packedDataColors&&this.GU.packedDataColors.splice(0,2*A),this.GU.packedDataLookupValues&&this.GU.packedDataLookupValues.splice(0,2*A),this.GU.origin+=A*y;const T=bo(this.GU.origin,Math.max(l-1-f+1,0),l-1,C=>a[Ri(C,l,f)]),w=Ri(T,l,f);this.GU.iFirstPackedSample=a[w]>=this.GU.origin?T:T+1}else this.GU=void 0}if(((i=this.GU)===null||i===void 0?void 0:i.iLastPackedSample)!==void 0&&this.GU.iLastPackedSample>x.iLastSample){const A=a[x.iLastSampleDataArray],T=Math.min(Math.floor((this.GU.origin+this.GU.packedColumnsCount*y-A)/y),this.GU.packedColumnsCount);if(T>0)if(this.GU.packedColumnsCount-=T,this.GU.packedColumnsCount>0){for(let k=0;k<2*T;k+=1)this.GU.packedDataX.pop(),this.GU.packedDataY.pop(),this.GU.packedDataColors&&this.GU.packedDataColors.pop(),this.GU.packedDataLookupValues&&this.GU.packedDataLookupValues.pop();const w=bo(this.GU.origin+this.GU.packedColumnsCount*y,Math.max(l-1-f+1,0),l-1,k=>a[Ri(k,l,f)]),C=Ri(w,l,f);this.GU.iLastPackedSample=a[C]<=this.GU.origin+this.GU.packedColumnsCount*y?w:w-1}else this.GU=void 0}}const v=this.GU||{origin:b,packedColumnsCount:0,packedDataX:[],packedDataY:[],packedDataColors:t.Rc?[]:void 0,packedDataLookupValues:t.Lc?[]:void 0,packedDataSize:t.Ec?[]:void 0,packedDataRotation:t.zc?[]:void 0,iFirstPackedSample:x.iFirstSample,iLastPackedSample:void 0},R=(A,T,w)=>{let C=Math.min(A,A+T*y),k=Math.max(A,A+T*y),_=w;const X=[];let N=Dt,U=Dt,O=-1,W=Mt,I=Mt,H=-1,q=0;for(;_<=x.iLastSample&&_>=x.iFirstSample;){const Q=_%f,J=a[Q],ot=o[Q];if(C<=J&&J<=k)q+=1,Number.isNaN(ot)||(ot>U&&(N=J,U=ot,O=_),ot<I&&(W=J,I=ot,H=_)),_+=T;else{if(q>0)N=N===Dt?Number.NaN:N,U=U===Dt?Number.NaN:U,W=W===Mt?Number.NaN:W,I=I===Mt?Number.NaN:I,O<H?(X.push({iFirst:O,iSecond:H}),T>0?(v.packedDataX.push(N),v.packedDataY.push(U),v.packedDataX.push(W),v.packedDataY.push(I)):(v.packedDataX.unshift(W),v.packedDataY.unshift(I),v.packedDataX.unshift(N),v.packedDataY.unshift(U))):(X.push({iFirst:H,iSecond:O}),T>0?(v.packedDataX.push(W),v.packedDataY.push(I),v.packedDataX.push(N),v.packedDataY.push(U)):(v.packedDataX.unshift(N),v.packedDataY.unshift(U),v.packedDataX.unshift(W),v.packedDataY.unshift(I)));else{const ht=T>0?v.iLastPackedSample:v.iFirstPackedSample;if(ht===void 0)X.push({iFirst:0,iSecond:0}),T>0?(v.packedDataX.push(Number.NaN),v.packedDataY.push(Number.NaN),v.packedDataX.push(Number.NaN),v.packedDataY.push(Number.NaN)):(v.packedDataX.unshift(Number.NaN),v.packedDataY.unshift(Number.NaN),v.packedDataX.unshift(Number.NaN),v.packedDataY.unshift(Number.NaN));else{const ut=Ri(ht,l,f),dt=a[ut],Tt=o[ut],xt=(C+k)/2,zt=xt-T*y/6,Nt=Tt+(zt-dt)/(J-dt)*(ot-Tt),jt=xt+T*y/6,ie=Tt+(jt-dt)/(J-dt)*(ot-Tt);X.push({iFirst:ht,iSecond:ht}),T>0?(v.packedDataX.push(zt),v.packedDataY.push(Nt),v.packedDataX.push(jt),v.packedDataY.push(ie)):(v.packedDataX.unshift(zt),v.packedDataY.unshift(Nt),v.packedDataX.unshift(jt),v.packedDataY.unshift(ie))}}if(v.packedColumnsCount+=1,T>0?v.iLastPackedSample=_-1:(v.iFirstPackedSample=_+1,v.origin=C),C=Math.min(A+X.length*T*y,A+(X.length+1)*T*y),k=Math.max(A+X.length*T*y,A+(X.length+1)*T*y),q=0,N=Dt,U=Dt,O=-1,W=Mt,I=Mt,H=-1,C<m||k>p)break}}return X},E=R(v.origin+v.packedColumnsCount*y,1,((s=this.GU)===null||s===void 0?void 0:s.iLastPackedSample)!==void 0?this.GU.iLastPackedSample+1:x.iFirstSample),V=R(v.origin,-1,((n=this.GU)===null||n===void 0?void 0:n.iFirstPackedSample)!==void 0?this.GU.iFirstPackedSample-1:x.iFirstSample),F=t.Rc&&v.packedDataColors?[t.Rc,v.packedDataColors]:void 0,L=t.Lc&&v.packedDataLookupValues?[t.Lc,v.packedDataLookupValues]:void 0,z=t.Ec&&v.packedDataSize?[t.Ec,v.packedDataSize]:void 0,B=t.zc&&v.packedDataRotation?[t.zc,v.packedDataRotation]:void 0;if(F||L||z||B){for(const A of E){const T=Ri(A.iFirst,l,f),w=Ri(A.iSecond,l,f);F&&F[1].push(F[0][T],F[0][w]),L&&L[1].push(L[0][T],L[0][w]),z&&z[1].push(z[0][T],z[0][w]),B&&B[1].push(B[0][T],B[0][w])}for(const A of V){const T=Ri(A.iFirst,l,f),w=Ri(A.iSecond,l,f);F&&F[1].unshift(F[0][w],F[0][T]),L&&L[1].unshift(L[0][w],L[0][T]),z&&z[1].unshift(z[0][w],z[0][T]),B&&B[1].unshift(B[0][w],B[0][T])}}return this.GU=v.packedColumnsCount>0?v:void 0,{x:v.packedDataX,y:v.packedDataY,color:v.packedDataColors,lookup:v.packedDataLookupValues,size:v.packedDataSize,rotation:v.packedDataRotation}}Qm(){this.GU=void 0}tW(t){if(this.GG&&this.jG.type==="linear"){const e=this.GG==="x"?this.jG.scale.x.ig:this.jG.scale.y.ig;if(!e)throw new Error("CP helper has no information about Axis state.");if(e.Je===Zr.progressive||e.Je===Zr.regressive){const i=Math.abs(this.GG==="x"?this.jG.scale.x.getInnerInterval():this.jG.scale.y.getInnerInterval());if(this.$G.enabled)return 2*i/this.$G.columnWidthAxis;const s=t.length,n=t[0],a=t[s-1];return i/this.calculateAvgStepBetweenDataPoints(this.GG==="x"?n.x:n.y,this.GG==="x"?a.x:a.y,s)}}}iW(t,e,i){if(!this.GG)return e;const s=i.length;let n=Ec(i,t.min,this.GG,this.WG,0,s-1);n===void 0&&(n=this.WG?s-1:0);let a=Ec(i,t.max,this.GG,this.WG,0,s-1);return a===void 0&&(a=this.WG?0:s-1),1+Math.abs(a-n)}sW(){}}class f6 extends c6{constructor(t,e,i,s,n,a){super(t,e,i,s),this.aE=new cr,this.SW=new d6(this.dt,this),this.AN=Ds({lineStyleSolid:()=>As(this.lu)&&this.lu,lineStyleDashed:()=>B0(this.lu)&&this.lu,strokeFillSolid:()=>{const o=this.lu.getFillStyle();return ce(o)&&o},strokeFillLinearGradient:()=>{const o=this.lu.getFillStyle();return ui(o)&&o},strokeFillRadialGradient:()=>{const o=this.lu.getFillStyle();return li(o)&&o},strokeFillIndividual:()=>{const o=this.lu.getFillStyle();return ks(o)&&o},strokeFillPaletted:()=>{const o=this.lu.getFillStyle();return wi(o)&&o},areaFillSolid:()=>ce(this.TU)&&this.TU,areaFillLinearGradient:()=>ui(this.TU)&&this.TU,areaFillRadialGradient:()=>li(this.TU)&&this.TU,areaFillIndividual:()=>ks(this.TU)&&this.TU,areaFillPaletted:()=>wi(this.TU)&&this.TU,markerFillSolid:()=>ce(this.FU)&&this.FU,markerFillLinearGradient:()=>ui(this.FU)&&this.FU,markerFillRadialGradient:()=>li(this.FU)&&this.FU,markerFillPaletted:()=>wi(this.FU)&&this.FU,markerFillIndividual:()=>ks(this.FU)&&this.FU,markerFillImage:()=>Jl(this.FU)&&this.FU,markerShapeIcon:()=>{const o=this.IU.M();return ch(o)&&o}}),this.od=Wt(void 0),this.WU=[],this.Qa=!1,this.UU=[],this.YU=void 0,this.rU=(o,l,u)=>{var d;const f=(d=this.HU)===null||d===void 0?void 0:d.shapeIcon;let y=o,m=l;return f&&(y=f.oi().x,m=f.oi().y),j0(o,l,y*this.PU.M(),m*this.PU.M(),u)},this.nN=e,this.bG={type:"none"},this.RR=t.oN(),this.rN=t,this.SG=this.RR.eO,this.gN=n,this.mN=a}ad(t){return this.od.S(ep(t,this.od.M(),()=>[t.$c((e,i)=>{this.WU.push({min:e,max:i}),t.Gc()===void 0&&this.$U&&this.UU.push({min:e,max:i})}),t.Xc(()=>{this.Qa=!0,this.$U=void 0,this.YU=void 0,this.SW.Qm()})])),this.YU=void 0,this}Ps(){var t,e,i,s,n,a,o,l,u,d,f,y,m,p,x;const b=(t=this.od.M())===null||t===void 0?void 0:t.Wt,v=this.od.i,R=b==null?void 0:b.Cc,E=b==null?void 0:b.kc;if(!b||!R||!E)return this;const V=b.Lc,F=b.Rc,L=b.Ec,z=b.zc,B=b.uc,A=b.lc,T=b.ac,w=this.lu,C=this.TU,k=v||this.ra()||this.RU()||this.zU(),_=this.AN.lineStyleSolid(k),X=this.AN.lineStyleDashed(k),N=_||X,U=N&&N.getThickness(),O=this.AN.strokeFillSolid(k),W=this.AN.strokeFillLinearGradient(k),I=this.AN.strokeFillRadialGradient(k),H=this.AN.strokeFillIndividual(k),q=this.AN.strokeFillPaletted(k),Q=O||W||I||H||q,J=this.AN.areaFillSolid(k),ot=this.AN.areaFillLinearGradient(k),ht=this.AN.areaFillRadialGradient(k),ut=this.AN.areaFillIndividual(k),dt=this.AN.areaFillPaletted(k),Tt=J||ot||ht||ut||dt,xt=this.AN.markerFillSolid(k),zt=this.AN.markerFillLinearGradient(k),Nt=this.AN.markerFillRadialGradient(k),jt=this.AN.markerFillPaletted(k),ie=this.AN.markerFillIndividual(k),Ft=this.AN.markerFillImage(k),kt=xt||zt||Nt||jt||ie||Ft,Oi=this.IU.M(),Ye=this.IU.i,Ee=this.AN.markerShapeIcon(Ye),Kr=this.PU.M(),Qe=this.PU.i,ai=this.BU.i,dr=this.WU.length>0||ai,de=this.Qa,Ke=de?[b.Wc()]:(Et=>{const oe=[];for(const wt of Et){let Gt=!1;for(const he of oe)if(wt.min>=he.min&&wt.min<=he.max||wt.max>=he.min&&wt.max<=he.max){he.min=Math.min(he.min,wt.min),he.max=Math.min(he.max,wt.max),Gt=!0;break}Gt||oe.push(wt)}return oe})(this.WU),vi=this.dt.x.Yt,ge=this.dt.x.getInnerStart(),Pe=this.dt.x.getInnerEnd(),mi=b.Gc(),He=!!X,Ie=this.Bo.M(),Ia=this.Bo.i,{cpStateChanged:Ue,cpActive:Xe}=this.SW.OU(b,this.XC);if(mi&&Xe&&(Ue||de||dr||vi||k)){const Et=this.SW.NU(b,mi);if(Et){const oe=!Ue&&!de&&!k;this.XU=Lm(this.RR,[Et.x,Et.y],Et.color,Et.lookup,Et.size,Et.rotation,He,this.XU,oe,mi,1e3,this.dt._i(),Gt=>Wo(Gt,this.dt._i())),this.jU={min:Mt,max:Dt};const wt=Et.y.length;for(let Gt=0;Gt<wt;Gt+=1){const he=Et.y[Gt];Number.isNaN(he)||(this.jU.min=Math.min(this.jU.min,he),this.jU.max=Math.max(this.jU.max,he))}(e=this.dt.y.ig)===null||e===void 0||e.uh()}}if(mi&&!Xe&&(Ue||de||dr||vi||ai||k)){const Et=mS(ge,Pe,R,B,A,T,mi,1);if(!this.ZU||(Et==null?void 0:Et.iFirstSample)!==this.ZU.iFirstSample||Et.iLastSample!==this.ZU.iLastSample||de){this.jU={min:Mt,max:Dt};for(const oe of(Et==null?void 0:Et.dataRanges)||[])for(let wt=oe.offset;wt<oe.offset+oe.count;wt+=1){const Gt=E[wt];Number.isNaN(Gt)||(this.jU.min=Math.min(this.jU.min,Gt),this.jU.max=Math.max(this.jU.max,Gt))}(i=this.dt.y.ig)===null||i===void 0||i.uh()}if(this.ZU=Et,Et===void 0)this.RR.yV((s=this.XU)===null||s===void 0?void 0:s.bufferX),this.RR.yV((n=this.XU)===null||n===void 0?void 0:n.bufferY),this.XU=void 0,this.RR.yV((a=this.QU)===null||a===void 0?void 0:a.bufferX),this.RR.yV((o=this.QU)===null||o===void 0?void 0:o.bufferY),this.QU=void 0,this.JU=Et;else if(Ue||de||!this.JU||Et.iFirstSample<this.JU.iFirstSample||Et.iLastSample>this.JU.iLastSample||k){let oe,wt,Gt,he,fe,Te;if(Et.dataRanges.length===1){const Ut=Et.dataRanges[0];oe=R.subarray(Ut.offset,Ut.offset+Ut.count),wt=E.subarray(Ut.offset,Ut.offset+Ut.count),Gt=F?F.subarray(Ut.offset,Ut.offset+Ut.count):void 0,he=V?V.subarray(Ut.offset,Ut.offset+Ut.count):void 0,fe=L?L.subarray(Ut.offset,Ut.offset+Ut.count):void 0,Te=z?z.subarray(Ut.offset,Ut.offset+Ut.count):void 0}else{const Ut=Et.dataRanges[0],It=Et.dataRanges[1],Qt=Ut.count+It.count;oe=new Float32Array(Qt),oe.set(R.subarray(Ut.offset),0),oe.set(R.subarray(It.offset,It.offset+It.count),Ut.count),wt=new Float32Array(Qt),wt.set(E.subarray(Ut.offset),0),wt.set(E.subarray(It.offset,It.offset+It.count),Ut.count),F&&(Gt=new Uint32Array(Qt),Gt.set(F.subarray(Ut.offset),0),Gt.set(F.subarray(It.offset,It.offset+It.count),Ut.count)),V&&(he=new Float32Array(Qt),he.set(V.subarray(Ut.offset),0),he.set(V.subarray(It.offset,It.offset+It.count),Ut.count)),L&&(fe=new Float32Array(Qt),fe.set(L.subarray(Ut.offset),0),fe.set(L.subarray(It.offset,It.offset+It.count),Ut.count)),z&&(Te=new Float32Array(Qt),Te.set(z.subarray(Ut.offset),0),Te.set(z.subarray(It.offset,It.offset+It.count),Ut.count))}const _n=!Ue&&!de&&!k;this.QU=Lm(this.RR,[oe,wt],Gt,he,fe,Te,He,this.QU,_n,mi,1e3,this.dt._i(),Ut=>Wo(Ut,this.dt._i()));let si=oe,we=wt,Nn=Gt,pi=he;const ri=this.BU.M();if(ri){const Ut=ri.type==="spline"?((It,Qt)=>{const{xValues:Fs,yValues:ni,lookupValues:ye,colors:Zi}=It;if(Fs.length<=2)return{xValues:Array.from(Fs),yValues:Array.from(ni),lookupValues:ye?Array.from(ye):void 0,colors:Zi?Array.from(Zi):void 0};const Oe=((bt,Xt)=>{const _i=bt.length-1,Ni=Array(_i);if(_i>1){let Li=Y(0,0),Qi=Y(0,0),zr=Y(0,0),_r=Ws(Se({x:bt[1],y:Xt[1]},{x:bt[0],y:Xt[0]}));const Ua=3;let tn=0,en=0;for(let ve=0;ve<_i;ve+=1){const Vs=Array(4);if(Vs[0]={x:bt[ve],y:Xt[ve]},Vs[1]={x:bt[ve],y:Xt[ve]},Vs[3]={x:bt[ve+1],y:Xt[ve+1]},Vs[2]={x:bt[ve+1],y:Xt[ve+1]},zr=_r,Li=Qi,ve+1<_i?(_r=bt[ve+2]===bt[ve+1]&&Xt[ve+2]===Xt[ve+1]?Y(0,0):Ws(Se({x:bt[ve+2],y:Xt[ve+2]},{x:bt[ve+1],y:Xt[ve+1]})),Qi=Ws(_t(zr,_r))):Qi=Y(0,0),Xt[ve+1]===Xt[ve])tn=0,en=0;else{const oa=bt[ve+1]-bt[ve];tn=Math.abs(Li.x)>1e-5?Math.abs(oa/(Ua*Li.x)):1,en=Math.abs(Qi.x)>1e-5?Math.abs(oa/(Ua*Qi.x)):1}Vs[1]=_t(Ht(Li,tn),Vs[1]),Vs[2]=Se(Vs[2],Ht(Qi,en)),Ni[ve]=Vs}}return Ni.length>0?Ni:[]})(Fs,ni),Ve=Oe.length,Gi=[],zi=[],ns=[],Yi=[];for(let bt=0;bt<Ve;bt+=1){const Xt=Oe[bt];for(let Zs=0;Zs<Qt;Zs+=1){const _i=Zs/(Qt-1),Ni=_i*_i,Li=Ni*_i,Qi=1-_i,zr=Qi*Qi,_r=zr*Qi;Gi.push(_r*Xt[0].x+3*_i*zr*Xt[1].x+3*Ni*Qi*Xt[2].x+Li*Xt[3].x),zi.push(_r*Xt[0].y+3*_i*zr*Xt[1].y+3*Ni*Qi*Xt[2].y+Li*Xt[3].y)}}if(ye)for(let bt=0;bt<Gi.length;bt+=1){const Xt=ye[Math.round(bt/Qt)];Yi[bt]=Xt}if(Zi)for(let bt=0;bt<Gi.length;bt+=1){const Xt=Zi[Math.round(bt/Qt)];ns[bt]=Xt}return{xValues:Gi,yValues:zi,lookupValues:ye?Yi:void 0,colors:Zi?ns:void 0}})({xValues:oe,yValues:wt,lookupValues:he,colors:Gt},ri.resolution||20):ri.type==="step"?((It,Qt)=>{const{xValues:Fs,yValues:ni,lookupValues:ye,colors:Zi}=It,Oe=[],Ve=[],Gi=[],zi=[],ns=Fs.length,Yi=Qt;if(ns>0){let bt=0,Xt=Fs[0],Zs=ni[0];Oe[bt]=Xt,Ve[bt]=Zs,bt+=1;for(let _i=1;_i<ns;_i+=1){const Ni=Fs[_i],Li=ni[_i];if(Yi<=0)Oe[bt]=Xt,Ve[bt]=Li,bt+=1;else{const Qi=Xt*(1-Yi)+Ni*Yi;Oe[bt]=Qi,Ve[bt]=Zs,bt+=1,Oe[bt]=Qi,Ve[bt]=Li,bt+=1}Oe[bt]=Ni,Ve[bt]=Li,bt+=1,Xt=Ni,Zs=Li}}if(ye){if(Yi===ba.before){zi[0]=ye[0];for(let bt=1;bt<ns;bt+=1)zi[2*bt-1]=ye[bt],zi[2*bt]=ye[bt]}else if(Yi===ba.middle||Yi===ba.after){zi[0]=ye[0],zi[1]=ye[0];for(let bt=1;bt<ns;bt+=1)zi[3*bt-1]=ye[bt],zi[3*bt]=ye[bt],zi[3*bt+1]=ye[bt]}}if(Zi){if(Yi===ba.before){Gi[0]=Zi[0];for(let bt=1;bt<ns;bt+=1)Gi[2*bt-1]=Zi[bt],Gi[2*bt]=Zi[bt]}else if(Yi===ba.middle||Yi===ba.after){Gi[0]=Zi[0],Gi[1]=Zi[0];for(let bt=1;bt<ns;bt+=1)Gi[3*bt-1]=Zi[bt],Gi[3*bt]=Zi[bt],Gi[3*bt+1]=Zi[bt]}}return{xValues:Oe,yValues:Ve,lookupValues:ye?zi:void 0,colors:Zi?Gi:void 0}})({xValues:oe,yValues:wt,lookupValues:he,colors:Gt},ri.step==="before"?0:ri.step==="after"?1:.5):void 0;si=Ut?Ut.xValues:si,we=Ut?Ut.yValues:we,Nn=Ut!=null&&Ut.colors?Ut.colors:Nn,pi=Ut!=null&&Ut.lookupValues?Ut.lookupValues:pi}this.XU=si===oe&&we===wt?this.QU:Lm(this.RR,[si,we],Nn,pi,void 0,void 0,He,((l=this.XU)===null||l===void 0?void 0:l.bufferX)===this.QU.bufferX?void 0:this.XU,!(!_n||ai||ri),mi,1e3,this.dt._i(),Ut=>Wo(Ut,this.dt._i())),this.JU=Et}}if(!mi&&(de||dr||k)){if(!this.XU||this.XU.bufferSize<b.lc||He){const Et=b.Vc!==void 0?b.Vc:b.lc;let oe,wt=0,Gt=0;if(He){const he=yp(R,E,R[0],E[0],0,0);oe=this.RR.EV(2*Et,he[0],(u=this.XU)===null||u===void 0?void 0:u.bufferLengthSoFar,Float32Array),wt=he[1],Gt=he[2]}this.XU={bufferX:this.RR.EV(Et*(this.dt._i()?2:1),Wo(R,this.dt._i()),(d=this.XU)===null||d===void 0?void 0:d.bufferX),bufferY:this.RR.EV(Et*(this.dt._i()?2:1),Wo(E,this.dt._i()),(f=this.XU)===null||f===void 0?void 0:f.bufferY),bufferColors:F?this.RR.EV(Et,F,(y=this.XU)===null||y===void 0?void 0:y.bufferColors,Uint32Array):void 0,bufferLookupValues:V?this.RR.EV(Et,V,(m=this.XU)===null||m===void 0?void 0:m.bufferLookupValues,Float32Array):void 0,bufferSizes:L?this.RR.EV(Et,L,(p=this.XU)===null||p===void 0?void 0:p.bufferSizes,Float32Array):void 0,bufferRotations:z?this.RR.EV(Et,z,(x=this.XU)===null||x===void 0?void 0:x.bufferRotations,Float32Array):void 0,bufferLengthSoFar:oe,lengthSoFarX:wt,lengthSoFarY:Gt,bufferSize:Et,valueCount:b.lc}}else{const Et=this.XU.bufferX,oe=this.XU.bufferY;Ke.forEach(wt=>{var Gt,he,fe,Te;const _n=R.subarray(wt.min,wt.max+1),si=E.subarray(wt.min,wt.max+1);if(this.RR.zV(Et,wt.min*(this.dt._i()?2:1),Wo(_n,this.dt._i())),this.RR.zV(oe,wt.min*(this.dt._i()?2:1),Wo(si,this.dt._i())),F&&((Gt=this.XU)===null||Gt===void 0?void 0:Gt.bufferColors)){const we=F.subarray(wt.min,wt.max+1);this.RR.zV(this.XU.bufferColors,wt.min,we,Uint32Array)}if(V&&(!((he=this.XU)===null||he===void 0)&&he.bufferLookupValues)){const we=V.subarray(wt.min,wt.max+1);this.RR.zV(this.XU.bufferLookupValues,wt.min,we,Float32Array)}if(z&&(!((fe=this.XU)===null||fe===void 0)&&fe.bufferRotations)){const we=z.subarray(wt.min,wt.max+1);this.RR.zV(this.XU.bufferRotations,wt.min,we,Float32Array)}if(L&&(!((Te=this.XU)===null||Te===void 0)&&Te.bufferSizes)){const we=L.subarray(wt.min,wt.max+1);this.RR.zV(this.XU.bufferSizes,wt.min,we,Float32Array)}}),this.XU.valueCount=b.lc}this.QU=this.XU}if(this.aE.mV(this.dt),k||Qe||Ye||Ia){if(Q&&N&&U!==!1){const Et=U===-1?"primitive":"triangulated",oe=q?["lookup",q.lookUpProperty,q.lut]:H?"attribute":W?["gradient",W]:I?["gradient",I]:"uniform";this.bG=Et==="primitive"?{type:Et,shader:this.RR.oz(j["2D"],j.Color({dataType:oe}),j.VertexLocation({axisWorldTranslation:Pt(this.dt),normalSource:void 0,splitPosAttribute:!0}),X&&j.StippleTexture),lineStyleSolid:_,lineStyleDashed:X,fillStyleSolid:O,fillStyleLinearGradient:W,fillStyleRadialGradient:I,fillStyleIndividual:H,fillStylePaletted:q,mousePickingShader:Ie&&this.RR.oz(j["2D"],j.VertexLocation({axisWorldTranslation:Pt(this.dt),normalSource:void 0,splitPosAttribute:!0}),X&&j.StippleTexture,j.MousePicking)}:Et==="triangulated"?{type:Et,shader:this.RR.oz(j["2D"],j.Color({dataType:oe}),j.LineInstanced2D({axisWorldTranslation:Pt(this.dt),normalSource:void 0,splitPosAttribute:!0}),this.SG?j.AliasedEdge:void 0,X&&j.StippleTextureInstanced),geometry:eu(this.RR,U),thickness:U,lineStyleSolid:_,lineStyleDashed:X,fillStyleSolid:O,fillStyleLinearGradient:W,fillStyleRadialGradient:I,fillStyleIndividual:H,fillStylePaletted:q,mousePickingShader:Ie&&this.RR.oz(j["2D"],j.LineInstanced2D({axisWorldTranslation:Pt(this.dt),normalSource:void 0,splitPosAttribute:!0}),X&&j.StippleTextureInstanced,j.MousePicking)}:{type:"none"}}else this.bG={type:"none"};if(this.KU=Tt?{shader:this.RR.oz(j["2D"],dt&&j.Color({dataType:["lookup",dt.lookUpProperty,dt.lut]}),ut&&j.Color({dataType:"attribute"}),J&&j.Color({dataType:"uniform"}),ot&&j.Color({dataType:["gradient",ot]}),ht&&j.Color({dataType:["gradient",ht]}),j.Area2D({axisWorldTranslation:Pt(this.dt),normalSource:void 0,splitPosAttribute:!0})),geometry:u6(this.RR),fillStyleSolid:J,fillStyleLinearGradient:ot,fillStyleRadialGradient:ht,fillStyleIndividual:ut,fillStylePaletted:dt,mousePickingShader:Ie&&this.RR.oz(j["2D"],j.Area2D({axisWorldTranslation:Pt(this.dt),normalSource:void 0,splitPosAttribute:!0}),j.MousePicking)}:void 0,kt){const Et=!(!Ft&&!Ee),oe=Kr>1||Et,wt=L?"attribute":"uniform",Gt=!oe&&j.PointSize("uniform"),he=j.VertexLocation({offset:oe&&!Et?{dataType:wt,sizeUnit:"px",symmetric:!0,rotation:{dataType:z?"attribute-deg":"uniform"},useAlignment:!0}:oe&&Et?{dataType:wt,sizeUnit:"scale",rotation:{dataType:z?"attribute-deg":"uniform"},useAlignment:!0}:void 0,axisWorldTranslation:Pt(this.dt),normalSource:void 0,splitPosAttribute:!0});this.HU={shader:this.RR.oz(j["2D"],Gt,he,xt&&j.Color({dataType:"uniform",overrideOpacity:!0,maskTexture:!!Ee}),zt&&j.Color({dataType:["gradient",zt],overrideOpacity:!0,maskTexture:!!Ee}),Nt&&j.Color({dataType:["gradient",Nt],overrideOpacity:!0,maskTexture:!!Ee}),jt&&j.Color({dataType:["lookup",jt.getLookUpProperty(),jt.getPalette()],overrideOpacity:!0,maskTexture:!!Ee}),ie&&j.Color({dataType:"attribute",overrideOpacity:!0,maskTexture:!!Ee}),Ft&&j.Color({dataType:["image",Ft],overrideOpacity:!0,maskTexture:!!Ee})),geometry:VS(Oi,this.RR,wt==="uniform"?Kr:25),fillStyleSolid:xt,fillStyleLinearGradient:zt,fillStyleRadialGradient:Nt,fillStylePaletted:jt,fillStyleIndividual:ie,fillStyleImage:Ft,mousePickingShader:Ie&&this.RR.oz(j["2D"],Gt,he,j.MousePicking),shapeIcon:Ee,pointSizeAsScale:Et,instancedRendering:oe}}else this.HU=void 0}const Ot=Ao({min:{x:this.vt(),y:this.dt.y.getInnerStart()},max:{x:this.bt(),y:this.Mt()}},{x:this.vl(),y:this.bl()},this.dt),ne=Ao({min:{x:this.vt(),y:this.xt()},max:{x:this.bt(),y:this.Mt()}},{x:this.vl(),y:this.bl()},this.dt);if(this.qU=this.RR.NO(W,this,ne),this.tY=this.RR.GO(I,this,ne),this.iY=this.RR.NO(ot,this,Ot),this.sY=this.RR.GO(ht,this,Ot),this.eY=this.RR.NO(zt,this,ne),this.hY=this.RR.GO(Nt,this,ne),(this.YU===void 0||dr)&&V&&(Nm(q)||Nm(dt)||Nm(jt))){const Et=this.YU?Ke:[b.Wc()];let oe=this.YU?this.YU.max:Dt,wt=this.YU?this.YU.min:Mt;const Gt=V;Et.forEach(he=>{for(let fe=he.min;fe<=he.max;fe+=1){const Te=Gt[fe];wt=Te<wt?Te:wt,oe=Te>oe?Te:oe}}),this.YU={min:wt,max:oe}}return this.MG=X?this.RR.IO(X.getPattern()):void 0,this.hU=this.RR.RO(this,this.hU,Ft,Ee,Qe,this.rU),this.fu(w),this.EU=C,this.VU=this.FU,this.IU.i=!1,this.PU.i=!1,this.WU.length=0,this.Qa=!1,this.BU.i=!1,this.od.i=!1,this.Bo.i=!1,this}zL(t){var e,i,s,n,a,o,l,u,d,f,y,m,p,x,b,v,R;const E=this.RR.gl,V=(e=this.XU)===null||e===void 0?void 0:e.bufferX,F=(i=this.XU)===null||i===void 0?void 0:i.bufferY,L=(s=this.XU)===null||s===void 0?void 0:s.bufferColors,z=(n=this.XU)===null||n===void 0?void 0:n.bufferLookupValues,B=(a=this.XU)===null||a===void 0?void 0:a.valueCount,A=(o=this.QU)===null||o===void 0?void 0:o.valueCount,T=(l=this.od.M())===null||l===void 0?void 0:l.Wt,w=T==null?void 0:T.Gc();if(!V||!F||!T)return this;const C=(J,ot,ht)=>{if(rc(this.RR,J,this.dt._i(),V,"aLocation","X",1,!1,E.FLOAT,Float32Array.BYTES_PER_ELEMENT),rc(this.RR,J,this.dt._i(),F,"aLocation","Y",1,!1,E.FLOAT,Float32Array.BYTES_PER_ELEMENT),ot&&t!==1){if(!L)return!1;rc(this.RR,J,!1,L,"aColor","",4,!0,E.UNSIGNED_BYTE,1)}if(ht&&ht.lookUpProperty==="value"&&t!==1){if(!z)return!1;rc(this.RR,J,!1,z,"aLookupValue","",1,!1,E.FLOAT,Float32Array.BYTES_PER_ELEMENT)}return!0},k=t===1?(u=this.KU)===null||u===void 0?void 0:u.mousePickingShader:(d=this.KU)===null||d===void 0?void 0:d.shader;if(this.KU&&k&&B!==void 0&&B>0&&w){const J=this.KU;this.RR.jR(k).aV(k,(ot,ht,ut,dt)=>!!this.RR.zO(ut,t,this,{uniforms:this.aE,mousePickingColor:this.mN,fillStyleSolid:J.fillStyleSolid,fillStyleLinearGradient:J.fillStyleLinearGradient,fillStyleRadialGradient:J.fillStyleRadialGradient,fillStylePaletted:J.fillStylePaletted,linearGradientInfo:this.iY,radialGradientInfo:this.sY,lookupValueRange:J.fillStylePaletted?ir(J.fillStylePaletted,this,this.YU):void 0,lookupValueBuffer:null})&&!!C(ut,J.fillStyleIndividual,J.fillStylePaletted)&&(J==null||J.geometry.jR(ut).Ky(B-1),!0))}const _=this.bG.type==="none"?void 0:t===1?this.bG.mousePickingShader:this.bG.shader;if(this.bG.type!=="none"&&_&&B!==void 0&&B>0){const J=this.bG;this.RR.jR(_).aV(_,(ot,ht,ut,dt)=>{var Tt,xt;if(!this.RR.zO(ut,t,this,{uniforms:this.aE,mousePickingColor:this.mN,fillStyleSolid:J.fillStyleSolid,fillStylePaletted:J.fillStylePaletted,fillStyleLinearGradient:J.fillStyleLinearGradient,fillStyleRadialGradient:J.fillStyleRadialGradient,fillStyleIndividual:J.fillStyleIndividual,linearGradientInfo:this.qU,radialGradientInfo:this.tY,lookupValueRange:J.fillStylePaletted?ir(J.fillStylePaletted,this,this.YU):void 0,lookupValueBuffer:J.type==="primitive"?z:null,colorBuffer:J.type==="primitive"?L:null,coordsX:J.type==="primitive"?V:void 0,coordsY:J.type==="primitive"?F:void 0,coordsHighPrecision:this.dt._i()}))return!1;if(J.lineStyleDashed){if(!this.MG)return!1;this.RR.uV(ot("uStippleCount"),[this.us.oi().x/this.MG.BO,this.us.oi().y/this.MG.BO]).dV(dt("uStippleTextureWidthLimiter"),this.MG.DO/this.MG.BO).dV(ot("uStippleScale"),J.lineStyleDashed.getPatternScale()).cV(ot("uStippleTexture"),this.MG.PO,1)}if(J.type==="primitive"){if(J.lineStyleDashed){if(!(!((Tt=this.XU)===null||Tt===void 0)&&Tt.bufferLengthSoFar))return!1;this.RR.GV(ht("aLengthSoFar"),this.XU.bufferLengthSoFar)}pl.yG(this.rN,B)}else{if(!C(ut,J.fillStyleIndividual,J.fillStylePaletted))return!1;if(J.lineStyleDashed){if(!(!((xt=this.XU)===null||xt===void 0)&&xt.bufferLengthSoFar))return!1;rc(this.RR,ut,!1,this.XU.bufferLengthSoFar,"aLengthSoFar","",2,!1,E.FLOAT,Float32Array.BYTES_PER_ELEMENT)}Sn.zL(this.rN,J.geometry,ut,this.SG&&t!==1,t===1,J.thickness,B-1)}return!0})}const X=(f=this.QU)===null||f===void 0?void 0:f.bufferX,N=(y=this.QU)===null||y===void 0?void 0:y.bufferY,U=(m=this.QU)===null||m===void 0?void 0:m.bufferColors,O=(p=this.QU)===null||p===void 0?void 0:p.bufferLookupValues,W=(x=this.QU)===null||x===void 0?void 0:x.bufferSizes,I=(b=this.QU)===null||b===void 0?void 0:b.bufferRotations,H=t===1?(v=this.HU)===null||v===void 0?void 0:v.mousePickingShader:(R=this.HU)===null||R===void 0?void 0:R.shader,q=this.HU;let Q=1;if(w){const J=this.od?Math.abs((this.bt()-this.vt())/T.getSampleCount()):0,ot=this.dt.x.getInnerInterval()/J,ht=this.PU.M(),ut=this.dt.x.ri()/ht/1,dt=2*ut;Q=ot<=ut?1:Math.max(1-(ot-ut)/(dt-ut),0)}if(H&&q&&X&&N&&Q>0&&A!==void 0&&A>0){const J=q,ot=J.instancedRendering?1:0;this.RR.jR(H).aV(H,(ht,ut,dt,Tt)=>{if(!this.RR.zO(dt,t,this,{uniforms:this.aE,mousePickingColor:this.mN,fillStyleSolid:J.fillStyleSolid,fillStyleLinearGradient:J.fillStyleLinearGradient,fillStyleRadialGradient:J.fillStyleRadialGradient,linearGradientInfo:this.eY,radialGradientInfo:this.hY,fillStylePaletted:J.fillStylePaletted,fillStyleIndividual:J.fillStyleIndividual,lookupValueRange:J.fillStylePaletted?ir(J.fillStylePaletted,this,this.YU):void 0,lookupValueBuffer:O,lookupValueAttribDivisor:ot,colorBuffer:U,colorAttribDivisor:ot,fillStyleImage:J.fillStyleImage,texturedFillGLInfo:this.hU,texCoordAttribDivisor:0,maskTexture:J.shapeIcon&&this.hU,maskTextureCoordsAttribDivisor:0}))return!1;if(this.dt._i()?this.RR.lV(X,ot,{location:ut("aPos_highpartX"),size:1},{location:ut("aPos_lowpartX"),size:1}).lV(N,ot,{location:ut("aPos_highpartY"),size:1},{location:ut("aPos_lowpartY"),size:1}):this.RR.$V(ut("aPosX"),X,ot).$V(ut("aPosY"),N,ot),t!==1&&this.RR.dV(ht("uOpacity"),Q),J.instancedRendering)if(I)this.RR.$V(ut("aRotDeg"),I,ot).dV(ht("uBaseRotDeg"),J.geometry.DW);else{const xt=br(this.DU.M()+J.geometry.DW),zt=Math.sin(xt),Nt=Math.cos(xt);this.RR.uV(ht("uRot"),[zt,Nt])}return this.RR.uV(Tt("uOffsetAlignment"),[-this.LU.x/2,-this.LU.y/2]),J.geometry.Ky(dt,W,A,J.pointSizeAsScale&&this.hU?{scale:this.PU.M(),width:J.shapeIcon?J.shapeIcon.oi().x:this.hU.texture.Fz,height:J.shapeIcon?J.shapeIcon.oi().y:this.hU.texture.Iz}:this.PU.M(),J.instancedRendering),!0})}return this}lN(t){return this.gN===t&&{}}dispose(){var t,e,i,s,n,a,o,l,u;return super.dispose(),this.RR.yV((t=this.XU)===null||t===void 0?void 0:t.bufferX),this.RR.yV((e=this.XU)===null||e===void 0?void 0:e.bufferY),this.RR.yV((i=this.XU)===null||i===void 0?void 0:i.bufferColors),this.RR.yV((s=this.XU)===null||s===void 0?void 0:s.bufferLookupValues),this.RR.yV((n=this.QU)===null||n===void 0?void 0:n.bufferX),this.RR.yV((a=this.QU)===null||a===void 0?void 0:a.bufferY),this.RR.yV((o=this.QU)===null||o===void 0?void 0:o.bufferColors),this.RR.yV((l=this.QU)===null||l===void 0?void 0:l.bufferLookupValues),this.bG={type:"none"},this.KU=void 0,this.HU=void 0,this.SW.Qm(),(u=this.od.M())===null||u===void 0||u.Gt(),this.XU=void 0,this.QU=void 0,this.qU=void 0,this.tY=void 0,this.iY=void 0,this.sY=void 0,this.eY=void 0,this.hY=void 0,this.RR.EO(this,this.hU),this}VR(){return this.dispose(),this}rY(t){if(!this.$U){const{xValues:s,yValues:n}=t.readBack();this.$U={min:{x:Mt,y:Mt},max:{x:Dt,y:Dt}};const a=s.length;for(let o=0;o<a;o+=1){const l=s[o],u=n[o];this.$U.min.x=l<this.$U.min.x?l:this.$U.min.x,this.$U.min.y=u<this.$U.min.y?u:this.$U.min.y,this.$U.max.x=l>this.$U.max.x?l:this.$U.max.x,this.$U.max.y=u>this.$U.max.y?u:this.$U.max.y}return this.UU.length=0,this.$U}const e=t.Cc,i=t.kc;if(this.UU.length>0&&e&&i){for(const s of this.UU){for(let n=s.min;n<=s.max;n+=1){const a=e[n],o=i[n];this.$U.min.x=a<this.$U.min.x?a:this.$U.min.x,this.$U.min.y=o<this.$U.min.y?o:this.$U.min.y,this.$U.max.x=a>this.$U.max.x?a:this.$U.max.x,this.$U.max.y=o>this.$U.max.y?o:this.$U.max.y}this.UU.length=0}return this.$U}return this.$U}bt(){var t,e,i,s,n;const a=(t=this.od.M())===null||t===void 0?void 0:t.Wt;if(!a)return 0;const o=a.Gc();return o==="ProgressiveX"?((e=a.wc())===null||e===void 0?void 0:e.x)||0:o==="RegressiveX"?((i=a.Yc())===null||i===void 0?void 0:i.x)||0:o==="ProgressiveY"?((s=this.jU)===null||s===void 0?void 0:s.max)||0:o==="RegressiveY"?((n=this.jU)===null||n===void 0?void 0:n.max)||0:this.rY(a).max.x}vt(){var t,e,i,s,n;const a=(t=this.od.M())===null||t===void 0?void 0:t.Wt;if(!a)return 0;const o=a.Gc();return o==="ProgressiveX"?((e=a.Yc())===null||e===void 0?void 0:e.x)||0:o==="RegressiveX"?((i=a.wc())===null||i===void 0?void 0:i.x)||0:o==="ProgressiveY"?((s=this.jU)===null||s===void 0?void 0:s.min)||0:o==="RegressiveY"?((n=this.jU)===null||n===void 0?void 0:n.min)||0:this.rY(a).min.x}Mt(){var t,e,i,s,n;const a=(t=this.od.M())===null||t===void 0?void 0:t.Wt;if(!a)return 0;const o=a.Gc();return o==="ProgressiveX"?Fe((e=this.jU)===null||e===void 0?void 0:e.max,0):o==="RegressiveX"?Fe((i=this.jU)===null||i===void 0?void 0:i.max,0):o==="ProgressiveY"?Fe((s=a.wc())===null||s===void 0?void 0:s.y,0):o==="RegressiveY"?Fe((n=a.Yc())===null||n===void 0?void 0:n.y,0):this.rY(a).max.y}xt(){var t,e,i,s,n;const a=(t=this.od.M())===null||t===void 0?void 0:t.Wt;if(!a)return 0;const o=a.Gc();return o==="ProgressiveX"?Fe((e=this.jU)===null||e===void 0?void 0:e.min,0):o==="RegressiveX"?Fe((i=this.jU)===null||i===void 0?void 0:i.min,0):o==="ProgressiveY"?Fe((s=a.Yc())===null||s===void 0?void 0:s.y,0):o==="RegressiveY"?Fe((n=a.wc())===null||n===void 0?void 0:n.y,0):this.rY(a).min.y}vl(){var t,e;let i=this.PU.M();this.hU&&(i=Math.max(this.hU.texture.Fz,this.hU.texture.Iz)*this.PU.M());const s=Math.max(Ps(this.lu),!((t=this.od.M())===null||t===void 0)&&t.Wt.vc?25:i),n=(e=this.od.M())===null||e===void 0?void 0:e.Wt.Gc();return!n||n!=="ProgressiveX"&&n!=="RegressiveX"?s:0}bl(){var t,e;let i=this.PU.M();this.hU&&(i=Math.max(this.hU.texture.Fz,this.hU.texture.Iz)*this.PU.M());const s=Math.max(Ps(this.lu),!((t=this.od.M())===null||t===void 0)&&t.Wt.vc?25:i),n=(e=this.od.M())===null||e===void 0?void 0:e.Wt.Gc();return!n||n!=="ProgressiveY"&&n!=="RegressiveY"?s:0}}const Lm=(r,t,e,i,s,n,a,o,l,u,d,f,y)=>{if(u!=="ProgressiveX")throw new Error("Unimplemented data pattern");const m=t[0],p=t[1],x=m.length,b=m[0],v=m[x-1],R=p[0],E=p[x-1],V=f?2:1;if(o&&l&&o.firstX&&o.lastX&&b>=o.firstX){const X=bo(o.lastX,0,x-1,N=>m[N]);if(m[X]===o.lastX){const N=o.bufferSize-o.valueCount,U=X+1,O=x-U;if(O===0)return o;if(N>=O){const W=Hs(m,U,void 0),I=Hs(p,U,void 0);if(r.zV(o.bufferX,o.valueCount*V,y(W)),r.zV(o.bufferY,o.valueCount*V,y(I)),e&&o.bufferColors){const H=e.slice(U);r.zV(o.bufferColors,o.valueCount,H,Uint32Array)}if(i&&o.bufferLookupValues){const H=i.slice(U);r.zV(o.bufferLookupValues,o.valueCount,H,Float32Array)}if(s&&o.bufferSizes){const H=s.slice(U);r.zV(o.bufferSizes,o.valueCount,H,Float32Array)}if(n&&o.bufferRotations){const H=n.slice(U);r.zV(o.bufferRotations,o.valueCount,H,Float32Array)}if(a&&o.bufferLengthSoFar){const[H,q,Q]=yp(W,I,o.lastX||0,o.lastY||0,o.lengthSoFarX,o.lengthSoFarY);r.zV(o.bufferLengthSoFar,2*o.valueCount,H,Float32Array),o.lengthSoFarX=q,o.lengthSoFarY=Q}return o.valueCount+=O,o.lastX=v,o.lastY=E,o}}}const F=x+d,L=r.EV(F*V,y(m),o==null?void 0:o.bufferX),z=r.EV(F*V,y(p),o==null?void 0:o.bufferY),B=e?r.EV(F,e,o==null?void 0:o.bufferColors,Uint32Array):void 0,A=i?r.EV(F,i,o==null?void 0:o.bufferLookupValues,Float32Array):void 0,T=s?r.EV(F,s,o==null?void 0:o.bufferSizes,Float32Array):void 0,w=n?r.EV(F,n,o==null?void 0:o.bufferRotations,Float32Array):void 0;let C,k=0,_=0;if(a){const X=yp(m,p,m[0],p[0],0,0);C=r.EV(2*F,X[0],o==null?void 0:o.bufferLengthSoFar,Float32Array),k=X[1],_=X[2]}return{bufferX:L,bufferY:z,bufferColors:B,bufferLookupValues:A,bufferSizes:T,bufferRotations:w,bufferSize:F,bufferLengthSoFar:C,valueCount:x,firstX:b,lastX:v,firstY:R,lastY:E,lengthSoFarX:k,lengthSoFarY:_}},yp=(r,t,e,i,s,n)=>{const a=r.length,o=new Float32Array(2*a);if(a===0)return[o,0,0];let l=0,u=e,d=i,f=s,y=n;for(let m=0;m<a;m+=1){const p=r[m],x=t[m];f+=Math.abs(u-p),y+=Math.abs(d-x),o[l]=f,o[l+1]=y,l+=2,u=p,d=x}return[o,f,y]},rc=(r,t,e,i,s,n,a,o,l,u)=>{const d=r.gl;if(e){const f=t.attribute(`${s}A_highpart${n}`),y=t.attribute(`${s}A_lowpart${n}`),m=t.attribute(`${s}B_highpart${n}`),p=t.attribute(`${s}B_lowpart${n}`);d.bindBuffer(d.ARRAY_BUFFER,i),d.vertexAttribPointer(f,a,l,o,2*a*u,0*u),d.vertexAttribPointer(y,a,l,o,2*a*u,a*u),r.UV(f,1),r.UV(y,1),d.enableVertexAttribArray(f),d.enableVertexAttribArray(y),d.vertexAttribPointer(m,a,l,o,2*a*u,2*a*u),d.vertexAttribPointer(p,a,l,o,2*a*u,3*a*u),r.UV(m,1),r.UV(p,1),d.enableVertexAttribArray(m),d.enableVertexAttribArray(p),d.bindBuffer(d.ARRAY_BUFFER,null)}else{const f=t.attribute(`${s}A${n}`),y=t.attribute(`${s}B${n}`);d.bindBuffer(d.ARRAY_BUFFER,i),d.vertexAttribPointer(f,a,l,o,a*u,0*u),d.vertexAttribPointer(y,a,l,o,a*u,a*u),r.UV(f,1),r.UV(y,1),d.enableVertexAttribArray(f),d.enableVertexAttribArray(y),d.bindBuffer(d.ARRAY_BUFFER,null)}},xr={translation:(r,t)=>[1,0,0,0,1,0,r,t,1],rotation(r){const t=Math.cos(r),e=Math.sin(r);return[t,-e,0,e,t,0,0,0,1]},scaling:(r,t)=>[r,0,0,0,t,0,0,0,1],translate:(r,t,e)=>xr.multiply(r,xr.translation(t,e)),rotate:(r,t)=>xr.multiply(r,xr.rotation(t)),scale:(r,t,e)=>xr.multiply(r,xr.scaling(t,e)),multiply(r,t){const e=r[0],i=r[1],s=r[2],n=r[3],a=r[4],o=r[5],l=r[6],u=r[7],d=r[8],f=t[0],y=t[1],m=t[2],p=t[3],x=t[4],b=t[5],v=t[6],R=t[7],E=t[8];return[f*e+y*n+m*l,f*i+y*a+m*u,f*s+y*o+m*d,p*e+x*n+b*l,p*i+x*a+b*u,p*s+x*o+b*d,v*e+R*n+E*l,v*i+R*a+E*u,v*s+R*o+E*d]},projection:(r,t,e)=>[2/r,0,0,0,-2*e/t,0,-1,1*e,1]};class g6 extends vD{constructor(t,e,i,s,n,a,o){super(t,e,i,s,n),this.nY=[],this.aE=new cr,this.oY=[Y(0,0),Y(0,0),Y(0,0),Y(0,0)],this.aY=Kt(Y(0,0),Y(0,0)),this.lY=Kt(Y(0,0),Y(0,0)),this.uY=Y(0,0),this.cY=Y(0,0),this.FT=Y(0,0),this.dY=Y(0,0),this.fY=0,this.AY=0,this.AN=Ds({fillStyleSolid:()=>ce(this.be)&&this.be,fillStyleRadialGradient:()=>li(this.be)&&this.be,fillStyleLinearGradient:()=>ui(this.be)&&this.be}),this.rN=t,this.nN=e,this.gN=a,this.mN=o,this.RR=t.oN(),this.nN=e,this.IG=t.Un.jn}Ps(){const t=this.ea(),e=this.sa(),i=this.Bo.M();if(t){const s=this.ta(),n=this.AN.fillStyleSolid(s),a=this.AN.fillStyleRadialGradient(s),o=this.AN.fillStyleLinearGradient(s),l=n||a||o,u=this.RR,d=this.RR.$z(),f=d!==this.AY;if(this.AY=d,this.aE.mV(this.dt),this.ga.i||f){this.gY&&this.gY.ZR(this),this.font.S(lS(this.ga.M(),d));const R=this.font.M();this.gY=this.RR.Vh(R.properties.family),this.gY.jR(this)}const y=this.font.i,m=y||this.la.i;if(m&&this.gY){const R=this.font.M();[this.mY,this.lY]=this.gY.JR(this.la.M(),R,this.rN.qi.isDark),this.nY.forEach(E=>{E.texCoordBuff&&u.yV(E.texCoordBuff),E.vertexBuff&&u.yV(E.vertexBuff)}),this.nY=this.mY.map(E=>({texCoordBuff:u.nV(E.texCoords,!1),texture:E.texture,info:E})),this.ga.i=!1,this.font.i=!1,this.la.i=!1}const p=this.dt.Ni()||e,x=this.ua.i||this.da.i||this.ca.i||this.fa.i||this.ya.i||this.Xt.i||m||p,b=this.ya.M(),v=Ht(Y(this.da.M()+1,this.ca.M()+1),.5);if(x&&this.mY&&(this.uY=Y(-(b.left*d+this.lY.max.x-this.lY.min.x+b.right*d)*v.x-this.lY.min.x+b.right*d,-(b.bottom*d+this.lY.max.y-this.lY.min.y+b.top*d)*v.y-this.lY.min.y+b.top*d)),(x||p||this.Aa.i||this.ta())&&this.be!==Vt){if(this.mY){const R=_t(this.ua.M(),this.fa.M()),E=gt(R,this.dt,this.us.dt),V=Ht(E,d);this.dY=V;const F=br(this.Aa.M());this.fY=F,m&&this.nY.forEach(C=>{const k=C.info;k&&(C.vertexBuffLen=k.vertices.length/2,C.vertexBuff=u.nV(k.vertices,!0,C.vertexBuff))});const L=this.Xt.M(),z=[_t(qn(Y((this.lY.min.x+(-L.left-b.left)*d+this.uY.x)/d,(this.lY.max.y+(L.top+b.top)*d+this.uY.y)/d),this.ma,F),E),_t(qn(Y((this.lY.max.x+(L.right+b.right)*d+this.uY.x)/d,(this.lY.max.y+(L.top+b.top)*d+this.uY.y)/d),this.ma,F),E),_t(qn(Y((this.lY.max.x+(L.right+b.right)*d+this.uY.x)/d,(this.lY.min.y+(-L.bottom-b.bottom)*d+this.uY.y)/d),this.ma,F),E),_t(qn(Y((this.lY.min.x+(-L.left-b.left)*d+this.uY.x)/d,(this.lY.min.y+(-L.bottom-b.bottom)*d+this.uY.y)/d),this.ma,F),E)];this.oY=[gt(z[0],this.us.dt,this.dt),gt(z[1],this.us.dt,this.dt),gt(z[2],this.us.dt,this.dt),gt(z[3],this.us.dt,this.dt)];const B=Ze(z);this.cY=Y(-(B.max.x-B.min.x)*d*v.x-B.min.x*d+this.dY.x,-(B.max.y-B.min.y)*d*v.y-B.min.y*d+this.dY.y),this.Fg=Se(B.max,B.min);const A=Ze(this.oY),T=this.dt.mi(A.min,this.cY),w=this.dt.mi(A.max,this.cY);this.aY=Ze([T,w])}a?this.MN=nr(this.aY,this.dt,a.getPosition(),a.getExtent(),a.getShape(),this.RR.$z()):o?this._N=ar(this.aY,this.dt,o.getAngle(!0),this.RR.$z()):(this.MN=void 0,this._N=void 0)}(this.ta()||y)&&(this.cE=l?this.RR.oz(j["2D"],j.VertexLocation({axisWorldTranslation:"matrix",normalSource:void 0,snapToNearestPixel:this.IG}),j.Color({dataType:a?["gradient",a]:o?["gradient",o]:"uniform",maskTextureText:!0})):void 0),this.yY=i&&l?this.yY||this.RR.oz(j["2D"],j.MousePicking,j.VertexLocation({axisWorldTranslation:"matrix",normalSource:void 0,snapToNearestPixel:this.IG})):void 0,this.ua.i=!1,this.da.i=!1,this.ca.i=!1,this.fa.i=!1,this.Aa.i=!1,this.ha(this.be)}return this.pa=t,this}zL(t){if(this.ea()){const e=t===1?this.yY:this.cE;if(!e||this.nY.length===0)return this;const i=this.AN.fillStyleSolid(!1),s=this.AN.fillStyleRadialGradient(!1),n=this.AN.fillStyleLinearGradient(!1),a=this.us.OE(),o=a.x,l=a.y;let u=xr.projection(o,l,-1);const d=xr.translation(this.uY.x,this.uY.y),f=xr.translation(this.cY.x,this.cY.y);u=xr.translate(u,this.dY.x,this.dY.y),u=xr.multiply(u,f),u=xr.rotate(u,this.fY),u=xr.multiply(u,d),t===1&&(u=xr.scale(u,this.lY.max.x,this.lY.max.y)),this.RR.jR(e).aV(e,(y,m,p,x)=>{if(this.RR.PV(y("uMatrix"),u).dV(y("uIsHighlighted"),t===1||t===2?0:this.zo).AR(y("uHighlightColorOffset"),t===1||t===2?Je:this.Go).dV(y("uRenderEffectMask"),t===2?1:0),this.IG&&this.RR.uV(x("uViewportSizePx"),[a.x*this.RR.$z(),a.y*this.RR.$z()]),t===1)this.RR.AR(y("uColor"),this.mN);else if(i)this.RR.AR(y("uColor"),i.getColor());else if(s&&this.MN){this.RR.uV(y("uCenter"),this.MN.center).uV(y("uDistance"),this.MN.distance).FV(y("uBounds"),this.MN.bounds).dV(y("uAspect"),this.MN.aspectRatio);const b=s.getColorStops();for(let v=0;v<b.length;v+=1)this.RR.AR(y(`color_${v}`),b[v].color).dV(y(`stop_${v}`),b[v].offset)}else if(n&&this._N){this.RR.uV(y("uStartPoint"),this._N.startPoint).uV(y("uEndPoint"),this._N.endPoint).FV(y("uBounds"),this._N.bounds);const b=n.getColorStops();for(let v=0;v<b.length;v+=1)this.RR.AR(y(`color_${v}`),b[v].color).dV(y(`stop_${v}`),b[v].offset)}return t===1&&this.RR.GV(m("aPos"),this.RR.uO).Ky(this.RR.gl.TRIANGLES,6),t!==1&&this.nY.forEach(b=>{this.RR.GV(m("aPos"),b.vertexBuff).GV(m("aMaskTextureCoord"),b.texCoordBuff).cV(y("uMaskTexture"),b.texture,0).Ky(this.RR.gl.TRIANGLES,b.vertexBuffLen)}),!0})}return this}lN(t){return this.gN===t&&{}}We(){return this.ea()?this.oY:[]}jc(){return this.ea()&&this.Fg?this.Fg:Y(0,0)}oi(){if(this.ea()&&this.aY){const t=this.aY;return Y(t.max.x-t.min.x,t.max.y-t.min.y)}return Y(0,0)}VR(){return this.nY.forEach(t=>{t.texCoordBuff&&this.RR.yV(t.texCoordBuff),t.vertexBuff&&this.RR.yV(t.vertexBuff)}),this.nY=[],this.gY&&this.gY.ZR(this),this}bt(){return this.aY.max.x}vt(){return this.aY.min.x}Mt(){return this.aY.max.y}xt(){return this.aY.min.y}vl(){return 0}bl(){return 0}}class uT{constructor(t,e,i){this.pY=new Set,this.SY=s=>(this.pY.add(s),s),this.vY=s=>(this.pY.delete(s),s.VR(),this),this.us=t,this.Zo=e,this.bY=i}EL(t){this.pY.delete(t)&&this.pY.add(t)}W(){for(const t of this.pY)t.VR().dispose();this.us.xn(this.Zo)}Ss(){return this.us.Ss(),this}bn(){return this.Zo}}class y6 extends uT{constructor(){super(...arguments),this.xY=Wt(void 0),this.Qo=!1}qv(t){return this.xY.S(t),this}km(){return this.xY.M()}}class L2 extends y6{constructor(t,e,i){super(t,e,i),this.rN=t,this.gl=t.oN(),this.MY=this.pY}rV(t){const e=t instanceof z0&&t;if(!e)return Ne;const i=e.vt(),s=e.bt(),n=e.xt(),a=e.Mt();if(i===Mt||s===Dt||n===Mt||a===Dt)return Ne;const o=e.vl(),l=e.bl(),u=Ao({min:{x:i,y:n},max:{x:s,y:a}},{x:o,y:l},e.dt),d={min:gt(u.min,e.dt,t.us.dt),max:gt(u.max,e.dt,t.us.dt)},f=this.xY.M();let y;if(f){if(y={min:{x:Math.max(d.min.x,f.x),y:Math.max(d.min.y,f.y)},max:{x:Math.min(d.max.x,f.x+f.width),y:Math.min(d.max.y,f.y+f.height)}},y.max.x<y.min.x||y.max.y<y.min.y)return Ne}else y=d;return y}_Y(t){const e=Array.from(this.MY.values());for(let i=0;i<e.length;i+=1){const s=e[i],n=s.lN(t);if(n)return{entity:s,index:i,collectionMember:n.collectionMember}}}Ee(t){const e=this.rN.wY();return this.SY(new Wz(this.rN,this,t,this.vY,[],e,this.rN.CY(e)))}Lg(t){return this.SY(new $z(this.rN,this,t,this.vY,[],()=>{const e=this.rN.wY();return{id:e,color:this.rN.CY(e)}}))}rp(t,e,i){const s=this.rN.wY();return this.SY(new Zz(this.rN,this,t,this.vY,i,s,this.rN.CY(s),e))}dd(t){const e=this.rN.wY();return this.SY(new f6(this.rN,this,t,this.vY,e,this.rN.CY(e)))}Pr(t){const e=this.rN.wY();return this.SY(new g6(this.rN,this,t,this.vY,[],e,this.rN.CY(e)))}bS(t){const e=this.rN.wY();return this.SY(new Qz(this.rN,this,t,this.vY,[],e,this.rN.CY(e)))}ic(t,e=Dr.Simple){const i=this.rN.wY();if(e===Dr.Simple)return this.SY(new e6(this.rN,this,t,this.vY,[],i,this.rN.CY(i)));throw new Error("GlEngine.addPolygon | No such polygon type!")}Ob(t){return this.SY(new Kz(this.rN,this,t,this.vY,[],()=>{const e=this.rN.wY();return{id:e,color:this.rN.CY(e)}}))}ke(t){const e=this.rN.wY();return this.SY(new t6(this.rN,this,t,this.vY,[],e,this.rN.CY(e)))}lw(t){const e=this.rN.wY();return this.SY(new Hz(this.rN,this,t,this.vY,[],e,this.rN.CY(e)))}Jc(t){const e=this.rN.wY();return this.SY(new Gz(this.rN,this,t,this.vY,[],e,this.rN.CY(e)))}V_(t,e,i){if(i.heatmapDataType==="intensity"){const s=this.rN.wY();return this.SY(new a6(this.rN,this,t,this.vY,e,s,this.rN.CY(s),i))}throw new Ei("Unimplemented Heatmap Grid Static type")}P_(t,e,i){const s=this.rN.wY();return this.SY(new Z0(this.rN,this,t,this.vY,e,i,s,this.rN.CY(s)))}Ex(t,e,i){const s=this.rN.wY();return this.SY(new h6(this.rN,this,t,this.vY,e,i,s,this.rN.CY(s)))}kY(t){return this.SY(new Oz(this.rN,this,this.vY,[],t))}Ps(){if(this.Qo){this.Qo=!1;const t=Array.from(this.pY).sort((e,i)=>e.Ko()-i.Ko());this.pY.clear();for(const e of t)this.pY.add(e)}for(const t of this.pY)t.Ps();return this}zL(t,e){const i=this.xY.M();if(i&&this.gl.hV(i.x*this.gl.$z()*e,i.y*this.gl.$z()*e,i.width*this.gl.$z()*e,i.height*this.gl.$z()*e),t!==1)for(const s of this.pY)s.getVisible()&&s.zL(t);else for(const s of this.pY)s.getMouseInteractions()&&s.getVisible()&&s.zL(t);return this.gl.qz(!1),this}}class cT extends tu{constructor(t){super(t)}}class m6 extends cT{constructor(t){super(t),this.TY="attribute";const{vertices:e,drawSize:i,drawMode:s}=p6(t.gl);this.wR=t.nV(e),this.cG=i,this.dG=s}Ky(t,e,i,s){return this.RR.lV(this.wR,0,{location:t.attribute("aInstanceGeo"),size:3},{location:i?t.attribute("aNormal"):void 0,size:3},{location:s?t.attribute("aTriangleBary"):void 0,size:3}).QV(this.dG,0,this.cG,e),this}kz(){this.RR.yV(this.wR)}}const p6=r=>{const t=new Float32Array(324);let e=0;return t[e+0]=-1,t[e+1]=1,t[e+2]=1,t[e+3]=0,t[e+4]=1,t[e+5]=0,t[e+6]=1,t[e+7]=0,t[e+8]=0,e+=9,t[e+0]=1,t[e+1]=1,t[e+2]=1,t[e+3]=0,t[e+4]=1,t[e+5]=0,t[e+6]=1,t[e+7]=1,t[e+8]=0,e+=9,t[e+0]=-1,t[e+1]=1,t[e+2]=-1,t[e+3]=0,t[e+4]=1,t[e+5]=0,t[e+6]=0,t[e+7]=0,t[e+8]=1,e+=9,t[e+0]=-1,t[e+1]=1,t[e+2]=-1,t[e+3]=0,t[e+4]=1,t[e+5]=0,t[e+6]=0,t[e+7]=1,t[e+8]=0,e+=9,t[e+0]=1,t[e+1]=1,t[e+2]=1,t[e+3]=0,t[e+4]=1,t[e+5]=0,t[e+6]=1,t[e+7]=0,t[e+8]=1,e+=9,t[e+0]=1,t[e+1]=1,t[e+2]=-1,t[e+3]=0,t[e+4]=1,t[e+5]=0,t[e+6]=1,t[e+7]=0,t[e+8]=0,e+=9,t[e+0]=-1,t[e+1]=-1,t[e+2]=-1,t[e+3]=-1,t[e+4]=0,t[e+5]=0,t[e+6]=1,t[e+7]=0,t[e+8]=0,e+=9,t[e+0]=-1,t[e+1]=-1,t[e+2]=1,t[e+3]=-1,t[e+4]=0,t[e+5]=0,t[e+6]=1,t[e+7]=1,t[e+8]=0,e+=9,t[e+0]=-1,t[e+1]=1,t[e+2]=-1,t[e+3]=-1,t[e+4]=0,t[e+5]=0,t[e+6]=0,t[e+7]=0,t[e+8]=1,e+=9,t[e+0]=-1,t[e+1]=1,t[e+2]=-1,t[e+3]=-1,t[e+4]=0,t[e+5]=0,t[e+6]=0,t[e+7]=1,t[e+8]=0,e+=9,t[e+0]=-1,t[e+1]=-1,t[e+2]=1,t[e+3]=-1,t[e+4]=0,t[e+5]=0,t[e+6]=1,t[e+7]=0,t[e+8]=1,e+=9,t[e+0]=-1,t[e+1]=1,t[e+2]=1,t[e+3]=-1,t[e+4]=0,t[e+5]=0,t[e+6]=1,t[e+7]=0,t[e+8]=0,e+=9,t[e+0]=1,t[e+1]=-1,t[e+2]=1,t[e+3]=1,t[e+4]=0,t[e+5]=0,t[e+6]=1,t[e+7]=0,t[e+8]=0,e+=9,t[e+0]=1,t[e+1]=-1,t[e+2]=-1,t[e+3]=1,t[e+4]=0,t[e+5]=0,t[e+6]=1,t[e+7]=1,t[e+8]=0,e+=9,t[e+0]=1,t[e+1]=1,t[e+2]=1,t[e+3]=1,t[e+4]=0,t[e+5]=0,t[e+6]=0,t[e+7]=0,t[e+8]=1,e+=9,t[e+0]=1,t[e+1]=1,t[e+2]=1,t[e+3]=1,t[e+4]=0,t[e+5]=0,t[e+6]=0,t[e+7]=1,t[e+8]=0,e+=9,t[e+0]=1,t[e+1]=-1,t[e+2]=-1,t[e+3]=1,t[e+4]=0,t[e+5]=0,t[e+6]=1,t[e+7]=0,t[e+8]=1,e+=9,t[e+0]=1,t[e+1]=1,t[e+2]=-1,t[e+3]=1,t[e+4]=0,t[e+5]=0,t[e+6]=1,t[e+7]=0,t[e+8]=0,e+=9,t[e+0]=-1,t[e+1]=-1,t[e+2]=1,t[e+3]=0,t[e+4]=0,t[e+5]=1,t[e+6]=1,t[e+7]=0,t[e+8]=0,e+=9,t[e+0]=1,t[e+1]=-1,t[e+2]=1,t[e+3]=0,t[e+4]=0,t[e+5]=1,t[e+6]=1,t[e+7]=1,t[e+8]=0,e+=9,t[e+0]=-1,t[e+1]=1,t[e+2]=1,t[e+3]=0,t[e+4]=0,t[e+5]=1,t[e+6]=0,t[e+7]=0,t[e+8]=1,e+=9,t[e+0]=-1,t[e+1]=1,t[e+2]=1,t[e+3]=0,t[e+4]=0,t[e+5]=1,t[e+6]=0,t[e+7]=1,t[e+8]=0,e+=9,t[e+0]=1,t[e+1]=-1,t[e+2]=1,t[e+3]=0,t[e+4]=0,t[e+5]=1,t[e+6]=1,t[e+7]=0,t[e+8]=1,e+=9,t[e+0]=1,t[e+1]=1,t[e+2]=1,t[e+3]=0,t[e+4]=0,t[e+5]=1,t[e+6]=1,t[e+7]=0,t[e+8]=0,e+=9,t[e+0]=1,t[e+1]=-1,t[e+2]=-1,t[e+3]=0,t[e+4]=0,t[e+5]=-1,t[e+6]=1,t[e+7]=0,t[e+8]=0,e+=9,t[e+0]=-1,t[e+1]=-1,t[e+2]=-1,t[e+3]=0,t[e+4]=0,t[e+5]=-1,t[e+6]=1,t[e+7]=1,t[e+8]=0,e+=9,t[e+0]=1,t[e+1]=1,t[e+2]=-1,t[e+3]=0,t[e+4]=0,t[e+5]=-1,t[e+6]=0,t[e+7]=0,t[e+8]=1,e+=9,t[e+0]=1,t[e+1]=1,t[e+2]=-1,t[e+3]=0,t[e+4]=0,t[e+5]=-1,t[e+6]=0,t[e+7]=1,t[e+8]=0,e+=9,t[e+0]=-1,t[e+1]=-1,t[e+2]=-1,t[e+3]=0,t[e+4]=0,t[e+5]=-1,t[e+6]=1,t[e+7]=0,t[e+8]=1,e+=9,t[e+0]=-1,t[e+1]=1,t[e+2]=-1,t[e+3]=0,t[e+4]=0,t[e+5]=-1,t[e+6]=1,t[e+7]=0,t[e+8]=0,e+=9,t[e+0]=-1,t[e+1]=-1,t[e+2]=-1,t[e+3]=0,t[e+4]=-1,t[e+5]=0,t[e+6]=1,t[e+7]=0,t[e+8]=0,e+=9,t[e+0]=1,t[e+1]=-1,t[e+2]=-1,t[e+3]=0,t[e+4]=-1,t[e+5]=0,t[e+6]=1,t[e+7]=1,t[e+8]=0,e+=9,t[e+0]=-1,t[e+1]=-1,t[e+2]=1,t[e+3]=0,t[e+4]=-1,t[e+5]=0,t[e+6]=0,t[e+7]=0,t[e+8]=1,e+=9,t[e+0]=-1,t[e+1]=-1,t[e+2]=1,t[e+3]=0,t[e+4]=-1,t[e+5]=0,t[e+6]=0,t[e+7]=1,t[e+8]=0,e+=9,t[e+0]=1,t[e+1]=-1,t[e+2]=-1,t[e+3]=0,t[e+4]=-1,t[e+5]=0,t[e+6]=1,t[e+7]=0,t[e+8]=1,e+=9,t[e+0]=1,t[e+1]=-1,t[e+2]=1,t[e+3]=0,t[e+4]=-1,t[e+5]=0,t[e+6]=1,t[e+7]=0,t[e+8]=0,e+=9,{vertices:t,drawSize:e/9,drawMode:r.TRIANGLES}};class S6 extends cT{constructor(t,e){super(t),this.TY="attribute",this.FY=e;const{vertices:i,indices:s}=x6();this.wR=t.nV(i),this.uG=t.OV(s),this.cG=s.length,this.dG=t.gl.TRIANGLES}Ky(t,e,i,s){return this.RR.lV(this.wR,0,{location:t.attribute("aEdge"),size:3},{location:i?t.attribute("aNormal"):void 0,size:3},{location:t.attribute("aInstanceGeo"),size:3}).XV(this.uG).dV(t.uniform("uEdgeRoundness"),this.FY/2).JV(this.dG,this.cG,0,e),this}kz(){this.RR.yV(this.wR),this.RR.yV(this.uG)}IY(t){return this.FY=t,this}PY(){return this.FY}}const x6=()=>{const r=[{normal:{x:0,y:1,z:0},perpendA:{x:0,y:0,z:1},perpendB:{x:-1,y:0,z:0}},{normal:{x:0,y:0,z:-1},perpendA:{x:0,y:1,z:0},perpendB:{x:-1,y:0,z:0}},{normal:{x:-1,y:0,z:0},perpendA:{x:0,y:1,z:0},perpendB:{x:0,y:0,z:1}},{normal:{x:1,y:0,z:0},perpendA:{x:0,y:1,z:0},perpendB:{x:0,y:0,z:-1}},{normal:{x:0,y:0,z:1},perpendA:{x:0,y:1,z:0},perpendB:{x:1,y:0,z:0}},{normal:{x:0,y:-1,z:0},perpendA:{x:0,y:0,z:-1},perpendB:{x:-1,y:0,z:0}}],t=[];let e=0;const i=[];let s=0;for(const f of r){const{normal:y,perpendA:m,perpendB:p}=f,x=ft.multiply(m,-1),b=ft.multiply(p,-1),v=e;t[e]={thicknessDirection:ft.addVec(y,m,p),edge:ft.addVec(x,b),normal:y},e+=1;const R=e;t[e]={thicknessDirection:ft.addVec(y,x,p),edge:ft.addVec(m,b),normal:y},e+=1;const E=e;t[e]={thicknessDirection:ft.addVec(y,x,b),edge:ft.addVec(m,p),normal:y},e+=1;const V=e;t[e]={thicknessDirection:ft.addVec(y,m,b),edge:ft.addVec(x,p),normal:y},e+=1,i[s+0]=E,i[s+1]=v,i[s+2]=V,i[s+3]=E,i[s+4]=R,i[s+5]=v,s+=6;const F=[{A:m,B:p},{A:x,B:p},{A:x,B:b},{A:m,B:b}];for(const L of F){L.thicknessDirection=ft.addVec(y,L.A,L.B),L.stripVerticesA=[],L.stripVerticesB=[];const z=[{direction:L.A,other:L.B,vertices:L.stripVerticesA},{direction:L.B,other:L.A,vertices:L.stripVerticesB}];for(const B of z)for(let A=0;A<8;A+=1){const T=.5*A/7,w=ft.normalize(ft.lerp(y,B.direction,T)),C=Math.PI/2-ft.angle(w,y),k=ft.addVec(ft.multiply(ft.multiply(B.direction,-1),1-Math.cos(C)),ft.multiply(ft.multiply(y,-1),1-Math.sin(C)),ft.multiply(B.other,-1)),_=e;t[e]={thicknessDirection:L.thicknessDirection,normal:w,edge:k};const X=t[e];e+=1,B.vertices.push({index:_,vertex:X})}}for(let L=0;L<F.length;L+=1){const z=F[L],B=F[L<F.length-1?L+1:0],A=L%2==0?z.stripVerticesB:z.stripVerticesA,T=L%2==0?B.stripVerticesB:B.stripVerticesA;for(let w=1;w<A.length;w+=1){const C=A[w-1],k=T[w-1],_=A[w],X=T[w];i[s+0]=C.index,i[s+1]=k.index,i[s+2]=X.index,i[s+3]=_.index,i[s+4]=C.index,i[s+5]=X.index,s+=6}}}const n=[{x:-1,y:1,z:-1,flipVertexOrder:!1},{x:-1,y:1,z:1,flipVertexOrder:!0},{x:1,y:1,z:1,flipVertexOrder:!1},{x:1,y:1,z:-1,flipVertexOrder:!0},{x:-1,y:-1,z:-1,flipVertexOrder:!0},{x:-1,y:-1,z:1,flipVertexOrder:!1},{x:1,y:-1,z:1,flipVertexOrder:!0},{x:1,y:-1,z:-1,flipVertexOrder:!1}],a=Math.PI/15,o=2*Math.PI/15;let l=e;for(const f of n){let y=0;t[e]={thicknessDirection:f,normal:{x:0,y:f.y,z:0},edge:{x:-f.x,y:0,z:-f.z}},e+=1,y+=1;for(let b=1;b<8.5;b+=1){const v=b===15?Math.PI:b*a,R=1*Math.cos(v)*f.y,E=Math.sin(v);for(let V=0;V<Math.ceil(3.75)+1;V+=1){const F=V===15?0:V*o,L=E*Math.cos(F)*1*f.x,z=E*Math.sin(F)*1*f.z,B={x:L,y:R,z},A=ft.normalize({x:L,y:R,z});t[e]={thicknessDirection:f,normal:A,edge:{x:B.x-f.x,y:B.y-f.y,z:B.z-f.z}},e+=1,y+=1}}const m=[];for(let b=1;b<=Math.ceil(3.75);b+=1)m.push(l),b===15?m.push(l+1):m.push(l+b+1),m.push(l+b);const p=l+1,x=Math.ceil(3.75)+1;for(let b=0;b<6.5;b+=1)for(let v=0;v<Math.ceil(3.75);v+=1){let R=0;const E=p+(b+1)*x+v;let V=0;v===14?(R=p+b*x,V=p+(b+1)*x):(R=p+b*x+v+1,V=p+(b+1)*x+v+1),m.push(p+b*x+v),m.push(R),m.push(E),m.push(E),m.push(R),m.push(V)}i.push.apply(i,f.flipVertexOrder?m.reverse():m),l+=y}const u=new Float32Array(9*t.length);let d=0;for(const f of t)u[d+0]=f.edge.x,u[d+1]=f.edge.y,u[d+2]=f.edge.z,u[d+3]=f.normal.x,u[d+4]=f.normal.y,u[d+5]=f.normal.z,u[d+6]=f.thicknessDirection.x,u[d+7]=f.thicknessDirection.y,u[d+8]=f.thicknessDirection.z,d+=9;return{vertices:u,indices:new Uint16Array(i)}},zS=(r,t)=>{let e=r._V.Cz.get(t);return e||(e=t!==void 0&&t>0?new S6(r,Zt(t,0,1)):new m6(r),r._V.Cz.set(t,e),e)};class A6 extends gp{rS(t){return this.Uz=this.qp.M(),this.qp.S(t),this}Cv(t){return this.DY=t,this}kv(){return this.DY}}class bh extends A6{constructor(t,e,i,s,n){super(t,e,i),this.BY=t,this.gN=s,this.mN=n,this.rN=t.rN,this.RR=this.rN.oN()}lN(t){return t===this.gN&&{}}}class v6 extends bh{constructor(t,e,i,s,n){super(t,e,i,s,n),this.DY="cull-back",this.Ya=vr,this.LY={},this.RY=[],this.AN=Ds({fillStyleSolid:()=>ce(this.be)&&this.be,fillStyleIndividual:()=>ks(this.be)&&this.be,fillStylePaletted:()=>wi(this.be)&&this.be}),this.be=bs.fillStyle,this.qp.S(jl)}Ps(t){const e=this.RY,i=this.be,s=i!==Vt,n=this.EY,a=this.ta()||this.zY!==n,o=this.Wz(),l=this.Bo.M(),u=this.Bo.i;if(s){for(const v of e)v.id=v.id!==void 0?String(v.id):void 0,v.xSize=v.xSize!==void 0&&v.xSize<0?-v.xSize:v.xSize,v.ySize=v.ySize!==void 0&&v.ySize<0?-v.ySize:v.ySize,v.zSize=v.zSize!==void 0&&v.zSize<0?-v.zSize:v.zSize;const d=11,f=this.VY||0;let y=f;for(const v of e){const R=v.id;R!==void 0&&this.LY[R]!==void 0||(y+=1)}let m,p=!1,x=!1;if(p=y!==f,x=p,m=!x&&(e.length<100?"chunks":"all"),p){const v=y*d,R=new Float32Array(v);this.IW&&R.set(this.IW),this.IW=R,this.OY=v,this.NY=f*d}const b=ks(i)?i.getFallbackColor():void 0;for(const v of e){const R=v.id,E=R!==void 0&&this.LY[R],V=[v.xCenter,v.yCenter,v.zCenter,v.xSize,v.ySize,v.zSize,v.color?v.color.r:b?b.r:void 0,v.color?v.color.g:b?b.g:void 0,v.color?v.color.b:b?b.b:void 0,v.color?v.color.a:b?b.a:void 0,v.value];if(E){for(let F=0;F<d;F+=1)V[F]=V[F]!==void 0?V[F]:E.buffer[F];E.buffer.set(V)}else{const F=this.NY,L=new Float32Array(this.IW.buffer,F*Float32Array.BYTES_PER_ELEMENT,d);L.set(V),R!==void 0&&(this.LY[R]={location:F,buffer:L}),this.NY+=d}}if(x&&(this.lG=this.RR.nV(this.IW,!0)),m==="all")this.RR.zV(this.lG,0,this.IW);else if(m==="chunks")for(const v of e){const R=v.id;if(R!==void 0){const E=this.LY[R];this.RR.zV(this.lG,E.location,E.buffer)}}if(a||o||u){const v=this.AN.fillStyleSolid(a),R=this.AN.fillStyleIndividual(a),E=this.AN.fillStylePaletted(a);v||R||E?(this.GY=zS(this.RR,this.WY()),this.cE=this.RR.oz(j["3D"],j.ColorShaded3D({dataType:R?"attribute":E?["lookup",E.getLookUpProperty(),E.lut]:"uniform",shadingStyle:this.qp.M().type}),j.VertexLocation({offset:{sizeUnit:"axis",dataType:"attribute",halved:!0},axisWorldTranslation:Pt(this.dt),normalSource:this.GY.TY}),this.EY!==void 0&&j.RoundedEdges3D),this.yY=l?this.RR.oz(j["3D"],j.VertexLocation({offset:{sizeUnit:"axis",dataType:"attribute",halved:!0},axisWorldTranslation:Pt(this.dt),normalSource:void 0}),j.MousePicking,this.EY!==void 0&&j.RoundedEdges3D):void 0):(this.GY=void 0,this.cE=void 0,this.yY=void 0)}if(e.length>0){const v=Kt({x:Mt,y:Mt,z:Mt},{x:Dt,y:Dt,z:Dt});for(let R=0;R<this.NY;R+=d){const E=this.IW[R+0],V=this.IW[R+3]/2,F=E-V,L=E+V,z=this.IW[R+1],B=this.IW[R+4]/2,A=z-B,T=z+B,w=this.IW[R+2],C=this.IW[R+5]/2,k=w-C,_=w+C;v.min.x=v.min.x<F?v.min.x:F,v.min.y=v.min.y<A?v.min.y:A,v.min.z=v.min.z<k?v.min.z:k,v.max.x=v.max.x>L?v.max.x:L,v.max.y=v.max.y>T?v.max.y:T,v.max.z=v.max.z>_?v.max.z:_}this.Ya=v}this.VY=y,this.RY.length=0}return this.ha(i),this.zY=n,this.qp.i=!1,this.Bo.i=!1,this}zL(t){const e=t===1?this.yY:this.cE,i=this.GY,s=this.lG,n=this.be,a=this.VY,o=this.qp.M();return e&&s&&a!==void 0&&this.RR.aV(e,(l,u,d)=>{let f=!1;const y=u("aPos"),m=u("aOffsetAxis");this.RR.jR(e).IV(l("uScale"),this.BY.aE.fV()).IV(l("uDisp"),this.BY.aE.AV()).DV(l("uViewProjectionMatrix"),this.UY).dV(l("uIsHighlighted"),t===1||t===2?0:this.zo).AR(l("uHighlightColorOffset"),t===1||t===2?Je:this.Go).dV(l("uRenderEffectMask"),t===2?1:0);const p={location:y,size:3},x={location:m,size:3},b={location:void 0,size:4};if(t!==1&&o.type==="phong"&&this.RR.IV(l("uCameraLoc"),this.YY).IV(l("uLightLoc"),this.HY).dV(l("uAmbientReflection"),o.ambientReflection).dV(l("uSpecularReflection"),o.specularReflection).dV(l("uDiffuseReflection"),o.diffuseReflection).dV(l("uShininess"),o.shininess).AR(l("uLightColor"),o.specularColor).AR(l("uAmbientColor"),o.ambientColor),t===1)this.RR.AR(l("uColor"),this.mN);else if(ce(n))this.RR.AR(l("uColorDiffuse"),n.getColor());else if(ks(n)){const v=u("aColor");b.location=v}else if(wi(n)){const v=ir(n,this,void 0);if(!v&&n.lut.percentageValues)return!1;this.RR.LO(d,n.lut,v)}return s&&(this.RR.lV(s,1,p,x,b,{location:void 0,size:1}),i.Ky(d,a,o.type==="phong"&&t!==1,!1),f=!0),f}),this}dispose(){return super.dispose(),this.lG&&(this.RR.yV(this.lG),this.lG=void 0),this.cE=void 0,this}VR(){return this.dispose(),this}gS(t){this.RY=cs(this.RY,t,{canReturnB:!0})}Ce(t){return this.be=kl(this.be,t),this}Eh(){return this.be}fS(t){return this.EY=t!==void 0&&t>0?Zt(t,0,1):void 0,this}WY(){return this.EY}bt(){return this.Ya.max.x}vt(){return this.Ya.min.x}Mt(){return this.Ya.max.y}xt(){return this.Ya.min.y}aS(){return this.Ya.max.z}lS(){return this.Ya.min.z}vl(){return 0}bl(){return 0}uS(){return 0}ta(){return Dl(this.ia,this.be)}ha(t){this.ia=t}}class b6 extends tu{constructor(t,e){super(t),this.TY="custom",this.oG=e;const{vertices:i,drawSize:s}=this.aG();this.lG=t.nV(i),this.cG=s}jR(t){return this.RR.lV(this.lG,0,{location:t.attribute("aSegmentPosition"),size:1},{location:t.attribute("aPerpendHorizontal"),size:1},{location:t.attribute("aPerpendVertical"),size:1}),this}Ky(t){return this.RR.QV(this.RR.gl.TRIANGLE_STRIP,0,this.cG,t),this}aG(){const t=this.oG,e=new Float32Array(2*(t+1)*3);let i=0;for(let s=0;s<=t;s+=1){const n=2*Math.PI*s/t,a=Math.cos(n),o=Math.sin(n);for(const l of[0,1])e[i+0]=l,e[i+1]=a,e[i+2]=o,i+=3}return{vertices:e,drawSize:i/3}}kz(){this.RR.yV(this.lG)}}const dT=(r,t=16)=>{let e=r._V._z.get(t);return e||(e=new b6(r,t),r._V._z.set(t,e),e)};class M6 extends bh{constructor(t,e,i,s,n){super(t,e,i,s,n),this.DY="cull-back",this.$Y=vr,this.jY=[],this.ZY=!1,this.lu=bs.lineStyle,this.qp.S(ql)}Ps(t){const e=this.ZY,i=this.lu,s=this.cu!==i,n=this.Wz(),a=e;if(e){const o=eS(this.jY);this.QY=this.RR.nV(o,!1,this.QY)}if(a&&(this.$Y=rS(this.jY)),s||n){const l=As(i)&&i.getFillStyle(),u=i.getThickness()===1?"primitive":"instanced";this.bG=void 0,ce(l)&&(u==="primitive"?this.bG={type:u,shader:this.RR.oz(j["3D"],j.VertexLocation({axisWorldTranslation:Pt(this.dt),normalSource:void 0}),j.Color({dataType:"uniform"})),fillStyle:l}:u==="instanced"&&(this.bG={type:u,shader:this.RR.oz(j["3D"],j.ColorShaded3D({dataType:"uniform",shadingStyle:this.qp.M().type}),j.LineInstanced3D({axisWorldTranslation:Pt(this.dt)})),geometry:dT(this.RR,8),fillStyle:l}))}return this.ZY=!1,this.cu=i,this.qp.i=!1,this}zL(t){if(t===1)return this;const e=this.RR.gl,i=this.bG,s=this.QY,n=this.lu,a=this.qp.M();if(i&&s&&As(n))switch(i.type){case"instanced":{const o=.5*this.ks.Op(n.thickness),l=i.fillStyle.getColor(),u=i.shader,d=i.geometry;this.RR.aV(u,(f,y,m)=>{this.RR.jR(u).IV(f("uScale"),this.BY.aE.fV()).IV(f("uDisp"),this.BY.aE.AV()).DV(f("uViewProjectionMatrix"),this.UY).AR(f("uColorDiffuse"),l).dV(f("uOffsetWU"),o).dV(f("uIsHighlighted"),this.zo).AR(f("uHighlightColorOffset"),t===2?Je:this.Go).dV(f("uRenderEffectMask"),t===2?1:0),a.type==="phong"&&this.RR.IV(f("uCameraLoc"),this.YY).IV(f("uLightLoc"),this.HY).dV(f("uAmbientReflection"),a.ambientReflection).dV(f("uSpecularReflection"),a.specularReflection).dV(f("uDiffuseReflection"),a.diffuseReflection).dV(f("uShininess"),a.shininess).AR(f("uLightColor"),a.specularColor).AR(f("uAmbientColor"),a.ambientColor),e.bindBuffer(e.ARRAY_BUFFER,s);const p=y("aLocationA"),x=y("aLocationB");return e.vertexAttribPointer(p,3,e.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),this.RR.UV(p,1),e.enableVertexAttribArray(p),e.vertexAttribPointer(x,3,e.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,3*Float32Array.BYTES_PER_ELEMENT),this.RR.UV(x,1),e.enableVertexAttribArray(x),d.jR(m).Ky(this.jY.length/2),!0});break}case"primitive":{const o=As(n)?n.getFillStyle():void 0,l=o&&ce(o)?o.getColor():void 0;if(l){const u=i.shader;this.RR.aV(u,(d,f)=>(this.RR.jR(u).IV(d("uScale"),this.BY.aE.fV()).IV(d("uDisp"),this.BY.aE.AV()).DV(d("uViewProjectionMatrix"),this.UY).AR(d("uColor"),l).dV(d("uIsHighlighted"),this.zo).AR(d("uHighlightColorOffset"),t===2?Je:this.Go).dV(d("uRenderEffectMask"),t===2?1:0).lV(s,void 0,{location:f("aPos"),size:3}).Ky(e.LINES,this.jY.length),!0))}break}}return this}nl(t){for(let e=0;e<t.length-1;e+=1){const i=t[e],s=t[e+1];this.jY.push(i),this.jY.push(s)}return this.ZY=!0,{cs(){return this},ys(){return this}}}Nt(){return this.jY.length=0,this.ZY=!0,this}Ap(){return[]}bd(t){}Re(t){return this.lu=typeof t=="function"?t(this.lu):t,this}uu(){return this.lu}VR(){return this.QY&&(this.RR.yV(this.QY),this.QY=void 0),this}bt(){return this.$Y.max.x}vt(){return this.$Y.min.x}Mt(){return this.$Y.max.y}xt(){return this.$Y.min.y}aS(){return this.$Y.max.z}lS(){return this.$Y.min.z}vl(){const t=this.lu;return t===vt?0:t.getThickness()}bl(){const t=this.lu;return t===vt?0:t.getThickness()}uS(){const t=this.lu;return t===vt?0:t.getThickness()}}class R6 extends tu{constructor(t,e,i){super(t),this.TY="gpu-calculate",this.JY=e,this.KY=i;const{vertices:s,drawSize:n}=this.aG();this.lG=t.nV(s),this.cG=n}Ky(t,e,i,s){return this.RR.lV(this.lG,0,{location:t.attribute("aInstanceGeo"),size:3},{location:s?t.attribute("aTriangleBary"):void 0,size:3}).QV(this.RR.gl.TRIANGLES,0,this.cG,e),this}aG(){const t=this.KY,e=this.JY,i=new Float32Array(6*(6*e+6*(t-2)*e));let s=0;const n=2*Math.PI/e,a=Math.PI/t,o=(l,u,d,f,y)=>{const m=u*n,p=Math.PI/2-l*a,x=Math.cos(p),b=x*Math.cos(m),v=x*Math.sin(m),R=Math.sin(p);i[s]=b,i[s+1]=R,i[s+2]=v,i[s+3]=d,i[s+4]=f,i[s+5]=y,s+=6};for(let l=0;l<t;l+=1)for(let u=0;u<e;u+=1)l>0&&(o(l,u,1,0,0),o(l,u+1,1,1,0),o(l+1,u,0,0,1)),l<t-1&&(o(l,u+1,1,1,0),o(l+1,u+1,0,1,0),o(l+1,u,0,0,1));return s!==i.length&&kn(0,()=>{this.RR.cA.Hn&&s>i.length&&nt.console.warn(`LightningChart JS unexpected error scenario, sphere geometry buffer size mismatch.
A point series 3D component might have missing points.

This warning can be omitted with LightningChartOptions.warnings`)}),{vertices:i,drawSize:s/6}}kz(){this.RR.yV(this.lG)}}const fT=(r,t)=>{const e=Math.round(t);e<3&&kn(0,re);const i=e;let s=r._V.wz.get(Array.from(r._V.wz.keys()).find(n=>n.sectors===e&&n.stacks===i));return s||(s=new R6(r,e,i),r._V.wz.set({sectors:e,stacks:i},s),s)};class E6 extends bh{constructor(t,e,i,s,n){super(t,e,i,s,n),this.DY="cull-back",this.QM=[],this.bG={},this.vW=new FS(this.QM,a=>a.vertexBuffer&&this.RR.yV(a.vertexBuffer),!0),this.yu=[],this.Ha=0,this.$a=[],this.Xa=0,this.Ya=vr,this.ja=vr,this.AN=Ds({lineStyleSolid:()=>{const a=this.lu;return As(a)&&a},lineFillSolid:()=>{const a=this.lu.getFillStyle();return ce(a)&&a},lineFillPaletted:()=>{const a=this.lu.getFillStyle();return wi(a)&&a},jointStyleTriangulatedPoints:()=>Ea(this.mS)&&this.mS,jointSizeTriangulated:()=>{const a=this.mS;return Ea(a)&&a.getSize()},jointFillSolid:()=>{const a=this.mS.getFillStyle();return ce(a)&&a},jointFillPaletted:()=>{const a=this.mS.getFillStyle();return wi(a)&&a},wireframeLineStyleSolid:()=>{const a=Ea(this.mS)&&this.mS.getWireframeStyle();return As(a)&&a},wireframeFillSolid:()=>{const a=Ea(this.mS)&&this.mS.getWireframeStyle(),o=a&&a.getFillStyle();return ce(o)&&o}}),this.Qa=!1,this.lu=bs.lineStyle,this.mS=bs.pointStyle3D,this.qp.S(jl),this.wW={attributesPerVertex:3,prepareRenderData:(a,o)=>eS(a)}}Ps(t){const e=this.Qa,i=this.$a,s=this.Xa,n=s>0,a=this.lu,o=a!==this.cu,l=this.mS,u=l!==this.qY,d=this.Wz(),f=this.Bo.i,y=this.Bo.M();this.ja&&(this.Ya=t0(this.Ya,this.ja),this.ja=void 0),n&&(this.yu=cs(this.yu,i,{canReturnB:!0}),this.Ha+=s);let m=i,p=s;if(e&&(this.QM.forEach(x=>{x.existingCoordinatesCount=0,x.existingDataPointsCount=0,x.boundaries=vr}),this.vW.cW(),m=this.yu,p=this.Ha),p>0){const b=Math.floor(this.rN.tH/(this.wW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT)),v=this.Uo("ApplicationType",E=>E.type==="UserSeries")?p:1e3,R=Zt(v,1e5,b);this.vW.oW(m,R,(E,V,F,L)=>({existingDataPointsCount:F-L,existingCoordinatesCount:F,allocatedCoordinatesCount:E,jointPointsCount:L,lastDataPoint:V[F-1],boundaries:vr,vertexBuffer:this.RR.EV(E*this.wW.attributesPerVertex,this.wW.prepareRenderData(V,F))}),(E,V,F,L)=>{this.RR.zV(E.vertexBuffer,E.existingCoordinatesCount*this.wW.attributesPerVertex,this.wW.prepareRenderData(V,F)),E.existingDataPointsCount+=F-L,E.existingCoordinatesCount+=F,E.jointPointsCount+=L,E.lastDataPoint=V[F-1]})}if(o||u||d||f){const x={},b=this.AN.lineStyleSolid(o),v=this.AN.lineFillSolid(o),R=this.AN.lineFillPaletted(o),E=v||R,V=this.AN.jointStyleTriangulatedPoints(u),F=this.AN.jointSizeTriangulated(u),L=this.AN.jointFillSolid(u),z=this.AN.jointFillPaletted(u),B=L||z,A=this.AN.wireframeLineStyleSolid(u),T=this.AN.wireframeFillSolid(u),w=a.getThickness()<0||a.getThickness()===1&&this.Uo("ApplicationType",k=>k.type==="InternalUI")?"primitive":"instanced",C=R?["lookup",R.getLookUpProperty(),R.lut]:"uniform";if(w==="primitive"&&E?x.lines={type:"primitive",fillStyleSolid:v,fillStylePaletted:R,shader:this.RR.oz(j["3D"],j.Color({dataType:C}),j.VertexLocation({axisWorldTranslation:Pt(this.dt),normalSource:void 0})),mousePicking:y?{shader:this.RR.oz(j["3D"],j.MousePicking,j.VertexLocation({axisWorldTranslation:Pt(this.dt),normalSource:void 0}))}:void 0}:w==="instanced"&&b&&E&&(x.lines={type:"instanced",lineStyleSolid:b,fillStyleSolid:v,fillStylePaletted:R,shader:this.RR.oz(j["3D"],j.ColorShaded3D({dataType:C,shadingStyle:this.qp.M().type}),j.LineInstanced3D({axisWorldTranslation:Pt(this.dt)})),geometry:T6(this.RR,b.getThickness()),mousePicking:y?{shader:this.RR.oz(j["3D"],j.MousePicking,j.LineInstanced3D({axisWorldTranslation:Pt(this.dt)}))}:void 0}),x.markers=void 0,B&&V){const k=kR(V.getShape(),{cube:()=>zS(this.RR),sphere:()=>w6(this.RR,V)});x.markers={geometry:k,pointStyle:V,pointSizeNWU:typeof F=="number"&&F,pointSizeAxis:typeof F=="object"&&F,fillStyleSolid:L,fillStylePaletted:z,shader:this.RR.oz(j["3D"],j.ColorShaded3D({dataType:z?["lookup",z.getLookUpProperty(),z.lut]:"uniform",shadingStyle:this.qp.M().type,wireframe:T!==!1}),j.VertexLocation({offset:{dataType:"uniform",sizeUnit:typeof F=="number"?"nwu":"axis",symmetric:typeof F=="number",halved:!0},axisWorldTranslation:Pt(this.dt),normalSource:k.TY})),mousePicking:y?{shader:this.RR.oz(j["3D"],j.MousePicking,j.VertexLocation({offset:{dataType:"uniform",sizeUnit:typeof F=="number"?"nwu":"axis",symmetric:typeof F=="number",halved:!0},axisWorldTranslation:Pt(this.dt),normalSource:void 0}))}:void 0,wireframe:A&&T&&{thickness:A.getThickness(),fillStyleSolid:T}}}this.bG=x}return this.Qa=!1,this.$a=[],this.Xa=0,this.cu=a,this.qY=l,this.qp.i=!1,this.Bo.i=!1,this}zL(t){var e,i;const s=this.RR.gl,{lines:n,markers:a}=this.bG,o=this.qp.M(),l=t===1?(e=n==null?void 0:n.mousePicking)===null||e===void 0?void 0:e.shader:n==null?void 0:n.shader;if(n&&l&&n.type==="instanced"){const d=l,{geometry:f,lineStyleSolid:y,fillStyleSolid:m,fillStylePaletted:p}=n;this.RR.aV(d,(x,b,v)=>{let R=!1;if(this.RR.jR(d).IV(x("uScale"),this.BY.aE.fV()).IV(x("uDisp"),this.BY.aE.AV()).DV(x("uViewProjectionMatrix"),this.UY).dV(x("uOffsetWU"),this.ks.Op(y.getThickness())).dV(x("uIsHighlighted"),t===1||t===2?0:this.zo).AR(x("uHighlightColorOffset"),t===1||t===2?Je:this.Go).dV(x("uRenderEffectMask"),t===2?1:0),t!==1&&o.type==="phong"&&this.RR.IV(x("uCameraLoc"),this.YY).IV(x("uLightLoc"),this.HY).dV(x("uAmbientReflection"),o.ambientReflection).dV(x("uSpecularReflection"),o.specularReflection).dV(x("uDiffuseReflection"),o.diffuseReflection).dV(x("uShininess"),o.shininess).AR(x("uLightColor"),o.specularColor).AR(x("uAmbientColor"),o.ambientColor),t===1)this.RR.AR(x("uColor"),this.mN);else if(m)this.RR.AR(x("uColorDiffuse"),m.getColor());else if(p){const E=ir(p,this,void 0);if(!E&&p.lut.percentageValues)return!1;this.RR.LO(v,p.lut,E)}return this.QM.forEach(E=>{s.bindBuffer(s.ARRAY_BUFFER,E.vertexBuffer);const V=b("aLocationA"),F=b("aLocationB");s.vertexAttribPointer(V,3,s.FLOAT,!1,3*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),this.RR.UV(V,1),s.enableVertexAttribArray(V),s.vertexAttribPointer(F,3,s.FLOAT,!1,3*Float32Array.BYTES_PER_ELEMENT,3*Float32Array.BYTES_PER_ELEMENT),this.RR.UV(F,1),s.enableVertexAttribArray(F),f.jR(v).Ky(E.existingCoordinatesCount-1),R=!0}),R})}if(n&&l&&n.type==="primitive"){const d=l,{fillStyleSolid:f,fillStylePaletted:y}=n;this.RR.aV(d,(m,p,x)=>{let b=!1;if(this.RR.jR(d).IV(m("uScale"),this.BY.aE.fV()).IV(m("uDisp"),this.BY.aE.AV()).DV(m("uViewProjectionMatrix"),this.UY).dV(m("uIsHighlighted"),t===1||t===2?0:this.zo).AR(m("uHighlightColorOffset"),t===1||t===2?Je:this.Go).dV(m("uRenderEffectMask"),t===2?1:0),t===1)this.RR.AR(m("uColor"),this.mN);else if(f)this.RR.AR(m("uColor"),f.getColor());else if(y){const v=ir(y,this,void 0);if(!v&&y.lut.percentageValues)return!1;this.RR.LO(x,y.lut,v)}return this.QM.forEach(v=>{this.RR.lV(v.vertexBuffer,void 0,{location:p("aPos"),size:3}).Ky(s.LINE_STRIP,v.existingCoordinatesCount),b=!0}),b})}const u=t===1?(i=a==null?void 0:a.mousePicking)===null||i===void 0?void 0:i.shader:a==null?void 0:a.shader;if(a&&u){const d=u,{geometry:f,fillStyleSolid:y,fillStylePaletted:m,pointSizeAxis:p,pointSizeNWU:x,wireframe:b}=a;this.RR.aV(d,(v,R,E,V)=>{let F=!1;if(this.RR.jR(d).IV(v("uScale"),this.BY.aE.fV()).IV(v("uDisp"),this.BY.aE.AV()).DV(v("uViewProjectionMatrix"),this.UY).dV(V("uRatioNwuWu"),this.BY.iH()).dV(v("uIsHighlighted"),t===1||t===2?0:this.zo).AR(v("uHighlightColorOffset"),t===1||t===2?Je:this.Go).dV(v("uRenderEffectMask"),t===2?1:0),t!==1&&o.type==="phong"&&this.RR.IV(v("uCameraLoc"),this.YY).IV(v("uLightLoc"),this.HY).dV(v("uAmbientReflection"),o.ambientReflection).dV(v("uSpecularReflection"),o.specularReflection).dV(v("uDiffuseReflection"),o.diffuseReflection).dV(v("uShininess"),o.shininess).AR(v("uLightColor"),o.specularColor).AR(v("uAmbientColor"),o.ambientColor),t===1)this.RR.AR(v("uColor"),this.mN);else if(y)this.RR.AR(v("uColorDiffuse"),y.getColor());else if(m){const L=ir(m,this,void 0);if(!L&&m.lut.percentageValues)return!1;this.RR.LO(E,m.lut,L)}return b&&t!==1&&this.RR.dV(v("uWireframeThickness"),b.thickness).AR(v("uWireframeColor"),b.fillStyleSolid.getColor()),p!==!1&&this.RR.IV(v("uOffsetAxis"),[p.x,p.y,p.z]),x!==!1&&this.RR.dV(v("uOffsetNWU"),x),this.QM.forEach(L=>{this.RR.lV(L.vertexBuffer,1,{location:R("aPos"),size:3}),f.Ky(E,L.existingCoordinatesCount,o.type==="phong"&&t!==1,!!b&&t!==1),F=!0}),F})}return this}nl(t,e){Array.isArray(t)||(t=[t]),this.$a=cs(this.$a,t,{canReturnB:!0}),this.Xa+=t.length;const i=e||rS(t);return this.ja=this.ja?t0(this.ja,i):i,this}Re(t){return this.lu=typeof t=="function"?t(this.lu):t,this}uu(){return this.lu}Rp(t){return this.mS=typeof t=="function"?t(this.mS):t,this}sH(){return this.mS}bt(){return this.ja?Math.max(this.ja.max.x,this.Ya.max.x):this.Ya.max.x}vt(){return this.ja?Math.min(this.ja.min.x,this.Ya.min.x):this.Ya.min.x}Mt(){return this.ja?Math.max(this.ja.max.y,this.Ya.max.y):this.Ya.max.y}xt(){return this.ja?Math.min(this.ja.min.y,this.Ya.min.y):this.Ya.min.y}aS(){return this.ja?Math.max(this.ja.max.z,this.Ya.max.z):this.Ya.max.z}lS(){return this.ja?Math.min(this.ja.min.z,this.Ya.min.z):this.Ya.min.z}vl(){return Ps(this.lu)}bl(){return Ps(this.lu)}uS(){return Ps(this.lu)}tl(){return this.yu}qa(){return this.$a}ol(){return this.Ha}al(){return this.Xa}Nt(){return this.Qa=!0,this.yu.length=0,this.Ha=0,this.$a=[],this.Xa=0,this.Ya=vr,this.ja=void 0,this}dispose(){return super.dispose(),this.vW.dW(),this.bG={},this}VR(){return this.dispose(),this}}const T6=(r,t)=>dT(r,t>50?20:t>20?16:t>10?12:t>5?8:6),w6=(r,t)=>{const e=t.getSize();return fT(r,typeof e=="number"?e>50?20:e>20?16:e>10?12:e>5?8:6:20)};class C6 extends bh{constructor(t,e,i,s,n){super(t,e,i,s,n),this.DY="disabled",this.eH=!1,this.hH=!1,this.rH={x:1,y:1,z:1},this.Dv={x:0,y:0,z:0},this.Pv={x:0,y:0,z:0},this.Bv={x:0,y:0,z:0},this.Lv={x:1,y:1,z:1},this.nH=ze.projectionOrthographic(-1,1,-1,1,1,-1),this.oH=ze.projectionOrthographic(-1,1,-1,1,1,-1),this.aH=!1,this.AN=Ds({fillStyleSolid:()=>ce(this.be)&&this.be,fillStyleValuePalette:()=>wi(this.be)&&this.be.lookUpProperty==="value"&&this.be}),this.be=bs.fillStyle,this.qp.S(jl)}Ps(t){var e;const i=this.Wz(),s=this.Bo.M(),n=this.Bo.i,a=this.ta();this.AN.fillStyleSolid(a);const o=this.AN.fillStyleValuePalette(a),l=this.Bv,u=this.Lv;if(this.eH&&this.lH&&(this.lG=this.RR.nV(this.lH.vertices,void 0,this.lG),this.uG=this.RR.OV(this.lH.indices,this.uG),this.uH=this.lH.indices.length),this.qp.M().type==="phong"&&(i||this.eH)&&(!((e=this.lH)===null||e===void 0)&&e.normals)&&(this.cH=this.RR.nV(this.lH.normals,void 0,this.cH)),!this.dH&&o&&o.lookUpProperty==="value"&&this.lH&&(this.dH=new Float32Array(this.lH.vertices.length/3),this.hH=!0),this.dH&&this.hH&&(this.fH=this.RR.nV(this.dH,void 0,this.fH)),i||a||n){if(o&&o.lookUpProperty!=="value")throw new Error("LightningChart JS MeshModel3D does not support look up by x/y/z. Must be value");this.cE=this.RR.oz(j["3D"],j.ColorShaded3D({dataType:o?["lookup","value",o.lut]:"uniform",shadingStyle:this.qp.M().type,wireframe:!1}),j.Model3D({normalSource:this.qp.M().type==="phong"?"attribute":void 0})),this.yY=s?this.RR.oz(j["3D"],j.MousePicking,j.Model3D({normalSource:void 0})):void 0}if(this.aH){const d=ze.projectionOrthographic(-1,1,-1,1,1,-1);this.oH=ze.rotateXYZ(d,l),this.nH=ze.translate(d,u.x/2,u.y/2,u.z/2),this.nH=ze.rotateXYZ(this.nH,l),this.nH=ze.translate(this.nH,-u.x/2,-u.y/2,-u.z/2),this.aH=!1}return this.qp.i=!1,this.ha(this.be),this.Bo.i=!1,this.eH=!1,this.hH=!1,this}zL(t){const e=t===1?this.yY:this.cE,i=t===1,s=this.uG,n=this.uH,a=this.lG,o=this.cH,l=this.fH,u=this.Dv,d=this.Pv,f=this.rH,y=this.Lv,m=this.nH,p=this.oH,x=this.AN.fillStyleValuePalette(!1),b=this.AN.fillStyleSolid(!1),v=this.qp.M(),R={location:void 0,size:1};return e&&a&&s&&n?(this.RR.aV(e,(E,V,F,L)=>{if(this.RR.jR(e).IV(E("uScale"),this.BY.aE.fV()).IV(E("uDisp"),this.BY.aE.AV()).DV(E("uViewProjectionMatrix"),this.UY).dV(E("uIsHighlighted"),t===1||t===2?0:this.zo).AR(E("uHighlightColorOffset"),this.Go).dV(E("uRenderEffectMask"),t===2?1:0),i)this.RR.AR(E("uColor"),this.mN);else{if(this.be===Vt)return!1;if(b)this.RR.AR(E("uColorDiffuse"),b.getColor());else if(x){if(!l)return!1;const z=x.getPalette();R.location=V("aLookupValue"),this.RR.LO(F,z,void 0).lV(l,void 0,R)}}return v.type!=="phong"||i||(this.RR.IV(E("uCameraLoc"),this.YY).IV(E("uLightLoc"),this.HY).dV(E("uAmbientReflection"),v.ambientReflection).dV(E("uSpecularReflection"),v.specularReflection).dV(E("uDiffuseReflection"),v.diffuseReflection).dV(E("uShininess"),v.shininess).AR(E("uLightColor"),v.specularColor).AR(E("uAmbientColor"),v.ambientColor).DV(E("uModelRotationNormals"),p),o&&this.RR.lV(o,void 0,{location:F.attribute("aNormal"),size:3})),this.RR.DV(E("uModelRotation"),m).IV(E("uModelScale"),[f.x,f.y,f.z]).IV(E("uLocationAxis"),[u.x,u.y,u.z]).IV(E("uModelAlignment"),[d.x,d.y,d.z]).IV(E("uModelSize"),[y.x,y.y,y.z]),this.RR.lV(a,0,{location:F.attribute("aGeoPos"),size:3}).XV(s).ZV(n,this.RR.gl.TRIANGLES),!0}),this):this}dispose(){return super.dispose(),this.lG&&(this.RR.yV(this.lG),this.lG=void 0),this.uG&&(this.RR.yV(this.uG),this.uG=void 0),this.cH&&(this.RR.yV(this.cH),this.cH=void 0),this.fH&&(this.RR.yV(this.fH),this.fH=void 0),this.cE=void 0,this.yY=void 0,this.lH=void 0,this.dH=void 0,this}VR(){return this.dispose(),this}Ev(t){return this.lH=t,this.eH=!0,this.Lv=t.modelSize,this}Vv(t){return this.dH=t,this.hH=!0,this}Ce(t){return this.be=kl(this.be,t),this}Eh(){return this.be}Ov(t){return this.rH=t,this}fV(){return this.rH}Nv(t){return this.Dv=t,this}Gv(t){return this.Pv=t,this}Wv(t){return this.Bv=t,this.aH=!0,this}Uv(t){return this.DY=t,this}Yv(){return this.DY}bt(){return Dt}vt(){return Mt}Mt(){return Dt}xt(){return Mt}aS(){return Dt}lS(){return Mt}vl(){return 0}bl(){return 0}uS(){return 0}ta(){return Dl(this.ia,this.be)}ha(t){this.ia=t}}class k6 extends bh{constructor(t,e,i,s,n,a){super(t,e,i,s,n),this.DY="cull-back",this.QM=[],this.vW=new FS(this.QM,v=>v.vertexBuffer&&this.RR.yV(v.vertexBuffer),!1),this.yu=[],this.Ha=0,this.$a=[],this.Xa=0,this.Ya=vr,this.ja=vr,this.Qa=!1,this.AN=Ds({fillStyleSolid:()=>{const v=this.SS.getFillStyle();return ce(v)&&v},fillStyleIndividual:()=>{const v=this.SS.getFillStyle();return ks(v)&&v},fillStylePalette:()=>{const v=this.SS.getFillStyle();return wi(v)&&v},triangulatedPointStyle:()=>{const v=this.SS;return Ea(v)&&v},wireframeLineStyleSolid:()=>{const v=Ea(this.SS)&&this.SS,R=v&&v.getWireframeStyle();return As(R)&&R},wireframeFillStyleSolid:()=>{const v=Ea(this.SS)&&this.SS,R=v&&v.getWireframeStyle(),E=R&&R.getFillStyle();return ce(E)&&E}}),this.Ja=void 0,this.Un=a,this.SS=bs.pointStyle3D,this.qp.S(jl);const o=(a==null?void 0:a.individualPointColorEnabled)===!0,l=(a==null?void 0:a.individualPointSizeEnabled)===!0,u=(a==null?void 0:a.individualLookupValuesEnabled)===!0,d=(a==null?void 0:a.individualPointSizeAxisEnabled)===!0;let f,y,m,p,x=0;x+=3,o&&(f=x,x+=4),l&&(y=x,x+=1),u&&(m=x,x+=1),d&&(p=x,x+=3);const b=((v,R,E,V)=>v||R||E||V?!v||R||E||V?v||!R||E||V?v||R||!E||V?v||R||E||!V?(F,L,z)=>{const B=3+(v?4:0)+(R?1:0)+(E?1:0)+(V?3:0),A=F.length,T=new Float32Array(A*B);let w=0,C=w;for(let k=0;k<A;k+=1){const _=F[k];T[C+0]=_.x,T[C+1]=_.y,T[C+2]=_.z,C+=B}if(w+=3,v){const k=z&&ks(z)&&z.getFallbackColor()||hh;C=w;for(let _=0;_<A;_+=1){const X=F[_].color||k;T[C+0]=X.r,T[C+1]=X.g,T[C+2]=X.b,T[C+3]=X.a,C+=B}w+=4}if(R){const k=L&&L.getSize();let _=1;typeof k=="number"&&(_=k),C=w;for(let X=0;X<A;X+=1){const N=F[X],U=N.size!==void 0?N.size:_;T[C+0]=U,C+=B}w+=1}if(E){C=w;for(let k=0;k<A;k+=1){const _=F[k];T[C+0]=_.value!==void 0?_.value:-34028234663852886e22,C+=B}w+=1}if(V){const k=L&&L.getSize();let _={x:1,y:1,z:1};typeof k=="object"&&(_=k),C=w;for(let X=0;X<A;X+=1){const N=F[X],U=N.sizeAxisX!==void 0?N.sizeAxisX:_.x,O=N.sizeAxisY!==void 0?N.sizeAxisY:_.y,W=N.sizeAxisZ!==void 0?N.sizeAxisZ:_.z;T[C+0]=U,T[C+1]=O,T[C+2]=W,C+=B}w+=3}return T}:(F,L,z)=>((B,A)=>{const T=A&&A.getSize();let w={x:1,y:1,z:1};typeof T=="object"&&(w=T);const C=B.length,k=new Float32Array(6*C);let _=0;for(let X=0;X<C;X+=1){const N=B[X];k[_+0]=N.x,k[_+1]=N.y,k[_+2]=N.z;const U=N.sizeAxisX!==void 0?N.sizeAxisX:w.x,O=N.sizeAxisY!==void 0?N.sizeAxisY:w.y,W=N.sizeAxisZ!==void 0?N.sizeAxisZ:w.z;k[_+3]=U,k[_+4]=O,k[_+5]=W,_+=6}return k})(F,L):(F,L,z)=>(B=>{const A=B.length,T=new Float32Array(4*A);for(let w=0,C=0;w<A;w+=1){const k=B[w];T[C+0]=k.x,T[C+1]=k.y,T[C+2]=k.z,T[C+3]=k.value!==void 0?k.value:-34028234663852886e22,C+=4}return T})(F):(F,L,z)=>((B,A)=>{const T=A&&A.getSize();let w=1;typeof T=="number"&&(w=T);const C=B.length,k=new Float32Array(4*C);for(let _=0,X=0;_<C;_+=1){const N=B[_];k[X+0]=N.x,k[X+1]=N.y,k[X+2]=N.z;const U=N.size!==void 0?N.size:w;k[X+3]=U,X+=4}return k})(F,L):(F,L,z)=>((B,A)=>{const T=A&&ks(A)&&A.getFallbackColor()||hh,w=B.length,C=new Float32Array(7*w);for(let k=0,_=0;k<w;k+=1){const X=B[k];C[_+0]=X.x,C[_+1]=X.y,C[_+2]=X.z;const N=X.color||T;C[_+3]=N.r,C[_+4]=N.g,C[_+5]=N.b,C[_+6]=N.a,_+=7}return C})(F,z):(F,L,z)=>eS(F))(o,l,u,d);this.wW={individualPointColorEnabled:o,individualPointSizeEnabled:l,individualLookupValuesEnabled:u,individualPointSizeAxisEnabled:d,attributesPerVertex:x,attributeOffsetCoordinate:0,attributeOffsetColor:f,attributeOffsetSize:y,attributeOffsetLookUpValue:m,attributeOffsetPointSize3D:p,prepareRenderData:(v,R)=>b(v,this.SS,this.SS.fillStyle)}}Ps(t){const e=this.Qa,i=this.$a,s=this.Xa,n=s>0,a=this.SS,o=this.SS!==this.AH,l=this.Bo.M(),u=this.Bo.i,d=this.Wz();this.ja&&(this.Ya=t0(this.Ya,this.ja),this.ja=void 0),n&&(this.yu=cs(this.yu,i,{canReturnB:!0}),this.Ha+=s);let f=i,y=s;if(e&&(this.QM.forEach(R=>{R.existingDataPointsCount=0,R.existingCoordinatesCount=0,R.boundaries=vr}),this.vW.cW(),f=this.yu,y=this.Ha),y>0){const R=Math.floor(this.rN.tH/(this.wW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT)),E=Zt(y,1e5,R);this.vW.oW(f,E,(V,F,L)=>({existingDataPointsCount:L,existingCoordinatesCount:L,allocatedCoordinatesCount:V,boundaries:vr,vertexBuffer:this.RR.EV(V*this.wW.attributesPerVertex,this.wW.prepareRenderData(F,L))}),(V,F,L)=>{this.RR.zV(V.vertexBuffer,V.existingCoordinatesCount*this.wW.attributesPerVertex,this.wW.prepareRenderData(F,L)),V.existingDataPointsCount+=L,V.existingCoordinatesCount=V.existingDataPointsCount})}const m=a.getFillStyle(),p=this.AN.fillStyleSolid(o),x=this.AN.fillStyleIndividual(o),b=this.AN.fillStylePalette(o),v=m===Vt&&Vt;if(o||d||u){let R;const E=a.getSize(),V=this.wW.individualPointColorEnabled,F=this.wW.individualPointSizeEnabled,L=this.wW.individualPointSizeAxisEnabled,z=this.wW.individualLookupValuesEnabled;if(x&&!V){const T="LCJS misusage error: Series individualPointColorEnabled flag must be set if using IndividualPointFill !";throw nt.alert(T),new Error(T)}if(b&&b.getLookUpProperty()==="value"&&!z){const T='LCJS misusage error: Series individualLookupValuesEnabled flag must be set if using PalettedFill with lookUpProperty="value" !';throw nt.alert(T),new Error(T)}const B=this.AN.wireframeLineStyleSolid(o),A=this.AN.wireframeFillStyleSolid(o);if(p||x||b||A){const T=x?"attribute":b?["lookup",b.getLookUpProperty(),b.lut]:"uniform",w=F&&typeof E=="number",C=L&&typeof E=="object",k=w||C?"attribute":"uniform";if(Ea(a)){const _=kR(a.getShape(),{cube:()=>zS(this.RR),sphere:()=>D6(this.RR,a,F)});R={type:"instanced",shader:this.RR.oz(j["3D"],j.ColorShaded3D({dataType:T,shadingStyle:this.qp.M().type,wireframe:A!==!1}),j.VertexLocation({offset:{dataType:k,sizeUnit:typeof E=="number"?"nwu":"axis",halved:!0,symmetric:typeof E=="number"},axisWorldTranslation:Pt(this.dt),normalSource:_.TY})),pointStyle:a,useIndividualPointSize:w,useIndividualPointSize3D:C,pointSizeNWU:typeof E=="number"&&E,pointSizeAxis:typeof E=="object"&&E,fillStyleSolid:p,fillStyleIndividual:x,fillStylePaletted:b,fillStyleEmpty:v,mousePickingShader:l&&this.RR.oz(j["3D"],j.MousePicking,j.VertexLocation({offset:{dataType:k,sizeUnit:typeof E=="number"?"nwu":"axis",halved:!0,symmetric:typeof E=="number"},axisWorldTranslation:Pt(this.dt),normalSource:void 0})),geometry:_,wireframe:B&&A&&{thickness:B.getThickness()<0?1:B.getThickness(),fillStyleSolid:A}}}else Eb(a)&&typeof E=="number"&&(R={type:"primitive",shader:this.RR.oz(j["3D"],j.PointSize(k),j.Color({dataType:T}),j.VertexLocation({axisWorldTranslation:Pt(this.dt),normalSource:void 0})),pointStyle:a,pointSizePixels:E,useIndividualPointSize:w,fillStyleSolid:p,fillStyleIndividual:x,fillStylePaletted:b,mousePickingShader:l&&this.RR.oz(j["3D"],j.PointSize(k),j.MousePicking,j.VertexLocation({axisWorldTranslation:Pt(this.dt),normalSource:void 0}))})}this.bG=R}if(this.Ja===void 0&&b&&b.lookUpProperty==="value"&&b.lut.percentageValues){let R=Dt,E=Mt;for(let V=0;V<this.yu.length;V+=1){const F=this.yu[V];F.value!==void 0&&F.value<E&&(E=F.value),F.value!==void 0&&F.value>R&&(R=F.value)}this.Ja={min:E,max:R}}return this.Qa=!1,this.$a=[],this.Xa=0,this.AH=a,this.qp.i=!1,this}zL(t){const e=this.RR.gl,i=this.bG;if(!i)return this;const s=t===1?i.mousePickingShader:i.shader;if(!s)return this;const n=this.qp.M(),{fillStyleSolid:a,fillStylePaletted:o,useIndividualPointSize:l}=i,u=i.type==="instanced"&&i.useIndividualPointSize3D,d=i.type==="instanced"&&i.wireframe;return this.RR.aV(s,(f,y,m,p)=>{let x=!1;if(this.RR.jR(s).IV(f("uScale"),this.BY.aE.fV()).IV(f("uDisp"),this.BY.aE.AV()).DV(f("uViewProjectionMatrix"),this.UY).dV(f("uIsHighlighted"),t===1||t===2?0:this.zo).AR(f("uHighlightColorOffset"),t===1||t===2?Je:this.Go).dV(f("uRenderEffectMask"),t===2?1:0),i.type==="instanced"){const{pointSizeAxis:b,pointSizeNWU:v}=i;b!==!1&&u===!1&&this.RR.IV(f("uOffsetAxis"),[b.x,b.y,b.z]),v!==!1&&l===!1&&this.RR.dV(f("uOffsetNWU"),v).dV(p("uRatioNwuWu"),this.BY.iH())}else if(i.type==="primitive"){const{pointSizePixels:b}=i;l||this.RR.dV(f("uPointSize"),b).dV(f("uDevicePixelRatio"),this.RR.$z())}if(t===1)this.RR.AR(f("uColor"),this.mN);else if(i.type==="instanced"?(n.type==="phong"&&this.RR.IV(f("uCameraLoc"),this.YY).IV(f("uLightLoc"),this.HY).dV(f("uAmbientReflection"),n.ambientReflection).dV(f("uSpecularReflection"),n.specularReflection).dV(f("uDiffuseReflection"),n.diffuseReflection).dV(f("uShininess"),n.shininess).AR(f("uLightColor"),n.specularColor).AR(f("uAmbientColor"),n.ambientColor),d&&this.RR.dV(f("uWireframeThickness"),d.thickness).AR(f("uWireframeColor"),d.fillStyleSolid.getColor()),a&&this.RR.AR(f("uColorDiffuse"),a.getColor()),i.fillStyleEmpty&&this.RR.AR(f("uColorDiffuse"),Je)):i.type==="primitive"&&a&&this.RR.AR(f("uColor"),a.getColor()),o){const b=ir(o,this,this.Ja);if(!b&&o.lut.percentageValues)return!1;this.RR.LO(m,o.lut,b)}return this.QM.forEach((b,v)=>{e.bindBuffer(e.ARRAY_BUFFER,b.vertexBuffer);const R=y("aPos");if(e.vertexAttribPointer(R,3,e.FLOAT,!1,this.wW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.wW.attributeOffsetCoordinate*Float32Array.BYTES_PER_ELEMENT),i.type==="instanced"&&this.RR.UV(R,1),e.enableVertexAttribArray(R),i.fillStyleIndividual&&this.wW.attributeOffsetColor!==void 0&&t!==1){const E=y("aColor");e.vertexAttribPointer(E,4,e.FLOAT,!1,this.wW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.wW.attributeOffsetColor*Float32Array.BYTES_PER_ELEMENT),i.type==="instanced"&&this.RR.UV(E,1),e.enableVertexAttribArray(E)}if(l&&this.wW.attributeOffsetSize!==void 0){i.type==="instanced"?this.RR.dV(p("uRatioNwuWu"),this.BY.iH()):i.type==="primitive"&&this.RR.dV(f("uDevicePixelRatio"),this.RR.$z());const E=y(i.type==="instanced"?"aOffsetNWU":"aPointSize");e.vertexAttribPointer(E,1,e.FLOAT,!1,this.wW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.wW.attributeOffsetSize*Float32Array.BYTES_PER_ELEMENT),i.type==="instanced"&&this.RR.UV(E,1),e.enableVertexAttribArray(E)}if(u&&this.wW.attributeOffsetPointSize3D!==void 0&&i.type==="instanced"){const E=y("aOffsetAxis");e.vertexAttribPointer(E,3,e.FLOAT,!1,this.wW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.wW.attributeOffsetPointSize3D*Float32Array.BYTES_PER_ELEMENT),i.type==="instanced"&&this.RR.UV(E,1),e.enableVertexAttribArray(E)}if(i.fillStylePaletted&&i.fillStylePaletted.getLookUpProperty()==="value"&&this.wW.attributeOffsetLookUpValue!==void 0&&t!==1){const E=y("aLookupValue");e.vertexAttribPointer(E,1,e.FLOAT,!1,this.wW.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.wW.attributeOffsetLookUpValue*Float32Array.BYTES_PER_ELEMENT),i.type==="instanced"&&this.RR.UV(E,1),e.enableVertexAttribArray(E)}i.type==="instanced"?(i.geometry.Ky(m,b.existingCoordinatesCount,n.type==="phong"&&t!==1,!!d&&t!==1),x=!0):i.type==="primitive"&&(this.RR.Ky(e.POINTS,b.existingCoordinatesCount),x=!0)}),x}),this}nl(t,e){Array.isArray(t)||(t=[t]),this.$a=cs(this.$a,t,{canReturnB:!0}),this.Xa+=t.length;const i=e||rS(t);return this.ja=this.ja?t0(this.ja,i):i,this.Ja=void 0,this}vS(t){return this.SS=typeof t=="function"?t(this.SS):t,this}gH(){return this.SS}bt(){return this.ja?Math.max(this.ja.max.x,this.Ya.max.x):this.Ya.max.x}vt(){return this.ja?Math.min(this.ja.min.x,this.Ya.min.x):this.Ya.min.x}Mt(){return this.ja?Math.max(this.ja.max.y,this.Ya.max.y):this.Ya.max.y}xt(){return this.ja?Math.min(this.ja.min.y,this.Ya.min.y):this.Ya.min.y}aS(){return this.ja?Math.max(this.ja.max.z,this.Ya.max.z):this.Ya.max.z}lS(){return this.ja?Math.min(this.ja.min.z,this.Ya.min.z):this.Ya.min.z}vl(){const t=this.SS,e=t.getSize();return typeof e=="number"?Ea(t)?e/2:Eb(t)?5:0:0}bl(){return this.vl()}uS(){return this.vl()}tl(){return this.yu}qa(){return this.$a}ol(){return this.Ha}al(){return this.Xa}Nt(){return this.Qa=!0,this.yu.length=0,this.Ha=0,this.$a=[],this.Xa=0,this.Ya=vr,this.ja=void 0,this.Ja=void 0,this}dispose(){return super.dispose(),this.vW.dW(),this.bG=void 0,this}VR(){return this.dispose(),this}}const D6=(r,t,e)=>{const i=t.getSize();return fT(r,typeof i=="number"?e||i>=50?20:i>=10?10:i>=3?5:3:32)};class gT extends bh{constructor(t,e,i,s,n,a){super(t,e,i,n,a),this.DY="disabled",this.be=bs.fillStyle,this.gv=bs.lineStyle,this.uU=Wt("bilinear"),this.mH=[],this.yH=void 0,this.bG={},this.pH=!1,this.AN=Ds({fillStyleSolid:()=>ce(this.be)&&this.be,fillStylePaletted:()=>wi(this.be)&&this.be,wireframeStyleLine:()=>As(this.gv)&&this.gv,wireframeStyleFill:()=>{const y=this.gv&&this.gv.getFillStyle();return ce(y)&&y}}),this.Pi={x:0,z:0},this.$w={x:1,z:1},this.qp.S(ql);const o=s.dataOrder==="columns"?s.columns:s.rows,l=s.dataOrder==="columns"?s.rows:s.columns;this.Un={...s,primaryDimensionVectorsCount:o,secondaryDimensionVectorsCount:l},this.SH=new Array(this.Un.primaryDimensionVectorsCount).fill(void 0),this.I_=new Z0(this.rN,t.rN.CU,t.us.dt,re,[],this.Un,-1,hh).mv(vt),this.I_.fU=s6;const u=this.I_.gU.gridTiles.map(y=>{const m=y.sizeHeatmapDataVectors,p=y.sizeUniqueHeatmapDataVectors,x=y.iFirstVector,b=y.iFirstUniqueVector,v=new Float32Array(y.sizeHeatmapDataVectors.primary*y.sizeHeatmapDataVectors.secondary),R={primary:y.sizeHeatmapDataVectors.primary-1,secondary:y.sizeHeatmapDataVectors.secondary-1};return{iFirstVector:y.iFirstVector,iFirstUniqueVector:y.iFirstUniqueVector,sizeHeatmapDataVectors:y.sizeHeatmapDataVectors,sizeUniqueHeatmapDataVectors:y.sizeUniqueHeatmapDataVectors,iFirstGeometryVector:x,iFirstGeometryUniqueVector:b,sizeGeometryDataVectors:m,sizeUniqueGeometryDataVectors:p,heightmapData:v,normalmapSize:R}}),d=this.I_.gU.gridTileSizes.map(y=>{const m=u.filter(x=>x.sizeHeatmapDataVectors.primary===y.sizeHeatmapData.primary&&x.sizeHeatmapDataVectors.secondary===y.sizeHeatmapData.secondary),p=m[0].sizeGeometryDataVectors;return{...y,tiles:m,sizeGeometryData:p}}),f=u.reduce((y,m)=>{const p=m.sizeHeatmapDataVectors.primary,x=m.sizeHeatmapDataVectors.secondary,b=p*x;return b>y.cells?{primary:p,secondary:x,cells:b}:y},{primary:0,secondary:0,cells:0});this.vH={gridTiles:u,gridTileSizes:d,largestGridTileSize:f},this.Sv(this.Pi,this.$w)}bH(t){this.xH=t,this.yH=void 0}Sv(t,e){this.Pi=t,this.$w=e;const i=this.Un,s={min:{x:Math.min(this.Pi.x,this.Pi.x+(i.columns-1)*this.$w.x),z:Math.min(this.Pi.z,this.Pi.z+(i.rows-1)*this.$w.z)},max:{x:Math.max(this.Pi.x,this.Pi.x+(i.columns-1)*this.$w.x),z:Math.max(this.Pi.z,this.Pi.z+(i.rows-1)*this.$w.z)}},n=new Map;return this.vH.gridTiles.forEach(a=>{const o=this.Un.dataOrder==="columns"?{x:this.$w.x*(a.sizeHeatmapDataVectors.primary-1),z:this.$w.z*(a.sizeHeatmapDataVectors.secondary-1)}:{x:this.$w.x*(a.sizeHeatmapDataVectors.secondary-1),z:this.$w.z*(a.sizeHeatmapDataVectors.primary-1)},l=this.Un.dataOrder==="columns"?{x:this.Pi.x+this.$w.x*a.iFirstVector.primary,z:this.Pi.z+this.$w.z*a.iFirstVector.secondary}:{x:this.Pi.x+this.$w.x*a.iFirstVector.secondary,z:this.Pi.z+this.$w.z*a.iFirstVector.primary};n.set(a,{sizeAxis:o,startLocationAxis:l})}),this.bU={MH:s,tilesInfo:n},this}vv(){return{start:this.Pi,step:this.$w,end:{x:this.Pi.x+this.$w.x*this.Un.columns,z:this.Pi.z+this.$w.z*this.Un.rows}}}Ps(t){const e=this.mH,i=Dl(this.ia,this.be),s=this.AN.fillStyleSolid(i),n=this.AN.fillStylePaletted(i),a=this.gv,o=this.gv!==this.mU,l=this.AN.wireframeStyleLine(o),u=this.AN.wireframeStyleFill(o),d=u!==!1,f=this.uU.i,y=this.uU.M(),m=this.qp.M(),p=this.Wz(),x=this.Bo.M();this.I_.Ps();const b=this.I_.yU;if(!b)return this;this._H=this._H||this.wH(b);const v=this._H;this.CH(v);const R=aT(e,v,void 0,V=>V.sizeGeometryDataVectors);if(R.size>0&&(lT(this.RR,R,V=>V.heightmapData,V=>V.heightmapDataTexture),this.pH=!0),m.type==="phong"&&(R.size>0||p)){const V=this.RR.gl,F=this.RR.oz(j["2D"],j.DrawToNormalTexture({flipXZ:this.Un.dataOrder==="rows",vertexIdSource:this.RR._O(),normalTextureType:this.RR.gl2?"uint":"ubyte",heightmapTextureType:this.RR.sz?"float":"ubyte",littleEndian:this.RR.IS_MACHINE_LITTLE_ENDIAN}));v.gridTileSizes.forEach(L=>{L.tiles.forEach(z=>{var B;const A=z.normalmapTexture,T=(B=this.bU)===null||B===void 0?void 0:B.tilesInfo.get(z.tileData);if(!A||!T)return;const w={x:z.normalmapSize.secondary,y:z.normalmapSize.primary},C=w.x*w.y;this.RR.oO.zL(()=>{this.RR.aV(F,(k,_,X,N)=>(this.RR.jR(F).wO(X,C).uV(k("uTileDimensionsXZ"),[this.Un.dataOrder==="columns"?L.sizeHeatmapData.primary:L.sizeHeatmapData.secondary,this.Un.dataOrder==="columns"?L.sizeHeatmapData.secondary:L.sizeHeatmapData.primary]).TV(k("uTileDimensions"),[L.sizeHeatmapData.primary,L.sizeHeatmapData.secondary]).uV(k("uTileStartLocationAxisXZ"),[T.startLocationAxis.x,T.startLocationAxis.z]).uV(k("uTileSizeAxisXZ"),[T.sizeAxis.x,T.sizeAxis.z]).cV(k("uHeightmapTexture"),z.heightmapDataTexture,1).Ky(V.POINTS,C),!0))},A,w,void 0,this.us.mn(),0)})})}const E=this.bG;if(i||o||f){const V=l&&u?{wireframeSolid:l,wireframeFillSolid:u}:void 0;s?E.surface={shader:this.RR.oz(j["3D"],j.SurfaceGrid({axisWorldTranslation:Pt(this.dt),fillColor:"uniform",interpolation:y==="bilinear"&&"bilinear",flipXZ:this.Un.dataOrder==="rows",shadingStyle:m.type,wireframe:d,instanceIdSource:this.RR.CO(),normalTextureType:this.RR.gl2?"uint":"ubyte",intensityTextureType:this.RR.sz?"float":"ubyte",heightmapTextureType:this.RR.sz?"float":"ubyte",littleEndian:this.RR.IS_MACHINE_LITTLE_ENDIAN})),fill:{fillMode:"solid",fillStyleSolid:s},wireframe:V}:n&&n.getLookUpProperty()==="value"?E.surface={shader:this.RR.oz(j["3D"],j.SurfaceGrid({axisWorldTranslation:Pt(this.dt),fillColor:["lookup","value",n.lut],interpolation:y==="bilinear"&&"bilinear",flipXZ:this.Un.dataOrder==="rows",shadingStyle:m.type,wireframe:d,instanceIdSource:this.RR.CO(),normalTextureType:this.RR.gl2?"uint":"ubyte",intensityTextureType:this.RR.sz?"float":"ubyte",heightmapTextureType:this.RR.sz?"float":"ubyte",littleEndian:this.RR.IS_MACHINE_LITTLE_ENDIAN})),fill:{fillMode:"intensity",fillStylePaletted:n},wireframe:V}:n?E.surface={shader:this.RR.oz(j["3D"],j.SurfaceGrid({axisWorldTranslation:Pt(this.dt),fillColor:["lookup",n.getLookUpProperty(),n.lut],interpolation:y==="bilinear"&&"bilinear",flipXZ:this.Un.dataOrder==="rows",shadingStyle:m.type,wireframe:d,instanceIdSource:this.RR.CO(),normalTextureType:this.RR.gl2?"uint":"ubyte",intensityTextureType:this.RR.sz?"float":"ubyte",heightmapTextureType:this.RR.sz?"float":"ubyte",littleEndian:this.RR.IS_MACHINE_LITTLE_ENDIAN})),fill:{fillMode:"xyz",fillStylePaletted:n},wireframe:V}:d&&(E.surface={shader:this.RR.oz(j["3D"],j.SurfaceGrid({axisWorldTranslation:Pt(this.dt),fillColor:void 0,interpolation:y==="bilinear"&&"bilinear",flipXZ:this.Un.dataOrder==="rows",shadingStyle:m.type,wireframe:d,instanceIdSource:this.RR.CO(),normalTextureType:this.RR.gl2?"uint":"ubyte",intensityTextureType:this.RR.sz?"float":"ubyte",heightmapTextureType:this.RR.sz?"float":"ubyte",littleEndian:this.RR.IS_MACHINE_LITTLE_ENDIAN})),fill:void 0,wireframe:V})}return E.mousePicking=x?this.bG.mousePicking||{shader:this.RR.oz(j["3D"],j.SurfaceGrid({axisWorldTranslation:Pt(this.dt),fillColor:"uniform",interpolation:y==="bilinear"&&"bilinear",flipXZ:this.Un.dataOrder==="rows",shadingStyle:"simple",wireframe:!1,instanceIdSource:this.RR.CO(),normalTextureType:this.RR.gl2?"uint":"ubyte",intensityTextureType:this.RR.sz?"float":"ubyte",heightmapTextureType:this.RR.sz?"float":"ubyte",littleEndian:this.RR.IS_MACHINE_LITTLE_ENDIAN}))}:void 0,this.bG=E,this.mH.length=0,this.ia=this.be,this.mU=a,this.qp.i=!1,this}wH(t){const e=this.vH.gridTiles.map(a=>{const o=hT(this.RR,a.sizeHeatmapDataVectors.secondary,a.sizeHeatmapDataVectors.primary),l=t.gridTiles.find(u=>u.iFirstUniqueVector.primary===a.iFirstUniqueVector.primary&&u.iFirstUniqueVector.secondary===a.iFirstUniqueVector.secondary);if(!l)throw new Error("Internal LC JS error prepare surface data 2D render data not found");return{...a,intensityDataTexture:l.intensityDataTexture,heightmapDataTexture:o,normalmap:void 0,tileData:a}}),i=this.vH.gridTileSizes.map(a=>{const o=e.filter(l=>l.sizeHeatmapDataVectors.primary===a.sizeHeatmapData.primary&&l.sizeHeatmapDataVectors.secondary===a.sizeHeatmapData.secondary);return{...a,tiles:o}}),s=this.RR.nV([0,0,1,0,0,1,0,1,1,0,0,1,0,0,1,0,1,0,1,0,1,0,1,0,1,1,1,1,0,0]),n=this.RR.gl.TRIANGLES;return{gridTiles:e,gridTileSizes:i,rectangleLocationsBuffer:s,rectangleLocationsDrawLength:6,rectangleLocationsDrawMode:n}}CH(t){var e;if(this.qp.M().type==="phong")for(let i=0;i<t.gridTiles.length;i+=1){const s=t.gridTiles[i];if(s.normalmapTexture)return;let n;const a=(e=this.RR.gl2)===null||e===void 0?void 0:e.ctx;if(a)n=this.RR.fO(null,a.RGBA_INTEGER,!1,!0,{x:s.normalmapSize.secondary,y:s.normalmapSize.primary},!1,a.UNSIGNED_INT,a.RGBA32UI);else{const o=this.RR.gl;n=this.RR.fO(null,o.RGBA,!1,!0,{x:s.normalmapSize.secondary,y:s.normalmapSize.primary},!1,o.UNSIGNED_BYTE)}s.normalmapTexture=n}else t.gridTiles.forEach(i=>{i.normalmapTexture&&(this.RR.OR(i.normalmapTexture),i.normalmapTexture=void 0)})}zL(t){var e,i,s,n;const a=this.RR.gl,o=this._H;if(!o)return this;const l=this.qp.M(),u=this.bG,d=t===1?(e=u.mousePicking)===null||e===void 0?void 0:e.shader:(i=u.surface)===null||i===void 0?void 0:i.shader;if(!d)return this;const f=t!==1?(s=u.surface)===null||s===void 0?void 0:s.wireframe:void 0,y=t!==1?(n=u.surface)===null||n===void 0?void 0:n.fill:void 0;return this.RR.aV(d,(m,p,x,b)=>{let v=!1;if(this.RR.jR(d).kO(x,this.vH.largestGridTileSize.cells).IV(m("uScale"),this.BY.aE.fV()).IV(m("uDisp"),this.BY.aE.AV()).DV(m("uViewProjectionMatrix"),this.UY).dV(m("uIsHighlighted"),t===1||t===2?0:this.zo).AR(m("uHighlightColorOffset"),t===1||t===2?Je:this.Go).dV(m("uRenderEffectMask"),t===2?1:0),t!==1&&(l.type==="phong"&&this.RR.IV(m("uCameraLoc"),this.YY).IV(m("uLightLoc"),this.HY).dV(m("uAmbientReflection"),l.ambientReflection).dV(m("uSpecularReflection"),l.specularReflection).dV(m("uDiffuseReflection"),l.diffuseReflection).dV(m("uShininess"),l.shininess).AR(m("uLightColor"),l.specularColor).AR(m("uAmbientColor"),l.ambientColor),f)){const{wireframeFillSolid:R,wireframeSolid:E}=f,V=E.getThickness()<0?1:E.getThickness();this.RR.AR(m("uWireframeColor"),R.getColor()).dV(m("uWireframeThickness"),V)}return t===1?this.RR.AR(m("uColorDiffuse"),this.mN):(y==null?void 0:y.fillMode)==="solid"&&this.RR.AR(m("uColorDiffuse"),y.fillStyleSolid.getColor()),o.gridTileSizes.forEach(R=>{this.RR.uV(m("uTileDimensionsXZ"),[this.Un.dataOrder==="columns"?R.sizeHeatmapData.primary:R.sizeHeatmapData.secondary,this.Un.dataOrder==="columns"?R.sizeHeatmapData.secondary:R.sizeHeatmapData.primary]).TV(m("uTileDimensions"),[R.sizeHeatmapData.primary,R.sizeHeatmapData.secondary]),R.tiles.forEach(E=>{var V;const F=(V=this.bU)===null||V===void 0?void 0:V.tilesInfo.get(E.tileData);if(!F)return;let L=0,z=(E.sizeHeatmapDataVectors.primary-1)*(E.sizeHeatmapDataVectors.secondary-1);if(this.xH){const B=this.xH.fill.iFirstPrimary,A=this.xH.fill.iFirstPrimary+this.xH.fill.amountPrimary-1,T=E.iFirstVector.primary,w=E.iFirstVector.primary+E.sizeHeatmapDataVectors.primary-1;if(T>A||w<B)return;const C=((k,_,X,N)=>Kt(Math.max(k,X),Math.min(_,N)))(B,A,T,w);L=(C.min-E.iFirstVector.primary)*(R.sizeGeometryData.secondary-1),z=(C.max-C.min)*(R.sizeGeometryData.secondary-1)}if(!(L<0||z<=0)){if((y==null?void 0:y.fillMode)==="intensity"){const{fillStylePaletted:B}=y,A=this.I_.Ja;this.RR.LO(x,B.lut,A).cV(m("uTileIntensityValues"),E.intensityDataTexture,2).FV(m("uTileBoundsAxisXZ"),[F.startLocationAxis.x,F.startLocationAxis.z,F.sizeAxis.x,F.sizeAxis.z])}if((y==null?void 0:y.fillMode)==="xyz"){const{fillStylePaletted:B}=y,A=B.getLookUpProperty()==="x"?{min:this.vt(),max:this.bt()}:B.getLookUpProperty()==="y"?{min:this.xt(),max:this.Mt()}:B.getLookUpProperty()==="z"?{min:this.lS(),max:this.aS()}:void 0;if(!A&&B.lut.percentageValues)return;this.RR.LO(x,B.lut,A)}t!==1&&this.qp.M().type==="phong"&&E.normalmapTexture&&this.RR.cV(m("uNormalmapTexture"),E.normalmapTexture,3),this.RR.lV(o.rectangleLocationsBuffer,0,{location:p("aGeoCellOffset"),size:2},{location:f?p("aTriangleBary"):void 0,size:3}).BV(m("uBaseInstance"),L).uV(m("uTileStartLocationAxisXZ"),[F.startLocationAxis.x,F.startLocationAxis.z]).uV(m("uTileSizeAxisXZ"),[F.sizeAxis.x,F.sizeAxis.z]).cV(m("uHeightmapTexture"),E.heightmapDataTexture,0).QV(o.rectangleLocationsDrawMode,0,o.rectangleLocationsDrawLength,z),v=!0,a.bindBuffer(a.ARRAY_BUFFER,null)}})}),v}),this}dispose(){return super.dispose(),this.I_.dispose(),this._H&&(this._H.gridTileSizes.forEach(t=>{}),this._H.gridTiles.forEach(t=>{this.RR.OR(t.heightmapDataTexture),t.normalmapTexture&&this.RR.OR(t.normalmapTexture)}),this.RR.yV(this._H.rectangleLocationsBuffer),this._H=void 0),this.bG={},this}VR(){return this.dispose(),this.I_.VR(),this}_v(t){return this.I_._v(t),this}wv(t){this.mH.push(t),oT(this.vH.gridTiles,t,e=>e.heightmapData);for(let e=t.startPrimary;e<t.startPrimary+t.lengthPrimary;e+=1)this.SH[e]=void 0;return this.yH=void 0,this}xv(t){return this.uU.S(t),this}Mv(){return this.uU.M()}Ce(t){return this.be=kl(this.be,t),this.I_.Ce(this.be),this}Eh(){return this.be}mv(t){return this.gv=typeof t=="function"?t(this.gv):t,this}bv(){return this.gv}bt(){var t;return((t=this.bU)===null||t===void 0?void 0:t.MH.max.x)||0}vt(){var t;return((t=this.bU)===null||t===void 0?void 0:t.MH.min.x)||0}Mt(){const t=this.yH||this.kH();return this.yH=t,t.max}xt(){const t=this.yH||this.kH();return this.yH=t,t.min}aS(){var t;return((t=this.bU)===null||t===void 0?void 0:t.MH.max.z)||0}lS(){var t;return((t=this.bU)===null||t===void 0?void 0:t.MH.min.z)||0}vl(){return 0}bl(){return 0}uS(){return 0}kH(){if(this.yH)return this.yH;const t=this.xH?this.xH.fill.iFirstPrimary:0,e=this.xH?t+this.xH.fill.amountPrimary-1:this.Un.primaryDimensionVectorsCount-1;let i=Mt,s=Dt;return this.vH.gridTiles.forEach(n=>{for(let a=Math.max(t,n.iFirstUniqueVector.primary);a<=Math.min(e,n.iFirstUniqueVector.primary+n.sizeUniqueHeatmapDataVectors.primary-1);a+=1){const o=(a-n.iFirstUniqueVector.primary)*n.sizeHeatmapDataVectors.secondary;let l=this.SH[a];if(l)i=i<l.min?i:l.min,s=s>l.max?s:l.max;else{l={min:Mt,max:Dt},this.SH[a]=l;for(let u=0;u<n.sizeHeatmapDataVectors.secondary;u+=1){const d=n.heightmapData[o+u];i=i<d?i:d,s=s>d?s:d,l.min=Math.min(l.min,d),l.max=Math.max(l.max,d)}}}}),this.yH={min:i,max:s},this.yH}}class F6 extends bh{constructor(t,e,i,s,n,a){super(t,e,i,n,a),this.DY="disabled",this.MU=0,this.wU={},this.Pi={x:0,z:0},this.$w={x:1,z:1},this.Un={...s,scrollDimensionSize:s.scrollDimension==="columns"?s.columns:s.rows,staticDimensionSize:s.scrollDimension==="columns"?s.rows:s.columns},this.MH={min:{x:this.Pi.x,z:this.Pi.z},max:{x:s.scrollDimension==="rows"?this.Pi.x+(s.columns-1)*this.$w.x:this.Pi.x,z:s.scrollDimension==="columns"?this.Pi.z+(s.rows-1)*this.$w.z:this.Pi.z}};const o=()=>({shape:new gT(this.BY,re,this.Oo,{columns:s.columns+(s.scrollDimension==="columns"?1:0),rows:s.rows+(s.scrollDimension==="rows"?1:0),dataOrder:s.scrollDimension,heatmapDataType:"intensity"},this.gN,this.mN).setVisible(!1),hasData:!1});this.QM=[o(),o()]}Ps(t){this.QM.forEach(s=>{s.shape.Ps(t)});const e=this.QM.reduce((s,n)=>{var a,o;return s.min=Math.min(s.min,Fe((a=n.shape.I_.Ja)===null||a===void 0?void 0:a.min,Mt)),s.max=Math.max(s.max,Fe((o=n.shape.I_.Ja)===null||o===void 0?void 0:o.max,Dt)),s},{min:Mt,max:Dt}),i=this.QM.reduce((s,n)=>{var a,o;return s.min=Math.min(s.min,Fe((a=n.shape.yH)===null||a===void 0?void 0:a.min,Mt)),s.max=Math.max(s.max,Fe((o=n.shape.yH)===null||o===void 0?void 0:o.max,Dt)),s},{min:Mt,max:Dt});return this.QM.forEach(s=>{s.shape.I_.Ja=e,s.shape.yH=i}),this}zL(t){return this.QM.forEach(e=>{e.hasData&&(e.shape.UY=this.UY,e.shape.YY=this.YY,e.shape.HY=this.HY,e.shape.zL(t))}),this}Sv(t,e){return this.Pi=t,this.$w=e,this.QM.forEach(i=>{i.shape.Sv(this.Un.scrollDimension==="columns"?{x:i.shape.vv().start.x,z:this.Pi.z}:{x:this.Pi.x,z:i.shape.vv().start.z},this.$w)}),this.Un.scrollDimension==="columns"?(this.MH.min.z=t.z,this.MH.max.z=this.Pi.z+(this.Un.rows-1)*this.$w.z):(this.MH.min.x=t.x,this.MH.max.x=this.Pi.x+(this.Un.columns-1)*this.$w.x),this}vv(){return{start:this.Pi,step:this.$w}}Nt(){return this.MU=0,this.wU={},this.MH={min:{x:this.Pi.x,z:this.Pi.z},max:{x:this.Un.scrollDimension==="rows"?this.Pi.x+(this.Un.columns-1)*this.$w.x:this.Pi.x,z:this.Un.scrollDimension==="columns"?this.Pi.z+(this.Un.rows-1)*this.$w.z:this.Pi.z}},this.QM.forEach(t=>{t.shape.setVisible(!1),t.shape.pH=!1,t.hasData=!1}),this}Fv(t){var e;const i=this.QM[0],s=this.QM[1],n=t.heightMapValues?t.heightMapValues.length:(e=t.intensityValues)===null||e===void 0?void 0:e.length;let a=0;if(!n)return this;do{const o=Math.floor(this.MU/this.Un.scrollDimensionSize)%this.QM.length,l=this.QM[o],u=this.MU%this.Un.scrollDimensionSize,d=this.Un.scrollDimensionSize-u,f=u===0,y=Math.min(d,n),m=u+y,p=u,x=p+1,b=a,v=a+y,R=this.MU>=this.Un.scrollDimensionSize&&m<=this.Un.scrollDimensionSize-1,E=f;f&&(l.shape.Sv(this.Un.scrollDimension==="columns"?{x:this.Pi.x+(this.MU-1)*this.$w.x,z:this.Pi.z}:{x:this.Pi.x,z:this.Pi.z+(this.MU-1)*this.$w.z},this.$w),l.shape.setVisible(!0));const V=R?0:1,F=m+(R?1:0);l.shape.bH({fill:{iFirstPrimary:V,amountPrimary:F},wireframe:{iFirstPrimary:V,amountPrimary:F,connectNext:!1}});const L=l===i?s:i,z=m+1,B=1+this.Un.scrollDimensionSize-z;L.shape.bH({fill:{iFirstPrimary:z,amountPrimary:B},wireframe:{iFirstPrimary:z,amountPrimary:B-1,connectNext:!0}});const A={};if(t.heightMapValues){const T=t.heightMapValues.slice(b,v);let w=!1;E&&this.wU.yValues&&(w=!0,T.splice(0,0,this.wU.yValues));const C={startPrimary:w?p:x,startSecondary:0,lengthPrimary:T.length,lengthSecondary:this.Un.staticDimensionSize,values:T,type:"y"};l.shape.wv(C),l.hasData=!0,A.yValues=T[y-1]}if(t.intensityValues){const T=t.intensityValues.slice(b,v);let w=!1;E&&this.wU.intensityValues&&(w=!0,T.splice(0,0,this.wU.intensityValues));const C={startPrimary:w?p:x,startSecondary:0,lengthPrimary:T.length,lengthSecondary:this.Un.staticDimensionSize,values:T,type:"intensity"};l.shape._v(C),l.hasData=!0,A.intensityValues=T[y-1]}this.MU+=y,a+=y,this.wU=A}while(a<n);return this.Un.scrollDimension==="columns"?(this.MH.min.x=this.Pi.x+Math.max(this.MU-this.Un.scrollDimensionSize,0)*this.$w.x,this.MH.max.x=this.Pi.x+(this.MU-1)*this.$w.x):(this.MH.min.z=this.Pi.z+Math.max(this.MU-this.Un.scrollDimensionSize,0)*this.$w.z,this.MH.max.z=this.Pi.z+(this.MU-1)*this.$w.z),this}xv(t){return this.QM.forEach(e=>e.shape.xv(t)),this}Mv(){return this.QM[0].shape.Mv()}Ce(t){return this.QM.forEach(e=>e.shape.Ce(t)),this}Eh(){return this.QM[0].shape.Eh()}mv(t){return this.QM.forEach(e=>e.shape.mv(t)),this}bv(){return this.QM[0].shape.bv()}VR(){return this.dispose(),this.QM.forEach(t=>t.shape.VR()),this}dispose(){return super.dispose(),this.QM.forEach(t=>t.shape.dispose()),this}setVisible(t){return super.setVisible(t),this.QM.forEach(e=>e.shape.setVisible(t&&e.hasData)),this}rS(t){return super.rS(t),this.QM.forEach(e=>e.shape.rS(t)),this}bt(){return this.MH.max.x}vt(){return this.MH.min.x}Mt(){return Math.max(this.QM[0].shape.Mt(),this.QM[1].shape.Mt())}xt(){return Math.min(this.QM[0].shape.xt(),this.QM[1].shape.xt())}aS(){return this.MH.max.z}lS(){return this.MH.min.z}vl(){return 0}bl(){return 0}uS(){return 0}cs(t){return super.cs(t),this.QM.forEach(e=>e.shape.cs(t)),this}}class V6 extends uT{constructor(t,e,i,s){super(t,e,i),this.TH=45,this.FH=.1,this.IH=100,this.YY=Bt(0,0,1),this.PH=Bt(0,0,-1),this.DH=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],this.qp=new gS,this.dt=s}Kv(){const{cellIndex:t,cellSpan:e,cellsAmount:i}=this.dt,s=e.x/i.x,n=e.y/i.y,a=t.x/i.x,o=t.y/i.y,l=this.us.oi();return{x:a*l.x,y:o*l.y,width:s*l.x,height:n*l.y}}setCameraLocation(t){return this.YY=t,this}getCameraLocation(){return this.YY}setCameraDirection(t){return this.PH=ft.normalize(t),this}getCameraDirection(){return this.PH}setLightLocation(t){return this.HY=t,this}getLightLocation(){return this.HY}BH(){return Bt(this.DH[0],this.DH[1],this.DH[2])}LH(){return Bt(this.DH[4],this.DH[5],this.DH[6])}}class B2 extends V6{constructor(t,e,i,s){super(t,e,i,s),this.aE=new Pz,this.RH=!0,this.rN=t,this.gl=t.oN(),this.MY=this.pY,this.EH=this.us.Co(()=>{this.RH=!0}),this.zH=s.U(()=>{this.RH=!0})}rV(t){const e=t.vt(),i=t.xt(),s=t.lS(),n=t.bt(),a=t.Mt(),o=t.aS();if(e===Mt||n===Dt||i===Mt||a===Dt||s===Mt||o===Dt)return Ne;const l=t.vl(),u=t.bl(),d=t.uS(),f=Math.abs(t.ks.Op(l)*t.dt.x.et()),y=Math.abs(t.ks.Op(u)*t.dt.y.et()),m=Math.abs(t.ks.Op(d)*t.dt.z.et()),p=e-f,x=n+f,b=i-y,v=a+y,R=s-m,E=o+m;let V;return[{x:p,y:b,z:R},{x,y:b,z:R},{x:p,y:v,z:R},{x,y:v,z:R},{x:p,y:b,z:E},{x,y:b,z:E},{x:p,y:v,z:E},{x,y:v,z:E}].map(F=>t.ks.Gp(F)).forEach(F=>{if(!F)return;V=V?qs(V,{min:F,max:F}):{min:F,max:F}}),V||Ne}_Y(t){const e=Array.from(this.MY.values());for(let i=0;i<e.length;i+=1){const s=e[i],n=s.lN(t);if(n)return{entity:s,index:i,collectionMember:n.collectionMember}}}Gp(t){if(this.VH(),this.OH(),!this.UY)return;const e=this.aE.AV(),i=Bt(e[0],e[1],e[2]),s=this.aE.fV(),n=Bt(s[0],s[1],s[2]),a=ft.divideVec(ft.subtractVec(t,i),n),o=this.UY,l=ze.multiply(o,[a.x,a.y,a.z,1]),u=Y(l[0]/l[3],l[1]/l[3]),d=this.us.oi();return{x:.5*(1+u.x)*d.x,y:.5*(1+u.y)*d.y}}ft(t){const e=this.aE.AV(),i=this.aE.fV(),s=ft.divideVec(ft.subtractVec(t,{x:e[0],y:e[1],z:e[2]}),{x:i[0],y:i[1],z:i[2]});return{...t,x:s.x,y:s.y,z:s.z}}yt(t){const e=this.aE.AV(),i=this.aE.fV(),s=ft.addVec(ft.multiplyVec(t,{x:i[0],y:i[1],z:i[2]}),{x:e[0],y:e[1],z:e[2]});return{...t,x:s.x,y:s.y,z:s.z}}Op(t){return t/1e3}iH(){return .001}Ps(){const t=this.YY,e=this.HY,i=this.dt.x.i||this.dt.y.i||this.dt.z.i;if(!e)throw kn(0,()=>DR());const{viewProjectionMatrix:s}=this.VH();this.OH();const n=[t.x,t.y,t.z],a=[e.x,e.y,e.z];return this.pY.forEach(o=>{o.UY=s,o.YY=n,o.HY=a,o.Ps(i)}),this}VH(){if(!this.RH&&this.UY)return{viewProjectionMatrix:this.UY};const t=this.Kv(),e=t.width/t.height;this.NH=ze.projectionPerspective(this.TH,e,this.FH,this.IH);const i=this.YY;this.DH[12]=i.x,this.DH[13]=i.y,this.DH[14]=i.z;const s=this.PH,n=Bt(0,1,0),a=ft.multiply(s,-1),o=ft.normalize(ft.cross(n,a)),l=ft.normalize(ft.cross(a,o));this.DH[0]=o.x,this.DH[1]=o.y,this.DH[2]=o.z,this.DH[4]=l.x,this.DH[5]=l.y,this.DH[6]=l.z,this.DH[8]=a.x,this.DH[9]=a.y,this.DH[10]=a.z,this.GH=ze.inverse(this.DH);const{cellIndex:u,cellSpan:d,cellsAmount:f}=this.dt,y=d.x/f.x,m=d.y/f.y,p=(u.x+d.x/2)/f.x,x=(u.y+d.y/2)/f.y,b=ze.multiply(ze.translation(vo(-1,1,p),vo(-1,1,x),0),ze.scaling(y,m,1));return this.UY=ze.multiply(b,ze.multiply(this.NH,this.GH)),this.WH=ze.inverse(this.UY),this.RH=!1,{viewProjectionMatrix:this.UY}}OH(){this.aE.KO(this.dt.x),this.aE.qO(this.dt.y),this.aE.tN(this.dt.z)}zL(t,e){const i=this.gl.$z(),s=this.Kv(),n={x:s.x*i*e,y:s.y*i*e,width:s.width*i*e,height:s.height*i*e};return this.gl.hV(n.x,n.y,n.width,n.height),this.pY.forEach(a=>{a.getVisible()&&(this.gl.Kz(a.DY),t!==1&&this.gl.nS(a.iS),(t!==1||a.getMouseInteractions())&&a.zL(t))}),this.gl.Kz("disabled"),this.gl.nS(!1),this.gl.qz(!1),this}setCameraLocation(t){return this.YY.x===t.x&&this.YY.y===t.y&&this.YY.z===t.z||(this.RH=!0),super.setCameraLocation(t),this}setCameraDirection(t){return this.PH.x===t.x&&this.PH.y===t.y&&this.PH.z===t.z||(this.RH=!0),super.setCameraDirection(t),this}W(){super.W(),this.us.ko(this.EH),this.dt.Y(this.zH)}bS(t){const e=this.rN.wY();return this.SY(new k6(this,this.vY,[],e,this.rN.CY(e),t))}rp(t){const e=this.rN.wY();return this.SY(new E6(this,this.vY,t,e,this.rN.CY(e)))}AS(){const t=this.rN.wY();return this.SY(new v6(this,this.vY,[],t,this.rN.CY(t)))}Rv(){const t=this.rN.wY();return this.SY(new C6(this,this.vY,[],t,this.rN.CY(t)))}Lg(){const t=this.rN.wY();return this.SY(new M6(this,this.vY,[],t,this.rN.CY(t)))}yv(t){const e=this.rN.wY();return this.SY(new gT(this,this.vY,[],t,e,this.rN.CY(e)))}Tv(t){const e=this.rN.wY();return this.SY(new F6(this,this.vY,[],t,e,this.rN.CY(e)))}}class z6 extends gD{constructor(t,e,i,s=Lz){if(super(t,e,i),this.X=Kn(1,1),this.UH=!1,this.YH=0,this.HH=!0,this.$H=0,this.tH=8388608,this.$E=[null,null],this.XH=null,this.jH=null,this.ZH=0,this.Qg=!1,this.QH=0,this.Ss=(v=!1)=>(this.$i||this.dn||this.JH()||(v&&(this.UH=!0),this.hn=!0,this.KH||this.Qr.nz(v)),this),this.KH=!1,this.cz=v=>{if(this.$i||this.dn)return;const R=v-this.YH;if(R>=this.Qn||this.Qn===-1){this.KH=!0,this.YH=v,this.UH=!1;const E=R>50?1e3/60:R;this.rn&&this.rn(E),this.hn=!1,this.Qn!==-1&&this.UH&&(this.Qr.nz(this.UH),this.hn=!0),this.ls.Ps(R),this.pn(),this.Sn(),this.nn&&this.nn(),this.KH=!1,this.D.emit("render"),this.hn&&this.Ss(this.UH)}else this.hn=!0,this.Qr.nz()},this.qH=new Map,this.oN=()=>this.RR,this.t$=()=>{var v,R,E;const V=this.On(),F=this.HH,L=nt.performance.now(),z=(v=this.i$)===null||v===void 0?void 0:v.s$.reduce((w,C)=>w?C.e$&&w.e$&&C.e$>w.e$?C:w:C,void 0),B=z==null?void 0:z.e$,A=(R=this.Dn)===null||R===void 0?void 0:R.timeStamp,T=(E=this.xo)===null||E===void 0?void 0:E.timeStamp;return F?(this.Ss(!0),!1):z===void 0||(z===void 0||!z.h$)&&(T!==void 0&&B!==void 0&&T>B||(B!==void 0&&V===void 0?L-B>=1e3:!(B!==void 0&&A!==void 0&&L-A>=2e3)||L-B>=1e3))},this.r$=()=>{var v,R;this.n$=void 0;const E=(R=(v=this.i$)===null||v===void 0?void 0:v.o$)===null||R===void 0?void 0:R.a$;E===void 0||E>=this.$H||this.l$()},this.Sn=()=>{if(this.$i||this.dn)return this;const v=this.RR.gl,R=nt.performance.now();this.RR.sV(v.FRAMEBUFFER,this.Qr.tz?this.$E[0]:null);const E=this.X,V=E.x>0&&E.y>0;if(this.gn.i&&this.RR.qV(this.gn.M()),v.resize&&V&&v.resize(E.x*this.RR.$z(),E.y*this.RR.$z()),this.RR.eV(0,0,E.x*this.RR.$z(),E.y*this.RR.$z()),this.RR.hV(0,0,E.x*this.RR.$z(),E.y*this.RR.$z()),this.RR.Nt(),V)for(const F of this.tn.values())F.zL(0,1);if(this.Un.Xn&&V&&(this.n$&&(nt.clearTimeout(this.n$),this.n$=void 0),this.t$()?(this.l$(),this.RR.sV(v.FRAMEBUFFER,this.Qr.tz?this.$E[0]:null)):this.n$=nt.setTimeout(this.r$,500)),this.j(),this.jr(),this._n&&this.Mn(this._n),this.Qr.tz){const F=this.RR.gl2.ctx;F.bindFramebuffer(F.READ_FRAMEBUFFER,this.$E[0]),F.bindFramebuffer(F.DRAW_FRAMEBUFFER,this.$E[1]),F.clearBufferfv(F.COLOR,0,[1,1,1,1]),F.blitFramebuffer(0,0,this.X.x*this.RR.$z(),this.X.y*this.RR.$z(),0,0,this.X.x*this.RR.$z(),this.X.y*this.RR.$z(),v.COLOR_BUFFER_BIT,v.LINEAR)}else v.bindTexture(v.TEXTURE_2D,this.NE),v.copyTexImage2D(v.TEXTURE_2D,0,v.RGBA,0,0,this.X.x*this.RR.$z(),this.X.y*this.RR.$z(),0),v.bindTexture(v.TEXTURE_2D,null);return this.RR.sV(v.FRAMEBUFFER,null),this.Qr.nz(),this.HH=!1,this.$H=R,this},this.pn=()=>{if(this.u$.mode==="use-window"){const R=nt.devicePixelRatio||1;this.RR.dO(R)}const v=this.X;if(v.x===0||v.y===0)return this;this.oo.q(v);for(const R of this.tn.values())R.Ps();return this.j(),this},this.c$=1,this.Qr=t,this.Qr.KE){this.d$=nt.document.createElement("canvas"),this.d$.style.width="100%",this.d$.style.height="100%",this.d$.style.display="block",this.d$.style.boxSizing="content-box",this.d$.style.position="absolute";const v=this.d$.getContext("2d",{willReadFrequently:!1,alpha:!0,desynchronized:!1});if(!v)throw new Ei("No Canvas context available.");this.GE=v,this.Gr.appendChild(this.d$)}this.Qr.Az(this);const n={antialias:e?e.antialias:void 0,lineAntialias:!e||(e.lineAntiAlias===!0||e.lineAntiAlias===!1?e.lineAntiAlias:e.antialias!==!1)};let a;if(this.Qr.tz&&t.gl2&&(a=new s(this,this.Un,{type:"webgl2",ctx:t.gl2.ctx,antialias:n.antialias,lineAntialias:n.lineAntialias},this.qi.isDark)),a||this.Qr.tz||(a=new s(this,this.Un,{type:"webgl1",ctx:t.gl,antialias:n.antialias,lineAntialias:n.lineAntialias},this.qi.isDark)),!a)throw new Ei("No WebGL context available");if(this.RR=a,typeof(e==null?void 0:e.devicePixelRatio)=="number")this.u$={mode:"fixed",value:e.devicePixelRatio},this.RR.dO(e.devicePixelRatio);else{const v=nt.document.head.querySelector('meta[name="viewport"]'),R=e.devicePixelRatio===!0||(v==null?void 0:v.content.includes("width=device-width")),E=nt.devicePixelRatio||1;this.u$=R?{mode:"use-window"}:{mode:"fixed",value:E},this.RR.dO(E)}const o=e?e.width:void 0,l=e?e.height:void 0;this.ho=this.f$(o),this.no=this.f$(l),this.A$(this.ho,this.no),this.CU=this.FI("engine offscreen",1e6),this.g$=this.FI("engine bg",0);const u=typeof this.qi.lcjsBackgroundFillStyle=="function"?this.qi.lcjsBackgroundFillStyle(this.Un.$s):this.qi.lcjsBackgroundFillStyle;this.oo=this.g$.ke(this.dt).Ce(u).we(this.qi.lcjsBackgroundStrokeStyle).setMouseInteractions(!1).Fe({x:0,y:0});const d=this.FI("engine effects",200001).kY(this.qi.effect);this.es=d;const f=this.Qr.tz,y=this.oi();f&&(this.$E=[a.vV(),a.vV()]);const m=this.RR.gl;f&&(this.XH=m.createRenderbuffer(),this.jH=m.createRenderbuffer()),this.NE=m.createTexture();const p=y.x*this.RR.$z(),x=y.y*this.RR.$z();if(f){m.bindRenderbuffer(m.RENDERBUFFER,this.XH);const v=this.RR.gl2.ctx;this.ZH=this.Qr.PE&&e.antialias!==!1?v.getParameter(v.MAX_SAMPLES):0,v.renderbufferStorageMultisample(v.RENDERBUFFER,this.ZH,v.RGBA8,p,x),m.bindRenderbuffer(m.RENDERBUFFER,this.jH),m.renderbufferStorage(m.RENDERBUFFER,m.DEPTH_COMPONENT16,p,x),v.renderbufferStorageMultisample(v.RENDERBUFFER,this.ZH,v.DEPTH_COMPONENT16,p,x)}f&&(this.RR.sV(m.FRAMEBUFFER,this.$E[0]),m.framebufferRenderbuffer(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.RENDERBUFFER,this.XH),m.framebufferRenderbuffer(m.FRAMEBUFFER,m.DEPTH_ATTACHMENT,m.RENDERBUFFER,this.jH)),m.bindTexture(m.TEXTURE_2D,this.NE),m.texImage2D(m.TEXTURE_2D,0,m.RGBA,p,x,0,m.RGBA,m.UNSIGNED_BYTE,null),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,m.LINEAR),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,m.CLAMP_TO_EDGE),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,m.CLAMP_TO_EDGE),f&&(this.RR.sV(m.FRAMEBUFFER,this.$E[1]),m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,this.NE,0)),this.RR.sV(m.FRAMEBUFFER,null),this.fn(),this.jr(),this.hm=fD(this),this.rm={qi:this.qi,ls:this.ls,dt:this.dt,Ss:v=>this.Ss(v),On:()=>this.On(),cB:v=>this.cB(v),Un:this.Un,Nn:v=>this.Nn(v),es:this.es,Po:v=>this.Po(v),Do:v=>this.Do(v),Ig:{Fg:(v,R,E)=>this.RR.Vh(R.family).QR(v,R,E,this.qi.isDark)}};const b=()=>{this.W()};nt.addEventListener("unload",b),this.an.push(()=>{nt.removeEventListener("unload",b)})}get m$(){return this.tn}Jr(t,e){let i=this.qH.get(t);if(!i){const n=this.RR.pO(t),a=new Set,o=d=>{a.add(d)},l=d=>{a.delete(d)&&a.size===0&&(n.unbindResources(),this.qH.delete(t))},u=[];i={imageTexture:n,instances:a,handleNewInstance:o,handleInstanceDisposed:l,sharedEngineReference:{dB:()=>n.Dz,fB:d=>{n.Dz?d():u.push(d)}}},this.qH.set(t,i),n.jR(this),n.Oz(()=>{u.forEach(d=>{d()}),u.length=0})}const s=new jD(t,i.handleNewInstance,i.handleInstanceDisposed,e);return i.handleNewInstance(s),s}cB(t){const e=Array.from(this.qH.values()).find(i=>i.instances.has(t));if(!e)throw kn(0,()=>new Error("LightningChart JS error, attempted to use Icon that is disposed. Please check that you are not disposing an Icon that is still in use, or attempting to use a previously disposed Icon!"));return e.sharedEngineReference}wn(t,e){var i;const s=(i=this.i$)===null||i===void 0?void 0:i.o$;if(!s)return;const n=this.Pe(e.x,e.y),a=Math.round(n.x*this.RR.$z()),o=Math.round(n.y*this.RR.$z());return[[-1,-1],[-1,0],[-1,1],[0,1],[1,1],[1,0],[1,-1],[0,-1],[0,0]].map(l=>this.y$(s,a+l[0]/s.p$,o+l[1]/s.p$)).reduce((l,u)=>{if(u===void 0)return l||void 0;const d=1e6*u.layerIndex+u.entityIndex;return!l||d>l.zIndexForComparison?{zIndexForComparison:d,entity:u.entity,collectionMember:u.collectionMember}:l},void 0)}y$(t,e,i){const s=Math.round(e*t.p$),n=Math.round(i*t.p$);if(s<0||s>=t.X.x||n<0||n>=t.X.y)return;const a=4*(s+n*t.X.x),o=t.S$[a+0],l=t.S$[a+1],u=t.S$[a+2],d=t.S$[a+3];return o!==void 0&&l!==void 0&&u!==void 0&&d!==void 0?this.v$(o,l,u,d):void 0}Hr(t,e,i){const s=this.RR.gl;this.Qr.tz?(this.RR.sV(s.FRAMEBUFFER,this.$E[1]),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,this.NE,0)):this.RR.sV(s.FRAMEBUFFER,null);const n=this.OE(),a=n.x,o=n.y,l=new Uint8Array(a*o*4);this.Qr.tz||this.Sn(),s.readPixels(0,0,a,o,s.RGBA,s.UNSIGNED_BYTE,l);const u=new ImageData(new Uint8ClampedArray(l),a,o),d=document.createElement("canvas"),f=d.getContext("2d");if(!f)throw new Error("Failed to create 2D context for saving image.");d.width=a,d.height=o,f.putImageData(u,0,0),f.translate(0,o),f.scale(1,-1),f.drawImage(d,0,0),this.Qr.tz&&(this.RR.sV(s.FRAMEBUFFER,this.$E[0]),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.RENDERBUFFER,this.XH),this.RR.sV(s.FRAMEBUFFER,this.$E[1]),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,this.NE,0)),this.RR.sV(s.FRAMEBUFFER,null);const y=d.toDataURL(t,e);return i?y:(m=>{const p=m.split(",")[0].split(":")[1].split(";")[0],x=nt.atob(m.split(",")[1]),b=new Uint8Array(x.length);for(let v=0;v<x.length;v+=1)b[v]=x.charCodeAt(v);return new nt.Blob([b.buffer],{type:p})})(y)}$r(t,e,i=!1){this.fn(Y(Math.round(t),Math.round(e))),this.yn();const s=this.RR.gl.drawingBufferWidth,n=this.RR.gl.drawingBufferHeight,a=new Uint8Array(s*n*4);if(this.RR.gl.readPixels(0,0,s,n,this.RR.gl.RGBA,this.RR.gl.UNSIGNED_BYTE,a),!i){const o=n/2|0,l=4*s,u=new Uint8Array(4*s);for(let d=0;d<o;d+=1){const f=d*l,y=(n-d-1)*l;u.set(a.subarray(f,f+l)),a.copyWithin(f,y,y+l),a.set(u,y)}}return this.en={x:0,y:e},a}mL(t){return this.ho!==void 0?this.ho[0]=t:this.ho=[t,void 0],this.Gr.style.minWidth=`${this.ho[0]}px`,this.fn(),this}pL(t){return this.ho!==void 0?this.ho[1]=t:this.ho=[void 0,t],this.Gr.style.maxWidth=`${this.ho[1]}px`,this.fn(),this}vL(t){return this.no!==void 0?this.no[0]=t:this.no=[t,void 0],this.Gr.style.minHeight=`${this.no[0]}px`,this.fn(),this}xL(t){return this.no!==void 0?this.no[1]=t:this.no=[void 0,t],this.Gr.style.maxHeight=`${this.no[1]}px`,this.fn(),this}A$(t,e){return this.ho=t,this.no=e,this.Gr.style.minWidth=`${this.ho[0]}px`,this.Gr.style.maxWidth=`${this.ho[1]}px`,this.Gr.style.minHeight=`${this.no[0]}px`,this.Gr.style.maxHeight=`${this.no[1]}px`,this.fn(),this}zE(t){return this.Qg!==t&&(this.D.emit("inViewChange",t),this.Qg=t),this}EE(){return this.Qg}gz(t){this.QH=t}fz(){return this.QH}FI(t,e=this.do()){const i=this.co(e);if(i){if(kn(0,()=>{}),!(i instanceof L2))throw new Error("Unexpected Engine Layer error");return i}return this.vn(new L2(this,e,t))}BI(t,e,i){const s=this.co(e);if(s){if(kn(0,()=>{}),!(s instanceof B2))throw new Error("Unexpected Engine Layer error");return s}return this.vn(new B2(this,e,t,i))}oi(){return this.X}OE(){const t=this.RR.$z();return{x:Math.round(this.X.x*t),y:Math.round(this.X.y*t)}}f$(t){return t instanceof Array||(t=[t,t]),t}b$(){return this.Qr.WE}JH(){const t=this.RR.gl;return t&&"resize"in t}l$(){var t;const e=this.RR.gl,i=nt.performance.now(),s=this.On(),n=this.Un.$n,a={x:Math.ceil(this.X.x*this.RR.$z()*n),y:Math.ceil(this.X.y*this.RR.$z()*n)};this.i$||(this.i$={p$:n,x$:a,s$:[],o$:void 0});let o=this.i$.s$.find(y=>!y.h$),l=!1;o||(l=!0,o={h$:!1,X:a,PO:e.createTexture(),M$:this.RR.vV(),jH:this.RR.bV(),_$:new Uint8Array,e$:void 0},this.i$.s$.push(o));const u=o;(l||u.X.x!==a.x||u.X.y!==a.y)&&(e.bindTexture(e.TEXTURE_2D,u.PO),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,a.x,a.y,0,e.RGBA,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),this.RR.sV(e.FRAMEBUFFER,u.M$),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,u.PO,0),e.bindRenderbuffer(e.RENDERBUFFER,u.jH),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,a.x,a.y),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,u.jH),u._$=new Uint8Array(a.x*a.y*4),u.X=a),u.h$=!0,u.e$=i,this.RR.sV(e.FRAMEBUFFER,u.M$),e.clearDepth(1),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),e.disable(e.BLEND),e.resize&&e.resize(a.x,a.y),this.RR.eV(0,0,a.x,a.y);for(const y of this.tn.values())y.zL(1,n);this.RR.sV(e.FRAMEBUFFER,null),e.bindTexture(e.TEXTURE_2D,null),e.bindRenderbuffer(e.RENDERBUFFER,null),e.enable(e.BLEND);const d=(t=this.RR.gl2)===null||t===void 0?void 0:t.ctx,f=()=>{if(this.i$){const y=this.i$.o$;if(y&&y.a$>i)return;this.i$.o$={a$:i,p$:n,X:a,S$:u._$,w$:s}}};d?this.RR.TO(d,u.M$,0,0,a.x,a.y,e.RGBA,e.UNSIGNED_BYTE,u._$).then(()=>{this.$i||(u.h$=!1,f())}).catch(y=>{this.$i||(u.h$=!1,nt.console.warn(`LightningChart JS mouse picking failed unexpectedly. This could mean that user interactions on charts are compromised.
Please report this issue to https://lightningchart.com/js-charts/docs/contact`))}):(this.RR.FO(u.M$,0,0,a.x,a.y,e.RGBA,e.UNSIGNED_BYTE,u._$),u.h$=!1,f())}fn(t){if(this.u$.mode==="use-window"){const n=nt.devicePixelRatio||1;this.RR.dO(n)}const e=this.X.x,i=this.X.y,s=t||{x:this.Gr.offsetWidth,y:this.Gr.offsetHeight};if(s.x!==0&&s.y!==0&&(s.x!==e||s.y!==i)){this.X=s,this.dt.x.J(0,s.x).q(s.x),this.dt.y.J(0,s.y).q(s.y);const n=s.x*this.RR.$z(),a=s.y*this.RR.$z(),o=this.RR.gl;this.Qr.KE&&this.GE&&(this.GE.canvas.width=n,this.GE.canvas.height=a);const l=this.Qr.tz;if(this.NE&&(o.bindTexture(o.TEXTURE_2D,this.NE),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,n,a,0,o.RGBA,o.UNSIGNED_BYTE,null)),l){const u=this.RR.gl2.ctx;this.XH&&(o.bindRenderbuffer(o.RENDERBUFFER,this.XH),u.renderbufferStorageMultisample(u.RENDERBUFFER,this.ZH,u.RGBA8,n,a)),this.jH&&(o.bindRenderbuffer(o.RENDERBUFFER,this.jH),o.renderbufferStorage(o.RENDERBUFFER,o.DEPTH_COMPONENT16,n,a),u.renderbufferStorageMultisample(u.RENDERBUFFER,this.ZH,u.DEPTH_COMPONENT16,n,a))}o.bindRenderbuffer(o.RENDERBUFFER,null),this.D.emit("resize",[this.X.x,this.X.y])}}W(){var t;this.$i||(super.W(),this.n$&&(nt.clearTimeout(this.n$),this.n$=void 0),Array.from(this.RR.bE.entries()).forEach(([e,i])=>{i.VR(!1),this.RR.bE.delete(e)}),Array.from(this.RR.wV.values()).forEach(e=>{e.unbindResources()}),this.RR.wV.clear(),this.RR._V.kz(),this.RR.aO.W(),this.RR.yV(this.RR.lO),this.RR.yV(this.RR.uO),this.RR.hO.forEach((e,i)=>{this.RR.gl.deleteBuffer(i)}),this.RR.hO.clear(),this.RR.MO&&(this.RR.yV(this.RR.MO.buffer),this.RR.MO=void 0),this.RR.MV(this.$E[0]),this.RR.MV(this.$E[1]),this.RR.xV(this.XH),this.RR.OR(this.NE),this.RR.xV(this.jH),this.i$&&(this.i$.s$.forEach(e=>{this.RR.xV(e.jH),this.RR.MV(e.M$),this.RR.OR(e.PO)}),this.i$=void 0),this.RR.iO.forEach(e=>this.RR.yV(e)),this.qH.clear(),this.Qr.mz(this),this.d$&&((t=this.d$.parentElement)===null||t===void 0||t.removeChild(this.d$),this.d$=void 0),this.GE&&(this.GE=void 0),this.RR.gl=void 0)}wY(){const t=this.c$;return t>4294967295&&(console.warn(`LightningChart JS picking ID overflow.
This is an unexpected error that could compromise user interactions on the chart.
Please report the issue to https://lightningchart.com/js-charts/docs/contact!`),this.c$=1),this.c$+=1,t}CY(t){let e=t;const i=Math.floor(e/16777216);e-=16777216*i;const s=Math.floor(e/65536);e-=65536*s;const n=Math.floor(e/256);return e-=256*n,P(i,s,n,e)}v$(t,e,i,s){if(t===0&&e===0&&i===0&&s===0)return;const n=16777216*t+65536*e+256*i+s;for(const a of this.m$.values()){const o=a._Y(n);if(o)return{entity:o.entity,collectionMember:o.collectionMember,entityIndex:o.index,layerIndex:a.bn()}}}}var Wf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},mp={exports:{}};(function(r,t){function e(A,T){if(!A)throw new Error(T||"Assertion failed")}function i(A,T){A.super_=T;var w=function(){};w.prototype=T.prototype,A.prototype=new w,A.prototype.constructor=A}function s(A,T,w){if(s.isBN(A))return A;this.negative=0,this.words=null,this.length=0,this.red=null,A!==null&&(T!=="le"&&T!=="be"||(w=T,T=10),this.Vz(A||0,T||10,w||"be"))}var n;typeof mp=="object"?mp.exports=s:t.BN=s,s.BN=s,s.wordSize=26;try{n=(void 0).Buffer}catch{}function a(A,T,w){for(var C=0,k=Math.min(A.length,w),_=0,X=T;X<k;X++){var N,U=A.charCodeAt(X)-48;C<<=4,C|=N=U>=49&&U<=54?U-49+10:U>=17&&U<=22?U-17+10:U,_|=N}return e(!(240&_),"Invalid character in "+A),C}function o(A,T,w,C){for(var k=0,_=0,X=Math.min(A.length,w),N=T;N<X;N++){var U=A.charCodeAt(N)-48;k*=C,_=U>=49?U-49+10:U>=17?U-17+10:U,e(U>=0&&_<C,"Invalid character"),k+=_}return k}function l(A,T){A.words=T.words,A.length=T.length,A.negative=T.negative,A.red=T.red}if(s.isBN=function(A){return A instanceof s||A!==null&&typeof A=="object"&&A.constructor.wordSize===s.wordSize&&Array.isArray(A.words)},s.max=function(A,T){return A.cmp(T)>0?A:T},s.min=function(A,T){return A.cmp(T)<0?A:T},s.prototype.Vz=function(A,T,w){if(typeof A=="number")return this.C$(A,T,w);if(typeof A=="object")return this.k$(A,T,w);T==="hex"&&(T=16),e(T===(0|T)&&T>=2&&T<=36);var C=0;(A=A.toString().replace(/\s+/g,""))[0]==="-"&&C++,T===16?this.T$(A,C):this.F$(A,T,C),A[0]==="-"&&(this.negative=1),this.I$(),w==="le"&&this.k$(this.toArray(),T,w)},s.prototype.C$=function(A,T,w){A<0&&(this.negative=1,A=-A),A<67108864?(this.words=[67108863&A],this.length=1):A<4503599627370496?(this.words=[67108863&A,A/67108864&67108863],this.length=2):(e(A<9007199254740992),this.words=[67108863&A,A/67108864&67108863,1],this.length=3),w==="le"&&this.k$(this.toArray(),T,w)},s.prototype.k$=function(A,T,w){if(e(typeof A.length=="number"),A.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(A.length/3),this.words=new Array(this.length);for(var C=0;C<this.length;C++)this.words[C]=0;var k,_,X=0;if(w==="be")for(C=A.length-1,k=0;C>=0;C-=3)_=A[C]|A[C-1]<<8|A[C-2]<<16,this.words[k]|=_<<X&67108863,this.words[k+1]=_>>>26-X&67108863,(X+=24)>=26&&(X-=26,k++);else if(w==="le")for(C=0,k=0;C<A.length;C+=3)_=A[C]|A[C+1]<<8|A[C+2]<<16,this.words[k]|=_<<X&67108863,this.words[k+1]=_>>>26-X&67108863,(X+=24)>=26&&(X-=26,k++);return this.I$()},s.prototype.T$=function(A,T){this.length=Math.ceil((A.length-T)/6),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var C,k,_=0;for(w=A.length-6,C=0;w>=T;w-=6)k=a(A,w,w+6),this.words[C]|=k<<_&67108863,this.words[C+1]|=k>>>26-_&4194303,(_+=24)>=26&&(_-=26,C++);w+6!==T&&(k=a(A,T,w+6),this.words[C]|=k<<_&67108863,this.words[C+1]|=k>>>26-_&4194303),this.I$()},s.prototype.F$=function(A,T,w){this.words=[0],this.length=1;for(var C=0,k=1;k<=67108863;k*=T)C++;C--,k=k/T|0;for(var _=A.length-w,X=_%C,N=Math.min(_,_-X)+w,U=0,O=w;O<N;O+=C)U=o(A,O,O+C,T),this.imuln(k),this.words[0]+U<67108864?this.words[0]+=U:this.P$(U);if(X!==0){var W=1;for(U=o(A,O,A.length,T),O=0;O<X;O++)W*=T;this.imuln(W),this.words[0]+U<67108864?this.words[0]+=U:this.P$(U)}},s.prototype.copy=function(A){A.words=new Array(this.length);for(var T=0;T<this.length;T++)A.words[T]=this.words[T];A.length=this.length,A.negative=this.negative,A.red=this.red},s.prototype.D$=function(A){l(A,this)},s.prototype.clone=function(){var A=new s(null);return this.copy(A),A},s.prototype.B$=function(A){for(;this.length<A;)this.words[this.length++]=0;return this},s.prototype.I$=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this.L$()},s.prototype.L$=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=u}catch{s.prototype.inspect=u}else s.prototype.inspect=u;function u(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],y=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function m(A,T,w){w.negative=T.negative^A.negative;var C=A.length+T.length|0;w.length=C,C=C-1|0;var k=0|A.words[0],_=0|T.words[0],X=k*_,N=67108863&X,U=X/67108864|0;w.words[0]=N;for(var O=1;O<C;O++){for(var W=U>>>26,I=67108863&U,H=Math.min(O,T.length-1),q=Math.max(0,O-A.length+1);q<=H;q++){var Q=O-q|0;W+=(X=(k=0|A.words[Q])*(_=0|T.words[q])+I)/67108864|0,I=67108863&X}w.words[O]=0|I,U=0|W}return U!==0?w.words[O]=0|U:w.length--,w.I$()}s.prototype.toString=function(A,T){var w;if(T=0|T||1,(A=A||10)===16||A==="hex"){w="";for(var C=0,k=0,_=0;_<this.length;_++){var X=this.words[_],N=(16777215&(X<<C|k)).toString(16);w=(k=X>>>24-C&16777215)!=0||_!==this.length-1?d[6-N.length]+N+w:N+w,(C+=2)>=26&&(C-=26,_--)}for(k!==0&&(w=k.toString(16)+w);w.length%T!=0;)w="0"+w;return this.negative!==0&&(w="-"+w),w}if(A===(0|A)&&A>=2&&A<=36){var U=f[A],O=y[A];w="";var W=this.clone();for(W.negative=0;!W.isZero();){var I=W.modrn(O).toString(A);w=(W=W.idivn(O)).isZero()?I+w:d[U-I.length]+I+w}for(this.isZero()&&(w="0"+w);w.length%T!=0;)w="0"+w;return this.negative!==0&&(w="-"+w),w}e(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var A=this.words[0];return this.length===2?A+=67108864*this.words[1]:this.length===3&&this.words[2]===1?A+=4503599627370496+67108864*this.words[1]:this.length>2&&e(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-A:A},s.prototype.toJSON=function(){return this.toString(16,2)},n&&(s.prototype.toBuffer=function(A,T){return this.toArrayLike(n,A,T)}),s.prototype.toArray=function(A,T){return this.toArrayLike(Array,A,T)},s.prototype.toArrayLike=function(A,T,w){this.I$();var C=this.byteLength(),k=w||Math.max(1,C);e(C<=k,"byte array longer than desired length"),e(k>0,"Requested array length <= 0");var _=function(X,N){return X.allocUnsafe?X.allocUnsafe(N):new X(N)}(A,k);return this["_toArrayLike"+(T==="le"?"LE":"BE")](_,C),_},s.prototype.R$=function(A,T){for(var w=0,C=0,k=0,_=0;k<this.length;k++){var X=this.words[k]<<_|C;A[w++]=255&X,w<A.length&&(A[w++]=X>>8&255),w<A.length&&(A[w++]=X>>16&255),_===6?(w<A.length&&(A[w++]=X>>24&255),C=0,_=0):(C=X>>>24,_+=2)}if(w<A.length)for(A[w++]=C;w<A.length;)A[w++]=0},s.prototype.E$=function(A,T){for(var w=A.length-1,C=0,k=0,_=0;k<this.length;k++){var X=this.words[k]<<_|C;A[w--]=255&X,w>=0&&(A[w--]=X>>8&255),w>=0&&(A[w--]=X>>16&255),_===6?(w>=0&&(A[w--]=X>>24&255),C=0,_=0):(C=X>>>24,_+=2)}if(w>=0)for(A[w--]=C;w>=0;)A[w--]=0},Math.clz32?s.prototype.z$=function(A){return 32-Math.clz32(A)}:s.prototype.z$=function(A){var T=A,w=0;return T>=4096&&(w+=13,T>>>=13),T>=64&&(w+=7,T>>>=7),T>=8&&(w+=4,T>>>=4),T>=2&&(w+=2,T>>>=2),w+T},s.prototype.V$=function(A){if(A===0)return 26;var T=A,w=0;return(8191&T)==0&&(w+=13,T>>>=13),(127&T)==0&&(w+=7,T>>>=7),(15&T)==0&&(w+=4,T>>>=4),(3&T)==0&&(w+=2,T>>>=2),(1&T)==0&&w++,w},s.prototype.bitLength=function(){var A=this.words[this.length-1],T=this.z$(A);return 26*(this.length-1)+T},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var A=0,T=0;T<this.length;T++){var w=this.V$(this.words[T]);if(A+=w,w!==26)break}return A},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(A){return this.negative!==0?this.abs().inotn(A).iaddn(1):this.clone()},s.prototype.fromTwos=function(A){return this.testn(A-1)?this.notn(A).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(A){for(;this.length<A.length;)this.words[this.length++]=0;for(var T=0;T<A.length;T++)this.words[T]=this.words[T]|A.words[T];return this.I$()},s.prototype.ior=function(A){return e((this.negative|A.negative)==0),this.iuor(A)},s.prototype.or=function(A){return this.length>A.length?this.clone().ior(A):A.clone().ior(this)},s.prototype.uor=function(A){return this.length>A.length?this.clone().iuor(A):A.clone().iuor(this)},s.prototype.iuand=function(A){var T;T=this.length>A.length?A:this;for(var w=0;w<T.length;w++)this.words[w]=this.words[w]&A.words[w];return this.length=T.length,this.I$()},s.prototype.iand=function(A){return e((this.negative|A.negative)==0),this.iuand(A)},s.prototype.and=function(A){return this.length>A.length?this.clone().iand(A):A.clone().iand(this)},s.prototype.uand=function(A){return this.length>A.length?this.clone().iuand(A):A.clone().iuand(this)},s.prototype.iuxor=function(A){var T,w;this.length>A.length?(T=this,w=A):(T=A,w=this);for(var C=0;C<w.length;C++)this.words[C]=T.words[C]^w.words[C];if(this!==T)for(;C<T.length;C++)this.words[C]=T.words[C];return this.length=T.length,this.I$()},s.prototype.ixor=function(A){return e((this.negative|A.negative)==0),this.iuxor(A)},s.prototype.xor=function(A){return this.length>A.length?this.clone().ixor(A):A.clone().ixor(this)},s.prototype.uxor=function(A){return this.length>A.length?this.clone().iuxor(A):A.clone().iuxor(this)},s.prototype.inotn=function(A){e(typeof A=="number"&&A>=0);var T=0|Math.ceil(A/26),w=A%26;this.B$(T),w>0&&T--;for(var C=0;C<T;C++)this.words[C]=67108863&~this.words[C];return w>0&&(this.words[C]=~this.words[C]&67108863>>26-w),this.I$()},s.prototype.notn=function(A){return this.clone().inotn(A)},s.prototype.setn=function(A,T){e(typeof A=="number"&&A>=0);var w=A/26|0,C=A%26;return this.B$(w+1),this.words[w]=T?this.words[w]|1<<C:this.words[w]&~(1<<C),this.I$()},s.prototype.iadd=function(A){var T,w,C;if(this.negative!==0&&A.negative===0)return this.negative=0,T=this.isub(A),this.negative^=1,this.L$();if(this.negative===0&&A.negative!==0)return A.negative=0,T=this.isub(A),A.negative=1,T.L$();this.length>A.length?(w=this,C=A):(w=A,C=this);for(var k=0,_=0;_<C.length;_++)T=(0|w.words[_])+(0|C.words[_])+k,this.words[_]=67108863&T,k=T>>>26;for(;k!==0&&_<w.length;_++)T=(0|w.words[_])+k,this.words[_]=67108863&T,k=T>>>26;if(this.length=w.length,k!==0)this.words[this.length]=k,this.length++;else if(w!==this)for(;_<w.length;_++)this.words[_]=w.words[_];return this},s.prototype.add=function(A){var T;return A.negative!==0&&this.negative===0?(A.negative=0,T=this.sub(A),A.negative^=1,T):A.negative===0&&this.negative!==0?(this.negative=0,T=A.sub(this),this.negative=1,T):this.length>A.length?this.clone().iadd(A):A.clone().iadd(this)},s.prototype.isub=function(A){if(A.negative!==0){A.negative=0;var T=this.iadd(A);return A.negative=1,T.L$()}if(this.negative!==0)return this.negative=0,this.iadd(A),this.negative=1,this.L$();var w,C,k=this.cmp(A);if(k===0)return this.negative=0,this.length=1,this.words[0]=0,this;k>0?(w=this,C=A):(w=A,C=this);for(var _=0,X=0;X<C.length;X++)_=(T=(0|w.words[X])-(0|C.words[X])+_)>>26,this.words[X]=67108863&T;for(;_!==0&&X<w.length;X++)_=(T=(0|w.words[X])+_)>>26,this.words[X]=67108863&T;if(_===0&&X<w.length&&w!==this)for(;X<w.length;X++)this.words[X]=w.words[X];return this.length=Math.max(this.length,X),w!==this&&(this.negative=1),this.I$()},s.prototype.sub=function(A){return this.clone().isub(A)};var p=function(A,T,w){var C,k,_,X=A.words,N=T.words,U=w.words,O=0,W=0|X[0],I=8191&W,H=W>>>13,q=0|X[1],Q=8191&q,J=q>>>13,ot=0|X[2],ht=8191&ot,ut=ot>>>13,dt=0|X[3],Tt=8191&dt,xt=dt>>>13,zt=0|X[4],Nt=8191&zt,jt=zt>>>13,ie=0|X[5],Ft=8191&ie,kt=ie>>>13,Oi=0|X[6],Ye=8191&Oi,Ee=Oi>>>13,Kr=0|X[7],Qe=8191&Kr,ai=Kr>>>13,dr=0|X[8],de=8191&dr,Ke=dr>>>13,vi=0|X[9],ge=8191&vi,Pe=vi>>>13,mi=0|N[0],He=8191&mi,Ie=mi>>>13,Ia=0|N[1],Ue=8191&Ia,Xe=Ia>>>13,Ot=0|N[2],ne=8191&Ot,Et=Ot>>>13,oe=0|N[3],wt=8191&oe,Gt=oe>>>13,he=0|N[4],fe=8191&he,Te=he>>>13,_n=0|N[5],si=8191&_n,we=_n>>>13,Nn=0|N[6],pi=8191&Nn,ri=Nn>>>13,Ut=0|N[7],It=8191&Ut,Qt=Ut>>>13,Fs=0|N[8],ni=8191&Fs,ye=Fs>>>13,Zi=0|N[9],Oe=8191&Zi,Ve=Zi>>>13;w.negative=A.negative^T.negative,w.length=19;var Gi=(O+(C=Math.imul(I,He))|0)+((8191&(k=(k=Math.imul(I,Ie))+Math.imul(H,He)|0))<<13)|0;O=((_=Math.imul(H,Ie))+(k>>>13)|0)+(Gi>>>26)|0,Gi&=67108863,C=Math.imul(Q,He),k=(k=Math.imul(Q,Ie))+Math.imul(J,He)|0,_=Math.imul(J,Ie);var zi=(O+(C=C+Math.imul(I,Ue)|0)|0)+((8191&(k=(k=k+Math.imul(I,Xe)|0)+Math.imul(H,Ue)|0))<<13)|0;O=((_=_+Math.imul(H,Xe)|0)+(k>>>13)|0)+(zi>>>26)|0,zi&=67108863,C=Math.imul(ht,He),k=(k=Math.imul(ht,Ie))+Math.imul(ut,He)|0,_=Math.imul(ut,Ie),C=C+Math.imul(Q,Ue)|0,k=(k=k+Math.imul(Q,Xe)|0)+Math.imul(J,Ue)|0,_=_+Math.imul(J,Xe)|0;var ns=(O+(C=C+Math.imul(I,ne)|0)|0)+((8191&(k=(k=k+Math.imul(I,Et)|0)+Math.imul(H,ne)|0))<<13)|0;O=((_=_+Math.imul(H,Et)|0)+(k>>>13)|0)+(ns>>>26)|0,ns&=67108863,C=Math.imul(Tt,He),k=(k=Math.imul(Tt,Ie))+Math.imul(xt,He)|0,_=Math.imul(xt,Ie),C=C+Math.imul(ht,Ue)|0,k=(k=k+Math.imul(ht,Xe)|0)+Math.imul(ut,Ue)|0,_=_+Math.imul(ut,Xe)|0,C=C+Math.imul(Q,ne)|0,k=(k=k+Math.imul(Q,Et)|0)+Math.imul(J,ne)|0,_=_+Math.imul(J,Et)|0;var Yi=(O+(C=C+Math.imul(I,wt)|0)|0)+((8191&(k=(k=k+Math.imul(I,Gt)|0)+Math.imul(H,wt)|0))<<13)|0;O=((_=_+Math.imul(H,Gt)|0)+(k>>>13)|0)+(Yi>>>26)|0,Yi&=67108863,C=Math.imul(Nt,He),k=(k=Math.imul(Nt,Ie))+Math.imul(jt,He)|0,_=Math.imul(jt,Ie),C=C+Math.imul(Tt,Ue)|0,k=(k=k+Math.imul(Tt,Xe)|0)+Math.imul(xt,Ue)|0,_=_+Math.imul(xt,Xe)|0,C=C+Math.imul(ht,ne)|0,k=(k=k+Math.imul(ht,Et)|0)+Math.imul(ut,ne)|0,_=_+Math.imul(ut,Et)|0,C=C+Math.imul(Q,wt)|0,k=(k=k+Math.imul(Q,Gt)|0)+Math.imul(J,wt)|0,_=_+Math.imul(J,Gt)|0;var bt=(O+(C=C+Math.imul(I,fe)|0)|0)+((8191&(k=(k=k+Math.imul(I,Te)|0)+Math.imul(H,fe)|0))<<13)|0;O=((_=_+Math.imul(H,Te)|0)+(k>>>13)|0)+(bt>>>26)|0,bt&=67108863,C=Math.imul(Ft,He),k=(k=Math.imul(Ft,Ie))+Math.imul(kt,He)|0,_=Math.imul(kt,Ie),C=C+Math.imul(Nt,Ue)|0,k=(k=k+Math.imul(Nt,Xe)|0)+Math.imul(jt,Ue)|0,_=_+Math.imul(jt,Xe)|0,C=C+Math.imul(Tt,ne)|0,k=(k=k+Math.imul(Tt,Et)|0)+Math.imul(xt,ne)|0,_=_+Math.imul(xt,Et)|0,C=C+Math.imul(ht,wt)|0,k=(k=k+Math.imul(ht,Gt)|0)+Math.imul(ut,wt)|0,_=_+Math.imul(ut,Gt)|0,C=C+Math.imul(Q,fe)|0,k=(k=k+Math.imul(Q,Te)|0)+Math.imul(J,fe)|0,_=_+Math.imul(J,Te)|0;var Xt=(O+(C=C+Math.imul(I,si)|0)|0)+((8191&(k=(k=k+Math.imul(I,we)|0)+Math.imul(H,si)|0))<<13)|0;O=((_=_+Math.imul(H,we)|0)+(k>>>13)|0)+(Xt>>>26)|0,Xt&=67108863,C=Math.imul(Ye,He),k=(k=Math.imul(Ye,Ie))+Math.imul(Ee,He)|0,_=Math.imul(Ee,Ie),C=C+Math.imul(Ft,Ue)|0,k=(k=k+Math.imul(Ft,Xe)|0)+Math.imul(kt,Ue)|0,_=_+Math.imul(kt,Xe)|0,C=C+Math.imul(Nt,ne)|0,k=(k=k+Math.imul(Nt,Et)|0)+Math.imul(jt,ne)|0,_=_+Math.imul(jt,Et)|0,C=C+Math.imul(Tt,wt)|0,k=(k=k+Math.imul(Tt,Gt)|0)+Math.imul(xt,wt)|0,_=_+Math.imul(xt,Gt)|0,C=C+Math.imul(ht,fe)|0,k=(k=k+Math.imul(ht,Te)|0)+Math.imul(ut,fe)|0,_=_+Math.imul(ut,Te)|0,C=C+Math.imul(Q,si)|0,k=(k=k+Math.imul(Q,we)|0)+Math.imul(J,si)|0,_=_+Math.imul(J,we)|0;var Zs=(O+(C=C+Math.imul(I,pi)|0)|0)+((8191&(k=(k=k+Math.imul(I,ri)|0)+Math.imul(H,pi)|0))<<13)|0;O=((_=_+Math.imul(H,ri)|0)+(k>>>13)|0)+(Zs>>>26)|0,Zs&=67108863,C=Math.imul(Qe,He),k=(k=Math.imul(Qe,Ie))+Math.imul(ai,He)|0,_=Math.imul(ai,Ie),C=C+Math.imul(Ye,Ue)|0,k=(k=k+Math.imul(Ye,Xe)|0)+Math.imul(Ee,Ue)|0,_=_+Math.imul(Ee,Xe)|0,C=C+Math.imul(Ft,ne)|0,k=(k=k+Math.imul(Ft,Et)|0)+Math.imul(kt,ne)|0,_=_+Math.imul(kt,Et)|0,C=C+Math.imul(Nt,wt)|0,k=(k=k+Math.imul(Nt,Gt)|0)+Math.imul(jt,wt)|0,_=_+Math.imul(jt,Gt)|0,C=C+Math.imul(Tt,fe)|0,k=(k=k+Math.imul(Tt,Te)|0)+Math.imul(xt,fe)|0,_=_+Math.imul(xt,Te)|0,C=C+Math.imul(ht,si)|0,k=(k=k+Math.imul(ht,we)|0)+Math.imul(ut,si)|0,_=_+Math.imul(ut,we)|0,C=C+Math.imul(Q,pi)|0,k=(k=k+Math.imul(Q,ri)|0)+Math.imul(J,pi)|0,_=_+Math.imul(J,ri)|0;var _i=(O+(C=C+Math.imul(I,It)|0)|0)+((8191&(k=(k=k+Math.imul(I,Qt)|0)+Math.imul(H,It)|0))<<13)|0;O=((_=_+Math.imul(H,Qt)|0)+(k>>>13)|0)+(_i>>>26)|0,_i&=67108863,C=Math.imul(de,He),k=(k=Math.imul(de,Ie))+Math.imul(Ke,He)|0,_=Math.imul(Ke,Ie),C=C+Math.imul(Qe,Ue)|0,k=(k=k+Math.imul(Qe,Xe)|0)+Math.imul(ai,Ue)|0,_=_+Math.imul(ai,Xe)|0,C=C+Math.imul(Ye,ne)|0,k=(k=k+Math.imul(Ye,Et)|0)+Math.imul(Ee,ne)|0,_=_+Math.imul(Ee,Et)|0,C=C+Math.imul(Ft,wt)|0,k=(k=k+Math.imul(Ft,Gt)|0)+Math.imul(kt,wt)|0,_=_+Math.imul(kt,Gt)|0,C=C+Math.imul(Nt,fe)|0,k=(k=k+Math.imul(Nt,Te)|0)+Math.imul(jt,fe)|0,_=_+Math.imul(jt,Te)|0,C=C+Math.imul(Tt,si)|0,k=(k=k+Math.imul(Tt,we)|0)+Math.imul(xt,si)|0,_=_+Math.imul(xt,we)|0,C=C+Math.imul(ht,pi)|0,k=(k=k+Math.imul(ht,ri)|0)+Math.imul(ut,pi)|0,_=_+Math.imul(ut,ri)|0,C=C+Math.imul(Q,It)|0,k=(k=k+Math.imul(Q,Qt)|0)+Math.imul(J,It)|0,_=_+Math.imul(J,Qt)|0;var Ni=(O+(C=C+Math.imul(I,ni)|0)|0)+((8191&(k=(k=k+Math.imul(I,ye)|0)+Math.imul(H,ni)|0))<<13)|0;O=((_=_+Math.imul(H,ye)|0)+(k>>>13)|0)+(Ni>>>26)|0,Ni&=67108863,C=Math.imul(ge,He),k=(k=Math.imul(ge,Ie))+Math.imul(Pe,He)|0,_=Math.imul(Pe,Ie),C=C+Math.imul(de,Ue)|0,k=(k=k+Math.imul(de,Xe)|0)+Math.imul(Ke,Ue)|0,_=_+Math.imul(Ke,Xe)|0,C=C+Math.imul(Qe,ne)|0,k=(k=k+Math.imul(Qe,Et)|0)+Math.imul(ai,ne)|0,_=_+Math.imul(ai,Et)|0,C=C+Math.imul(Ye,wt)|0,k=(k=k+Math.imul(Ye,Gt)|0)+Math.imul(Ee,wt)|0,_=_+Math.imul(Ee,Gt)|0,C=C+Math.imul(Ft,fe)|0,k=(k=k+Math.imul(Ft,Te)|0)+Math.imul(kt,fe)|0,_=_+Math.imul(kt,Te)|0,C=C+Math.imul(Nt,si)|0,k=(k=k+Math.imul(Nt,we)|0)+Math.imul(jt,si)|0,_=_+Math.imul(jt,we)|0,C=C+Math.imul(Tt,pi)|0,k=(k=k+Math.imul(Tt,ri)|0)+Math.imul(xt,pi)|0,_=_+Math.imul(xt,ri)|0,C=C+Math.imul(ht,It)|0,k=(k=k+Math.imul(ht,Qt)|0)+Math.imul(ut,It)|0,_=_+Math.imul(ut,Qt)|0,C=C+Math.imul(Q,ni)|0,k=(k=k+Math.imul(Q,ye)|0)+Math.imul(J,ni)|0,_=_+Math.imul(J,ye)|0;var Li=(O+(C=C+Math.imul(I,Oe)|0)|0)+((8191&(k=(k=k+Math.imul(I,Ve)|0)+Math.imul(H,Oe)|0))<<13)|0;O=((_=_+Math.imul(H,Ve)|0)+(k>>>13)|0)+(Li>>>26)|0,Li&=67108863,C=Math.imul(ge,Ue),k=(k=Math.imul(ge,Xe))+Math.imul(Pe,Ue)|0,_=Math.imul(Pe,Xe),C=C+Math.imul(de,ne)|0,k=(k=k+Math.imul(de,Et)|0)+Math.imul(Ke,ne)|0,_=_+Math.imul(Ke,Et)|0,C=C+Math.imul(Qe,wt)|0,k=(k=k+Math.imul(Qe,Gt)|0)+Math.imul(ai,wt)|0,_=_+Math.imul(ai,Gt)|0,C=C+Math.imul(Ye,fe)|0,k=(k=k+Math.imul(Ye,Te)|0)+Math.imul(Ee,fe)|0,_=_+Math.imul(Ee,Te)|0,C=C+Math.imul(Ft,si)|0,k=(k=k+Math.imul(Ft,we)|0)+Math.imul(kt,si)|0,_=_+Math.imul(kt,we)|0,C=C+Math.imul(Nt,pi)|0,k=(k=k+Math.imul(Nt,ri)|0)+Math.imul(jt,pi)|0,_=_+Math.imul(jt,ri)|0,C=C+Math.imul(Tt,It)|0,k=(k=k+Math.imul(Tt,Qt)|0)+Math.imul(xt,It)|0,_=_+Math.imul(xt,Qt)|0,C=C+Math.imul(ht,ni)|0,k=(k=k+Math.imul(ht,ye)|0)+Math.imul(ut,ni)|0,_=_+Math.imul(ut,ye)|0;var Qi=(O+(C=C+Math.imul(Q,Oe)|0)|0)+((8191&(k=(k=k+Math.imul(Q,Ve)|0)+Math.imul(J,Oe)|0))<<13)|0;O=((_=_+Math.imul(J,Ve)|0)+(k>>>13)|0)+(Qi>>>26)|0,Qi&=67108863,C=Math.imul(ge,ne),k=(k=Math.imul(ge,Et))+Math.imul(Pe,ne)|0,_=Math.imul(Pe,Et),C=C+Math.imul(de,wt)|0,k=(k=k+Math.imul(de,Gt)|0)+Math.imul(Ke,wt)|0,_=_+Math.imul(Ke,Gt)|0,C=C+Math.imul(Qe,fe)|0,k=(k=k+Math.imul(Qe,Te)|0)+Math.imul(ai,fe)|0,_=_+Math.imul(ai,Te)|0,C=C+Math.imul(Ye,si)|0,k=(k=k+Math.imul(Ye,we)|0)+Math.imul(Ee,si)|0,_=_+Math.imul(Ee,we)|0,C=C+Math.imul(Ft,pi)|0,k=(k=k+Math.imul(Ft,ri)|0)+Math.imul(kt,pi)|0,_=_+Math.imul(kt,ri)|0,C=C+Math.imul(Nt,It)|0,k=(k=k+Math.imul(Nt,Qt)|0)+Math.imul(jt,It)|0,_=_+Math.imul(jt,Qt)|0,C=C+Math.imul(Tt,ni)|0,k=(k=k+Math.imul(Tt,ye)|0)+Math.imul(xt,ni)|0,_=_+Math.imul(xt,ye)|0;var zr=(O+(C=C+Math.imul(ht,Oe)|0)|0)+((8191&(k=(k=k+Math.imul(ht,Ve)|0)+Math.imul(ut,Oe)|0))<<13)|0;O=((_=_+Math.imul(ut,Ve)|0)+(k>>>13)|0)+(zr>>>26)|0,zr&=67108863,C=Math.imul(ge,wt),k=(k=Math.imul(ge,Gt))+Math.imul(Pe,wt)|0,_=Math.imul(Pe,Gt),C=C+Math.imul(de,fe)|0,k=(k=k+Math.imul(de,Te)|0)+Math.imul(Ke,fe)|0,_=_+Math.imul(Ke,Te)|0,C=C+Math.imul(Qe,si)|0,k=(k=k+Math.imul(Qe,we)|0)+Math.imul(ai,si)|0,_=_+Math.imul(ai,we)|0,C=C+Math.imul(Ye,pi)|0,k=(k=k+Math.imul(Ye,ri)|0)+Math.imul(Ee,pi)|0,_=_+Math.imul(Ee,ri)|0,C=C+Math.imul(Ft,It)|0,k=(k=k+Math.imul(Ft,Qt)|0)+Math.imul(kt,It)|0,_=_+Math.imul(kt,Qt)|0,C=C+Math.imul(Nt,ni)|0,k=(k=k+Math.imul(Nt,ye)|0)+Math.imul(jt,ni)|0,_=_+Math.imul(jt,ye)|0;var _r=(O+(C=C+Math.imul(Tt,Oe)|0)|0)+((8191&(k=(k=k+Math.imul(Tt,Ve)|0)+Math.imul(xt,Oe)|0))<<13)|0;O=((_=_+Math.imul(xt,Ve)|0)+(k>>>13)|0)+(_r>>>26)|0,_r&=67108863,C=Math.imul(ge,fe),k=(k=Math.imul(ge,Te))+Math.imul(Pe,fe)|0,_=Math.imul(Pe,Te),C=C+Math.imul(de,si)|0,k=(k=k+Math.imul(de,we)|0)+Math.imul(Ke,si)|0,_=_+Math.imul(Ke,we)|0,C=C+Math.imul(Qe,pi)|0,k=(k=k+Math.imul(Qe,ri)|0)+Math.imul(ai,pi)|0,_=_+Math.imul(ai,ri)|0,C=C+Math.imul(Ye,It)|0,k=(k=k+Math.imul(Ye,Qt)|0)+Math.imul(Ee,It)|0,_=_+Math.imul(Ee,Qt)|0,C=C+Math.imul(Ft,ni)|0,k=(k=k+Math.imul(Ft,ye)|0)+Math.imul(kt,ni)|0,_=_+Math.imul(kt,ye)|0;var Ua=(O+(C=C+Math.imul(Nt,Oe)|0)|0)+((8191&(k=(k=k+Math.imul(Nt,Ve)|0)+Math.imul(jt,Oe)|0))<<13)|0;O=((_=_+Math.imul(jt,Ve)|0)+(k>>>13)|0)+(Ua>>>26)|0,Ua&=67108863,C=Math.imul(ge,si),k=(k=Math.imul(ge,we))+Math.imul(Pe,si)|0,_=Math.imul(Pe,we),C=C+Math.imul(de,pi)|0,k=(k=k+Math.imul(de,ri)|0)+Math.imul(Ke,pi)|0,_=_+Math.imul(Ke,ri)|0,C=C+Math.imul(Qe,It)|0,k=(k=k+Math.imul(Qe,Qt)|0)+Math.imul(ai,It)|0,_=_+Math.imul(ai,Qt)|0,C=C+Math.imul(Ye,ni)|0,k=(k=k+Math.imul(Ye,ye)|0)+Math.imul(Ee,ni)|0,_=_+Math.imul(Ee,ye)|0;var tn=(O+(C=C+Math.imul(Ft,Oe)|0)|0)+((8191&(k=(k=k+Math.imul(Ft,Ve)|0)+Math.imul(kt,Oe)|0))<<13)|0;O=((_=_+Math.imul(kt,Ve)|0)+(k>>>13)|0)+(tn>>>26)|0,tn&=67108863,C=Math.imul(ge,pi),k=(k=Math.imul(ge,ri))+Math.imul(Pe,pi)|0,_=Math.imul(Pe,ri),C=C+Math.imul(de,It)|0,k=(k=k+Math.imul(de,Qt)|0)+Math.imul(Ke,It)|0,_=_+Math.imul(Ke,Qt)|0,C=C+Math.imul(Qe,ni)|0,k=(k=k+Math.imul(Qe,ye)|0)+Math.imul(ai,ni)|0,_=_+Math.imul(ai,ye)|0;var en=(O+(C=C+Math.imul(Ye,Oe)|0)|0)+((8191&(k=(k=k+Math.imul(Ye,Ve)|0)+Math.imul(Ee,Oe)|0))<<13)|0;O=((_=_+Math.imul(Ee,Ve)|0)+(k>>>13)|0)+(en>>>26)|0,en&=67108863,C=Math.imul(ge,It),k=(k=Math.imul(ge,Qt))+Math.imul(Pe,It)|0,_=Math.imul(Pe,Qt),C=C+Math.imul(de,ni)|0,k=(k=k+Math.imul(de,ye)|0)+Math.imul(Ke,ni)|0,_=_+Math.imul(Ke,ye)|0;var ve=(O+(C=C+Math.imul(Qe,Oe)|0)|0)+((8191&(k=(k=k+Math.imul(Qe,Ve)|0)+Math.imul(ai,Oe)|0))<<13)|0;O=((_=_+Math.imul(ai,Ve)|0)+(k>>>13)|0)+(ve>>>26)|0,ve&=67108863,C=Math.imul(ge,ni),k=(k=Math.imul(ge,ye))+Math.imul(Pe,ni)|0,_=Math.imul(Pe,ye);var Vs=(O+(C=C+Math.imul(de,Oe)|0)|0)+((8191&(k=(k=k+Math.imul(de,Ve)|0)+Math.imul(Ke,Oe)|0))<<13)|0;O=((_=_+Math.imul(Ke,Ve)|0)+(k>>>13)|0)+(Vs>>>26)|0,Vs&=67108863;var oa=(O+(C=Math.imul(ge,Oe))|0)+((8191&(k=(k=Math.imul(ge,Ve))+Math.imul(Pe,Oe)|0))<<13)|0;return O=((_=Math.imul(Pe,Ve))+(k>>>13)|0)+(oa>>>26)|0,oa&=67108863,U[0]=Gi,U[1]=zi,U[2]=ns,U[3]=Yi,U[4]=bt,U[5]=Xt,U[6]=Zs,U[7]=_i,U[8]=Ni,U[9]=Li,U[10]=Qi,U[11]=zr,U[12]=_r,U[13]=Ua,U[14]=tn,U[15]=en,U[16]=ve,U[17]=Vs,U[18]=oa,O!==0&&(U[19]=O,w.length++),w};function x(A,T,w){w.negative=T.negative^A.negative,w.length=A.length+T.length;for(var C=0,k=0,_=0;_<w.length-1;_++){var X=k;k=0;for(var N=67108863&C,U=Math.min(_,T.length-1),O=Math.max(0,_-A.length+1);O<=U;O++){var W=_-O,I=(0|A.words[W])*(0|T.words[O]),H=67108863&I;N=67108863&(H=H+N|0),k+=(X=(X=X+(I/67108864|0)|0)+(H>>>26)|0)>>>26,X&=67108863}w.words[_]=N,C=X,X=k}return C!==0?w.words[_]=C:w.length--,w.I$()}function b(A,T,w){return x(A,T,w)}Math.imul||(p=m),s.prototype.mulTo=function(A,T){var w=this.length+A.length;return this.length===10&&A.length===10?p(this,A,T):w<63?m(this,A,T):w<1024?x(this,A,T):b(this,A,T)},s.prototype.mul=function(A){var T=new s(null);return T.words=new Array(this.length+A.length),this.mulTo(A,T)},s.prototype.mulf=function(A){var T=new s(null);return T.words=new Array(this.length+A.length),b(this,A,T)},s.prototype.imul=function(A){return this.clone().mulTo(A,this)},s.prototype.imuln=function(A){var T=A<0;T&&(A=-A),e(typeof A=="number"),e(A<67108864);for(var w=0,C=0;C<this.length;C++){var k=(0|this.words[C])*A,_=(67108863&k)+(67108863&w);w>>=26,w+=k/67108864|0,w+=_>>>26,this.words[C]=67108863&_}return w!==0&&(this.words[C]=w,this.length++),T?this.ineg():this},s.prototype.muln=function(A){return this.clone().imuln(A)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(A){var T=function(_){for(var X=new Array(_.bitLength()),N=0;N<X.length;N++){var U=N/26|0,O=N%26;X[N]=_.words[U]>>>O&1}return X}(A);if(T.length===0)return new s(1);for(var w=this,C=0;C<T.length&&T[C]===0;C++,w=w.sqr());if(++C<T.length)for(var k=w.sqr();C<T.length;C++,k=k.sqr())T[C]!==0&&(w=w.mul(k));return w},s.prototype.iushln=function(A){e(typeof A=="number"&&A>=0);var T,w=A%26,C=(A-w)/26,k=67108863>>>26-w<<26-w;if(w!==0){var _=0;for(T=0;T<this.length;T++){var X=this.words[T]&k,N=(0|this.words[T])-X<<w;this.words[T]=N|_,_=X>>>26-w}_&&(this.words[T]=_,this.length++)}if(C!==0){for(T=this.length-1;T>=0;T--)this.words[T+C]=this.words[T];for(T=0;T<C;T++)this.words[T]=0;this.length+=C}return this.I$()},s.prototype.ishln=function(A){return e(this.negative===0),this.iushln(A)},s.prototype.iushrn=function(A,T,w){var C;e(typeof A=="number"&&A>=0),C=T?(T-T%26)/26:0;var k=A%26,_=Math.min((A-k)/26,this.length),X=67108863^67108863>>>k<<k,N=w;if(C-=_,C=Math.max(0,C),N){for(var U=0;U<_;U++)N.words[U]=this.words[U];N.length=_}if(_!==0)if(this.length>_)for(this.length-=_,U=0;U<this.length;U++)this.words[U]=this.words[U+_];else this.words[0]=0,this.length=1;var O=0;for(U=this.length-1;U>=0&&(O!==0||U>=C);U--){var W=0|this.words[U];this.words[U]=O<<26-k|W>>>k,O=W&X}return N&&O!==0&&(N.words[N.length++]=O),this.length===0&&(this.words[0]=0,this.length=1),this.I$()},s.prototype.ishrn=function(A,T,w){return e(this.negative===0),this.iushrn(A,T,w)},s.prototype.shln=function(A){return this.clone().ishln(A)},s.prototype.ushln=function(A){return this.clone().iushln(A)},s.prototype.shrn=function(A){return this.clone().ishrn(A)},s.prototype.ushrn=function(A){return this.clone().iushrn(A)},s.prototype.testn=function(A){e(typeof A=="number"&&A>=0);var T=A%26,w=(A-T)/26,C=1<<T;return!(this.length<=w||!(this.words[w]&C))},s.prototype.imaskn=function(A){e(typeof A=="number"&&A>=0);var T=A%26,w=(A-T)/26;if(e(this.negative===0,"imaskn works only with positive numbers"),this.length<=w)return this;if(T!==0&&w++,this.length=Math.min(w,this.length),T!==0){var C=67108863^67108863>>>T<<T;this.words[this.length-1]&=C}return this.I$()},s.prototype.maskn=function(A){return this.clone().imaskn(A)},s.prototype.iaddn=function(A){return e(typeof A=="number"),e(A<67108864),A<0?this.isubn(-A):this.negative!==0?this.length===1&&(0|this.words[0])<=A?(this.words[0]=A-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(A),this.negative=1,this):this.P$(A)},s.prototype.P$=function(A){this.words[0]+=A;for(var T=0;T<this.length&&this.words[T]>=67108864;T++)this.words[T]-=67108864,T===this.length-1?this.words[T+1]=1:this.words[T+1]++;return this.length=Math.max(this.length,T+1),this},s.prototype.isubn=function(A){if(e(typeof A=="number"),e(A<67108864),A<0)return this.iaddn(-A);if(this.negative!==0)return this.negative=0,this.iaddn(A),this.negative=1,this;if(this.words[0]-=A,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var T=0;T<this.length&&this.words[T]<0;T++)this.words[T]+=67108864,this.words[T+1]-=1;return this.I$()},s.prototype.addn=function(A){return this.clone().iaddn(A)},s.prototype.subn=function(A){return this.clone().isubn(A)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype.O$=function(A,T,w){var C,k,_=A.length+w;this.B$(_);var X=0;for(C=0;C<A.length;C++){k=(0|this.words[C+w])+X;var N=(0|A.words[C])*T;X=((k-=67108863&N)>>26)-(N/67108864|0),this.words[C+w]=67108863&k}for(;C<this.length-w;C++)X=(k=(0|this.words[C+w])+X)>>26,this.words[C+w]=67108863&k;if(X===0)return this.I$();for(e(X===-1),X=0,C=0;C<this.length;C++)X=(k=-(0|this.words[C])+X)>>26,this.words[C]=67108863&k;return this.negative=1,this.I$()},s.prototype.N$=function(A,T){var w=(this.length,A.length),C=this.clone(),k=A,_=0|k.words[k.length-1];(w=26-this.z$(_))!=0&&(k=k.ushln(w),C.iushln(w),_=0|k.words[k.length-1]);var X,N=C.length-k.length;if(T!=="mod"){(X=new s(null)).length=N+1,X.words=new Array(X.length);for(var U=0;U<X.length;U++)X.words[U]=0}var O=C.clone().O$(k,1,N);O.negative===0&&(C=O,X&&(X.words[N]=1));for(var W=N-1;W>=0;W--){var I=67108864*(0|C.words[k.length+W])+(0|C.words[k.length+W-1]);for(I=Math.min(I/_|0,67108863),C.O$(k,I,W);C.negative!==0;)I--,C.negative=0,C.O$(k,1,W),C.isZero()||(C.negative^=1);X&&(X.words[W]=I)}return X&&X.I$(),C.I$(),T!=="div"&&w!==0&&C.iushrn(w),{div:X||null,mod:C}},s.prototype.divmod=function(A,T,w){return e(!A.isZero()),this.isZero()?{div:new s(0),mod:new s(0)}:this.negative!==0&&A.negative===0?(_=this.neg().divmod(A,T),T!=="mod"&&(C=_.div.neg()),T!=="div"&&(k=_.mod.neg(),w&&k.negative!==0&&k.iadd(A)),{div:C,mod:k}):this.negative===0&&A.negative!==0?(_=this.divmod(A.neg(),T),T!=="mod"&&(C=_.div.neg()),{div:C,mod:_.mod}):(this.negative&A.negative)!=0?(_=this.neg().divmod(A.neg(),T),T!=="div"&&(k=_.mod.neg(),w&&k.negative!==0&&k.isub(A)),{div:_.div,mod:k}):A.length>this.length||this.cmp(A)<0?{div:new s(0),mod:this}:A.length===1?T==="div"?{div:this.divn(A.words[0]),mod:null}:T==="mod"?{div:null,mod:new s(this.modrn(A.words[0]))}:{div:this.divn(A.words[0]),mod:new s(this.modrn(A.words[0]))}:this.N$(A,T);var C,k,_},s.prototype.div=function(A){return this.divmod(A,"div",!1).div},s.prototype.mod=function(A){return this.divmod(A,"mod",!1).mod},s.prototype.umod=function(A){return this.divmod(A,"mod",!0).mod},s.prototype.divRound=function(A){var T=this.divmod(A);if(T.mod.isZero())return T.div;var w=T.div.negative!==0?T.mod.isub(A):T.mod,C=A.ushrn(1),k=A.andln(1),_=w.cmp(C);return _<0||k===1&&_===0?T.div:T.div.negative!==0?T.div.isubn(1):T.div.iaddn(1)},s.prototype.modrn=function(A){var T=A<0;T&&(A=-A),e(A<=67108863);for(var w=(1<<26)%A,C=0,k=this.length-1;k>=0;k--)C=(w*C+(0|this.words[k]))%A;return T?-C:C},s.prototype.modn=function(A){return this.modrn(A)},s.prototype.idivn=function(A){var T=A<0;T&&(A=-A),e(A<=67108863);for(var w=0,C=this.length-1;C>=0;C--){var k=(0|this.words[C])+67108864*w;this.words[C]=k/A|0,w=k%A}return this.I$(),T?this.ineg():this},s.prototype.divn=function(A){return this.clone().idivn(A)},s.prototype.egcd=function(A){e(A.negative===0),e(!A.isZero());var T=this,w=A.clone();T=T.negative!==0?T.umod(A):T.clone();for(var C=new s(1),k=new s(0),_=new s(0),X=new s(1),N=0;T.isEven()&&w.isEven();)T.iushrn(1),w.iushrn(1),++N;for(var U=w.clone(),O=T.clone();!T.isZero();){for(var W=0,I=1;(T.words[0]&I)==0&&W<26;++W,I<<=1);if(W>0)for(T.iushrn(W);W-- >0;)(C.isOdd()||k.isOdd())&&(C.iadd(U),k.isub(O)),C.iushrn(1),k.iushrn(1);for(var H=0,q=1;(w.words[0]&q)==0&&H<26;++H,q<<=1);if(H>0)for(w.iushrn(H);H-- >0;)(_.isOdd()||X.isOdd())&&(_.iadd(U),X.isub(O)),_.iushrn(1),X.iushrn(1);T.cmp(w)>=0?(T.isub(w),C.isub(_),k.isub(X)):(w.isub(T),_.isub(C),X.isub(k))}return{a:_,b:X,gcd:w.iushln(N)}},s.prototype.G$=function(A){e(A.negative===0),e(!A.isZero());var T=this,w=A.clone();T=T.negative!==0?T.umod(A):T.clone();for(var C,k=new s(1),_=new s(0),X=w.clone();T.cmpn(1)>0&&w.cmpn(1)>0;){for(var N=0,U=1;(T.words[0]&U)==0&&N<26;++N,U<<=1);if(N>0)for(T.iushrn(N);N-- >0;)k.isOdd()&&k.iadd(X),k.iushrn(1);for(var O=0,W=1;(w.words[0]&W)==0&&O<26;++O,W<<=1);if(O>0)for(w.iushrn(O);O-- >0;)_.isOdd()&&_.iadd(X),_.iushrn(1);T.cmp(w)>=0?(T.isub(w),k.isub(_)):(w.isub(T),_.isub(k))}return(C=T.cmpn(1)===0?k:_).cmpn(0)<0&&C.iadd(A),C},s.prototype.gcd=function(A){if(this.isZero())return A.abs();if(A.isZero())return this.abs();var T=this.clone(),w=A.clone();T.negative=0,w.negative=0;for(var C=0;T.isEven()&&w.isEven();C++)T.iushrn(1),w.iushrn(1);for(;;){for(;T.isEven();)T.iushrn(1);for(;w.isEven();)w.iushrn(1);var k=T.cmp(w);if(k<0){var _=T;T=w,w=_}else if(k===0||w.cmpn(1)===0)break;T.isub(w)}return w.iushln(C)},s.prototype.invm=function(A){return this.egcd(A).a.umod(A)},s.prototype.isEven=function(){return(1&this.words[0])==0},s.prototype.isOdd=function(){return(1&this.words[0])==1},s.prototype.andln=function(A){return this.words[0]&A},s.prototype.bincn=function(A){e(typeof A=="number");var T=A%26,w=(A-T)/26,C=1<<T;if(this.length<=w)return this.B$(w+1),this.words[w]|=C,this;for(var k=C,_=w;k!==0&&_<this.length;_++){var X=0|this.words[_];k=(X+=k)>>>26,X&=67108863,this.words[_]=X}return k!==0&&(this.words[_]=k,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(A){var T,w=A<0;if(this.negative!==0&&!w)return-1;if(this.negative===0&&w)return 1;if(this.I$(),this.length>1)T=1;else{w&&(A=-A),e(A<=67108863,"Number is too big");var C=0|this.words[0];T=C===A?0:C<A?-1:1}return this.negative!==0?0|-T:T},s.prototype.cmp=function(A){if(this.negative!==0&&A.negative===0)return-1;if(this.negative===0&&A.negative!==0)return 1;var T=this.ucmp(A);return this.negative!==0?0|-T:T},s.prototype.ucmp=function(A){if(this.length>A.length)return 1;if(this.length<A.length)return-1;for(var T=0,w=this.length-1;w>=0;w--){var C=0|this.words[w],k=0|A.words[w];if(C!==k){C<k?T=-1:C>k&&(T=1);break}}return T},s.prototype.gtn=function(A){return this.cmpn(A)===1},s.prototype.gt=function(A){return this.cmp(A)===1},s.prototype.gten=function(A){return this.cmpn(A)>=0},s.prototype.gte=function(A){return this.cmp(A)>=0},s.prototype.ltn=function(A){return this.cmpn(A)===-1},s.prototype.lt=function(A){return this.cmp(A)===-1},s.prototype.lten=function(A){return this.cmpn(A)<=0},s.prototype.lte=function(A){return this.cmp(A)<=0},s.prototype.eqn=function(A){return this.cmpn(A)===0},s.prototype.eq=function(A){return this.cmp(A)===0},s.red=function(A){return new z(A)},s.prototype.toRed=function(A){return e(!this.red,"Already a number in reduction context"),e(this.negative===0,"red works only with positives"),A.convertTo(this).W$(A)},s.prototype.fromRed=function(){return e(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype.W$=function(A){return this.red=A,this},s.prototype.forceRed=function(A){return e(!this.red,"Already a number in reduction context"),this.W$(A)},s.prototype.redAdd=function(A){return e(this.red,"redAdd works only with red numbers"),this.red.add(this,A)},s.prototype.redIAdd=function(A){return e(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,A)},s.prototype.redSub=function(A){return e(this.red,"redSub works only with red numbers"),this.red.sub(this,A)},s.prototype.redISub=function(A){return e(this.red,"redISub works only with red numbers"),this.red.isub(this,A)},s.prototype.redShl=function(A){return e(this.red,"redShl works only with red numbers"),this.red.shl(this,A)},s.prototype.redMul=function(A){return e(this.red,"redMul works only with red numbers"),this.red.U$(this,A),this.red.mul(this,A)},s.prototype.redIMul=function(A){return e(this.red,"redMul works only with red numbers"),this.red.U$(this,A),this.red.imul(this,A)},s.prototype.redSqr=function(){return e(this.red,"redSqr works only with red numbers"),this.red.Y$(this),this.red.sqr(this)},s.prototype.redISqr=function(){return e(this.red,"redISqr works only with red numbers"),this.red.Y$(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return e(this.red,"redSqrt works only with red numbers"),this.red.Y$(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return e(this.red,"redInvm works only with red numbers"),this.red.Y$(this),this.red.invm(this)},s.prototype.redNeg=function(){return e(this.red,"redNeg works only with red numbers"),this.red.Y$(this),this.red.neg(this)},s.prototype.redPow=function(A){return e(this.red&&!A.red,"redPow(normalNum)"),this.red.Y$(this),this.red.pow(this,A)};var v={k256:null,p224:null,p192:null,p25519:null};function R(A,T){this.name=A,this.p=new s(T,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this.H$()}function E(){R.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function V(){R.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function F(){R.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function L(){R.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function z(A){if(typeof A=="string"){var T=s.$$(A);this.m=T.p,this.prime=T}else e(A.gtn(1),"modulus must be greater than 1"),this.m=A,this.prime=null}function B(A){z.call(this,A),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r.G$(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}R.prototype.H$=function(){var A=new s(null);return A.words=new Array(Math.ceil(this.n/13)),A},R.prototype.ireduce=function(A){var T,w=A;do this.split(w,this.tmp),T=(w=(w=this.imulK(w)).iadd(this.tmp)).bitLength();while(T>this.n);var C=T<this.n?-1:w.ucmp(this.p);return C===0?(w.words[0]=0,w.length=1):C>0?w.isub(this.p):w.strip!==void 0?w.strip():w.I$(),w},R.prototype.split=function(A,T){A.iushrn(this.n,0,T)},R.prototype.imulK=function(A){return A.imul(this.k)},i(E,R),E.prototype.split=function(A,T){for(var w=4194303,C=Math.min(A.length,9),k=0;k<C;k++)T.words[k]=A.words[k];if(T.length=C,A.length<=9)return A.words[0]=0,void(A.length=1);var _=A.words[9];for(T.words[T.length++]=_&w,k=10;k<A.length;k++){var X=0|A.words[k];A.words[k-10]=(X&w)<<4|_>>>22,_=X}_>>>=22,A.words[k-10]=_,_===0&&A.length>10?A.length-=10:A.length-=9},E.prototype.imulK=function(A){A.words[A.length]=0,A.words[A.length+1]=0,A.length+=2;for(var T=0,w=0;w<A.length;w++){var C=0|A.words[w];T+=977*C,A.words[w]=67108863&T,T=64*C+(T/67108864|0)}return A.words[A.length-1]===0&&(A.length--,A.words[A.length-1]===0&&A.length--),A},i(V,R),i(F,R),i(L,R),L.prototype.imulK=function(A){for(var T=0,w=0;w<A.length;w++){var C=19*(0|A.words[w])+T,k=67108863&C;C>>>=26,A.words[w]=k,T=C}return T!==0&&(A.words[A.length++]=T),A},s.$$=function(A){if(v[A])return v[A];var T;if(A==="k256")T=new E;else if(A==="p224")T=new V;else if(A==="p192")T=new F;else{if(A!=="p25519")throw new Error("Unknown prime "+A);T=new L}return v[A]=T,T},z.prototype.Y$=function(A){e(A.negative===0,"red works only with positives"),e(A.red,"red works only with red numbers")},z.prototype.U$=function(A,T){e((A.negative|T.negative)==0,"red works only with positives"),e(A.red&&A.red===T.red,"red works only with red numbers")},z.prototype.imod=function(A){return this.prime?this.prime.ireduce(A).W$(this):(l(A,A.umod(this.m).W$(this)),A)},z.prototype.neg=function(A){return A.isZero()?A.clone():this.m.sub(A).W$(this)},z.prototype.add=function(A,T){this.U$(A,T);var w=A.add(T);return w.cmp(this.m)>=0&&w.isub(this.m),w.W$(this)},z.prototype.iadd=function(A,T){this.U$(A,T);var w=A.iadd(T);return w.cmp(this.m)>=0&&w.isub(this.m),w},z.prototype.sub=function(A,T){this.U$(A,T);var w=A.sub(T);return w.cmpn(0)<0&&w.iadd(this.m),w.W$(this)},z.prototype.isub=function(A,T){this.U$(A,T);var w=A.isub(T);return w.cmpn(0)<0&&w.iadd(this.m),w},z.prototype.shl=function(A,T){return this.Y$(A),this.imod(A.ushln(T))},z.prototype.imul=function(A,T){return this.U$(A,T),this.imod(A.imul(T))},z.prototype.mul=function(A,T){return this.U$(A,T),this.imod(A.mul(T))},z.prototype.isqr=function(A){return this.imul(A,A.clone())},z.prototype.sqr=function(A){return this.mul(A,A)},z.prototype.sqrt=function(A){if(A.isZero())return A.clone();var T=this.m.andln(3);if(e(T%2==1),T===3){var w=this.m.add(new s(1)).iushrn(2);return this.pow(A,w)}for(var C=this.m.subn(1),k=0;!C.isZero()&&C.andln(1)===0;)k++,C.iushrn(1);e(!C.isZero());var _=new s(1).toRed(this),X=_.redNeg(),N=this.m.subn(1).iushrn(1),U=this.m.bitLength();for(U=new s(2*U*U).toRed(this);this.pow(U,N).cmp(X)!==0;)U.redIAdd(X);for(var O=this.pow(U,C),W=this.pow(A,C.addn(1).iushrn(1)),I=this.pow(A,C),H=k;I.cmp(_)!==0;){for(var q=I,Q=0;q.cmp(_)!==0;Q++)q=q.redSqr();e(Q<H);var J=this.pow(O,new s(1).iushln(H-Q-1));W=W.redMul(J),O=J.redSqr(),I=I.redMul(O),H=Q}return W},z.prototype.invm=function(A){var T=A.G$(this.m);return T.negative!==0?(T.negative=0,this.imod(T).redNeg()):this.imod(T)},z.prototype.pow=function(A,T){if(T.isZero())return new s(1).toRed(this);if(T.cmpn(1)===0)return A.clone();var w=new Array(16);w[0]=new s(1).toRed(this),w[1]=A;for(var C=2;C<w.length;C++)w[C]=this.mul(w[C-1],A);var k=w[0],_=0,X=0,N=T.bitLength()%26;for(N===0&&(N=26),C=T.length-1;C>=0;C--){for(var U=T.words[C],O=N-1;O>=0;O--){var W=U>>O&1;k!==w[0]&&(k=this.sqr(k)),W!==0||_!==0?(_<<=1,_|=W,(++X==4||C===0&&O===0)&&(k=this.mul(k,w[_]),X=0,_=0)):X=0}N=26}return k},z.prototype.convertTo=function(A){var T=A.umod(this.m);return T===A?T.clone():T},z.prototype.convertFrom=function(A){var T=A.clone();return T.red=null,T},s.mont=function(A){return new B(A)},i(B,z),B.prototype.convertTo=function(A){return this.imod(A.ushln(this.shift))},B.prototype.convertFrom=function(A){var T=this.imod(A.mul(this.rinv));return T.red=null,T},B.prototype.imul=function(A,T){if(A.isZero()||T.isZero())return A.words[0]=0,A.length=1,A;var w=A.imul(T),C=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),k=w.isub(C).iushrn(this.shift),_=k;return k.cmp(this.m)>=0?_=k.isub(this.m):k.cmpn(0)<0&&(_=k.iadd(this.m)),_.W$(this)},B.prototype.mul=function(A,T){if(A.isZero()||T.isZero())return new s(0).W$(this);var w=A.mul(T),C=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),k=w.isub(C).iushrn(this.shift),_=k;return k.cmp(this.m)>=0?_=k.isub(this.m):k.cmpn(0)<0&&(_=k.iadd(this.m)),_.W$(this)},B.prototype.invm=function(A){return this.imod(A.G$(this.m).mul(this.r2)).W$(this)}})(0,Wf);var Be=mp.exports;function yT(r,t){if(Array.isArray(r))return r.slice();if(!r)return[];const e=[];if(typeof r!="string"){for(let i=0;i<r.length;i++)e[i]=0|r[i];return e}if(t==="hex"){(r=r.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(r=`0${r}`);for(let i=0;i<r.length;i+=2)e.push(parseInt(r[i]+r[i+1],16))}else for(let i=0;i<r.length;i++){const s=r.charCodeAt(i),n=s>>8,a=255&s;n?e.push(n,a):e.push(a)}return e}const Uf=function(r,t,e){const i=new Array(Math.max(r.bitLength(),e)+1);i.fill(0);const s=1<<t+1,n=r.clone();for(let a=0;a<i.length;a++){let o;const l=n.andln(s-1);n.isOdd()?(o=l>(s>>1)-1?(s>>1)-l:l,n.isubn(o)):o=0,i[a]=o,n.iushrn(1)}return i},_6=function(r,t){const e=[[],[]];r=r.clone(),t=t.clone();let i=0,s=0;for(;r.cmpn(-i)>0||t.cmpn(-s)>0;){let n,a,o=r.andln(3)+i&3,l=t.andln(3)+s&3;if(o===3&&(o=-1),l===3&&(l=-1),(1&o)==0)n=0;else{const u=r.andln(7)+i&7;n=u!==3&&u!==5||l!==2?o:-o}if(e[0].push(n),(1&l)==0)a=0;else{const u=t.andln(7)+s&7;a=u!==3&&u!==5||o!==2?l:-l}e[1].push(a),2*i===n+1&&(i=1-i),2*s===a+1&&(s=1-s),r.iushrn(1),t.iushrn(1)}return e};class N6{constructor(t,e){this.type=t,this.p=new Be(e.p,16),this.red=e.prime?Be.red(e.prime):Be.mont(this.p),this.zero=new Be(0).toRed(this.red),this.one=new Be(1).toRed(this.red),this.two=new Be(2).toRed(this.red),this.n=e.n&&new Be(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this.X$=new Array(4),this.j$=new Array(4),this.Z$=new Array(4),this.Q$=new Array(4),this.J$=this.n?this.n.bitLength():0;const i=this.n&&this.p.div(this.n);!i||i.cmpn(100)>0?this.redN=null:(this.K$=!0,this.redN=this.n.toRed(this.red))}q$(t,e){const i=t.tX(),s=Uf(e,1,this.J$);let n=(1<<i.step+1)-(i.step%2==0?2:1);n/=3;const a=[];for(let u=0;u<s.length;u+=i.step){let d=0;for(let f=u+i.step-1;f>=u;f--)d=(d<<1)+s[f];a.push(d)}let o=this.jpoint(null,null,null),l=this.jpoint(null,null,null);for(let u=n;u>0;u--){for(let d=0;d<a.length;d++){const f=a[d];f===u?l=l.mixedAdd(i.points[d]):f===-u&&(l=l.mixedAdd(i.points[d].neg()))}o=o.add(l)}return o.toP()}iX(t,e){let i=4;const s=t.sX(i);i=s.wnd;const n=s.points,a=Uf(e,i,this.J$);let o=this.jpoint(null,null,null);for(let l=a.length-1;l>=0;l--){for(let d=0;l>=0&&a[l]===0;l--)d++;if(l>=0&&e++,o=o.dblp(e),l<0)break;const u=a[l];o=t.type==="affine"?u>0?o.mixedAdd(n[u-1>>1]):o.mixedAdd(n[-u-1>>1].neg()):u>0?o.add(n[u-1>>1]):o.add(n[-u-1>>1].neg())}return t.type==="affine"?o.toP():o}eX(t,e,i,s,n){const a=this.X$,o=this.j$,l=this.Z$;let u=0;for(let y=0;y<s;y++){const m=e[y].sX(t);a[y]=m.wnd,o[y]=m.points}for(let y=s-1;y>=1;y-=2){const m=y-1,p=y;if(a[m]!==1||a[p]!==1){l[m]=Uf(i[m],a[m],this.J$),l[p]=Uf(i[p],a[p],this.J$),u=Math.max(l[m].length,u),u=Math.max(l[p].length,u);continue}const x=[e[m],null,null,e[p]];e[m].y.cmp(e[p].y)===0?(x[1]=e[m].add(e[p]),x[2]=e[m].toJ().mixedAdd(e[p].neg())):e[m].y.cmp(e[p].y.redNeg())===0?(x[1]=e[m].toJ().mixedAdd(e[p]),x[2]=e[m].add(e[p].neg())):(x[1]=e[m].toJ().mixedAdd(e[p]),x[2]=e[m].toJ().mixedAdd(e[p].neg()));const b=[-3,-1,-5,-7,0,7,5,1,3],v=_6(i[m],i[p]);u=Math.max(v[0].length,u),l[m]=new Array(u),l[p]=new Array(u);for(let R=0;R<u;R++){const E=0|v[0][R],V=0|v[1][R];l[m][R]=b[3*(E+1)+(V+1)],l[p][R]=0,o[m]=x}}let d=this.jpoint(null,null,null);const f=this.Q$;for(let y=u;y>=0;y--){let m=0;for(;y>=0;){let p=!0;for(let x=0;x<s;x++)f[x]=0|l[x][y],f[x]!==0&&(p=!1);if(!p)break;m++,y--}if(y>=0&&m++,d=d.dblp(m),y<0)break;for(let p=0;p<s;p++){const x=f[p];let b;x!==0&&(x>0?b=o[p][x-1>>1]:x<0&&(b=o[p][-x-1>>1].neg()),d=b.type==="affine"?d.mixedAdd(b):d.add(b))}}for(let y=0;y<s;y++)o[y]=null;return n?d:d.toP()}decodePoint(t,e){t=yT(t,e);const i=this.p.byteLength();if((t[0]===4||t[0]===6||t[0]===7)&&t.length-1==2*i)return this.point(t.slice(1,1+i),t.slice(1+i,1+2*i));if((t[0]===2||t[0]===3)&&t.length-1===i)return this.pointFromX(t.slice(1,1+i),t[0]===3);throw new Error("Unknown point format")}}class mT{constructor(t,e){this.curve=t,this.type=e,this.precomputed=null}eq(t){throw new Error("Not implemented")}validate(){return this.curve.validate(this)}encodeCompressed(t){return this.encode(t,!0)}hX(t){const e=this.curve.p.byteLength(),i=this.getX().toArray("be",e);return t?[this.getY().isEven()?2:3].concat(i):[4].concat(i,this.getY().toArray("be",e))}encode(t,e){return function(i,s){return s==="hex"?function(n){let a="";for(let l=0;l<n.length;l++)a+=(o=n[l].toString(16)).length===1?`0${o}`:o;var o;return a}(i):i}(this.hX(e),t)}precompute(t){if(this.precomputed)return this;const e={doubles:null,naf:null,beta:null};return e.naf=this.sX(8),e.doubles=this.tX(4,t),e.beta=this.rX(),this.precomputed=e,this}nX(t){if(!this.precomputed)return!1;const e=this.precomputed.doubles;return!!e&&e.points.length>=Math.ceil((t.bitLength()+1)/e.step)}tX(t,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;const i=[this];let s=this;for(let n=0;n<e;n+=t){for(let a=0;a<t;a++)s=s.dbl();i.push(s)}return{step:t,points:i}}sX(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;const e=[this],i=(1<<t)-1,s=i===1?null:this.dbl();for(let n=1;n<i;n++)e[n]=e[n-1].add(s);return{wnd:t,points:e}}rX(){return null}dblp(t){let e=this;for(let i=0;i<t;i++)e=e.dbl();return e}}class L6 extends N6{constructor(t){super("short",t),this.a=new Be(t.a,16).toRed(this.red),this.b=new Be(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this.oX(t),this.aX=new Array(4),this.lX=new Array(4)}pointFromJSON(t,e){return m0.fromJSON(this,t,e)}oX(t){if(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)return;let e,i,s;if(t.beta)e=new Be(t.beta,16).toRed(this.red);else{const n=this.uX(this.p);e=n[0].cmp(n[1])<0?n[0]:n[1],e=e.toRed(this.red)}if(t.lambda)i=new Be(t.lambda,16);else{const n=this.uX(this.n);i=this.g.mul(n[0]).x.cmp(this.g.x.redMul(e))===0?n[0]:n[1]}return s=t.basis?t.basis.map(n=>({a:new Be(n.a,16),b:new Be(n.b,16)})):this.cX(i),{beta:e,lambda:i,basis:s}}uX(t){const e=t===this.p?this.red:Be.mont(t),i=new Be(2).toRed(e).redInvm(),s=i.redNeg(),n=new Be(3).toRed(e).redNeg().redSqrt().redMul(i);return[s.redAdd(n).fromRed(),s.redSub(n).fromRed()]}cX(t){const e=this.n.ushrn(Math.floor(this.n.bitLength()/2));let i,s,n,a,o,l,u,d,f,y=t,m=this.n.clone(),p=new Be(1),x=new Be(0),b=new Be(0),v=new Be(1),R=0;for(;y.cmpn(0)!==0;){const V=m.div(y);d=m.sub(V.mul(y)),f=b.sub(V.mul(p));const F=v.sub(V.mul(x));if(!n&&d.cmp(e)<0)i=u.neg(),s=p,n=d.neg(),a=f;else if(n&&++R==2)break;u=d,m=y,y=d,b=p,p=f,v=x,x=F}o=d.neg(),l=f;const E=n.sqr().add(a.sqr());return o.sqr().add(l.sqr()).cmp(E)>=0&&(o=i,l=s),n.negative&&(n=n.neg(),a=a.neg()),o.negative&&(o=o.neg(),l=l.neg()),[{a:n,b:a},{a:o,b:l}]}dX(t){const e=this.endo.basis,i=e[0],s=e[1],n=s.b.mul(t).divRound(this.n),a=i.b.neg().mul(t).divRound(this.n),o=n.mul(i.a),l=a.mul(s.a),u=n.mul(i.b),d=a.mul(s.b);return{k1:t.sub(o).sub(l),k2:u.add(d).neg()}}point(t,e,i){return new m0(this,t,e,i)}pointFromX(t,e){(t=new Be(t,16)).red||(t=t.toRed(this.red));const i=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b);let s=i.redSqrt();if(s.redSqr().redSub(i).cmp(this.zero)!==0)throw new Error("invalid point");const n=s.fromRed().isOdd();return(e&&!n||!e&&n)&&(s=s.redNeg()),this.point(t,s)}validate(t){if(t.inf)return!0;const e=t.x,i=t.y,s=this.a.redMul(e),n=e.redSqr().redMul(e).redIAdd(s).redIAdd(this.b);return i.redSqr().redISub(n).cmpn(0)===0}fX(t,e,i){const s=this.aX,n=this.lX;let a=0;for(a=0;a<t.length;a++){const l=this.dX(e[a]);let u=t[a],d=u.rX();l.k1.negative&&(l.k1.ineg(),u=u.neg(!0)),l.k2.negative&&(l.k2.ineg(),d=d.neg(!0)),s[2*a]=u,s[2*a+1]=d,n[2*a]=l.k1,n[2*a+1]=l.k2}const o=this.eX(1,s,n,2*a,i);for(let l=0;l<2*a;l++)s[l]=null,n[l]=null;return o}jpoint(t,e,i){return new _S(this,t,e,i)}}class m0 extends mT{constructor(t,e,i,s){super(t,"affine"),e===null&&i===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new Be(e,16),this.y=new Be(i,16),s&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}pointFromX(t,e){throw new Error("Method not implemented.")}point(t,e,i){return new m0(this,t,e,i)}rX(){if(!this.curve.endo)return;const t=this.precomputed;if(t&&t.beta)return t.beta;const e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){const i=this.curve,s=function(n){return i.point(n.x.redMul(i.endo.beta),n.y)};t.beta=e,e.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(s)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(s)}}}return e}toJSON(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]}static fromJSON(t,e,i){typeof e=="string"&&(e=JSON.parse(e));const s=t.point(e[0],e[1],i);if(!e[2])return s;function n(o){return t.point(o[0],o[1],i)}const a=e[2];return s.precomputed={beta:null,doubles:a.doubles&&{step:a.doubles.step,points:[s].concat(a.doubles.points.map(n))},naf:a.naf&&{wnd:a.naf.wnd,points:[s].concat(a.naf.points.map(n))}},s}inspect(){return this.isInfinity()?"<EC Point Infinity>":`<EC Point x: ${this.x.fromRed().toString(16,2)} y: ${this.y.fromRed().toString(16,2)}>`}isInfinity(){return this.inf}add(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(this.x.cmp(t.x)===0)return this.curve.point(null,null);let e=this.y.redSub(t.y);e.cmpn(0)!==0&&(e=e.redMul(this.x.redSub(t.x).redInvm()));const i=e.redSqr().redISub(this.x).redISub(t.x),s=e.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,s)}dbl(){if(this.inf)return this;const t=this.y.redAdd(this.y);if(t.cmpn(0)===0)return this.curve.point(null,null);const e=this.curve.a,i=this.x.redSqr(),s=t.redInvm(),n=i.redAdd(i).redIAdd(i).redIAdd(e).redMul(s),a=n.redSqr().redISub(this.x.redAdd(this.x)),o=n.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,o)}getX(){return this.x.fromRed()}getY(){return this.y.fromRed()}mul(t){return t=new Be(t,16),this.isInfinity()?this:this.nX(t)?this.curve.q$(this,t):this.curve.endo?this.curve.fX([this],[t]):this.curve.iX(this,t)}mulAdd(t,e,i){const s=[this,e],n=[t,i];return this.curve.endo?this.curve.fX(s,n):this.curve.eX(1,s,n,2)}jmulAdd(t,e,i){const s=[this,e],n=[t,i];return this.curve.endo?this.curve.fX(s,n,!0):this.curve.eX(1,s,n,2,!0)}eq(t){return this===t||this.inf===t.inf&&(this.inf||this.x.cmp(t.x)===0&&this.y.cmp(t.y)===0)}neg(t){if(this.inf)return this;const e=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){const i=this.precomputed,s=function(n){return n.neg()};e.precomputed={naf:i.naf&&{wnd:i.naf.wnd,points:i.naf.points.map(s)},doubles:i.doubles&&{step:i.doubles.step,points:i.doubles.points.map(s)}}}return e}toJ(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)}}class _S extends mT{constructor(t,e,i,s){super(t,"jacobian"),e===null&&i===null&&s===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new Be(0)):(this.x=new Be(e,16),this.y=new Be(i,16),this.z=new Be(s,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}getY(){throw new Error("Method not implemented.")}getX(){throw new Error("Method not implemented.")}pointFromX(t,e){throw new Error("Method not implemented.")}point(t,e,i){throw new Error("Method not implemented.")}jpoint(t,e,i){return new _S(this,t,e,i)}toP(){if(this.isInfinity())return this.curve.point(null,null);const t=this.z.redInvm(),e=t.redSqr(),i=this.x.redMul(e),s=this.y.redMul(e).redMul(t);return this.curve.point(i,s)}neg(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)}add(t){if(this.isInfinity())return t;if(t.isInfinity())return this;const e=t.z.redSqr(),i=this.z.redSqr(),s=this.x.redMul(e),n=t.x.redMul(i),a=this.y.redMul(e.redMul(t.z)),o=t.y.redMul(i.redMul(this.z)),l=s.redSub(n),u=a.redSub(o);if(l.cmpn(0)===0)return u.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();const d=l.redSqr(),f=d.redMul(l),y=s.redMul(d),m=u.redSqr().redIAdd(f).redISub(y).redISub(y),p=u.redMul(y.redISub(m)).redISub(a.redMul(f)),x=this.z.redMul(t.z).redMul(l);return this.curve.jpoint(m,p,x)}mixedAdd(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;const e=this.z.redSqr(),i=this.x,s=t.x.redMul(e),n=this.y,a=t.y.redMul(e).redMul(this.z),o=i.redSub(s),l=n.redSub(a);if(o.cmpn(0)===0)return l.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();const u=o.redSqr(),d=u.redMul(o),f=i.redMul(u),y=l.redSqr().redIAdd(d).redISub(f).redISub(f),m=l.redMul(f.redISub(y)).redISub(n.redMul(d)),p=this.z.redMul(o);return this.curve.jpoint(y,m,p)}dblp(t){if(t===0)return this;if(this.isInfinity())return this;if(!t)return this.dbl();if(this.curve.zeroA||this.curve.threeA){let u=this;for(let d=0;d<t;d++)u=u.dbl();return u}const e=this.curve.a,i=this.curve.tinv;let s=this.x;const n=this.y;let a=this.z,o=a.redSqr().redSqr(),l=n.redAdd(n);for(let u=0;u<t;u++){const d=s.redSqr(),f=l.redSqr(),y=f.redSqr(),m=d.redAdd(d).redIAdd(d).redIAdd(e.redMul(o)),p=s.redMul(f),x=m.redSqr().redISub(p.redAdd(p)),b=p.redISub(x);let v=m.redMul(b);v=v.redIAdd(v).redISub(y);const R=l.redMul(a);u+1<t&&(o=o.redMul(y)),s=x,a=R,l=v}return this.curve.jpoint(s,l.redMul(i),a)}dbl(){return this.isInfinity()?this:this.curve.zeroA?this.AX():this.curve.threeA?this.gX():this.mX()}AX(){let t,e,i;if(this.zOne){const s=this.x.redSqr(),n=this.y.redSqr(),a=n.redSqr();let o=this.x.redAdd(n).redSqr().redISub(s).redISub(a);o=o.redIAdd(o);const l=s.redAdd(s).redIAdd(s),u=l.redSqr().redISub(o).redISub(o);let d=a.redIAdd(a);d=d.redIAdd(d),d=d.redIAdd(d),t=u,e=l.redMul(o.redISub(u)).redISub(d),i=this.y.redAdd(this.y)}else{const s=this.x.redSqr(),n=this.y.redSqr(),a=n.redSqr();let o=this.x.redAdd(n).redSqr().redISub(s).redISub(a);o=o.redIAdd(o);const l=s.redAdd(s).redIAdd(s),u=l.redSqr();let d=a.redIAdd(a);d=d.redIAdd(d),d=d.redIAdd(d),t=u.redISub(o).redISub(o),e=l.redMul(o.redISub(t)).redISub(d),i=this.y.redMul(this.z),i=i.redIAdd(i)}return this.curve.jpoint(t,e,i)}gX(){let t,e,i;if(this.zOne){const s=this.x.redSqr(),n=this.y.redSqr(),a=n.redSqr();let o=this.x.redAdd(n).redSqr().redISub(s).redISub(a);o=o.redIAdd(o);const l=s.redAdd(s).redIAdd(s).redIAdd(this.curve.a),u=l.redSqr().redISub(o).redISub(o);t=u;let d=a.redIAdd(a);d=d.redIAdd(d),d=d.redIAdd(d),e=l.redMul(o.redISub(u)).redISub(d),i=this.y.redAdd(this.y)}else{const s=this.z.redSqr(),n=this.y.redSqr(),a=this.x.redMul(n);let o=this.x.redSub(s).redMul(this.x.redAdd(s));o=o.redAdd(o).redIAdd(o);let l=a.redIAdd(a);l=l.redIAdd(l);const u=l.redAdd(l);t=o.redSqr().redISub(u),i=this.y.redAdd(this.z).redSqr().redISub(n).redISub(s);let d=n.redSqr();d=d.redIAdd(d),d=d.redIAdd(d),d=d.redIAdd(d),e=o.redMul(l.redISub(t)).redISub(d)}return this.curve.jpoint(t,e,i)}mX(){const t=this.curve.a,e=this.x,i=this.y,s=this.z,n=s.redSqr().redSqr(),a=e.redSqr(),o=i.redSqr(),l=a.redAdd(a).redIAdd(a).redIAdd(t.redMul(n));let u=e.redAdd(e);u=u.redIAdd(u);const d=u.redMul(o),f=l.redSqr().redISub(d.redAdd(d)),y=d.redISub(f);let m=o.redSqr();m=m.redIAdd(m),m=m.redIAdd(m),m=m.redIAdd(m);const p=l.redMul(y).redISub(m),x=i.redAdd(i).redMul(s);return this.curve.jpoint(f,p,x)}trpl(){if(!this.curve.zeroA)return this.dbl().add(this);const t=this.x.redSqr(),e=this.y.redSqr(),i=this.z.redSqr(),s=e.redSqr(),n=t.redAdd(t).redIAdd(t),a=n.redSqr();let o=this.x.redAdd(e).redSqr().redISub(t).redISub(s);o=o.redIAdd(o),o=o.redAdd(o).redIAdd(o),o=o.redISub(a);const l=o.redSqr();let u=s.redIAdd(s);u=u.redIAdd(u),u=u.redIAdd(u),u=u.redIAdd(u);const d=n.redIAdd(o).redSqr().redISub(a).redISub(l).redISub(u);let f=e.redMul(d);f=f.redIAdd(f),f=f.redIAdd(f);let y=this.x.redMul(l).redISub(f);y=y.redIAdd(y),y=y.redIAdd(y);let m=this.y.redMul(d.redMul(u.redISub(d)).redISub(o.redMul(l)));m=m.redIAdd(m),m=m.redIAdd(m),m=m.redIAdd(m);const p=this.z.redAdd(o).redSqr().redISub(i).redISub(l);return this.curve.jpoint(y,m,p)}mul(t,e){return t=new Be(t,e),this.curve.iX(this,t)}eq(t){if(t.type==="affine")return this.eq(t.toJ());if(this===t)return!0;const e=this.z.redSqr(),i=t.z.redSqr();if(this.x.redMul(i).redISub(t.x.redMul(e)).cmpn(0)!==0)return!1;const s=e.redMul(this.z),n=i.redMul(t.z);return this.y.redMul(n).redISub(t.y.redMul(s)).cmpn(0)===0}eqXToP(t){const e=this.z.redSqr(),i=t.toRed(this.curve.red).redMul(e);if(this.x.cmp(i)===0)return!0;const s=t.clone(),n=this.curve.redN.redMul(e);for(;;){if(s.iadd(this.curve.n),s.cmp(this.curve.p)>=0)return!1;if(i.redIAdd(n),this.x.cmp(i)===0)return!0}}inspect(){return this.isInfinity()?"<EC JPoint Infinity>":`<EC JPoint x: ${this.x.toString(16,2)} y: ${this.y.toString(16,2)} z: ${this.z.toString(16,2)}>`}isInfinity(){return this.z.cmpn(0)===0}}class P2{constructor(t){this.curve=new L6(t),this.g=this.curve.g,this.n=this.curve.n}}const yc={};var I2;yc.PresetCurve=P2,I2={type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",{doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}]},Object.defineProperty(yc,"secp256k1",{configurable:!0,enumerable:!0,get(){const r=new P2(I2);return Object.defineProperty(yc,"secp256k1",{configurable:!0,enumerable:!0,value:r}),r}});class p0{constructor(t,e){this.ec=t,this.priv=null,this.pub=null,e.pub&&this.yX(e.pub,e.pubEnc)}static fromPublic(t,e,i){return e instanceof p0?e:new p0(t,{pub:e,pubEnc:i})}validate(){const t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}}getPublic(t,e){return typeof t=="string"&&(e=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),e?this.pub.encode(e,t):this.pub}yX(t,e){if(t.x||t.y)return this.ec.curve.type==="mont"||this.ec.curve.type==="short"||this.ec.curve.type,void(this.pub=this.ec.curve.point(t.x,t.y));this.pub=this.ec.curve.decodePoint(t,e)}verify(t,e){return this.ec.verify(t,e,this)}}function Bm(r,t){const e=r[t.place++];if(!(128&e))return e;const i=15&e;if(i===0||i>4)return!1;let s=0,n=t.place;for(let a=0;a<i;a++,n++)s<<=8,s|=r[n],s>>>=0;return!(s<=127)&&(t.place=n,s)}class B6{constructor(){this.place=0}}class NS{constructor(t,e){if(t instanceof NS)return t;this.pX(t,e)||(this.r=new Be(t.r,16),this.s=new Be(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}pX(t,e){t=yT(t,e);const i=new B6;if(t[i.place++]!==48)return!1;const s=Bm(t,i);if(s===!1||s+i.place!==t.length||t[i.place++]!==2)return!1;const n=Bm(t,i);if(n===!1)return!1;let a=t.slice(i.place,n+i.place);if(i.place+=n,t[i.place++]!==2)return!1;const o=Bm(t,i);if(o===!1||t.length!==o+i.place)return!1;let l=t.slice(i.place,o+i.place);if(a[0]===0){if(!(128&a[1]))return!1;a=a.slice(1)}if(l[0]===0){if(!(128&l[1]))return!1;l=l.slice(1)}return this.r=new Be(a),this.s=new Be(l),this.recoveryParam=null,!0}}class S0{constructor(t){if(!(this instanceof S0))return new S0(t);typeof t=="string"&&(t=yc[t]),t instanceof yc.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1)}keyFromPublic(t,e){return p0.fromPublic(this,t,e)}SX(t,e){const i=8*t.byteLength()-this.n.bitLength();return i>0&&(t=t.ushrn(i)),!e&&t.cmp(this.n)>=0?t.sub(this.n):t}verify(t,e,i,s){t=this.SX(new Be(t,16)),i=this.keyFromPublic(i,s);const n=(e=new NS(e,"hex")).r,a=e.s;if(n.cmpn(1)<0||n.cmp(this.n)>=0||a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;const o=a.invm(this.n),l=o.mul(t).umod(this.n),u=o.mul(n).umod(this.n);if(!this.curve.K$){const f=this.g.mulAdd(l,i.getPublic(),u);return!f.isInfinity()&&f.getX().umod(this.n).cmp(n)===0}const d=this.g.jmulAdd(l,i.getPublic(),u);return!d.isInfinity()&&d.eqXToP(n)}}var Pm,or={exports:{}};or.exports=(Pm=Pm||function(r,t){var e;if(typeof window<"u"&&window.crypto&&(e=window.crypto),typeof self<"u"&&self.crypto&&(e=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(e=globalThis.crypto),!e&&typeof window<"u"&&window.msCrypto&&(e=window.msCrypto),!e&&Wf!==void 0&&Wf.crypto&&(e=Wf.crypto),!e)try{e=t}catch{}var i=function(){if(e){if(typeof e.getRandomValues=="function")try{return e.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof e.randomBytes=="function")try{return e.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},s=Object.create||function(){function x(){}return function(b){var v;return x.prototype=b,v=new x,x.prototype=null,v}}(),n={},a=n.lib={},o=a.Base={extend:function(x){var b=s(this);return x&&b.mixIn(x),b.hasOwnProperty("init")&&this.init!==b.init||(b.init=function(){b.$super.init.apply(this,arguments)}),b.init.prototype=b,b.$super=this,b},create:function(){var x=this.extend();return x.init.apply(x,arguments),x},init:function(){},mixIn:function(x){for(var b in x)x.hasOwnProperty(b)&&(this[b]=x[b]);x.hasOwnProperty("toString")&&(this.toString=x.toString)},clone:function(){return this.init.prototype.extend(this)}},l=a.WordArray=o.extend({init:function(x,b){x=this.words=x||[],this.sigBytes=b!=t?b:4*x.length},toString:function(x){return(x||d).stringify(this)},concat:function(x){var b=this.words,v=x.words,R=this.sigBytes,E=x.sigBytes;if(this.clamp(),R%4)for(var V=0;V<E;V++){var F=v[V>>>2]>>>24-V%4*8&255;b[R+V>>>2]|=F<<24-(R+V)%4*8}else for(var L=0;L<E;L+=4)b[R+L>>>2]=v[L>>>2];return this.sigBytes+=E,this},clamp:function(){var x=this.words,b=this.sigBytes;x[b>>>2]&=4294967295<<32-b%4*8,x.length=r.ceil(b/4)},clone:function(){var x=o.clone.call(this);return x.words=this.words.slice(0),x},random:function(x){for(var b=[],v=0;v<x;v+=4)b.push(i());return new l.init(b,x)}}),u=n.enc={},d=u.Hex={stringify:function(x){for(var b=x.words,v=x.sigBytes,R=[],E=0;E<v;E++){var V=b[E>>>2]>>>24-E%4*8&255;R.push((V>>>4).toString(16)),R.push((15&V).toString(16))}return R.join("")},parse:function(x){for(var b=x.length,v=[],R=0;R<b;R+=2)v[R>>>3]|=parseInt(x.substr(R,2),16)<<24-R%8*4;return new l.init(v,b/2)}},f=u.Latin1={stringify:function(x){for(var b=x.words,v=x.sigBytes,R=[],E=0;E<v;E++){var V=b[E>>>2]>>>24-E%4*8&255;R.push(String.fromCharCode(V))}return R.join("")},parse:function(x){for(var b=x.length,v=[],R=0;R<b;R++)v[R>>>2]|=(255&x.charCodeAt(R))<<24-R%4*8;return new l.init(v,b)}},y=u.Utf8={stringify:function(x){try{return decodeURIComponent(escape(f.stringify(x)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(x){return f.parse(unescape(encodeURIComponent(x)))}},m=a.BufferedBlockAlgorithm=o.extend({reset:function(){this.Jw=new l.init,this.vX=0},bX:function(x){typeof x=="string"&&(x=y.parse(x)),this.Jw.concat(x),this.vX+=x.sigBytes},xX:function(x){var b,v=this.Jw,R=v.words,E=v.sigBytes,V=this.blockSize,F=E/(4*V),L=(F=x?r.ceil(F):r.max((0|F)-this.MX,0))*V,z=r.min(4*L,E);if(L){for(var B=0;B<L;B+=V)this._X(R,B);b=R.splice(0,L),v.sigBytes-=z}return new l.init(b,z)},clone:function(){var x=o.clone.call(this);return x.Jw=this.Jw.clone(),x},MX:0});a.Hasher=m.extend({cfg:o.extend(),init:function(x){this.cfg=this.cfg.extend(x),this.reset()},reset:function(){m.reset.call(this),this.wX()},update:function(x){return this.bX(x),this.xX(),this},finalize:function(x){return x&&this.bX(x),this.CX()},blockSize:16,kX:function(x){return function(b,v){return new x.init(v).finalize(b)}},TX:function(x){return function(b,v){return new p.HMAC.init(x,v).finalize(b)}}});var p=n.algo={};return n}(Math),Pm);var Of=function(r){return function(t){var e=r,i=e.lib,s=i.WordArray,n=i.Hasher,a=e.algo,o=[],l=[];(function(){function f(x){for(var b=t.sqrt(x),v=2;v<=b;v++)if(!(x%v))return!1;return!0}function y(x){return 4294967296*(x-(0|x))|0}for(var m=2,p=0;p<64;)f(m)&&(p<8&&(o[p]=y(t.pow(m,.5))),l[p]=y(t.pow(m,1/3)),p++),m++})();var u=[],d=a.SHA256=n.extend({wX:function(){this.FX=new s.init(o.slice(0))},_X:function(f,y){for(var m=this.FX.words,p=m[0],x=m[1],b=m[2],v=m[3],R=m[4],E=m[5],V=m[6],F=m[7],L=0;L<64;L++){if(L<16)u[L]=0|f[y+L];else{var z=u[L-15],B=(z<<25|z>>>7)^(z<<14|z>>>18)^z>>>3,A=u[L-2],T=(A<<15|A>>>17)^(A<<13|A>>>19)^A>>>10;u[L]=B+u[L-7]+T+u[L-16]}var w=p&x^p&b^x&b,C=(p<<30|p>>>2)^(p<<19|p>>>13)^(p<<10|p>>>22),k=F+((R<<26|R>>>6)^(R<<21|R>>>11)^(R<<7|R>>>25))+(R&E^~R&V)+l[L]+u[L];F=V,V=E,E=R,R=v+k|0,v=b,b=x,x=p,p=k+(C+w)|0}m[0]=m[0]+p|0,m[1]=m[1]+x|0,m[2]=m[2]+b|0,m[3]=m[3]+v|0,m[4]=m[4]+R|0,m[5]=m[5]+E|0,m[6]=m[6]+V|0,m[7]=m[7]+F|0},CX:function(){var f=this.Jw,y=f.words,m=8*this.vX,p=8*f.sigBytes;return y[p>>>5]|=128<<24-p%32,y[14+(p+64>>>9<<4)]=t.floor(m/4294967296),y[15+(p+64>>>9<<4)]=m,f.sigBytes=4*y.length,this.xX(),this.FX},clone:function(){var f=n.clone.call(this);return f.FX=this.FX.clone(),f}});e.SHA256=n.kX(d),e.HmacSHA256=n.TX(d)}(Math),r.SHA256}(or.exports),P6=function(r){return e=(t=r).lib.WordArray,i=t.algo,s=i.SHA256,n=i.SHA224=s.extend({wX:function(){this.FX=new e.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},CX:function(){var a=s.CX.call(this);return a.sigBytes-=4,a}}),t.SHA224=s.kX(n),t.HmacSHA224=s.TX(n),r.SHA224;var t,e,i,s,n}(or.exports),mo=or.exports.enc.Hex,U2=or.exports.enc.Utf8;(function(r){return e=(t=r).lib.WordArray,t.enc.Base64={stringify:function(i){var s=i.words,n=i.sigBytes,a=this.IX;i.clamp();for(var o=[],l=0;l<n;l+=3)for(var u=(s[l>>>2]>>>24-l%4*8&255)<<16|(s[l+1>>>2]>>>24-(l+1)%4*8&255)<<8|s[l+2>>>2]>>>24-(l+2)%4*8&255,d=0;d<4&&l+.75*d<n;d++)o.push(a.charAt(u>>>6*(3-d)&63));var f=a.charAt(64);if(f)for(;o.length%4;)o.push(f);return o.join("")},parse:function(i){var s=i.length,n=this.IX,a=this.PX;if(!a){a=this.PX=[];for(var o=0;o<n.length;o++)a[n.charCodeAt(o)]=o}var l=n.charAt(64);if(l){var u=i.indexOf(l);u!==-1&&(s=u)}return function(d,f,y){for(var m=[],p=0,x=0;x<f;x++)if(x%4){var b=y[d.charCodeAt(x-1)]<<x%4*2|y[d.charCodeAt(x)]>>>6-x%4*2;m[p>>>2]|=b<<24-p%4*8,p++}return e.create(m,p)}(i,s,a)},IX:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},r.enc.Base64;var t,e})(or.exports);(function(r){(function(t){var e=r,i=e.lib,s=i.WordArray,n=i.Hasher,a=e.algo,o=[];(function(){for(var m=0;m<64;m++)o[m]=4294967296*t.abs(t.sin(m+1))|0})();var l=a.MD5=n.extend({wX:function(){this.FX=new s.init([1732584193,4023233417,2562383102,271733878])},_X:function(m,p){for(var x=0;x<16;x++){var b=p+x,v=m[b];m[b]=16711935&(v<<8|v>>>24)|4278255360&(v<<24|v>>>8)}var R=this.FX.words,E=m[p+0],V=m[p+1],F=m[p+2],L=m[p+3],z=m[p+4],B=m[p+5],A=m[p+6],T=m[p+7],w=m[p+8],C=m[p+9],k=m[p+10],_=m[p+11],X=m[p+12],N=m[p+13],U=m[p+14],O=m[p+15],W=R[0],I=R[1],H=R[2],q=R[3];W=u(W,I,H,q,E,7,o[0]),q=u(q,W,I,H,V,12,o[1]),H=u(H,q,W,I,F,17,o[2]),I=u(I,H,q,W,L,22,o[3]),W=u(W,I,H,q,z,7,o[4]),q=u(q,W,I,H,B,12,o[5]),H=u(H,q,W,I,A,17,o[6]),I=u(I,H,q,W,T,22,o[7]),W=u(W,I,H,q,w,7,o[8]),q=u(q,W,I,H,C,12,o[9]),H=u(H,q,W,I,k,17,o[10]),I=u(I,H,q,W,_,22,o[11]),W=u(W,I,H,q,X,7,o[12]),q=u(q,W,I,H,N,12,o[13]),H=u(H,q,W,I,U,17,o[14]),W=d(W,I=u(I,H,q,W,O,22,o[15]),H,q,V,5,o[16]),q=d(q,W,I,H,A,9,o[17]),H=d(H,q,W,I,_,14,o[18]),I=d(I,H,q,W,E,20,o[19]),W=d(W,I,H,q,B,5,o[20]),q=d(q,W,I,H,k,9,o[21]),H=d(H,q,W,I,O,14,o[22]),I=d(I,H,q,W,z,20,o[23]),W=d(W,I,H,q,C,5,o[24]),q=d(q,W,I,H,U,9,o[25]),H=d(H,q,W,I,L,14,o[26]),I=d(I,H,q,W,w,20,o[27]),W=d(W,I,H,q,N,5,o[28]),q=d(q,W,I,H,F,9,o[29]),H=d(H,q,W,I,T,14,o[30]),W=f(W,I=d(I,H,q,W,X,20,o[31]),H,q,B,4,o[32]),q=f(q,W,I,H,w,11,o[33]),H=f(H,q,W,I,_,16,o[34]),I=f(I,H,q,W,U,23,o[35]),W=f(W,I,H,q,V,4,o[36]),q=f(q,W,I,H,z,11,o[37]),H=f(H,q,W,I,T,16,o[38]),I=f(I,H,q,W,k,23,o[39]),W=f(W,I,H,q,N,4,o[40]),q=f(q,W,I,H,E,11,o[41]),H=f(H,q,W,I,L,16,o[42]),I=f(I,H,q,W,A,23,o[43]),W=f(W,I,H,q,C,4,o[44]),q=f(q,W,I,H,X,11,o[45]),H=f(H,q,W,I,O,16,o[46]),W=y(W,I=f(I,H,q,W,F,23,o[47]),H,q,E,6,o[48]),q=y(q,W,I,H,T,10,o[49]),H=y(H,q,W,I,U,15,o[50]),I=y(I,H,q,W,B,21,o[51]),W=y(W,I,H,q,X,6,o[52]),q=y(q,W,I,H,L,10,o[53]),H=y(H,q,W,I,k,15,o[54]),I=y(I,H,q,W,V,21,o[55]),W=y(W,I,H,q,w,6,o[56]),q=y(q,W,I,H,O,10,o[57]),H=y(H,q,W,I,A,15,o[58]),I=y(I,H,q,W,N,21,o[59]),W=y(W,I,H,q,z,6,o[60]),q=y(q,W,I,H,_,10,o[61]),H=y(H,q,W,I,F,15,o[62]),I=y(I,H,q,W,C,21,o[63]),R[0]=R[0]+W|0,R[1]=R[1]+I|0,R[2]=R[2]+H|0,R[3]=R[3]+q|0},CX:function(){var m=this.Jw,p=m.words,x=8*this.vX,b=8*m.sigBytes;p[b>>>5]|=128<<24-b%32;var v=t.floor(x/4294967296),R=x;p[15+(b+64>>>9<<4)]=16711935&(v<<8|v>>>24)|4278255360&(v<<24|v>>>8),p[14+(b+64>>>9<<4)]=16711935&(R<<8|R>>>24)|4278255360&(R<<24|R>>>8),m.sigBytes=4*(p.length+1),this.xX();for(var E=this.FX,V=E.words,F=0;F<4;F++){var L=V[F];V[F]=16711935&(L<<8|L>>>24)|4278255360&(L<<24|L>>>8)}return E},clone:function(){var m=n.clone.call(this);return m.FX=this.FX.clone(),m}});function u(m,p,x,b,v,R,E){var V=m+(p&x|~p&b)+v+E;return(V<<R|V>>>32-R)+p}function d(m,p,x,b,v,R,E){var V=m+(p&b|x&~b)+v+E;return(V<<R|V>>>32-R)+p}function f(m,p,x,b,v,R,E){var V=m+(p^x^b)+v+E;return(V<<R|V>>>32-R)+p}function y(m,p,x,b,v,R,E){var V=m+(x^(p|~b))+v+E;return(V<<R|V>>>32-R)+p}e.MD5=n.kX(l),e.HmacMD5=n.TX(l)})(Math),r.MD5})(or.exports);(function(r){return e=(t=r).lib,i=e.WordArray,s=e.Hasher,n=t.algo,a=[],o=n.SHA1=s.extend({wX:function(){this.FX=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_X:function(l,u){for(var d=this.FX.words,f=d[0],y=d[1],m=d[2],p=d[3],x=d[4],b=0;b<80;b++){if(b<16)a[b]=0|l[u+b];else{var v=a[b-3]^a[b-8]^a[b-14]^a[b-16];a[b]=v<<1|v>>>31}var R=(f<<5|f>>>27)+x+a[b];R+=b<20?1518500249+(y&m|~y&p):b<40?1859775393+(y^m^p):b<60?(y&m|y&p|m&p)-1894007588:(y^m^p)-899497514,x=p,p=m,m=y<<30|y>>>2,y=f,f=R}d[0]=d[0]+f|0,d[1]=d[1]+y|0,d[2]=d[2]+m|0,d[3]=d[3]+p|0,d[4]=d[4]+x|0},CX:function(){var l=this.Jw,u=l.words,d=8*this.vX,f=8*l.sigBytes;return u[f>>>5]|=128<<24-f%32,u[14+(f+64>>>9<<4)]=Math.floor(d/4294967296),u[15+(f+64>>>9<<4)]=d,l.sigBytes=4*u.length,this.xX(),this.FX},clone:function(){var l=s.clone.call(this);return l.FX=this.FX.clone(),l}}),t.SHA1=s.kX(o),t.HmacSHA1=s.TX(o),r.SHA1;var t,e,i,s,n,a,o})(or.exports);var Im,O2,G2;O2=(Im=or.exports).lib.Base,G2=Im.enc.Utf8,Im.algo.HMAC=O2.extend({init:function(r,t){r=this.DX=new r.init,typeof t=="string"&&(t=G2.parse(t));var e=r.blockSize,i=4*e;t.sigBytes>i&&(t=r.finalize(t)),t.clamp();for(var s=this.BX=t.clone(),n=this.LX=t.clone(),a=s.words,o=n.words,l=0;l<e;l++)a[l]^=1549556828,o[l]^=909522486;s.sigBytes=n.sigBytes=i,this.reset()},reset:function(){var r=this.DX;r.reset(),r.update(this.LX)},update:function(r){return this.DX.update(r),this},finalize:function(r){var t=this.DX,e=t.finalize(r);return t.reset(),t.finalize(this.BX.clone().concat(e))}}),function(r){return i=(e=(t=r).lib).Base,s=e.WordArray,a=(n=t.algo).MD5,o=n.EvpKDF=i.extend({cfg:i.extend({keySize:4,hasher:a,iterations:1}),init:function(l){this.cfg=this.cfg.extend(l)},compute:function(l,u){for(var d,f=this.cfg,y=f.hasher.create(),m=s.create(),p=m.words,x=f.keySize,b=f.iterations;p.length<x;){d&&y.update(d),d=y.update(l).finalize(u),y.reset();for(var v=1;v<b;v++)d=y.finalize(d),y.reset();m.concat(d)}return m.sigBytes=4*x,m}}),t.EvpKDF=function(l,u,d){return o.create(d).compute(l,u)},r.EvpKDF;var t,e,i,s,n,a,o}(or.exports);(function(r){r.lib.Cipher||function(t){var e=r,i=e.lib,s=i.Base,n=i.WordArray,a=i.BufferedBlockAlgorithm,o=e.enc;o.Utf8;var l=o.Base64,u=e.algo.EvpKDF,d=i.Cipher=a.extend({cfg:s.extend(),createEncryptor:function(V,F){return this.create(this.RX,V,F)},createDecryptor:function(V,F){return this.create(this.EX,V,F)},init:function(V,F,L){this.cfg=this.cfg.extend(L),this.zX=V,this.VX=F,this.reset()},reset:function(){a.reset.call(this),this.wX()},process:function(V){return this.bX(V),this.xX()},finalize:function(V){return V&&this.bX(V),this.CX()},keySize:4,ivSize:4,RX:1,EX:2,kX:function(){function V(F){return typeof F=="string"?E:v}return function(F){return{encrypt:function(L,z,B){return V(z).encrypt(F,L,z,B)},decrypt:function(L,z,B){return V(z).decrypt(F,L,z,B)}}}}()});i.StreamCipher=d.extend({CX:function(){return this.xX(!0)},blockSize:1});var f=e.mode={},y=i.BlockCipherMode=s.extend({createEncryptor:function(V,F){return this.Encryptor.create(V,F)},createDecryptor:function(V,F){return this.Decryptor.create(V,F)},init:function(V,F){this.OX=V,this.NX=F}}),m=f.CBC=function(){var V=y.extend();function F(L,z,B){var A,T=this.NX;T?(A=T,this.NX=void 0):A=this.GX;for(var w=0;w<B;w++)L[z+w]^=A[w]}return V.Encryptor=V.extend({processBlock:function(L,z){var B=this.OX,A=B.blockSize;F.call(this,L,z,A),B.encryptBlock(L,z),this.GX=L.slice(z,z+A)}}),V.Decryptor=V.extend({processBlock:function(L,z){var B=this.OX,A=B.blockSize,T=L.slice(z,z+A);B.decryptBlock(L,z),F.call(this,L,z,A),this.GX=T}}),V}(),p=(e.pad={}).Pkcs7={pad:function(V,F){for(var L=4*F,z=L-V.sigBytes%L,B=z<<24|z<<16|z<<8|z,A=[],T=0;T<z;T+=4)A.push(B);var w=n.create(A,z);V.concat(w)},unpad:function(V){var F=255&V.words[V.sigBytes-1>>>2];V.sigBytes-=F}};i.BlockCipher=d.extend({cfg:d.cfg.extend({mode:m,padding:p}),reset:function(){var V;d.reset.call(this);var F=this.cfg,L=F.iv,z=F.mode;this.zX==this.RX?V=z.createEncryptor:(V=z.createDecryptor,this.MX=1),this.WX&&this.WX.UX==V?this.WX.init(this,L&&L.words):(this.WX=V.call(z,this,L&&L.words),this.WX.UX=V)},_X:function(V,F){this.WX.processBlock(V,F)},CX:function(){var V,F=this.cfg.padding;return this.zX==this.RX?(F.pad(this.Jw,this.blockSize),V=this.xX(!0)):(V=this.xX(!0),F.unpad(V)),V},blockSize:4});var x=i.CipherParams=s.extend({init:function(V){this.mixIn(V)},toString:function(V){return(V||this.formatter).stringify(this)}}),b=(e.format={}).OpenSSL={stringify:function(V){var F=V.ciphertext,L=V.salt;return(L?n.create([1398893684,1701076831]).concat(L).concat(F):F).toString(l)},parse:function(V){var F,L=l.parse(V),z=L.words;return z[0]==1398893684&&z[1]==1701076831&&(F=n.create(z.slice(2,4)),z.splice(0,4),L.sigBytes-=16),x.create({ciphertext:L,salt:F})}},v=i.SerializableCipher=s.extend({cfg:s.extend({format:b}),encrypt:function(V,F,L,z){z=this.cfg.extend(z);var B=V.createEncryptor(L,z),A=B.finalize(F),T=B.cfg;return x.create({ciphertext:A,key:L,iv:T.iv,algorithm:V,mode:T.mode,padding:T.padding,blockSize:V.blockSize,formatter:z.format})},decrypt:function(V,F,L,z){return z=this.cfg.extend(z),F=this.YX(F,z.format),V.createDecryptor(L,z).finalize(F.ciphertext)},YX:function(V,F){return typeof V=="string"?F.parse(V,this):V}}),R=(e.kdf={}).OpenSSL={execute:function(V,F,L,z){z||(z=n.random(8));var B=u.create({keySize:F+L}).compute(V,z),A=n.create(B.words.slice(F),4*L);return B.sigBytes=4*F,x.create({key:B,iv:A,salt:z})}},E=i.PasswordBasedCipher=v.extend({cfg:v.cfg.extend({kdf:R}),encrypt:function(V,F,L,z){var B=(z=this.cfg.extend(z)).kdf.execute(L,V.keySize,V.ivSize);z.iv=B.iv;var A=v.encrypt.call(this,V,F,B.key,z);return A.mixIn(B),A},decrypt:function(V,F,L,z){z=this.cfg.extend(z),F=this.YX(F,z.format);var B=z.kdf.execute(L,V.keySize,V.ivSize,F.salt);return z.iv=B.iv,v.decrypt.call(this,V,F,B.key,z)}})}()})(or.exports);var Y2=function(r){return function(){var t=r,e=t.lib.BlockCipher,i=t.algo,s=[],n=[],a=[],o=[],l=[],u=[],d=[],f=[],y=[],m=[];(function(){for(var b=[],v=0;v<256;v++)b[v]=v<128?v<<1:v<<1^283;var R=0,E=0;for(v=0;v<256;v++){var V=E^E<<1^E<<2^E<<3^E<<4;V=V>>>8^255&V^99,s[R]=V,n[V]=R;var F=b[R],L=b[F],z=b[L],B=257*b[V]^16843008*V;a[R]=B<<24|B>>>8,o[R]=B<<16|B>>>16,l[R]=B<<8|B>>>24,u[R]=B,B=16843009*z^65537*L^257*F^16843008*R,d[V]=B<<24|B>>>8,f[V]=B<<16|B>>>16,y[V]=B<<8|B>>>24,m[V]=B,R?(R=F^b[b[b[z^F]]],E^=b[b[E]]):R=E=1}})();var p=[0,1,2,4,8,16,32,64,128,27,54],x=i.AES=e.extend({wX:function(){if(!this.HX||this.$X!==this.VX){for(var b=this.$X=this.VX,v=b.words,R=b.sigBytes/4,E=4*((this.HX=R+6)+1),V=this.XX=[],F=0;F<E;F++)F<R?V[F]=v[F]:(B=V[F-1],F%R?R>6&&F%R==4&&(B=s[B>>>24]<<24|s[B>>>16&255]<<16|s[B>>>8&255]<<8|s[255&B]):(B=s[(B=B<<8|B>>>24)>>>24]<<24|s[B>>>16&255]<<16|s[B>>>8&255]<<8|s[255&B],B^=p[F/R|0]<<24),V[F]=V[F-R]^B);for(var L=this.jX=[],z=0;z<E;z++){if(F=E-z,z%4)var B=V[F];else B=V[F-4];L[z]=z<4||F<=4?B:d[s[B>>>24]]^f[s[B>>>16&255]]^y[s[B>>>8&255]]^m[s[255&B]]}}},encryptBlock:function(b,v){this.ZX(b,v,this.XX,a,o,l,u,s)},decryptBlock:function(b,v){var R=b[v+1];b[v+1]=b[v+3],b[v+3]=R,this.ZX(b,v,this.jX,d,f,y,m,n),R=b[v+1],b[v+1]=b[v+3],b[v+3]=R},ZX:function(b,v,R,E,V,F,L,z){for(var B=this.HX,A=b[v]^R[0],T=b[v+1]^R[1],w=b[v+2]^R[2],C=b[v+3]^R[3],k=4,_=1;_<B;_++){var X=E[A>>>24]^V[T>>>16&255]^F[w>>>8&255]^L[255&C]^R[k++],N=E[T>>>24]^V[w>>>16&255]^F[C>>>8&255]^L[255&A]^R[k++],U=E[w>>>24]^V[C>>>16&255]^F[A>>>8&255]^L[255&T]^R[k++],O=E[C>>>24]^V[A>>>16&255]^F[T>>>8&255]^L[255&w]^R[k++];A=X,T=N,w=U,C=O}X=(z[A>>>24]<<24|z[T>>>16&255]<<16|z[w>>>8&255]<<8|z[255&C])^R[k++],N=(z[T>>>24]<<24|z[w>>>16&255]<<16|z[C>>>8&255]<<8|z[255&A])^R[k++],U=(z[w>>>24]<<24|z[C>>>16&255]<<16|z[A>>>8&255]<<8|z[255&T])^R[k++],O=(z[C>>>24]<<24|z[A>>>16&255]<<16|z[T>>>8&255]<<8|z[255&w])^R[k++],b[v]=X,b[v+1]=N,b[v+2]=U,b[v+3]=O},keySize:8});t.AES=e.kX(x)}(),r.AES}(or.exports),H2=function(r){return r.mode.CTR=(e=(t=r.lib.BlockCipherMode.extend()).Encryptor=t.extend({processBlock:function(i,s){var n=this.OX,a=n.blockSize,o=this.NX,l=this.QX;o&&(l=this.QX=o.slice(0),this.NX=void 0);var u=l.slice(0);n.encryptBlock(u,0),l[a-1]=l[a-1]+1|0;for(var d=0;d<a;d++)i[s+d]^=u[d]}}),t.Decryptor=e,t),r.mode.CTR;var t,e}(or.exports),X2=function(r){return function(){if(typeof ArrayBuffer=="function"){var t=r.lib.WordArray,e=t.init,i=t.init=function(s){if(s instanceof ArrayBuffer&&(s=new Uint8Array(s)),(s instanceof Int8Array||typeof Uint8ClampedArray<"u"&&s instanceof Uint8ClampedArray||s instanceof Int16Array||s instanceof Uint16Array||s instanceof Int32Array||s instanceof Uint32Array||s instanceof Float32Array||s instanceof Float64Array)&&(s=new Uint8Array(s.buffer,s.byteOffset,s.byteLength)),s instanceof Uint8Array){for(var n=s.byteLength,a=[],o=0;o<n;o++)a[o>>>2]|=s[o]<<24-o%4*8;e.call(this,a,n)}else e.apply(this,arguments)};i.prototype=t}}(),r.lib.WordArray}(or.exports),W2=function(r){return r.pad.NoPadding={pad:function(){},unpad:function(){}},r.pad.NoPadding}(or.exports);const I6={"-4":["MDQxMmQ1MWU5MjFhYTMzODUwMWE4ZGYzN2ViZTE4NTU3ZDViYmRlZDg1Yzk0OGI3YTJkMDBmZTNhZGVlMjdjY2VmNzBiMWVlOWI3MDZjMTIwYTAzZDZlZTNkNmYyOTc5Y2E2NGEzN2Y3YjY4N2E1ZjljZWY2ODYxN2I1NWU5ZmJjMA=="],"-3":["MjAxODAxMjA="],"-2":["aHR0cHM6Ly9qc2xpY2Vuc2luZy5saWdodG5pbmdjaGFydC5jb20vc2Vzc2lvbg==","aHR0cHM6Ly9saWdodG5pbmdjaGFydC5jb20vanMtY2hhcnRzL2RvY3MvdHJvdWJsZXNob290aW5nL3Jlc3RyaWN0ZWQtZmVhdHVyZXMv","aHR0cHM6Ly9saWdodG5pbmdjaGFydC5jb20vanMtY2hhcnRzLw=="],"-1":["WE1MSHR0cFJlcXVlc3Q=","ZG9jdW1lbnQ=","ZGVmYXVsdFZpZXc=","YQ==","Yg==","bGljZW5zZV9leHBpcmF0aW9uX2RhdGU=","bG9jYXRpb24=","aG9zdG5hbWU=","dGVzdF9kb21haW4=","ZG9tYWlucw==","Y3J5cHRv","U2lnbmF0dXJl","RUNEU0E=","U0hBMjI0d2l0aEVDRFNB","YWxn","Y3VydmU=","c2VjcDI1Nmsx","YWRkRXZlbnRMaXN0ZW5lcg==","cmVtb3ZlRXZlbnRMaXN0ZW5lcg==","bG9hZGVuZA==","ZXJyb3I=","YWJvcnQ=","dGltZW91dA==","cmVzcG9uc2VUZXh0","Q29udGVudC1UeXBl","YXBwbGljYXRpb24vanNvbg==","TWVzc2FnZURpZ2VzdA==","c2hhMjU2","Y3J5cHRvanM=","dXBkYXRlU3RyaW5n","ZGlnZXN0","Y29tcGFueQ==","YXBwVGl0bGU=","bGNqcy1zZXNzaW9u","bG9jYWxTdG9yYWdl","Z2V0SXRlbQ==","c2V0SXRlbQ==","ZA==","dA==","bGNqcy1zZXNzaW9uLTI="],0:["TGljZW5zZQ==","IA==","a2V5","aGFz","ZXhwaXJlZA==","Lg==","dmVyc2lvbg==","aXM=","dG9v","bmV3","b2xk","b3I=","aW52YWxpZA==","MDAwMQ==","SW52YWxpZA==","bnVtYmVy","b2Y=","ZG9tYWlucw==","ZGVwbG95bWVudA==","aW4=","ZG9tYWlu","RGVwbG95bWVudA==","ZG9tYWlu","dmFsaWRhdGlvbg==","ZmFpbGVk","Og==","UE9TVA==","c2VydmVy","cmVzcG9uZGVk","d2l0aA==","dW5leHBlY3RlZA==","dmFsdWU=","cmVxdWVzdA==","VEVTVA==","REVQTE9ZTUVOVA==","S2V5","VGFtcGVyaW5n","YmVlbg==","ZGV0ZWN0ZWQ=","TWlzc2luZw==","TGljZW5zZQ==","aW5mb3JtYXRpb24=","ZG9lcw==","bm90","aW5jbHVkZQ==","cGVybWlzc2lvbg==","dG8=","dXNl","Q2hhcnQ=","M0Q=","WFk=","RGF0YUdyaWQ=","TWFw","UG9sYXI=","RnVubmVs","R2F1Z2U=","UGll","UHlyYW1pZA==","U3BpZGVy","Zm9y","dGhpcw==","VHJhZGluZw==","ZmVhdHVyZXM=","Y2xpY2s=","aGVyZQ==","bW9yZQ==","c3VwcGxpZWQ=","Z2V0","bGljZW5zZQ==","VHJlZQ=="],1:["aHR0cHM6Ly9qc2xpY2Vuc2luZy5saWdodG5pbmdjaGFydC5jb20vc2FuZGJveA=="]},hs=nt,ct=(...r)=>r.slice(1).reduce((t,e)=>t+hs.atob(I6[r[0]][e].toString()),"");let es,Rt,$2,wa=new Uint8Array([]);class U6{set e(t){es=t}get e(){Rt={qd:!1,tf:!1,if:!1,sf:!1,ef:!1,hf:!1,rf:!1,nf:!1,af:!1,lf:!1,uf:!1,cf:!1,df:!1,ff:!1,Af:!1,gf:!1,mf:!1,yf:!1,pf:!1,Sf:!1,vf:!1,bf:!1,xf:!1,Mf:!1};const t=wa.length,e=t>=1?wa[0]:void 0,i=t>=2?wa[1]:void 0,s=t>=3?wa[2]:void 0;return e!==void 0&&(Rt.qd=!!(1&e),Rt.tf=!!(2&e),Rt.if=!!(4&e),Rt.sf=!!(8&e),Rt.ef=!!(16&e),Rt.hf=!!(32&e),Rt.rf=!!(64&e),Rt.nf=!!(128&e)),i!==void 0&&(Rt.af=!!(1&i),Rt.lf=!!(2&i),Rt.uf=!!(4&i),Rt.cf=!!(8&i),Rt.df=!!(16&i),Rt.ff=!!(32&i),Rt.Af=!!(64&i),Rt.gf=!!(128&i)),s!==void 0&&(Rt.mf=!!(1&s),Rt.yf=!!(2&s),Rt.pf=!!(4&s),Rt.Sf=!!(8&s),Rt.vf=!!(16&s),Rt.bf=!!(32&s),Rt.xf=!!(64&s),Rt.Mf=!!(128&s)),Rt.hf}set l(t){$2=t}get l(){return $2}}let Zo=!1;const Qo=(r,t)=>{const e=new RegExp(`.{${t}}`,"g");return(r.match(e)||[]).map(i=>parseInt(i,16))},pp=r=>{if(r.byteLength===4)return`${r[0].toString().padStart(2,"0")}${r[1].toString().padStart(2,"0")}${r[2].toString().padStart(2,"0")}${r[3].toString().padStart(2,"0")}`},x0=r=>r.getFullYear().toString()+(r.getMonth()+1).toString().padStart(2,"0")+r.getDate().toString().padStart(2,"0"),LS=r=>{const t={},e=r.split("-");if(e.length!==3)return{JX:ct(0,0,1,7,1,12,5)};let i=0;const s=Uint8Array.from(atob(e[1]),p=>p.charCodeAt(0));i+=1;const n=s.subarray(i,i+=20),a=new DataView(s.buffer).getUint16(i,!0);i+=2;const o=Uint8Array.from(Array(a));for(let p=0;p<a;p+=1)o[p]=s[p+i]^n[p%n.byteLength];const l=new DataView(o.buffer);t.KX=o,i=0;const u=Uint8Array.from(Array(l.getUint16(i,!0)));i+=2,u.set(o.subarray(i,i+=u.byteLength)),wa=new Uint8Array(u);const d=pp(o.subarray(i,i+=4)),f=ct(-3,0);if(!d)return{JX:ct(0,0,1,7,1,12,5)};if(d<f)return{JX:ct(0,40,1,2,1,7,1,8,1,10,1,59,1,60,1,6,5)};if(8&u[0]){const p=pp(o.subarray(i,i+=4)),x=x0(new Date);if(!p)return{JX:ct(0,0,1,7,1,12,5)};if(p<x)return{JX:ct(0,0,1,2,1,3,1,4,5),qX:ct(-2,2)}}t.tj=i;const y=`${e[0]}-${e[1]}`,m=Array.prototype.reduce.call(atob(e[2]),(p,x)=>p+`0${x.charCodeAt(0).toString(16)}`.slice(-2),"");return Xn(y,m)?t:{JX:ct(0,0,1,7,1,12,5)}},q2=r=>{const t=r.slice(0,4);let e=r.slice(5);switch(t){case"0001":{e=e.replace(/-/g,"");const i=Uint8Array.from(Qo(e,2)),s=i.slice(36,40),n=new Uint8Array(4),a=(d=>{let f;const y=[];for(let p=0;p<256;p+=1){f=p;for(let x=0;x<8;x+=1)f=1&f?3988292384^f>>>1:f>>>1;y[p]=f}let m=-1;for(let p=0;p<d.length;p+=1)m=m>>>8^y[255&(m^d[p])];return(-1^m)>>>0})(i.slice(0,36));new DataView(n.buffer).setUint32(0,a,!0);const o=i.slice(28,34);let l=0;for(let d=o.length-1;d>0;d-=1)l+=o[d]*2**(8*d);const u=new Date(l);if(x0(u)<ct(-3,0))return{JX:ct(0,0,1,2,1,3,1,4,5),qX:ct(-2,2)};if(s.every((d,f)=>n[f]===d))return{};break}case"0002":return LS(r);default:return{JX:ct(0,0,1,2,1,6,1,7,1,8,1,9,1,11,1,10,5)}}return{JX:ct(0,0,1,2,1,7,1,12,5)}},j2=r=>{if(!r)return{JX:ct(0,14,1,15,1,16,1,17,1,19,1,18,1,2,5)};const t=(r[ct(-1,9)]||r[ct(-1,37)]).map(s=>(s||"").trim());if(t.indexOf(hs[ct(-1,6)][ct(-1,7)])>-1)return{ij:!0};const e=t.filter(s=>s.indexOf("*")>-1);if(Q2(hs[ct(-1,6)][ct(-1,7)],e))return{ij:!0};const i=r[ct(-1,8)]||r[ct(-1,38)];if(i!==""&&i!=null){if(Q2(hs[ct(-1,6)][ct(-1,7)],[i]))return{ij:!1};if(i===hs[ct(-1,6)][ct(-1,7)])return{ij:!1}}return{JX:ct(0,14,1,20,5)}},Xn=(r,t)=>{const e=new S0("secp256k1").keyFromPublic(ct(-4,0),"hex"),i=P6(r).toString();return e.verify(i,t)},J2=r=>{switch(r.slice(0,4)){case"0001":return(t=>{let e,i="";try{const n=t.split("-"),a=n[1],o=n[2],l=n[3];if(!Xn(o,l))return{JX:ct(0,21,1,2,1,7,1,12,5)};const u=mo.parse(o);i=Y2.decrypt({ciphertext:mo.parse(a)},u,{mode:H2,padding:W2,iv:mo.parse("00000000000000000000000000000001")}).toString(U2)}catch{return{JX:ct(0,21,1,2,1,7,1,12,5)}}try{e=JSON.parse(i)}catch{return{JX:ct(0,21,1,2,1,7,1,12,5)}}if(e[ct(-1,5)]===void 0||e[ct(-1,4)]===null||!e[ct(-1,9)])return{JX:ct(0,21,1,2,1,7,1,12,5)};const s=parseInt(ct(-3,0),10)||Number(parseInt(ct(-3,0),10));return e[ct(-1,5)]<s?{JX:ct(0,21,1,2,1,3,1,4,5)}:j2(e)})(r);case"0002":return(t=>{const e=LS(t),i=e.KX,s=e.tj;if(e.JX||i===void 0||s===void 0)return e;let n,a="";try{const o=i.slice(e.tj,s+16),l=new DataView(o.buffer),u=new Int32Array(4);for(let v=0;v<u.length;v+=1)u[v]=l.getInt32(4*v,!1);const d=X2.create(Array.from(u)),f=s+16,y=i.slice(f,i.length),m=new DataView(y.buffer),p=new Int32Array(Math.floor(y.byteLength/4));for(let v=0;v<p.length;v+=1)p[v]=m.getInt32(4*v,!1);const x=X2.create(Array.from(p)),b=Y2.decrypt({ciphertext:x},d,{mode:H2,padding:W2,iv:mo.parse("00000000000000000000000000000001")});a=hs.atob(b.toString(U2))}catch{return{JX:ct(0,21,1,2,1,7,1,12,5)}}try{n=JSON.parse(a)}catch{return{JX:ct(0,21,1,2,1,7,1,12,5)}}return n[ct(-1,37)]?j2(n):{JX:ct(0,21,1,2,1,7,1,12,5)}})(r);default:return{JX:ct(0,21,1,2,1,6,1,7,1,8,1,9,1,11,1,10,5)}}},Z2=(r,t)=>{switch(r.slice(0,4)){case"0001":return((e,i)=>{if(!i)return{JX:ct(0,39,1,40,1,41,5)};const s=e.split("-"),n=s[1].slice(1),a=s[2],o=s[3];if(!Xn(`${n}-${a}`,o))return{JX:ct(0,21,1,2,1,7,1,12,5)};const l=Uint8Array.from(Qo(a,2));let u=0;for(let b=l.length-1;b>0;b-=1)u+=l[b]*2**(8*b);if(u<(parseInt(ct(-3,0),10)||Number(parseInt(ct(-3,0),10))))return{JX:ct(0,21,1,2,1,3,1,4,5)};const d=Int32Array.from(Qo(n,8)),f=Of(i[ct(-1,31)]).toString(mo),y=Int32Array.from(Qo(f,8)),m=Of(i[ct(-1,32)]).toString(mo),p=Int32Array.from(Qo(m,8)),x=new Int32Array(y.length);for(let b=0;b<x.length;b+=1)x[b]=y[b]^p[b];return d.every((b,v)=>x[v]===b)?{}:{JX:ct(0,21,1,2,1,7,1,12,5)}})(r,t);case"0002":return((e,i)=>{if(!i)return{JX:ct(0,39,1,40,1,41,5)};const s=LS(e),n=s.KX,a=s.tj;if(s.JX||n===void 0||a===void 0)return s;const o=n.slice(a,n.length),l=new DataView(o.buffer),u=new Int32Array(8);for(let x=0;x<u.length;x+=1)u[x]=l.getInt32(4*x,!1);const d=Of(i[ct(-1,31)]).toString(mo),f=Int32Array.from(Qo(d,8)),y=Of(i[ct(-1,32)]).toString(mo),m=Int32Array.from(Qo(y,8)),p=new Int32Array(f.length);for(let x=0;x<p.length;x+=1)p[x]=f[x]^m[x];return u.every((x,b)=>p[b]===x)?{}:{JX:ct(0,21,1,2,1,7,1,12,5)}})(r,t);default:return{JX:ct(0,21,1,2,1,6,1,7,1,8,1,9,1,11,1,10,5)}}},On=(r,t,e=!0,i)=>{Zo=!1,t.so();const s=t.Gr,n=!!s&&(s===nt.document.body||nt.document.body.contains(s)),a=s&&n?s:document.body;if(Array.from(a.children).find(o=>o.id==="lcjs-error")===void 0){const o=nt.document.createElement("div");o.id="lcjs-error",a.append(o),o.style.position="absolute",o.style.top="0px",o.style.left="0px",o.style.width="100%",o.style.height="100%",o.style.backgroundColor="black",o.style.boxSizing="border-box",o.style.padding="20px",o.style.font="Arial",o.style.fontSize="20px";let l,u=(r||"LICENSE_ERROR").toLowerCase().split("_").join(" ");if(u=(e?ct(0,0,1,2,1,23,1,24,25,1):"")+u.charAt(0).toUpperCase()+u.substr(1),i){const d=nt.document.createElement("a");d.href=i,l=d}else l=nt.document.createElement("p1");o.append(l),l.innerHTML=u,l.style.color="red"}},Gn=(r,t,e)=>{t?(r[ct(-1,17)](ct(-1,19),e),r[ct(-1,17)](ct(-1,20),e),r[ct(-1,17)](ct(-1,21),e),r[ct(-1,17)](ct(-1,22),e)):(r[ct(-1,18)](ct(-1,19),e),r[ct(-1,18)](ct(-1,20),e),r[ct(-1,18)](ct(-1,21),e),r[ct(-1,18)](ct(-1,22),e))},Q2=(r,t)=>{const e=r.split(".").reverse();return t.some(i=>{const s=i.split(".").reverse();let n=!1;const a=s.findIndex(l=>l==="*"),o=e.every((l,u)=>!(!n&&(!(u<s.length)||(n=s[u]==="*"&&u+1>2,!n&&l!==s[u]))));return!(a>e.length-1||!o)})},O6=new Map,G6=(r,t)=>{const e=typeof r=="object"?r.license:r,i=typeof r=="object"?r.licenseInformation:t,s=typeof r=="object"?r:void 0,n=new U6;n.e=e;let a=O6.get(e||"E");return a||(a=((o,l)=>{let u,d,f=!1,y=!1,m=!1,p=!1,x="",b=!1,v=!1;try{if(es){const L=(z=>{if(!es)return;const B=es.split("-");if(B.length>0)switch(B[0]){case"0001":return"0001";case"0002":return"0002";case"T001":return"T001";default:return}})();if(L==="0001"){wa=new Uint8Array([2]);const z=(B=>{if(!es)return;const A=es.split("-");return A.length===4?A[1].startsWith("m")?2:1:0})();if(z===1){const B=J2(es);m=!B.ij,u=B,f=!0}else z===2?(u=Z2(es,o),y=!0):(Zo=!0,u=q2(es),p=!0)}else if(L==="0002"){const z=(B=>{if(!es)return;const A=es.split("-");return A.length>=2?Uint8Array.from(atob(A[1]),T=>T.charCodeAt(0))[0]:void 0})();if(z===104)Zo=!0,u=q2(es),p=!0;else if(z===189){const B=J2(es);m=!B.ij,u=B,f=!0}else z===159?(u=Z2(es,o),y=!0):u={JX:ct(0,0,1,7,1,12,5)}}else if(L==="T001"){const z=((A,T)=>{const w=es.split("-");if(w.length!==3)return{JX:ct(0,0,1,7,1,12,5)};const C=`${w[1]}`,k=Array.prototype.reduce.call(atob(w[2]),(dt,Tt)=>dt+`0${Tt.charCodeAt(0).toString(16)}`.slice(-2),"");if(!Xn(C,k))return{JX:ct(0,0,1,7,1,12,5)};let _=0;const X=Uint8Array.from(atob(w[1]),dt=>dt.charCodeAt(_)),N=X.subarray(_,_+=20),U=new DataView(X.buffer).getUint16(_,!0);_+=2;const O=Uint8Array.from(Array(U));for(let dt=0;dt<U;dt+=1)O[dt]=X[dt+_]^N[dt%N.byteLength];_=0;const W=new DataView(O.buffer),I=pp(O.subarray(_,_+=4)),H=ct(-3,0);if(!I)return{JX:ct(0,0,1,7,1,12,5)};if(I<H)return{JX:ct(0,40,1,2,1,7,1,8,1,10,1,59,1,60,1,6,5)};const q=new Date,Q=new Date;q.setDate(q.getDate()+1),Q.setDate(Q.getDate()-1);const J=x0(Q),ot=x0(q);if(I<J||I>ot)return{JX:ct(0,0,1,2,1,3,1,4,5)};const ht=W.getUint16(_,!0),ut=O.subarray(_+=2,_+ht);if(wa=new Uint8Array(ut),T&&"dHJhZGVy"in T&&T.dHJhZGVy==="dGVjaG5pY2FsIGFuYWx5c2lz")return{sj:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="};if(T&&"logoGraphic"in T&&T.logoGraphic){const dt=T.logoGraphic.split("-");return dt.length===3&&Xn(dt[0],dt[2])?{sj:dt[0]}:{JX:ct(0,0,1,7,1,12,5)}}return{JX:ct(0,0,1,7,1,12,5)}})(0,o);u=z;const B=z.sj;B&&l?(typeof B=="string"&&(l.l=B),f=!0):u={JX:ct(0,0,1,7,1,12,5)}}else u={JX:ct(0,0,1,7,1,12,5)}}else{const L=/^(10\.|172\.(1[6-9]|2[0-9]|3[0-1])|192\.168)\./;["localhost","127.0.0.1","::1"].includes(window.location.hostname)||L.test(window.location.hostname)?u={JX:ct(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68),qX:ct(-2,2)}:window.location.host===hs.atob("c3RhY2tzbmlwcGV0cy5uZXQ=")?(v=!0,b=!1,wa=new Uint8Array([38]),u={}):(v=!0,b=!0,wa=new Uint8Array([38]),u={})}}catch{u={JX:ct(0,0,1,7,1,12,5)}}try{p&&(d=hs[ct(-1,34)][ct(-1,35)](ct(-1,39))||void 0)}catch(L){hs.console.error(L)}let R=!1;if(d){const L=d.split("-");if(L.length===2&&Xn(L[0],L[1])){const[z,B]=L[0].split(":").map(A=>Number(A));Date.now()-B<.95*z*1e3&&(R=!0)}}const E=!(v||b||u.JX||f||y||R),V=(()=>{const L=new hs[ct(-1,0)];return L.open(ct(0,26),ct(-2,0)),L.setRequestHeader(ct(-1,24),ct(-1,25)),L.withCredentials=!0,L})(),F=new Ii;if(E){let L;try{L=parseInt(es?es.split("-")[1]:Math.floor(1e6*Math.random()).toString(),16)}catch{L=Math.floor(1e6*Math.random())}const z=Math.floor(1e6*Math.random());x=(L^z).toString();const B={};let A="",T="",w="";es=es||"";const C=ct(-4,0);for(let _=0;_<es.length;_+=1){const X=es.charCodeAt(_)^C.charCodeAt(_);A+=String.fromCharCode(X)}const k=ct(-3,0);for(let _=0;_<k.length;_+=1)T+=String.fromCharCode(k.charCodeAt(_)^C.charCodeAt(_));for(let _=0;_<x.length;_+=1)w+=String.fromCharCode(x.charCodeAt(_)^C.charCodeAt(_));B[ct(-1,3)]=hs.btoa(A),B[ct(-1,4)]=hs.btoa(T),B.h=hs.btoa(w),B.v=3,B.s=hs[ct(-1,34)][ct(-1,35)](ct(-1,33))||void 0,V.send(JSON.stringify(B))}return(L,z)=>{const B=[],A={Nn:N=>{B.indexOf(N)>=0||(B.push(N),T())},Gn:N=>F.on("logoChange",N),Wn:N=>F.off(N)},T=()=>{B.forEach(N=>{const U=C(N);if(!U)return;const{ej:O,hj:W}=U,I=W?ct(-2,1):void 0,H=`${ct(0,40,1,42,1,43,1,44,1,45,1,46,1,47,1)}${O}${I?ct(0,1,63,1,64,1,59,1,65,1,41):""}`;On(H,k,!1,I)})},w=N=>N.toLowerCase().split("_").join(" "),C=N=>{var U;const O=(U=Object.entries(Ct).find(W=>W[1]===N))===null||U===void 0?void 0:U[0];if(O){switch(N){case Ct.if:return Rt.qd||Rt.if?void 0:{ej:w(O),hj:!0};case Ct.rf:return Rt.qd||Rt.rf?void 0:{ej:w(O),hj:!0};case Ct.nf:return Rt.qd||Rt.tf||Rt.nf?void 0:{ej:w(O)};case Ct.tf:return Rt.qd||Rt.tf?void 0:{ej:w(O)};case Ct.df:return Rt.qd||Rt.tf||Rt.df?void 0:{ej:w(O)};case Ct.gf:return Rt.qd||Rt.tf||Rt.gf?void 0:{ej:w(O)};case Ct.Sf:return Rt.qd||Rt.tf||Rt.Sf?void 0:{ej:w(O)};case Ct.bf:return Rt.qd||Rt.tf||Rt.bf?void 0:{ej:w(O)};case Ct.xf:return Rt.qd||Rt.tf||Rt.xf?void 0:{ej:w(O)};case Ct.vf:return Rt.qd||Rt.tf||Rt.vf?void 0:{ej:w(O)};case Ct.lf:return Rt.qd||Rt.tf||Rt.lf?void 0:{ej:w(O)};case Ct.Af:return Rt.qd||Rt.tf||Rt.Af?void 0:{ej:w(O)};case Ct.cf:return Rt.qd||Rt.tf||Rt.cf?void 0:{ej:w(O)};case Ct.mf:return Rt.qd||Rt.tf||Rt.mf?void 0:{ej:w(O)};case Ct.pf:return Rt.qd||Rt.tf||Rt.pf?void 0:{ej:w(O)};case Ct.yf:return Rt.qd||Rt.tf||Rt.yf?void 0:{ej:w(O)};case Ct.af:return Rt.qd||Rt.tf||Rt.af?void 0:{ej:w(O)};case Ct.uf:return Rt.qd||Rt.tf||Rt.uf?void 0:{ej:w(O)};case Ct.ff:return Rt.qd||Rt.tf||Rt.ff?void 0:{ej:w(O)};case Ct.Mf:return Rt.qd||Rt.tf||Rt.Mf?void 0:{ej:w(O)};case Ct.qd:case Ct.sf:case Ct.hf:case Ct.ef:return}return Xl(0,"")}},k=new z6(z,L,A);u!=null&&u.JX&&On(u.JX,k,void 0,u.qX);const _=N=>{if((N==null?void 0:N.type)==="error"&&d){const U=d.split("-");if(U.length===2&&Xn(U[0],U[1])){const[,O]=U[0].split(":").map(W=>Number(W));if(O+9e5>Date.now())return Zo=!1,void Gn(V,!1,X)}}if(V.readyState===hs[ct(-1,0)].DONE)if(V.status===200){const U=JSON.parse(V[ct(-1,23)]);if(!Xn(x+ct(-3,0),U.h)){const O=ct(0,0,1,27,1,28,1,29,1,30,1,31,5);On(O,k)}hs[ct(-1,34)][ct(-1,36)](ct(-1,39),U.t),hs[ct(-1,34)][ct(-1,36)](ct(-1,33),U.s),Zo=!1}else{let U="";try{U=N&&N.type!=="loadend"?ct(0,0,1,23,1,32,1,24,5):JSON.parse(V[ct(-1,23)]).message,Gn(V,!1,X)}catch(O){console.error(O)}On(ct(0,0,1,2,1,7,1,12,5)+U,k)}},X=N=>{_(N)};if(Gn(V,!0,X),E?setTimeout(()=>{if(Zo){let N=!0;if(d){const U=d.split("-");if(U.length===2&&Xn(U[0],U[1])){const[,O]=U[0].split(":").map(W=>Number(W));O+9e5>Date.now()&&(N=!1)}}N&&On(ct(0,25,1,23,1,32,1,24,5),k)}},1e4):Gn(V,!1,X),b){const N=(()=>{const I=new hs[ct(-1,0)];return I.open(ct(0,26),ct(1,0)),I.setRequestHeader("Content-Type","text/plain"),I.withCredentials=!0,I})(),U=Array.from({length:10},()=>String.fromCharCode(Math.floor(256*Math.random()))).join(""),O=I=>{if((I==null?void 0:I.type)==="error"){const H=ct(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);On(H,k,!1,ct(-2,2)),Gn(V,!1,W)}if(N.readyState===hs.XMLHttpRequest.DONE){const H=N.getResponseHeader("X-LCJS-SANDBOX-V");if(N.status!==200||H&&H!=="1"){const q=ct(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);On(q,k,!1,ct(-2,2)),Gn(V,!1,W)}else{const q=JSON.parse(N.responseText);if(!Xn(U,q.s)){const Q=ct(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);On(Q,k,!1,ct(-2,2)),Gn(V,!1,W)}l!==void 0&&(l.l=q.l),F.emit("logoChange",q.l)}}else{const H=ct(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);On(H,k,!1,ct(-2,2)),Gn(V,!1,W)}},W=I=>{O(I)};Gn(N,!0,W),N.send(U),setTimeout(()=>{if(N.readyState<2){const I=ct(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);On(I,k,!1,ct(-2,2)),Gn(V,!1,W)}},1e4)}return m?(N=>{let U;Zo=!1;const O=N.oi(),W=()=>{U&&(N.xn(U.bn()),U=void 0),U=N.FI("deployment test"),U.Pr(N.dt).Rh(ct(0,34,1,33)).Fe({x:O.x/2,y:O.y/2}).ba(50).Nh(13).Ce(new it({color:P(128,128,128,100)})).Sa("Arial").Ma(500).setMouseInteractions(!1),N.pn().Sn()};N.Co(()=>{W()}),setTimeout(W,0),setInterval(()=>{U&&U.bn()<N.do()-1?W():U||W()},1e3)})(k):V.readyState===hs[ct(-1,0)].DONE&&_(),k}})(i,n)),((o,l,u,d)=>{var f,y,m,p,x,b,v,R,E,V;let F;if(u&&u.license){const T=u.license.split("-");F=T[T.length-1]}const L=((f=u==null?void 0:u.webgl)===null||f===void 0?void 0:f.version)||((m=(y=u==null?void 0:u.sharedContextOptions)===null||y===void 0?void 0:y.webgl)===null||m===void 0?void 0:m.version),z={WE:(p=u==null?void 0:u.sharedContextOptions)===null||p===void 0?void 0:p.canvas,Hn:u==null?void 0:u.warnings,qE:L==="webgl1"?1:L==="webgl2"?2:void 0,ZE:((x=u==null?void 0:u.sharedContextOptions)===null||x===void 0?void 0:x.antialias)!==!1,jE:((b=u==null?void 0:u.sharedContextOptions)===null||b===void 0?void 0:b.devicePixelRatio)||void 0,az:((v=u==null?void 0:u.sharedContextOptions)===null||v===void 0?void 0:v.noCanvasStyles)||void 0,dz:((R=u==null?void 0:u.sharedContextOptions)===null||R===void 0?void 0:R.noCanvasTransform)||void 0,JE:((E=u==null?void 0:u.sharedContextOptions)===null||E===void 0?void 0:E.useStackingOrder)!==!1,KE:((V=u==null?void 0:u.sharedContextOptions)===null||V===void 0?void 0:V.useIndividualCanvas)!==!1,lz:F||void 0},B=new mz(z),A=T=>o(T,B);return{Dashboard:pz(A,l,u,d),ChartXY:xz(A,l,u,d),Spider:Az(A,l,u,d),Polar:vz(A,l,u,d),Pie:bz(A,l,u,d),UIPanel:Sz(A,l,u,d),Gauge:Mz(A,l,u,d),Funnel:Rz(A,l,u,d),Pyramid:Ez(A,l,u,d),Chart3D:wz(A,l,u,d),Map:Tz(A,l,u,d),DataGrid:Cz(A,l,u,d),BarChart:kz(A,l,u,d),ZoomBandChart:Dz(A,l,u,d),TreeMapChart:Fz(A,l,u,d),dispose:B.W.bind(B),layout:B.yz.bind(B)}})(a,n.e,s,n.l)},Y6=()=>{const r=St.useRef(null),t=St.useRef(`chart-${Math.random().toString(36).substr(2,9)}`);return St.useEffect(()=>{const e=r.current;if(!e)return;const i=G6({license:"0002-n0i9AP8MN/ezP+gV3RZRzNiQvQvBKwBJvTnrFTHppybuCwWuickxBJV+q3qyoeEBGSE4hS0aeo3pySDywrb/iIsl-MEUCIAiJOU3BrUq71LqSlRAIFAI0dKK05qBRIJYHFmBoOoIHAiEA4Y55O1QpeuEkiuVktPGLauOHc1TzxNu85/vz/eNscz8=",licenseInformation:{appTitle:"LightningChart JS Trial",company:"LightningChart Ltd."}}),s=i.ChartXY({container:e,theme:eT.turquoiseHexagon}).setTitle("Sweeping ECG"),n=Date.now(),a=s.getDefaultAxisX().setScrollStrategy(Zr.progressive).setTickStrategy(Cl.Time,x=>x.setTimeOrigin(n));s.getDefaultAxisY().setInterval(-200,200).setTickStrategy(Cl.Numeric);const o=s.addLineSeries({dataPattern:{pattern:"ProgressiveX"},strokeStyle:vt,fillStyle:new it({color:vs("#75FF32")})}),l=2e3,u=30,d=l*u,f=new Array(l).fill(0);let y=0;a.setInterval(0,d);const m=x=>100*Math.sin(2*Math.PI*x*1.5)+30*Math.sin(2*Math.PI*x*12)+(x%1<.02?150:0),p=setInterval(()=>{const x=y*u,b=m(x/1e3);f[y%l]=b;const v=[];for(let R=0;R<l;R++){const E=(y+R+1)%l,V=R*u;v.push({x:V,y:f[E]})}o.clear().add(v),y++},u);return()=>{clearInterval(p),s.dispose(),i.dispose()}},[]),sh.jsx("div",{ref:r,id:t.current,style:{width:"100%",height:"600px"}})};function H6(){return sh.jsx(j5,{basename:"/Chart",children:sh.jsx(E5,{children:sh.jsx(uM,{path:"/",element:sh.jsx(Y6,{})})})})}zC.createRoot(document.getElementById("root")).render(sh.jsx(St.StrictMode,{children:sh.jsx(H6,{})}));
